import{h as y,k as g}from"./chunk-P5BPG5MC.js";import{g as t}from"./chunk-PPQ6BNOX.js";import{a as n,i as l,n as i}from"./chunk-NSVULBS3.js";l();i();var p="default",R=t.union([t.literal("vote"),t.literal("vote-2"),t.literal("stake"),t.literal("stake-2"),t.literal("view"),t.literal("chat"),t.literal("tip"),t.literal("mint"),t.literal("mint-2"),t.literal("discord"),t.literal("twitter"),t.literal("twitter-2"),t.literal("x"),t.literal("instagram"),t.literal("telegram"),t.literal("leaderboard"),t.literal("gaming"),t.literal("gaming-2"),t.literal("generic-link"),t.literal("generic-add"),t.literal(p)]).optional().default(p).catch(p),x=t.object({label:t.string(),uri:t.string().url().refine(e=>e.startsWith("https://")||e.startsWith("solana:"),e=>({message:`${e} is not a valid protocol`})),prefersExternalTarget:t.boolean().optional().default(!1),preferredPresentation:t.union([t.literal("default"),t.literal("immerse")]).optional().default("immerse"),platform:t.union([t.literal("mobile"),t.literal("desktop"),t.literal("all")]).optional().default("all"),icon:R}),S=x.extend({limitToCollections:t.string().array().optional().default([]).refine(e=>e.length===0?!0:e.every(r=>r.length),e=>({message:`${e} is not a valid array of collection ids`}))}),v=x.extend({type:t.literal("fungible"),limitToTokenAddresses:t.string().array().optional().default([]).refine(e=>e.length===0?!0:e.every(r=>r.length),e=>({message:`${e} is not a valid array of token addresses`}))}),k=S.extend({type:t.literal("collectible").optional().default("collectible")}),F=t.union([k,v]),h=t.union([t.object({version:t.literal(1),shortcuts:t.array(S).optional().default([])}),t.object({version:t.literal(2),shortcuts:t.array(F).optional().default([])})]),C=t.object({collectionId:t.string().optional(),tokenId:t.string().optional(),ownerAddress:t.string().optional()});l();i();l();i();l();i();var w=n(e=>{let r=e.pathname.split("/").filter(s=>s!=="").join("/"),o=new URL(`https://${e.hostname}`);return o.pathname=r+"/shortcuts.json",o.search=e.search,o},"appendShortcut"),d=n(e=>{if(!e||!e.trim())return"";let r=e.trim();return/^https?:\/\//.test(r)?r:`https://${r}`},"ensureExternalUrl"),m=n(e=>{if(!e)return!1;try{return new URL(e),!0}catch{return!1}},"isValidUrl");var $="wallet-shortcuts",b=n(e=>({queryKey:[$,e?.toString()],async queryFn(){if(!e)throw new Error("URL is null");let o=w(e),s=await j(o);if(h.safeParse(s).success===!1)throw new Error(`Invalid shortcut response from URL ${o.toString()}`);return h.parse(s).shortcuts}}),"getShortcutsQuery"),U=new Error("Failed to fetch shortcuts for collection"),j=n(async e=>{let r="/collectibles/v1/shortcuts",o;try{o=await y.api().post(r,{uri:e.toString()})}catch{throw U}if(!g(o))throw U;return o.data},"fetchShortcuts");var A=10;function X(e,r,o){if(!r)return;let{externalUrl:s,isSpam:T,items:E}=r;if(T||!o)return;let L=(E??[]).map(a=>a.externalUrl);Array.from(new Set([s,...L])).reduce((a,c)=>{let u=d(c);return m(u)&&a.length<A?[...a,u]:a},[]).forEach(a=>{let c=d(a);m(c)&&e.prefetchQuery(b(new URL(c))).catch(u=>{console.error(`Failed to prefetch ${c}`,u)})})}n(X,"prefetchShortcuts");export{p as a,d as b,m as c,$ as d,b as e,X as f};
//# sourceMappingURL=chunk-VC6GOMGS.js.map
