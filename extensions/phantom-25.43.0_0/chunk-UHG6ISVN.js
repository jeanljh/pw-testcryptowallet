import{a as bn}from"./chunk-EVXXECVZ.js";import{D as Is,E as As,H as Os,R as ks,U as Ms,V as Ds,W as Bs,Z as Us,sa as Vs,w as Ts,y as vs,z as Es}from"./chunk-5RCV3KPE.js";import{Ja as ts,f as Ji,h as Zi,o as es}from"./chunk-RKMQYZSN.js";import{jc as rn,n as er,nc as tr,rb as tn,s as en,xb as Yi}from"./chunk-COS4XKZ5.js";import{$a as nt,Ab as uo,Ad as Rs,B as ao,E as Er,Fc as Ss,Gc as ws,Hb as mn,I as rs,Ib as pn,Ja as nr,K as ns,Ka as W,Kd as Ns,L as os,La as ln,Ld as Ls,Ma as Ir,N as sn,Na as E,Oa as lo,Pa as or,Qa as ir,R as is,Ra as O,Sa as R,Sd as Fs,Ta as bt,U as co,Ua as K,V as an,Va as x,Wa as me,Wb as ds,Xa as sr,Y as ss,Ya as k,Yc as Cs,Za as un,Zc as Ye,_a as le,a as Xi,ab as z,ad as xs,bb as $,bc as Yl,cc as ms,dc as ps,eb as dn,ed as Bt,fd as Or,gb as Ar,h as on,hb as Dt,ia as as,ib as cs,ja as cn,jb as ls,je as $s,k as rr,kd as Be,ld as te,nd as yt,od as Ps,pd as hn,qd as _s,rc as fn,sb as us,sc as fs,tc as hs,td as mo,uc as gs,ud as js,vd as kr,wc as bs,yd as po,zc as ys,zd as gn}from"./chunk-IJLITZAC.js";import{$c as oe,Ac as ne,Gb as $i,Ib as Jr,L as Vi,Pb as F,Qb as zi,Rd as Xl,Td as ee,X as Xr,Zb as Gi,_ as Ne,ae as de,ba as Fi,dc as Hi,i as so,ic as Zr,jc as qi,kd as ce,md as Xe,na as Yr,nc as Ki,oc as Wi,pa as Zt,pd as ie,s as Ri,v as Jt,w as V,wc as Qi,x as Li,xc as ae}from"./chunk-GSVPXWLR.js";import{F as Xt,G as Yt}from"./chunk-P42QO3R7.js";import{S as nn,a as U,d as Re,e as he,m as Ae,r as Y}from"./chunk-LYTSCHVN.js";import{h as De,k as Ni,l as gt}from"./chunk-P5BPG5MC.js";import{g as b,j as Qr}from"./chunk-PPQ6BNOX.js";import{a as o,g as A,i as a,l as Ql,m as Buffer,n as c}from"./chunk-NSVULBS3.js";a();c();a();c();var Te=o(t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},"toUndefined");var Jl=o(t=>t??[],"toEmptyArray"),Le=class extends Error{static{o(this,"CollectiblesError")}constructor(e){super(e),this.name="CollectiblesError"}},N=b.string().nullish().transform(Te),Ut=b.number().nullish().transform(Te),fo=b.union([N,Ut]).transform(t=>typeof t=="number"?t.toString():t),Zl=b.object({name:N,symbol:N,decimals:Ut,address:N}),ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.ReservationListV1=3]="ReservationListV1",t[t.MetadataV1=4]="MetadataV1",t[t.ReservationListV2=5]="ReservationListV2",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker",t[t.UseAuthorityRecord=8]="UseAuthorityRecord",t[t.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",t[t.TokenOwnedEscrow=10]="TokenOwnedEscrow",t[t.TokenRecord=11]="TokenRecord",t[t.MetadataDelegate=12]="MetadataDelegate"})(ar||(ar={}));var yn=b.nativeEnum(ar),Hs=b.object({price:b.number(),token:Zl.nullish().transform(Te)}),eu=Hs.nullish().transform(Te),tu=b.object({name:N,url:N,isVerified:b.coerce.boolean()}),qs=b.object({id:b.string(),isValidCollectionId:b.coerce.boolean(),name:N,description:N,externalUrl:N,imageUrl:N,isSpam:b.coerce.boolean(),spamStatus:b.nativeEnum(Be).optional().default(Be.NotVerified),floorPrice:Hs.nullish().transform(Te),ownerCount:Ut,totalCount:Ut,tokenCount:Ut,marketplaces:b.array(tu)}),ru=b.object({small:N,medium:N,large:N,blurhash:N}),nu=ru.nullish().transform(Te),ou=b.enum(["image","video","audio","model","other"]),iu=b.object({url:N}),Mr=iu.nullish().transform(Te),su=b.object({type:ou,image:Mr,video:Mr,audio:Mr,model:Mr,other:Mr,previews:nu}),au=su.nullish().transform(Te),cu=b.object({trait_type:N,value:N.or(Ut),display_type:N}),lu=b.object({id:b.string(),contract:b.string(),standard:b.nativeEnum(Or)}),Ks=b.object({compressed:b.boolean(),merkleTree:b.string(),leafIndex:b.number()}),uu=b.object({mint:b.string(),tokenAccount:b.string(),standard:b.nativeEnum(Bt),compression:Ks.nullish().transform(Te),programId:b.string(),mintExtensions:Cs(xs).optional()}),du=b.object({id:b.string(),url:b.string(),displayName:b.string(),description:b.string(),count:b.number()}),mu=b.object({hash:b.string(),index:b.number(),distinctRareSats:b.number(),satributes:b.array(du),blockNumber:b.number(),value:b.number(),backgroundImageUrl:b.string()}),pu=b.object({firstCreatedTransactionHash:b.string(),firstCreatedInscriptionId:b.string(),inscriptionId:N,inscriptionNumber:fo,outputValue:fo,satNumber:fo,satName:N,satRarity:N,protocolName:N,utxoHash:N,utxoIndex:Ut,createdAt:b.string().nullish().transform(Te),utxoDetails:mu.nullish().transform(Te)}),fu=b.object({objectId:b.string().optional(),kioskId:b.string().optional()}),hu=b.object({listingPrice:b.string(),listingPriceUiAmount:b.string(),isNative:b.boolean(),url:b.string()}),gu=b.union([uu,lu,pu,fu]),ho=b.object({id:zi,chain:Hi,name:N,symbol:N,description:N,externalUrl:N,collection:qs,media:au,uri:N,attributes:b.array(cu).nullish().transform(Jl),lastSalePrice:eu,balance:N,decimals:N,owner:N,chainData:gu.optional(),listings:b.record(hu).nullish().transform(Te)}),bu=qs.extend({items:b.array(ho)}),qf=b.object({items:b.array(bu),isTrimmed:b.boolean()}),zs;(function(t){t.HiddenTitle="hidden-title",t.HiddenButton="hidden-button",t.Collection="collection",t.Empty="empty",t.CollectiblesTrimmed="collectibles-trimmed",t.AddCollection="add-collection"})(zs||(zs={}));var Gs;(function(t){t.userHid="userHid",t.userUnhid="userUnhid",t.userBurned="userBurned",t.markAsSpam="markAsSpam",t.markAsNotSpam="markAsNotSpam"})(Gs||(Gs={}));var Kf=b.object({compression:Ks.nullish().transform(Te).refine(t=>t?.compressed),mint:b.string()}),Wf=b.object({root:b.string(),proof:b.array(b.string()),merkleTree:b.string(),dataHash:b.string(),creatorHash:b.string(),leafIndex:b.number(),owner:b.string(),delegate:b.string().optional()}),ve;(function(t){t.CONFIRMATION="CONFIRMATION",t.SUBMISSION="SUBMISSION"})(ve||(ve={}));a();c();a();c();var go=A(Ql(),1);function Sn(t){let e=[ar.MasterEditionV1,ar.MasterEditionV2],r=yn.safeParse(t);return r.success&&e.includes(r.data)}o(Sn,"isMasterEdition");var bo=go.Buffer.from("metadata"),yu=go.Buffer.from("edition"),yo=Er.toBuffer();function nh(t){let[e]=V.PublicKey.findProgramAddressSync([bo,yo,t],Er);return e}o(nh,"getMetadataPDA");function Ws(t){let[e]=V.PublicKey.findProgramAddressSync([bo,yo,t,yu],Er);return e}o(Ws,"getMasterEditionPDA");function oh(t){let[e]=V.PublicKey.findProgramAddressSync([bo,yo,t],Er);return e}o(oh,"getCollectionMetadataPDA");var Su="CollectibleEdition";function wu(t,e){return ie({queryKey:[Su,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new V.PublicKey(t).toBytes()),n=Ws(r),{Edition:i}=await ns();try{let s=await i.fromAccountAddress(e,n),l=yn.safeParse(s.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${s.key}`);return{key:l.data,isMasterEdition:Sn(s.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}o(wu,"useCollectibleEdition");a();c();function pe(t){return t?.tokenAccount!==void 0}o(pe,"isSolanaCollectibleChainData");function Je(t){return t?.contract!==void 0}o(Je,"isEvmCollectibleChainData");function Ze(t){return t!==void 0&&"firstCreatedTransactionHash"in t}o(Ze,"isBitcoinCollectibleChainData");function Qs(t){return t!==void 0&&"objectId"in t}o(Qs,"isSuiCollectibleChainData");function Xs(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}o(Xs,"isBitcoinOrdinalCollectibleChainData");function cr(t){return t!==void 0&&"utxoDetails"in t}o(cr,"isBitcoinRareSatsCollectibleChainData");a();c();var Ve=A(U(),1);a();c();a();c();var Ue="collectibles",So=[Ue,"collectibleBids"],B={collections:o(t=>[Ue,"collections",{addresses:t.map(uo)}],"collections"),hiddenCollections:o(t=>[Ue,"hiddenCollections",t],"hiddenCollections"),unhiddenCollections:o(t=>[Ue,"unhiddenCollections",t],"unhiddenCollections"),visibilityOverrides:o(t=>[Ue,"visibilityOverrides",t],"visibilityOverrides"),pinnedCollections:o(t=>[Ue,"pinnedCollections",t],"pinnedCollections"),topCollections:o(t=>[Ue,"topCollections",{addresses:t.map(uo)}],"topCollections"),optimisticUpdates:o(()=>[Ue,"optimisticUpdates"],"optimisticUpdates"),collectibleBids:o(t=>[...So,t],"collectibleBids"),collectibleMintGasEstimation:o(t=>[Ue,"mintNFTGasEstimation",t],"collectibleMintGasEstimation"),collectibleSellSteps:o(t=>[Ue,"collectibleSellSteps",t],"collectibleSellSteps"),createMintTransaction:o(t=>[Ue,"createMintTransaction",t],"createMintTransaction"),transferTransaction:o(t=>[Ue,"transferTransaction",t],"transferTransaction")};var wn=o((t,e)=>{t.invalidateQueries({queryKey:So}),t.invalidateQueries({predicate:o(({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId,"predicate")})},"invalidateBidsAndSellSteps");a();c();var Cu=20;function lr(t,e){let r=B.optimisticUpdates(),n=t.getQueryData(r)??[];t.setQueryData(r,[...n,e])}o(lr,"pushOptimisticUpdate");async function Ys(t,e){let r=B.optimisticUpdates(),n=await t.getQueryState(r);if(n){let i=e??Date.now(),s=n.dataUpdatedAt,l=ee({seconds:Cu});return i-s>l?(t.removeQueries({queryKey:r}),[]):n?.data??[]}else return[]}o(Ys,"getOptimisticUpdates");function Js(t,e){let r=e.reduce((n,i)=>{let{id:s,amount:l}=i,d=new he(l);return n[s]=(n[s]??new he(0)).plus(d),n},{});for(let n of t)n.items=n.items.reduce((i,s)=>{let l=s.id,d=r[l];if(d){let m=new he(s.balance??0);return m.minus(d).isGreaterThan(0)?i.concat({...s,balance:m.minus(d).toString()}):i}else return i.concat(s)},[]);return t=t.filter(n=>n.items.length>0),t}o(Js,"applyOptimisticUpdates");var xu=o(()=>{let{data:t}=tn();return(0,Ve.useMemo)(()=>{let r=t?.identifier??"",n=t?.type===en.Ledger,i=t?.addresses??[],s=i.find(Gi),l=s?.networkID,d=s?.address??"",m=ls(l),p=cs(m);return{accountIdentifier:r,chainAddresses:i,chainId:l,solanaPublicKey:d,isLedger:n,cluster:m,connection:p}},[t])},"useAccountMetadata"),Tu=o((t,e)=>{let[r,n]=(0,Ve.useState)(void 0);return(0,Ve.useEffect)(()=>{o(async()=>{if(!t)return;let l=t.find(f=>f.type==="transaction")?.data?.transaction;if(!l)return;let d=so(l,"base64"),m=await gs(e,[d.message]),p=Ri(m.value);n(p)},"processEncodedTx")()},[t,e]),r},"useSolanaGasEstimation"),vu=o(async(t,e,r,n,i,s)=>{if(!s)throw new Error("Bid summary is required");let{collectionName:l,marketplace:d,receiveAmount:m,currencySymbol:p}=s,f={topRight:{text:`+${m} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:nn(d)}},{data:h,chainId:y,type:w}=e,{transaction:S}=h,C=so(S,"base64"),v={ownerAddress:r.solanaPublicKey,networkID:y,data:{signature:""},type:on.Sell,display:{summary:f}},{accountIdentifier:M,solanaPublicKey:L,connection:I}=r,q=new V.PublicKey(L),X=await ys({accountIdentifier:M,feePayer:q,transaction:C,pendingTransactionInput:v,connection:I,accountSigner:n,storage:i,opts:{skipPreflight:!0}});return{type:w,data:X}},"executeTransactionStep"),Eu="Steps are required",Iu="These steps are not from the same bid",Cn=class extends Error{static{o(this,"StepsRequiredError")}message=Eu},xn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Iu},Au=o((t,e,r,n)=>{let i=oe(),s=de(),l=ce(),d=er(),[m,p]=(0,Ve.useState)("idle"),[f,h]=(0,Ve.useState)(null),[y,w]=(0,Ve.useState)(null),{t:S}=Y(),C=xu(),{chainId:v,connection:M,chainAddresses:L,isLedger:I}=C,q=v&&F.isSolanaNetworkID(v)?v:Zt.Solana.Mainnet,X=Tu(e,q);(0,Ve.useEffect)(o(function(){m==="loading"&&wn(l,r)},"invalidateQueriesOnLoading"),[m,l,r]),(0,Ve.useEffect)(o(function(){m==="success"&&r&&lr(l,{id:r.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[m,l,L,r]);let mt=o(()=>{p("idle"),h(null),w(null)},"reset"),Z=n&&r?.receiveAmount?r.receiveAmount*n:void 0;return{executeSellSolanaSteps:o(async()=>{try{if(t&&t!==r?.orderId)throw new xn;if(!Array.isArray(e)||e.length===0)throw new Cn;p("loading");for await(let re of e){let pt=await vu(S,re,C,d,i,r);w(pt.data),await bs({connection:M,signature:pt.data})}p("success"),s.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:Z}})}catch(re){let pt=re?.message??"";(!(re instanceof Cn)||!(re instanceof xn))&&(ne.captureError(re,ae.Collectibles),s.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:Z,errorMessage:pt}})),p("error"),h(re)}},"executeSellSolanaSteps"),reset:mt,gas:X,error:f,result:y,status:m,isLedger:I}},"useInstantSellExecuteSolanaSteps");a();c();var ng=o(t=>`${t/100}%`,"bpsToPercent"),Zs=o((t,e)=>t*e/100/100,"bpsToValue");a();c();var ia=A(ao(),1),mr=A(U(),1);a();c();a();c();var St=o((t,e,r,n)=>{(!e||e>=400&&e<500)&&(ne.addBreadcrumb(r,t.message,Qi.Info,n),ne.captureError(t,ae.Collectibles))},"captureClientError");a();c();var Pe;(function(t){t[t.Always=1/0]="Always",t[t.Short=ee({days:1})]="Short",t[t.Medium=ee({days:3})]="Medium",t[t.Long=ee({days:7})]="Long"})(Pe||(Pe={}));var be;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=ee({minutes:1})]="Short",t[t.Medium=ee({minutes:2.5})]="Medium",t[t.Long=ee({minutes:5})]="Long",t[t.Never=1/0]="Never"})(be||(be={}));var ur;(function(t){t[t.Shortest=ee({seconds:10})]="Shortest",t[t.Shorter=ee({seconds:30})]="Shorter",t[t.Short=ee({minutes:1})]="Short",t[t.Medium=ee({minutes:2.5})]="Medium",t[t.Long=ee({minutes:5})]="Long",t[t.Longer=ee({minutes:7.5})]="Longer",t[t.Longest=ee({minutes:10})]="Longest"})(ur||(ur={}));var Ou=b.object({caip19:b.string(),name:b.string(),symbol:b.string()}),ku=b.object({bps:b.number(),kind:b.union([b.literal("marketplace"),b.literal("royalty")]),recipient:b.string().optional()}),Mu=b.object({amount:b.number(),feeBreakdown:b.array(ku),netAmount:b.number(),token:Ou,totalFeeBps:b.number()}),Du=b.object({name:b.string(),logo:b.string(),url:b.string().optional()}),Bu=b.object({id:b.string(),expiration:b.string().optional(),price:Mu,source:Du}),Uu=b.object({bids:b.array(Bu)}),ea=new Le("Failed to fetch collectible bids."),Pu="collectible-instant-sell-bids",_u=o(async t=>{if(!t.address)throw ea;try{let e=await De.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=Uu.parse(e.data);return r}catch(e){if(gt(e)){let r=e.response?.status;St(e,r,Pu)}throw ea}},"getCollectibleBids"),ta=o(({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return ie({enabled:r,staleTime:be.Short,refetchInterval:ur.Shortest,queryKey:B.collectibleBids(t),async queryFn(){return _u(t)}})},"useCollectibleBids"),ra=o(t=>{let e=t?.chainData,r=t?.chain.id??null,n=Je(e),i=pe(e),s=n?{tokenId:e.id}:{},l=i?{contractType:e.standard}:{},d=n?e.contract.toLowerCase():i?e.mint:null;return{chainId:r,address:d,resourceType:"address",...s,...l}},"createBidAsset");a();c();var ju=A(U(),1);var se=b.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Ru=b.enum(["/execute/auth-signature/v1","/order/v3"]),et=b.enum(["transaction","signature","post","refetch"]),Nu=b.enum(["eip712","eip191"]),Lu=b.object({domain:b.any(),types:b.any(),value:b.any()}),Vu=b.object({message:b.string()}),Fu=b.object({from:b.string(),to:b.string(),data:b.string()}),$u=b.object({endpoint:Ru,body:b.object({id:b.string(),kind:b.string()})}),zu=b.object({action:se,chainId:Yr,type:b.literal(et.enum.signature),data:b.object({signatureKind:Nu,signatureData:b.union([Vu,Lu]),postData:$u})}),Gu=b.object({chainId:Yr,action:se,data:Fu,type:b.literal(et.enum.transaction)}),Hu=b.object({chainId:Yr,action:se,type:b.literal(et.enum.refetch),data:b.object({resource:b.string()})}),qu=b.union([zu,Gu,Hu]),Ku=b.object({action:se,chainId:Fi,type:b.literal(et.enum.transaction),data:b.object({transaction:b.string()})}),Wu=b.union([qu,Ku]),Qu=b.object({steps:b.array(Wu),orderId:b.string().optional()}),Xu=new Le("Failed to fetch collectible sell steps."),Yu="collectible-instant-sell-steps",Ju=o(async t=>{try{let e=await De.api().validateStatus(!0).post("/collectibles/v1/sell",t);return Qu.parse(e.data)}catch(e){if(gt(e)){let r=e.response?.status;if(St(e,r,Yu),e.response?.data?.code){let{code:n}=e.response.data;throw{code:n}}if(r)throw e}throw Xu}},"getCollectibleSellSteps"),na=o(({sellAsset:t})=>{let e=t.details.orderId!==void 0;return ie({enabled:e,queryKey:B.collectibleSellSteps(t),staleTime:be.Never,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:o((r,n)=>n.code?!1:r<3,"retry"),async queryFn(){return Ju(t)}})},"useCollectibleSellSteps");var oa=o((t,e,r)=>{let n=r?.chainData,i=Je(n),s=pe(n),l=r?.owner,d=i?l?.toLowerCase():l,m=e?.id,p=e?.source?.name,f=s?{minPrice:e?.price?.netAmount,tokenAccount:n.tokenAccount}:{};return{details:{asset:t,owner:d,orderId:m,marketplace:p,...f}}},"createSellAsset");a();c();Re.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var dr=o((t,e)=>new Re(t).div(an(e)).toNumber(),"amountToBalance");var Zu={steps:[],orderId:""},ed=o(({collectible:t})=>{let{t:e}=Y(),r=(0,mr.useMemo)(()=>ra(t),[t]),{data:n=[],isPending:i,isError:s}=ta({bidAsset:r,isEnabled:!0}),l=(0,mr.useMemo)(()=>n.length>0?n[0]:void 0,[n]),d=(0,mr.useMemo)(()=>oa(r,l,t),[r,l,t]),{data:m=Zu,isPending:p,isError:f,refetch:h,error:y}=na({sellAsset:d}),w=(0,mr.useMemo)(()=>l&&t?sa({t:e,bid:l,collectible:t}):void 0,[e,l,t]),S=(0,mr.useMemo)(()=>f?Number.isInteger(y.code):!1,[f,y]);return{bid:l,bidSummary:w,isLoadingBids:i,isErrorBids:s,sellSteps:m,isLoadingSellSteps:p,isErrorSellSteps:f,refetchSellSteps:h,sellStepsError:y,isSellErrorCode:S}},"useInstantSell"),td=o(({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,"calculatePNL"),rd=o(({offerAmount:t,collectionFloor:e})=>t-e,"calculateFloorDifference"),nd=o(t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,ia.default)(t).format(e);return`${t>0?"+":""}${r}`},"getFloorDifferencePercentage"),od=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return dr(e,n)}},"parseCollectionFloor"),id=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return dr(e,n)}},"parseLastSale"),sd=o(t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large},"getCollectibleImagePreview"),pr;(function(t){t.BLUR="Blur"})(pr||(pr={}));var sa=o(({bid:t,collectible:e,t:r})=>{let{lastSalePrice:n,media:i,name:s,collection:l}=e,{name:d,logo:m}=t.source,{amount:p,netAmount:f,feeBreakdown:h,token:y,totalFeeBps:w}=t.price,{symbol:S,caip19:C}=y,v=0,M=f,L=l.id,I=e.id,q=id(n),X=S.slice(0,6),mt=e.chain.symbol,Z=od(l.floorPrice),xe=Z?rd({offerAmount:p,collectionFloor:Z}):void 0,re=xe?nd(xe):void 0;return{bidTokenSymbol:X,caip19:C,collectionId:L,collectibleId:I,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:mt,collectionFloor:Z,collectibleImage:sd(i),collectibleName:s??r("collectiblesUnknownCollectible"),collectionName:l.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name===pr.BLUR?mt:X,fees:h,floorDifference:xe,floorDifferencePercent:re,lastSale:q,marketplace:d,marketplaceLogoURL:m,offerAmount:p,offerAmountFormatted:bn(p),phantomFeePercentage:v,pnl:td({lastSale:q,receiveAmount:M}),receiveAmount:M,receiveAmountFormatted:bn(M),totalFeeBps:w}},"parseBidSummary"),ad=o(({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let n=Zs(e,r)+t.toNumber();return{raw:n,formatted:bn(n)}},"formatEstimatedFees");a();c();var aa=new Map([[se.enum["nft-approval"],8e4],[se.enum["blur-swap"],42e3],[se.enum.sale,39e4],["default",42e4]]),cd=o((t,e,r,n)=>{let i=t===pr.BLUR,s=r.filter(C=>C.type==="transaction").map(({action:C})=>({action:C}));if(s.some(({action:C})=>C===se.enum["nft-approval"])||(s=[...s,{action:se.enum["nft-approval"]}]),i){let C=s.some(({action:M})=>M===se.enum.sale),v=s.some(({action:M})=>M===se.enum["blur-swap"]);C||(s=[...s,{action:se.enum.sale}]),v||(s=[...s,{action:se.enum["blur-swap"]}])}let d=s?.reduce((C,{action:v})=>{let M=aa.get(v)??aa.get("default");return C+(M??0)},0),m=new he(d),{status:p,data:f}=As({gasLimit:m,networkID:e,transactionSpeed:rr.standard}),{data:h}=Os(e,f),y=as(f),w=Number(y?.replace(/[^\d.]/g,"")??0),S=n?n.isGreaterThan(w):!1;return{gasEvm:w,gasEstimation:f,gasEstimationStatus:p,ethFeeUI:y,gasEstimationPrice:h,hasEnoughGas:S}},"useInstantSellEvmGasEstimation");a();c();var ot=A(U(),1);var ld=o(()=>{let{data:t}=tn();return(0,ot.useMemo)(()=>{let r=t?.type,n=t?.name??"",i=t?.addresses??[],s=t?.identifier??"";return{isLedger:t?.type===en.Ledger,accountName:n,accountType:r,chainAddresses:i,accountIdentifier:s}},[t])},"useAccountMetadata"),ud=o(({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:n,accountSigner:i,storage:s,includeCallPayload:l})=>({accountSigner:i,accountIdentifier:n,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:on.Sell,display:{summary:r}},storage:s}),"buildArgs"),dd=o(async(t,e,r,n,i,s,l)=>{try{if(!r)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:d,chainId:m,action:p}=e,{collectionName:f,marketplace:h,receiveAmount:y,currencySymbol:w,collectibleChainSymbol:S,bidTokenSymbol:C}=l,v=nn(h),M={};p==="nft-approval"&&(M={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:f})},bottomLeft:{text:v}}),p==="sale"&&(M={topRight:{text:`+${y} ${w}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${f}`},bottomLeft:{text:v}}),p==="blur-swap"&&(M={topRight:{text:`+${y} ${S}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${y} ${C}`},bottomLeft:{text:v}});let L=Yt.parse({type:Xt.eip1559,to:d.to,from:d.from,data:d.data,chainId:F.getEVMNetworkIDValue(m),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),I=ud({storage:n,accountSigner:i,pendingActivityRows:M,includeCallPayload:!1,networkID:m,unsignedTransaction:L,accountIdentifier:s.accountIdentifier}),q=await ds(I);return{type:e.type,data:q}}catch(d){return{type:e.type,error:d}}},"executeTransactionStep"),md=o(async(t,e,r)=>{try{let{chainId:n,data:i}=t,{signatureData:s,signatureKind:l,postData:d}=i;if(l==="eip191"&&"message"in s){let m=await e.sign(r.accountIdentifier,{signingType:"message",chainType:Xr.EVM,message:s.message});if(m.status==="success")return await De.api().post("/collectibles/v1/submit-signature",{chainId:n,signature:m.signature,postData:d}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(n){return{type:t.type,error:n}}},"executeSignatureStep"),pd=o(async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:n}=await e();return{type:t.type,data:n?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},"executeRefetchSteps"),fd=[se.enum.auth,se.enum["nft-approval"],se.enum.sale],hd="Steps are required",gd="These steps are not from the same bid",Tn=class extends Error{static{o(this,"StepsRequiredError")}message=hd},vn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=gd},bd=o((t,e,r,n,i,s,l)=>{let d=oe(),m=de(),p=ce(),f=er(),[h,y]=(0,ot.useState)("idle"),[w,S]=(0,ot.useState)(null),[C,v]=(0,ot.useState)(null),{t:M}=Y(),L=ld(),{chainAddresses:I,isLedger:q}=L;(0,ot.useEffect)(o(function(){h==="loading"&&wn(p,i)},"invalidateQueriesOnLoading"),[h,p,i]),(0,ot.useEffect)(o(function(){h==="success"&&i&&lr(p,{id:i.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[h,p,I,i]);let X=o(()=>{y("idle"),S(null),v(null)},"reset"),mt=l&&i?.receiveAmount?i.receiveAmount*l:void 0,Z=o(async(xe,re=new Map)=>{let pt=xe??e;try{if(t&&t!==""&&t!==i?.orderId)throw new vn;if(!Array.isArray(pt)||pt.length===0)throw new Tn;y("loading");for await(let ft of pt){let{action:ht}=ft,Hl=re.get(ht)==="success",ql=ht===se.enum.sale,Pi=ht===se.enum.refetch,Kl=fd.some(Qt=>Qt===ht);if(Hl)continue;Pi||re.set(ht,"loading");let Wl=o(async Qt=>{switch(Qt.type){case et.enum.transaction:return await dd(M,Qt,r,d,f,L,i);case et.enum.signature:return await md(Qt,f,L);case et.enum.refetch:return await pd(Qt,n)}},"handleStep"),{type:_i,data:io,error:ji}=await Wl(ft);if(Kl&&ji)throw ji;if(io&&(Pi||re.set(ht,"success"),_i===et.enum.transaction&&ql&&v(io),_i===et.enum.refetch))return await Xi(500),await Z(io,re)}y("success"),m.capture("collectibleSellSuccess",{data:{bidSummary:i,usdSaleValue:mt}})}catch(ft){let ht=ft?.message??"";(!(ft instanceof Tn)||!(ft instanceof vn))&&(ne.captureError(ft,ae.Collectibles),m.capture("collectibleSellFailure",{data:{bidSummary:i,usdSaleValue:mt,errorMessage:ht}})),y("error"),S(ft)}},"executeSellEvmSteps");return{executeSellEvmSteps:Z,reset:X,error:w,result:C,status:h,isLedger:q}},"useInstantSellExecuteEvmSteps");a();c();var yd=.01,Sd=o(t=>{let{fungible:e}=Vs({key:$s(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(yd):!1}},"useInstantSellSolanaGasEstimation");a();c();var Ct=A(U(),1);a();c();var wo=A(U(),1);a();c();a();c();var ca=o(t=>{let e=!1;return{collectibles:t.reduce((n,i)=>{let s=ho.safeParse(i);return s.success?n.push(s.data):e=!0,n},[]),containsParseFailure:e}},"parseCollectiblesResponse");var wd="collectibles",Cd=new Error("Failed to fetch collectibles for addresses");async function la(t){let e="/collectibles/v1";try{let n=(await De.api().post(e,{addresses:t})).data,i=!!n.isTrimmed;if(!n.collectibles)throw Cd;let{collectibles:s,containsParseFailure:l}=ca(n.collectibles);return l&&ne.captureError(new Error("collectibles failed to parse some items"),ae.Collectibles),{allCollectibles:s,isTrimmed:i}}catch(r){if(gt(r)){let n=r.response?.status;St(r,n,wd)}throw r}}o(la,"getCollectibles");a();c();a();c();var da=o(t=>{let e=[];for(let[r,n]of t){n.sort((s,l)=>{let d=s.name??"",m=l.name??"",p=d.localeCompare(m);if(d.localeCompare(m))return p;let f=ua(s),h=ua(l);return f.localeCompare(h)});let[i]=n;i&&e.push({..."externalUrl"in i?{externalUrl:i.externalUrl}:void 0,...i.collection,items:n})}return e.sort((r,n)=>{if(r.items.length>n.items.length)return-1;if(n.items.length>r.items.length)return 1;let i=r.name??r.id??"",s=n.name??n.id??"";return i.localeCompare(s)})},"sortCollections");function ua(t){let e=t.chainData;return pe(e)?e.tokenAccount:Je(e)?e.id:(Ze(e),t.id)}o(ua,"extractChainDataSortKey");function ma(t){let e=new Map;for(let r of t){let n=r.collection.id,i=e.get(n)??[];i.push(r),e.set(n,i)}return da(e)}o(ma,"mapCollectiblesToCollections");var pa=o(({addresses:t,queryOptions:e={staleTime:be.Short,refetchInterval:ur.Long,enabled:!0},select:r})=>{let n=ce(),i=B.collections(t),s=t.length!==0&&t.every(l=>!F.isLocalNetworkID(l.networkID));return ie({enabled:s&&e.enabled,queryKey:i,gcTime:Pe.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[d]=await Promise.allSettled([la(l)]);if(d.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:m,isTrimmed:p}=d.status==="fulfilled"?d.value:{allCollectibles:[],isTrimmed:!1},f=ma(m),h=await Ys(n),y=Js(f,h);return{items:y,nrOfItems:y.reduce((w,S)=>w+S.items.length,0),isTrimmed:p}},select:r})},"useCollectionsQuery"),Pt=o(t=>pa({...t,select:(0,wo.useCallback)(e=>e.items,[])}),"useCollections"),xd=o(t=>pa({...t,select:(0,wo.useCallback)(r=>r.isTrimmed,[])}).data??!1,"useCollectionsAreTrimmed");a();c();var ge=A(U(),1);a();c();function Oe(t){let e=oe();return ie({gcTime:Pe.Long,staleTime:be.Never,enabled:!!t,queryKey:B.visibilityOverrides(t??""),async queryFn(){return t?await yt(e,t):new Map}})}o(Oe,"useVisibilityOverrides");a();c();var jt=A(U(),1);a();c();function _t(){let t=oe(),e=ce(),r=de();return Xe({async mutationFn({accountId:n,mutations:i}){await hn(t,r,{accountId:n,mutations:i})},async onSuccess(n,{accountId:i}){await e.invalidateQueries({queryKey:B.visibilityOverrides(i)}),await Promise.allSettled([e.invalidateQueries({queryKey:B.hiddenCollections(i)}),e.invalidateQueries({queryKey:B.unhiddenCollections(i)})])}})}o(_t,"useSetVisibilityOverrides");async function En({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:l}){if(!e)return;let d=t.collection.id||t.id,m=e.get(d)?.status;try{let p=ha(i,t.collection);await r({accountId:n,mutations:[{id:d,visibility:p}]}),await s({collectible:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){await l(p,{collectible:t,desiredVisibility:i})}}o(En,"handleChangeVisibilityForCollectible");async function fa({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:l}){if(!e)return;let d=t.id,m=e.get(d)?.status;try{let p=ha(i,t);await r({accountId:n,mutations:[{id:d,visibility:p}]}),s&&await s({collection:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){l&&await l(p,{collection:t,desiredVisibility:i})}}o(fa,"handleChangeVisibilityForCollection");function ha(t,e){let{spamStatus:r}=e,n=_s({minimum:Ye.NotVerified,spamStatus:r});switch(t){case te.HiddenSpam:if(n)return te.HiddenSpam;if(r===Ye.PossibleSpam||r===Ye.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case te.VisibleNotSpam:if(n)return null;if(r===Ye.PossibleSpam||r===Ye.Spam)return te.VisibleNotSpam;throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case te.Hidden:if(n)return te.Hidden;if(r===Ye.PossibleSpam||r===Ye.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case te.Visible:if(n)return null;if(r===Ye.PossibleSpam||r===Ye.Spam)return te.Visible;throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}o(ha,"calculateNewVisibility");function wt(t){return{networkId:t.chain.id,chainId:F.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}o(wt,"computeCollectibleAnalyticsPayload");function ga({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await En({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.HiddenSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(ga,"useMarkAsSpam");function ba({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await En({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.VisibleNotSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(ba,"useMarkAsNotSpam");function ya({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await En({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(ya,"useMarkAsHidden");function Sa({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await En({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Sa,"useMarkAsVisible");function wa({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await fa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(wa,"useMarkCollectionAsHidden");function Ca({accountId:t,onError:e,onSuccess:r}){let{data:n}=Oe(t),{mutateAsync:i}=_t();return(0,jt.useCallback)(async s=>{await fa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:te.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ca,"useMarkCollectionAsVisible");a();c();var Co=A(U(),1);var xa=o(({toast:t,accountId:e})=>{let{t:r}=Y(),n=de(),i=(0,Co.useCallback)(({collectible:l,updatedVisibility:d})=>{d!==null&&n.capture("collectionHidden",{data:wt(l)}),t&&t.success(r("collectionHideSuccess"))},[r,t,n]),s=(0,Co.useCallback)((l,d)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return ya({accountId:e,onSuccess:i,onError:s})},"useHideCollectible");a();c();var xo=A(U(),1);var Ta=o(({toast:t,accountId:e})=>{let{t:r}=Y(),n=de(),i=(0,xo.useCallback)(({collectible:l,updatedVisibility:d})=>{d!==null&&n.capture("collectionUnhidden",{data:wt(l)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,n]),s=(0,xo.useCallback)((l,d)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Sa({accountId:e,onSuccess:i,onError:s})},"useUnhideCollectible");function Td({accountId:t,collectible:e,toast:r}){let n=xa({accountId:t,toast:r}),i=(0,ge.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Ta({accountId:t,toast:r}),l=(0,ge.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:d}=Oe(t??""),m=(0,ge.useMemo)(()=>d?.get(e?.collection.id??e?.id??""),[d,e]),p=(0,ge.useMemo)(()=>e?gn(m,{spamStatus:e.collection.spamStatus}):!1,[e,m]),f=(0,ge.useCallback)(()=>p?l():i(),[p,i,l]);return(0,ge.useMemo)(()=>({isHidden:p,onHideCollectible:i,onUnhideCollectible:l,onToggleHide:f}),[i,f,l,p])}o(Td,"useCollectiblesHideUnhide");function vd(t){let{data:e,isPending:r}=Oe(t),n=(0,ge.useCallback)(l=>{if(!l)return!1;let d=l.collection.id||l.id;return po(e,{spamStatus:l.collection.spamStatus,key:d})},[e]),i=(0,ge.useCallback)(l=>{if(!l)return Be.NotVerified;let d=l.collection.id||l.id;return mo(e,{spamStatus:l.collection.spamStatus,key:d})},[e]),s=(0,ge.useCallback)(l=>kr(i(l)),[i]);return(0,ge.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(vd,"useGetCollectibleVisibilityStatus");function va(t){let{data:e,isPending:r}=Oe(t),n=(0,ge.useCallback)(l=>{if(!l)return!1;let d=l.id;return po(e,{spamStatus:l.spamStatus,key:d})},[e]),i=(0,ge.useCallback)(l=>{if(!l)return Be.NotVerified;let d=l.id;return mo(e,{spamStatus:l.spamStatus,key:d})},[e]),s=(0,ge.useCallback)(l=>kr(i(l)),[i]);return(0,ge.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(va,"useGetCollectionVisibilityStatus");function Ea(t){let e=va(t),r=wa({accountId:t}),n=Ca({accountId:t});return(0,ge.useMemo)(()=>({...e,hideCollection:r,unhideCollection:n}),[e,r,n])}o(Ea,"useCollectionVisibilityOverrides");a();c();var Ia=A(U(),1);var Ed=o(t=>t.reduce((e,r)=>({...e,[r]:1}),{}),"convertIdArrayToObj");function To({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n}){let i=[],s=[],l=[],d=[],m=Ed(e),p={};for(let h of t)n(h)&&r(h)?d.push(h):r(h)?s.push(h):m[h.id]?p[h.id]=h:n(h)?l.push(h):i.push(h);let f=[];for(let h of e)p[h]&&f.push(p[h]);return{collections:[...f,...i,...l],hiddenCollections:s,spamCollections:d}}o(To,"orderedCollections");var Id=o(({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n})=>(0,Ia.useMemo)(()=>To({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:n}),[t,r,n,e]),"useOrderedCollections");a();c();var In=A(U(),1);var vo={location:0,distance:50,threshold:.3},CS={...vo,keys:["name"]},xS={...vo,keys:["name"]},TS={...vo,keys:["name"]},Dr=o((t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(n=>n.startsWith(r)||r.startsWith(n)&&e.toLowerCase().includes(r)).includes(!0)},"filterByWordPrefix");var Aa=o((t,e)=>(0,In.useMemo)(()=>({collections:t.filter(n=>Dr(e,n.name||n.items[0].name))}),[e,t]),"useSearchCollections"),Ad=o((t,e,r,n)=>{let i=(0,In.useMemo)(()=>t.flatMap(s=>s.items),[t]);return(0,In.useMemo)(()=>{let s=t.filter(p=>Dr(n,p.name)),l=i.filter(p=>Dr(n,p.name)),d=e.filter(p=>Dr(n,p.name)),m=r.filter(p=>Dr(n,p.name));return{collections:s,collectibles:l,hiddenCollections:d,spamCollections:m}},[n,i,t,e,r])},"useSearchCollectiblesStrict");var Od=ee({seconds:10}),kd=ee({seconds:5});function Md({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:n=[],isLoading:i}=Pt({addresses:r,queryOptions:{staleTime:kd,refetchInterval:Od}}),[s,l]=(0,Ct.useState)(""),d=ts(s)??"",m=(0,Ct.useCallback)(I=>l(typeof I=="string"?I:I.currentTarget.value),[l]),{getIsHidden:p,getIsSpam:f,getSpamStatus:h,hideCollection:y,unhideCollection:w,isLoading:S}=Ea(e),C=(0,Ct.useMemo)(()=>{let{collections:I,hiddenCollections:q,spamCollections:X}=To({allCollections:n,getIsHidden:p,getIsSpam:f});return[...I,...q,...X]},[n]),v=Aa(C,d),M=(0,Ct.useCallback)(({item:I,status:q})=>q==="show"?w(I):y(I),[w,y]);return{viewState:(0,Ct.useMemo)(()=>({accountId:e,listItems:d?v.collections:C,searchQuery:s,debouncedSearchQuery:d,handleSearch:m,getIsHidden:p,getIsSpam:f,getSpamStatus:h,onToggleHidden:M}),[e,v.collections,s,m,C,M,p,f,h,d]),viewStateLoading:S||i}}o(Md,"useManageCollectionsVisibilityViewState");a();c();var Eo=A(Xl());a();c();var An={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new Re(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},Oa=class extends Error{static{o(this,"SendFungibleFlowError")}constructor(e){super(e),this.name="SendFungibleFlowError"}};var ka={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:An,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Dd=tr((t,e)=>({...(0,Eo.default)(ka),resetSendSlice:o(()=>{let r=(0,Eo.default)(ka);r.sendSessionId=Li(),t(r)},"resetSendSlice"),setAnalyticsRecipient:o(r=>{t({analyticsRecipient:r})},"setAnalyticsRecipient"),setSendFungibleKey:o((r,n,i)=>{t({fungibleKey:r,splTokenAccount:n,encodedCaip19:i})},"setSendFungibleKey"),setSendFormValues:o(r=>{t({sendFormValues:r})},"setSendFormValues"),setInputAmount:o(r=>{let n=e();t({sendFormValues:{...n.sendFormValues,inputAmount:r}})},"setInputAmount"),setShouldShowFiatValues:o(r=>{t({shouldShowFiatValues:r})},"setShouldShowFiatValues"),setRetryArgs:o(r=>{t({retryArgs:r})},"setRetryArgs"),setGasEstimation:o(r=>{t({gasEstimation:r})},"setGasEstimation")}));a();c();var Ma={collectible:void 0,sendFormValues:An,shouldRequireAmount:!1},Io=tr(t=>({...Ma,resetSendSlice:o(()=>{t({...Ma})},"resetSendSlice"),setSendCollectible:o(e=>{t({collectible:e})},"setSendCollectible"),setSendFormValues:o(e=>{t({sendFormValues:e})},"setSendFormValues"),setShouldRequireAmount:o(e=>{t({shouldRequireAmount:e})},"setShouldRequireAmount")}));a();c();a();c();var fe=A(Yl(),1);var Bd="token-account-min-balances",Da=fe.struct([fe.blob(32,"mint"),fe.blob(32,"owner"),fe.nu64("amount"),fe.blob(93)]),uw=fe.struct([fe.blob(44),fe.u8("decimals"),fe.blob(37)]),Ud=fe.struct([fe.blob(679)]),Pd=fe.struct([fe.u8("edition"),fe.blob(281)]),_d=o(async t=>t.getMinimumBalanceForRentExemption(Da.span).then(he),"getTokenAccountCostAsync"),jd=o(async t=>he(await t.getMinimumBalanceForRentExemption(Ud.span)+await t.getMinimumBalanceForRentExemption(Pd.span)+await t.getMinimumBalanceForRentExemption(Da.span)),"getMplTokenAccountCostAsync");function Rd({tokenEdition:t,connection:e}){return ie({queryKey:[Bd,{tokenEdition:t}],queryFn:o(async()=>e?t===null||!Sn(t)?_d(e):jd(e):he(0),"queryFn")})}o(Rd,"useTokenAccountMinBalance");a();c();var Ba=A(U(),1);var Nd=o((t,e,r=!1,n)=>(0,Ba.useMemo)(()=>{if(t)return On({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:n??"medium",mediaTypeOverride:e})},[t,e,r,n]),"useCollectibleMediaURI"),On=o(({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:n})=>{let i=n??t.type;if((i==="image"||i==="other")&&t.previews?.[r]){let l=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${l}`}return t[i]?.url},"parseCollectibleMediaURI");a();c();a();c();var Ua={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},Pa=o(t=>({...Ua,resetBurnCollectible:o(()=>t({...Ua}),"resetBurnCollectible"),setBurnCollectibleTx:o(e=>t({burnCollectibleTx:e}),"setBurnCollectibleTx"),setBurnCollectibleTxFee:o(e=>t({burnCollectibleTxFee:e}),"setBurnCollectibleTxFee")}),"createBurnCollectibleSlice");a();c();var _a={multichainSellCollectible:void 0},ja=o(t=>({..._a,resetMultichainSellCollectible:o(()=>t({..._a}),"resetMultichainSellCollectible"),setMultichainSellCollectible:o(e=>t({multichainSellCollectible:e}),"setMultichainSellCollectible")}),"createMultichainSellCollectibleSlice");a();c();var Ra={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},Na=o(t=>({...Ra,reset:o(()=>t({...Ra}),"reset"),setListCollectible:o(e=>t({listCollectible:e}),"setListCollectible"),setListPrice:o(e=>t({listCollectiblePrice:e}),"setListPrice"),setEditListPrice:o(e=>t({editListCollectiblePrice:e}),"setEditListPrice"),setUnlistCollectible:o(e=>t({unlistCollectible:e}),"setUnlistCollectible"),setTransactionURL:o(e=>t({transactionURL:e}),"setTransactionURL")}),"createListCollectibleSlice");a();c();var La={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},Va=o(t=>({...La,reset:o(()=>t({...La}),"reset"),setMultichainListCollectible:o(e=>t({multichainListCollectible:e}),"setMultichainListCollectible"),setMultichainListPrice:o(e=>t({multichainListCollectiblePrice:e}),"setMultichainListPrice"),setEditMultichainListPrice:o(e=>t({editMultichainListCollectiblePrice:e}),"setEditMultichainListPrice"),setUnlistMultichainCollectible:o(e=>t({unlistMultichainCollectible:e}),"setUnlistMultichainCollectible"),setMultichainTransactionURL:o(e=>t({multichainTransactionURL:e}),"setMultichainTransactionURL")}),"createMultichainListCollectibleSlice");var Ld=tr((t,e)=>({...Na(t,e),...Pa(t,e),...Va(t,e),...ja(t,e)}));a();c();a();c();var Vd=500,Fa=B.collections([])[1],Fd=[Fa,B.hiddenCollections("")[1],B.unhiddenCollections("")[1],B.pinnedCollections("")[1]],$d=o(t=>{let e=String(t.queryKey[1]);return e===Fa?t.state.data?.nrOfItems<=Vd:Fd.includes(e)},"collectiblesShouldDehydrateQueryPredicate");a();c();var Ya=A(U(),1);a();c();a();c();a();c();a();c();a();c();var zd=o(t=>{let e=Math.abs(t);if(e<1e3)return t;let r=Math.floor(Math.log10(e)),n=r>=6?1e5:r>=5?1e3:100;return Math.sign(t)*Math.floor(e/n)*n},"floorForDisplay"),$a=o((t,e={})=>{let r=typeof t=="number"?t:Re(t).toNumber(),{includePlusPrefix:n=!1,prefix:i="",infix:s="",suffix:l="",extendedDecimalsForSmallNumbers:d=!1,minimumAmount:m=.01,format:p="0,0.[00]",decimalFormatSmallNumbers:f="0.[00]",roundDecimals:h=!1}=e,y=r<0?"-":"",w=n&&r>0?"+":y,S=h?Es(Math.abs(r)):Math.abs(r);if(e.compact&&S>=1e3&&(S=Math.abs(zd(r))),Math.abs(r)>=m||r===0){let C=Math.abs(r)>1?e.compact?"0.[00]a":p:f,v=(0,vs.default)(S).format(C);return`${i}${w}${s}${v}${l}`}else if(d){let C=new Re(S).abs().toFormat();return`${i}${w}${s}${C}${l}`}else return`${i}${w}<${s}${new Re(m).toFormat()}${l}`},"formatNumber");var za=o((t,e={})=>$a(t,{...e,infix:"$",format:e.compact?"0.[00]a":e.format??"0,0.00",decimalFormatSmallNumbers:e.decimalFormatSmallNumbers??"0.00"}),"formatDollarAmount");var Gd=5e4,Hd="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",Ga={sendSuccessCondition:ve.SUBMISSION,collectibleDetailPrecision:7,collectibleDetailCtaBanner:o((t,e)=>{let r=t.chainData;if(cr(r)&&e){let n=new he(r.utxoDetails.value??0);if(n.lte(Gd))return;let i=Object.values(r.utxoDetails.satributes).reduce((m,{count:p})=>m+p,0),s=co(i,F.bitcoin.tokenDecimals),l=co(n,F.bitcoin.tokenDecimals),d=za(l.minus(s).times(e));return{title:Ae.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Ae.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:d}),iconColor:"spotPositive",modal:{title:Ae.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Ae.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:d}),buttonText:Ae.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:Hd,iconColor:"spotPositive"}}}},"collectibleDetailCtaBanner")};a();c();var xt={sendSuccessCondition:ve.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var Ha={sendSuccessCondition:ve.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var qa={sendSuccessCondition:ve.CONFIRMATION,collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var qd=new Wi({[Ne.Solana]:Ha,[Ne.Ethereum]:xt,[Ne.Polygon]:xt,[Ne.Base]:xt,[Ne.Monad]:xt,[Ne.Arbitrum]:xt,[Ne.Bitcoin]:Ga,[Ne.Sui]:qa,[Ne.Hypercore]:xt,[Ne.Hyperevm]:xt}),Rt=Ki(qd);a();c();var Qa=A(U(),1);a();c();var Ka=A(ao(),1);var Wa=o(({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Ka.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}},"formatTrait");var Xa=o(t=>(0,Qa.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ze(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:n,description:i,url:s})=>({type:n.toUpperCase(),value:Ae.t(Kd(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:n,description:i,iconUrl:s}})):t.attributes.map(({trait_type:r,value:n,display_type:i})=>({type:r,value:Wa({value:n,type:i})}))},[t]),"useCollectibleTraits"),Kd=o((t,e,r)=>t===1?e:r,"getI18nKey");function Wd(t){let{chain:e,owner:r}=t||{},n=e?.id,{data:i}=rn({address:r,networkID:n});Bs(i);let s=Xa(t),l=n?F.getChainID(n):void 0,d=l?qi(l):void 0,{data:m}=Ts({query:d?{data:d}:void 0});return{ctaBanner:(0,Ya.useMemo)(()=>{if(!(!t||!m||!l))return Rt.get(l).collectibleDetailCtaBanner?.(t,m.price)},[l,t,m]),traits:s}}o(Wd,"useCollectibleDetailViewState");a();c();a();c();a();c();a();c();var Ja=A(Jr(),1),Za=A(Jr(),1),ec=A($i(),1);var tc=o(({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:n},feerate:i,utxoHash:s,utxoIndex:l})=>{let d={transactionHash:s,index:l,value:t,isSafeToSend:!1,owner:e},m=[d],p=[{address:r,value:parseFloat(d.value),script:(0,ec.toOutputScript)(r)}],f=mn(Zr(Zt.Bitcoin.Mainnet,e),n,p,i,m),h=new Za.Psbt({network:Ja.networks.bitcoin});if(f.type==="success"){let{inputs:y,outputs:w}=f;h.addInputs(y.map(S=>pn(S,e,!0))),h.addOutputs(w)}return[h,h.data.inputs.map((y,w)=>({address:e,signingIndexes:[w]})),f.vb]},"createOrdinalsTransaction");a();c();var rc=A(Jr(),1),nc=A(Jr(),1),oc=A($i(),1);var ic=o(({hash:t,index:e,value:r,senderAddress:n,recipient:i,utxoState:{safeToSendUtxos:s},feerate:l})=>{let d={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:n},m=[d],p=[{address:i,value:parseFloat(d.value),script:(0,oc.toOutputScript)(i)}],f=mn(Zr(Zt.Bitcoin.Mainnet,n),s,p,l,m),h=new nc.Psbt({network:rc.networks.bitcoin});if(f.type==="success"){let{inputs:w,outputs:S}=f;h.addInputs(w.map(C=>pn(C,n,!0))),h.addOutputs(S)}let y=h.data.inputs.map((w,S)=>({address:n,signingIndexes:[S]}));return[h,y,f.vb]},"createRareSatsTransaction");function sc({chain:t,owner:e,chainData:r},{recipient:n,transactionSpeed:i=rr.standard},{utxoState:s,transactionSpeedsToUnitCost:l}){let d,m,p;if(!e)throw new Error("Owner is required");let f=t.id,h=l[i],y=r,w=h,S=Math.round(w?ss(w.btcPerKilobyte).toNumber():is);if(Xs(y)){let{outputValue:C,utxoHash:v,utxoIndex:M}=y;[d,m,p]=tc({value:C,senderAddress:e,recipient:n,utxoState:s,feerate:S,utxoHash:v,utxoIndex:M})}else if(cr(y)){let{utxoDetails:C}=y;[d,m,p]=ic({feerate:S,senderAddress:e,recipient:n,utxoState:s,hash:C.hash,index:C.index,value:C.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:f,psbt:d,vb:p,psbtChain:void 0,inputsToSign:m}}o(sc,"createBitcoinTransferTransaction");a();c();a();c();var Qd=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],ac=new Error("Error populating ERC721 transaction data."),cc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s}=t,l=cn(r,i,Qd,e),d;try{let p=await l.populateTransaction.safeTransferFrom(e,n,new he(s).toString(10));if(p.data)d=p.data;else throw ac}catch{throw ac}return Yt.parse({type:Xt.eip1559,from:e,to:i,chainId:F.getEVMNetworkIDValue(r),data:d})},"createErc721TransferTransaction");a();c();var Xd=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],lc=new Error("Error populating ERC1155 transaction data."),uc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s,value:l}=t,d=cn(r,i,Xd,e),m;try{let f=await d.populateTransaction.safeTransferFrom(e,n,new he(s).toString(10),l.toString(10),[]);if(f.data)m=f.data;else throw lc}catch{throw lc}return Yt.parse({type:Xt.eip1559,from:e,to:i,chainId:F.getEVMNetworkIDValue(r),data:m})},"createErc1155TransferTransaction");async function dc({chain:t,chainData:e,owner:r},{recipient:n,amountAsset:i}){let s=e,l=t.id,d;if(Yd(s)){let{contract:m,id:p}=s;d=await cc({networkID:l,sender:r??"",destination:n,contractAddress:m,tokenID:p})}else if(Jd(s)){let{contract:m,id:p}=s;d=await uc({networkID:l,sender:r??"",destination:n,contractAddress:m,tokenID:p,value:i??"1"})}else throw new Error(`Unsupported EVM collectible type: ${s.standard}`);return{networkID:l,unsignedTransaction:d}}o(dc,"createEvmTransferTransaction");function Yd(t){return t.standard===Or.ERC721}o(Yd,"isErc721Collectible");function Jd(t){return t.standard===Or.ERC1155}o(Jd,"isErc1155Collectible");a();c();a();c();a();c();var kn=class extends Error{static{o(this,"CompressionProofError")}constructor(e){super(e),this.name="ProofError"}};async function mc({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",n;try{n=await De.api().post(r,{chainId:t,address:e})}catch{let s=new kn(`Failed to fetch proof for ${e} on network ${t}.`);throw ne.captureError(s,ae.Collectibles),s}if(n.status!==200){let s=new kn(`Failed to fetch proof for ${e} on network ${t}.`);throw ne.captureError(s,ae.Collectibles),s}return await n.data}o(mc,"getCompressionProof");async function pc({networkID:t,mint:e,recipient:r}){let n=new Jt.Transaction,i=await mc({networkID:t,mintAddress:e});return n.add(await rs({...i,destination:r})),n}o(pc,"createCompressedTokenTransferTransaction");a();c();async function fc({networkID:t,destination:e,mint:r,senderAddress:n}){let{createComputeBudgetIx:i,createOCTferIX:s,getOCPMintState:l}=await sn(),d=Dt(t),m=new V.PublicKey(r),p=await l(m,d);if(!p)throw new Error("Mint state not found for OCP transfer");Qr()&&console.log("This is a Magic Eden Open Creator Protocol Token");let f=new Jt.Transaction;f.add(i());let{destinationAddress:h}=await fn({solanaConnection:d,destination:new V.PublicKey(e),mint:m,programId:Ar}),y=new V.PublicKey(n.address),{initAccountIX:w,transferIX:S}=await s({senderAddress:y,destinationAddress:h,mintAddress:m,mintState:p,connection:d});return w&&f.add(w),f.add(S),f}o(fc,"createOcpTokenTransferTransaction");a();c();async function hc({networkID:t,senderAddress:e,senderAccount:r,destination:n,mint:i}){let s=Dt(t),l=new V.PublicKey(i),{destinationAddress:d,destinationAccount:m}=await fn({solanaConnection:s,destination:new V.PublicKey(n),mint:l,programId:Ar}),{createPNFTTransferIX:p}=await sn(),f=new Jt.Transaction,h=new V.PublicKey(e.address),y=new V.PublicKey(r),w=m;if(!w){let[S,C]=await ps(h,d,l,Ar);f.add(ms({account:d,owner:V.SystemProgram.programId})),f.add(S),w=C}return f.add(await p({senderAddress:h,tokenAccount:y,destinationAddress:d,destinationAccount:w,mintAddress:l,connection:s})),f}o(hc,"createProgrammableNftTransferTransaction");async function gc(t,e){let{chain:r,owner:n,decimals:i="0"}=t,s=parseFloat(i),{solana:l}=e,{memo:d,references:m}=l,p=r.id,f=Dt(p),h={networkID:t.chain.id,addressType:Xr.Solana,address:t.owner??""};if(!pe(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let y;if(Zd(t))y=await pc({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(em(t))y=await hc({networkID:p,senderAddress:h,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await tm(t))y=await fc({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h});else if(rm(t)){let w=Ls(t),S=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();y=await hs({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h,senderAccount:t.chainData.tokenAccount,decimals:s,programId:t.chainData.programId,amount:S,references:m?.map(C=>C.toString())??[],memo:d??"",transferHookProgramId:w,connection:f})}else throw new Error("Unsupported transferSPLSolana args");return d&&y.add(fs({memoText:d})),y.feePayer=new V.PublicKey(n??""),y=await us(y,{connection:f}),y.recentBlockhash=(await f.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[y]}}o(gc,"createSolanaTransferTransaction");function Zd(t){return pe(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}o(Zd,"isCompressedTokenCollectible");function em(t){return pe(t.chainData)?"standard"in t.chainData&&(t.chainData.standard===Bt.ProgrammableNonFungible||t.chainData.standard===Bt.ProgrammableNonFungibleEdition):!1}o(em,"isProgrammableNftCollectible");async function tm(t){let{chainData:e}=t;if(!pe(e))return!1;let{mint:r}=e,n=Dt(t.chain.id);return await os(new V.PublicKey(r),n)!==null}o(tm,"isOcpTokenCollectible");function rm(t){return pe(t.chainData)}o(rm,"isDefaultSplTokenCollectible");a();c();a();c();a();c();a();c();var bc="1.21.2",yc="1.43.0";a();c();var nm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},Mn=class extends Error{static{o(this,"SuiHTTPTransportError")}},fr=class extends Mn{static{o(this,"JsonRpcError")}constructor(e,r){super(e),this.code=r,this.type=nm[r]??"ServerError"}},Dn=class extends Mn{static{o(this,"SuiHTTPStatusError")}constructor(e,r,n){super(e),this.status=r,this.statusText=n}};a();c();var Sc=o(t=>{throw TypeError(t)},"__typeError"),Oo=o((t,e,r)=>e.has(t)||Sc("Cannot "+r),"__accessCheck"),J=o((t,e,r)=>(Oo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Nt=o((t,e,r)=>e.has(t)?Sc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),hr=o((t,e,r,n)=>(Oo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),wc=o((t,e,r)=>(Oo(t,e,"access private method"),r),"__privateMethod"),om=o((t,e,r,n)=>({set _(i){hr(t,e,i,r)},get _(){return J(t,e,n)}}),"__privateWrapper"),Lt,Br,it,Vt,Ur,gr,Bn,Cc,xc;function im(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}o(im,"getWebsocketUrl");var sm={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Un=class{static{o(this,"WebsocketClient")}constructor(e,r={}){if(Nt(this,Bn),Nt(this,Lt,0),Nt(this,Br,0),Nt(this,it,null),Nt(this,Vt,null),Nt(this,Ur,new Set),Nt(this,gr,new Map),this.endpoint=e,this.options={...sm,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=im(this.endpoint))}async makeRequest(e,r){let n=await wc(this,Bn,Cc).call(this);return new Promise((i,s)=>{hr(this,Lt,J(this,Lt)+1),J(this,gr).set(J(this,Lt),{resolve:i,reject:s,timeout:setTimeout(()=>{J(this,gr).delete(J(this,Lt)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:J(this,Lt),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new fr(i.message,i.code);return s})}async subscribe(e){let r=new Ao(e);return J(this,Ur).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};Lt=new WeakMap;Br=new WeakMap;it=new WeakMap;Vt=new WeakMap;Ur=new WeakMap;gr=new WeakMap;Bn=new WeakSet;Cc=o(function(){return J(this,Vt)?J(this,Vt):(hr(this,Vt,new Promise(t=>{J(this,it)?.close(),hr(this,it,new this.options.WebSocketConstructor(this.endpoint)),J(this,it).addEventListener("open",()=>{hr(this,Br,0),t(J(this,it))}),J(this,it).addEventListener("close",()=>{om(this,Br)._++,J(this,Br)<=this.options.maxReconnects&&setTimeout(()=>{wc(this,Bn,xc).call(this)},this.options.reconnectTimeout)}),J(this,it).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(n){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:n}));return}if("id"in r&&r.id!=null&&J(this,gr).has(r.id)){let{resolve:n,timeout:i}=J(this,gr).get(r.id);clearTimeout(i),n(r)}else if("params"in r){let{params:n}=r;J(this,Ur).forEach(i=>{i.subscriptionId===n.subscription&&n.subscription===i.subscriptionId&&i.onMessage(n.result)})}})})),J(this,Vt))},"setupWebSocket_fn");xc=o(async function(){return J(this,it)?.close(),hr(this,Vt,null),Promise.allSettled([...J(this,Ur)].map(t=>t.subscribe(this)))},"reconnect_fn");var Ao=class{static{o(this,"RpcSubscription")}constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var Tc=o(t=>{throw TypeError(t)},"__typeError"),Do=o((t,e,r)=>e.has(t)||Tc("Cannot "+r),"__accessCheck"),_e=o((t,e,r)=>(Do(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Pn=o((t,e,r)=>e.has(t)?Tc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),ko=o((t,e,r,n)=>(Do(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),am=o((t,e,r)=>(Do(t,e,"access private method"),r),"__privateMethod"),Pr,Fe,_r,Mo,vc,_n=class{static{o(this,"SuiHTTPTransport")}constructor(e){Pn(this,Mo),Pn(this,Pr,0),Pn(this,Fe),Pn(this,_r),ko(this,Fe,e)}fetch(e,r){let n=_e(this,Fe).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){ko(this,Pr,_e(this,Pr)+1);let r=await this.fetch(_e(this,Fe).rpc?.url??_e(this,Fe).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":bc,"Client-Target-Api-Version":yc,"Client-Request-Method":e.method,..._e(this,Fe).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:_e(this,Pr),method:e.method,params:e.params})});if(!r.ok)throw new Dn(`Unexpected status code: ${r.status}`,r.status,r.statusText);let n=await r.json();if("error"in n&&n.error!=null)throw new fr(n.error.message,n.error.code);return n.result}async subscribe(e){let r=await am(this,Mo,vc).call(this).subscribe(e);return async()=>!!await r()}};Pr=new WeakMap;Fe=new WeakMap;_r=new WeakMap;Mo=new WeakSet;vc=o(function(){if(!_e(this,_r)){let t=_e(this,Fe).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");ko(this,_r,new Un(_e(this,Fe).websocket?.url??_e(this,Fe).url,{WebSocketConstructor:t,..._e(this,Fe).websocket}))}return _e(this,_r)},"getWebsocketClient_fn");a();c();a();c();a();c();a();c();a();c();function cm(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let f=t.charAt(p),h=f.charCodeAt(0);if(e[h]!==255)throw new TypeError(f+" is ambiguous");e[h]=p}let r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let f=0,h=0,y=0,w=p.length;for(;y!==w&&p[y]===0;)y++,f++;let S=(w-y)*s+1>>>0,C=new Uint8Array(S);for(;y!==w;){let L=p[y],I=0;for(let q=S-1;(L!==0||I<h)&&q!==-1;q--,I++)L+=256*C[q]>>>0,C[q]=L%r>>>0,L=L/r>>>0;if(L!==0)throw new Error("Non-zero carry");h=I,y++}let v=S-h;for(;v!==S&&C[v]===0;)v++;let M=n.repeat(f);for(;v<S;++v)M+=t.charAt(C[v]);return M}o(l,"encode");function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let f=0,h=0,y=0;for(;p[f]===n;)h++,f++;let w=(p.length-f)*i+1>>>0,S=new Uint8Array(w);for(;p[f];){let L=e[p.charCodeAt(f)];if(L===255)return;let I=0;for(let q=w-1;(L!==0||I<y)&&q!==-1;q--,I++)L+=r*S[q]>>>0,S[q]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");y=I,f++}let C=w-y;for(;C!==w&&S[C]===0;)C++;let v=new Uint8Array(h+(w-C)),M=h;for(;C!==w;)v[M++]=S[C++];return v}o(d,"decodeUnsafe");function m(p){let f=d(p);if(f)return f;throw new Error("Non-base"+r+" character")}return o(m,"decode"),{encode:l,decodeUnsafe:d,decode:m}}o(cm,"base");var Ec=cm;var lm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Bo=Ec(lm);var st=o(t=>Bo.encode(t),"toBase58"),$e=o(t=>Bo.decode(t),"fromBase58");a();c();function ye(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}o(ye,"fromBase64");var Uo=8192;function Q(t){if(t.length<Uo)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Uo){let n=t.slice(r,r+Uo);e+=String.fromCharCode(...n)}return btoa(e)}o(Q,"toBase64");a();c();a();c();function br(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(i=>parseInt(i,16))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}o(br,"fromHex");function tt(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}o(tt,"toHex");a();c();a();c();function Ft(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}o(Ft,"ulebEncode");function Ic(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}o(Ic,"ulebDecode");var jn=class{static{o(this,"BcsReader")}constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Ic(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}};a();c();a();c();function Po(t,e){switch(e){case"base58":return st(t);case"base64":return Q(t);case"hex":return tt(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}o(Po,"encodeStr");function Rn(t,e=["<",">"]){let[r,n]=e,i=[],s="",l=0;for(let d=0;d<t.length;d++){let m=t[d];if(m===r&&l++,m===n&&l--,l===0&&m===","){i.push(s.trim()),s="";continue}s+=m}return i.push(s.trim()),i}o(Rn,"splitGenericParameters");var Nn=class{static{o(this,"BcsWriter")}constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return _o(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return _o(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return _o(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Ft(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Po(this.toBytes(),e)}};function _o(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}o(_o,"toLittleEndian");var Ac=o(t=>{throw TypeError(t)},"__typeError"),Oc=o((t,e,r)=>e.has(t)||Ac("Cannot "+r),"__accessCheck"),ze=o((t,e,r)=>(Oc(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Vn=o((t,e,r)=>e.has(t)?Ac("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Fn=o((t,e,r,n)=>(Oc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),yr,jr,Ln,Tt,um=class kc{static{o(this,"_BcsType")}constructor(e){Vn(this,yr),Vn(this,jr),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Fn(this,yr,e.write),Fn(this,jr,e.serialize??((r,n)=>{let i=new Nn({initialSize:this.serializedSize(r)??void 0,...n});return ze(this,yr).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),ze(this,yr).call(this,e,r)}serialize(e,r){return this.validate(e),new $n(this,ze(this,jr).call(this,e,r))}parse(e){let r=new jn(e);return this.read(r)}fromHex(e){return this.parse(br(e))}fromBase58(e){return this.parse($e(e))}fromBase64(e){return this.parse(ye(e))}transform({name:e,input:r,output:n,validate:i}){return new kc({name:e??this.name,read:o(s=>n?n(this.read(s)):this.read(s),"read"),write:o((s,l)=>ze(this,yr).call(this,r?r(s):s,l),"write"),serializedSize:o(s=>this.serializedSize(r?r(s):s),"serializedSize"),serialize:o((s,l)=>ze(this,jr).call(this,r?r(s):s,l),"serialize"),validate:o(s=>{i?.(s),this.validate(r?r(s):s)},"validate")})}};yr=new WeakMap;jr=new WeakMap;var je=um,Mc=Symbol.for("@mysten/serialized-bcs");function Sr(t){return!!t&&typeof t=="object"&&t[Mc]===!0}o(Sr,"isSerializedBcs");var $n=class{static{o(this,"SerializedBcs")}constructor(e,r){Vn(this,Ln),Vn(this,Tt),Fn(this,Ln,e),Fn(this,Tt,r)}get[Mc](){return!0}toBytes(){return ze(this,Tt)}toHex(){return tt(ze(this,Tt))}toBase64(){return Q(ze(this,Tt))}toBase58(){return st(ze(this,Tt))}parse(){return ze(this,Ln).parse(ze(this,Tt))}};Ln=new WeakMap;Tt=new WeakMap;function Rr({size:t,...e}){return new je({...e,serializedSize:o(()=>t,"serializedSize")})}o(Rr,"fixedSizeBcsType");function zn({readMethod:t,writeMethod:e,...r}){return Rr({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](n),"write"),validate:o(n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)},"validate")})}o(zn,"uIntBcsType");function Gn({readMethod:t,writeMethod:e,...r}){return Rr({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](BigInt(n)),"write"),validate:o(n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)},"validate")})}o(Gn,"bigUIntBcsType");function Dc({serialize:t,...e}){let r=new je({...e,serialize:t,write:o((n,i)=>{for(let s of r.serialize(n).toBytes())i.write8(s)},"write")});return r}o(Dc,"dynamicSizeBcsType");function Bc({toBytes:t,fromBytes:e,...r}){return new je({...r,read:o(n=>{let i=n.readULEB(),s=n.readBytes(i);return e(s)},"read"),write:o((n,i)=>{let s=t(n);i.writeULEB(s.length);for(let l=0;l<s.length;l++)i.write8(s[l])},"write"),serialize:o(n=>{let i=t(n),s=Ft(i.length),l=new Uint8Array(s.length+i.length);return l.set(s,0),l.set(i,s.length),l},"serialize"),validate:o(n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)},"validate")})}o(Bc,"stringLikeBcsType");function Uc(t){let e=null;function r(){return e||(e=t()),e}return o(r,"getType"),new je({name:"lazy",read:o(n=>r().read(n),"read"),serializedSize:o(n=>r().serializedSize(n),"serializedSize"),write:o((n,i)=>r().write(n,i),"write"),serialize:o((n,i)=>r().serialize(n,i).toBytes(),"serialize")})}o(Uc,"lazyBcsType");a();c();var u={u8(t){return zn({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return zn({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return zn({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Gn({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Gn({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Gn({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Rr({name:"bool",size:1,read:o(e=>e.read8()===1,"read"),write:o((e,r)=>r.write8(e?1:0),"write"),...t,validate:o(e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)},"validate")})},uleb128(t){return Dc({name:"uleb128",read:o(e=>e.readULEB(),"read"),serialize:o(e=>Uint8Array.from(Ft(e)),"serialize"),...t})},bytes(t,e){return Rr({name:`bytes[${t}]`,size:t,read:o(r=>r.readBytes(t),"read"),write:o((r,n)=>{let i=new Uint8Array(r);for(let s=0;s<t;s++)n.write8(i[s]??0)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)},"validate")})},byteVector(t){return new je({name:"bytesVector",read:o(e=>{let r=e.readULEB();return e.readBytes(r)},"read"),write:o((e,r)=>{let n=new Uint8Array(e);r.writeULEB(n.length);for(let i=0;i<n.length;i++)r.write8(n[i]??0)},"write"),...t,serializedSize:o(e=>{let r="length"in e?e.length:null;return r==null?null:Ft(r).length+r},"serializedSize"),validate:o(e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)},"validate")})},string(t){return Bc({name:"string",toBytes:o(e=>new TextEncoder().encode(e),"toBytes"),fromBytes:o(e=>new TextDecoder().decode(e),"fromBytes"),...t})},fixedArray(t,e,r){return new je({name:`${e.name}[${t}]`,read:o(n=>{let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},"read"),write:o((n,i)=>{for(let s of n)e.write(s,i)},"write"),...r,validate:o(n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)},"validate")})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:o(e=>e==null?{None:!0}:{Some:e},"input"),output:o(e=>e.$kind==="Some"?e.Some:null,"output")})},vector(t,e){return new je({name:`vector<${t.name}>`,read:o(r=>{let n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},"read"),write:o((r,n)=>{n.writeULEB(r.length);for(let i of r)t.write(i,n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)},"validate")})},tuple(t,e){return new je({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:o(r=>{let n=0;for(let i=0;i<t.length;i++){let s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},"serializedSize"),read:o(r=>{let n=[];for(let i of t)n.push(i.read(r));return n},"read"),write:o((r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)},"validate")})},struct(t,e,r){let n=Object.entries(e);return new je({name:t,serializedSize:o(i=>{let s=0;for(let[l,d]of n){let m=d.serializedSize(i[l]);if(m==null)return null;s+=m}return s},"serializedSize"),read:o(i=>{let s={};for(let[l,d]of n)s[l]=d.read(i);return s},"read"),write:o((i,s)=>{for(let[l,d]of n)d.write(i[l],s)},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)},"validate")})},enum(t,e,r){let n=Object.entries(e);return new je({name:t,read:o(i=>{let s=i.readULEB(),l=n[s];if(!l)throw new TypeError(`Unknown value ${s} for enum ${t}`);let[d,m]=l;return{[d]:m?.read(i)??!0,$kind:d}},"read"),write:o((i,s)=>{let[l,d]=Object.entries(i).filter(([m])=>Object.hasOwn(e,m))[0];for(let m=0;m<n.length;m++){let[p,f]=n[m];if(p===l){s.writeULEB(m),f?.write(d,s);return}}},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let s=Object.keys(i).filter(d=>i[d]!==void 0&&Object.hasOwn(e,d));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);let[l]=s;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)},"validate")})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o(r=>[...r.entries()],"input"),output:o(r=>{let n=new Map;for(let[i,s]of r)n.set(i,s);return n},"output")})},lazy(t){return Uc(t)}};a();c();a();c();a();c();a();c();a();c();var dm=32;function Hn(t){try{return $e(t).length===dm}catch{return!1}}o(Hn,"isValidTransactionDigest");var Nr=32;function ke(t){return mm(t)&&pm(t)===Nr}o(ke,"isValidSuiAddress");function wr(t){return ke(t)}o(wr,"isValidSuiObjectId");function D(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Nr*2,"0")}`}o(D,"normalizeSuiAddress");function Ee(t,e=!1){return D(t,e)}o(Ee,"normalizeSuiObjectId");function mm(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}o(mm,"isHex");function pm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}o(pm,"getHexByteLength");a();c();var fm=/^vector<(.+)>$/,hm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,at=class t{static{o(this,"TypeTagSerializer")}static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match(fm);if(n)return{vector:t.parseFromStr(n[1],r)};let i=e.match(hm);if(i)return{struct:{address:r?D(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Rn(e).map(n=>t.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,n=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function gm(t){return u.u64({name:"unsafe_u64",...t}).transform({input:o(e=>e,"input"),output:o(e=>Number(e),"output")})}o(gm,"unsafe_u64");function bm(t){return u.enum("Option",{None:null,Some:t})}o(bm,"optionEnum");var G=u.bytes(Nr).transform({validate:o(t=>{let e=typeof t=="string"?t:tt(t);if(!e||!ke(D(e)))throw new Error(`Invalid Sui address ${e}`)},"validate"),input:o(t=>typeof t=="string"?br(D(t)):t,"input"),output:o(t=>D(tt(t)),"output")}),Me=u.vector(u.u8()).transform({name:"ObjectDigest",input:o(t=>$e(t),"input"),output:o(t=>st(new Uint8Array(t)),"output"),validate:o(t=>{if($e(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),Ie=u.struct("SuiObjectRef",{objectId:G,version:u.u64(),digest:Me}),jo=u.struct("SharedObjectRef",{objectId:G,initialSharedVersion:u.u64(),mutable:u.bool()}),Ro=u.enum("ObjectArg",{ImmOrOwnedObject:Ie,SharedObject:jo,Receiving:Ie}),No=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:o(t=>typeof t=="string"?ye(t):t,"input"),output:o(t=>Q(new Uint8Array(t)),"output")})}),Object:Ro}),Lo=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>Lo),struct:u.lazy(()=>Ho),u16:null,u32:null,u256:null}),qn=Lo.transform({input:o(t=>typeof t=="string"?at.parseFromStr(t,!0):t,"input"),output:o(t=>at.tagToString(t),"output")}),Ge=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),Vo=u.struct("ProgrammableMoveCall",{package:G,module:u.string(),function:u.string(),typeArguments:u.vector(qn),arguments:u.vector(Ge)}),Fo=u.enum("Command",{MoveCall:Vo,TransferObjects:u.struct("TransferObjects",{objects:u.vector(Ge),address:Ge}),SplitCoins:u.struct("SplitCoins",{coin:Ge,amounts:u.vector(Ge)}),MergeCoins:u.struct("MergeCoins",{destination:Ge,sources:u.vector(Ge)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:o(t=>typeof t=="string"?ye(t):t,"input"),output:o(t=>Q(new Uint8Array(t)),"output")})),dependencies:u.vector(G)}),MakeMoveVec:u.struct("MakeMoveVec",{type:bm(qn).transform({input:o(t=>t===null?{None:!0}:{Some:t},"input"),output:o(t=>t.Some??null,"output")}),elements:u.vector(Ge)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:o(t=>typeof t=="string"?ye(t):t,"input"),output:o(t=>Q(new Uint8Array(t)),"output")})),dependencies:u.vector(G),package:G,ticket:Ge})}),$o=u.struct("ProgrammableTransaction",{inputs:u.vector(No),commands:u.vector(Fo)}),zo=u.enum("TransactionKind",{ProgrammableTransaction:$o,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Go=u.enum("TransactionExpiration",{None:null,Epoch:gm()}),Ho=u.struct("StructTag",{address:G,module:u.string(),name:u.string(),typeParams:u.vector(Lo)}),qo=u.struct("GasData",{payment:u.vector(Ie),owner:G,price:u.u64(),budget:u.u64()}),Ko=u.struct("TransactionDataV1",{kind:zo,sender:G,gasData:qo,expiration:Go}),Wo=u.enum("TransactionData",{V1:Ko}),Qo=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Xo=u.enum("IntentVersion",{V0:null}),Yo=u.enum("AppId",{Sui:null}),Jo=u.struct("Intent",{scope:Qo,version:Xo,appId:Yo});function Zo(t){return u.struct(`IntentMessage<${t.name}>`,{intent:Jo,value:t})}o(Zo,"IntentMessage");var ei=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),ti=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),ri=u.struct("MultiSigPkMap",{pubKey:ti,weight:u.u8()}),ni=u.struct("MultiSigPublicKey",{pk_map:u.vector(ri),threshold:u.u16()}),Pc=u.struct("MultiSig",{sigs:u.vector(ei),bitmap:u.u16(),multisig_pk:ni}),ym=u.vector(u.u8()).transform({input:o(t=>typeof t=="string"?ye(t):t,"input"),output:o(t=>Q(new Uint8Array(t)),"output")}),oi=u.struct("SenderSignedTransaction",{intentMessage:Zo(Wo),txSignatures:u.vector(ym)}),_c=u.vector(oi,{name:"SenderSignedData"}),jc=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())});a();c();var Sm=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:G}),NotAPackage:u.struct("NotAPackage",{objectId:G}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:G,ticketId:G})}),wm=u.struct("ModuleId",{address:G,name:u.string()}),Rc=u.struct("MoveLocation",{module:wm,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),Cm=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),xm=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Tm=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:G}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(Rc),MoveAbort:u.tuple([Rc,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:Cm}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:xm}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:Sm}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(G)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:G,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Nc=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:Tm,command:u.option(u.u64())})}),Lc=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),Cr=u.enum("Owner",{AddressOwner:G,ObjectOwner:G,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null}),vm=u.struct("TransactionEffectsV1",{status:Nc,executedEpoch:u.u64(),gasUsed:Lc,modifiedAtVersions:u.vector(u.tuple([G,u.u64()])),sharedObjects:u.vector(Ie),transactionDigest:Me,created:u.vector(u.tuple([Ie,Cr])),mutated:u.vector(u.tuple([Ie,Cr])),unwrapped:u.vector(u.tuple([Ie,Cr])),deleted:u.vector(Ie),unwrappedThenDeleted:u.vector(Ie),wrapped:u.vector(Ie),gasObject:u.tuple([Ie,Cr]),eventsDigest:u.option(Me),dependencies:u.vector(Me)}),ii=u.tuple([u.u64(),Me]),Em=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([ii,Cr])}),Im=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([Me,Cr]),PackageWrite:ii}),Am=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),Om=u.struct("EffectsObjectChange",{inputState:Em,outputState:Im,idOperation:Am}),km=u.enum("UnchangedSharedKind",{ReadOnlyRoot:ii,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),Mm=u.struct("TransactionEffectsV2",{status:Nc,executedEpoch:u.u64(),gasUsed:Lc,transactionDigest:Me,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(Me),dependencies:u.vector(Me),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([G,Om])),unchangedSharedObjects:u.vector(u.tuple([G,km])),auxDataDigest:u.option(Me)}),Vc=u.enum("TransactionEffects",{V1:vm,V2:Mm});a();c();function xr(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return G}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,n]=e.slice(1);return r==="vector"?u.vector(xr(n)):u.option(xr(n))}throw new Error(`Invalid Pure type name: ${t}`)}o(xr,"pureBcsSchemaFromTypeName");var P={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:G,AppId:Yo,Argument:Ge,CallArg:No,CompressedSignature:ei,GasData:qo,Intent:Jo,IntentMessage:Zo,IntentScope:Qo,IntentVersion:Xo,MultiSig:Pc,MultiSigPkMap:ri,MultiSigPublicKey:ni,ObjectArg:Ro,ObjectDigest:Me,ProgrammableMoveCall:Vo,ProgrammableTransaction:$o,PublicKey:ti,SenderSignedData:_c,SenderSignedTransaction:oi,SharedObjectRef:jo,StructTag:Ho,SuiObjectRef:Ie,Command:Fo,TransactionData:Wo,TransactionDataV1:Ko,TransactionExpiration:Go,TransactionKind:zo,TypeTag:qn,TransactionEffects:Vc,PasskeyAuthenticator:jc};a();c();a();c();var Dm=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Bm=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Fc(t,e="at"){let r=t.toLowerCase(),n;if(r.includes("@")){if(!Dm.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[i,s]=r.split("@");n=[...i?i.split("."):[],s]}else{if(!Bm.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}o(Fc,"normalizeSuiNSName");a();c();var Um=BigInt(1e9),si="0x1",Kn="0x2";var Pm=Ee("0x6");var ai=`${Kn}::sui::SUI`,_m=Ee("0x5");a();c();a();c();a();c();function Wn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}o(Wn,"number");function jm(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}o(jm,"isBytes");function ci(t,...e){if(!jm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}o(ci,"bytes");function li(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}o(li,"exists");function $c(t,e){ci(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}o($c,"output");a();c();var Tr=o(t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),"u32");var vt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,zc=o(t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,"byteSwap"),He=vt?t=>t:t=>zc(t);function $t(t){for(let e=0;e<t.length;e++)t[e]=zc(t[e])}o($t,"byteSwap32");function Rm(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}o(Rm,"utf8ToBytes");function zt(t){return typeof t=="string"&&(t=Rm(t)),ci(t),t}o(zt,"toBytes");var Qn=class{static{o(this,"Hash")}clone(){return this._cloneInto()}},bI={}.toString;function Gc(t){let e=o((n,i)=>t(i).update(zt(n)).digest(),"hashC"),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}o(Gc,"wrapConstructorWithOpts");var Hc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),Xn=class extends Qn{static{o(this,"BLAKE")}constructor(e,r,n={},i,s,l){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Wn(e),Wn(r),Wn(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=Tr(this.buffer=new Uint8Array(e))}update(e){li(this);let{blockLen:r,buffer:n,buffer32:i}=this;e=zt(e);let s=e.length,l=e.byteOffset,d=e.buffer;for(let m=0;m<s;){this.pos===r&&(vt||$t(i),this.compress(i,0,!1),vt||$t(i),this.pos=0);let p=Math.min(r-this.pos,s-m),f=l+m;if(p===r&&!(f%4)&&m+p<s){let h=new Uint32Array(d,f,Math.floor((s-m)/4));vt||$t(h);for(let y=0;m+r<s;y+=i.length,m+=r)this.length+=r,this.compress(h,y,!1);vt||$t(h);continue}n.set(e.subarray(m,m+p),this.pos),this.pos+=p,this.length+=p,m+=p}return this}digestInto(e){li(this),$c(e,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),vt||$t(n),this.compress(n,0,!0),vt||$t(n);let i=Tr(e);this.get().forEach((s,l)=>i[l]=He(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:l,pos:d}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.length=n,e.finished=i,e.destroyed=s,e.outputLen=l,e.buffer.set(r),e.pos=d,e}};a();c();var Yn=BigInt(4294967295),ui=BigInt(32);function qc(t,e=!1){return e?{h:Number(t&Yn),l:Number(t>>ui&Yn)}:{h:Number(t>>ui&Yn)|0,l:Number(t&Yn)|0}}o(qc,"fromBig");function Nm(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l}=qc(t[i],e);[r[i],n[i]]=[s,l]}return[r,n]}o(Nm,"split");var Lm=o((t,e)=>BigInt(t>>>0)<<ui|BigInt(e>>>0),"toBig"),Vm=o((t,e,r)=>t>>>r,"shrSH"),Fm=o((t,e,r)=>t<<32-r|e>>>r,"shrSL"),$m=o((t,e,r)=>t>>>r|e<<32-r,"rotrSH"),zm=o((t,e,r)=>t<<32-r|e>>>r,"rotrSL"),Gm=o((t,e,r)=>t<<64-r|e>>>r-32,"rotrBH"),Hm=o((t,e,r)=>t>>>r-32|e<<64-r,"rotrBL"),qm=o((t,e)=>e,"rotr32H"),Km=o((t,e)=>t,"rotr32L"),Wm=o((t,e,r)=>t<<r|e>>>32-r,"rotlSH"),Qm=o((t,e,r)=>e<<r|t>>>32-r,"rotlSL"),Xm=o((t,e,r)=>e<<r-32|t>>>64-r,"rotlBH"),Ym=o((t,e,r)=>t<<r-32|e>>>64-r,"rotlBL");function Jm(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}o(Jm,"add");var Zm=o((t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),"add3L"),ep=o((t,e,r,n)=>e+r+n+(t/2**32|0)|0,"add3H"),tp=o((t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),"add4L"),rp=o((t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,"add4H"),np=o((t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),"add5L"),op=o((t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,"add5H");var ip={fromBig:qc,split:Nm,toBig:Lm,shrSH:Vm,shrSL:Fm,rotrSH:$m,rotrSL:zm,rotrBH:Gm,rotrBL:Hm,rotr32H:qm,rotr32L:Km,rotlSH:Wm,rotlSL:Qm,rotlBH:Xm,rotlBL:Ym,add:Jm,add3L:Zm,add3H:ep,add4L:tp,add4H:rp,add5H:op,add5L:np},Se=ip;var ue=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function Et(t,e,r,n,i,s){let l=i[s],d=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],h=T[2*e+1],y=T[2*r],w=T[2*r+1],S=T[2*n],C=T[2*n+1],v=Se.add3L(m,f,l);p=Se.add3H(v,p,h,d),m=v|0,{Dh:C,Dl:S}={Dh:C^p,Dl:S^m},{Dh:C,Dl:S}={Dh:Se.rotr32H(C,S),Dl:Se.rotr32L(C,S)},{h:w,l:y}=Se.add(w,y,C,S),{Bh:h,Bl:f}={Bh:h^w,Bl:f^y},{Bh:h,Bl:f}={Bh:Se.rotrSH(h,f,24),Bl:Se.rotrSL(h,f,24)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=h,T[2*r]=y,T[2*r+1]=w,T[2*n]=S,T[2*n+1]=C}o(Et,"G1b");function It(t,e,r,n,i,s){let l=i[s],d=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],h=T[2*e+1],y=T[2*r],w=T[2*r+1],S=T[2*n],C=T[2*n+1],v=Se.add3L(m,f,l);p=Se.add3H(v,p,h,d),m=v|0,{Dh:C,Dl:S}={Dh:C^p,Dl:S^m},{Dh:C,Dl:S}={Dh:Se.rotrSH(C,S,16),Dl:Se.rotrSL(C,S,16)},{h:w,l:y}=Se.add(w,y,C,S),{Bh:h,Bl:f}={Bh:h^w,Bl:f^y},{Bh:h,Bl:f}={Bh:Se.rotrBH(h,f,63),Bl:Se.rotrBL(h,f,63)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=h,T[2*r]=y,T[2*r+1]=w,T[2*n]=S,T[2*n+1]=C}o(It,"G2b");var di=class extends Xn{static{o(this,"BLAKE2b")}constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=ue[0]|0,this.v0h=ue[1]|0,this.v1l=ue[2]|0,this.v1h=ue[3]|0,this.v2l=ue[4]|0,this.v2h=ue[5]|0,this.v3l=ue[6]|0,this.v3h=ue[7]|0,this.v4l=ue[8]|0,this.v4h=ue[9]|0,this.v5l=ue[10]|0,this.v5h=ue[11]|0,this.v6l=ue[12]|0,this.v6h=ue[13]|0,this.v7l=ue[14]|0,this.v7h=ue[15]|0;let r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){let n=Tr(zt(e.salt));this.v4l^=He(n[0]),this.v4h^=He(n[1]),this.v5l^=He(n[2]),this.v5h^=He(n[3])}if(e.personalization){let n=Tr(zt(e.personalization));this.v6l^=He(n[0]),this.v6h^=He(n[1]),this.v7l^=He(n[2]),this.v7h^=He(n[3])}if(e.key){let n=new Uint8Array(this.blockLen);n.set(zt(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:l,v3l:d,v3h:m,v4l:p,v4h:f,v5l:h,v5h:y,v6l:w,v6h:S,v7l:C,v7h:v}=this;return[e,r,n,i,s,l,d,m,p,f,h,y,w,S,C,v]}set(e,r,n,i,s,l,d,m,p,f,h,y,w,S,C,v){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=l|0,this.v3l=d|0,this.v3h=m|0,this.v4l=p|0,this.v4h=f|0,this.v5l=h|0,this.v5h=y|0,this.v6l=w|0,this.v6h=S|0,this.v7l=C|0,this.v7h=v|0}compress(e,r,n){this.get().forEach((m,p)=>T[p]=m),T.set(ue,16);let{h:i,l:s}=Se.fromBig(BigInt(this.length));T[24]=ue[8]^s,T[25]=ue[9]^i,n&&(T[28]=~T[28],T[29]=~T[29]);let l=0,d=Hc;for(let m=0;m<12;m++)Et(0,4,8,12,e,r+2*d[l++]),It(0,4,8,12,e,r+2*d[l++]),Et(1,5,9,13,e,r+2*d[l++]),It(1,5,9,13,e,r+2*d[l++]),Et(2,6,10,14,e,r+2*d[l++]),It(2,6,10,14,e,r+2*d[l++]),Et(3,7,11,15,e,r+2*d[l++]),It(3,7,11,15,e,r+2*d[l++]),Et(0,5,10,15,e,r+2*d[l++]),It(0,5,10,15,e,r+2*d[l++]),Et(1,6,11,12,e,r+2*d[l++]),It(1,6,11,12,e,r+2*d[l++]),Et(2,7,8,13,e,r+2*d[l++]),It(2,7,8,13,e,r+2*d[l++]),Et(3,4,9,14,e,r+2*d[l++]),It(3,4,9,14,e,r+2*d[l++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],T.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Kc=Gc(t=>new di(t));var sp="object",ap="ID",cp="ascii",lp="String",up="string",dp="String",mp="option",pp="Option";function Wc(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&D(e.package)===D("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}o(Wc,"isTxContext");function Jn(t){if(typeof t=="string")switch(t){case"address":return P.Address;case"bool":return P.Bool;case"u8":return P.U8;case"u16":return P.U16;case"u32":return P.U32;case"u64":return P.U64;case"u128":return P.U128;case"u256":return P.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return P.vector(P.U8).transform({input:o(r=>typeof r=="string"?new TextEncoder().encode(r):r,"input"),output:o(r=>r,"output")});let e=Jn(t.vector);return e?P.vector(e):null}if("datatype"in t){let e=D(t.datatype.package);if(e===D(si)){if(t.datatype.module===cp&&t.datatype.type===lp)return P.String;if(t.datatype.module===up&&t.datatype.type===dp)return P.String;if(t.datatype.module===mp&&t.datatype.type===pp){let r=Jn(t.datatype.typeParameters[0]);return r?P.vector(r):null}}if(e===D(Kn)&&t.datatype.module===sp&&t.datatype.type===ap)return P.Address}return null}o(Jn,"getPureBcsSchema");function Qc(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Lr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Lr(t.MutableReference)}:{ref:null,body:Lr(t)}}o(Qc,"normalizedTypeToMoveTypeSignature");function Lr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Lr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Lr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}o(Lr,"normalizedTypeToMoveTypeSignatureBody");a();c();function fp(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?Q(t):t.toBase64()}}}o(fp,"Pure");var qe={Pure:fp,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:D(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:D(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:D(t)}}}}};a();c();a();c();function Ot(t){let e=Object.entries(t).map(([r,n])=>x({[r]:n}));return $(le(e),ln(r=>({...r,$kind:Object.keys(r)[0]})))}o(Ot,"safeEnum");var Gt=$(k(),ln(t=>D(t)),nr(ke)),Ce=Gt,At=k(),we=$(le([k(),$(K(),W())]),nr(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ke=x({objectId:Gt,version:we,digest:k()}),H=$(le([x({GasCoin:O(!0)}),x({Input:$(K(),W()),type:me(O("pure"))}),x({Input:$(K(),W()),type:me(O("object"))}),x({Result:$(K(),W())}),x({NestedResult:un([$(K(),W()),$(K(),W())])})]),ln(t=>({...t,$kind:Object.keys(t)[0]}))),hp=x({budget:R(we),price:R(we),owner:R(Gt),payment:R(E(Ke))}),uA=x({address:k(),module:k(),name:k(),typeParams:E(k())}),mi=le([O("address"),O("bool"),O("u8"),O("u16"),O("u32"),O("u64"),O("u128"),O("u256"),x({vector:ir(()=>mi)}),x({datatype:x({package:k(),module:k(),type:k(),typeParameters:E(ir(()=>mi))})}),x({typeParameter:$(K(),W())})]),gp=x({ref:R(le([O("&"),O("&mut")])),body:mi}),bp=x({package:Ce,module:k(),function:k(),typeArguments:E(k()),arguments:E(H),_argumentTypes:me(R(E(gp)))}),yp=x({name:k(),inputs:sr(k(),le([H,E(H)])),data:sr(k(),nt())}),Sp=Ot({MoveCall:bp,TransferObjects:x({objects:E(H),address:H}),SplitCoins:x({coin:H,amounts:E(H)}),MergeCoins:x({destination:H,sources:E(H)}),Publish:x({modules:E(At),dependencies:E(Ce)}),MakeMoveVec:x({type:R(k()),elements:E(H)}),Upgrade:x({modules:E(At),dependencies:E(Ce),package:Ce,ticket:H}),$Intent:yp}),Xc=Ot({ImmOrOwnedObject:Ke,SharedObject:x({objectId:Ce,initialSharedVersion:we,mutable:or()}),Receiving:Ke}),wp=Ot({Object:Xc,Pure:x({bytes:At}),UnresolvedPure:x({value:nt()}),UnresolvedObject:x({objectId:Ce,version:me(R(we)),digest:me(R(k())),initialSharedVersion:me(R(we))})}),pi=Ot({Object:Xc,Pure:x({bytes:At})}),fi=Ot({None:O(!0),Epoch:we}),vr=x({version:O(2),sender:bt(Gt),expiration:bt(fi),gasData:hp,inputs:E(wp),commands:E(Sp)});var kt={MoveCall(t){let[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>z(H,r)),address:z(H,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(H,t),amounts:e.map(r=>z(H,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(H,t),sources:e.map(r=>z(H,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:Q(new Uint8Array(r))),dependencies:e.map(r=>Ee(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:Q(new Uint8Array(i))),dependencies:e.map(i=>Ee(i)),package:r,ticket:z(H,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>z(H,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Array.isArray(i)?i.map(s=>z(H,s)):z(H,i)])),data:r}}}};a();c();a();c();var hi=x({digest:k(),objectId:k(),version:le([$(K(),W()),k(),lo()])}),Cp=Ot({ImmOrOwned:hi,Shared:x({objectId:Ce,initialSharedVersion:we,mutable:or()}),Receiving:hi}),Yc=Ot({Object:Cp,Pure:E($(K(),W()))}),Zc=le([x({kind:O("Input"),index:$(K(),W()),value:nt(),type:me(O("object"))}),x({kind:O("Input"),index:$(K(),W()),value:nt(),type:O("pure")})]),xp=le([x({Epoch:$(K(),W())}),x({None:R(O(!0))})]),Jc=$(le([K(),k(),lo()]),nr(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),gi=le([x({bool:R(O(!0))}),x({u8:R(O(!0))}),x({u64:R(O(!0))}),x({u128:R(O(!0))}),x({address:R(O(!0))}),x({signer:R(O(!0))}),x({vector:ir(()=>gi)}),x({struct:ir(()=>Tp)}),x({u16:R(O(!0))}),x({u32:R(O(!0))}),x({u256:R(O(!0))})]),Tp=x({address:k(),module:k(),name:k(),typeParams:E(gi)}),vp=x({budget:me(Jc),price:me(Jc),payment:me(E(hi)),owner:me(k())}),Ep=[Zc,x({kind:O("GasCoin")}),x({kind:O("Result"),index:$(K(),W())}),x({kind:O("NestedResult"),index:$(K(),W()),resultIndex:$(K(),W())})],ut=le([...Ep]),Ip=x({kind:O("MoveCall"),target:$(k(),nr(t=>t.split("::").length===3)),typeArguments:E(k()),arguments:E(ut)}),Ap=x({kind:O("TransferObjects"),objects:E(ut),address:ut}),Op=x({kind:O("SplitCoins"),coin:ut,amounts:E(ut)}),kp=x({kind:O("MergeCoins"),destination:ut,sources:E(ut)}),Mp=x({kind:O("MakeMoveVec"),type:le([x({Some:gi}),x({None:R(O(!0))})]),objects:E(ut)}),Dp=x({kind:O("Publish"),modules:E(E($(K(),W()))),dependencies:E(k())}),Bp=x({kind:O("Upgrade"),modules:E(E($(K(),W()))),dependencies:E(k()),packageId:k(),ticket:ut}),Up=[Ip,Ap,Op,kp,Dp,Bp,Mp],Pp=le([...Up]),IA=x({version:O(1),sender:me(k()),expiration:bt(xp),gasConfig:vp,inputs:E(Zc),transactions:E(Pp)});function bi(t){let e=t.inputs.map((r,n)=>{if(r.Object)return{kind:"Input",index:n,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(ye(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:at.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(n=>ct(n,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:ct(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(n=>ct(n,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(n=>ct(n,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(n=>Array.from(ye(n))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:ct(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(n=>ct(n,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(n=>ct(n,e)),address:ct(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(n=>Array.from(ye(n))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:ct(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}o(bi,"serializeV1TransactionData");function ct(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}o(ct,"convertTransactionArgument");function el(t){return z(vr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Ir(Yc,e.value)){let r=z(Yc,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Q(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?at.tagToString(e.type.Some):null,elements:e.objects.map(r=>lt(r))}};case"MergeCoins":return{MergeCoins:{destination:lt(e.destination),sources:e.sources.map(r=>lt(r))}};case"MoveCall":{let[r,n,i]=e.target.split("::");return{MoveCall:{package:r,module:n,function:i,typeArguments:e.typeArguments,arguments:e.arguments.map(s=>lt(s))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>Q(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:lt(e.coin),amounts:e.amounts.map(r=>lt(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>lt(r)),address:lt(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>Q(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:lt(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}o(el,"transactionDataFromV1");function lt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}o(lt,"parseV1TransactionArgument");a();c();function Vr(t){return le(Object.entries(t).map(([e,r])=>x({[e]:r})))}o(Vr,"enumUnion");var We=Vr({GasCoin:O(!0),Input:$(K(),W()),Result:$(K(),W()),NestedResult:un([$(K(),W()),$(K(),W())])}),_p=x({budget:R(we),price:R(we),owner:R(Gt),payment:R(E(Ke))}),jp=x({package:Ce,module:k(),function:k(),typeArguments:E(k()),arguments:E(We)}),Rp=x({name:k(),inputs:sr(k(),le([We,E(We)])),data:sr(k(),nt())}),Np=Vr({MoveCall:jp,TransferObjects:x({objects:E(We),address:We}),SplitCoins:x({coin:We,amounts:E(We)}),MergeCoins:x({destination:We,sources:E(We)}),Publish:x({modules:E(At),dependencies:E(Ce)}),MakeMoveVec:x({type:R(k()),elements:E(We)}),Upgrade:x({modules:E(At),dependencies:E(Ce),package:Ce,ticket:We}),$Intent:Rp}),Lp=Vr({ImmOrOwnedObject:Ke,SharedObject:x({objectId:Ce,initialSharedVersion:we,mutable:or()}),Receiving:Ke}),Vp=Vr({Object:Lp,Pure:x({bytes:At}),UnresolvedPure:x({value:nt()}),UnresolvedObject:x({objectId:Ce,version:me(R(we)),digest:me(R(k())),initialSharedVersion:me(R(we))})}),Fp=Vr({None:O(!0),Epoch:we}),tl=x({version:O(2),sender:bt(Gt),expiration:bt(Fp),gasData:_p,inputs:E(Vp),commands:E(Np)});a();c();var $p=50,zp=1000n,Gp=5e10;async function nl(t,e,r){return await Qp(t,e),await Wp(t,e),e.onlyTransactionKind||(await Hp(t,e),await qp(t,e),await Kp(t,e)),await Xp(t),await r()}o(nl,"resolveTransactionData");async function Hp(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Fr(e).getReferenceGasPrice()))}o(Hp,"setGasPrice");async function qp(t,e){if(t.gasConfig.budget)return;let r=await Fr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(Gp),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=zp*BigInt(t.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}o(qp,"setGasBudget");async function Kp(t,e){if(!t.gasConfig.payment){let n=(await Fr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:ai})).data.filter(i=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?i.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(i=>z(Ke,i))}}o(Kp,"setGasPayment");async function Wp(t,e){let r=t.inputs.filter(f=>f.UnresolvedObject&&!(f.UnresolvedObject.version||f.UnresolvedObject?.initialSharedVersion)),n=[...new Set(r.map(f=>Ee(f.UnresolvedObject.objectId)))],i=n.length?ef(n,$p):[],s=(await Promise.all(i.map(f=>Fr(e).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat(),l=new Map(n.map((f,h)=>[f,s[h]])),d=Array.from(l).filter(([f,h])=>h.error).map(([f,h])=>JSON.stringify(h.error));if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);let m=s.map(f=>{if(f.error||!f.data)throw new Error(`Failed to fetch object: ${f.error}`);let h=f.data.owner,y=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:f.data.objectId,digest:f.data.digest,version:f.data.version,initialSharedVersion:y}}),p=new Map(n.map((f,h)=>[f,m[h]]));for(let[f,h]of t.inputs.entries()){if(!h.UnresolvedObject)continue;let y,w=D(h.UnresolvedObject.objectId),S=p.get(w);h.UnresolvedObject.initialSharedVersion??S?.initialSharedVersion?y=qe.SharedObjectRef({objectId:w,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||S?.initialSharedVersion,mutable:Yp(t,f)}):Jp(t,f)&&(y=qe.ReceivingRef({objectId:w,digest:h.UnresolvedObject.digest??S?.digest,version:h.UnresolvedObject.version??S?.version})),t.inputs[t.inputs.indexOf(h)]=y??qe.ObjectRef({objectId:w,digest:h.UnresolvedObject.digest??S?.digest,version:h.UnresolvedObject.version??S?.version})}}o(Wp,"resolveObjectReferences");async function Qp(t,e){let{inputs:r,commands:n}=t,i=[],s=new Set;n.forEach(d=>{if(d.MoveCall){if(d.MoveCall._argumentTypes)return;if(d.MoveCall.arguments.map(f=>f.$kind==="Input"?t.inputs[f.Input]:null).some(f=>f?.UnresolvedPure||f?.UnresolvedObject)){let f=`${d.MoveCall.package}::${d.MoveCall.module}::${d.MoveCall.function}`;s.add(f),i.push(d.MoveCall)}}switch(d.$kind){case"SplitCoins":d.SplitCoins.amounts.forEach(m=>{rl(m,P.U64,t)});break;case"TransferObjects":rl(d.TransferObjects.address,P.Address,t);break}});let l=new Map;if(s.size>0){let d=Fr(e);await Promise.all([...s].map(async m=>{let[p,f,h]=m.split("::"),y=await d.getNormalizedMoveFunction({package:p,module:f,function:h});l.set(m,y.parameters.map(w=>Qc(w)))}))}i.length&&await Promise.all(i.map(async d=>{let m=l.get(`${d.package}::${d.module}::${d.function}`);if(!m)return;let f=m.length>0&&Wc(m.at(-1))?m.slice(0,m.length-1):m;d._argumentTypes=f})),n.forEach(d=>{if(!d.MoveCall)return;let m=d.MoveCall,p=`${m.package}::${m.module}::${m.function}`,f=m._argumentTypes;if(f){if(f.length!==d.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);f.forEach((h,y)=>{let w=m.arguments[y];if(w.$kind!=="Input")return;let S=r[w.Input];if(!S.UnresolvedPure&&!S.UnresolvedObject)return;let C=S.UnresolvedPure?.value??S.UnresolvedObject?.objectId,v=Jn(h.body);if(v){w.type="pure",r[r.indexOf(S)]=qe.Pure(v.serialize(C));return}if(typeof C!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(C,null,2)}`);w.type="object";let M=S.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:C}}:S;r[w.Input]=M})}})}o(Qp,"normalizeInputs");function Xp(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}o(Xp,"validate");function rl(t,e,r){if(t.$kind!=="Input")return;let n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=qe.Pure(e.serialize(n.UnresolvedPure.value)))}o(rl,"normalizeRawArgument");function Yp(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=i.MoveCall._argumentTypes[s].ref!=="&"||r}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(r=!0)}),r}o(Yp,"isUsedAsMutable");function Jp(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=Zp(i.MoveCall._argumentTypes[s])||r}}),r}o(Jp,"isUsedAsReceiving");function Zp(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}o(Zp,"isReceivingType");function Fr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}o(Fr,"getClient");function ef(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}o(ef,"chunk");a();c();function ol(t){function e(r){return t(r)}return o(e,"object"),e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>i=>i.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[i.object(n)]}),e}o(ol,"createObjectMethods");a();c();function il(t){function e(r,n){if(typeof r=="string")return t(xr(r).serialize(n));if(r instanceof Uint8Array||Sr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return o(e,"pure"),e.u8=r=>t(P.U8.serialize(r)),e.u16=r=>t(P.U16.serialize(r)),e.u32=r=>t(P.U32.serialize(r)),e.u64=r=>t(P.U64.serialize(r)),e.u128=r=>t(P.U128.serialize(r)),e.u256=r=>t(P.U256.serialize(r)),e.bool=r=>t(P.Bool.serialize(r)),e.string=r=>t(P.String.serialize(r)),e.address=r=>t(P.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(P.vector(xr(r)).serialize(n)),e.option=(r,n)=>t(P.option(xr(r)).serialize(n)),e}o(il,"createPure");a();c();a();c();function sl(t,e){let r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Kc(n,{dkLen:32})}o(sl,"hashTypedData");function al(t){return D(t).replace("0x","")}o(al,"prepareSuiAddress");var Mt=class t{static{o(this,"TransactionDataBuilder")}constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let n=P.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){let n=P.TransactionData.parse(e)?.V1,i=n.kind.ProgrammableTransaction;if(!n||!i)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new t(z(vr,e)):new t(z(vr,el(e)))}static getDigestFromBytes(e){let r=sl("TransactionData",e);return st(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){let i=this.inputs,s=this.commands,l={ProgrammableTransaction:{inputs:i,commands:s}};if(n)return P.TransactionKind.serialize(l,{maxSize:e}).toBytes();let d=r?.expiration??this.expiration,m=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!m)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let f={sender:al(m),expiration:d||{None:!0},gasData:{payment:p.payment,owner:al(this.gasData.owner??m),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return P.TransactionData.serialize({V1:f},{maxSize:e}).toBytes()}addInput(e,r){let n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,i)=>(n.$kind==="Input"&&n.Input===e&&r(n,i),n))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>e(i,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>e(i,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>e(i,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>e(i,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>e(i,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let n=r.$Intent.inputs;r.$Intent.inputs={};for(let[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map(l=>e(l,r)):e(s,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=n);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=n);break}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(vr,this)}};a();c();function yi(t){if(typeof t=="string")return D(t);if(t.Object)return t.Object.ImmOrOwnedObject?D(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?D(t.Object.Receiving.objectId):D(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return D(t.UnresolvedObject.objectId)}o(yi,"getIdFromCallArg");var ul=o(t=>{throw TypeError(t)},"__typeError"),xi=o((t,e,r)=>e.has(t)||ul("Cannot "+r),"__accessCheck"),_=o((t,e,r)=>(xi(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),$r=o((t,e,r)=>e.has(t)?ul("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Ht=o((t,e,r,n)=>(xi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),dt=o((t,e,r)=>(xi(t,e,"access private method"),r),"__privateMethod"),Gr,Hr,qt,j,Qe,Zn,Ti,wi,vi;function cl(t,e=1/0){let r={$kind:"Result",Result:t},n=[],i=o(s=>n[s]??(n[s]={$kind:"NestedResult",NestedResult:[t,s]}),"nestedResultFor");return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,l){if(l in s)return Reflect.get(s,l);if(l===Symbol.iterator)return function*(){let m=0;for(;m<e;)yield i(m),m++};if(typeof l=="symbol")return;let d=parseInt(l,10);if(!(Number.isNaN(d)||d<0))return i(d)}})}o(cl,"createTransactionResult");var dl=Symbol.for("@mysten/transaction");function eo(t){return!!t&&typeof t=="object"&&t[dl]===!0}o(eo,"isTransaction");var ll={buildPlugins:new Map,serializationPlugins:new Map},Si=Symbol.for("@mysten/transaction/registry");function zr(){try{let t=globalThis;return t[Si]||(t[Si]=ll),t[Si]}catch{return ll}}o(zr,"getGlobalPluginRegistry");var tf=class Ci{static{o(this,"_Transaction")}constructor(){$r(this,Qe),$r(this,Gr),$r(this,Hr),$r(this,qt,new Map),$r(this,j),this.object=ol(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Ir(H,r))return r;let n=yi(r),i=_(this,j).inputs.find(s=>n===yi(s));return i?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||r.Object.SharedObject.mutable),i?{$kind:"Input",Input:_(this,j).inputs.indexOf(i),type:"object"}:_(this,j).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:D(r)}}:r)});let e=zr();Ht(this,j,new Mt),Ht(this,Hr,[...e.buildPlugins.values()]),Ht(this,Gr,[...e.serializationPlugins.values()])}static fromKind(e){let r=new Ci;return Ht(r,j,Mt.fromKindBytes(typeof e=="string"?ye(e):e)),r}static from(e){let r=new Ci;return eo(e)?Ht(r,j,new Mt(e.getData())):typeof e!="string"||!e.startsWith("{")?Ht(r,j,Mt.fromBytes(typeof e=="string"?ye(e):e)):Ht(r,j,Mt.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){zr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){zr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){zr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){zr().buildPlugins.delete(e)}addSerializationPlugin(e){_(this,Gr).push(e)}addBuildPlugin(e){_(this,Hr).push(e)}addIntentResolver(e,r){if(_(this,qt).has(e)&&_(this,qt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);_(this,qt).set(e,r)}setSender(e){_(this,j).sender=e}setSenderIfNotSet(e){_(this,j).sender||(_(this,j).sender=e)}setExpiration(e){_(this,j).expiration=e?z(fi,e):null}setGasPrice(e){_(this,j).gasConfig.price=String(e)}setGasBudget(e){_(this,j).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){_(this,j).gasData.budget==null&&(_(this,j).gasConfig.budget=String(e))}setGasOwner(e){_(this,j).gasConfig.owner=e}setGasPayment(e){_(this,j).gasConfig.payment=e.map(r=>z(Ke,r))}get blockData(){return bi(_(this,j).snapshot())}getData(){return _(this,j).snapshot()}get[dl](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:il(e=>Sr(e)?_(this,j).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):_(this,j).addInput("pure",Ir(pi,e)?z(pi,e):e instanceof Uint8Array?qe.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(qe.ObjectRef(...e))}receivingRef(...e){return this.object(qe.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(qe.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=_(this,j).commands.push(e);return cl(r-1)}splitCoins(e,r){let n=kt.SplitCoins(typeof e=="string"?this.object(e):dt(this,Qe,Ti).call(this,e),r.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):dt(this,Qe,Zn).call(this,s))),i=_(this,j).commands.push(n);return cl(i-1,r.length)}mergeCoins(e,r){return this.add(kt.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(kt.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:i}){return this.add(kt.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...r}){return this.add(kt.MoveCall({...r,arguments:e?.map(n=>dt(this,Qe,Zn).call(this,n))}))}transferObjects(e,r){return this.add(kt.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):dt(this,Qe,Zn).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(kt.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(bi(_(this,j).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(tl,_(this,j).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){let{signer:r,...n}=e,i=await this.build(n);return r.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await dt(this,Qe,wi).call(this,e),_(this,j).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await dt(this,Qe,wi).call(this,e),_(this,j).getDigest()}async prepareForSerialization(e){let r=new Set;for(let i of _(this,j).commands)i.$Intent&&r.add(i.$Intent.name);let n=[..._(this,Gr)];for(let i of r)if(!e.supportedIntents?.includes(i)){if(!_(this,qt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(_(this,qt).get(i))}await dt(this,Qe,vi).call(this,n,e)}};Gr=new WeakMap;Hr=new WeakMap;qt=new WeakMap;j=new WeakMap;Qe=new WeakSet;Zn=o(function(t){return Sr(t)?this.pure(t):dt(this,Qe,Ti).call(this,t)},"normalizeTransactionArgument_fn");Ti=o(function(t){return typeof t=="function"?z(H,t(this)):z(H,t)},"resolveArgument_fn");wi=o(async function(t){if(!t.onlyTransactionKind&&!_(this,j).sender)throw new Error("Missing transaction sender");await dt(this,Qe,vi).call(this,[..._(this,Hr),nl],t)},"prepareBuild_fn");vi=o(async function(t,e){let r=o(n=>{if(n>=t.length)return()=>{};let i=t[n];return async()=>{let s=r(n+1),l=!1,d=!1;if(await i(_(this,j),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);l=!0,await s(),d=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!d)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}},"createNext");await r(0)()},"runPlugins_fn");var Ei=tf;var rf=Symbol.for("@mysten/SuiClient");var qr=class{static{o(this,"SuiClient")}get[rf](){return!0}constructor(e){this.transport=e.transport??new _n({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!wr(Ee(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!wr(Ee(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Hn(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Hn(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:i}){let s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:Q(e),Array.isArray(r)?r:[r],n]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));let{signature:s,bytes:l}=await r.signTransaction(i);return this.executeTransactionBlock({transactionBlock:l,signature:s,...n})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!ke(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!wr(Ee(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(eo(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=Q(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=Q(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:Q(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!wr(Ee(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=$e(e.digest);return tt(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:n,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:i,nextCursor:n,data:s.map(l=>Fc(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){let s=AbortSignal.timeout(r),l=new Promise((d,m)=>{s.addEventListener("abort",()=>m(s.reason))});for(l.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(m=>setTimeout(m,n)),l])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var ml=o(async({chain:t,owner:e,chainData:r},{recipient:n})=>{let i=t.id,{objectId:s}=r,l=F.getRpcProxyUrl(i);if(!s)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let d=new qr({url:l}),m=new Ei;m.setSender(e),m.transferObjects([s],n);let p=await m.build({client:d});return{networkID:i,transaction:p}},"createSuiTransferTransaction");async function pl(t,e,r){let{chain:n}=t,i=n.id;return F.isSolanaNetworkID(i)?gc(t,e):F.isEVMNetworkID(i)?dc(t,e):F.isSuiNetworkID(i)?ml(t,e):F.isBitcoinNetworkID(i)?sc(t,e,r):Vi(i)}o(pl,"createTransferTransaction");var nf="collectible-transfer-tx",of=ee({seconds:30});function sf(t){return t&&!t.isNaN()}o(sf,"isValidAmountFn");function af(t){let{collectible:e,sendFormValues:r}=t??{},{chain:n,owner:i}=e??{},{id:s}=n??{},{recipient:l,amountAsset:d}=r??{},m=Us(l,s)??"",p=d?.isNaN()?void 0:d,f=sf(p),{data:h}=rn({address:i,networkID:s}),{data:y}=Ds(h),{data:w}=Is({networkID:s,enableFallback:!0}),S=cf(s,w,y,h),C=S?.sendContextRequired?S.sendContext:void 0;return ie({staleTime:of,enabled:f&&!!e&&!!t&&!!S,queryKey:B.transferTransaction({collectible:e,sendFormValues:r,sendContext:C}),async queryFn(){try{if(!e||!r||!S)throw new Error("Missing required data to construct fungible transfer transaction");return await pl(e,{...r,recipient:m},C)}catch(v){if(gt(v)){let M=v.response?.status;St(v,M,nf)}throw v}}})}o(af,"useCollectibleTransferTransaction");function cf(t,e,r,n){if(t)return F.isBitcoinNetworkID(t)?!e||!r||!n?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:n}}:{sendContextRequired:!1}}o(cf,"createSendContext");a();c();var Ii=class extends Le{static{o(this,"GetPinnedCollectionsError")}constructor(e){super(e),this.name="GetPinnedCollectionsError"}};async function ro(t){try{return await t.get(to.PinnedCollections)}catch{throw new Ii("")}}o(ro,"getPinnedCollections");var Ai=class extends Le{static{o(this,"SetPinnedCollectionsError")}constructor(e){super(e),this.name="SetPinnedCollectionsError"}};async function Oi(t,e){try{return await t.set(to.PinnedCollections,e)}catch{throw new Ai("")}}o(Oi,"setPinnedCollections");var to;(function(t){t.HiddenCollections="hiddenCollections",t.PinnedCollections="pinnedCollections",t.UnhiddenCollections="unhiddenCollections"})(to||(to={}));a();c();var ki=o(t=>{let e=oe();return ie({enabled:t.length!==0,queryKey:B.pinnedCollections(t),gcTime:Pe.Long,staleTime:be.Never,refetchInterval:!1,refetchOnMount:!0,async queryFn(){try{return(await ro(e)??{})[t]||[]}catch(r){return r instanceof Error&&ne.captureError(r,ae.Collectibles),[]}}})},"usePinnedCollections");a();c();var fl=o(t=>{let e=oe();return ie({enabled:t.length!==0,queryKey:B.hiddenCollections(t),gcTime:Pe.Long,staleTime:be.Never,async queryFn(){try{let r=await yt(e,t);return Array.from(r.values()).filter(n=>gn(n,{spamStatus:Be.NotVerified})).map(({id:n})=>n)}catch(r){return r instanceof Error&&ne.captureError(r,ae.Collectibles),[]}}})},"useHiddenCollections");a();c();var hl=A(U(),1);var lf=o(t=>{let e=ce();return(0,hl.useCallback)(()=>e.invalidateQueries({queryKey:B.collections(t)}),[e,t])},"useInvalidateCollectibles");a();c();var uf=2e3,no=class extends Le{static{o(this,"UsePinCollectionError")}constructor(e){super(e),this.name="UsePinCollectionError"}};function gl(){let t=oe(),e=ce();return Xe({async mutationFn({collectionId:r,accountId:n,pinned:i}){let s=await ro(t)??{},l=s[n]??[];if(i){if(Object.values(s).flat().length+1>uf)throw new no("Pinned limit reached");let m=[...new Set([...l,r])],p={...s,[n]:m};await Oi(t,p)}else{let d=l.indexOf(r);if(d===-1)throw new no("Collection not previously pinned");let m=[...l];m.splice(d,1);let p={...s,[n]:m};await Oi(t,p)}},async onSuccess(r,n){await e.invalidateQueries({queryKey:B.pinnedCollections(n.accountId)})}})}o(gl,"usePinCollection");a();c();var bl=A(U(),1);var df=o(t=>{let e=ce();return(0,bl.useCallback)(()=>e.refetchQueries({queryKey:B.collections(t)}),[e,t])},"useRefetchCollectibles");a();c();a();c();var mf=new Error("Failed to report event for collectible");async function yl(t){try{let e=await De.api().post("/collectibles/v1/events",{events:t});if(!Ni(e))throw new Error}catch{throw mf}}o(yl,"reportCollectibleEvent");function pf(){return Xe({async mutationFn({event:t}){try{await yl([t])}catch{}}})}o(pf,"useReportCollectibleEvent");a();c();function ff(){let{data:t}=Yi(),e=oe(),r=ce(),n=Ms(),i=er();return Xe({mutationFn:o(async({multichainTransaction:l,pendingTransactionInput:d,senderAddress:m,optimisticUpdate:p,gasEstimation:f})=>{if(!t)throw new Error("No account identifier found");let{networkID:h}=l,y=await dn.get(h).onBeforeSend({multichainTransaction:l,gasEstimation:f}),w=await ws({accountIdentifier:t,accountSigner:i,multichainTransaction:y,networkID:h,pendingTransactionInput:d,senderAddress:m,storage:e,utxoManager:n});return p&&lr(r,p),Ss(h,w)},"mutationFn"),onError(l){l instanceof Error&&ne.captureError(l,ae.Collectibles)}})}o(ff,"useTransferCollectible");a();c();var Sl=o(t=>{let e=oe();return ie({enabled:t.length!==0,queryKey:B.unhiddenCollections(t),gcTime:Pe.Long,staleTime:be.Never,async queryFn(){try{let r=await yt(e,t);return Array.from(r.values()).filter(n=>Rs(n,{spamStatus:Be.NotVerified})).map(({id:n})=>n)}catch(r){return r instanceof Error&&ne.captureError(r,ae.Collectibles),[]}}})},"useUnhiddenCollections");a();c();var hf=2e3,Mi=class extends Error{static{o(this,"UseUnhideCollectionError")}constructor(e){super(e),this.name="UseUnhideCollectionError"}};function wl(){let t=oe(),e=ce(),r=de();return Xe({async mutationFn(n){let{collectionId:i,accountId:s}=n,l=await Ps(t);if(!(await yt(t,s)).has(i)&&l>=hf)throw new Mi("Too many ids unhidden");await hn(t,r,{accountId:s,mutations:[{id:i,visibility:te.Visible}]})},async onSuccess(n,i){await e.invalidateQueries({queryKey:B.unhiddenCollections(i.accountId)}),await e.invalidateQueries({queryKey:B.hiddenCollections(i.accountId)})}})}o(wl,"useUnhideCollection");a();c();var Cl=A(U(),1);var gf=o(({id:t,addresses:e})=>{let{data:r,isSuccess:n}=Pt({addresses:e});return(0,Cl.useMemo)(()=>{let s={isSuccess:n,data:void 0};for(let l of r??[])for(let d of l.items)if(d.id===t)return{...s,data:d};return s},[t,r,n])},"useCollectible");a();c();var Kt=A(U(),1);a();c();var Di=A(U(),1);var xl=o(({toast:t,accountId:e})=>{let{t:r}=Y(),n=de(),i=(0,Di.useCallback)(({collectible:l,previousVisibility:d,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsNotSpam",{data:wt(l)}),t.success(d===te.Visible?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,n]),s=(0,Di.useCallback)((l,d)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return ba({accountId:e,onSuccess:i,onError:s})},"useReportNotSpam");a();c();var Bi=A(U(),1);var Tl=o(({toast:t,accountId:e})=>{let{t:r}=Y(),n=de(),i=(0,Bi.useCallback)(({collectible:l,previousVisibility:d,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsSpam",{data:wt(l)}),t.success(d===te.Hidden?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,n]),s=(0,Bi.useCallback)((l,d)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return ga({accountId:e,onSuccess:i,onError:s})},"useReportSpam");function bf({accountId:t,collectible:e,toast:r}){let n=Tl({collectible:e,accountId:t,toast:r}),i=(0,Kt.useCallback)(()=>{if(e)return n(e)},[n,e]),s=xl({collectible:e,accountId:t,toast:r}),l=(0,Kt.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:d}=Oe(t??""),m=(0,Kt.useMemo)(()=>d?.get(e?.collection.id??e?.id??""),[d,e]),p=(0,Kt.useMemo)(()=>e?js(m,{spamStatus:e.collection.spamStatus}):Be.NotVerified,[e,m]),f=kr(p);return(0,Kt.useMemo)(()=>({isSpam:f,spamStatus:p,onReportSpam:f?void 0:i,onReportNotSpam:f?l:void 0}),[p,f,i,l])}o(bf,"useCollectiblesReportSpam");a();c();var vl=A(ao(),1),El=A(U(),1);a();c();var oo=o((t,e)=>{let r=new Re(t);if(r.isZero())return"0";let n=an(-e);return r.abs().lt(n)?r.isPositive()?`<${n.toFixed()}`:`-<${n.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})},"formatValue");var yf=o(t=>{let{t:e}=Y();return(0,El.useMemo)(()=>{let n=[];if(!t)return n;let i=t?.chain.id,s=Rt.get(i).collectibleDetailPrecision;t.collection.name&&n.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let l,d;if(t.collection.floorPrice){let{price:f,token:h}=t.collection.floorPrice;if(h&&h.decimals&&h.symbol){let{decimals:y,symbol:w}=h,S=dr(f,y);n.push({topLeft:e("collectiblesFloorPrice"),topRight:`${oo(S,s)} ${w}`}),l=S,d=w}}let m,p;if(t.lastSalePrice){let{price:f,token:h}=t.lastSalePrice;if(h&&h.decimals&&(h.symbol||h.name)){let{decimals:y,symbol:w,name:S}=h,C=dr(f,y);n.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${oo(C,s)} ${w??S}`}),m=C,p=w}}if(l&&m&&d===p){let f=l-m;n.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${oo(f,s)} ${p}`,color:f>0?"spotPositive":f===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&n.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,vl.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:F.getNetworkName(t.chain.id)}),Qr()&&n.push({topLeft:"Standard",topRight:Sf(t)}),Ns(t)&&n.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),n},[t,e])},"useCollectibleTableRows");function Sf(t){let e=t.chainData;if(pe(e))return e.standard;if(Je(e))return e.standard;if(Ze(e))return"Ordinals"}o(Sf,"getStandard");a();c();var Il=A(U(),1);var wf=o(({id:t,addresses:e})=>{let{data:r}=Pt({addresses:e});return(0,Il.useMemo)(()=>(r??[]).find(n=>n.id===t),[t,r])},"useCollection");a();c();var Al=A(U(),1);var Ol=o((t,e,r,n)=>(0,Al.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!n,[t,e,r,n]),"useIsCollectionHidden");a();c();var kl=A(U(),1);var Ui=o((t,e)=>(0,kl.useMemo)(()=>e?t.includes(e):!1,[e,t]),"useIsCollectionPinned");a();c();var Kr=A(U(),1);a();c();var Ml=A(U(),1);var Dl=o(({accountId:t,collectionId:e,isPinned:r,pinMessages:n,pinCollection:i,toast:s,sendAnalyticEvent:l,unhideCollection:d,isHidden:m})=>(0,Ml.useCallback)(()=>{(async()=>{if(!e||!t){s.error(r?n.unpinFail:n.pinFail);return}try{await i({collectionId:e,accountId:t,pinned:!r}),m&&!r&&await d({collectionId:e,accountId:t}),s.success(r?n.unpinSuccess:n.pinSuccess),l&&l(r?"collectionUnpinned":"collectionPinned")}catch{s.error(r?n.unpinFail:n.pinFail)}})()},[e,t,r,n,i,s,l,d,m]),"usePinCollectionToggle");var Cf=o(({collectionId:t,isSpam:e,accountId:r,networkId:n,toast:i})=>{let{t:s}=Y(),l=de(),{mutateAsync:d}=wl(),{data:m=[]}=fl(r||""),{data:p=[]}=Sl(r||""),f=Ol(m,p,t??"",!!e),{mutateAsync:h}=gl(),{data:y=[]}=ki(r||""),w=Ui(y,t??""),S=(0,Kr.useMemo)(()=>({pinSuccess:s("collectionPinSuccess"),pinFail:s("collectionPinFail"),unpinSuccess:s("collectionUnpinSuccess"),unpinFail:s("collectionUnpinFail")}),[s]),C=(0,Kr.useCallback)(M=>{n&&l.capture(M,{data:{networkId:n,chainId:F.getChainID(n)}})},[l,n]),v=Dl({accountId:r,collectionId:t,isPinned:w,pinMessages:S,pinCollection:h,toast:i,sendAnalyticEvent:C,unhideCollection:d,isHidden:f});return(0,Kr.useMemo)(()=>({isPinned:w,onTogglePin:v}),[w,v])},"usePinCollectionProps");a();c();var Wr=A(U(),1);var rt;(function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.LOADING="LOADING"})(rt||(rt={}));var xf=o(({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:n})=>{let i=Rt.get(t).sendSuccessCondition,s=(0,Wr.useMemo)(()=>e?rt.ERROR:i===ve.SUBMISSION&&n||i===ve.CONFIRMATION&&r?rt.SUCCESS:rt.LOADING,[r,e,n,i]),l=i===ve.CONFIRMATION?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",d=(0,Wr.useMemo)(()=>{switch(s){case rt.LOADING:return Ae.t("sendStatusLoadingTitle");case rt.ERROR:return Ae.t("sendStatusErrorTitle");case rt.SUCCESS:return Ae.t(l)}},[s,l]),{isError:m,isSuccess:p}=(0,Wr.useMemo)(()=>({isError:s===rt.ERROR,isSuccess:s===rt.SUCCESS}),[s]),{transactionSpeed:f=rr.standard}=Io(y=>y.sendFormValues),h=(0,Wr.useMemo)(()=>{let y=dn.get(t).transactionSpeedDescription(f);return y?Ae.t(y):""},[t,f]);return{title:d,isError:m,isSuccess:p,sendSuccessCondition:i,estimatedTime:h}},"useSendCollectibleStatusViewState");a();c();var Bl=A(U(),1);var Tf=!1,vf="small",Ef="image",If=o(t=>(0,Bl.useMemo)(()=>Ul(t),[t]),"useCollectionMediaUri"),Ul=o((t,e=vf)=>{if(!t)return;let{media:r,collection:n}=t,i=Tf,s=Ef;return r?On({collectibleMedia:r,isImageAnimationEnabled:i,previewSize:e,mediaTypeOverride:s}):n.imageUrl},"parseCollectionMediaUri");a();c();var Pl=A(U(),1);var _l=o(t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},"findFirstImageCollectible"),Af=o(t=>(0,Pl.useMemo)(()=>{if(t)return _l(t)??t.items[0]},[t]),"useCollectionCollectible");a();c();var jl=A(U(),1);var Of=o(t=>(0,jl.useMemo)(()=>{if(!(!t||t.items.length===0))return Rl(t)},[t]),"useCollectionItemsCount"),Rl=o(t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:n="",chainData:i}]=e;if(pe(i)&&i.standard===Bt.SemiFungible){let s=parseInt(n,10);return isNaN(s)?1:s}}return r},"parseCollectionItemsCount");a();c();var Nl=A(U(),1);var kf=o(t=>(0,Nl.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]),"useOnlyImageCollectibles");a();c();var Ll=A(U(),1);var Mf=o((t,e)=>(0,Ll.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,n=e.explorers[r]??Ji.get(r).defaultExplorer,i,s;if(pe(t.chainData))s="address",i=t.chainData.mint;else if(Je(t.chainData))if(t.chainData.contract)t.chainData.id?(s="nft",i=[t.chainData.contract,t.chainData.id]):(s="token",i=t.chainData.contract);else return;else if(Ze(t.chainData))if(cr(t.chainData)){let{hash:d,index:m}=t.chainData.utxoDetails;s="transaction",i=`${d}#flow=&vout=${m}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(Qs(t.chainData))s="nft",i=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!i)return;let l=es({networkID:r,endpoint:s,explorerType:n,param:i});if(l)return{name:Zi[n],url:l}},[t,e]),"useCollectibleExplorer");a();c();var Vl=A(U(),1);var Df=o(t=>(0,Vl.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:n}=r.media.image;return e.has(n)?!1:(e.add(n),!0)})},[t]),"useDedupeCollectibles");a();c();a();c();function Fl(t,e,r){let n="...",i=e+r+n.length;if(t.length<=i)return t;let s=t.substring(0,e),l=t.substring(t.length-r);return`${s}${n}${l}`}o(Fl,"ellipsize");var $l=A(U(),1);var Bf=o(t=>{let{t:e}=Y();return(0,$l.useMemo)(()=>{let n=[];if(!t)return;let i=t.chainData;if(Ze(i)){let{outputValue:s,satNumber:l,satName:d,inscriptionId:m,inscriptionNumber:p,protocolName:f,createdAt:h,utxoDetails:y}=i,w=e(m?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),S;return s?S=parseFloat(s).toLocaleString("en-US"):y&&(S=y.value.toLocaleString("en-US")),S&&n.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}),l&&n.push({topLeft:e("collectibleDetailSatNumber"),topRight:l}),d&&n.push({topLeft:e("collectibleDetailSatName"),topRight:d}),m&&n.push({topLeft:e("collectibleDetailInscriptionId"),topRight:Fl(m,5,3)}),p&&n.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:p}),f&&n.push({topLeft:e("collectibleDetailStandard"),topRight:f?.toUpperCase()}),h&&n.push({topLeft:e("collectibleDetailCreated"),topRight:Uf(new Date(h))}),{label:w,items:n.filter(ks)}}},[t,e])},"useCollectibleChainSpecificInfoSection");function Uf(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}o(Uf,"formatDate");a();c();var Gl=A(U(),1);var Wt=o(()=>{},"noop"),zl=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function Pf(t){let{amountToBurn:e=0,explorerName:r,isBurnable:n,isHidden:i,isPinned:s,isSpam:l,onBurnToken:d,onReportNotSpam:m,onReportSpam:p,onSaveToLibrary:f,onSend:h,onSetAsAvatar:y,onToggleHide:w,onTogglePin:S,onViewOnExplorer:C,shortcuts:v,shouldDisplaySend:M,shouldDisplayShortcuts:L}=t,{t:I}=Y();return(0,Gl.useMemo)(()=>{let X=[];if(M&&X.push({text:I("commandSend"),type:"send",onClick:h??Wt}),f&&X.push({text:I("assetDetailSavePhoto"),singleWordAltText:I("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:f??Wt}),y&&!l&&X.push({text:I("collectibleDetailSetAsAvatar"),singleWordAltText:I("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:y??Wt}),S){let Z=I(s?"assetDetailUnpinCollection":"assetDetailPinCollection"),xe=I(s?"commandUnpin":"commandPin"),re=s?"unpin":"pin";X.push({text:Z,singleWordAltText:xe,type:re,menuOnly:!0,onClick:S??Wt})}if(w){let Z=I(i?"assetDetailUnhideCollection":"assetDetailHideCollection"),xe=I(i?"commandUnhide":"commandHide"),re=i?"unhide":"hide";X.push({text:Z,singleWordAltText:xe,type:re,menuOnly:!0,onClick:w??Wt})}if(m){let Z=I("collectiblesReportAsNotSpam");X.push({text:Z,type:"reportAsNotSpam",singleWordAltText:I("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:m})}if(p){let Z=I("collectiblesReportAsSpam");X.push({text:Z,type:"reportAsSpam",singleWordAltText:I("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(n){let Z=I(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");X.push({text:Z,singleWordAltText:I("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:d??Wt})}return!!C&&!!r&&X.push({text:I("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:I("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:C??Wt}),X.sort((Z,xe)=>(zl.get(Z.type)??100)-(zl.get(xe.type)??100)),{actions:Fs(X,4),shortcuts:L?v:[]}},[e,r,n,i,s,l,d,m,p,f,h,y,w,S,C,v,M,L,I])}o(Pf,"useCollectibleCTABar");export{Te as a,ou as b,Gs as c,ve as d,Sn as e,nh as f,Ws as g,oh as h,wu as i,$d as j,za as k,pe as l,Je as m,Ze as n,Qs as o,cr as p,Wd as q,mc as r,af as s,Pt as t,xd as u,Iu as v,Au as w,ng as x,Zs as y,ki as z,Td as A,vd as B,va as C,Id as D,lf as E,df as F,pf as G,ff as H,gf as I,bf as J,yf as K,wf as L,Ui as M,ed as N,ad as O,cd as P,bd as Q,Sd as R,Ad as S,Md as T,Cf as U,Oa as V,Dd as W,Io as X,xf as Y,Rd as Z,Nd as _,If as $,Af as aa,Of as ba,kf as ca,Mf as da,Df as ea,Bf as fa,Pf as ga,Ld as ha};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-UHG6ISVN.js.map
