import{a as Qt}from"./chunk-ZIPDHURR.js";import"./chunk-QDBLYAVZ.js";import"./chunk-OTPQWA5R.js";import{a as Kt}from"./chunk-PLSIE3Z6.js";import"./chunk-53EKYYOD.js";import"./chunk-TJGCGL4J.js";import{b as Mt,d as A}from"./chunk-W7HWP67X.js";import"./chunk-BO5X4B7T.js";import{o as Ht,p as _t}from"./chunk-PRM4QCVC.js";import{b as Ot}from"./chunk-22S374UP.js";import"./chunk-YCV6CTZK.js";import"./chunk-P3VWKB2X.js";import"./chunk-TCCWLNBV.js";import"./chunk-TFRCNF4E.js";import"./chunk-6WMUBTJC.js";import"./chunk-365YWPIP.js";import"./chunk-YEESR7EU.js";import"./chunk-T5IRHW4Y.js";import"./chunk-I3QHDDEG.js";import"./chunk-PQNSQOE2.js";import{j as Ft,o as B}from"./chunk-F74QCQCY.js";import"./chunk-XVSHIHTB.js";import"./chunk-TQE77AJX.js";import"./chunk-UFN6RPHX.js";import"./chunk-XSN3P2VT.js";import"./chunk-RNES5QWV.js";import"./chunk-5JE2EH74.js";import"./chunk-RLKSRZDI.js";import"./chunk-PYLKOKDS.js";import"./chunk-IWYOR6BJ.js";import"./chunk-5HTF5CEZ.js";import"./chunk-YLX2CXTY.js";import"./chunk-VGIRFM65.js";import"./chunk-E5SPQ6GD.js";import"./chunk-RCXDI445.js";import"./chunk-6DKZGOGT.js";import{a as Et}from"./chunk-GWKXKPCT.js";import{db as r,m as c}from"./chunk-FMF67RFP.js";import"./chunk-44NW6BSR.js";import"./chunk-CHXPHGEW.js";import"./chunk-3JCRVFH6.js";import"./chunk-UHG6ISVN.js";import"./chunk-EVXXECVZ.js";import{$ as Bt,G as K,J as Dt,Q as Pt,R as Tt,aa as Ut,ea as Vt,ia as Wt,ja as It,la as Lt,ta as Nt,ua as zt,v as At}from"./chunk-TQDE7426.js";import{Pa as ht,d as _,w as wt}from"./chunk-5RCV3KPE.js";import"./chunk-X5YMBRTT.js";import"./chunk-34JK5YK5.js";import"./chunk-CM4ZFCT2.js";import{$ as Ct,_ as gt}from"./chunk-RKMQYZSN.js";import"./chunk-MN377ENM.js";import"./chunk-6XVVS35Q.js";import{E as H,rb as pt}from"./chunk-COS4XKZ5.js";import{_d as xt,be as bt,ib as ft,jb as yt}from"./chunk-IJLITZAC.js";import{Oc as M,Pb as kt,_ as dt,jc as mt}from"./chunk-GSVPXWLR.js";import"./chunk-P42QO3R7.js";import{Ba as d,V as s,a as lt,ca as St,d as ut,ja as vt,r as C}from"./chunk-LYTSCHVN.js";import"./chunk-RCTLXTBM.js";import"./chunk-Z26KXQRL.js";import"./chunk-NUMCZRU4.js";import"./chunk-P5BPG5MC.js";import"./chunk-PPQ6BNOX.js";import{a as p,g as ct,i as P,n as T}from"./chunk-NSVULBS3.js";P();T();var t=ct(lt(),1);P();T();var m=ct(lt(),1);var se=c.div`
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 47px auto;
  align-items: center;
  justify-content: flex-start;
  background: ${s.colors.legacy.elementBase};
  width: 328px;
  border-radius: 6px;
  margin-top: 24px;
`,ce=c.div`
  display: grid;
  gap: 10px;
  grid-template-columns: 33px 1fr auto;
  align-items: center;
  padding: 9px 14px;
  border-bottom: 1px solid ${s.colors.legacy.areaBase};
`,le=c(Mt)``,ue=c.section`
  padding: 14px;
`,de=c.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  height: 30px;
  align-items: center;
`,ke=c(r)`
  color: ${a=>a.activationState==="active"?s.colors.legacy.spotPositive:a.activationState==="inactive"?s.colors.legacy.spotNegative:a.activationState==="activating"?s.colors.brand.yellowMoon:a.activationState==="deactivating"?s.colors.brand.yellowMoon:s.colors.legacy.textDiminished};
`,me=c(Kt).attrs(()=>({tooltipAlignment:"bottomCenter",iconSize:12,lineHeight:17,fontWeight:400,fontSize:14,noWrap:!0}))``,Q=p(a=>{let{t:e}=C(),{data:u}=Vt(a.validatorKeybaseUsername),S=a.validatorName??a.validatorKeybaseUsername??a.voteAccountPubkey??a.stakeAccountPubkey;return m.default.createElement(se,null,m.default.createElement(ce,null,m.default.createElement(le,{width:28,iconUrl:a.validatorIconUrl??u}),m.default.createElement(r,{textAlign:"left",weight:600,size:16,noWrap:!0},S),m.default.createElement(ke,{activationState:a.status,textAlign:"right",weight:400,size:14,noWrap:!0,textTransform:"capitalize"},a.status??"")),m.default.createElement(ue,null,Object.entries(a.data).map(([i,n])=>m.default.createElement(de,{key:i,onClick:n.onClick},m.default.createElement(me,{info:n.tooltip?m.default.createElement(_t,null,m.default.createElement(Ht,null,n.tooltip)):null},i==="Stake Account"?e("stakeAccountCardStakeAccount"):"",i==="Balance"?e("stakeAccountCardBalance"):"",i==="Rent Reserve"?e("stakeAccountCardRentReserve"):"",i==="Active Stake"?e("stakeAccountCardActiveStake"):"",i==="Lockup"?e("stakeAccountCardLockup"):"",i==="Rewards"?e("stakeAccountCardRewards"):""),n.node))))},"StakeAccountCard");var U=c.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: scroll;
`,V=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
`,j=c.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  color: ${s.colors.legacy.spotBase};
  text-decoration: none;
  cursor: pointer;
`,b=c.section`
  display: flex;
  gap: 15px;
`,jt=c.section`
  display: flex;
  gap: 15px;
  margin-top: 24px;
  flex-direction: column;
`,pe=c.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
`,Se=5e3,ve=p(a=>{let{t:e}=C(),{showStakeAccountDeactivateStakeStatusModal:u,showStakeAccountDelegateStakeStatusModal:S,showStakeAccountWithdrawStakeStatusModal:i,closeAllModals:n}=Ot(),{data:v}=pt(),g=(0,t.useMemo)(()=>v?.addresses.find(x=>kt.isSolanaNetworkID(x.networkID)),[v]),{solanaPublicKey:D,connection:f,networkID:$}=(0,t.useMemo)(()=>{let x=g?.address??"",st=g?.networkID,ie=ft(yt(st));return{solanaPublicKey:x,connection:ie,networkID:st}},[g]),q=Lt(xt),Yt=mt(dt.Solana),{data:Gt}=wt({query:{data:Yt}}),{data:Y}=ht(),W=Gt?.usd,y=Wt(f,D),o=y.data?.find(x=>x.pubkey===a.stakeAccountPubkey),I=o?.info.meta.authorized.staker,Jt=o?.lamports??0,G=parseFloat(o?.info.meta.rentExemptReserve??"0"),Xt=!!o?.inflationReward,{data:Zt=G}=bt(g),L=!!(Y&&new ut(Y.totalQuantityString).gt(Zt+Se)),J=Nt(),l=It(f,o?.pubkey).data,Rt=l?.active??0,te=l?.inactive??0,N=Jt-G-Rt,X=o?.info.stake?.delegation.voter,ee=Ae(),k=X?ee.get(X):void 0,Z=new Date((o?.info.meta.lockup?.unixTimestamp??0)*1e3),z=Ut(o),E=Tt(l?.state)&&L,O=Pt(l?.state)&&!z&&L,oe=M("enable-psol-native-convert"),R=M("enable-psol-native-delayed-convert"),w=q&&oe&&O,h=q&&R&&E,tt=R&&l?.state==="deactivating",{data:ne}=gt($),{data:et}=Ct($,o?.pubkey??""),{pushDetailView:ot}=Ft(),ae=(0,t.useCallback)(()=>{ot(t.default.createElement(Qt,null))},[ot]),nt=zt(ae),at=(0,t.useCallback)(()=>{if(!o)throw new Error("Stake account not found");nt({stakeAccount:o,validatorName:k?.info?.name??"",activationState:l?.state})},[nt,o,k,l]),F=[{key:"viewOnExplorer",label:e("stakeAccountViewViewOnExplorer",{explorer:ne}),onClick:p(()=>{et&&self.open(et,"_blank")},"onClick")}];o&&(k&&(l?.state==="inactive"||l?.state==="deactivating")&&F.push({key:"restake",label:e("stakeAccountViewRestake"),onClick:p(()=>{S({stakeAccountPubkey:o.pubkey,voteAccountPubkey:k?.voteAccountPubkey,lamports:l.inactive,onClose:n})},"onClick")}),N>0&&N>te&&F.push({key:"withdrawUnstakedSOL",label:e("stakeAccountViewWithdrawUnstakedSOL"),onClick:p(()=>{i({stakeAccountPubkey:o.pubkey,amount:N,usdPerSol:W,onClose:n})},"onClick")}));let it=(0,t.useCallback)(()=>{!o||!I||u({stakeAccountPubkey:o.pubkey,stakeAuthorityPubkey:I,onClose:n})},[o,I,u,n]),rt=(0,t.useCallback)(()=>{o&&i({stakeAccountPubkey:o.pubkey,amount:o.lamports,usdPerSol:W,onClose:n})},[o,i,W,n]);return y.isPending?t.default.createElement(U,null,t.default.createElement(Et,null)):y.isError?t.default.createElement(U,null,t.default.createElement(B,null,e("stakeAccountViewPrimaryText")),t.default.createElement(V,null,t.default.createElement(r,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},y.error?.message??e("stakeAccountViewError"))),t.default.createElement(b,null,t.default.createElement(d,{onClick:n},e("commandClose")))):y.isSuccess&&o?t.default.createElement(U,{canConvertStake:w,canConvertDelayedStake:h},t.default.createElement(B,{items:F},e("stakeAccountViewPrimaryText")),k?t.default.createElement(t.default.Fragment,null,t.default.createElement(V,null,t.default.createElement($t,{canConvertStake:w,canConvertDelayedStake:h,hasValidator:!!k,durationUntilEpochEnds:J,isDeactivating:tt}),t.default.createElement(Q,{stakeAccountPubkey:o.pubkey,voteAccountPubkey:k?.voteAccountPubkey,validatorName:k?.info?.name,validatorKeybaseUsername:k?.info?.keybaseUsername,validatorIconUrl:k?.info?.iconUrl,status:l?.state,data:{"Stake Account":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},H(o.pubkey))},Balance:{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,l?.active))},Lockup:{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},z?_(Z):"\u2013")},Rewards:Xt?{node:t.default.createElement(pe,null,t.default.createElement(r,{color:s.colors.legacy.spotPositive,textAlign:"right",weight:500,size:14,noWrap:!0},"+",t.default.createElement(A,null,o?.inflationReward))),tooltip:e("stakeAccountCardRewardsTooltip")}:{node:t.default.createElement(r,{color:s.colors.legacy.textDiminished,textAlign:"right",weight:500,size:14,noWrap:!0},"\u2013")}}}),L?null:t.default.createElement(St,{marginY:"base"},t.default.createElement(vt,{color:"spotNegative",children:e("stakeAccountInsufficientFunds")}))),t.default.createElement(qt,{canConvertStake:w,canUnstake:E,canWithdrawStake:O,canConvertDelayedStake:h,onClose:n,onUnstake:it,onWithdrawStake:rt,onConvertStake:at})):t.default.createElement(t.default.Fragment,null,t.default.createElement(V,null,t.default.createElement($t,{canConvertStake:w,canConvertDelayedStake:h,hasValidator:!!k,durationUntilEpochEnds:J,isDeactivating:tt}),t.default.createElement(Q,{stakeAccountPubkey:o.pubkey,status:l?.state,data:{"Stake Account":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},H(o.pubkey))},Balance:{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(A,null,l?.active))},Lockup:{node:t.default.createElement(r,{textAlign:"right",weight:500,size:14,noWrap:!0},z?_(Z):"\u2013")}}})),t.default.createElement(qt,{canUnstake:E,canWithdrawStake:O,canConvertStake:w,canConvertDelayedStake:h,onClose:n,onUnstake:it,onWithdrawStake:rt,onConvertStake:at}))):t.default.createElement(U,null,t.default.createElement(B,null,e("stakeAccountViewPrimaryText")),t.default.createElement(V,null,t.default.createElement(r,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},e("stakeAccountViewStakeNotFound"))),t.default.createElement(b,null,t.default.createElement(d,{onClick:n},e("commandClose"))))},"StakeAccountDetailPage"),no=ve,$t=p(({canConvertStake:a,canConvertDelayedStake:e,isDeactivating:u,hasValidator:S,durationUntilEpochEnds:i})=>{let{t:n}=C(),v=(0,t.useMemo)(()=>a?t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactiveToPSOL.part1")," ",t.default.createElement(j,{href:Dt},n("stakeAccountViewStakeInactiveToPSOL.part2"))):u?n("stakeAccountViewStakeDeactivatingToPSOL",{durationUntilEpochEnds:i}):e?n("convertToPSOLDelayDisclaimer",{durationUntilEpochEnds:i}):S?t.default.createElement(At,{i18nKey:"stakeAccountViewSOLCurrentlyStakedInterpolated"},"Your SOL is currently staked with a validator. You'll need to unstake to ",t.default.createElement("br",null),"access these funds. ",t.default.createElement(j,{href:K},"Learn more")):t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactive.part1")," ",t.default.createElement(j,{href:K},n("stakeAccountViewStakeInactive.part2"))),[a,e,u,S,i,n]);return t.default.createElement(r,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},v)},"StakeDescription"),qt=p(a=>{let{t:e}=C(),{canUnstake:u,canWithdrawStake:S,canConvertStake:i,canConvertDelayedStake:n,onClose:v,onUnstake:g,onWithdrawStake:D,onConvertStake:f}=a;return i?t.default.createElement(jt,null,t.default.createElement(d,{background:"spot",onClick:f},e("convertToPhantomLST")),t.default.createElement(b,null,t.default.createElement(d,{onClick:v},e("commandClose")),t.default.createElement(d,{onClick:D},e("stakeAccountViewWithdrawStake")))):n?t.default.createElement(jt,null,t.default.createElement(d,{background:"spot",onClick:f},e("convertToPhantomLST")),t.default.createElement(b,null,t.default.createElement(d,{onClick:v},e("commandClose")),t.default.createElement(d,{onClick:g},e("stakeAccountViewActionButtonUnstake")))):t.default.createElement(b,null,t.default.createElement(d,{onClick:v},e("commandClose")),S&&t.default.createElement(d,{onClick:D},e("stakeAccountViewWithdrawStake")),u&&t.default.createElement(d,{background:"spot",onClick:g},e("stakeAccountViewActionButtonUnstake")))},"StakeActions"),Ae=p(()=>{let a=Bt(),e=a.results??[],u=(0,t.useRef)(e);return u.current=e,(0,t.useMemo)(()=>new Map(u.current.map(i=>[i.voteAccountPubkey,i])),[a.dataUpdatedAt,u])},"useValidatorsByVoteAccountPubkey");export{ve as StakeAccountDetailPage,no as default};
//# sourceMappingURL=StakeAccountDetailPage-C6VND3PD.js.map
