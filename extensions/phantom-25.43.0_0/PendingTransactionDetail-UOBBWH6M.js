import{a as oe,c as _e}from"./chunk-3EES3B5S.js";import{b as Pe}from"./chunk-6CR53BQV.js";import"./chunk-FYHA5XUW.js";import{a as Oe}from"./chunk-PIQUGS32.js";import"./chunk-PLSIE3Z6.js";import"./chunk-ZJ2XKLPM.js";import{C as te,E as ze,G as Le,Ia as Ke}from"./chunk-53EKYYOD.js";import"./chunk-TJGCGL4J.js";import"./chunk-W7HWP67X.js";import"./chunk-BO5X4B7T.js";import{s as b}from"./chunk-PRM4QCVC.js";import"./chunk-22S374UP.js";import"./chunk-YCV6CTZK.js";import"./chunk-P3VWKB2X.js";import"./chunk-TCCWLNBV.js";import"./chunk-TFRCNF4E.js";import"./chunk-6WMUBTJC.js";import"./chunk-365YWPIP.js";import"./chunk-YEESR7EU.js";import"./chunk-T5IRHW4Y.js";import"./chunk-I3QHDDEG.js";import"./chunk-PQNSQOE2.js";import{j as K}from"./chunk-F74QCQCY.js";import"./chunk-XVSHIHTB.js";import{a as Te}from"./chunk-TQE77AJX.js";import{a as Ve}from"./chunk-UFN6RPHX.js";import"./chunk-XSN3P2VT.js";import"./chunk-RNES5QWV.js";import"./chunk-5JE2EH74.js";import"./chunk-RLKSRZDI.js";import{c as He}from"./chunk-PYLKOKDS.js";import"./chunk-IWYOR6BJ.js";import"./chunk-5HTF5CEZ.js";import"./chunk-YLX2CXTY.js";import"./chunk-VGIRFM65.js";import"./chunk-E5SPQ6GD.js";import"./chunk-RCXDI445.js";import"./chunk-6DKZGOGT.js";import{a as ee,d as _}from"./chunk-GWKXKPCT.js";import{B as ge,R as Ge,db as k,m as f,p as fe,q as ue}from"./chunk-FMF67RFP.js";import{A as Ce,tc as Ae}from"./chunk-44NW6BSR.js";import"./chunk-CHXPHGEW.js";import"./chunk-3JCRVFH6.js";import"./chunk-UHG6ISVN.js";import"./chunk-EVXXECVZ.js";import"./chunk-TQDE7426.js";import{$ as de,D as Ie,H as Z,K as Ue,L as Me,U as Be,ca as Fe,ea as R}from"./chunk-5RCV3KPE.js";import"./chunk-X5YMBRTT.js";import"./chunk-34JK5YK5.js";import{a as be,b as J}from"./chunk-CM4ZFCT2.js";import{ba as L,f as V,h as H,o as z}from"./chunk-RKMQYZSN.js";import"./chunk-MN377ENM.js";import"./chunk-6XVVS35Q.js";import{rb as G}from"./chunk-COS4XKZ5.js";import{Pb as ve,Xb as O,Y as ke,de as Ne,eb as ae,h as D,k as De}from"./chunk-IJLITZAC.js";import{Ac as Y,Pb as w,Rd as lt,X as pe,xc as W}from"./chunk-GSVPXWLR.js";import{G as me}from"./chunk-P42QO3R7.js";import{Ba as q,V as s,a as le,e as Q,r as A}from"./chunk-LYTSCHVN.js";import"./chunk-RCTLXTBM.js";import"./chunk-Z26KXQRL.js";import"./chunk-NUMCZRU4.js";import"./chunk-P5BPG5MC.js";import"./chunk-PPQ6BNOX.js";import{a as y,g as ie,i as M,n as B}from"./chunk-NSVULBS3.js";M();B();var a=ie(le(),1);M();B();M();B();var T=ie(le(),1);var mt=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,pt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,dt=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,ft=f(k)`
  margin-top: 16px;
`,ut=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,je=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,r]=(0,T.useState)(void 0),{popDetailView:u}=K(),t=e.networkID,p=w.getAddressType(t),F=e.data.transactions[e.data.transactions.length-1],{data:c}=G(),{data:n,status:I}=de(e,()=>u(),c),{data:C}=Z(t,n),E=C?.gasEstimationPriceUSD??"",{data:v}=L(),N=[];if(v){let x=v.explorers[t]??V.get(t).defaultExplorer,d=z({networkID:t,endpoint:"transaction",explorerType:x,param:F.hash});d!==""&&N.push({label:o("richTransactionDetailViewOnExplorer",{explorer:H[x]}),value:d,type:"link"})}let{data:U,status:j}=R(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),h=O(o,j,U),S=[{label:o("richTransactionDetailNetworkFee"),value:E.length>0?o("gasUpTo",{amount:E}):T.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:h!==""?h:T.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...N],{mutateAsync:P}=Pe(),re=(0,T.useCallback)(async()=>{if(!c||!n)return;let x=c.addresses.find(d=>d.networkID===t);if(x){e.type===D.Cancel?J.capture("transactionPrioritizeCancelConfirmClicked",{data:{chainID:t,chainType:p}}):J.capture("transactionCancelConfirmClicked",{data:{chainID:t,chainType:p}});try{r("inflight");let d=Ne({ethereumNetworkID:t,sender:x.address,destination:x.address,value:new Q("0",10),nonce:e.data.nonce});await P({multichainTransaction:{networkID:t,unsignedTransaction:d},pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:me.parse({from:e.ownerAddress})},senderAddress:x,gasEstimation:n}),u(),i(),r(void 0)}catch(d){Y.captureError(d,W.Transaction),r("error")}}},[c,t,p,e,n,P,u,i]);return T.default.createElement(mt,null,T.default.createElement(pt,null,T.default.createElement(ze,{image:{type:"icon",preset:"x-bold"},size:64}),T.default.createElement(dt,{size:28,weight:600},e.type===D.Cancel?o("transactionPrioritizeCancel"):o("transactionCancel")),T.default.createElement(oe,{rows:S}),g!=="error"&&T.default.createElement(ft,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionCancelHelperText")),g==="error"&&T.default.createElement(ut,null,T.default.createElement(te,{color:s.colors.legacy.spotNegative,title:T.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),T.default.createElement(_,{onSecondaryClicked:()=>u(),onPrimaryClicked:re,primaryTheme:"warning",primaryText:g==="inflight"?T.default.createElement(ee,{trackColor:s.colors.legacy.spotNegative,color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||I==="error",secondaryText:o("commandClose")}))},"CancelEvmTransaction");M();B();var Xe=ie(lt(),1),l=ie(le(),1);var gt=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Tt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,xt=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,ht=f(k)`
  margin-top: 16px;
`,yt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Ct=y(({size:e})=>l.default.createElement(ue,{size:e},l.default.createElement(fe,{shape:"circle",color:Te(s.colors.legacy.spotPositive,.1)},l.default.createElement(ge,{width:32}))),"Icon"),$e=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,r]=(0,l.useState)(void 0),{popDetailView:u}=K(),t=e.networkID,{data:p}=G(),{data:F,status:c}=Ie({networkID:t}),n=F?.fast,I=ae.get(t).transactionSpeedSeconds(De.fast),{data:C}=L(),E=[];if(C){let h=C.explorers[t]??V.get(t).defaultExplorer,S=z({networkID:t,endpoint:"transaction",explorerType:h,param:e.data.txID});S!==""&&E.push({label:o("richTransactionDetailViewOnExplorer",{explorer:H[h]}),value:S,type:"link"})}let v=O(o,c,I?{timeToMineSeconds:I}:void 0),N=[{label:o("richTransactionDetailNetworkFee"),value:n?`${ke(n.btcPerKilobyte)} sats/vB`:l.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:v!==""?v:l.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...E],U=Be(),j=(0,l.useCallback)(async()=>{if(!p||!n?.btcPerKilobyte)return;let h=p.addresses.filter(P=>P.networkID===t),S=h[0];h.length>1&&(S=h.find(P=>P.addressType===pe.BitcoinNativeSegwit)),J.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t}});try{r("inflight"),await ve(Ae(),{addressType:S.addressType,accountIdentifier:p.identifier,pendingTransaction:e,pendingTransactionInput:{...(0,Xe.default)(e)},desiredFeeRateInBtcPerKilobyte:n.btcPerKilobyte,safeToSendUtxos:await U.getSafeToSendUtxos(S.address),utxoManager:U},new be),u(),i(),r(void 0)}catch(P){Y.captureError(P,W.Transaction),r("error")}},[p,t,e,n?.btcPerKilobyte,u,i,U]);return l.default.createElement(gt,null,l.default.createElement(Tt,null,l.default.createElement(Ct,{size:64}),l.default.createElement(xt,{size:28,weight:600},o("transactionSpeedUp")),l.default.createElement(oe,{rows:N}),g!=="error"&&l.default.createElement(ht,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionSpeedUplHelperText")),g==="error"&&l.default.createElement(yt,null,l.default.createElement(te,{color:s.colors.legacy.spotNegative,title:l.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),l.default.createElement(_,{onSecondaryClicked:()=>u(),onPrimaryClicked:j,primaryText:g==="inflight"?l.default.createElement(ee,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:c==="error"&&!n?.btcPerKilobyte,secondaryText:o("commandClose")}))},"SpeedUpBitcoinTransaction");M();B();var m=ie(le(),1);var Pt=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,wt=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Et=f(k)`
  margin-top: 20px;
  margin-bottom: 20px;
`,St=f(k)`
  margin-top: 16px;
`,Dt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,kt=y(({size:e})=>m.default.createElement(ue,{size:e},m.default.createElement(fe,{shape:"circle",color:Te(s.colors.legacy.spotPositive,.1)},m.default.createElement(ge,{width:32}))),"Icon"),qe=y(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=A(),[g,r]=(0,m.useState)(void 0),{popDetailView:u}=K(),t=e.networkID,p=w.getAddressType(t),F=e.data.transactions[e.data.transactions.length-1],{data:c}=G(),{data:n,status:I}=de(e,()=>u(),c),{data:C}=Z(t,n),E=C?.gasEstimationPriceUSD??"",{data:v}=L(),N=[];if(v){let x=v.explorers[t]??V.get(t).defaultExplorer,d=z({networkID:t,endpoint:"transaction",explorerType:x,param:F.hash});d!==""&&N.push({label:o("richTransactionDetailViewOnExplorer",{explorer:H[x]}),value:d,type:"link"})}let{data:U,status:j}=R(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),h=O(o,j,U),S=[{label:o("richTransactionDetailNetworkFee"),value:E.length>0?o("gasUpTo",{amount:E}):m.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:h!==""?h:m.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished})},...N],{mutateAsync:P}=Fe(),re=(0,m.useCallback)(async()=>{if(!(!c||!n||!c.addresses.find(d=>d.networkID===t))){J.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t,chainType:p}});try{r("inflight"),await P({chainType:pe.EVM,accountIdentifier:c.identifier,pendingTransaction:e,pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:me.parse({from:e.ownerAddress})},gasEstimation:n,nonce:e.data.nonce}),u(),i(),r(void 0)}catch(d){Y.captureError(d,W.Transaction),r("error")}}},[c,t,p,e,n,P,i,u]);return m.default.createElement(Pt,null,m.default.createElement(wt,null,m.default.createElement(kt,{size:64}),m.default.createElement(Et,{size:28,weight:600},o("transactionSpeedUp")),m.default.createElement(oe,{rows:S}),g!=="error"&&m.default.createElement(St,{lineHeight:16,color:s.colors.legacy.textDiminished,size:14},o("transactionSpeedUplHelperText")),g==="error"&&m.default.createElement(Dt,null,m.default.createElement(te,{color:s.colors.legacy.spotNegative,title:m.default.createElement(k,{color:s.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),m.default.createElement(_,{onSecondaryClicked:()=>u(),onPrimaryClicked:re,primaryText:g==="inflight"?m.default.createElement(ee,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||I==="error",secondaryText:o("commandClose")}))},"SpeedUpEvmTransaction");var vt=y(e=>{let{networkID:i}=e,[o,g]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{let X=setInterval(()=>g(Date.now()),5e3);return()=>clearInterval(X)},[g]);let{t:r}=A(),{pushDetailView:u}=K(),{handleHideModalVisibility:t}=Ke(),p=(0,a.useCallback)(()=>t("pendingTransaction"),[t]),{data:F}=G(),{data:c}=Me(F?.addresses||[]),n=c?.pendingTransaction.filter(X=>e.networkID===X.networkID),I=n?n[n.length-1]?.id:void 0,C=ae.get(e.networkID).isPendingTransactionConfirmed(e),E=!1,v=e.type??D.DappInteraction,N=Oe(e.timestamp??0,r("richTransactionDetailAt")),{header:U,assetSymbol:j,tokenUSDPrice:h,uiRecipient:S,logoUri:P}=(0,a.useMemo)(()=>({header:e.display.detail?.header??"",assetSymbol:e.display.detail?.assetSymbol??"",tokenUSDPrice:e.display.detail?.tokenUSDPrice??"",uiRecipient:e.display.detail?.uiRecipient??"",logoUri:e.display.detail?.logoUri??""}),[e]),re=w.getNetworkName(i),x="",d=s.colors.legacy.textDiminished;C?E?(x=r("transactionsFailed"),d=s.colors.legacy.spotNegative):(x=r("transactionsSuccess"),d=s.colors.legacy.spotPositive):e.type===D.Cancel?(x=r("pendingTransactionCancelling"),d=s.colors.legacy.spotNegative):x=r("pendingTransactionPending");let ne;if("transactions"in e.data&&w.isEVMNetworkID(i)){let $=e.data.transactions[e.data.transactions.length-1].unsignedTransaction,ce=new Q($.maxFeePerGas??"0"),ct=new Q($.maxPriorityFeePerGas??"0");ne={networkID:i,gasLimit:new Q($.gas??"0"),maxFeePerGas:ce,maxPriorityFeePerGas:ct},E=!!e.data?.transactions?.[e.data?.transactions?.length-1]?.error}let{data:Je}=Z(i,ne),Qe=r("gasUpTo",{amount:Je?.gasEstimationPriceUSD}),{data:We,status:Ye}=R(i,ne?.maxFeePerGas,ne?.maxPriorityFeePerGas),we=O(r,Ye,We),{data:Ee}=L(),Se=[];if(Ee){let X=Ee.explorers[i]??V.get(i).defaultExplorer,$="";w.isEVMNetworkID(e.networkID)&&"transactions"in e.data&&($=e.data.transactions[e.data.transactions.length-1].hash),w.isBitcoinNetworkID(e.networkID)&&($=e.data.txID);let ce=z({networkID:i,endpoint:"transaction",explorerType:X,param:$});ce!==""&&Se.push({label:r("richTransactionDetailViewOnExplorer",{explorer:H[X]}),value:ce,type:"link"})}let Ze=w.getNetworkName(i),Re={label:r("pendingTransactionDate"),value:N},et={label:r("pendingTransactionStatus"),value:x,color:d},tt={label:r("transactionsTo"),value:S??""},ot={label:r("historyNetwork"),value:re},rt={label:r("pendingTransactionNetworkFee"),value:Qe,tooltipContent:r("networkFeesTooltipDescription",{chainName:Ze})},nt={label:r("pendingTransactionEstimatedTime"),value:we!==""?we:a.default.createElement(b,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderDiminished}),tooltipContent:r("sendFungibleSummaryEstimatedTimeDescription")},he=a.default.createElement(Le,{pendingTransactionType:v,isError:E,isConfirmed:C,logoUri:P,size:"medium"}),se,it=!C&&Ce.get(i).showFeeRowInPendingTransactionDetail,at=Ce.get(i).showTimeToMineRowInPendingTransactionDetail&&!C,st=e.display.detail?.secondaryHeader,ye=[Re,et,tt,ot,...it?[rt]:[],...at?[nt]:[],...Se];switch(v){case D.Send:{se={sections:[{rows:ye}],title:C?r("richTransactionDetailSent"):r("pendingTransactionsSendingTitle",{assetSymbol:j}),primaryText:{value:U},secondaryText:{value:h},image:he};break}case D.Cancel:{se={sections:[{rows:ye}],title:r(C?"transactionCancelled":"pendingTransactionCancelling"),primaryText:{value:U},secondaryText:{value:h},image:he};break}case D.DappInteraction:default:{se={sections:[{rows:ye}],title:r(C?"richTransactionDetailAppInteraction":"pendingTransactionPendingInteraction"),primaryText:{value:""},secondaryText:{value:st??r("pendingTransactionUnknownApp")},image:he};break}}return{detailsProps:se,pendingTransaction:e,isOldestPendingTx:I===e.id,leftButton:a.default.createElement(bt,{onClick:p},a.default.createElement(Ge,null)),showCancelEvmTransactionModal:y(()=>{u(a.default.createElement(je,{onSuccess:p,pendingTransaction:e}))},"showCancelEvmTransactionModal"),showSpeedUpEvmTransactionModal:y(()=>{u(a.default.createElement(qe,{onSuccess:p,pendingTransaction:e}))},"showSpeedUpEvmTransactionModal"),showSpeedUpBitcoinTransactionModal:y(()=>{u(a.default.createElement($e,{onSuccess:p,pendingTransaction:e}))},"showSpeedUpBitcoinTransactionModal"),hidePendingTransactionModal:p,now:o}},"usePendingTransactionDetailProps"),bt=f(He)`
  position: absolute;
  left: 5px;
`,It=y(({pendingTransaction:e})=>{let i=vt(e);return a.default.createElement(Mt,{...i})},"InnerPendingTransactionDetail"),Ut=y(({pendingTransactionId:e})=>{let{data:i}=Ue(e),[o,g]=(0,a.useState)();return(0,a.useEffect)(()=>{i&&g(i)},[i]),o?a.default.createElement(It,{pendingTransaction:o}):null},"PendingTransactionDetail"),Vr=Ut,Mt=a.default.memo(({detailsProps:e,showCancelEvmTransactionModal:i,showSpeedUpEvmTransactionModal:o,showSpeedUpBitcoinTransactionModal:g,hidePendingTransactionModal:r,leftButton:u,pendingTransaction:t,isOldestPendingTx:p,now:F})=>{let{t:c}=A(),n=a.default.createElement(q,{onClick:r},c("commandClose"));if(t&&(p||t.type!==D.Cancel)&&!ae.get(t.networkID).isPendingTransactionMined(t)){if(w.isPolygonNetworkID(t.networkID)){t=t;let I=t.data.transactions[t.data.transactions.length-1];F-I.timestamp>6e4&&(t.type===D.Cancel?n=a.default.createElement(q,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):n=a.default.createElement(q,{theme:"warning",onClick:i},c("pendingTransactionCancel")))}w.isEthereumNetworkID(t.networkID)&&(t.type===D.Cancel?n=a.default.createElement(q,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):p?n=a.default.createElement(_,{primaryText:c("pendingTransactionSpeedUp"),secondaryText:c("pendingTransactionCancel"),onPrimaryClicked:o,onSecondaryClicked:i,primaryTheme:"default",secondaryTheme:"warning"}):n=a.default.createElement(q,{theme:"warning",onClick:i},c("pendingTransactionCancel"))),w.isBitcoinNetworkID(t.networkID)&&(n=a.default.createElement(q,{onClick:g},c("pendingTransactionSpeedUp")))}return a.default.createElement(a.default.Fragment,null,a.default.createElement(_e,{...e,leftButton:u}),a.default.createElement(Ve,null,n))});export{Ut as PendingTransactionDetail,Vr as default};
//# sourceMappingURL=PendingTransactionDetail-UOBBWH6M.js.map
