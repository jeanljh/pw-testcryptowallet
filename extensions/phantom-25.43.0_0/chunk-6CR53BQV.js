import{W as H}from"./chunk-UHG6ISVN.js";import{D as v,U as K,V as U,Z as V,sa as G}from"./chunk-5RCV3KPE.js";import{jc as F,n as h,rb as S}from"./chunk-COS4XKZ5.js";import{Fc as q,Gc as B,Kc as N,Lb as k,Lc as D,Mb as M,eb as A,ee as O,jd as _}from"./chunk-IJLITZAC.js";import{$c as R,Ac as C,Pb as x,Td as I,md as b,pd as w,xc as g}from"./chunk-GSVPXWLR.js";import{l as E}from"./chunk-P5BPG5MC.js";import{a as o,i as a,n as c}from"./chunk-NSVULBS3.js";a();c();var Y="fungible-transfer-tx",X=I({seconds:30});function oe(e){let n=e?.fungibleKey,{fungible:t}=G({key:n,splTokenAccount:e?.splTokenAccount}),s=V(e?.sendFormValues?.recipient,t?.data.chain.id)??"",u=e?.sendSessionId??"",{chain:f,walletAddress:r}=t?.data??{},{data:m}=F({address:r,networkID:f?.id}),{data:p}=U(m),{data:T}=v({networkID:f?.id,enableFallback:!0}),i=j(f?.id,T,p,m),l=i?.sendContextRequired?i.sendContext:void 0,d=e?.sendFormValues;return w({staleTime:X,enabled:!!t&&!!e&&!!i,queryKey:_.transferTransaction({fungibleKey:n,fungibleSendFormValues:d,sendSessionId:u,sendContext:l}),async queryFn(){if(!t||!d||!i)throw new Error("Missing required data to construct fungible transfer transaction");try{return await O(t,{...d,recipient:s},l)}catch(y){if(E(y)){let Q=y.response?.status;N(y,Q,Y)}}throw new Error("Failed to create transfer transaction")}})}o(oe,"useTransferTransaction");function j(e,n,t,s){if(e)return x.isBitcoinNetworkID(e)?!n||!t||!s?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:n,utxoState:t,chainAddress:s}}:{sendContextRequired:!1}}o(j,"createSendContext");a();c();a();c();var P=o(()=>{let{setRetryArgs:e}=H();return n=>{if(n instanceof M){let{successfulTxIds:t}=n,[s,u]=t;e({type:D.BRC20,commitTxId:s,revealTxId:u})}}},"useHandleRetryableTransactionError");function he(){let e=R(),{data:n}=S({select:o(r=>r.identifier,"select")}),t=P(),s=K(),u=h();return b({mutationFn:o(async({multichainTransaction:r,pendingTransactionInput:m,senderAddress:p,gasEstimation:T})=>{if(!n)throw new Error("No account identifier found");let{networkID:i}=r,l=await A.get(i).onBeforeSend({multichainTransaction:r,gasEstimation:T}),d=await B({accountIdentifier:n,accountSigner:u,multichainTransaction:l,networkID:i,pendingTransactionInput:m,senderAddress:p,storage:e,utxoManager:s});return q(i,d)},"mutationFn"),onError(r){r instanceof Error&&(C.captureError(r,g.Fungibles),r instanceof k&&t(r))}})}o(he,"useTransferFungible");export{oe as a,he as b};
//# sourceMappingURL=chunk-6CR53BQV.js.map
