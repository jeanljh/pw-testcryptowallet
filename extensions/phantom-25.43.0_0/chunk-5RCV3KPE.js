import{D as is,I as ss,Ia as cs,Ja as us,ba as as,f as Wn,h as $n,n as _t,o as zn,t as Yn,x as Et}from"./chunk-RKMQYZSN.js";import{I as ts,J as rs,Nb as ns,Pb as os,n as We,rb as Be}from"./chunk-COS4XKZ5.js";import{$ as Wr,$b as Ws,A as bs,B as _l,Bb as ed,Bd as Bt,C as er,Cb as Us,Cd as ro,D as Es,Db as Is,Dc as ea,Dd as nn,Eb as Bs,Fb as Os,G as Zn,H as ws,Hb as Ks,Ic as ta,Jb as Hs,Jc as ra,Kb as Vs,Lc as L,Mc as $e,Md as ua,Nb as Gs,Nc as en,Nd as la,O as As,Od as da,P as vs,Pd as on,Qb as js,Qd as ir,Rd as no,S as Cs,Tb as Qs,U as Ss,Uc as na,Ud as fa,V as tr,Vc as oa,W as _n,Wb as _r,Wc as ia,X as xs,Xc as tn,Y as Ns,Yb as qs,Yc as sa,_ as kt,aa as $r,ac as $s,ad as aa,ba as Ft,da as zr,db as Ds,e as Qr,ea as Yr,eb as wt,fa as Ps,fb as Rs,fc as rr,g as Q,ga as Ms,gd as nr,h as Rt,hb as Lt,hc as zs,ia as Xr,ib as ks,ic as to,id as ca,jb as Jr,jd as be,k as fe,kc as Ys,la as eo,lc as Xs,ld as or,m as ls,mb as Zr,n as ds,nc as Js,o as qr,ob as Fs,p as fs,q as ms,r as Xn,s as Jn,uc as Zs,v as ps,vb as Ls,w as hs,wb as Ut,wc as _s,x as gs,xd as rn,y as ys,z as Ts,zc as It}from"./chunk-IJLITZAC.js";import{$ as je,$c as Te,Ac as B,Jc as Yi,L as De,Mb as Ki,Ob as Hi,Oc as Zt,Pb as C,Ra as ql,Rb as ue,Sb as Vi,Tb as Gi,Td as x,Ub as ji,Vb as Qe,Wb as ne,Wc as Kr,Xc as Xi,Y as Oi,Yb as Qn,Zb as Tt,Zc as bt,_ as Ke,a as jl,aa as Br,ae as Ie,b as Dt,c as Ql,dd as Hr,gd as Vr,hc as Qi,hd as Ji,ic as qi,id as Zi,jc as Or,jd as _i,kd as Y,ld as es,md as qe,nc as Wi,oc as $i,pa as yt,pd as R,qd as Gr,sc as zi,v as Bi,w as de,wc as ee,xc as K}from"./chunk-GSVPXWLR.js";import{F as Ui,G as Ii,b as jn,d as Gl}from"./chunk-P42QO3R7.js";import{$ as jr,A as zl,B as Yl,C as Xl,_ as qn,a as G,d as H,e as z,gb as Zl,m as te,r as Ue,w as Wl,x as $l,ya as Jl}from"./chunk-LYTSCHVN.js";import{b as Lr,e as Jt,f as Ur,h as re,k as Le,l as Ir}from"./chunk-P5BPG5MC.js";import{a as ut,g,n as Rr,x as kr,z as Fr}from"./chunk-PPQ6BNOX.js";import{a as i,d as Ne,g as F,i as u,j as y,m as Buffer,n as l}from"./chunk-NSVULBS3.js";var ma=Ne((so,ao)=>{u();l();(function(e,t){typeof so=="object"&&typeof ao<"u"?ao.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isToday=t()})(so,function(){"use strict";return function(e,t,r){t.prototype.isToday=function(){var n="YYYY-MM-DD",o=r();return this.format(n)===o.format(n)}}})});var pa=Ne((co,uo)=>{u();l();(function(e,t){typeof co=="object"&&typeof uo<"u"?uo.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isYesterday=t()})(co,function(){"use strict";return function(e,t,r){t.prototype.isYesterday=function(){var n="YYYY-MM-DD",o=r().subtract(1,"day");return this.format(n)===o.format(n)}}})});var Ya=Ne((YE,za)=>{u();l();var Id=Wl(),Bd=$l(),Od=Jl(),Kd=Yl(),Hd=zl(),Vd=Xl(),Gd=Object.prototype,jd=Gd.hasOwnProperty,Qd=Od(function(e,t){if(Hd(t)||Kd(t)){Bd(t,Vd(t),e);return}for(var r in t)jd.call(t,r)&&Id(e,r,t[r])});za.exports=Qd});var pn=Ne(Z=>{"use strict";u();l();Object.defineProperty(Z,"__esModule",{value:!0});Z.MULTIPLE_ACCOUNT_INFO_MAX=Z.NAME_HOUSE_PREFIX=Z.TLD_HOUSE_PREFIX=Z.NFT_RECORD_PREFIX=Z.TOKEN_METADATA_PROGRAM_ID=Z.SPL_TOKEN_PROGRAM_ID=Z.NAME_HOUSE_PROGRAM_ID=Z.TLD_HOUSE_PROGRAM_ID=Z.ANS_PROGRAM_ID=Z.ORIGIN_TLD=Z.MAIN_DOMAIN_PREFIX=void 0;var hr=Dt();Z.MAIN_DOMAIN_PREFIX="main_domain";Z.ORIGIN_TLD="ANS";Z.ANS_PROGRAM_ID=new hr.PublicKey("ALTNSZ46uaAUU7XUV6awvdorLGqAsPwa9shm7h4uP2FK");Z.TLD_HOUSE_PROGRAM_ID=new hr.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S");Z.NAME_HOUSE_PROGRAM_ID=new hr.PublicKey("NH3uX6FtVE2fNREAioP7hm5RaozotZxeL6khU1EHx51");Z.SPL_TOKEN_PROGRAM_ID=new hr.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");Z.TOKEN_METADATA_PROGRAM_ID=new hr.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");Z.NFT_RECORD_PREFIX="nft_record";Z.TLD_HOUSE_PREFIX="tld_house";Z.NAME_HOUSE_PREFIX="name_house";Z.MULTIPLE_ACCOUNT_INFO_MAX=100});var Pc=Ne(W=>{"use strict";u();l();var Cf=W&&W.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sf=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ye=W&&W.__decorate||function(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},xf=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Cf(t,e,r);return Sf(t,e),t},Cc=W&&W.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W,"__esModule",{value:!0});W.deserializeUnchecked=W.deserialize=W.serialize=W.BinaryReader=W.BinaryWriter=W.BorshError=W.baseDecode=W.baseEncode=void 0;var lt=Cc(jn()),Sc=Cc(Gl()),Nf=xf(jl()),Pf=typeof self.TextDecoder!="function"?Nf.TextDecoder:self.TextDecoder,Mf=new Pf("utf-8",{fatal:!0});function Df(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),Sc.default.encode(Buffer.from(e))}i(Df,"baseEncode");W.baseEncode=Df;function Rf(e){return Buffer.from(Sc.default.decode(e))}i(Rf,"baseDecode");W.baseDecode=Rf;var ko=1024,ge=class extends Error{static{i(this,"BorshError")}constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};W.BorshError=ge;var hn=class{static{i(this,"BinaryWriter")}constructor(){this.buf=Buffer.alloc(ko),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ko)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lt.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lt.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lt.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lt.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(ko)]),this.length+=t.length}writeString(t){this.maybeResize();let r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};W.BinaryWriter=hn;function Xe(e,t,r){let n=r.value;r.value=function(...o){try{return n.apply(this,o)}catch(s){if(s instanceof RangeError){let a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new ge("Reached the end of buffer when deserializing")}throw s}}}i(Xe,"handlingRangeError");var Ce=class{static{i(this,"BinaryReader")}constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new lt.default(t,"le")}readU128(){let t=this.readBuffer(16);return new lt.default(t,"le")}readU256(){let t=this.readBuffer(32);return new lt.default(t,"le")}readU512(){let t=this.readBuffer(64);return new lt.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ge(`Expected buffer length ${t} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){let t=this.readU32(),r=this.readBuffer(t);try{return Mf.decode(r)}catch(n){throw new ge(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let r=this.readU32(),n=Array();for(let o=0;o<r;++o)n.push(t());return n}};Ye([Xe],Ce.prototype,"readU8",null);Ye([Xe],Ce.prototype,"readU16",null);Ye([Xe],Ce.prototype,"readU32",null);Ye([Xe],Ce.prototype,"readU64",null);Ye([Xe],Ce.prototype,"readU128",null);Ye([Xe],Ce.prototype,"readU256",null);Ye([Xe],Ce.prototype,"readU512",null);Ye([Xe],Ce.prototype,"readString",null);Ye([Xe],Ce.prototype,"readFixedArray",null);Ye([Xe],Ce.prototype,"readArray",null);W.BinaryReader=Ce;function xc(e){return e.charAt(0).toUpperCase()+e.slice(1)}i(xc,"capitalizeFirstLetter");function gr(e,t,r,n,o){try{if(typeof n=="string")o[`write${xc(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new ge(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);o.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new ge(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let s=0;s<n[1];s++)gr(e,null,r[s],n[0],o)}else o.writeArray(r,s=>{gr(e,t,s,n[0],o)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?o.writeU8(0):(o.writeU8(1),gr(e,t,r,n.type,o));break}default:throw new ge(`FieldType ${n} unrecognized`)}else Nc(e,r,o)}catch(s){throw s instanceof ge&&s.addToFieldPath(t),s}}i(gr,"serializeField");function Nc(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new ge(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([o,s])=>{gr(e,o,t[o],s,r)});else if(n.kind==="enum"){let o=t[n.field];for(let s=0;s<n.values.length;++s){let[a,c]=n.values[s];if(a===o){r.writeU8(s),gr(e,a,t[a],c,r);break}}}else throw new ge(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}i(Nc,"serializeStruct");function kf(e,t,r=hn){let n=new r;return Nc(e,t,n),n.toArray()}i(kf,"serialize");W.serialize=kf;function yr(e,t,r,n){try{if(typeof r=="string")return n[`read${xc(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let o=[];for(let s=0;s<r[1];s++)o.push(yr(e,null,r[0],n));return o}else return n.readArray(()=>yr(e,t,r[0],n))}return r.kind==="option"?n.readU8()?yr(e,t,r.type,n):void 0:Fo(e,r,n)}catch(o){throw o instanceof ge&&o.addToFieldPath(t),o}}i(yr,"deserializeField");function Fo(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new ge(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let o={};for(let[s,a]of e.get(t).fields)o[s]=yr(e,s,a,r);return new t(o)}if(n.kind==="enum"){let o=r.readU8();if(o>=n.values.length)throw new ge(`Enum index: ${o} is out of range`);let[s,a]=n.values[o],c=yr(e,s,a,r);return new t({[s]:c})}throw new ge(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}i(Fo,"deserializeStruct");function Ff(e,t,r,n=Ce){let o=new n(r),s=Fo(e,t,o);if(o.offset<r.length)throw new ge(`Unexpected ${r.length-o.offset} bytes after deserialized data`);return s}i(Ff,"deserialize");W.deserialize=Ff;function Lf(e,t,r,n=Ce){let o=new n(r);return Fo(e,t,o)}i(Lf,"deserializeUnchecked");W.deserializeUnchecked=Lf});var gn=Ne(Gt=>{"use strict";u();l();var Mc=Gt&&Gt.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.NameRecordHeader=void 0;var Lo=Dt(),Tr=Pc(),St=class e{static{i(this,"NameRecordHeader")}constructor(t){this.parentName=new Lo.PublicKey(t.parentName),this.nclass=new Lo.PublicKey(t.nclass),this.expiresAt=new Date(new Tr.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()*1e3),this.createdAt=new Date(new Tr.BinaryReader(Buffer.from(t.createdAt)).readU64().toNumber()*1e3),this.nonTransferable=t.nonTransferable[0]!==0;let r=45*24*60*60*1e3;this.isValid=new Tr.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()===0?!0:this.expiresAt.getTime()+r>new Date(Date.now()).getTime(),this.owner=this.isValid?new Lo.PublicKey(t.owner):void 0}static get byteSize(){return 200}static fromAccountAddress(t,r){var n;return Mc(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(r,"confirmed");if(!o)return;let s=(0,Tr.deserializeUnchecked)(this.schema,e,o.data);return s.data=(n=o.data)===null||n===void 0?void 0:n.subarray(this.byteSize),s})}static fromMultipileAccountAddresses(t,r){return Mc(this,void 0,void 0,function*(){let n=yield t.getMultipleAccountsInfo(r),o=[];return n.forEach(s=>{if(!s){o.push(void 0);return}let a=this.fromAccountInfo(s);if(!a){o.push(void 0);return}o.push(a)}),o})}static fromAccountInfo(t){var r;let n=(0,Tr.deserializeUnchecked)(this.schema,e,t.data);return n.data=(r=t.data)===null||r===void 0?void 0:r.subarray(this.byteSize),n}pretty(){var t;let r=this.data.indexOf(0);return{parentName:this.parentName.toBase58(),owner:(t=this.owner)===null||t===void 0?void 0:t.toBase58(),nclass:this.nclass.toBase58(),expiresAt:this.expiresAt,createdAt:this.createdAt,nonTransferable:this.nonTransferable,isValid:this.isValid,data:this.isValid?this.data.subarray(0,r).toString():void 0}}};Gt.NameRecordHeader=St;St.DISCRIMINATOR=[68,72,88,44,15,167,103,243];St.HASH_PREFIX="ALT Name Service";St.schema=new Map([[St,{kind:"struct",fields:[["discriminator",[8]],["parentName",[32]],["owner",[32]],["nclass",[32]],["expiresAt",[8]],["createdAt",[8]],["nonTransferable",[1]],["padding",[79]]]}]])});var Uo=Ne(Re=>{"use strict";u();l();var Uf=Re&&Re.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),If=Re&&Re.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Bf=Re&&Re.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Uf(t,e,r);return If(t,e),t};Object.defineProperty(Re,"__esModule",{value:!0});Re.tagBeet=Re.Tag=void 0;var Of=Bf(Zn()),Dc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.ActiveRecord=1]="ActiveRecord",e[e.InactiveRecord=2]="InactiveRecord"})(Dc=Re.Tag||(Re.Tag={}));Re.tagBeet=Of.fixedScalarEnum(Dc)});var Io=Ne(ce=>{"use strict";u();l();var Kf=ce&&ce.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Hf=ce&&ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kc=ce&&ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Kf(t,e,r);return Hf(t,e),t},Rc=ce&&ce.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ce,"__esModule",{value:!0});ce.nftRecordBeet=ce.NftRecord=ce.nftRecordDiscriminator=void 0;var yn=kc(Zn()),Tn=kc(ws()),Fc=Uo();ce.nftRecordDiscriminator=[174,190,114,100,177,14,90,254];var bn=class e{static{i(this,"NftRecord")}constructor(t,r,n,o,s,a){this.tag=t,this.bump=r,this.nameAccount=n,this.owner=o,this.nftMintAccount=s,this.tldHouse=a}static fromArgs(t){return new e(t.tag,t.bump,t.nameAccount,t.owner,t.nftMintAccount,t.tldHouse)}static fromAccountInfo(t,r=0){return e.deserialize(t.data,r)}static fromAccountAddress(t,r){return Rc(this,void 0,void 0,function*(){let n=yield t.getAccountInfo(r);if(n==null)throw new Error(`Unable to find NftRecord account at ${r}`);return e.fromAccountInfo(n,0)[0]})}static deserialize(t,r=0){return ce.nftRecordBeet.deserialize(t,r)}serialize(){return ce.nftRecordBeet.serialize(Object.assign({accountDiscriminator:ce.nftRecordDiscriminator},this))}static get byteSize(){return ce.nftRecordBeet.byteSize}static getMinimumBalanceForRentExemption(t,r){return Rc(this,void 0,void 0,function*(){return yield t.getMinimumBalanceForRentExemption(e.byteSize,r)})}static hasCorrectByteSize(t,r=0){return t.byteLength-r===e.byteSize}pretty(){return{tag:"Tag."+Fc.Tag[this.tag],bump:this.bump,nameAccount:this.nameAccount.toBase58(),owner:this.owner.toBase58(),nftMintAccount:this.nftMintAccount.toBase58(),tldHouse:this.tldHouse.toBase58()}}};ce.NftRecord=bn;ce.nftRecordBeet=new yn.BeetStruct([["accountDiscriminator",yn.uniformFixedSizeArray(yn.u8,8)],["tag",Fc.tagBeet],["bump",yn.u8],["nameAccount",Tn.publicKey],["owner",Tn.publicKey],["nftMintAccount",Tn.publicKey],["tldHouse",Tn.publicKey]],bn.fromArgs,"NftRecord")});var En=Ne(O=>{"use strict";u();l();var Ve=O&&O.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.splitDomainTld=O.getParsedAllDomainsNftAccountsByOwner=O.delay=O.performReverseLookupBatched=O.findMetadataAddress=O.findNameHouse=O.findTldHouse=O.findNftRecord=O.getMintOwner=O.findAllDomainsForTld=O.getParentAccountFromTldHouseAccountInfo=O.getTldFromTldHouseAccountInfo=O.getAllTld=O.findMainDomain=O.findOwnedNameAccountsForUser=O.getOriginNameAccountKey=O.getHashedName=O.getNameOwner=O.getNameAccountKeyWithBump=void 0;var Oe=Dt(),Vf=jn(),Gf=ql(),we=pn(),Bo=gn(),jf=Uo(),Qf=Io();function Oo(e,t,r){let n=[e,t?t.toBuffer():Buffer.alloc(32),r?r.toBuffer():Buffer.alloc(32)];return Oe.PublicKey.findProgramAddressSync(n,we.ANS_PROGRAM_ID)}i(Oo,"getNameAccountKeyWithBump");O.getNameAccountKeyWithBump=Oo;function qf(e,t,r){return Ve(this,void 0,void 0,function*(){let n=yield Bo.NameRecordHeader.fromAccountAddress(e,t),o=n.owner;if(!n.isValid)return;if(!r)return o;let[s]=Oc(r),[a]=Bc(t,s);return o?.toBase58()!==a.toBase58()?o:yield Ic(e,a)})}i(qf,"getNameOwner");O.getNameOwner=qf;function Ko(e){return Ve(this,void 0,void 0,function*(){let t=Bo.NameRecordHeader.HASH_PREFIX+e,r=(0,Gf.sha256)(Buffer.from(t,"utf8")).slice(2);return Buffer.from(r,"hex")})}i(Ko,"getHashedName");O.getHashedName=Ko;function Wf(e=we.ORIGIN_TLD){return Ve(this,void 0,void 0,function*(){let t=yield Ko(e),[r]=Oo(t,void 0,void 0);return r})}i(Wf,"getOriginNameAccountKey");O.getOriginNameAccountKey=Wf;function $f(e,t,r){return Ve(this,void 0,void 0,function*(){let n=[{memcmp:{offset:40,bytes:t.toBase58(),encoding:"base58"}}];return r&&n.push({memcmp:{offset:8,bytes:r.toBase58(),encoding:"base58"}}),(yield e.getProgramAccounts(we.ANS_PROGRAM_ID,{filters:n})).map(s=>s.pubkey)})}i($f,"findOwnedNameAccountsForUser");O.findOwnedNameAccountsForUser=$f;function zf(e){return Oe.PublicKey.findProgramAddressSync([Buffer.from(we.MAIN_DOMAIN_PREFIX),e.toBuffer()],we.TLD_HOUSE_PROGRAM_ID)}i(zf,"findMainDomain");O.findMainDomain=zf;function Yf(e){return Ve(this,void 0,void 0,function*(){let r=[{memcmp:{offset:0,bytes:[247,144,135,1,238,173,19,249],encoding:"binary"}}],n=yield e.getProgramAccounts(we.TLD_HOUSE_PROGRAM_ID,{filters:r}),o=[];return n.map(({account:s})=>{let a=Uc(s),c=Lc(s);o.push({tld:c,parentAccount:a})}),o})}i(Yf,"getAllTld");O.getAllTld=Yf;function Lc(e){var t;let n=(t=e?.data)===null||t===void 0?void 0:t.subarray(104),o=new Vf.BN(n?.subarray(0,4),"le").toNumber();return n.subarray(4,4+o).toString().replace(/\0.*$/g,"")}i(Lc,"getTldFromTldHouseAccountInfo");O.getTldFromTldHouseAccountInfo=Lc;function Uc(e){var t;let n=(t=e?.data)===null||t===void 0?void 0:t.subarray(72,104);return new Oe.PublicKey(n)}i(Uc,"getParentAccountFromTldHouseAccountInfo");O.getParentAccountFromTldHouseAccountInfo=Uc;function Xf(e,t){return Ve(this,void 0,void 0,function*(){let r=[{memcmp:{offset:8,bytes:t.toBase58(),encoding:"base58"}}];return(yield e.getProgramAccounts(we.ANS_PROGRAM_ID,{filters:r})).map(o=>o.pubkey)})}i(Xf,"findAllDomainsForTld");O.findAllDomainsForTld=Xf;function Ic(e,t){return Ve(this,void 0,void 0,function*(){try{let r=yield Qf.NftRecord.fromAccountAddress(e,t);if(r.tag!==jf.Tag.ActiveRecord)return;let n=yield e.getTokenLargestAccounts(r.nftMintAccount),o=yield e.getParsedAccountInfo(n.value[0].address);return o.value.data?new Oe.PublicKey(o.value.data.parsed.info.owner):void 0}catch{return}})}i(Ic,"getMintOwner");O.getMintOwner=Ic;function Bc(e,t){return Oe.PublicKey.findProgramAddressSync([Buffer.from(we.NFT_RECORD_PREFIX),t.toBuffer(),e.toBuffer()],we.NAME_HOUSE_PROGRAM_ID)}i(Bc,"findNftRecord");O.findNftRecord=Bc;function Jf(e){return e=e.toLowerCase(),Oe.PublicKey.findProgramAddressSync([Buffer.from(we.TLD_HOUSE_PREFIX),Buffer.from(e)],we.TLD_HOUSE_PROGRAM_ID)}i(Jf,"findTldHouse");O.findTldHouse=Jf;function Oc(e){return Oe.PublicKey.findProgramAddressSync([Buffer.from(we.NAME_HOUSE_PREFIX),e.toBuffer()],we.NAME_HOUSE_PROGRAM_ID)}i(Oc,"findNameHouse");O.findNameHouse=Oc;var Zf=i(e=>Oe.PublicKey.findProgramAddressSync([Buffer.from("metadata"),we.TOKEN_METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()],we.TOKEN_METADATA_PROGRAM_ID)[0],"findMetadataAddress");O.findMetadataAddress=Zf;function _f(e,t,r){return Ve(this,void 0,void 0,function*(){let n=t.map(a=>Ve(this,void 0,void 0,function*(){let c=yield Ko(a.toBase58()),[f]=Oo(c,r,void 0);return f})),o=yield Promise.all(n);return(yield e.getMultipleAccountsInfo(o)).map(a=>a?.data.subarray(Bo.NameRecordHeader.byteSize,a?.data.length).toString())})}i(_f,"performReverseLookupBatched");O.performReverseLookupBatched=_f;function em(e){return new Promise(t=>setTimeout(t,e))}i(em,"delay");O.delay=em;var tm=i((e,t,r)=>Ve(void 0,void 0,void 0,function*(){let{value:n}=yield t.getParsedTokenAccountsByOwner(e,{programId:we.SPL_TOKEN_PROGRAM_ID}),o=n.filter(a=>{var c,f,d,m,p,h,T,b,w,v;let k=(p=(m=(d=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||d===void 0?void 0:d.info)===null||m===void 0?void 0:m.tokenAmount)===null||p===void 0?void 0:p.uiAmount;return((v=(w=(b=(T=(h=a.account)===null||h===void 0?void 0:h.data)===null||T===void 0?void 0:T.parsed)===null||b===void 0?void 0:b.info)===null||w===void 0?void 0:w.tokenAmount)===null||v===void 0?void 0:v.decimals)===0&&k===1}).map(a=>{var c,f,d,m;return(m=(d=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||d===void 0?void 0:d.info)===null||m===void 0?void 0:m.mint});return yield rm(o,t,r)}),"getParsedAllDomainsNftAccountsByOwner");O.getParsedAllDomainsNftAccountsByOwner=tm;var rm=i((e,t,r)=>Ve(void 0,void 0,void 0,function*(){let n=[];if(e.length>100)for(;e.length>0;){let a=e.splice(0,100).map(f=>(0,O.findMetadataAddress)(new Oe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let d=new Oe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&d.toString()===r.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");n.push(p)}}}else{let a=e.map(f=>(0,O.findMetadataAddress)(new Oe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let d=new Oe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&d.toString()===r.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");n.push(p)}}}return n}),"getOwnedDomains");function nm(e){let t=e.split("."),r="",n="",o="";return t.length===1?n=t[0]:(r="."+t[t.length-1],n=t[t.length-2],o=t.slice(0,t.length-2).join(".")),[r,n,o]}i(nm,"splitDomainTld");O.splitDomainTld=nm});var Vo=Ne(oe=>{"use strict";u();l();var om=oe&&oe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),im=oe&&oe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ho=oe&&oe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&om(t,e,r);return im(t,e),t},Kc=oe&&oe.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(oe,"__esModule",{value:!0});oe.mainDomainBeet=oe.MainDomain=oe.mainDomainDiscriminator=void 0;var sm=Ho(Dt()),Hc=Ho(ws()),br=Ho(Zn());oe.mainDomainDiscriminator=[109,239,227,199,98,226,66,175];var wn=class e{static{i(this,"MainDomain")}constructor(t,r,n){this.nameAccount=t,this.tld=r,this.domain=n}static fromArgs(t){return new e(t.nameAccount,t.tld,t.domain)}static fromAccountInfo(t,r=0){return e.deserialize(t.data,r)}static fromAccountAddress(t,r,n){return Kc(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(r,n);if(o==null)throw new Error(`Unable to find MainDomain account at ${r}`);return e.fromAccountInfo(o,0)[0]})}static gpaBuilder(t=new sm.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S")){return Hc.GpaBuilder.fromStruct(t,oe.mainDomainBeet)}static deserialize(t,r=0){return oe.mainDomainBeet.deserialize(t,r)}serialize(){return oe.mainDomainBeet.serialize(Object.assign({accountDiscriminator:oe.mainDomainDiscriminator},this))}static byteSize(t){let r=e.fromArgs(t);return oe.mainDomainBeet.toFixedFromValue(Object.assign({accountDiscriminator:oe.mainDomainDiscriminator},r)).byteSize}static getMinimumBalanceForRentExemption(t,r,n){return Kc(this,void 0,void 0,function*(){return yield r.getMinimumBalanceForRentExemption(e.byteSize(t),n)})}pretty(){return{nameAccount:this.nameAccount.toBase58(),tld:this.tld,domain:this.domain}}};oe.MainDomain=wn;oe.mainDomainBeet=new br.FixableBeetStruct([["accountDiscriminator",br.uniformFixedSizeArray(br.u8,8)],["nameAccount",Hc.publicKey],["tld",br.utf8String],["domain",br.utf8String]],wn.fromArgs,"MainDomain")});var jo=Ne(jt=>{"use strict";u();l();var Vc=jt&&jt.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(jt,"__esModule",{value:!0});jt.getDomainKey=void 0;var Go=En(),am=i((e,t=!1)=>Vc(void 0,void 0,void 0,function*(){let r=e.split(".");if(r.length===3){let c="."+r[2],f=r[1],d=r[0],{pubkey:m}=yield at(c),{pubkey:p}=yield at(f,m),T=Buffer.from([t?1:0]).toString().concat(d),b=yield at(T,p);return Object.assign(Object.assign({},b),{isSub:!0,parent:p})}else if(r.length===4&&t){let c="."+r[3],f=r[2],d=r[1],m=r[0],{pubkey:p}=yield at(c),{pubkey:h}=yield at(f,p),{pubkey:T}=yield at("\0".concat(d),h),b=Buffer.from([1]).toString(),w=yield at(b.concat(m),T);return Object.assign(Object.assign({},w),{isSub:!0,parent:h,isSubRecord:!0})}else if(r.length>4)throw new Error("Invalid derivation input");let n="."+r[1],{pubkey:o}=yield at(n),s=r[0],a=yield at(s,o);return Object.assign(Object.assign({},a),{isSub:!1,parent:void 0})}),"getDomainKey");jt.getDomainKey=am;var at=i((e,t)=>Vc(void 0,void 0,void 0,function*(){t||(t=yield(0,Go.getOriginNameAccountKey)());let r=yield(0,Go.getHashedName)(e),[n]=yield(0,Go.getNameAccountKeyWithBump)(r,void 0,t);return{pubkey:n,hashed:r}}),"_getNameAccount")});var jc=Ne(Qt=>{"use strict";u();l();var ke=Qt&&Qt.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return i(o,"adopt"),new(r||(r=Promise))(function(s,a){function c(m){try{d(n.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{d(n.throw(m))}catch(p){a(p)}}i(f,"rejected");function d(m){m.done?s(m.value):o(m.value).then(c,f)}i(d,"step"),d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.TldParser=void 0;var Je=Dt(),cm=jn(),um=Vo(),Qo=gn(),U=En(),dt=pn(),Gc=jo(),qo=class{static{i(this,"TldParser")}constructor(t){this.connection=t}getAllUserDomains(t){return ke(this,void 0,void 0,function*(){return typeof t=="string"&&(t=new Je.PublicKey(t)),yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,void 0)})}getAllUserDomainsFromTld(t,r){return ke(this,void 0,void 0,function*(){let n="."+r,o=yield(0,U.getOriginNameAccountKey)(),s=yield(0,U.getHashedName)(n),[a]=(0,U.getNameAccountKeyWithBump)(s,void 0,o);return typeof t=="string"&&(t=new Je.PublicKey(t)),yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,a)})}getOwnerFromDomainTld(t){return ke(this,void 0,void 0,function*(){let r=t.split("."),n=r[0],o="."+r[1],s=yield(0,U.getOriginNameAccountKey)(),a=yield(0,U.getHashedName)(o),[c]=(0,U.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,U.getHashedName)(n),[d]=(0,U.getNameAccountKeyWithBump)(f,void 0,c),[m]=(0,U.findTldHouse)(o);return yield(0,U.getNameOwner)(this.connection,d,m)})}getNameRecordFromDomainTld(t){return ke(this,void 0,void 0,function*(){let r=t.split("."),n=r[0],o="."+r[1],s=yield(0,U.getOriginNameAccountKey)(),a=yield(0,U.getHashedName)(o),[c]=(0,U.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,U.getHashedName)(n),[d]=(0,U.getNameAccountKeyWithBump)(f,void 0,c);return yield Qo.NameRecordHeader.fromAccountAddress(this.connection,d)})}getTldFromParentAccount(t){var r;return ke(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Je.PublicKey(t));let n=yield Qo.NameRecordHeader.fromAccountAddress(this.connection,t),o=yield this.connection.getAccountInfo(n?.owner),a=(r=o?.data)===null||r===void 0?void 0:r.subarray(104),c=new cm.BN(a?.subarray(0,4),"le").toNumber();return a.subarray(4,4+c).toString().replace(/\0.*$/g,"")})}reverseLookupNameAccount(t,r){var n;return ke(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Je.PublicKey(t)),typeof r=="string"&&(r=new Je.PublicKey(r));let o=yield(0,U.getHashedName)(t.toString()),[s]=(0,U.getNameAccountKeyWithBump)(o,r,void 0),a=yield Qo.NameRecordHeader.fromAccountAddress(this.connection,s);return(n=a?.data)===null||n===void 0?void 0:n.toString()})}getMainDomain(t){return ke(this,void 0,void 0,function*(){typeof t=="string"&&(t=new Je.PublicKey(t));let[r]=(0,U.findMainDomain)(t);return yield um.MainDomain.fromAccountAddress(this.connection,r)})}getParsedAllUserDomainsFromTldUnwrapped(t,r){return ke(this,void 0,void 0,function*(){let n="."+r,o=yield(0,U.getOriginNameAccountKey)(),s=yield(0,U.getHashedName)(n),[a]=(0,U.findTldHouse)(n),[c]=(0,U.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new Je.PublicKey(t));let f=yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,c),d=[];for(let m=0;m<f.length;m+=dt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,U.delay)(100);let p=Math.min(m+dt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),h=f.slice(m,p),b=(yield(0,U.performReverseLookupBatched)(this.connection,h,a)).map((w,v)=>({nameAccount:h[v],domain:w+n}));b.length>0&&b.sort((w,v)=>w.domain.localeCompare(v.domain,void 0,{numeric:!0,sensitivity:"base"})),d.push(...b)}return d})}getParsedAllUserDomainsFromTld(t,r){return ke(this,void 0,void 0,function*(){let n="."+r,o=yield(0,U.getOriginNameAccountKey)(),s=yield(0,U.getHashedName)(n),[a]=(0,U.findTldHouse)(n),[c]=(0,U.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new Je.PublicKey(t));let f=yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,c),d=[],p=(yield(0,U.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,U.findNameHouse)(a)[0])).map(T=>T+n),h=yield Promise.all(p.map(T=>ke(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Gc.getDomainKey)(T)).pubkey,domain:T}})));d.push(...h);for(let T=0;T<f.length;T+=dt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,U.delay)(100);let b=Math.min(T+dt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),w=f.slice(T,b),k=(yield(0,U.performReverseLookupBatched)(this.connection,w,a)).map((j,$)=>({nameAccount:w[$],domain:j+n}));d.push(...k)}return d.length>0&&d.sort((T,b)=>T.domain.localeCompare(b.domain,void 0,{numeric:!0,sensitivity:"base"})),d})}getParsedAllUserDomainsUnwrapped(t){return ke(this,void 0,void 0,function*(){let r=yield(0,U.getAllTld)(this.connection),n=[];typeof t=="string"&&(t=new Je.PublicKey(t));for(let{parentAccount:o,tld:s}of r){let a=s.toString(),[c]=(0,U.findTldHouse)(a),f=yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,o);for(let d=0;d<f.length;d+=dt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,U.delay)(100);let m=Math.min(d+dt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),p=f.slice(d,m),T=(yield(0,U.performReverseLookupBatched)(this.connection,p,c)).map((b,w)=>({nameAccount:p[w],domain:b+a}));n.push(...T)}}return n.length>0&&n.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),n})}getParsedAllUserDomains(t){return ke(this,void 0,void 0,function*(){let r=yield(0,U.getAllTld)(this.connection),n=[];typeof t=="string"&&(t=new Je.PublicKey(t));for(let{parentAccount:o,tld:s}of r){let a=s.toString(),[c]=(0,U.findTldHouse)(a),f=yield(0,U.findOwnedNameAccountsForUser)(this.connection,t,o),m=(yield(0,U.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,U.findNameHouse)(c)[0])).map(h=>h+a),p=yield Promise.all(m.map(h=>ke(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Gc.getDomainKey)(h)).pubkey,domain:h}})));n.push(...p);for(let h=0;h<f.length;h+=dt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,U.delay)(100);let T=Math.min(h+dt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),b=f.slice(h,T),v=(yield(0,U.performReverseLookupBatched)(this.connection,b,c)).map((k,j)=>({nameAccount:b[j],domain:k+a}));n.push(...v)}}return n.length>0&&n.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),n})}};Qt.TldParser=qo});var Qc=Ne(Er=>{"use strict";u();l();Object.defineProperty(Er,"__esModule",{value:!0});Er.Record=void 0;var lm;(function(e){e.IPFS="IPFS",e.ARWV="ARWV",e.SOL="SOL",e.ETH="ETH",e.BTC="BTC",e.LTC="LTC",e.DOGE="DOGE",e.Email="email",e.Url="url",e.Discord="discord",e.Github="github",e.Reddit="reddit",e.Twitter="twitter",e.Telegram="telegram",e.Pic="pic",e.SHDW="SHDW",e.POINT="POINT"})(lm=Er.Record||(Er.Record={}))});var qc=Ne(Pe=>{"use strict";u();l();var dm=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ft=Pe&&Pe.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&dm(t,e,r)};Object.defineProperty(Pe,"__esModule",{value:!0});ft(En(),Pe);ft(pn(),Pe);ft(jc(),Pe);ft(gn(),Pe);ft(Vo(),Pe);ft(Io(),Pe);ft(jo(),Pe);ft(Qc(),Pe)});u();l();var oo=F(Qr(),1);var io=i(e=>{let t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).format(0).includes(" ")?"h:mm a":"HH:mm",r=(0,oo.default)(),n=(0,oo.default)(e),o=n.format(t),s=r.startOf("day"),c=n.startOf("day").diff(s,"day");return c===0?o:c===1?`${o} ${te.t("tomorrow")}`:c>=2&&c<=7?`${new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(n.toDate())} ${o}`:`${n.format("MMM D, YYYY")} ${o}`},"formatUntil");u();l();u();l();u();l();u();l();var sr=F(Qr(),1),ha=F(ma(),1),ga=F(pa(),1);sr.default.extend(ha.default);sr.default.extend(ga.default);var ya=i(e=>{let t={Today:[],Yesterday:[],"Last Week":[],Earlier:[]};for(let r of e){let n=r.timestamp??0,o=sr.default.unix(n/1e3),s="Earlier";o.isToday()?s="Today":o.isYesterday()?s="Yesterday":o.isAfter((0,sr.default)().subtract(1,"week"))&&(s="Last Week"),t[s].push(r)}return Object.keys(t).reduce((r,n)=>({...r,[n]:t[n].sort((o,s)=>(o.timestamp==null&&(o.timestamp=0),s.timestamp==null&&(s.timestamp=0),o.timestamp<s.timestamp?1:o.timestamp>s.timestamp?-1:0)).map(o=>o.data)}),{})},"bucketByTime");var Ta=i(e=>{let{accountIdentifier:t,autoConfirmEnabled:r=!1,trustedAppsByAccount:n}=e;if(!t||!n)return;let o=Object.values(n),s=[],a=[];r?(o.forEach(f=>{f.autoConfirm&&is(f.autoConfirm)?s.push(f):a.push(f)}),s.sort((f,d)=>(d.autoConfirm?.sessionStartTime??0)-(f.autoConfirm?.sessionStartTime??0))):a=o;let c=ya(a.map(f=>{let d=f.lastConnectedTimestamp??0;return{timestamp:d,data:{...f,lastConnectedTimestamp:d}}}));return{autoConfirmEnabledApps:s,timeBucketedApps:c}},"prepareTrustedAppsSections");function ba(e){return e.map(t=>({lastConnectedTimestamp:t.createdAtMs,expiryTimestamp:t.expiresAtMs,dappMeta:{appUrl:t.origin,imageUrl:t.imageUrl,title:t.title,appId:t.appId}}))}i(ba,"mapAppPermissionsToTrustedApps");u();l();var Ea=i((e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;if(e.expiryTimestamp)return e.expiryTimestamp?io(new Date(e.expiryTimestamp)):void 0;let r=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return io(r)},"getTrustedAppRowUntilValue");u();l();var td={...bt(_t.EmojiSkinTone,[...Et.emojiSkinTone()]),...bt(_t.IsAnalyticsOptedOut,[...Et.isAnalyticsOptedOut()]),...bt(Gr.UserExplorerPreferenceV2,[...Et.preferredExplorers()]),...bt(_t.SelectedCurrency,[...Et.selectedCurrency()]),...bt(Gr.UserRecentAddresses,[...Et.recentAddresses()],ss()),...bt(Gr.UserSavedAddresses,[...Et.savedAddresses()])};u();l();var rd=0;function D(e,t){let r=`atom${++rd}`,n={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof e=="function"?n.read=e:(n.init=e,n.read=nd,n.write=od),t&&(n.write=t),n}i(D,"atom");function nd(e){return e(this)}i(nd,"defaultRead");function od(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}i(od,"defaultWrite");var wa=i((e,t)=>e.unstable_is?e.unstable_is(t):t===e,"isSelfAtom"),fo=i(e=>"init"in e,"hasInitialValue"),lo=i(e=>!!e.write,"isActuallyWritableAtom"),an=new WeakMap,mo=i(e=>{var t;return po(e)&&!((t=an.get(e))!=null&&t[1])},"isPendingPromise"),id=i((e,t)=>{let r=an.get(e);if(r)r[1]=!0,r[0].forEach(n=>n(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},"cancelPromise"),sd=i(e=>{if(an.has(e))return;let t=[new Set,!1];an.set(e,t);let r=i(()=>{t[1]=!0},"settle");e.then(r,r),e.onCancel=n=>{t[0].add(n)}},"patchPromiseForCancelability"),po=i(e=>typeof e?.then=="function","isPromiseLike"),Aa=i(e=>"v"in e||"e"in e,"isAtomStateInitialized"),sn=i(e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},"returnAtomValue"),va=i((e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},"addPendingPromiseToDependency"),ad=i((e,t,r,n)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&r===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(r,n.n),mo(t.v)&&va(e,t.v,n),(o=n.m)==null||o.t.add(e)},"addDependency"),cd=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Ca=i((...e)=>{let[t,r,n,o,s,a]=e,c=i(A=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!A)throw new Error("Atom is undefined or null");let E=t(A);return E||(E={d:new Map,p:new Set,n:0},r(A,E),s?.(A,Me)),E},"ensureAtomState"),f=new WeakMap,d=new Map,m=new Set,p=new Set,h=i(()=>{var A;let E=[],N=i(S=>{try{S()}catch(P){E.push(P)}},"call");do{(A=Me[cd])==null||A.call(Me);let S=new Set,P=S.add.bind(S);d.forEach(M=>{var V;return(V=M.m)==null?void 0:V.l.forEach(P)}),d.clear(),m.forEach(P),m.clear(),p.forEach(P),p.clear(),S.forEach(N),d.size&&j()}while(d.size||m.size||p.size);if(E.length)throw E[0]},"flushCallbacks"),T=i((A,E,N)=>{let S="v"in E,P=E.v,M=mo(E.v)?E.v:null;if(po(N)){sd(N);for(let V of E.d.keys())va(A,N,c(V));E.v=N}else E.v=N;delete E.e,(!S||!Object.is(P,E.v))&&(++E.n,M&&id(M,N))},"setAtomStateValueOrPromise"),b=i(A=>{var E;let N=c(A);if(Aa(N)&&(N.m&&f.get(A)!==N.n||Array.from(N.d).every(([X,J])=>b(X).n===J)))return N;N.d.clear();let S=!0,P=i(()=>{N.m&&(ae(A,N),j(),h())},"mountDependenciesIfAsync"),M=i(X=>{if(wa(A,X)){let ye=c(X);if(!Aa(ye))if(fo(X))T(X,ye,X.init);else throw new Error("no atom init");return sn(ye)}let J=b(X);try{return sn(J)}finally{ad(A,N,X,J),S||P()}},"getter"),V,q,ve={get signal(){return V||(V=new AbortController),V.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!lo(A)&&console.warn("setSelf function cannot be used with read-only atom"),!q&&lo(A)&&(q=i((...X)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return se(A,...X)},"setSelf")),q}};try{let X=n(A,M,ve);return T(A,N,X),po(X)&&((E=X.onCancel)==null||E.call(X,()=>V?.abort()),X.then(P,P)),N}catch(X){return delete N.v,N.e=X,++N.n,N}finally{S=!1}},"readAtomState"),w=i(A=>sn(b(A)),"readAtom"),v=i(A=>{var E;let N=new Map;for(let S of((E=A.m)==null?void 0:E.t)||[]){let P=c(S);P.m&&N.set(S,P)}for(let S of A.p)N.set(S,c(S));return N},"getMountedOrPendingDependents"),k=i(A=>{let E=[A];for(;E.length;){let N=E.pop();for(let[S,P]of v(N))f.has(S)||(f.set(S,P.n),E.push(P))}},"invalidateDependents"),j=i(()=>{var A;let E=[],N=new WeakSet,S=new WeakSet,P=Array.from(d);for(;P.length;){let[M,V]=P[P.length-1];if(S.has(M)){P.pop();continue}if(N.has(M)){f.get(M)===V.n?E.push([M,V,V.n]):(f.delete(M),d.set(M,V)),S.add(M),P.pop();continue}N.add(M);for(let[q,ve]of v(V))N.has(q)||P.push([q,ve])}for(let M=E.length-1;M>=0;--M){let[V,q,ve]=E[M],X=!1;for(let J of q.d.keys())if(J!==V&&d.has(J)){X=!0;break}X&&(b(V),ae(V,q),ve!==q.n&&(d.set(V,q),(A=q.u)==null||A.call(q))),f.delete(V)}},"recomputeInvalidatedAtoms"),$=i((A,...E)=>{let N=!0,S=i(M=>sn(b(M)),"getter"),P=i((M,...V)=>{var q;let ve=c(M);try{if(wa(A,M)){if(!fo(M))throw new Error("atom not writable");let X=ve.n,J=V[0];T(M,ve,J),ae(M,ve),X!==ve.n&&(d.set(M,ve),(q=ve.u)==null||q.call(ve),k(ve));return}else return $(M,...V)}finally{N||(j(),h())}},"setter");try{return o(A,S,P,...E)}finally{N=!1}},"writeAtomState"),se=i((A,...E)=>{try{return $(A,...E)}finally{j(),h()}},"writeAtom"),ae=i((A,E)=>{var N;if(E.m&&!mo(E.v)){for(let[S,P]of E.d)if(!E.m.d.has(S)){let M=c(S);Ae(S,M).t.add(A),E.m.d.add(S),P!==M.n&&(d.set(S,M),(N=M.u)==null||N.call(M),k(M))}for(let S of E.m.d||[])if(!E.d.has(S)){E.m.d.delete(S);let P=_(S,c(S));P?.t.delete(A)}}},"mountDependencies"),Ae=i((A,E)=>{var N;if(!E.m){b(A);for(let S of E.d.keys())Ae(S,c(S)).t.add(A);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},(N=E.h)==null||N.call(E),lo(A)){let S=E.m,P=i(()=>{let M=!0,V=i((...q)=>{try{return $(A,...q)}finally{M||(j(),h())}},"setAtom");try{let q=a(A,V);q&&(S.u=()=>{M=!0;try{q()}finally{M=!1}})}finally{M=!1}},"processOnMount");p.add(P)}}return E.m},"mountAtom"),_=i((A,E)=>{var N;if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(S=>{var P;return(P=c(S).m)==null?void 0:P.d.has(A)})){let S=E.m.u;S&&m.add(S),delete E.m,(N=E.h)==null||N.call(E);for(let P of E.d.keys()){let M=_(P,c(P));M?.t.delete(A)}return}return E.m},"unmountAtom"),Me={get:w,set:se,sub:i((A,E)=>{let N=c(A),P=Ae(A,N).l;return P.add(E),h(),()=>{P.delete(E),_(A,N),h()}},"subscribeAtom"),unstable_derive:i(A=>Ca(...A(...e)),"unstable_derive")};return Me},"buildStore"),ud=i(e=>{let t=new Set,r,n=0,o=e.unstable_derive((...c)=>{let[f,d,,m]=c;return r=f,c[1]=i(function(h,T){d(h,T);let b=T.h;T.h=()=>{b?.(),T.m?t.add(h):t.delete(h)}},"devSetAtomState"),c[3]=i(function(h,T,b,...w){return n?b(h,...w):m(h,T,b,...w)},"devAtomWrite"),c}),s=o.set;return Object.assign(o,{dev4_get_internal_weak_map:i(()=>({get:i(c=>{let f=r(c);if(!(!f||f.n===0))return f},"get")}),"dev4_get_internal_weak_map"),dev4_get_mounted_atoms:i(()=>t,"dev4_get_mounted_atoms"),dev4_restore_atoms:i(c=>{s({read:i(()=>null,"read"),write:i((d,m)=>{++n;try{for(let[p,h]of c)fo(p)&&m(p,h)}finally{--n}},"write")})},"dev4_restore_atoms")})},"deriveDevStoreRev4"),ho=i(()=>{let e=new WeakMap,t=Ca(r=>e.get(r),(r,n)=>e.set(r,n).get(r),(r,...n)=>r.read(...n),(r,...n)=>r.write(...n),(r,...n)=>{var o;return(o=r.unstable_onInit)==null?void 0:o.call(r,...n)},(r,...n)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...n)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?ud(t):t},"createStore"),ar,Sa=i(()=>(ar||(ar=ho(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=ar),globalThis.__JOTAI_DEFAULT_STORE__!==ar&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),ar),"getDefaultStore");u();l();var me=F(G(),1);var Na=(0,me.createContext)(void 0),Pa=i(e=>{let t=(0,me.useContext)(Na);return e?.store||t||Sa()},"useStore"),Qy=i(({children:e,store:t})=>{let r=(0,me.useRef)(void 0);return!t&&!r.current&&(r.current=ho()),(0,me.createElement)(Na.Provider,{value:t||r.current},e)},"Provider"),yo=i(e=>typeof e?.then=="function","isPromiseLike"),Ma=i(e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},"attachPromiseMeta"),ld=me.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Ma(e),e)}),go=new WeakMap,xa=i(e=>{let t=go.get(e);return t||(t=new Promise((r,n)=>{let o=e,s=i(f=>d=>{o===f&&r(d)},"onFulfilled"),a=i(f=>d=>{o===f&&n(d)},"onRejected"),c=i(f=>{"onCancel"in f&&typeof f.onCancel=="function"&&f.onCancel(d=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&d===f)throw new Error("[Bug] p is not updated even after cancelation");yo(d)?(go.set(d,t),o=d,d.then(s(d),a(d)),c(d)):r(d)})},"registerCancelHandler");e.then(s(e),a(e)),c(e)}),go.set(e,t)),t},"createContinuablePromise");function Ee(e,t){let r=Pa(t),[[n,o,s],a]=(0,me.useReducer)(d=>{let m=r.get(e);return Object.is(d[0],m)&&d[1]===r&&d[2]===e?d:[m,r,e]},void 0,()=>[r.get(e),r,e]),c=n;(o!==r||s!==e)&&(a(),c=r.get(e));let f=t?.delay;if((0,me.useEffect)(()=>{let d=r.sub(e,()=>{if(typeof f=="number"){let m=r.get(e);yo(m)&&Ma(xa(m)),setTimeout(a,f);return}a()});return a(),d},[r,e,f]),(0,me.useDebugValue)(c),yo(c)){let d=xa(c);return ld(d)}return c}i(Ee,"useAtomValue");function cr(e,t){let r=Pa(t);return(0,me.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}i(cr,"useSetAtom");function qy(e,t){return[Ee(e,t),cr(e,t)]}i(qy,"useAtom");u();l();var dd=g.object({data:g.string(),from:g.string(),to:g.string()}),fd=g.object({transaction:dd});async function md({caip19:e,amount:t,owner:r}){let n=await re.api().post("/tokens/v1/unwrap",{owner:r,caip19:e,amount:t.toNumber()}),o=fd.safeParse(n.data);if(!o.success){let{error:s}=o;throw B.captureError(s,K.Fungibles),new nr(`Failed to get unwrap transaction: ${s.message}`)}return o.data.transaction}i(md,"getUnwrapTransaction");var pd=i(({caip19:e,amount:t,owner:r})=>R({gcTime:ta.Medium,staleTime:ra.Never,enabled:r!==""&&t.isGreaterThan(0),queryKey:be.unwrapTransaction({caip19:e,amount:t,owner:r}),async queryFn(){return await md({caip19:e,amount:t,owner:r})}}),"useGetUnwrapTransaction");u();l();var Kt=F(G());u();l();var hd=new $i({[Ke.Solana]:{},[Ke.Ethereum]:{},[Ke.Polygon]:{},[Ke.Base]:{},[Ke.Arbitrum]:{},[Ke.Monad]:{},[Ke.Bitcoin]:{},[Ke.Sui]:{},[Ke.Hypercore]:{},[Ke.Hyperevm]:{}}),it=Wi(hd);u();l();u();l();u();l();var gd=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],To=class{static{i(this,"EventSource")}ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(t,r={}){if(!t||typeof t!="string"&&typeof t.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof t.toString=="function"?t.toString():t,this.method=r.method||"GET",this.timeout=r.timeout??0,this.timeoutBeforeConnection=r.timeoutBeforeConnection??0,this.withCredentials=r.withCredentials||!1,this.headers=r.headers||{},this.body=r.body||void 0,this.debug=r.debug||!1,this.interval=r.pollingInterval??5e3,this.lineEndingCharacter=r.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(t,r){(t>0||r)&&(this._logDebug(`[EventSource] Will open new connection in ${t} ms.`),this._pollTimer=setTimeout(()=>{this.open()},t))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[t,r]of Object.entries(this.headers))this._xhr.setRequestHeader(t,r);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let t=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${gd[t.readyState]||"Unknown"}(${t.readyState}), status: ${t.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(t.readyState)&&(t.status>=200&&t.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(t.responseText||""),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):t.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:t.responseText,xhrStatus:t.status,xhrState:t.readyState}),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(t){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:t.message,error:t})}}_logDebug(...t){this.debug&&console.debug(...t)}_handleEvent(t){if(this.lineEndingCharacter===null){let d=this._detectNewlineChar(t);if(d!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(d).slice(1,-1)}`),this.lineEndingCharacter=d;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let r=this._getLastDoubleNewlineIndex(t);if(r<=this._lastIndexProcessed)return;let n=t.substring(this._lastIndexProcessed,r).split(this.lineEndingCharacter);this._lastIndexProcessed=r;let o,s=null,a=[],c=0,f="";for(let d=0;d<n.length;d++)if(f=n[d].trim(),f.startsWith("event"))o=f.replace(/event:?\s*/,"");else if(f.startsWith("retry"))c=parseInt(f.replace(/retry:?\s*/,""),10),isNaN(c)||(this.interval=c);else if(f.startsWith("data"))a.push(f.replace(/data:?\s*/,""));else if(f.startsWith("id"))s=f.replace(/id:?\s*/,""),s!==""?this.lastEventId=s:this.lastEventId=null;else if(f===""&&a.length>0){let m=o||"message",p={type:m,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(m,p),a=[],o=void 0}}_detectNewlineChar(t){let r=[this.CRLF,this.LF,this.CR];for(let n of r)if(t.includes(n))return n;return null}_getLastDoubleNewlineIndex(t){let r=this.lineEndingCharacter+this.lineEndingCharacter,n=t.lastIndexOf(r);return n===-1?-1:n+r.length}addEventListener(t,r){this.eventHandlers[t]===void 0&&(this.eventHandlers[t]=[]),this.eventHandlers[t].push(r)}removeEventListener(t,r){this.eventHandlers[t]!==void 0&&(this.eventHandlers[t]=this.eventHandlers[t].filter(n=>n!==r))}removeAllEventListeners(t){let r=Object.keys(this.eventHandlers);if(t===void 0)for(let n of r)this.eventHandlers[n]=[];else{if(!r.includes(t))throw Error(`[EventSource] '${t}' type is not supported event type.`);this.eventHandlers[t]=[]}}dispatch(t,r){if(Object.keys(this.eventHandlers).includes(t))for(let o of Object.values(this.eventHandlers[t]))o(r)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},bo=To;u();l();var Eo=class{static{i(this,"AbstractStreamEventProducer")}getDefaultHeaders(){let t={"X-Phantom-Version":kr,"X-Phantom-Platform":Fr},r=Lr();return r&&(t["X-Phantom-AnonymousId"]=r),t}getOptions(t={}){return{...t,headers:Object.fromEntries(Jt(this.getDefaultHeaders(),t.headers).entries())}}getOptionsWithAuth(t,r={}){let n=this.getOptions(r);if(n.withClientAuth!==!1){let o=Ur(t,n.headers);return{...n,headers:Object.fromEntries(Jt(n.headers,o).entries())}}return n}getApiEnvironment(){return Rr()}safeJsonParse(t){try{return t?{success:!0,data:JSON.parse(t)}:{success:!1,error:new Error("No data provided")}}catch(r){return{success:!1,error:r instanceof Error?r:new Error("Failed to parse JSON")}}}createErrorEvent(t,r="error"){return{type:r,error:typeof t=="string"?new Error(t):t}}};u();l();function wo({url:e,signal:t,customEvent:r}){return{[Symbol.asyncIterator](){let n=[],o=null,s=!1,a={"X-Phantom-Version":kr,"X-Phantom-Platform":Fr},c=Lr();c&&(a["X-Phantom-AnonymousId"]=c);let f=Ur(e,a),d={headers:Object.fromEntries(Jt(a,f).entries()),lineEndingCharacter:`
`},m=new bo(e,d),p=i(v=>{try{n.push(JSON.parse(v.data??""))}catch{n.push(v.data??"")}if(o){let k=o;o=null,k({value:n.shift(),done:!1})}},"onMessage"),h=i(()=>{s||(s=!0,b(),T())},"onError"),T=i(()=>{if(o){let v=o;o=null,v({value:void 0,done:!0})}},"finish"),b=i(()=>{r&&m.removeEventListener(r,p),m.removeEventListener("message",p),m.removeEventListener("error",h),m.close()},"cleanup");r&&m.addEventListener(r,p),m.addEventListener("message",p),m.addEventListener("error",h);let w=i(()=>{s||(s=!0,b(),T())},"onAbort");return t?.addEventListener("abort",w,{once:!0}),{next(){return s?Promise.resolve({value:void 0,done:!0}):n.length?Promise.resolve({value:n.shift(),done:!1}):new Promise(v=>{o=v})},return(){return s||(s=!0,t?.removeEventListener("abort",w),b()),Promise.resolve({value:void 0,done:!0})},throw(v){return s||(s=!0,t?.removeEventListener("abort",w),b()),Promise.reject(v)}}}}}i(wo,"sseIterable");u();l();function Da(e){return{usd:e.price??void 0,usd_24h_change:e.priceChange24h??void 0,price:e.price??void 0,priceChange24h:e.priceChange24h??void 0,lastUpdatedAt:e.lastUpdatedAt}}i(Da,"priceUpdateDataToPriceData");var yd=x({minutes:5}),Td=100,Ra=5,bd=x({seconds:1}),Ed=x({seconds:30}),Ao=class{static{i(this,"PriceStreamManager")}subscriptions=new Map;activeConnection=null;currentTokenIds=new Set;subscriptionOrder=[];connectionState="disconnected";reconnectAttempts=0;reconnectTimeoutId=null;subscribe(t,r,n){!this.subscriptions.has(t)&&this.subscriptions.size>=Td&&this.evictOldestToken();let o={priceCallback:r,evictedCallback:n?.onEvicted};return this.subscriptions.has(t)?(this.removeFromSubscriptionOrder(t),this.subscriptionOrder.push(t)):(this.subscriptions.set(t,new Set),this.subscriptionOrder.push(t)),this.subscriptions.get(t).add(o),this.updateConnection(),()=>{let s=this.subscriptions.get(t);if(s){for(let a of s)if(a.priceCallback===r){s.delete(a);break}s.size===0&&(this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection())}}}updateConnection(){let t=new Set(this.subscriptions.keys());if(t.size===0){this.disconnect();return}this.setsEqual(this.currentTokenIds,t)&&this.activeConnection&&this.connectionState==="connected"||this.connectionState==="reconnecting"&&this.setsEqual(this.currentTokenIds,t)||(this.disconnect(),this.connect(t))}connect(t){let r=new AbortController;this.activeConnection=r,this.currentTokenIds=new Set(t),this.connectionState="connecting";let n=Array.from(t).map(s=>encodeURIComponent(s)).join(","),o=`${Rr()}/price-stream?tokenIds=${n}`;this.consumeStream(o,r.signal)}async consumeStream(t,r){try{let n=wo({url:t,signal:r,customEvent:"price-update"});this.connectionState="connected",this.reconnectAttempts=0;for await(let o of n){if(r.aborted)break;this.handlePriceUpdate(o)}}catch{r.aborted||(this.connectionState="disconnected",this.scheduleReconnect())}}handlePriceUpdate(t){let r=t.caip19,n=this.subscriptions.get(r);if(!n)return;if(!t.price){let s=new Date(t.lastUpdatedAt).getTime();if(Date.now()-s<yd)return}let o=Da(t);n.forEach(s=>{try{s.priceCallback(r,o)}catch{}})}disconnect(){this.cancelReconnection(),this.activeConnection&&(this.activeConnection.abort(),this.activeConnection=null),this.currentTokenIds.clear(),this.connectionState!=="disconnected"&&(this.connectionState="disconnected")}setsEqual(t,r){if(t.size!==r.size)return!1;for(let n of t)if(!r.has(n))return!1;return!0}evictOldestToken(){if(this.subscriptionOrder.length===0)return;let t=this.subscriptionOrder[0],r=this.subscriptions.get(t);r&&(r.forEach(n=>{if(n.evictedCallback)try{n.evictedCallback(t)}catch{}}),r.clear()),this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection()}removeFromSubscriptionOrder(t){let r=this.subscriptionOrder.indexOf(t);r>-1&&this.subscriptionOrder.splice(r,1)}scheduleReconnect(){if(this.reconnectAttempts>=Ra){this.connectionState="disconnected";return}if(this.subscriptions.size===0)return;this.connectionState="reconnecting",this.reconnectAttempts++;let t=Math.min(bd*Math.pow(2,this.reconnectAttempts-1),Ed);this.reconnectTimeoutId=setTimeout(()=>{if(this.reconnectTimeoutId=null,this.subscriptions.size===0){this.connectionState="disconnected";return}this.connect(new Set(this.subscriptions.keys()))},t)}cancelReconnection(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}getConnectionState(){return this.connectionState}getStats(){return{connectionState:this.connectionState,activeSubscriptions:this.subscriptions.size,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:Ra,currentTokenIds:Array.from(this.currentTokenIds)}}forceReconnect(){this.subscriptions.size!==0&&(this.reconnectAttempts=0,this.disconnect(),this.connect(new Set(this.subscriptions.keys())))}destroy(){this.cancelReconnection(),this.disconnect(),this.subscriptions.clear(),this.subscriptionOrder.length=0,this.connectionState="disconnected",this.reconnectAttempts=0}},ka=new Ao;u();l();u();l();u();l();var Ot;(function(e){e[e.Always=1/0]="Always",e[e.Short=x({days:1})]="Short",e[e.Medium=x({days:3})]="Medium",e[e.Long=x({days:7})]="Long",e[e.VeryLong=x({days:30})]="VeryLong",e[e.Never=0]="Never"})(Ot||(Ot={}));var pe;(function(e){e[e.Immediate=0]="Immediate",e[e.VeryShort=x({seconds:1})]="VeryShort",e[e.Short=x({seconds:15})]="Short",e[e.Medium=x({minutes:3})]="Medium",e[e.Long=x({minutes:5})]="Long",e[e.VeryLong=x({minutes:10})]="VeryLong",e[e.Never=1/0]="Never"})(pe||(pe={}));var He;(function(e){e[e.VeryShort=x({seconds:2})]="VeryShort",e[e.Short=x({seconds:15})]="Short",e[e.Medium=x({minutes:3})]="Medium",e[e.Long=x({minutes:5})]="Long"})(He||(He={}));var Fa=x({seconds:10}),La={gcTime:Ot.Short,staleTime:pe.Short};u();l();var wd="prices",cn=i((e,t)=>{if(!Ir(e))return;let n=e.response?.status;if(!n||n===0||n>=500||n===404){B.addBreadcrumb(wd,e.message,ee.Info,t);return}n>=400&&n<500&&B.captureError(e,K.Prices)},"captureClientError");var Ia=g.object({price:g.number(),priceChange24h:g.number(),lastUpdatedAt:g.string().datetime().optional()}),Ua=g.object({prices:g.record(Vi,Ia)});async function At({tokens:e}){try{let t=e.filter(a=>!it.get(a.chainId)?.pricesDisabled),r={tokens:t.map(a=>({token:a}))},n="/price/v1",o,s=re.timeout(Fa).retry(1,200).validateStatus(!0).api();if(t.length===0)return{};if(t.length===1){let a=t[0];n+=`/${a.chainId}`,a.resourceType===ue.nativeToken?n+=`/nativeToken/${a.slip44}`:n+=`/address/${a.address}`;let c=await s.get(n);o=Ua.parse({prices:{[ne(a)]:c.data}})}else{let a=await s.post(n,r);o=Ua.parse(a.data)}return Ad(o.prices)}catch(t){throw cn(t),t}}i(At,"getPrices");function Ad(e){let t={};for(let r of Object.keys(e)){let{price:n,priceChange24h:o,lastUpdatedAt:s}=e[r],a={price:n,usd:n,usd_24h_change:o,lastUpdatedAt:s};t[r]=a}return t}i(Ad,"pricesToPriceMap");u();l();function un(e){return{caip19:vo(e)}}i(un,"parseCaip19Able");function vo(e){return typeof e=="string"?Qe(e):e}i(vo,"fungibledCaip19");u();l();var ln="prices",he={price:i(e=>[ln,{id:e}],"price"),priceError:i(()=>[ln,"error"],"priceError"),priceHistory:i((e,t)=>[ln,e,t],"priceHistory"),priceHistoryInterval:i((e,t,r,n)=>[ln,e,t,r,...n?[n]:[]],"priceHistoryInterval"),tempPrices:i(e=>["tempPrices",e],"tempPrices")};var Ba=new Error("Price not available"),Oa=i(e=>{let t=e?e.data:void 0;return t?Cd(t):void 0},"tokenIdFromQuery"),Co=i(({query:e,enabled:t=!0,queryOptions:r={refetchInterval:He.Short,staleTime:pe.Short,gcTime:pe.Short}})=>{let n=Oa(e),o=r.refetchInterval,s=r.staleTime,a=r.gcTime,c=e?e.data:void 0,f=c?un(c).caip19.chainId:void 0,d=f?!it.get(f).pricesDisabled:!1;return{enabled:t&&!!n&&d,queryKey:he.price(n),refetchInterval(p){return p.state.error===Ba?!1:o},staleTime:s,gcTime:a,retry:!1,queryFn:i(async()=>{if(!c||!n)throw new Error("No caip19able provided");let p=vo(c);try{let T=(await At({tokens:[p]}))[n];if(!T)throw new Error(`Failed to fetch price for ${c}`);return T}catch(h){let T=h;throw n&&(T.response?.status===404||T.response?.status===400)?Ba:h}},"queryFn")}},"getPriceQueryConfig"),vd=i(({query:e,enabled:t=!0,queryOptions:r={refetchInterval:He.Short,staleTime:pe.Short,gcTime:pe.Short}})=>({...Co({query:e,enabled:t,queryOptions:r}),refetchInterval:!1}),"getLivePriceQueryConfig");function vt({query:e,enabled:t=!0,queryOptions:r={refetchInterval:He.Short,staleTime:pe.Short,gcTime:pe.Short}}){let n=Y(),o=Zt("enable-price-streaming"),s=(0,Kt.useRef)(null),a=Oa(e),c=(0,Kt.useMemo)(()=>a?he.price(a):null,[a]);(0,Kt.useEffect)(()=>{if(!o||!t||!a||!c)return;let d=i(()=>{s.current&&(s.current(),s.current=null)},"cleanup"),m=ka.subscribe(a,(p,h)=>{n.setQueryData(c,h)},{onEvicted:d});return s.current=m,d},[o,t,a,c,n]);let f=o?vd({query:e,enabled:t,queryOptions:r}):Co({query:e,enabled:t,queryOptions:r});return R(f)}i(vt,"usePrice");function Cd(e){return typeof e=="string"?e:ne(e)}i(Cd,"encodedCaip19");u();l();u();l();var ja=F(G());u();l();var Ka=i(function(e,t=0){let r=3735928559^t,n=1103547991^t;for(let o=0,s;o<e.length;o++)s=e.charCodeAt(o),r=Math.imul(r^s,2654435761),n=Math.imul(n^s,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)},"cyrb53");u();l();function Ha(e){return e.data.map(un)}i(Ha,"parseQueries");u();l();u();l();var Va=i((e,t)=>Array.apply(0,new Array(Math.ceil(e.length/t))).map((r,n)=>e.slice(n*t,(n+1)*t)),"chunks");var Sd=500;async function Ga({queryClient:e,queries:t}){let r={};try{let n={},o=[];for(let d of t){let m=d.caip19,p=ne(m);if(n[p])continue;n[p]=!0;let h=he.price(p),T=e.getQueryState(h);if(T&&Date.now()-T.dataUpdatedAt<La.staleTime){r[p]=T.data;continue}o.push(m)}let s=await Promise.allSettled(Va(o,Sd).map(d=>At({tokens:d}))),a=[],c=s.some(d=>d.status==="rejected"),f=s.reduce((d,m)=>m.status==="rejected"?d:{...d,...m.value},{});for(let d of o){let m=ne(d),p=f[m],h=he.price(m);!p&&c&&(p=e.getQueryData(h)),p&&(r[m]=p),a.push(()=>{let T=p??null;e.setQueryData(h,T,{updatedAt:Date.now()})})}if(c){let d=e.getQueryData(he.priceError())??0;e.setQueryData(he.priceError(),d+1)}else e.removeQueries({queryKey:he.priceError()});xd(a,50)}catch(n){cn(n)}return r}i(Ga,"fetchPricesFn");function xd(e,t){let r=e.length,n=0;function o(){let s=e.slice(n,n+t);Vr.batch(()=>{s.forEach(a=>a())}),n+=t,n<r&&setTimeout(o,0)}i(o,"processNextChunk"),o()}i(xd,"updateCacheInChunks");var Nd=i(e=>typeof e=="string"?e:e.resourceType==="nativeToken"?e.slip44:e.address,"uniqueStringFromCaip19Able"),Pd=i((e,t)=>e.localeCompare(t),"compare"),Qa=i(e=>{let t=e.map(Nd).sort(Pd).join(",");return Ka(t)},"getPricesKey"),qa=i(({query:e,enabled:t=!0,key:r,queryOptions:n={refetchInterval:He.Short},queryClient:o})=>{let{refetchInterval:s}=n,a=Ha(e),c=t&&e!=null&&e.data.length>0;return{queryKey:he.tempPrices(r),staleTime:pe.Immediate,gcTime:Ot.Never,refetchInterval:s,queryFn:i(()=>Ga({queryClient:o,queries:a}),"queryFn"),enabled:c}},"getPricesQueryConfig");function So({query:e,enabled:t=!0,queryOptions:r={refetchInterval:He.Short}}){let n=Y(),o=(0,ja.useMemo)(()=>Qa(e.data),[e]);return R(qa({query:e,enabled:t,key:o,queryOptions:r,queryClient:n}))}i(So,"usePrices");u();l();var xo=i(()=>R({queryKey:he.priceError(),queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0}),"usePricesErrorCount");u();l();u();l();var xE=g.object({caip19:g.string(),price:g.number().nullish(),priceChange24h:g.number().nullish(),lastUpdatedAt:g.string(),marketCap:g.string().nullish()}),Md=[g.literal("1H"),g.literal("1D"),g.literal("1W"),g.literal("1M"),g.literal("YTD"),g.literal("ALL")],NE=g.union(Md).nullish().transform(e=>e??"1D");var Dd=[g.literal("1m"),g.literal("5m"),g.literal("1h"),g.literal("4h"),g.literal("1d"),g.literal("1w"),g.literal("4w"),g.literal("1mo")],PE=g.union(Dd).nullish().transform(e=>e??"1d"),Rd=g.object({unixTime:g.number(),value:g.string()}),Wa=g.object({history:g.array(Rd)});var ur=new Error("Price history unavailable for this token"),No=new Error("Insufficient data for this time frame and token"),kd=i(async({caip19:e,timeFrame:t})=>{let r=Qe(e);if(it.get(r.chainId)?.pricesDisabled)throw ur;let n=await re.api().get("/price-history/v1",{params:{token:e,type:t}});if(n.status===400)throw ur;let o=Wa.safeParse(n.data);if(!o.success)throw ur;if(o.data.history.length<2)throw No;return o.data.history},"fetchPriceHistory"),Fd=i(({caip19:e,timeFrame:t})=>({queryKey:he.priceHistory(e,t),queryFn:i(()=>kd({caip19:e,timeFrame:t}),"queryFn"),staleTime:pe.Short,gcTime:pe.Short}),"getPriceHistoryQueryConfig"),$a=i(e=>R(Fd(e)),"usePriceHistory");u();l();var Ld=1*60*1e3,Ud=i(e=>{let t=e.queryKey[1];return Object.prototype.hasOwnProperty.call(t??{},"id")?e.state.dataUpdatedAt>Date.now()-Ld:String(t)===he.priceError()[1]},"pricesShouldDehydrateQueryPredicate");u();l();u();l();u();l();var Xa=F(Ya()),dn=F(_l());(0,Xa.default)(dn.default.localeData("en"),{abbreviations:{thousand:"K",million:"M",billion:"B",trillion:"T"}});u();l();var Ja=i(e=>{let t=e?Math.floor(Math.log10(e)):0,r=t<0?Math.pow(10,1-t):100;return Math.round(e*r)/r},"roundToTwoTrailingDecimals");var qd=i(e=>{let t=Math.abs(e);if(t<1e3)return e;let r=Math.floor(Math.log10(t)),n=r>=6?1e5:r>=5?1e3:100;return Math.sign(e)*Math.floor(t/n)*n},"floorForDisplay"),Za=i((e,t={})=>{let r=typeof e=="number"?e:H(e).toNumber(),{includePlusPrefix:n=!1,prefix:o="",infix:s="",suffix:a="",extendedDecimalsForSmallNumbers:c=!1,minimumAmount:f=.01,format:d="0,0.[00]",decimalFormatSmallNumbers:m="0.[00]",roundDecimals:p=!1}=t,h=r<0?"-":"",T=n&&r>0?"+":h,b=p?Ja(Math.abs(r)):Math.abs(r);if(t.compact&&b>=1e3&&(b=Math.abs(qd(r))),Math.abs(r)>=f||r===0){let w=Math.abs(r)>1?t.compact?"0.[00]a":d:m,v=(0,dn.default)(b).format(w);return`${o}${T}${s}${v}${a}`}else if(c){let w=new H(b).abs().toFormat();return`${o}${T}${s}${w}${a}`}else return`${o}${T}<${s}${new H(f).toFormat()}${a}`},"formatNumber");var ie=F(G());u();l();var _a=i(({priceHistory:e,realtimePriceUpdates:t})=>{let r=e.at(-1),n=e.at(-2);if(!r||!n)return e.map(c=>({...c,tooltipUnixTime:c.unixTime}));let o=r.unixTime-n.unixTime,s=t.map((c,f)=>({unixTime:r.unixTime+(f+1)*o,value:c.value,tooltipUnixTime:c.unixTime}));return[...e.map(c=>({...c,tooltipUnixTime:c.unixTime})),...s]},"ensureConsistentIntervals");u();l();var ec=i(({priceHistory:e,currentPrice:t})=>{let r=e.at(-1),n=e.at(-2),o=e.map(c=>({...c,tooltipUnixTime:c.unixTime}));if(t===void 0||!r||!n)return o;let s=r.unixTime-n.unixTime,a={unixTime:r.unixTime+s,value:t.toString(),tooltipUnixTime:r.unixTime+s};return[...o,a]},"ensureLatestPricing");u();l();var tc=F(Zl()),Ht=F(G());var rc=i((e,t=100)=>{let[r,n]=(0,Ht.useState)(e),o=(0,Ht.useMemo)(()=>(0,tc.default)(s=>n(s),t),[t]);return(0,Ht.useEffect)(()=>o(e),[o,e]),r},"useThrottle");var Wd=i(({error:e,chainId:t,prices:r,isPending:n})=>{if(it.get(t).pricesDisabled)return te.t("assetDetailPriceNoValue");if(e===ur)return te.t("assetDetailPriceHistoryUnavailable");if(e===No||!n&&r.length===0)return te.t("assetDetailPriceHistoryInsufficientData");if(e)return te.t("assetDetailPriceHistoryError")},"getErrorText"),$d=i(({caip19:e,userLocale:t="en-US",timeFrame:r="1D"})=>{let{t:n}=Ue(),o=Ie(),s=Y(),[a,c]=(0,ie.useState)(r),f=(0,ie.useCallback)(J=>{if(J!==a){c(J);try{let{symbol:ye}=s.getQueryData(tn.tokenDetails({caip19:e,includePrice:!0}))||{};o.capture("onPublicFungibleTimeframeChanged",{data:{timeFrame:J,caip19:e,symbol:typeof ye=="string"?ye:void 0}})}catch(ye){console.error("error capturing onPublicFungibleTimeframeChanged",ye)}}},[o,e,s,a]),{data:d,isPending:m,error:p}=$a({caip19:e,timeFrame:a}),{data:h}=vt({query:{data:e},queryOptions:{refetchInterval:He.VeryShort,staleTime:pe.VeryShort}}),T=(0,ie.useMemo)(()=>{if(d){if(h?.price&&h.lastUpdatedAt&&d){let J=h.price,ye=new Date(h.lastUpdatedAt),Mt={value:J.toString(),unixTime:Math.floor(ye.getTime()/1e3)};return _a({priceHistory:d,realtimePriceUpdates:[Mt]})}return ec({priceHistory:d,currentPrice:h?.price})}},[d,h?.price,h?.lastUpdatedAt]),w=Qe(e).chainId,v=h?.price,k=h?.usd_24h_change,j=(0,ie.useMemo)(()=>!v||!k?null:v/(1+k/100),[v,k]),[$,se]=(0,ie.useState)(null);(0,ie.useEffect)(()=>{T?.length&&se(T)},[T,se]);let ae=(0,ie.useMemo)(()=>T||$||[],[T,$]),Ae=Wd({error:p,chainId:w,prices:ae,isPending:m});(0,ie.useEffect)(()=>{Ae&&se(null)},[Ae]);let _=(0,ie.useMemo)(()=>[{timeFrame:"1H",label:n("assetDetailTimeFrame1H")},{timeFrame:"1D",label:n("assetDetailTimeFrame1D")},{timeFrame:"1W",label:n("assetDetailTimeFrame1W")},{timeFrame:"1M",label:n("assetDetailTimeFrame1M")},{timeFrame:"YTD",label:n("assetDetailTimeFrameYTD")},{timeFrame:"ALL",label:n("assetDetailTimeFrameAll")}].map(J=>({...J,label:J.label?.toUpperCase()})),[n]),[Se,xe]=(0,ie.useState)(null),Me=rc(Se,100),[A,E]=(0,ie.useMemo)(()=>{if(!ae.length)return[j??null,v??null];let[J,ye]=[ae[0],ae[ae.length-1]].map(Mt=>new H(Mt.value).toNumber());return[J,v||ye]},[v,j,ae]),N=(0,ie.useMemo)(()=>Me??E,[Me,E]),S=(0,ie.useMemo)(()=>E===null||A===null?null:E-A,[A,E]),P=(0,ie.useMemo)(()=>N===null||A===null?null:N-A,[N,A]),M=(0,ie.useMemo)(()=>{if(P===null||A===null||A===0)return null;let J=P/A*100;return`${Za(J,{includePlusPrefix:!0})}%`},[P,A]),V=(0,ie.useCallback)(J=>{let ye=new Date(J*1e3),Mt=ye.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}),Fi=ye.toLocaleString(t,{month:"short",day:"2-digit"}),Vl=ye.getFullYear(),Li=ae.at(-1);if(Li&&Li.unixTime===J)return n("assetDetailPriceHistoryNow");switch(a){case"1H":case"1D":return Mt;case"1W":case"1M":return`${Mt}, ${Fi}`;case"YTD":case"ALL":return`${Fi}, ${Vl}`;default:return a}},[t,ae,a,n]),q=(0,ie.useMemo)(()=>it.get(w).pricesDisabled??!1,[w]);return{activeTimeFrame:a,setActiveTimeFrame:f,prices:ae,isPending:m,errorText:Ae,timeFrames:_,setScrubValue:xe,scrubValue:Me,currentPrice:N,overallPriceChange:S,currentPriceChange:P,formattedPercentageChange:M,formatTimeFrameText:V,hidePriceAmounts:q,hideTimeFrames:q}},"usePriceHistoryState");u();l();u();l();var Po=g.object({feerate:g.string()}),nc=g.object({conservative:Po,economical:Po,unset:Po}),zd=g.object({recommended:g.object({priceEstimates:nc}),bitcoin_rpc:g.object({priceEstimates:nc})}),Yd=g.object({gasPriceSources:zd}),Xd=new z("1.25"),Jd=new z("1.5"),oc=i(async(e,t=!0)=>{let r,n,o;try{let{priceEstimates:s}=(await Zd(e)).gasPriceSources.recommended,{conservative:a,economical:c,unset:f}=s;r=new z(a.feerate),n=new z(c.feerate),o=new z(f.feerate)}catch(s){if(!t)throw s;let a=await Rs(e).estimateSmartFee(2,"ECONOMICAL");o=new z(a.feerate),n=o.times(Xd),r=o.times(Jd)}return{[fe.fast]:{btcPerKilobyte:r.multipliedBy(1)},[fe.standard]:{btcPerKilobyte:n.multipliedBy(1)},[fe.slow]:{btcPerKilobyte:o.multipliedBy(1)}}},"getBitcoinTransactionSpeeds");async function Zd(e){let t=`https://gas-price-oracle.phantom.app/?chainId=${e}`,r=await re.headers({"Content-Type":"application/json"}).get(t);return Yd.parse(r.data)}i(Zd,"getBitcoinTransactionUnitCosts");u();l();var Vt="gas-estimation";var _d=3,ef=600,tf=x({seconds:30}),Ct=i(({networkID:e,enableFallback:t=!1,retry:r=_d,retryDelay:n=ef,enabled:o=!0})=>R({queryFn:i(async()=>{try{if(!e)throw new Error("Missing networkID");if(C.isBitcoinNetworkID(e))return await oc(e,t);if(C.isEVMNetworkID(e))return await bs(e,t);if(C.isSolanaNetworkID(e))throw new Error("Transaction speeds is not supported for Solana.");if(C.isSuiNetworkID(e))throw new Hi("transaction speeds to unit cost");return De(e)}catch(s){throw s instanceof Ts||(B.addBreadcrumb(Vt,`enableFallback: ${t}, networkID: ${e}`,ee.Info),B.captureError(s,K.Transaction)),s}},"queryFn"),queryKey:Q.transactionSpeedsToUnitCost(e),refetchOnMount:"always",retry:r,retryDelay:n,staleTime:tf,enabled:o&&!!e&&(C.isEVMNetworkID(e)||C.isBitcoinNetworkID(e)),placeholderData:Hr}),"useTransactionSpeedsToUnitCost");u();l();u();l();var ic=i(async(e,t)=>{let r=hs(e),n=await ls.eth_estimateGas(r,[t]);if("error"in n)throw new Error(`[${n.error.code}] ${n.error.message}`);return new z(n.result)},"estimateGas");var HA=new z(21e3),rf=6,nf=600,of=x({seconds:5}),sf=x({days:1}),Mo=i((e,t=!0)=>R({queryFn:i(async()=>{if(!e)throw new Error("Args is required for calculating transaction units.");try{return await af(e)}catch(n){throw B.addBreadcrumb(Vt,`networkId: ${e?.networkID}`,ee.Info),B.captureError(n,K.Transaction),n}},"queryFn"),queryKey:Q.transactionUnitAmount(e),enabled:!!e&&(C.isEVMNetworkID(e.networkID)||C.isBitcoinNetworkID(e.networkID))&&t,retry:rf,retryDelay:nf,staleTime:of,gcTime:sf}),"useTransactionUnitAmount"),af=i(async e=>{if(Yr(e)){let{gas:t}=e.unsignedTransaction;if(t)return{gasLimit:new z(t,16)};{let r=await ic(e.networkID,e.unsignedTransaction);return{gasLimit:new z(Es(r))}}}else if(zr(e)){let t=e.psbtChain,r=t?new z(_n(t.map(o=>o.additionalCost.vb.toNumber()))):new z(0),n=t?new z(_n(t.map(o=>o.additionalCost.sats.toNumber()))):new z(0);return{virtualBytes:new z(e.vb),additionalCosts:{vb:r,sats:n}}}else throw new Error(`Unsupported transaction networkId: ${e.networkID} for calculating transaction units.`)},"getTransactionUnitAmount");u();l();u();l();var fn=F(Ql(),1),ac=F(Dt(),1);var sc=(0,fn.struct)([(0,fn.u8)("instruction")]);function cc(e,t,r,n=[],o=rr){let s=Js([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,n),a=Buffer.alloc(sc.span);return sc.encode({instruction:Ys.CloseAccount},a),new ac.TransactionInstruction({keys:s,programId:o,data:a})}i(cc,"createCloseAccountInstruction");u();l();var cf=x({seconds:30}),uf=x({minutes:5}),uc=i(e=>R({queryKey:Q.transactionAdditionalCosts(e),queryFn:i(async()=>{if(!e)return new z(0);let t=wt.get(e.networkID).additionalTransactionCost;return t?await t(e):new z(0)},"queryFn"),enabled:!!e,staleTime:cf,gcTime:uf}),"useTransactionAdditionalCosts");var lf=6,df=600,ff=x({seconds:5}),mf=x({days:1}),pf=[fe.fast,fe.standard,fe.slow],hf=i(e=>{if(!e)return fe.fast;for(let t of pf)if(e[t])return t;throw new Error("No valid transaction speeds found.")},"getFastestSpeed"),Do=i(e=>{let t=Tf(e),r=e?.queryOptions?.refetchInterval,{data:n,isError:o}=Mo(e?.multichainTransaction,t),{data:s}=Ct({networkID:e?.networkID,enableFallback:!0,refetchInterval:r}),{data:a}=uc(e?.multichainTransaction),c=yf(e,n,s);return R({queryFn:i(async()=>{try{if(!e)throw new Error("Missing args");let{multichainTransaction:d,transactionSpeed:m=fe.standard}=e;if(!d)throw new Error("Multichain transaction is null.");if(o&&Ro(e.networkID))throw new Error("Transaction unit amount is required but errored.");if(Yr(d)||zr(d)){if(!s)throw new Error("Missing transactionSpeedsToUnitCost");if(!n)throw new Error("Missing transactionUnit");let p=m==="fastest"?hf(s):m,h=s[p];if(!h)throw new Error(`Missing transactionSpeedsToUnitCost for ${m}`);return Ut(d.networkID,h,n,a)}if(Ps(d))return d.networkID===Br.Localnet?{networkID:d.networkID,value:0,highFees:!1}:await Zs(d.networkID,d.transaction.map(h=>"version"in h?h.message:h.compileMessage()));if(Ms(d))return await qs(d);De(d)}catch(d){throw B.addBreadcrumb(Vt,`chainId: ${e?.networkID}`,ee.Info),B.captureError(d,K.Transaction),d}},"queryFn"),queryKey:Q.gasEstimation(e?.networkID,e?.multichainTransaction,e?.transactionSpeed,a),enabled:c,retry:lf,retryDelay:df,refetchInterval:r,staleTime:ff,gcTime:mf,placeholderData:i(d=>d,"placeholderData")})},"useGasEstimation");function Ro(e){return C.isBitcoinNetworkID(e)||C.isEVMNetworkID(e)?!0:C.isSolanaNetworkID(e)||C.isSuiNetworkID(e)?!1:De(e)}i(Ro,"isTransactionUnitAmountRequired");function gf(e){return C.isBitcoinNetworkID(e)||C.isEVMNetworkID(e)?!0:C.isSolanaNetworkID(e)||C.isSuiNetworkID(e)?!1:De(e)}i(gf,"isTransactionUnitCostsBySpeedRequired");function yf(e,t,r){if(!e)return!1;let{networkID:n,multichainTransaction:o}=e;return o?(!!t||!Ro(n))&&(!!r||!gf(n)):!1}i(yf,"calculateGasEstimationEnabled");function Tf(e){return e?Ro(e.networkID):!1}i(Tf,"calculateTransactionUnitAmountEnabled");u();l();u();l();var bf=new Error("missing price"),Ef=new Error("Unable to format gas estimation"),mn=i((e,t)=>{if(!t.usd)throw bf;try{let r=C.getTokenDecimals(e.networkID);if($r(e)){let n=Is(e),s=new H(n).div(tr(r)).times(new H(t.usd));return{gasEstimationPriceUSD:er(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:n}}else if(kt(e)){let n=Bs(e),s=n.div(new H(de.LAMPORTS_PER_SOL)).times(t.usd);return{gasEstimationPriceUSD:er(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:n}}else if(Wr(e)){let o=Ss(e.gasBudget,r).times(t.usd);return{gasEstimationPriceUSD:er(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:e.gasBudget}}else if(Ft(e)){let n=Os(e),s=new H(n).div(tr(r)).times(t.usd);return{gasEstimationPriceUSD:er(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:n}}else throw De(e),new Error("unsupported chain type")}catch{throw Ef}},"createGasEstimationPrice");var wf=i((e,t,r)=>{let n=e?C.getChainID(e):null,o=n?Or(n):void 0,{data:s,isFetched:a}=vt({query:{data:o}}),c=!!e&&!!t&&a,f=Q.gasEstimationPrice(e,t);return R({enabled:c,queryKey:f,queryFn:i(()=>{if(!s||!t)throw new Error("missing args");return mn(t,s)},"queryFn"),refetchOnMount:!0,placeholderData:Hr,...r||{}})},"useGasEstimationPrice");u();l();u();l();var lc=Object.prototype.hasOwnProperty;function dc(e,t,r){for(r of e.keys())if(st(r,t))return r}i(dc,"find");function st(e,t){var r,n,o;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&st(e[n],t[n]););return n===-1}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if(o=n,o&&typeof o=="object"&&(o=dc(t,o),!o)||!t.has(o))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if(o=n[0],o&&typeof o=="object"&&(o=dc(t,o),!o)||!st(n[1],t.get(o)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(lc.call(e,r)&&++n&&!lc.call(t,r)||!(r in t)||!st(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}i(st,"dequal");var fc=F(G(),1);var Af=i(e=>{let t=Te(),r=(0,fc.useRef)(void 0),n=Q.pendingTransactionById(e);return R({queryKey:n,queryFn:i(async()=>{try{let a=(await Zr(t))[e];return a?(st(a,r.current)||(r.current=a),r.current):null}catch(s){throw B.captureError(s,K.Transaction),s}},"queryFn"),refetchInterval:200,staleTime:200,gcTime:0,refetchOnMount:!0})},"usePendingTransactionById");u();l();var hc=F(Qr(),1),gc=F(ed(),1);var dr=F(G(),1);u();l();var lr=F(Qr(),1),mc=F(G(),1);function pc(e,t){let r=(0,mc.useRef)((0,lr.default)());R({queryKey:["PENDING-TX-POLLER",e],enabled:e.length>0,queryFn:i(()=>Us(e,t),"queryFn"),refetchInterval:i(()=>(0,lr.default)().diff(r.current,"seconds")<30?5*1e3:(0,lr.default)().diff(r.current,"minutes")<2?15*1e3:(0,lr.default)().diff(r.current,"minutes")<5?30*1e3:!1,"refetchInterval")})}i(pc,"usePendingTransactionsFromEndpoint");hc.default.extend(gc.default);var fr=i(e=>{let t=Te(),r=(0,dr.useRef)([]),n=(0,dr.useRef)([]);(0,dr.useEffect)(()=>{r.current=[],n.current=[]},[e]);let o=Q.pendingTransactions(e),s=i(async()=>{let a=await Zr(t),c=Fs(a,e);if(!st(c,r.current)){let f=r.current.filter(d=>!c.find(m=>m.id===d.id));st(f,n.current)||(n.current=f),r.current=c}return{pendingTransaction:r.current,removedPendingTransactions:n.current}},"queryFn");return pc(e,t),R({queryKey:o,queryFn:s,refetchInterval:1e3,staleTime:500,gcTime:0,refetchOnMount:!0,enabled:!!e.length})},"usePendingTransactions");u();l();var Ec=F(G(),1);u();l();var yc=i(e=>({connection:Lt(e),cluster:Jr(e)}),"solanaNetworkIDToConnection"),Tc=i(()=>yc(yt.Solana.Mainnet),"getDefaultSolanaConnection"),bc=i(e=>{let t,r=e?.addresses??[];for(let o of r)if(C.isSolanaNetworkID(o.networkID)){t=o.networkID;break}let n=t??yt.Solana.Mainnet;return yc(n)},"selectSolanaConnection");var mr=i(()=>{let e=(0,Ec.useMemo)(Tc,[]),{data:t=e}=Be({select:bc});return t},"useSelectedSolanaConnection");u();l();u();l();var ze=F(G(),1);var wc=(0,ze.createContext)(null),vf=i(({children:e})=>{let{data:t}=cs(),{data:r,isLoading:n}=Yn(t),o=t&&r?qn[t].languageCode:jr.languageCode,s=t||jr.value,a=t&&r?qn[t].symbol:jr.symbol,c=(0,ze.useCallback)((p,h)=>Intl.NumberFormat(o,{style:"currency",currency:s,...h}).format(p),[s,o]),f=(0,ze.useCallback)(p=>!t||!r?Number(p):H(p).div(H(r)).toNumber(),[t,r]),d=(0,ze.useCallback)((p,h)=>{if(!t||!r)return Number(p);let T=H(p).times(H(r));return h===void 0?T.toNumber():T.decimalPlaces(h).toNumber()},[t,r]),m={isLoading:n,currencyLocale:o,currencySymbol:a,currencyCode:s,toUsd:f,fromUsd:d,formatLocalizedPrice:c};return ze.default.createElement(wc.Provider,{value:m},e)},"LocalizedCurrencyProvider"),pr=i(()=>{let e=(0,ze.useContext)(wc);if(!e)throw new Error("useLocalizedCurrency must be used within a LocalizedCurrencyProvider");return e},"useLocalizedCurrency");u();l();u();l();var Yc=F(G(),1);u();l();var Ac=i(async e=>{try{return await gs(yt.Ethereum.Mainnet).resolveName(e)}catch(t){return console.error(t),null}},"resolveEVMDomainName");u();l();var vc=i(async(e,t)=>{let r="/uns/v1/resolve";try{let n=await re.api().headers({"Content-Type":"application/json"}).post(r,{query:e,chainId:t});if(!Le(n))throw Jn;let o=n.data;if(o.address===""||o.status!=="OK")throw Jn;return o.address}catch{return null}},"resolveSolanaHandle");u();l();var Wc=F(qc(),1);var $c=i(async(e,t)=>{try{if(!C.isSolanaNetworkID(t))return null;let r=Jr(t),n=ks(r),s=await new Wc.TldParser(n).getOwnerFromDomainTld(e);return s?s.toString():null}catch{return null}},"fetchAnsDomainOwner");u();l();var zc=i(async(e,t)=>{try{if(!C.isSuiNetworkID(t))return null;let r=Ds(t);return e.toLowerCase().endsWith(".sui")&&await r.resolveNameServiceAddress({name:e})||null}catch{return null}},"fetchSuiNsDomainOwner");function Wo(e,t){let r=e?.toLowerCase(),n=$o(r,t),o=n.error,s=(0,Yc.useMemo)(()=>o===qr?te.t("sendFormErrorInvalidDomain"):o===fs?te.t("sendFormErrorInvalidSolanaAddress"):o===ms?te.t("sendFormErrorInvalidTwitterHandle"):o===Xn?te.t("sendFormErrorInvalidUsername"):"",[o]);return{...n,error:s}}i(Wo,"useResolveDomainOwner");function $o(e,t){let r=os(),n=Ie(),o=!!e&&!!t,s=Q.resolveDomainName(e,t);return R({queryKey:s,queryFn:i(async()=>{if(!e||!t)throw ds;let c=await Xc(e,t,r,n);return{address:c?.owner??null,type:c?.type??null,handle:e}},"queryFn"),enabled:o})}i($o,"useFetchDomainOwner");var fm=i(async(e,t)=>{try{if(e.startsWith("@")||!C.isEVMNetworkID(t))return null;let[r]=rs(e);if(r){let n=await Ac(e);if(!n)throw qr;return n}return null}catch(r){return B.captureError(r instanceof Error?r:new Error(`Unable to resolve EVM domain: ${e}`),K.Transaction),null}},"fetchEVMDomainOwner"),mm=i(async(e,t,r)=>{try{if(e.startsWith("@")||!C.isSolanaNetworkID(t))return null;let[n,o,s]=ts(e);(n||o||s)&&r.capture("resolveDomainBonfida");let a=n||o||s,c=null;if(a&&(c=await vc(e,t),!c))throw qr;return c}catch(n){return B.captureError(n instanceof Error?n:new Error(`Unable to resolve solana domain: ${e}`),K.Transaction),null}},"fetchSolanaDomainOwner"),pm=i(async(e,t,r)=>{try{if(!e.startsWith("@"))return null;let n=e.slice(1),o=await r.getUserProfileByUsername(n),s=o?.username?.toLowerCase()===n.toLowerCase(),a=o?.addresses?o.addresses?.[t]!==void 0:!1,c=!!o&&s&&a,f=null;if(c&&(f=o.addresses[t],!f))throw Xn;return f}catch(n){return B.captureError(n instanceof Error?n:new Error(`Unable to resolve username: ${e}`),K.Auth),null}},"fetchUsernameDomainOwner");async function Xc(e,t,r,n){let o=Kr.isFeatureEnabled("kill-suins"),s=[{type:"username",fetch:pm(e,t,r)},{type:"solana",fetch:mm(e,t,n)},{type:"evm",fetch:fm(e,t)},{type:"ans",fetch:$c(e,t)}];o||s.push({type:"suins",fetch:zc(e,t)});let a=await Promise.all(s.map(({fetch:f})=>f)),c=a.findIndex(f=>f!==null);return c===-1?null:{type:s[c].type,owner:a[c]}}i(Xc,"fetchDomainOwner");u();l();var Jc=F(G(),1);function hm(e,t){let r=us(e,500),{data:n,error:o,isLoading:s}=Wo(r,t),c=n?.address??e,f=e.length>0,m=!f||e!==r||s,p=(0,Jc.useMemo)(()=>{if(m)return;if(o)return o;if(!Qi(c,t))return te.t("sendFormInvalidAddress",{assetName:C.getChainName(t)})},[t,m,o,c]);return{recipientError:p,currentRecipient:c,isStaleRecipient:m,disabledDueToRecipient:!!p||m||!f,isRecipientLoading:s&&e!==""}}i(hm,"useRecipient");u();l();var gm=3,ym=500,Tm=5e3,bm=i((e,t,r)=>R({async queryFn(){if(C.isEVMNetworkID(e))try{return await Em(e,t,r)}catch(n){throw B.captureError(n,K.Transaction),n}},queryKey:Q.gasEstimationTimeToMine(e,t,r),retry:gm,retryDelay:ym,refetchInterval:Tm,enabled:C.isEVMNetworkID(e)&&C.isMainnetNetworkID(e)}),"useEvmTimeToMineEstimate");async function Em(e,t,r){let n=`https://gas-price-oracle.phantom.app/time_to_mine?chainId=${e}&maxFeePerGas=${t}&maxPriorityFeePerGas=${r}`,o={Accept:"application/json","Content-Type":"application/json"},s=await re.headers(o).get(n);if(s.status!==200)throw new Error("Error estimating time to mine");return s.data}i(Em,"fetchEvmTimeToMineEstimate");u();l();u();l();var wm=i(({networkID:e,refetchInterval:t,transactionSpeed:r=fe.standard,gasLimit:n,enabled:o=!0})=>{let{data:s,status:a,fetchStatus:c,isError:f,isPending:d,isFetched:m,isSuccess:p}=Ct({networkID:e,refetchInterval:t,enableFallback:!0,enabled:o}),h;if(o&&s&&n){let{maxFeePerGas:b,maxPriorityFeePerGas:w}=s[r];h={networkID:e,gasLimit:n,maxFeePerGas:b,maxPriorityFeePerGas:w}}return{status:a,data:h,isError:f,isLoading:d,fetchStatus:c,hasFailed:m&&!p}},"useEvmGasEstimation");u();l();var Zc=i(e=>{let t=e[0]?.networkID,r=t?C.getChainID(t):null,n=r?Or(r):void 0,{data:o}=vt({query:{data:n}});return es({queries:e.map(a=>({queryKey:Q.gasEstimationPrice(t,a),queryFn:i(()=>{if(!o||!a)throw new Error("missing args");return mn(a,o)},"queryFn")}))}).map(a=>a.data)},"useGasEstimationPrices");u();l();var _c=F(G(),1);var Am=x({days:5}),vm=i(()=>{let e=Ie(),t=Y(),{data:r={}}=R({queryKey:Q.timestamps(),queryFn:i(()=>({...t.getQueryData(Q.timestamps())||{}}),"queryFn")});(0,_c.useEffect)(()=>{let n=Object.values(r),{staleTimestampDatas:o,freshTimestampDatas:s}=n.reduce((c,f)=>{let d=Math.max(...Object.values(f.timestamps));return Date.now()-d>Am?c.staleTimestampDatas.push(f):c.freshTimestampDatas.push(f),c},{staleTimestampDatas:[],freshTimestampDatas:[]});As(t,o?.map(c=>c.transactionId)??[]);let a=s.filter(c=>c.timestamps.appUpdated);vs(a,e,t)},[r,e,t])},"useLogTimestamps");u();l();var eu=F(G(),1);var zo=i((e,t,r=!1)=>{let n=Y();return(0,eu.useCallback)((s,a,c)=>{if(s===void 0)return;let f=Q.timestamps(),m=n.getQueryData(f)||{[s]:{chainId:t,transactionType:e,isLedger:r,transactionId:s,timestamps:{}}},p=m[s];if(p?.timestamps[a])return;let h={...m,[s]:{...p||{chainId:t,transactionType:e,isLedger:r,transactionId:s,timestamps:{}},timestamps:{...p?.timestamps??{},[a]:c??Date.now()}}};n.setQueryData(f,h)},[t,r,n,e])},"useMarkTimestamp");u();l();function Cm(e){let t=Te(),r=We();return qe({mutationFn:i(async o=>await It({...o,accountSigner:r,connection:e,storage:t}),"mutationFn")})}i(Cm,"useSignAndSendSolanaTransactionAsync");u();l();u();l();function tu(e){return e!=null}i(tu,"nonNullable");var wr=F(G(),1);var Sm={[fe.fast]:"gasFast",[fe.standard]:"gasAverage",[fe.slow]:"gasSlow"};function xm(e,t,r){let[n,o]=(0,wr.useState)(t),s=r??Cs(e),{data:a={}}=Ct({networkID:e}),c=(0,wr.useMemo)(()=>Object.keys(a).reduce((v,k)=>{let j=k,$=a[j];return $&&(v[j]=Ut(e,$,s,void 0)),v},{}),[a,e,s]),f=Object.keys(c),d=Object.values(c),m=Zc(Object.values(c)),p=d.map(v=>Xr(v)),{fromUsd:h,formatLocalizedPrice:T}=pr(),b=f.map((v,k)=>{let j=d[k],$=m[k],se=p[k];return Nm($,se,v,j,h,T)});return{presets:(0,wr.useMemo)(()=>b.map((v,k)=>({description:v,title:te.t(Sm[f[k]]),selected:n===f[k],onClick:i(()=>o(f[k]),"onClick"),withBorderTop:k!==0})),[b,f,n]),transactionSpeed:n}}i(xm,"useTransactionSettingsViewState");var Nm=i((e,t,r,n,o,s)=>{let a=[],c=e?.gasEstimationPriceUSDNumber?o(e?.gasEstimationPriceUSDNumber):void 0,f=c?s(c,{maximumFractionDigits:4}):void 0,d=f?te.t("gasUpTo",{amount:f}):t?te.t("gasUpTo",{amount:t}):void 0;a.push(d);let m=n?wt.get(n.networkID).transactionSettingsRowFeeDescription?.(n):void 0;a.push(m);let p=n?.networkID;if(p){let h=wt.get(p).transactionSpeedDescription(r);h&&a.push(te.t(h))}return a.filter(tu).join("  \u2022  ")},"getSpeedDescriptionString");u();l();function Pm(e){let{data:t}=fr(e?[e]:[]);if(e&&C.isBitcoinNetworkID(e.networkID))return!t||t.pendingTransaction.length===0?void 0:{title:te.t("sendSummaryBitcoinPendingTxTitle"),description:te.t("sendSummaryBitcoinPendingTxDescription"),buttonText:te.t("gotIt")}}i(Pm,"useTxSubmissionCheck");u();l();var ru=F(G(),1);u();l();var An=ns(Te,e=>Vs(new Hs(e)));var Mm="transactions-utxo-state",Dm=6,Rm=600,km=x({seconds:30}),Fm=x({seconds:5}),Lm=x({minutes:10}),Yo=i(e=>{let t=An(),r=Zt("enable-bypass-utxo-protection");return R({queryFn:nu(e,t,r),queryKey:Q.utxoState(e,r),enabled:ou(e),retry:Dm,retryDelay:Rm,refetchInterval:km,staleTime:Fm,gcTime:Lm})},"useUtxoState");function Um(e){let t=An(),r=Y(),n=Zt("enable-bypass-utxo-protection"),o=Q.utxoState(e,n);(0,ru.useEffect)(()=>{ou(e)&&r.prefetchQuery({queryKey:o,queryFn:nu(e,t,n)})},[])}i(Um,"usePrefetchUtxoState");function nu(e,t,r){return async()=>{try{if(!e)throw new Error("chainAddress not provided when fetching utxo state.");if(Qn(e)){await t.refetchUtxos(e,r);let[n,o,s]=await Promise.all([t.getSafeToSendUtxos(e.address,r),t.getInscribedUtxos(e.address),t.getRareSatsUtxos(e.address)]);return{safeToSendUtxos:n,inscribedUtxos:o,rareSatsUtxos:s}}else throw new Error(`Unsupported chain address type for fetching utxo state: ${e.addressType}`)}catch(n){if(Ir(n)){let o=n.response?.status;Gs(n,o,Mm)}throw n}}}i(nu,"queryFn");function ou(e){return!!e&&Qn(e)}i(ou,"enabled");u();l();function Im(e,t){let r=e?.toLowerCase(),{data:n}=$o(r,t);return n?.address||e}i(Im,"useResolveDomainOwnerIfNecessary");u();l();var Bm=i(({networkID:e,gasEstimation:t,gasEstimationPrice:r})=>{let n=Xr(t),{fromUsd:o,formatLocalizedPrice:s}=pr(),a=r?.gasEstimationPriceUSDNumber?o(r?.gasEstimationPriceUSDNumber):void 0,c=a?s(a,{maximumFractionDigits:4}):void 0,f=!C.isMainnetNetworkID(e),d=c&&!f?c:n||void 0;return wt.get(e).networkFeeRowString(d,c)},"useNetworkFee");u();l();var iu=F(G(),1);function Om(e,t,r){let n=e.data.transactions[e.data.transactions.length-1],{data:o}=fr(r?.addresses||[]),s=e.networkID;(0,iu.useEffect)(()=>{let v=o?.pendingTransaction.find(k=>k.id===e.id);(!v||v.data.transactions.some(k=>k.confirmations>0))&&t()},[o?.pendingTransaction,t,e]);let a={networkID:s,unsignedTransaction:n.unsignedTransaction},{data:c,status:f}=Do({networkID:s,transactionSpeed:fe.fast,multichainTransaction:a,queryOptions:{refetchInterval:!1}}),d=new z(n.unsignedTransaction.maxFeePerGas??"0"),m=c?.maxFeePerGas&&c?.maxFeePerGas.gt(d)?c?.maxFeePerGas:d,p=new z(n.unsignedTransaction.maxPriorityFeePerGas??"0"),h=c?.maxPriorityFeePerGas&&c?.maxPriorityFeePerGas.gt(p)?c?.maxPriorityFeePerGas:p,T=m?.multipliedBy(1.11).integerValue(),b=h?.multipliedBy(1.11).integerValue();return{data:Ut(s,{maxFeePerGas:T,maxPriorityFeePerGas:b},{gasLimit:new z(n.unsignedTransaction.gas??"0")},c?.l1Fee),status:f}}i(Om,"useReplacementEvmTransactionGasEstimate");u();l();var Km=i(()=>{let e=Kr.getMultivariateAssignment("frontend-transaction-sharing-delay-ms");if(!e)return eo;let t=parseInt(e);return Number.isNaN(t)?eo:t},"getTransactionSharingDelay"),Hm=i(()=>({delayMs:Km()}),"useTransactionSharingConfig");u();l();u();l();var su=i(async(e,t,r)=>{let{accountIdentifier:n,nonce:o,pendingTransaction:s,pendingTransactionInput:a,gasEstimation:c}=t,{data:{transactions:f}}=s,d=f[f.length-1],{callPayload:m,unsignedTransaction:p}=d,{networkID:h}=s,T=await _r({accountSigner:e,accountIdentifier:n,networkID:h,unsignedTransaction:{...p,...Ls(c),nonce:Qs(new z(o))},callPayload:{...m},pendingTransactionInput:a,storage:r});return{networkID:h,id:T}},"speedUpEvmTransaction");function Vm(){let e=We(),t=Te();return qe({mutationFn:i(async n=>su(e,n,t),"mutationFn")})}i(Vm,"useSpeedUpEvmTransaction");u();l();function Gm(e,t){let r=Ie(),n=!!t,o=Q.waitForTransactionConfirmation(t);return R({enabled:n,queryKey:o,queryFn:i(async()=>{if(!t){let a="Missing chainID or transactionReceipt.";throw new Error(a)}try{if(C.isSolanaNetworkID(t.networkID)){let a=Lt(t.networkID);await _s({connection:a,signature:t.id})}else if(C.isEVMNetworkID(t.networkID))await ys(t.networkID,t.id);else if(C.isBitcoinNetworkID(t.networkID))await js(t.networkID,t.id);else if(C.isSuiNetworkID(t.networkID))await Ws(t.networkID,t.id);else throw new Error("Unsupported transaction receipt type.");return e(t),!0}catch(a){if(a&&a instanceof ps)throw a;let c="Unable to send transaction.";a.message&&(c=a.message);let{networkID:f}=t,d={chainId:C.getChainID(f),networkId:f};throw r.capture("waitForTransactionConfirmationError",{data:{...d,errorMessage:a.message}}),new Error(c)}},"queryFn")})}i(Gm,"useWaitForTransactionConfirmation");u();l();var jm=i(e=>{let t=e.transaction.getData();return R({queryKey:Q.suiTransaction(t),queryFn:i(()=>$s(e),"queryFn")})},"useSuiTransaction");u();l();var Qm=/[e|+|-]/i;function qm(e,t){let r=Math.floor(e*t*100)/100;return!Number.isFinite(r)||r.toString().match(Qm)?0:r}i(qm,"assetToDollars");function Wm(e,t,r){let n=H(e);return t<=0||!n.isFinite()?0:n.dividedBy(t).decimalPlaces(r).toNumber()}i(Wm,"dollarsToAsset");u();l();u();l();function Xo({balance:e,priceId:t,priceMap:r}){let n=t?r[t]?.usd:void 0,o=t?r[t]?.usd_24h_change:void 0;if(n===void 0)return{usd:void 0,usd_24h_change:void 0,price:n};let s=e.multipliedBy(n),a;return o!==void 0&&(a=s.minus(s.dividedBy(1+o/100))),{usd:s.toNumber(),usd_24h_change:a?.toNumber(),price:n,priceChange24h:o,currencyValue:s.toNumber(),currencyChange:a?.toNumber()}}i(Xo,"calculatePriceData");u();l();u();l();u();l();var Ze;(function(e){e.AccountIdToHiddenMints="accountIdToHiddenMints"})(Ze||(Ze={}));var $m=g.union([g.object({version:g.literal(1),value:g.record(g.array(g.string()))}),g.object({version:g.literal(2),value:g.record(g.array(g.object({mintId:g.string(),status:g.nativeEnum(or)})))})]),zm=i((e,t)=>{let r=t,n=e;return r||n||null},"visibilityOverridesResolver"),[Ym,au,cu]=Yi("fungibles",[{key:Ze.AccountIdToHiddenMints,type:"object",validator:$m,nullable:!0,resolver:zm,updateOn:"idle"}]),uu=i((...e)=>zi(Ym,...e),"useFungiblesStorage");var lu=F(G());function Jo(e){let t=uu(Ze.AccountIdToHiddenMints);return(0,lu.useMemo)(()=>{if(!e)return new Map;let o=(Bt(t??null)?.value??{})[e]??[];return new Map(o.map(s=>[s.mintId,s]))},[t,e])}i(Jo,"useVisibilityOverrides");u();l();var du=F(G());var Xm=i(()=>{let{connection:e}=mr(),{data:t}=Be(),{solanaChainAddress:r,accountIdentifier:n}=(0,du.useMemo)(()=>({solanaChainAddress:t?.addresses.find(Tt),accountIdentifier:t?.identifier??""}),[t]),o=Te(),s=We(),{t:a}=Ue();return qe({mutationFn:i(async c=>{if(!r)throw new Error("solanaChainAddress not loaded");if(c.type!==L.CompressedSPL)throw new Error("SPL is not compressed");let f=await ea({owner:c.data.walletAddress,mint:c.data.mintAddress,amount:c.data.amount,programId:c.data.programId,connection:e}),{networkID:d,address:m}=r,p={ownerAddress:m,networkID:d,data:{signature:""},type:Rt.Decompress,display:{summary:{topLeft:{text:a("assetDetailClaiming")}}}};await It({accountIdentifier:n,accountSigner:s,connection:e,feePayer:new de.PublicKey(m),pendingTransactionInput:p,storage:o,transaction:f,useSubmissionService:!1})},"mutationFn")})},"useDecompressSpl");u();l();u();l();var _e=F(G());u();l();function fu(e){let t,r;for(let{data:n}of e){let{usd:o,usd_24h_change:s}=n;o!==void 0&&(t=t!==void 0?t+o:o),s!==void 0&&(r=r!==void 0?r+s:s)}return{value:t,earnings:r}}i(fu,"calculatePortfolio");u();l();function mu(e,t){return e.getQueriesData({predicate:i(n=>n.queryKey[0]===ca.transferFungibleLoggingContext,"predicate")}).map(([,n])=>n).filter(n=>{if(!n)return!1;let{previousBalance:o,fungibleKey:s}=n,a=t.get(s);return a?!a.data.balance.isEqualTo(o):!1})}i(mu,"checkForExpectedAppUpdates");u();l();var pu=i((e,t)=>{let r=be.transferFungibleLoggingContext(e);t.removeQueries({queryKey:r})},"removeLoggingContext");u();l();function hu({tokens:e,priceMap:t}){let r=[];for(let n of e){let{amount:o,decimals:s}=n.data,a=on(n),c=ne(a),f=nn(n),d=ir(o,s),m={type:n.type,data:{...n.data,balance:d,key:f}},p,h=Xo({priceId:c,balance:d,priceMap:t});if(n.type===L.SPL||n.type===L.CompressedSPL){let{mintAddress:T}=n.data;p=T}else if(n.type===L.ERC20||n.type===L.SuiCoin){let{contractAddress:T}=n.data;p=T}else if(n.type===L.BRC20){let{firstCreatedInscriptionId:T}=n.data;p=T}m.data.tokenAddress=p,m.data.usd=h.usd,m.data.price=h.price,m.data.usd_24h_change=h.usd_24h_change,m.data.priceChange24h=h.priceChange24h,m.data.currencyChange=h.currencyChange,m.data.currencyValue=h.currencyValue,r.push(m)}return r}i(hu,"tokensToFungibles");function xt({showHiddenMints:e=!1,keys:t,enablePrices:r=!0,enableSorting:n=!0,usePricesQueryOptions:o,useTokenQueryOptions:s}={}){let{data:a}=Be(),{data:c=[],isPending:f,isRefetching:d,refetch:m,error:p}=la({chainAddresses:a?.addresses,keys:t,queryOptions:s}),h=p!==null,T=Jo(a?.identifier),{query:b}=(0,_e.useMemo)(()=>({query:{data:c.map(on)}}),[c]),{data:w,isPending:v,isRefetching:k,refetch:j,isError:$}=So({query:b,enabled:r&&!f&&a?.identifier!=null,queryOptions:o}),{fungibles:se,fungibleMap:ae}=(0,_e.useMemo)(()=>{let E=e?c:c.filter(P=>{let M=nn(P),V=(t||[]).includes(M),q=rn(T,{key:M,spamStatus:P.data.spamStatus});return V||q}),N=hu({tokens:E,priceMap:w??{}});n&&(t===void 0?N=N.sort(da):N=N.sort((P,M)=>{let V=t.indexOf(P.data.key),q=t.indexOf(M.data.key);return V<q?-1:V>q?1:0}));let S=new Map;for(let P of N)S.set(P.data.key,P);return{fungibles:N,fungibleMap:S}},[c,t,e,T,w,n]),Ae=(0,_e.useMemo)(()=>!!T&&T.size>0&&c.length>0&&se.length===0,[c,T,se]),_=Y(),Se=(0,_e.useMemo)(()=>mu(_,ae),[ae,_]),xe=zo("send:fungible",yt.Solana.Mainnet);(0,_e.useEffect)(()=>{for(let E of Se)xe(E.transactionId,"appUpdated"),pu(E.fungibleKey,_)},[Se,xe,_]);let Me=(0,_e.useMemo)(()=>fu(se),[se]),A=(0,_e.useCallback)(async()=>{await Promise.all([m(),j()])},[m,j]);return{fungibles:se,portfolio:Me,visibilityOverrides:T,isHidingAllFungibles:Ae,isLoadingTokens:f,isLoadingPrices:r?v:!1,isRefetchingTokens:d,isRefetchingPrices:r?k:!1,isErrorTokens:h,tokensError:p,isErrorPrices:$,refetch:A}}i(xt,"useGetFungibleBalances");function Jm({key:e,splTokenAccount:t,...r}){let{fungibles:n,...o}=xt({...r,keys:e?[e]:[]}),s;return n.length===1?s=n[0]:n.length>1&&t?s=n.find(a=>a.type===L.SPL&&a.data.splTokenAccountPubkey===t):n.length>1&&(s=n.filter(a=>a.type===L.SPL).reduce((a,c)=>!a||c.data.balance.gt(a.data.balance)?c:a,void 0)),{fungible:s,...o}}i(Jm,"useGetFungibleBalance");u();l();var Nr=F(G());u();l();u();l();u();l();var qt=D(new _i);function Zo(){return Zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zo.apply(this,arguments)}i(Zo,"i");y.NODE_ENV!=="production"&&(qt.debugPrivate=!0);var Zm=i((e,t,r)=>e?.suspense&&_m(t,r),"a"),_m=i((e,t)=>e.isPending&&!t,"p"),ep=i(({result:e,throwOnError:t,query:r})=>e.isError&&!e.isFetching&&tp(t,[e.error,r]),"d");function tp(e,t){return typeof e=="function"?e(...t):!!e}i(tp,"E");var rp=i(e=>e.suspense&&typeof e.staleTime!="number"?Zo({},e,{staleTime:1e3}):e,"l");function gu(e,t,r=n=>n(qt)){let n=D(0),o=D(r);y.NODE_ENV!=="production"&&(o.debugPrivate=!0);let s=D(()=>new WeakMap);y.NODE_ENV!=="production"&&(s.debugPrivate=!0);let a=D(d=>{let m=d(o),p=e(d),h=m.defaultQueryOptions(p),T=d(s).get(m);return h._optimisticResults="optimistic",T&&T.setOptions(h,{listeners:!1}),rp(h)});y.NODE_ENV!=="production"&&(a.debugPrivate=!0);let c=D(d=>{let m=d(o),p=d(a),h=d(s),T=h.get(m);if(T)return T;let b=new t(m,p);return h.set(m,b),b});y.NODE_ENV!=="production"&&(c.debugPrivate=!0);let f=D(d=>{let m=d(c),p=d(a),h=m.getOptimisticResult(p),T=D(h);return y.NODE_ENV!=="production"&&(T.debugPrivate=!0),T.onMount=b=>{let w=m.subscribe(Vr.batchCalls(b));return()=>{m.getCurrentResult().isError&&m.getCurrentQuery().reset(),w()}},T});return y.NODE_ENV!=="production"&&(f.debugPrivate=!0),D(d=>{d(n);let m=d(c),p=d(a),h=d(d(f));if(Zm(p,h,!1))return m.fetchOptimistic(p);if(ep({result:h,query:m.getCurrentQuery(),throwOnError:p.throwOnError}))throw h.error;return h},(d,m)=>{m(n,p=>p+1)})}i(gu,"b");function yu(e,t=r=>r(qt)){return gu(e,Ji,t)}i(yu,"O");function Tu(e,t=r=>r(qt)){return gu(e,Zi,t)}i(Tu,"g");u();l();var nR=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var _o=i((e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),"getCached$2"),np=new WeakMap,op=i((e,t,r,n)=>{let o=_o(()=>new WeakMap,np,t),s=_o(()=>new WeakMap,o,r);return _o(e,s,n)},"memo3");function et(e,t,r=Object.is){return op(()=>{let n=Symbol(),o=i(([a,c])=>{if(c===n)return t(a);let f=t(a,c);return r(c,f)?c:f},"selectValue"),s=D(a=>{let c=a(s),f=a(e);return o([f,c])});return s.init=n,s},e,t,r)}i(et,"selectAtom");var ip=i(e=>typeof e?.then=="function","isPromiseLike");function sp(e=()=>{try{return self.localStorage}catch(r){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(r);return}},t){var r;let n,o,s={getItem:i((f,d)=>{var m,p;let h=i(b=>{if(b=b||"",n!==b){try{o=JSON.parse(b,t?.reviver)}catch{return d}n=b}return o},"parse"),T=(p=(m=e())==null?void 0:m.getItem(f))!=null?p:null;return ip(T)?T.then(h):h(T)},"getItem"),setItem:i((f,d)=>{var m;return(m=e())==null?void 0:m.setItem(f,JSON.stringify(d,t?.replacer))},"setItem"),removeItem:i(f=>{var d;return(d=e())==null?void 0:d.removeItem(f)},"removeItem")},a=i(f=>(d,m,p)=>f(d,h=>{let T;try{T=JSON.parse(h||"")}catch{T=p}m(T)}),"createHandleSubscribe"),c;try{c=(r=e())==null?void 0:r.subscribe}catch{}return!c&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(c=i((f,d)=>{if(!(e()instanceof self.Storage))return()=>{};let m=i(p=>{p.storageArea===e()&&p.key===f&&d(p.newValue)},"storageEventCallback");return self.addEventListener("storage",m),()=>{self.removeEventListener("storage",m)}},"subscriber")),c&&(s.subscribe=a(c)),s}i(sp,"createJSONStorage");var oR=sp();u();l();u();l();u();l();var ap=i(e=>{let t=en(e);if($e(t))return t===L.BitcoinNative,t;if(t===L.SPL&&e.resourceType===ue.address||t===L.ERC20&&e.resourceType===ue.address)return e.address;if(t===L.BRC20&&e.resourceType===ue.address)return`${e.address}-${Oi[0]}`;if(t===L.SuiCoin&&e.resourceType===ue.address)return e.address},"getLegacyKey"),bu=ap;function cp({caip19:e,...t}){let r=Qe(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:C.getChainName(r.chainId).toLowerCase(),encodedCaip19:e,decodedCaip19:r,legacyKey:bu(r)??e}}i(cp,"getDerivedCaip19Values");var Wt=cp;var up=g.object({account:g.string(),quantity:g.number(),quantityString:g.string()}),Ar=g.object({address:g.string(),quantity:g.number(),quantityString:g.string(),lastTransferredDate:g.coerce.date().nullish(),subaccounts:g.array(up).optional()}),$t=g.object({price:g.number(),priceChange24h:g.number().optional(),lastUpdatedAt:g.coerce.date(),marketCap:g.number().optional()}).nullish(),Eu=g.object({id:g.string(),name:g.string(),imageUri:g.string().nullish().transform(e=>e??""),numTokens:g.number()}),vn=g.object({compression:g.object({compressed:g.boolean()}).optional(),creators:g.array(g.object({address:g.string(),share:g.number(),verified:g.boolean()})).nullish(),tokenProgram:g.string().nullish(),extensions:sa(aa).nullish()}),Cn=g.enum(["TRUSTED","VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]),PR=g.object({totalValueUsdCentsCurrent:g.number().optional(),totalValueUsdStringCurrent:g.string().optional(),totalValueUsdCents24h:g.number().optional(),totalValueUsdString24h:g.string().optional(),totalPercentChange24h:g.number().optional()}),wu=g.object({name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),logoUri:g.string().nullish(),extraMetadata:vn.optional(),price:$t}),ei=wu.extend({type:g.enum(["native","fungible"]),encodedCaip19:g.string(),decodedCaip19:ji,spamStatus:Cn,chainName:g.string(),legacyKey:g.string()}),lp=wu.extend({caip19:g.string(),spamStatus:Cn.nullish().transform(e=>e??"NOT_VERIFIED")}),Au=g.union([lp.transform(e=>Wt(e)),ei]),vu=ei.extend({totalQuantity:g.number(),totalQuantityString:g.string(),walletAddress:g.string().optional(),queriedWalletBalances:g.array(Ar),livePrice:$t}),Cu=ei.extend({timestamp:g.string().nullish(),totalQuantityString:g.string(),totalQuantity:g.number(),queriedWalletBalances:g.array(Ar)});u();l();u();l();u();l();function Ge(e){let t=D(0),r=D(()=>({i:0}),(f,d)=>{let m=f(r);return Object.assign(m,{m:!0,peek:f,set:d}),d(t,p=>p+1),()=>{m.m=!1,a(m),c(m)}});r.onMount=f=>f();let n=D(f=>{f(t);let d=f(r);if(!d.m||d.irc||d.i&&!d.irf)return d.p;c(d);let m=new Map,p=i(w=>{let v=f(w);return m.set(w,v),v},"getter");p.peek=d.peek;let h=i((...w)=>{try{return++d.i,d.set(...w)}finally{Array.from(m.keys(),f),--d.i}},"setter");h.recurse=(w,...v)=>{if(d.fc){if(y.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return d.irc=!0,d.set(w,...v)}finally{d.irc=!1,Array.from(m).some(T)&&s(d)}};function T([w,v]){return f(w)!==v}i(T,"areDifferent"),++d.i;function b(){try{if(d.irf=!1,!d.m)return;a(d),d.c=o.effect(p,h)}catch(w){d.e=w,s(d)}finally{d.p=void 0,--d.i}}return i(b,"runEffect"),d.irf?b():d.p=Promise.resolve().then(b)});if(y.NODE_ENV!=="production"){let f=function(d,m){Object.defineProperty(d,"debugLabel",{get:i(()=>`${o.debugLabel??"effect"}:${m}`,"get")}),d.debugPrivate=!0};i(f,"setLabel"),f(t,"refresh"),f(r,"ref"),f(n,"base")}let o=D(f=>void f(n));return o.effect=e,o;function s(f){try{f.irf=!0,f.set(t,d=>d+1)}finally{f.irf=!1}}i(s,"refresh");function a(f){if(typeof f.c=="function")try{f.fc=!0,f.c()}finally{f.fc=!1,f.c=void 0}}i(a,"cleanup");function c(f){if("e"in f){let d=f.e;throw delete f.e,d}}i(c,"throwPendingError")}i(Ge,"atomEffect");u();l();var dp=i(()=>{if(typeof self>"u")return!1;try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},"isExtensionContext"),ti=class{static{i(this,"ExtensionStorage")}browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let n=(await this.storage.get(t))[t];return n==null||typeof n!="string"?null:JSON.parse(n)}catch(r){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){try{let r=await this.storage.get(t),n={};for(let o in r)if(Object.prototype.hasOwnProperty.call(r,o)){let s=r[o];if(s==null||typeof s!="string")n[o]=null;else try{n[o]=JSON.parse(s)}catch(a){console.error(`[ExtensionStorage.getAll] Error parsing key (${o}):`,a),n[o]=null}}return n}catch(r){let n=`[ExtensionStorage.getAll] Error getting keys (${t}): ${r}`;throw console.error(n),new Error(n)}}async remove(t){try{await this.storage.remove(t)}catch(r){let n=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);await this.storage.set({[t]:n})}catch(n){let o=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){try{let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=JSON.stringify(t[n]));await this.storage.set(r)}catch(r){let o=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${r}`;throw console.error(o),new Error(o)}}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),s=await r(o);s===null?await this.remove(t):await this.set(t,s)})}catch(n){let o=`[ExtensionStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{await this.storage.clear()}catch(t){let r=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},Sn=class{static{i(this,"WebLocalStorage")}_storage;get storage(){if(!this._storage){if(typeof self>"u")throw new Error("WebLocalStorage requires window.localStorage");this._storage=self.localStorage}return this._storage}async get(t){try{let r=this.storage.getItem(t);return r===null||typeof r!="string"?null:JSON.parse(r)}catch(r){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,r),null}}async getAll(t){let r={},n=t??Object.keys(this.storage);for(let o of n)try{let s=this.storage.getItem(o);if(t&&s===null)continue;if(s===null||typeof s!="string")r[o]=null;else try{r[o]=JSON.parse(s)}catch(a){console.error(`[WebLocalStorage.getAll] Error parsing key (${o}):`,a),r[o]=null}}catch(s){console.error(`[WebLocalStorage.getAll] Error reading key (${o}) from storage:`,s),t||(r[o]=null)}return r}async remove(t){try{let r=Array.isArray(t)?t:[t];for(let n of r)this.storage.removeItem(n)}catch(r){let n=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${r}`;throw console.error(n),new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);this.storage.setItem(t,n)}catch(n){let o=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${n}`;throw console.error(o),new Error(o)}}async setAll(t){let r=!1,n=Object.keys(t);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{await this.set(o,t[o])}catch{r=!0}if(r)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${n})`)}async update(t,r){if(!navigator.locks){let n=await this.get(t),o=await r(n);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),s=await r(o);s===null?await this.remove(t):await this.set(t,s)})}catch(n){let o=`[WebLocalStorage.update] Error updating key (${t}): ${n}`;throw console.error(o),new Error(o)}}async clear(){try{this.storage.clear()}catch(t){let r=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(r),new Error(r)}}},ri=class{static{i(this,"LocalStorage")}initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl&&!(typeof self>"u"))if(dp())try{let r=(await import("./browser-polyfill-3WOTVXCO.js")).default;if(!r||!r.storage||!r.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new ti(r)}catch{this.storageImpl=new Sn}else this.storageImpl=new Sn}async ensureInitialized(){if(await this.initPromise,!this.storageImpl&&typeof self<"u"&&await this._initialize(),!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed or is not available in this context.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,r){return await this.ensureInitialized(),this.storageImpl.set(t,r)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,r){return await this.ensureInitialized(),this.storageImpl.update(t,r)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},ni=new ri;u();l();u();l();var vr=class{static{i(this,"PersistentStore")}namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(r=>{console.error("Failed to load data",r)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),r=!1;for(let n in this.data)Object.prototype.hasOwnProperty.call(this.data,n)&&this.data[n].expiresAt<=t&&(delete this.data[n],r=!0);return r}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,r){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:r,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,r){this.isLoaded||await this._load();let n=this._cleanupExpired(),o=this.data[t];if(!o)return n&&await this._save(),null;let s=this._updateExpiration(t),a=r.safeParse(o.value);return a.success?((n||s)&&await this._save(),a.data):(this.onError?.(new ut(a.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let r=this._cleanupExpired(),n=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],n=!0),(r||n)&&await this._save()}async clear(){this.data={},await this._save()}};var Su=new Map;function fp({storage:e,namespaceKey:t,ttlMs:r}){let n=Su.get(t);if(n)return n;if(!e)throw new Error("Storage is required");let o=new vr({storage:e,namespaceKey:t,ttlMilliseconds:r,onError:i((s,a)=>{console.error(`[PersistentStore Error - ${a}]:`,s.message),s instanceof ut&&console.error("Zod Issues:",s.issues)},"onError")});return Su.set(t,o),o}i(fp,"getDataStorage");var oi=fp;function mp({atomToStoreOffline:e,namespaceKey:t,ttlMs:r,initialValue:n,schema:o,...s}){let a=D({status:"pending",value:n}),c=D(p=>{if("offlineKey"in s)return p(s.offlineKey);let h=p(e);if("offlineKey"in h&&typeof h.offlineKey=="string")return h.offlineKey;throw new Error("No key provided")}),f=Ge((p,h)=>{oi({storage:ni,namespaceKey:`.offline.${t}`,ttlMs:r}).get(p(c),o).then(T=>{T&&h(a,{status:"offline",value:T})}).catch(T=>{console.error(T)})}),d=Ge((p,h)=>{p(c),h(a,{status:"pending",value:n})}),m=Ge((p,h)=>{let T=p(e),b=p(c);T.status==="success"&&T.data&&T.data!==p(a).value&&(h(a,{status:"live",value:T.data}),oi({storage:ni,namespaceKey:`.offline.${t}`,ttlMs:r}).set(b,T.data).catch(w=>{B.addBreadcrumb(K.Tokens,"Error storing offline data",ee.Error,{namespaceKey:t,error:w.toString()})}))});return et(D(p=>{let h=p(e);p(d),p(f),p(m);let T=p(a);return h.data?{status:"live",value:h.data}:{status:"offline",value:T.value}}),p=>p.value)}i(mp,"atomWithOfflineStorage");var xn=mp;u();l();u();l();var ii=g.object({caip19:g.string(),name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),spamStatus:Cn.nullish().transform(e=>e??"NOT_VERIFIED"),logoUri:g.string().nullish()}),xu=ii.extend({totalQuantity:g.number(),totalQuantityString:g.string(),queriedWalletBalances:g.array(Ar),extraMetadata:vn.optional(),price:$t}),Nu=xu.transform(Wt),Pu=g.object({items:g.array(xu),cursor:g.string().nullish().default(null),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}).transform(e=>{let{items:t,cursor:r,errors:n,...o}=e;return{...o,nextCursor:r,tokens:t,errors:n||[],updatedAt:Date.now()}}),Mu=ii.extend({timestamp:g.string().nullish(),postQuantityString:g.string(),postQuantity:g.number(),price:$t,queriedWalletBalances:g.array(Ar)}),Du=Mu.transform(e=>{let{postQuantity:t,postQuantityString:r,...n}=Wt(e);return{...n,totalQuantity:t,totalQuantityString:r}}),Ru=g.object({cursor:g.string().nullish().default(null),items:g.array(Mu)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),gk=g.object({totalValueUsdCentsCurrent:g.number(),totalValueUsdStringCurrent:g.string(),totalValueUsdCents24h:g.number(),totalValueUsdString24h:g.string(),totalPercentChange24h:g.number(),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}),si=ii.extend({createdDate:g.coerce.date().nullish().default(null),extraMetadata:vn.extend({id:g.string().nullish().default(null),description:g.string().nullish().default(null),marketCap:g.coerce.number().optional(),circulatingSupply:g.coerce.number().optional(),totalSupply:g.coerce.number().optional(),liquidity:g.coerce.number().optional(),holders:g.coerce.number().optional(),links:g.array(g.object({type:g.string(),url:g.string()})).optional(),volume24hUSD:g.coerce.number().optional(),volume24hUSDChangePercentage:g.coerce.number().optional(),trades24h:g.coerce.number().optional(),trades24hChangePercentage:g.coerce.number().optional(),uniqueWallets24h:g.coerce.number().optional(),uniqueWallets24hChangePercentage:g.coerce.number().optional(),top10HoldersPercent:g.coerce.number().optional(),mintable:g.boolean().optional(),freezable:g.boolean().optional(),mutableMetadata:g.boolean().optional(),ownershipRenounced:g.boolean().optional(),updateAuthority:g.string().optional(),createdDate:g.string().datetime().nullish().default(null)}).optional(),categories:g.array(Eu).optional().default([]),price:$t}),ku=si.transform(Wt);u();l();var pp=i(e=>C.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType===ue.nativeToken?e.queriedWalletBalances.map(n=>{let o=oa(e.decodedCaip19.chainId,n.address);if(!o)throw new Error("No legacy key found for bitcoin native token");return{...e,legacyKey:o,queriedWalletBalances:[n],totalQuantity:n.quantity,totalQuantityString:n.quantityString,walletAddress:n.address}}):[e],"explodeBitcoinToken"),hp=i(e=>t=>t.map(r=>e.parse(r)),"createTokenMapper"),Ck=hp(Au),gp=i(e=>t=>t.flatMap(r=>{let n=e.parse(r);return pp(n)}),"createTokenBalanceMapper"),Fu=gp(Nu),yp=i(e=>t=>t.map(r=>e.parse(r)),"createTokenBalanceUpdateMapper"),Lu=yp(Du);async function Tp(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let r=await re.api().timeout(x({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(n=>{if(Le(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText||`Status: ${n.status}`,{cause:n.data?.code??n.data?.name})}).catch(n=>{throw B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates",ee.Error,{message:n.message,cause:n.cause,...t}),B.captureError(n,K.Tokens),n});try{return Ru.parse(r)}catch(n){throw n instanceof ut&&B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates parse error",ee.Error,{message:n.message,...n.issues?{issues:JSON.stringify(n.issues)}:{},result:JSON.stringify(r)}),n}}i(Tp,"getTokenBalanceUpdates");async function Uu(e){let t=[],r=i(()=>t.at(-1)?.nextCursor,"getNextCursor");do{let n=r(),o=await Tp(n?{walletCaip19s:e.walletCaip19s,cursor:n}:e);t.push(o)}while(r());return Lu(t.flatMap(n=>n.transfers))}i(Uu,"getTokenBalanceUpdatesAll");u();l();var bp="25.13.0",Cr=`fungible-tokens-${bp}`,Iu=[Cr,"token-updates"];var Bu=[Cr,"portfolio-value"],Ep=[Cr,"token-balance"],wp=[Cr,"infinite-token-balances"],Ap=[Cr,"visibility-overrides"],tt={infiniteTokenBalances:i(({walletCaip19s:e})=>[...wp,{walletCaip19s:e}],"infiniteTokenBalances"),tokenBalance:i(({wallets:e,encodedCaip19:t,isSplCompressed:r})=>{let n=e.map(o=>typeof o=="string"?o:ne({chainId:o.networkID,address:o.address,resourceType:ue.address})).sort();return[...Ep,{walletCaip19s:n,encodedCaip19:t,isSplCompressed:r}]},"tokenBalance"),tokenUpdates:i(({walletCaip19s:e,from:t})=>[...Iu,{walletCaip19s:e,from:t}],"tokenUpdates"),portfolioValue:i(({walletCaip19s:e,include:t,exclude:r,isMainnet:n})=>[...Bu,{walletCaip19s:e,include:t,exclude:r,isMainnet:n}],"portfolioValue"),visibilityOverrides:i(({accountId:e})=>[...Ap,{accountId:e}],"visibilityOverrides"),tokenDetails:tn.tokenDetails};u();l();u();l();function vp(e){let t=en(e.decodedCaip19);return t===L.SPL?e.extraMetadata?.compression?.compressed||"queriedWalletBalances"in e&&e.queriedWalletBalances.some(r=>!r.subaccounts?.length)?L.CompressedSPL:L.SPL:t}i(vp,"getTokenTypeFromToken");var Ou=vp;function ai({newUpdates:e,existingUpdates:t={}}){return e.reduce((r,n)=>r[n.encodedCaip19]?.totalQuantityString===n.totalQuantityString?r:Ou(n)===L.CompressedSPL?{...r,[`${n.encodedCaip19}-compressed`]:n}:n?{...r,[n.encodedCaip19]:n}:r,t)}i(ai,"aggregateUpdates");u();l();function Cp(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let r=new Date(e).getTime(),s=t.groups.fraction.padEnd(6,"0").slice(-3);return r*1e3+parseInt(s,10)}i(Cp,"getMicrosecondsFromTimestamp");var ci=Cp;u();l();var Sp=D(!1),Ku=Sp;u();l();u();l();u();l();var xp=x({minutes:5}),Sr=0;function yF(){if(!Sr){Sr=Math.floor(Math.random()*1e6);return}Sr++}i(yF,"incrementTokensBalancesCacheBust");async function Hu({walletCaip19s:e,fungibleCaip19s:t,cursor:r,cacheBust:n}){let o={walletAddresses:e.join(","),includePrices:"true"};r&&(o.cursor=r),(n||Sr)&&(o.cacheBust=n?.toString()||Sr.toString()),t&&t.length>0&&(o.fungibleAddresses=t.sort().join(","));try{let s=await re.api().timeout(x({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:o}).then(c=>{if(Le(c))return c.data;throw new Error(c.data?.message||c.data?.error||c.statusText||`Status: ${c.status}`,{cause:c.data?.code})}),a=Pu.parse(s);return a.errors&&a.errors.length>0&&a.errors.forEach(c=>{B.addBreadcrumb(K.Tokens,"getTokenBalances_partialError",ee.Info,{code:c.code,message:c.message,chainId:c.details.chainId,address:c.details.address})}),{...a,tokens:Fu(a.tokens)}}catch(s){throw s instanceof Error&&(B.addBreadcrumb(K.Tokens,"getTokenBalances",ee.Error,{...o,message:s.message,...typeof s.cause=="string"||typeof s.cause=="number"?{cause:s.cause}:{}}),B.captureError(s,K.Tokens)),s}}i(Hu,"getTokenBalances");function Vu({walletCaip19s:e,isEnabled:t=!0,cacheBust:r}){return{staleTime:xp,gcTime:x({days:3}),queryKey:tt.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:i(async({pageParam:n})=>Hu({walletCaip19s:e,cursor:n,cacheBust:r}),"queryFn"),initialPageParam:"",getNextPageParam:i(n=>n?.nextCursor||void 0,"getNextPageParam")}}i(Vu,"getTokenBalancesQuery");function Gu(e){let{walletCaip19s:t,encodedCaip19:r,queryOptions:n={enabled:!0}}=e;return{staleTime:x({seconds:10}),gcTime:x({days:3}),queryKey:tt.tokenBalance({wallets:t,encodedCaip19:r}),enabled:n.enabled&&!!t.length,queryFn:i(async()=>(await Hu({walletCaip19s:t,fungibleCaip19s:[r]})).tokens,"queryFn")}}i(Gu,"getTokenBalanceQuery");u();l();u();l();var Np=D(void 0),Nn=Np;var Pp=D(e=>{let t=e(Nn);return t?t.addresses.map(r=>ne({chainId:r.networkID,address:r.address,resourceType:ue.address})).sort():[]}),zt=Pp;var Mp=Tu(e=>{let t=e(zt);return Vu({walletCaip19s:t})}),rt=Mp;var Dp=D(e=>{let{data:t}=e(rt),r=t?.pages[0];return!r||!r.tokens.length?0:r.updatedAt}),ju=Dp;u();l();var Rp=et(Nn,e=>e?.identifier),mt=Rp;var kp=1e3,Qu=5e3,qu=Math.ceil(Qu*2.25);function Wu(e){return x(e)*1e3}i(Wu,"toMicroseconds");function Fp(e){if(!e?.length)return null;let t=new Date(Date.now()-qu).toISOString();return Math.floor(Math.max(...e.map(({timestamp:r})=>ci(r||t))))}i(Fp,"getLastTimestamp");function Lp(e){let t=Fp(e);return t?t-Wu({seconds:1}):null}i(Lp,"getNextTimestamp");var Up=yu(e=>{let t=e(qt),r=e(ju),n=Math.floor(r-x({minutes:10})),o=e(zt),s=e(Ku),a=n>Date.now()-x({days:10}),c=tt.tokenUpdates({walletCaip19s:o,from:n}),f=i(async()=>{let d=t.getQueryData(c)?.lastTimestamp;if(!d){let T=new Date(n-qu).toISOString();return{updates:{},lastTimestamp:ci(T)}}let m=await Uu({walletCaip19s:o,fromMicroseconds:d-Wu({seconds:30})}),p=t.getQueryData(c)?.updates??{};return{updates:ai({newUpdates:m,existingUpdates:p}),lastTimestamp:Math.max(Lp(m)??0,d)}},"queryFn");return{meta:{fetchCount:0},enabled:a&&!s&&o.length>0,queryKey:c,refetchInterval:i(d=>{let m=Number(d.meta?.fetchCount??0);return d.meta&&(d.meta.fetchCount=m+1),Math.min(Math.max(m*250,kp),Qu)},"refetchInterval"),queryFn:f}}),Ip=xn({atomToStoreOffline:Up,offlineKey:D(e=>`${e(mt)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:x({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:g.object({updates:g.record(g.string(),Cu),lastTimestamp:g.number()})}),Bp=et(Ip,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Pn=Bp;u();l();u();l();function Mn(e){return t=>{let r=!1,n={...t};for(let[o,s]of Object.entries(e)){let a=s?.price,c=s?.lastUpdatedAt?new Date(s.lastUpdatedAt):null;if(!a||!c)continue;let f=t[o]?.price!==a&&(!t[o]?.lastUpdatedAt||c>t[o].lastUpdatedAt);r=r||f,f&&(n[o]={price:s.price,priceChange24h:s.priceChange24h,lastUpdatedAt:c})}return r?n:t}}i(Mn,"processExtractedPriceData");u();l();var Op=D(e=>{let{data:t,status:r}=e(rt);return{data:t?.pages.flatMap(n=>n.tokens),status:r}}),Kp=xn({atomToStoreOffline:Op,offlineKey:D(e=>`${e(mt)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:x({days:10}),initialValue:[],schema:g.array(vu)}),pt=Kp;var Dn=D({}),Hp=D(e=>e(pt).slice(-100).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})),Vp=Ge((e,t)=>{let r=e(Hp);!r||Object.keys(r).length===0||t(Dn,Mn(r))}),Gp=D(e=>{let t=e(Pn);return Object.values(t).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})}),jp=Ge((e,t)=>{let r=e(Gp);!r||Object.keys(r).length===0||t(Dn,Mn(r))}),Qp=D(e=>(e(Vp),e(jp),e(Dn)),(e,t,r)=>{t(Dn,r)}),ht=Qp;u();l();u();l();var qp=et(rt,e=>e.hasNextPage),Yt=qp;var xr=D(1/0),Rn=D(e=>(e(Wp),e($p),e(Yt)?e(xr):0),(e,t,r)=>{if(r===null){t(xr,1/0);return}let n=Math.min(e(xr),r);n!==e(xr)&&t(xr,n)}),$u=Rn,Wp=Ge((e,t)=>{let{hasNextPage:r}=e(rt),n=e(pt),o=e(ht);if(n.length>0&&!r){t(Rn,0);return}let s=n.slice(-100).filter(a=>a.type==="fungible").map(a=>{let c=o[a.encodedCaip19]??a.price;return c?a.totalQuantity*c.price/10**a.decimals:1/0});t(Rn,Math.min(...s))}),$p=Ge((e,t)=>{e(mt)&&t(Rn,1/0)});function zp(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}i(zp,"sortNativeTokensFirst");function Yp(e,t){if(!e&&t)return 1;if(e&&!t)return-1}i(Yp,"sortTokensWithValidPrice");function zu(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}i(zu,"sortByString");function Yu(e,t){if(e!==t)return t-e}i(Yu,"sortByNumber");function Xp(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}i(Xp,"getUpdatedBalances");var Jp=D(e=>{let t=e(pt),r=e(Pn),n=new Set(Object.keys(r));if(t.length===0)return[];let o=t.map(s=>{let a=s.extraMetadata?.compression?.compressed?`${s.encodedCaip19}-compressed`:s.encodedCaip19,c=r[a];return c?(n.delete(a),{...s,...Xp(c)}):s});return n.forEach(s=>{let a=r[s];a&&o.push(a)}),o}),Zp=D(e=>{let t=e(ht),r=e(Jp),n=e($u),o=r.filter(s=>s.totalQuantity>0||s.type==="native").map(s=>({...s,livePrice:t[s.encodedCaip19]??s.price})).sort((s,a)=>{let c=s.livePrice?.price,f=a.livePrice?.price,d=Yp(c,f);if(d)return d;let m=s.totalQuantity/10**s.decimals,p=a.totalQuantity/10**a.decimals;if(!c&&!f){let w=zp(s,a);if(w)return w;let v=Yu(m,p);if(v)return v;let k=zu(s.name,a.name);return k||0}let h=(c??0)*m,T=(f??0)*p,b=Yu(h,T);return b||(zu(s.name,a.name)??0)});return n?o.filter(s=>{let a=s.livePrice?.price,c=s.totalQuantity/10**s.decimals;return(a??0)*c>=n}):o}),gt=Zp;u();l();function _p(e){if(e)return typeof e=="string"||typeof e=="number"?new Date(e):e}i(_p,"toDate");function eh(e,{key:t,newPriceData:r}){let n=e[t];if(!r||n?.price===r?.price)return e;let o=_p(r.lastUpdatedAt);return!o||!(!n?.lastUpdatedAt||o>n.lastUpdatedAt)?e:{...e,[t]:{price:r.price,priceChange24h:r.priceChange24h??r.usd_24h_change,lastUpdatedAt:o}}}i(eh,"handlePriceAtomUpdate");var kn=eh;var th=i((e,t,r)=>{let n=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(n!==o)return r?n?-1:1:n?1:-1},"sortByCompressed"),rh=i((e,t,r)=>{let n=e.legacyKey===r,o=t.legacyKey===r;if(n!==o)return n?-1:1},"sortByLegacyKey"),nh=i(({isSplCompressed:e,legacyKey:t},r)=>r.length?r.length===1?r[0]:[...r].sort((o,s)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||s.encodedCaip19.includes("solana:"))){let a=th(o,s,e);if(a)return a}if(t){let a=rh(o,s,t);if(a)return a}return s.totalQuantity-o.totalQuantity})[0]:null,"pickBalance"),Fn=i(e=>{let t=Ee(zt),r=Ee(gt),n=(0,Nr.useMemo)(()=>r.filter(c=>c.encodedCaip19===e.encodedCaip19&&(!e.legacyKey||c.legacyKey===e.legacyKey)),[e.encodedCaip19,e.legacyKey]),o=Gu({...e,walletCaip19s:t});o.refetchInterval||(o.refetchInterval=x({seconds:3}));let s=R({...o,select:i(c=>nh(e,c),"select"),placeholderData:n}),a=cr(ht);return(0,Nr.useEffect)(()=>{let c=s.data;c&&!s.isPlaceholderData&&c.price&&a(f=>{let d=c.encodedCaip19,m=c.price;return kn(f,{key:d,newPriceData:m})})},[s.data,s.isPlaceholderData,a]),s},"useTokenBalance"),Ln=i(({networkID:e,queryOptions:t,addressType:r})=>{let n={chainId:e,slip44:C.getSlip44(e),resourceType:ue.nativeToken},o=na(e,r),s=ne(n);return Fn({encodedCaip19:s,legacyKey:o,queryOptions:t})},"useNativeTokenBalance"),oh=i(()=>{let{data:e}=Be(),t=(0,Nr.useMemo)(()=>e?.addresses.find(r=>C.isSolanaNetworkID(r.networkID)),[e]);return Ln({networkID:t?.networkID||Br.Mainnet,addressType:t?.addressType})},"useSolanaBalance");u();l();u();l();var ih=D(e=>{let{isLoading:t}=e(rt),r=e(pt);return t&&r.length===0}),Un=et(ih,e=>e);u();l();var sh=new Map,ah=D(null),ch=D(e=>{let t=e(mt);if(!t)return sh;let r=e(ah),s=(Bt(r??null)?.value??{})[t]??[];return new Map(s.map(a=>[a.mintId,a]))}),Xt=ch;function Xu(){let e=Ee(gt),t=Ee(Un),r=Ee(Yt),n=Ee(Xt);return{isLoading:t,hasNextPage:r,fungibleTokens:e,visibilityOverrides:n}}i(Xu,"useOwnedFungibles");u();l();u();l();var Ju=F(G());var uh=i(({wallets:e,encodedCaip19:t,isSplCompressed:r=!1})=>{let n=Y();return(0,Ju.useCallback)(()=>void n.invalidateQueries({queryKey:tt.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:r})}),[n,e,t,r])},"useInvalidateFungibleTokensBalance"),lh=uh;u();l();u();l();function dh(e){let t={message:"Failed to parse token details response"};if(e instanceof ut)try{t.zodIssuesJson=JSON.stringify(e.issues.map(r=>({path:r.path.join("."),message:r.message,code:r.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}i(dh,"zodErrorToBreadcrumbData");var Zu=dh;function _u(e){return e.resourceType===ue.nativeToken?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}i(_u,"getUrlPathForDecodedCaip19");function fh(e){return _u(Qe(e))}i(fh,"getUrlPathForEncodedCaip19");function mh(e){let t=new URLSearchParams,r="encodedCaip19"in e?fh(e.encodedCaip19):_u(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[r,{params:t}]}i(mh,"getUrlParams");async function ui(e){let t=await re.api().noBearer().timeout(x({seconds:10})).get(...mh(e)).then(r=>{if(Le(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText||`Status: ${r.status}`,{cause:r.data?.code})}).catch(r=>{throw B.addBreadcrumb(K.Tokens,"getTokenDetails",ee.Error,{message:r.message,cause:r.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:ne(e.decodedCaip19)}}),B.captureError(r,K.Tokens),r});try{return si.parse(t)}catch(r){console.error(r);let n=Zu(r);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?n.caip19=e.encodedCaip19:"decodedCaip19"in e&&(n.caip19=ne(e.decodedCaip19)),B.addBreadcrumb(K.Tokens,"getTokenDetails.ParseError",ee.Error,n),r}}i(ui,"getTokenDetails");u();l();function el({tokens:e}){return At({tokens:e}).catch(t=>{throw B.addBreadcrumb(K.Tokens,"getTokenPrices",ee.Error,{message:t.message,cause:t.cause,tokens:e.map(ne).join(",")}),B.captureError(t,K.Tokens),t})}i(el,"getTokenPrices");u();l();u();l();var ph=D(e=>{let t=e(Xt);return e(gt).filter(n=>rn(t??new Map,{key:n.legacyKey??"",spamStatus:n.spamStatus}))}),tl=ph;function rl(){let e=Ee(tl),t=Ee(Un),r=Ee(Yt),n=Ee(Xt);return{isLoading:t,hasNextPage:r,fungibleTokens:e,visibilityOverrides:n}}i(rl,"useOwnedVisibleFungibles");u();l();var Pr=F(G());function hh({caip19:e,includePrice:t}){let r=(0,Pr.useMemo)(()=>typeof e=="string"?e:ne(e),[e]),n=Ee(gt),o=(0,Pr.useMemo)(()=>{let c=n.find(f=>f.encodedCaip19===r);return c?{chainName:c.chainName,encodedCaip19:r,decodedCaip19:c.decodedCaip19,type:c.type,categories:[],price:c.price,symbol:c.symbol??"",name:c.name??"",decimals:c.decimals,legacyKey:c.legacyKey??r,spamStatus:c.spamStatus??"NOT_VERIFIED",logoUri:c.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,createdDate:null,...c.extraMetadata},createdDate:null}:null},[r,t]),s=R({refetchInterval:x({seconds:t?5:30}),queryKey:tt.tokenDetails({caip19:r,includePrice:t}),queryFn:i(async()=>{let c=await ui(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t});return ku.parse(c)},"queryFn"),...o&&{placeholderData:o}}),a=cr(ht);return(0,Pr.useEffect)(()=>{let c=s.data;c&&!s.isPlaceholderData&&t&&c.price&&a(f=>{let d=c.encodedCaip19,m=c.price;return kn(f,{key:d,newPriceData:m})})},[s.data,s.isPlaceholderData,a,t]),s}i(hh,"useTokenDetails");var li=hh;u();l();var mi=F(G());u();l();var di=new H(0),fi=i(({chainAddress:e,type:t,balance:r,decimals:n,recipient:o,gasEstimation:s,clampToZero:a=!0})=>{let{data:c,isPending:f}=Yo(e);if(!t||!r)return di;let d=new H(r).multipliedBy(tr(n));if(!$e(t))return d;if(!s)return;let m=new H(0);if(kt(s))m=d.minus(new H(s.value));else if($r(s)){let{gasLimit:p,maxFeePerGas:h,l1Fee:T=new H(0)}=s,b=p.times(h).plus(T);m=d.minus(b)}else if(Ft(s)){if(!e||f)return;let p=e.addressType,h=c?.safeToSendUtxos??[],T=Ns(s.btcPerKilobyte),b=o&&Ki.safeParse(o).success?o:"bc1p",v=[{value:h.reduce((j,$)=>j.plus(new H($.value)),new H(0)).toNumber(),address:b}],k=Ks(p,h,v,T.toNumber(),[]);if(k.type==="error")m=new H(k.maxAmount).integerValue(H.ROUND_DOWN);else{let{inputs:j,fee:$}=k;m=j.reduce((ae,Ae)=>ae.plus(new H(Ae.value)),new H(0)).minus($).integerValue(H.ROUND_DOWN)}}else if(Wr(s))m=d.minus(s.gasBudget);else return De(s);return m.isGreaterThan(di)?m:a?di:m},"useTransferFungibleMaxAmount");var gh=i(({networkID:e,addressType:t,gasEstimation:r,transactionValue:n=new H(0),recipient:o})=>{let{data:s,isLoading:a,isError:c}=Ln({networkID:e,addressType:t}),f=ia.get(e).nativeFungibleTokenType,d="unknown",m="",p=(0,mi.useMemo)(()=>{let T=s?.queriedWalletBalances[0]?.address;if(!T)return;let b=qi(e,T);return{networkID:e,address:T,addressType:b}},[s?.queriedWalletBalances,e]),h=fi({chainAddress:p,type:f,balance:s?.totalQuantityString?new H(s?.totalQuantityString):void 0,decimals:s?.decimals??0,recipient:o,gasEstimation:r,clampToZero:!1});return!c&&s&&h&&(h.gte(n)?d="sufficient":d="insufficient",m=s?.symbol||""),(0,mi.useMemo)(()=>({hasSufficientFunds:d,nativeTokenSymbol:m,isLoading:a,isError:c}),[d,m,a,c])},"useHasSufficientFunds");u();l();var sl=F(G());u();l();var pi=F(G());u();l();var nl=i(({chainAddresses:e=[]})=>{let t=be.tokensErrorCount(e);return R({queryKey:t,queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0})},"useTokensErrorCount");u();l();var yh=i(({errors:e})=>e,"select");function ol({chainAddresses:e,queryOptions:t}){return ua({select:yh,chainAddresses:e,queryOptions:t})}i(ol,"useTokensPartialErrors");var il=3,Th=1,hi=i(({networkID:e,chainAddresses:t=[]})=>{let{data:r=[]}=ol({chainAddresses:t}),{data:n=0}=nl({chainAddresses:t}),o=n>=il,{data:s=0}=xo(),a=s>=il,c=r.length===Th&&r.some(m=>m.code==="TokensTrimmed"),{t:f}=Ue(),d=(0,pi.useMemo)(()=>{if(o)return f("partialErrorGeneric");let m=r.filter(h=>e?h.details.chainId===e:!0),p=m.length+(a?1:0);return p?p>1?f("partialErrorGeneric"):a?f("partialErrorTokenPrices"):c?f("partialErrorTokensTrimmed"):e?f("partialErrorTokenDetail"):f("partialErrorBalanceChainName",{chainName:C.getChainName(m[0].details.chainId)}):""},[o,r,a,e,c,f]);return(0,pi.useMemo)(()=>({partialErrorMessage:d,shouldShowPartialError:d!==""}),[d])},"usePartialErrorBanner");function bh(e){let{onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o,account:s}=e,{shouldShowPartialError:a,partialErrorMessage:c}=hi({chainAddresses:s?.addresses});return{ctaActions:Eh({onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o}),shouldShowPartialError:a,partialErrorMessage:c}}i(bh,"useHomeViewState");function Eh(e){let{t}=Ue(),r=Xi();return(0,sl.useMemo)(()=>{let o=[];return o.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),r?o.push({text:t("commandTrade"),type:"trade",onClick:e.onTappingSwap}):o.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),o.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),o.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),o.sort((s,a)=>(no.get(s.type)??100)-(no.get(a.type)??100)),{primary:o,more:[]}},[t,r,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}i(Eh,"useHomeCTABarActions");u();l();var al=F(G());var wh=i(({networkID:e,unsignedTransaction:t,pendingActivityRows:r,accountIdentifier:n,accountSigner:o,storage:s,includeCallPayload:a})=>({accountSigner:o,accountIdentifier:n,networkID:e,unsignedTransaction:t,...a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:Rt.Swap,display:{summary:r}},storage:s}),"buildArgs"),Ah=i(async({t:e,fungible:t,unsignedUnwrapTx:r,gasEstimation:n,storage:o,accountMetadata:s,accountSigner:a})=>{if(!r)throw new Error("Unsigned unwrap transaction is required");if(!n)throw new Error("Gas estimation is required");let{chain:c,balance:f}=t.data;if(!C.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let d=c.id,m={topRight:{text:`+${f} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${f} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},p=Ii.parse({type:Ui.eip1559,chainId:C.getEVMNetworkIDValue(d),gas:`0x${n.gasLimit.toString(16)}`,maxFeePerGas:`0x${n.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${n.maxPriorityFeePerGas.toString(16)}`,...r}),h=wh({storage:o,accountSigner:a,pendingActivityRows:m,includeCallPayload:!1,networkID:d,unsignedTransaction:p,accountIdentifier:s.accountIdentifier});return _r(h)},"executeUnwrapTransaction"),vh=i(()=>{let{data:e}=Be();return(0,al.useMemo)(()=>{let r=e?.type,n=e?.name??"",o=e?.identifier??"";return{accountName:n,accountType:r,accountIdentifier:o}},[e])},"useAccountMetadata"),Ch=i(e=>{let t=Te(),r=Y(),{t:n}=Ue(),o=vh(),s=We();return qe({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:f}){return await Ah({t:n,fungible:a,unsignedUnwrapTx:c,gasEstimation:f,accountMetadata:o,storage:t,accountSigner:s})},async onSuccess(){await r.invalidateQueries({queryKey:be.tokens(e)})}})},"useUnwrapTransaction");u();l();var cl=F(G());function Sh(e){let t=Ie(),r=Y();return(0,cl.useCallback)(async n=>{let o=await cu(Ze.AccountIdToHiddenMints)??{version:2,value:{}},a=Bt(o)?.value??{},c=a[e]??[],f=new Map(c.map(m=>[m.mintId,m]));for(let{fungibleKey:m,...p}of n)if("isHidden"in p){let{isHidden:h}=p;t.capture(h?"hideFungibleToken":"unhideFungibleToken",{data:{fungibleKey:m}}),f.set(m,{mintId:m,status:h?or.Hidden:or.Visible})}else{let{visibility:h}=p;f.set(m,{mintId:m,status:h})}a[e]=Array.from(f.values()),await au(Ze.AccountIdToHiddenMints)({version:2,value:a}),await r.invalidateQueries({queryKey:be.hiddenMints(e)}),await r.invalidateQueries({predicate:i(m=>{let p=m.queryKey;return Array.isArray(p)&&p.length>=2&&typeof p[0]=="string"&&p[0].startsWith("fungible-tokens-")&&p[1]==="visibility-overrides"&&typeof p[2]=="object"&&p[2]!==null&&"accountId"in p[2]&&p[2].accountId===e},"predicate")})},[e,t,r])}i(Sh,"useSetVisibilityOverrides");u();l();u();l();var ul=F(G());var xh=i((e,t,r)=>{let n=Y(),{fungibles:o}=xt({keys:[e]}),s=o.length===1?o[0]:void 0;(0,ul.useEffect)(()=>{if(!s)return;let{type:a,data:c}=s,{balance:f,decimals:d,chain:m}=c,{id:p}=m,h=$e(a)===!0;if(!r||!f||h||f.isEqualTo(t))return;let T=be.transferFungibleLoggingContext(e),b={transactionId:r,decimals:d,chainId:p,isNativeToken:h,previousBalance:f,fungibleKey:e};n.setQueryData(T,b)},[r])},"useTransferFungibleLoggingContext");u();l();var dl=F(G());u();l();function ll(e,t,r){return de.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],zs)[0]}i(ll,"findAssociatedTokenAddress");var Nh=new nr("Unable to unwrap SOL. Wrapped SOL Token account does not exist."),Ph=new nr("Unable to unwrap SOL. Token account is not expected mint.");async function Mh(e,t){let r=await e.getAccountInfo(t);if(!r)throw Nh;let n=Xs.decode(r.data);return new de.PublicKey(n.mint)}i(Mh,"getMintOfATA");function Dh(e){if(e)return typeof e=="string"?new de.PublicKey(e):e}i(Dh,"ensurePublicKey");function Rh(){let{connection:e}=mr(),{data:t}=Be(),{solanaChainAddress:r,accountIdentifier:n}=(0,dl.useMemo)(()=>({solanaChainAddress:t?.addresses.find(Tt),accountIdentifier:t?.identifier??""}),[t]),o=Te(),s=We(),{t:a}=Ue();return qe({mutationFn:i(async c=>{if(!r)return Promise.reject("solanaChainAddress not loaded");try{let{networkID:f,address:d}=r,m=new de.PublicKey(d),p=Dh(c?.tokenAccount)??ll(m,to,rr);if((await Mh(e,p)).toBase58()!==to.toBase58())throw Ph;let T=cc(p,m,m,[],rr),b=new Bi.Transaction().add(T),w={ownerAddress:d,networkID:f,data:{signature:""},type:Rt.UnwrapSOL,display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},v=await It({accountIdentifier:n,accountSigner:s,connection:e,feePayer:new de.PublicKey(d),pendingTransactionInput:w,storage:o,transaction:b,useSubmissionService:!1});return{networkID:f,id:v}}catch(f){throw f instanceof Error&&B.captureError(f,K.Tokens),f}},"mutationFn")})}i(Rh,"useUnwrapSOL");u();l();var fl=x({minutes:1}),kh=i((e,t=!0)=>{let r=be.solanaBalance(e);return R({enabled:!!e&&t&&Tt(e),gcTime:fl,staleTime:fl,queryKey:r,async queryFn(){if(!e)throw new Error("No chain address provided");if(Tt(e))return Lt(e.networkID).getBalance(new de.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})},"useSolanaBalance");u();l();var ml=F(G());var Fh=i(e=>{let{data:t}=as();return(0,ml.useMemo)(()=>{if(!e||!t)return;let r=e.data.chain.id,n=t.explorers[r]??Wn.get(r).defaultExplorer,o,s;if($e(e.type))s="address",o=e.data.walletAddress;else switch(e.type){case L.SuiCoin:{s="token",o=e.data.contractAddress;break}case L.ERC20:{s="address",o=e.data.contractAddress;break}case L.SPL:case L.CompressedSPL:{s="address",o=e.data.mintAddress;break}case L.BRC20:return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let a=zn({networkID:r,endpoint:s,explorerType:n,param:o});return{explorerName:$n[n],explorerUrl:a}},[e,t])},"useFungibleExplorerUrl");u();l();var pl=F(G());var Lh=i(e=>{let t=Y();return(0,pl.useCallback)(()=>t.invalidateQueries({queryKey:be.tokens(e)}),[t,e])},"useInvalidateTokens");u();l();var hl=F(G());var Uh=i((e,t)=>(0,hl.useMemo)(()=>{if(e)if(Ft(e)){let r=xs(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:r.toString()})}}else return kt(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"spotWarning",rightSubtext:""}:void 0},[e,t]),"useNetworkFeeRow");u();l();var gl=F(G());var Ih=i(({caip19:e,fungibleCaip19:t,fungibleKeys:r,isSplCompressed:n})=>{let{fungibles:o,isLoadingTokens:s,refetch:a}=xt({keys:r}),{data:c,refetch:f,isLoading:d}=Fn({encodedCaip19:e,legacyKey:r?.[0]??null,isSplCompressed:n}),{data:m,isLoading:p}=li({caip19:e,includePrice:!0}),h=Hh(o,n),T=(0,gl.useMemo)(()=>{if(!h)return;if(!c)return h;let w=ir(c.totalQuantityString,c.decimals);return{...h,data:{...h.data,amount:c.totalQuantityString,balance:w,usd:c.price?.price?w.times(c.price.price).toNumber():void 0,usd_24h_change:c.price?.priceChange24h!==void 0?yl(w.times(c.price.price).toNumber(),c.price?.priceChange24h):void 0}}},[h,c]);return{derivedFungible:Bh({fungible:T,fungibleCaip19:t,tokenDetails:m,tokenBalance:c}),isLoading:s||p||d,refetchFungibleBalance:a,refetchTokenBalance:f}},"useFungibleData");function Bh({fungible:e,fungibleCaip19:t,tokenDetails:r,tokenBalance:n}){if(e)return e;if(!r)return;let o=fa(r),s="address"in t?Oh(t,o):Kh(t,o);if(s){if(n){n.extraMetadata?.compression?.compressed&&(s.type=L.CompressedSPL);let a=ir(n.totalQuantityString,n.decimals);s.data.balance=a,s.data.amount=n.totalQuantityString,s.data.usd=n.price?.price?a.times(n.price.price).toNumber():void 0,s.data.usd_24h_change=n.price?.priceChange24h!==void 0?yl(a.times(n.price.price).toNumber(),n.price?.priceChange24h):void 0,s.data.walletAddress=n.queriedWalletBalances.find(c=>c.quantity>0)?.address??""}return s}B.addBreadcrumb(K.Tokens,"deriveFungible",ee.Error,{fungibleCaip19:JSON.stringify(t),tokenDetails:JSON.stringify(r),tokenBalance:JSON.stringify(n)}),B.captureError(new Error(`Fungible type could not be derived from ${JSON.stringify(t)}`),K.Fungibles)}i(Bh,"deriveFungible");function Oh(e,t){let r=ro(e);if($e(r))throw new Error("Cannot create fake non-native fungible for native token");let n=t.address??e.address,o={amount:"0",balance:H(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:n,walletAddress:"",spamStatus:t.spamStatus};switch(r){case L.SPL:return{type:r,data:{...o,mintAddress:n,programId:"",splTokenAccountPubkey:""}};case L.CompressedSPL:return{type:r,data:{...o,mintAddress:n,programId:""}};case L.ERC20:case L.SuiCoin:return{type:r,data:{...o,contractAddress:n}};case L.BRC20:return{type:r,data:{...o,firstCreatedInscriptionId:n}};case L.HypercoreAsset:return;default:De(r)}}i(Oh,"createFakeNonNativeFungible");function Kh(e,t){let r=ro(e),n={amount:"0",balance:H(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};switch(e.slip44){case je.Solana:return{type:L.SolanaNative,data:n};case je.Bitcoin:return{type:L.BitcoinNative,data:n};case je.Ethereum:return{type:L.EthereumNative,data:n};case je.Base:return{type:L.BaseNative,data:n};case je.Monad:return{type:L.MonadNative,data:n};case je.Arbitrum:return{type:L.ArbitrumNative,data:n};case je.Hypercore:return{type:L.HypercoreNative,data:n};case je.Polygon:return{type:L.PolygonNative,data:n};case je.Sui:return{type:L.SuiNative,data:n};default:{let o=new Error("Missing native token implementation when creating fake a Fungible");throw De(e.slip44,o),o}}}i(Kh,"createFakeNativeFungible");var Hh=i((e,t)=>e?.length?[...e].sort((n,o)=>{if(t!==void 0){let s=n.type===L.CompressedSPL,a=o.type===L.CompressedSPL;if(s!==a)return t?s?-1:1:s?1:-1}return o.data.balance.minus(n.data.balance).toNumber()})[0]:void 0,"getSelectedFungible"),yl=i((e,t)=>{if(t===-100)return-1*e;let r=e/(1+t/100);return e-r},"calculatePriceDifference");u();l();u();l();var In;(function(e){e.AF="AF",e.AX="AX",e.AL="AL",e.DZ="DZ",e.AS="AS",e.AD="AD",e.AO="AO",e.AI="AI",e.AQ="AQ",e.AG="AG",e.AR="AR",e.AM="AM",e.AW="AW",e.AU="AU",e.AT="AT",e.AZ="AZ",e.BS="BS",e.BH="BH",e.BD="BD",e.BB="BB",e.BY="BY",e.BE="BE",e.BZ="BZ",e.BJ="BJ",e.BM="BM",e.BT="BT",e.BO="BO",e.BQ="BQ",e.BA="BA",e.BW="BW",e.BV="BV",e.BR="BR",e.IO="IO",e.BN="BN",e.BG="BG",e.BF="BF",e.BI="BI",e.KH="KH",e.CM="CM",e.CA="CA",e.CV="CV",e.KY="KY",e.CF="CF",e.TD="TD",e.CL="CL",e.CX="CX",e.CC="CC",e.CO="CO",e.KM="KM",e.CK="CK",e.CR="CR",e.CI="CI",e.HR="HR",e.CU="CU",e.CW="CW",e.CY="CY",e.CZ="CZ",e.CD="CD",e.DK="DK",e.DJ="DJ",e.DM="DM",e.DO="DO",e.EC="EC",e.EG="EG",e.SV="SV",e.GQ="GQ",e.ER="ER",e.EE="EE",e.SZ="SZ",e.ET="ET",e.FK="FK",e.FO="FO",e.FJ="FJ",e.FI="FI",e.FR="FR",e.GF="GF",e.PF="PF",e.TF="TF",e.GA="GA",e.GE="GE",e.DE="DE",e.GH="GH",e.GI="GI",e.GR="GR",e.GL="GL",e.GD="GD",e.GP="GP",e.GU="GU",e.GT="GT",e.GG="GG",e.GN="GN",e.GW="GW",e.GY="GY",e.HT="HT",e.HM="HM",e.VA="VA",e.HN="HN",e.HK="HK",e.HU="HU",e.IS="IS",e.IN="IN",e.ID="ID",e.IQ="IQ",e.IE="IE",e.IR="IR",e.IM="IM",e.IL="IL",e.IT="IT",e.JM="JM",e.JP="JP",e.JE="JE",e.JO="JO",e.KZ="KZ",e.KE="KE",e.KI="KI",e.XK="XK",e.KW="KW",e.KG="KG",e.LA="LA",e.LV="LV",e.LB="LB",e.LS="LS",e.LR="LR",e.LY="LY",e.LI="LI",e.LT="LT",e.LU="LU",e.MO="MO",e.MG="MG",e.MW="MW",e.MY="MY",e.MV="MV",e.ML="ML",e.MT="MT",e.MH="MH",e.MQ="MQ",e.MR="MR",e.MU="MU",e.YT="YT",e.MX="MX",e.FM="FM",e.MD="MD",e.MC="MC",e.MN="MN",e.ME="ME",e.MS="MS",e.MA="MA",e.MZ="MZ",e.MM="MM",e.NA="NA",e.NR="NR",e.NP="NP",e.NL="NL",e.NC="NC",e.NZ="NZ",e.NI="NI",e.NE="NE",e.NG="NG",e.NU="NU",e.NF="NF",e.KP="KP",e.MP="MP",e.NO="NO",e.OM="OM",e.PK="PK",e.PW="PW",e.PA="PA",e.PG="PG",e.PY="PY",e.CN="CN",e.PE="PE",e.PH="PH",e.PN="PN",e.PL="PL",e.PT="PT",e.PR="PR",e.QA="QA",e.CG="CG",e.GM="GM",e.RE="RE",e.RO="RO",e.RU="RU",e.RW="RW",e.BL="BL",e.SH="SH",e.KN="KN",e.LC="LC",e.MF="MF",e.PM="PM",e.VC="VC",e.WS="WS",e.SM="SM",e.ST="ST",e.SA="SA",e.SN="SN",e.RS="RS",e.SC="SC",e.SL="SL",e.SG="SG",e.SX="SX",e.SK="SK",e.SI="SI",e.SB="SB",e.SO="SO",e.ZA="ZA",e.GS="GS",e.KR="KR",e.SS="SS",e.ES="ES",e.LK="LK",e.PS="PS",e.SD="SD",e.SR="SR",e.SJ="SJ",e.SE="SE",e.CH="CH",e.SY="SY",e.TW="TW",e.TJ="TJ",e.TH="TH",e.MK="MK",e.TL="TL",e.TG="TG",e.TK="TK",e.TO="TO",e.TT="TT",e.TN="TN",e.TR="TR",e.TM="TM",e.TC="TC",e.TV="TV",e.UG="UG",e.UA="UA",e.AE="AE",e.GB="GB",e.TZ="TZ",e.UM="UM",e.US="US",e.UY="UY",e.UZ="UZ",e.VU="VU",e.VE="VE",e.VN="VN",e.VG="VG",e.VI="VI",e.WF="WF",e.EH="EH",e.YE="YE",e.ZM="ZM",e.ZW="ZW"})(In||(In={}));var le;(function(e){e.FAIL_SEVERE="FAIL_SEVERE",e.FAIL_HIGH="FAIL_HIGH",e.NO_ACTION="NO_ACTION",e.DATA_NOT_FOUND="DATA_NOT_FOUND"})(le||(le={}));var Tl=g.object({action:g.nativeEnum(le),address:Gi,expirationUnixtimeInSec:g.number().nullish().default(null)}),yi=g.object({addressScreenResults:g.array(Tl)}),bl=g.object({country:g.nativeEnum(In)}),Mr=class extends Error{static{i(this,"WalletScreenError")}constructor(t){super(t),this.name="WalletScreenError"}},gi;(function(e){e.BURN_COLLECTIBLE="BURN_COLLECTIBLE",e.SEND_COLLECTIBLE="SEND_COLLECTIBLE",e.SEND_FUNGIBLE="SEND_FUNGIBLE",e.STAKE_FUNGIBLE="STAKE_FUNGIBLE",e.SWAP_FUNGIBLE="SWAP_FUNGIBLE",e.INSTANT_SELL="INSTANT_SELL",e.PERPS_FUNDING="PERPS_FUNDING"})(gi||(gi={}));u();l();var xl=F(G());u();l();u();l();var El="@phantom/wallet-screening",wl=`${El}:wallet-screen-action`,Vh=`${El}:wallet-screen-geo`,Bn={walletScreenAction(e){return[wl,e]},walletGeo(){return[Vh]}};u();l();var Al=new Error("Failed to fetch wallet screen action.");async function vl(e){try{let t=await re.api().post("/wallet_screen/v1",e);if(!Le(t))throw Al;let r=t.data;return yi.parse(r)}catch{throw Al}}i(vl,"fetchWalletScreenAction");var Cl=x({days:7}),Sl=i(e=>{let t=e!==void 0&&C.isMainnetNetworkID(e.networkID),r=[];if(e!==void 0){let c=C.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;r=[{chainId:e.networkID,address:c,resourceType:ue.address}]}let n={addresses:r},o=Y(),s=Bn.walletScreenAction(n),a=[s[0]];return R({enabled:t,queryKey:s,gcTime:Cl,staleTime:Cl,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(Gh(o,a))return le.FAIL_SEVERE;let f=await vl(n);return jh(f)}})},"useWalletScreenAction"),Gh=i((e,t)=>{let r=e.getQueriesData({queryKey:t,exact:!1}),n=!1;for(let[o,s]of r){let a=s;if(a&&a===le.FAIL_SEVERE){n=!0;break}}return n},"findSevereInQueryData"),jh=i(e=>{let t=e.addressScreenResults;return t.some(r=>r.action===le.FAIL_SEVERE)?le.FAIL_SEVERE:t.some(r=>r.action===le.FAIL_HIGH)?le.FAIL_HIGH:t.some(r=>r.action===le.NO_ACTION)?le.NO_ACTION:le.DATA_NOT_FOUND},"getActionFromResponse");var Qh=i((e,t)=>{let r=Ie(),{data:n}=Sl(e);switch((0,xl.useEffect)(()=>{n&&e&&r.capture("walletScreened",{data:{walletScreen:{action:n.toString(),surface:t},chainId:C.getChainID(e.networkID),networkId:e.networkID}})},[n,e,t,r]),n){case le.FAIL_SEVERE:case le.FAIL_HIGH:throw new Mr(`Transaction disabled: ${t}`);case le.NO_ACTION:case le.DATA_NOT_FOUND:return}},"useThrowIfFailWalletScreen");u();l();u();l();u();l();var Nl=new Error("Failed to fetch wallet geo.");async function Pl(){try{let e=await re.api().get("/wallet_screen/v1/geo");if(!Le(e))throw Nl;let t=e.data;return bl.parse(t).country}catch{throw Nl}}i(Pl,"fetchWalletGeo");var Ml=x({hours:1}),qh=i(()=>{let e=Bn.walletGeo();return R({queryKey:e,staleTime:Ml,refetchInterval:Ml,queryFn:Pl})},"useWalletGeo");u();l();u();l();function ct(e){return Array.isArray?Array.isArray(e):Bl(e)==="[object Array]"}i(ct,"isArray");var Wh=1/0;function $h(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Wh?"-0":t}i($h,"baseToString");function zh(e){return e==null?"":$h(e)}i(zh,"toString");function nt(e){return typeof e=="string"}i(nt,"isString");function Ul(e){return typeof e=="number"}i(Ul,"isNumber");function Yh(e){return e===!0||e===!1||Xh(e)&&Bl(e)=="[object Boolean]"}i(Yh,"isBoolean");function Il(e){return typeof e=="object"}i(Il,"isObject");function Xh(e){return Il(e)&&e!==null}i(Xh,"isObjectLike");function Fe(e){return e!=null}i(Fe,"isDefined");function Ti(e){return!e.trim().length}i(Ti,"isBlank");function Bl(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}i(Bl,"getTag");var Jh="Incorrect 'index' type",Zh=i(e=>`Invalid value for key ${e}`,"LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY"),_h=i(e=>`Pattern length exceeds max of ${e}.`,"PATTERN_LENGTH_TOO_LARGE"),eg=i(e=>`Missing ${e} property in key`,"MISSING_KEY_PROPERTY"),tg=i(e=>`Property 'weight' in key '${e}' must be a positive integer`,"INVALID_KEY_WEIGHT_VALUE"),Dl=Object.prototype.hasOwnProperty,bi=class{static{i(this,"KeyStore")}constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let o=Ol(n);this._keys.push(o),this._keyMap[o.id]=o,r+=o.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Ol(e){let t=null,r=null,n=null,o=1,s=null;if(nt(e)||ct(e))n=e,t=Rl(e),r=Ei(e);else{if(!Dl.call(e,"name"))throw new Error(eg("name"));let a=e.name;if(n=a,Dl.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(tg(a));t=Rl(a),r=Ei(a),s=e.getFn}return{path:t,id:r,weight:o,src:n,getFn:s}}i(Ol,"createKey");function Rl(e){return ct(e)?e:e.split(".")}i(Rl,"createKeyPath");function Ei(e){return ct(e)?e.join("."):e}i(Ei,"createKeyId");function rg(e,t){let r=[],n=!1,o=i((s,a,c)=>{if(Fe(s))if(!a[c])r.push(s);else{let f=a[c],d=s[f];if(!Fe(d))return;if(c===a.length-1&&(nt(d)||Ul(d)||Yh(d)))r.push(zh(d));else if(ct(d)){n=!0;for(let m=0,p=d.length;m<p;m+=1)o(d[m],a,c+1)}else a.length&&o(d,a,c+1)}},"deepGet");return o(e,nt(t)?t.split("."):t,0),n?r:r[0]}i(rg,"get");var ng={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},og={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:i((e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,"sortFn")},ig={location:0,threshold:.6,distance:100},sg={useExtendedSearch:!1,getFn:rg,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},I={...og,...ng,...ig,...sg},ag=/[^ ]+/g;function cg(e=1,t=3){let r=new Map,n=Math.pow(10,t);return{get(o){let s=o.match(ag).length;if(r.has(s))return r.get(s);let a=1/Math.pow(s,.5*e),c=parseFloat(Math.round(a*n)/n);return r.set(s,c),c},clear(){r.clear()}}}i(cg,"norm");var Dr=class{static{i(this,"FuseIndex")}constructor({getFn:t=I.getFn,fieldNormWeight:r=I.fieldNormWeight}={}){this.norm=cg(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,nt(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){let r=this.size();nt(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Fe(t)||Ti(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((o,s)=>{let a=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Fe(a)){if(ct(a)){let c=[],f=[{nestedArrIndex:-1,value:a}];for(;f.length;){let{nestedArrIndex:d,value:m}=f.pop();if(Fe(m))if(nt(m)&&!Ti(m)){let p={v:m,i:d,n:this.norm.get(m)};c.push(p)}else ct(m)&&m.forEach((p,h)=>{f.push({nestedArrIndex:h,value:p})})}n.$[s]=c}else if(nt(a)&&!Ti(a)){let c={v:a,n:this.norm.get(a)};n.$[s]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function Kl(e,t,{getFn:r=I.getFn,fieldNormWeight:n=I.fieldNormWeight}={}){let o=new Dr({getFn:r,fieldNormWeight:n});return o.setKeys(e.map(Ol)),o.setSources(t),o.create(),o}i(Kl,"createIndex");function ug(e,{getFn:t=I.getFn,fieldNormWeight:r=I.fieldNormWeight}={}){let{keys:n,records:o}=e,s=new Dr({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(o),s}i(ug,"parseIndex");function On(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:o=I.distance,ignoreLocation:s=I.ignoreLocation}={}){let a=t/e.length;if(s)return a;let c=Math.abs(n-r);return o?a+c/o:c?1:a}i(On,"computeScore$1");function lg(e=[],t=I.minMatchCharLength){let r=[],n=-1,o=-1,s=0;for(let a=e.length;s<a;s+=1){let c=e[s];c&&n===-1?n=s:!c&&n!==-1&&(o=s-1,o-n+1>=t&&r.push([n,o]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}i(lg,"convertMaskToIndices");var Nt=32;function dg(e,t,r,{location:n=I.location,distance:o=I.distance,threshold:s=I.threshold,findAllMatches:a=I.findAllMatches,minMatchCharLength:c=I.minMatchCharLength,includeMatches:f=I.includeMatches,ignoreLocation:d=I.ignoreLocation}={}){if(t.length>Nt)throw new Error(_h(Nt));let m=t.length,p=e.length,h=Math.max(0,Math.min(n,p)),T=s,b=h,w=c>1||f,v=w?Array(p):[],k;for(;(k=e.indexOf(t,b))>-1;){let _=On(t,{currentLocation:k,expectedLocation:h,distance:o,ignoreLocation:d});if(T=Math.min(_,T),b=k+m,w){let Se=0;for(;Se<m;)v[k+Se]=1,Se+=1}}b=-1;let j=[],$=1,se=m+p,ae=1<<m-1;for(let _=0;_<m;_+=1){let Se=0,xe=se;for(;Se<xe;)On(t,{errors:_,currentLocation:h+xe,expectedLocation:h,distance:o,ignoreLocation:d})<=T?Se=xe:se=xe,xe=Math.floor((se-Se)/2+Se);se=xe;let Me=Math.max(1,h-xe+1),A=a?p:Math.min(h+xe,p)+m,E=Array(A+2);E[A+1]=(1<<_)-1;for(let S=A;S>=Me;S-=1){let P=S-1,M=r[e.charAt(P)];if(w&&(v[P]=+!!M),E[S]=(E[S+1]<<1|1)&M,_&&(E[S]|=(j[S+1]|j[S])<<1|1|j[S+1]),E[S]&ae&&($=On(t,{errors:_,currentLocation:P,expectedLocation:h,distance:o,ignoreLocation:d}),$<=T)){if(T=$,b=P,b<=h)break;Me=Math.max(1,2*h-b)}}if(On(t,{errors:_+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:d})>T)break;j=E}let Ae={isMatch:b>=0,score:Math.max(.001,$)};if(w){let _=lg(v,c);_.length?f&&(Ae.indices=_):Ae.isMatch=!1}return Ae}i(dg,"search");function fg(e){let t={};for(let r=0,n=e.length;r<n;r+=1){let o=e.charAt(r);t[o]=(t[o]||0)|1<<n-r-1}return t}i(fg,"createPatternAlphabet");var Kn=class{static{i(this,"BitapSearch")}constructor(t,{location:r=I.location,threshold:n=I.threshold,distance:o=I.distance,includeMatches:s=I.includeMatches,findAllMatches:a=I.findAllMatches,minMatchCharLength:c=I.minMatchCharLength,isCaseSensitive:f=I.isCaseSensitive,ignoreLocation:d=I.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:d},this.pattern=f?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let m=i((h,T)=>{this.chunks.push({pattern:h,alphabet:fg(h),startIndex:T})},"addChunk"),p=this.pattern.length;if(p>Nt){let h=0,T=p%Nt,b=p-T;for(;h<b;)m(this.pattern.substr(h,Nt),h),h+=Nt;if(T){let w=p-Nt;m(this.pattern.substr(w),w)}}else m(this.pattern,0)}searchIn(t){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let b={isMatch:!0,score:0};return n&&(b.indices=[[0,t.length-1]]),b}let{location:o,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,ignoreLocation:d}=this.options,m=[],p=0,h=!1;this.chunks.forEach(({pattern:b,alphabet:w,startIndex:v})=>{let{isMatch:k,score:j,indices:$}=dg(t,b,w,{location:o+v,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,includeMatches:n,ignoreLocation:d});k&&(h=!0),p+=j,k&&$&&(m=[...m,...$])});let T={isMatch:h,score:h?p/this.chunks.length:1};return h&&n&&(T.indices=m),T}},ot=class{static{i(this,"BaseMatch")}constructor(t){this.pattern=t}static isMultiMatch(t){return kl(t,this.multiRegex)}static isSingleMatch(t){return kl(t,this.singleRegex)}search(){}};function kl(e,t){let r=e.match(t);return r?r[1]:null}i(kl,"getMatch");var wi=class extends ot{static{i(this,"ExactMatch")}constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ai=class extends ot{static{i(this,"InverseExactMatch")}constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},vi=class extends ot{static{i(this,"PrefixExactMatch")}constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ci=class extends ot{static{i(this,"InversePrefixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Si=class extends ot{static{i(this,"SuffixExactMatch")}constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},xi=class extends ot{static{i(this,"InverseSuffixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Hn=class extends ot{static{i(this,"FuzzyMatch")}constructor(t,{location:r=I.location,threshold:n=I.threshold,distance:o=I.distance,includeMatches:s=I.includeMatches,findAllMatches:a=I.findAllMatches,minMatchCharLength:c=I.minMatchCharLength,isCaseSensitive:f=I.isCaseSensitive,ignoreLocation:d=I.ignoreLocation}={}){super(t),this._bitapSearch=new Kn(t,{location:r,threshold:n,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},Vn=class extends ot{static{i(this,"IncludeMatch")}constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n,o=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,o.push([n,r-1]);let a=!!o.length;return{isMatch:a,score:a?0:1,indices:o}}},Ni=[wi,Vn,vi,Ci,xi,Si,Ai,Hn],Fl=Ni.length,mg=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,pg="|";function hg(e,t={}){return e.split(pg).map(r=>{let n=r.trim().split(mg).filter(s=>s&&!!s.trim()),o=[];for(let s=0,a=n.length;s<a;s+=1){let c=n[s],f=!1,d=-1;for(;!f&&++d<Fl;){let m=Ni[d],p=m.isMultiMatch(c);p&&(o.push(new m(p,t)),f=!0)}if(!f)for(d=-1;++d<Fl;){let m=Ni[d],p=m.isSingleMatch(c);if(p){o.push(new m(p,t));break}}}return o})}i(hg,"parseQuery");var gg=new Set([Hn.type,Vn.type]),Pi=class{static{i(this,"ExtendedSearch")}constructor(t,{isCaseSensitive:r=I.isCaseSensitive,includeMatches:n=I.includeMatches,minMatchCharLength:o=I.minMatchCharLength,ignoreLocation:s=I.ignoreLocation,findAllMatches:a=I.findAllMatches,location:c=I.location,threshold:f=I.threshold,distance:d=I.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:o,findAllMatches:a,ignoreLocation:s,location:c,threshold:f,distance:d},this.pattern=r?t:t.toLowerCase(),this.query=hg(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let s=0,a=[],c=0;for(let f=0,d=r.length;f<d;f+=1){let m=r[f];a.length=0,s=0;for(let p=0,h=m.length;p<h;p+=1){let T=m[p],{isMatch:b,indices:w,score:v}=T.search(t);if(b){if(s+=1,c+=v,n){let k=T.constructor.type;gg.has(k)?a=[...a,...w]:a.push(w)}}else{c=0,s=0,a.length=0;break}}if(s){let p={isMatch:!0,score:c/s};return n&&(p.indices=a),p}}return{isMatch:!1,score:1}}},Mi=[];function yg(...e){Mi.push(...e)}i(yg,"register");function Di(e,t){for(let r=0,n=Mi.length;r<n;r+=1){let o=Mi[r];if(o.condition(e,t))return new o(e,t)}return new Kn(e,t)}i(Di,"createSearcher");var Gn={AND:"$and",OR:"$or"},Ri={PATH:"$path",PATTERN:"$val"},ki=i(e=>!!(e[Gn.AND]||e[Gn.OR]),"isExpression"),Tg=i(e=>!!e[Ri.PATH],"isPath"),bg=i(e=>!ct(e)&&Il(e)&&!ki(e),"isLeaf"),Ll=i(e=>({[Gn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))}),"convertToExplicit");function Hl(e,t,{auto:r=!0}={}){let n=i(o=>{let s=Object.keys(o),a=Tg(o);if(!a&&s.length>1&&!ki(o))return n(Ll(o));if(bg(o)){let f=a?o[Ri.PATH]:s[0],d=a?o[Ri.PATTERN]:o[f];if(!nt(d))throw new Error(Zh(f));let m={keyId:Ei(f),pattern:d};return r&&(m.searcher=Di(d,t)),m}let c={children:[],operator:s[0]};return s.forEach(f=>{let d=o[f];ct(d)&&d.forEach(m=>{c.children.push(n(m))})}),c},"next");return ki(e)||(e=Ll(e)),n(e)}i(Hl,"parse");function Eg(e,{ignoreFieldNorm:t=I.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:o,norm:s,score:a})=>{let c=o?o.weight:null;n*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(t?1:s))}),r.score=n})}i(Eg,"computeScore");function wg(e,t){let r=e.matches;t.matches=[],Fe(r)&&r.forEach(n=>{if(!Fe(n.indices)||!n.indices.length)return;let{indices:o,value:s}=n,a={indices:o,value:s};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),t.matches.push(a)})}i(wg,"transformMatches");function Ag(e,t){t.score=e.score}i(Ag,"transformScore");function vg(e,t,{includeMatches:r=I.includeMatches,includeScore:n=I.includeScore}={}){let o=[];return r&&o.push(wg),n&&o.push(Ag),e.map(s=>{let{idx:a}=s,c={item:t[a],refIndex:a};return o.length&&o.forEach(f=>{f(s,c)}),c})}i(vg,"format");var Pt=class{static{i(this,"Fuse")}constructor(t,r={},n){this.options={...I,...r},this.options.useExtendedSearch,this._keyStore=new bi(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Dr))throw new Error(Jh);this._myIndex=r||Kl(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Fe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let r=[];for(let n=0,o=this._docs.length;n<o;n+=1){let s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,o-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){let{includeMatches:n,includeScore:o,shouldSort:s,sortFn:a,ignoreFieldNorm:c}=this.options,f=nt(t)?nt(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Eg(f,{ignoreFieldNorm:c}),s&&f.sort(a),Ul(r)&&r>-1&&(f=f.slice(0,r)),vg(f,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(t){let r=Di(t,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:s,i:a,n:c})=>{if(!Fe(s))return;let{isMatch:f,score:d,indices:m}=r.searchIn(s);f&&o.push({item:s,idx:a,matches:[{score:d,value:s,norm:c,indices:m}]})}),o}_searchLogical(t){let r=Hl(t,this.options),n=i((c,f,d)=>{if(!c.children){let{keyId:p,searcher:h}=c,T=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(f,p),searcher:h});return T&&T.length?[{idx:d,item:f,matches:T}]:[]}let m=[];for(let p=0,h=c.children.length;p<h;p+=1){let T=c.children[p],b=n(T,f,d);if(b.length)m.push(...b);else if(c.operator===Gn.AND)return[]}return m},"evaluate"),o=this._myIndex.records,s={},a=[];return o.forEach(({$:c,i:f})=>{if(Fe(c)){let d=n(r,c,f);d.length&&(s[f]||(s[f]={idx:f,item:c,matches:[]},a.push(s[f])),d.forEach(({matches:m})=>{s[f].matches.push(...m)}))}}),a}_searchObjectList(t){let r=Di(t,this.options),{keys:n,records:o}=this._myIndex,s=[];return o.forEach(({$:a,i:c})=>{if(!Fe(a))return;let f=[];n.forEach((d,m)=>{f.push(...this._findMatches({key:d,value:a[m],searcher:r}))}),f.length&&s.push({idx:c,item:a,matches:f})}),s}_findMatches({key:t,value:r,searcher:n}){if(!Fe(r))return[];let o=[];if(ct(r))r.forEach(({v:s,i:a,n:c})=>{if(!Fe(s))return;let{isMatch:f,score:d,indices:m}=n.searchIn(s);f&&o.push({score:d,key:t,value:s,idx:a,norm:c,indices:m})});else{let{v:s,n:a}=r,{isMatch:c,score:f,indices:d}=n.searchIn(s);c&&o.push({score:f,key:t,value:s,norm:a,indices:d})}return o}};Pt.version="7.0.0";Pt.createIndex=Kl;Pt.parseIndex=ug;Pt.config=I;Pt.parseQuery=Hl;yg(Pi);export{st as a,Ta as b,ba as c,io as d,Ea as e,td as f,cc as g,D as h,Pa as i,Qy as j,Ee as k,cr as l,qy as m,qt as n,yu as o,et as p,pd as q,Va as r,At as s,So as t,bo as u,Eo as v,vt as w,Ud as x,dn as y,Ja as z,Za as A,$d as B,oc as C,Ct as D,wm as E,Mo as F,Do as G,wf as H,vm as I,zo as J,Af as K,fr as L,bc as M,mr as N,Cm as O,vf as P,pr as Q,tu as R,xm as S,Pm as T,An as U,Yo as V,Um as W,Wo as X,Xc as Y,Im as Z,Bm as _,Om as $,hm as aa,Hm as ba,Vm as ca,Gm as da,bm as ea,jm as fa,qm as ga,Wm as ha,Ze as ia,uu as ja,Jo as ka,xt as la,xh as ma,fi as na,Rh as oa,Xm as pa,kh as qa,Fh as ra,Jm as sa,tt as ta,lh as ua,Eu as va,PR as wa,Au as xa,gk as ya,xp as za,yF as Aa,Ge as Ba,xn as Ca,Ou as Da,Ku as Ea,Nn as Fa,zt as Ga,rt as Ha,ju as Ia,mt as Ja,Up as Ka,ht as La,Yt as Ma,gt as Na,Fn as Oa,oh as Pa,el as Qa,Un as Ra,ah as Sa,Xt as Ta,Xu as Ua,tl as Va,rl as Wa,li as Xa,gh as Ya,hi as Za,bh as _a,Lh as $a,Uh as ab,Ch as bb,Ih as cb,Sh as db,Pt as eb,Mr as fb,gi as gb,wl as hb,Qh as ib,qh as jb};
//# sourceMappingURL=chunk-5RCV3KPE.js.map
