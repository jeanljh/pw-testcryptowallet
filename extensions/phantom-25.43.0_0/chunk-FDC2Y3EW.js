import{i as H}from"./chunk-PRM4QCVC.js";import{a as T}from"./chunk-LYTSCHVN.js";import{a as e,g as I,i as l,j as y,n as g}from"./chunk-NSVULBS3.js";l();g();var J=I(T());function et(t,n){var r=(0,J.createContext)(n);return y.NODE_ENV!=="production"&&(r.displayName=t),r}e(et,"createNamedContext");l();g();var x;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(x||(x={}));var B={type:"xstate.init"};function K(t){return t===void 0?[]:[].concat(t)}e(K,"e");function G(t){return{type:"xstate.assign",assignment:t}}e(G,"r");function L(t,n){return typeof(t=typeof t=="string"&&n&&n[t]?n[t]:t)=="string"?{type:t}:typeof t=="function"?{type:t.name,exec:t}:t}e(L,"i");function w(t){return function(n){return t===n}}e(w,"o");function X(t){return typeof t=="string"?{type:t}:t}e(X,"a");function Q(t,n){return{value:t,context:n,actions:[],changed:!1,matches:w(t)}}e(Q,"u");function z(t,n){n===void 0&&(n={});var r={config:t,_options:n,initialState:{value:t.initial,actions:K(t.states[t.initial].entry).map(function(o){return L(o,n.actions)}),context:t.context,matches:w(t.initial)},transition:e(function(o,a){var u,d,s=typeof o=="string"?{value:o,context:t.context}:o,m=s.value,S=s.context,h=X(a),v=t.states[m];if(v.on){var p=K(v.on[h.type]),M=e(function(i){if(i===void 0)return{value:Q(m,S)};var b=typeof i=="string"?{target:i}:i,N=b.target,C=N===void 0?m:N,q=b.actions,Z=q===void 0?[]:q,A=b.cond,O=S;if((A===void 0?function(){return!0}:A)(S,h)){var U=t.states[C],D=!1,F=[].concat(v.exit,Z,U.entry).filter(function(f){return f}).map(function(f){return L(f,r._options.actions)}).filter(function(f){if(f.type==="xstate.assign"){D=!0;var V=Object.assign({},O);return typeof f.assignment=="function"?V=f.assignment(O,h):Object.keys(f.assignment).forEach(function(_){V[_]=typeof f.assignment[_]=="function"?f.assignment[_](O,h):f.assignment[_]}),O=V,!1}return!0});return{value:{value:C,context:O,actions:F,changed:C!==m||F.length>0||D,matches:w(C)}}}},"x");try{for(var R=function(i){var b=typeof Symbol=="function"&&i[Symbol.iterator],N=0;return b?b.call(i):{next:e(function(){return i&&N>=i.length&&(i=void 0),{value:i&&i[N++],done:!i}},"next")}}(p),E=R.next();!E.done;E=R.next()){var k=M(E.value);if(typeof k=="object")return k.value}}catch(i){u={error:i}}finally{try{E&&!E.done&&(d=R.return)&&d.call(R)}finally{if(u)throw u.error}}}return Q(m,S)},"transition")};return r}e(z,"c");var W=e(function(t,n){return t.actions.forEach(function(r){var o=r.exec;return o&&o(t.context,n)})},"s");function P(t){var n=t.initialState,r=x.NotStarted,o=new Set,a={_machine:t,send:e(function(u){r===x.Running&&(n=t.transition(n,u),W(n,X(u)),o.forEach(function(d){return d(n)}))},"send"),subscribe:e(function(u){return o.add(u),u(n),{unsubscribe:e(function(){return o.delete(u)},"unsubscribe")}},"subscribe"),start:e(function(){return r=x.Running,W(n,B),a},"start"),stop:e(function(){return r=x.Stopped,o.clear(),a},"stop"),get state(){return n},get status(){return r}};return a}e(P,"f");l();g();var c=I(T());l();g();var Y=I(T());function $(t){var n=(0,Y.useRef)();return n.current||(n.current={v:t()}),n.current.v}e($,"useConstant");function j(){return j=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},j.apply(this,arguments)}e(j,"_extends");var tt=e(function(n){var r;return n.subscribe(function(o){r=o}).unsubscribe(),r},"getServiceState");function xt(t,n,r){var o=(0,c.useRef)(t),a=$(function(){return P(o.current).start()}),u=(0,c.useRef)(null),d=(0,c.useState)(function(){return tt(a)}),s=d[0],m=d[1],S=(0,c.useCallback)(function(v){var p=H(v)?{type:v}:v,M=nt(n);a.send(j({},p,{lastEventType:u.current,refs:M})),u.current=p.type,y.NODE_ENV!=="production"&&r&&(console.group("Event Sent"),console.log("Event:",p),console.groupEnd())},[r]);(0,c.useEffect)(function(){return a.subscribe(e(function(p){p.changed&&m(p)},"setStateIfChanged")),function(){a.stop()}},[a]),(0,c.useEffect)(function(){y.NODE_ENV!=="production"&&r&&s.changed&&(console.group("State Updated"),console.log("State:",s),console.groupEnd())},[r,s]);var h=(0,c.useMemo)(function(){return j({},s,{matches:e(function(p){return p===s.value},"matches")})},[s.changed,s.context,s.value]);return[h,S,a]}e(xt,"useMachine");function nt(t){return Object.entries(t).reduce(function(n,r){var o=r[0],a=r[1];return n[o]=a.current,n},{})}e(nt,"unwrapRefs");function St(t,n){return $(function(){return z(t,n)})}e(St,"useCreateMachine");export{et as a,G as b,xt as c,St as d};
/*! Bundled license information:

@xstate/fsm/es/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=chunk-FDC2Y3EW.js.map
