import{f as h}from"./chunk-LYTSCHVN.js";import{a as s,g as p,i,n as c}from"./chunk-NSVULBS3.js";i();c();var n={},w=s(()=>{let t=globalThis.chrome?.storage?.local,r=globalThis.window?.localStorage;return t||r},"getLocalStorage"),u=s(async()=>{if(typeof document>"u")return!1;let t=document.createElement("div");t.style.display="none",document.body.appendChild(t);let r=getComputedStyle(t).getPropertyValue("--arc-palette-title");return document.body.removeChild(t),await w().set({isArcBrowser:!!r}),!!r},"detectArcBrowser"),f=s(async()=>(await w().get("isArcBrowser"))?.isArcBrowser,"isArcBrowser"),v=s(async()=>{let t=await navigator.userAgentData?.getHighEntropyValues(["platform","platformVersion","brands"]);if(!t)return;n={...await E(t.brands),platform:t.platform,platformVersion:t.platformVersion}},"parseUserAgentData"),y=s(async t=>{if(t.includes("Chrome/"))t.includes("Edg/")?(n.name="Microsoft Edge",n.version=t.split("Edg/")[1].split(" ")[0]):t.includes("OPR/")?(n.name="Opera",n.version=t.split("OPR/")[1].split(" ")[0]):(navigator.brave?.isBrave()?n.name="Brave":n.name="Chrome",n.version=t.split("Chrome/")[1].split(" ")[0]);else if(t.includes("Firefox/"))n.name="Firefox",n.version=t.split("Firefox/")[1].split(" ")[0];else if(t.includes("Safari/")&&!t.includes("Chrome/"))n.name="Safari",t.includes("Version/")?n.version=t.split("Version/")[1].split(" ")[0]:n.version=t.split("Safari/")[1].split(" ")[0];else{let r=/(?:Mozilla|Opera|AppleWebKit)\/[\d.]+\s+\(.*?\)\s+(?!Version)([^/]+)\/([^ ]+)/,e=t.match(r);e&&(n.name=e[1],n.version=e[2])}n.name?.match(/Chrome/)&&(n.name=await f()?"Arc":"Chrome")},"findNameAndVersion"),S=s(t=>{let r=[{name:"Windows",pattern:/Windows NT ([0-9._]+)/},{name:"Mac OS",pattern:/Mac OS X ([0-9._]+)/},{name:"iOS",pattern:/(?:iPhone|iPad|iPod).*?OS ([0-9._]+)/},{name:"Linux",pattern:/Linux/},{name:"Chrome OS",pattern:/CrOS/}];for(let e of r){let o=t.match(e.pattern);o&&(n.platform=e.name,n.platformVersion=o[1])}n.platform||(n.platform="Unknown",n.platformVersion="Unknown")},"findPlatformAndVersion"),b=s(async()=>{let t=navigator.userAgent;await y(t),S(t)},"parseUserAgentString"),E=s(async t=>{if(!t||!t.length)return;let r;for(let e of t)if(!(e.brand.includes("Not")||e.brand.includes("Chromium"))){r={name:e.brand,version:e.version};break}if(!r?.name){let e=t.find(o=>o.brand==="Chromium");e?r={name:await f()?"Arc":"Chromium",version:e.version}:r={name:t[0].brand,version:t[0].version}}return r},"parseBrands"),C=s(async()=>{try{await u()}catch{}await v(),n?.name||await b()},"detectBrowser"),B=s(()=>n,"getBrowserInfo");i();c();i();c();var g=p(h());var m=class t{static{s(this,"WindowLocalStorage")}static#r;static getInstance(){return this.#r||(this.#r=new t),this.#r}constructor(){}async get(r){try{let e=self.localStorage.getItem(r);if(e==null)return Promise.resolve(null);let o=JSON.parse(e);return Promise.resolve(o.expiry?o.value:o)}catch(e){let o=`[WindowLocalStorage.get] Error getting key (${r}): ${e}`;throw new Error(o)}}async getAll(r=[]){try{let e=r.reduce((o,a)=>{let l=self.localStorage.getItem(a);return l==null?o[a]=null:o[a]=JSON.parse(l),o},{});return Promise.resolve(e)}catch(e){let o=`[WindowLocalStorage.getAll] Error getting key(s) (${r}): ${e}`;throw new Error(o)}}async remove(r){try{let e;Array.isArray(r)?e=r:e=[r];for(let o of e)self.localStorage.removeItem(o);return Promise.resolve()}catch(e){let o=`[WindowLocalStorage.remove] Error removing key(s) (${r}): ${e}`;throw new Error(o)}}async set(r,e){try{return self.localStorage.setItem(r,JSON.stringify(e)),this.#e.emit("storageChanged",r),Promise.resolve()}catch(o){let a=`[WindowLocalStorage.set] Error setting key (${r}): ${o}`;throw new Error(a)}}async setAll(r){try{for(let[e,o]of Object.entries(r))self.localStorage.setItem(e,JSON.stringify(o));for(let e of Object.keys(r))this.#e.emit("storageChanged",e);return Promise.resolve()}catch(e){let a=`[WindowLocalStorage.setAll] Error setting keys (${Object.keys(r)}): ${e}`;throw new Error(a)}}async clear(){try{let r=[];for(let e in localStorage)r.push(e);self.localStorage.clear();for(let e of r)this.#e.emit("storageChanged",e);return Promise.resolve()}catch(r){let e=`[WindowLocalStorage.clear] Error clearing storage: ${r}`;throw new Error(e)}}#e=new g.default;subscribe(r){let e=s(o=>void r(o),"callbackWrapper");return this.#e.addListener("storageChanged",e),()=>{this.#e.removeListener("storageChanged",e)}}async update(r,e){try{await navigator.locks.request(`storage.${r}`,async o=>{let a=await this.get(r),l=await e(a);await this.set(r,l)})}catch(o){let a=`[WindowLocalStorage.update] Error updating key (${r}): ${o}`;throw new Error(a)}}};export{C as a,B as b,m as c};
//# sourceMappingURL=chunk-6XVVS35Q.js.map
