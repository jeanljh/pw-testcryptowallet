import{h as T,i as V,n as j,x as K,z as Y}from"./chunk-PPQ6BNOX.js";import{a as i,g as ht,i as d,l as ft,n as p}from"./chunk-NSVULBS3.js";d();p();d();p();d();p();var Z=null;function ut(e){Z=e}i(ut,"registerRequestAnonymousId");function tt(){return Z}i(tt,"getCachedAnonymousId");function et(e){let t=tt();if(t){let n=new Headers(e);return n.set("X-Phantom-AnonymousId",t),n}return e}i(et,"withAnonymousId");d();p();var W=null;function dt(e){W=e}i(dt,"registerFetchBearerToken");async function v(e){if(!W)throw new Error("No fetch bearer token function registered. Register one with registerFetchBearerToken().");return await W(e)}i(v,"getBearerToken");d();p();d();p();function nt(...e){let t=new AbortController;for(let n of e){let r=n instanceof AbortController?n.signal:n;if(r?.aborted)return t.abort(r.reason),t.signal;r?.addEventListener("abort",()=>{t.abort(r.reason)},{once:!0})}return t.signal}i(nt,"mergeSignals");var pt=2*60*1e3,lt=[];function rt(e,t){let{fetchTimeout:n,retryDelays:r,retryOnAuthTokenExpiration:s,onAuthRetry:o,...c}=t||{},a=t?.fetchTimeout??pt,u=t?.retryDelays??lt,h=0,l=0,f=c;return new Promise((y,m)=>{function I(){h++,l=Date.now();let L=!0,w=new AbortController,M=fetch(e,{...f,signal:nt(...c.signal?[c.signal,w.signal]:[w.signal])}),Q=setTimeout(()=>{w.abort(),L=!1,$(h)?b():m(new Error(`fetchWithTimeoutAndRetry(): Failed to get response from server due to timeout of ${a} ms, tried ${h} times.`))},a);M.then(A=>{clearTimeout(Q),L&&(A.status>=200&&A.status<300?y(A):$(h,A.status)?A.status===401&&s&&o?o(f).then(_=>{f=_,b()}).catch(_=>{m(_)}):b():y(A))}).catch(A=>{clearTimeout(Q),$(h)?b():m(A)})}i(I,"sendTimedRequest");function b(){let L=u[h-1],w=l+L;setTimeout(I,Math.max(w-Date.now(),0))}i(b,"retryRequest");function $(L,w){if(w===401&&s)return L<=u.length;let M=w?w>=400&&w<=499:!1;return L<=u.length&&!M}i($,"shouldRetry"),I()})}i(rt,"fetchWithTimeoutAndRetry");d();p();var C=i((e={},t={})=>{let n=new Headers(e),r=new Headers(t);for(let[s,o]of r.entries())o===void 0||o==="undefined"?n.delete(s):n.set(s,o);return n},"mergeHeaders");d();p();var k=ht(ft(),1);d();p();d();p();function ot(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}i(ot,"number");function G(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}i(G,"bytes");function st(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ot(e.outputLen),ot(e.blockLen)}i(st,"hash");function B(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}i(B,"exists");function it(e,t){G(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}i(it,"output");d();p();var gt=i(e=>e instanceof Uint8Array,"u8a");var D=i(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),x=i((e,t)=>e<<32-t|e>>>t,"rotr"),xt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xt)throw new Error("Non little-endian hardware is not supported");function mt(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}i(mt,"utf8ToBytes");function O(e){if(typeof e=="string"&&(e=mt(e)),!gt(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}i(O,"toBytes");var U=class{static{i(this,"Hash")}clone(){return this._cloneInto()}},re={}.toString;function ct(e){let t=i(r=>e().update(O(r)).digest(),"hashC"),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}i(ct,"wrapConstructor");var F=class extends U{static{i(this,"HMAC")}constructor(t,n){super(),this.finished=!1,this.destroyed=!1,st(t);let r=O(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let c=0;c<o.length;c++)o[c]^=54;this.iHash.update(o),this.oHash=t.create();for(let c=0;c<o.length;c++)o[c]^=106;this.oHash.update(o),o.fill(0)}update(t){return B(this),this.iHash.update(t),this}digestInto(t){B(this),G(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:c,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=c,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},X=i((e,t,n)=>new F(e,t).update(n).digest(),"hmac");X.create=(e,t)=>new F(e,t);d();p();d();p();function wt(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let s=BigInt(32),o=BigInt(4294967295),c=Number(n>>s&o),a=Number(n&o),u=r?4:0,h=r?0:4;e.setUint32(t+u,c,r),e.setUint32(t+h,a,r)}i(wt,"setBigUint64");var P=class extends U{static{i(this,"SHA2")}constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=D(this.buffer)}update(t){B(this);let{view:n,buffer:r,blockLen:s}=this;t=O(t);let o=t.length;for(let c=0;c<o;){let a=Math.min(s-this.pos,o-c);if(a===s){let u=D(t);for(;s<=o-c;c+=s)this.process(u,c);continue}r.set(t.subarray(c,c+a),this.pos),this.pos+=a,c+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){B(this),it(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:s,isLE:o}=this,{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(r,0),c=0);for(let f=c;f<s;f++)n[f]=0;wt(r,s-8,BigInt(this.length*8),o),this.process(r,0);let a=D(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=u/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<h;f++)a.setUint32(4*f,l[f],o)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:s,finished:o,destroyed:c,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=c,s%n&&t.buffer.set(r),t}};var yt=i((e,t,n)=>e&t^~e&n,"Chi"),bt=i((e,t,n)=>e&t^e&n^t&n,"Maj"),At=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),H=new Uint32Array(64),q=class extends P{static{i(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=E[0]|0,this.B=E[1]|0,this.C=E[2]|0,this.D=E[3]|0,this.E=E[4]|0,this.F=E[5]|0,this.G=E[6]|0,this.H=E[7]|0}get(){let{A:t,B:n,C:r,D:s,E:o,F:c,G:a,H:u}=this;return[t,n,r,s,o,c,a,u]}set(t,n,r,s,o,c,a,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=c|0,this.G=a|0,this.H=u|0}process(t,n){for(let f=0;f<16;f++,n+=4)H[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){let y=H[f-15],m=H[f-2],I=x(y,7)^x(y,18)^y>>>3,b=x(m,17)^x(m,19)^m>>>10;H[f]=b+H[f-7]+I+H[f-16]|0}let{A:r,B:s,C:o,D:c,E:a,F:u,G:h,H:l}=this;for(let f=0;f<64;f++){let y=x(a,6)^x(a,11)^x(a,25),m=l+y+yt(a,u,h)+At[f]+H[f]|0,b=(x(r,2)^x(r,13)^x(r,22))+bt(r,s,o)|0;l=h,h=u,u=a,a=c+m|0,c=o,o=s,s=r,r=m+b|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,c=c+this.D|0,a=a+this.E|0,u=u+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,o,c,a,u,h,l)}roundClean(){H.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var at=ct(()=>new q);var Et=[86,120,48,81,89,86,110,49,100,114,111,113,49,70,56,84,77,115,80,81,66,75,72,51,90,83,110,100,110,116,68,88,107,118,83,53,102,80,114,89,111,88,85,75,57,43,67,57,97,103,74,113,68,76,112,112,100,48,102,101,80,122,83,111,108,113,75,90,56,114,66,70,119,87,84,104,98,57,110,119,43,79,70,51,51,65,61,61],Ht=[87,67,49,81,97,71,70,117,100,71,57,116,81,88,86,48,97,70,82,118,97,50,86,117],Lt=[87,67,49,81,97,71,70,117,100,71,57,116,84,109,57,117,89,50,85,61];function Tt(e){let t=new URL(e);return t.pathname+t.search}i(Tt,"getPathAndQuery");function z(e,t){let n=Tt(e),r=JSON.stringify(Math.floor(Date.now()/1e3)),s=n+r,o=X(at,k.Buffer.from(String.fromCharCode(...Et)),k.Buffer.from(s)),c=new Headers(t);return c.set(k.Buffer.from(String.fromCharCode(...Ht),"base64").toString(),encodeURIComponent(k.Buffer.from(o).toString("base64"))),c.set(k.Buffer.from(String.fromCharCode(...Lt),"base64").toString(),r),c}i(z,"withAuthHeaders");var R=class extends Error{static{i(this,"RequestBuilderError")}constructor(t,n){super(t),this.response=n}response},Bt={"X-Phantom-Version":K,"X-Phantom-Platform":Y};function Ut(e){return e===new URL(T.Production).hostname||e===new URL(T.Staging).hostname||e===new URL(V.prod).hostname||e===new URL(V.staging).hostname?!0:e.endsWith(".phantom.app")}i(Ut,"isPhantomDomain");var S=i(async e=>{let t,n;try{n=await e.clone().blob()}catch{}try{t=await e.clone().json()}catch{}let{status:r,statusText:s}=e;return{blob:n,data:t,status:r,statusText:s}},"makeResponse"),N=class e{static{i(this,"RequestBuilder")}config;constructor(t={}){this.config={withClientAuth:!0,numRetries:0,delayBetweenEachRetryMs:0,timeoutMs:null,validateStatus:!1,headers:Bt,withApiEnvironment:"none",fetchBearerToken:void 0,...t}}fetch=i(async(t,n={})=>{try{if(typeof t=="function"){let h=j()===T.Production?"prod":"staging";t=t({apiEnv:h})}let r="";this.config.withApiEnvironment==="prod"?r=T.Production:this.config.withApiEnvironment==="staging"?r=T.Staging:this.config.withApiEnvironment==="default"?r=j():this.config.withApiEnvironment==="custom"&&this.config.customApiEnv&&(r=this.config.customApiEnv);let s=new URL(`${r}${t}`);n?.params&&(s.search=new URLSearchParams(n.params).toString()),n.headers=C(this.config.headers,n.headers),n.headers=et(n.headers),this.config.withClientAuth&&(n.headers=z(s.toString(),n.headers));let o={...n,onAuthRetry:i(async h=>{let l=await v({refresh:!0});if(l){let f=new Headers(h.headers);return f.set("authorization",`Bearer ${l}`),{...h,headers:f}}return h},"onAuthRetry")},c=this.config.validateStatus;if(n?.validateStatus!==void 0&&(c=n?.validateStatus),o.body&&typeof o.body!="string"){o.body=JSON.stringify(o.body);let h=new Headers(o.headers);h.has("Content-Type")||(h.set("Content-Type","application/json"),o.headers=h)}this.config.timeoutMs&&(o.fetchTimeout=this.config.timeoutMs),this.config.numRetries&&(o.retryDelays=Array(this.config.numRetries).fill(this.config.delayBetweenEachRetryMs));let a=this.config.fetchBearerToken;if(a===void 0){let h=this.config.withApiEnvironment!=="none";a=Ut(s.hostname)||h}if(a){let h=await v({skipAutoLogin:!0});h&&(o.retryOnAuthTokenExpiration=!0,o.headers=C(o.headers,{authorization:`Bearer ${h}`}))}let u=await rt(s.toString(),o);if(c&&!u.ok)throw new R(`Request failed with status code ${u.status}`,await S(u));return u}catch(r){throw r instanceof R?r:new R(r?.message,r?.response)}},"fetch");auth(t){return new e({...this.config,withClientAuth:t})}bearer(t){return typeof t=="string"&&t?this.headers({authorization:`Bearer ${t}`}):typeof t=="boolean"&&t?new e({...this.config,validateStatus:!0,fetchBearerToken:!0,numRetries:1}):this}noBearer(){return new e({...this.config,fetchBearerToken:!1})}headers(t,n){let r=n?.mergeHeaders===!1?t:C(this.config.headers,t);return new e({...this.config,headers:r})}timeout(t){return new e({...this.config,timeoutMs:t})}retry(t,n){return new e({...this.config,numRetries:t,delayBetweenEachRetryMs:n})}validateStatus(t){return new e({...this.config,validateStatus:t})}api(t="default",n){return new e({...this.config,withApiEnvironment:t,customApiEnv:t==="custom"?n:void 0})}async get(t,n={}){n.method="GET";let r=await this.fetch(t,n);return S(r)}async post(t,n,r={}){r.method="POST";let s=await this.fetch(t,{...r,body:n});return S(s)}async put(t,n,r={}){r.method="PUT";let s=await this.fetch(t,{...r,body:n});return S(s)}async patch(t,n,r={}){r.method="PATCH";let s=await this.fetch(t,{...r,body:n});return S(s)}async delete(t,n,r={}){r.method="DELETE";let s=await this.fetch(t,{...r,body:n});return S(s)}},J=new N;function kt(e){if(e===void 0)throw new Error("rpcUrl undefined");return async(t,n)=>{let r={jsonrpc:"2.0",id:+new Date,method:t,params:n},o=(await J.post(e,r)).data;if("error"in o)throw new Error(JSON.stringify(o.error));return o.result}}i(kt,"getFetchFunc");async function St(e,t={}){return J.fetch(e,t)}i(St,"rpcNodeFetchFn");function Rt(e){return e.status>199&&e.status<400}i(Rt,"responseIsOkay");function It(e){return e instanceof R}i(It,"isRequestBuilderError");export{ut as a,tt as b,dt as c,v as d,C as e,z as f,N as g,J as h,kt as i,St as j,Rt as k,It as l};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-P5BPG5MC.js.map
