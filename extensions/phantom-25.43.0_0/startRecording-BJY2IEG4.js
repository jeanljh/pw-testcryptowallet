import{a as qe,b as Ke,c as je,d as Je}from"./chunk-RCTLXTBM.js";import{$a as $e,Ea as Pe,Fa as Fe,G as F,Ga as Be,H as V,Ja as $,Ka as X,La as He,Ma as q,Na as B,Oa as N,Pa as K,Qa as Ue,R as _e,Ra as z,S as w,Sa as oe,Ta as I,Ua as Ge,V as Ae,Va as We,Wa as O,Xa as j,Ya as Ye,Za as J,_a as Z,ab as Xe,ba as Y,g as we,h as R,ia as ze,ja as De,la as ke,na as Ve,o as Me,q as Re,r as be,t as L,u as C,v as Ce,va as Oe,y as Le}from"./chunk-Z26KXQRL.js";import{a as n,i as l,n as d}from"./chunk-NSVULBS3.js";l();d();l();d();l();d();l();d();l();d();l();d();l();d();var ne=new WeakMap;function v(e){return ne.has(e)}n(v,"hasSerializedNode");function ie(e){let t=e;for(;t;){if(!v(t)&&!X(t))return!1;t=B(t)}return!0}n(ie,"nodeAndAncestorsHaveSerializedNode");function E(e){return ne.get(e)}n(E,"getSerializedNodeId");function Ze(e,t){ne.set(e,t)}n(Ze,"setSerializedNodeId");function D(e,t){let r=e.tagName,i=e.value;if(O(e,t)){let o=e.type;return r==="INPUT"&&(o==="button"||o==="submit"||o==="reset")?i:!i||r==="OPTION"?void 0:z}if(r==="OPTION"||r==="SELECT")return e.value;if(!(r!=="INPUT"&&r!=="TEXTAREA"))return i}n(D,"getElementInputValue");var ft=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,mt=/^[A-Za-z]+:|^\/\//,ht=/^data:.*,/i;function Qe(e,t){return e.replace(ft,(r,i,o,s,u,a)=>{let c=o||u||a;if(!t||!c||mt.test(c)||ht.test(c))return r;let m=i||s||"";return`url(${m}${St(c,t)}${m})`})}n(Qe,"switchToAbsoluteUrl");function St(e,t){try{return Le(e,t).href}catch{return e}}n(St,"makeUrlAbsolute");var gt=/[^a-z1-6-_]/;function Q(e){let t=e.toLowerCase().trim();return gt.test(t)?"div":t}n(Q,"getValidTagName");function se(e,t){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${t}' style='background-color:silver'%3E%3C/svg%3E`}n(se,"censoredImageForSize");l();d();l();d();l();d();l();d();var x={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},_={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},y={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},M={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},ae={Play:0,Pause:1};l();d();function ce(e){if(!(e===void 0||e.length===0))return e.map(t=>{let r=t.cssRules||t.rules;return{cssRules:Array.from(r,s=>s.cssText),disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0}})}n(ce,"serializeStyleSheets");l();d();l();d();function H(e,t,r,i){if(t===N.HIDDEN)return null;let o=e.getAttribute(r);if(t===N.MASK&&r!==K&&!Ye.includes(r)&&r!==i.actionNameAttribute){let s=e.tagName;switch(r){case"title":case"alt":case"placeholder":return z}if(s==="IMG"&&(r==="src"||r==="srcset")){let u=e;if(u.naturalWidth>0)return se(u.naturalWidth,u.naturalHeight);let{width:a,height:c}=e.getBoundingClientRect();return a>0||c>0?se(a,c):oe}if(s==="SOURCE"&&(r==="src"||r==="srcset"))return oe;if(s==="A"&&r==="href")return z;if(o&&r.startsWith("data-"))return z;if(s==="IFRAME"&&r==="srcdoc")return z}return!o||typeof o!="string"?o:Fe(o)?Be(o):o}n(H,"serializeAttribute");function et(e,t,r){if(t===N.HIDDEN)return{};let i={},o=Q(e.tagName),s=e.ownerDocument;for(let p=0;p<e.attributes.length;p+=1){let h=e.attributes.item(p).name,g=H(e,t,h,r.configuration);g!==null&&(i[h]=g)}if(e.value&&(o==="textarea"||o==="select"||o==="option"||o==="input")){let p=D(e,t);p!==void 0&&(i.value=p)}if(o==="option"&&t===N.ALLOW){let p=e;p.selected&&(i.selected=p.selected)}if(o==="link"){let p=Array.from(s.styleSheets).find(h=>h.href===e.href),f=ue(p);f&&p&&(i._cssText=f)}if(o==="style"&&e.sheet){let p=ue(e.sheet);p&&(i._cssText=p)}let u=e;if(o==="input"&&(u.type==="radio"||u.type==="checkbox")&&(t===N.ALLOW?i.checked=!!u.checked:O(u,t)&&delete i.checked),o==="audio"||o==="video"){let p=e;i.rr_mediaState=p.paused?"paused":"played"}let a,c,m=r.serializationContext;switch(m.status){case 0:a=Math.round(e.scrollTop),c=Math.round(e.scrollLeft),(a||c)&&m.elementsScrollPositions.set(e,{scrollTop:a,scrollLeft:c});break;case 1:m.elementsScrollPositions.has(e)&&({scrollTop:a,scrollLeft:c}=m.elementsScrollPositions.get(e));break}return c&&(i.rr_scrollLeft=c),a&&(i.rr_scrollTop=a),i}n(et,"serializeAttributes");function ue(e){if(!e)return null;let t;try{t=e.rules||e.cssRules}catch{}if(!t)return null;let r=Array.from(t,Ce()?Nt:tt).join("");return Qe(r,e.href)}n(ue,"getCssRulesString");function Nt(e){if(yt(e)&&e.selectorText.includes(":")){let t=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(t,"$1\\$2")}return tt(e)}n(Nt,"getCssRuleStringForSafari");function tt(e){return Et(e)&&ue(e.styleSheet)||e.cssText}n(tt,"getCssRuleString");function Et(e){return"styleSheet"in e}n(Et,"isCSSImportRule");function yt(e){return"selectorText"in e}n(yt,"isCSSStyleRule");function k(e,t){let r=xt(e,t);if(!r)return null;let i=E(e)||vt(),o=r;return o.id=i,Ze(e,i),t.serializedNodeIds&&t.serializedNodeIds.add(i),o}n(k,"serializeNodeWithId");var Tt=1;function vt(){return Tt++}n(vt,"generateNextId");function le(e,t){let r=[];return q(e,i=>{let o=k(i,t);o&&r.push(o)}),r}n(le,"serializeChildNodes");function xt(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return It(e,t);case e.DOCUMENT_FRAGMENT_NODE:return wt(e,t);case e.DOCUMENT_TYPE_NODE:return Mt(e);case e.ELEMENT_NODE:return Rt(e,t);case e.TEXT_NODE:return Ct(e,t);case e.CDATA_SECTION_NODE:return Lt()}}n(xt,"serializeNode");function It(e,t){return{type:_.Document,childNodes:le(e,t),adoptedStyleSheets:ce(e.adoptedStyleSheets)}}n(It,"serializeDocumentNode");function wt(e,t){let r=X(e);return r&&t.serializationContext.shadowRootsController.addShadowRoot(e),{type:_.DocumentFragment,childNodes:le(e,t),isShadowRoot:r,adoptedStyleSheets:r?ce(e.adoptedStyleSheets):void 0}}n(wt,"serializeDocumentFragmentNode");function Mt(e){return{type:_.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId}}n(Mt,"serializeDocumentTypeNode");function Rt(e,t){let r=Q(e.tagName),i=bt(e)||void 0,o=Ge(We(e),t.parentNodePrivacyLevel);if(o===N.HIDDEN){let{width:a,height:c}=e.getBoundingClientRect();return{type:_.Element,tagName:r,attributes:{rr_width:`${a}px`,rr_height:`${c}px`,[K]:Ue},childNodes:[],isSVG:i}}if(o===N.IGNORE)return;let s=et(e,o,t),u=[];if(He(e)&&r!=="style"){let a;t.parentNodePrivacyLevel===o&&t.ignoreWhiteSpace===(r==="head")?a=t:a={...t,parentNodePrivacyLevel:o,ignoreWhiteSpace:r==="head"},u=le(e,a)}return{type:_.Element,tagName:r,attributes:s,childNodes:u,isSVG:i}}n(Rt,"serializeElementNode");function bt(e){return e.tagName==="svg"||e instanceof SVGElement}n(bt,"isSVGElement");function Ct(e,t){let r=j(e,t.ignoreWhiteSpace||!1,t.parentNodePrivacyLevel);if(r!==void 0)return{type:_.Text,textContent:r}}n(Ct,"serializeTextNode");function Lt(){return{type:_.CDATA,textContent:""}}n(Lt,"serializeCDataNode");function ee(e,t,r){return k(e,{serializationContext:r,parentNodePrivacyLevel:t.defaultPrivacyLevel,configuration:t})}n(ee,"serializeDocument");l();d();function de(e){return!!e.changedTouches}n(de,"isTouchEvent");function b(e){return e.composed===!0&&$(e.target)?e.composedPath()[0]:e.target}n(b,"getEventTarget");l();d();function _t(e){return Math.abs(e.pageTop-e.offsetTop-self.scrollY)>25||Math.abs(e.pageLeft-e.offsetLeft-self.scrollX)>25}n(_t,"isVisualViewportFactoredIn");var rt=n((e,t)=>{let r=self.visualViewport,i={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};if(r)_t(r)?(i.layoutViewportX=Math.round(e+r.offsetLeft),i.layoutViewportY=Math.round(t+r.offsetTop)):(i.visualViewportX=Math.round(e-r.offsetLeft),i.visualViewportY=Math.round(t-r.offsetTop));else return i;return i},"convertMouseEventToLayoutCoordinates"),te=n(e=>({scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}),"getVisualViewport");l();d();function T(e,t){return{data:{source:e,...t},type:x.IncrementalSnapshot,timestamp:R()}}n(T,"assembleIncrementalSnapshot");var At=50;function pe(e,t){let{throttled:r,cancel:i}=L(s=>{let u=b(s);if(v(u)){let a=fe(s);if(!a)return;let c={id:E(u),timeOffset:0,x:a.x,y:a.y};t(T(de(s)?y.TouchMove:y.MouseMove,{positions:[c]}))}},At,{trailing:!1}),{stop:o}=w(e,document,["mousemove","touchmove"],r,{capture:!0,passive:!0});return{stop:n(()=>{o(),i()},"stop")}}n(pe,"trackMove");function fe(e){let{clientX:t,clientY:r}=de(e)?e.changedTouches[0]:e;if(self.visualViewport){let{visualViewportX:i,visualViewportY:o}=rt(t,r);t=i,r=o}if(!Number.isFinite(t)||!Number.isFinite(r)){e.isTrusted&&Y("mouse/touch event without x/y");return}return{x:t,y:r}}n(fe,"tryToComputeCoordinates");l();d();var ot={pointerup:M.MouseUp,mousedown:M.MouseDown,click:M.Click,contextmenu:M.ContextMenu,dblclick:M.DblClick,focus:M.Focus,blur:M.Blur,touchstart:M.TouchStart,touchend:M.TouchEnd};function me(e,t,r){let i=n(o=>{let s=b(o);if(I(s,e.defaultPrivacyLevel)===N.HIDDEN||!v(s))return;let u=E(s),a=ot[o.type],c;if(a!==M.Blur&&a!==M.Focus){let p=fe(o);if(!p)return;c={id:u,type:a,x:p.x,y:p.y}}else c={id:u,type:a};let m={id:r.getIdForEvent(o),...T(y.MouseInteraction,c)};t(m)},"handler");return w(e,document,Object.keys(ot),i,{capture:!0,passive:!0})}n(me,"trackMouseInteraction");l();d();var zt=100;function U(e,t,r,i=document){let{throttled:o,cancel:s}=L(a=>{let c=b(a);if(!c||I(c,e.defaultPrivacyLevel)===N.HIDDEN||!v(c))return;let m=E(c),p=c===document?{scrollTop:Z(),scrollLeft:J()}:{scrollTop:Math.round(c.scrollTop),scrollLeft:Math.round(c.scrollLeft)};r.set(c,p),t(T(y.Scroll,{id:m,x:p.scrollLeft,y:p.scrollTop}))},zt),{stop:u}=_e(e,i,"scroll",o,{capture:!0,passive:!0});return{stop:n(()=>{u(),s()},"stop")}}n(U,"trackScroll");l();d();var Dt=200;function he(e,t){let r=$e(e).subscribe(i=>{t(T(y.ViewportResize,i))});return{stop:n(()=>{r.unsubscribe()},"stop")}}n(he,"trackViewportResize");function Se(e,t){let r=self.visualViewport;if(!r)return{stop:C};let{throttled:i,cancel:o}=L(()=>{t({data:te(r),type:x.VisualViewport,timestamp:R()})},Dt,{trailing:!1}),{stop:s}=w(e,r,["resize","scroll"],i,{capture:!0,passive:!0});return{stop:n(()=>{s(),o()},"stop")}}n(Se,"trackVisualViewportResize");l();d();function ge(e,t){return w(e,document,["play","pause"],r=>{let i=b(r);!i||I(i,e.defaultPrivacyLevel)===N.HIDDEN||!v(i)||t(T(y.MediaInteraction,{id:E(i),type:r.type==="play"?ae.Play:ae.Pause}))},{capture:!0,passive:!0})}n(ge,"trackMediaInteraction");l();d();function Ne(e){function t(o,s){o&&v(o.ownerNode)&&s(E(o.ownerNode))}n(t,"checkStyleSheetAndCallback");let r=[F(CSSStyleSheet.prototype,"insertRule",({target:o,parameters:[s,u]})=>{t(o,a=>e(T(y.StyleSheetRule,{id:a,adds:[{rule:s,index:u}]})))}),F(CSSStyleSheet.prototype,"deleteRule",({target:o,parameters:[s]})=>{t(o,u=>e(T(y.StyleSheetRule,{id:u,removes:[{index:s}]})))})];typeof CSSGroupingRule<"u"?i(CSSGroupingRule):(i(CSSMediaRule),i(CSSSupportsRule));function i(o){r.push(F(o.prototype,"insertRule",({target:s,parameters:[u,a]})=>{t(s.parentStyleSheet,c=>{let m=nt(s);m&&(m.push(a||0),e(T(y.StyleSheetRule,{id:c,adds:[{rule:u,index:m}]})))})}),F(o.prototype,"deleteRule",({target:s,parameters:[u]})=>{t(s.parentStyleSheet,a=>{let c=nt(s);c&&(c.push(u),e(T(y.StyleSheetRule,{id:a,removes:[{index:c}]})))})}))}return n(i,"instrumentGroupingCSSRuleClass"),{stop:n(()=>{r.forEach(o=>o.stop())},"stop")}}n(Ne,"trackStyleSheet");function nt(e){let t=[],r=e;for(;r.parentRule;){let u=Array.from(r.parentRule.cssRules).indexOf(r);t.unshift(u),r=r.parentRule}if(!r.parentStyleSheet)return;let o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);return t.unshift(o),t}n(nt,"getPathToNestedCSSRule");l();d();function Ee(e,t){return w(e,self,["focus","blur"],()=>{t({data:{has_focus:document.hasFocus()},type:x.Focus,timestamp:R()})})}n(Ee,"trackFocus");l();d();function ye(e,t,r){let i=e.subscribe(12,o=>{var s,u;o.rawRumEvent.type==="action"&&o.rawRumEvent.action.type==="click"&&(!((u=(s=o.rawRumEvent.action.frustration)===null||s===void 0?void 0:s.type)===null||u===void 0)&&u.length)&&"events"in o.domainContext&&o.domainContext.events&&o.domainContext.events.length&&t({timestamp:o.rawRumEvent.date,type:x.FrustrationRecord,data:{frustrationTypes:o.rawRumEvent.action.frustration.type,recordIds:o.domainContext.events.map(a=>r.getIdForEvent(a))}})});return{stop:n(()=>{i.unsubscribe()},"stop")}}n(ye,"trackFrustration");l();d();function Te(e,t){let r=e.subscribe(5,()=>{t({timestamp:R(),type:x.ViewEnd})});return{stop:n(()=>{r.unsubscribe()},"stop")}}n(Te,"trackViewEnd");l();d();function G(e,t,r=document){let i=e.defaultPrivacyLevel,o=new WeakMap,s=r!==document,{stop:u}=w(e,r,s?["change"]:["input","change"],p=>{let f=b(p);(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement||f instanceof HTMLSelectElement)&&c(f)},{capture:!0,passive:!0}),a;if(s)a=C;else{let p=[V(HTMLInputElement.prototype,"value",c),V(HTMLInputElement.prototype,"checked",c),V(HTMLSelectElement.prototype,"value",c),V(HTMLTextAreaElement.prototype,"value",c),V(HTMLSelectElement.prototype,"selectedIndex",c)];a=n(()=>{p.forEach(f=>f.stop())},"stopPropertySetterInstrumentation")}return{stop:n(()=>{a(),u()},"stop")};function c(p){let f=I(p,i);if(f===N.HIDDEN)return;let h=p.type,g;if(h==="radio"||h==="checkbox"){if(O(p,f))return;g={isChecked:p.checked}}else{let A=D(p,f);if(A===void 0)return;g={text:A}}m(p,g);let P=p.name;h==="radio"&&P&&p.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(P)}"]`).forEach(A=>{A!==p&&m(A,{isChecked:!1})})}function m(p,f){if(!v(p))return;let h=o.get(p);(!h||h.text!==f.text||h.isChecked!==f.isChecked)&&(o.set(p,f),t(T(y.Input,{id:E(p),...f})))}}n(G,"trackInput");l();d();l();d();var kt=100,Vt=16;function it(e){let t=C,r=[];function i(){t(),e(r),r=[]}n(i,"flush");let{throttled:o,cancel:s}=L(i,Vt,{leading:!1});return{addMutations:n(u=>{r.length===0&&(t=Oe(o,{timeout:kt})),r.push(...u)},"addMutations"),flush:i,stop:n(()=>{t(),s()},"stop")}}n(it,"createMutationBatch");function W(e,t,r,i){let o=Pe();if(!o)return{stop:C,flush:C};let s=it(a=>{Ot(a.concat(u.takeRecords()),e,t,r)}),u=new o(Me(s.addMutations));return u.observe(i,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:n(()=>{u.disconnect(),s.stop()},"stop"),flush:n(()=>{s.flush()},"flush")}}n(W,"trackMutation");function Ot(e,t,r,i){let o=new Map;e.filter(f=>f.type==="childList").forEach(f=>{f.removedNodes.forEach(h=>{st(h,i.removeShadowRoot)})});let s=e.filter(f=>f.target.isConnected&&ie(f.target)&&I(f.target,r.defaultPrivacyLevel,o)!==N.HIDDEN),{adds:u,removes:a,hasBeenSerialized:c}=Pt(s.filter(f=>f.type==="childList"),r,i,o),m=Ft(s.filter(f=>f.type==="characterData"&&!c(f.target)),r,o),p=Bt(s.filter(f=>f.type==="attributes"&&!c(f.target)),r,o);!m.length&&!p.length&&!a.length&&!u.length||t(T(y.Mutation,{adds:u,removes:a,texts:m,attributes:p}))}n(Ot,"processMutations");function Pt(e,t,r,i){let o=new Set,s=new Map;for(let h of e)h.addedNodes.forEach(g=>{o.add(g)}),h.removedNodes.forEach(g=>{o.has(g)||s.set(g,h.target),o.delete(g)});let u=Array.from(o);Ht(u);let a=new Set,c=[];for(let h of u){if(p(h))continue;let g=I(h.parentNode,t.defaultPrivacyLevel,i);if(g===N.HIDDEN||g===N.IGNORE)continue;let P=k(h,{serializedNodeIds:a,parentNodePrivacyLevel:g,serializationContext:{status:2,shadowRootsController:r},configuration:t});if(!P)continue;let A=B(h);c.push({nextId:f(h),parentId:E(A),node:P})}let m=[];return s.forEach((h,g)=>{v(g)&&m.push({parentId:E(h),id:E(g)})}),{adds:c,removes:m,hasBeenSerialized:p};function p(h){return v(h)&&a.has(E(h))}n(p,"hasBeenSerialized");function f(h){let g=h.nextSibling;for(;g;){if(v(g))return E(g);g=g.nextSibling}return null}n(f,"getNextSibling")}n(Pt,"processChildListMutations");function Ft(e,t,r){var i;let o=[],s=new Set,u=e.filter(a=>s.has(a.target)?!1:(s.add(a.target),!0));for(let a of u){if(a.target.textContent===a.oldValue)continue;let m=I(B(a.target),t.defaultPrivacyLevel,r);m===N.HIDDEN||m===N.IGNORE||o.push({id:E(a.target),value:(i=j(a.target,!1,m))!==null&&i!==void 0?i:null})}return o}n(Ft,"processCharacterDataMutations");function Bt(e,t,r){let i=[],o=new Map,s=e.filter(a=>{let c=o.get(a.target);return c&&c.has(a.attributeName)?!1:(c?c.add(a.attributeName):o.set(a.target,new Set([a.attributeName])),!0)}),u=new Map;for(let a of s){if(a.target.getAttribute(a.attributeName)===a.oldValue)continue;let m=I(a.target,t.defaultPrivacyLevel,r),p=H(a.target,m,a.attributeName,t),f;if(a.attributeName==="value"){let g=D(a.target,m);if(g===void 0)continue;f=g}else typeof p=="string"?f=p:f=null;let h=u.get(a.target);h||(h={id:E(a.target),attributes:{}},i.push(h),u.set(a.target,h)),h.attributes[a.attributeName]=f}return i}n(Bt,"processAttributesMutations");function Ht(e){e.sort((t,r)=>{let i=t.compareDocumentPosition(r);return i&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:i&Node.DOCUMENT_POSITION_CONTAINS||i&Node.DOCUMENT_POSITION_FOLLOWING?1:i&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}n(Ht,"sortAddedAndMovedNodes");function st(e,t){$(e)&&t(e.shadowRoot),q(e,r=>st(r,t))}n(st,"traverseRemovedShadowDom");l();d();function ve(){let e=new WeakMap;return{set(t,r){t===document&&!document.scrollingElement||e.set(t===document?document.scrollingElement:t,r)},get(t){return e.get(t)},has(t){return e.has(t)}}}n(ve,"createElementsScrollPositions");l();d();var at=n((e,t,r)=>{let i=new Map,o={addShadowRoot:n(s=>{if(i.has(s))return;let u=W(t,e,o,s),a=G(e,t,s),c=U(e,t,r,s);i.set(s,{flush:n(()=>u.flush(),"flush"),stop:n(()=>{u.stop(),a.stop(),c.stop()},"stop")})},"addShadowRoot"),removeShadowRoot:n(s=>{let u=i.get(s);u&&(u.stop(),i.delete(s))},"removeShadowRoot"),stop:n(()=>{i.forEach(({stop:s})=>s())},"stop"),flush:n(()=>{i.forEach(({flush:s})=>s())},"flush")};return o},"initShadowRootsController");l();d();function ct(e,t,r,i,o,s){let u=n((c=R(),m={status:0,elementsScrollPositions:e,shadowRootsController:t})=>{let{width:p,height:f}=Xe(),h=[{data:{height:f,href:self.location.href,width:p},type:x.Meta,timestamp:c},{data:{has_focus:document.hasFocus()},type:x.Focus,timestamp:c},{data:{node:ee(document,i,m),initialOffset:{left:J(),top:Z()}},type:x.FullSnapshot,timestamp:c}];return self.visualViewport&&h.push({data:te(self.visualViewport),type:x.VisualViewport,timestamp:c}),h},"takeFullSnapshot");s(u());let{unsubscribe:a}=r.subscribe(2,c=>{o(),s(u(c.startClocks.timeStamp,{shadowRootsController:t,status:1,elementsScrollPositions:e}))});return{stop:a}}n(ct,"startFullSnapshots");l();d();function ut(){let e=new WeakMap,t=1;return{getIdForEvent(r){return e.has(r)||e.set(r,t++),e.get(r)}}}n(ut,"initRecordIds");function xe(e){let{emit:t,configuration:r,lifeCycle:i}=e;if(!t)throw new Error("emit function is required");let o=n(h=>{t(h),Ae("record",{record:h});let g=e.viewHistory.findView();je(g.id)},"emitAndComputeStats"),s=ve(),u=at(r,o,s),{stop:a}=ct(s,u,i,r,c,h=>h.forEach(g=>o(g)));function c(){u.flush(),p.flush()}n(c,"flushMutations");let m=ut(),p=W(o,r,u,document),f=[p,pe(r,o),me(r,o,m),U(r,o,s,document),he(r,o),G(r,o),ge(r,o),Ne(o),Ee(r,o),Se(r,o),ye(i,o,m),Te(i,h=>{c(),o(h)})];return{stop:n(()=>{u.stop(),f.forEach(h=>h.stop()),a()},"stop"),flushMutations:c,shadowRootsController:u}}n(xe,"record");l();d();l();d();l();d();function lt(e,t,r){let i=new FormData;i.append("segment",new Blob([e],{type:"application/octet-stream"}),`${t.session.id}-${t.start}`);let o={raw_segment_size:r,compressed_segment_size:e.byteLength,...t},s=JSON.stringify(o);return i.append("event",new Blob([s],{type:"application/json"})),{data:i,bytesCount:e.byteLength}}n(lt,"buildReplayPayload");l();d();function dt({context:e,creationReason:t,encoder:r}){let i=0,o=e.view.id,s={start:1/0,end:-1/0,creation_reason:t,records_count:0,has_full_snapshot:!1,index_in_view:qe(o),source:"browser",...e};Ke(o);function u(c,m){s.start=Math.min(s.start,c.timestamp),s.end=Math.max(s.end,c.timestamp),s.records_count+=1,s.has_full_snapshot||(s.has_full_snapshot=c.type===x.FullSnapshot);let p=r.isEmpty?'{"records":[':",";r.write(p+JSON.stringify(c),f=>{i+=f,m(i)})}n(u,"addRecord");function a(c){if(r.isEmpty)throw new Error("Empty segment flushed");r.write(`],${JSON.stringify(s).slice(1)}
`),r.finish(m=>{Je(s.view.id,m.rawBytesCount),c(s,m)})}return n(a,"flush"),{addRecord:u,flush:a}}n(dt,"createSegment");var Gt=5*we,re=6e4;function Ie(e,t,r,i,o,s){return Wt(e,()=>Yt(t.applicationId,r,i),o,s)}n(Ie,"startSegmentCollection");function Wt(e,t,r,i){let o={status:0,nextSegmentCreationReason:"init"},{unsubscribe:s}=e.subscribe(2,()=>{a("view_change")}),{unsubscribe:u}=e.subscribe(11,c=>{a(c.reason)});function a(c){o.status===1&&(o.segment.flush((m,p)=>{let f=lt(p.output,m,p.rawBytesCount);Ve(c)?r.sendOnExit(f):r.send(f)}),be(o.expirationTimeoutId)),c!=="stop"?o={status:0,nextSegmentCreationReason:c}:o={status:2}}return n(a,"flushSegment"),{addRecord:n(c=>{if(o.status!==2){if(o.status===0){let m=t();if(!m)return;o={status:1,segment:dt({encoder:i,context:m,creationReason:o.nextSegmentCreationReason}),expirationTimeoutId:Re(()=>{a("segment_duration_limit")},Gt)}}o.segment.addRecord(c,m=>{m>re&&a("segment_bytes_limit")})}},"addRecord"),stop:n(()=>{a("stop"),s(),u()},"stop")}}n(Wt,"doStartSegmentCollection");function Yt(e,t,r){let i=t.findTrackedSession(),o=r.findView();if(!(!i||!o))return{application:{id:e},session:{id:i.id},view:{id:o.id}}}n(Yt,"computeSegmentContext");l();d();function pt(e){let t=De();return{addRecord:n(r=>{let i=e.findView();t.send("record",r,i.id)},"addRecord")}}n(pt,"startRecordBridge");function bs(e,t,r,i,o,s){let u=[],a=n(f=>{e.notify(14,{error:f}),Y("Error reported to customer",{"error.message":f.message})},"reportError"),c=s||ze(t.sessionReplayEndpointBuilder,re,a),m;if(ke())({addRecord:m}=pt(i));else{let f=Ie(e,t,r,i,c,o);m=f.addRecord,u.push(f.stop)}let{stop:p}=xe({emit:m,configuration:t,lifeCycle:e,viewHistory:i});return u.push(p),{stop:n(()=>{u.forEach(f=>f())},"stop")}}n(bs,"startRecording");export{bs as startRecording};
//# sourceMappingURL=startRecording-BJY2IEG4.js.map
