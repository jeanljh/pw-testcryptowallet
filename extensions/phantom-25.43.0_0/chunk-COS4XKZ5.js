import{$a as ir,A as b1,Ab as dc,Ac as G,Bb as E1,C as K0,Cb as M1,Cd as sm,D as x1,Dd as am,E as ac,Ed as cm,F as cc,Fb as T1,Fd as um,Gc as Wl,Gd as lm,H as Qs,I as O0,Ib as Q0,J as jl,Jb as Nt,K as C0,Kb as hc,L as xe,M as ee,Mb as Y0,Md as fm,N as R0,Nd as gc,O as U0,Ob as zl,Od as qo,P as N0,Pb as pe,Pd as dm,Q as D0,Qd as wi,R as Qn,Rd as I1,Sa as F0,Sd as hm,Td as xi,Ud as pm,Vd as Hl,W as Fo,Wb as X0,Wd as mm,X as _,Xd as $l,Yd as gm,Z as Ys,Za as j0,Zc as im,Zd as ym,_ as dr,_a as ql,_d as yc,aa as L0,ab as Ut,ae as $t,bb as uc,bd as rt,cb as ro,db as q0,eb as B,ed as om,fb as z0,gb as W0,ha as Rt,hb as H0,hc as em,ib as A1,ic as jo,jb as yi,jc as tm,kb as $0,kd as _e,lb as G0,md as Ae,nc as rm,oa as V0,oc as pc,pa as tn,pd as ht,qa as rn,rb as S1,sc as nm,tb as Tr,ub as Z0,ud as vi,v as Js,vb as ct,vd as mc,w as w1,wb as lc,wc as X,x as k0,xb as nn,xc as H,y as P0,yb as fc,z as B0,zb as J0}from"./chunk-GSVPXWLR.js";import{A as E0,C as ic,D as oc,E as sc,I as M0,J as T0,a as S0,b as y1,d as No,f as v1,h as Do}from"./chunk-P42QO3R7.js";import{R as _1,a as Pt,m as wn,r as bi}from"./chunk-LYTSCHVN.js";import{c as _0,h as yt,k as Vo}from"./chunk-P5BPG5MC.js";import{g as p,h as Ct,i as Lo,l as I0,n as nr}from"./chunk-PPQ6BNOX.js";import{a as n,d as de,e as m1,g as he,i as d,j as T,k as g1,l as en,m as Buffer,n as h}from"./chunk-NSVULBS3.js";var es=de(Ec=>{"use strict";d();h();Object.defineProperty(Ec,"__esModule",{value:!0});Ec.AppAuthError=void 0;var nA=function(){function e(t,r){this.message=t,this.extras=r}return n(e,"AppAuthError"),e}();Ec.AppAuthError=nA});var Mc=de(An=>{"use strict";d();h();Object.defineProperty(An,"__esModule",{value:!0});An.DefaultCrypto=An.textEncodeLite=An.urlSafe=An.bufferToString=void 0;var iA=g1(),Km=es(),Om=typeof self<"u"&&!!self.crypto,oA=Om&&!!self.crypto.subtle,of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Cm(e){for(var t=[],r=0;r<e.byteLength;r+=1){var i=e[r]%of.length;t.push(of[i])}return t.join("")}n(Cm,"bufferToString");An.bufferToString=Cm;function Rm(e){var t=iA.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}n(Rm,"urlSafe");An.urlSafe=Rm;function Um(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}n(Um,"textEncodeLite");An.textEncodeLite=Um;var sA=function(){function e(){}return n(e,"DefaultCrypto"),e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(Om)self.crypto.getRandomValues(r);else for(var i=0;i<t;i+=1)r[i]=Math.random()*of.length|0;return Cm(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new Km.AppAuthError("Invalid code length.")):oA?new Promise(function(r,i){self.crypto.subtle.digest("SHA-256",Um(t)).then(function(o){return r(Rm(new Uint8Array(o)))},function(o){return i(o)})}):Promise.reject(new Km.AppAuthError("window.crypto.subtle is unavailable."))},e}();An.DefaultCrypto=sA});var sf=de(hr=>{"use strict";d();h();Object.defineProperty(hr,"__esModule",{value:!0});hr.IS_PROFILE=hr.IS_LOG=hr.setFlag=hr.Flags=void 0;hr.Flags={IS_LOG:!0,IS_PROFILE:!1};function aA(e,t){hr.Flags[e]=t}n(aA,"setFlag");hr.setFlag=aA;hr.IS_LOG=hr.Flags.IS_LOG,hr.IS_PROFILE=hr.Flags.IS_PROFILE});var la=de(Mi=>{"use strict";d();h();var af=Mi&&Mi.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,a;i<o;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.profile=Mi.log=void 0;var Nm=sf();function cf(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Nm.Flags.IS_LOG){var i=t?t.length:0;i>0?console.log.apply(console,af([e],t,!1)):console.log(e)}}n(cf,"log");Mi.log=cf;var cA=typeof self<"u"&&!!self.performance&&!!console.profile;function uA(e,t,r){return Nm.Flags.IS_PROFILE?lA(e,t,r):r}n(uA,"profile");Mi.profile=uA;function lA(e,t,r){var i=r.value,o=i.name;return o||(o="anonymous function"),cA?r.value=function(a){console.profile(o);var l=self.performance.now(),f=i.call.apply(i,af([this||self],a,!1)),g=self.performance.now()-l;return console.log("".concat(o," took ").concat(g," ms")),console.profileEnd(),f}:r.value=function(a){cf("Profile start ".concat(o));var l=Date.now(),f=i.call.apply(i,af([this||self],a,!1)),g=Date.now()-l;return cf("Profile end ".concat(o," took ").concat(g," ms.")),f},r}n(lA,"performProfile")});var uf=de(Tc=>{"use strict";d();h();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.AuthorizationRequest=void 0;var fA=Mc(),dA=la(),hA=10,pA=n(function(e){return e.generateRandom(hA)},"newState"),mA=function(){function e(t,r,i){r===void 0&&(r=new fA.DefaultCrypto),i===void 0&&(i=!0),this.crypto=r,this.usePkce=i,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||pA(r),this.extras=t.extras,this.internal=t.internal}return n(e,"AuthorizationRequest"),e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),i=this.crypto.deriveChallenge(r).catch(function(o){(0,dA.log)("Unable to generate PKCE challenge. Not using PKCE",o)});return i.then(function(o){o&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=o,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();Tc.AuthorizationRequest=mA});var Dm=de(Ic=>{"use strict";d();h();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.requireValidUrl=void 0;var gA=es();function yA(e){try{return new URL(e),e}catch{throw new gA.AppAuthError("Invalid input url ".concat(e))}}n(yA,"requireValidUrl");Ic.requireValidUrl=yA});var ff=de(ti=>{"use strict";d();h();Object.defineProperty(ti,"__esModule",{value:!0});ti.AuthorizationRequestHandler=ti.BUILT_IN_PARAMETERS=ti.AuthorizationNotifier=void 0;var lf=la(),vA=Dm(),wA=function(){function e(){this.listener=null}return n(e,"AuthorizationNotifier"),e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,i){this.listener&&this.listener(t,r,i)},e}();ti.AuthorizationNotifier=wA;ti.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var bA=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return n(e,"AuthorizationRequestHandler"),e.prototype.buildRequestUrl=function(t,r){var i={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var o in r.extras)r.extras.hasOwnProperty(o)&&ti.BUILT_IN_PARAMETERS.indexOf(o)<0&&(i[o]=r.extras[o]);var a=this.utils.stringify(i),l=(0,vA.requireValidUrl)(t.authorizationEndpoint),f="".concat(l,"?").concat(a);return f},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,lf.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,lf.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,lf.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();ti.AuthorizationRequestHandler=bA});var df=de(ts=>{"use strict";d();h();Object.defineProperty(ts,"__esModule",{value:!0});ts.AuthorizationError=ts.AuthorizationResponse=void 0;var xA=function(){function e(t){this.code=t.code,this.state=t.state}return n(e,"AuthorizationResponse"),e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();ts.AuthorizationResponse=xA;var AA=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return n(e,"AuthorizationError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();ts.AuthorizationError=AA});var kc=de(_r=>{"use strict";d();h();var pf=_r&&_r.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(_r,"__esModule",{value:!0});_r.TestRequestor=_r.FetchRequestor=_r.JQueryRequestor=_r.Requestor=void 0;var hf=es(),_c=function(){function e(){}return n(e,"Requestor"),e}();_r.Requestor=_c;var SA=function(e){pf(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,"JQueryRequestor"),t.prototype.xhr=function(r){var i=$.ajax(r);return new Promise(function(o,a){i.then(function(l,f,g){o(l)},function(l,f,g){a(new hf.AppAuthError(g))})})},t}(_c);_r.JQueryRequestor=SA;var EA=function(e){pf(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,"FetchRequestor"),t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new hf.AppAuthError("A URL must be provided."));var i=new URL(r.url),o={};if(o.method=r.method,o.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")o.body=r.data;else{var a=new URLSearchParams(r.data);a.forEach(function(g,x){i.searchParams.append(x,g)})}if(o.headers={},r.headers)for(var l in r.headers)r.headers.hasOwnProperty(l)&&(o.headers[l]=r.headers[l]);var f=r.dataType&&r.dataType.toLowerCase()==="json";return f&&(o.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(i.toString(),o).then(function(g){if(g.status>=200&&g.status<300){var x=g.headers.get("content-type");return f||x&&x.indexOf("application/json")!==-1?g.json():g.text()}else return Promise.reject(new hf.AppAuthError(g.status.toString(),g.statusText))})},t}(_c);_r.FetchRequestor=EA;var MA=function(e){pf(t,e);function t(r){var i=e.call(this)||this;return i.promise=r,i}return n(t,"TestRequestor"),t.prototype.xhr=function(r){return this.promise},t}(_c);_r.TestRequestor=MA});var Lm=de(Pc=>{"use strict";d();h();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.AuthorizationServiceConfiguration=void 0;var TA=kc(),IA=".well-known",_A="openid-configuration",kA=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return n(e,"AuthorizationServiceConfiguration"),e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var i="".concat(t,"/").concat(IA,"/").concat(_A),o=r||new TA.JQueryRequestor;return o.xhr({url:i,dataType:"json",method:"GET"}).then(function(a){return new e(a)})},e}();Pc.AuthorizationServiceConfiguration=kA});var Kc=de(Bc=>{"use strict";d();h();Object.defineProperty(Bc,"__esModule",{value:!0});Bc.BasicQueryStringUtils=void 0;var PA=function(){function e(){}return n(e,"BasicQueryStringUtils"),e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var i=t.split("&"),o=0;o<i.length;o+=1){var a=i[o],l=a.split("=");if(l.length>=2){var f=decodeURIComponent(l.shift()),g=l.length>0?l.join("="):null;g&&(r[f]=decodeURIComponent(g))}}return r},e.prototype.stringify=function(t){var r=[];for(var i in t)t.hasOwnProperty(i)&&t[i]&&r.push("".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(t[i])));return r.join("&")},e}();Bc.BasicQueryStringUtils=PA});var mf=de(Ti=>{"use strict";d();h();var BA=Ti&&Ti.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(Ti,"__esModule",{value:!0});Ti.LocalStorageBackend=Ti.StorageBackend=void 0;var Vm=function(){function e(){}return n(e,"StorageBackend"),e}();Ti.StorageBackend=Vm;var KA=function(e){BA(t,e);function t(r){var i=e.call(this)||this;return i.storage=r||self.localStorage,i}return n(t,"LocalStorageBackend"),t.prototype.getItem=function(r){var i=this;return new Promise(function(o,a){var l=i.storage.getItem(r);o(l||null)})},t.prototype.removeItem=function(r){var i=this;return new Promise(function(o,a){i.storage.removeItem(r),o()})},t.prototype.clear=function(){var r=this;return new Promise(function(i,o){r.storage.clear(),i()})},t.prototype.setItem=function(r,i){var o=this;return new Promise(function(a,l){o.storage.setItem(r,i),a()})},t}(Vm);Ti.LocalStorageBackend=KA});var qm=de(rs=>{"use strict";d();h();var OA=rs&&rs.__extends||function(){var e=n(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}n(i,"__"),t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(rs,"__esModule",{value:!0});rs.RedirectRequestHandler=void 0;var CA=uf(),RA=ff(),Fm=df(),UA=Mc(),Oc=la(),NA=Kc(),DA=mf(),gf=n(function(e){return"".concat(e,"_appauth_authorization_request")},"authorizationRequestKey"),jm=n(function(e){return"".concat(e,"_appauth_authorization_service_configuration")},"authorizationServiceConfigurationKey"),yf="appauth_current_authorization_request",LA=function(e){OA(t,e);function t(r,i,o,a){r===void 0&&(r=new DA.LocalStorageBackend),i===void 0&&(i=new NA.BasicQueryStringUtils),o===void 0&&(o=self.location),a===void 0&&(a=new UA.DefaultCrypto);var l=e.call(this,i,a)||this;return l.storageBackend=r,l.locationLike=o,l}return n(t,"RedirectRequestHandler"),t.prototype.performAuthorizationRequest=function(r,i){var o=this,a=this.crypto.generateRandom(10),l=Promise.all([this.storageBackend.setItem(yf,a),i.toJson().then(function(f){return o.storageBackend.setItem(gf(a),JSON.stringify(f))}),this.storageBackend.setItem(jm(a),JSON.stringify(r.toJson()))]);l.then(function(){var f=o.buildRequestUrl(r,i);(0,Oc.log)("Making a request to ",i,f),o.locationLike.assign(f)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(yf).then(function(i){return i?r.storageBackend.getItem(gf(i)).then(function(o){return JSON.parse(o)}).then(function(o){return new CA.AuthorizationRequest(o)}).then(function(o){var a="".concat(r.locationLike.origin).concat(r.locationLike.pathname),l=r.utils.parse(r.locationLike,!0),f=l.state,g=l.code,x=l.error;(0,Oc.log)("Potential authorization request ",a,l,f,g,x);var I=f===o.state,M=null,k=null;if(I){if(x){var O=l.error_uri,C=l.error_description;k=new Fm.AuthorizationError({error:x,error_description:C,error_uri:O,state:f})}else M=new Fm.AuthorizationResponse({code:g,state:f});return Promise.all([r.storageBackend.removeItem(yf),r.storageBackend.removeItem(gf(i)),r.storageBackend.removeItem(jm(i))]).then(function(){return(0,Oc.log)("Delivering authorization response"),{request:o,response:M,error:k}})}else return(0,Oc.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(RA.AuthorizationRequestHandler);rs.RedirectRequestHandler=LA});var zm=de(Cc=>{"use strict";d();h();Object.defineProperty(Cc,"__esModule",{value:!0});Cc.RevokeTokenRequest=void 0;var VA=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return n(e,"RevokeTokenRequest"),e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();Cc.RevokeTokenRequest=VA});var Wm=de(Ii=>{"use strict";d();h();Object.defineProperty(Ii,"__esModule",{value:!0});Ii.TokenRequest=Ii.GRANT_TYPE_REFRESH_TOKEN=Ii.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Ii.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Ii.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var FA=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return n(e,"TokenRequest"),e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Ii.TokenRequest=FA});var vf=de(Sn=>{"use strict";d();h();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.TokenError=Sn.TokenResponse=Sn.nowInSeconds=void 0;var jA=10*60*-1,qA=n(function(){return Math.round(new Date().getTime()/1e3)},"nowInSeconds");Sn.nowInSeconds=qA;var zA=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Sn.nowInSeconds)()}return n(e,"TokenResponse"),e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=jA),this.expiresIn){var r=(0,Sn.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Sn.TokenResponse=zA;var WA=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return n(e,"TokenError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Sn.TokenError=WA});var $m=de(Rc=>{"use strict";d();h();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.BaseTokenRequestHandler=void 0;var HA=es(),$A=Kc(),Hm=vf(),GA=kc(),ZA=function(){function e(t,r){t===void 0&&(t=new GA.JQueryRequestor),r===void 0&&(r=new $A.BasicQueryStringUtils),this.requestor=t,this.utils=r}return n(e,"BaseTokenRequestHandler"),e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var i=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(o){return!0})},e.prototype.performTokenRequest=function(t,r){var i=this,o=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return o.then(function(a){return i.isTokenResponse(a)?new Hm.TokenResponse(a):Promise.reject(new HA.AppAuthError(a.error,new Hm.TokenError(a)))})},e}();Rc.BaseTokenRequestHandler=ZA});var Zm=de(Gm=>{"use strict";d();h();Object.defineProperty(Gm,"__esModule",{value:!0})});var wf=de(St=>{"use strict";d();h();var JA=St&&St.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:n(function(){return t[r]},"get")}),Object.defineProperty(e,i,o)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),zt=St&&St.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&JA(t,e,r)};Object.defineProperty(St,"__esModule",{value:!0});zt(uf(),St);zt(ff(),St);zt(df(),St);zt(Lm(),St);zt(Mc(),St);zt(es(),St);zt(sf(),St);zt(la(),St);zt(Kc(),St);zt(qm(),St);zt(zm(),St);zt(mf(),St);zt(Wm(),St);zt($m(),St);zt(vf(),St);zt(Zm(),St);zt(kc(),St)});var Py=de((s9,ky)=>{d();h();var lt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Br(e,t){if(!e)throw new Error(t)}n(Br,"assert");function at(e,t,r){if(Br(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let i=r.join(", "),o=`Expected ${e} to be an Uint8Array with length [${i}]`;Br(r.includes(t.length),o)}else{let i=`Expected ${e} to be an Uint8Array with length ${r}`;Br(t.length===r,i)}}n(at,"isUint8Array");function go(e){Br(ds(e)==="Boolean","Expected compressed to be a Boolean")}n(go,"isCompressed");function an(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),at("output",e,t),e}n(an,"getAssertedOutput");function ds(e){return Object.prototype.toString.call(e).slice(8,-1)}n(ds,"toTypeString");ky.exports=e=>({contextRandomize(t){switch(Br(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&at("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(lt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return at("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(at("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(lt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(lt.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(at("private key",t,32),at("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(lt.TWEAK_MUL)}},publicKeyVerify(t){return at("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,i){switch(at("private key",t,32),go(r),i=an(i,r?33:65),e.publicKeyCreate(i,t)){case 0:return i;case 1:throw new Error(lt.SECKEY_INVALID);case 2:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,i){switch(at("public key",t,[33,65]),go(r),i=an(i,r?33:65),e.publicKeyConvert(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,i){switch(at("public key",t,[33,65]),go(r),i=an(i,r?33:65),e.publicKeyNegate(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE);case 3:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,i){Br(Array.isArray(t),"Expected public keys to be an Array"),Br(t.length>0,"Expected public keys array will have more than zero items");for(let o of t)at("public key",o,[33,65]);switch(go(r),i=an(i,r?33:65),e.publicKeyCombine(i,t)){case 0:return i;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.PUBKEY_COMBINE);case 3:throw new Error(lt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,i=!0,o){switch(at("public key",t,[33,65]),at("tweak",r,32),go(i),o=an(o,i?33:65),e.publicKeyTweakAdd(o,t,r)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.TWEAK_ADD)}},publicKeyTweakMul(t,r,i=!0,o){switch(at("public key",t,[33,65]),at("tweak",r,32),go(i),o=an(o,i?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.TWEAK_MUL)}},signatureNormalize(t){switch(at("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(lt.SIG_PARSE)}},signatureExport(t,r){at("signature",t,64),r=an(r,72);let i={output:r,outputlen:72};switch(e.signatureExport(i,t)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(at("signature",t),r=an(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,i={},o){at("message",t,32),at("private key",r,32),Br(ds(i)==="Object","Expected options to be an Object"),i.data!==void 0&&at("options.data",i.data),i.noncefn!==void 0&&Br(ds(i.noncefn)==="Function","Expected options.noncefn to be a Function"),o=an(o,64);let a={signature:o,recid:null};switch(e.ecdsaSign(a,t,r,i.data,i.noncefn)){case 0:return a;case 1:throw new Error(lt.SIGN);case 2:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,i){switch(at("signature",t,64),at("message",r,32),at("public key",i,[33,65]),e.ecdsaVerify(t,r,i)){case 0:return!0;case 3:return!1;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.PUBKEY_PARSE)}},ecdsaRecover(t,r,i,o=!0,a){switch(at("signature",t,64),Br(ds(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),at("message",i,32),go(o),a=an(a,o?33:65),e.ecdsaRecover(a,t,r,i)){case 0:return a;case 1:throw new Error(lt.SIG_PARSE);case 2:throw new Error(lt.RECOVER);case 3:throw new Error(lt.IMPOSSIBLE_CASE)}},ecdh(t,r,i={},o){switch(at("public key",t,[33,65]),at("private key",r,32),Br(ds(i)==="Object","Expected options to be an Object"),i.data!==void 0&&at("options.data",i.data),i.hashfn!==void 0?(Br(ds(i.hashfn)==="Function","Expected options.hashfn to be a Function"),i.xbuf!==void 0&&at("options.xbuf",i.xbuf,32),i.ybuf!==void 0&&at("options.ybuf",i.ybuf,32),at("output",o)):o=an(o,32),e.ecdh(o,t,r,i.data,i.hashfn,i.xbuf,i.ybuf)){case 0:return o;case 1:throw new Error(lt.PUBKEY_PARSE);case 2:throw new Error(lt.ECDH)}}})});var Ky=de((l9,By)=>{d();h();var _2=K0().ec,Tn=new _2("secp256k1"),st=Tn.curve,mt=st.n.constructor;function k2(e,t){let r=new mt(t);if(r.cmp(st.p)>=0)return null;r=r.toRed(st.red);let i=r.redSqr().redIMul(r).redIAdd(st.b).redSqrt();return e===3!==i.isOdd()&&(i=i.redNeg()),Tn.keyPair({pub:{x:r,y:i}})}n(k2,"loadCompressedPublicKey");function P2(e,t,r){let i=new mt(t),o=new mt(r);if(i.cmp(st.p)>=0||o.cmp(st.p)>=0||(i=i.toRed(st.red),o=o.toRed(st.red),(e===6||e===7)&&o.isOdd()!==(e===7)))return null;let a=i.redSqr().redIMul(i);return o.redSqr().redISub(a.redIAdd(st.b)).isZero()?Tn.keyPair({pub:{x:i,y:o}}):null}n(P2,"loadUncompressedPublicKey");function Oi(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:k2(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:P2(t,e.subarray(1,33),e.subarray(33,65));default:return null}}n(Oi,"loadPublicKey");function yo(e,t){let r=t.encode(null,e.length===33);for(let i=0;i<e.length;++i)e[i]=r[i]}n(yo,"savePublicKey");By.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new mt(e);return t.cmp(st.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new mt(e),r=st.n.sub(t).umod(st.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new mt(t);if(r.cmp(st.n)>=0||(r.iadd(new mt(e)),r.cmp(st.n)>=0&&r.isub(st.n),r.isZero()))return 1;let i=r.toArrayLike(Uint8Array,"be",32);return e.set(i),0},privateKeyTweakMul(e,t){let r=new mt(t);if(r.cmp(st.n)>=0||r.isZero())return 1;r.imul(new mt(e)),r.cmp(st.n)>=0&&(r=r.umod(st.n));let i=r.toArrayLike(Uint8Array,"be",32);return e.set(i),0},publicKeyVerify(e){return Oi(e)===null?1:0},publicKeyCreate(e,t){let r=new mt(t);if(r.cmp(st.n)>=0||r.isZero())return 1;let i=Tn.keyFromPrivate(t).getPublic();return yo(e,i),0},publicKeyConvert(e,t){let r=Oi(t);if(r===null)return 1;let i=r.getPublic();return yo(e,i),0},publicKeyNegate(e,t){let r=Oi(t);if(r===null)return 1;let i=r.getPublic();return i.y=i.y.redNeg(),yo(e,i),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let o=0;o<t.length;++o)if(r[o]=Oi(t[o]),r[o]===null)return 1;let i=r[0].getPublic();for(let o=1;o<r.length;++o)i=i.add(r[o].pub);return i.isInfinity()?2:(yo(e,i),0)},publicKeyTweakAdd(e,t,r){let i=Oi(t);if(i===null)return 1;if(r=new mt(r),r.cmp(st.n)>=0)return 2;let o=i.getPublic().add(st.g.mul(r));return o.isInfinity()?2:(yo(e,o),0)},publicKeyTweakMul(e,t,r){let i=Oi(t);if(i===null)return 1;if(r=new mt(r),r.cmp(st.n)>=0||r.isZero())return 2;let o=i.getPublic().mul(r);return yo(e,o),0},signatureNormalize(e){let t=new mt(e.subarray(0,32)),r=new mt(e.subarray(32,64));return t.cmp(st.n)>=0||r.cmp(st.n)>=0?1:(r.cmp(Tn.nh)===1&&e.set(st.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),i=t.subarray(32,64);if(new mt(r).cmp(st.n)>=0||new mt(i).cmp(st.n)>=0)return 1;let{output:o}=e,a=o.subarray(4,37);a[0]=0,a.set(r,1);let l=33,f=0;for(;l>1&&a[f]===0&&!(a[f+1]&128);--l,++f);if(a=a.subarray(f),a[0]&128||l>1&&a[0]===0&&!(a[1]&128))return 1;let g=o.subarray(39,72);g[0]=0,g.set(i,1);let x=33,I=0;for(;x>1&&g[I]===0&&!(g[I+1]&128);--x,++I);return g=g.subarray(I),g[0]&128||x>1&&g[0]===0&&!(g[1]&128)?1:(e.outputlen=6+l+x,o[0]=48,o[1]=e.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+l]=2,o[5+l]=g.length,o.set(g,6+l),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let i=t[5+r];if(i===0||6+r+i!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||i>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let o=t.subarray(4,4+r);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let a=t.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let l=new mt(o);l.cmp(st.n)>=0&&(l=new mt(0));let f=new mt(t.subarray(6+r));return f.cmp(st.n)>=0&&(f=new mt(0)),e.set(l.toArrayLike(Uint8Array,"be",32),0),e.set(f.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,i,o){if(o){let f=o;o=n(g=>{let x=f(t,r,null,i,g);if(!(x instanceof Uint8Array&&x.length===32))throw new Error("This is the way");return new mt(x)},"noncefn")}let a=new mt(r);if(a.cmp(st.n)>=0||a.isZero())return 1;let l;try{l=Tn.sign(t,r,{canonical:!0,k:o,pers:i})}catch{return 1}return e.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),e.recid=l.recoveryParam,0},ecdsaVerify(e,t,r){let i={r:e.subarray(0,32),s:e.subarray(32,64)},o=new mt(i.r),a=new mt(i.s);if(o.cmp(st.n)>=0||a.cmp(st.n)>=0)return 1;if(a.cmp(Tn.nh)===1||o.isZero()||a.isZero())return 3;let l=Oi(r);if(l===null)return 2;let f=l.getPublic();return Tn.verify(t,i,f)?0:3},ecdsaRecover(e,t,r,i){let o={r:t.slice(0,32),s:t.slice(32,64)},a=new mt(o.r),l=new mt(o.s);if(a.cmp(st.n)>=0||l.cmp(st.n)>=0)return 1;if(a.isZero()||l.isZero())return 2;let f;try{f=Tn.recoverPubKey(i,o,r)}catch{return 2}return yo(e,f),0},ecdh(e,t,r,i,o,a,l){let f=Oi(t);if(f===null)return 1;let g=new mt(r);if(g.cmp(st.n)>=0||g.isZero())return 2;let x=f.getPublic().mul(g);if(o===void 0){let I=x.encode(null,!0),M=Tn.hash().update(I).digest();for(let k=0;k<32;++k)e[k]=M[k]}else{a||(a=new Uint8Array(32));let I=x.getX().toArray("be",32);for(let C=0;C<32;++C)a[C]=I[C];l||(l=new Uint8Array(32));let M=x.getY().toArray("be",32);for(let C=0;C<32;++C)l[C]=M[C];let k=o(a,l,i);if(!(k instanceof Uint8Array&&k.length===e.length))return 2;e.set(k)}return 0}}});var Rd=de((p9,Oy)=>{d();h();Oy.exports=Py()(Ky())});var Ry=de(hu=>{"use strict";d();h();Object.defineProperty(hu,"__esModule",{value:!0});var Cy=P0();function B2(e){return new Promise(function(t,r){Cy(e,function(i,o){if(i){r(i);return}t(o)})})}n(B2,"getRandomBytes");hu.getRandomBytes=B2;function K2(e){return Cy(e)}n(K2,"getRandomBytesSync");hu.getRandomBytesSync=K2});var Ly=de(In=>{"use strict";d();h();var O2=In&&In.__awaiter||function(e,t,r,i){function o(a){return a instanceof r?a:new r(function(l){l(a)})}return n(o,"adopt"),new(r||(r=Promise))(function(a,l){function f(I){try{x(i.next(I))}catch(M){l(M)}}n(f,"fulfilled");function g(I){try{x(i.throw(I))}catch(M){l(M)}}n(g,"rejected");function x(I){I.done?a(I.value):o(I.value).then(f,g)}n(x,"step"),x((i=i.apply(e,t||[])).next())})},C2=In&&In.__generator||function(e,t){var r={label:0,sent:n(function(){if(a[0]&1)throw a[1];return a[1]},"sent"),trys:[],ops:[]},i,o,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(x){return function(I){return g([x,I])}}function g(x){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(a=x[0]&2?o.return:x[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,x[1])).done)return a;switch(o=0,a&&(x=[x[0]&2,a.value]),x[0]){case 0:case 1:a=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,o=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!a||x[1]>a[0]&&x[1]<a[3])){r.label=x[1];break}if(x[0]===6&&r.label<a[1]){r.label=a[1],a=x;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(x);break}a[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(I){x=[6,I],o=0}finally{i=a=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};function R2(e){for(var t in e)In.hasOwnProperty(t)||(In[t]=e[t])}n(R2,"__export");Object.defineProperty(In,"__esModule",{value:!0});var Uy=Rd(),Ny=Ry(),Dy=32;function U2(){return O2(this,void 0,void 0,function(){var e;return C2(this,function(t){switch(t.label){case 0:return[4,Ny.getRandomBytes(Dy)];case 1:return e=t.sent(),Uy.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}n(U2,"createPrivateKey");In.createPrivateKey=U2;function N2(){for(;;){var e=Ny.getRandomBytesSync(Dy);if(Uy.privateKeyVerify(e))return e}}n(N2,"createPrivateKeySync");In.createPrivateKeySync=N2;R2(Rd())});var vo=de((Vy,Ud)=>{d();h();(function(e,t){"use strict";function r(A,s){if(!A)throw new Error(s||"Assertion failed")}n(r,"assert");function i(A,s){A.super_=s;var u=n(function(){},"TempCtor");u.prototype=s.prototype,A.prototype=new u,A.prototype.constructor=A}n(i,"inherits");function o(A,s,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(A||0,s||10,u||"be"))}n(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=S0().Buffer}catch{}o.isBN=n(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=n(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=n(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=n(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=n(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=n(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(A,s){var u=A.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}n(l,"parseHex4Bits");function f(A,s,u){var m=l(A,u);return u-1>=s&&(m|=l(A,u-1)<<4),m}n(f,"parseHexByte"),o.prototype._parseHex=n(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var w=s.length-u;for(y=w%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(A,s,u,m){for(var y=0,v=Math.min(A.length,u),S=s;S<v;S++){var E=A.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}n(g,"parseBase"),o.prototype._parseBase=n(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,w=Math.min(S,S-E)+m,c=0,b=m;b<w;b+=y)c=g(s,b,b+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,b,s.length,u),b=0;b<E;b++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=n(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=n(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=n(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=n(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=n(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=n(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=n(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],w=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=x[6-w.length]+w+m:m=w+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=I[s],b=M[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var V=D.modn(b).toString(s);D=D.idivn(b),D.isZero()?m=V+m:m=x[c-V.length]+V+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=n(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=n(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=n(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=n(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=n(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),w,c,b=this.clone();if(S){for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[c]=w;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[v-c-1]=w}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=n(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=n(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=n(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=n(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(A){for(var s=new Array(A.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(A.words[m]&1<<y)>>>y}return s}n(k,"toBitArray"),o.prototype.zeroBits=n(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=n(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=n(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=n(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=n(function(){return this.negative!==0},"isNeg"),o.prototype.neg=n(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=n(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=n(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=n(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=n(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=n(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=n(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=n(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=n(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=n(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=n(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=n(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=n(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=n(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=n(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=n(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=n(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=n(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=n(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=n(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=n(function(s){return this.clone().isub(s)},"sub");function O(A,s,u){u.negative=s.negative^A.negative;var m=A.length+s.length|0;u.length=m,m=m-1|0;var y=A.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,w=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var b=w>>>26,D=w&67108863,V=Math.min(c,s.length-1),z=Math.max(0,c-A.length+1);z<=V;z++){var Q=c-z|0;y=A.words[Q]|0,v=s.words[z]|0,S=y*v+D,b+=S/67108864|0,D=S&67108863}u.words[c]=D|0,w=b|0}return w!==0?u.words[c]=w|0:u.length--,u.strip()}n(O,"smallMulTo");var C=n(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,w,c,b,D=y[0]|0,V=D&8191,z=D>>>13,Q=y[1]|0,oe=Q&8191,ue=Q>>>13,ft=y[2]|0,fe=ft&8191,K=ft>>>13,N=y[3]|0,U=N&8191,W=N>>>13,re=y[4]|0,q=re&8191,J=re>>>13,nt=y[5]|0,ye=nt&8191,be=nt>>>13,Mr=y[6]|0,Ie=Mr&8191,Ee=Mr>>>13,vn=y[7]|0,Me=vn&8191,Qe=vn>>>13,gi=y[8]|0,Ye=gi&8191,Xe=gi>>>13,Vn=y[9]|0,ke=Vn&8191,Pe=Vn>>>13,Fn=v[0]|0,Be=Fn&8191,Ke=Fn>>>13,jn=v[1]|0,Oe=jn&8191,Ce=jn>>>13,qn=v[2]|0,Re=qn&8191,Ue=qn>>>13,zn=v[3]|0,Ne=zn&8191,De=zn>>>13,Wn=v[4]|0,Le=Wn&8191,Ve=Wn>>>13,Hn=v[5]|0,Fe=Hn&8191,je=Hn>>>13,$n=v[6]|0,qe=$n&8191,ze=$n>>>13,Gn=v[7]|0,We=Gn&8191,He=Gn>>>13,Zn=v[8]|0,$e=Zn&8191,Ge=Zn>>>13,Jn=v[9]|0,Ze=Jn&8191,Je=Jn>>>13;m.negative=s.negative^u.negative,m.length=19,w=Math.imul(V,Be),c=Math.imul(V,Ke),c=c+Math.imul(z,Be)|0,b=Math.imul(z,Ke);var Nr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,w=Math.imul(oe,Be),c=Math.imul(oe,Ke),c=c+Math.imul(ue,Be)|0,b=Math.imul(ue,Ke),w=w+Math.imul(V,Oe)|0,c=c+Math.imul(V,Ce)|0,c=c+Math.imul(z,Oe)|0,b=b+Math.imul(z,Ce)|0;var Dr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,w=Math.imul(fe,Be),c=Math.imul(fe,Ke),c=c+Math.imul(K,Be)|0,b=Math.imul(K,Ke),w=w+Math.imul(oe,Oe)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(ue,Oe)|0,b=b+Math.imul(ue,Ce)|0,w=w+Math.imul(V,Re)|0,c=c+Math.imul(V,Ue)|0,c=c+Math.imul(z,Re)|0,b=b+Math.imul(z,Ue)|0;var Lr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(U,Be),c=Math.imul(U,Ke),c=c+Math.imul(W,Be)|0,b=Math.imul(W,Ke),w=w+Math.imul(fe,Oe)|0,c=c+Math.imul(fe,Ce)|0,c=c+Math.imul(K,Oe)|0,b=b+Math.imul(K,Ce)|0,w=w+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ue)|0,c=c+Math.imul(ue,Re)|0,b=b+Math.imul(ue,Ue)|0,w=w+Math.imul(V,Ne)|0,c=c+Math.imul(V,De)|0,c=c+Math.imul(z,Ne)|0,b=b+Math.imul(z,De)|0;var Vr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(q,Be),c=Math.imul(q,Ke),c=c+Math.imul(J,Be)|0,b=Math.imul(J,Ke),w=w+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(W,Oe)|0,b=b+Math.imul(W,Ce)|0,w=w+Math.imul(fe,Re)|0,c=c+Math.imul(fe,Ue)|0,c=c+Math.imul(K,Re)|0,b=b+Math.imul(K,Ue)|0,w=w+Math.imul(oe,Ne)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(ue,Ne)|0,b=b+Math.imul(ue,De)|0,w=w+Math.imul(V,Le)|0,c=c+Math.imul(V,Ve)|0,c=c+Math.imul(z,Le)|0,b=b+Math.imul(z,Ve)|0;var Fr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,w=Math.imul(ye,Be),c=Math.imul(ye,Ke),c=c+Math.imul(be,Be)|0,b=Math.imul(be,Ke),w=w+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(J,Oe)|0,b=b+Math.imul(J,Ce)|0,w=w+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(W,Re)|0,b=b+Math.imul(W,Ue)|0,w=w+Math.imul(fe,Ne)|0,c=c+Math.imul(fe,De)|0,c=c+Math.imul(K,Ne)|0,b=b+Math.imul(K,De)|0,w=w+Math.imul(oe,Le)|0,c=c+Math.imul(oe,Ve)|0,c=c+Math.imul(ue,Le)|0,b=b+Math.imul(ue,Ve)|0,w=w+Math.imul(V,Fe)|0,c=c+Math.imul(V,je)|0,c=c+Math.imul(z,Fe)|0,b=b+Math.imul(z,je)|0;var jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(Ee,Be)|0,b=Math.imul(Ee,Ke),w=w+Math.imul(ye,Oe)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(be,Oe)|0,b=b+Math.imul(be,Ce)|0,w=w+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(J,Re)|0,b=b+Math.imul(J,Ue)|0,w=w+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(W,Ne)|0,b=b+Math.imul(W,De)|0,w=w+Math.imul(fe,Le)|0,c=c+Math.imul(fe,Ve)|0,c=c+Math.imul(K,Le)|0,b=b+Math.imul(K,Ve)|0,w=w+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(ue,Fe)|0,b=b+Math.imul(ue,je)|0,w=w+Math.imul(V,qe)|0,c=c+Math.imul(V,ze)|0,c=c+Math.imul(z,qe)|0,b=b+Math.imul(z,ze)|0;var qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(Me,Be),c=Math.imul(Me,Ke),c=c+Math.imul(Qe,Be)|0,b=Math.imul(Qe,Ke),w=w+Math.imul(Ie,Oe)|0,c=c+Math.imul(Ie,Ce)|0,c=c+Math.imul(Ee,Oe)|0,b=b+Math.imul(Ee,Ce)|0,w=w+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ue)|0,c=c+Math.imul(be,Re)|0,b=b+Math.imul(be,Ue)|0,w=w+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(J,Ne)|0,b=b+Math.imul(J,De)|0,w=w+Math.imul(U,Le)|0,c=c+Math.imul(U,Ve)|0,c=c+Math.imul(W,Le)|0,b=b+Math.imul(W,Ve)|0,w=w+Math.imul(fe,Fe)|0,c=c+Math.imul(fe,je)|0,c=c+Math.imul(K,Fe)|0,b=b+Math.imul(K,je)|0,w=w+Math.imul(oe,qe)|0,c=c+Math.imul(oe,ze)|0,c=c+Math.imul(ue,qe)|0,b=b+Math.imul(ue,ze)|0,w=w+Math.imul(V,We)|0,c=c+Math.imul(V,He)|0,c=c+Math.imul(z,We)|0,b=b+Math.imul(z,He)|0;var zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(Ye,Be),c=Math.imul(Ye,Ke),c=c+Math.imul(Xe,Be)|0,b=Math.imul(Xe,Ke),w=w+Math.imul(Me,Oe)|0,c=c+Math.imul(Me,Ce)|0,c=c+Math.imul(Qe,Oe)|0,b=b+Math.imul(Qe,Ce)|0,w=w+Math.imul(Ie,Re)|0,c=c+Math.imul(Ie,Ue)|0,c=c+Math.imul(Ee,Re)|0,b=b+Math.imul(Ee,Ue)|0,w=w+Math.imul(ye,Ne)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(be,Ne)|0,b=b+Math.imul(be,De)|0,w=w+Math.imul(q,Le)|0,c=c+Math.imul(q,Ve)|0,c=c+Math.imul(J,Le)|0,b=b+Math.imul(J,Ve)|0,w=w+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(W,Fe)|0,b=b+Math.imul(W,je)|0,w=w+Math.imul(fe,qe)|0,c=c+Math.imul(fe,ze)|0,c=c+Math.imul(K,qe)|0,b=b+Math.imul(K,ze)|0,w=w+Math.imul(oe,We)|0,c=c+Math.imul(oe,He)|0,c=c+Math.imul(ue,We)|0,b=b+Math.imul(ue,He)|0,w=w+Math.imul(V,$e)|0,c=c+Math.imul(V,Ge)|0,c=c+Math.imul(z,$e)|0,b=b+Math.imul(z,Ge)|0;var Wr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(ke,Be),c=Math.imul(ke,Ke),c=c+Math.imul(Pe,Be)|0,b=Math.imul(Pe,Ke),w=w+Math.imul(Ye,Oe)|0,c=c+Math.imul(Ye,Ce)|0,c=c+Math.imul(Xe,Oe)|0,b=b+Math.imul(Xe,Ce)|0,w=w+Math.imul(Me,Re)|0,c=c+Math.imul(Me,Ue)|0,c=c+Math.imul(Qe,Re)|0,b=b+Math.imul(Qe,Ue)|0,w=w+Math.imul(Ie,Ne)|0,c=c+Math.imul(Ie,De)|0,c=c+Math.imul(Ee,Ne)|0,b=b+Math.imul(Ee,De)|0,w=w+Math.imul(ye,Le)|0,c=c+Math.imul(ye,Ve)|0,c=c+Math.imul(be,Le)|0,b=b+Math.imul(be,Ve)|0,w=w+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(J,Fe)|0,b=b+Math.imul(J,je)|0,w=w+Math.imul(U,qe)|0,c=c+Math.imul(U,ze)|0,c=c+Math.imul(W,qe)|0,b=b+Math.imul(W,ze)|0,w=w+Math.imul(fe,We)|0,c=c+Math.imul(fe,He)|0,c=c+Math.imul(K,We)|0,b=b+Math.imul(K,He)|0,w=w+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(ue,$e)|0,b=b+Math.imul(ue,Ge)|0,w=w+Math.imul(V,Ze)|0,c=c+Math.imul(V,Je)|0,c=c+Math.imul(z,Ze)|0,b=b+Math.imul(z,Je)|0;var Hr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ke,Oe),c=Math.imul(ke,Ce),c=c+Math.imul(Pe,Oe)|0,b=Math.imul(Pe,Ce),w=w+Math.imul(Ye,Re)|0,c=c+Math.imul(Ye,Ue)|0,c=c+Math.imul(Xe,Re)|0,b=b+Math.imul(Xe,Ue)|0,w=w+Math.imul(Me,Ne)|0,c=c+Math.imul(Me,De)|0,c=c+Math.imul(Qe,Ne)|0,b=b+Math.imul(Qe,De)|0,w=w+Math.imul(Ie,Le)|0,c=c+Math.imul(Ie,Ve)|0,c=c+Math.imul(Ee,Le)|0,b=b+Math.imul(Ee,Ve)|0,w=w+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(be,Fe)|0,b=b+Math.imul(be,je)|0,w=w+Math.imul(q,qe)|0,c=c+Math.imul(q,ze)|0,c=c+Math.imul(J,qe)|0,b=b+Math.imul(J,ze)|0,w=w+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(W,We)|0,b=b+Math.imul(W,He)|0,w=w+Math.imul(fe,$e)|0,c=c+Math.imul(fe,Ge)|0,c=c+Math.imul(K,$e)|0,b=b+Math.imul(K,Ge)|0,w=w+Math.imul(oe,Ze)|0,c=c+Math.imul(oe,Je)|0,c=c+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Je)|0;var $r=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ke,Re),c=Math.imul(ke,Ue),c=c+Math.imul(Pe,Re)|0,b=Math.imul(Pe,Ue),w=w+Math.imul(Ye,Ne)|0,c=c+Math.imul(Ye,De)|0,c=c+Math.imul(Xe,Ne)|0,b=b+Math.imul(Xe,De)|0,w=w+Math.imul(Me,Le)|0,c=c+Math.imul(Me,Ve)|0,c=c+Math.imul(Qe,Le)|0,b=b+Math.imul(Qe,Ve)|0,w=w+Math.imul(Ie,Fe)|0,c=c+Math.imul(Ie,je)|0,c=c+Math.imul(Ee,Fe)|0,b=b+Math.imul(Ee,je)|0,w=w+Math.imul(ye,qe)|0,c=c+Math.imul(ye,ze)|0,c=c+Math.imul(be,qe)|0,b=b+Math.imul(be,ze)|0,w=w+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(J,We)|0,b=b+Math.imul(J,He)|0,w=w+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(W,$e)|0,b=b+Math.imul(W,Ge)|0,w=w+Math.imul(fe,Ze)|0,c=c+Math.imul(fe,Je)|0,c=c+Math.imul(K,Ze)|0,b=b+Math.imul(K,Je)|0;var Gr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(ke,Ne),c=Math.imul(ke,De),c=c+Math.imul(Pe,Ne)|0,b=Math.imul(Pe,De),w=w+Math.imul(Ye,Le)|0,c=c+Math.imul(Ye,Ve)|0,c=c+Math.imul(Xe,Le)|0,b=b+Math.imul(Xe,Ve)|0,w=w+Math.imul(Me,Fe)|0,c=c+Math.imul(Me,je)|0,c=c+Math.imul(Qe,Fe)|0,b=b+Math.imul(Qe,je)|0,w=w+Math.imul(Ie,qe)|0,c=c+Math.imul(Ie,ze)|0,c=c+Math.imul(Ee,qe)|0,b=b+Math.imul(Ee,ze)|0,w=w+Math.imul(ye,We)|0,c=c+Math.imul(ye,He)|0,c=c+Math.imul(be,We)|0,b=b+Math.imul(be,He)|0,w=w+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(J,$e)|0,b=b+Math.imul(J,Ge)|0,w=w+Math.imul(U,Ze)|0,c=c+Math.imul(U,Je)|0,c=c+Math.imul(W,Ze)|0,b=b+Math.imul(W,Je)|0;var Zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(ke,Le),c=Math.imul(ke,Ve),c=c+Math.imul(Pe,Le)|0,b=Math.imul(Pe,Ve),w=w+Math.imul(Ye,Fe)|0,c=c+Math.imul(Ye,je)|0,c=c+Math.imul(Xe,Fe)|0,b=b+Math.imul(Xe,je)|0,w=w+Math.imul(Me,qe)|0,c=c+Math.imul(Me,ze)|0,c=c+Math.imul(Qe,qe)|0,b=b+Math.imul(Qe,ze)|0,w=w+Math.imul(Ie,We)|0,c=c+Math.imul(Ie,He)|0,c=c+Math.imul(Ee,We)|0,b=b+Math.imul(Ee,He)|0,w=w+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(be,$e)|0,b=b+Math.imul(be,Ge)|0,w=w+Math.imul(q,Ze)|0,c=c+Math.imul(q,Je)|0,c=c+Math.imul(J,Ze)|0,b=b+Math.imul(J,Je)|0;var Jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ke,Fe),c=Math.imul(ke,je),c=c+Math.imul(Pe,Fe)|0,b=Math.imul(Pe,je),w=w+Math.imul(Ye,qe)|0,c=c+Math.imul(Ye,ze)|0,c=c+Math.imul(Xe,qe)|0,b=b+Math.imul(Xe,ze)|0,w=w+Math.imul(Me,We)|0,c=c+Math.imul(Me,He)|0,c=c+Math.imul(Qe,We)|0,b=b+Math.imul(Qe,He)|0,w=w+Math.imul(Ie,$e)|0,c=c+Math.imul(Ie,Ge)|0,c=c+Math.imul(Ee,$e)|0,b=b+Math.imul(Ee,Ge)|0,w=w+Math.imul(ye,Ze)|0,c=c+Math.imul(ye,Je)|0,c=c+Math.imul(be,Ze)|0,b=b+Math.imul(be,Je)|0;var Qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(ke,qe),c=Math.imul(ke,ze),c=c+Math.imul(Pe,qe)|0,b=Math.imul(Pe,ze),w=w+Math.imul(Ye,We)|0,c=c+Math.imul(Ye,He)|0,c=c+Math.imul(Xe,We)|0,b=b+Math.imul(Xe,He)|0,w=w+Math.imul(Me,$e)|0,c=c+Math.imul(Me,Ge)|0,c=c+Math.imul(Qe,$e)|0,b=b+Math.imul(Qe,Ge)|0,w=w+Math.imul(Ie,Ze)|0,c=c+Math.imul(Ie,Je)|0,c=c+Math.imul(Ee,Ze)|0,b=b+Math.imul(Ee,Je)|0;var Yr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(ke,We),c=Math.imul(ke,He),c=c+Math.imul(Pe,We)|0,b=Math.imul(Pe,He),w=w+Math.imul(Ye,$e)|0,c=c+Math.imul(Ye,Ge)|0,c=c+Math.imul(Xe,$e)|0,b=b+Math.imul(Xe,Ge)|0,w=w+Math.imul(Me,Ze)|0,c=c+Math.imul(Me,Je)|0,c=c+Math.imul(Qe,Ze)|0,b=b+Math.imul(Qe,Je)|0;var Xr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(ke,$e),c=Math.imul(ke,Ge),c=c+Math.imul(Pe,$e)|0,b=Math.imul(Pe,Ge),w=w+Math.imul(Ye,Ze)|0,c=c+Math.imul(Ye,Je)|0,c=c+Math.imul(Xe,Ze)|0,b=b+Math.imul(Xe,Je)|0;var eo=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(ke,Ze),c=Math.imul(ke,Je),c=c+Math.imul(Pe,Ze)|0,b=Math.imul(Pe,Je);var to=(E+w|0)+((c&8191)<<13)|0;return E=(b+(c>>>13)|0)+(to>>>26)|0,to&=67108863,S[0]=Nr,S[1]=Dr,S[2]=Lr,S[3]=Vr,S[4]=Fr,S[5]=jr,S[6]=qr,S[7]=zr,S[8]=Wr,S[9]=Hr,S[10]=$r,S[11]=Gr,S[12]=Zr,S[13]=Jr,S[14]=Qr,S[15]=Yr,S[16]=Xr,S[17]=eo,S[18]=to,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=O);function R(A,s,u){u.negative=s.negative^A.negative,u.length=A.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,w=Math.min(v,s.length-1),c=Math.max(0,v-A.length+1);c<=w;c++){var b=v-c,D=A.words[b]|0,V=s.words[c]|0,z=D*V,Q=z&67108863;S=S+(z/67108864|0)|0,Q=Q+E|0,E=Q&67108863,S=S+(Q>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}n(R,"bigMulTo");function j(A,s,u){var m=new F;return m.mulp(A,s,u)}n(j,"jumboMulTo"),o.prototype.mulTo=n(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=O(this,s,u):y<1024?m=R(this,s,u):m=j(this,s,u),m},"mulTo");function F(A,s){this.x=A,this.y=s}n(F,"FFTM"),F.prototype.makeRBT=n(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),F.prototype.revBin=n(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),F.prototype.permute=n(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),F.prototype.transform=n(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var w=E<<1,c=Math.cos(2*Math.PI/w),b=Math.sin(2*Math.PI/w),D=0;D<v;D+=w)for(var V=c,z=b,Q=0;Q<E;Q++){var oe=m[D+Q],ue=y[D+Q],ft=m[D+Q+E],fe=y[D+Q+E],K=V*ft-z*fe;fe=V*fe+z*ft,ft=K,m[D+Q]=oe+ft,y[D+Q]=ue+fe,m[D+Q+E]=oe-ft,y[D+Q+E]=ue-fe,Q!==w&&(K=c*V-b*z,z=c*z+b*V,V=K)}},"transform"),F.prototype.guessLen13b=n(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),F.prototype.conjugate=n(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),F.prototype.normalize13b=n(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),F.prototype.convert13b=n(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),F.prototype.stub=n(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),F.prototype.mulp=n(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),w=new Array(y),c=new Array(y),b=new Array(y),D=new Array(y),V=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,b,y),this.transform(E,S,w,c,y,v),this.transform(b,S,D,V,y,v);for(var Q=0;Q<y;Q++){var oe=w[Q]*D[Q]-c[Q]*V[Q];c[Q]=w[Q]*V[Q]+c[Q]*D[Q],w[Q]=oe}return this.conjugate(w,c,y),this.transform(w,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),j(this,s,u)},"mulf"),o.prototype.imul=n(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=n(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=n(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=n(function(){return this.mul(this)},"sqr"),o.prototype.isqr=n(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=n(function(s){var u=k(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,w=(this.words[v]|0)-E<<u;this.words[v]=w|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=n(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=n(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,w=m;if(y-=S,y=Math.max(0,y),w){for(var c=0;c<S;c++)w.words[c]=this.words[c];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=b<<26-v|D>>>v,b=D&E}return w&&b!==0&&(w.words[w.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=n(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=n(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=n(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=n(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=n(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=n(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=n(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=n(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=n(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=n(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=n(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=n(function(){return this.negative=0,this},"iabs"),o.prototype.abs=n(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=n(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var w=(s.words[v]|0)*u;S-=w&67108863,E=(S>>26)-(w/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=n(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var w=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=w+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var D=y.clone()._ishlnsubmul(v,1,w);D.negative===0&&(y=D,c&&(c.words[w]=1));for(var V=w-1;V>=0;V--){var z=(y.words[v.length+V]|0)*67108864+(y.words[v.length+V-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,V);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,V),y.isZero()||(y.negative^=1);c&&(c.words[V]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=n(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=n(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=n(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=n(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=n(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=n(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=n(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=n(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),w=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++w;for(var c=m.clone(),b=u.clone();!u.isZero();){for(var D=0,V=1;!(u.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(b)),y.iushrn(1),v.iushrn(1);for(var z=0,Q=1;!(m.words[0]&Q)&&z<26;++z,Q<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(b)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(w)}},"egcd"),o.prototype._invmp=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(u.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,b=1;!(m.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=n(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=n(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=n(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=n(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=n(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=n(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=n(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=n(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=n(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=n(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=n(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=n(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=n(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=n(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=n(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=n(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=n(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=n(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=n(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=n(function(s){return this.cmp(s)===0},"eq"),o.red=n(function(s){return new Z(s)},"red"),o.prototype.toRed=n(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=n(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=n(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=n(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=n(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=n(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=n(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=n(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=n(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=n(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=n(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=n(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=n(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=n(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=n(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Y={k256:null,p224:null,p192:null,p25519:null};function L(A,s){this.name=A,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}n(L,"MPrime"),L.prototype._tmp=n(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),L.prototype.ireduce=n(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),L.prototype.split=n(function(s,u){s.iushrn(this.n,0,u)},"split"),L.prototype.imulK=n(function(s){return s.imul(this.k)},"imulK");function ce(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(ce,"K256"),i(ce,L),ce.prototype.split=n(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=n(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function te(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(te,"P224"),i(te,L);function ie(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ie,"P192"),i(ie,L);function ae(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ae,"P25519"),i(ae,L),ae.prototype.imulK=n(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=n(function(s){if(Y[s])return Y[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new te;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Y[s]=u,u},"prime");function Z(A){if(typeof A=="string"){var s=o._prime(A);this.m=s.p,this.prime=s}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}n(Z,"Red"),Z.prototype._verify1=n(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=n(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=n(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=n(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=n(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),Z.prototype.iadd=n(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),Z.prototype.sub=n(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),Z.prototype.isub=n(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),Z.prototype.shl=n(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=n(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=n(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=n(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=n(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=n(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,w).cmp(E)!==0;)c.redIAdd(E);for(var b=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),V=this.pow(s,y),z=v;V.cmp(S)!==0;){for(var Q=V,oe=0;Q.cmp(S)!==0;oe++)Q=Q.redSqr();r(oe<z);var ue=this.pow(b,new o(1).iushln(z-oe-1));D=D.redMul(ue),b=ue.redSqr(),V=V.redMul(b),z=oe}return D},"sqrt"),Z.prototype.invm=n(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=n(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,w=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var b=u.words[v],D=c-1;D>=0;D--){var V=b>>D&1;if(S!==y[0]&&(S=this.sqr(S)),V===0&&E===0){w=0;continue}E<<=1,E|=V,w++,!(w!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),w=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=n(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=n(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=n(function(s){return new ge(s)},"mont");function ge(A){Z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ge,"Mont"),i(ge,Z),ge.prototype.convertTo=n(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),ge.prototype.convertFrom=n(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),ge.prototype.imul=n(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),ge.prototype.mul=n(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),ge.prototype.invm=n(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Ud>"u"||Ud,Vy)});var jy=de(ps=>{"use strict";d();h();Object.defineProperty(ps,"__esModule",{value:!0});var wo=vo(),D2=K0().ec,Nd=new D2("secp256k1"),hs=Nd.curve;ps.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new wo(e);if(r.ucmp(hs.n)>=0)throw new Error("couldn't export to DER format");var i=Nd.g.mul(r);return Fy(i.getX(),i.getY(),t)};ps.privateKeyModInverse=function(e){var t=new wo(e);if(t.ucmp(hs.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(hs.n).toArrayLike(Buffer,"be",32)};ps.signatureImport=function(e){var t=new wo(e.r);t.ucmp(hs.n)>=0&&(t=new wo(0));var r=new wo(e.s);return r.ucmp(hs.n)>=0&&(r=new wo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};ps.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var i=Nd.keyFromPublic(e),o=new wo(t);if(o.ucmp(hs.n)>=0||o.isZero())throw new Error("scalar was invalid (zero or overflow)");var a=i.pub.mul(o);return Fy(a.getX(),a.getY(),r)};var Fy=n(function(e,t,r){var i;return r?(i=Buffer.alloc(33),i[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(i,1)):(i=Buffer.alloc(65),i[0]=4,e.toArrayLike(Buffer,"be",32).copy(i,1),t.toArrayLike(Buffer,"be",32).copy(i,33)),i},"toPublicKey")});var qy=de(Ea=>{"use strict";d();h();Object.defineProperty(Ea,"__esModule",{value:!0});var{Buffer:Sa}=en(),L2=Sa.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),V2=Sa.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Ea.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var i=Sa.from(r?L2:V2);return e.copy(i,r?8:9),t.copy(i,r?181:214),i};Ea.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var i=e[r]&127;if(r+=1,i<1||i>2||t<r+i)return null;var o=e[r+i-1]|(i>1?e[r+i-2]<<8:0);return r+=i,t<r+o||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Ea.signatureImportLax=function(e){var t=Sa.alloc(32,0),r=Sa.alloc(32,0),i=e.length,o=0;if(e[o++]!==48)return null;var a=e[o++];if(a&128&&(o+=a-128,o>i)||e[o++]!==2)return null;var l=e[o++];if(l&128){if(a=l-128,o+a>i)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(l=0;a>0;o+=1,a-=1)l=(l<<8)+e[o]}if(l>i-o)return null;var f=o;if(o+=l,e[o++]!==2)return null;var g=e[o++];if(g&128){if(a=g-128,o+a>i)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(g=0;a>0;o+=1,a-=1)g=(g<<8)+e[o]}if(g>i-o)return null;var x=o;for(o+=g;l>0&&e[f]===0;l-=1,f+=1);if(l>32)return null;var I=e.slice(f,f+l);for(I.copy(t,32-I.length);g>0&&e[x]===0;g-=1,x+=1);if(g>32)return null;var M=e.slice(x,x+g);return M.copy(r,32-M.length),{r:t,s:r}}});var mu=de(Te=>{"use strict";d();h();Object.defineProperty(Te,"__esModule",{value:!0});Te.ecdhUnsafe=Te.ecdh=Te.recover=Te.verify=Te.sign=Te.signatureImportLax=Te.signatureImport=Te.signatureExport=Te.signatureNormalize=Te.publicKeyCombine=Te.publicKeyTweakMul=Te.publicKeyTweakAdd=Te.publicKeyVerify=Te.publicKeyConvert=Te.publicKeyCreate=Te.privateKeyTweakMul=Te.privateKeyTweakAdd=Te.privateKeyModInverse=Te.privateKeyNegate=Te.privateKeyImport=Te.privateKeyExport=Te.privateKeyVerify=void 0;var Ht=Ly(),pu=jy(),Dd=qy();Te.privateKeyVerify=function(e){return e.length!==32?!1:Ht.privateKeyVerify(Uint8Array.from(e))};Te.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=pu.privateKeyExport(e,t);return Dd.privateKeyExport(e,r,t)};Te.privateKeyImport=function(e){if(e=Dd.privateKeyImport(e),e!==null&&e.length===32&&Te.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Te.privateKeyNegate=function(e){return Buffer.from(Ht.privateKeyNegate(Uint8Array.from(e)))};Te.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(pu.privateKeyModInverse(Uint8Array.from(e)))};Te.privateKeyTweakAdd=function(e,t){return Buffer.from(Ht.privateKeyTweakAdd(Uint8Array.from(e),t))};Te.privateKeyTweakMul=function(e,t){return Buffer.from(Ht.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Te.publicKeyCreate=function(e,t){return Buffer.from(Ht.publicKeyCreate(Uint8Array.from(e),t))};Te.publicKeyConvert=function(e,t){return Buffer.from(Ht.publicKeyConvert(Uint8Array.from(e),t))};Te.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Ht.publicKeyVerify(Uint8Array.from(e))};Te.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Ht.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Te.publicKeyTweakMul=function(e,t,r){return Buffer.from(Ht.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Te.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(i){r.push(Uint8Array.from(i))}),Buffer.from(Ht.publicKeyCombine(r,t))};Te.signatureNormalize=function(e){return Buffer.from(Ht.signatureNormalize(Uint8Array.from(e)))};Te.signatureExport=function(e){return Buffer.from(Ht.signatureExport(Uint8Array.from(e)))};Te.signatureImport=function(e){return Buffer.from(Ht.signatureImport(Uint8Array.from(e)))};Te.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=Dd.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return pu.signatureImport(t)};Te.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var i=void 0;if(r){if(i={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");i.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(i.noncefn=function(a,l,f,g,x){var I=f!=null?Buffer.from(f):null,M=g!=null?Buffer.from(g):null,k=Buffer.from("");return r.noncefn&&(k=r.noncefn(Buffer.from(a),Buffer.from(l),I,M,x)),new Uint8Array(k)})}var o=Ht.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),i);return{signature:Buffer.from(o.signature),recovery:o.recid}};Te.verify=function(e,t,r){return Ht.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Te.recover=function(e,t,r,i){return Buffer.from(Ht.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),i))};Te.ecdh=function(e,t){return Buffer.from(Ht.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Te.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(pu.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var Ld=de((D9,zy)=>{d();h();zy.exports=n(function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},"isHexPrefixed")});var Hy=de((j9,Wy)=>{d();h();var F2=Ld();Wy.exports=n(function(t){return typeof t!="string"?t:F2(t)?t.slice(2):t},"stripHexPrefix")});var bo=de((H9,Zy)=>{"use strict";d();h();var j2=Ld(),$y=Hy();function gu(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}n(gu,"padToEven");function Gy(e){var t=e.toString(16);return"0x"+t}n(Gy,"intToHex");function q2(e){var t=Gy(e);return new Buffer(gu(t.slice(2)),"hex")}n(q2,"intToBuffer");function z2(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}n(z2,"getBinarySize");function W2(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(i){return e.indexOf(i)>=0})}n(W2,"arrayContainsArray");function H2(e){var t=new Buffer(gu($y(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}n(H2,"toUtf8");function $2(e){var t="",r=0,i=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<i;r+=2){var o=parseInt(e.substr(r,2),16);t+=String.fromCharCode(o)}return t}n($2,"toAscii");function G2(e){var t=new Buffer(e,"utf8");return"0x"+gu(t.toString("hex")).replace(/^0+|0+$/g,"")}n(G2,"fromUtf8");function Z2(e){for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i.toString(16);t+=o.length<2?"0"+o:o}return"0x"+t}n(Z2,"fromAscii");function J2(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var i=[],o=0;o<e.length;o++){var a=e[o][t];if(r&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi");i.push(a)}return i}n(J2,"getKeys");function Q2(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}n(Q2,"isHexString");Zy.exports={arrayContainsArray:W2,intToBuffer:q2,getBinarySize:z2,isHexPrefixed:j2,stripHexPrefix:$y,padToEven:gu,intToHex:Gy,fromAscii:Z2,fromUtf8:G2,toAscii:$2,toUtf8:H2,getKeys:J2,isHexString:Q2}});var yu=de(_n=>{"use strict";d();h();var Y2=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_n,"__esModule",{value:!0});_n.getLength=_n.decode=_n.encode=void 0;var X2=Y2(y1());function Qy(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(Qy(e[r]));var i=Buffer.concat(t);return Buffer.concat([Jy(i.length,192),i])}else{var o=qd(e);return o.length===1&&o[0]<128?o:Buffer.concat([Jy(o.length,128),o])}}n(Qy,"encode");_n.encode=Qy;function Vd(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}n(Vd,"safeParseInt");function Jy(e,t){if(e<56)return Buffer.from([e+t]);var r=jd(e),i=r.length/2,o=jd(t+55+i);return Buffer.from(o+r,"hex")}n(Jy,"encodeLength");function eM(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=qd(e),i=Fd(r);if(t)return i;if(i.remainder.length!==0)throw new Error("invalid remainder");return i.data}n(eM,"decode");_n.decode=eM;function tM(e){if(!e||e.length===0)return Buffer.from([]);var t=qd(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246,o=Vd(t.slice(1,i).toString("hex"),16);return i+o}n(tM,"getLength");_n.getLength=tM;function Fd(e){var t,r,i,o,a,l=[],f=e[0];if(f<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(f<=183){if(t=f-127,f===128?i=Buffer.from([]):i=e.slice(1,t),t===2&&i[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:i,remainder:e.slice(t)}}else if(f<=191){if(r=f-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Vd(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(i=e.slice(r,t+r),i.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:i,remainder:e.slice(t+r)}}else if(f<=247){for(t=f-191,o=e.slice(1,t);o.length;)a=Fd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}else{r=f-246,t=Vd(e.slice(1,r).toString("hex"),16);var g=r+t;if(g>e.length)throw new Error("invalid rlp: total length is larger than the data");if(o=e.slice(r,g),o.length===0)throw new Error("invalid rlp, List has a invalid length");for(;o.length;)a=Fd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(g)}}}n(Fd,"_decode");function Yy(e){return e.slice(0,2)==="0x"}n(Yy,"isHexPrefixed");function rM(e){return typeof e!="string"?e:Yy(e)?e.slice(2):e}n(rM,"stripHexPrefix");function jd(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}n(jd,"intToHex");function nM(e){return e.length%2?"0"+e:e}n(nM,"padToEven");function iM(e){var t=jd(e);return Buffer.from(t,"hex")}n(iM,"intToBuffer");function qd(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return Yy(e)?Buffer.from(nM(rM(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?iM(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(X2.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}n(qd,"toBuffer")});var ev=de(It=>{"use strict";d();h();Object.defineProperty(It,"__esModule",{value:!0});It.KECCAK256_RLP=It.KECCAK256_RLP_S=It.KECCAK256_RLP_ARRAY=It.KECCAK256_RLP_ARRAY_S=It.KECCAK256_NULL=It.KECCAK256_NULL_S=It.TWO_POW256=It.MAX_INTEGER=void 0;var Xy=vo(),{Buffer:zd}=en();It.MAX_INTEGER=new Xy("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);It.TWO_POW256=new Xy("10000000000000000000000000000000000000000000000000000000000000000",16);It.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";It.KECCAK256_NULL=zd.from(It.KECCAK256_NULL_S,"hex");It.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";It.KECCAK256_RLP_ARRAY=zd.from(It.KECCAK256_RLP_ARRAY_S,"hex");It.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";It.KECCAK256_RLP=zd.from(It.KECCAK256_RLP_S,"hex")});var gs=de(ot=>{"use strict";d();h();Object.defineProperty(ot,"__esModule",{value:!0});ot.baToJSON=ot.addHexPrefix=ot.toUnsigned=ot.fromSigned=ot.bufferToHex=ot.bufferToInt=ot.toBuffer=ot.stripZeros=ot.unpad=ot.setLengthRight=ot.setLength=ot.setLengthLeft=ot.zeros=void 0;var ms=bo(),Wd=vo();ot.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};ot.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var i=ot.zeros(t);return e=ot.toBuffer(e),r?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};ot.setLength=ot.setLengthLeft;ot.setLengthRight=function(e,t){return ot.setLength(e,t,!0)};ot.unpad=function(e){e=ms.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};ot.stripZeros=ot.unpad;ot.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(ms.isHexString(e))e=Buffer.from(ms.padToEven(ms.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=ms.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(Wd.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};ot.bufferToInt=function(e){return new Wd(ot.toBuffer(e)).toNumber()};ot.bufferToHex=function(e){return e=ot.toBuffer(e),"0x"+e.toString("hex")};ot.fromSigned=function(e){return new Wd(e).fromTwos(256)};ot.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};ot.addHexPrefix=function(e){return typeof e!="string"||ms.isHexPrefixed(e)?e:"0x"+e};ot.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(ot.baToJSON(e[r]));return t}}});var tv=de(Hd=>{"use strict";d();h();Object.defineProperty(Hd,"__esModule",{value:!0});function oM(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}n(oM,"createHashFunction");Hd.createHashFunction=oM});var iv=de((lF,nv)=>{d();h();var{Transform:sM}=B0();nv.exports=e=>class rv extends sM{static{n(this,"Keccak")}constructor(r,i,o,a,l){super(l),this._rate=r,this._capacity=i,this._delimitedSuffix=o,this._hashBitLength=a,this._options=l,this._state=new e,this._state.initialize(r,i),this._finalized=!1}_transform(r,i,o){let a=null;try{this.update(r,i)}catch(l){a=l}o(a)}_flush(r){let i=null;try{this.push(this.digest())}catch(o){i=o}r(i)}update(r,i){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,i)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let i=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(i=i.toString(r)),this._resetState(),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new rv(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var av=de((pF,sv)=>{d();h();var{Transform:aM}=B0();sv.exports=e=>class ov extends aM{static{n(this,"Shake")}constructor(r,i,o,a){super(a),this._rate=r,this._capacity=i,this._delimitedSuffix=o,this._options=a,this._state=new e,this._state.initialize(r,i),this._finalized=!1}_transform(r,i,o){let a=null;try{this.update(r,i)}catch(l){a=l}o(a)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,i){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,i)),this._state.absorb(r),this}squeeze(r,i){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let o=this._state.squeeze(r);return i!==void 0&&(o=o.toString(i)),o}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new ov(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var uv=de((vF,cv)=>{d();h();var cM=iv(),uM=av();cv.exports=function(e){let t=cM(e),r=uM(e);return function(i,o){switch(typeof i=="string"?i.toLowerCase():i){case"keccak224":return new t(1152,448,null,224,o);case"keccak256":return new t(1088,512,null,256,o);case"keccak384":return new t(832,768,null,384,o);case"keccak512":return new t(576,1024,null,512,o);case"sha3-224":return new t(1152,448,6,224,o);case"sha3-256":return new t(1088,512,6,256,o);case"sha3-384":return new t(832,768,6,384,o);case"sha3-512":return new t(576,1024,6,512,o);case"shake128":return new r(1344,256,31,o);case"shake256":return new r(1088,512,31,o);default:throw new Error("Invald algorithm: "+i)}}}});var dv=de(fv=>{d();h();var lv=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];fv.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],g=e[6]^e[16]^e[26]^e[36]^e[46],x=e[7]^e[17]^e[27]^e[37]^e[47],I=e[8]^e[18]^e[28]^e[38]^e[48],M=e[9]^e[19]^e[29]^e[39]^e[49],k=I^(o<<1|a>>>31),O=M^(a<<1|o>>>31),C=e[0]^k,R=e[1]^O,j=e[10]^k,F=e[11]^O,Y=e[20]^k,L=e[21]^O,ce=e[30]^k,te=e[31]^O,ie=e[40]^k,ae=e[41]^O;k=r^(l<<1|f>>>31),O=i^(f<<1|l>>>31);let Z=e[2]^k,ge=e[3]^O,A=e[12]^k,s=e[13]^O,u=e[22]^k,m=e[23]^O,y=e[32]^k,v=e[33]^O,S=e[42]^k,E=e[43]^O;k=o^(g<<1|x>>>31),O=a^(x<<1|g>>>31);let w=e[4]^k,c=e[5]^O,b=e[14]^k,D=e[15]^O,V=e[24]^k,z=e[25]^O,Q=e[34]^k,oe=e[35]^O,ue=e[44]^k,ft=e[45]^O;k=l^(I<<1|M>>>31),O=f^(M<<1|I>>>31);let fe=e[6]^k,K=e[7]^O,N=e[16]^k,U=e[17]^O,W=e[26]^k,re=e[27]^O,q=e[36]^k,J=e[37]^O,nt=e[46]^k,ye=e[47]^O;k=g^(r<<1|i>>>31),O=x^(i<<1|r>>>31);let be=e[8]^k,Mr=e[9]^O,Ie=e[18]^k,Ee=e[19]^O,vn=e[28]^k,Me=e[29]^O,Qe=e[38]^k,gi=e[39]^O,Ye=e[48]^k,Xe=e[49]^O,Vn=C,ke=R,Pe=F<<4|j>>>28,Fn=j<<4|F>>>28,Be=Y<<3|L>>>29,Ke=L<<3|Y>>>29,jn=te<<9|ce>>>23,Oe=ce<<9|te>>>23,Ce=ie<<18|ae>>>14,qn=ae<<18|ie>>>14,Re=Z<<1|ge>>>31,Ue=ge<<1|Z>>>31,zn=s<<12|A>>>20,Ne=A<<12|s>>>20,De=u<<10|m>>>22,Wn=m<<10|u>>>22,Le=v<<13|y>>>19,Ve=y<<13|v>>>19,Hn=S<<2|E>>>30,Fe=E<<2|S>>>30,je=c<<30|w>>>2,$n=w<<30|c>>>2,qe=b<<6|D>>>26,ze=D<<6|b>>>26,Gn=z<<11|V>>>21,We=V<<11|z>>>21,He=Q<<15|oe>>>17,Zn=oe<<15|Q>>>17,$e=ft<<29|ue>>>3,Ge=ue<<29|ft>>>3,Jn=fe<<28|K>>>4,Ze=K<<28|fe>>>4,Je=U<<23|N>>>9,Nr=N<<23|U>>>9,Dr=W<<25|re>>>7,Lr=re<<25|W>>>7,Vr=q<<21|J>>>11,Fr=J<<21|q>>>11,jr=ye<<24|nt>>>8,qr=nt<<24|ye>>>8,zr=be<<27|Mr>>>5,Wr=Mr<<27|be>>>5,Hr=Ie<<20|Ee>>>12,$r=Ee<<20|Ie>>>12,Gr=Me<<7|vn>>>25,Zr=vn<<7|Me>>>25,Jr=Qe<<8|gi>>>24,Qr=gi<<8|Qe>>>24,Yr=Ye<<14|Xe>>>18,Xr=Xe<<14|Ye>>>18;e[0]=Vn^~zn&Gn,e[1]=ke^~Ne&We,e[10]=Jn^~Hr&Be,e[11]=Ze^~$r&Ke,e[20]=Re^~qe&Dr,e[21]=Ue^~ze&Lr,e[30]=zr^~Pe&De,e[31]=Wr^~Fn&Wn,e[40]=je^~Je&Gr,e[41]=$n^~Nr&Zr,e[2]=zn^~Gn&Vr,e[3]=Ne^~We&Fr,e[12]=Hr^~Be&Le,e[13]=$r^~Ke&Ve,e[22]=qe^~Dr&Jr,e[23]=ze^~Lr&Qr,e[32]=Pe^~De&He,e[33]=Fn^~Wn&Zn,e[42]=Je^~Gr&jn,e[43]=Nr^~Zr&Oe,e[4]=Gn^~Vr&Yr,e[5]=We^~Fr&Xr,e[14]=Be^~Le&$e,e[15]=Ke^~Ve&Ge,e[24]=Dr^~Jr&Ce,e[25]=Lr^~Qr&qn,e[34]=De^~He&jr,e[35]=Wn^~Zn&qr,e[44]=Gr^~jn&Hn,e[45]=Zr^~Oe&Fe,e[6]=Vr^~Yr&Vn,e[7]=Fr^~Xr&ke,e[16]=Le^~$e&Jn,e[17]=Ve^~Ge&Ze,e[26]=Jr^~Ce&Re,e[27]=Qr^~qn&Ue,e[36]=He^~jr&zr,e[37]=Zn^~qr&Wr,e[46]=jn^~Hn&je,e[47]=Oe^~Fe&$n,e[8]=Yr^~Vn&zn,e[9]=Xr^~ke&Ne,e[18]=$e^~Jn&Hr,e[19]=Ge^~Ze&$r,e[28]=Ce^~Re&qe,e[29]=qn^~Ue&ze,e[38]=jr^~zr&Pe,e[39]=qr^~Wr&Fn,e[48]=Hn^~je&Je,e[49]=Fe^~$n&Nr,e[0]^=lv[t*2],e[1]^=lv[t*2+1]}}});var pv=de((EF,hv)=>{d();h();var vu=dv();function ys(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}n(ys,"Keccak");ys.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};ys.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(vu.p1600(this.state),this.count=0)};ys.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&vu.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),vu.p1600(this.state),this.count=0,this.squeezing=!0};ys.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(vu.p1600(this.state),this.count=0);return t};ys.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};hv.exports=ys});var gv=de((_F,mv)=>{d();h();mv.exports=uv()(pv())});var yv=de(vs=>{"use strict";d();h();Object.defineProperty(vs,"__esModule",{value:!0});var wu=tv(),bu=gv();vs.keccak224=wu.createHashFunction(function(){return bu("keccak224")});vs.keccak256=wu.createHashFunction(function(){return bu("keccak256")});vs.keccak384=wu.createHashFunction(function(){return bu("keccak384")});vs.keccak512=wu.createHashFunction(function(){return bu("keccak512")})});var Su=de(or=>{"use strict";d();h();Object.defineProperty(or,"__esModule",{value:!0});or.rlphash=or.ripemd160=or.sha256=or.keccak256=or.keccak=void 0;var Au=yv(),lM=Au.keccak224,fM=Au.keccak384,dM=Au.keccak256,hM=Au.keccak512,vv=b1(),pM=bo(),mM=yu(),xu=gs();or.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!pM.isHexString(e)?e=Buffer.from(e,"utf8"):e=xu.toBuffer(e),t||(t=256),t){case 224:return lM(e);case 256:return dM(e);case 384:return fM(e);case 512:return hM(e);default:throw new Error("Invald algorithm: keccak"+t)}};or.keccak256=function(e){return or.keccak(e)};or.sha256=function(e){return e=xu.toBuffer(e),vv("sha256").update(e).digest()};or.ripemd160=function(e,t){e=xu.toBuffer(e);var r=vv("rmd160").update(e).digest();return t===!0?xu.setLength(r,32):r};or.rlphash=function(e){return or.keccak(mM.encode(e))}});var wv=de(it=>{"use strict";d();h();Object.defineProperty(it,"__esModule",{value:!0});it.importPublic=it.privateToPublic=it.privateToAddress=it.publicToAddress=it.pubToAddress=it.isValidPublic=it.isValidPrivate=it.isPrecompiled=it.generateAddress2=it.generateAddress=it.isValidChecksumAddress=it.toChecksumAddress=it.isZeroAddress=it.isValidAddress=it.zeroAddress=void 0;var $d=hm(),gM=bo(),ws=mu(),yM=vo(),cn=gs(),bs=Su();it.zeroAddress=function(){var e=20,t=cn.zeros(e);return cn.bufferToHex(t)};it.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};it.isZeroAddress=function(e){var t=it.zeroAddress();return t===cn.addHexPrefix(e)};it.toChecksumAddress=function(e,t){e=gM.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",i=bs.keccak(r+e).toString("hex"),o="0x",a=0;a<e.length;a++)parseInt(i[a],16)>=8?o+=e[a].toUpperCase():o+=e[a];return o};it.isValidChecksumAddress=function(e,t){return it.isValidAddress(e)&&it.toChecksumAddress(e,t)===e};it.generateAddress=function(e,t){e=cn.toBuffer(e);var r=new yM(t);return r.isZero()?bs.rlphash([e,null]).slice(-20):bs.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};it.generateAddress2=function(e,t,r){var i=cn.toBuffer(e),o=cn.toBuffer(t),a=cn.toBuffer(r);$d(i.length===20),$d(o.length===32);var l=bs.keccak256(Buffer.concat([Buffer.from("ff","hex"),i,o,bs.keccak256(a)]));return l.slice(-20)};it.isPrecompiled=function(e){var t=cn.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};it.isValidPrivate=function(e){return ws.privateKeyVerify(e)};it.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?ws.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?ws.publicKeyVerify(e):!1};it.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=cn.toBuffer(e),t&&e.length!==64&&(e=ws.publicKeyConvert(e,!1).slice(1)),$d(e.length===64),bs.keccak(e).slice(-20)};it.publicToAddress=it.pubToAddress;it.privateToAddress=function(e){return it.publicToAddress(it.privateToPublic(e))};it.privateToPublic=function(e){return e=cn.toBuffer(e),ws.publicKeyCreate(e,!1).slice(1)};it.importPublic=function(e){return e=cn.toBuffer(e),e.length!==64&&(e=ws.publicKeyConvert(e,!1).slice(1)),e}});var bv=de(sr=>{"use strict";d();h();Object.defineProperty(sr,"__esModule",{value:!0});sr.hashPersonalMessage=sr.isValidSignature=sr.fromRpcSig=sr.toRpcSig=sr.ecrecover=sr.ecsign=void 0;var Gd=mu(),Eu=vo(),xo=gs(),vM=Su();sr.ecsign=function(e,t,r){var i=Gd.sign(e,t),o=i.recovery,a={r:i.signature.slice(0,32),s:i.signature.slice(32,64),v:r?o+(r*2+35):o+27};return a};sr.ecrecover=function(e,t,r,i,o){var a=Buffer.concat([xo.setLength(r,32),xo.setLength(i,32)],64),l=Zd(t,o);if(!Jd(l))throw new Error("Invalid signature v value");var f=Gd.recover(e,a,l);return Gd.publicKeyConvert(f,!1).slice(1)};sr.toRpcSig=function(e,t,r,i){var o=Zd(e,i);if(!Jd(o))throw new Error("Invalid signature v value");return xo.bufferToHex(Buffer.concat([xo.setLengthLeft(t,32),xo.setLengthLeft(r,32),xo.toBuffer(e)]))};sr.fromRpcSig=function(e){var t=xo.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};sr.isValidSignature=function(e,t,r,i,o){i===void 0&&(i=!0);var a=new Eu("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),l=new Eu("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!Jd(Zd(e,o)))return!1;var f=new Eu(t),g=new Eu(r);return!(f.isZero()||f.gt(l)||g.isZero()||g.gt(l)||i&&g.cmp(a)===1)};sr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return vM.keccak(Buffer.concat([t,e]))};function Zd(e,t){return t?e-(2*t+35):e-27}n(Zd,"calculateSigRecovery");function Jd(e){return e===0||e===1}n(Jd,"isValidSigRecovery")});var Sv=de(Tu=>{"use strict";d();h();Object.defineProperty(Tu,"__esModule",{value:!0});Tu.defineProperties=void 0;var xv=hm(),wM=bo(),Av=yu(),Mu=gs();Tu.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(o){if(o===void 0&&(o=!1),o){var a={};return e._fields.forEach(function(l){a[l]="0x"+e[l].toString("hex")}),a}return Mu.baToJSON(e.raw)},e.serialize=n(function(){return Av.encode(e.raw)},"serialize"),t.forEach(function(o,a){e._fields.push(o.name);function l(){return e.raw[a]}n(l,"getter");function f(g){g=Mu.toBuffer(g),g.toString("hex")==="00"&&!o.allowZero&&(g=Buffer.allocUnsafe(0)),o.allowLess&&o.length?(g=Mu.stripZeros(g),xv(o.length>=g.length,"The field "+o.name+" must not have more "+o.length+" bytes")):!(o.allowZero&&g.length===0)&&o.length&&xv(o.length===g.length,"The field "+o.name+" must have byte length of "+o.length),e.raw[a]=g}n(f,"setter"),Object.defineProperty(e,o.name,{enumerable:!0,configurable:!0,get:l,set:f}),o.default&&(e[o.name]=o.default),o.alias&&Object.defineProperty(e,o.alias,{enumerable:!1,configurable:!0,set:f,get:l})}),r)if(typeof r=="string"&&(r=Buffer.from(wM.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=Av.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(o,a){e[e._fields[a]]=Mu.toBuffer(o)})}else if(typeof r=="object"){var i=Object.keys(r);t.forEach(function(o){i.indexOf(o.name)!==-1&&(e[o.name]=r[o.name]),i.indexOf(o.alias)!==-1&&(e[o.alias]=r[o.alias])})}else throw new Error("invalid data")}});var Ma=de(Bt=>{"use strict";d();h();var bM=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),xs=Bt&&Bt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&bM(t,e,r)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.secp256k1=Bt.rlp=Bt.BN=void 0;var xM=mu();Bt.secp256k1=xM;var AM=bo(),SM=vo();Bt.BN=SM;var EM=yu();Bt.rlp=EM;Object.assign(Bt,AM);xs(ev(),Bt);xs(wv(),Bt);xs(Su(),Bt);xs(bv(),Bt);xs(gs(),Bt);xs(Sv(),Bt)});var Ta=de(ar=>{"use strict";d();h();Object.defineProperty(ar,"__esModule",{value:!0});ar.normalize=ar.recoverPublicKey=ar.concatSig=ar.legacyToBuffer=ar.isNullish=ar.padWithZeroes=void 0;var Kr=Ma(),Qd=bo();function Yd(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}n(Yd,"padWithZeroes");ar.padWithZeroes=Yd;function MM(e){return e==null}n(MM,"isNullish");ar.isNullish=MM;function TM(e){return typeof e=="string"&&!Qd.isHexString(e)?Buffer.from(e):Kr.toBuffer(e)}n(TM,"legacyToBuffer");ar.legacyToBuffer=TM;function IM(e,t,r){let i=Kr.fromSigned(t),o=Kr.fromSigned(r),a=Kr.bufferToInt(e),l=Yd(Kr.toUnsigned(i).toString("hex"),64),f=Yd(Kr.toUnsigned(o).toString("hex"),64),g=Qd.stripHexPrefix(Qd.intToHex(a));return Kr.addHexPrefix(l.concat(f,g))}n(IM,"concatSig");ar.concatSig=IM;function _M(e,t){let r=Kr.fromRpcSig(t);return Kr.ecrecover(e,r.v,r.r,r.s)}n(_M,"recoverPublicKey");ar.recoverPublicKey=_M;function kM(e){if(e){if(typeof e=="number"){let t=Kr.toBuffer(e);e=Kr.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Kr.addHexPrefix(e.toLowerCase())}}n(kM,"normalize");ar.normalize=kM});var Mv=de(Ci=>{"use strict";d();h();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.extractPublicKey=Ci.recoverPersonalSignature=Ci.personalSign=void 0;var As=Ma(),kn=Ta();function PM({privateKey:e,data:t}){if(kn.isNullish(t))throw new Error("Missing data parameter");if(kn.isNullish(e))throw new Error("Missing privateKey parameter");let r=kn.legacyToBuffer(t),i=As.hashPersonalMessage(r),o=As.ecsign(i,e);return kn.concatSig(As.toBuffer(o.v),o.r,o.s)}n(PM,"personalSign");Ci.personalSign=PM;function BM({data:e,signature:t}){if(kn.isNullish(e))throw new Error("Missing data parameter");if(kn.isNullish(t))throw new Error("Missing signature parameter");let r=Ev(e,t),i=As.publicToAddress(r);return As.bufferToHex(i)}n(BM,"recoverPersonalSignature");Ci.recoverPersonalSignature=BM;function KM({data:e,signature:t}){if(kn.isNullish(e))throw new Error("Missing data parameter");if(kn.isNullish(t))throw new Error("Missing signature parameter");return`0x${Ev(e,t).toString("hex")}`}n(KM,"extractPublicKey");Ci.extractPublicKey=KM;function Ev(e,t){let r=As.hashPersonalMessage(kn.legacyToBuffer(e));return kn.recoverPublicKey(r,t)}n(Ev,"getPublicKeyFor")});var Iv=de((Tv,Xd)=>{d();h();(function(e,t){"use strict";function r(A,s){if(!A)throw new Error(s||"Assertion failed")}n(r,"assert");function i(A,s){A.super_=s;var u=n(function(){},"TempCtor");u.prototype=s.prototype,A.prototype=new u,A.prototype.constructor=A}n(i,"inherits");function o(A,s,u){if(o.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(A||0,s||10,u||"be"))}n(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=S0().Buffer}catch{}o.isBN=n(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=n(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=n(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=n(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=n(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=n(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(A,s){var u=A.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}n(l,"parseHex4Bits");function f(A,s,u){var m=l(A,u);return u-1>=s&&(m|=l(A,u-1)<<4),m}n(f,"parseHexByte"),o.prototype._parseHex=n(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var w=s.length-u;for(y=w%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(A,s,u,m){for(var y=0,v=Math.min(A.length,u),S=s;S<v;S++){var E=A.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}n(g,"parseBase"),o.prototype._parseBase=n(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,w=Math.min(S,S-E)+m,c=0,b=m;b<w;b+=y)c=g(s,b,b+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,b,s.length,u),b=0;b<E;b++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=n(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=n(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=n(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=n(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=n(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=n(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=n(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],w=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=x[6-w.length]+w+m:m=w+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=I[s],b=M[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var V=D.modn(b).toString(s);D=D.idivn(b),D.isZero()?m=V+m:m=x[c-V.length]+V+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=n(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=n(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=n(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=n(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=n(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),w,c,b=this.clone();if(S){for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[c]=w;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!b.isZero();c++)w=b.andln(255),b.iushrn(8),E[v-c-1]=w}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=n(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=n(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=n(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=n(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(A){for(var s=new Array(A.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(A.words[m]&1<<y)>>>y}return s}n(k,"toBitArray"),o.prototype.zeroBits=n(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=n(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=n(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=n(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=n(function(){return this.negative!==0},"isNeg"),o.prototype.neg=n(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=n(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=n(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=n(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=n(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=n(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=n(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=n(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=n(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=n(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=n(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=n(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=n(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=n(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=n(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=n(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=n(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=n(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=n(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=n(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=n(function(s){return this.clone().isub(s)},"sub");function O(A,s,u){u.negative=s.negative^A.negative;var m=A.length+s.length|0;u.length=m,m=m-1|0;var y=A.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,w=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var b=w>>>26,D=w&67108863,V=Math.min(c,s.length-1),z=Math.max(0,c-A.length+1);z<=V;z++){var Q=c-z|0;y=A.words[Q]|0,v=s.words[z]|0,S=y*v+D,b+=S/67108864|0,D=S&67108863}u.words[c]=D|0,w=b|0}return w!==0?u.words[c]=w|0:u.length--,u.strip()}n(O,"smallMulTo");var C=n(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,w,c,b,D=y[0]|0,V=D&8191,z=D>>>13,Q=y[1]|0,oe=Q&8191,ue=Q>>>13,ft=y[2]|0,fe=ft&8191,K=ft>>>13,N=y[3]|0,U=N&8191,W=N>>>13,re=y[4]|0,q=re&8191,J=re>>>13,nt=y[5]|0,ye=nt&8191,be=nt>>>13,Mr=y[6]|0,Ie=Mr&8191,Ee=Mr>>>13,vn=y[7]|0,Me=vn&8191,Qe=vn>>>13,gi=y[8]|0,Ye=gi&8191,Xe=gi>>>13,Vn=y[9]|0,ke=Vn&8191,Pe=Vn>>>13,Fn=v[0]|0,Be=Fn&8191,Ke=Fn>>>13,jn=v[1]|0,Oe=jn&8191,Ce=jn>>>13,qn=v[2]|0,Re=qn&8191,Ue=qn>>>13,zn=v[3]|0,Ne=zn&8191,De=zn>>>13,Wn=v[4]|0,Le=Wn&8191,Ve=Wn>>>13,Hn=v[5]|0,Fe=Hn&8191,je=Hn>>>13,$n=v[6]|0,qe=$n&8191,ze=$n>>>13,Gn=v[7]|0,We=Gn&8191,He=Gn>>>13,Zn=v[8]|0,$e=Zn&8191,Ge=Zn>>>13,Jn=v[9]|0,Ze=Jn&8191,Je=Jn>>>13;m.negative=s.negative^u.negative,m.length=19,w=Math.imul(V,Be),c=Math.imul(V,Ke),c=c+Math.imul(z,Be)|0,b=Math.imul(z,Ke);var Nr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,w=Math.imul(oe,Be),c=Math.imul(oe,Ke),c=c+Math.imul(ue,Be)|0,b=Math.imul(ue,Ke),w=w+Math.imul(V,Oe)|0,c=c+Math.imul(V,Ce)|0,c=c+Math.imul(z,Oe)|0,b=b+Math.imul(z,Ce)|0;var Dr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,w=Math.imul(fe,Be),c=Math.imul(fe,Ke),c=c+Math.imul(K,Be)|0,b=Math.imul(K,Ke),w=w+Math.imul(oe,Oe)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(ue,Oe)|0,b=b+Math.imul(ue,Ce)|0,w=w+Math.imul(V,Re)|0,c=c+Math.imul(V,Ue)|0,c=c+Math.imul(z,Re)|0,b=b+Math.imul(z,Ue)|0;var Lr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,w=Math.imul(U,Be),c=Math.imul(U,Ke),c=c+Math.imul(W,Be)|0,b=Math.imul(W,Ke),w=w+Math.imul(fe,Oe)|0,c=c+Math.imul(fe,Ce)|0,c=c+Math.imul(K,Oe)|0,b=b+Math.imul(K,Ce)|0,w=w+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ue)|0,c=c+Math.imul(ue,Re)|0,b=b+Math.imul(ue,Ue)|0,w=w+Math.imul(V,Ne)|0,c=c+Math.imul(V,De)|0,c=c+Math.imul(z,Ne)|0,b=b+Math.imul(z,De)|0;var Vr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,w=Math.imul(q,Be),c=Math.imul(q,Ke),c=c+Math.imul(J,Be)|0,b=Math.imul(J,Ke),w=w+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(W,Oe)|0,b=b+Math.imul(W,Ce)|0,w=w+Math.imul(fe,Re)|0,c=c+Math.imul(fe,Ue)|0,c=c+Math.imul(K,Re)|0,b=b+Math.imul(K,Ue)|0,w=w+Math.imul(oe,Ne)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(ue,Ne)|0,b=b+Math.imul(ue,De)|0,w=w+Math.imul(V,Le)|0,c=c+Math.imul(V,Ve)|0,c=c+Math.imul(z,Le)|0,b=b+Math.imul(z,Ve)|0;var Fr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,w=Math.imul(ye,Be),c=Math.imul(ye,Ke),c=c+Math.imul(be,Be)|0,b=Math.imul(be,Ke),w=w+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(J,Oe)|0,b=b+Math.imul(J,Ce)|0,w=w+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(W,Re)|0,b=b+Math.imul(W,Ue)|0,w=w+Math.imul(fe,Ne)|0,c=c+Math.imul(fe,De)|0,c=c+Math.imul(K,Ne)|0,b=b+Math.imul(K,De)|0,w=w+Math.imul(oe,Le)|0,c=c+Math.imul(oe,Ve)|0,c=c+Math.imul(ue,Le)|0,b=b+Math.imul(ue,Ve)|0,w=w+Math.imul(V,Fe)|0,c=c+Math.imul(V,je)|0,c=c+Math.imul(z,Fe)|0,b=b+Math.imul(z,je)|0;var jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,w=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(Ee,Be)|0,b=Math.imul(Ee,Ke),w=w+Math.imul(ye,Oe)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(be,Oe)|0,b=b+Math.imul(be,Ce)|0,w=w+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(J,Re)|0,b=b+Math.imul(J,Ue)|0,w=w+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(W,Ne)|0,b=b+Math.imul(W,De)|0,w=w+Math.imul(fe,Le)|0,c=c+Math.imul(fe,Ve)|0,c=c+Math.imul(K,Le)|0,b=b+Math.imul(K,Ve)|0,w=w+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(ue,Fe)|0,b=b+Math.imul(ue,je)|0,w=w+Math.imul(V,qe)|0,c=c+Math.imul(V,ze)|0,c=c+Math.imul(z,qe)|0,b=b+Math.imul(z,ze)|0;var qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,w=Math.imul(Me,Be),c=Math.imul(Me,Ke),c=c+Math.imul(Qe,Be)|0,b=Math.imul(Qe,Ke),w=w+Math.imul(Ie,Oe)|0,c=c+Math.imul(Ie,Ce)|0,c=c+Math.imul(Ee,Oe)|0,b=b+Math.imul(Ee,Ce)|0,w=w+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ue)|0,c=c+Math.imul(be,Re)|0,b=b+Math.imul(be,Ue)|0,w=w+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(J,Ne)|0,b=b+Math.imul(J,De)|0,w=w+Math.imul(U,Le)|0,c=c+Math.imul(U,Ve)|0,c=c+Math.imul(W,Le)|0,b=b+Math.imul(W,Ve)|0,w=w+Math.imul(fe,Fe)|0,c=c+Math.imul(fe,je)|0,c=c+Math.imul(K,Fe)|0,b=b+Math.imul(K,je)|0,w=w+Math.imul(oe,qe)|0,c=c+Math.imul(oe,ze)|0,c=c+Math.imul(ue,qe)|0,b=b+Math.imul(ue,ze)|0,w=w+Math.imul(V,We)|0,c=c+Math.imul(V,He)|0,c=c+Math.imul(z,We)|0,b=b+Math.imul(z,He)|0;var zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,w=Math.imul(Ye,Be),c=Math.imul(Ye,Ke),c=c+Math.imul(Xe,Be)|0,b=Math.imul(Xe,Ke),w=w+Math.imul(Me,Oe)|0,c=c+Math.imul(Me,Ce)|0,c=c+Math.imul(Qe,Oe)|0,b=b+Math.imul(Qe,Ce)|0,w=w+Math.imul(Ie,Re)|0,c=c+Math.imul(Ie,Ue)|0,c=c+Math.imul(Ee,Re)|0,b=b+Math.imul(Ee,Ue)|0,w=w+Math.imul(ye,Ne)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(be,Ne)|0,b=b+Math.imul(be,De)|0,w=w+Math.imul(q,Le)|0,c=c+Math.imul(q,Ve)|0,c=c+Math.imul(J,Le)|0,b=b+Math.imul(J,Ve)|0,w=w+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(W,Fe)|0,b=b+Math.imul(W,je)|0,w=w+Math.imul(fe,qe)|0,c=c+Math.imul(fe,ze)|0,c=c+Math.imul(K,qe)|0,b=b+Math.imul(K,ze)|0,w=w+Math.imul(oe,We)|0,c=c+Math.imul(oe,He)|0,c=c+Math.imul(ue,We)|0,b=b+Math.imul(ue,He)|0,w=w+Math.imul(V,$e)|0,c=c+Math.imul(V,Ge)|0,c=c+Math.imul(z,$e)|0,b=b+Math.imul(z,Ge)|0;var Wr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,w=Math.imul(ke,Be),c=Math.imul(ke,Ke),c=c+Math.imul(Pe,Be)|0,b=Math.imul(Pe,Ke),w=w+Math.imul(Ye,Oe)|0,c=c+Math.imul(Ye,Ce)|0,c=c+Math.imul(Xe,Oe)|0,b=b+Math.imul(Xe,Ce)|0,w=w+Math.imul(Me,Re)|0,c=c+Math.imul(Me,Ue)|0,c=c+Math.imul(Qe,Re)|0,b=b+Math.imul(Qe,Ue)|0,w=w+Math.imul(Ie,Ne)|0,c=c+Math.imul(Ie,De)|0,c=c+Math.imul(Ee,Ne)|0,b=b+Math.imul(Ee,De)|0,w=w+Math.imul(ye,Le)|0,c=c+Math.imul(ye,Ve)|0,c=c+Math.imul(be,Le)|0,b=b+Math.imul(be,Ve)|0,w=w+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(J,Fe)|0,b=b+Math.imul(J,je)|0,w=w+Math.imul(U,qe)|0,c=c+Math.imul(U,ze)|0,c=c+Math.imul(W,qe)|0,b=b+Math.imul(W,ze)|0,w=w+Math.imul(fe,We)|0,c=c+Math.imul(fe,He)|0,c=c+Math.imul(K,We)|0,b=b+Math.imul(K,He)|0,w=w+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(ue,$e)|0,b=b+Math.imul(ue,Ge)|0,w=w+Math.imul(V,Ze)|0,c=c+Math.imul(V,Je)|0,c=c+Math.imul(z,Ze)|0,b=b+Math.imul(z,Je)|0;var Hr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,w=Math.imul(ke,Oe),c=Math.imul(ke,Ce),c=c+Math.imul(Pe,Oe)|0,b=Math.imul(Pe,Ce),w=w+Math.imul(Ye,Re)|0,c=c+Math.imul(Ye,Ue)|0,c=c+Math.imul(Xe,Re)|0,b=b+Math.imul(Xe,Ue)|0,w=w+Math.imul(Me,Ne)|0,c=c+Math.imul(Me,De)|0,c=c+Math.imul(Qe,Ne)|0,b=b+Math.imul(Qe,De)|0,w=w+Math.imul(Ie,Le)|0,c=c+Math.imul(Ie,Ve)|0,c=c+Math.imul(Ee,Le)|0,b=b+Math.imul(Ee,Ve)|0,w=w+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(be,Fe)|0,b=b+Math.imul(be,je)|0,w=w+Math.imul(q,qe)|0,c=c+Math.imul(q,ze)|0,c=c+Math.imul(J,qe)|0,b=b+Math.imul(J,ze)|0,w=w+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(W,We)|0,b=b+Math.imul(W,He)|0,w=w+Math.imul(fe,$e)|0,c=c+Math.imul(fe,Ge)|0,c=c+Math.imul(K,$e)|0,b=b+Math.imul(K,Ge)|0,w=w+Math.imul(oe,Ze)|0,c=c+Math.imul(oe,Je)|0,c=c+Math.imul(ue,Ze)|0,b=b+Math.imul(ue,Je)|0;var $r=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,w=Math.imul(ke,Re),c=Math.imul(ke,Ue),c=c+Math.imul(Pe,Re)|0,b=Math.imul(Pe,Ue),w=w+Math.imul(Ye,Ne)|0,c=c+Math.imul(Ye,De)|0,c=c+Math.imul(Xe,Ne)|0,b=b+Math.imul(Xe,De)|0,w=w+Math.imul(Me,Le)|0,c=c+Math.imul(Me,Ve)|0,c=c+Math.imul(Qe,Le)|0,b=b+Math.imul(Qe,Ve)|0,w=w+Math.imul(Ie,Fe)|0,c=c+Math.imul(Ie,je)|0,c=c+Math.imul(Ee,Fe)|0,b=b+Math.imul(Ee,je)|0,w=w+Math.imul(ye,qe)|0,c=c+Math.imul(ye,ze)|0,c=c+Math.imul(be,qe)|0,b=b+Math.imul(be,ze)|0,w=w+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(J,We)|0,b=b+Math.imul(J,He)|0,w=w+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(W,$e)|0,b=b+Math.imul(W,Ge)|0,w=w+Math.imul(fe,Ze)|0,c=c+Math.imul(fe,Je)|0,c=c+Math.imul(K,Ze)|0,b=b+Math.imul(K,Je)|0;var Gr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,w=Math.imul(ke,Ne),c=Math.imul(ke,De),c=c+Math.imul(Pe,Ne)|0,b=Math.imul(Pe,De),w=w+Math.imul(Ye,Le)|0,c=c+Math.imul(Ye,Ve)|0,c=c+Math.imul(Xe,Le)|0,b=b+Math.imul(Xe,Ve)|0,w=w+Math.imul(Me,Fe)|0,c=c+Math.imul(Me,je)|0,c=c+Math.imul(Qe,Fe)|0,b=b+Math.imul(Qe,je)|0,w=w+Math.imul(Ie,qe)|0,c=c+Math.imul(Ie,ze)|0,c=c+Math.imul(Ee,qe)|0,b=b+Math.imul(Ee,ze)|0,w=w+Math.imul(ye,We)|0,c=c+Math.imul(ye,He)|0,c=c+Math.imul(be,We)|0,b=b+Math.imul(be,He)|0,w=w+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(J,$e)|0,b=b+Math.imul(J,Ge)|0,w=w+Math.imul(U,Ze)|0,c=c+Math.imul(U,Je)|0,c=c+Math.imul(W,Ze)|0,b=b+Math.imul(W,Je)|0;var Zr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,w=Math.imul(ke,Le),c=Math.imul(ke,Ve),c=c+Math.imul(Pe,Le)|0,b=Math.imul(Pe,Ve),w=w+Math.imul(Ye,Fe)|0,c=c+Math.imul(Ye,je)|0,c=c+Math.imul(Xe,Fe)|0,b=b+Math.imul(Xe,je)|0,w=w+Math.imul(Me,qe)|0,c=c+Math.imul(Me,ze)|0,c=c+Math.imul(Qe,qe)|0,b=b+Math.imul(Qe,ze)|0,w=w+Math.imul(Ie,We)|0,c=c+Math.imul(Ie,He)|0,c=c+Math.imul(Ee,We)|0,b=b+Math.imul(Ee,He)|0,w=w+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(be,$e)|0,b=b+Math.imul(be,Ge)|0,w=w+Math.imul(q,Ze)|0,c=c+Math.imul(q,Je)|0,c=c+Math.imul(J,Ze)|0,b=b+Math.imul(J,Je)|0;var Jr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,w=Math.imul(ke,Fe),c=Math.imul(ke,je),c=c+Math.imul(Pe,Fe)|0,b=Math.imul(Pe,je),w=w+Math.imul(Ye,qe)|0,c=c+Math.imul(Ye,ze)|0,c=c+Math.imul(Xe,qe)|0,b=b+Math.imul(Xe,ze)|0,w=w+Math.imul(Me,We)|0,c=c+Math.imul(Me,He)|0,c=c+Math.imul(Qe,We)|0,b=b+Math.imul(Qe,He)|0,w=w+Math.imul(Ie,$e)|0,c=c+Math.imul(Ie,Ge)|0,c=c+Math.imul(Ee,$e)|0,b=b+Math.imul(Ee,Ge)|0,w=w+Math.imul(ye,Ze)|0,c=c+Math.imul(ye,Je)|0,c=c+Math.imul(be,Ze)|0,b=b+Math.imul(be,Je)|0;var Qr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,w=Math.imul(ke,qe),c=Math.imul(ke,ze),c=c+Math.imul(Pe,qe)|0,b=Math.imul(Pe,ze),w=w+Math.imul(Ye,We)|0,c=c+Math.imul(Ye,He)|0,c=c+Math.imul(Xe,We)|0,b=b+Math.imul(Xe,He)|0,w=w+Math.imul(Me,$e)|0,c=c+Math.imul(Me,Ge)|0,c=c+Math.imul(Qe,$e)|0,b=b+Math.imul(Qe,Ge)|0,w=w+Math.imul(Ie,Ze)|0,c=c+Math.imul(Ie,Je)|0,c=c+Math.imul(Ee,Ze)|0,b=b+Math.imul(Ee,Je)|0;var Yr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,w=Math.imul(ke,We),c=Math.imul(ke,He),c=c+Math.imul(Pe,We)|0,b=Math.imul(Pe,He),w=w+Math.imul(Ye,$e)|0,c=c+Math.imul(Ye,Ge)|0,c=c+Math.imul(Xe,$e)|0,b=b+Math.imul(Xe,Ge)|0,w=w+Math.imul(Me,Ze)|0,c=c+Math.imul(Me,Je)|0,c=c+Math.imul(Qe,Ze)|0,b=b+Math.imul(Qe,Je)|0;var Xr=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,w=Math.imul(ke,$e),c=Math.imul(ke,Ge),c=c+Math.imul(Pe,$e)|0,b=Math.imul(Pe,Ge),w=w+Math.imul(Ye,Ze)|0,c=c+Math.imul(Ye,Je)|0,c=c+Math.imul(Xe,Ze)|0,b=b+Math.imul(Xe,Je)|0;var eo=(E+w|0)+((c&8191)<<13)|0;E=(b+(c>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(ke,Ze),c=Math.imul(ke,Je),c=c+Math.imul(Pe,Ze)|0,b=Math.imul(Pe,Je);var to=(E+w|0)+((c&8191)<<13)|0;return E=(b+(c>>>13)|0)+(to>>>26)|0,to&=67108863,S[0]=Nr,S[1]=Dr,S[2]=Lr,S[3]=Vr,S[4]=Fr,S[5]=jr,S[6]=qr,S[7]=zr,S[8]=Wr,S[9]=Hr,S[10]=$r,S[11]=Gr,S[12]=Zr,S[13]=Jr,S[14]=Qr,S[15]=Yr,S[16]=Xr,S[17]=eo,S[18]=to,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=O);function R(A,s,u){u.negative=s.negative^A.negative,u.length=A.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,w=Math.min(v,s.length-1),c=Math.max(0,v-A.length+1);c<=w;c++){var b=v-c,D=A.words[b]|0,V=s.words[c]|0,z=D*V,Q=z&67108863;S=S+(z/67108864|0)|0,Q=Q+E|0,E=Q&67108863,S=S+(Q>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}n(R,"bigMulTo");function j(A,s,u){var m=new F;return m.mulp(A,s,u)}n(j,"jumboMulTo"),o.prototype.mulTo=n(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=O(this,s,u):y<1024?m=R(this,s,u):m=j(this,s,u),m},"mulTo");function F(A,s){this.x=A,this.y=s}n(F,"FFTM"),F.prototype.makeRBT=n(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),F.prototype.revBin=n(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),F.prototype.permute=n(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),F.prototype.transform=n(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var w=E<<1,c=Math.cos(2*Math.PI/w),b=Math.sin(2*Math.PI/w),D=0;D<v;D+=w)for(var V=c,z=b,Q=0;Q<E;Q++){var oe=m[D+Q],ue=y[D+Q],ft=m[D+Q+E],fe=y[D+Q+E],K=V*ft-z*fe;fe=V*fe+z*ft,ft=K,m[D+Q]=oe+ft,y[D+Q]=ue+fe,m[D+Q+E]=oe-ft,y[D+Q+E]=ue-fe,Q!==w&&(K=c*V-b*z,z=c*z+b*V,V=K)}},"transform"),F.prototype.guessLen13b=n(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),F.prototype.conjugate=n(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),F.prototype.normalize13b=n(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),F.prototype.convert13b=n(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),F.prototype.stub=n(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),F.prototype.mulp=n(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),w=new Array(y),c=new Array(y),b=new Array(y),D=new Array(y),V=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,b,y),this.transform(E,S,w,c,y,v),this.transform(b,S,D,V,y,v);for(var Q=0;Q<y;Q++){var oe=w[Q]*D[Q]-c[Q]*V[Q];c[Q]=w[Q]*V[Q]+c[Q]*D[Q],w[Q]=oe}return this.conjugate(w,c,y),this.transform(w,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=n(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),j(this,s,u)},"mulf"),o.prototype.imul=n(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=n(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=n(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=n(function(){return this.mul(this)},"sqr"),o.prototype.isqr=n(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=n(function(s){var u=k(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,w=(this.words[v]|0)-E<<u;this.words[v]=w|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=n(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=n(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,w=m;if(y-=S,y=Math.max(0,y),w){for(var c=0;c<S;c++)w.words[c]=this.words[c];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=b<<26-v|D>>>v,b=D&E}return w&&b!==0&&(w.words[w.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=n(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=n(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=n(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=n(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=n(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=n(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=n(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=n(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=n(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=n(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=n(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=n(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=n(function(){return this.negative=0,this},"iabs"),o.prototype.abs=n(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=n(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var w=(s.words[v]|0)*u;S-=w&67108863,E=(S>>26)-(w/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=n(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var w=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=w+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var D=y.clone()._ishlnsubmul(v,1,w);D.negative===0&&(y=D,c&&(c.words[w]=1));for(var V=w-1;V>=0;V--){var z=(y.words[v.length+V]|0)*67108864+(y.words[v.length+V-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,V);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,V),y.isZero()||(y.negative^=1);c&&(c.words[V]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=n(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=n(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=n(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=n(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=n(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=n(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=n(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=n(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),w=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++w;for(var c=m.clone(),b=u.clone();!u.isZero();){for(var D=0,V=1;!(u.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(b)),y.iushrn(1),v.iushrn(1);for(var z=0,Q=1;!(m.words[0]&Q)&&z<26;++z,Q<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(b)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(w)}},"egcd"),o.prototype._invmp=n(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,w=1;!(u.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,b=1;!(m.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=n(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=n(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=n(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=n(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=n(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=n(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=n(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=n(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=n(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=n(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=n(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=n(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=n(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=n(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=n(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=n(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=n(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=n(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=n(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=n(function(s){return this.cmp(s)===0},"eq"),o.red=n(function(s){return new Z(s)},"red"),o.prototype.toRed=n(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=n(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=n(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=n(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=n(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=n(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=n(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=n(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=n(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=n(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=n(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=n(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=n(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=n(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=n(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=n(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Y={k256:null,p224:null,p192:null,p25519:null};function L(A,s){this.name=A,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}n(L,"MPrime"),L.prototype._tmp=n(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),L.prototype.ireduce=n(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),L.prototype.split=n(function(s,u){s.iushrn(this.n,0,u)},"split"),L.prototype.imulK=n(function(s){return s.imul(this.k)},"imulK");function ce(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(ce,"K256"),i(ce,L),ce.prototype.split=n(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=n(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function te(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(te,"P224"),i(te,L);function ie(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ie,"P192"),i(ie,L);function ae(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ae,"P25519"),i(ae,L),ae.prototype.imulK=n(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=n(function(s){if(Y[s])return Y[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new te;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Y[s]=u,u},"prime");function Z(A){if(typeof A=="string"){var s=o._prime(A);this.m=s.p,this.prime=s}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}n(Z,"Red"),Z.prototype._verify1=n(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=n(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=n(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=n(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=n(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),Z.prototype.iadd=n(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),Z.prototype.sub=n(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),Z.prototype.isub=n(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),Z.prototype.shl=n(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=n(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=n(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=n(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=n(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=n(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),w=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,w).cmp(E)!==0;)c.redIAdd(E);for(var b=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),V=this.pow(s,y),z=v;V.cmp(S)!==0;){for(var Q=V,oe=0;Q.cmp(S)!==0;oe++)Q=Q.redSqr();r(oe<z);var ue=this.pow(b,new o(1).iushln(z-oe-1));D=D.redMul(ue),b=ue.redSqr(),V=V.redMul(b),z=oe}return D},"sqrt"),Z.prototype.invm=n(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=n(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,w=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var b=u.words[v],D=c-1;D>=0;D--){var V=b>>D&1;if(S!==y[0]&&(S=this.sqr(S)),V===0&&E===0){w=0;continue}E<<=1,E|=V,w++,!(w!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),w=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=n(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=n(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=n(function(s){return new ge(s)},"mont");function ge(A){Z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ge,"Mont"),i(ge,Z),ge.prototype.convertTo=n(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),ge.prototype.convertFrom=n(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),ge.prototype.imul=n(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),ge.prototype.mul=n(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),ge.prototype.invm=n(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Xd>"u"||Xd,Tv)});var Bv=de((uj,Pv)=>{d();h();var Bn=Ma(),cr=Iv(),At=n(function(){},"ABI");function Iu(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}n(Iu,"elementaryName");At.eventID=function(e,t){var r=e+"("+t.map(Iu).join(",")+")";return Bn.keccak256(Buffer.from(r))};At.methodID=function(e,t){return At.eventID(e,t).slice(0,4)};function Ri(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}n(Ri,"parseTypeN");function eh(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}n(eh,"parseTypeNxM");function _a(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}n(_a,"parseTypeArray");function Ao(e){var t=typeof e;if(t==="string")return Bn.isHexPrefixed(e)?new cr(Bn.stripHexPrefix(e),16):new cr(e,10);if(t==="number")return new cr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}n(Ao,"parseNumber");function kv(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var i=t[2].split(",");return i.length===1&&i[0]===""&&(i=[]),{method:t[1],args:i}}n(kv,"parseSignature");function Pn(e,t){var r,i,o,a;if(e==="address")return Pn("uint160",Ao(t));if(e==="bool")return Pn("uint8",t?1:0);if(e==="string")return Pn("bytes",Buffer.from(t,"utf8"));if(Ia(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=_a(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);o=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)o.push(Pn(e,t[a]));if(r==="dynamic"){var l=Pn("uint256",t.length);o.unshift(l)}return Buffer.concat(o)}else{if(e==="bytes")return t=Buffer.from(t),o=Buffer.concat([Pn("uint256",t.length),t]),t.length%32!==0&&(o=Buffer.concat([o,Bn.zeros(32-t.length%32)])),o;if(e.startsWith("bytes")){if(r=Ri(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Bn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Ri(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(i=Ao(t),i.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+i.bitLength());if(i<0)throw new Error("Supplied uint is negative");return i.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Ri(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(i=Ao(t),i.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+i.bitLength());return i.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=eh(e),i=Ao(t),i<0)throw new Error("Supplied ufixed is negative");return Pn("uint256",i.mul(new cr(2).pow(new cr(r[1]))))}else if(e.startsWith("fixed"))return r=eh(e),Pn("int256",Ao(t).mul(new cr(2).pow(new cr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}n(Pn,"encodeSingle");function un(e,t,r){typeof e=="string"&&(e=th(e));var i,o,a,l;if(e.name==="address")return un(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return un(e.rawType,t,r).toString()===new cr(1).toString();if(e.name==="string"){var f=un(e.rawType,t,r);return Buffer.from(f,"utf8").toString()}else if(e.isArray){for(a=[],i=e.size,e.size==="dynamic"&&(r=un("uint256",t,r).toNumber(),i=un("uint256",t,r).toNumber(),r=r+32),l=0;l<i;l++){var g=un(e.subArray,t,r);a.push(g),r+=e.subArray.memoryUsage}return a}else{if(e.name==="bytes")return r=un("uint256",t,r).toNumber(),i=un("uint256",t,r).toNumber(),t.slice(r+32,r+32+i);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(o=new cr(t.slice(r,r+32),16,"be"),o.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("int")){if(o=new cr(t.slice(r,r+32),16,"be").fromTwos(256),o.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("ufixed")){if(i=new cr(2).pow(new cr(e.size[1])),o=un("uint256",t,r),!o.mod(i).isZero())throw new Error("Decimals not supported yet");return o.div(i)}else if(e.name.startsWith("fixed")){if(i=new cr(2).pow(new cr(e.size[1])),o=un("int256",t,r),!o.mod(i).isZero())throw new Error("Decimals not supported yet");return o.div(i)}}throw new Error("Unsupported or invalid type: "+e.name)}n(un,"decodeSingle");function th(e){var t,r;if(Ia(e)){t=_a(e);var i=e.slice(0,e.lastIndexOf("["));return i=th(i),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:i.memoryUsage*t,subArray:i},r}else{var o;switch(e){case"address":o="uint160";break;case"bool":o="uint8";break;case"string":o="bytes";break}if(r={rawType:o,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=Ri(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=eh(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}n(th,"parseType");function OM(e){return e==="string"||e==="bytes"||_a(e)==="dynamic"}n(OM,"isDynamic");function Ia(e){return e.lastIndexOf("]")===e.length-1}n(Ia,"isArray");At.rawEncode=function(e,t){var r=[],i=[],o=0;e.forEach(function(x){if(Ia(x)){var I=_a(x);I!=="dynamic"?o+=32*I:o+=32}else o+=32});for(var a=0;a<e.length;a++){var l=Iu(e[a]),f=t[a],g=Pn(l,f);OM(l)?(r.push(Pn("uint256",o)),i.push(g),o+=g.length):r.push(g)}return Buffer.concat(r.concat(i))};At.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var i=0,o=0;o<e.length;o++){var a=Iu(e[o]),l=th(a,t,i),f=un(l,t,i);i+=l.memoryUsage,r.push(f)}return r};At.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=kv(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([At.methodID(r.method,r.args),At.rawEncode(r.args,t)])};At.simpleDecode=function(e,t){var r=kv(e);if(!r.retargs)throw new Error("No return values in method");return At.rawDecode(r.retargs,t)};function _v(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}n(_v,"stringify");At.stringify=function(e,t){var r=[];for(var i in e){var o=e[i],a=t[i];/^[^\[]+\[.*\]$/.test(o)?a=a.map(function(l){return _v(o,l)}).join(", "):a=_v(o,a),r.push(a)}return r};At.solidityHexValue=function(e,t,r){var i,o;if(Ia(e)){var a=e.replace(/\[.*?\]/,"");if(!Ia(a)){var l=_a(e);if(l!=="dynamic"&&l!==0&&t.length>l)throw new Error("Elements exceed array size: "+l)}var f=t.map(function(I){return At.solidityHexValue(a,I,256)});return Buffer.concat(f)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var g=Array(r/4).join("0");return Buffer.from(t?g+"1":g+"0","hex")}else if(e==="address"){var x=20;return r&&(x=r/8),Bn.setLengthLeft(t,x)}else if(e.startsWith("bytes")){if(i=Ri(e),i<1||i>32)throw new Error("Invalid bytes<N> width: "+i);return Bn.setLengthRight(t,i)}else if(e.startsWith("uint")){if(i=Ri(e),i%8||i<8||i>256)throw new Error("Invalid uint<N> width: "+i);if(o=Ao(t),o.bitLength()>i)throw new Error("Supplied uint exceeds width: "+i+" vs "+o.bitLength());return r=r||i,o.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(i=Ri(e),i%8||i<8||i>256)throw new Error("Invalid int<N> width: "+i);if(o=Ao(t),o.bitLength()>i)throw new Error("Supplied int exceeds width: "+i+" vs "+o.bitLength());return r=r||i,o.toTwos(i).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};At.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],i=0;i<e.length;i++){var o=Iu(e[i]),a=t[i];r.push(At.solidityHexValue(o,a,null))}return Buffer.concat(r)};At.soliditySHA3=function(e,t){return Bn.keccak256(At.solidityPack(e,t))};At.soliditySHA256=function(e,t){return Bn.sha256(At.solidityPack(e,t))};At.solidityRIPEMD160=function(e,t){return Bn.ripemd160(At.solidityPack(e,t),!0)};function CM(e){return e>="0"&&e<="9"}n(CM,"isNumeric");At.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i==="s")t.push("bytes");else if(i==="b"){for(var o="bytes",a=r+1;a<e.length&&CM(e[a]);)o+=e[a]-"0",a++;r=a-1,t.push(o)}else if(i==="i")t.push("int256");else if(i==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+i)}return t};At.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i==="bytes")t.push("s");else if(i.startsWith("bytes"))t.push("b"+Ri(i));else if(i==="int256")t.push("i");else if(i==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+i)}return t.join("")};Pv.exports=At});var Ov=de((hj,Kv)=>{d();h();Kv.exports=Bv()});var Dv=de(Vt=>{"use strict";d();h();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.recoverTypedSignature=Vt.signTypedData=Vt.typedSignatureHash=Vt.TypedDataUtils=Vt.TYPED_MESSAGE_SCHEMA=Vt.SignTypedDataVersion=void 0;var Or=Ma(),ka=Ov(),So=Ta(),Yt;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Yt=Vt.SignTypedDataVersion||(Vt.SignTypedDataVersion={}));Vt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Ss(e,t){if(Object.keys(Yt).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}n(Ss,"validateVersion");function Cv(e,t,r,i,o){if(Ss(o,[Yt.V3,Yt.V4]),e[r]!==void 0)return["bytes32",o===Yt.V4&&i==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Or.keccak(nh(r,i,e,o))];if(i===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Or.keccak(i)];if(r==="string")return typeof i=="string"&&(i=Buffer.from(i,"utf8")),["bytes32",Or.keccak(i)];if(r.lastIndexOf("]")===r.length-1){if(o===Yt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),l=i.map(f=>Cv(e,t,a,f,o));return["bytes32",Or.keccak(ka.rawEncode(l.map(([f])=>f),l.map(([,f])=>f)))]}return[r,i]}n(Cv,"encodeField");function nh(e,t,r,i){Ss(i,[Yt.V3,Yt.V4]);let o=["bytes32"],a=[Uv(e,r)];for(let l of r[e]){if(i===Yt.V3&&t[l.name]===void 0)continue;let[f,g]=Cv(r,l.name,l.type,t[l.name],i);o.push(f),a.push(g)}return ka.rawEncode(o,a)}n(nh,"encodeData");function Rv(e,t){let r="",i=ih(e,t);i.delete(e);let o=[e,...Array.from(i).sort()];for(let a of o){if(!t[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${t[a].map(({name:f,type:g})=>`${g} ${f}`).join(",")})`}return r}n(Rv,"encodeType");function ih(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let i of t[e])ih(i.type,t,r);return r}n(ih,"findTypeDependencies");function rh(e,t,r,i){return Ss(i,[Yt.V3,Yt.V4]),Or.keccak(nh(e,t,r,i))}n(rh,"hashStruct");function Uv(e,t){return Or.keccak(Rv(e,t))}n(Uv,"hashType");function Nv(e){let t={};for(let r in Vt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}n(Nv,"sanitizeData");function RM(e,t){Ss(t,[Yt.V3,Yt.V4]);let r=Nv(e),i=[Buffer.from("1901","hex")];return i.push(rh("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&i.push(rh(r.primaryType,r.message,r.types,t)),Or.keccak(Buffer.concat(i))}n(RM,"eip712Hash");Vt.TypedDataUtils={encodeData:nh,encodeType:Rv,findTypeDependencies:ih,hashStruct:rh,hashType:Uv,sanitizeData:Nv,eip712Hash:RM};function UM(e){let t=oh(e);return Or.bufferToHex(t)}n(UM,"typedSignatureHash");Vt.typedSignatureHash=UM;function oh(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(a){return a.type!=="bytes"?a.value:So.legacyToBuffer(a.value)}),i=e.map(function(a){return a.type}),o=e.map(function(a){if(!a.name)throw t;return`${a.type} ${a.name}`});return ka.soliditySHA3(["bytes32","bytes32"],[ka.soliditySHA3(new Array(e.length).fill("string"),o),ka.soliditySHA3(i,r)])}n(oh,"_typedSignatureHash");function NM({privateKey:e,data:t,version:r}){if(Ss(r),So.isNullish(t))throw new Error("Missing data parameter");if(So.isNullish(e))throw new Error("Missing private key parameter");let i=r===Yt.V1?oh(t):Vt.TypedDataUtils.eip712Hash(t,r),o=Or.ecsign(i,e);return So.concatSig(Or.toBuffer(o.v),o.r,o.s)}n(NM,"signTypedData");Vt.signTypedData=NM;function DM({data:e,signature:t,version:r}){if(Ss(r),So.isNullish(e))throw new Error("Missing data parameter");if(So.isNullish(t))throw new Error("Missing signature parameter");let i=r===Yt.V1?oh(e):Vt.TypedDataUtils.eip712Hash(e,r),o=So.recoverPublicKey(i,t),a=Or.publicToAddress(o);return Or.bufferToHex(a)}n(DM,"recoverTypedSignature");Vt.recoverTypedSignature=DM});var Vv=de((Lv,_u)=>{d();h();(function(e,t){"use strict";typeof _u<"u"&&_u.exports?_u.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(Lv,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return n(t,"validateBase64"),e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var i,o=unescape(encodeURIComponent(r)),a=new Uint8Array(o.length);for(i=0;i<o.length;i++)a[i]=o.charCodeAt(i);return a},e.encodeUTF8=function(r){var i,o=[];for(i=0;i<r.length;i++)o.push(String.fromCharCode(r[i]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var i,o=[],a=r.length;for(i=0;i<a;i++)o.push(String.fromCharCode(r[i]));return btoa(o.join(""))},e.decodeBase64=function(r){t(r);var i,o=atob(r),a=new Uint8Array(o.length);for(i=0;i<o.length;i++)a[i]=o.charCodeAt(i);return a}),e})});var Wv=de(Ft=>{"use strict";d();h();var LM=Ft&&Ft.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),VM=Ft&&Ft.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fv=Ft&&Ft.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&LM(t,e,r);return VM(t,e),t};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.getEncryptionPublicKey=Ft.decryptSafely=Ft.decrypt=Ft.encryptSafely=Ft.encrypt=void 0;var Eo=Fv(yi()),ln=Fv(Vv()),Kn=Ta();function jv({publicKey:e,data:t,version:r}){if(Kn.isNullish(e))throw new Error("Missing publicKey parameter");if(Kn.isNullish(t))throw new Error("Missing data parameter");if(Kn.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let i=Eo.box.keyPair(),o;try{o=ln.decodeBase64(e)}catch{throw new Error("Bad public key")}let a=ln.decodeUTF8(t),l=Eo.randomBytes(Eo.box.nonceLength),f=Eo.box(a,l,o,i.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:ln.encodeBase64(l),ephemPublicKey:ln.encodeBase64(i.publicKey),ciphertext:ln.encodeBase64(f)}}default:throw new Error("Encryption type/version not supported")}}n(jv,"encrypt");Ft.encrypt=jv;function FM({publicKey:e,data:t,version:r}){if(Kn.isNullish(e))throw new Error("Missing publicKey parameter");if(Kn.isNullish(t))throw new Error("Missing data parameter");if(Kn.isNullish(r))throw new Error("Missing version parameter");let i=2**11,o=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:t,padding:""},f=Buffer.byteLength(JSON.stringify(a),"utf-8")%i,g=0;f>0&&(g=i-f-o),a.padding="0".repeat(g);let x=JSON.stringify(a);return jv({publicKey:e,data:x,version:r})}n(FM,"encryptSafely");Ft.encryptSafely=FM;function qv({encryptedData:e,privateKey:t}){if(Kn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Kn.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=zv(t),i=Eo.box.keyPair.fromSecretKey(r).secretKey,o=ln.decodeBase64(e.nonce),a=ln.decodeBase64(e.ciphertext),l=ln.decodeBase64(e.ephemPublicKey),f=Eo.box.open(a,o,l,i),g;try{g=ln.encodeUTF8(f)}catch{throw new Error("Decryption failed.")}if(g)return g;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}n(qv,"decrypt");Ft.decrypt=qv;function jM({encryptedData:e,privateKey:t}){if(Kn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Kn.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(qv({encryptedData:e,privateKey:t})).data}n(jM,"decryptSafely");Ft.decryptSafely=jM;function qM(e){let t=zv(e),r=Eo.box.keyPair.fromSecretKey(t).publicKey;return ln.encodeBase64(r)}n(qM,"getEncryptionPublicKey");Ft.getEncryptionPublicKey=qM;function zv(e){let t=Buffer.from(e,"hex").toString("base64");return ln.decodeBase64(t)}n(zv,"nacl_decodeHex")});var ah=de(vr=>{"use strict";d();h();var zM=vr&&vr.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:n(function(){return t[r]},"get")})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),sh=vr&&vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zM(t,e,r)};Object.defineProperty(vr,"__esModule",{value:!0});vr.normalize=vr.concatSig=void 0;sh(Mv(),vr);sh(Dv(),vr);sh(Wv(),vr);var Hv=Ta();Object.defineProperty(vr,"concatSig",{enumerable:!0,get:n(function(){return Hv.concatSig},"get")});Object.defineProperty(vr,"normalize",{enumerable:!0,get:n(function(){return Hv.normalize},"get")})});var Ob=de(Rs=>{"use strict";d();h();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.testnet=Rs.bitcoin=void 0;Rs.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Rs.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var Cb=de(gt=>{"use strict";d();h();Object.defineProperty(gt,"__esModule",{value:!0});gt.maybe=gt.Boolean=gt.Array=gt.Buffer256bit=gt.Network=gt.typeforce=void 0;gt.typeforce=M1();gt.Network=gt.typeforce.compile({messagePrefix:gt.typeforce.oneOf(gt.typeforce.Buffer,gt.typeforce.String),bip32:{public:gt.typeforce.UInt32,private:gt.typeforce.UInt32},pubKeyHash:gt.typeforce.UInt8,scriptHash:gt.typeforce.UInt8,wif:gt.typeforce.UInt8});gt.Buffer256bit=gt.typeforce.BufferN(32);gt.Array=gt.typeforce.Array;gt.Boolean=gt.typeforce.Boolean;gt.maybe=gt.typeforce.maybe});var Rb=de(fl=>{"use strict";d();h();Object.defineProperty(fl,"__esModule",{value:!0});fl.testEcc=void 0;var we=n(e=>Buffer.from(e,"hex"),"h");function B_(e){bt(e.isPoint(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(!e.isPoint(we("030000000000000000000000000000000000000000000000000000000000000005"))),bt(e.isPrivate(we("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),bt(!e.isPrivate(we("0000000000000000000000000000000000000000000000000000000000000000"))),bt(!e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),bt(!e.isPrivate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),bt(Buffer.from(e.privateAdd(we("0000000000000000000000000000000000000000000000000000000000000001"),we("0000000000000000000000000000000000000000000000000000000000000000"))).equals(we("0000000000000000000000000000000000000000000000000000000000000001"))),bt(e.privateAdd(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),we("0000000000000000000000000000000000000000000000000000000000000003"))===null),bt(Buffer.from(e.privateAdd(we("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),we("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(we("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),bt(Buffer.from(e.privateNegate(we("0000000000000000000000000000000000000000000000000000000000000001"))).equals(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),bt(Buffer.from(e.privateNegate(we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(we("0000000000000000000000000000000000000000000000000000000000000003"))),bt(Buffer.from(e.privateNegate(we("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(we("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),bt(Buffer.from(e.pointCompress(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(Buffer.from(e.pointCompress(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),bt(Buffer.from(e.pointCompress(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),bt(Buffer.from(e.pointCompress(we("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(we("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),bt(Buffer.from(e.pointFromScalar(we("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(we("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),bt(e.xOnlyPointAddTweak(we("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(we("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),we("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));bt(Buffer.from(t.xOnlyPubkey).equals(we("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(we("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),we("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),bt(Buffer.from(t.xOnlyPubkey).equals(we("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),bt(Buffer.from(e.sign(we("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),we("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(we("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),bt(e.verify(we("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),we("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),we("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&bt(Buffer.from(e.signSchnorr(we("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),we("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),we("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(we("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&bt(e.verifySchnorr(we("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),we("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),we("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}n(B_,"testEcc");fl.testEcc=B_;function bt(e){if(!e)throw new Error("ecc library invalid")}n(bt,"assert")});var Nb=de(Us=>{"use strict";d();h();Object.defineProperty(Us,"__esModule",{value:!0});Us.ECPairFactory=Us.networks=void 0;var Ip=Ob();Us.networks=Ip;var Xt=Cb(),K_=P0(),Ub=S1(),O_=Rb(),Tp=Xt.typeforce.maybe(Xt.typeforce.compile({compressed:Xt.maybe(Xt.Boolean),network:Xt.maybe(Xt.Network)})),C_=n(e=>e.length===32?e:e.slice(1,33),"toXOnly");function R_(e){(0,O_.testEcc)(e);function t(f){return e.isPoint(f)}n(t,"isPoint");function r(f,g){if(Xt.typeforce(Xt.Buffer256bit,f),!e.isPrivate(f))throw new TypeError("Private key not in range [1, n)");return Xt.typeforce(Tp,g),new l(f,void 0,g)}n(r,"fromPrivateKey");function i(f,g){return Xt.typeforce(e.isPoint,f),Xt.typeforce(Tp,g),new l(void 0,f,g)}n(i,"fromPublicKey");function o(f,g){let x=Ub.decode(f),I=x.version;if(Xt.Array(g)){if(g=g.filter(M=>I===M.wif).pop(),!g)throw new Error("Unknown network version")}else if(g=g||Ip.bitcoin,I!==g.wif)throw new Error("Invalid network version");return r(x.privateKey,{compressed:x.compressed,network:g})}n(o,"fromWIF");function a(f){Xt.typeforce(Tp,f),f===void 0&&(f={});let g=f.rng||K_,x;do x=g(32),Xt.typeforce(Xt.Buffer256bit,x);while(!e.isPrivate(x));return r(x,f)}n(a,"makeRandom");class l{static{n(this,"ECPair")}__D;__Q;compressed;network;lowR;constructor(g,x,I){this.__D=g,this.__Q=x,this.lowR=!1,I===void 0&&(I={}),this.compressed=I.compressed===void 0?!0:I.compressed,this.network=I.network||Ip.bitcoin,x!==void 0&&(this.__Q=Buffer.from(e.pointCompress(x,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let g=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(g)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return Ub.encode(this.network.wif,this.__D,this.compressed)}tweak(g){return this.privateKey?this.tweakFromPrivateKey(g):this.tweakFromPublicKey(g)}sign(g,x){if(!this.__D)throw new Error("Missing private key");if(x===void 0&&(x=this.lowR),x===!1)return Buffer.from(e.sign(g,this.__D));{let I=e.sign(g,this.__D),M=Buffer.alloc(32,0),k=0;for(;I[0]>127;)k++,M.writeUIntLE(k,0,6),I=e.sign(g,this.__D,M);return Buffer.from(I)}}signSchnorr(g){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(g,this.privateKey))}verify(g,x){return e.verify(g,this.publicKey,x)}verifySchnorr(g,x){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(g,this.publicKey.subarray(1,33),x)}tweakFromPublicKey(g){let x=C_(this.publicKey),I=e.xOnlyPointAddTweak(x,g);if(!I||I.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let M=Buffer.from([I.parity===0?2:3]);return i(Buffer.concat([M,I.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(g){let I=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,M=e.privateAdd(I,g);if(!M)throw new Error("Invalid tweaked private key!");return r(Buffer.from(M),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:i,fromWIF:o,makeRandom:a}}n(R_,"ECPairFactory");Us.ECPairFactory=R_});var Db=de(Ji=>{"use strict";d();h();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.networks=Ji.ECPairFactory=Ji.default=void 0;var _p=Nb();Object.defineProperty(Ji,"default",{enumerable:!0,get:n(function(){return _p.ECPairFactory},"get")});Object.defineProperty(Ji,"ECPairFactory",{enumerable:!0,get:n(function(){return _p.ECPairFactory},"get")});Object.defineProperty(Ji,"networks",{enumerable:!0,get:n(function(){return _p.networks},"get")})});d();h();d();h();var zo;(function(e){e.Image="image",e.Emoji="emoji",e.ReadOnlyDefault="read-only-default",e.Default="default"})(zo||(zo={}));var vm=p.object({type:p.nativeEnum(zo),imageUrl:p.string().optional(),unicode:p.string().optional()}),Wo;(function(e){e.Ledger="ledger"})(Wo||(Wo={}));var Ho;(function(e){e.BLE="ble"})(Ho||(Ho={}));var k1=p.object({version:p.literal(1),connectionType:p.nativeEnum(Ho),deviceType:p.nativeEnum(Wo),id:p.string().min(1),name:p.string().optional(),model:p.string().optional()}),P1=p.object({value:p.number(),timestamp:p.number()}),B1=p.object({name:p.string(),icon:vm.optional(),connectedDevices:k1.array().optional()}),K1=p.object({balance:P1.optional()});var O1=100,C1={unicode:void 0,imageUrl:void 0,type:zo.Default},Gl={version:1,isDeveloperMode:!1};var $o=tn.Solana.Devnet,Go=tn.Ethereum.Sepolia,Zl=tn.Sui.Testnet;function Xs(){return{version:1,setting:{[_.Solana]:$o,[_.EVM]:Go,[_.Sui]:Zl}}}n(Xs,"getDefaultNetworkSetting");function Jt(e){return e.map(t=>rn[t].defaultDerivationPathType)}n(Jt,"getDefaultDerivationPathTypesForAddressTypes");var R1={[ee.Bip44RootSolana]:ee.Bip44RootEthereum,[ee.Bip44ChangeSolana]:ee.Bip44Ethereum,[ee.Bip44Solana]:ee.Bip44EthereumSecondary,[ee.DeprecatedSolana]:ee.Bip44EthereumTertiary,[ee.Bip44RootEthereum]:null,[ee.Bip44Ethereum]:null,[ee.Bip44EthereumSecondary]:null,[ee.Bip44EthereumTertiary]:null,[ee.BitcoinTaproot]:null,[ee.BitcoinNativeSegwit]:null,[ee.BitcoinNestedSegwit]:null,[ee.BitcoinLegacy]:null,[ee.Bip44Sui]:null},Yn={[ee.Bip44RootSolana]:-1,[ee.Bip44RootEthereum]:-1,[ee.BitcoinTaproot]:0,[ee.BitcoinNativeSegwit]:0,[ee.BitcoinNestedSegwit]:0,[ee.BitcoinLegacy]:0,[ee.Bip44ChangeSolana]:0,[ee.Bip44Ethereum]:0,[ee.Bip44Solana]:1,[ee.Bip44EthereumSecondary]:1,[ee.DeprecatedSolana]:2,[ee.Bip44EthereumTertiary]:2,[ee.Bip44Sui]:0},U1="https://help.phantom.com/hc/en-us/articles/4406563212819";var N1="https://help.phantom.com/hc/en-us/articles/21872962238355";d();h();d();h();d();h();var Zo=he(Pt());var wm=(0,Zo.createContext)(null);function D1({children:e,vault:t}){return Zo.default.createElement(wm.Provider,{value:t},e)}n(D1,"VaultProxyProvider");function vt(){let e=(0,Zo.useContext)(wm);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}n(vt,"useVaultProxy");var Am=he(Pt());d();h();d();h();d();h();var vc=n((e,t)=>{try{let r=jo(e,t);switch(r){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return rn.getDisplayName(r);default:return}}catch(r){G.addBreadcrumb(H.Account,"Failed to get address badge",X.Error,{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}},"getAddressBadge");var bm={badge:n((e,t,r)=>t.filter(hc).length<=1?"":vc(e,r)??"","badge"),showAddressTypeExplainer:n(e=>e.filter(hc).length>1,"showAddressTypeExplainer"),addressTooltipNetworkName:n((e,t,r)=>r.filter(hc).length>=2?vc(e,t)??pe.getChainName(e):pe.getChainName(e),"addressTooltipNetworkName")};d();h();var xm={badge:n(()=>"Lite","badge")};var L1=new pc({[dr.Solana]:{},[dr.Ethereum]:{},[dr.Polygon]:{},[dr.Base]:{},[dr.Arbitrum]:{},[dr.Monad]:{},[dr.Bitcoin]:bm,[dr.Sui]:{},[dr.Hypercore]:{},[dr.Hyperevm]:xm}),Ai=rm(L1);function V1({children:e}){let t=vt(),r=Ai.supportedChains.map(o=>[o,Ai.get(o)]),i=new pc(Object.fromEntries(r));return Am.default.createElement(fm,{effects:{deriveAddresses:n(async()=>{await t.deriveAddresses()},"deriveAddresses")},registry:i},e)}n(V1,"AccountsChainDependencyProvider");d();h();var P;(function(e){e.Seed="seed",e.PrivateKey="privateKey",e.Ledger="ledger",e.SeedVault="seedVault",e.ReadOnly="readOnly",e.Seedless="seedless",e.KMSVault="kmsVault"})(P||(P={}));var F1=p.object({derivationIndex:p.number(),addresses:p.array(p.object({pathType:p.union([U0,N0]),value:p.string()})),publicKeys:p.array(p.object({pathType:R0,value:p.string()}))}),bn=class extends Error{static{n(this,"VaultFetchAccountInvalidIdentifier")}message="No account exists in storage for identifier"},Si=class extends Error{static{n(this,"VaultFetchAccountUndefinedBitcoinAddressError")}message="No account exists in storage for identifier"},Ei=class extends Error{static{n(this,"VaultExportSecretsInvalidAddressType")}message="Address type not found or incompatible with account"},ea=class extends Error{static{n(this,"VaultExportSecretsHardwareWallet")}message="Hardware wallet account does not have known secr*ts"},ta=class extends Error{static{n(this,"VaultExportSecretsReadOnlyAccount")}message="Read only account does not have known secr*ts"},ra=class extends Error{static{n(this,"VaultImportReadOnlyAccount")}message="Invalid configuration for read only account"},no=class extends Error{static{n(this,"VaultImportSeedDuplicate")}message="Seed already exists in storage"},Xn=class extends Error{static{n(this,"VaultFetchSeedInvalidIdentifier")}message="No seed exists in storage for identifier"},na=class extends Error{static{n(this,"VaultImportSeedInvalidDerivationIndex")}message="The derivation index is missing or invalid"},ia=class extends Error{static{n(this,"VaultImportPrivateKeyDuplicate")}message="Private key already exists in storage"},io=class extends Error{static{n(this,"VaultFetchPrivateKeyInvalidIdentifier")}message="No private key exists in storage for identifier"};var xn=class extends Error{static{n(this,"VaultImportAccountDuplicate")}message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},wc=class extends Error{static{n(this,"VaultSeedlessAccountAlreadyExists")}message="Vault already stores a seedless account"},j1=p.union([p.literal("unonboarded"),p.literal("unable-to-load-accounts")]),q1=p.union([p.literal("invalid-identifier"),p.literal("fetch-integrity-storage-error"),p.literal("fetch-entropy-storage-error"),p.literal("fetch-pk-storage-error"),p.literal("invalid-entropy"),p.literal("invalid-entropy-bip-39"),p.literal("invalid-checksum-bits"),p.literal("invalid-entropy-bits"),p.literal("invalid-checksum"),p.literal("invalid-entropy-length-less-than-twelve"),p.literal("invalid-entropy-length-more-than-twenty-four"),p.literal("invalid-entropy-length-wrong-word"),p.literal("invalid-pk-address-type"),p.literal("invalid-pk-identifier"),p.literal("invalid-pk"),p.literal("internal-error")]),z1=p.literal("safely-onboarded"),W1=p.union([p.object({status:j1,isOnboarded:p.literal(!1),reonboardingNeeded:p.literal(!1)}),p.object({status:q1,isOnboarded:p.literal(!0),reonboardingNeeded:p.literal(!0)}),p.object({status:z1,isOnboarded:p.literal(!0),reonboardingNeeded:p.literal(!1)})]);d();h();var oa=n((e,t=5)=>{let r=e.length,i=e.startsWith("0x")?t+2:t;return`${e.substring(0,i)}...${e.substring(r-t,r)}`},"formatHashMedium");d();h();d();h();var H1=n(e=>e.includes(".")||e.includes("@")?!1:M0.safeParse(e).success||E0.safeParse(e).success||Y0.safeParse(e).success||T0.safeParse(e).success,"isAddress"),Sm=n((e,t=5)=>H1(e)?oa(e,t):e,"formatIfNotHandle");var $1=n((e,t,r,i=4)=>{let o=t?t.name:r,a=Sm(e,i);return o?`${o} (${a})`:a},"formatAddress");d();h();var G1=n(e=>`${e.substring(0,5)}...`,"formatAddressShort");d();h();d();h();var Qt="@phantom/accounts",sa=`${Qt}:account-identifier`,aa=`${Qt}:selected-account`,Jo=`${Qt}:all-accounts`,Jl=`${Qt}:all-seeds`,Z1=`${Qt}:all-secrets`,J1=`${Qt}:account-balance`,tt={accountBalance(e){return[J1,{identifier:e}]},allAccountBalances(){return[`${Qt}:all-account-balances`]},allAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[Jo,{chainAvailabilityQueryObject:t}]},allSeeds(e){return[Jl,e]},allSecretIdentifiers(){return[Z1]},developerMode(){return[`${Qt}:developer-mode`]},accountIdentifier(e){return[sa,{identifier:e}]},selectedAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[aa,t]},selectedAccountIdentifier(){return[`${Qt}:selected-account-identifier`]},selectedNetworkSetting(){return[`${Qt}:selected-network-setting`]},trustedApps(){return[`${Qt}:trusted-apps`]},migratedWithInvalidChecksum(){return[`${Qt}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${Qt}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${Qt}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]},patchProfileAddresses(e){return[`${Qt}:patch-profile-addresses`,e]}};var ut=n(async e=>{await e.invalidateQueries({queryKey:[Jl]}),await e.invalidateQueries({queryKey:[Jo],predicate:n(t=>t.queryKey[0]===Jo,"predicate")}),await e.invalidateQueries({queryKey:[sa]}),await bc(e)},"invalidateAllAccounts"),bc=n(async e=>{await e.invalidateQueries({predicate:n(t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===aa,"predicate")}),await e.invalidateQueries({queryKey:tt.selectedAccountIdentifier()})},"invalidateSelectedAccount");dm(ut);d();h();var Qo=he(Pt());var Em=(0,Qo.createContext)(null);function Q1({children:e,authRepository:t}){return Qo.default.createElement(Em.Provider,{value:t},e)}n(Q1,"AuthProvider");function Ir(){let e=(0,Qo.useContext)(Em);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}n(Ir,"useAuthRepository");function oo(){return Ir().useUser()}n(oo,"useUser");d();h();d();h();var ef=he(en());d();h();d();h();var Y1="https://time.phantom.app/utc",X1=p.number().int().positive();async function so(){let e=await xc();return Math.floor(e/1e3)}n(so,"time");async function xc(){let e;try{let t=await yt.noBearer().get(Y1);if(t.status!==200)throw new Error("Failed to fetch time from server");e=X1.parse(t.data)}catch{e=Date.now()}return e}n(xc,"timeMs");d();h();var ca="https://phantom.app",ua="https://api.phantom.app/oauth2/auth",Ac={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},Mm="/login/start",Tm="/oauth2/token";var Ql;(function(e){e.Apple="apple",e.Google="google"})(Ql||(Ql={}));var Yl=xi({minutes:60}),Xl=Yl-xi({minutes:15}),ao="/v1/authentication-keys";var eA=60,tA=n(()=>Math.floor(Date.now()/1e3),"clientTime");async function Yo(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await so():tA(),i={iss:ca,aud:ua,nbf:r,exp:r+eA,iat:r};return{header:t,payload:i}}n(Yo,"generateUnsignedClientJWT");function Xo(e){let t=ct(ef.Buffer.from(JSON.stringify(e.header))),r=ct(ef.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}n(Xo,"encodeSignedJwt");d();h();var Im=p.object({alg:p.string(),type:p.string(),kid:p.string()}),_m=p.object({sub:p.string(),iss:p.string(),aud:p.string(),nbf:p.number(),exp:p.number(),iat:p.number()}),tf=p.object({header:Im,payload:_m,signature:p.string()}),km=p.object({alg:p.string(),type:p.string()}),Pm=p.object({iss:p.string(),aud:p.string(),nbf:p.number(),exp:p.number(),iat:p.number()}),rf=p.object({header:km,payload:Pm}),nf=p.object({id_token:p.string(),access_token:p.string(),refresh_token:p.string(),scope:p.string(),token_type:p.string(),expires_in:p.number().gte(0)}),rA=p.object({redirectTo:p.string()}),Bm=p.object({at_hash:p.string(),aud:p.array(p.string()),auth_time:p.number(),exp:p.number(),iat:p.number(),iss:p.string(),jti:p.string(),rat:p.number(),sid:p.string(),sub:p.string(),email:p.string().optional()}),Sc=p.object({authenticationKeys:p.array(p.object({createdAt:p.string().datetime().nullish().default(null),updatedAt:p.string().datetime().nullish().default(null),id:p.string().uuid(),publicKey:p.string(),userId:p.string().uuid()})).optional()}),ei;(function(e){e.User="user",e.UserID="userID",e.AccessToken="accessToken",e.Email="email",e.LoggedOut="loggedOut"})(ei||(ei={}));d();h();var co=he(wf());d();h();var ns=he(wf()),Jm=he(yi());var Qm={generateRandom:n(e=>{let t=(0,Jm.randomBytes)(e);return(0,ns.bufferToString)(t)},"generateRandom"),async deriveChallenge(e){let t=vi((0,ns.textEncodeLite)(e));return(0,ns.urlSafe)(t)}};d();h();var kr=n(()=>{let e=nr();return e===Ct.Staging?Lo.staging:e===Ct.Production?Lo.prod:T.BASE_AUTH_ENDPOINT||Lo.staging},"getAuthBaseEndpoint"),bf=n(()=>`${kr()}${Mm}`,"getAuthLoginEndpoint"),Uc=n(()=>`${kr()}${Tm}`,"getAuthTokenEndpoint");var Ym=new co.BasicQueryStringUtils;async function Nc(e,t){let{url:r,codeVerifier:i}=await QA(e.getClientID(),e.redirectURL,t),o=t.type==="email",a=await e.fetchAuthorizationCode(e.redirectURL,r,o);return await Xm({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:Uc(),code:a,codeVerifier:i})}n(Nc,"authenticate");async function QA(e,t,r){let i=bf(),o,a=["openid","offline_access","user","incognito","seedless"],l;switch(r.type){case"key":{o={type:"key",jwt:Xo(r.clientJWT)};break}case"email":{o={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},l=r.prompt,a.push("email");break}case"session":{o={type:"session",existingAccessToken:r.existingAccessToken};break}}let g=await new co.AuthorizationRequest({client_id:e,redirect_uri:t,scope:a.join(" "),response_type:"code"},Qm).toJson(),x;switch(o.type){case"key":x=`jwt:${ct(Buffer.from(o.jwt,"utf8"))}`;break;case"email":x=`sso:${o.provider}`,o.existingAccessToken&&(x=`${x}:${o.existingAccessToken}`);break;case"session":x=`session:${o.existingAccessToken}`;break}let I={redirect_uri:g.redirect_uri,client_id:g.client_id,response_type:g.response_type,state:g.state??"",scope:g.scope,login_hint:x};l&&(I.prompt=l);let M=g.extras?.code_challenge,k=g.extras?.code_challenge_method,O=g.internal?.code_verifier;if(M&&k&&(I.code_challenge=M,I.code_challenge_method=k),!M||!k||!O)throw new Error("Missing code challenge or code verifier for PKCE.");let C=Ym.stringify(I);return{url:`${i}?${C}`,codeVerifier:O}}n(QA,"createAuthorizationCodeRequest");async function Xm(e){let{grantType:t,tokenEndpoint:r,clientID:i,redirectURI:o}=e,a;t==="authorization_code"?a=new co.TokenRequest({client_id:i,redirect_uri:o,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):a=new co.TokenRequest({client_id:i,redirect_uri:o,grant_type:t,refresh_token:e.refreshToken});let l=await yt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(I0()).noBearer().post(r,Ym.stringify(a.toStringMap()));YA(l,t);let f=nf.safeParse(l.data);if(!f.success)throw new Error("Invalid OAuth2Token response.");let{data:g}=f,x=await so();return{idToken:g.id_token,accessToken:g.access_token,refreshToken:g.refresh_token,scope:g.scope,tokenType:g.token_type,expiresAt:(x+g.expires_in)*1e3}}n(Xm,"performTokenRequest");async function Dc(e,t){return await Xm({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:Uc(),refreshToken:t})}n(Dc,"refresh");function YA(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}n(YA,"handleBadRequest");d();h();d();h();d();h();var fa=class{static{n(this,"BaseEventEmitter")}subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(o=>o(...r))}};var Lc=class extends fa{static{n(this,"AuthEventEmitter")}emit(t){t&&(this.emitEvent(ei.User,t),this.emitEvent(ei.UserID,t.userID),this.emitEvent(ei.AccessToken,t.accessToken),t.email&&this.emitEvent(ei.Email,t.email))}emitLoggedOut(){this.emitEvent(ei.LoggedOut)}};d();h();d();h();function ri(e,t="expected value not found"){if(e==null)throw new Error(t);return e}n(ri,"expect");function eg(e,t="expected value not found"){if(!e)throw new Error(t)}n(eg,"assert");var Vc=n(async(e,t)=>{let r=kr(),i=ri(e.signer,"Signer is required for key-based auth."),o=await i.getAuthenticationPublicKey(t),a=await Yo(e.isServerTimeEnabled()),l=await i.sign(a,t),f=await yt.noBearer().get(`${r}${ao}`,{params:{token:Xo(l)}});if(!Vo(f))throw new Error(`Failed to get authentication keys: response is not okay (status ${f.status})`);let g=f.data;return(Sc.parse(g).authenticationKeys??[]).some(M=>M.publicKey===o)},"isExistingAuthFactor");d();h();d();h();var tg=n(async e=>{try{let t=await yt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${kr()}/userinfo`);return Vo(t)}catch{return!1}},"isValidToken");d();h();d();h();var da=".phantom.auth",Fc=`${da}.tokens`,jc=`${da}.tokens.staging`,ha=`${da}.custom-environments`,rg=`${da}.authentication-factors`,XA=`${da}.email-provider`;async function qc(e){let t=nr();return t===Ct.Production?await e.get(Fc):t===Ct.Staging?await e.get(jc):(await e.get(ha))?.[t]??null}n(qc,"getAuthTokens");async function is(e,t){let r=nr();r===Ct.Production?await e.set(Fc,t):r===Ct.Staging?await e.set(jc,t):await e.update(ha,i=>({...i,[r]:t}))}n(is,"setAuthTokens");async function ng(e){let t=nr();if(t===Ct.Production)await e.remove(Fc);else if(t===Ct.Staging)await e.remove(jc);else{let r=!1;await e.update(ha,i=>{if(!i||!(t in i))return i??null;let o={...i};return delete o[t],Object.keys(o).length===0&&(r=!0),o}),r&&await e.remove(ha)}}n(ng,"clearAuthTokens");d();h();var uo=n(e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let i=nn(t[1]).toString("utf-8"),o=JSON.parse(i);r=Bm.parse(o)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},"authTokensToUser");d();h();var ig="@phantom/auth",pr={user:["auth",`${ig}:user`],authFactors:["auth",`${ig}:user-auth-factors`]};d();h();var zc=n(async(e,t,r)=>{let{storage:i,authConfig:o}=e,a,{type:l}=r;switch(l){case"key":{let g=ri(e.signer,"Signer is required for key-based auth."),x=await Yo(e.isServerTimeEnabled()),I=await g.sign(x,r.secretIdentifier);a=await Nc(o,{type:l,clientJWT:I});break}case"email":{a=await Nc(o,{type:l,prompt:r.prompt,provider:r.provider});break}case"session":{a=await Nc(o,{type:l,existingAccessToken:r.accessToken});break}}G.addBreadcrumb(H.Auth,"\u2705 Login succeeded!",X.Debug),await is(i,a);let f=uo(a);return await e.queryClient.setQueryData(pr.user,f),t.emit(f),f},"logIn");var og={queryKey:pr.user,gcTime:Xl,staleTime:xi({minutes:5})},os=n(async(e,t,r)=>{let i=r?.skipAutoLogin??!1;return await e.queryClient.fetchQuery({...og,queryFn:n(()=>ag(e,t,i),"queryFn")})},"getUser"),sg=n((e,t)=>ht({...og,queryFn:n(async()=>{let r=await ag(e,t,!1);if(!r)throw new Error("Unable to log in.");return r},"queryFn"),retryOnMount:!1}),"useUser"),ag=n(async(e,t,r)=>e.runExclusive(async()=>{let i=await eS(e);if(i)return t.emit(i),i;if(r||!e.signer)return null;let o=await tS(e,t);return t.emit(o),o}),"queryFn");async function eS({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r,isServerTimeEnabled:i}){let o=await qc(e);if(!o)return null;let a=i()?await so():Math.floor(Date.now()/1e3),l=Math.floor(o.expiresAt/1e3),f=(Yl-Xl)/1e3,g=l-f,x=a<g;if(x&&!r()&&(x=await tg(o.accessToken)),x)return G.addBreadcrumb(H.Auth,`\u267B\uFE0F Access token still valid => Expires at ${o.expiresAt}`,X.Debug),uo(o);if(o.refreshToken)try{let I=await Dc(t,o.refreshToken);return G.addBreadcrumb(H.Auth,`\u2705 Refreshed auth token => Expires at ${I.expiresAt}`,X.Debug),await is(e,I),uo(I)}catch(I){return G.addBreadcrumb("Error refreshing auth token.",H.Auth,X.Error),G.captureError(I,H.Auth),null}return null}n(eS,"getOrRefreshUser");async function tS(e,t){let i=await ri(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(i.length===0)return G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.",X.Info),null;let o;try{for(let a of i)if(await Vc(e,a)){o=a;break}}catch(a){throw G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Error checking auth factors.",X.Error),a}o||(o=i[0],G.addBreadcrumb(H.Auth,"No auth factor found, creating new user with first secret identifier.",X.Debug));try{return await zc(e,t,{type:"key",secretIdentifier:o})}catch(a){throw G.addBreadcrumb(H.Auth,"Unable to log in with key-based auth. Error performing auth.",X.Error),a}}n(tS,"autoLoginWithKeyBasedAuth");d();h();var xf=n(async e=>{await e.removeQueries({queryKey:pr.user})},"removeUser"),Af=n(async e=>{await e.resetQueries({queryKey:pr.user})},"resetUser"),lo=n(async e=>{await e.invalidateQueries({queryKey:pr.user})},"invalidateUser"),ni=n(async e=>{await e.invalidateQueries({queryKey:pr.authFactors})},"invalidateUserAuthFactors");var rS=n(e=>{let t=new Lc,r={getUser:n(i=>os(e,t,i),"getUser"),useUser:n(()=>sg(e,t),"useUser"),refreshTokens:n(()=>nS(e),"refreshTokens"),logIn:n(i=>zc(e,t,i),"logIn"),isExistingAuthFactor:n(i=>Vc(e,i),"isExistingAuthFactor"),getAuthenticationKeys:n(()=>iS(e,t),"getAuthenticationKeys"),getLocalAuthenticationPublicKeys:n(()=>sS(e),"getLocalAuthenticationPublicKeys"),addAuthFactor:n(i=>aS(e,t,i),"addAuthFactor"),deleteAuthFactor:n(i=>cS(e,t,i),"deleteAuthFactor"),deleteAllAuthFactors:n(()=>uS(e,t),"deleteAllAuthFactors"),subscribe:n((i,o)=>t.subscribe(i,o),"subscribe"),logOut:n(()=>lS(e,t),"logOut")};return _0(async(i={})=>{let{refresh:o=!1,skipAutoLogin:a=!1}=i;return o&&await lo(e.queryClient),(await r.getUser({skipAutoLogin:a}))?.accessToken??null}),r},"createAuthRepository"),nS=n(async e=>{let t=await qc(e.storage);if(!t)return!1;let r=await Dc(e.authConfig,t.refreshToken);return await is(e.storage,r),await e.queryClient.setQueryData(pr.user,uo(r)),!0},"refreshTokens"),iS=n(async(e,t)=>({authenticationPublicKeys:(await oS(e,t)).map(i=>i.publicKey)}),"getAuthenticationKeys"),oS=n(async(e,t)=>{let r=kr(),i=await os(e,t);if(!i)throw new Error("User not authenticated.");let{data:o}=await yt.bearer(i.accessToken).get(`${r}${ao}`),a=Sc.safeParse(o);if(!a.success)throw new Error("Unable to parse auth factors response.");return a.data.authenticationKeys??[]},"getAuthenticationKeysInternal"),sS=n(async e=>{try{let t=ri(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),i={};for(let o of r)i[o]=await t.getAuthenticationPublicKey(o);return i}catch{return{}}},"getLocalAuthenticationPublicKeys"),aS=n(async(e,t,{secretIdentifier:r})=>{let i=kr(),o=ri(e.signer,"Signer is required for key-based auth."),a=await os(e,t);if(!a)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,`Adding auth factor: ${r}`,X.Info);let l=await Yo(e.isServerTimeEnabled()),f=await o.sign(l,r);await yt.bearer(a.accessToken).post(`${i}${ao}`,{jwt:Xo(f)})},"addAuthFactor"),cS=n(async(e,t,{authenticationPublicKey:r})=>{let i=kr(),o=await os(e,t);if(!o)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,`Deleting auth factor: ${r}`,X.Info),await yt.bearer(o.accessToken).delete(`${i}${ao}/${encodeURIComponent(r)}`)},"deleteAuthFactor"),uS=n(async(e,t)=>{let r=kr(),i=e.storage,o=await os(e,t);if(!o)throw new Error("User not authenticated.");G.addBreadcrumb(H.Auth,"Deleting all auth factors",X.Info),await yt.bearer(o.accessToken).delete(`${r}${ao}`),await i.remove(rg)},"deleteAllAuthFactors"),lS=n(async({storage:e},t)=>{await ng(e),t.emitLoggedOut()},"logOut");d();h();var fS=n((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let i=r.searchParams.get("code");if(!i)throw new Error("No authorization code");return i},"parseAuthCode");d();h();var dS=n((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let i=r.searchParams.get("error"),o=r.searchParams.get("error_description");if(i)throw new Error(`${i}: ${o}`,{cause:i});return!1},"redirectHasErrorParam");d();h();var hS=n(()=>nr()===Ct.Production?Ac.prod:Ac.staging,"getAuthClientID");d();h();var pS=n(()=>{let e=Ir(),{data:t}=oo(),r=pr.authFactors;return ht({queryKey:r,queryFn:n(async()=>{let o=await e.getLocalAuthenticationPublicKeys();if(Object.keys(o).length===0)return{};let a=[];try{if(t){let{authenticationPublicKeys:f=[]}=await e.getAuthenticationKeys();a=f}}catch(f){t&&f instanceof Error&&G.addBreadcrumb(H.Auth,`Unable to fetch existing AuthFactors for user (${t?.userID}): ${f.message}`,X.Error)}let l={};for(let[f,g]of Object.entries(o)){let x=a.includes(g);!x&&await e.isExistingAuthFactor(f)||(l[f]={authenticationPublicKey:g,isExistingAuthFactor:x})}return t&&Object.keys(l).length===0&&G.addBreadcrumb(H.Auth,`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(o).length}
- auth factors registered with user: ${a.length}`,X.Error),l},"queryFn"),retryOnMount:!1})},"useEligibleAuthFactors");d();h();d();h();var pa=n(()=>{let{data:e}=oo();return!!e},"useIsLoggedIn");function mS(e,t){let r=pa(),i;return e.enabled===void 0?i=r:typeof e.enabled=="function"?i=n(o=>(eg(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(o)),"enabled"):typeof e.enabled=="boolean"?i=r&&e.enabled:xe(e.enabled),ht({...e,enabled:i},t)}n(mS,"useAuthQuery");d();h();var gS=n(()=>{let e=_e(),t=Ir(),r=n(async({secretIdentifier:i})=>{await t.addAuthFactor({secretIdentifier:i}),await ni(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,`Could not add auth factor: ${i.secretIdentifier}`,X.Error);let a;throw o instanceof Error?a=o:a=new Error(`Could not add auth factor: ${i.secretIdentifier}`),G.captureError(a,H.Auth),a}},"mutationFn")})},"useAddAuthFactor");d();h();var yS=n(()=>{let e=_e(),t=Ir(),r=n(async({authenticationPublicKey:i})=>{await t.deleteAuthFactor({authenticationPublicKey:i}),await ni(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,"Could not remove auth factor!",X.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not remove auth factor!"),G.captureError(a,H.Auth),a}},"mutationFn")})},"useRemoveAuthFactor");d();h();var vS=n(()=>{let{data:e}=oo();return e?.accessToken},"useAccessToken");d();h();var _i=he(Pt());d();h();var ma=class{static{n(this,"AccountAnalytics")}#e;#t;#r;constructor(t,r,i){this.#e=t,this.#t=r,this.#r=i}identifyAccount=n(async(t,r,i)=>{let o=!!r.addresses.find(C=>pe.isSolanaNetworkID(C.networkID)),a=!!r.addresses.find(C=>pe.isEthereumNetworkID(C.networkID)),l=!!r.addresses.find(C=>pe.isBitcoinNetworkID(C.networkID)),f=!!r.addresses.find(C=>pe.isSuiNetworkID(C.networkID)),g={hasSolanaAddress:o,hasEthereumAddress:a,hasBitcoinAddress:l,hasSuiAddress:f},x=i.enabledChainIDs.map(C=>pe[C].name).join(", "),I=new Set;for(let C of t)switch(C.type){case P.Seed:case P.Seedless:I.add(C.seedIdentifier);break;case P.ReadOnly:case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:break;default:xe(C);break}let{id:M,type:k}=await this.getIdentifyID(r),O=await this.getUsername();switch(r.type){case P.Seed:case P.Seedless:this.#e.identify(M,{...g,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(I),accountID:r.identifier,isReadOnly:!1,enabledChains:x,idType:k,username:O});break;case P.ReadOnly:this.#e.identify(M,{...g,accountType:r.type,isReadOnly:!0,enabledChains:x,idType:k,username:O});break;case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:this.#e.identify(M,{...g,accountType:r.type,rootIds:Array.from(I),accountID:r.identifier,isReadOnly:!1,enabledChains:x,idType:k,username:O});break;default:xe(r)}},"identifyAccount");getIdentifyID=n(async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}},"getIdentifyID");getUsername=n(async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username},"getUsername");onAppSessionStart=n(t=>{let r=new Map;for(let i of t){if(i.type===P.ReadOnly)continue;let{addresses:o,identifier:a}=i;for(let l of o){let f=pe.getChainName(l.networkID),g={type:i.type,accountId:a,id:l.address};if(!r.get(f))r.set(f,[g]);else{let x=r.get(f)??[];r.set(f,[...x,g])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})},"onAppSessionStart")};var cg=(0,_i.createContext)(null);function wS({children:e,accountAnalytics:t}){return _i.default.createElement(cg.Provider,{value:t},e)}n(wS,"AccountAnalyticsProvider");function bS(){let e={capture:n(async()=>{},"capture"),addUserProperties:n(async()=>{},"addUserProperties"),identify:n(async()=>{},"identify"),getDeviceId:n(async()=>"","getDeviceId"),setDeviceId:n(()=>{},"setDeviceId"),setAnalyticsOptedOut:n(async()=>{},"setAnalyticsOptedOut"),setDisplayLanguage:n(async()=>{},"setDisplayLanguage"),screen:n(()=>{},"screen"),page:n(()=>{},"page"),rudderClient:null},t={getUser:n(async()=>{throw new Error("No user available")},"getUser")},r={getUserProfile:n(async()=>{throw new Error("No user profile available")},"getUserProfile")};return new ma(e,t,r)}n(bS,"createNoOpAccountAnalytics");function Sf(){let e=(0,_i.useContext)(cg),t=(0,_i.useMemo)(()=>bS(),[]);return e||t}n(Sf,"useAccountAnalytics");d();h();d();h();d();h();function Wt(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(T.NODE_ENV!=="production"){var o=_S[e],a=o?typeof o=="function"?o.apply(null,r):o:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}n(Wt,"n");function ss(e){return!!e&&!!e[mr]}n(ss,"r");function ho(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===kS}(e)||Array.isArray(e)||!!e[gg]||!!e.constructor[gg]||Of(e)||Cf(e))}n(ho,"t");function ya(e,t,r){r===void 0&&(r=!1),cs(e)===0?(r?Object.keys:Lf)(e).forEach(function(i){r&&typeof i=="symbol"||t(i,e[i],e)}):e.forEach(function(i,o){return t(o,i,e)})}n(ya,"i");function cs(e){var t=e[mr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Of(e)?2:Cf(e)?3:0}n(cs,"o");function _f(e,t){return cs(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}n(_f,"u");function xS(e,t){return cs(e)===2?e.get(t):e[t]}n(xS,"a");function yg(e,t,r){var i=cs(e);i===2?e.set(t,r):i===3?(e.delete(t),e.add(r)):e[t]=r}n(yg,"f");function AS(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}n(AS,"c");function Of(e){return TS&&e instanceof Map}n(Of,"s");function Cf(e){return IS&&e instanceof Set}n(Cf,"v");function fo(e){return e.o||e.t}n(fo,"p");function Rf(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=PS(e);delete t[mr];for(var r=Lf(t),i=0;i<r.length;i++){var o=r[i],a=t[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}n(Rf,"l");function Uf(e,t){return t===void 0&&(t=!1),Nf(e)||ss(e)||!ho(e)||(cs(e)>1&&(e.set=e.add=e.clear=e.delete=SS),Object.freeze(e),t&&ya(e,function(r,i){return Uf(i,!0)},!0)),e}n(Uf,"d");function SS(){Wt(2)}n(SS,"h");function Nf(e){return e==null||typeof e!="object"||Object.isFrozen(e)}n(Nf,"y");function En(e){var t=BS[e];return t||Wt(18,e),t}n(En,"b");function ug(){return T.NODE_ENV==="production"||as||Wt(0),as}n(ug,"_");function Ef(e,t){t&&(En("Patches"),e.u=[],e.s=[],e.v=t)}n(Ef,"j");function Wc(e){kf(e),e.p.forEach(ES),e.p=null}n(Wc,"O");function kf(e){e===as&&(as=e.l)}n(kf,"g");function lg(e){return as={p:[],l:as,h:e,m:!0,_:0}}n(lg,"w");function ES(e){var t=e[mr];t.i===0||t.i===1?t.j():t.O=!0}n(ES,"S");function Mf(e,t){t._=t.p.length;var r=t.p[0],i=e!==void 0&&e!==r;return t.h.g||En("ES5").S(t,e,i),i?(r[mr].P&&(Wc(t),Wt(4)),ho(e)&&(e=Hc(t,e),t.l||$c(t,e)),t.u&&En("Patches").M(r[mr].t,e,t.u,t.s)):e=Hc(t,r,[]),Wc(t),t.u&&t.v(t.u,t.s),e!==vg?e:void 0}n(Mf,"P");function Hc(e,t,r){if(Nf(t))return t;var i=t[mr];if(!i)return ya(t,function(a,l){return fg(e,i,t,a,l,r)},!0),t;if(i.A!==e)return t;if(!i.P)return $c(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var o=i.i===4||i.i===5?i.o=Rf(i.k):i.o;ya(i.i===3?new Set(o):o,function(a,l){return fg(e,i,o,a,l,r)}),$c(e,o,!1),r&&e.u&&En("Patches").R(i,r,e.u,e.s)}return i.o}n(Hc,"M");function fg(e,t,r,i,o,a){if(T.NODE_ENV!=="production"&&o===r&&Wt(5),ss(o)){var l=Hc(e,o,a&&t&&t.i!==3&&!_f(t.D,i)?a.concat(i):void 0);if(yg(r,i,l),!ss(l))return;e.m=!1}if(ho(o)&&!Nf(o)){if(!e.h.F&&e._<1)return;Hc(e,o),t&&t.A.l||$c(e,o)}}n(fg,"A");function $c(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&Uf(t,r)}n($c,"x");function Tf(e,t){var r=e[mr];return(r?fo(r):e)[t]}n(Tf,"z");function dg(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=Object.getPrototypeOf(r)}}n(dg,"I");function Pf(e){e.P||(e.P=!0,e.l&&Pf(e.l))}n(Pf,"k");function If(e){e.o||(e.o=Rf(e.t))}n(If,"E");function Bf(e,t,r){var i=Of(t)?En("MapSet").N(t,r):Cf(t)?En("MapSet").T(t,r):e.g?function(o,a){var l=Array.isArray(o),f={i:l?1:0,A:a?a.A:ug(),P:!1,I:!1,D:{},l:a,t:o,k:null,o:null,j:null,C:!1},g=f,x=Kf;l&&(g=[f],x=ga);var I=Proxy.revocable(g,x),M=I.revoke,k=I.proxy;return f.k=k,f.j=M,k}(t,r):En("ES5").J(t,r);return(r?r.A:ug()).p.push(i),i}n(Bf,"R");function MS(e){return ss(e)||Wt(22,e),n(function t(r){if(!ho(r))return r;var i,o=r[mr],a=cs(r);if(o){if(!o.P&&(o.i<4||!En("ES5").K(o)))return o.t;o.I=!0,i=hg(r,a),o.I=!1}else i=hg(r,a);return ya(i,function(l,f){o&&xS(o.t,l)===f||yg(i,l,t(f))}),a===3?new Set(i):i},"n")(e)}n(MS,"D");function hg(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Rf(e)}n(hg,"F");var pg,as,Df=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",TS=typeof Map<"u",IS=typeof Set<"u",mg=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vg=Df?Symbol.for("immer-nothing"):((pg={})["immer-nothing"]=!0,pg),gg=Df?Symbol.for("immer-draftable"):"__$immer_draftable",mr=Df?Symbol.for("immer-state"):"__$immer_state";var _S={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},kS=""+Object.prototype.constructor,Lf=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,PS=Object.getOwnPropertyDescriptors||function(e){var t={};return Lf(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},BS={},Kf={get:n(function(e,t){if(t===mr)return e;var r=fo(e);if(!_f(r,t))return function(o,a,l){var f,g=dg(a,l);return g?"value"in g?g.value:(f=g.get)===null||f===void 0?void 0:f.call(o.k):void 0}(e,r,t);var i=r[t];return e.I||!ho(i)?i:i===Tf(e.t,t)?(If(e),e.o[t]=Bf(e.A.h,i,e)):i},"get"),has:n(function(e,t){return t in fo(e)},"has"),ownKeys:n(function(e){return Reflect.ownKeys(fo(e))},"ownKeys"),set:n(function(e,t,r){var i=dg(fo(e),t);if(i?.set)return i.set.call(e.k,r),!0;if(!e.P){var o=Tf(fo(e),t),a=o?.[mr];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(AS(r,o)&&(r!==void 0||_f(e.t,t)))return!0;If(e),Pf(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},"set"),deleteProperty:n(function(e,t){return Tf(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,If(e),Pf(e)):delete e.D[t],e.o&&delete e.o[t],!0},"deleteProperty"),getOwnPropertyDescriptor:n(function(e,t){var r=fo(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},"getOwnPropertyDescriptor"),defineProperty:n(function(){Wt(11)},"defineProperty"),getPrototypeOf:n(function(e){return Object.getPrototypeOf(e.t)},"getPrototypeOf"),setPrototypeOf:n(function(){Wt(12)},"setPrototypeOf")},ga={};ya(Kf,function(e,t){ga[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ga.deleteProperty=function(e,t){return T.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Wt(13),ga.set.call(this,e,t,void 0)},ga.set=function(e,t,r){return T.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Wt(14),Kf.set.call(this,e[0],t,r,e[0])};var KS=function(){function e(r){var i=this;this.g=mg,this.F=!0,this.produce=function(o,a,l){if(typeof o=="function"&&typeof a!="function"){var f=a;a=o;var g=i;return function(R){var j=this;R===void 0&&(R=f);for(var F=arguments.length,Y=Array(F>1?F-1:0),L=1;L<F;L++)Y[L-1]=arguments[L];return g.produce(R,function(ce){var te;return(te=a).call.apply(te,[j,ce].concat(Y))})}}var x;if(typeof a!="function"&&Wt(6),l!==void 0&&typeof l!="function"&&Wt(7),ho(o)){var I=lg(i),M=Bf(i,o,void 0),k=!0;try{x=a(M),k=!1}finally{k?Wc(I):kf(I)}return typeof Promise<"u"&&x instanceof Promise?x.then(function(R){return Ef(I,l),Mf(R,I)},function(R){throw Wc(I),R}):(Ef(I,l),Mf(x,I))}if(!o||typeof o!="object"){if((x=a(o))===void 0&&(x=o),x===vg&&(x=void 0),i.F&&Uf(x,!0),l){var O=[],C=[];En("Patches").M(o,x,O,C),l(O,C)}return x}Wt(21,o)},this.produceWithPatches=function(o,a){if(typeof o=="function")return function(x){for(var I=arguments.length,M=Array(I>1?I-1:0),k=1;k<I;k++)M[k-1]=arguments[k];return i.produceWithPatches(x,function(O){return o.apply(void 0,[O].concat(M))})};var l,f,g=i.produce(o,a,function(x,I){l=x,f=I});return typeof Promise<"u"&&g instanceof Promise?g.then(function(x){return[x,l,f]}):[g,l,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}n(e,"e");var t=e.prototype;return t.createDraft=function(r){ho(r)||Wt(8),ss(r)&&(r=MS(r));var i=lg(this),o=Bf(this,r,void 0);return o[mr].C=!0,kf(i),o},t.finishDraft=function(r,i){var o=r&&r[mr];T.NODE_ENV!=="production"&&(o&&o.C||Wt(9),o.I&&Wt(10));var a=o.A;return Ef(a,i),Mf(void 0,a)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!mg&&Wt(20),this.g=r},t.applyPatches=function(r,i){var o;for(o=i.length-1;o>=0;o--){var a=i[o];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}o>-1&&(i=i.slice(o+1));var l=En("Patches").$;return ss(r)?l(r,i):this.produce(r,function(f){return l(f,i)})},e}(),gr=new KS,Vf=gr.produce,iC=gr.produceWithPatches.bind(gr),oC=gr.setAutoFreeze.bind(gr),sC=gr.setUseProxies.bind(gr),aC=gr.applyPatches.bind(gr),cC=gr.createDraft.bind(gr),uC=gr.finishDraft.bind(gr),lC=Vf;d();h();var et;(function(e){e.TermsHaveBeenAcknowledgedLastSeenVersion="termsHaveBeenAcknowledgedLastSeenVersion",e.NotificationsHaveBeenAcknowledgedLastSeenVersion="notificationsHaveBeenAcknowledgedLastSeenVersion",e.NetworkSetting="networkSetting",e.DeveloperMode="developerMode",e.SelectedAccount=".phantom-labs.account.selectedAccount",e.AccountsMetadata=".phantom-labs.account.accountMetadata",e.AccountsBalanceMetadata=".phantom-labs.account.accountMetadata.balance",e.MigratedWithInvalidChecksum=".phantom-labs.account.migratedWithInvalidChecksum",e.AccountMetas="accountMetas"})(et||(et={}));var OS=[et.AccountsMetadata,et.DeveloperMode,et.NetworkSetting,et.SelectedAccount,et.TermsHaveBeenAcknowledgedLastSeenVersion,et.NotificationsHaveBeenAcknowledgedLastSeenVersion];var mC=new Error("Failed to clear selected account index");async function Ff(e){try{let t=await e.get(et.SelectedAccount);return t?.version===2?t.identifier:null}catch{throw CS}}n(Ff,"getSelectedAccountIdentifier");var CS=new Error("Failed to get selected account identifier");async function Pr(e,t){try{let r={version:2,identifier:t};return await e.set(et.SelectedAccount,r)}catch{throw RS}}n(Pr,"setSelectedAccountIdentifier");var RS=new Error("Failed to set selected account identifier");var wg=new Error("Failed to add user account metadata to storage"),jf=new Error("Could not find account metadata in storage");async function bg(e,t,r){let i=await e.get(et.AccountsMetadata);if(!i)throw jf;let o=i.accounts[t];o?o.name=r:(o={name:r},i.accounts[t]=o),await e.set(et.AccountsMetadata,i)}n(bg,"setMultiChainAccountName");async function xg(e,t,r){let i=await e.get(et.AccountsMetadata);if(!i)throw jf;let o=i.accounts[t];o?o.icon=r:(o={icon:r,name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})},i.accounts[t]=o),await e.set(et.AccountsMetadata,i)}n(xg,"setMultiChainAccountIcon");async function Ag(e,t,r){let i=await e.get(et.AccountsBalanceMetadata);i||(i={version:1,accounts:{}});let o=i.accounts[t];o?o.balance=r:(o={balance:r},i.accounts[t]=o),await e.set(et.AccountsBalanceMetadata,i)}n(Ag,"setAccountBalance");async function ki(e,t,r){try{let i=await e.get(et.AccountsMetadata);i?i.accounts[t]=r:i={version:1,accounts:{[t]:r}},await e.set(et.AccountsMetadata,i)}catch{throw wg}}n(ki,"addMultiChainAccountMetadata");async function Sg(e,t){try{let r=await e.get(et.AccountsMetadata);r?r.accounts=Vf(r.accounts,i=>{for(let[o,a]of Object.entries(t))i[o]||(i[o]={name:""}),i[o].name=a.name,i[o].icon=a.icon??i[o].icon,i[o].connectedDevices=a.connectedDevices??i[o].connectedDevices}):r={version:1,accounts:{...t}},await e.set(et.AccountsMetadata,r)}catch{throw wg}}n(Sg,"addAccountMetadataBatch");async function Eg(e,t){let r=await e.get(et.AccountsBalanceMetadata);r||(r={version:1,accounts:{}});let i=r.accounts[t];return i||(i={}),i}n(Eg,"getMultiChainAccountBalanceMetadata");async function Mg(e,t){let r=await e.get(et.AccountsMetadata);r||(r={version:1,accounts:{}});let i=r.accounts[t];return i||(i={name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})}),{...i}}n(Mg,"getMultiChainAccountMetadata");async function Tg(e){let t=await e.get(et.AccountsBalanceMetadata);return t?t.accounts:{}}n(Tg,"getAllMultiChainAccountBalanceMetadata");async function Ig(e){let t=await e.get(et.AccountsMetadata),r={},i=new Set([...Object.keys(t?.accounts||{})]);for(let o of i){let a=t?.accounts[o]||{name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})};r[o]={...a}}return r}n(Ig,"getAllMultiChainAccountMetadata");async function US(e,t){let r=await e.get(et.AccountsBalanceMetadata);r&&(delete r.accounts[t],await e.set(et.AccountsBalanceMetadata,r))}n(US,"removeMultiChainAccountBalanceMetadata");async function Gc(e,t){let r=await e.get(et.AccountsMetadata);if(!r)throw jf;delete r.accounts[t],await e.set(et.AccountsMetadata,r),await US(e,t)}n(Gc,"removeMultiChainAccountMetadata");var NS={...im(et.AccountsMetadata,[Jo,sa,aa,...tt.selectedAccountIdentifier()])};d();h();var PC=p.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."}),qf;(function(e){e.UnableToCreateBip39Dependency="Unable to create bip39 dependency",e.FailedToFetchBip39Mnemonic="Failed to fetch bip39 mn*monic from storage",e.FailedToParseBip39Mnemonic="Failed to parse bip39 mn*monic as JSON object",e.FailedToDecryptBip39Mnemonic="Failed to decrypt bip39 mn*monic",e.FailedToConstructBip39Entropy="Failed to construct bip39 mn*monic from entropy",e.FailedToFetchDeprecatedMnemonic="Failed to fetch deprecated mn*monic from storage",e.FailedToParseDeprecatedMnemonic="Failed to parse deprecated mn*monic as JSON object",e.FailedToDecryptDeprecatedMnemonic="Failed to decrypt deprecated mn*monic",e.FailedToParseRawDeprecatedMnemonic="Failed to parse deprecated mn*monic from raw JSON",e.FailedToCreateDeprecatedMnemonicString="Failed to create deprecated m*monic from a string",e.FailedToCreateDeprecatedMnemonicStringArray="Failed to create deprecated mn*monic from a string array",e.FailedToCreateDeprecatedMnemonicObjectUint8Array="Failed to create deprecated mn*monic from an object or uint8array",e.FailedToFetchAccountMetas="Failed to fetch account metas from storage",e.NoSeed="No legacy se*d available"})(qf||(qf={}));var zf;(function(e){e.InvalidChecksum="Se*d has invalid checksum",e.InvalidEntropy="Se*d has invalid entropy",e.LessThan12Words="Se*d has less than twelve words",e.InvalidWordCount="Se*d has invalid world count",e.InvalidWords="Se*d has invalid words",e.InternalError="Unknown error fetching se*d"})(zf||(zf={}));var Wf;(function(e){e.PrivateKey="privateKey",e.Mnemonic="mnemonic",e.Seedless="seedless"})(Wf||(Wf={}));d();h();var DS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getSeedAccountAddresses"),LS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getLedgerAccountAddresses"),VS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes)r.includes(f)&&e.chainType===f&&o.push({networkID:a,addressType:f,address:e.address})}return o},"getSolanaSeedVaultAccountAddresses"),FS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let g=e.chains[f];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getKMSVaultAccountAddresses"),jS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f)&&e.chainType===f)switch(e.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:e.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.address});break}default:xe(e)}}}return o},"getPrivateKeyAccountAddresses"),qS=n((e,t,r,i)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(i.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f))for(let[g,x]of Object.entries(e.addresses))g===f&&o.push({networkID:a,addressType:f,address:x})}}return o},"getReadOnlyAccountAddresses"),Zc=n((e,t,r,i,o,a)=>{let l;switch(a?l=Object.values(o.setting):l=t,l=l.sort((f,g)=>pe.compareNetworkID(f,g)),e.type){case P.Seedless:case P.Seed:return DS(e,l,r,i);case P.Ledger:return LS(e,l,r,i);case P.SeedVault:return VS(e,l,r,i);case P.KMSVault:return FS(e,l,r,i);case P.PrivateKey:return jS(e,l,r,i);case P.ReadOnly:return qS(e,l,r,i)}},"convertVaultAccountToChainAddresses");d();h();var _g=he(en());var Hf=n(()=>({addresses:new Set,publicKeys:new Set}),"createEmptyIdentifiers"),us=n((e,t)=>{t&&(t instanceof Uint8Array?e.publicKeys.add(_g.Buffer.from(t).toString("base64")):typeof t=="string"&&e.publicKeys.add(t))},"addPublicKey"),zS=n((e,t)=>{if(!e||typeof e!="object")return;let r=e,{chainType:i}=r;if(i)switch(i){case _.Solana:case _.EVM:{let o=r,a;typeof o.address=="string"?a=o.address:typeof o.publicKey=="string"&&(a=o.publicKey),a&&t.addresses.add(a);break}case _.Sui:{let o=r.address;typeof o=="string"&&t.addresses.add(o),us(t,r.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let o=r.addresses??{};Object.values(o).forEach(a=>{a&&t.addresses.add(a)}),us(t,r.publicKey);break}default:break}},"addChainAddressToSnapshot"),kg=n((e,t)=>{t.addresses.forEach(r=>e.addresses.add(r)),t.publicKeys.forEach(r=>e.publicKeys.add(r))},"mergeSnapshots"),Jc=n(e=>{let t=Hf();return e&&Object.values(e).forEach(r=>{zS(r,t)}),t},"collectIdentifiersFromChains"),Pg=n(e=>{let t=Hf();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{kg(t,Jc(e.chains));break}case P.PrivateKey:{"addresses"in e?(Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),us(t,e.publicKey)):"address"in e&&"publicKey"in e&&e.chainType===_.Sui?(t.addresses.add(e.address),us(t,e.publicKey)):"address"in e&&t.addresses.add(e.address);break}case P.SeedVault:{t.addresses.add(e.address);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultAccount"),$f=n(e=>{let t=Hf();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{kg(t,Jc(e.chains));break}case P.PrivateKey:{switch(e.chainType){case _.Solana:case _.EVM:{t.addresses.add(e.publicKey);break}case _.Sui:{t.addresses.add(e.address),us(t,e.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),us(t,e.publicKey);break}}break}case P.SeedVault:{t.addresses.add(e.publicKey);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultStorageAccount");d();h();var WS=n(({index:e,offsetIndex:t})=>({name:wn.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})}),"createAccountMetadata");d();h();var Gf=n(e=>{switch(e){case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:return!0;case ee.Bip44Solana:case ee.DeprecatedSolana:case ee.Bip44RootSolana:case ee.Bip44RootEthereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:case ee.Bip44Sui:return!1}},"isRecommendedDerivationPathType");d();h();var HS=n(({pathType:e,index:t})=>{switch(e){case ee.Bip44RootEthereum:case ee.Bip44RootSolana:return"root-derivation-path-group";case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:case ee.Bip44Sui:case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:return`recommended-group:index-${t}`;case ee.Bip44EthereumSecondary:case ee.Bip44Solana:return`secondary-group:index-${t}`;case ee.Bip44EthereumTertiary:case ee.DeprecatedSolana:return`tertiary-group:index-${t}`}},"getDerivationPathGroupKey");d();h();var $S=n(e=>e==null?!1:[P.Ledger,P.SeedVault].includes(e),"isHardwareWalletAccountType");d();h();d();h();var ls="Trying to find a selected account, but there no accounts in the vault.",va="Missing ChainAvailability.",Bg=n((e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,"NoAccountFoundFromIdentifierErrorMsg"),Zf=new Error("The current account group has no valid bitcoin address"),Jf=new Error("The current account group has no valid EIP-155 address"),Qf=new Error("The current account group has no valid solana address"),Yf=new Error("The current account group has no valid sui address"),Kg=new Error("The current account group has no valid address or the the chain type was unsupported"),mR=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),gR=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");function Og(e,t){let i=(e?.addresses??[]).find(({addressType:o})=>o===t);if(!e?.addresses||!i)switch(t){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw Zf;case _.EVM:throw Jf;case _.Solana:throw Qf;case _.Sui:throw Yf;default:throw Kg}return i}n(Og,"getChainAddressByAccount");function GS(e,t){return Og(e,t)?.address}n(GS,"getAddressByAccount");function ZS(e){switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:return e.chains?Object.entries(e.chains).map(([t,r])=>({addressType:t,address:"address"in r?r.address:Object.values(r.addresses)[0]})):[];case P.PrivateKey:return e.chainType===_.BitcoinTaproot||e.chainType===_.BitcoinNativeSegwit||e.chainType===_.BitcoinNestedSegwit||e.chainType===_.BitcoinLegacy?Object.entries(e.addresses).map(([t,r])=>({addressType:e.chainType,address:r})):[{addressType:e.chainType,address:"address"in e?e.address:""}];case P.ReadOnly:return Object.entries(e.addresses).map(([t,r])=>({addressType:t,address:r||""}));case P.SeedVault:return[{addressType:"solana",address:e.address}];default:return[]}}n(ZS,"getAddressesFromAccount");function ii(e){return e?ZS(e).filter(r=>r.address):[]}n(ii,"getWalletAddressesFromAccount");d();h();var JS=n(e=>{let t=e.toString();return oa(t)},"formatAddressValue");d();h();function QS(e){let t=e.endsWith(".sol"),r=e==="@",i=e.startsWith("@")&&e.length>1;return[t,r,i]}n(QS,"parseBonfidaHandle");d();h();function YS(e){return[e.endsWith(".eth")]}n(YS,"parseENSHandle");d();h();var XS=n(async(e,t,r)=>{let o=(await e.fetchAllAccounts()).find(l=>{switch(l.type){case P.Seed:case P.Seedless:return l.seedIdentifier===r;case P.PrivateKey:return l.privateKeyIdentifier===r;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(l)}});if(!o)throw new Error("Unable to find account to sign client JWT with.");let a=await e.sign(o.identifier,{isJWT:!0,data:t});if(a.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in a)||!a.signedJWT)throw new Error("No JWT from vault signing.");return a.signedJWT},"signClientJWT");d();h();var eE=n(async e=>[...(await e.fetchAllAccounts()).reduce((o,a)=>{switch(a.type){case P.Seed:case P.Seedless:{o.add(a.seedIdentifier);break}case P.PrivateKey:{o.add(a.privateKeyIdentifier);break}case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:break;default:xe(a);break}return o},new Set)],"getAllSecretIdentifiers");d();h();var tE=n((e,t)=>e.filter(r=>{switch(r.type){case P.Seed:case P.Seedless:return r.seedIdentifier===t;case P.PrivateKey:return r.privateKeyIdentifier===t;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(r);return}}),"getAccountsForSecretId");d();h();function rE(e){return Ai.get(e).networkNameOverride?.(e)??pe.getNetworkName(e,!0)}n(rE,"getBadgedNetworkName");d();h();function nE(){return{version:1,setting:{[_.Solana]:$o,[_.EVM]:Go,[_.Sui]:Zl}}}n(nE,"getDefaultNetworkSetting");d();h();d();h();d();h();function Cg(e){switch(e){case _.Solana:return{curve:"Ed25519",addressFormat:"Solana"};case _.EVM:return{curve:"Secp256k1",addressFormat:"Ethereum"};case _.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case _.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin address format ${e}.`);case _.Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported chain type: ${e}`)}}n(Cg,"getKMSCurveAndFormatForChainType");function Rg(e){switch(e){case ee.Bip44RootSolana:case ee.Bip44Solana:case ee.Bip44ChangeSolana:case ee.DeprecatedSolana:return{curve:"Ed25519",addressFormat:"Solana"};case ee.Bip44RootEthereum:case ee.Bip44Ethereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:return{curve:"Secp256k1",addressFormat:"Ethereum"};case ee.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case ee.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin derivation path ${e}.`);case ee.Bip44Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported derivation path type: ${e}`)}}n(Rg,"getKMSCurveAndFormatForPathType");function Qc(e,t=0){let r=[];for(let i of e)try{let o=Rg(i),a=Qn({pathType:i,index:t});r.push({curve:o.curve,derivationPath:a,addressFormat:o.addressFormat})}catch{continue}return r}n(Qc,"convertDerivationPathTypesToKMSInfo");async function iE(e,t=0){let r=qo().enabledAddressTypes,i=Jt(r);return Qc(i,t)}n(iE,"getKMSDerivationPathsForIndex");var oE=new Set([_.Solana,_.EVM,_.Sui,_.BitcoinNativeSegwit,_.BitcoinTaproot]);async function sE(e,t=0){let i=(await qo()).enabledAddressTypes.filter(a=>oE.has(a));return Jt(i).map(a=>({chainType:rn.getAddressType(a),derivationIndex:t,pathType:a}))}n(sE,"getDefaultKMSVaultChainConfigs");async function Yc(e,t=0){let r=await sE(e,t),i=r.map(l=>l.pathType),o=Qc(i,t),a=r.map(({chainType:l,pathType:f})=>{let{addressFormat:g}=Cg(l);return{chainType:l,pathType:f,derivationPath:Qn({pathType:f,index:t}),addressFormat:g}});return{derivations:o,conversionMetadata:a}}n(Yc,"getDefaultKMSVaultDerivationsAndMetadata");d();h();var Dt="vault";function po(e,t=Dt){return`kms:${e}:${t}`}n(po,"getKMSVaultIdentifier");d();h();d();h();d();h();d();h();d();h();var oi=class e extends Error{static{n(this,"KMSRpcError")}response;method;errorCode;requestId;constructor(t,r){let i=r.data,o=i?.error||"Unknown error",a=i?.requestId,l=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${o}${a?` (requestId: ${a})`:""}`;super(l),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=a,Object.setPrototypeOf(this,e.prototype)}};var aE="00000000-0000-0000-0000-000000000000",cE="/v1/wallets/kms/rpc";async function Se(e,t,r,i){let o={method:t,params:r,timestampMs:await xc()},a=JSON.stringify(o),l;try{let I=await e.getPublicKey(),M=await e.signRpcPayload(o);l=ct(Buffer.from(JSON.stringify({publicKey:I,signature:M,kind:"PKI"}),"utf-8"))}catch(I){throw new Error(`[KMS] Failed to authenticate rpc call: ${I instanceof Error?I.message:"Unknown error"}`)}let f=T.WALLET_SERVICE_API_URL,x=await(f?yt.api("custom",f):yt.api()).noBearer().post(cE,a,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":l,"X-App-Id":aE},validateStatus:!1});if(!Vo(x))throw new oi(t,x);return i.parse(x.data)}n(Se,"rpcCall");d();h();d();h();var ed=p.enum(["Ed25519","Secp256k1"]),td=p.enum(["Ethereum","Solana","BitcoinSegwit","Sui","BitcoinTaproot"]),Et=p.object({curve:ed,derivationPath:p.string(),addressFormat:td}),Pi=Et.extend({address:p.string(),publicKey:p.string().regex(lc)}),Ug=p.object({walletId:p.string(),walletName:p.string(),tags:p.array(p.string())}),oU=p.object({error:p.string(),requestId:p.string().optional()}),uE=p.object({kind:p.literal("RLP_ENCODED"),bytes:p.string()}),lE=p.object({kind:p.literal("PSBT"),bytes:p.string()}),rd=p.union([p.array(p.number().int().min(0)),p.string(),uE,lE]),eu=p.object({envelope:p.string(),publicKey:p.string(),proof:p.string().optional()}),Mn=p.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),sU=p.object({publicKey:p.array(p.number().int().min(0)),algorithm:Mn}),aU=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.array(p.number().int().min(0)),algorithm:Mn}),p.object({authenticatorKind:p.literal("passkey")}),p.object({authenticatorKind:p.literal("oidc")})]),nd=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)})})]),fE=p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)}),id:p.string(),createdAtMs:p.number()})]),dE=p.object({type:p.literal("CEL"),preset:p.literal("LEGACY_USER_ROLE")}),hE=p.enum(["ALLOW","DENY"]),pE=p.object({expression:p.string().min(1).max(4096),outcome:hE,comment:p.string().min(0).max(200)}),Xf=p.lazy(()=>p.union([p.null(),p.boolean(),p.string(),p.number().finite(),p.array(Xf),p.record(Xf)])),mE=p.object({name:p.string().min(1).max(50),value:Xf,comment:p.string().min(0).max(200)}),gE=p.object({type:p.literal("CEL"),rules:p.array(pE),constants:p.array(mE)}),yE=p.object({usdCentsLimitPerDay:p.number(),memoryAccount:p.string(),memoryId:p.number(),memoryBump:p.number()}),vE=p.object({ethereumMessage:p.boolean(),ethereumTx:p.boolean(),ethereumTypedData:p.boolean(),rawPayload:p.boolean(),solanaTx:p.boolean(),utf8Message:p.boolean()}),wE=p.object({type:p.literal("CEL"),preset:p.literal("DAPP_CONNECTION_USER"),walletId:p.string(),usdLimit:yE.nullish().default(null),allowedMethods:vE.nullish().default(null),solanaProgramAllowlist:p.array(p.string()).nullish().default(null)}),bE=p.union([gE,dE,wE]),xE=p.object({type:p.literal("ROOT")}),wa=p.union([xE,bE]),Ng=p.enum(["ADMIN","USER"]),tu=p.object({username:p.string(),role:Ng.or(wa).optional(),traits:p.object({appId:p.string().optional()}).optional(),authenticators:p.array(nd),policy:wa.optional(),expiresInMs:p.number().optional()}),Dg=p.object({username:p.string(),role:Ng.optional(),authenticators:p.array(fE),traits:p.record(p.string()).optional().default({}),expiresAtMs:p.number().nullish().default(null),createdAtMs:p.number().nullish().default(null)}),AE=Dg.extend({policy:wa.optional()}),SE=p.union([AE,Dg]),Gt=p.object({organizationId:p.string(),organizationName:p.string(),parentOrganizationId:p.string().nullish().default(null),tags:p.array(p.string()),users:p.array(SE)}),EE=p.discriminatedUnion("rule",[p.object({rule:p.literal("SystemInstructionLamportsThreshold"),min:p.number().int().min(0).nullish().default(null),max:p.number().int().min(0).nullish().default(null)}),p.object({rule:p.literal("SystemInstructionRecipientAllowlist"),allowlist:p.array(p.string())})]),ME=p.union([p.object({In:p.array(p.number().int().min(0))}),p.object({Exact:p.number().int().min(0)}),p.literal("Any")]),Xc=p.object({programId:p.string(),discriminator:ME,validate:p.array(EE).optional()}),cU=p.object({max:p.number().int().min(0)}),uU=p.object({maxComputeUnitPrice:p.number().int().min(0).nullish().default(null),maxComputeUnits:p.number().int().min(0).nullish().default(null)}),lU=p.object({allowlist:p.array(Xc)}),fU=p.object({allowlist:p.array(Xc).optional()}),dU=p.null().default(null),TE=p.discriminatedUnion("rule",[p.object({rule:p.literal("NoSignerAccountUsage"),allowlist:p.array(Xc).optional()}),p.object({rule:p.literal("BundleSizeLimit"),max:p.number().int().min(0)}),p.object({rule:p.literal("ComputeBudgetLimit"),maxComputeUnitPrice:p.number().int().min(0).nullish().default(null),maxComputeUnits:p.number().int().min(0).nullish().default(null)}),p.object({rule:p.literal("NoAddressLookupTables")}),p.object({rule:p.literal("InstructionAllowlist"),allowlist:p.array(Xc)}),p.object({rule:p.literal("AllowAll")})]),IE=p.object({rules:p.array(TE)}),_E=p.object({version:p.literal("v0"),solana:IE.nullish().default(null)}),ba=_E,kE=p.enum(["owner","signaturePayload","signatureTransaction"]),PE=p.object({version:p.literal("v0"),scopes:p.array(kE),derivationAllowlist:p.array(Et).nullish().default(null)}),xa=PE;d();h();function Bi(e,t){return e.users.find(r=>r.authenticators.some(i=>i.authenticatorKind!=="keypair"?!1:fc(i.publicKey)===t))}n(Bi,"getByPublicKey");var BE=p.object({organizationName:p.string(),tags:p.array(p.string()).optional(),users:p.array(tu)}),Lg=p.object({result:Gt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function id(e,t){return Se(e.authenticator,"createOrganization",t,Lg)}n(id,"createOrganization");d();h();var KE=p.object({organizationId:p.string()}),Vg=p.object({result:Gt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function od(e,t){return Se(e.authenticator,"getOrganization",t,Vg)}n(od,"getOrganization");d();h();var OE=p.object({organizationId:p.string(),user:tu,replaceExpirable:p.boolean().optional()}),Fg=p.object({result:Gt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function sd(e,t){return Se(e.authenticator,"addUserToOrganization",t,Fg)}n(sd,"addUserToOrganization");d();h();var CE=p.object({organizationId:p.string(),username:p.string()}),jg=p.object({result:Gt});function ad(e,t){return Se(e.authenticator,"deleteUserFromOrganization",t,jg)}n(ad,"deleteUserFromOrganization");d();h();var RE=p.object({organizationId:p.string(),username:p.string(),newPolicy:wa.optional(),addTraits:p.record(p.string()).optional(),removeTraits:p.record(p.string()).optional()}),qg=p.object({result:Gt});function cd(e,t){return Se(e.authenticator,"updateUserInOrganization",t,qg)}n(cd,"updateUserInOrganization");d();h();var UE=p.object({organizationId:p.string(),username:p.string(),authenticator:nd}),zg=p.object({result:p.discriminatedUnion("authenticatorKind",[p.object({authenticatorKind:p.literal("keypair"),publicKey:p.string(),algorithm:Mn,authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("passkey"),authenticatorName:p.string(),id:p.string(),createdAtMs:p.number()}),p.object({authenticatorKind:p.literal("oidc"),authenticatorName:p.string(),jwksUrl:p.string().url(),idTokenClaims:p.object({sub:p.string(),iss:p.string(),aud:p.string().nullish().default(null)}),id:p.string(),createdAtMs:p.number()})])});function ud(e,t){return Se(e.authenticator,"createAuthenticator",t,zg)}n(ud,"createAuthenticator");d();h();var NE=p.object({organizationId:p.string(),username:p.string(),authenticatorId:p.string()}),Wg=p.object({result:Gt}).transform(e=>({result:e.result,getByPublicKey:n(t=>Bi(e.result,t),"getByPublicKey")}));function ld(e,t){return Se(e.authenticator,"deleteAuthenticator",t,Wg)}n(ld,"deleteAuthenticator");d();h();var DE=p.object({walletName:p.string(),organizationId:p.string(),mnemonicLength:p.number().int().min(0).default(24).optional(),accounts:p.array(Et).optional()}),Hg=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(p.object({curve:ed,derivationPath:p.string(),addressFormat:td,publicKey:p.string()}))})});function fd(e,t){return Se(e.authenticator,"createWallet",t,Hg)}n(fd,"createWallet");d();h();var LE=p.object({organizationId:p.string(),limit:p.number().int().min(0).optional(),offset:p.number().int().min(0).optional()}),$g=p.object({result:p.object({wallets:p.array(Ug),totalCount:p.number().int().min(0),limit:p.number().int().min(0),offset:p.number().int().min(0)})});function dd(e,t){return Se(e.authenticator,"getOrganizationWallets",t,$g)}n(dd,"getOrganizationWallets");d();h();var VE=p.object({walletName:p.string(),organizationId:p.string(),tag:p.string(),mnemonicLength:p.number().int().min(0).default(24).optional(),accounts:p.array(Et).optional()}),Gg=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function hd(e,t){return Se(e.authenticator,"getOrCreateWalletWithTag",t,Gg)}n(hd,"getOrCreateWalletWithTag");d();h();var FE=p.object({organizationId:p.string(),tag:p.string(),accounts:p.array(Et).optional()}),Zg=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function pd(e,t){return Se(e.authenticator,"getWalletWithTag",t,Zg)}n(pd,"getWalletWithTag");d();h();var jE=p.object({organizationId:p.string(),walletId:p.string(),publicKey:p.string()}),Jg=p.object({result:p.object({encrypted_bundle:p.string()})});function md(e,t){return Se(e.authenticator,"exportWallet",t,Jg)}n(md,"exportWallet");d();h();var qE=p.object({ownerOrganizationId:p.string(),targetOrganizationId:p.string(),walletId:p.string(),policy:xa,transactionPolicy:ba.nullish().default(null)}),Qg=p.object({result:p.object({organizationId:p.string(),walletId:p.string(),organizationPolicy:xa,transactionPolicy:ba.nullish().default(null)})});function gd(e,t){return Se(e.authenticator,"grantOrganizationAccess",t,Qg)}n(gd,"grantOrganizationAccess");d();h();var zE=p.object({ownerOrganizationId:p.string(),targetOrganizationId:p.string(),walletId:p.string()}),Yg=p.object({result:p.object({organizationId:p.string(),walletId:p.string(),organizationPolicy:xa,transactionPolicy:ba.nullish().default(null)})});function yd(e,t){return Se(e.authenticator,"revokeOrganizationAccess",t,Yg)}n(yd,"revokeOrganizationAccess");d();h();var WE=p.object({organizationId:p.string()}),Xg=p.object({result:eu,signature:p.string().optional()});function vd(e,t){return Se(e.authenticator,"initWalletImport",t,Xg)}n(vd,"initWalletImport");d();h();var HE=p.object({organizationId:p.string(),importEnvelope:eu,encryptedSecret:p.string().regex(lc),walletName:p.string(),accounts:p.array(Et),mnemonicLength:p.number().int().min(0).default(24).optional(),tags:p.array(p.string()).optional()}),ey=p.object({result:p.object({walletId:p.string(),walletName:p.string(),accounts:p.array(Pi)})});function wd(e,t){return Se(e.authenticator,"completeImportWallet",t,ey)}n(wd,"completeImportWallet");d();h();var $E=p.object({publicKey:p.string()}),ty=p.object({result:Gt});function bd(e,t){return Se(e.authenticator,"getOrCreatePhantomOrganization",t,ty)}n(bd,"getOrCreatePhantomOrganization");d();h();var GE=p.object({}),ry=p.object({result:Gt});function xd(e,t){return Se(e.authenticator,"getPhantomOrganization",t,ry)}n(xd,"getPhantomOrganization");d();h();var ZE=p.object({payload:p.union([p.array(p.number().int().min(0)),p.string()]),organizationId:p.string(),walletId:p.string(),derivationInfo:Et,algorithm:Mn}),ny=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Ad(e,t){let r=Array.isArray(t.payload)?ct(Buffer.from(t.payload)):t.payload;return Se(e.authenticator,"signRawPayload",{...t,payload:r},ny)}n(Ad,"signRawPayload");d();h();var JE=p.object({transaction:rd,organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().nullish().default(null)}),iy=p.object({result:p.object({transaction:rd,address:p.string(),publicKey:p.string()})});function Sd(e,t){return Se(e.authenticator,"signTransaction",t,iy)}n(Sd,"signTransaction");d();h();var QE=p.object({message:p.string(),organizationId:p.string(),walletId:p.string(),derivationInfo:Et,algorithm:Mn,policyName:p.string().optional()}),oy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Ed(e,t){return Se(e.authenticator,"signUtf8Message",t,oy)}n(Ed,"signUtf8Message");d();h();var YE=p.object({message:p.string(),organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().optional()}),sy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Md(e,t){return Se(e.authenticator,"ethereumSignMessage",t,sy)}n(Md,"ethereumSignMessage");d();h();var ay=p.union([ic,oc,sc]),XE=p.object({typedData:ay,organizationId:p.string(),walletId:p.string(),derivationInfo:Et.nullish().default(null),policyName:p.string().optional()}),cy=p.object({result:p.object({signature:p.string(),address:p.string(),publicKey:p.string()})});function Td(e,t){return Se(e.authenticator,"ethereumSignTypedData",t,cy)}n(Td,"ethereumSignTypedData");d();h();var e2=p.object({organizationId:p.string(),walletId:p.string(),accounts:p.array(Et)}),uy=p.object({result:p.array(Pi)});function Id(e,t){return Se(e.authenticator,"getAccounts",t,uy)}n(Id,"getAccounts");function _d(e){return{createOrganization:n(t=>id(e,t),"createOrganization"),getOrganization:n(t=>od(e,t),"getOrganization"),createAuthenticator:n(t=>ud(e,t),"createAuthenticator"),deleteAuthenticator:n(t=>ld(e,t),"deleteAuthenticator"),deleteUserFromOrganization:n(t=>ad(e,t),"deleteUserFromOrganization"),createWallet:n(t=>fd(e,t),"createWallet"),getOrganizationWallets:n(t=>dd(e,t),"getOrganizationWallets"),getOrCreateWalletWithTag:n(t=>hd(e,t),"getOrCreateWalletWithTag"),getWalletWithTag:n(t=>pd(e,t),"getWalletWithTag"),exportWallet:n(t=>md(e,t),"exportWallet"),grantOrganizationAccess:n(t=>gd(e,t),"grantOrganizationAccess"),revokeOrganizationAccess:n(t=>yd(e,t),"revokeOrganizationAccess"),initWalletImport:n(t=>vd(e,t),"initWalletImport"),completeImportWallet:n(t=>wd(e,t),"completeImportWallet"),getOrCreatePhantomOrganization:n(async()=>{let t=await e.authenticator.getPublicKey();return bd(e,{publicKey:t})},"getOrCreatePhantomOrganization"),getPhantomOrganization:n(t=>xd(e,t),"getPhantomOrganization"),getAuthenticatorPublicKey:n(()=>e.authenticator.getPublicKey(),"getAuthenticatorPublicKey"),signRawPayload:n(t=>Ad(e,t),"signRawPayload"),signTransaction:n(t=>Sd(e,t),"signTransaction"),signUtf8Message:n(t=>Ed(e,t),"signUtf8Message"),ethereumSignMessage:n(t=>Md(e,t),"ethereumSignMessage"),ethereumSignTypedData:n(t=>Td(e,t),"ethereumSignTypedData"),getAccounts:n(t=>Id(e,t),"getAccounts"),addUserToOrganization:n(t=>sd(e,t),"addUserToOrganization"),updateUserInOrganization:n(t=>cd(e,t),"updateUserInOrganization")}}n(_d,"createKMS");d();h();var r2=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","updateUserInOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","signUtf8Message","ethereumSignMessage","ethereumSignTypedData","getAccounts"],ly=p.enum(r2),n2=p.object({method:ly,params:p.record(p.unknown()),timestampMs:p.number().int().positive()});function kd(e){return n2.parse(e)}n(kd,"validateKMSRpcPayload");d();h();function i2(e){switch(e){case"Solana":case"Sui":return"Ed25519";case"Ethereum":case"BitcoinSegwit":case"BitcoinTaproot":return"Secp256k1";default:return xe(e)}}n(i2,"getExpectedCurve");function o2(e,t){for(let{curve:r,addressFormat:i}of e){let o=i2(i);if(r!==o)throw new Error(`KMS ${t} request expected curve ${o} for address format ${i}, received ${r}.`)}}n(o2,"validateRequestedAccounts");function fy(e){let t=e.response.data;return String(t?.error||"").toLowerCase()}n(fy,"getErrorMessage");function s2(e){return e.response.status===404||e.response.status===400&&fy(e).includes("organization is required")}n(s2,"isOrgMissing");function a2(e){return e.response.status===404||e.response.status===400&&fy(e).includes("wallet does not exist")}n(a2,"isWalletMissing");async function Pd(e,t,r){o2(r,"getWalletWithTag");let i;try{({result:i}=await e.getPhantomOrganization({}))}catch(o){if(o instanceof oi&&s2(o))return null;throw o}try{let{result:o}=await e.getWalletWithTag({organizationId:i.organizationId,tag:t,accounts:r});return{organizationId:i.organizationId,walletId:o.walletId,walletName:o.walletName,accounts:o.accounts}}catch(o){if(o instanceof oi&&a2(o))return null;throw o}}n(Pd,"getKMSWalletByTagIfExists");d();h();var c2="wallet: Validation error: Wallet does not exist",u2="Resource not found: Wallet";function l2(e){if(!(e instanceof oi))return!1;let t=e.response.status,r=e.response.data?.error||"";return t===400&&r.startsWith(c2)||t===404&&r.startsWith(u2)}n(l2,"isWalletNotFoundError");d();h();d();h();var ru=Object.values(Rt);function dy(e){switch(e.chainType){case _.Solana:case _.EVM:{let t=f2(e.chainType,e.address,e.publicKey);return{chainType:e.chainType,pathType:e.pathType,address:t}}case _.Sui:{let t=e.address??Nt({publicKey:e.publicKey,addressType:e.chainType});return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,addresses:d2(e.chainType,e.publicKey,e.addresses)};default:return xe(e)}}n(dy,"normalizeChainAddress");function f2(e,t,r){if(t)return t;if(r)return Nt({publicKey:r,addressType:e});throw new Error(`Expected address or publicKey for chain type ${e}`)}n(f2,"getAddressForEvmOrSolana");function d2(e,t,r){return r?h2(e,t,r):p2(e,t)}n(d2,"getBitcoinAddresses");function h2(e,t,r){let i={...r};for(let o of ru)i[o]||(i[o]=Nt({publicKey:t,addressType:e,networkID:o}));return i}n(h2,"fillMissingBitcoinAddresses");function p2(e,t){return ru.reduce((r,i)=>(r[i]=Nt({publicKey:t,addressType:e,networkID:i}),r),{})}n(p2,"deriveAllBitcoinAddresses");function hy(e){let t=dy(e);switch(t.chainType){case _.Solana:case _.EVM:return t;case _.Sui:return t;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return t;default:return xe(t)}}n(hy,"buildVaultChainAddress");function py(e){let t=dy(e);switch(t.chainType){case _.Solana:case _.EVM:return{chainType:t.chainType,publicKey:t.address,pathType:t.pathType};case _.Sui:return{chainType:t.chainType,publicKey:t.publicKey,address:t.address,pathType:t.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:t.chainType,publicKey:t.publicKey,addresses:t.addresses,pathType:t.pathType};default:return xe(t)}}n(py,"buildVaultStorageChainAddress");function my(e,t){return`${e}:${t}`}n(my,"descriptorKey");function nu(e,t){let r={},i=new Map;for(let o of t){let a=my(o.addressFormat,o.derivationPath);if(i.has(a))throw new Error(`Duplicate KMS account request for ${a}`);i.set(a,{descriptor:o,used:!1})}for(let o of e){let{addressFormat:a,derivationPath:l,address:f,publicKey:g}=o,x=my(a,l),I=i.get(x);if(!I)continue;if(I.used)throw new Error(`KMS returned duplicate account data for format=${a}, derivationPath=${l}.`);I.used=!0;let{chainType:M,pathType:k}=I.descriptor;r[M]=hy(m2({chainType:M,pathType:k,address:f,publicKey:g}))}for(let{descriptor:o,used:a}of i.values())if(!a)throw new Error(`KMS did not return data for requested chain ${o.chainType} with path ${o.derivationPath}`);return{chains:r}}n(nu,"convertKMSWalletToVaultAccountParams");function m2({chainType:e,pathType:t,address:r,publicKey:i}){switch(e){case _.Solana:return{chainType:e,pathType:t,address:r};case _.EVM:return{chainType:e,pathType:t,address:r};case _.Sui:{if(!i)throw new Error("KMS response missing required public key for Sui account conversion.");let o=nn(i);return{chainType:e,pathType:t,address:r,publicKey:o}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{if(!i)throw new Error("KMS response missing required public key for Bitcoin account conversion.");let o=nn(i),a=r?{[Rt.Mainnet]:r}:void 0;return{chainType:e,pathType:t,publicKey:o,addresses:a}}default:throw new Error(`Unsupported chain type ${e} returned from KMS conversion.`)}}n(m2,"createChainAddressInput");d();h();var g2="cash",y2="cash",v2={pathType:ee.Bip44ChangeSolana,index:0};async function gy(e){G.addBreadcrumb(H.Cash,"Getting user's Cash account from KMS",X.Debug);let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();t=r.organizationId}catch(r){G.addBreadcrumb(H.Cash,"[KMS] Error getting user's Phantom Org",X.Error);let i=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw G.captureError(i,H.Cash),i}try{let{result:{walletId:r,walletName:i,accounts:o}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:g2,tag:y2,mnemonicLength:24,accounts:[{derivationPath:Qn(v2),curve:"Ed25519",addressFormat:"Solana"}]});if(o.length===0)throw new Error("No Cash account found");return G.addBreadcrumb(H.Cash,`[KMS] Successfully got user's Cash wallet, address: ${o[0].address}`,X.Debug),{organizationId:t,walletId:r,walletName:i,account:o[0]}}catch(r){G.addBreadcrumb(H.Cash,"[KMS] Error getting user's Cash wallet",X.Error);let i=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw G.captureError(i,H.Cash),i}}n(gy,"getCashKMSAccount");d();h();d();h();function iu(e,t,r,i){let o=po(t,r);return e.find(a=>a.type===P.KMSVault&&a.identifier===o&&(!a.apiEnvironment||a.apiEnvironment===i))}n(iu,"findExistingKMSVaultAccount");function ou(e,t,r){let o=Jc(t).addresses;return e.some(a=>{if(a.type===P.KMSVault||"apiEnvironment"in a&&a.apiEnvironment&&a.apiEnvironment!==r)return!1;let l=Pg(a);for(let f of l.addresses)if(o.has(f))return!0;return!1})}n(ou,"hasMatchingNonKMSAccount");function yy(e){let t=e+1;return wn.t("onboardingImportAccountsAccountName",{walletIndex:t})}n(yy,"generateKMSAccountName");async function su(e,t,r,i,o,a,l,f){G.addBreadcrumb(H.Account,"Adding KMS vault account to local storage",X.Info);let g=await e.addKMSVaultAccount({organizationId:r,walletId:i,tag:o,derivationIndex:0,chains:a,apiEnvironment:f});G.addBreadcrumb(H.Account,"Added KMS vault account to vault storage",X.Info);let x=yy(l.length);return await ki(t,g.identifier,{name:x,icon:void 0}),G.addBreadcrumb(H.Account,`Set account metadata with name: ${x}`,X.Info),g}n(su,"addKMSVaultAccountWithMetadata");async function w2(e,t,r){try{G.addBreadcrumb(H.Account,"Starting KMS vault account sync (read-only)",X.Info);let i=await e.fetchAllAccounts();if(i.some(k=>k.type===P.Seedless))return G.addBreadcrumb(H.Account,"KMS vault sync skipped: user has seedless accounts (will migrate separately)",X.Info),{success:!1,action:"skipped_seedless",message:"Sync skipped for seedless accounts"};let a=e.getKMSInstance(),{derivations:l,conversionMetadata:f}=await Yc(t,0);G.addBreadcrumb(H.Account,`Checking for KMS vault with tag "${Dt}"`,X.Info);let g=await Pd(a,Dt,l);if(!g)return G.addBreadcrumb(H.Account,"KMS vault account not found remotely",X.Info),{success:!1,action:"not_found",message:"Vault account not found in KMS"};G.addBreadcrumb(H.Account,`Found KMS vault: ${g.walletId}`,X.Info);let{chains:x}=nu(g.accounts,f),I=nr()===Ct.Production?"production":"staging";return iu(i,g.walletId,Dt,I)?(G.addBreadcrumb(H.Account,"Upserting missing chains for existing KMS vault account",X.Info),await e.upsertKMSVaultChains({organizationId:g.organizationId,walletId:g.walletId,tag:Dt,derivationIndex:0,chains:x}),await ut(r),{success:!0,action:"already_synced",message:"Account already synced (updated chains)",walletId:g.walletId}):ou(i,x,I)?(G.addBreadcrumb(H.Account,"KMS vault sync skipped: matching non-KMS local account found by address",X.Info),{success:!0,action:"already_synced",message:"Matching non-KMS local account detected by address; skipping duplicate",walletId:g.walletId}):(G.addBreadcrumb(H.Account,"Adding KMS vault account to local storage",X.Info),await su(e,t,g.organizationId,g.walletId,Dt,x,i,I),await ut(r),G.addBreadcrumb(H.Account,"Successfully synced KMS vault account to local storage",X.Info),{success:!0,action:"synced",message:"Account synced successfully",walletId:g.walletId})}catch(i){return G.captureError(i,H.Account),{success:!1,action:"error",message:i.message}}}n(w2,"syncKMSVaultAccount");d();h();async function b2(e,t,r,i){try{G.addBreadcrumb(H.Account,"Storing KMS vault account from existing data",X.Info);let o=await t.fetchAllAccounts(),{conversionMetadata:a}=await Yc(r,0),{chains:l}=nu(e.accounts,a),f=nr()===Ct.Production?"production":"staging",g=iu(o,e.walletId,Dt,f);if(g)return G.addBreadcrumb(H.Account,"KMS vault account already exists locally",X.Info),await t.upsertKMSVaultChains({organizationId:e.organizationId,walletId:e.walletId,tag:Dt,derivationIndex:0,chains:l}),i&&await ut(i),{isNewAccount:!1,account:g,message:"Account already exists (chains updated if needed)"};if(ou(o,l,f))return G.addBreadcrumb(H.Account,"KMS vault account matches existing non-KMS account by address - skipping",X.Info),{isNewAccount:!1,account:null,message:"Matching non-KMS account detected by address"};G.addBreadcrumb(H.Account,"Adding new KMS vault account to local storage",X.Info);let x=await su(t,r,e.organizationId,e.walletId,Dt,l,o,f);return i&&await ut(i),G.addBreadcrumb(H.Account,"Successfully stored new KMS vault account",X.Info),{isNewAccount:!0,account:x,message:"Account created successfully"}}catch(o){return G.captureError(o,H.Account),{isNewAccount:!1,account:null,message:o.message}}}n(b2,"storeKMSVaultAccountFromData");d();h();d();h();d();h();function Bd(e,t){return e in t}n(Bd,"hasKey");var Aa=he(I1());function x2(e){return e=(0,Aa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let i=t.chains[r];if(i)switch(i.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{mo(i.publicKey)&&(i.publicKey=new Uint8Array(Buffer.from(i.publicKey)));break}default:xe(i)}}break;case P.SeedVault:break;default:xe(t)}}),e}n(x2,"deserializeVaultAccount");function A2(e){return e=(0,Aa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let i=t.chains[r];if(i)switch(i.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{i.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(i.publicKey).toJSON());break}default:xe(i)}}break;case P.SeedVault:break;default:xe(t)}}),e}n(A2,"serializeVaultAccount");function vy(e){return e=(0,Aa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))if(t.version===1&&mo(t.chains[r]?.publicKey)){let i=t.chains[r];i&&(i.publicKey=new Uint8Array(Buffer.from(i.publicKey)))}break;case P.SeedVault:break;default:xe(t)}}),e}n(vy,"deserializeVaultStorageAccount");function wy(e){return e=(0,Aa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case P.SeedVault:break;default:xe(t)}}),e}n(wy,"serializeVaultStorageAccount");function mo(e){return!!e&&typeof e=="object"&&Bd("type",e)&&typeof e.type=="string"&&Bd("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}n(mo,"isSerializedBuffer");d();h();var yr=".phantom-labs.vault";var cu=`${yr}.accounts`,fs=`${yr}.secrets`,uu=n(e=>`${yr}.privateKey.${e}`,"privateKeyStorageKey"),lu=n(e=>`${yr}.seed.${e}`,"seedStorageKey"),fu=n(e=>`${yr}.seedless.${e}`,"seedlessStorageKey"),au=`${yr}.integrityCheck`;async function dt(e){return(await _y(e))?.accounts??[]}n(dt,"fetchAllAccounts");async function Ay(e){let t=await sn(e),r=new Set(t.seedIdentifiers),i=await dt(e);for(let a of i)a.type===P.Seed&&r.add(a.seedIdentifier);let o=[];for(let a of r)o.push({identifier:a});return o}n(Ay,"fetchAllSeedMeta");async function du(e){let t=await sn(e),r=new Set(t.seedlessIdentifiers),i=await dt(e);for(let a of i)a.type===P.Seedless&&r.add(a.seedIdentifier);let o=[];for(let a of r)o.push({identifier:a});return o}n(du,"fetchAllSeedlessMeta");async function sn(e){let t=await e.generalStorage.get(fs);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}n(sn,"fetchSecretIdentifiers");async function Sy(e,t){let r=lu(t),i=await e.secretsStorage.getSecureValue(r);if(i===null){let o=fu(t);i=await e.secretsStorage.getSecureValue(o)}if(i==null)throw new Xn;return mo(i.entropy)?i.entropy=new Uint8Array(Buffer.from(i.entropy)):i.entropy=new Uint8Array(Object.values(i.entropy)),i}n(Sy,"fetchEntropy");async function Ki(e,t){let r=uu(t),i=await e.secretsStorage.getSecureValue(r);if(i==null)throw new io;return mo(i.privateKey)?i.privateKey=new Uint8Array(Buffer.from(i.privateKey)):i.privateKey=new Uint8Array(Object.values(i.privateKey)),i}n(Ki,"fetchPrivateKey");async function Lt(e,t,r=!0){let i=await _y(e);if(!i)i={version:1,accounts:[t]};else{let o=i.accounts,a=E2(o,t);if(a.length>0){if(!r)throw new xn(a[0].type,t.type);let l=xy(t.type);for(let g of a)if(xy(g.type)>=l)throw new xn(g.type,t.type);let f=a.map(g=>g.identifier);return o=o.filter(g=>!f.includes(g.identifier)),o.push(t),await on(e,o),await Kd(e)}else o.push(t);i.accounts=o}return on(e,i.accounts)}n(Lt,"storeAccount");async function on(e,t){let r={version:1,accounts:t};return e.generalStorage.set(cu,wy(r))}n(on,"storeAccounts");async function Ey(e,t){let r=uu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await I2(e,t.identifier)}n(Ey,"storePrivateKey");async function My(e,t){let r=lu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await M2(e,t.identifier)}n(My,"storeSeed");async function Ty(e,t){let r=fu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await T2(e,t.identifier)}n(Ty,"storeSeedlessSeed");async function Kd(e){let t=await dt(e),r=new Set,i=new Set;for(let f of t)switch(f.type){case P.Seed:case P.Seedless:r.add(f.seedIdentifier);break;case P.PrivateKey:i.add(f.privateKeyIdentifier);break;case P.Ledger:case P.ReadOnly:case P.SeedVault:case P.KMSVault:break;default:xe(f)}let o=await sn(e),a={seedIdentifiers:o.seedIdentifiers.filter(f=>r.has(f)),seedlessIdentifiers:o.seedlessIdentifiers.filter(f=>r.has(f)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(f=>i.has(f))},l={seedIdentifiers:o.seedIdentifiers.filter(f=>!r.has(f)),seedlessIdentifiers:o.seedlessIdentifiers.filter(f=>!r.has(f)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(f=>!i.has(f))};await e.generalStorage.set(fs,{version:1,...a}),await e.secretsStorage.removeSecureValue([...l.seedIdentifiers.map(f=>lu(f)),...l.seedlessIdentifiers.map(f=>fu(f)),...l.privateKeyIdentifiers.map(f=>uu(f))])}n(Kd,"removeDanglingSecrets");async function Od(e,t){t?await e.secretsStorage.setSecureValue(au,t):await e.secretsStorage.removeSecureValue(au)}n(Od,"storeIntegrityCheck");async function Cd(e){return e.secretsStorage.getSecureValue(au)}n(Cd,"fetchIntegrityCheck");async function Iy(e){await e.secureCache.clear(),await e.generalStorage.remove(cu);let t=await sn(e),r=t.privateKeyIdentifiers.map(a=>uu(a)),i=t.seedIdentifiers.map(a=>lu(a)),o=t.seedlessIdentifiers.map(a=>fu(a));await e.secretsStorage.removeSecureValue([...r,...o,...i]),await e.generalStorage.remove(fs),await e.secretsStorage.removeSecureValue(au)}n(Iy,"clearVault");async function _y(e){let t=await e.generalStorage.get(cu);return t?(t=vy(t),t=await S2(e,t),t):null}n(_y,"fetchStorageAccounts");async function S2(e,t){let r=!1;return t.accounts.forEach(i=>{switch(i.type){case P.PrivateKey:{r=by(i)||r;break}case P.ReadOnly:break;case P.Ledger:case P.Seed:case P.Seedless:Object.values(i.chains).forEach(o=>{r=by(o)||r});break;case P.SeedVault:case P.KMSVault:break;default:xe(i)}}),r&&await on(e,t.accounts),t}n(S2,"computeBitcoinAddressesIfNeeded");function by(e){let t=!1;switch(e.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(Rt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let i=Nt({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:i},t=!0});break}default:}return t}n(by,"computeBitcoinAddressesForChain");function E2(e,t){let r=$f(t),i=[];for(let o of e){let a=$f(o),l=Array.from(r.addresses).some(g=>a.addresses.has(g)),f=Array.from(r.publicKeys).some(g=>a.publicKeys.has(g));(l||f)&&i.push(o)}return i}n(E2,"existingAccountsMatchingAccount");async function M2(e,t){let r=await sn(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(M2,"storeSecretIdentifierForSeed");async function T2(e,t){let r=await sn(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(T2,"storeSecretIdentifierForSeedless");async function I2(e,t){let r=await sn(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(fs,{version:1,...r})}n(I2,"storeSecretIdentifierForPrivateKey");function xy(e){switch(e){case P.ReadOnly:return 1;case P.PrivateKey:return 2;case P.Seedless:case P.Seed:return 3;case P.Ledger:return 4;case P.SeedVault:return 5;case P.KMSVault:return 6;default:return 0}}n(xy,"accountTypeOverridePriority");d();h();d();h();var Pa=he(en()),Cn=he(ah());d();h();d();h();var WM=p.array(p.object({address:p.string(),signingIndexes:p.array(p.number()),sigHash:p.number().optional(),isScriptSpend:p.boolean().optional()})),$v=p.object({chainType:Ys,signingType:p.literal("transaction"),message:p.string().min(1),inputsToSign:WM.optional(),finalize:p.boolean()}),HM=p.object({chainType:Ys,signingType:p.literal("message"),message:p.instanceof(Uint8Array)}),$M=$v.or(HM),Gv=p.object({chainType:p.literal(_.Sui),signingType:p.literal("transaction"),transaction:p.instanceof(Uint8Array)}),Zv=p.object({chainType:p.literal(_.Sui),signingType:p.literal("personalMessage"),message:p.instanceof(Uint8Array)}),GM=Gv.or(Zv),Jv=p.object({chainType:p.literal(_.Solana),signingType:p.literal("transaction"),message:p.union([p.string().min(1),p.instanceof(Uint8Array)])}),Qv=p.object({chainType:p.literal(_.Solana),signingType:p.literal("message"),message:p.string().min(1)}),Yv=Jv.or(Qv),Xv=p.object({chainType:p.literal(_.EVM),signingType:p.literal("transaction"),message:p.string().min(1)}),ch=p.object({chainType:p.literal(_.EVM),signingType:p.literal("message"),message:p.string().min(1)}),uh=p.object({chainType:p.literal(_.EVM),signingType:p.literal("typedData"),version:p.literal(1),data:ic}),lh=p.object({chainType:p.literal(_.EVM),signingType:p.literal("typedData"),version:p.literal(3),data:oc}),fh=p.object({chainType:p.literal(_.EVM),signingType:p.literal("typedData"),version:p.literal(4),data:sc}),ZM=Xv.or(ch).or(uh).or(lh).or(fh),JM=p.object({isJWT:p.literal(!0),data:rf}),On=p.object({policyName:p.string().optional()}),QM=Jv.merge(On),YM=Qv.merge(On),Rj=QM.or(YM),XM=Xv.merge(On),eT=ch.merge(On),tT=uh.merge(On),rT=lh.merge(On),nT=fh.merge(On),Uj=XM.or(eT).or(tT).or(rT).or(nT),Nj=$v.merge(On),Dj=p.union([Gv.merge(On),Zv.merge(On)]),iT=p.object({isKMSPKIAuthenticator:p.literal(!0),payload:p.custom()}),Lj=p.object({organizationId:p.string(),walletId:p.string(),derivationPath:p.string()}),ew=p.object({isCash:p.literal(!0),data:Yv}),oT=ew.extend({isCashKMS:p.literal(!0)}),sT=ch.extend({isAgentWallet:p.literal(!0)}),aT=uh.extend({isAgentWallet:p.literal(!0)}),cT=lh.extend({isAgentWallet:p.literal(!0)}),uT=fh.extend({isAgentWallet:p.literal(!0)}),lT=p.union([sT,aT,cT,uT]),fT=p.object({status:p.literal("success"),signature:p.string()}),tw=p.object({status:p.literal("success"),signature:p.string()}),dT=p.object({status:p.literal("success"),signature:p.string(),message:p.instanceof(Uint8Array).optional()}),hT=p.object({status:p.literal("success"),signature:p.string()}),pT=p.object({status:p.literal("success"),signature:p.string(),signedJWT:tf.optional()}),mT=p.object({status:p.literal("success"),signature:p.string()}),gT=tw;var dh=Yv.or(ZM).or($M).or(GM).or(JM).or(iT).or(lT).or(ew).or(oT),se;(function(e){e.InvalidInput="invalidInput",e.InvalidAccountId="invalidAccountId",e.InvalidAddressType="invalidAddressType",e.InvalidMessageEncoding="invalidMessageEncoding",e.InvalidDerivationPath="invalidDerivationPath",e.InvalidRpcPayload="invalidRpcPayload",e.LedgerAppNotOpen="ledgerAppNotOpen",e.LedgerNotConnected="ledgerNotConnected",e.LedgerNeedPermission="ledgerNeedPermission",e.LedgerRejectAction="ledgerRejectAction",e.LedgerUnknownSignError="ledgerUnknownSignError",e.UnsupportedOperation="unsupportedOperation",e.InternalError="internalError",e.ExpiredTokenError="expiredToken",e.BeforeIATError="beforeTimeOfIssuance",e.InvalidClaimError="invalidClaim"})(se||(se={}));var yT=p.object({status:p.literal("error"),type:p.nativeEnum(se),message:p.string()}),vT=p.union([pT,mT,gT,dT,fT,tw,hT,yT]),Mt;(function(e){e.KeyPair="keyPair",e.Ledger="ledger",e.SeedVault="seedVault",e.KMS="kms"})(Mt||(Mt={}));var wT={[se.InvalidInput]:{message:"Invalid input"},[se.InvalidAccountId]:{message:"Invalid account identifier."},[se.InvalidAddressType]:{message:"Invalid chain type."},[se.InvalidMessageEncoding]:{message:"Invalid message encoding."},[se.InvalidDerivationPath]:{message:"Invalid derivation path."},[se.InvalidRpcPayload]:{message:"Invalid KMS RPC payload."},[se.LedgerAppNotOpen]:{message:"Ledger App not open."},[se.LedgerNotConnected]:{message:"Ledger not connected."},[se.LedgerNeedPermission]:{message:"Need permission to connect to Ledger."},[se.LedgerRejectAction]:{message:"Ledger user rejected action."},[se.LedgerUnknownSignError]:{message:"Ledger unknown sign error."},[se.UnsupportedOperation]:{message:"Unsupported operation."},[se.InternalError]:{message:"Internal error."},[se.ExpiredTokenError]:{message:"Token is expired"},[se.BeforeIATError]:{message:"Received token before issuance time"},[se.InvalidClaimError]:{message:"Claim is invalid"}},ve=n((e,t)=>({status:"error",type:e,message:t??wT[e].message}),"createVaultSignerError");var rw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Pa.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Pa.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V3,o=t.data,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Pa.Buffer.from(e.privateKey.slice()),i=Cn.SignTypedDataVersion.V4,o=t.data,a=(0,Cn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,i=Pa.Buffer.from(e.privateKey);try{let o=(0,Cn.personalSign)({privateKey:i,data:r});return Promise.resolve({status:"success",signature:o})}finally{i.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createAgentWalletKeypairSigner");d();h();var ur=he(en());var nw=he(Q0()),hh=he(T1());var ph=n(e=>e.length===32?e:e.slice(1,33),"toXOnly");function bT(e){return ur.Buffer.concat([(0,hh.encode)(e.byteLength),e])}n(bT,"encodeVarString");function xT(e){let{sha256:t}=nw.crypto,i=t(ur.Buffer.from("BIP0322-signed-message"));return t(ur.Buffer.concat([i,i,ur.Buffer.from(e)])).toString("hex")}n(xT,"bip0322Hash");var AT=n((e,t)=>{switch(e){case _.BitcoinTaproot:return C0.getPublicKey(t);case _.BitcoinNestedSegwit:return jl(t,!0);case _.BitcoinNativeSegwit:return jl(t,!0);default:throw new Error("Unsupported Address Type")}},"getSigningPk"),ST=n((e,t)=>{let r=pm;switch(e){case _.BitcoinTaproot:return gm(t,void 0,r);case _.BitcoinNativeSegwit:return $l(t,r);case _.BitcoinNestedSegwit:{let i=$l(t,r);return mm(i,r)}default:throw new Error("Unsupported Address Type")}},"getSignerScript");function ET(e,t,r,i){let o=yc.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(a=>{let l=jo(Rt.Mainnet,a.address),f=e[l];if(!f)throw new Error("missing private key for ("+l+")");let{publicKey:g,privateKey:x}=f;a.signingIndexes.forEach(I=>{let M=o.getInput(I),k=M.witnessUtxo?.script&&ym.decode(M.witnessUtxo.script);if(!a.isScriptSpend&&!M.tapInternalKey&&k?.type==="tr"&&o.updateInput(I,{tapInternalKey:ph(ur.Buffer.from(g))}),a.sigHash)try{o.signIdx(x,I,[a.sigHash],Qs(32))}catch{o.signIdx(x,I,void 0,Qs(32))}else o.signIdx(x,I,void 0,Qs(32));if(i)try{o.finalizeIdx(I)}catch{}})})}catch(a){throw console.error(a),new Error(`Error signing PSBT ${a.toString()}`)}return Promise.resolve(o.toPSBT(0))}n(ET,"signPsbt");var iw=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,i=ur.Buffer.from(t.message).toString("utf8"),o=e[t.chainType]?.privateKey;if(!o)throw new Error("missing private key for ("+t.chainType+")");let a=ur.Buffer.from(o).toString("hex"),l=AT(r,a),f=ST(r,l),g=ur.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),x=0,I=4294967295,M=0,k=Hl.encode(["OP_0",ur.Buffer.from(xT(i),"hex")]),O=new yc({allowUnknownOutputs:!0,version:x});O.addOutput({amount:BigInt(0),script:f.script}),O.addInput({txid:g,index:I,sequence:M,finalScriptSig:k});let C=new yc({allowUnknownOutputs:!0,version:x});C.addInput({txid:O.id,index:0,sequence:M,tapInternalKey:r===_.BitcoinTaproot?l:void 0,witnessUtxo:{script:f.script,amount:BigInt(0)},redeemScript:f.redeemScript}),C.addOutput({script:Hl.encode(["RETURN"]),amount:BigInt(0)}),C.sign(ur.Buffer.from(a,"hex"),void 0,Qs(32)),C.finalize();let R,j=C.getInput(0);if(j.finalScriptWitness?.length){let F=(0,hh.encode)(j.finalScriptWitness?.length);R=ur.Buffer.concat([F,...j.finalScriptWitness.map(Y=>bT(Y))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:R.toString("hex"),message:C.toBytes()}}case"transaction":{let r=await ET(e,t.inputsToSign??[],ur.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:ur.Buffer.from(r).toString("hex")}}}}catch{return ve(se.InternalError)}},"sign")}),"createBitcoinKeyPairSigner");d();h();var sw=he(No()),aw=he(yi());d();h();var ow=he(No());function ku(e,t,r){if(r!==_.Solana)return ve(se.InvalidAddressType);if(e instanceof Uint8Array)return e;try{return t==="transaction"?ow.default.decode(e):Buffer.from(e,"utf8")}catch(i){return ve(se.InvalidMessageEncoding,`Failed to decode message: ${i instanceof Error?i.message:"Unknown error"}`)}}n(ku,"decodeSolanaMessage");var cw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{let r=t.data,i=ku(r.message,r.signingType,r.chainType);if("status"in i)return Promise.resolve(i);let o=sw.default.encode(aw.default.sign.detached(i,e.privateKey));return Promise.resolve({status:"success",signature:o})},"sign")}),"createCashVaultSigner");d();h();var Es=he(en()),uw=he(v1());var Rn=he(ah()),lw=he(Do());var fw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V3,o=t.data,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Es.Buffer.from(e.privateKey.slice()),i=Rn.SignTypedDataVersion.V4,o=t.data,a=(0,Rn.signTypedData)({privateKey:r,version:i,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,i=(0,Rn.personalSign)({privateKey:Es.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:i})}case"transaction":{let r=Es.Buffer.from(t.message.replace("0x",""),"hex"),i=new F0(e.privateKey),o=`0x${(0,lw.keccak256)(r)}`,a=(0,uw.joinSignature)(i.signDigest(o));return Promise.resolve({status:"success",signature:a})}}}catch(r){return console.error(r),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createEthereumKeyPairSigner");d();h();var Po=he(en());d();h();d();h();d();h();d();h();function dw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}n(dw,"number");function MT(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(MT,"isBytes");function mh(e,...t){if(!MT(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}n(mh,"bytes");function hw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dw(e.outputLen),dw(e.blockLen)}n(hw,"hash");function Ms(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}n(Ms,"exists");function pw(e,t){mh(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}n(pw,"output");d();h();d();h();var Pu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function mw(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(mw,"isBytes");var Bu=n(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),fn=n((e,t)=>e<<32-t|e>>>t,"rotr"),TT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!TT)throw new Error("Non little-endian hardware is not supported");function IT(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(IT,"utf8ToBytes");function Ba(e){if(typeof e=="string"&&(e=IT(e)),!mw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}n(Ba,"toBytes");function gw(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!mw(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t);for(let i=0,o=0;i<e.length;i++){let a=e[i];r.set(a,o),o+=a.length}return r}n(gw,"concatBytes");var Ts=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},Lq={}.toString;function yw(e){let t=n(i=>e().update(Ba(i)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}n(yw,"wrapConstructor");function vw(e=32){if(Pu&&typeof Pu.getRandomValues=="function")return Pu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}n(vw,"randomBytes");var Ku=class extends Ts{static{n(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,hw(t);let i=Ba(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?t.create().update(i).digest():i);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return Ms(this),this.iHash.update(t),this}digestInto(t){Ms(this),mh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:i,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},gh=n((e,t,r)=>new Ku(e,t).update(r).digest(),"hmac");gh.create=(e,t)=>new Ku(e,t);d();h();d();h();var bh={};m1(bh,{bitGet:()=>CT,bitLen:()=>OT,bitMask:()=>Ka,bitSet:()=>RT,bytesToHex:()=>Mo,bytesToNumberBE:()=>ai,bytesToNumberLE:()=>Cu,concatBytes:()=>Is,createHmacDrbg:()=>wh,ensureBytes:()=>wr,equalBytes:()=>BT,hexToBytes:()=>To,hexToNumber:()=>vh,isBytes:()=>dn,numberToBytesBE:()=>Ui,numberToBytesLE:()=>Ru,numberToHexUnpadded:()=>Aw,numberToVarBytesBE:()=>PT,utf8ToBytes:()=>KT,validateObject:()=>Ni});d();h();var xw=BigInt(0),Ou=BigInt(1),_T=BigInt(2);function dn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(dn,"isBytes");var kT=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Mo(e){if(!dn(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=kT[e[r]];return t}n(Mo,"bytesToHex");function Aw(e){let t=e.toString(16);return t.length&1?`0${t}`:t}n(Aw,"numberToHexUnpadded");function vh(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}n(vh,"hexToNumber");var si={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ww(e){if(e>=si._0&&e<=si._9)return e-si._0;if(e>=si._A&&e<=si._F)return e-(si._A-10);if(e>=si._a&&e<=si._f)return e-(si._a-10)}n(ww,"asciiToBase16");function To(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=ww(e.charCodeAt(a)),f=ww(e.charCodeAt(a+1));if(l===void 0||f===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}i[o]=l*16+f}return i}n(To,"hexToBytes");function ai(e){return vh(Mo(e))}n(ai,"bytesToNumberBE");function Cu(e){if(!dn(e))throw new Error("Uint8Array expected");return vh(Mo(Uint8Array.from(e).reverse()))}n(Cu,"bytesToNumberLE");function Ui(e,t){return To(e.toString(16).padStart(t*2,"0"))}n(Ui,"numberToBytesBE");function Ru(e,t){return Ui(e,t).reverse()}n(Ru,"numberToBytesLE");function PT(e){return To(Aw(e))}n(PT,"numberToVarBytesBE");function wr(e,t,r){let i;if(typeof t=="string")try{i=To(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(dn(t))i=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=i.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return i}n(wr,"ensureBytes");function Is(...e){let t=0;for(let o=0;o<e.length;o++){let a=e[o];if(!dn(a))throw new Error("Uint8Array expected");t+=a.length}let r=new Uint8Array(t),i=0;for(let o=0;o<e.length;o++){let a=e[o];r.set(a,i),i+=a.length}return r}n(Is,"concatBytes");function BT(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return r===0}n(BT,"equalBytes");function KT(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(KT,"utf8ToBytes");function OT(e){let t;for(t=0;e>xw;e>>=Ou,t+=1);return t}n(OT,"bitLen");function CT(e,t){return e>>BigInt(t)&Ou}n(CT,"bitGet");var RT=n((e,t,r)=>e|(r?Ou:xw)<<BigInt(t),"bitSet"),Ka=n(e=>(_T<<BigInt(e-1))-Ou,"bitMask"),yh=n(e=>new Uint8Array(e),"u8n"),bw=n(e=>Uint8Array.from(e),"u8fr");function wh(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=yh(e),o=yh(e),a=0,l=n(()=>{i.fill(1),o.fill(0),a=0},"reset"),f=n((...M)=>r(o,i,...M),"h"),g=n((M=yh())=>{o=f(bw([0]),M),i=f(),M.length!==0&&(o=f(bw([1]),M),i=f())},"reseed"),x=n(()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let M=0,k=[];for(;M<t;){i=f();let O=i.slice();k.push(O),M+=i.length}return Is(...k)},"gen");return n((M,k)=>{l(),g(M);let O;for(;!(O=k(x()));)g();return l(),O},"genUntil")}n(wh,"createHmacDrbg");var UT={bigint:n(e=>typeof e=="bigint","bigint"),function:n(e=>typeof e=="function","function"),boolean:n(e=>typeof e=="boolean","boolean"),string:n(e=>typeof e=="string","string"),stringOrUint8Array:n(e=>typeof e=="string"||dn(e),"stringOrUint8Array"),isSafeInteger:n(e=>Number.isSafeInteger(e),"isSafeInteger"),array:n(e=>Array.isArray(e),"array"),field:n((e,t)=>t.Fp.isValid(e),"field"),hash:n(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function Ni(e,t,r={}){let i=n((o,a,l)=>{let f=UT[a];if(typeof f!="function")throw new Error(`Invalid validator "${a}", expected function`);let g=e[o];if(!(l&&g===void 0)&&!f(g,e))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${a}`)},"checkField");for(let[o,a]of Object.entries(t))i(o,a,!1);for(let[o,a]of Object.entries(r))i(o,a,!0);return e}n(Ni,"validateObject");var Kt=BigInt(0),Tt=BigInt(1),Io=BigInt(2),NT=BigInt(3),xh=BigInt(4),Sw=BigInt(5),Ew=BigInt(8),DT=BigInt(9),LT=BigInt(16);function Zt(e,t){let r=e%t;return r>=Kt?r:t+r}n(Zt,"mod");function VT(e,t,r){if(r<=Kt||t<Kt)throw new Error("Expected power/modulo > 0");if(r===Tt)return Kt;let i=Tt;for(;t>Kt;)t&Tt&&(i=i*e%r),e=e*e%r,t>>=Tt;return i}n(VT,"pow");function br(e,t,r){let i=e;for(;t-- >Kt;)i*=i,i%=r;return i}n(br,"pow2");function Uu(e,t){if(e===Kt||t<=Kt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Zt(e,t),i=t,o=Kt,a=Tt,l=Tt,f=Kt;for(;r!==Kt;){let x=i/r,I=i%r,M=o-l*x,k=a-f*x;i=r,r=I,o=l,a=f,l=M,f=k}if(i!==Tt)throw new Error("invert: does not exist");return Zt(o,t)}n(Uu,"invert");function FT(e){let t=(e-Tt)/Io,r,i,o;for(r=e-Tt,i=0;r%Io===Kt;r/=Io,i++);for(o=Io;o<e&&VT(o,t,e)!==e-Tt;o++);if(i===1){let l=(e+Tt)/xh;return n(function(g,x){let I=g.pow(x,l);if(!g.eql(g.sqr(I),x))throw new Error("Cannot find square root");return I},"tonelliFast")}let a=(r+Tt)/Io;return n(function(f,g){if(f.pow(g,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let x=i,I=f.pow(f.mul(f.ONE,o),r),M=f.pow(g,a),k=f.pow(g,r);for(;!f.eql(k,f.ONE);){if(f.eql(k,f.ZERO))return f.ZERO;let O=1;for(let R=f.sqr(k);O<x&&!f.eql(R,f.ONE);O++)R=f.sqr(R);let C=f.pow(I,Tt<<BigInt(x-O-1));I=f.sqr(C),M=f.mul(M,C),k=f.mul(k,I),x=O}return M},"tonelliSlow")}n(FT,"tonelliShanks");function jT(e){if(e%xh===NT){let t=(e+Tt)/xh;return n(function(i,o){let a=i.pow(o,t);if(!i.eql(i.sqr(a),o))throw new Error("Cannot find square root");return a},"sqrt3mod4")}if(e%Ew===Sw){let t=(e-Sw)/Ew;return n(function(i,o){let a=i.mul(o,Io),l=i.pow(a,t),f=i.mul(o,l),g=i.mul(i.mul(f,Io),l),x=i.mul(f,i.sub(g,i.ONE));if(!i.eql(i.sqr(x),o))throw new Error("Cannot find square root");return x},"sqrt5mod8")}return e%LT,FT(e)}n(jT,"FpSqrt");var qT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ah(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=qT.reduce((i,o)=>(i[o]="function",i),t);return Ni(e,r)}n(Ah,"validateField");function zT(e,t,r){if(r<Kt)throw new Error("Expected power > 0");if(r===Kt)return e.ONE;if(r===Tt)return t;let i=e.ONE,o=t;for(;r>Kt;)r&Tt&&(i=e.mul(i,o)),o=e.sqr(o),r>>=Tt;return i}n(zT,"FpPow");function WT(e,t){let r=new Array(t.length),i=t.reduce((a,l,f)=>e.is0(l)?a:(r[f]=a,e.mul(a,l)),e.ONE),o=e.inv(i);return t.reduceRight((a,l,f)=>e.is0(l)?a:(r[f]=e.mul(a,r[f]),e.mul(a,l)),o),r}n(WT,"FpInvertBatch");function Sh(e,t){let r=t!==void 0?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}n(Sh,"nLength");function Nu(e,t,r=!1,i={}){if(e<=Kt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:a}=Sh(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");let l=jT(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Ka(o),ZERO:Kt,ONE:Tt,create:n(g=>Zt(g,e),"create"),isValid:n(g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return Kt<=g&&g<e},"isValid"),is0:n(g=>g===Kt,"is0"),isOdd:n(g=>(g&Tt)===Tt,"isOdd"),neg:n(g=>Zt(-g,e),"neg"),eql:n((g,x)=>g===x,"eql"),sqr:n(g=>Zt(g*g,e),"sqr"),add:n((g,x)=>Zt(g+x,e),"add"),sub:n((g,x)=>Zt(g-x,e),"sub"),mul:n((g,x)=>Zt(g*x,e),"mul"),pow:n((g,x)=>zT(f,g,x),"pow"),div:n((g,x)=>Zt(g*Uu(x,e),e),"div"),sqrN:n(g=>g*g,"sqrN"),addN:n((g,x)=>g+x,"addN"),subN:n((g,x)=>g-x,"subN"),mulN:n((g,x)=>g*x,"mulN"),inv:n(g=>Uu(g,e),"inv"),sqrt:i.sqrt||(g=>l(f,g)),invertBatch:n(g=>WT(f,g),"invertBatch"),cmov:n((g,x,I)=>I?x:g,"cmov"),toBytes:n(g=>r?Ru(g,a):Ui(g,a),"toBytes"),fromBytes:n(g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return r?Cu(g):ai(g)},"fromBytes")});return Object.freeze(f)}n(Nu,"Field");function Mw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}n(Mw,"getFieldBytesLength");function Eh(e){let t=Mw(e);return t+Math.ceil(t/2)}n(Eh,"getMinHashLength");function Du(e,t,r=!1){let i=e.length,o=Mw(t),a=Eh(t);if(i<16||i<a||i>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${i}`);let l=r?ai(e):Cu(e),f=Zt(l,t-Tt)+Tt;return r?Ru(f,o):Ui(f,o)}n(Du,"mapHashToField");d();h();var HT=BigInt(0),Mh=BigInt(1);function Iw(e,t){let r=n((o,a)=>{let l=a.negate();return o?l:a},"constTimeNegate"),i=n(o=>{let a=Math.ceil(t/o)+1,l=2**(o-1);return{windows:a,windowSize:l}},"opts");return{constTimeNegate:r,unsafeLadder(o,a){let l=e.ZERO,f=o;for(;a>HT;)a&Mh&&(l=l.add(f)),f=f.double(),a>>=Mh;return l},precomputeWindow(o,a){let{windows:l,windowSize:f}=i(a),g=[],x=o,I=x;for(let M=0;M<l;M++){I=x,g.push(I);for(let k=1;k<f;k++)I=I.add(x),g.push(I);x=I.double()}return g},wNAF(o,a,l){let{windows:f,windowSize:g}=i(o),x=e.ZERO,I=e.BASE,M=BigInt(2**o-1),k=2**o,O=BigInt(o);for(let C=0;C<f;C++){let R=C*g,j=Number(l&M);l>>=O,j>g&&(j-=k,l+=Mh);let F=R,Y=R+Math.abs(j)-1,L=C%2!==0,ce=j<0;j===0?I=I.add(r(L,a[F])):x=x.add(r(ce,a[Y]))}return{p:x,f:I}},wNAFCached(o,a,l,f){let g=o._WINDOW_SIZE||1,x=a.get(o);return x||(x=this.precomputeWindow(o,g),g!==1&&a.set(o,f(x))),this.wNAF(g,x,l)}}}n(Iw,"wNAF");function Th(e){return Ah(e.Fp),Ni(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Sh(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}n(Th,"validateBasic");function $T(e){let t=Th(e);Ni(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:o}=t;if(r){if(!i.eql(o,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}n($T,"validatePointOpts");var{bytesToNumberBE:GT,hexToBytes:ZT}=bh,_o={Err:class extends Error{static{n(this,"DERErr")}constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=_o;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(i[0]&128)throw new t("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:GT(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=_o,r=typeof e=="string"?ZT(e):e;if(!dn(r))throw new Error("ui8a expected");let i=r.length;if(i<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:o,l:a}=_o._parseInt(r.subarray(2)),{d:l,l:f}=_o._parseInt(a);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:l}},hexFromSig(e){let t=n(x=>Number.parseInt(x[0],16)&8?"00"+x:x,"slice"),r=n(x=>{let I=x.toString(16);return I.length&1?`0${I}`:I},"h"),i=t(r(e.s)),o=t(r(e.r)),a=i.length/2,l=o.length/2,f=r(a),g=r(l);return`30${r(l+a+4)}02${g}${o}02${f}${i}`}},ci=BigInt(0),Cr=BigInt(1),dz=BigInt(2),_w=BigInt(3),hz=BigInt(4);function JT(e){let t=$T(e),{Fp:r}=t,i=t.toBytes||((C,R,j)=>{let F=R.toAffine();return Is(Uint8Array.from([4]),r.toBytes(F.x),r.toBytes(F.y))}),o=t.fromBytes||(C=>{let R=C.subarray(1),j=r.fromBytes(R.subarray(0,r.BYTES)),F=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:j,y:F}});function a(C){let{a:R,b:j}=t,F=r.sqr(C),Y=r.mul(F,C);return r.add(r.add(Y,r.mul(C,R)),j)}if(n(a,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(C){return typeof C=="bigint"&&ci<C&&C<t.n}n(l,"isWithinCurveOrder");function f(C){if(!l(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}n(f,"assertGE");function g(C){let{allowedPrivateKeyLengths:R,nByteLength:j,wrapPrivateKey:F,n:Y}=t;if(R&&typeof C!="bigint"){if(dn(C)&&(C=Mo(C)),typeof C!="string"||!R.includes(C.length))throw new Error("Invalid key");C=C.padStart(j*2,"0")}let L;try{L=typeof C=="bigint"?C:ai(wr("private key",C,j))}catch{throw new Error(`private key must be ${j} bytes, hex or bigint, not ${typeof C}`)}return F&&(L=Zt(L,Y)),f(L),L}n(g,"normPrivateKeyToScalar");let x=new Map;function I(C){if(!(C instanceof M))throw new Error("ProjectivePoint expected")}n(I,"assertPrjPoint");class M{static{n(this,"Point")}constructor(R,j,F){if(this.px=R,this.py=j,this.pz=F,R==null||!r.isValid(R))throw new Error("x required");if(j==null||!r.isValid(j))throw new Error("y required");if(F==null||!r.isValid(F))throw new Error("z required")}static fromAffine(R){let{x:j,y:F}=R||{};if(!R||!r.isValid(j)||!r.isValid(F))throw new Error("invalid affine point");if(R instanceof M)throw new Error("projective point not allowed");let Y=n(L=>r.eql(L,r.ZERO),"is0");return Y(j)&&Y(F)?M.ZERO:new M(j,F,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){let j=r.invertBatch(R.map(F=>F.pz));return R.map((F,Y)=>F.toAffine(j[Y])).map(M.fromAffine)}static fromHex(R){let j=M.fromAffine(o(wr("pointHex",R)));return j.assertValidity(),j}static fromPrivateKey(R){return M.BASE.multiply(g(R))}_setWindowSize(R){this._WINDOW_SIZE=R,x.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:R,y:j}=this.toAffine();if(!r.isValid(R)||!r.isValid(j))throw new Error("bad point: x or y not FE");let F=r.sqr(j),Y=a(R);if(!r.eql(F,Y))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:R}=this.toAffine();if(r.isOdd)return!r.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){I(R);let{px:j,py:F,pz:Y}=this,{px:L,py:ce,pz:te}=R,ie=r.eql(r.mul(j,te),r.mul(L,Y)),ae=r.eql(r.mul(F,te),r.mul(ce,Y));return ie&&ae}negate(){return new M(this.px,r.neg(this.py),this.pz)}double(){let{a:R,b:j}=t,F=r.mul(j,_w),{px:Y,py:L,pz:ce}=this,te=r.ZERO,ie=r.ZERO,ae=r.ZERO,Z=r.mul(Y,Y),ge=r.mul(L,L),A=r.mul(ce,ce),s=r.mul(Y,L);return s=r.add(s,s),ae=r.mul(Y,ce),ae=r.add(ae,ae),te=r.mul(R,ae),ie=r.mul(F,A),ie=r.add(te,ie),te=r.sub(ge,ie),ie=r.add(ge,ie),ie=r.mul(te,ie),te=r.mul(s,te),ae=r.mul(F,ae),A=r.mul(R,A),s=r.sub(Z,A),s=r.mul(R,s),s=r.add(s,ae),ae=r.add(Z,Z),Z=r.add(ae,Z),Z=r.add(Z,A),Z=r.mul(Z,s),ie=r.add(ie,Z),A=r.mul(L,ce),A=r.add(A,A),Z=r.mul(A,s),te=r.sub(te,Z),ae=r.mul(A,ge),ae=r.add(ae,ae),ae=r.add(ae,ae),new M(te,ie,ae)}add(R){I(R);let{px:j,py:F,pz:Y}=this,{px:L,py:ce,pz:te}=R,ie=r.ZERO,ae=r.ZERO,Z=r.ZERO,ge=t.a,A=r.mul(t.b,_w),s=r.mul(j,L),u=r.mul(F,ce),m=r.mul(Y,te),y=r.add(j,F),v=r.add(L,ce);y=r.mul(y,v),v=r.add(s,u),y=r.sub(y,v),v=r.add(j,Y);let S=r.add(L,te);return v=r.mul(v,S),S=r.add(s,m),v=r.sub(v,S),S=r.add(F,Y),ie=r.add(ce,te),S=r.mul(S,ie),ie=r.add(u,m),S=r.sub(S,ie),Z=r.mul(ge,v),ie=r.mul(A,m),Z=r.add(ie,Z),ie=r.sub(u,Z),Z=r.add(u,Z),ae=r.mul(ie,Z),u=r.add(s,s),u=r.add(u,s),m=r.mul(ge,m),v=r.mul(A,v),u=r.add(u,m),m=r.sub(s,m),m=r.mul(ge,m),v=r.add(v,m),s=r.mul(u,v),ae=r.add(ae,s),s=r.mul(S,v),ie=r.mul(y,ie),ie=r.sub(ie,s),s=r.mul(y,u),Z=r.mul(S,Z),Z=r.add(Z,s),new M(ie,ae,Z)}subtract(R){return this.add(R.negate())}is0(){return this.equals(M.ZERO)}wNAF(R){return O.wNAFCached(this,x,R,j=>{let F=r.invertBatch(j.map(Y=>Y.pz));return j.map((Y,L)=>Y.toAffine(F[L])).map(M.fromAffine)})}multiplyUnsafe(R){let j=M.ZERO;if(R===ci)return j;if(f(R),R===Cr)return this;let{endo:F}=t;if(!F)return O.unsafeLadder(this,R);let{k1neg:Y,k1:L,k2neg:ce,k2:te}=F.splitScalar(R),ie=j,ae=j,Z=this;for(;L>ci||te>ci;)L&Cr&&(ie=ie.add(Z)),te&Cr&&(ae=ae.add(Z)),Z=Z.double(),L>>=Cr,te>>=Cr;return Y&&(ie=ie.negate()),ce&&(ae=ae.negate()),ae=new M(r.mul(ae.px,F.beta),ae.py,ae.pz),ie.add(ae)}multiply(R){f(R);let j=R,F,Y,{endo:L}=t;if(L){let{k1neg:ce,k1:te,k2neg:ie,k2:ae}=L.splitScalar(j),{p:Z,f:ge}=this.wNAF(te),{p:A,f:s}=this.wNAF(ae);Z=O.constTimeNegate(ce,Z),A=O.constTimeNegate(ie,A),A=new M(r.mul(A.px,L.beta),A.py,A.pz),F=Z.add(A),Y=ge.add(s)}else{let{p:ce,f:te}=this.wNAF(j);F=ce,Y=te}return M.normalizeZ([F,Y])[0]}multiplyAndAddUnsafe(R,j,F){let Y=M.BASE,L=n((te,ie)=>ie===ci||ie===Cr||!te.equals(Y)?te.multiplyUnsafe(ie):te.multiply(ie),"mul"),ce=L(this,j).add(L(R,F));return ce.is0()?void 0:ce}toAffine(R){let{px:j,py:F,pz:Y}=this,L=this.is0();R==null&&(R=L?r.ONE:r.inv(Y));let ce=r.mul(j,R),te=r.mul(F,R),ie=r.mul(Y,R);if(L)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ie,r.ONE))throw new Error("invZ was invalid");return{x:ce,y:te}}isTorsionFree(){let{h:R,isTorsionFree:j}=t;if(R===Cr)return!0;if(j)return j(M,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:R,clearCofactor:j}=t;return R===Cr?this:j?j(M,this):this.multiplyUnsafe(t.h)}toRawBytes(R=!0){return this.assertValidity(),i(M,this,R)}toHex(R=!0){return Mo(this.toRawBytes(R))}}M.BASE=new M(t.Gx,t.Gy,r.ONE),M.ZERO=new M(r.ZERO,r.ONE,r.ZERO);let k=t.nBitLength,O=Iw(M,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:M,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:l}}n(JT,"weierstrassPoints");function QT(e){let t=Th(e);return Ni(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}n(QT,"validateOpts");function kw(e){let t=QT(e),{Fp:r,n:i}=t,o=r.BYTES+1,a=2*r.BYTES+1;function l(v){return ci<v&&v<r.ORDER}n(l,"isValidFieldElement");function f(v){return Zt(v,i)}n(f,"modN");function g(v){return Uu(v,i)}n(g,"invN");let{ProjectivePoint:x,normPrivateKeyToScalar:I,weierstrassEquation:M,isWithinCurveOrder:k}=JT({...t,toBytes(v,S,E){let w=S.toAffine(),c=r.toBytes(w.x),b=Is;return E?b(Uint8Array.from([S.hasEvenY()?2:3]),c):b(Uint8Array.from([4]),c,r.toBytes(w.y))},fromBytes(v){let S=v.length,E=v[0],w=v.subarray(1);if(S===o&&(E===2||E===3)){let c=ai(w);if(!l(c))throw new Error("Point is not on curve");let b=M(c),D=r.sqrt(b),V=(D&Cr)===Cr;return(E&1)===1!==V&&(D=r.neg(D)),{x:c,y:D}}else if(S===a&&E===4){let c=r.fromBytes(w.subarray(0,r.BYTES)),b=r.fromBytes(w.subarray(r.BYTES,2*r.BYTES));return{x:c,y:b}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),O=n(v=>Mo(Ui(v,t.nByteLength)),"numToNByteStr");function C(v){let S=i>>Cr;return v>S}n(C,"isBiggerThanHalfOrder");function R(v){return C(v)?f(-v):v}n(R,"normalizeS");let j=n((v,S,E)=>ai(v.slice(S,E)),"slcNum");class F{static{n(this,"Signature")}constructor(S,E,w){this.r=S,this.s=E,this.recovery=w,this.assertValidity()}static fromCompact(S){let E=t.nByteLength;return S=wr("compactSignature",S,E*2),new F(j(S,0,E),j(S,E,2*E))}static fromDER(S){let{r:E,s:w}=_o.toSig(wr("DER",S));return new F(E,w)}assertValidity(){if(!k(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!k(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new F(this.r,this.s,S)}recoverPublicKey(S){let{r:E,s:w,recovery:c}=this,b=ae(wr("msgHash",S));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let D=c===2||c===3?E+t.n:E;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let V=c&1?"03":"02",z=x.fromHex(V+O(D)),Q=g(D),oe=f(-b*Q),ue=f(w*Q),ft=x.BASE.multiplyAndAddUnsafe(z,oe,ue);if(!ft)throw new Error("point at infinify");return ft.assertValidity(),ft}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new F(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return To(this.toDERHex())}toDERHex(){return _o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return To(this.toCompactHex())}toCompactHex(){return O(this.r)+O(this.s)}}let Y={isValidPrivateKey(v){try{return I(v),!0}catch{return!1}},normPrivateKeyToScalar:I,randomPrivateKey:n(()=>{let v=Eh(t.n);return Du(t.randomBytes(v),t.n)},"randomPrivateKey"),precompute(v=8,S=x.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}};function L(v,S=!0){return x.fromPrivateKey(v).toRawBytes(S)}n(L,"getPublicKey");function ce(v){let S=dn(v),E=typeof v=="string",w=(S||E)&&v.length;return S?w===o||w===a:E?w===2*o||w===2*a:v instanceof x}n(ce,"isProbPub");function te(v,S,E=!0){if(ce(v))throw new Error("first arg must be private key");if(!ce(S))throw new Error("second arg must be public key");return x.fromHex(S).multiply(I(v)).toRawBytes(E)}n(te,"getSharedSecret");let ie=t.bits2int||function(v){let S=ai(v),E=v.length*8-t.nBitLength;return E>0?S>>BigInt(E):S},ae=t.bits2int_modN||function(v){return f(ie(v))},Z=Ka(t.nBitLength);function ge(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(ci<=v&&v<Z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ui(v,t.nByteLength)}n(ge,"int2octets");function A(v,S,E=s){if(["recovered","canonical"].some(K=>K in E))throw new Error("sign() legacy options not supported");let{hash:w,randomBytes:c}=t,{lowS:b,prehash:D,extraEntropy:V}=E;b==null&&(b=!0),v=wr("msgHash",v),D&&(v=wr("prehashed msgHash",w(v)));let z=ae(v),Q=I(S),oe=[ge(Q),ge(z)];if(V!=null){let K=V===!0?c(r.BYTES):V;oe.push(wr("extraEntropy",K))}let ue=Is(...oe),ft=z;function fe(K){let N=ie(K);if(!k(N))return;let U=g(N),W=x.BASE.multiply(N).toAffine(),re=f(W.x);if(re===ci)return;let q=f(U*f(ft+re*Q));if(q===ci)return;let J=(W.x===re?0:2)|Number(W.y&Cr),nt=q;return b&&C(q)&&(nt=R(q),J^=1),new F(re,nt,J)}return n(fe,"k2sig"),{seed:ue,k2sig:fe}}n(A,"prepSig");let s={lowS:t.lowS,prehash:!1},u={lowS:t.lowS,prehash:!1};function m(v,S,E=s){let{seed:w,k2sig:c}=A(v,S,E),b=t;return wh(b.hash.outputLen,b.nByteLength,b.hmac)(w,c)}n(m,"sign"),x.BASE._setWindowSize(8);function y(v,S,E,w=u){let c=v;if(S=wr("msgHash",S),E=wr("publicKey",E),"strict"in w)throw new Error("options.strict was renamed to lowS");let{lowS:b,prehash:D}=w,V,z;try{if(typeof c=="string"||dn(c))try{V=F.fromDER(c)}catch(W){if(!(W instanceof _o.Err))throw W;V=F.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:W,s:re}=c;V=new F(W,re)}else throw new Error("PARSE");z=x.fromHex(E)}catch(W){if(W.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(b&&V.hasHighS())return!1;D&&(S=t.hash(S));let{r:Q,s:oe}=V,ue=ae(S),ft=g(oe),fe=f(ue*ft),K=f(Q*ft),N=x.BASE.multiplyAndAddUnsafe(z,fe,K)?.toAffine();return N?f(N.x)===Q:!1}return n(y,"verify"),{CURVE:t,getPublicKey:L,getSharedSecret:te,sign:m,verify:y,ProjectivePoint:x,Signature:F,utils:Y}}n(kw,"weierstrass");function YT(e){return{hash:e,hmac:n((t,...r)=>gh(e,t,gw(...r)),"hmac"),randomBytes:vw}}n(YT,"getHash");function Lu(e,t){let r=n(i=>kw({...e,...YT(i)}),"create");return Object.freeze({...r(t),create:r})}n(Lu,"createCurve");d();h();d();h();function XT(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),g=i?4:0,x=i?0:4;e.setUint32(t+g,l,i),e.setUint32(t+x,f,i)}n(XT,"setBigUint64");var Vu=class extends Ts{static{n(this,"SHA2")}constructor(t,r,i,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Bu(this.buffer)}update(t){Ms(this);let{view:r,buffer:i,blockLen:o}=this;t=Ba(t);let a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let g=Bu(t);for(;o<=a-l;l+=o)this.process(g,l);continue}i.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ms(this),pw(t,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(i,0),l=0);for(let M=l;M<o;M++)r[M]=0;XT(i,o-8,BigInt(this.length*8),a),this.process(i,0);let f=Bu(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let x=g/4,I=this.get();if(x>I.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<x;M++)f.setUint32(4*M,I[M],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:i,length:o,finished:a,destroyed:l,pos:f}=this;return t.length=o,t.pos=f,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(i),t}};var eI=n((e,t,r)=>e&t^~e&r,"Chi"),tI=n((e,t,r)=>e&t^e&r^t&r,"Maj"),rI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Di=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Li=new Uint32Array(64),Ih=class extends Vu{static{n(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=Di[0]|0,this.B=Di[1]|0,this.C=Di[2]|0,this.D=Di[3]|0,this.E=Di[4]|0,this.F=Di[5]|0,this.G=Di[6]|0,this.H=Di[7]|0}get(){let{A:t,B:r,C:i,D:o,E:a,F:l,G:f,H:g}=this;return[t,r,i,o,a,l,f,g]}set(t,r,i,o,a,l,f,g){this.A=t|0,this.B=r|0,this.C=i|0,this.D=o|0,this.E=a|0,this.F=l|0,this.G=f|0,this.H=g|0}process(t,r){for(let M=0;M<16;M++,r+=4)Li[M]=t.getUint32(r,!1);for(let M=16;M<64;M++){let k=Li[M-15],O=Li[M-2],C=fn(k,7)^fn(k,18)^k>>>3,R=fn(O,17)^fn(O,19)^O>>>10;Li[M]=R+Li[M-7]+C+Li[M-16]|0}let{A:i,B:o,C:a,D:l,E:f,F:g,G:x,H:I}=this;for(let M=0;M<64;M++){let k=fn(f,6)^fn(f,11)^fn(f,25),O=I+k+eI(f,g,x)+rI[M]+Li[M]|0,R=(fn(i,2)^fn(i,13)^fn(i,22))+tI(i,o,a)|0;I=x,x=g,g=f,f=l+O|0,l=a,a=o,o=i,i=O+R|0}i=i+this.A|0,o=o+this.B|0,a=a+this.C|0,l=l+this.D|0,f=f+this.E|0,g=g+this.F|0,x=x+this.G|0,I=I+this.H|0,this.set(i,o,a,l,f,g,x,I)}roundClean(){Li.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Fu=yw(()=>new Ih);var Pw=Nu(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),nI=Pw.create(BigInt("-3")),iI=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ko=Lu({a:nI,b:iI,Fp:Pw,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Fu);var Bw=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{if(!t.isJWT)return Promise.resolve(ve(se.InvalidAddressType));if(t.data.payload.iss!==ca)return Promise.resolve(ve(se.InvalidClaimError));if(t.data.payload.aud!==ua)return Promise.resolve(ve(se.InvalidClaimError));let r={...t.data.header,kid:ct(Po.Buffer.from(e.publicKey))},i={...t.data.payload,sub:ct(Po.Buffer.from(e.publicKey))},o=ct(Po.Buffer.from(JSON.stringify(r)))+"."+ct(Po.Buffer.from(JSON.stringify(i))),l=ko.sign(Po.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),f=ct(Po.Buffer.from(l)),g={header:r,payload:i,signature:f};return Promise.resolve({status:"success",signature:f,signedJWT:g})},"sign")}),"createJWTKeypairSigner");d();h();d();h();d();h();var Kw=he(No());async function _h(e,t,r){let i=ku(r.message,r.signingType,r.chainType);if("status"in i)return i;try{let o={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"};if(r.signingType==="transaction"){let a=Js.VersionedMessage.deserialize(i),f=new Js.VersionedTransaction(a).serialize(),g=ct(f),{result:{transaction:x}}=await e.signTransaction({transaction:g,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:r.policyName??null}),I;if(typeof x=="string")I=new Uint8Array(nn(x));else if(Array.isArray(x))I=new Uint8Array(x);else throw new Error("Unexpected transaction format from KMS");let M=Js.VersionedTransaction.deserialize(I);if(!M.signatures||M.signatures.length===0)throw new Error("Signed transaction has no signatures");return{status:"success",signature:Kw.default.encode(M.signatures[0])}}else{let a=new TextDecoder().decode(i),{result:{signature:l}}=await e.signUtf8Message({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,algorithm:"Ed25519",policyName:r.policyName});return{status:"success",signature:fc(l)}}}catch(o){return ve(se.InternalError,`KMS Solana signing failed: ${o instanceof Error?o.message:"Unknown error"}`)}}n(_h,"signSolana");d();h();var ju=he(en());async function Kh(e,t,r){try{let i={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:"Ethereum"};switch(r.signingType){case"transaction":{let{result:{transaction:o}}=await e.signTransaction({transaction:r.message,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});if(typeof o!="string")return ve(se.InternalError,"KMS returned non-string Ethereum signed transaction");try{let a=Rw(o)?o.slice(2):o,l=a.length%2===0?a:`0${a}`,f=cc(l);return{status:"success",signature:sI(f)}}catch(a){return ve(se.InternalError,`Failed to parse signed Ethereum transaction from KMS: ${a instanceof Error?a.message:"Unknown error"}`)}}case"message":{let o=oI(r.message),a=ct(o),{result:{signature:l}}=await e.ethereumSignMessage({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});return{status:"success",signature:Ow(l)}}case"typedData":{let{result:{signature:o}}=await e.ethereumSignTypedData({typedData:r.data,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,policyName:r.policyName});return{status:"success",signature:Ow(o)}}}}catch(i){return ve(se.InternalError,`KMS EVM signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(Kh,"signEVM");function Ow(e){let t=nn(e);return`0x${ju.Buffer.from(t).toString("hex")}`}n(Ow,"base64UrlSignatureToHex");function oI(e){if(Rw(e)){let t=e.slice(2),r=t.length%2===0?t:`0${t}`;return ju.Buffer.from(r,"hex")}return ju.Buffer.from(e,"utf8")}n(oI,"normalizePersonalSignPayload");function Rw(e){return e.length<3||!(e.startsWith("0x")||e.startsWith("0X"))||e.length%2!==0?!1:/^[0-9a-fA-F]+$/.test(e.slice(2))}n(Rw,"looksLikeHex");function Cw(e){if(e.length===32)return e;if(e.length>32){let r=0;for(;r<e.length-32&&e[r]===0;)r++;let i=e.subarray(r);if(i.length===32)return i;if(i.length>32)throw new Error("Unexpected r/s length > 32 bytes");let o=new Uint8Array(32);return o.set(i,32-i.length),o}let t=new Uint8Array(32);return t.set(e,32-e.length),t}n(Cw,"leftPadTo32");function Ph(e,t){let r=e[t];if(r<=127)return{item:{kind:"bytes",data:e.subarray(t,t+1)},nextOffset:t+1};if(r<=183){let x=r-128,I=t+1,M=I+x;return{item:{kind:"bytes",data:e.subarray(I,M)},nextOffset:M}}if(r<=191){let x=r-183,I=Bh(e,t+1,x),M=t+1+x,k=M+I;return{item:{kind:"bytes",data:e.subarray(M,k)},nextOffset:k}}if(r<=247){let x=r-192,I=t+1,M=I+x,k=[],O=I;for(;O<M;){let C=Ph(e,O);k.push(C.item),O=C.nextOffset}return{item:{kind:"list",items:k},nextOffset:M}}let i=r-247,o=Bh(e,t+1,i),a=t+1+i,l=a+o,f=[],g=a;for(;g<l;){let x=Ph(e,g);f.push(x.item),g=x.nextOffset}return{item:{kind:"list",items:f},nextOffset:l}}n(Ph,"decodeRlpAt");function Bh(e,t,r){let i=0;for(let o=0;o<r;o++)i=i<<8|e[t+o];return i>>>0}n(Bh,"readBigEndian");function kh(e){if(e.kind!=="bytes")throw new Error("Expected RLP bytes");return e.data}n(kh,"rlpItemToBytes");function sI(e){if(e.length===0)throw new Error("Empty transaction bytes");let t=e[0];if(t!==1&&t!==2)throw new Error("Expected EIP-2718 typed transaction (0x01 or 0x02)");let{item:r}=Ph(e,1);if(r.kind!=="list")throw new Error("Expected typed tx payload as RLP list");let i=r.items;if(i.length<3)throw new Error("Typed tx payload too short");let o=kh(i[i.length-3]),a=kh(i[i.length-2]),l=kh(i[i.length-1]),g=27+(o.length===0?0:Bh(o,0,o.length)&1),x=Cw(a),I=Cw(l),M=new Uint8Array(65);return M.set(x,0),M.set(I,32),M[64]=g,`0x${ac(M)}`}n(sI,"extractSignatureFromEip2718");d();h();d();h();d();h();d();h();d();h();d();h();var Vi=32;function Uw(e){return aI(e)&&cI(e)===Vi}n(Uw,"isValidSuiAddress");function Un(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Vi*2,"0")}`}n(Un,"normalizeSuiAddress");function aI(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}n(aI,"isHex");function cI(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}n(cI,"getHexByteLength");d();h();var uI=/^vector<(.+)>$/,lI=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Oa=class e{static{n(this,"TypeTagSerializer")}static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let i=t.match(uI);if(i)return{vector:e.parseFromStr(i[1],r)};let o=t.match(lI);if(o)return{struct:{address:r?Un(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:e.parseStructTypeArgs(o[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return q0(t).map(i=>e.parseFromStr(i,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,i=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};function fI(e){return B.u64({name:"unsafe_u64",...e}).transform({input:n(t=>t,"input"),output:n(t=>Number(t),"output")})}n(fI,"unsafe_u64");function dI(e){return B.enum("Option",{None:null,Some:e})}n(dI,"optionEnum");var wt=B.bytes(Vi).transform({validate:n(e=>{let t=typeof e=="string"?e:ro(e);if(!t||!Uw(Un(t)))throw new Error(`Invalid Sui address ${t}`)},"validate"),input:n(e=>typeof e=="string"?uc(Un(e)):e,"input"),output:n(e=>Un(ro(e)),"output")}),xr=B.vector(B.u8()).transform({name:"ObjectDigest",input:n(e=>ql(e),"input"),output:n(e=>j0(new Uint8Array(e)),"output"),validate:n(e=>{if(ql(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),lr=B.struct("SuiObjectRef",{objectId:wt,version:B.u64(),digest:xr}),Oh=B.struct("SharedObjectRef",{objectId:wt,initialSharedVersion:B.u64(),mutable:B.bool()}),Ch=B.enum("ObjectArg",{ImmOrOwnedObject:lr,SharedObject:Oh,Receiving:lr}),Rh=B.enum("CallArg",{Pure:B.struct("Pure",{bytes:B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})}),Object:Ch}),Uh=B.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:B.lazy(()=>Uh),struct:B.lazy(()=>jh),u16:null,u32:null,u256:null}),qu=Uh.transform({input:n(e=>typeof e=="string"?Oa.parseFromStr(e,!0):e,"input"),output:n(e=>Oa.tagToString(e),"output")}),hn=B.enum("Argument",{GasCoin:null,Input:B.u16(),Result:B.u16(),NestedResult:B.tuple([B.u16(),B.u16()])}),Nh=B.struct("ProgrammableMoveCall",{package:wt,module:B.string(),function:B.string(),typeArguments:B.vector(qu),arguments:B.vector(hn)}),Dh=B.enum("Command",{MoveCall:Nh,TransferObjects:B.struct("TransferObjects",{objects:B.vector(hn),address:hn}),SplitCoins:B.struct("SplitCoins",{coin:hn,amounts:B.vector(hn)}),MergeCoins:B.struct("MergeCoins",{destination:hn,sources:B.vector(hn)}),Publish:B.struct("Publish",{modules:B.vector(B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})),dependencies:B.vector(wt)}),MakeMoveVec:B.struct("MakeMoveVec",{type:dI(qu).transform({input:n(e=>e===null?{None:!0}:{Some:e},"input"),output:n(e=>e.Some??null,"output")}),elements:B.vector(hn)}),Upgrade:B.struct("Upgrade",{modules:B.vector(B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")})),dependencies:B.vector(wt),package:wt,ticket:hn})}),Lh=B.struct("ProgrammableTransaction",{inputs:B.vector(Rh),commands:B.vector(Dh)}),Vh=B.enum("TransactionKind",{ProgrammableTransaction:Lh,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Fh=B.enum("TransactionExpiration",{None:null,Epoch:fI()}),jh=B.struct("StructTag",{address:wt,module:B.string(),name:B.string(),typeParams:B.vector(Uh)}),qh=B.struct("GasData",{payment:B.vector(lr),owner:wt,price:B.u64(),budget:B.u64()}),zh=B.struct("TransactionDataV1",{kind:Vh,sender:wt,gasData:qh,expiration:Fh}),Wh=B.enum("TransactionData",{V1:zh}),Hh=B.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),$h=B.enum("IntentVersion",{V0:null}),Gh=B.enum("AppId",{Sui:null}),Zh=B.struct("Intent",{scope:Hh,version:$h,appId:Gh});function Jh(e){return B.struct(`IntentMessage<${e.name}>`,{intent:Zh,value:e})}n(Jh,"IntentMessage");var Qh=B.enum("CompressedSignature",{ED25519:B.fixedArray(64,B.u8()),Secp256k1:B.fixedArray(64,B.u8()),Secp256r1:B.fixedArray(64,B.u8()),ZkLogin:B.vector(B.u8())}),Yh=B.enum("PublicKey",{ED25519:B.fixedArray(32,B.u8()),Secp256k1:B.fixedArray(33,B.u8()),Secp256r1:B.fixedArray(33,B.u8()),ZkLogin:B.vector(B.u8())}),Xh=B.struct("MultiSigPkMap",{pubKey:Yh,weight:B.u8()}),ep=B.struct("MultiSigPublicKey",{pk_map:B.vector(Xh),threshold:B.u16()}),Nw=B.struct("MultiSig",{sigs:B.vector(Qh),bitmap:B.u16(),multisig_pk:ep}),hI=B.vector(B.u8()).transform({input:n(e=>typeof e=="string"?ir(e):e,"input"),output:n(e=>Ut(new Uint8Array(e)),"output")}),tp=B.struct("SenderSignedTransaction",{intentMessage:Jh(Wh),txSignatures:B.vector(hI)}),Dw=B.vector(tp,{name:"SenderSignedData"});d();h();var pI=B.enum("PackageUpgradeError",{UnableToFetchPackage:B.struct("UnableToFetchPackage",{packageId:wt}),NotAPackage:B.struct("NotAPackage",{objectId:wt}),IncompatibleUpgrade:null,DigestDoesNotMatch:B.struct("DigestDoesNotMatch",{digest:B.vector(B.u8())}),UnknownUpgradePolicy:B.struct("UnknownUpgradePolicy",{policy:B.u8()}),PackageIDDoesNotMatch:B.struct("PackageIDDoesNotMatch",{packageId:wt,ticketId:wt})}),mI=B.struct("ModuleId",{address:wt,name:B.string()}),Lw=B.struct("MoveLocation",{module:mI,function:B.u16(),instruction:B.u16(),functionName:B.option(B.string())}),gI=B.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:B.struct("IndexOutOfBounds",{idx:B.u16()}),SecondaryIndexOutOfBounds:B.struct("SecondaryIndexOutOfBounds",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidResultArity:B.struct("InvalidResultArity",{resultIdx:B.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),yI=B.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),vI=B.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:B.struct("MoveObjectTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),MovePackageTooBig:B.struct("MovePackageTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),CircularObjectOwnership:B.struct("CircularObjectOwnership",{object:wt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:B.option(Lw),MoveAbort:B.tuple([Lw,B.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:B.struct("CommandArgumentError",{argIdx:B.u16(),kind:gI}),TypeArgumentError:B.struct("TypeArgumentError",{argumentIdx:B.u16(),kind:yI}),UnusedValueWithoutDrop:B.struct("UnusedValueWithoutDrop",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidPublicFunctionReturnType:B.struct("InvalidPublicFunctionReturnType",{idx:B.u16()}),InvalidTransferObject:null,EffectsTooLarge:B.struct("EffectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:B.struct("PackageUpgradeError",{upgradeError:pI}),WrittenObjectsTooLarge:B.struct("WrittenObjectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:B.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:B.vector(wt)}),AddressDeniedForCoin:B.struct("AddressDeniedForCoin",{address:wt,coinType:B.string()}),CoinTypeGlobalPause:B.struct("CoinTypeGlobalPause",{coinType:B.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Vw=B.enum("ExecutionStatus",{Success:null,Failed:B.struct("ExecutionFailed",{error:vI,command:B.option(B.u64())})}),Fw=B.struct("GasCostSummary",{computationCost:B.u64(),storageCost:B.u64(),storageRebate:B.u64(),nonRefundableStorageFee:B.u64()}),_s=B.enum("Owner",{AddressOwner:wt,ObjectOwner:wt,Shared:B.struct("Shared",{initialSharedVersion:B.u64()}),Immutable:null}),wI=B.struct("TransactionEffectsV1",{status:Vw,executedEpoch:B.u64(),gasUsed:Fw,modifiedAtVersions:B.vector(B.tuple([wt,B.u64()])),sharedObjects:B.vector(lr),transactionDigest:xr,created:B.vector(B.tuple([lr,_s])),mutated:B.vector(B.tuple([lr,_s])),unwrapped:B.vector(B.tuple([lr,_s])),deleted:B.vector(lr),unwrappedThenDeleted:B.vector(lr),wrapped:B.vector(lr),gasObject:B.tuple([lr,_s]),eventsDigest:B.option(xr),dependencies:B.vector(xr)}),rp=B.tuple([B.u64(),xr]),bI=B.enum("ObjectIn",{NotExist:null,Exist:B.tuple([rp,_s])}),xI=B.enum("ObjectOut",{NotExist:null,ObjectWrite:B.tuple([xr,_s]),PackageWrite:rp}),AI=B.enum("IDOperation",{None:null,Created:null,Deleted:null}),SI=B.struct("EffectsObjectChange",{inputState:bI,outputState:xI,idOperation:AI}),EI=B.enum("UnchangedSharedKind",{ReadOnlyRoot:rp,MutateDeleted:B.u64(),ReadDeleted:B.u64(),Cancelled:B.u64(),PerEpochConfig:null}),MI=B.struct("TransactionEffectsV2",{status:Vw,executedEpoch:B.u64(),gasUsed:Fw,transactionDigest:xr,gasObjectIndex:B.option(B.u32()),eventsDigest:B.option(xr),dependencies:B.vector(xr),lamportVersion:B.u64(),changedObjects:B.vector(B.tuple([wt,SI])),unchangedSharedObjects:B.vector(B.tuple([wt,EI])),auxDataDigest:B.option(xr)}),jw=B.enum("TransactionEffects",{V1:wI,V2:MI});var ui={...B,U8:B.u8(),U16:B.u16(),U32:B.u32(),U64:B.u64(),U128:B.u128(),U256:B.u256(),ULEB128:B.uleb128(),Bool:B.bool(),String:B.string(),Address:wt,AppId:Gh,Argument:hn,CallArg:Rh,CompressedSignature:Qh,GasData:qh,Intent:Zh,IntentMessage:Jh,IntentScope:Hh,IntentVersion:$h,MultiSig:Nw,MultiSigPkMap:Xh,MultiSigPublicKey:ep,ObjectArg:Ch,ObjectDigest:xr,ProgrammableMoveCall:Nh,ProgrammableTransaction:Lh,PublicKey:Yh,SenderSignedData:Dw,SenderSignedTransaction:tp,SharedObjectRef:Oh,StructTag:jh,SuiObjectRef:lr,Command:Dh,TransactionData:Wh,TransactionDataV1:zh,TransactionExpiration:Fh,TransactionKind:Vh,TypeTag:qu,TransactionEffects:jw};d();h();d();h();d();h();d();h();function ks(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}n(ks,"number");function TI(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}n(TI,"isBytes");function Ps(e,...t){if(!TI(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}n(Ps,"bytes");function qw(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ks(e.outputLen),ks(e.blockLen)}n(qw,"hash");function li(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}n(li,"exists");function zu(e,t){Ps(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}n(zu,"output");d();h();var Bs=n(e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),"u32"),Wu=n(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView");var ji=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Ww=n(e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,"byteSwap"),pn=ji?e=>e:e=>Ww(e);function Bo(e){for(let t=0;t<e.length;t++)e[t]=Ww(e[t])}n(Bo,"byteSwap32");var II=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Hu(e){Ps(e);let t="";for(let r=0;r<e.length;r++)t+=II[e[r]];return t}n(Hu,"bytesToHex");var fi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function zw(e){if(e>=fi._0&&e<=fi._9)return e-fi._0;if(e>=fi._A&&e<=fi._F)return e-(fi._A-10);if(e>=fi._a&&e<=fi._f)return e-(fi._a-10)}n(zw,"asciiToBase16");function Hw(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=zw(e.charCodeAt(a)),f=zw(e.charCodeAt(a+1));if(l===void 0||f===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}i[o]=l*16+f}return i}n(Hw,"hexToBytes");function _I(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}n(_I,"utf8ToBytes");function Rr(e){return typeof e=="string"&&(e=_I(e)),Ps(e),e}n(Rr,"toBytes");var Fi=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},$W={}.toString;function $w(e){let t=n(i=>e().update(Rr(i)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}n($w,"wrapConstructor");function Gw(e){let t=n((i,o)=>e(o).update(Rr(i)).digest(),"hashC"),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=i=>e(i),t}n(Gw,"wrapConstructorWithOpts");var Zw=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),$u=class extends Fi{static{n(this,"BLAKE")}constructor(t,r,i={},o,a,l){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,ks(t),ks(r),ks(o),r<0||r>o)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==a)throw new Error(`salt must be ${a} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=Bs(this.buffer=new Uint8Array(t))}update(t){li(this);let{blockLen:r,buffer:i,buffer32:o}=this;t=Rr(t);let a=t.length,l=t.byteOffset,f=t.buffer;for(let g=0;g<a;){this.pos===r&&(ji||Bo(o),this.compress(o,0,!1),ji||Bo(o),this.pos=0);let x=Math.min(r-this.pos,a-g),I=l+g;if(x===r&&!(I%4)&&g+x<a){let M=new Uint32Array(f,I,Math.floor((a-g)/4));ji||Bo(M);for(let k=0;g+r<a;k+=o.length,g+=r)this.length+=r,this.compress(M,k,!1);ji||Bo(M);continue}i.set(t.subarray(g,g+x),this.pos),this.pos+=x,this.length+=x,g+=x}return this}digestInto(t){li(this),zu(t,this);let{pos:r,buffer32:i}=this;this.finished=!0,this.buffer.subarray(r).fill(0),ji||Bo(i),this.compress(i,0,!0),ji||Bo(i);let o=Bs(t);this.get().forEach((a,l)=>o[l]=pn(a))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){let{buffer:r,length:i,finished:o,destroyed:a,outputLen:l,pos:f}=this;return t||(t=new this.constructor({dkLen:l})),t.set(...this.get()),t.length=i,t.finished=o,t.destroyed=a,t.outputLen=l,t.buffer.set(r),t.pos=f,t}};d();h();var Gu=BigInt(4294967295),np=BigInt(32);function Jw(e,t=!1){return t?{h:Number(e&Gu),l:Number(e>>np&Gu)}:{h:Number(e>>np&Gu)|0,l:Number(e&Gu)|0}}n(Jw,"fromBig");function kI(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l}=Jw(e[o],t);[r[o],i[o]]=[a,l]}return[r,i]}n(kI,"split");var PI=n((e,t)=>BigInt(e>>>0)<<np|BigInt(t>>>0),"toBig"),BI=n((e,t,r)=>e>>>r,"shrSH"),KI=n((e,t,r)=>e<<32-r|t>>>r,"shrSL"),OI=n((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),CI=n((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),RI=n((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),UI=n((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),NI=n((e,t)=>t,"rotr32H"),DI=n((e,t)=>e,"rotr32L"),LI=n((e,t,r)=>e<<r|t>>>32-r,"rotlSH"),VI=n((e,t,r)=>t<<r|e>>>32-r,"rotlSL"),FI=n((e,t,r)=>t<<r-32|e>>>64-r,"rotlBH"),jI=n((e,t,r)=>e<<r-32|t>>>64-r,"rotlBL");function qI(e,t,r,i){let o=(t>>>0)+(i>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}n(qI,"add");var zI=n((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),WI=n((e,t,r,i)=>t+r+i+(e/2**32|0)|0,"add3H"),HI=n((e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),"add4L"),$I=n((e,t,r,i,o)=>t+r+i+o+(e/2**32|0)|0,"add4H"),GI=n((e,t,r,i,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(o>>>0),"add5L"),ZI=n((e,t,r,i,o,a)=>t+r+i+o+a+(e/2**32|0)|0,"add5H");var JI={fromBig:Jw,split:kI,toBig:PI,shrSH:BI,shrSL:KI,rotrSH:OI,rotrSL:CI,rotrBH:RI,rotrBL:UI,rotr32H:NI,rotr32L:DI,rotlSH:LI,rotlSL:VI,rotlBH:FI,rotlBL:jI,add:qI,add3L:zI,add3H:WI,add4L:HI,add4H:$I,add5H:ZI,add5L:GI},me=JI;var Ot=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function qi(e,t,r,i,o,a){let l=o[a],f=o[a+1],g=ne[2*e],x=ne[2*e+1],I=ne[2*t],M=ne[2*t+1],k=ne[2*r],O=ne[2*r+1],C=ne[2*i],R=ne[2*i+1],j=me.add3L(g,I,l);x=me.add3H(j,x,M,f),g=j|0,{Dh:R,Dl:C}={Dh:R^x,Dl:C^g},{Dh:R,Dl:C}={Dh:me.rotr32H(R,C),Dl:me.rotr32L(R,C)},{h:O,l:k}=me.add(O,k,R,C),{Bh:M,Bl:I}={Bh:M^O,Bl:I^k},{Bh:M,Bl:I}={Bh:me.rotrSH(M,I,24),Bl:me.rotrSL(M,I,24)},ne[2*e]=g,ne[2*e+1]=x,ne[2*t]=I,ne[2*t+1]=M,ne[2*r]=k,ne[2*r+1]=O,ne[2*i]=C,ne[2*i+1]=R}n(qi,"G1b");function zi(e,t,r,i,o,a){let l=o[a],f=o[a+1],g=ne[2*e],x=ne[2*e+1],I=ne[2*t],M=ne[2*t+1],k=ne[2*r],O=ne[2*r+1],C=ne[2*i],R=ne[2*i+1],j=me.add3L(g,I,l);x=me.add3H(j,x,M,f),g=j|0,{Dh:R,Dl:C}={Dh:R^x,Dl:C^g},{Dh:R,Dl:C}={Dh:me.rotrSH(R,C,16),Dl:me.rotrSL(R,C,16)},{h:O,l:k}=me.add(O,k,R,C),{Bh:M,Bl:I}={Bh:M^O,Bl:I^k},{Bh:M,Bl:I}={Bh:me.rotrBH(M,I,63),Bl:me.rotrBL(M,I,63)},ne[2*e]=g,ne[2*e+1]=x,ne[2*t]=I,ne[2*t+1]=M,ne[2*r]=k,ne[2*r+1]=O,ne[2*i]=C,ne[2*i+1]=R}n(zi,"G2b");var ip=class extends $u{static{n(this,"BLAKE2b")}constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Ot[0]|0,this.v0h=Ot[1]|0,this.v1l=Ot[2]|0,this.v1h=Ot[3]|0,this.v2l=Ot[4]|0,this.v2h=Ot[5]|0,this.v3l=Ot[6]|0,this.v3h=Ot[7]|0,this.v4l=Ot[8]|0,this.v4h=Ot[9]|0,this.v5l=Ot[10]|0,this.v5h=Ot[11]|0,this.v6l=Ot[12]|0,this.v6h=Ot[13]|0,this.v7l=Ot[14]|0,this.v7h=Ot[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let i=Bs(Rr(t.salt));this.v4l^=pn(i[0]),this.v4h^=pn(i[1]),this.v5l^=pn(i[2]),this.v5h^=pn(i[3])}if(t.personalization){let i=Bs(Rr(t.personalization));this.v6l^=pn(i[0]),this.v6h^=pn(i[1]),this.v7l^=pn(i[2]),this.v7h^=pn(i[3])}if(t.key){let i=new Uint8Array(this.blockLen);i.set(Rr(t.key)),this.update(i)}}get(){let{v0l:t,v0h:r,v1l:i,v1h:o,v2l:a,v2h:l,v3l:f,v3h:g,v4l:x,v4h:I,v5l:M,v5h:k,v6l:O,v6h:C,v7l:R,v7h:j}=this;return[t,r,i,o,a,l,f,g,x,I,M,k,O,C,R,j]}set(t,r,i,o,a,l,f,g,x,I,M,k,O,C,R,j){this.v0l=t|0,this.v0h=r|0,this.v1l=i|0,this.v1h=o|0,this.v2l=a|0,this.v2h=l|0,this.v3l=f|0,this.v3h=g|0,this.v4l=x|0,this.v4h=I|0,this.v5l=M|0,this.v5h=k|0,this.v6l=O|0,this.v6h=C|0,this.v7l=R|0,this.v7h=j|0}compress(t,r,i){this.get().forEach((g,x)=>ne[x]=g),ne.set(Ot,16);let{h:o,l:a}=me.fromBig(BigInt(this.length));ne[24]=Ot[8]^a,ne[25]=Ot[9]^o,i&&(ne[28]=~ne[28],ne[29]=~ne[29]);let l=0,f=Zw;for(let g=0;g<12;g++)qi(0,4,8,12,t,r+2*f[l++]),zi(0,4,8,12,t,r+2*f[l++]),qi(1,5,9,13,t,r+2*f[l++]),zi(1,5,9,13,t,r+2*f[l++]),qi(2,6,10,14,t,r+2*f[l++]),zi(2,6,10,14,t,r+2*f[l++]),qi(3,7,11,15,t,r+2*f[l++]),zi(3,7,11,15,t,r+2*f[l++]),qi(0,5,10,15,t,r+2*f[l++]),zi(0,5,10,15,t,r+2*f[l++]),qi(1,6,11,12,t,r+2*f[l++]),zi(1,6,11,12,t,r+2*f[l++]),qi(2,7,8,13,t,r+2*f[l++]),zi(2,7,8,13,t,r+2*f[l++]),qi(3,4,9,14,t,r+2*f[l++]),zi(3,4,9,14,t,r+2*f[l++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],ne.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Ko=Gw(e=>new ip(e));d();h();d();h();function Oo(e,t){return ui.IntentMessage(ui.fixedArray(t.length,ui.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}n(Oo,"messageWithIntent");function op(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}n(op,"bytesEqual");var Ks=class{static{n(this,"PublicKey")}equals(t){return op(this.toRawBytes(),t.toRawBytes())}toBase64(){return Ut(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return Ut(t)}verifyWithIntent(t,r,i){let o=Oo(i,t),a=Ko(o,{dkLen:32});return this.verify(a,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(ui.vector(ui.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Un(Hu(Ko(this.toSuiBytes(),{dkLen:32})).slice(0,Vi*2))}};d();h();var di={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Qw={ED25519:32,Secp256k1:33,Secp256r1:33},Zu={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};d();h();var Yw=n(e=>{throw TypeError(e)},"__typeError"),Xw=n((e,t,r)=>t.has(e)||Yw("Cannot "+r),"__accessCheck"),Ju=n((e,t,r)=>(Xw(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Qu=n((e,t,r)=>t.has(e)?Yw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Yu=n((e,t,r,i)=>(Xw(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),"__privateSet"),Xu,el,tl,rl,sp=class extends Error{static{n(this,"SuiGraphQLRequestError")}},nl=class{static{n(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:i={},queries:o={}}){Qu(this,Xu),Qu(this,el),Qu(this,tl),Qu(this,rl),Yu(this,Xu,t),Yu(this,el,o),Yu(this,tl,i),Yu(this,rl,(...a)=>r(...a))}async query(t){let r=await Ju(this,rl).call(this,Ju(this,Xu),{method:"POST",headers:{"Content-Type":"application/json",...Ju(this,tl)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):z0(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new sp(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Ju(this,el)[t]})}};Xu=new WeakMap;el=new WeakMap;tl=new WeakMap;rl=new WeakMap;d();h();var eb=W0();d();h();function QI(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let i=r.toString(2).padStart(6,"0");return Array.from(i).map(Number)}n(QI,"base64UrlCharTo6Bits");function YI(e){let t=[];for(let r=0;r<e.length;r++){let i=e.charAt(r),o=QI(i);t=t.concat(o)}return t}n(YI,"base64UrlStringToBitVector");function XI(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=YI(e),i=t%4;if(i!==0)if(i===1)r=r.slice(2);else if(i===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let o=(t+e.length-1)%4;if(o!==3)if(o===2)r=r.slice(0,r.length-2);else if(o===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let a=new Uint8Array(Math.floor(r.length/8)),l=0;for(let f=0;f<r.length;f+=8){let g=r.slice(f,f+8),x=parseInt(g.join(""),2);a[l++]=x}return new TextDecoder().decode(a)}n(XI,"decodeBase64URL");function e_(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}n(e_,"verifyExtendedClaim");function tb(e,t){let r=XI(e.value,e.indexMod4),[i,o]=e_(r);if(i!==t)throw new Error(`Invalid field name: found ${i} expected ${t}`);return o}n(tb,"extractClaimValue");d();h();d();h();var rb=B.struct("ZkLoginSignature",{inputs:B.struct("ZkLoginSignatureInputs",{proofPoints:B.struct("ZkLoginSignatureInputsProofPoints",{a:B.vector(B.string()),b:B.vector(B.vector(B.string())),c:B.vector(B.string())}),issBase64Details:B.struct("ZkLoginSignatureInputsClaim",{value:B.string(),indexMod4:B.u8()}),headerBase64:B.string(),addressSeed:B.string()}),maxEpoch:B.u64(),userSignature:B.vector(B.u8())});function nb(e){return rb.parse(typeof e=="string"?ir(e):e)}n(nb,"parseZkLoginSignature");d();h();function t_(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}n(t_,"findFirstNonZeroIndex");function il(e,t){let r=e.toString(16);return Hw(r.padStart(t*2,"0").slice(-t*2))}n(il,"toPaddedBigEndianBytes");function ap(e,t){let r=il(e,t),i=t_(r);return i===-1?new Uint8Array([0]):r.slice(i)}n(ap,"toBigEndianBytes");var sb=n(e=>{throw TypeError(e)},"__typeError"),ab=n((e,t,r)=>t.has(e)||sb("Cannot "+r),"__accessCheck"),hi=n((e,t,r)=>(ab(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),cp=n((e,t,r)=>t.has(e)?sb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),Os=n((e,t,r,i)=>(ab(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),"__privateSet"),mn,Ca,Ra,r_=class up extends Ks{static{n(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),cp(this,mn),cp(this,Ca),cp(this,Ra),Os(this,Ca,r),typeof t=="string"?Os(this,mn,ir(t)):t instanceof Uint8Array?Os(this,mn,t):Os(this,mn,Uint8Array.from(t)),Os(this,Ra,hi(this,mn).length!==hi(this,mn)[0]+1+32),hi(this,Ra)&&Os(this,mn,ib(hi(this,mn)))}equals(t){return super.equals(t)}toSuiAddress(){if(hi(this,Ra)){let t=ib(hi(this,mn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Un(Hu(Ko(r,{dkLen:32})).slice(0,Vi*2))}return super.toSuiAddress()}toRawBytes(){return hi(this,mn)}flag(){return di.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let i=ol(r),o=new up(i.publicKey).toSuiAddress();return ob({address:o,bytes:Ut(t),signature:i.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:hi(this,Ca)})}verifyTransaction(t,r){let i=ol(r),o=new up(i.publicKey).toSuiAddress();return ob({address:o,bytes:Ut(t),signature:i.serializedSignature,intentScope:"TRANSACTION_DATA",client:hi(this,Ca)})}};mn=new WeakMap;Ca=new WeakMap;Ra=new WeakMap;var n_=r_;function i_(e,t,r){let i=r?.legacyAddress?ap(e,32):il(e,32),o=new TextEncoder().encode(t),a=new Uint8Array(1+o.length+i.length);return a.set([o.length],0),a.set(o,1),a.set(i,1+o.length),new n_(a,r)}n(i_,"toZkLoginPublicIdentifier");var o_=eb(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function ib(e,t=!1){let r=e[0]+1,i=BigInt(`0x${ro(e.slice(r))}`),o=t?ap(i,32):il(i,32),a=new Uint8Array(r+o.length);return a.set(e.slice(0,r),0),a.set(o,r),a}n(ib,"normalizeZkLoginPublicKeyBytes");async function ob({address:e,bytes:t,signature:r,intentScope:i,client:o=new nl({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let a=await o.query({query:o_,variables:{bytes:t,signature:r,intentScope:i,author:e}});return a.data?.verifyZkloginSignature.success===!0&&a.data?.verifyZkloginSignature.errors.length===0}n(ob,"graphqlVerifyZkLoginSignature");function ol(e){let t=typeof e=="string"?ir(e):e;if(t[0]!==di.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:i,maxEpoch:o,userSignature:a}=nb(r),{issBase64Details:l,addressSeed:f}=i,g=tb(l,"iss"),x=i_(BigInt(f),g);return{serializedSignature:Ut(t),signatureScheme:"ZkLogin",zkLogin:{inputs:i,maxEpoch:o,userSignature:a,iss:g,addressSeed:BigInt(f)},signature:t,publicKey:x.toRawBytes()}}n(ol,"parseSerializedZkLoginSignature");function cb({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let i=r.toRawBytes(),o=new Uint8Array(1+e.length+i.length);return o.set([di[t]]),o.set(e,1),o.set(i,1+e.length),Ut(o)}n(cb,"toSerializedSignature");function ub(e){let t=ir(e),r=Zu[t[0]];switch(r){case"MultiSig":let i=ui.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:i,bytes:t};case"ZkLogin":return ol(e);case"ED25519":case"Secp256k1":case"Secp256r1":let o=Qw[r],a=t.slice(1,t.length-o),l=t.slice(1+a.length);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:l,bytes:t};default:throw new Error("Unsupported signature scheme")}}n(ub,"parseSerializedSignature");d();h();function lp(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}n(lp,"isValidHardenedPath");function s_(e){return H0(e,"")}n(s_,"mnemonicToSeed");function lb(e){return ro(s_(e))}n(lb,"mnemonicToSeedHex");d();h();var Ua=he(A1(),1);var Na=32;var fb="suiprivkey",fp=class{static{n(this,"Signer")}async signWithIntent(t,r){let i=Oo(r,t),o=Ko(i,{dkLen:32});return{signature:cb({signature:await this.sign(o),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Ut(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(B.vector(B.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:Ut(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},sl=class extends fp{static{n(this,"Keypair")}};function db(e){let{prefix:t,words:r}=Ua.bech32.decode(e);if(t!==fb)throw new Error("invalid private key prefix");let i=new Uint8Array(Ua.bech32.fromWords(r)),o=i.slice(1);return{schema:Zu[i[0]],secretKey:o}}n(db,"decodeSuiPrivateKey");function hb(e,t){if(e.length!==Na)throw new Error("Invalid bytes length");let r=di[t],i=new Uint8Array(e.length+1);return i.set([r]),i.set(e,1),Ua.bech32.encode(fb,Ua.bech32.toWords(i))}n(hb,"encodeSuiPrivateKey");async function dp(e,t,r){try{let i={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Sui"};switch(r.signingType){case"transaction":{let o=Oo("TransactionData",r.transaction),a=ct(o),{result:{signature:l}}=await e.signRawPayload({payload:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,algorithm:"Ed25519"});return{status:"success",signature:l}}case"personalMessage":{let o=new TextDecoder().decode(r.message),{result:{signature:a}}=await e.signUtf8Message({message:o,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:i,algorithm:"Ed25519"});return{status:"success",signature:a}}}return ve(se.UnsupportedOperation,`Unsupported Sui signingType: ${r.signingType}`)}catch(i){return ve(se.InternalError,`KMS Sui signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(dp,"signSui");d();h();async function hp(e,t,r){try{if(r.signingType!=="transaction")return ve(se.UnsupportedOperation,"KMS does not support Bitcoin message signing");let i=null;switch(r.chainType){case _.BitcoinTaproot:i="BitcoinTaproot";break;case _.BitcoinNativeSegwit:i="BitcoinSegwit";break}if(!i)return ve(se.UnsupportedOperation,`KMS does not yet support Bitcoin address type: ${r.chainType}`);let o={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:i},a=r.message,l=J0(a),f=l.length%2===0?l:`0${l}`,g=cc(f),x=ct(g),{result:{transaction:I}}=await e.signTransaction({transaction:{kind:"PSBT",bytes:x},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:void 0}),M;if(typeof I=="string")M=nn(I);else if(Array.isArray(I))M=new Uint8Array(I);else return ve(se.InternalError,"Unexpected Bitcoin transaction response format from KMS");return{status:"success",signature:ac(M)}}catch(i){return ve(se.InternalError,`KMS Bitcoin signing failed: ${i instanceof Error?i.message:"Unknown error"}`)}}n(hp,"signBitcoin");var pb=n(()=>({type:Mt.KMS,sign:n(async(e,t,r)=>{switch(r.chainType){case _.Solana:return _h(e,t,r);case _.EVM:return Kh(e,t,r);case _.Sui:return dp(e,t,r);case _.BitcoinTaproot:case _.BitcoinNativeSegwit:return hp(e,t,r);default:return ve(se.UnsupportedOperation,`KMS signer does not support chain type: ${r.chainType}`)}},"sign")}),"createKMSSigner");d();h();var mb=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{if(!t.isKMSPKIAuthenticator)return ve(se.InvalidAddressType);try{let r=kd(t.payload),i=JSON.stringify(r),o=Buffer.from(i).toString("hex"),l=ko.sign(o,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:ct(l)}}catch(r){if(r instanceof p.ZodError)return ve(se.InvalidRpcPayload,`Invalid KMS RPC payload: ${r.message}`);let i=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return ve(se.InternalError,i)}},"sign")}),"createKMSPKIAuthenticatorSigner");d();h();var gb=he(en());var pp=he(No()),yb=he(yi());var vb=n(()=>({type:Mt.KeyPair,sign:n((e,t)=>{if(t.chainType!==_.Solana)return Promise.resolve(ve(se.InvalidAddressType));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=pp.default.decode(t.message):r=gb.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ve(se.InvalidMessageEncoding))}let i=pp.default.encode(yb.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:i})},"sign")}),"createSolanaKeyPairSigner");d();h();d();h();d();h();var Co=he(yi(),1);d();h();d();h();var al=class extends Fi{static{n(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,qw(t);let i=Rr(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?t.create().update(i).digest():i);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return li(this),this.iHash.update(t),this}digestInto(t){li(this),Ps(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:i,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},cl=n((e,t,r)=>new al(e,t).update(r).digest(),"hmac");cl.create=(e,t)=>new al(e,t);d();h();d();h();function a_(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),g=i?4:0,x=i?0:4;e.setUint32(t+g,l,i),e.setUint32(t+x,f,i)}n(a_,"setBigUint64");var ul=class extends Fi{static{n(this,"HashMD")}constructor(t,r,i,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Wu(this.buffer)}update(t){li(this);let{view:r,buffer:i,blockLen:o}=this;t=Rr(t);let a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let g=Wu(t);for(;o<=a-l;l+=o)this.process(g,l);continue}i.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){li(this),zu(t,this),this.finished=!0;let{buffer:r,view:i,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(i,0),l=0);for(let M=l;M<o;M++)r[M]=0;a_(i,o-8,BigInt(this.length*8),a),this.process(i,0);let f=Wu(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let x=g/4,I=this.get();if(x>I.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<x;M++)f.setUint32(4*M,I[M],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:i,length:o,finished:a,destroyed:l,pos:f}=this;return t.length=o,t.pos=f,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(i),t}};var[c_,u_]=me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Wi=new Uint32Array(80),Hi=new Uint32Array(80),mp=class extends ul{static{n(this,"SHA512")}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:i,Bl:o,Ch:a,Cl:l,Dh:f,Dl:g,Eh:x,El:I,Fh:M,Fl:k,Gh:O,Gl:C,Hh:R,Hl:j}=this;return[t,r,i,o,a,l,f,g,x,I,M,k,O,C,R,j]}set(t,r,i,o,a,l,f,g,x,I,M,k,O,C,R,j){this.Ah=t|0,this.Al=r|0,this.Bh=i|0,this.Bl=o|0,this.Ch=a|0,this.Cl=l|0,this.Dh=f|0,this.Dl=g|0,this.Eh=x|0,this.El=I|0,this.Fh=M|0,this.Fl=k|0,this.Gh=O|0,this.Gl=C|0,this.Hh=R|0,this.Hl=j|0}process(t,r){for(let L=0;L<16;L++,r+=4)Wi[L]=t.getUint32(r),Hi[L]=t.getUint32(r+=4);for(let L=16;L<80;L++){let ce=Wi[L-15]|0,te=Hi[L-15]|0,ie=me.rotrSH(ce,te,1)^me.rotrSH(ce,te,8)^me.shrSH(ce,te,7),ae=me.rotrSL(ce,te,1)^me.rotrSL(ce,te,8)^me.shrSL(ce,te,7),Z=Wi[L-2]|0,ge=Hi[L-2]|0,A=me.rotrSH(Z,ge,19)^me.rotrBH(Z,ge,61)^me.shrSH(Z,ge,6),s=me.rotrSL(Z,ge,19)^me.rotrBL(Z,ge,61)^me.shrSL(Z,ge,6),u=me.add4L(ae,s,Hi[L-7],Hi[L-16]),m=me.add4H(u,ie,A,Wi[L-7],Wi[L-16]);Wi[L]=m|0,Hi[L]=u|0}let{Ah:i,Al:o,Bh:a,Bl:l,Ch:f,Cl:g,Dh:x,Dl:I,Eh:M,El:k,Fh:O,Fl:C,Gh:R,Gl:j,Hh:F,Hl:Y}=this;for(let L=0;L<80;L++){let ce=me.rotrSH(M,k,14)^me.rotrSH(M,k,18)^me.rotrBH(M,k,41),te=me.rotrSL(M,k,14)^me.rotrSL(M,k,18)^me.rotrBL(M,k,41),ie=M&O^~M&R,ae=k&C^~k&j,Z=me.add5L(Y,te,ae,u_[L],Hi[L]),ge=me.add5H(Z,F,ce,ie,c_[L],Wi[L]),A=Z|0,s=me.rotrSH(i,o,28)^me.rotrBH(i,o,34)^me.rotrBH(i,o,39),u=me.rotrSL(i,o,28)^me.rotrBL(i,o,34)^me.rotrBL(i,o,39),m=i&a^i&f^a&f,y=o&l^o&g^l&g;F=R|0,Y=j|0,R=O|0,j=C|0,O=M|0,C=k|0,{h:M,l:k}=me.add(x|0,I|0,ge|0,A|0),x=f|0,I=g|0,f=a|0,g=l|0,a=i|0,l=o|0;let v=me.add3L(A,u,y);i=me.add3H(v,ge,s,m),o=v|0}({h:i,l:o}=me.add(this.Ah|0,this.Al|0,i|0,o|0)),{h:a,l}=me.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:f,l:g}=me.add(this.Ch|0,this.Cl|0,f|0,g|0),{h:x,l:I}=me.add(this.Dh|0,this.Dl|0,x|0,I|0),{h:M,l:k}=me.add(this.Eh|0,this.El|0,M|0,k|0),{h:O,l:C}=me.add(this.Fh|0,this.Fl|0,O|0,C|0),{h:R,l:j}=me.add(this.Gh|0,this.Gl|0,R|0,j|0),{h:F,l:Y}=me.add(this.Hh|0,this.Hl|0,F|0,Y|0),this.set(i,o,a,l,f,g,x,I,M,k,O,C,R,j,F,Y)}roundClean(){Wi.fill(0),Hi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var gp=$w(()=>new mp);var l_=he(yi(),1);var f_="ed25519 seed",d_=2147483648,h_=new RegExp("^m(\\/[0-9]+')+$"),wb=n(e=>e.replace("'",""),"replaceDerive"),p_=n(e=>{let r=cl.create(gp,f_).update(uc(e)).digest(),i=r.slice(0,32),o=r.slice(32);return{key:i,chainCode:o}},"getMasterKeyFromSeed"),m_=n(({key:e,chainCode:t},r)=>{let i=new ArrayBuffer(4);new DataView(i).setUint32(0,r);let a=new Uint8Array(1+e.length+i.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(e,1),a.set(new Uint8Array(i,0,i.byteLength),e.length+1);let l=cl.create(gp,t).update(a).digest(),f=l.slice(0,32),g=l.slice(32);return{key:f,chainCode:g}},"CKDPriv");var g_=n(e=>h_.test(e)?!e.split("/").slice(1).map(wb).some(isNaN):!1,"isValidPath"),yp=n((e,t,r=d_)=>{if(!g_(e))throw new Error("Invalid derivation path");let{key:i,chainCode:o}=p_(t);return e.split("/").slice(1).map(wb).map(l=>parseInt(l,10)).reduce((l,f)=>m_(l,f+r),{key:i,chainCode:o})},"derivePath");d();h();var bb=he(yi(),1);var vp=32,Da=class extends Ks{static{n(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=ir(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==vp)throw new Error(`Invalid public key input. Expected ${vp} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return di.ED25519}async verify(t,r){let i;if(typeof r=="string"){let o=ub(r);if(o.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!op(this.toRawBytes(),o.publicKey))throw new Error("Signature does not match public key");i=o.signature}else i=r;return bb.default.sign.detached.verify(t,i,this.toRawBytes())}};Da.SIZE=vp;var wp="m/44'/784'/0'/0'/0'",La=class e extends sl{static{n(this,"Ed25519Keypair")}constructor(t){super(),t?this.keypair=t:this.keypair=Co.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(Co.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let a=db(t);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,r)}let i=t.length;if(i!==Na)throw new Error(`Wrong secretKey size. Expected ${Na} bytes, got ${i}.`);let o=Co.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let l=new TextEncoder().encode("sui validation"),f=Co.default.sign.detached(l,o.secretKey);if(!Co.default.sign.detached.verify(l,f,o.publicKey))throw new Error("provided secretKey is invalid")}return new e(o)}getPublicKey(){return new Da(this.keypair.publicKey)}getSecretKey(){return hb(this.keypair.secretKey.slice(0,Na),this.getKeyScheme())}async sign(t){return Co.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=wp),!lp(r))throw new Error("Invalid derivation path");let{key:i}=yp(r,lb(t));return e.fromSecretKey(i)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=wp),!lp(r))throw new Error("Invalid derivation path");let{key:i}=yp(r,t);return e.fromSecretKey(i)}};var xb=n(()=>({type:Mt.KeyPair,sign:n(async(e,t)=>{let r=La.fromSecretKey(e.privateKey);try{let i;switch(t.signingType){case"personalMessage":{i=await r.signPersonalMessage(t.message);break}case"transaction":{i=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:i.signature})}catch(i){return console.error(i),Promise.resolve(ve(se.InvalidMessageEncoding))}},"sign")}),"createSuiKeyPairSigner");d();h();var ll=class{static{n(this,"MultiChainVaultSigner")}#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let i=r.chainType;switch(i){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return this.#e.keyPair[i].sign(t,r);case _.EVM:return this.#e.keyPair[i].sign(t,r);case _.Solana:return this.#e.keyPair[i].sign(t,r);case _.Sui:return this.#e.keyPair[i].sign(t,r)}}async signWithHardware(t,r,i){return this.#e.ledger.sign(t,r,i)}async signWithSolanaSeedVault(t,r,i){return this.#e.seedVault.sign(t,r,i)}async signWithKMS(t,r,i){return this.#e.kms.sign(t,r,i)}};d();h();var Ab=n(e=>dh.safeParse(e).success,"isVaultSignerParams");d();h();var y_=n(e=>({getSeed:n(t=>v_(e,t),"getSeed"),setSeed:n((t,r)=>w_(e,t,r),"setSeed"),getClientJWTSigner:n((t,r)=>b_(e,t,r),"getClientJWTSigner"),setClientJWTSigner:n((t,r,i)=>x_(e,t,r,i),"setClientJWTSigner"),removeSeeds:n(t=>Sb(e,t),"removeSeeds"),removeClientJWTKeypairs:n(t=>Eb(e,t),"removeClientJWTKeypairs"),clear:n(async()=>{await Sb(e,"all"),await Eb(e,"all")},"clear")}),"createVaultCache"),$i=`${yr}.cache.secrets`,bp=n(e=>`${yr}.cache.seed.${e}`,"seedCacheKey"),xp=n(e=>`${yr}.cache.client-jwt.${e}`,"clientJWTKeypairKey"),v_=n(async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let i=bp(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o)return null;let{bytes:a,encoding:l}=o.seed;return new Uint8Array(Buffer.from(a,l))},"getSeed"),w_=n(async({isEnabled:e,generalStorage:t,secretsStorage:r},i,o)=>{if(!e())return;let a=bp(i);await r.setSecureValue(a,{version:1,identifier:i,seed:{bytes:Buffer.from(o).toString("base64"),encoding:"base64"}});let l=await t.get($i);if(!l)l={version:1,seedIdentifiers:[i],clientJWTKeypairIdentifiers:[]};else{let f=new Set(l.seedIdentifiers);f.add(i),l.seedIdentifiers=Array.from(f)}await t.set($i,l)},"setSeed"),Sb=n(async({generalStorage:e,secretsStorage:t},r)=>{let i=await e.get($i);if(!i)return;let o=r==="all"?i.seedIdentifiers:r,a=new Set(o),l=i.seedIdentifiers.filter(f=>a.has(f));await t.removeSecureValue(l.map(bp)),await e.set($i,{version:1,seedIdentifiers:i.seedIdentifiers.filter(f=>!a.has(f)),clientJWTKeypairIdentifiers:i.clientJWTKeypairIdentifiers??[]})},"removeSeeds"),b_=n(async({isEnabled:e,secretsStorage:t},r,i)=>{if(!e())return null;let o=xp(r),a=null;try{a=await t.getSecureValue(o)}catch{}if(!a||!a.keyPairs[i])return null;let l=a.keyPairs[i],f=new Uint8Array(Buffer.from(l.p256pubkey.bytes,l.p256pubkey.encoding)),g=new Uint8Array(Buffer.from(l.p256privkey.bytes,l.p256privkey.encoding));return{p256pubkey:f,p256privkey:g}},"getClientJWTSigner"),x_=n(async({isEnabled:e,generalStorage:t,secretsStorage:r},i,o,a)=>{if(!e())return;let l=xp(i),f=await r.getSecureValue(l)??{version:1,identifier:i,keyPairs:{}};f.keyPairs[o]={p256pubkey:{bytes:ct(Buffer.from(a.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ct(Buffer.from(a.p256privkey)),encoding:"base64"}},await r.setSecureValue(l,f);let g=await t.get($i);if(!g)g={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[i]};else{let x=new Set(g.clientJWTKeypairIdentifiers??[]);x.add(i),g.clientJWTKeypairIdentifiers=Array.from(x)}await t.set($i,g)},"setClientJWTSigner"),Eb=n(async({generalStorage:e,secretsStorage:t},r)=>{let i=await e.get($i);if(!i||!i.clientJWTKeypairIdentifiers||i.clientJWTKeypairIdentifiers.length===0)return;let o=r==="all"?i.clientJWTKeypairIdentifiers:r,a=new Set(o);await t.removeSecureValue(o.map(xp)),await e.set($i,{version:1,seedIdentifiers:i.seedIdentifiers,clientJWTKeypairIdentifiers:i.clientJWTKeypairIdentifiers.filter(l=>!a.has(l))})},"removeClientJWTKeypairs");d();h();d();h();d();h();function A_(e){switch(e.chainType){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return;default:xe(e)}}n(A_,"assertSupportedKMSChain");function Ap(e){switch(A_(e),e.chainType){case _.Solana:case _.EVM:return{chainType:e.chainType,publicKey:e.address,pathType:e.pathType};case _.Sui:return{chainType:e.chainType,publicKey:e.publicKey,address:e.address,pathType:e.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,...r}=e;return{...r,addresses:{...t}}}default:return xe(e)}}n(Ap,"buildVaultStorageKMSChainAddress");function Mb(e){let t={};for(let[,r]of Object.entries(e)){let i=Ap(r);t[r.chainType]=i}return t}n(Mb,"buildVaultStorageKMSChainAddresses");async function Tb(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l}){if(G.addBreadcrumb(H.Account,`[addKMSVaultAccount] ENTRY: walletId=${r}`,X.Info),i!==Dt)throw new Error(`KMS vault accounts must use tag "${Dt}", received "${i}".`);let f=Mb(a),g=po(r,i),x={version:1,type:P.KMSVault,identifier:g,derivationIndex:o,kms:{organizationId:t,walletId:r,tag:i},chains:f,...l&&{apiEnvironment:l}};return await Lt(e,x),x}n(Tb,"addKMSVaultAccount");d();h();function S_(e,t){let r=!1,i={...e};for(let[o,a]of Object.entries(t)){let l=o,f=Ap(a),g=e[l];if(!g){i[l]=f,r=!0;continue}switch(f.chainType){case _.Solana:case _.EVM:case _.Sui:continue;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let x=g,I=f,M=x.addresses?{...x.addresses}:{};for(let k of ru){let O=I.addresses?.[k];O&&M[k]!==O&&(M[k]=O,r=!0)}i[l]={...x,addresses:M};break}default:xe(f)}}return{merged:i,changed:r}}n(S_,"deepMergeChains");async function Ib(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a}){if(i!==Dt)throw new Error(`KMS vault accounts must use tag "${Dt}", received "${i}".`);let l=po(r,i),f=await dt(e),g=f.findIndex(C=>C.type===P.KMSVault&&C.identifier===l);if(g===-1)throw new Error(`KMSVault account not found for identifier ${l}`);let x=f[g];if(x.kms.organizationId!==t||x.kms.walletId!==r||x.kms.tag!==i||x.derivationIndex!==o)throw new Error(`KMS vault metadata mismatch for identifier ${l} (existing data retained, incoming rejected).`);let{merged:I,changed:M}=S_(x.chains,a);if(!M)return x;let k={...x,chains:I},O=[...f];return O[g]=k,await on(e,O),k}n(Ib,"upsertKMSVaultChains");d();h();d();h();d();h();d();h();async function _b(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}n(_b,"mnemonicToSeed");d();h();var kb=he(en());var E_=he(yi());d();h();var Sp=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],QJ=new Set(Sp);var M_=n((e,t,r,i,o)=>{let a;switch(o){case"rmd160":case"md5":case"sha":throw new Error(`${o} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${o} is supported by noble, but we don't need it for bip39`);case"sha256":a=vi;break;case"sha512":a=O0;break}return mc(a,e,t,{c:r,dkLen:i})},"pbkdf2Noble"),T_=n((e,t,r)=>{for(;e.length<r;)e=t+e;return e},"lpad"),Pb=n(e=>e.map(t=>T_(t.toString(2),"0",8)).join(""),"bytesToBinary"),I_=n(e=>parseInt(e,2),"binaryToByte"),__=n(e=>{let r=e.length*8/32,i=vi(e);return Pb(Array.from(i)).slice(0,r)},"deriveChecksumBits"),pi;(function(e){e.InvalidChecksum="InvalidChecksum",e.InvalidChecksumBits="InvalidChecksumBits",e.InvalidEntropy="InvalidEntropy",e.InvalidEntropyBits="InvalidEntropyBits",e.LessThanTwelve="LessThanTwelve",e.ExactlyTwelveOrTwentyFour="ExactlyTwelveOrTwentyFour",e.MoreThanTwentyFour="MoreThanTwentyFour",e.WrongWord="WrongWord"})(pi||(pi={}));var Ep=n(async e=>{let t=Sp;if(e.length<16)throw new Error(pi.LessThanTwelve);if(e.length>32)throw new Error(pi.MoreThanTwentyFour);if(e.length%4!==0)throw new Error(pi.WrongWord);let r,i;try{r=Pb(Array.from(e))}catch{throw new Error(pi.InvalidEntropyBits)}try{i=__(e)}catch{throw new Error(pi.InvalidChecksumBits)}let a=(r+i).match(/(.{1,11})/g);if(!a)throw new Error(pi.InvalidChecksum);let l=a.map(x=>{let I=I_(x);return t[I]}),f=kb.Buffer.from(l.join(" "));return{seed:await _b({mnemonic:f,pbkdf2:M_}),mnemonic:f}},"entropyToSeedAndMnemonic");d();h();async function Gi(e,t){let r=await Sy(e,t);if(!r)throw new Xn;let i=Tr.from(r.entropy);return r.entropy.fill(0),i}n(Gi,"exportEntropy");async function jt(e,t){let r,i=await e.secureCache.getSeed(t);if(i)r=i;else{let a=await Gi(e,t),{seed:l}=await a.foldAsync(Ep);r=l,await e.secureCache.setSeed(t,r)}let o=Tr.from(r);return r.fill(0),o}n(jt,"exportSeed");d();h();var Mp=he(Do());function Cs(e){return e.fold(Mp.keccak256)}n(Cs,"identifierForSeed");function Zi(e,t,r){let i=Yn[r];return Mp.keccak256(`${e}:${t}:${i}`)}n(Zi,"identifierForSeedAccount");function Nn(e,t,r,i){let o={};for(let a of i){let{publicKey:l}=e.keypairGenerator.generateKeypairFromSeed(t,r,a),f=rn.getAddressType(a),g=k_({addressType:f,derivationPathType:a,publicKey:l});o[f]=py(g)}return o}n(Nn,"storageChainAddresses");function k_({addressType:e,derivationPathType:t,publicKey:r}){switch(e){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e,pathType:t,publicKey:r};default:return xe(e)}}n(k_,"toChainAddressInput");async function Bb(e,t){let r=new Set,i=await dt(e);for(let a of i)a.type===P.Seed&&a.seedIdentifier===t&&Yn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Kb(e,t,o)}n(Bb,"addAccountForExistingSeed");async function Kb(e,t,r){try{return await P_(e,t,r)}catch(i){if(i instanceof xn)return await Kb(e,t,r+1);throw i}}n(Kb,"addAccountForSeedWithDerivationIndex");async function P_(e,t,r){let i=await jt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Zi(t,r,a[0]),f={version:1,type:P.Seed,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Nn(e,i,r,a)};return await Lt(e,f,!1),f}n(P_,"_addAccountForExistingSeed");d();h();var Lb=he(E1());var Vb=he(Q0()),Fb=he(Db()),jb=he(Do());function U_(e,t,r){let i=Yn[r];return jb.keccak256(`${e}:${t}:${i}`)}n(U_,"_identifierForLedgerAccount");async function qb(e,t,r){let i=[];for(let o of r){if(o.addresses.length===0&&o.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let a=o.addresses[0]?.pathType||o.publicKeys[0]?.pathType,l=U_(t,o.derivationIndex,a);Vb.initEccLib(Lb);let f=(0,Fb.ECPairFactory)(Lb),g={...o.addresses.reduce((I,M)=>{let k=rn.getAddressType(M.pathType);switch(k){case _.EVM:case _.Solana:{I[k]={chainType:k,pathType:M.pathType,publicKey:M.value};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error("Bitcoin accounts should be using public key not computed addresses");case _.Sui:throw new zl("add ledger account");default:xe(k)}return I},{}),...o.publicKeys.reduce((I,M)=>{let k=rn.getAddressType(M.pathType);switch(k){case _.EVM:case _.Solana:throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let O=f.fromPublicKey(Buffer.from(M.value,"hex")),C=new Uint8Array(O.publicKey);I[k]={chainType:k,pathType:M.pathType,publicKey:C,addresses:Object.values(Rt).reduce((R,j)=>({...R,[j]:Nt({publicKey:C,addressType:k,networkID:j})}),{})};break}case _.Sui:throw new zl("add ledger account");default:xe(k)}return I},{})},x={version:1,type:P.Ledger,identifier:l,ledgerGroupIdentifier:t,derivationIndex:o.derivationIndex,chains:g};i.push(x),await Lt(e,x)}return i}n(qb,"addLedgerAccounts");d();h();var zb=he(Do());function N_(e){return zb.keccak256(e)}n(N_,"_identifierForPrivateKey");async function Wb(e,t,r,i){let o=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),a=await sn(e),l=N_(o.publicKey);if((a?.privateKeyIdentifiers??[]).includes(l))throw new ia;let x={version:1,identifier:l,name:i,chainType:t,privateKey:Buffer.from(o.privateKey)},I=l,M;switch(t){case _.EVM:case _.Solana:{M={version:1,type:P.PrivateKey,identifier:I,privateKeyIdentifier:l,publicKey:Nt({publicKey:o.publicKey,addressType:t}),chainType:t};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{M={version:1,type:P.PrivateKey,identifier:I,privateKeyIdentifier:l,publicKey:o.publicKey,addresses:Object.values(Rt).reduce((k,O)=>({...k,[O]:Nt({publicKey:o.publicKey,addressType:t,networkID:O})}),{}),chainType:t};break}case _.Sui:{M={version:1,type:P.PrivateKey,identifier:I,privateKeyIdentifier:l,publicKey:o.publicKey,address:Nt({publicKey:o.publicKey,addressType:t}),chainType:t};break}default:xe(t)}if(!M)throw new Error("unable to create a private key account based on the address type");return await Lt(e,M),await Ey(e,x),M}n(Wb,"addPrivateKeyAccount");d();h();var Hb=he(Do());function D_(e){return Hb.keccak256(e)}n(D_,"_identifierForReadOnlyAccount");async function $b(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new ra;let i=D_(r),o={version:1,type:P.ReadOnly,identifier:i,addresses:t};return await Lt(e,o),o}n($b,"addReadonlyAccount");d();h();async function Gb(e,t){let r=new Set,i=await dt(e);for(let a of i)a.type===P.Seedless&&a.seedIdentifier===t&&Yn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Zb(e,t,o)}n(Gb,"addAccountForExistingSeedless");async function Zb(e,t,r){try{return await L_(e,t,r)}catch(i){if(i instanceof xn)return await Zb(e,t,r+1);throw i}}n(Zb,"addAccountForSeedWithDerivationIndex");async function L_(e,t,r){let i=await jt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Zi(t,r,a[0]),f={version:1,type:P.Seedless,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Nn(e,i,r,a)};return await Lt(e,f,!1),f}n(L_,"_addAccountForExistingSeed");d();h();d();h();d();h();async function Ns(e,t){let r=await sn(e),i=Cs(t),o=r?.seedIdentifiers??[],a=r?.seedlessIdentifiers??[];return o.concat(a).includes(i)}n(Ns,"isExistingSeed");async function dl(e,t,r,i){if((await du(e)).length>0)throw new wc;if(i.length===0)throw new na;if(await Ns(e,t))throw new no;let l=Cs(t),f=t.fold(I=>({version:1,identifier:l,name:r,entropy:new Uint8Array(I)}));await Ty(e,f);let g=[],x=await jt(e,l);for(let I of i){let M=Zi(l,I.derivationIndex,I.derivationPathTypes[0]),k=Nn(e,x,I.derivationIndex,I.derivationPathTypes),O={version:1,type:P.Seedless,identifier:M,seedIdentifier:l,derivationIndex:I.derivationIndex,chains:k};await Lt(e,O),g.push(O)}return g}n(dl,"addSeedlessWithMultipleAccounts");async function Jb(e,t,r){let i=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(i);return(await dl(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}n(Jb,"addSeedlessWithDefaultAccount");d();h();d();h();async function hl(e,t,r,i,o=!1){let a=await Ns(e,t);if(!o&&a)throw new no;let l=Cs(t),f=t.fold(I=>({version:1,identifier:l,name:r,entropy:new Uint8Array(I)}));await My(e,f);let g=[],x=await jt(e,l);for(let I of i){let M=await Zi(l,I.derivationIndex,I.derivationPathTypes[0]),k=Nn(e,x,I.derivationIndex,I.derivationPathTypes),O={version:1,type:P.Seed,identifier:M,seedIdentifier:l,derivationIndex:I.derivationIndex,chains:k};await Lt(e,O),g.push(O)}return g}n(hl,"addSeedWithMultipleAccounts");async function Qb(e,t,r){let i=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(i);return(await hl(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}n(Qb,"addSeedWithDefaultAccount");d();h();var Yb=he(Do());function V_(e){return Yb.keccak256(e)}n(V_,"_identifierForSolanaSeedVaultAccount");async function Xb(e,t){let r=[];for(let{publicKey:i,derivationPath:o,authToken:a}of t){let l=V_(i),f={version:1,type:P.SeedVault,identifier:l,derivationPath:o,authToken:a,publicKey:i,chainType:_.Solana};r.push(f),await Lt(e,f)}return r}n(Xb,"addSolanaSeedVaultAccounts");d();h();d();h();async function pl(e,t,r){let o=(await dt(e)).find(a=>a.identifier===t);if(!o)throw new bn;switch(o.type){case P.Seed:case P.Seedless:{let a=o.chains[r]?.pathType;if(!a)throw new Ei;let l=await jt(e,o.seedIdentifier),f=e.keypairGenerator.generateKeypairFromSeed(l,o.derivationIndex,a);return Tr.from(f.privateKey)}case P.PrivateKey:{let a=await Ki(e,o.privateKeyIdentifier);if(a.chainType!==r)throw new Ei;let l=e.keypairGenerator.generateKeypairFromPrivateKey(Tr.from(a.privateKey),r);return Tr.from(l.privateKey)}case P.Ledger:case P.SeedVault:case P.KMSVault:throw new ea;case P.ReadOnly:throw new ta;default:(a=>{throw new Error("invalid account type")})(o)}}n(pl,"exportPrivateKey");d();h();d();h();d();h();var Fa=new Error("Unknown error"),ml=new Error("Invalid entropy length"),Va=new Error("Invalid mn*monic sentence length"),Bp=new Error("Invalid checksum"),ex=new RangeError("Invalid mn*monic word"),Pp=new RangeError("Invalid wordlist"),Kp=new RangeError("Invalid wordlist index"),Ur=n((e,t)=>{if(!e)throw t},"assert");function Qi(e){Ur(e>=128,ml),Ur(e<=256,ml),Ur(e%32===0,ml)}n(Qi,"assertEntropyLengthIsValid");function ja(e){Ur(e>=12,Va),Ur(e<=24,Va),Ur(e%3===0,Va)}n(ja,"assertMnemonicSentenceLengthIsValid");function Ds(e){Ur(e.length===2048,Pp),Ur(e.every(t=>typeof t=="string"),Pp)}n(Ds,"assertWordlistIsValid");function Op(e,t){return ja(e),t(e*4/3)}n(Op,"generateEntropy");async function gl(e,t){let r=e.length*8;Qi(r);let i=r/32,o=await t(e),[a]=o,l=8-i,f=a>>>l<<l>>>0,g=new Uint8Array(e.length+1);return g.set(e,0),g[g.length-1]=f,g}n(gl,"deriveBits");function yl(e){let t=(e.length-1)*8;Qi(t);let r=t/32,i=(t+r)/11,o=new ArrayBuffer(i*4),a=new DataView(o),l=0,f=0,g=0;for(let x of e)if(g+=8,f|=x<<32-g,f>>>=0,g>=11){let I=f>>>21;Ur(I>=0&&I<=2047,Kp),a.setUint32(l*4,I,!0),l++,f<<=11,f>>>=0,g-=11}return Ur(l===i,Va),new Uint32Array(o)}n(yl,"mapBitsToIndexes");function tx(e){let t=e.length;ja(t);let r=11,i=e.length*r,o=new ArrayBuffer(Math.ceil(i/8)),a=new DataView(o),l=new DataView(e.buffer),f=e.length,g=0,x=0,I=0,M=8;for(let k=0;k<f;k++){let O=l.getUint32(k*4,!0);Ur(O<2048,Kp);let C=r;for(;C>0;){let R=32-C,j=C>=M?M:C;g|=O>>32-R-j&(1<<j)-1,x+=j,g<<=M-j,g>>>=0,C-=j,M-=j,M<=0&&(M=8),x%8===0&&(a.setUint8(I,g),I++,g=0)}}return f%8!==0&&a.setUint8(I,g),new Uint8Array(o)}n(tx,"mapIndexesToBits");function Cp(e){ja(e.length);let t=tx(e),r=t.slice(0,t.length-1);return t.fill(0),r}n(Cp,"indexesToEntropy");async function Ls(e,t){let r=e.length*8;Qi(r);let i=await gl(e,t),o=yl(i);return i.fill(0),o}n(Ls,"entropyToIndexes");function Rp(e,t){Ds(t);let r=new Set(t),i=new Uint32Array(24),o=0,a="";for(let f=0;f<e.length;f++){let g=e[f],x=g===32,I=f===e.length-1;if(I&&(a+=String.fromCharCode(g)),x||I){Ur(r.has(a),ex);let M=0;for(let k of t){if(a===k)break;M++}i[o++]=M,a=""}else a+=String.fromCharCode(g)}ja(o);let l=i.slice(0,o);return i.fill(0),l}n(Rp,"mnemonicToIndexes");async function Vs(e,t,r){let i=await Ls(e,r),o=new Uint8Array(i.reduce((l,f)=>l+t[f].length+1,-1)),a=0;for(let l of i){a>0&&(o[a++]=32);let f=t[l];for(let g of f)o[a++]=g.charCodeAt(0)}return i.fill(0),o}n(Vs,"entropyToMnemonic");var kp=Uint8Array.of(109,110,101,109,111,110,105,99);async function Ro(e,t,r,i,o){let a=await Vs(e,r,i),l=new Uint8Array(kp.length+t.length);l.set(kp,0),l.set(t,kp.length);let f=await o(a,l,2048,64,"sha512");return l.fill(0),a.fill(0),f}n(Ro,"entropyToSeed");d();h();var Fs=he(x1(),1);d();h();var qa=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function Up(e){switch(e){case"english":return qa}}n(Up,"getWordlist");function Np(e){return t=>new e(t)}n(Np,"createFromEntropy");function Dp(e,t){return async r=>{let i=null,o=null,a=null,l=null,f=null;try{o=Cp(r),a=await gl(o,t),l=yl(a);let g=r[r.length-1],x=l[l.length-1];if(g!==x)throw Bp;f=e.fromEntropy(o)}catch(g){g instanceof Error?i=g:(console.error(g),i=Fa)}finally{if(o?.fill(0),a?.fill(0),l?.fill(0),i)throw i;return f}}}n(Dp,"createFromIndexes");function Lp(e,t){return async r=>{let i=null,o=null,a=null;try{o=Rp(r,t),a=await e.fromIndexes(o)}catch(l){l instanceof Error?i=l:(console.error(l),i=Fa)}finally{if(o?.fill(0),i)throw i;return a}}}n(Lp,"createFromMnemonic");function Vp(e,t){return r=>{let i=null,o=null,a=null;try{o=Op(r,t),a=e.fromEntropy(o)}catch(l){l instanceof Error?i=l:(console.error(l),i=Fa)}finally{if(o?.fill(0),i)throw i;return a}}}n(Vp,"createFromSentenceLength");var Fp=class{static{n(this,"Bip39Factory")}static async webCrypto(t){let r=typeof t=="string"?await Up(t):t;Ds(r);let i=n(l=>self.crypto.getRandomValues(new Uint8Array(l)),"random"),o=n(async l=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",l)),"sha256"),a=n(async(l,f,g,x,I)=>{let M="SHA-"+I.substring(3),k=await self.crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),O=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:f,iterations:g,hash:M},k,x*8);return new Uint8Array(O)},"pbkdf2");return class za{static{n(this,"WebCryptoBip39")}static fromEntropy=Np(za);static fromIndexes=Dp(za,o);static fromMnemonic=Lp(za,r);static fromSentenceLength=Vp(za,i);static wordlist=r;#e;constructor(f){Qi(f.length*8),this.#e=f.slice()}deriveSeed=n((f=new Uint8Array)=>Ro(this.#e,f,r,o,a),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,o),"getIndexes");getMnemonic=n(()=>Vs(this.#e,r,o),"getMnemonic");getSentenceLength=n(()=>{let f=this.#e.length*8,g=f/32;return(f+g)/11},"getSentenceLength")}}static async nodeCrypto(t){let r=typeof t=="string"?await Up(t):t;Ds(r);let i=n(l=>new Uint8Array((0,Fs.randomBytes)(l).buffer),"random"),o=n(l=>new Uint8Array((0,Fs.createHash)("sha256").update(l).digest().buffer),"sha256"),a=n((...l)=>new Promise((f,g)=>{(0,Fs.pbkdf2)(...l,(x,I)=>{if(x)return g(x);f(new Uint8Array(I.buffer))})}),"pbkdf2");return class Wa{static{n(this,"NodeCryptoBip39")}static fromEntropy=Np(Wa);static fromIndexes=Dp(Wa,o);static fromMnemonic=Lp(Wa,r);static fromSentenceLength=Vp(Wa,i);static wordlist=r;#e;constructor(f){Qi(f.length*8),this.#e=f.slice()}deriveSeed=n((f=new Uint8Array)=>Ro(this.#e,f,r,o,a),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,o),"getIndexes");getMnemonic=n(()=>Vs(this.#e,r,o),"getMnemonic");getSentenceLength=n(()=>{let f=this.#e.length*8,g=f/32;return(f+g)/11},"getSentenceLength")}}static async customCrypto(t,r){let i=typeof t=="string"?await Up(t):t;Ds(i);let{random:o,sha256:a,pbkdf2:l}=r;return class Ha{static{n(this,"CustomCryptoBip39")}static fromEntropy=Np(Ha);static fromIndexes=Dp(Ha,a);static fromMnemonic=Lp(Ha,i);static fromSentenceLength=Vp(Ha,o);static wordlist=i;#e;constructor(g){Qi(g.length*8),this.#e=g.slice()}deriveSeed=n((g=new Uint8Array)=>Ro(this.#e,g,i,a,l),"deriveSeed");getEntropy=n(()=>this.#e.slice(),"getEntropy");getIndexes=n(()=>Ls(this.#e,a),"getIndexes");getMnemonic=n(()=>Vs(this.#e,i,a),"getMnemonic");getSentenceLength=n(()=>{let g=this.#e.length*8,x=g/32;return(g+x)/11},"getSentenceLength")}}};async function rx(e,t){let r,i=await e.secureCache.getSeed(t);if(i)r=i;else{let a=await Gi(e,t);try{r=await a.foldAsync(async f=>Ro(f,new Uint8Array,qa,vi,(g,x,I,M)=>mc(vi,g,x,{c:I,dkLen:M})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let o=Tr.from(r);return r.fill(0),o}n(rx,"exportSeedV2");var F_=new Xn,j_=new Ei,q_=new io,pt={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function ox(e){let t;try{if(t=await dt(e),t.length===0)return pt.unonboarded}catch{return pt.unableToLoadAccounts}return z_(e,t)}n(ox,"checkVaultIntegrity");var z_=n(async(e,t)=>{let r=await W_(e,t);if(r.status!=="safely-onboarded")return r;try{let l=await Cd(e);if(l?.version===3&&l?.isSafelyOnboarded)return pt.safelyOnboarded}catch{return pt.fetchIntegrityStorageError}let i=await ix(e,t,P.Seed),o=await ix(e,t,P.Seedless),a=await $_(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:a.status!=="safely-onboarded"?a:(await Od(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),pt.safelyOnboarded)},"checkAndValidateAllSecrets"),W_=n(async(e,t)=>{try{if((await Cd(e))?.isSafelyOnboarded)return pt.safelyOnboarded}catch{return pt.fetchIntegrityStorageError}let r=await nx(e,t,P.Seed),i=await nx(e,t,P.Seedless);return r.status!=="safely-onboarded"?r:i.status!=="safely-onboarded"?i:(await Od(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),pt.safelyOnboarded)},"checkForExistingEntropy"),nx=n(async(e,t,r)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{await Gi(e,o)}catch(a){if(a instanceof Error){if(a.message===F_.message)return pt.invalidIdentifier;if(a.message.match(/ExpoSecureStorage/))return pt.fetchEntropyStorageError}return pt.internalError}return pt.safelyOnboarded},"checkExistingEntropy"),H_=n(e=>{if(!(e instanceof Error))return pt.invalidEntropy;let t=[[/ExpoSecureStorage/,pt.fetchEntropyStorageError],[/InvalidEntropyBip39/,pt.invalidEntropyBip39],[/LessThanTwelve/,pt.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,pt.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,pt.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,pt.invalidChecksumBits],[/InvalidEntropyBits/,pt.invalidEntropyBits],[/InvalidChecksum/,pt.invalidChecksum]];for(let[r,i]of t)if(e.message.match(r))return i;return pt.invalidEntropy},"getCheckValidEntropyErrorResult"),ix=n(async(e,t,r)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{await rx(e,o)}catch(a){return H_(a)}return pt.safelyOnboarded},"checkValidEntropy"),$_=n(async(e,t)=>{for(let r of t)if(r.type===P.PrivateKey)try{await pl(e,r.identifier,r.chainType)}catch(i){if(i instanceof Error){if(i.message===j_.message)return pt.invalidPkAddressType;if(i.message===q_.message)return pt.invalidPkIdentifier;if(i.message.match(/ExpoSecureStorage/))return pt.fetchPkStorageError}return pt.invalidPk}return pt.safelyOnboarded},"checkValidPrivateKeys");d();h();async function sx(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,i=await dt(e);if(i.length===0)return r;let o=new Map;for(let a of i){if(a.type!==P.Seed&&a.type!==P.Seedless)continue;let l=o.get(a.seedIdentifier);l?l.push(a):o.set(a.seedIdentifier,[a])}for(let[a,l]of o){let f;for(let g of l)if(!(g.chains&&!Gf(Object.values(g.chains)[0].pathType)))for(let x of t){if(g.chains[x])continue;f||(f=await jt(e,a));let M=Jt([x]),k=Nn(e,f,g.derivationIndex,M);g.chains={...g.chains,...k},r=!0}}return r&&await on(e,i),r}n(sx,"deriveAddresses");d();h();d();h();d();h();d();h();var ux=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ax=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),G_=BigInt(1),jp=BigInt(2),cx=n((e,t)=>(e+t/jp)/t,"divNearest");function Z_(e){let t=ux,r=BigInt(3),i=BigInt(6),o=BigInt(11),a=BigInt(22),l=BigInt(23),f=BigInt(44),g=BigInt(88),x=e*e*e%t,I=x*x*e%t,M=br(I,r,t)*I%t,k=br(M,r,t)*I%t,O=br(k,jp,t)*x%t,C=br(O,o,t)*O%t,R=br(C,a,t)*C%t,j=br(R,f,t)*R%t,F=br(j,g,t)*j%t,Y=br(F,f,t)*R%t,L=br(Y,r,t)*I%t,ce=br(L,l,t)*C%t,te=br(ce,i,t)*x%t,ie=br(te,jp,t);if(!qp.eql(qp.sqr(ie),e))throw new Error("Cannot find square root");return ie}n(Z_,"sqrtMod");var qp=Nu(ux,void 0,void 0,{sqrt:Z_}),vl=Lu({a:BigInt(0),b:BigInt(7),Fp:qp,n:ax,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n(e=>{let t=ax,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-G_*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,l=BigInt("0x100000000000000000000000000000000"),f=cx(a*e,t),g=cx(-i*e,t),x=Zt(e-f*r-g*o,t),I=Zt(-f*i-g*a,t),M=x>l,k=I>l;if(M&&(x=t-x),k&&(I=t-I),x>l||I>l)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:M,k1:x,k2neg:k,k2:I}},"splitScalar")}},Fu),qee=BigInt(0);var zee=vl.ProjectivePoint;async function lx(){let e=vl.utils.randomPrivateKey();return{publicKey:vl.getPublicKey(e),privateKey:e}}n(lx,"deriveAgentKeypair");var fx=n(e=>`${yr}.perps.agent.keypair.${e}`,"agentWalletStorageKey"),wl=n(async(e,t,r=!1)=>{let i=await J_(e,t);if(i&&!r)return i;let o=await lx();return await Q_(e,o,t),o},"exportAgentWalletKeypair"),J_=n(async(e,t)=>{let r=fx(t),i=null;try{i=await e.secretsStorage.getSecureValue(r)}catch{}if(!i)return null;let o=i.keyPair,a=new Uint8Array(Buffer.from(o.publicKey.bytes,o.publicKey.encoding)),l=new Uint8Array(Buffer.from(o.privateKey.bytes,o.privateKey.encoding));return{publicKey:a,privateKey:l}},"getAgentWalletFromStorage"),Q_=n(async(e,t,r)=>{let i=fx(r),o={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},a={version:1,identifier:r,keyPair:o};await e.secretsStorage.setSecureValue(i,a)},"setAgentWalletInStorage");var dx=n(async(e,t,r=!1)=>{let{publicKey:i}=await wl(e,t,r);return Nt({publicKey:i,addressType:_.EVM})},"getAgentAddress");d();h();d();h();var zp="m/23001'/0'";async function js(e,t){let r;switch(t.type){case P.Seedless:case P.Seed:r=t.seedIdentifier;break;case P.PrivateKey:r=t.privateKeyIdentifier;break}let i=await e.secureCache.getClientJWTSigner(r,zp);if(i)return{publicKey:i.p256pubkey,privateKey:i.p256privkey};let o;switch(t.type){case P.Seedless:case P.Seed:{o=(await jt(e,t.seedIdentifier)).fold(l=>new Fo(l));break}case P.PrivateKey:{let a=await Ki(e,t.privateKeyIdentifier);o=new Fo(a.privateKey);break}}try{let a=o.derivePath({ellipticCurve:"ed25519",derivationPath:zp,bytesInPrivateKey:64}),l=Du(a.secretKey,ko.CURVE.n),f=ko.getPublicKey(l);return await e.secureCache.setClientJWTSigner(r,zp,{p256pubkey:f,p256privkey:l}),{publicKey:f,privateKey:l}}finally{o.cleanup()}}n(js,"deriveClientJWTKeypair");var Y_=n(e=>e.type===P.Seed||e.type===P.Seedless||e.type===P.PrivateKey,"isAccountWithKey"),hx=n(async(e,t)=>{let r=await dt(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let o=r.filter(Y_).find(l=>l.type===P.PrivateKey?l.privateKeyIdentifier===t:l.seedIdentifier===t);if(!o)throw new Error("Unable to derive authentication public key for given secret identifier.");let a=await js(e,o);return ct(a.publicKey)},"getAuthenticationPublicKey");d();h();var px=he(No());d();h();var X_="m/24001'/0'",bl=n(async e=>{let t=await dt(e);if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],i;switch(r.type){case P.Seed:case P.Seedless:{i=(await jt(e,r.seedIdentifier)).fold(a=>new Fo(a));break}case P.PrivateKey:{let o=await Ki(e,r.privateKeyIdentifier);i=new Fo(o.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:X_,bytesInPrivateKey:64});return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}},"deriveCashKeypair");var mx=n(async e=>{let{publicKey:t}=await bl(e);return px.default.encode(t)},"getCashAddress");d();h();async function gx(e,t){let r=await dt(e);if(r.length===0)throw new bn;let i=r.filter(o=>o.identifier!==t);await on(e,i),await Kd(e)}n(gx,"removeAccount");d();h();async function yx(e,t,r){let i=await dt(e);if(r<0||r>=i.length)throw new bn;let o=i.map(l=>l.identifier).indexOf(t);if(o<0)throw new bn;if(o===r)return;let a=i[o];i.splice(o,1),i.splice(r,0,a),await on(e,i)}n(yx,"reorderAccount");d();h();d();h();d();h();function xl(e){return e.find(t=>t.type===P.Seedless)??e.find(t=>t.type===P.Seed)??e.find(t=>t.type===P.PrivateKey)}n(xl,"selectKMSAuthenticatorSourceAccount");function ek(e){let t;async function r(){if(t)return t;let a=await dt(e),l=xl(a);if(!l)throw new Error("Vault requires a seed, seedless, or private key account to derive the KMS authenticator. Add a local secret before calling getKMSInstance().");return t=l,t}n(r,"getSigningAccount");async function i(){let a=await r();return js(e,a)}return n(i,"getKeyPair"),{getPublicKey:n(async()=>ct((await i()).publicKey),"getPublicKey"),signRpcPayload:n(async a=>{let l=await i(),f=await e.vaultSigner.signWithKeypair(l,{isKMSPKIAuthenticator:!0,payload:a});if("status"in f&&f.status==="error")throw new Error(f.message);return f.signature},"signRpcPayload")}}n(ek,"createVaultKMSPKIAuthenticator");function $a(e){return _d({authenticator:ek(e)})}n($a,"createVaultKMS");async function Al(e,t,r){let i=t.chains[r]?.pathType;if(!i)return ve(se.InvalidAddressType,`Seed Account does not contain a chain address for the chain type ${r}.`);let o=await jt(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(o,t.derivationIndex,i)}n(Al,"deriveKeyPairFromAddressType");async function vx(e,t,r){let i=await dt(e),o=i.find(a=>a.identifier===t);if(!o)return ve(se.InvalidAccountId,`Vault (${i.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(o.type){case P.KMSVault:case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await wl(e,o.identifier);return e.vaultSigner.signWithKeypair(a,r)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await js(e,o);return e.vaultSigner.signWithKeypair(a,r)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return ve(se.UnsupportedOperation,"Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let l=$a(e),f=await gy(l);return e.vaultSigner.signWithKMS(l,{organizationId:f.organizationId,walletId:f.walletId,derivationPath:f.account.derivationPath},r.data)}default:return ve(se.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}let a=await bl(e);return e.vaultSigner.signWithKeypair(a,r)}switch(o.type){case P.KMSVault:{let a=$a(e),{organizationId:l,walletId:f}=o.kms,g=o.chains[r.chainType];if(!g)return ve(se.InvalidAddressType,`KMSVault account does not have a derivation path for chain type ${r.chainType}`);let x=Qn({pathType:g.pathType,index:o.derivationIndex});return e.vaultSigner.signWithKMS(a,{organizationId:l,walletId:f,derivationPath:x},r)}case P.Seedless:case P.Seed:{switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{enabledAddressTypes:a}=await e.fetchChainAvailability(),l={},f=Object.keys(o.chains).filter(g=>Ys.safeParse(g).success).filter(g=>a.includes(g));for(let g of f){let x=await Al(e,o,g);if("status"in x&&x.status==="error")return x;l[g]=x}return e.vaultSigner.signWithKeypair(l,r)}case _.EVM:{let a=await Al(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Solana:{let a=await Al(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Sui:{let a=await Al(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}}break}case P.PrivateKey:{let a=await Ki(e,o.privateKeyIdentifier);if(a.chainType!==r.chainType)return ve(se.InvalidAddressType,`Private Key account from accountID is a different chain type from params. Expected ${a.chainType}, got ${r.chainType}`);let l=e.keypairGenerator.generateKeypairFromPrivateKey(Tr.from(a.privateKey),r.chainType);switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return e.vaultSigner.signWithKeypair({[r.chainType]:l},r);case _.EVM:return e.vaultSigner.signWithKeypair(l,r);case _.Solana:return e.vaultSigner.signWithKeypair(l,r);case _.Sui:return e.vaultSigner.signWithKeypair(l,r)}break}case P.Ledger:{let a=o.chains[r.chainType];if(!a)return ve(se.InvalidAddressType,`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let l=D0.safeParse({pathType:a.pathType,index:o.derivationIndex});if(!l.success)return ve(se.InvalidDerivationPath,"Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let f=Qn(l.data);return e.vaultSigner.signWithHardware(t,f,r)}case P.SeedVault:{let{authToken:a,derivationPath:l,chainType:f}=o;return f!==r.chainType?ve(se.InvalidAddressType,`Solana Seed Vault account from accountID is a different chain type from params. Expected ${f}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(a,l,r)}case P.ReadOnly:return ve(se.UnsupportedOperation,"Read Only Accounts cannot sign transactions.");default:(a=>{throw new Error("invalid account type")})(o)}}n(vx,"sign");d();h();function wx(e){switch(e.type){case P.Seed:return Ga(e);case P.Seedless:return Za(e);case P.PrivateKey:return Hp(e);case P.Ledger:return Wp(e);case P.SeedVault:return $p(e);case P.ReadOnly:return e;case P.KMSVault:return Sl(e)}}n(wx,"toExternalVaultAccount");function Sl(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...x}=l,I=Object.values(Rt).reduce((M,k)=>{let O=g?g[k]:void 0;if(!O)throw new Si;return{...M,[k]:O}},{});f={...x,addresses:I};break}case _.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(Sl,"toExternalKMSVaultAccount");function Wp(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...x}=l,I=Object.values(Rt).reduce((M,k)=>{let O=g?g[k]:void 0;if(!O)throw new Si;return{...M,[k]:O}},{});f={...x,addresses:I};break}case _.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(Wp,"toExternalVaultLedgerAccount");function Hp(e){switch(e.chainType){case _.Solana:case _.EVM:{let{publicKey:t,version:r,...i}=e;return{...i,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,version:r,...i}=e,o=Object.values(Rt).reduce((a,l)=>{let f=t?t[l]:void 0;if(!f)throw new Si;return{...a,[l]:f}},{});return{...i,addresses:o}}case _.Sui:return e}}n(Hp,"toExternalVaultPrivateKeyAccount");function $p(e){let{publicKey:t,version:r,...i}=e;return{...i,address:t}}n($p,"toExternalSolanaSeedVaultAccount");function Ga(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...x}=l,I=Object.values(Rt).reduce((M,k)=>{let O=g?g[k]:void 0;if(!O)throw new Si;return{...M,[k]:O}},{});f={...x,addresses:I};break}case _.Sui:{f=l;break}}o[a]=f}return{...i,chains:o}}n(Ga,"toExternalVaultSeedAccount");function Za(e){let{chains:t,version:r,...i}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...x}=l;f={...x,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...x}=l,I=Object.values(Rt).reduce((M,k)=>{let O=g?g[k]:void 0;if(!O)throw new Si;return{...M,[k]:O}},{});f={...x,addresses:I};break}case _.Sui:f=l}o[a]=f}return{...i,chains:o}}n(Za,"toExternalVaultSeedlessAccount");function tk(e){return{addSeedWithDefaultAccount:n((t,r)=>Qb(e,t,r).then(Ga),"addSeedWithDefaultAccount"),addAccountForExistingSeed:n(t=>Bb(e,t).then(Ga),"addAccountForExistingSeed"),addSeedWithMultipleAccounts:n((t,r,i,o)=>hl(e,t,r,i,o).then(a=>a.map(Ga)),"addSeedWithMultipleAccounts"),addPrivateKeyAccount:n((t,r,i)=>Wb(e,t,r,i).then(Hp),"addPrivateKeyAccount"),addLedgerAccounts:n((t,r)=>qb(e,t,r).then(i=>i.map(Wp)),"addLedgerAccounts"),addSolanaSeedVaultAccounts:n(t=>Xb(e,t).then(r=>r.map($p)),"addSolanaSeedVaultAccounts"),addReadonlyAccount:n(t=>$b(e,t),"addReadonlyAccount"),addKMSVaultAccount:n(async({organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l})=>Tb(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a,apiEnvironment:l}).then(Sl),"addKMSVaultAccount"),upsertKMSVaultChains:n(async({organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a})=>Ib(e,{organizationId:t,walletId:r,tag:i,derivationIndex:o,chains:a}).then(Sl),"upsertKMSVaultChains"),deriveAddresses:n(()=>sx(e),"deriveAddresses"),removeAccount:n(t=>gx(e,t),"removeAccount"),reorderAccount:n((t,r)=>yx(e,t,r),"reorderAccount"),exportEntropy:n(t=>Gi(e,t),"exportEntropy"),exportPrivateKey:n((t,r)=>pl(e,t,r),"exportPrivateKey"),fetchAllAccounts:n(()=>dt(e).then(t=>t.map(wx)),"fetchAllAccounts"),fetchAllSeedMetas:n(()=>Ay(e),"fetchAllSeedMetas"),fetchAllSeedlessMetas:n(()=>du(e),"fetchAllSeedlessMetas"),sign:n((t,r)=>vx(e,t,r),"sign"),isExistingSeed:n(t=>Ns(e,t),"isExistingSeed"),checkVaultIntegrity:n(()=>ox(e),"checkVaultIntegrity"),clearVault:n(()=>Iy(e),"clearVault"),addSeedlessWithMultipleAccounts:n((t,r,i)=>dl(e,t,r,i).then(o=>o.map(Za)),"addSeedlessWithMultipleAccounts"),addSeedlessWithDefaultAccount:n((t,r)=>Jb(e,t,r).then(Za),"addSeedlessWithDefaultAccount"),addAccountForExistingSeedless:n(t=>Gb(e,t).then(Za),"addAccountForExistingSeedless"),getAuthenticationPublicKey:n(t=>hx(e,t),"getAuthenticationPublicKey"),getCashAddress:n(()=>mx(e),"getCashAddress"),getAgentAddress:n((t,r)=>dx(e,t,r),"getAgentAddress"),getKMSInstance:n(()=>$a(e),"getKMSInstance"),canDeriveKMSAuthenticator:n(async()=>{let t=await dt(e);return!!xl(t)},"canDeriveKMSAuthenticator")}}n(tk,"createVault");d();h();var El=he(Pt());d();h();var gn=n(()=>({isReady:!0,value:nm(qo)}),"useChainAvailability");d();h();var Gp=n(()=>{let e=_e();return Ae({mutationFn:n(async({addressTypes:r})=>{for(let i of r)await lm(i);wi(e)},"mutationFn")})},"useDisableAddressTypes");d();h();var rk=n(()=>{let e=_e();return Ae({mutationFn:n(async({chainIDs:r})=>{await am(r),wi(e)},"mutationFn")})},"useDisableChains");d();h();var Zp=n(()=>{let e=_e(),{deriveAddresses:t}=gc();return Ae({mutationFn:n(async({addressTypes:i})=>{for(let o of i)await um(o);await t(),await wi(e)},"mutationFn")})},"useEnableAddressTypes");d();h();var nk=n(()=>{let e=_e(),{deriveAddresses:t}=gc();return Ae({mutationFn:n(async({chainIDs:i})=>{await sm(i),await t(),await wi(e)},"mutationFn")})},"useEnableChains");d();h();var ik=n(()=>{let{mutateAsync:e}=Gp(),{mutateAsync:t}=Zp();return Ae({mutationFn:n(async({addressTypes:i})=>{if(await cm())await t({addressTypes:i});else{let a=new Set(pe.bitcoin.addressTypes);for(let l of i)a.delete(l);if(a.size===pe.bitcoin.addressTypes.length&&a.delete(_.BitcoinNativeSegwit),a.size>0){let l=Array.from(a);await e({addressTypes:l})}}},"mutationFn")})},"useUpdateVisibleBitcoinAddressTypes");var Jp=pe.getAllChainIDs().filter(e=>pe.isChainDefaultEnabled(e)),bx=Jp.map(e=>pe.getMainnetNetworkID(e)),ok=bx.flatMap(e=>pe.getAddressTypes(e)),xx=n(()=>gn().value?.enabledAddressTypes??ok,"useEnabledAddressTypes"),qs=n(()=>gn().value?.enabledChainIDs??Jp,"useEnabledChains"),loe=n(()=>gn().value?.supportedChainIDs??Jp,"useAllChains"),foe=n(e=>{let t=gn().value;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:bx},"useEnabledNetworkIDs"),doe=n(()=>qs().length===1,"useIsSingleChainEnabled"),hoe=n(()=>{let e=qs();return(0,El.useMemo)(()=>pe.getChainIDs(_.EVM).some(t=>e.includes(t)),[e])},"useIsEvmChainEnabled"),poe=n(()=>{let e=qs();return(0,El.useMemo)(()=>e.length===1&&e.includes(dr.Solana),[e])},"useIsSolanaOnlyEnabled"),moe=n(e=>{let t=qs();return(0,El.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])},"useIsEnabledChains");d();h();d();h();d();h();var zs=n(async e=>{let t=await e.get(et.NetworkSetting);if(!t)return Xs();let r=sk(t);return ak(e,r)},"getMultiChainNetworkSetting");function sk(e){let t={...e,setting:{...e.setting}};return t.setting[_.Sui]||(t.setting[_.Sui]=Xs().setting[_.Sui]),t}n(sk,"ensureChainSetting");var ak=n(async(e,t)=>{let r=!1;ck(t)&&(r=!0);let i=t.setting[_.Solana];i&&pe.isMainnetNetworkID(i)&&(t.setting[_.Solana]=$o,r=!0);let o=t.setting[_.EVM];return o&&pe.isMainnetNetworkID(o)&&(t.setting[_.EVM]=Go,r=!0),r&&await e.set(et.NetworkSetting,t),t},"overrideMainnetNetworksIfNeeded"),ck=n(e=>{let t=!1,r=e.setting[_.EVM];return r&&(r.toString()==="eip155:5"&&(e.setting[_.EVM]=tn.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting[_.EVM]=tn.Polygon.Amoy,t=!0)),t},"migrateDeprecatedTestnets");var Qp=n(async(e,t,r)=>{let i=await e.fetchAllAccounts();if(i.length===0)return[];let o=nr()===Ct.Production?"production":"staging",a=i.filter(k=>k.type===P.KMSVault?!k.apiEnvironment||k.apiEnvironment===o:!0),l=t.get(et.DeveloperMode),f=zs(t),g=Ig(t),[x,I,M]=await Promise.all([l,f,g]);return a.map(k=>{let O=M[k.identifier];O||(O={name:wn.t("onboardingImportAccountsAccountName",{walletIndex:""})});let C={name:O.name,icon:O.icon,identifier:k.identifier,addresses:Zc(k,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,I,x?.isDeveloperMode??!1)};return k.type===P.Seed?{...C,type:P.Seed,seedIdentifier:k.seedIdentifier,isReadOnly:!1}:k.type===P.Seedless?{...C,type:P.Seedless,seedIdentifier:k.seedIdentifier,isReadOnly:!1}:k.type===P.ReadOnly?{...C,type:P.ReadOnly,isReadOnly:!0}:k.type===P.PrivateKey?{...C,privateKeyIdentifier:k.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...C,type:k.type,isReadOnly:!1}})},"getAllMultiChainAccounts");function Ws(e){let{isReady:t,value:r}=gn(),i=vt(),o=tt.allAccounts(r),a=rt();return ht({enabled:t,queryKey:o,queryFn:n(async()=>{if(!r)throw new Error(va);let f=await Qp(i,a,r);return G.addBreadcrumb(H.Account,`Finished fetching all accounts. Num accounts: ${f.length}`,X.Info),f},"queryFn"),select:e})}n(Ws,"useAllMultiChainAccountsQuery");var Ml=n(()=>{let{isSuccess:e,isFetching:t,data:r=[]}=Ws(),i=e&&!t&&!!r.length;return i?{enabled:i,accounts:r}:{enabled:i}},"useAllMultiChainAccounts");d();h();d();h();function Yp(){let e=rt(),t=_e();return Ae({mutationFn:n(async({metadataBatch:a})=>{G.addBreadcrumb(H.Account,`Adding Account Metadata Batch: ${Object.entries(a).length} entries`,X.Info),await Sg(e,a)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess"),onError:n(a=>{G.captureError(a,H.Account)},"onError")})}n(Yp,"useAddAccountMetadataBatch");function uk(){let{mutateAsync:e}=Yp(),t=rt(),r=_e(),i=vt(),{t:o}=bi();return Ae({mutationFn:n(async({accounts:g,pairedBLEDevice:x})=>{let I=k0(),M=await i.connectLedgerAccounts(I,g),k=M.reduce((C,R,j)=>{let{name:F,accountIndex:Y}=g[j],L;!F||F.length===0?L=o("onboardingImportAccountsLedgerAccountName",{walletIndex:1+Y}):L=F;let ce;x&&(ce=[{...x,version:1,connectionType:Ho.BLE,deviceType:Wo.Ledger}]);let te={name:L,icon:void 0,connectedDevices:ce};return C[R.identifier]=te,C},{});await e({metadataBatch:k});let O=M[0]?.identifier;return O||(O=(await i.fetchAllAccounts())[0].identifier),await Pr(t,O),r.setQueryData(tt.selectedAccountIdentifier(),O),M},"mutationFn"),onSettled:n(async()=>{await ut(r)},"onSettled"),onError:n(g=>G.captureError(g,H.Account),"onError")})}n(uk,"useConnectLedgerAccounts");d();h();d();h();var Yi=n(async(e,t)=>{if(e.length===0)throw new Error(ls);let r=await Ff(t),i=e.find(o=>o.identifier===r);return i||(await Pr(t,e[0].identifier),e[0])},"getSelectedAccountFromStorage");function Ar({select:e}={}){let{isReady:t,value:r}=gn(),i=Ml(),o=i.enabled&&t,a=rt(),l=Sf(),f=tt.selectedAccount(r);return ht({queryKey:f,queryFn:n(async()=>{try{if(!r)throw new Error(va);if(!i.enabled)throw new Error(ls);let x=await Yi(i.accounts,a);return G.addBreadcrumb(H.Account,`Finished fetching selected account: ${x.identifier}`,X.Info),l.identifyAccount(i.accounts,x,r),x}catch(x){throw x instanceof Error&&G.captureError(x,H.Account),x}},"queryFn"),enabled:o,select:e})}n(Ar,"useSelectedMultiChainAccount");d();h();var Hs=he(Pt());var Ax=(0,Hs.createContext)(null);function lk({children:e,userRepository:t}){return Hs.default.createElement(Ax.Provider,{value:{userRepository:t}},e)}n(lk,"UserProvider");function fk(){let e=(0,Hs.useContext)(Ax);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}n(fk,"useUserContext");function Sr(){return fk().userRepository}n(Sr,"useUserRepository");d();h();d();h();d();h();var Ja=n(e=>`/user/v1/users/${e}/profile`,"userProfileByUserIdEndpoint"),Tl=n(e=>`/user/v1/profiles/${e}`,"userProfileByUsernameOrUserProfileIdEndpoint"),Sx=n(()=>"/user/v1/profiles/creation-check","userEligibleToClaimEndpoint");d();h();d();h();var Xi;(function(e){e.PUBLIC="public",e.PRIVATE="private",e.INVISIBLE="invisible",e.HIDDEN="hidden"})(Xi||(Xi={}));var dk=Object.values(Xi),Tx=p.string().brand("ProfileId"),Qa=p.object({id:Tx,username:p.string(),icon:p.string().nullish(),addresses:p.record(p.string(),p.string()),privacyState:p.nativeEnum(Xi).optional().default(Xi.PUBLIC),biography:p.string().nullish(),phantomJoinDate:p.string().nullish()}),Xp=p.string().url().brand("ActorId"),hk=p.object({id:p.string().optional(),orderedItems:Xp.array(),next:p.string().optional()}),Ex=p.object({id:p.string().url(),current:hk.optional(),totalItems:p.number().optional()}),Mx=p.object({type:p.string(),value:p.string().optional(),name:p.string().optional()}),pk=p.object({id:p.string().url().optional(),name:p.string().optional(),type:p.string()}),mk=p.object({id:Xp,name:p.string(),preferredUsername:p.string(),manuallyApprovesFollowers:p.boolean(),followers:p.union([Ex,p.string().url()]),following:p.union([Ex,p.string().url()]),icon:pk.nullish(),attachment:p.union([Mx,p.array(Mx)]).optional(),summary:p.string().nullish(),published:p.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,i={},o=!1,a=!1,l=!1,f=!1,g=!1,x=!0;if(t){let I=Array.isArray(t)?t:[t];for(let M of I)if(!(!M.name||!M.value)){if(M.name.endsWith(":address")){let k=V0.safeParse(M.name.replace(":address",""));if(k.success){let O=k.data;i[O]=M.value}}M.name==="requesting"&&(o=M.value==="true"),M.name==="requestedBy"&&(a=M.value==="true"),M.name==="blocking"&&(l=M.value==="true"),M.name==="following"&&(f=M.value==="true"),M.name==="followedBy"&&(g=M.value==="true"),M.name==="notificationsEnabled"&&(x=M.value==="true")}}return{...r,addresses:i,isSentFollowRequestPending:o,hasPendingFollowRequest:a,isBlocking:l,isFollowing:f,isFollowedBy:g,areNotificationsEnabled:x}}),gk={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},yk=p.object({type:p.nativeEnum(gk),imageUrl:p.string().optional(),unicode:p.string().optional()}),e0=p.object({error:p.object({message:p.string()})});var t0=n(async e=>{let t=await yt.api().get(Tl(e)),r=Qa.safeParse(t.data);return r.success?r.data:null},"getUserProfileByUsernameOrUserProfileId");var vk=n(e=>({getUsernameAvailability:n(t=>wk(t),"getUsernameAvailability"),getUserProfile:n(()=>bk(e),"getUserProfile"),getUserProfileByUsername:n(t=>t0(t),"getUserProfileByUsername"),getUserProfileByUsernameOrUserProfileId:n(t=>t0(t),"getUserProfileByUsernameOrUserProfileId"),setUserProfile:n(({username:t,addresses:r,icon:i,privacyState:o})=>xk(e,{username:t,addresses:r,icon:i,privacyState:o}),"setUserProfile"),patchUserProfile:n(t=>Ak(e,t),"patchUserProfile"),deleteUserProfile:n(()=>Sk(e),"deleteUserProfile"),isEligibleToClaim:n(t=>Ek(t),"isEligibleToClaim")}),"createUserRepository"),wk=n(async e=>{switch((await yt.api().get(Tl(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},"getUsernameAvailability"),bk=n(async({authRepository:e})=>{let t=await e.getUser({skipAutoLogin:!0});if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:i}=t,o=await yt.api().bearer(i).get(Ja(r)),a=Qa.safeParse(o.data);return a.success?a.data:null},"getUserProfile"),xk=n(async({authRepository:e},{username:t,addresses:r,icon:i,privacyState:o})=>{let a=await e.getUser();if(!a)throw new Error("User is not logged in, unable to claim username.");let{userID:l,accessToken:f}=a,g=await yt.api().bearer(f).post(Ja(l),{username:t,icon:i,addresses:r,privacyState:o});if(g.status===201){let M=Qa.safeParse(g.data);if(M.success)return M.data;throw new Error("Failed to parse created profile")}let x=e0.safeParse(g.data);throw x.success?new Error(x.data.error.message):new Error("Unknown error")},"setUserProfile"),Ak=n(async({authRepository:e},{username:t,addresses:r,icon:i,privacyState:o,biography:a})=>{let l=await e.getUser();if(!l)throw new Error("User is not logged in, unable to claim username.");let{userID:f,accessToken:g}=l,x=await yt.api().bearer(g).patch(Ja(f),{username:t,addresses:r,icon:i,privacyState:o,biography:a});if(x.status===200)return;G.captureMessage(`Failed to patch user profile: ${x.status} ${JSON.stringify(x.data)}`,H.Auth);let I=e0.safeParse(x.data);throw I.success?new Error(I.data.error.message):new Error("Unknown error")},"patchUserProfile"),Sk=n(async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:i}=t,o=await yt.api().bearer(i).delete(Ja(r));return 200<=o.status&&o.status<300},"deleteUserProfile"),Ek=n(async e=>{try{return(await yt.api().post(Sx(),{addresses:e})).status===200}catch{return!1}},"isEligibleToClaim");d();h();var r0="@phantom/users",er={checkUsernameAvailability(e){return["user",`${r0}:check-username-availability`,{username:e}]},userProfile(){return["user",`${r0}:user-profile`]},userProfileAttributeEffect(e){return["user",`${r0}:user-profile-attribute-effect`,{username:e}]}};d();h();var Mk=new Set([er.userProfile()[1]]),Tk=n(e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:Mk.has(t)},"userShouldDehydrateQueryPredicate");d();h();d();h();d();h();function Il(e,t){let r=new WeakMap;return()=>{let i=e();if(i===void 0)return;let o=r.get(i);return o===void 0&&(o=t(i),r.set(i,o)),o}}n(Il,"createUseDerivedContext");var _l=Il($t,e=>new n0(e)),n0=class{static{n(this,"ClaimUsernameAnalytics")}#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};d();h();var i0=n(async e=>{await e.removeQueries({queryKey:er.userProfile()})},"removeUserProfile"),o0=n(async e=>{await e.resetQueries({queryKey:er.userProfile()})},"resetUserProfile"),Uo=n(async e=>{await e.invalidateQueries({queryKey:er.userProfile()})},"invalidateUserProfile");function Ik(){let e=_l(),t=Ir(),r=Sr(),i=_e(),o=n(async({username:a,addresses:l,icon:f})=>{G.addBreadcrumb(H.Auth,`Claiming Username: ${a}.`,X.Debug);let g=await t.getUser();if(!g)throw new Error("Unable to claim username. User not authenticated.");G.addBreadcrumb(H.Auth,"Creating user profile to claim username",X.Debug);let x=await r.setUserProfile({username:a,addresses:l,icon:f,privacyState:Xi.PUBLIC});return G.addBreadcrumb(H.Auth,"\u2705 Username Claimed!",X.Debug),await Af(i),await o0(i),await lo(i),await Uo(i),await ni(i),e.onClaimFlowComplete(a,g.userID),x},"mutationFn");return Ae({mutationFn:n(async a=>{try{return await o(a)}catch(l){G.addBreadcrumb(H.Auth,"Could not claim username",X.Error);let f;throw l instanceof Error?f=l:f=new Error("Unable to claim username"),G.captureError(f,H.Auth),f}},"mutationFn")})}n(Ik,"useClaimUsername");d();h();function _k(e,t){let r=_l(),i=Sr(),o=er.checkUsernameAvailability(e),a=n(async()=>{if(!e)return!1;let f=await i.getUsernameAvailability(e);return r.onCheckAvailability(e,f),f},"queryFn"),l=t?.enabled??!!e.trim();return ht({enabled:l,queryKey:o,queryFn:a})}n(_k,"useCheckUsernameAvailability");d();h();d();h();var Ya=class extends Error{static{n(this,"NoUserProfileError")}constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},s0=class extends Error{static{n(this,"MissingRequiredUsernameClaimParamsError")}constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var kk=xi({days:1}),Pk=xi({minutes:1});function a0(e){let t=Sr(),r=pa(),i=e?.enabled!==void 0?e.enabled:r,o=er.userProfile();return ht({enabled:i,queryKey:o,queryFn:n(async()=>{let l=await t.getUserProfile();if(!l)throw new Ya;return l},"queryFn"),gcTime:kk,staleTime:Pk})}n(a0,"useUserProfile");d();h();var Bk=n(()=>{let e=_e(),t=Ir(),r=Sr();return Ae({mutationFn:n(async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await i0(e),await xf(e),await Uo(e),await lo(e),await ni(e)},"mutationFn")})},"useDeleteUserProfile");d();h();var c0=n(()=>{let e=_e(),t=Sr(),r=n(async i=>{await t.patchUserProfile(i),await Uo(e)},"mutationFn");return Ae({mutationFn:n(async i=>{try{return await r(i)}catch(o){G.addBreadcrumb(H.Auth,`Could not update user profile: ${JSON.stringify(i)}`,X.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not update user profile!"),G.captureError(a,H.Auth),a}},"mutationFn"),onMutate:n(async i=>{let o=er.userProfile();await e.cancelQueries({queryKey:o});let a=e.getQueryData(o);return e.setQueryData(o,{...a,...i}),{previousData:a}},"onMutate"),onSuccess:n((i,o)=>{let a=er.userProfile(),l=e.getQueryData(a);if(l){let f={...l,...o};e.setQueryData(a,f)}},"onSuccess"),onError:n((i,o,a)=>{a&&e.setQueryData(er.userProfile(),a.previousData)},"onError")})},"usePatchUserProfile");d();h();var Kk=Il($t,e=>new kl(e)),kl=class{static{n(this,"ManageUserProfileAnalytics")}#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};d();h();var Ix=he(Pt());var Ok=n(e=>{let t=(0,Ix.useMemo)(()=>{if(e){if(Ck(e))return i=>i.address===e.address&&i.networkID===e.networkID;if(pe.isNetworkID(e))return i=>i.networkID===e;if(G0(e))return i=>i.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return Ar({select:n(i=>{let o=i.addresses.filter(t);if(o.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return o[0]},"select")})},"useSelectedChainAddress");function Ck(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}n(Ck,"isAddressNetworkIDFilter");d();h();d();h();d();h();var _x=n(async(e,t)=>(await Eg(e,t))?.balance,"getAccountBalance"),kx=n(async e=>await Tg(e),"getAllAccountBalances");var Rk=n((e,t=!0)=>{let r=rt(),i=t&&!!e,o=tt.accountBalance(e||"");return ht({queryKey:o,queryFn:n(async()=>{try{return e&&await _x(r,e)||null}catch(l){throw l instanceof Error&&G.captureError(l,H.Account),l}},"queryFn"),enabled:i})},"useAccountBalance"),Uk=n((e=!0)=>{let t=rt(),r=tt.allAccountBalances();return ht({queryKey:r,queryFn:n(async()=>{try{return await kx(t)}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn"),enabled:e})},"useAllAccountBalances");d();h();function Nk(e){let t=Ml(),r=t.enabled&&e.length>0,i=tt.accountIdentifier(e);return ht({enabled:r,queryKey:i,queryFn:n(async()=>{try{if(G.addBreadcrumb(H.Account,`Fetching Account: ${e}`,X.Info),!t.enabled)throw new Error(ls);let{accounts:a}=t,l=a.find(f=>f.identifier===e);if(!l)throw new Error(Bg(a.length,e));return l}catch(a){throw a instanceof Error&&G.captureError(a,H.Account),a}},"queryFn")})}n(Nk,"useAccountWithIdentifier");d();h();function Dk(){let e=rt(),t=_e(),r=vt();return Ae({mutationFn:n(async({name:f,addresses:g,icon:x})=>{let I=await r.addReadonlyAccount(g),M={name:f,icon:x};return await ki(e,I.identifier,M),await Pr(e,I.identifier),I},"mutationFn"),onSettled:n(async()=>{await ut(t)},"onSettled"),onSuccess:n(f=>{t.setQueryData(tt.selectedAccountIdentifier(),f.identifier)},"onSuccess"),onError:n(f=>G.captureError(f,H.Account),"onError")})}n(Dk,"useAddReadOnlyAccount");d();h();function Lk(){let{t:e}=bi(),t=rt(),r=_e(),i=$t(),{fetchAllAccounts:o,addAccountForSeed:a,addAccountForSeedless:l,fetchAllSeedlessMetas:f}=vt();return Ae({mutationFn:n(async({name:k,icon:O,seedIdentifier:C})=>{G.addBreadcrumb(H.Account,`Adding new account for s**d: ${C}`,X.Info);let j=(await f()).find(L=>L.identifier===C),F=j?await l(C):await a(C);await ki(t,F.identifier,{name:k||e("onboardingImportAccountsAccountName",{walletIndex:(await o()).length}),icon:O}),await Pr(t,F.identifier);let Y=ii(F);return i.capture("addSeedAccount",{data:{seedIdentifier:C,accountType:j?"seedless":"seed",walletAddresses:Y}}),F},"mutationFn"),onSettled:n(async()=>{await ut(r)},"onSettled"),onSuccess:n(k=>{r.setQueryData(tt.selectedAccountIdentifier(),k.identifier)},"onSuccess"),onError:n(k=>G.captureError(k,H.Account),"onError")})}n(Lk,"useAddSeedAccount");d();h();function Pl(e){let t=vt(),r=tt.allSeeds(e);return ht({queryKey:r,queryFn:n(async()=>{try{let o;switch(e){case"all":{let a=await t.fetchAllSeedMetas();o=[...await t.fetchAllSeedlessMetas(),...a];break}case"local-only":{o=[...await t.fetchAllSeedMetas()];break}case"recoverable-only":{o=[...await t.fetchAllSeedlessMetas()];break}}return o}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn")})}n(Pl,"useAllSeeds");d();h();function u0(){let e=rt();return ht(Px(e))}n(u0,"useDeveloperMode");function Px(e){return{queryKey:tt.developerMode(),queryFn:n(async()=>await e.get(et.DeveloperMode)||Gl,"queryFn")}}n(Px,"developerModeQuery");d();h();function Vk(){let e=rt(),t=_e(),r=vt();return Ae({mutationFn:n(async({chainType:l,privateKey:f,name:g,icon:x})=>{G.addBreadcrumb(H.Account,"Importing Private Key Account... \u23F3",X.Info);let I=await r.importPrivateKeyAccount(l,f),M={name:g,icon:x};return await ki(e,I.identifier,M),await Pr(e,I.identifier),G.addBreadcrumb(H.Account,`Imported Private Key Account \u2705: ${I.identifier}`,X.Info),I},"mutationFn"),onSettled:n(async()=>{await ut(t)},"onSettled"),onSuccess:n(l=>{t.setQueryData(tt.selectedAccountIdentifier(),l.identifier)},"onSuccess")})}n(Vk,"useImportPrivateKeyAccount");d();h();function Fk(){let e=tt.selectedNetworkSetting(),t=rt();return ht({queryKey:e,queryFn:n(()=>zs(t),"queryFn")})}n(Fk,"useMultiChainNetworkSetting");d();h();function jk(){let e=rt(),t=$t(),r=vt(),i=_e();return Ae({mutationFn:n(async({identifier:l})=>{G.addBreadcrumb(H.Account,`Removing Account... \u23F3: ${l}`,X.Info);let g=(await r.fetchAllAccounts()).find(I=>I.identifier===l),x=ii(g);await Promise.all([r.removeAccount(l),Gc(e,l)]),await Yi(await r.fetchAllAccounts(),e),t.capture("removeAccount",{data:{walletAddresses:x}}),G.addBreadcrumb(H.Account,`Removed Account \u2705: ${l}`,X.Info)},"mutationFn"),onSuccess:n(async()=>{await ut(i)},"onSuccess")})}n(jk,"useRemoveAccount");d();h();function qk(){let e=rt(),t=$t(),r=_e(),i=vt();return Ae({mutationFn:n(async({seedIdentifier:f})=>{let g=await i.fetchAllAccounts(),x=[];for(let M of g)switch(M.type){case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:continue;case P.Seed:case P.Seedless:M.seedIdentifier===f&&x.push(M);break;default:xe(M)}let I=x.flatMap(M=>ii(M));for(let M of x)await Promise.all([i.removeAccount(M.identifier),Gc(e,M.identifier)]);t.capture("removeSeed",{data:{numOfAccounts:x.length,walletAddresses:I}})},"mutationFn"),onSuccess:n(()=>{ut(r)},"onSuccess"),onError:n(f=>{G.captureError(f,H.Account)},"onError")})}n(qk,"useRemoveMultiChainSeed");d();h();function zk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:a,name:l})=>{G.addBreadcrumb(H.Account,"Renaming Multichain Account",X.Info),await bg(e,a,l)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess"),onError:n(a=>G.captureError(a,H.Account),"onError")})}n(zk,"useRenameMultiChainAccount");d();h();function Wk(){let e=_e(),t=vt();return Ae({mutationFn:n(async({identifier:o,toIndex:a})=>{await t.reorderAccount(o,a)},"mutationFn"),onSuccess:n(()=>{ut(e)},"onSuccess")})}n(Wk,"useReorderMultiChainAccount");d();h();function Hk(){let e=tt.selectedAccountIdentifier(),t=rt(),r=vt();return ht({queryKey:e,queryFn:n(async()=>{try{let o=await r.fetchAllAccounts(),l=(await Yi(o,t)).identifier;if(!l)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return l}catch(o){throw o instanceof Error&&G.captureError(o,H.Account),o}},"queryFn")})}n(Hk,"useSelectedAccountIdentifier");d();h();function $k(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:o,balance:a})=>(await Ag(e,o,a),{identifier:o,balance:a}),"mutationFn"),onSuccess:n(({identifier:o,balance:a})=>{o&&t.invalidateQueries({queryKey:tt.accountBalance(o)}),a&&t.invalidateQueries({queryKey:tt.allAccountBalances()})},"onSuccess")})}n($k,"useSetAccountBalance");d();h();function Gk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({developerMode:o})=>{t.setQueryData(tt.developerMode(),o),await e.set(et.DeveloperMode,o)},"mutationFn"),onSuccess:n(()=>{ut(t)},"onSuccess")})}n(Gk,"useSetDeveloperMode");d();h();function Zk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({identifier:o,icon:a})=>{G.addBreadcrumb(H.Account,"Setting Multichain Account Icon",X.Info),await xg(e,o,a)},"mutationFn"),onSuccess:n(async()=>{await ut(t)},"onSuccess")})}n(Zk,"useSetMultiChainAccountIcon");d();h();function Jk(){let e=rt(),t=_e();return Ae({mutationFn:n(async({networkSetting:o})=>{t.setQueryData(tt.selectedNetworkSetting(),o),await e.set(et.NetworkSetting,o)},"mutationFn"),onSuccess:n(()=>{ut(t)},"onSuccess")})}n(Jk,"useSetMultiChainNetworkSetting");d();h();function Qk(){let e=rt(),t=$t(),r=_e(),i=vt();return Ae({mutationFn:n(async({identifier:f})=>{await Pr(e,f);let x=(await i.fetchAllAccounts()).find(M=>M.identifier===f),I=x?ii(x):[];return t.capture("changeAccount",{data:{identifier:f,walletAddresses:I}}),f},"mutationFn"),onSuccess:n(f=>{bc(r),r.setQueryData(tt.selectedAccountIdentifier(),f)},"onSuccess"),onError:n(f=>G.captureError(f,H.Account),"onError")})}n(Qk,"useSetSelectedMultiChainAccountIdentifier");d();h();var Kx=he(Pt());d();h();var Bx=he(Pt());var Xa=n(()=>{let{data:e}=Ar();return(0,Bx.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])},"useSelectedNetworks");var Yk=n(()=>{let{data:e,isFetching:t}=Ws(),{data:r,isFetching:i}=Ar(),o=Xa();return(0,Kx.useMemo)(()=>({data:{"All Accounts":Wl(e),"Selected Account":Wl(r),"Selected Networks":o.map(a=>pe.getNetworkName(a))},isFetching:t||i}),[e,t,i,r,o])},"useAccountsExport");d();h();var Ox=he(Pt());var Xk=n((e=[])=>{let t=qs();return(0,Ox.useMemo)(()=>e.filter(r=>{let i=pe.getParentChain(r.networkID);return i?t.includes(i):!1}),[e,t])},"useAdditionalNetworks");d();h();var i1=he(_1()),Ll=he(Pt());d();h();var xt=he(Pt(),1);var nc=n(e=>e.type==="checkbox","isCheckBoxInput"),Gs=n(e=>e instanceof Date,"isDateObject"),fr=n(e=>e==null,"isNullOrUndefined"),zx=n(e=>typeof e=="object","isObjectType"),qt=n(e=>!fr(e)&&!Array.isArray(e)&&zx(e)&&!Gs(e),"isObject"),Wx=n(e=>qt(e)&&e.target?nc(e.target)?e.target.checked:e.target.value:e,"getEventValue"),e3=n(e=>e.substring(0,e.search(/.\d/))||e,"getNodeParentName"),Hx=n((e,t)=>[...e].some(r=>e3(t)===r),"isNameInFieldArray"),Ul=n(e=>e.filter(Boolean),"compact"),_t=n(e=>e===void 0,"isUndefined"),le=n((e,t,r)=>{if(!t||!qt(e))return r;let i=Ul(t.split(/[,[\].]+?/)).reduce((o,a)=>fr(o)?o:o[a],e);return _t(i)||i===e?_t(e[t])?r:e[t]:i},"get"),h0={BLUR:"blur",CHANGE:"change"},yn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},g0=n((e,t)=>{let r=Object.assign({},e);return delete r[t],r},"omit"),t3=xt.default.createContext(null),y0=n(()=>xt.default.useContext(t3),"useFormContext");var $x=n((e,t,r,i=!0)=>{function o(l){return()=>{if(l in e)return t[l]!==yn.all&&(t[l]=!i||yn.all),r&&(r[l]=!0),e[l]}}n(o,"createGetter");let a={};for(let l in e)Object.defineProperty(a,l,{get:o(l)});return a},"getProxyFormState"),Er=n(e=>qt(e)&&!Object.keys(e).length,"isEmptyObject"),Gx=n((e,t,r)=>{let i=g0(e,"name");return Er(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||yn.all))},"shouldRenderFormState"),Bl=n(e=>Array.isArray(e)?e:[e],"convertToArrayPayload"),Zx=n((e,t,r)=>r&&t?e===t:!e||!t||e===t||Bl(e).some(i=>i&&(i.startsWith(t)||t.startsWith(i))),"shouldSubscribeByName");function v0(e){let t=xt.default.useRef(e);t.current=e,xt.default.useEffect(()=>{let r=n(o=>{o&&o.unsubscribe()},"tearDown"),i=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(i)},[e.disabled])}n(v0,"useSubscribe");function r3(e){let t=y0(),{control:r=t.control,disabled:i,name:o,exact:a}=e||{},[l,f]=xt.default.useState(r._formState),g=xt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),x=xt.default.useRef(o),I=xt.default.useRef(!0);x.current=o;let M=xt.default.useCallback(k=>I.current&&Zx(x.current,k.name,a)&&Gx(k,g.current)&&f(Object.assign(Object.assign({},r._formState),k)),[r,a]);return v0({disabled:i,callback:M,subject:r._subjects.state}),xt.default.useEffect(()=>()=>{I.current=!1},[]),$x(l,r._proxyFormState,g.current,!1)}n(r3,"useFormState");var Dn=n(e=>typeof e=="string","isString"),Jx=n((e,t,r,i)=>{let o=Array.isArray(e);return Dn(e)?(i&&t.watch.add(e),le(r,e)):o?e.map(a=>(i&&t.watch.add(a),le(r,a))):(i&&(t.watchAll=!0),r)},"generateWatchOutput"),Nl=n(e=>typeof e=="function","isFunction"),w0=n(e=>{for(let t in e)if(Nl(e[t]))return!0;return!1},"objectHasFunction");function n3(e){let t=y0(),{control:r=t.control,name:i,defaultValue:o,disabled:a,exact:l}=e||{},f=xt.default.useRef(i);f.current=i;let g=xt.default.useCallback(M=>{if(Zx(f.current,M.name,l)){let k=Jx(f.current,r._names,M.values||r._formValues);I(_t(f.current)||qt(k)&&!w0(k)?Object.assign({},k):Array.isArray(k)?[...k]:_t(k)?o:k)}},[r,l,o]);v0({disabled:a,subject:r._subjects.watch,callback:g});let[x,I]=xt.default.useState(_t(o)?r._getWatch(i):o);return xt.default.useEffect(()=>{r._removeUnmounted()}),x}n(n3,"useWatch");function i3(e){let t=y0(),{name:r,control:i=t.control,shouldUnregister:o}=e,a=Hx(i._names.array,r),l=n3({control:i,name:r,defaultValue:le(i._formValues,r,le(i._defaultValues,r,e.defaultValue)),exact:!a}),f=r3({control:i,name:r}),g=xt.default.useRef(i.register(r,Object.assign(Object.assign({},e.rules),{value:l})));return xt.default.useEffect(()=>{let x=n((I,M)=>{let k=le(i._fields,I);k&&(k._f.mount=M)},"updateMounted");return x(r,!0),()=>{let I=i._options.shouldUnregister||o;a?I&&i._stateFlags.action:I?i.unregister(r):x(r,!1)}},[r,i,a,o]),{field:{name:r,value:l,onChange:xt.default.useCallback(x=>{g.current.onChange({target:{value:Wx(x),name:r},type:h0.CHANGE})},[r]),onBlur:xt.default.useCallback(()=>{g.current.onBlur({target:{value:le(i._formValues,r),name:r},type:h0.BLUR})},[r,i]),ref:xt.default.useCallback(x=>{let I=le(i._fields,r);x&&I&&x.focus&&(I._f.ref={focus:n(()=>x.focus(),"focus"),setCustomValidity:n(M=>x.setCustomValidity(M),"setCustomValidity"),reportValidity:n(()=>x.reportValidity(),"reportValidity")})},[r,i])},formState:f,fieldState:{invalid:!!le(f.errors,r),isDirty:!!le(f.dirtyFields,r),isTouched:!!le(f.touchedFields,r),error:le(f.errors,r)}}}n(i3,"useController");var Qx=n(e=>e.render(i3(e)),"Controller"),o3=n((e,t,r,i,o)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[i]:o||!0})}):{},"appendErrors"),b0=n(e=>/^\w*$/.test(e),"isKey"),Yx=n(e=>Ul(e.replace(/["|']|\]/g,"").split(/\.|\[/)),"stringToPath");function kt(e,t,r){let i=-1,o=b0(t)?[t]:Yx(t),a=o.length,l=a-1;for(;++i<a;){let f=o[i],g=r;if(i!==l){let x=e[f];g=qt(x)||Array.isArray(x)?x:isNaN(+o[i+1])?{}:[]}e[f]=g,e=e[f]}return e}n(kt,"set");var p0=n((e,t,r)=>{for(let i of r||Object.keys(e)){let o=le(e,i);if(o){let a=o._f,l=g0(o,"_f");if(a&&t(a.name)){if(a.ref.focus&&_t(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else qt(l)&&p0(l,t)}}},"focusFieldBy");var Cx=n((e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length)))),"isWatched");function tc(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||qt(e)){t=r?[]:{};for(let i in e){if(Nl(e[i])){t=e;break}t[i]=tc(e[i])}}else return e;return t}n(tc,"cloneObject");function l0(){let e=[];return{get observers(){return e},next:n(o=>{for(let a of e)a.next(o)},"next"),subscribe:n(o=>(e.push(o),{unsubscribe:n(()=>{e=e.filter(a=>a!==o)},"unsubscribe")}),"subscribe"),unsubscribe:n(()=>{e=[]},"unsubscribe")}}n(l0,"createSubject");var Ol=n(e=>fr(e)||!zx(e),"isPrimitive");function Zs(e,t){if(Ol(e)||Ol(t))return e===t;if(Gs(e)&&Gs(t))return e.getTime()===t.getTime();let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let o of r){let a=e[o];if(!i.includes(o))return!1;if(o!=="ref"){let l=t[o];if(Gs(a)&&Gs(l)||qt(a)&&qt(l)||Array.isArray(a)&&Array.isArray(l)?!Zs(a,l):a!==l)return!1}}return!0}n(Zs,"deepEqual");var Rx=n(e=>({isOnSubmit:!e||e===yn.onSubmit,isOnBlur:e===yn.onBlur,isOnChange:e===yn.onChange,isOnAll:e===yn.all,isOnTouch:e===yn.onTouched}),"getValidationModes"),rc=n(e=>typeof e=="boolean","isBoolean"),x0=n(e=>e.type==="file","isFileInput"),m0=n(e=>e instanceof HTMLElement,"isHTMLElement"),Xx=n(e=>e.type==="select-multiple","isMultipleSelect"),A0=n(e=>e.type==="radio","isRadioInput"),s3=n(e=>A0(e)||nc(e),"isRadioOrCheckbox"),Ux=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",f0=n(e=>m0(e)&&e.isConnected,"live");function a3(e,t){let r=t.slice(0,-1).length,i=0;for(;i<r;)e=_t(e)?i++:e[t[i++]];return e}n(a3,"baseGet");function tr(e,t){let r=b0(t)?[t]:Yx(t),i=r.length==1?e:a3(e,r),o=r[r.length-1],a;i&&delete i[o];for(let l=0;l<r.slice(0,-1).length;l++){let f=-1,g,x=r.slice(0,-(l+1)),I=x.length-1;for(l>0&&(a=e);++f<x.length;){let M=x[f];g=g?g[M]:e[M],I===f&&(qt(g)&&Er(g)||Array.isArray(g)&&!g.filter(k=>qt(k)&&!Er(k)||rc(k)).length)&&(a?delete a[M]:delete e[M]),a=g}}return e}n(tr,"unset");function Cl(e,t={}){let r=Array.isArray(e);if(qt(e)||r)for(let i in e)Array.isArray(e[i])||qt(e[i])&&!w0(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Cl(e[i],t[i])):fr(e[i])||(t[i]=!0);return t}n(Cl,"markFieldsDirty");function e1(e,t,r){let i=Array.isArray(e);if(qt(e)||i)for(let o in e)Array.isArray(e[o])||qt(e[o])&&!w0(e[o])?_t(t)||Ol(r[o])?r[o]=Array.isArray(e[o])?Cl(e[o],[]):Object.assign({},Cl(e[o])):e1(e[o],fr(t)?{}:t[o],r[o]):r[o]=!Zs(e[o],t[o]);return r}n(e1,"getDirtyFieldsFromDefaultValues");var Nx=n((e,t)=>e1(e,t,Cl(t)),"getDirtyFields"),Dx={value:!1,isValid:!1},Lx={value:!0,isValid:!0},t1=n(e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_t(e[0].attributes.value)?_t(e[0].value)||e[0].value===""?Lx:{value:e[0].value,isValid:!0}:Lx:Dx}return Dx},"getCheckboxValue"),r1=n((e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>_t(e)?e:t?e===""?NaN:+e:r&&Dn(e)?new Date(e):i?i(e):e,"getFieldValueAs"),Vx={isValid:!1,value:null},n1=n(e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Vx):Vx,"getRadioValue");function d0(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return x0(t)?t.files:A0(t)?n1(e.refs).value:Xx(t)?[...t.selectedOptions].map(({value:r})=>r):nc(t)?t1(e.refs).value:r1(_t(t.value)?e.ref.value:t.value,e)}n(d0,"getFieldValue");var c3=n((e,t,r,i)=>{let o={};for(let a of e){let l=le(t,a);l&&kt(o,a,l._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:i}},"getResolverOptions"),Rl=n(e=>e instanceof RegExp,"isRegex"),ec=n(e=>_t(e)?void 0:Rl(e)?e.source:qt(e)?Rl(e.value)?e.value.source:e.value:e,"getRuleValue"),u3=n(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),"hasValidation");function Fx(e,t,r){let i=le(e,r);if(i||b0(r))return{error:i,name:r};let o=r.split(".");for(;o.length;){let a=o.join("."),l=le(t,a),f=le(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(f&&f.type)return{name:a,error:f};o.pop()}return{name:r}}n(Fx,"schemaErrorLookup");var l3=n((e,t,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?i.isOnBlur:o.isOnBlur)?!e:(r?i.isOnChange:o.isOnChange)?e:!0,"skipValidation"),f3=n((e,t)=>!Ul(le(e,t)).length&&tr(e,t),"unsetEmptyArray"),Kl=n(e=>Dn(e)||xt.default.isValidElement(e),"isMessage");function jx(e,t,r="validate"){if(Kl(e)||Array.isArray(e)&&e.every(Kl)||rc(e)&&!e)return{type:r,message:Kl(e)?e:"",ref:t}}n(jx,"getValidateError");var $s=n(e=>qt(e)&&!Rl(e)?e:{value:e,message:""},"getValueAndMessage"),qx=n(async(e,t,r,i)=>{let{ref:o,refs:a,required:l,maxLength:f,minLength:g,min:x,max:I,pattern:M,validate:k,name:O,valueAsNumber:C,mount:R,disabled:j}=e._f;if(!R||j)return{};let F=a?a[0]:o,Y=n(A=>{i&&F.reportValidity&&(F.setCustomValidity(rc(A)?"":A||" "),F.reportValidity())},"setCustomValidity"),L={},ce=A0(o),te=nc(o),ie=ce||te,ae=(C||x0(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,Z=o3.bind(null,O,r,L),ge=n((A,s,u,m=mi.maxLength,y=mi.minLength)=>{let v=A?s:u;L[O]=Object.assign({type:A?m:y,message:v,ref:o},Z(A?m:y,v))},"getMinMaxMessage");if(l&&(!ie&&(ae||fr(t))||rc(t)&&!t||te&&!t1(a).isValid||ce&&!n1(a).isValid)){let{value:A,message:s}=Kl(l)?{value:!!l,message:l}:$s(l);if(A&&(L[O]=Object.assign({type:mi.required,message:s,ref:F},Z(mi.required,s)),!r))return Y(s),L}if(!ae&&(!fr(x)||!fr(I))){let A,s,u=$s(I),m=$s(x);if(isNaN(t)){let y=o.valueAsDate||new Date(t);Dn(u.value)&&(A=y>new Date(u.value)),Dn(m.value)&&(s=y<new Date(m.value))}else{let y=o.valueAsNumber||parseFloat(t);fr(u.value)||(A=y>u.value),fr(m.value)||(s=y<m.value)}if((A||s)&&(ge(!!A,u.message,m.message,mi.max,mi.min),!r))return Y(L[O].message),L}if((f||g)&&!ae&&Dn(t)){let A=$s(f),s=$s(g),u=!fr(A.value)&&t.length>A.value,m=!fr(s.value)&&t.length<s.value;if((u||m)&&(ge(u,A.message,s.message),!r))return Y(L[O].message),L}if(M&&!ae&&Dn(t)){let{value:A,message:s}=$s(M);if(Rl(A)&&!t.match(A)&&(L[O]=Object.assign({type:mi.pattern,message:s,ref:o},Z(mi.pattern,s)),!r))return Y(s),L}if(k){if(Nl(k)){let A=await k(t),s=jx(A,F);if(s&&(L[O]=Object.assign(Object.assign({},s),Z(mi.validate,s.message)),!r))return Y(s.message),L}else if(qt(k)){let A={};for(let s in k){if(!Er(A)&&!r)break;let u=jx(await k[s](t),F,s);u&&(A=Object.assign(Object.assign({},u),Z(s,u.message)),Y(u.message),r&&(L[O]=A))}if(!Er(A)&&(L[O]=Object.assign({ref:F},A),!r))return L}}return Y(!0),L},"validateField"),d3={mode:yn.onSubmit,reValidateMode:yn.onChange,shouldFocusError:!0};function h3(e={}){let t=Object.assign(Object.assign({},d3),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},i={},o=t.defaultValues||{},a=t.shouldUnregister?{}:tc(o),l={action:!1,mount:!1,watch:!1},f={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,x=0,I={},M={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={watch:l0(),array:l0(),state:l0()},O=Rx(t.mode),C=Rx(t.reValidateMode),R=t.criteriaMode===yn.all,j=n((K,N)=>(...U)=>{clearTimeout(x),x=self.setTimeout(()=>K(...U),N)},"debounce"),F=n(async K=>{let N=!1;return M.isValid&&(N=t.resolver?Er((await ae()).errors):await ge(i,!0),!K&&N!==r.isValid&&(r.isValid=N,k.state.next({isValid:N}))),N},"_updateValid"),Y=n((K,N,U,W=[],re=!0,q=!0)=>{if(l.action=!0,q&&Array.isArray(le(i,K))){let J=N(le(i,K),U.argA,U.argB);re&&kt(i,K,J)}if(M.errors&&q&&Array.isArray(le(r.errors,K))){let J=N(le(r.errors,K),U.argA,U.argB);re&&kt(r.errors,K,J),f3(r.errors,K)}if(M.touchedFields&&Array.isArray(le(r.touchedFields,K))){let J=N(le(r.touchedFields,K),U.argA,U.argB);re&&kt(r.touchedFields,K,J)}M.dirtyFields&&(r.dirtyFields=Nx(o,a)),k.state.next({isDirty:s(K,W),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},"_updateFieldArray"),L=n((K,N)=>(kt(r.errors,K,N),k.state.next({errors:r.errors})),"updateErrors"),ce=n((K,N,U,W)=>{let re=le(i,K);if(re){let q=le(a,K,_t(U)?le(o,K):U);_t(q)||W&&W.defaultChecked||N?kt(a,K,N?q:d0(re._f)):y(K,q),l.mount&&F()}},"updateValidAndValue"),te=n((K,N,U,W,re)=>{let q=!1,J={name:K},nt=le(r.touchedFields,K);if(M.isDirty){let ye=r.isDirty;r.isDirty=J.isDirty=s(),q=ye!==J.isDirty}if(M.dirtyFields&&(!U||W)){let ye=le(r.dirtyFields,K);Zs(le(o,K),N)?tr(r.dirtyFields,K):kt(r.dirtyFields,K,!0),J.dirtyFields=r.dirtyFields,q=q||ye!==le(r.dirtyFields,K)}return U&&!nt&&(kt(r.touchedFields,K,U),J.touchedFields=r.touchedFields,q=q||M.touchedFields&&nt!==U),q&&re&&k.state.next(J),q?J:{}},"updateTouchAndDirty"),ie=n(async(K,N,U,W,re)=>{let q=le(r.errors,N),J=M.isValid&&r.isValid!==U;if(e.delayError&&W?(g=g||j(L,e.delayError),g(N,W)):(clearTimeout(x),W?kt(r.errors,N,W):tr(r.errors,N)),((W?!Zs(q,W):q)||!Er(re)||J)&&!K){let nt=Object.assign(Object.assign(Object.assign({},re),J?{isValid:U}:{}),{errors:r.errors,name:N});r=Object.assign(Object.assign({},r),nt),k.state.next(nt)}I[N]--,M.isValidating&&!I[N]&&(k.state.next({isValidating:!1}),I={})},"shouldRenderByError"),ae=n(async K=>t.resolver?await t.resolver(Object.assign({},a),t.context,c3(K||f.mount,i,t.criteriaMode,t.shouldUseNativeValidation)):{},"_executeSchema"),Z=n(async K=>{let{errors:N}=await ae();if(K)for(let U of K){let W=le(N,U);W?kt(r.errors,U,W):tr(r.errors,U)}else r.errors=N;return N},"executeSchemaAndUpdateState"),ge=n(async(K,N,U={valid:!0})=>{for(let W in K){let re=K[W];if(re){let q=re._f,J=g0(re,"_f");if(q){let nt=await qx(re,le(a,q.name),R,t.shouldUseNativeValidation);if(nt[q.name]&&(U.valid=!1,N))break;N||(nt[q.name]?kt(r.errors,q.name,nt[q.name]):tr(r.errors,q.name))}J&&await ge(J,N,U)}}return U.valid},"executeBuildInValidation"),A=n(()=>{for(let K of f.unMount){let N=le(i,K);N&&(N._f.refs?N._f.refs.every(U=>!f0(U)):!f0(N._f.ref))&&z(K)}f.unMount=new Set},"_removeUnmounted"),s=n((K,N)=>(K&&N&&kt(a,K,N),!Zs(c(),o)),"_getDirty"),u=n((K,N,U)=>{let W=Object.assign({},l.mount?a:_t(N)?o:Dn(K)?{[K]:N}:N);return Jx(K,f,W,U)},"_getWatch"),m=n(K=>Ul(le(l.mount?a:o,K,e.shouldUnregister?le(o,K,[]):[])),"_getFieldArray"),y=n((K,N,U={})=>{let W=le(i,K),re=N;if(W){let q=W._f;q&&(!q.disabled&&kt(a,K,r1(N,q)),re=Ux&&m0(q.ref)&&fr(N)?"":N,Xx(q.ref)?[...q.ref.options].forEach(J=>J.selected=re.includes(J.value)):q.refs?nc(q.ref)?q.refs.length>1?q.refs.forEach(J=>J.checked=Array.isArray(re)?!!re.find(nt=>nt===J.value):re===J.value):q.refs[0]&&(q.refs[0].checked=!!re):q.refs.forEach(J=>J.checked=J.value===re):x0(q.ref)||(q.ref.value=re,q.ref.type||k.watch.next({name:K})))}(U.shouldDirty||U.shouldTouch)&&te(K,re,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&w(K)},"setFieldValue"),v=n((K,N,U)=>{for(let W in N){let re=N[W],q=`${K}.${W}`,J=le(i,q);(f.array.has(K)||!Ol(re)||J&&!J._f)&&!Gs(re)?v(q,re,U):y(q,re,U)}},"setValues"),S=n((K,N,U={})=>{let W=le(i,K),re=f.array.has(K);kt(a,K,N),re?(k.array.next({name:K,values:a}),(M.isDirty||M.dirtyFields)&&U.shouldDirty&&(r.dirtyFields=Nx(o,a),k.state.next({name:K,dirtyFields:r.dirtyFields,isDirty:s(K,N)}))):W&&!W._f&&!fr(N)?v(K,N,U):y(K,N,U),Cx(K,f)&&k.state.next({}),k.watch.next({name:K})},"setValue"),E=n(async K=>{let N=K.target,U=N.name,W=le(i,U);if(W){let re,q,J=N.type?d0(W._f):Wx(K),nt=K.type===h0.BLUR,ye=!u3(W._f)&&!t.resolver&&!le(r.errors,U)&&!W._f.deps||l3(nt,le(r.touchedFields,U),r.isSubmitted,C,O),be=Cx(U,f,nt);kt(a,U,J),nt?W._f.onBlur&&W._f.onBlur(K):W._f.onChange&&W._f.onChange(K);let Mr=te(U,J,nt,!1),Ie=!Er(Mr)||be;if(!nt&&k.watch.next({name:U,type:K.type}),ye)return Ie&&k.state.next(Object.assign({name:U},be?{}:Mr));if(!nt&&be&&k.state.next({}),I[U]=(I[U],1),M.isValidating&&k.state.next({isValidating:!0}),t.resolver){let{errors:Ee}=await ae([U]),vn=Fx(r.errors,i,U),Me=Fx(Ee,i,vn.name||U);re=Me.error,U=Me.name,q=Er(Ee)}else re=(await qx(W,le(a,U),R,t.shouldUseNativeValidation))[U],q=await F(!0);W._f.deps&&w(W._f.deps),ie(!1,U,q,re,Mr)}},"onChange"),w=n(async(K,N={})=>{let U,W,re=Bl(K);if(k.state.next({isValidating:!0}),t.resolver){let q=await Z(_t(K)?K:re);U=Er(q),W=K?!re.some(J=>le(q,J)):U}else K?(W=(await Promise.all(re.map(async q=>{let J=le(i,q);return await ge(J&&J._f?{[q]:J}:J)}))).every(Boolean),!(!W&&!r.isValid)&&F()):W=U=await ge(i);return k.state.next(Object.assign(Object.assign(Object.assign({},!Dn(K)||M.isValid&&U!==r.isValid?{}:{name:K}),t.resolver?{isValid:U}:{}),{errors:r.errors,isValidating:!1})),N.shouldFocus&&!W&&p0(i,q=>le(r.errors,q),K?re:f.mount),W},"trigger"),c=n(K=>{let N=Object.assign(Object.assign({},o),l.mount?a:{});return _t(K)?N:Dn(K)?le(N,K):K.map(U=>le(N,U))},"getValues"),b=n(K=>{K?Bl(K).forEach(N=>tr(r.errors,N)):r.errors={},k.state.next({errors:r.errors})},"clearErrors"),D=n((K,N,U)=>{let W=(le(i,K,{_f:{}})._f||{}).ref;kt(r.errors,K,Object.assign(Object.assign({},N),{ref:W})),k.state.next({name:K,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&W&&W.focus&&W.focus()},"setError"),V=n((K,N)=>Nl(K)?k.watch.subscribe({next:n(U=>K(u(void 0,N),U),"next")}):u(K,N,!0),"watch"),z=n((K,N={})=>{for(let U of K?Bl(K):f.mount)f.mount.delete(U),f.array.delete(U),le(i,U)&&(N.keepValue||(tr(i,U),tr(a,U)),!N.keepError&&tr(r.errors,U),!N.keepDirty&&tr(r.dirtyFields,U),!N.keepTouched&&tr(r.touchedFields,U),!t.shouldUnregister&&!N.keepDefaultValue&&tr(o,U));k.watch.next({}),k.state.next(Object.assign(Object.assign({},r),N.keepDirty?{isDirty:s()}:{})),!N.keepIsValid&&F()},"unregister"),Q=n((K,N={})=>{let U=le(i,K),W=rc(N.disabled);return kt(i,K,{_f:Object.assign(Object.assign(Object.assign({},U&&U._f?U._f:{ref:{name:K}}),{name:K,mount:!0}),N)}),f.mount.add(K),U?W&&kt(a,K,N.disabled?void 0:le(a,K,d0(U._f))):ce(K,!0,N.value),Object.assign(Object.assign(Object.assign({},W?{disabled:N.disabled}:{}),t.shouldUseNativeValidation?{required:!!N.required,min:ec(N.min),max:ec(N.max),minLength:ec(N.minLength),maxLength:ec(N.maxLength),pattern:ec(N.pattern)}:{}),{name:K,onChange:E,onBlur:E,ref:n(re=>{if(re){Q(K,N),U=le(i,K);let q=_t(re.value)&&re.querySelectorAll&&re.querySelectorAll("input,select,textarea")[0]||re,J=s3(q),nt=U._f.refs||[];if(J?nt.find(ye=>ye===q):q===U._f.ref)return;kt(i,K,{_f:Object.assign(Object.assign({},U._f),J?{refs:nt.concat(q).filter(f0),ref:{type:q.type,name:K}}:{ref:q})}),ce(K,!1,void 0,q)}else U=le(i,K,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||N.shouldUnregister)&&!(Hx(f.array,K)&&l.action)&&f.unMount.add(K)},"ref")})},"register");return{control:{register:Q,unregister:z,_executeSchema:ae,_getWatch:u,_getDirty:s,_updateValid:F,_removeUnmounted:A,_updateFieldArray:Y,_getFieldArray:m,_subjects:k,_proxyFormState:M,get _fields(){return i},set _fields(K){i=K},get _formValues(){return a},set _formValues(K){a=K},get _stateFlags(){return l},set _stateFlags(K){l=K},get _defaultValues(){return o},set _defaultValues(K){o=K},get _names(){return f},set _names(K){f=K},get _formState(){return r},set _formState(K){r=K},get _options(){return t},set _options(K){t=Object.assign(Object.assign({},t),K)}},trigger:w,register:Q,handleSubmit:n((K,N)=>async U=>{U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let W=!0,re=t.shouldUnregister?tc(a):Object.assign({},a);k.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:q,values:J}=await ae();r.errors=q,re=J}else await ge(i);Er(r.errors)&&Object.keys(r.errors).every(q=>le(re,q))?(k.state.next({errors:{},isSubmitting:!0}),await K(re,U)):(N&&await N(r.errors,U),t.shouldFocusError&&p0(i,q=>le(r.errors,q),f.mount))}catch(q){throw W=!1,q}finally{r.isSubmitted=!0,k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Er(r.errors)&&W,submitCount:r.submitCount+1,errors:r.errors})}},"handleSubmit"),watch:V,setValue:S,getValues:c,reset:n((K,N={})=>{let U=K||o,W=tc(U),re=K&&!Er(K)?W:o;if(N.keepDefaultValues||(o=U),!N.keepValues){if(Ux&&_t(K))for(let q of f.mount){let J=le(i,q);if(J&&J._f){let nt=Array.isArray(J._f.refs)?J._f.refs[0]:J._f.ref;try{m0(nt)&&nt.closest("form").reset();break}catch{}}}a=e.shouldUnregister?N.keepDefaultValues?tc(o):{}:W,i={},k.array.next({values:re}),k.watch.next({values:re})}f={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!M.isValid||!!N.keepIsValid,l.watch=!!e.shouldUnregister,k.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:N.keepDirty?r.isDirty:N.keepDefaultValues?!Zs(K,o):!1,isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N.keepDirty?r.dirtyFields:N.keepDefaultValues&&K?Object.entries(K).reduce((q,[J,nt])=>Object.assign(Object.assign({},q),{[J]:nt!==le(o,J)}),{}):{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},"reset"),resetField:n((K,N={})=>{le(i,K)&&(_t(N.defaultValue)?S(K,le(o,K)):(S(K,N.defaultValue),kt(o,K,N.defaultValue)),N.keepTouched||tr(r.touchedFields,K),N.keepDirty||(tr(r.dirtyFields,K),r.isDirty=N.defaultValue?s(K,le(o,K)):s()),N.keepError||(tr(r.errors,K),M.isValid&&F()),k.state.next(Object.assign({},r)))},"resetField"),clearErrors:b,unregister:z,setError:D,setFocus:n(K=>{let N=le(i,K)._f;(N.ref.focus?N.ref:N.refs[0]).focus()},"setFocus")}}n(h3,"createFormControl");function Dl(e={}){let t=xt.default.useRef(),[r,i]=xt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},h3(e)),{formState:r});let o=t.current.control,a=xt.default.useCallback(l=>{Gx(l,o._proxyFormState,!0)&&(o._formState=Object.assign(Object.assign({},o._formState),l),i(Object.assign({},o._formState)))},[o]);return v0({subject:o._subjects.state,callback:a}),xt.default.useEffect(()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()}),t.current.formState=$x(r,o._proxyFormState),t.current}n(Dl,"useForm");var p3=n(({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:i,addReadOnlyAccount:o,fetchDomainOwner:a})=>{let l=Sr(),{t:f}=bi(),g=$t(),x=i?.networkID||tn.Solana.Mainnet,{formState:{errors:I},control:M,clearErrors:k,getValues:O,setValue:C,register:R,handleSubmit:j,watch:F,trigger:Y}=Dl({mode:"all"}),{networkID:L,name:ce,address:te,resolvedAddress:ie}=F(),ae={required:!0},Z=(0,Ll.useMemo)(()=>({required:{value:!0,message:f("addAccountImportAccountPublicKeyRequired")},validate:(0,i1.default)(async s=>{if(s==="")return!0;if(!em(s,L||x))try{let v=(await a(s,L,l,g))?.owner;return v?(C("resolvedAddress",v),e.find(E=>E.addresses.map(w=>w.address).includes(v))?f("addAccountImportAccountDuplicateAddress"):!0):f("addAccountImportAccountIncorrectFormat")}catch{return f("sendFormErrorInvalidDomain")}return C("resolvedAddress",s),e.find(y=>y.addresses.map(v=>v.address).includes(s))?f("addAccountImportAccountDuplicateAddress"):!0},500)}),[f,L,x,C,e,a,l,g]),ge=ce&&ie&&!I.name&&!I.address,A=(0,Ll.useCallback)(async({networkID:s,name:u,resolvedAddress:m},y)=>{let v=jo(s,m);t.includes(v)||await r({addressTypes:[v]});let S={};S[v]=m,o({name:u,addresses:S,icon:i?.icon}),y(),g.capture("addReadOnlyAccount",{data:{networkID:s,chainType:v,walletAddress:m}})},[o,i?.icon,r,t,g]);return{Controller:Qx,canSubmit:ge,control:M,errors:I,nameValidations:ae,address:te,addressValidations:Z,clearErrors:k,getValues:O,handleSubmit:j,onSubmit:A,register:R,setValue:C,trigger:Y}},"useAddReadOnlyAccountForm");d();h();function m3(e){let t=xx();return e.map(r=>Ai.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??pe.getNetworkName(r.networkID))}n(m3,"useAddressTooltipNetworkName");d();h();var o1=he(Pt());var g3=n(()=>{let{data:e}=Ar(),t=(0,o1.useMemo)(()=>{if(!e||!e.addresses.length)return pe.getChainID(L0.Mainnet);let r=e.addresses[0];return pe.getChainID(r.networkID)},[e]);return{caip19:X0(tm(t)),tokenName:pe.getChainName(t),tokenSymbol:pe.getTokenSymbol(t)}},"useDefaultNativeTokenForSelectedAccount");d();h();var y3=n(()=>Xs(),"useDefaultNetworkSettings");d();h();var v3=n(()=>{let{data:e}=Ar();return e?e.type===P.Ledger:void 0},"useIsSelectedLedgerAccount");d();h();var w3=n(()=>{let{data:e}=u0();return!!e?.isDeveloperMode},"useIsTestnetMode"),b3=n(()=>Xa().some(t=>pe.isLocalNetworkID(t)),"useIsLocalnetMode");d();h();var a1=he(Pt());d();h();var s1=n(()=>{let{value:e}=gn(),{data:t}=Ws(),{data:r}=a0();return ht({queryKey:tt.patchProfileAddresses({chainAvailability:e?.enabledNetworkIDs,accountIdentifiers:t?.map(i=>i.identifier),user:r}),queryFn:e&&t&&r?()=>{let{enabledNetworkIDs:i}=e,o=i?.reduce((I,M)=>{let k=t.find(O=>O.addresses.some(C=>C.networkID===M))?.addresses.find(O=>O.networkID===M)?.address;return k&&(I[M]=k),I},{})??{},a=r?.addresses,l=a?Object.keys(a).filter(pe.isNetworkID):[],f=(i??[]).filter(I=>!l.includes(I)).reduce((I,M)=>{let k=o[M];return k&&(I[M]=k),I},{});return Object.keys(f).length>0?{addresses:{...f,...a},addedAddresses:f}:null}:om})},"usePatchProfileAddresses");var x3=n(()=>{let{data:e}=s1(),{mutate:t}=c0(),r=$t();(0,a1.useEffect)(()=>{if(e){let{addresses:i,addedAddresses:o}=e,a=Object.keys(o);r.capture("autoSyncUsernameAddresses",{data:{addedChains:a}}),t({addresses:i})}},[e,t,r])},"usePatchAddressesIfNeeded");d();h();var c1=he(Pt());var A3=n(e=>{let t=(0,c1.useCallback)(r=>r.addresses.find(i=>e===pe.getChainID(i.networkID))?.networkID,[e]);return Ar({select:t})},"useSelectedNetwork");d();h();var u1=he(Pt());var S3=n(({accountBalance:e,accountId:t,enabled:r,value:i,setAccountBalance:o})=>{(0,u1.useEffect)(()=>{if(r&&t&&i!==void 0&&i!==e){let a=Date.now();o({identifier:t,balance:{timestamp:a,value:i}})}},[e,t,r,i,o])},"useSetAccountBalanceEffect");d();h();var l1=he(Pt());var E3=n(()=>{let{data:e=[]}=Pl("local-only"),{data:t=[]}=Pl("recoverable-only");return(0,l1.useMemo)(()=>e.length+t.length>1,[e.length,t.length])},"useShowRemoveSecretPhrase");d();h();d();h();d();h();var rr=he(Pt());function M3(e){let t,r=new Set,i=n((x,I)=>{let M=typeof x=="function"?x(t):x;if(M!==t){let k=t;t=I?M:Object.assign({},t,M),r.forEach(O=>O(t,k))}},"setState"),o=n(()=>t,"getState"),a=n((x,I=o,M=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let k=I(t);function O(){let C=I(t);if(!M(k,C)){let R=k;x(k=C,R)}}return n(O,"listenerToAdd"),r.add(O),()=>r.delete(O)},"subscribeWithSelector"),g={setState:i,getState:o,subscribe:n((x,I,M)=>I||M?a(x,I,M):(r.add(x),()=>r.delete(x)),"subscribe"),destroy:n(()=>r.clear(),"destroy")};return t=e(i,o,g),g}n(M3,"createStore");var T3=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),f1=T3?rr.useEffect:rr.useLayoutEffect;function Vl(e){let t=typeof e=="function"?M3(e):e,r=n((i=t.getState,o=Object.is)=>{let[,a]=(0,rr.useReducer)(j=>j+1,0),l=t.getState(),f=(0,rr.useRef)(l),g=(0,rr.useRef)(i),x=(0,rr.useRef)(o),I=(0,rr.useRef)(!1),M=(0,rr.useRef)();M.current===void 0&&(M.current=i(l));let k,O=!1;(f.current!==l||g.current!==i||x.current!==o||I.current)&&(k=i(l),O=!o(M.current,k)),f1(()=>{O&&(M.current=k),f.current=l,g.current=i,x.current=o,I.current=!1});let C=(0,rr.useRef)(l);f1(()=>{let j=n(()=>{try{let Y=t.getState(),L=g.current(Y);x.current(M.current,L)||(f.current=Y,M.current=L,a())}catch{I.current=!0,a()}},"listener"),F=t.subscribe(j);return t.getState()!==C.current&&j(),F},[]);let R=O?k:M.current;return(0,rr.useDebugValue)(R),R},"useStore");return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let i=[r,t];return{next(){let o=i.length<=0;return{value:i.shift(),done:o}}}},r}n(Vl,"create");var I3={editableAccountMetadata:void 0,setEditableAccountMetadata:n(()=>{},"setEditableAccountMetadata")},Fl=Vl(e=>({...I3,setEditableAccountMetadata:n(t=>{e({editableAccountMetadata:t})},"setEditableAccountMetadata")}));d();h();var d1={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},h1=Vl((e,t)=>({...d1,setUsername:n(r=>e({username:r}),"setUsername"),setUsernameAvailabilityError:n(r=>e({usernameAvailabilityError:r}),"setUsernameAvailabilityError"),setAvailable:n(r=>e({available:r}),"setAvailable"),setIcon:n(r=>e({icon:r}),"setIcon"),addSecretIdentifier:n(r=>{let i=[...t().secretIdentifiers];i.includes(r)||i.push(r),e({secretIdentifiers:i})},"addSecretIdentifier"),removeSecretIdentifier:n(r=>{e({secretIdentifiers:t().secretIdentifiers.filter(i=>i!==r)})},"removeSecretIdentifier"),addAccountIdentifierToSync:n(r=>{let i=[...t().accountIdentifiersToSync];i.includes(r)||i.push(r),e({accountIdentifiersToSync:i})},"addAccountIdentifierToSync"),removeAccountIdentifierToSync:n(r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(i=>i!==r)})},"removeAccountIdentifierToSync"),clearAccountIdentifiersToSync:n(()=>e({accountIdentifiersToSync:[]}),"clearAccountIdentifiersToSync"),setAccountIdentifiersToSync:n(r=>e({accountIdentifiersToSync:r}),"setAccountIdentifiersToSync"),addAddress:n((r,i)=>{let o={...t().addresses};o[r]=i,e({addresses:o})},"addAddress"),removeAddress:n((r,i)=>{let o={...t().addresses};o[r]===i&&delete o[r],e({addresses:o})},"removeAddress"),clearAddresses:n(()=>{e({addresses:{}})},"clearAddresses"),reset:n(()=>{e(d1)},"reset")}));d();h();var p1=he(No()),Ln=he(Pt());var _3=n(({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:i})=>{let{t:o}=bi(),{formState:{errors:a},control:l,clearErrors:f,getValues:g,setValue:x,register:I,handleSubmit:M,watch:k,trigger:O}=Dl({mode:"all",defaultValues:{addressType:r?.addressType||_.Solana,networkID:r?.networkID||tn.Solana.Mainnet}}),[C,R]=(0,Ln.useState)(null),j=Fl(u=>u.setEditableAccountMetadata),{name:F}=k(),Y=r?.secrets,L=g("networkID"),ce=g("addressType"),te=g("privateKey"),ie=(0,Ln.useMemo)(()=>new $0,[]),ae={required:!0},Z=(0,Ln.useMemo)(()=>({required:{value:!0,message:o("addAccountImportAccountPrivateKeyRequired")},onChange:n(u=>{u.target.value||R(null)},"onChange"),validate:n(u=>{try{let m=g("networkID"),y=g("addressType");if(/\s/.test(u)||!y)return o("addAccountImportAccountIncorrectFormat");let v=pe.getNetworkDefinition(m).value,S=dc({privateKey:u,addressType:y,networkIDValue:v});j({...r,secrets:S});let E=ie.generateKeypairFromPrivateKey(S,y);return t.find(c=>!c.isReadOnly&&(c.addresses.map(b=>b.address).includes(Nt({publicKey:E.publicKey,addressType:y,networkID:m}))||c.addresses.filter(b=>"publicKey"in b).map(b=>b.publicKey).find(b=>b?Buffer.from(b).equals(Buffer.from(E.publicKey)):!1)))?o("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return o("addAccountImportAccountIncorrectFormat")}},"validate")}),[o,ie,t,r,j,g]);(0,Ln.useEffect)(()=>{if(a.privateKey){R(null);return}if(te||Y)try{let u=pe.getNetworkDefinition(L).value,m=Y||dc({privateKey:te,addressType:ce,networkIDValue:u}),y=ie.generateKeypairFromPrivateKey(m,ce);if(!te){let v="";switch(ce){case _.Solana:{v=p1.default.encode(y.privateKey);break}case _.EVM:{v="0x"+Buffer.from(y.privateKey).toString("hex");break}case _.Sui:{v=Z0(y.privateKey);break}}x("privateKey",v)}R(Nt({publicKey:y.publicKey,addressType:ce,networkID:L}))}catch{R(null)}},[a.privateKey,ce,ie,te,Y,x,L]);let ge=(0,Ln.useMemo)(()=>!!(F&&te&&!a.name&&!a.privateKey),[a.name,a.privateKey,F,te]),A=(0,Ln.useCallback)(async({networkID:u,name:m,privateKey:y,addressType:v})=>{let S=pe.getNetworkDefinition(u).value,E=dc({privateKey:y,addressType:v,networkIDValue:S});await e({chainType:v,name:m,icon:r?.icon,privateKey:E}),i.capture("addPrivateKeyAccount",{data:{networkID:u,chainType:v,walletAddress:C}})},[e,r?.icon,i,C]);return{formOnSubmitHandler:M(u=>A(u)),canSubmit:ge,control:l,getValues:g,register:I,setValue:x,trigger:O,errors:a,clearErrors:f,nameValidations:ae,privateKey:te,privateKeyValidations:Z,addressPreview:C}},"useImportPrivateKeyForm");d();h();var k3=n(async(e,t,r)=>{let{enabledAddressTypes:i,enabledChainIDs:o,enabledMainnetOnlyNetworkIDs:a}=r,[l,f]=await Promise.all([t.get(et.DeveloperMode),zs(t)]),g=await e.fetchAllAccounts(),x=await Yi(g,t),I=await Mg(t,x.identifier),M={name:I.name,icon:I.icon,identifier:x.identifier,addresses:Zc(x,a,i,o,f,l?.isDeveloperMode??!1)};return x.type===P.Seed?{...M,type:P.Seed,seedIdentifier:x.seedIdentifier,isReadOnly:!1}:x.type===P.Seedless?{...M,type:P.Seedless,seedIdentifier:x.seedIdentifier,isReadOnly:!1}:x.type===P.ReadOnly?{...M,type:P.ReadOnly,isReadOnly:!0}:x.type===P.PrivateKey?{...M,privateKeyIdentifier:x.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...M,type:x.type,isReadOnly:!1}},"getSelectedMultichainAccount");export{zo as a,vm as b,O1 as c,C1 as d,Gl as e,Jt as f,U1 as g,N1 as h,lC as i,et as j,OS as k,NS as l,D1 as m,vt as n,vc as o,Ai as p,V1 as q,Wf as r,P as s,F1 as t,WS as u,Gf as v,HS as w,$S as x,va as y,Zf as z,Yf as A,Og as B,GS as C,ii as D,oa as E,JS as F,$1 as G,G1 as H,QS as I,YS as J,XS as K,eE as L,tE as M,rE as N,nE as O,iE as P,po as Q,wE as R,l2 as S,ut as T,yy as U,w2 as V,b2 as W,Bd as X,x2 as Y,A2 as Z,cu as _,ah as $,Ql as aa,ei as ba,kr as ca,fa as da,XA as ea,Af as fa,lo as ga,ni as ha,rS as ia,fS as ja,dS as ka,Q1 as la,Ir as ma,oo as na,hS as oa,pS as pa,pa as qa,mS as ra,gS as sa,yS as ta,vS as ua,dh as va,se as wa,Mt as xa,ve as ya,rw as za,ph as Aa,iw as Ba,cw as Ca,fw as Da,Bw as Ea,pb as Fa,mb as Ga,vb as Ha,xb as Ia,ll as Ja,Ab as Ka,y_ as La,Ep as Ma,Db as Na,Fp as Oa,tk as Pa,ma as Qa,wS as Ra,gn as Sa,Gp as Ta,rk as Ua,Zp as Va,nk as Wa,ik as Xa,xx as Ya,qs as Za,loe as _a,foe as $a,doe as ab,hoe as bb,poe as cb,moe as db,Rk as eb,Uk as fb,Qp as gb,Ws as hb,Nk as ib,Yp as jb,Dk as kb,Lk as lb,Pl as mb,uk as nb,u0 as ob,Px as pb,Vk as qb,Ar as rb,Fk as sb,jk as tb,qk as ub,zk as vb,Wk as wb,Hk as xb,$k as yb,Gk as zb,Zk as Ab,Jk as Bb,Qk as Cb,Xa as Db,Yk as Eb,Xk as Fb,Xi as Gb,Tx as Hb,mk as Ib,gk as Jb,vk as Kb,er as Lb,Tk as Mb,Il as Nb,lk as Ob,Sr as Pb,o0 as Qb,Uo as Rb,Ik as Sb,_k as Tb,Ya as Ub,s0 as Vb,a0 as Wb,Bk as Xb,c0 as Yb,Kk as Zb,i3 as _b,Qx as $b,Dl as ac,p3 as bc,m3 as cc,g3 as dc,y3 as ec,v3 as fc,w3 as gc,b3 as hc,x3 as ic,Ok as jc,A3 as kc,S3 as lc,E3 as mc,Vl as nc,Fl as oc,h1 as pc,_3 as qc,k3 as rc};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-COS4XKZ5.js.map
