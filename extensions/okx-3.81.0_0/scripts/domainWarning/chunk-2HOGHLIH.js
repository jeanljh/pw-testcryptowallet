import{a as zn,b as te,c as M}from"./chunk-OSJWHY7M.js";import{g as Ze}from"./chunk-JYR5PKQU.js";import{c as B,d as Mt,e as O,f as D,n as v,o as p,p as _,q as m}from"./chunk-4J7XGGEQ.js";var tr=B((Zi,er)=>{p();m();function to(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}er.exports=ro;function ro(e,t,r){var n=r&&r.stringify||to,s=1;if(typeof e=="object"&&e!==null){var i=t.length+s;if(i===1)return e;var f=new Array(i);f[0]=n(e);for(var l=1;l<i;l++)f[l]=n(t[l]);return f.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var o="",u=1-s,a=-1,d=e&&e.length||0,g=0;g<d;){if(e.charCodeAt(g)===37&&g+1<d){switch(a=a>-1?a:0,e.charCodeAt(g+1)){case 100:case 102:if(u>=c||t[u]==null)break;a<g&&(o+=e.slice(a,g)),o+=Number(t[u]),a=g+2,g++;break;case 105:if(u>=c||t[u]==null)break;a<g&&(o+=e.slice(a,g)),o+=Math.floor(Number(t[u])),a=g+2,g++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;a<g&&(o+=e.slice(a,g));var h=typeof t[u];if(h==="string"){o+="'"+t[u]+"'",a=g+2,g++;break}if(h==="function"){o+=t[u].name||"<anonymous>",a=g+2,g++;break}o+=n(t[u]),a=g+2,g++;break;case 115:if(u>=c)break;a<g&&(o+=e.slice(a,g)),o+=String(t[u]),a=g+2,g++;break;case 37:a<g&&(o+=e.slice(a,g)),o+="%",a=g+2,g++,u--;break}++u}++g}return a===-1?e:(a<d&&(o+=e.slice(a)),o)}});var ct=B((ta,sr)=>{p();m();var rr=tr();sr.exports=T;var ie=ho().console||{},no={mapHttpRequest:Se,mapHttpResponse:Se,wrapRequestSerializer:at,wrapResponseSerializer:at,wrapErrorSerializer:at,req:Se,res:Se,err:uo};function oo(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function T(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||ie;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},s=oo(e.browser.serialize,n),i=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);let f=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),e.enabled===!1&&(e.level="silent");let l=e.level||"info",c=Object.create(r);c.log||(c.log=ae),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:a,set:d});let o={transmit:t,serialize:s,asObject:e.browser.asObject,levels:f,timestamp:co(e)};c.levels=T.levels,c.level=l,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=ae,c.serializers=n,c._serialize=s,c._stdErrSerialize=i,c.child=g,t&&(c._logEvent=ut());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function a(){return this._level}function d(h){if(h!=="silent"&&!this.levels.values[h])throw Error("unknown level "+h);this._level=h,q(o,c,"error","log"),q(o,c,"fatal","error"),q(o,c,"warn","error"),q(o,c,"info","log"),q(o,c,"debug","log"),q(o,c,"trace","log")}function g(h,y){if(!h)throw new Error("missing bindings for child Pino");y=y||{},s&&h.serializers&&(y.serializers=h.serializers);let b=y.serializers;if(s&&b){var S=Object.assign({},n,b),P=e.browser.serialize===!0?Object.keys(S):s;delete h.serializers,Ee([h],P,S,this._stdErrSerialize)}function L(C){this._childLevel=(C._childLevel|0)+1,this.error=X(C,h,"error"),this.fatal=X(C,h,"fatal"),this.warn=X(C,h,"warn"),this.info=X(C,h,"info"),this.debug=X(C,h,"debug"),this.trace=X(C,h,"trace"),S&&(this.serializers=S,this._serialize=P),t&&(this._logEvent=ut([].concat(C._logEvent.bindings,h)))}return L.prototype=this,new L(this)}return c}T.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};T.stdSerializers=no;T.stdTimeFunctions=Object.assign({},{nullTime:nr,epochTime:or,unixTime:lo,isoTime:fo});function q(e,t,r,n){let s=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?ae:s[r]?s[r]:ie[r]||ie[n]||ae,so(e,t,r)}function so(e,t,r){!e.transmit&&t[r]===ae||(t[r]=function(n){return function(){let i=e.timestamp(),f=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ie?ie:this;for(var c=0;c<f.length;c++)f[c]=arguments[c];if(e.serialize&&!e.asObject&&Ee(f,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(l,io(this,r,f,i)):n.apply(l,f),e.transmit){let o=e.transmit.level||t.level,u=T.levels.values[o],a=T.levels.values[r];if(a<u)return;ao(this,{ts:i,methodLevel:r,methodValue:a,transmitLevel:o,transmitValue:T.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},f)}}}(t[r]))}function io(e,t,r,n){e._serialize&&Ee(r,e._serialize,e.serializers,e._stdErrSerialize);let s=r.slice(),i=s[0],f={};n&&(f.time=n),f.level=T.levels.values[t];let l=(e._childLevel|0)+1;if(l<1&&(l=1),i!==null&&typeof i=="object"){for(;l--&&typeof s[0]=="object";)Object.assign(f,s.shift());i=s.length?rr(s.shift(),s):void 0}else typeof i=="string"&&(i=rr(s.shift(),s));return i!==void 0&&(f.msg=i),f}function Ee(e,t,r,n){for(let s in e)if(n&&e[s]instanceof Error)e[s]=T.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s]))for(let i in e[s])t&&t.indexOf(i)>-1&&i in r&&(e[s][i]=r[i](e[s][i]))}function X(e,t,r){return function(){let n=new Array(1+arguments.length);n[0]=t;for(var s=1;s<n.length;s++)n[s]=arguments[s-1];return e[r].apply(this,n)}}function ao(e,t,r){let n=t.send,s=t.ts,i=t.methodLevel,f=t.methodValue,l=t.val,c=e._logEvent.bindings;Ee(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=r.filter(function(o){return c.indexOf(o)===-1}),e._logEvent.level.label=i,e._logEvent.level.value=f,n(i,e._logEvent,l),e._logEvent=ut(c)}function ut(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function uo(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function co(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?nr:or}function Se(){return{}}function at(e){return e}function ae(){}function nr(){return!1}function or(){return Date.now()}function lo(){return Math.round(Date.now()/1e3)}function fo(){return new Date(Date.now()).toISOString()}function ho(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}});var Nr=B((Ra,Ne)=>{p();m();var pr,mr,yr,vr,_r,wr,br,Sr,Er,ze,St,Ir,Or,Y,Rr,xr,Cr,Lr,Tr,Ar,Pr,jr,zr;(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof Ne=="object"&&typeof Ne.exports=="object"?e(r(t,r(Ne.exports))):e(r(t));function r(n,s){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(i,f){return n[i]=s?s(i,f):f}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])};pr=function(r,n){t(r,n);function s(){this.constructor=r}r.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)},mr=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(r[f]=n[f])}return r},yr=function(r,n){var s={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,i=Object.getOwnPropertySymbols(r);f<i.length;f++)n.indexOf(i[f])<0&&Object.prototype.propertyIsEnumerable.call(r,i[f])&&(s[i[f]]=r[i[f]]);return s},vr=function(r,n,s,i){var f=arguments.length,l=f<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,s):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,s,i);else for(var o=r.length-1;o>=0;o--)(c=r[o])&&(l=(f<3?c(l):f>3?c(n,s,l):c(n,s))||l);return f>3&&l&&Object.defineProperty(n,s,l),l},_r=function(r,n){return function(s,i){n(s,i,r)}},wr=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},br=function(r,n,s,i){function f(l){return l instanceof s?l:new s(function(c){c(l)})}return new(s||(s=Promise))(function(l,c){function o(d){try{a(i.next(d))}catch(g){c(g)}}function u(d){try{a(i.throw(d))}catch(g){c(g)}}function a(d){d.done?l(d.value):f(d.value).then(o,u)}a((i=i.apply(r,n||[])).next())})},Sr=function(r,n){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,f,l,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(a){return function(d){return u([a,d])}}function u(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,f&&(l=a[0]&2?f.return:a[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,a[1])).done)return l;switch(f=0,l&&(a=[a[0]&2,l.value]),a[0]){case 0:case 1:l=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,f=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!l||a[1]>l[0]&&a[1]<l[3])){s.label=a[1];break}if(a[0]===6&&s.label<l[1]){s.label=l[1],l=a;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(a);break}l[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(r,s)}catch(d){a=[6,d],f=0}finally{i=l=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},zr=function(r,n,s,i){i===void 0&&(i=s),r[i]=n[s]},Er=function(r,n){for(var s in r)s!=="default"&&!n.hasOwnProperty(s)&&(n[s]=r[s])},ze=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&r[n],i=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},St=function(r,n){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var i=s.call(r),f,l=[],c;try{for(;(n===void 0||n-- >0)&&!(f=i.next()).done;)l.push(f.value)}catch(o){c={error:o}}finally{try{f&&!f.done&&(s=i.return)&&s.call(i)}finally{if(c)throw c.error}}return l},Ir=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(St(arguments[n]));return r},Or=function(){for(var r=0,n=0,s=arguments.length;n<s;n++)r+=arguments[n].length;for(var i=Array(r),f=0,n=0;n<s;n++)for(var l=arguments[n],c=0,o=l.length;c<o;c++,f++)i[f]=l[c];return i},Y=function(r){return this instanceof Y?(this.v=r,this):new Y(r)},Rr=function(r,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(r,n||[]),f,l=[];return f={},c("next"),c("throw"),c("return"),f[Symbol.asyncIterator]=function(){return this},f;function c(h){i[h]&&(f[h]=function(y){return new Promise(function(b,S){l.push([h,y,b,S])>1||o(h,y)})})}function o(h,y){try{u(i[h](y))}catch(b){g(l[0][3],b)}}function u(h){h.value instanceof Y?Promise.resolve(h.value.v).then(a,d):g(l[0][2],h)}function a(h){o("next",h)}function d(h){o("throw",h)}function g(h,y){h(y),l.shift(),l.length&&o(l[0][0],l[0][1])}},xr=function(r){var n,s;return n={},i("next"),i("throw",function(f){throw f}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(f,l){n[f]=r[f]?function(c){return(s=!s)?{value:Y(r[f](c)),done:f==="return"}:l?l(c):c}:l}},Cr=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],s;return n?n.call(r):(r=typeof ze=="function"?ze(r):r[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(l){s[l]=r[l]&&function(c){return new Promise(function(o,u){c=r[l](c),f(o,u,c.done,c.value)})}}function f(l,c,o,u){Promise.resolve(u).then(function(a){l({value:a,done:o})},c)}},Lr=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},Tr=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var s in r)Object.hasOwnProperty.call(r,s)&&(n[s]=r[s]);return n.default=r,n},Ar=function(r){return r&&r.__esModule?r:{default:r}},Pr=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},jr=function(r,n,s){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,s),s},e("__extends",pr),e("__assign",mr),e("__rest",yr),e("__decorate",vr),e("__param",_r),e("__metadata",wr),e("__awaiter",br),e("__generator",Sr),e("__exportStar",Er),e("__createBinding",zr),e("__values",ze),e("__read",St),e("__spread",Ir),e("__spreadArrays",Or),e("__await",Y),e("__asyncGenerator",Rr),e("__asyncDelegator",xr),e("__asyncValues",Cr),e("__makeTemplateObject",Lr),e("__importStar",Tr),e("__importDefault",Ar),e("__classPrivateFieldGet",Pr),e("__classPrivateFieldSet",jr)})});var Dr=B(K=>{p();m();Object.defineProperty(K,"__esModule",{value:!0});K.isBrowserCryptoAvailable=K.getSubtleCrypto=K.getBrowerCrypto=void 0;function Et(){return globalThis?.crypto||globalThis?.msCrypto||{}}K.getBrowerCrypto=Et;function Br(){let e=Et();return e.subtle||e.webkitSubtle}K.getSubtleCrypto=Br;function Po(){return!!Et()&&!!Br()}K.isBrowserCryptoAvailable=Po});var Kr=B(V=>{p();m();Object.defineProperty(V,"__esModule",{value:!0});V.isBrowser=V.isNode=V.isReactNative=void 0;function Mr(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}V.isReactNative=Mr;function kr(){return typeof v<"u"&&typeof v.versions<"u"&&typeof v.versions.node<"u"}V.isNode=kr;function jo(){return!Mr()&&!kr()}V.isBrowser=jo});var It=B(Be=>{p();m();Object.defineProperty(Be,"__esModule",{value:!0});var Vr=Nr();Vr.__exportStar(Dr(),Be);Vr.__exportStar(Kr(),Be)});var Hr=B((gu,Gr)=>{p();m();Gr.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var wi=B((he,Q)=>{p();m();var Wo=200,Dt="__lodash_hash_undefined__",He=1,fn=2,dn=9007199254740991,Ve="[object Arguments]",Tt="[object Array]",Fo="[object AsyncFunction]",hn="[object Boolean]",gn="[object Date]",pn="[object Error]",mn="[object Function]",$o="[object GeneratorFunction]",Je="[object Map]",yn="[object Number]",Go="[object Null]",Z="[object Object]",Qr="[object Promise]",Ho="[object Proxy]",vn="[object RegExp]",Ue="[object Set]",_n="[object String]",qo="[object Symbol]",Xo="[object Undefined]",At="[object WeakMap]",wn="[object ArrayBuffer]",We="[object DataView]",Yo="[object Float32Array]",Zo="[object Float64Array]",Qo="[object Int8Array]",es="[object Int16Array]",ts="[object Int32Array]",rs="[object Uint8Array]",ns="[object Uint8ClampedArray]",os="[object Uint16Array]",ss="[object Uint32Array]",is=/[\\^$.*+?()[\]{}|]/g,as=/^\[object .+?Constructor\]$/,us=/^(?:0|[1-9]\d*)$/,w={};w[Yo]=w[Zo]=w[Qo]=w[es]=w[ts]=w[rs]=w[ns]=w[os]=w[ss]=!0;w[Ve]=w[Tt]=w[wn]=w[hn]=w[We]=w[gn]=w[pn]=w[mn]=w[Je]=w[yn]=w[Z]=w[vn]=w[Ue]=w[_n]=w[At]=!1;var bn=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,cs=typeof self=="object"&&self&&self.Object===Object&&self,z=bn||cs||Function("return this")(),Sn=typeof he=="object"&&he&&!he.nodeType&&he,en=Sn&&typeof Q=="object"&&Q&&!Q.nodeType&&Q,En=en&&en.exports===Sn,xt=En&&bn.process,tn=function(){try{return xt&&xt.binding&&xt.binding("util")}catch{}}(),rn=tn&&tn.isTypedArray;function ls(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var f=e[r];t(f,r,e)&&(i[s++]=f)}return i}function fs(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}function ds(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function hs(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function gs(e){return function(t){return e(t)}}function ps(e,t){return e.has(t)}function ms(e,t){return e?.[t]}function ys(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function vs(e,t){return function(r){return e(t(r))}}function _s(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ws=Array.prototype,bs=Function.prototype,qe=Object.prototype,Ct=z["__core-js_shared__"],In=bs.toString,A=qe.hasOwnProperty,nn=function(){var e=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),On=qe.toString,Ss=RegExp("^"+In.call(A).replace(is,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),on=En?z.Buffer:void 0,Fe=z.Symbol,sn=z.Uint8Array,Rn=qe.propertyIsEnumerable,Es=ws.splice,F=Fe?Fe.toStringTag:void 0,an=Object.getOwnPropertySymbols,Is=on?on.isBuffer:void 0,Os=vs(Object.keys,Object),Pt=ee(z,"DataView"),ge=ee(z,"Map"),jt=ee(z,"Promise"),zt=ee(z,"Set"),Nt=ee(z,"WeakMap"),pe=ee(Object,"create"),Rs=H(Pt),xs=H(ge),Cs=H(jt),Ls=H(zt),Ts=H(Nt),un=Fe?Fe.prototype:void 0,Lt=un?un.valueOf:void 0;function $(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function As(){this.__data__=pe?pe(null):{},this.size=0}function Ps(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function js(e){var t=this.__data__;if(pe){var r=t[e];return r===Dt?void 0:r}return A.call(t,e)?t[e]:void 0}function zs(e){var t=this.__data__;return pe?t[e]!==void 0:A.call(t,e)}function Ns(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pe&&t===void 0?Dt:t,this}$.prototype.clear=As;$.prototype.delete=Ps;$.prototype.get=js;$.prototype.has=zs;$.prototype.set=Ns;function N(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Bs(){this.__data__=[],this.size=0}function Ds(e){var t=this.__data__,r=Xe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Es.call(t,r,1),--this.size,!0}function Ms(e){var t=this.__data__,r=Xe(t,e);return r<0?void 0:t[r][1]}function ks(e){return Xe(this.__data__,e)>-1}function Ks(e,t){var r=this.__data__,n=Xe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}N.prototype.clear=Bs;N.prototype.delete=Ds;N.prototype.get=Ms;N.prototype.has=ks;N.prototype.set=Ks;function G(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vs(){this.size=0,this.__data__={hash:new $,map:new(ge||N),string:new $}}function Js(e){var t=Ye(this,e).delete(e);return this.size-=t?1:0,t}function Us(e){return Ye(this,e).get(e)}function Ws(e){return Ye(this,e).has(e)}function Fs(e,t){var r=Ye(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}G.prototype.clear=Vs;G.prototype.delete=Js;G.prototype.get=Us;G.prototype.has=Ws;G.prototype.set=Fs;function $e(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new G;++t<r;)this.add(e[t])}function $s(e){return this.__data__.set(e,Dt),this}function Gs(e){return this.__data__.has(e)}$e.prototype.add=$e.prototype.push=$s;$e.prototype.has=Gs;function U(e){var t=this.__data__=new N(e);this.size=t.size}function Hs(){this.__data__=new N,this.size=0}function qs(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Xs(e){return this.__data__.get(e)}function Ys(e){return this.__data__.has(e)}function Zs(e,t){var r=this.__data__;if(r instanceof N){var n=r.__data__;if(!ge||n.length<Wo-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new G(n)}return r.set(e,t),this.size=r.size,this}U.prototype.clear=Hs;U.prototype.delete=qs;U.prototype.get=Xs;U.prototype.has=Ys;U.prototype.set=Zs;function Qs(e,t){var r=Ge(e),n=!r&&gi(e),s=!r&&!n&&Bt(e),i=!r&&!n&&!s&&jn(e),f=r||n||s||i,l=f?hs(e.length,String):[],c=l.length;for(var o in e)(t||A.call(e,o))&&!(f&&(o=="length"||s&&(o=="offset"||o=="parent")||i&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||ci(o,c)))&&l.push(o);return l}function Xe(e,t){for(var r=e.length;r--;)if(Ln(e[r][0],t))return r;return-1}function ei(e,t,r){var n=t(e);return Ge(e)?n:fs(n,r(e))}function ye(e){return e==null?e===void 0?Xo:Go:F&&F in Object(e)?ai(e):hi(e)}function cn(e){return me(e)&&ye(e)==Ve}function xn(e,t,r,n,s){return e===t?!0:e==null||t==null||!me(e)&&!me(t)?e!==e&&t!==t:ti(e,t,r,n,xn,s)}function ti(e,t,r,n,s,i){var f=Ge(e),l=Ge(t),c=f?Tt:J(e),o=l?Tt:J(t);c=c==Ve?Z:c,o=o==Ve?Z:o;var u=c==Z,a=o==Z,d=c==o;if(d&&Bt(e)){if(!Bt(t))return!1;f=!0,u=!1}if(d&&!u)return i||(i=new U),f||jn(e)?Cn(e,t,r,n,s,i):si(e,t,c,r,n,s,i);if(!(r&He)){var g=u&&A.call(e,"__wrapped__"),h=a&&A.call(t,"__wrapped__");if(g||h){var y=g?e.value():e,b=h?t.value():t;return i||(i=new U),s(y,b,r,n,i)}}return d?(i||(i=new U),ii(e,t,r,n,s,i)):!1}function ri(e){if(!Pn(e)||fi(e))return!1;var t=Tn(e)?Ss:as;return t.test(H(e))}function ni(e){return me(e)&&An(e.length)&&!!w[ye(e)]}function oi(e){if(!di(e))return Os(e);var t=[];for(var r in Object(e))A.call(e,r)&&r!="constructor"&&t.push(r);return t}function Cn(e,t,r,n,s,i){var f=r&He,l=e.length,c=t.length;if(l!=c&&!(f&&c>l))return!1;var o=i.get(e);if(o&&i.get(t))return o==t;var u=-1,a=!0,d=r&fn?new $e:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var g=e[u],h=t[u];if(n)var y=f?n(h,g,u,t,e,i):n(g,h,u,e,t,i);if(y!==void 0){if(y)continue;a=!1;break}if(d){if(!ds(t,function(b,S){if(!ps(d,S)&&(g===b||s(g,b,r,n,i)))return d.push(S)})){a=!1;break}}else if(!(g===h||s(g,h,r,n,i))){a=!1;break}}return i.delete(e),i.delete(t),a}function si(e,t,r,n,s,i,f){switch(r){case We:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case wn:return!(e.byteLength!=t.byteLength||!i(new sn(e),new sn(t)));case hn:case gn:case yn:return Ln(+e,+t);case pn:return e.name==t.name&&e.message==t.message;case vn:case _n:return e==t+"";case Je:var l=ys;case Ue:var c=n&He;if(l||(l=_s),e.size!=t.size&&!c)return!1;var o=f.get(e);if(o)return o==t;n|=fn,f.set(e,t);var u=Cn(l(e),l(t),n,s,i,f);return f.delete(e),u;case qo:if(Lt)return Lt.call(e)==Lt.call(t)}return!1}function ii(e,t,r,n,s,i){var f=r&He,l=ln(e),c=l.length,o=ln(t),u=o.length;if(c!=u&&!f)return!1;for(var a=c;a--;){var d=l[a];if(!(f?d in t:A.call(t,d)))return!1}var g=i.get(e);if(g&&i.get(t))return g==t;var h=!0;i.set(e,t),i.set(t,e);for(var y=f;++a<c;){d=l[a];var b=e[d],S=t[d];if(n)var P=f?n(S,b,d,t,e,i):n(b,S,d,e,t,i);if(!(P===void 0?b===S||s(b,S,r,n,i):P)){h=!1;break}y||(y=d=="constructor")}if(h&&!y){var L=e.constructor,C=t.constructor;L!=C&&"constructor"in e&&"constructor"in t&&!(typeof L=="function"&&L instanceof L&&typeof C=="function"&&C instanceof C)&&(h=!1)}return i.delete(e),i.delete(t),h}function ln(e){return ei(e,yi,ui)}function Ye(e,t){var r=e.__data__;return li(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ee(e,t){var r=ms(e,t);return ri(r)?r:void 0}function ai(e){var t=A.call(e,F),r=e[F];try{e[F]=void 0;var n=!0}catch{}var s=On.call(e);return n&&(t?e[F]=r:delete e[F]),s}var ui=an?function(e){return e==null?[]:(e=Object(e),ls(an(e),function(t){return Rn.call(e,t)}))}:vi,J=ye;(Pt&&J(new Pt(new ArrayBuffer(1)))!=We||ge&&J(new ge)!=Je||jt&&J(jt.resolve())!=Qr||zt&&J(new zt)!=Ue||Nt&&J(new Nt)!=At)&&(J=function(e){var t=ye(e),r=t==Z?e.constructor:void 0,n=r?H(r):"";if(n)switch(n){case Rs:return We;case xs:return Je;case Cs:return Qr;case Ls:return Ue;case Ts:return At}return t});function ci(e,t){return t=t??dn,!!t&&(typeof e=="number"||us.test(e))&&e>-1&&e%1==0&&e<t}function li(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function fi(e){return!!nn&&nn in e}function di(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||qe;return e===r}function hi(e){return On.call(e)}function H(e){if(e!=null){try{return In.call(e)}catch{}try{return e+""}catch{}}return""}function Ln(e,t){return e===t||e!==e&&t!==t}var gi=cn(function(){return arguments}())?cn:function(e){return me(e)&&A.call(e,"callee")&&!Rn.call(e,"callee")},Ge=Array.isArray;function pi(e){return e!=null&&An(e.length)&&!Tn(e)}var Bt=Is||_i;function mi(e,t){return xn(e,t)}function Tn(e){if(!Pn(e))return!1;var t=ye(e);return t==mn||t==$o||t==Fo||t==Ho}function An(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dn}function Pn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function me(e){return e!=null&&typeof e=="object"}var jn=rn?gs(rn):ni;function yi(e){return pi(e)?Qs(e):oi(e)}function vi(){return[]}function _i(){return!1}Q.exports=mi});p();m();var Kt=D(Ze()),we=D(zn());p();m();p();m();var ve=class{};var Qe=class extends ve{constructor(t){super()}},kt=we.FIVE_SECONDS,Nn={pulse:"heartbeat_pulse"},_e=class extends Qe{constructor(t){super(t),this.events=new Kt.EventEmitter,this.interval=kt,this.interval=t?.interval||kt}static async init(t){let r=new _e(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,we.toMiliseconds)(this.interval))}pulse(){this.events.emit(Nn.pulse)}};p();m();p();m();p();m();var Bn=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Dn=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Mn=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kn(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Kn(e);return}return t}function Kn(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function re(e,t={}){if(typeof e!="string")return e;let r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){let n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Mn.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Bn.test(e)||Dn.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,kn)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}p();m();function Vn(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function E(e,...t){try{return Vn(e(...t))}catch(r){return Promise.reject(r)}}function Jn(e){let t=typeof e;return e===null||t!=="object"&&t!=="function"}function Un(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function ne(e){if(Jn(e))return String(e);if(Un(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return ne(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Vt(){if(typeof _.Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}var et="base64:";function Jt(e){if(typeof e=="string")return e;Vt();let t=_.Buffer.from(e).toString("base64");return et+t}function Ut(e){return typeof e!="string"||!e.startsWith(et)?e:(Vt(),_.Buffer.from(e.slice(et.length),"base64"))}function x(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Wt(...e){return x(e.join(":"))}function oe(e){return e=x(e),e?e+":":""}var Wn="memory",Fn=()=>{let e=new Map;return{name:Wn,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function Gt(e={}){let t={mounts:{"":e.driver||Fn()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=o=>{for(let u of t.mountpoints)if(o.startsWith(u))return{base:u,relativeKey:o.slice(u.length),driver:t.mounts[u]};return{base:"",relativeKey:o,driver:t.mounts[""]}},n=(o,u)=>t.mountpoints.filter(a=>a.startsWith(o)||u&&o.startsWith(a)).map(a=>({relativeBase:o.length>a.length?o.slice(a.length):void 0,mountpoint:a,driver:t.mounts[a]})),s=(o,u)=>{if(!!t.watching){u=x(u);for(let a of t.watchListeners)a(o,u)}},i=async()=>{if(!t.watching){t.watching=!0;for(let o in t.mounts)t.unwatch[o]=await Ft(t.mounts[o],s,o)}},f=async()=>{if(!!t.watching){for(let o in t.unwatch)await t.unwatch[o]();t.unwatch={},t.watching=!1}},l=(o,u,a)=>{let d=new Map,g=h=>{let y=d.get(h.base);return y||(y={driver:h.driver,base:h.base,items:[]},d.set(h.base,y)),y};for(let h of o){let y=typeof h=="string",b=x(y?h:h.key),S=y?void 0:h.value,P=y||!h.options?u:{...u,...h.options},L=r(b);g(L).items.push({key:b,value:S,relativeKey:L.relativeKey,options:P})}return Promise.all([...d.values()].map(h=>a(h))).then(h=>h.flat())},c={hasItem(o,u={}){o=x(o);let{relativeKey:a,driver:d}=r(o);return E(d.hasItem,a,u)},getItem(o,u={}){o=x(o);let{relativeKey:a,driver:d}=r(o);return E(d.getItem,a,u).then(g=>re(g))},getItems(o,u){return l(o,u,a=>a.driver.getItems?E(a.driver.getItems,a.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(g=>({key:Wt(a.base,g.key),value:re(g.value)}))):Promise.all(a.items.map(d=>E(a.driver.getItem,d.relativeKey,d.options).then(g=>({key:d.key,value:re(g)})))))},getItemRaw(o,u={}){o=x(o);let{relativeKey:a,driver:d}=r(o);return d.getItemRaw?E(d.getItemRaw,a,u):E(d.getItem,a,u).then(g=>Ut(g))},async setItem(o,u,a={}){if(u===void 0)return c.removeItem(o);o=x(o);let{relativeKey:d,driver:g}=r(o);!g.setItem||(await E(g.setItem,d,ne(u),a),g.watch||s("update",o))},async setItems(o,u){await l(o,u,async a=>{if(a.driver.setItems)return E(a.driver.setItems,a.items.map(d=>({key:d.relativeKey,value:ne(d.value),options:d.options})),u);!a.driver.setItem||await Promise.all(a.items.map(d=>E(a.driver.setItem,d.relativeKey,ne(d.value),d.options)))})},async setItemRaw(o,u,a={}){if(u===void 0)return c.removeItem(o,a);o=x(o);let{relativeKey:d,driver:g}=r(o);if(g.setItemRaw)await E(g.setItemRaw,d,u,a);else if(g.setItem)await E(g.setItem,d,Jt(u),a);else return;g.watch||s("update",o)},async removeItem(o,u={}){typeof u=="boolean"&&(u={removeMeta:u}),o=x(o);let{relativeKey:a,driver:d}=r(o);!d.removeItem||(await E(d.removeItem,a,u),(u.removeMeta||u.removeMata)&&await E(d.removeItem,a+"$",u),d.watch||s("remove",o))},async getMeta(o,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),o=x(o);let{relativeKey:a,driver:d}=r(o),g=Object.create(null);if(d.getMeta&&Object.assign(g,await E(d.getMeta,a,u)),!u.nativeOnly){let h=await E(d.getItem,a+"$",u).then(y=>re(y));h&&typeof h=="object"&&(typeof h.atime=="string"&&(h.atime=new Date(h.atime)),typeof h.mtime=="string"&&(h.mtime=new Date(h.mtime)),Object.assign(g,h))}return g},setMeta(o,u,a={}){return this.setItem(o+"$",u,a)},removeMeta(o,u={}){return this.removeItem(o+"$",u)},async getKeys(o,u={}){o=oe(o);let a=n(o,!0),d=[],g=[];for(let h of a){let y=await E(h.driver.getKeys,h.relativeBase,u);for(let b of y){let S=h.mountpoint+x(b);d.some(P=>S.startsWith(P))||g.push(S)}d=[h.mountpoint,...d.filter(b=>!b.startsWith(h.mountpoint))]}return o?g.filter(h=>h.startsWith(o)&&h[h.length-1]!=="$"):g.filter(h=>h[h.length-1]!=="$")},async clear(o,u={}){o=oe(o),await Promise.all(n(o,!1).map(async a=>{if(a.driver.clear)return E(a.driver.clear,a.relativeBase,u);if(a.driver.removeItem){let d=await a.driver.getKeys(a.relativeBase||"",u);return Promise.all(d.map(g=>a.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(o=>$t(o)))},async watch(o){return await i(),t.watchListeners.push(o),async()=>{t.watchListeners=t.watchListeners.filter(u=>u!==o),t.watchListeners.length===0&&await f()}},async unwatch(){t.watchListeners=[],await f()},mount(o,u){if(o=oe(o),o&&t.mounts[o])throw new Error(`already mounted at ${o}`);return o&&(t.mountpoints.push(o),t.mountpoints.sort((a,d)=>d.length-a.length)),t.mounts[o]=u,t.watching&&Promise.resolve(Ft(u,s,o)).then(a=>{t.unwatch[o]=a}).catch(console.error),c},async unmount(o,u=!0){o=oe(o),!(!o||!t.mounts[o])&&(t.watching&&o in t.unwatch&&(t.unwatch[o](),delete t.unwatch[o]),u&&await $t(t.mounts[o]),t.mountpoints=t.mountpoints.filter(a=>a!==o),delete t.mounts[o])},getMount(o=""){o=x(o)+":";let u=r(o);return{driver:u.driver,base:u.base}},getMounts(o="",u={}){return o=x(o),n(o,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(o,u={})=>c.getKeys(o,u),get:(o,u={})=>c.getItem(o,u),set:(o,u,a={})=>c.setItem(o,u,a),has:(o,u={})=>c.hasItem(o,u),del:(o,u={})=>c.removeItem(o,u),remove:(o,u={})=>c.removeItem(o,u)};return c}function Ft(e,t,r){return e.watch?e.watch((n,s)=>t(n,r+s)):()=>{}}async function $t(e){typeof e.dispose=="function"&&await E(e.dispose)}p();m();function W(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function rt(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let n=W(r);return(s,i)=>n.then(f=>i(f.transaction(t,s).objectStore(t)))}var tt;function se(){return tt||(tt=rt("keyval-store","keyval")),tt}function nt(e,t=se()){return t("readonly",r=>W(r.get(e)))}function Ht(e,t,r=se()){return r("readwrite",n=>(n.put(t,e),W(n.transaction)))}function qt(e,t=se()){return t("readwrite",r=>(r.delete(e),W(r.transaction)))}function Xt(e=se()){return e("readwrite",t=>(t.clear(),W(t.transaction)))}function $n(e,t){return e.openCursor().onsuccess=function(){!this.result||(t(this.result),this.result.continue())},W(e.transaction)}function Yt(e=se()){return e("readonly",t=>{if(t.getAllKeys)return W(t.getAllKeys());let r=[];return $n(t,n=>r.push(n.key)).then(()=>r)})}var Gn="idb-keyval",Hn=(e={})=>{let t=e.base&&e.base.length>0?`${e.base}:`:"",r=s=>t+s,n;return e.dbName&&e.storeName&&(n=rt(e.dbName,e.storeName)),{name:Gn,options:e,async hasItem(s){return!(typeof await nt(r(s),n)>"u")},async getItem(s){return await nt(r(s),n)??null},setItem(s,i){return Ht(r(s),i,n)},removeItem(s){return qt(r(s),n)},getKeys(){return Yt(n)},clear(){return Xt(n)}}},qn="WALLET_CONNECT_V2_INDEXED_DB",Xn="keyvaluestorage",st=class{constructor(){this.indexedDb=Gt({driver:Hn({dbName:qn,storeName:Xn})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){let r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,M(r))}async removeItem(t){await this.indexedDb.removeItem(t)}},ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},be={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,n){this[r]=String(n)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ot<"u"&&ot.localStorage?be.exports=ot.localStorage:typeof window<"u"&&window.localStorage?be.exports=window.localStorage:be.exports=new t})();function Yn(e){var t;return[e[0],te((t=e[1])!=null?t:"")]}var it=class{constructor(){this.localStorage=be.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Yn)}async getItem(t){let r=this.localStorage.getItem(t);if(r!==null)return te(r)}async setItem(t,r){this.localStorage.setItem(t,M(r))}async removeItem(t){this.localStorage.removeItem(t)}},Zn="wc_storage_version",Zt=1,Qn=async(e,t,r)=>{let n=Zn,s=await t.getItem(n);if(s&&s>=Zt){r(t);return}let i=await e.getKeys();if(!i.length){r(t);return}let f=[];for(;i.length;){let l=i.shift();if(!l)continue;let c=l.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){let o=await e.getItem(l);await t.setItem(l,o),f.push(l)}}await t.setItem(n,Zt),r(t),eo(e,f)},eo=async(e,t)=>{t.length&&t.forEach(async r=>{await e.removeItem(r)})},Qt=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let t=new it;this.storage=t;try{let r=new st;Qn(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}};p();m();var j=D(ct()),go=D(ct());var po={level:"info"},ue="custom_context",ht=1e3*1024,lt=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Ie=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){let r=new lt(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;let t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){let t=[],r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};let r=t.value;return t=t.next,{done:!1,value:r}}}}},Oe=class{constructor(t,r=ht){this.level=t??"error",this.levelValue=j.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Ie(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===j.levels.values.error?console.error(t):r===j.levels.values.warn?console.warn(t):r===j.levels.values.debug?console.debug(t):r===j.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(M({timestamp:new Date().toISOString(),log:t}));let r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Ie(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){let r=this.getLogArray();return r.push(M({extraMetadata:t})),new Blob(r,{type:"application/json"})}},ft=class{constructor(t,r=ht){this.baseChunkLogger=new Oe(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){let r=URL.createObjectURL(this.logsToBlob(t)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},dt=class{constructor(t,r=ht){this.baseChunkLogger=new Oe(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}},mo=Object.defineProperty,yo=Object.defineProperties,vo=Object.getOwnPropertyDescriptors,ir=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,ar=(e,t,r)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Re=(e,t)=>{for(var r in t||(t={}))_o.call(t,r)&&ar(e,r,t[r]);if(ir)for(var r of ir(t))wo.call(t,r)&&ar(e,r,t[r]);return e},xe=(e,t)=>yo(e,vo(t));function sa(e){return xe(Re({},e),{level:e?.level||po.level})}function bo(e,t=ue){return e[t]||""}function So(e,t,r=ue){return e[r]=t,e}function Eo(e,t=ue){let r="";return typeof e.bindings>"u"?r=bo(e,t):r=e.bindings().context||"",r}function Io(e,t,r=ue){let n=Eo(e,r);return n.trim()?`${n}/${t}`:t}function ia(e,t,r=ue){let n=Io(e,t,r),s=e.child({context:n});return So(s,n,r)}function Oo(e){var t,r;let n=new ft((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:(0,j.default)(xe(Re({},e.opts),{level:"trace",browser:xe(Re({},(r=e.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function Ro(e){var t;let r=new dt((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:(0,j.default)(xe(Re({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function aa(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Oo(e):Ro(e)}p();m();p();m();p();m();var ur="PARSE_ERROR",cr="INVALID_REQUEST",lr="METHOD_NOT_FOUND",fr="INVALID_PARAMS",Ce="INTERNAL_ERROR",ce="SERVER_ERROR",gt=[-32700,-32600,-32601,-32602,-32603],Le=[-32e3,-32099],k={[ur]:{code:-32700,message:"Parse error"},[cr]:{code:-32600,message:"Invalid Request"},[lr]:{code:-32601,message:"Method not found"},[fr]:{code:-32602,message:"Invalid params"},[Ce]:{code:-32603,message:"Internal error"},[ce]:{code:-32e3,message:"Server error"}},le=ce;function xo(e){return e<=Le[0]&&e>=Le[1]}function Te(e){return gt.includes(e)}function dr(e){return typeof e=="number"}function Ae(e){return Object.keys(k).includes(e)?k[e]:k[le]}function Pe(e){let t=Object.values(k).find(r=>r.code===e);return t||k[le]}function Co(e){if(typeof e.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof e.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!dr(e.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${e.error.code}`};if(Te(e.error.code)){let t=Pe(e.error.code);if(t.message!==k[le].message&&e.error.message===t.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${e.error.code}`}}return{valid:!0}}function pt(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}function mt(e=3){let t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function yt(e=6){return BigInt(mt(e))}function vt(e,t,r){return{id:r||mt(),jsonrpc:"2.0",method:e,params:t}}function Lo(e,t){return{id:e,jsonrpc:"2.0",result:t}}function _t(e,t,r){return{id:e,jsonrpc:"2.0",error:hr(t,r)}}function hr(e,t){return typeof e>"u"?Ae(Ce):(typeof e=="string"&&(e=Object.assign(Object.assign({},Ae(ce)),{message:e})),typeof t<"u"&&(e.data=t),Te(e.code)&&(e=Pe(e.code)),e)}p();m();function wt(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function To(e){return wt(e)&&"method"in e}function bt(e){return wt(e)&&(gr(e)||je(e))}function gr(e){return"result"in e}function je(e){return"error"in e}function Ao(e){return"error"in e&&e.valid===!1}var R={};Mt(R,{DEFAULT_ERROR:()=>le,IBaseJsonRpcProvider:()=>ke,IEvents:()=>fe,IJsonRpcConnection:()=>Ot,IJsonRpcProvider:()=>de,INTERNAL_ERROR:()=>Ce,INVALID_PARAMS:()=>fr,INVALID_REQUEST:()=>cr,METHOD_NOT_FOUND:()=>lr,PARSE_ERROR:()=>ur,RESERVED_ERROR_CODES:()=>gt,SERVER_ERROR:()=>ce,SERVER_ERROR_CODE_RANGE:()=>Le,STANDARD_ERROR_MAP:()=>k,formatErrorMessage:()=>hr,formatJsonRpcError:()=>_t,formatJsonRpcRequest:()=>vt,formatJsonRpcResult:()=>Lo,getBigIntRpcId:()=>yt,getError:()=>Ae,getErrorByCode:()=>Pe,isHttpUrl:()=>Ko,isJsonRpcError:()=>je,isJsonRpcPayload:()=>wt,isJsonRpcRequest:()=>To,isJsonRpcResponse:()=>bt,isJsonRpcResult:()=>gr,isJsonRpcValidationInvalid:()=>Ao,isLocalhostUrl:()=>Rt,isNodeJs:()=>Ur,isReservedErrorCode:()=>Te,isServerErrorCode:()=>xo,isValidDefaultRoute:()=>De,isValidErrorCode:()=>dr,isValidLeadingWildcardRoute:()=>No,isValidRoute:()=>zo,isValidTrailingWildcardRoute:()=>Bo,isValidWildcardRoute:()=>Me,isWsUrl:()=>Ke,parseConnectionError:()=>pt,payloadId:()=>mt,validateJsonRpcError:()=>Co});p();m();var I={};Mt(I,{isNodeJs:()=>Ur});p();m();var Jr=D(It());O(I,D(It()));var Ur=Jr.isNode;O(R,I);p();m();function zo(e){return e.includes("*")?Me(e):!/\W/g.test(e)}function De(e){return e==="*"}function Me(e){return De(e)?!0:!(!e.includes("*")||e.split("*").length!==2||e.split("*").filter(t=>t.trim()==="").length!==1)}function No(e){return!De(e)&&Me(e)&&!e.split("*")[0].trim()}function Bo(e){return!De(e)&&Me(e)&&!e.split("*")[1].trim()}p();m();p();m();var fe=class{},Ot=class extends fe{constructor(t){super()}},ke=class extends fe{constructor(){super()}},de=class extends ke{constructor(t){super()}};p();m();var Do="^https?:",Mo="^wss?:";function ko(e){let t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function Wr(e,t){let r=ko(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function Ko(e){return Wr(e,Do)}function Ke(e){return Wr(e,Mo)}function Rt(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}p();m();var $r=D(Ze());var Fr=class extends de{constructor(t){super(t),this.events=new $r.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(vt(t.method,t.params||[],t.id||yt().toString()),r)}async requestStrict(t,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${t.id}`,i=>{je(i)?s(i.error):n(i.result)});try{await this.connection.send(t,r)}catch(i){s(i)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),bt(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};p();m();var Zr=D(Ze());var Vo=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:Hr(),Jo=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",qr=e=>e.split("?")[0],Xr=10,Uo=Vo(),Yr=class{constructor(t){if(this.url=t,this.events=new Zr.EventEmitter,this.registering=!1,!Ke(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(M(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!Ke(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{let s=new URLSearchParams(t).get("origin"),i=(0,R.isReactNative)()?{headers:{origin:s}}:{rejectUnauthorized:!Rt(t)},f=new Uo(t,[],i);Jo()?f.onerror=l=>{let c=l;n(this.emitError(c.error))}:f.on("error",l=>{n(this.emitError(l))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;let r=typeof t.data=="string"?te(t.data):t.data;this.events.emit("payload",r)}onError(t,r){let n=this.parseError(r),s=n.message||n.toString(),i=_t(t,s);this.events.emit("payload",i)}parseError(t,r=this.url){return pt(t,qr(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Xr&&this.events.setMaxListeners(Xr)}emitError(t){let r=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${qr(this.url)}`));return this.events.emit("register_error",r),r}};export{ve as a,Nn as b,_e as c,Qt as d,go as e,sa as f,Eo as g,ia as h,aa as i,mt as j,yt as k,vt as l,Lo as m,_t as n,To as o,bt as p,gr as q,je as r,R as s,Fr as t,Yr as u,wi as v};
//# sourceMappingURL=chunk-2HOGHLIH.js.map
