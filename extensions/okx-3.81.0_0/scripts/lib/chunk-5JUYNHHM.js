import{c as Pn}from"./chunk-3FSEKPUM.js";import{e as Oe}from"./chunk-6PQVK4Y4.js";import{a as Rn}from"./chunk-CHJAVPER.js";import{c as xn,d as vn,e as wn}from"./chunk-T2IRCTJA.js";import{d as Ln,g as Dn,h as On}from"./chunk-NDCJG34S.js";import{b as he}from"./chunk-ALZVVIHH.js";import{K as Te,L as pe,U as Pr,V as In,g as _n,l as Sn,m as bn,n as yn,o as Wt,oa as An}from"./chunk-SPXYT2VO.js";import{a as Tn}from"./chunk-7CFB2XTF.js";import{a as Cn}from"./chunk-BADVKNVD.js";import{J as Rr}from"./chunk-UC2GDSBD.js";import{d as hn,t as St}from"./chunk-PI6SXITR.js";import{A as Qo,Bc as an,Cc as cn,Dc as ln,Ec as Or,Fb as wr,Fc as un,Ga as De,Gc as dn,Hb as zo,Hc as fn,Ic as mn,K as vr,Mb as j,Nc as gn,P as _t,Pb as Zo,Tb as qo,Wb as en,Zb as tn,ac as Lr,bc as rn,ea as Yo,fa as ye,ga as Gt,hd as pn,mc as on,nc as Dr,oc as nn,pc as sn,rb as We,ud as En}from"./chunk-LZ43QKYM.js";import{a as xr}from"./chunk-LH3J3TLH.js";import{G as Ho,H as Kt,d as ht,e as Jo,ea as Ge,l as Bt,o as Xo}from"./chunk-XEVJKE53.js";import{V as Ir,_ as Ar,j as Ke,v as Vo}from"./chunk-NLHAZXT3.js";import{a as qe,b as Wo}from"./chunk-6YOUVTKE.js";import{a as Bo,b as Ko,c as Go}from"./chunk-AEGO4G2O.js";import{a as pt}from"./chunk-7BSXWXHJ.js";import{c as li,f as H,h as m,n as x,o as p,p as v,q as h}from"./chunk-4J7XGGEQ.js";var si=li(($t,jo)=>{p();h();(function(e,t){typeof $t=="object"&&typeof jo=="object"?jo.exports=t():typeof define=="function"&&define.amd?define([],t):typeof $t=="object"?$t._prohibitedMonitor=t():e._prohibitedMonitor=t()})($t,function(){return function(){"use strict";var r={"../monitor/src/amp/helper.js":function(s,n,i){i.r(n),i.d(n,{getAmpDefaultEndpoint:function(){return g},getAmplitudeAPIKey:function(){return f},getAmplitudeProject:function(){return u},logSignUpComplete:function(){return l},reportIdentifyEvent:function(){return d}});var a=i("../monitor/src/common/variables.js"),c=i("../monitor/src/common/constants.js");let l=_=>{let{signUpCompleted:y}=sessionStorage;y&&(_.logEvent("signup_completed",{},{language:a.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},u=_=>_||(a.default.isOKLink()?c.default.AMPLITUDE_PROJECT.oklink:a.default.isOKEx()||a.default.isInExtension()?c.default.AMPLITUDE_PROJECT.okx:c.default.AMPLITUDE_PROJECT.okcoin),f=_=>{let y=a.default.isProdEnv(),E=c.default.AMPLITUDE_KEY_MAP?.[_];return E?y?E?.prod:E?.dev:""},d=(_,y)=>{let E=new window.amplitude.Identify;E.set("channel_id",y),_.identify(E,{language:a.default.getOkGlobal().locale})},g=()=>{if(a.default.isInternalSystem()||a.default.isOKEx()||a.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(s,n,i){i.r(n);var a=i("../monitor/src/amp/helper.js"),c=i("../monitor/src/common/constants.js"),l=i("../monitor/src/common/event-bus.js"),u=i("../monitor/src/common/variables.js"),f=i("../monitor/src/lib/libs-amplitude.js"),d=i("../monitor/src/monitor.js");let g={},_,y={RESOLVE:"RESOLVE",REJECT:"REJECT"},E={events:new l.default,getAmplitudeSDKInstance(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((S,T)=>{this.events.on(y.RESOLVE,C=>{S(C)}),this.events.on(y.REJECT,C=>{T(C)}),this.getInstance(b)})},async getInstance(b){let S=(0,a.getAmplitudeProject)(b);_&&clearTimeout(_),window.amplitude||await(0,f.default)();let T=await u.default.getTk(),C=await u.default.getDeviceId()||"";if(g[S])return g[S];let A=window.amplitude.createInstance(),I=(0,a.getAmplitudeAPIKey)(S),w=(0,a.getAmpDefaultEndpoint)(),L=d.default.apiEndpoint?d.default.apiEndpoint:w,O={userId:S===c.default.AMPLITUDE_PROJECT.web3?C:T,deviceId:C,instanceName:S,serverUrl:L,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:u.default.getOkGlobal().assetsBuildVersion};return A.init(I,O),A.setSessionId(u.default.getOrGenerateSessionId()),g[S]=A,sessionStorage.channelId&&(0,a.reportIdentifyEvent)(A,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(P=>{A.logEvent(...P,{language:u.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,a.logSignUpComplete)(A),this.events.emit(y.RESOLVE,A),A}};n.default=E},"../monitor/src/common/constants.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/variables.js");let c="";if(a.default.isInBrowser()){let{cdnBaseUrl:f="//static.coinall.ltd"}=a.default.getOkGlobal();c=f}let l={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},u={[l.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[l.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[l.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[l.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[l.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};n.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:l,AMPLITUDE_KEY_MAP:u,CDN_BASE_URL:c,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(s,n,i){i.r(n);let a=l=>{try{let u=document.cookie.split(";"),f=null;for(let d=0;d<u.length;d++){let g=u[d];for(;g.charAt(0)===" ";)g=g.substring(1,g.length);if(g.indexOf(l)===0){f=g.substring(l.length+1,g.length);break}}return f}catch{return null}},c=function(l,u){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},d=u!==null?f.expirationDays:-1;if(d){let _=new Date;_.setTime(_.getTime()+d*24*60*60*1e3),d=_}let g=`${l}=${u}`;d&&(g+=`; expires=${d.toUTCString()}`),g+="; path=/",document.cookie=g};n.default={set:c,get:a}},"../monitor/src/common/event-bus.js":function(s,n,i){i.r(n);class a{constructor(){m(this,"listeners",{})}on(l,u,f){let d=[],g=arguments.length;for(let _=0;_<g;_++)d.push(arguments[_]);d=d.length>3?d.splice(3,d.length-1):[],typeof this.listeners[l]<"u"?this.listeners[l].push({scope:f,callback:u,args:d}):this.listeners[l]=[{scope:f,callback:u,args:d}]}remove(l,u,f){if(typeof this.listeners[l]<"u"){let d=this.listeners[l].length,g=this.listeners[l].slice(0);for(let _=0;_<d;_++){let y=g[_];y.scope==f&&y.callback==u&&this.listeners[l].splice(_,1)}}}has(l,u,f){if(typeof this.listeners[l]<"u"){let d=this.listeners[l].length;if(u===void 0&&f===void 0)return d>0;for(let g=0;g<d;g++){let _=this.listeners[l][g];if((f?_.scope==f:!0)&&_.callback==u)return!0}}return!1}emit(l){if(typeof this.listeners[l]<"u"){let g=this.listeners[l].slice(),_=g.length;for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];for(let y=0;y<_;y++){let E=g[y];if(E&&E.callback){let b=f.concat(E.args);E.callback.apply(E.scope,b)}}}}}n.default=a},"../monitor/src/common/seo.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/utils.js");let c=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];n.default={getSeoType(){let l=a.default.getUrlDomain(document.referrer);for(let u=0;u<c.length;u++){let{keyword:f,type:d}=c[u];if(l.indexOf(f)>-1)return d}return""}}},"../monitor/src/common/statex.js":function(s,n,i){i.r(n),i.d(n,{default:function(){return a}});function a(c){let l,u=new Set,f=(E,b)=>{let S=typeof E=="function"?E(l):E;if(S!==l){let T=l;l=b??typeof S!="object"?S:Object.assign({},l,S),u.forEach(C=>C(l,T))}},d=()=>l,y={setState:f,getState:d,subscribe:E=>(u.add(E),()=>u.delete(E)),destroy:()=>u.clear()};return l=c(f,d,y),y}},"../monitor/src/common/utils.js":function(s,n,i){i.r(n);let a=/([^{]+)({.+})?/,c=/^{|}$/g,l=/^['"]|['"]$/g,u=/\/\/([^/]+)\//,f={utm_source:30,utm_medium:20,utm_campaign:100,utm_term:100,utm_content:100,gclid:100,gbraid:100,wbraid:255,fbclid:255,ttclid:128,twclid:64,msclkid:64,af_adset:100,af_adset_id:24,af_ad:100,af_ad_id:24,af_keywords:100,af_c_id:24,clickId:256,groupInvitationCode:20,ircid:30};n.default={serializeParams(d){let g=[],_=Object.keys(d);for(let y=0,E=_.length;y<E;y++){let b=_[y];g.push(`${encodeURIComponent(b)}=${encodeURIComponent(d[b])}`)}return g.join("&")},getUrlDomain(d){let g=d.match(u);return g?g[1]:""},getUrlQuery(d){return this.getParsedUrl(window.location.href).searchParams.get(d)||""},getParsedUrl(d){return new URL(d)},getChannelIdByUserAgent(){let d=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(d)?.[1]},getChannelContext(d){let g={channelId:"",referralSrc:""};if(!d)return g;let _="",y="";if(d.searchParams.forEach((A,I)=>{let w=I.toLowerCase();w==="channelid"&&(_=A),w==="channelflag"&&(y=A)}),g.channelId=_||y,g.channelId)return g;let E="/join";if(d.pathname.endsWith(E)||!d.pathname.includes(E))return g;let b=d.pathname.split(`${E}/`)[1];if(!b)return g;let S=b.split("/")[0];if(S.startsWith("-"))return g;let T=S.split("-"),C=T[T.length-2]||"";return _=T[T.length-1],_&&(g.referralSrc=C,g.channelId=_),g},getOktsBaggageData(d){if(!d||!d.searchParams)return"";let g=d.searchParams,_=g.get("okts_baggage");if(_)return _;let y=[];return Object.keys(f).forEach(E=>{let b=g.get(E);if(!b)return;let S=this.filterXSS(b),T=f[E];S&&S.length<=T&&y.push(`${E}=${S}`)}),y.join(",")},getGABaggage(){let g=this.filterXSS(this.getCookie("_ga")).match(/^GA1\.\d+\.(.{1,30})$/);return g&&g[1]?`ga_client_id=${g[1]}`:""},getInternalOktsBaggage(){let d=sessionStorage.oktsBaggage,g=this.getGABaggage();return d&&!d.includes("ga_client_id=")&&g?`${d},${g}`:d||g},getFinalOktsBaggage(d){let g=this.getInternalOktsBaggage(),_=sessionStorage.getItem(d);if(!d||!_)return g;let y=`${d}=${_}`;return g?`${y},${g}`:y},getOriginalUrl(d){return d.replace(/([?&])t=\d+(&)?/,(g,_,y)=>_&&y?_===y?"&":"?":"")},setCookie(d,g,_){let y=new Date;y.setTime(y.getTime()+_),document.cookie=`${d}=${encodeURIComponent(g)};expires=${y.toGMTString()};path=/`},getCookie(d){let g=new RegExp(`(^| )${d}=([^;]*)(;|$)`),_=document.cookie.match(g);return _?decodeURIComponent(_[2]):""},parseTarget(d){let g=d.match(a),_={key:"",data:{}};if(g){let y=g[1],E=g[2],b={};E&&E.replace(c,"").split(",").forEach(T=>{let C=T.split(":");C=C.map(w=>w.trim().replace(l,""));let[A,I]=C;b[A]=I}),_.key=y,_.data=b}return _},matchType(d,g){return Object.prototype.toString.call(d)===`[object ${g}]`},isArray(d){return this.matchType(d,"Array")},isObject(d){return this.matchType(d,"Object")},isInArray(d,g){if(Array.prototype.includes)return d.includes(g);for(let _=0,y=d.length;_<y;_++)if(d[_]===g)return!0;return!1},generateUUID(){let d=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,g=>{let _=(d+this.cryptoRandom()*16)%16|0;return d=Math.floor(d/16),(g==="x"?_:_&3|8).toString(16)})},valueExists(d){return d!=null&&d!==""},passedNamingCheck(d){return!/[^a-z0-9_]/.test(d)},toFixed(d){return Number(d.toFixed(4))},toUnderLineFormat(d){return d.replace(/([A-Z])/g,(g,_,y)=>y===0?`${_.toLowerCase()}`:`_${_.toLowerCase()}`)},filterXSS(d){if(typeof d!="string")return"";let g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return d.replace(/[&<>"'/]/g,_=>g[_])},merge(d,g){let _={};return Object.keys({...d,...g}).forEach(y=>{(g[y]!=null||d[y]!=null)&&(_[y]=g[y]??d[y])}),_},cryptoRandom(){if(window?.crypto){let d=new Uint32Array(1);return window.crypto.getRandomValues(d),d[0]/Math.pow(2,32)}return Math.random()},base64Id(){let d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",g="";for(let _=0;_<22;++_)g+=d.charAt(Math.floor(this.cryptoRandom()*64));return g},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}},removeKeyFromString(d,g){return typeof d!="string"||typeof g!="string"||!g?d:d.split(",").map(_=>_.trim()).filter(_=>{let y=_.indexOf("=");return(y===-1?_:_.slice(0,y)).trim()!==g}).join(",")}}},"../monitor/src/common/variables.js":function(s,n,i){i.r(n);var a=i("../monitor/src/store.js"),c=i("../monitor/src/common/utils.js");let l="oklink",u="okex",f="OKX_GLOBAL",d="okex_inner",g=typeof window<"u",_=Boolean(typeof window>"u"||typeof x<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-0.3.0-251114135109",BUILD_TARGET_ENV:"extension"}.SSR_ENV),y=g?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,E={_expires:{}};if(g){let{ok_monitor:S='{ "_expires": {} }'}=localStorage;E=JSON.parse(S)}let b={};n.default={setEnv(S){let{screen:T}=window,{_tk:C}=localStorage,{systemLanguage:A,language:I}=navigator,{referrer:w}=document;b.site=this.getSiteInfo(),b.lcl=this.getProductLanguage(),b.fpid=c.default.getCookie("fingerprint_id"),w&&(w.length>256&&(w=w.substr(0,256)),b.rf=w),C&&(b.tk=C),b.lan=(A||I).toLowerCase();let L="0x0";if(T){let{width:R,height:P}=T;L=`${R}x${P}`}b.scr=L;let O=c.default.getCookie("first_ref");O&&(b.frf=O.slice(0,256))},getEnv(){return{...b,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return y},getDeviceId(){let{deviceId:S}=a.default.getState();return S?Promise.resolve(S):window.utils.ont?.getDevId?.()},toLocalStorage(S){let{key:T,value:C,maxAge:A}=S;E[T]=C,E._expires[T]=Date.now()+A,localStorage.ok_monitor=JSON.stringify(E)},removeLocalStorage(S){delete E[S],delete E._expires[S],localStorage.ok_monitor=JSON.stringify(E)},getClientValue(S){let T=sessionStorage.getItem(S);return T||this.getValueFromLocalStorage(S)},getValueFromLocalStorage(S){return Date.now()<E._expires[S]&&E[S]||""},syncUpLocalStorageToSessionStorage(S){let T=this.getValueFromLocalStorage(S);T&&sessionStorage.setItem(S,T)},shouldIgnoreAmpEvent(){return this.isIgnoreEnvironment()},getProductLanguage(){return c.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let S=this.__getOkGlobalSite().sign,T=this.__getOkGlobalSite().subSite;return S===u?!T||T===f?u:T.toLowerCase():S},isOKEx(){return this.__getOkGlobalSite().sign===u},isOKLink(){let S=this.__getOkGlobalSite();return S.sign===l||S.sign===u&&S.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===d},isWeb3(){return this.__getOkGlobalSite()?.is?.Web3===!0},isInSSR(){return _},isInBrowser(){return g},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},isPreEnv(){return this.getOkGlobal().envSign==="pre"},isIgnoreEnvironment(){if(!this.isInBrowser())return!0;let S=this.getOkGlobal(),T=S.broker&&S.broker.is,C=localStorage.simulatedTrading==="1",{okjp:A}=S.site&&S.site.is||{};return T||C||A===!0},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},isEnableDataFinder(){return this.isIgnoreEnvironment()?!1:this.isProdEnv()||window.location.search.includes("__okdatafinder_test")},isEnableDataFinderDebug(){return this.isProdEnv()||this.isIgnoreEnvironment()?!1:window.location.search.includes("__okdatafinder_test")},getTk(){return y&&window.jsbridge?window.jsbridge.getTK().then(S=>S||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")},getLastActivityTime(){let S=localStorage.getItem("_monitor_last_activity_time"),T=Number(S);return!T||Number.isNaN(T)?0:T},updateLastActivityTime(){let S=Date.now();localStorage.setItem("_monitor_last_activity_time",String(S))},getOrGenerateSessionId(){let S=localStorage.getItem("_monitor_sessionId"),T=this.getLastActivityTime(),C=Date.now();if(S&&C-T<18e5)return S;let A=String(Date.now());return localStorage.setItem("_monitor_sessionId",A),A}}},"../monitor/src/datafinder/constants.js":function(s,n,i){i.r(n),i.d(n,{DATA_FINDER_APPID_MAP:function(){return c},DATA_FINDER_PROJECT:function(){return a}});let a={okx:"okx",web3:"web3",internal_system:"internal_system",oklink:"oklink"},c={[a.okx]:10000010,[a.web3]:10000007,[a.oklink]:10000007,[a.internal_system]:10000009}},"../monitor/src/datafinder/index.js":function(s,n,i){i.r(n),i.d(n,{initDataFinder:function(){return y},initProjectInstance:function(){return _},reportDataFinderEvent:function(){return E}});var a=i("../monitor/src/common/variables.js"),c=i("../monitor/src/monitor.js"),l=i("../monitor/src/datafinder/constants.js"),u=i("../monitor/src/datafinder/libs.js"),f=i("../monitor/src/datafinder/utils.js");let d={},g={},_=async b=>{let S=await a.default.getTk(),T=await a.default.getDeviceId()||"";window.okDataFinder(`${b}.init`,{app_id:l.DATA_FINDER_APPID_MAP[b],channel_domain:c.default.dataFinderApiEndpoint||`${window.location.origin}/priapi/df`,enable_anonymousid:!0,enable_debug:a.default.isEnableDataFinderDebug(),log:a.default.isEnableDataFinderDebug()}),window.okDataFinder(`${b}.setAnonymousId`,T),window.okDataFinder(`${b}.config`,{user_unique_id:b===l.DATA_FINDER_PROJECT.web3?T:S,session_id:a.default.getOrGenerateSessionId(),app_version:a.default.getOkGlobal().assetsBuildVersion,okx_device_id:T}),window.okDataFinder(`${b}.start`),d[b]=!0,delete g[b]},y=async b=>{(!window?.okDataFinder||window.okDataFinder.q)&&await(0,u.default)();let S=(0,f.getDataFinderProject)(b);return g[S]?g[S]:d[S]?Promise.resolve():(g[S]=_(S),g[S])},E=async(b,S,T)=>{let C=(0,f.getDataFinderProject)(T);d[C]||await y(T);let A=localStorage.getItem("_monitor_sessionId"),I=a.default.getOrGenerateSessionId();A!==I&&window.okDataFinder(`${C}.config`,{session_id:I}),a.default.updateLastActivityTime(),window.okDataFinder(`${C}.config`,{language:a.default.getOkGlobal().locale});let w={...S,site:a.default.getSiteInfo()};window.okDataFinder(`${C}.${b}`,w)}},"../monitor/src/datafinder/libs.js":function(s,n,i){i.r(n),i.d(n,{default:function(){return y},loadDataFinderJs:function(){return _},setupDataFinder:function(){return g}});var a=i("../monitor/src/common/variables.js"),c=i("../monitor/src/common/event-bus.js");let l=!1,u=new c.default,f="LOAD_SUCCESS",d="LOAD_FAILED";function g(){let E="okDataFinder";if(window.LogAnalyticsObject=E,!window[E]){let b=function(){b.q.push(arguments)};b.q=b.q||[],window[E]=b}window[E].l=+new Date}function _(){return new Promise((E,b)=>{let S=()=>{u.emit(f),E()},T=P=>{u.emit(d),b(P)};l=!0,g();let{envSign:C,cdnBaseUrl:A}=a.default.getOkGlobal(),I=document.createElement("script");I.type="text/javascript",I.crossOrigin="anonymous",I.async=!0;let w="";switch(C){case"dev":w="cdndev";break;case"pre":w="cdnpre";break;case"daily":w="cdn";break;case"prod":w="cdn";break;default:w="cdn";break}let L="collect-pure-v5.2.9.js",O="collect-rangers-v5.2.9.js";a.default.isInExtension(),I.src=`./scripts/lib/${L}`,I.integrity="sha384-lpjOyUtkqNFTqLx2vLV9bia4eqVhhvlQPqjvoRmxp5WPVKhA4JDa6Rm5wfSZEm/6",I.onload=function(){if(l=!1,!window.okDataFinder||typeof window.okDataFinder!="function")return T("[DataFinder] Error: could not load SDK");S()},I.onerror=function(P){l=!1,T(P)};let R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(I,R)})}async function y(){if(l)return new Promise((E,b)=>{u.on(f,S=>{E(S)}),u.on(d,S=>{b(S)})});await _()}},"../monitor/src/datafinder/utils.js":function(s,n,i){i.r(n),i.d(n,{getDataFinderProject:function(){return l}});var a=i("../monitor/src/common/variables.js"),c=i("../monitor/src/datafinder/constants.js");let l=u=>u&&u in c.DATA_FINDER_PROJECT?u:a.default.isWeb3()||a.default.isOKLink()?c.DATA_FINDER_PROJECT.web3:a.default.isInternalSystem()?c.DATA_FINDER_PROJECT.internal_system:c.DATA_FINDER_PROJECT.okx},"../monitor/src/de-duplicate.js":function(s,n,i){i.r(n),i.d(n,{shouldReport:function(){return u}});let a={},c,l=f=>{c!==void 0&&clearTimeout(c),c=setTimeout(()=>{a={},c=void 0},f+500)},u=function(f){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,g=typeof f=="string"?f:f.action||f.anchor,_=+new Date,y=a[g]||0;return _-y<d?!1:(l(d),a[g]=_,!0)}},"../monitor/src/error.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/variables.js");let c=a.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];n.default={getErrorInfo(l){let{message:u,filename:f,lineno:d,colno:g,error:_}=l,y="";_&&_.stack?(y=_.stack,y.indexOf("@")!==-1&&(y=`${u} 
\r ${y}`)):(_||u)&&(y=`ThrowError: ${JSON.stringify(_||u)} 
\r at ${f}: ${d}: ${g}`);let E=encodeURIComponent(window.location.href);return{msg:u,file:f,line:d,col:g,stack:y,url:E}},isReported(l){let{file:u,line:f,col:d}=l,g=`${u}__${f}__${d}`;return c.includes(g)},rememberError(l){let{file:u,line:f,col:d}=l,g=`${u}__${f}__${d}`;c.unshift(g),c.length>50&&c.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(c)},0)}}},"../monitor/src/global/attrs.js":function(s,n,i){i.r(n);var a=i("../monitor/src/global/click.js"),c=i("../monitor/src/global/expose.js"),l=i("../monitor/src/common/constants.js");let{Configs:u}=l.default;n.default={listen(f){let d=g=>{f.logEvent({...g,category:"ok"})};this.preprocess(),a.default.listen(d,this),c.default.listen(d,this)},preprocess(){document.querySelectorAll(`[${u.ATTR_LISTEN}]`).forEach(d=>{let g=d.getAttribute(u.ATTR_LISTEN),_=g.indexOf(":");if(_>-1){let y=g.substring(0,_).trim(),E=g.substring(_+1).trim();y.split("+").forEach(S=>{d.setAttribute(`data-${S.trim()}`,E)}),d.removeAttribute(u.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/utils.js"),c=i("../monitor/src/common/constants.js");let{Actions:l,Configs:u}=c.default;n.default={listen(f,d){document.addEventListener("click",g=>{let{target:_}=g;_.getAttribute(u.ATTR_LISTEN)&&d.preprocess();let E=_.getAttribute(u.ATTR_CLICK);if(E){let b=a.default.parseTarget(E),{key:S,data:T}=b;S&&f({target:S,action:l.CLICK,params:T,extras:{area:T.area}})}})}}},"../monitor/src/global/expose.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/utils.js"),c=i("../monitor/src/common/constants.js");let l={},{Actions:u,Configs:f}=c.default;n.default={listen(d){this.trackFn=d;let g={threshold:[.5,1]},_=new window.IntersectionObserver(this.onSectionChange.bind(this),g);document.querySelectorAll(`[${f.ATTR_EXPOSE}]`).forEach(E=>{_.observe(E)}),this.observer=_},onSectionChange(d){d.forEach(g=>{let{target:_,isIntersecting:y}=g,E=_.getAttribute(f.ATTR_EXPOSE),b=a.default.parseTarget(E),{key:S,data:T}=b,C=Number(g.time.toFixed(2));if(y){let A=setTimeout(()=>{let I=l[S],w=_.getBoundingClientRect(),{innerHeight:L,innerWidth:O}=window,{top:R,bottom:P,left:q,right:M}=w;if((R>=0&&R<=L||P>=0&&P<=L)&&(q>=0&&q<=O||M>=0&&M<=O)){let{area:Fe,elementType:Be,actionType:Ze}=T;delete T.area,delete T.elementType,delete T.actionType,this.trackFn({target:S,action:u.EXPOSE,params:{...T,time:C},extras:{area:Fe},actionType:Ze||"Show",elementType:Be,anchor:Be?S:""}),this.observer.unobserve(_),I.forEach(gt=>{window.clearTimeout(gt)}),delete l[S]}else I.shift()},f.EXPOSE_DURATION);l[S]||(l[S]=[]),l[S].push(A)}})}}},"../monitor/src/lib/libs-amplitude.js":function(s,n,i){i.r(n),i.d(n,{default:function(){return _}});var a=i("../monitor/src/common/variables.js"),c=i("../monitor/src/common/event-bus.js");let l=!1,u=new c.default,f="LOAD_SUCCESS",d="LOAD_FAILED";function g(){return new Promise((y,E)=>{let b=()=>{u.emit(f),y()},S=O=>{u.emit(d),E(O)};l=!0;let{envSign:T,cdnBaseUrl:C}=a.default.getOkGlobal(),A=document.createElement("script");A.type="text/javascript",A.crossOrigin="anonymous",A.async=!0;let I="";switch(T){case"dev":I="cdndev";break;case"pre":I="cdnpre";break;case"daily":I="cdn";break;case"prod":I="cdn";break;default:I="cdn";break}let w="amplitude-analytics-browser-2.11.8.js";a.default.isInExtension(),A.src=`./scripts/lib/${w}`,A.integrity="sha384-xqvDNRHTNTbqEsaCHJBuL+ohIAflZIyjUW7MnSD/Bl20mW11ri9zTr8XDYF2MiS2",A.onload=function(){if(l=!1,!window.amplitude)return S("[Amplitude] Error: could not load SDK");b()},A.onerror=function(O){l=!1,S(O)};let L=document.getElementsByTagName("script")[0];L.parentNode.insertBefore(A,L)})}async function _(){if(l)return new Promise((y,E)=>{u.on(f,b=>{y(b)}),u.on(d,b=>{E(b)})});await g()}},"../monitor/src/logger.js":function(s,n,i){i.r(n),i.d(n,{default:function(){return y}});var a=i("../monitor/src/common/constants.js"),c=i("../monitor/src/common/cookie.js"),l=i("../monitor/src/common/utils.js"),u=i("../monitor/src/common/variables.js"),f=i("../monitor/src/monitor.js");let d=null,g=!1;class _{constructor(b){u.default.setEnv(b),this._category=b.product}logPV(){if(g)return Promise.resolve();let b={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return g=!0,this.sendLogs(b)}logEvent(b){let S={},{category:T,action:C,target:A,params:I,extras:w,_m:L,anchor:O,elementType:R,actionType:P,tk:q}=b;if(Object.assign(S,{_ct:T,_act:C,_lb:encodeURIComponent(A||""),_anchor_en_name:encodeURIComponent(O||""),_element_type:encodeURIComponent(R||""),_action_type:encodeURIComponent(P||""),...this._getCommonData()}),S._tk=q||S._tk,l.default.isArray(I)){let M=0,J=0;I.forEach((Fe,Be)=>{if(l.default.isObject(Fe)){let{value:Ze,random:gt}=Fe,Ft=encodeURIComponent(Ze);gt?S[`_unlist${J++}`]=Ft:S[`_reser${M++}`]=Ft}else S[`_reser${Be}`]=encodeURIComponent(Fe)})}else if(l.default.valueExists(I)){let M=I;l.default.isObject(I)&&(M=JSON.stringify(I));let J=encodeURIComponent(M);S._v=J,S._reser0=J}if(w){w.page=encodeURIComponent(window.location.href);let M={};Object.keys(w).forEach(J=>{M[`__${J}`]=w[J]}),Object.assign(S,M)}return L&&(S._m=L),this.sendLogs(S)}_getCommonData(){let b={...u.default.getEnv()};localStorage._tk&&(b.tk=localStorage._tk);let{src:S}=sessionStorage,T=u.default.getClientValue("pageId"),C=u.default.getClientValue("channelId"),A=u.default.getClientValue("ref"),{deviceId:I=l.default.base64Id(),eventId:w=1,sequenceNumber:L=1}=JSON.parse(c.default.get("_monitor_extras")||"{}");c.default.set("_monitor_extras",JSON.stringify({deviceId:I,eventId:w+1,sequenceNumber:L+1}));let O=JSON.stringify({_amp_rejected:l.default.isTargetingCookiesRejected(),_device_id:I,_event_id:w,_sequence_number:L,_uuid:l.default.generateUUID()}),R={_cid:C,_web3_ref:A,_pgid:T,_source:S,_session_id:u.default.getOrGenerateSessionId(),_page_url:encodeURIComponent(window.location.href.slice(0,1024)),_initial_traffic_attribution:l.default.getInternalOktsBaggage(),_extras:encodeURIComponent(O)};return Object.keys(b).forEach(P=>{R[`_${P}`]=encodeURIComponent(b[P])}),R}sendLogs(b){let S=[];if(Object.keys(b).forEach(T=>{let C=b[T];l.default.valueExists(C)?S.push(`${T}=${C}`):delete b[T]}),u.default.isDevTestEnv()){let{console:T}=window;return T.groupCollapsed(`dev monitor: ${b._ct} > ${b._act}`),T.log(decodeURIComponent(JSON.stringify(b,null,2))),T.groupEnd(),Promise.resolve()}return u.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(T=>{if(T){let C=`_tk=${encodeURIComponent(T)}`,A=S.findIndex(I=>/^_tk/.test(I));A>-1?S[A]=C:S.push(C)}return this.addClientInfo(S.join("&"))}).catch(()=>this.addClientInfo(S.join("&"))):this.addClientInfo(S.join("&"))}addClientInfo(b){let S=`&_ts=${Date.now()}&_r=${Math.floor(l.default.cryptoRandom()*2147483648)}`,T=`${b}${S}`;return u.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(C=>{let A=C?`&_app_info=${encodeURIComponent(C)}`:"";return T=`${b}${A}${S}`,this.sendRequest(T)}).catch(C=>this.sendRequest(T)):this.sendRequest(T)}getApiPath(){return a.default.internalCategory.includes(this._category)?a.default.API_PATH.INTERNAL:u.default.isOKLink()?a.default.API_PATH.OKLINK:a.default.API_PATH.OKX}async sendRequest(b){let S=await u.default.getDeviceId(),T=`_mv=${a.default.DEBUG_KEY}&_uid=${encodeURIComponent(S)}&${b}`;return u.default.updateLastActivityTime(),new Promise((C,A)=>{let I=u.default.isInExtension()&&!u.default.isMiniApp(),w=this.getApiPath();if(navigator.sendBeacon&&!I)navigator.sendBeacon(w,T),C();else{let L=I?f.default.dwApiEndpoint||`https://www.oklink.com${a.default.API_PATH.OKX}`:w,O=new XMLHttpRequest;O.open("POST",L),O.setRequestHeader(a.default.REQUEST_HEADERS.deviceId,S),O.onload=()=>O.status!==200?A(new Error(`Error ${O.status}:${O.statusText}`)):C(),O.onerror=()=>{A(new Error(`Error ${O.status}: ${O.statusText}`))},O.send(T),setTimeout(()=>{C()},150)}})}}function y(E){return d||(d=new _(E),d)}},"../monitor/src/monitor.js":function(s,n,i){i.r(n),i.d(n,{default:function(){return S}});var a=i("../monitor/src/common/utils.js"),c=i("../monitor/src/common/constants.js"),l=i("../monitor/src/common/variables.js"),u=i("../monitor/src/error.js"),f=i("../monitor/src/logger.js"),d=i("../monitor/src/global/attrs.js"),g=i("../monitor/src/amplitude.js"),_=i("../monitor/src/store.js"),y=i("../monitor/src/de-duplicate.js"),E=i("../monitor/src/datafinder/index.js");let b=!1;class S{constructor(C){l.default.isInSSR()||(this.commonParams=C.commonParams||{},this._logger=(0,f.default)(C),this._category=C.product,C.withPV&&this.delayReportPV(),b||(this._initEventListener(),b=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(C){S.apiEndpoint=C}setDWApiEndpoint(C){S.dwApiEndpoint=C}setDataFinderApiEndpoint(C){S.dataFinderApiEndpoint=C}report(C){let{type:A,value:I}=C;if(l.default.isInSSR())return Promise.resolve();let w=I;return(a.default.isObject(w)||a.default.isArray(w))&&(w=JSON.stringify(w)),this._logger.logEvent({category:"performance",action:A,params:w})}logPV(){return this._logger.logPV()}logDataFinder(C,A,I){return l.default.isInSSR()?Promise.resolve():(0,E.reportDataFinderEvent)(C,A,I)}logAmplitudeEvent(C,A,I){if(l.default.isInSSR()||l.default.shouldIgnoreAmpEvent())return Promise.resolve();let w="",L=!1;a.default.isObject(I)&&(w=I.ampProject,L=I.ignoreBackUp);let O={};for(let R in A)Object.prototype.hasOwnProperty.call(A,R)&&(O[R]=A[R]);if(O.monitor_after_navigation){delete O.monitor_after_navigation;let R=JSON.parse(sessionStorage.ampCacheEvents||"[]");return R.push([C,O]),sessionStorage.ampCacheEvents=JSON.stringify(R),Promise.resolve()}return g.default.getInstance(w).then(R=>{let P=l.default.getOrGenerateSessionId();String(R.getSessionId())!==P&&R.setSessionId(P),l.default.updateLastActivityTime(),R.logEvent(C,{...O,site:l.default.getSiteInfo()},{language:l.default.getOkGlobal().locale}),L||this.act(C,A,{isSyncAMP:!1})})}resetAmplitudeUser(){return l.default.isInSSR()?Promise.resolve():g.default.getInstance().then(C=>(C.reset(),Promise.resolve()))}track(C,A,I,w){if(l.default.isInSSR())return Promise.resolve();let L={category:this._category,action:I,target:A,params:w,extras:{area:C}};if(a.default.isObject(C)){let{area:O,action:R,target:P,params:q}=C;Object.assign(L,{action:R,target:P,params:q,extras:{area:O}})}return this._logger.logEvent(L)}act(C){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return l.default.isInSSR()||!(0,y.shouldReport)(C)?Promise.resolve():new Promise((w,L)=>{setTimeout(()=>{this._act(C,A,I).then(w,L)},0)})}async _act(C){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:w,...L}=this.commonParams||{},O={web_mode_okx:a.default.isInArray(c.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},P=Object.assign({},l.default.isOKEx()?O:{}),q=I?.tk||w,M={category:this._category,params:A,_m:"1"};a.default.isObject(A)&&(M.params=a.default.merge({...L,...P},A),P=a.default.merge(l.default.isOKLink()?{...L,...P}:P,A));let J;typeof C=="string"?(J=C,M.action=C):(J=C.action||C.anchor,M.action=J,M.anchor=C.anchor,M.actionType=C.actionType,M.elementType=C.elementType,M={...M,params:a.default.merge(M.params,C.params||{})},q=C.tk||q,P=a.default.merge(P,C.params)),M.tk=q;let{needDurationActions:Fe,needDurationActionParams:Be,actionTriggerTimes:Ze,setActionTriggerTimes:gt,setNeedDurationActionParams:Ft}=_.default.getState();if(l.default.isEnableAMP()&&I?.isSyncAMP){let Tr=C?.ampProject;this.logAmplitudeEvent(J,P,{ampProject:Tr,ignoreBackUp:!0})}if(a.default.isInArray(Fe,J))return Ze[J]=Date.now(),gt(Ze),Be[J]=M,Ft(Be),Promise.resolve("The event will be reported when the page is closed");if(l.default.isEnableDataFinder()&&C?.uploadCloudPlatform){let Tr=P||{},ci=C?.ampProject;this.logDataFinder(J,Tr,ci)}return this._logger.logEvent(M)}_initEventListener(){window.addEventListener("load",()=>{d.default.listen(this._logger)}),window.addEventListener("error",C=>{let A=u.default.getErrorInfo(C);u.default.isReported(A)||(this._logger.logEvent({category:"error",action:"report",extras:A}),u.default.rememberError(A))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:C,needDurationActionParams:A,actionTriggerTimes:I,setNeedDurationActions:w,setNeedDurationActionParams:L,setActionTriggerTimes:O}=_.default.getState();C.length&&C.forEach(R=>{A[R].params.duration=Date.now()-I[R],this._logger.logEvent(A[R])}),w([]),L({}),O({})})}initABTest(C){let A="ab_experiment";C?.exper_flagKey&&C?.exper_variant&&(Object.assign(this.commonParams,C),this.act(A))}setCommonParams(C){this.commonParams={...this.commonParams,...C}}triggerReportDuration(C){let{needDurationActions:A,setNeedDurationActions:I}=_.default.getState();a.default.isInArray(A,C)||(A.push(C),I(A))}}},"../monitor/src/store.js":function(s,n,i){i.r(n);var a=i("../monitor/src/common/statex.js");let c=(0,a.default)(l=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:u=>l(()=>({deviceId:u})),setNeedDurationActions:u=>l(()=>({needDurationActions:u})),setNeedDurationActionParams:u=>l(()=>({needDurationActionParams:u})),setActionTriggerTimes:u=>l(()=>({actionTriggerTimes:u}))}));n.default=c},"../monitor/src/web.js":function(s,n,i){i.r(n);var a=i("../monitor/src/amplitude.js"),c=i("../monitor/src/common/constants.js"),l=i("../monitor/src/common/seo.js"),u=i("../monitor/src/common/utils.js"),f=i("../monitor/src/common/variables.js"),d=i("../monitor/src/monitor.js"),g=i("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:_}=c.default,y=(E,b)=>{if(f.default.isInSSR())return;let{pathname:S}=window.location;sessionStorage.channelId=E,f.default.toLocalStorage({key:"channelId",value:E,maxAge:_}),b?(sessionStorage.referralSrc=b,f.default.toLocalStorage({key:"referralSrc",value:b,maxAge:_})):(sessionStorage.removeItem("referralSrc"),f.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=S,f.default.toLocalStorage({key:"pageId",value:S,maxAge:_})};n.default={monitor:{get amplitude(){return f.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((b,S)=>{S("Currently not a browser environment!")})}}:a.default},newInstance(E){return f.default.isInSSR()?{setApiEndpoint(){},setDWApiEndpoint(){},setDataFinderApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logDataFinder(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_act(){return Promise.resolve()},_initEventListener(){},initABTest(){},setCommonParams(){},triggerReportDuration(){},delayReportPV(){}}:new d.default(E)},saveChannelId(E){y(E)},getChannelId(){return sessionStorage.channelId},clearChannelId(){sessionStorage.removeItem("channelId"),f.default.removeLocalStorage("channelId")},getOktsBaggage(){return u.default.getFinalOktsBaggage(f.default.isWeb3()?"ref":"channelId")},getRef(){return sessionStorage.ref},setDeviceId(E){let{setDeviceId:b}=g.default.getState();b(E)},getChannelContextFromUrl(E){return u.default.getChannelContext(u.default.getParsedUrl(E))}},parseUrl(){let E=u.default.getParsedUrl(window.location.href),b=E.searchParams.get("src");b&&sessionStorage.setItem("src",b),f.default.isWeb3()?this.parseRef(E):this.parseChannelId(E)},parseChannelId(E){let b=u.default.getChannelIdByUserAgent(),S=l.default.getSeoType(),T=u.default.getChannelContext(E),C=T.channelId,A=T.referralSrc,I=!1;if(f.default.isInDesktop()&&b&&(C=b,A="",I=!0),!C&&S&&(C=S,I=!0),C=u.default.filterXSS(C),this.processOktsBaggage({urlObject:E,attributionKey:"channelId",attribution:C,shouldClearOktBaggage:I}),C){y(C,A);return}f.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(f.default.syncUpLocalStorageToSessionStorage("referralSrc"),f.default.syncUpLocalStorageToSessionStorage("pageId"))},processOktsBaggage(E){let{urlObject:b,attributionKey:S,attribution:T,shouldClearStorage:C}=E;try{if(C){sessionStorage.removeItem("oktsBaggage"),f.default.removeLocalStorage("oktsBaggage");return}if(T){let A=u.default.getOktsBaggageData(b),I=u.default.removeKeyFromString(A,S);f.default.toLocalStorage({key:"oktsBaggage",value:I,maxAge:_})}f.default.syncUpLocalStorageToSessionStorage("oktsBaggage")}catch(A){console.log("Error processing oktsBaggage:",A)}},parseRef(E){let b="";E.searchParams.forEach((T,C)=>{C.toLowerCase()==="ref"&&(b=T)});let S="/join/";if(!b&&E.pathname.includes(S)){let T=E.pathname.split(S)[1];T&&(b=T.split("/")[0])}b=u.default.filterXSS(b),b&&f.default.toLocalStorage({key:"ref",value:b,maxAge:_}),this.processOktsBaggage({urlObject:E,attributionKey:"ref",attribution:b,shouldClearStorage:!1}),f.default.syncUpLocalStorageToSessionStorage("ref")},init(){f.default.isInSSR()||(this.parseUrl(),!u.default.getCookie("first_ref")&&document.referrer&&u.default.setCookie("first_ref",document.referrer.slice(0,256),_),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(E){y(E)}}}},e={};function t(s){var n=e[s];if(n!==void 0)return n.exports;var i=e[s]={exports:{}};return r[s](i,i.exports,t),i.exports}(function(){t.d=function(s,n){for(var i in n)t.o(n,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:n[i]})}})(),function(){t.o=function(s,n){return Object.prototype.hasOwnProperty.call(s,n)}}(),function(){t.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})}}();var o={};return function(){t.r(o);var s=t("../monitor/src/web.js");s.default.init(),o.default=s.default.monitor}(),o=o.default,o}()})});p();h();p();h();p();h();p();h();var Nr={};function N(){let r;if(typeof globalThis<"u")r=globalThis;else if(typeof window<"u")r=window;else if(typeof globalThis<"u")r=globalThis;else throw new Error("unable to locate global object");return r}var U=r=>{let e=N(),t={_global_subscribe_list:{},_global_message_list:{},locale:"en_US"};return new Proxy(t,{get(o,s,n){if(s==="toJSON")return()=>{let c=e,l=c.okGlobal?{...c.okGlobal}:{},u=c._okGlobal?{...c._okGlobal}:{};return{...l,...u,...Nr}};if(s==="toString")return()=>JSON.stringify(n.toJSON());let i=[Nr,e._okGlobal,e.okGlobal];return r&&(i=r(i)),i.find(c=>c&&Object.prototype.hasOwnProperty.call(c,s))?.[s]},set(o,s,n){return Nr[s]=n,!0}})};p();h();var D=()=>Boolean(typeof window>"u"||x.env.SSR_ENV);p();h();p();h();var W=H(pt());p();h();p();h();p();h();p();h();p();h();p();h();p();h();p();h();p();h();var Nn=["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"];p();h();p();h();var Qn=H(Bo());p();h();var jn=H(Bo());p();h();function ui(r,e){var t,o;if(Array.prototype.indexOf)return r.indexOf(e);for(t=0,o=r.length;t<o;t++)if(r[t]===e)return t;return-1}function di(r,e,t){var o,s;if(Array.prototype.forEach)return r.forEach(e,t);for(o=0,s=r.length;o<s;o++)e.call(t,r[o],o,r)}function fi(r){return String.prototype.trim?r.trim():r.replace(/(^\s*)|(\s*$)/g,"")}function mi(r){var e=/\s|\n|\t/,t=e.exec(r);return t?t.index:-1}var G={indexOf:ui,forEach:di,trim:fi,spaceIndex:mi};var{FilterCSS:gi,getDefaultWhiteList:pi}=jn.default;function Un(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"],picture:["class"],figure:["class"],button:["type","class"]}}var $n=new gi;function hi(r,e,t){}function _i(r,e,t){}function Si(r,e,t){}function bi(r,e,t){}function Fn(r){return r.replace(Ci,"&lt;").replace(yi,"&gt;")}function Ei(r,e,t,o){if(t=Jn(t),e==="href"||e==="src"){if(t=G.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(e==="background"){if(Vt.lastIndex=0,Vt.test(t))return""}else if(e==="style"){if(kn.lastIndex=0,kn.test(t)||(Mn.lastIndex=0,Mn.test(t)&&(Vt.lastIndex=0,Vt.test(t))))return"";o!==!1&&(o=o||$n,t=o.process(t))}return t=Xn(t),t}var Ci=/</g,yi=/>/g,Ti=/"/g,Ii=/&quot;/g,Ai=/&#([a-zA-Z0-9]*);?/gim,xi=/&colon;?/gim,vi=/&newline;?/gim,Vt=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,kn=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Mn=/u\s*r\s*l\s*\(.*/gi;function Bn(r){return r.replace(Ti,"&quot;")}function Kn(r){return r.replace(Ii,'"')}function Gn(r){return r.replace(Ai,function(t,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function Wn(r){return r.replace(xi,":").replace(vi," ")}function Vn(r){for(var e="",t=0,o=r.length;t<o;t++)e+=r.charCodeAt(t)<32?" ":r.charAt(t);return G.trim(e)}function Jn(r){return r=Kn(r),r=Gn(r),r=Wn(r),r=Vn(r),r}function Xn(r){return r=Bn(r),r=Fn(r),r}function wi(){return""}function Li(r,e){typeof e!="function"&&(e=function(){});var t=!Array.isArray(r);function o(i){return t?!0:G.indexOf(r,i)!==-1}var s=[],n=!1;return{onIgnoreTag:function(i,a,c){if(o(i))if(c.isClosing){var l="[/removed]",u=c.position+l.length;return s.push([n!==!1?n:c.position,u]),n=!1,l}else return n||(n=c.position),"[removed]";else return e(i,a,c)},remove:function(i){var a="",c=0;return G.forEach(s,function(l){a+=i.slice(c,l[0]),c=l[1]}),a+=i.slice(c),a}}}function Di(r){for(var e="",t=0;t<r.length;){var o=r.indexOf("<!--",t);if(o===-1){e+=r.slice(t);break}e+=r.slice(t,o);var s=r.indexOf("-->",o);if(s===-1)break;t=s+3}return e}function Oi(r){var e=r.split("");return e=e.filter(function(t){var o=t.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),e.join("")}var Ri=Un(),Pi='"',Ni=$n,Q={whiteList:Ri,getDefaultWhiteList:Un,onTag:hi,onIgnoreTag:_i,onTagAttr:Si,onIgnoreTagAttr:bi,safeAttrValue:Ei,escapeHtml:Fn,escapeQuote:Bn,unescapeQuote:Kn,escapeHtmlEntities:Gn,escapeDangerHtml5Entities:Wn,clearNonPrintableCharacter:Vn,friendlyAttrValue:Jn,escapeAttrValue:Xn,onIgnoreTagStripAll:wi,StripTagBody:Li,stripCommentTag:Di,stripBlankChar:Oi,attributeWrapSign:Pi,cssFilter:Ni,getDefaultCSSWhiteList:pi};p();h();function ki(r){var e=G.spaceIndex(r),t;return e===-1?t=r.slice(1,-1):t=r.slice(1,e+1),t=G.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function Mi(r){return r.slice(0,2)==="</"}function ji(r,e,t){"use strict";var o="",s=0,n=!1,i=!1,a=0,c=r.length,l="",u="";e:for(a=0;a<c;a++){var f=r.charAt(a);if(n===!1){if(f==="<"){n=a;continue}}else if(i===!1){if(f==="<"){o+=t(r.slice(s,a)),n=a,s=a;continue}if(f===">"||a===c-1){o+=t(r.slice(s,n)),u=r.slice(n,a+1),l=ki(u),o+=e(n,o.length,l,u,Mi(u)),s=a+1,n=!1;continue}if(f==='"'||f==="'")for(var d=1,g=r.charAt(a-d);g.trim()===""||g==="=";){if(g==="="){i=f;continue e}g=r.charAt(a-++d)}}else if(f===i){i=!1;continue}}return s<c&&(o+=t(r.substr(s))),o}var Ui=/[^a-zA-Z0-9\\_:.-]/gim;function $i(r,e){"use strict";var t=0,o=0,s=[],n=!1,i=r.length;function a(d,g){if(d=G.trim(d),d=d.replace(Ui,"").toLowerCase(),!(d.length<1)){var _=e(d,g||"");_&&s.push(_)}}for(var c=0;c<i;c++){var l=r.charAt(c),u,f;if(n===!1&&l==="="){n=r.slice(t,c),t=c+1,o=r.charAt(t)==='"'||r.charAt(t)==="'"?t:Bi(r,c+1);continue}if(n!==!1&&c===o){if(f=r.indexOf(l,c+1),f===-1)break;u=G.trim(r.slice(o+1,f)),a(n,u),n=!1,c=f,t=c+1;continue}if(/\s|\n|\t/.test(l))if(r=r.replace(/\s|\n|\t/g," "),n===!1)if(f=Fi(r,c),f===-1){u=G.trim(r.slice(t,c)),a(u),n=!1,t=c+1;continue}else{c=f-1;continue}else if(f=Ki(r,c-1),f===-1){u=G.trim(r.slice(t,c)),u=Hn(u),a(n,u),n=!1,t=c+1;continue}else continue}return t<r.length&&(n===!1?a(r.slice(t)):a(n,Hn(G.trim(r.slice(t))))),G.trim(s.join(" "))}function Fi(r,e){for(;e<r.length;e++){var t=r[e];if(t!==" ")return t==="="?e:-1}}function Bi(r,e){for(;e<r.length;e++){var t=r[e];if(t!==" ")return t==="'"||t==='"'?e:-1}}function Ki(r,e){for(;e>0;e--){var t=r[e];if(t!==" ")return t==="="?e:-1}}function Gi(r){return r[0]==='"'&&r[r.length-1]==='"'||r[0]==="'"&&r[r.length-1]==="'"}function Hn(r){return Gi(r)?r.substr(1,r.length-2):r}var Jt={parseTag:ji,parseAttr:$i};var{FilterCSS:Wi}=Qn.default,{parseTag:Vi,parseAttr:Ji}=Jt;function Xt(r){return r==null}function Xi(r){var e=G.spaceIndex(r);if(e===-1)return{html:"",closing:r[r.length-2]==="/"};r=G.trim(r.slice(e+1,-1));var t=r[r.length-1]==="/";return t&&(r=G.trim(r.slice(0,-1))),{html:r,closing:t}}function Hi(r){var e={};for(var t in r)e[t]=r[t];return e}function Qi(r){var e={};for(var t in r)Array.isArray(r[t])?e[t.toLowerCase()]=r[t].map(function(o){return o.toLowerCase()}):e[t.toLowerCase()]=r[t];return e}function Ht(r){r=Hi(r||{}),r.stripIgnoreTag&&(r.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),r.onIgnoreTag=Q.onIgnoreTagStripAll),r.whiteList||r.allowList?r.whiteList=Qi(r.whiteList||r.allowList):r.whiteList=Q.whiteList,this.attributeWrapSign=r.singleQuotedAttributeValue===!0?"'":Q.attributeWrapSign,r.onTag=r.onTag||Q.onTag,r.onTagAttr=r.onTagAttr||Q.onTagAttr,r.onIgnoreTag=r.onIgnoreTag||Q.onIgnoreTag,r.onIgnoreTagAttr=r.onIgnoreTagAttr||Q.onIgnoreTagAttr,r.safeAttrValue=r.safeAttrValue||Q.safeAttrValue,r.escapeHtml=r.escapeHtml||Q.escapeHtml,this.options=r,r.css===!1?this.cssFilter=!1:(r.css=r.css||{},this.cssFilter=new Wi(r.css))}Ht.prototype.process=function(r){if(r=r||"",r=r.toString(),!r)return"";var e=this,t=e.options,o=t.whiteList,s=t.onTag,n=t.onIgnoreTag,i=t.onTagAttr,a=t.onIgnoreTagAttr,c=t.safeAttrValue,l=t.escapeHtml,u=e.attributeWrapSign,f=e.cssFilter;t.stripBlankChar&&(r=Q.stripBlankChar(r)),t.allowCommentTag||(r=Q.stripCommentTag(r));var d=!1;t.stripIgnoreTagBody&&(d=Q.StripTagBody(t.stripIgnoreTagBody,n),n=d.onIgnoreTag);var g=Vi(r,function(_,y,E,b,S){var T={sourcePosition:_,position:y,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(o,E)},C=s(E,b,T);if(!Xt(C))return C;if(T.isWhite){if(T.isClosing)return"</"+E+">";var A=Xi(b),I=o[E],w=Ji(A.html,function(L,O){var R=G.indexOf(I,L)!==-1,P=i(E,L,O,R);return Xt(P)?R?(O=c(E,L,O,f),O?L+"="+u+O+u:L):(P=a(E,L,O,R),Xt(P)?void 0:P):P});return b="<"+E,w&&(b+=" "+w),A.closing&&(b+=" /"),b+=">",b}else return C=n(E,b,T),Xt(C)?l(b):C},l);return d&&(g=d.remove(g)),g};var{whiteList:Yi,getDefaultWhiteList:zi,onTag:Zi,onIgnoreTag:qi,onTagAttr:ea,onIgnoreTagAttr:ta,safeAttrValue:ra,escapeHtml:oa,escapeQuote:na,unescapeQuote:sa,escapeHtmlEntities:ia,escapeDangerHtml5Entities:aa,clearNonPrintableCharacter:ca,friendlyAttrValue:la,escapeAttrValue:ua,onIgnoreTagStripAll:da,StripTagBody:fa,stripCommentTag:ma,stripBlankChar:ga,attributeWrapSign:pa,cssFilter:ha,getDefaultCSSWhiteList:_a}=Q,{parseTag:Sa,parseAttr:ba}=Jt;function Ea(r,e){var t=new Ht(e);return t.process(r)}var Yn={filterXSS:Ea,FilterXSS:Ht,whiteList:Yi,getDefaultWhiteList:zi,onTag:Zi,onIgnoreTag:qi,onTagAttr:ea,onIgnoreTagAttr:ta,safeAttrValue:ra,escapeHtml:oa,escapeQuote:na,unescapeQuote:sa,escapeHtmlEntities:ia,escapeDangerHtml5Entities:aa,clearNonPrintableCharacter:ca,friendlyAttrValue:la,escapeAttrValue:ua,onIgnoreTagStripAll:da,StripTagBody:fa,stripCommentTag:ma,stripBlankChar:ga,attributeWrapSign:pa,cssFilter:ha,getDefaultCSSWhiteList:_a,parseTag:Sa,parseAttr:ba};var Qt=Yn,bt=Qt.getDefaultWhiteList(),Ca=Qt.escapeAttrValue,kr={};Object.keys(bt).forEach(r=>{bt[r]=bt[r].concat(Nn)});function ya(r){let e=r?.mode||"escape",t=r?.whiteList,o=r?.allowHrefVariables||!1,s=bt;t&&(s={...bt,...t});let n=e==="escape";return new Qt.FilterXSS({onTagAttr(i,a,c,l){if(l&&i==="a"&&a==="href"&&(c.startsWith("okex://")||c.startsWith("okx://")||c.startsWith("okxtr://")))return`${a}="${c}"`;if(l&&o&&i==="a"&&a==="href"&&c.startsWith("{")&&c.endsWith("}"))return`${a}="${c}"`},onIgnoreTagAttr(i,a,c){if(a.startsWith("data-")){let l=n?Ca(c):c.replace(/</g,"").replace(/>/g,"");return`${a}="${l}"`}},css:!1,escapeHtml:i=>n?Qt.escapeHtml(i):i.replace(/</g,"").replace(/>/g,""),...r,whiteList:s})}function Ta(r,e){let t=JSON.stringify(e);return kr[t]||(kr[t]=ya(e)),kr[t].process(r)}var zn=Ta;p();h();var Ia=["javascript:","view-source:","\\s*j\\s*a\\s*v\\s*a\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*:\\s*"],Mr={};function Aa(r,e){let t=`${[...r].join(",")}|${e.join(",")}`;if(!Mr[t]){let o=Ia.concat(e).filter(n=>!r.has(n)),s=new RegExp(o.join("|"),"gi");Mr[t]=s}return Mr[t]}function xa(r,e){let t=r,o="",s=new Set(e?.keywordsWhiteList||[]),n=e?.keywordsBlackList||[],i=Aa(s,n);do o=t,t=t.replace(i,"");while(t!==o);return t}var Zn=xa;function jr(r,e){let t=zn(r,e);return t=Zn(t,e),t}function va(r){let e,t=r,o=0;do e=t,t=decodeURIComponent(t),o++;while(t!==e&&o<5);return{decodeValue:t,count:o}}function wa(r,e){let t=1,o=r;do t++,o=encodeURIComponent(o);while(t!==e);return o}function La(r){try{let{decodeValue:e,count:t}=va(r);return e===r?{isEncode:!1,count:0}:{isEncode:e,count:t}}catch{return{isEncode:!1,count:0}}}function Yt(r,e,t){let{enableXssPurify:o,mode:s}=e;if(!o||r==null)return t(r);let{isEncode:n,count:i}=La(String(r));if(n&&typeof n=="string"){let a=jr(n,{mode:s});return t(a===n?r:wa(a,i))}return t(jr(String(r),{mode:s}))}p();h();function et(...r){let e=r[0];for(let t=1;t<r.length;t++){let o=r[t];o&&Object.keys(o).forEach(s=>{e[s]=o[s]})}return e}p();h();var Da={get(r){let e=r;return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},set(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},qn=Da;p();h();p();h();var Oa=U(),Ra=D(),Re=N(),$={debug(){},info(){},warn(){},error(){},timeStart(){},timeEnd(){},init(){}},Pa=()=>{if(Re.ssrUtils&&Re.ssrUtils.logger){let r=Re.ssrUtils.logger;$.debug=(...e)=>r.debug?.(...e),$.info=(...e)=>r.info?.(...e),$.warn=(...e)=>r.warn?.(...e),$.error=(...e)=>r.error?.(...e),$.timeStart=(...e)=>r.timeStart?.(...e),$.timeEnd=(...e)=>r.timeEnd?.(...e)}},zt=({message:r,level:e,data:t})=>{let o={};t instanceof Error?o={error:t}:o={message:r,...t??{}};let s=Object.keys(o).find(i=>o[i]instanceof Error),n=s?o[s]:void 0;if(n){s&&delete o[s];let i=new Error;i.message=`${r} - ${n.message}`,i.name=n.name,i.stack=n.stack,Re.Sentry?.captureException(i,{...o,message:r,contexts:{report:{info:JSON.stringify(o)}}});return}Re.Sentry?.captureEvent({...o,message:r,level:e,contexts:{report:{info:JSON.stringify(o)}}})},Na=(r={})=>{let{dsn:e,version:t,traceId:o,injectableOptions:s={}}=Re?.__INIT_STATE__?.appContext||{},n=s?.reportOptions,i={};typeof n=="object"&&!Array.isArray(n)&&(i=n||{}),!(!e&&!r?.dsn&&!i.dsn)&&(Re.Sentry?.init({dsn:e,release:t,...r,...i},{debug:["dev","daily"].includes(Oa.envSign)}),Re.Sentry?.setTag("traceId",o),$.debug=(a,c)=>zt({message:a,level:"debug",data:c}),$.info=(a,c)=>zt({message:a,level:"info",data:c}),$.warn=(a,c)=>zt({message:a,level:"warn",data:c}),$.error=(a,c)=>zt({message:a,level:"error",data:c}),$.timeStart=console.time,$.timeEnd=console.timeEnd)};$.init=Ra?Pa:Na;$.init();p();h();var es=["path","domain","overwrite","sameSite","encrypt","maxAge","expires","httpOnly","secure","signed"];var Ve=U(),ka=D();function rs(r,e){if(typeof r=="number"){let t=r*24*60*60,o=t;return typeof e=="number"&&t>e&&(o=e),new Date(Date.now()+o*1e3)}else if(r instanceof Date){let t=r;if(typeof e=="number"){let o=new Date(Date.now()+e*1e3);r>o&&(t=o)}return t}}function ts(r,e){e.length&&$.info(r),$.info(`[cookieAlarm]: "cookieWhiteList length is ${e.length}`)}function Ur(r){let{name:e,apiType:t,type:o,defaultCookieInterceptLevel:s,defaultCookieInterceptMaxAge:n}=r||{},i=t==="instance",a=Ve?.cookieWhitelist||[];a.length===0&&(Ve=U(),a=Ve?.cookieWhitelist||[]);let c=i?Ve?.cookieInterceptLevel||s||0:Ve?.cookieInterceptLevel||0,l=i?Ve?.cookieInterceptMaxAge||n:Ve?.cookieInterceptMaxAge;if(e&&!a.includes(e)){let u=`[cookieAlarm]: "${e}" is not allowed to ${o}!`;if(c===1)ts(u,a);else if(c===2){ts(u,a);return}}return typeof l>"u"?!0:l}function os(r){let e=!1;return ka&&r&&Object.keys(r).every(s=>es.includes(s))&&(e=!0),e}var Et=N(),Ct=D(),ns=!Ct&&typeof document>"u",Ma={path:"/"},tt="ok_global",Je=class{constructor(e){m(this,"options");m(this,"converter");m(this,"attributes");m(this,"enableXssPurify");m(this,"mode");m(this,"initAttributes");m(this,"initConverter");this.options=e||{},this.converter=e?.converter||qn,this.attributes=e?.attributes||Ma,this.enableXssPurify=e?.enableXssPurify===void 0?!0:e.enableXssPurify,this.mode=e?.mode||"escape",this.initAttributes={value:Object.freeze(this.attributes)},this.initConverter={value:Object.freeze(this.converter)}}init(e){return new Je(e)}closeXssPurify(){this.enableXssPurify=!1}setMode(e){this.mode=e}validateProjectName(e){if(e===tt)throw new Error("ok_global is not allowed as a cookie name. Please use 'Cookies.g' instead.")}getApi(e,t={disableOkGlobal:!0}){if(arguments.length&&!e||(t?.disableOkGlobal&&this.validateProjectName(e),!Ur({apiType:"instance",type:"get",name:e,defaultCookieInterceptLevel:this.options?.cookieInterceptLevel,defaultCookieInterceptMaxAge:this.options?.cookieInterceptMaxAge})))return;if(Ct){let a=Et?.ssrUtils?.cookies?.get(e);return a&&Yt(a,{enableXssPurify:this.enableXssPurify,mode:this.mode},c=>c)}if(ns)return;let s=document.cookie?document.cookie.split("; "):[],n={};s.forEach(a=>{let c=a.split("="),l=c.slice(1).join("=");try{let u=decodeURIComponent(c[0]);n[u]=this.converter.get(l,u)}catch{}});let i=e?n[e]:n;return!i||!e?i:Yt(i,{enableXssPurify:this.enableXssPurify,mode:this.mode},a=>a)}setApi(e,t,o,s={disableOkGlobal:!0}){if(ns)return;s?.disableOkGlobal&&this.validateProjectName(e);let n=Ur({apiType:"instance",type:"set",name:e,defaultCookieInterceptLevel:this.options?.cookieInterceptLevel,defaultCookieInterceptMaxAge:this.options?.cookieInterceptMaxAge});if(!n)return;let i=os(o),a=e,c={...o};if(c=et({},this.attributes,c),c.expires){let u=rs(c.expires,n);u&&(c.expires=u.toUTCString())}a=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,encodeURIComponent);let l="";return Object.keys(c).forEach(u=>{!c[u]||(l+=`; ${u}`,c[u]!==!0&&(typeof c[u]=="number"&&(c[u]=String(c[u])),l+=`=${String(c[u]).split(";")[0]}`))}),Yt(t,{enableXssPurify:this.enableXssPurify,mode:this.mode},u=>{if(i)return Et?.ssrUtils?.cookies?.set(a,u,c);let f=`${a}=${this.converter.set(u,a)}${l}`;return document.cookie=f,f})}set(e,t,o){return this.setApi(e,t,o)}get(e){return e===void 0?this.getApi():this.getApi(e)}get g(){let e=this;return{set(t,o){if(Ct)return Et?.ssrUtils?.cookies?.g?.set(t,o);if(typeof t!="string"||!t||typeof o!="string"&&typeof o!="number")return!1;let s=e.getApi(tt,{disableOkGlobal:!1}),n={};if(s&&typeof s=="string")try{s=decodeURIComponent(s),n=JSON.parse(s)}catch{}return e.setApi(tt,JSON.stringify(Object.assign(n,{[t]:o})),{expires:1e3},{disableOkGlobal:!1})},get(t){if(Ct)return Et?.ssrUtils?.cookies?.g?.get(t);let o=e.getApi(tt,{disableOkGlobal:!1});try{return o&&typeof o=="string"?(o=decodeURIComponent(o),JSON.parse(o)[t]):void 0}catch{return}},remove(t){if(Ct){Et?.ssrUtils?.cookies?.g?.set(t,void 0);return}let o=e.getApi(tt,{disableOkGlobal:!1}),s={};if(o&&typeof o=="string")try{o=decodeURIComponent(o),s=JSON.parse(o)}catch{}s[t]&&(delete s[t],e.setApi(tt,JSON.stringify(s),{expires:1e3},{disableOkGlobal:!1}))}}}remove(e,t){this.set(e,"",et({},t,{expires:-1}))}withAttributes(e){return new Je({converter:this.initConverter.value,attributes:et({},this.initAttributes.value,e)})}withConverter(e){return new Je({converter:et({},this.initConverter.value,e),attributes:this.initAttributes.value})}},ss=new Je;var $r=ss;var Fr="ok_site_info",ja=N(),Kr=D(),Br=r=>r.split("").reverse().join(""),Ua=r=>Br(Kr?v.Buffer.from(r).toString("base64"):window.btoa(r)),$a=r=>{let e=Br(r);return Kr?v.Buffer.from(e,"base64").toString("utf-8"):window.atob(e)},Gr=(r=!0)=>{let e=$r.get(Fr);if(!e)return r?{}:"";try{return r?JSON.parse($a(e)):e}catch{}return{}},is=r=>{let e=Gr();Object.keys(r).forEach(o=>{e[o]=r[o]});let t=Ua(JSON.stringify(e));Kr?ja?.ssrUtils?.cookies?.set(Fr,t):$r.set(Fr,t)};var Fa=U(r=>[...r||[],{getSiteInfo:Gr,setSiteInfo:is}]),Y=Fa;var Zt=()=>{let{locale:r=""}=Y||{};return r.replace(/-/g,"_").toLowerCase()==="zh_cn"},as={returnString:!1,isConvertToZero:!1,exponentialAt:[-7,20]},cs=()=>Zt()?["\u4E07","\u4EBF"]:["M","B"],ls=()=>Zt()?[1e4,1e8]:[1e6,1e9],Pe={K:"K",M:"M",B:"B",T:"T",P:"P",E:"E",Z:"Z",Y:"Y"},Wr=[{min:0,max:10**3,sign:""},{min:10**3,max:10**6,sign:Pe.K},{min:10**6,max:10**9,sign:Pe.M},{min:10**9,max:10**12,sign:Pe.B},{min:10**12,max:10**15,sign:Pe.T},{min:10**15,max:10**18,sign:Pe.P},{min:10**18,max:10**21,sign:Pe.E},{min:10**21,max:10**24,sign:Pe.Z},{min:10**24,max:1/0,sign:Pe.Y}],us=[{min:1,max:100,digit:4},{min:100,max:1e5,digit:2},{min:1e5,max:1e6,digit:1},{min:1e6,max:1/0,digit:0}],ds=5,Vr=15;p();h();var fs=H(pt());function ie(r){return r&&+r}function Xe(r){return typeof r!="string"&&typeof r!="number"||`${r}`.trim().length===0?!0:Number.isNaN(Number(r))}function Jr(r,e){return e&&(r===void 0||Number.isNaN(r)||r===""||r===null)?0:r}function qt(r,e){return!e&&r.endsWith("0")?new fs.default(r).toFixed():r}var Xr=r=>Object.prototype.toString.call(r)==="[object Object]";var Hr=class{constructor(e){m(this,"calcConfig");m(this,"bigNumber");m(this,"BigNumber",W.BigNumber);m(this,"convertNum",e=>{let{isConvertToZero:t}=this.calcConfig;return Jr(e,t)});m(this,"config",e=>{let{calcConfig:t}=this;this.calcConfig={...t,...e}});m(this,"add",(e,t,o)=>{let{returnString:s}=o||this.calcConfig,n=this.bigNumber(e).plus(this.convertNum(t));return s?n.toFixed():n.toNumber()});m(this,"sub",(e,t,o)=>{let{returnString:s}=o||this.calcConfig,n=this.bigNumber(e).minus(this.convertNum(t));return s?n.toFixed():n.toNumber()});m(this,"mul",(e,t,o)=>{let{returnString:s}=o||this.calcConfig,n=this.bigNumber(e).times(this.convertNum(t));return s?n.toFixed():n.toNumber()});m(this,"div",(e,t,o)=>{let{returnString:s}=o||this.calcConfig;this.calcConfig.decimalPlaces=40;let n=this.bigNumber(e).div(this.convertNum(t));return s?n.toFixed():n.toNumber()});m(this,"safeDiv",(e,t,o)=>{let{returnString:s}=o||this.calcConfig;return Number(this.convertNum(t))===0?s?"0":0:this.div(e,this.convertNum(t),o)});m(this,"pow",(e,t,o)=>{let{returnString:s}=o||this.calcConfig;if(!Number.isInteger(+t))throw new Error("Exponent not an integer");if(+t<0)throw new Error("Exponent need more than 0");let n=this.bigNumber(e).exponentiatedBy(t);return s?n.toFixed():n.toNumber()});m(this,"digitLength",e=>this.bigNumber(e).dp());m(this,"ceilTruncate",(e,t,o=!0)=>{let s=ie(t);if(!o){let n=this.bigNumber(e).toFixed(Math.min(s,Number(this.digitLength(e))),W.BigNumber.ROUND_CEIL);return qt(n,o)}return this.bigNumber(e).toFixed(s,W.BigNumber.ROUND_CEIL)});m(this,"floorTruncate",(e,t,o=!0)=>{let s=ie(t);if(!o){let n=this.bigNumber(e).toFixed(Math.min(s,this.digitLength(e)),W.BigNumber.ROUND_FLOOR);return qt(n,o)}return this.bigNumber(e).toFixed(s,W.BigNumber.ROUND_FLOOR)});m(this,"truncate",(e,t,o=!0)=>{let s=ie(t);if(!o){let n=this.bigNumber(e).toFixed(Math.min(s,Number(this.digitLength(e))));return qt(n,o)}return this.bigNumber(e).toFixed(s)});m(this,"ceilMul",(e,t,o,s=!0)=>{let n=ie(o),i=this.bigNumber(e).times(t).toFixed(n,W.BigNumber.ROUND_CEIL);return s?i:this.bigNumber(i).toFixed(Math.min(n,Number(this.digitLength(i))),W.BigNumber.ROUND_FLOOR)});m(this,"floorMul",(e,t,o,s=!0)=>{let n=ie(o),i=this.bigNumber(e).times(t).toFixed(n,W.BigNumber.ROUND_FLOOR);return s?i:this.bigNumber(i).toFixed(Math.min(n,Number(this.digitLength(i))),W.BigNumber.ROUND_FLOOR)});m(this,"ceilDiv",(e,t,o,s=!0)=>{let n=ie(o),i=this.bigNumber(e).div(t).toFixed(n,W.BigNumber.ROUND_CEIL);return s?i:this.bigNumber(i).toFixed(Math.min(n,Number(this.digitLength(i))),W.BigNumber.ROUND_FLOOR)});m(this,"safeCeilDiv",(e,t,o,s)=>{let n=o||0;return Number(t)===0?this.ceilDiv(0,1,n,s):this.ceilDiv(e,t,n,s)});m(this,"floorDiv",(e,t,o,s=!0)=>{let n=ie(o),i=this.bigNumber(e).div(t).toFixed(n,W.BigNumber.ROUND_FLOOR);return s?i:this.bigNumber(i).toFixed(Math.min(n,Number(this.digitLength(i))),W.BigNumber.ROUND_FLOOR)});m(this,"safeFloorDiv",(e,t,...o)=>Number(t)===0?this.floorDiv(0,1,...o):this.floorDiv(e,t,...o));m(this,"toPlainString",e=>this.bigNumber(e).toFixed());m(this,"lt",(e,t)=>this.bigNumber(e).lt(this.convertNum(t)));m(this,"lte",(e,t)=>this.bigNumber(e).lte(this.convertNum(t)));m(this,"gt",(e,t)=>this.bigNumber(e).gt(this.convertNum(t)));m(this,"gte",(e,t)=>this.bigNumber(e).gte(this.convertNum(t)));m(this,"eq",(e,t)=>this.bigNumber(e).eq(this.convertNum(t)));m(this,"max",(...e)=>{let{returnString:t}=this.calcConfig;return t?W.BigNumber.max(...e).toFixed():W.BigNumber.max(...e).toNumber()});m(this,"min",(...e)=>{let{returnString:t}=this.calcConfig;return t?W.BigNumber.min(...e).toFixed():W.BigNumber.min(...e).toNumber()});m(this,"sigDigs",(e,t=5)=>{let o=this.bigNumber(e),s=o.precision(t);return o.precision()<t?o.toPrecision(t):s.toString()});this.calcConfig={...as,...e};let t=W.BigNumber.clone();this.bigNumber=o=>{let{isConvertToZero:s,exponentialAt:n,decimalPlaces:i}=this.calcConfig;return n&&t.config({EXPONENTIAL_AT:n}),i&&t.config({DECIMAL_PLACES:i}),new t(Jr(o,s))}}},er=Hr;p();h();var oe=H(pt());p();h();p();h();var Ns=H(pt());p();h();var ms=D(),yt=N();function tr(){let r=yt.okMarkLocaleVarSign;return ms||!r}function z(r,e=yt.okMarkLocaleVarSign||"",t){return!ms&&typeof yt?.getFalconNeededRes=="function"&&yt.getFalconNeededRes(t,r),tr()||!r?r:yt.okMarkLocale?.(r,e)||r}p();h();p();h();p();h();p();h();var ae=H(Wo()),Se=H(qe());p();h();var Ba="//static.coinall.ltd",Qr="//okg-pub-hk.oss-cn-hongkong.aliyuncs.com",Ka=()=>{let r=U(),{cdnBaseUrl:e=""}=r;(r.envSign==="daily"||r.envSign==="dev")&&(e=Qr);let t=e||Ba;return{BASE_URL_PUBLISH:`${t}/cdn/i18n/web`,BASE_URL_PREVIEW:`${t}/cdnpre/i18n/web`,BASE_URL_NOCDN_PUBLISH:`${Qr}/cdn/i18n/web`,BASE_URL_NOCDN_PREVIEW:`${Qr}/cdnpre/i18n/web`,LANGUAGE_VERSIONS:r.i18nVersion||{}}},_e=Ka;p();h();var{showKey:Ga,showKeyMode:gs,preview:Wa}=!D()&&typeof sessionStorage<"u"?sessionStorage:{},Va=Ga==="777",Ja=gs==="1",Xa=gs==="2",Ha=Wa==="1",ps={isInDevMode:!1,usingRemote:!1,fetchBaseUrl:_e().BASE_URL_PUBLISH,isShowKeyMode:Va,isShowKeyTips:Ja,isShowPureKey:Xa,isPreview:Ha,partsDataProvided:!1,hasLoadedModules:[],localeStore:{main:{}},localeDevStore:{main:{}},baseInitState:{fetchDone:!1,didMount:!1,didMountFns:[],errorTimes:0},localeState:{fetchModules:[],fetchConfigs:[]},SSRProviderModule:"SSRProviderModule"},Ne=r=>{Object.assign(ps,r)},k=ps;var Qa=/[\n]/g,Ya=/\{(\w+)}|(\n)|(\\n)+/g,Yr=/<\/?[a-z][\s\S]*>/i,za=/(\n)|(\\n)/g,_s="en_US",Zr=N();function Ss(){return tr()?"":"data-locale-"}function hs(r){let{isShowKeyMode:e}=k,t=Ss(),o=[],s=0,n,i=0;for(;n=Qa.exec(r);){let[a,c]=n,{index:l}=n;s<l&&o.push((0,ae.jsx)(Se.Fragment,{children:r.slice(s,l)},`${t}${i++}`)),c||o.push((0,ae.jsx)(Se.Fragment,{children:(0,ae.jsx)("br",{})},`${t}${i++}`)),s=l+a.length}return s<r.length&&o.push((0,ae.jsx)(Se.Fragment,{children:r.slice(s)},`${t}${i}`)),e?o:(0,ae.jsx)(Se.Fragment,{children:o},`${t}${i}`)}function bs(r,e){let t=Ss(),{isShowKeyMode:o}=k,s=[],n=0,i,a=0;if(typeof r=="string"){for(;i=Ya.exec(r);){let[c,l]=i,{index:u}=i;n<u&&s.push((0,ae.jsx)(Se.Fragment,{children:r.slice(n,u)},`${t}${a++}`)),(Object.keys(e||{})||[]).length!==0&&e?.[l]!==void 0&&e?.[l]!==null&&s.push((0,ae.jsx)(Se.Fragment,{children:e[l]},`${t}${a++}`)),l===void 0&&s.push((0,ae.jsx)(Se.Fragment,{children:(0,ae.jsx)("br",{})},`${t}${a++}`)),n=u+c.length}n<r.length&&s.push((0,ae.jsx)(Se.Fragment,{children:r.slice(n)},`${t}${a}`))}return o?s:(0,ae.jsx)(Se.Fragment,{children:s},`${t}${a}`)}function Z(r,e){let{i18nModulePrefix:t=""}=U(),o=new RegExp(`^${t}`);return t&&!e?r&&(r.startsWith(t)?r:`${t}${r}`):e&&t&&r&&r.startsWith(t)?r.replace(o,""):r}function qr(r,e){let t=`${r}`?.toLowerCase()?.replace(/-/g,"_"),o=/[\u4e00-\u9fa5]/gi;return t==="zh_cn"||t==="zh_tw"?!o.test(e):!1}function It(){try{if(!D()){let r=window.javaweb_locale||null;if(r)return r=r.replace(/\n/g,"\\n"),JSON.parse(r)}return null}catch{return null}}function Es(r,e,t,o,s){let n=setTimeout(()=>{window[`${r}`]||(t(e,o,s),clearTimeout(n))},1e3)}function Ie(r,e,t="i18n"){let o=!D()&&Zr?.location?.pathname||"",s=`${t} -- ${o?`${r} -- ${o}`:r}`;e&&(s=`${s} -- ${e}`);let n=typeof e=="object",i=typeof e=="object"&&e?.devid?e.devid:!D()&&typeof localStorage!==void 0&&localStorage.devid||"",a=n?{...e,devid:i}:{message:e,devid:i};$.info(s,{message:a,customConfig:{error:{type:r},project:{id:243,token:"2b65098fbd898b1419f8241753fbf146"}}})}function Tt(r,e,t,o=!1){let{isShowKeyMode:s,isShowPureKey:n,localeState:i}=k,a=Zr.okMarkLocaleTextSign,{LANGUAGE_VERSIONS:c}=_e();if(!s)return z(e||"",a,{noNeedFilter:!0});if(n)return z(r,a,{noNeedFilter:!0});let l=t,u=i.fetchConfigs[0];if(!u)return z(e,a,{noNeedFilter:!0});l||(l=u.project);let{site:f}=u,{version:d}=u,g=c[l];return g&&(d=g),o?`showkeyWithJSX?key=${r}?site=${f}?partName=${t}?project=${l}?version=${d}?content=${e}?showkeyWithJSX`:`showkey?key=${r}?site=${f}?partName=${t}?project=${l}?version=${d}?content=${e}?showkey`}function zr(r){return Object.prototype.toString.call(r).includes("String")}function Cs(r={}){let{content:e}=r,{key:t,moduleName:o,handler:s={},useBr:n,withJSX:i,values:a={},currLocale:c,from:l="i18n"}=r;if(!e)return Tt(t,e,o);if(Zr?.getFalconNeededRes&&z(e,"",{originContent:!0,msg:{project:o,key:t,content:e}}),!s.hasBr&&Yr.test(e)&&n&&(e=zr(e)?e.replace(za,""):e),i)return Tt(t,e,o,i);if((Object.keys(a)||[]).length===0)return n&&zr(e)&&e.indexOf(`
`)>-1&&!s.hasBr&&!Yr.test(e)?hs(e):Tt(t,e,o,i);let f="";return f=ys({project:o,locale:c?.toLowerCase()},t,a,!0,l),n&&zr(f)&&f.indexOf(`
`)>-1&&!s.hasBr&&!Yr.test(e||"")?hs(f):Tt(t,f,o,i)}var Ae=N(),Za=typeof Ae=="object"&&Ae!==null&&Ae.Object===Object&&Ae,qa=typeof Ae=="object"&&Ae!==null&&Ae.Object===Object&&Ae,ec=typeof self=="object"&&self!==null&&self.Object===Object&&self,pd=qa||Za||ec||Function("return this")();function eo(r,e,t,o){let{locale:s,ipRegion:n,envSign:i,langPath:a,userAgent:c,site:l}=Y||{};Ie(r,{project:Ae.__INIT_STATE__?.appContext?.project,locale:s,ipRegion:n,envSign:i,langPath:a,userAgent:c,site:l,message:t,devid:o},e)}p();h();var tc=N(),rr=tc?.crypto,ke={mathRandom:()=>Math.random(),cryptoRandom:r=>{let{bytesLength:e=1,UnitArray:t=Uint32Array}=r||{},o=new t(e);if(rr)return rr.getRandomValues(o);let s=2**(t.BYTES_PER_ELEMENT*8)-1;for(let n=0;n<e;n++)o[n]=Math.floor(Math.random()*s);return o},get:r=>{let{useMathRandom:e=!1}=r||{};if(e)return ke.mathRandom();if(rr){let t=new Uint32Array(1);return rr.getRandomValues(t),t[0]/2**32}return ke.mathRandom()}};function Ts(r,e){if(D())return e;let o=navigator?.userAgent?.match(/Chrome\/(\d+)/)?.[1];return(o==="88"||o==="89")&&r==="zh-CN"?e.replace("ddHH","ddhh"):e}function Is(r){let e=/<\s*(\/)?\s*([a-z]+)(?:\s+[^\/]+(?:\s*=\s*(?:[^/]+)|\"\S+\"|\'\S+\')?)?\s*(\/)?\s*>/gi,t={},o={},s=0,n=r,i=[],a=e.exec(r);for(;a!==null;)i.push(a),a=e.exec(r);return i.forEach(([c,l,u,f])=>{if(f)return;let d="";t[u]?(d=`</${t[u]}>`,Reflect.deleteProperty(t,u)):(t[u]=`tmp${s++}`,o[t[u]]={matchText:c,isClose:!!f,isEnd:!!l,tag:u},d=`<${t[u]}>`),n=n.replace(c,d)}),{res:n,tagMaps:o}}function As(r){return r&&["currency","percent","compact"].includes(r)}p();h();function xs(r){let e=/\[?(GMT|UTC|)(\+|-)([0-9]+)\]?/g;return/(GMT)[^+-]/.test(r)?r?.replace(/GMT/,"UTC"):r.replace(e,(s,n,i,a)=>a==="0"?"UTC":`(UTC+${a})`)}var to={"tr-tr":(r,e)=>{let t=e;return r.startsWith("MMdd")&&(t=e.replace("/",".")),r.includes("z")&&(t=xs(e)),t},default:(r,e,t)=>{let o=e;return r.includes("z")?o=xs(e):t.includes("ar-")&&(o="\u200F"+o),o}};function vs(r,e,t){let o=r.toLowerCase();return to[o]!==void 0?to[o](e,t,o):to.default(e,t,o)}p();h();var nt=H(pt());p();h();p();h();var At="global",ws="PLEASE_INIT_INTL",ro="NOT_A_NUMBER";var ce={currency:"currency",percent:"percent",compact:"compact"},or={ceil:"ceil",floor:"floor"};var oo=null,rt=N();function re(r=Y?.locale||""){return r?r.replace(/_/g,"-"):"en-US"}function X(r){let e=r?.project||At;return`${re(r?.locale)}@${e}`}function be(){return!!(D()&&rt?.ssrUtils?.setCache)}function xt(){return!!(D()&&rt?.ssrUtils?.globalStore)}function vt(r="SSRProviderModule",e){return e?rt?.ssrUtils?.globalStore?.set(r,e):rt?.ssrUtils?.globalStore?.get(r)}function ot(r,e){return e?rt?.ssrUtils?.setCache?.(`blade@localeStore@${r}`,e):rt?.ssrUtils?.getCache?.(`blade@localeStore@${r}`)}var te={};function V(r,e){if(e?.useSington&&te[X(e)])return;let t=Ko(),o=Go({locale:re(e?.locale),messages:r,onError:s=>{oo=s}},t);if(be()&&e?.from){ot(X(e),o);return}te[X(e)]=o}function Ls(){oo=null}function Ds(){return oo}p();h();function rc(r){let e=["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],t="",o=r;for(;o>0;)t=e[o%10]+t,o=Math.floor(o/10);return`0${t}`}function Os(r,e){let{smallDigitalSymbol:t}=e;if(typeof r!="string")return r;let o=r.indexOf(t);if(o===-1||r.indexOf(t,o+1)!==-1)return r;let s=r.slice(o+1),n=0;for(;n<s.length&&s[n]==="0";)n++;if(n<4)return r;let i=r.slice(0,o),a=rc(n)+s.slice(n);return`${i}${t}${a}`}var oc={"en-in":()=>({groupSize:3,secondaryGroupSize:2}),"hi-in":()=>({groupSize:3,secondaryGroupSize:2}),"es-es":r=>({groupSize:r?.length===4?0:3}),"es-ar":r=>({groupSize:r?.length===4?0:3}),"pl-pl":r=>({groupSize:r?.length===4?0:3}),"pt-pt":r=>({groupSize:r?.length===4?0:3})};function no(r){let e=r?.bgValue?.e,t=!!`${r?.value}`.split("").find(u=>u==="."),o=/e[+-]|e\d/.test(`${r?.value}`),s=t&&!o?`${r?.value}`:r.bgValue.toFormat({groupSeparator:"",decimalSeparator:"."}),[n,i]=s?.trim().split("."),a=i?i.length:0;e&&e<0&&i&&Math.abs(e)>i.length&&(a=Math.abs(e)+2);let c={};(typeof r?.useGrouping!="boolean"||r?.useGrouping)&&(c=oc[r.locale.toLowerCase()]?.(n)||{groupSize:3});let l={decimalSeparator:r?.smallDigitalSymbol,groupSeparator:r?.micrometerSymbol,...c};return{decimalLen:a,bgFormatConfig:l}}function so(r,e,t){let o=r.replace("-",""),s=e.replace(/0/g,"").replace(/\d/,o),n={"es-419":()=>/\d%/.test(s)?s.replace(/%/,"\xA0%"):s};return n[t]&&n[t]()||s}function nc(r){let{needZero:e,digit:t}=r,o=0;return e&&(o=t),o}function sc(r){let{digit:e}=r,t=2;return e==0?t=0:e&&(t=e),t}function ic(r){switch(r){case or.ceil:return nt.default.ROUND_CEIL;case or.floor:return nt.default.ROUND_FLOOR;default:return nt.default.ROUND_HALF_UP}}function ac(r){return r===0?0:r}function cc(r){let e=r?.match(/\d/g);return e?e.length:-1}function lc(r,e){try{let t=`${Number(r)}`,{res:o,roundingMode:s,digit:n=2,needZero:i,locale:a,micrometerSymbol:c,smallDigitalSymbol:l,useGrouping:u}=e,f=o.replace(/(\d)[\s,.](\d)/g,(L,O,R)=>O+R).replace(/-/,""),d=new RegExp(`\\${c}|\\+`,"g"),g=o?.replace(d,""),_=g?.indexOf(l);g?.includes(l)||(_=cc(g));let y=new RegExp(`(.{${_}})`),E=t?.replace(/\.|\+/,"")?.replace(y,"$1."),b=new nt.default(E),S=ac(n),T=b.toFixed(S,ic(s)),C=new nt.default(T),{bgFormatConfig:A}=no({bgValue:b,micrometerSymbol:c,smallDigitalSymbol:l,locale:a,value:t,useGrouping:u}),I;return typeof i>"u"||i?I=C.toFormat(S,A):I=C.toFormat(A),f.replace(/[\d]+/g,I)}catch(t){throw new Error(`Number short err: ${t}`)}}function io(r,e,t){let{style:o,notation:s}=e,n=nc(e),i=sc(e),a=e?.roundingMode,c={},l=r;if(o===ce.percent)l=1,r<0&&(l=-1),c={minimumFractionDigits:0,style:e?.style};else if(s===ce.compact){let{digit:u,needZero:f,micrometerSymbol:d="",smallDigitalSymbol:g="",useGrouping:_}=e;c={notation:ce.compact,compactDisplay:"short",minimumFractionDigits:20,maximumFractionDigits:20};let y=te[X({locale:t})].formatNumber(l,c);return lc(l,{digit:u,res:y,roundingMode:a,needZero:f,locale:t,micrometerSymbol:d,smallDigitalSymbol:g,useGrouping:_})}else c={style:e?.style,currency:e?.currency,currencyDisplay:"narrowSymbol",minimumFractionDigits:n,maximumFractionDigits:i,roundingMode:a};return te[X({locale:t})].formatNumber(l,c)}function He(r,e,t){let o=r,{isRTL:s=!1}=U(),{signDisplay:n=!1,zeroSign:i="+"}=t||{};return n&&(e>0?o=`+${o}`:e==0&&i&&(o=`${i}${o}`)),s&&(o=`\u200F\u200E${o}\u200F`),o}p();h();var uc=["ar","he","fa","ur","ks","ps","ug","pa","sd"],Ps=(r,e,t)=>{let o=1,s=Math.abs(e);return(r.length>1&&r!=="-1"||s>1||s===0)&&(o=2),(/^-/.test(r)||e===0&&t==="-")&&(o=-o),o},Rs=(r,e)=>{let t,o=Math.abs(r);if(e){let s="\u0661",n="\u0662";t=o===1?new RegExp(`(?:${s}|1)`,"g"):new RegExp(`(?:${n}|2)`,"g")}else t=o===1?/1/g:/2/g;return t},ao=r=>{let{signDisplay:e=!1,number:t,zeroSign:o="+"}=r,s=String(t),n=s;return!s?.includes("+")&&!s?.includes("-")&&e&&(t!=0?n=`+${s}`:t==0&&o&&(n=`${o}${s}`)),n},nr=(r,e)=>{let{stringValue:t,numberValue:o,code:s,locale:n,currencyDisplay:i,currencySign:a="",signDisplay:c,zeroSign:l="+",invalid:u=!1}=e,f=String(r),d=t;o===0&&l==="-"&&(d=`-${t}`);let g=i==="narrowSymbol",_=uc.some(y=>n?.startsWith(y));if(u&&g&&_)return`\u200F\u200E${ao({number:d,signDisplay:c,zeroSign:l})}\xA0\u200F${a}\u200E\u200F`;try{V({},{locale:n,useSington:!0});let E=te[X({locale:n})];Ls();let b=c&&(o!==0||l),S=E.formatNumber(r,{style:"currency",currency:s,currencyDisplay:i,minimumFractionDigits:0,maximumFractionDigits:0,...b?{signDisplay:"always"}:{}}),T=Ds();if(T&&T.toString().includes("Invalid currency code"))return a?nr(r,{...e,code:"USD",invalid:!0}):ao({number:d,signDisplay:c,zeroSign:l});if(u){let I=Rs(r,_),w=t.replace(/^[+-]/,"");return S.replace(I,w).replace("US$",a).replace("$",a)}if(g&&_){let I=S.replace(/\u200F/g,"").replace(/\u200E/g,"").replace(/\u00A0/g,"").replace(/\u0661/g,"").replace(f,"");return`\u200F\u200E${d}\xA0\u200F${I}\u200E\u200F`}let C=Rs(r,_),A=t.replace(/^[+-]/,"");return S.replace(C,A)}catch{return d}},co=(r,e)=>{let t=U()?.isRTL,{currency:o=""}=e,{currencySign:s="",signDisplay:n,zeroSign:i,code:a,isSymbol:c=!0,forceLtr:l=!1}=e,u=ao({number:r,signDisplay:n,zeroSign:i});if(!c&&a&&(o=a),!o&&!s)return u;let f=o&&!s;if(t){let E=f?` ${o}`:s;return`\u200F\u200E${u}\u200F${E}\u200F`}if(f)return l?`\u200E${u} ${o}\u200E`:`${u} ${o}`;let d=/^([-+])([^-+]+)$/,_=u.match(d)?.[1]||"",y=u.replace(_,"");return`${_}${s}${y}`};var dc=N(),sr=class{constructor(e={}){m(this,"intlConfigs");m(this,"formatCurrency",(e,t)=>{let{currencyDisplay:o="narrowSymbol",isSymbol:s=!0,code:n="",zeroSign:i="+"}=t,a=re(t?.locale||this.intlConfigs.locale),{smallDigitalSymbol:c}=this.getNumberInfo(a),l=String(e),u=Number(l.replace(c,"."));if(!n)return co(e,t);if(!o||o==="narrowSymbol"){if(!s)return co(e,t);let g=l.startsWith("-")||u===0&&i==="-"?-1:1;return nr(g,{...t,locale:a,stringValue:l,numberValue:u,currencyDisplay:o})}let f=Ps(l,u,i);return nr(f,{...t,locale:a,currencySign:n,stringValue:l,numberValue:u})});m(this,"formatRange",e=>{let t=Y?.isRTL,{sign:o=""}=e,{leftNumber:s,rightNumber:n}=e;return s||(s=""),n||(n=""),t?`\u200F${s}${o}\u200E${n}\u200F`:s+o+n});m(this,"formatDateTime",(e,t)=>{let o,s=re(t?.locale||this.intlConfigs.locale);if(t?.format){let n=t?.format;n?.includes("MMMdd")&&(n=n.replace("MMMdd","MMMd"));let i=Ts(s,n),a={locale:s,project:i,useSington:!0};V({[i]:`{date, date, ::${i}}`},a),o=this.formatMessage(a,i,{date:e}),o=vs(s,i,o)}else{let n="\u200F",i={locale:s,useSington:!0};V({},i),o=te[X(i)].formatDate(e,t),s.includes("ar-")&&(o=n+o)}return z(o)});m(this,"shortNumber",(e,t)=>this.formatNumber(e,{...t,notation:"compact"}));m(this,"percent",(e,t)=>this.formatNumber(e,{...t,style:"percent"}));m(this,"zeroFoldedNum",(e,t)=>{let o=re(t?.locale||this.intlConfigs.locale),{smallDigitalSymbol:s}=this.getNumberInfo(o),n={...t,smallDigitalSymbol:s};return Os(e,n)});m(this,"scientificNotation",(e,t)=>this.zeroFoldedNum(e,t));m(this,"forceLTR",e=>Y?.isRTL?e:`\u200E${e}\u200E`);m(this,"formatNumber",(e,t)=>{let o=new Ns.default(e);if(Number.isNaN(o.toNumber())){if(Y?.envSign!=="prod")throw new Error(ro);return""}let s=re(t?.locale||this.intlConfigs.locale),{micrometerSymbol:n,smallDigitalSymbol:i}=this.getNumberInfo(s),{decimalLen:a,bgFormatConfig:c}=no({bgValue:o,micrometerSymbol:n,smallDigitalSymbol:i,locale:s,value:e,useGrouping:t?.useGrouping}),l=As(t?.style||t?.notation),u={...t,bgFormatConfig:c,micrometerSymbol:n,smallDigitalSymbol:i};if(typeof t?.needZero>"u"||t?.needZero){if(l&&t){let y=io(e,u,s);if(t?.notation===ce.compact||t?.style===ce.currency){let E=He(y,e,t);return z(E)}else if(t?.style===ce.percent&&!t?.needK){let E=so(o.toFormat(a,c),y,s),b=He(E,e,t);return z(b)}}let g=o.toFormat(a,c),_=He(g,e,t);return z(_)}if(l){let g=io(o.toNumber(),u,s);if(t?.notation===ce.compact||t?.style===ce.currency){let _=He(g,e,t);return z(_)}else if(t?.style===ce.percent&&!t?.needK){let _=so(o.toFormat(c),g,s),y=He(_,e,t);return z(y)}}let f=o.toFormat(c),d=He(f,e,t);return z(d)});m(this,"formatMessage",(e,t,o,s=!1,n)=>{let i={...o};s&&Object.keys(o).forEach(E=>{i[E]=z(o[E],dc.okMarkLocaleVarInTextSign,{noNeedFilter:!0})});let{locale:a,project:c}=e,l=X({project:c,locale:re(a||this.intlConfigs.locale)}),u=te[l];if(be()&&n==="i18n"&&(u=ot(l)),!u){if(Y?.envSign!=="prod")throw new Error(ws);return""}let f={id:t,defaultMessage:""},d={},g=u.messages[t],_=Is(g);u.messages[t]=_.res,Object.entries(_.tagMaps).forEach(([E,{isClose:b,isEnd:S,matchText:T,tag:C}])=>{if(!S){if(b){d[E]=()=>T;return}d[E]=A=>`${T}${A}</${C}>`}});let y=u.formatMessage(f,{...i,...d});return u.messages[t]=g,y});m(this,"formatRelativeTime",(e,t,o)=>{let s={locale:re(o?.locale||this.intlConfigs.locale),useSington:!0};return V({},s),te[X(s)].formatRelativeTime(e,t,o)});m(this,"getNumberInfo",e=>{let t={project:At,locale:re(e||this.intlConfigs.locale),useSington:!0};V({},t);let o=te[X(t)].formatNumber(10000.1);return{micrometerSymbol:o[2],smallDigitalSymbol:o.split("").reverse()[1]}});m(this,"parseLocaleNumber",(e,t)=>{let o=`${e}`?.replace(/\u200F|\u200E/g,""),s=re(t?.locale||this.intlConfigs.locale),{smallDigitalSymbol:n,micrometerSymbol:i}=this.getNumberInfo(s),a=new RegExp(`\\${i}`,"g"),[c,l]=o.split(n),u=c.replace(a,""),f=Number(`${u}${l?`.${l}`:""}`);if(Number.isNaN(f)||o[0]!=="-"&&Number.isNaN(Number(o[0])))throw new Error(ro);if(t?.handleInput){let d=!!o.split("").find(g=>g===n);return`${u}${d?".":""}${l===void 0?"":l}`}return f});m(this,"isPlural",(e,t)=>{let s={locale:re(t?.locale||this.intlConfigs.locale),useSington:!0};return V({},s),te[X(s)].formatPlural(e)!=="one"});this.intlConfigs=e,this.intlConfigs=e}init(e,t={}){V(e,{...t,locale:this.locale})}get locale(){return re(this.intlConfigs.locale)}};var ee=new sr,hf=ee,_f=ee.formatDateTime,wt=ee.formatNumber,Sf=ee.formatCurrency,bf=ee.formatRelativeTime,Ef=ee.zeroFoldedNum,Cf=ee.zeroFoldedNum,yf=ee.forceLTR,Tf=ee.getNumberInfo,If=ee.parseLocaleNumber,Af=ee.percent,xf=ee.shortNumber,vf=ee.isPlural;var ys=ee.formatMessage;function lo(r,e){let t={groupSeparator:"",decimalSeparator:"."};return r&&e!==void 0&&e!==null?[e,t]:[t]}function uo(r,...e){let[t,o=0,s=!0,n=2,i=!0]=e||[],a=Y?.isRTL,c=cs(),l=ls(),u=new oe.BigNumber(t).abs(),f=1,d="",g=e.find(y=>Xr(y))||{};if(u.isLessThan(new oe.BigNumber(l[0])))return r(t,o,{...g,needZero:s});u.isGreaterThanOrEqualTo(l[1])?(f=l[1],d=c[1]):(f=l[0],d=c[0]),oe.BigNumber.config({DECIMAL_PLACES:40});let _=r(new oe.BigNumber(t).div(f).toNumber(),n,{...g,needZero:i});return a?`${d}${_}`:`${_}${d}`}function fo(r,e){let t=e[0],{digit:o=0,needZero:s=!0,shortDigit:n=2,shortNeedZero:i=!0,needK:a=!0,needChineseUnit:c=!1}=e[1]||{},l=Y?.isRTL,u=!(Zt()&&c),f=a?["K","M","B"]:["M","B"],d=a?[1e3,1e6,1e9]:[1e6,1e9],g=u?f:["\u4E07","\u4EBF"],_=u?d:[1e4,1e8],y=new oe.BigNumber(t).abs(),E=1,b="",[S,T,C]=_,[A,I,w]=g,L=e.find(R=>Xr(R))||{};if(y.isLessThan(new oe.BigNumber(S)))return r(t,o,{...L,needZero:s});E=C||T,b=w||I,C&&y.isGreaterThanOrEqualTo(T)&&y.isLessThan(new oe.BigNumber(C))&&(E=T,b=I),y.isGreaterThanOrEqualTo(S)&&y.isLessThan(new oe.BigNumber(T))&&(E=S,b=A),oe.BigNumber.config({DECIMAL_PLACES:40});let O=r(new oe.BigNumber(t).div(E).toNumber(),n,{...L,needZero:i});return l?`${b}${O}`:`${O}${b}`}var mo=class extends er{constructor(){super(...arguments);m(this,"thousandFormat",(t,o)=>Xe(t)?"NaN":wt(t,o));m(this,"showCeilTruncation",(t,o,s)=>{if(Xe(t))return"NaN";let n=typeof s=="boolean"?{needZero:s}:s,i=n?.needZero===void 0?!0:n?.needZero,a=ie(o),c=this.bigNumber(this.bigNumber(t).toFixed(a,oe.BigNumber.ROUND_CEIL)).toFormat(...lo(i,a));return wt(c,{...n,needZero:i})});m(this,"showFloorTruncation",(t,o,s)=>{if(Xe(t))return"NaN";let n=typeof s=="boolean"?{needZero:s}:s,i=n?.needZero===void 0?!0:n?.needZero,a=ie(o),c=this.bigNumber(this.bigNumber(t).toFixed(a,oe.BigNumber.ROUND_FLOOR)).toFormat(...lo(i,a));return wt(c,{...n,needZero:i})});m(this,"showTruncation",(t,o,s)=>{if(Xe(t))return"NaN";let n=ie(o),i=typeof s=="boolean"?{needZero:s}:s,a=i?.needZero===void 0?!0:i?.needZero,c=this.bigNumber(this.bigNumber(t).toFixed(n)).toFormat(...lo(a,n));return wt(c,{...i,needZero:a})});m(this,"roundShort",(...t)=>uo(this.showTruncation.bind(this),...t));m(this,"floorShort",(...t)=>uo(this.showFloorTruncation.bind(this),...t));m(this,"ceilShort",(...t)=>uo(this.showCeilTruncation.bind(this),...t));m(this,"roundTruncateShort",(...t)=>fo(this.showTruncation.bind(this),t));m(this,"floorTruncateShort",(...t)=>fo(this.showFloorTruncation.bind(this),t));m(this,"ceilTruncateShort",(...t)=>fo(this.showCeilTruncation.bind(this),t));m(this,"abbreviateFiat",(t,o)=>{if(Xe(t))return"NaN";let s=+t;if(s===0)return"0";let n=0,i=10**-Vr;return Math.abs(s)<i?(n=Vr,s=s<0?-i:i):n=this.getFiatDigit(s),this.showTruncation(s,n,o)});m(this,"getFiatDigit",t=>{let o=0,s=Math.abs(+t);if(s<1){let i=this.toPlainString(t),a=i.length;return i=i.replace(/^0\.0*/,"0."),o=a-i.length+ds,o}return o=us.find(({min:i,max:a})=>s>=i&&s<a)?.digit||0,o})}num2Shorthand(t,o=2,s){let n=Wr[0];if(Xe(t))return"NaN";let i=Math.abs(+t),a=Wr.find(({min:f,max:d})=>i>=f&&i<d)||n,{min:c,sign:l}=a;if(c===0)return this.showFloorTruncation(t,o,s);let u=this.div(t,c);return`${this.showFloorTruncation(u,o,s)}${l}`}},go=mo;var fc=new go;p();h();p();h();var po=class{constructor(){m(this,"slist");m(this,"remove",(e,t)=>{let o=this.slist[e];!o||!t||o.forEach((s,n)=>{s.id===t&&o.splice(n,1)})});m(this,"listen",(e,t,o)=>{if(typeof t!="function")return null;this.slist[e]||(this.slist[e]=[]);let s=`${e}${Math.floor(ke.get()*1e9)}`;return this.slist[e].push({id:s,fn:t,once:o,count:0}),{id:s,remove:()=>{this.remove(e,s)}}});m(this,"trigger",(e,...t)=>{let o=this.slist[e];!o||o.length===0||o.forEach(s=>{let n=s,{id:i,fn:a,once:c}=n;a&&(a.apply(this,t),n.count++,c&&this.remove(e,i))})});this.slist=(()=>{if(D())return{};let e=N();return e._global_subscribe_list||(e._global_subscribe_list={}),e._global_subscribe_list})()}},Ee=new po;p();h();p();h();p();h();p();h();p();h();var ks=new Proxy(globalThis.chrome||globalThis.browser,{get(r,e,t){return e==="storage"?typeof __okxCustomChromeStorage__>"u"?void 0:__okxCustomChromeStorage__:r[e]}});function Ms(){return crypto?.randomUUID?crypto.randomUUID():ke.get().toString(36).slice(2)}function le(r,e,t){ks?.storage?.local?ks?.storage?.local.get("devid",o=>{eo(r,e,t,o?.devid)}):eo(r,e,t)}p();h();p();h();var ue="ok-storagemutated",js="ok-storagemutated-1",Us={timeout:"idb_queue_timeout_error"};p();h();var st=new Map;function ir(r,...e){st.set(r,!0),Ee.trigger(r,...e),st.set(r,!1)}function $s(){if(!D()&&typeof BroadcastChannel<"u"){let r=new BroadcastChannel(js);Ee.listen(ue,e=>{st.get(ue)&&r.postMessage(e)},!1),r.onmessage=e=>{if(e?.data){let{changedParts:t}=e.data;Ee.trigger(ue,{changedParts:t,resetCache:!0})}}}}p();h();function Me(r,e){let t,o=!1,s;return{subscribe(n){async function i(){let l;try{t?l=await t:(t=r(),l=await t,t=null),o=!0,s=l,n(l,null)}catch(u){n(null,u)}}o&&n(s,null),i();function a({changedParts:l}){let u=!1;Array.isArray(e)?u=e.includes(l):u=l===e,u&&i()}let c=Ee.listen(ue,a,!1);return{unsubscribe:()=>{c?.remove()}}},hasValue(){return o},getValue(){return s}}}p();h();function mc(r,e,t){if(e==="$in"&&Array.isArray(t))return t.includes(r);if(typeof r=="number"&&typeof t=="number")switch(e){case"$eq":return r===t;case"$ne":return r!==t;case"$gt":return r>t;case"$lt":return r<t;case"$gte":return r>=t;case"$lte":return r<=t;default:break}throw new Error(`Unsupported operator or type: ${e}`)}function gc(r,e){return Object.entries(e).every(([t,o])=>mc(r,t,o))}function pc(r,e,t){return typeof t=="object"?gc(r[e],t):r[e]===t}function ho(r,e){let t=[],o=Object.entries(e);for(let s=0;s<o.length;s++){let[n,i]=o[s];t.push([n,i])}return t.every(([s,n])=>pc(r,s,n))}function Lt(r,e){return r.filter(t=>ho(t,e))}p();h();p();h();var ar=class{constructor(e=50){m(this,"cache",new Map);m(this,"keys");m(this,"keysIndex",0);e>0&&(this.keys=Array.from(new Array(e)))}delete(e){this.keys&&(this.keys=this.keys.map(t=>t===e?void 0:t),this.keysIndex=(this.keysIndex-1)%this.keys.length),this.cache.delete(e)}clear(){this.cache.clear(),this.keys&&(this.keys.fill(void 0),this.keysIndex=0)}get(e){return this.cache.get(e)}set(e,t){if(this.keys&&!this.keys.includes(e)){let o=this.keys[this.keysIndex];o!==void 0&&this.cache.delete(o),this.keys[this.keysIndex]=e,this.keysIndex=(this.keysIndex+1)%this.keys.length}this.cache.set(e,t)}toArray(){return Array.from(this.cache.values())}unlimitSize(){this.keys=void 0,this.keysIndex=0}};p();h();var Fs="idb;",cr=class{constructor(){m(this,"queue");m(this,"isProcessing");m(this,"processingQueue");m(this,"timeout");this.queue=[],this.isProcessing=!1,this.processingQueue=null}setTimeout(e){this.timeout=e}async enqueue(e,t){return new Promise((o,s)=>{this.queue.push({fn:e,resolve:o,reject:s,queueType:t}),this.isProcessing||this.processQueue()})}async processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0,this.processingQueue=this.queue.shift();let{fn:e,resolve:t,reject:o,queueType:s}=this.processingQueue,n=null,i=()=>{n&&(clearTimeout(n),n=null)};try{let a=await Promise.race([e(),new Promise((c,l)=>{n=this.timeout?setTimeout(()=>{n=null,l(new Error(Us.timeout)),le(`${Fs}-enqueue-timeout-err`,Fs,`enqueue timeout source:${s}`)},this.timeout):null})]);i(),t(a)}catch(a){i(),o(a)}this.processingQueue=null,await this.processQueue()}};var je="idb",de=new cr,lr=class{constructor({storeName:e,indices:t,options:o,db:s,enableCache:n,preload:i}){m(this,"options");m(this,"db");m(this,"storeName");m(this,"enableCache");m(this,"indices");m(this,"transaction");m(this,"store");m(this,"storeExist");m(this,"cache");m(this,"preload");this.db=s,this.storeName=e,this.indices=t??[],this.options=o,this.enableCache=n??!0,this.preload=i??!1,this.storeExist=!1,this.cache=new ar,this.initListener()}initListener(){Ee.listen(ue,({changedParts:e,resetCache:t})=>{!st.get(ue)&&e===this.getQueryRange()&&t&&this.cache.clear()},!1)}getPrimaryKey(){return typeof this.options?.keyPath=="string"?this.options?.keyPath:""}isCacheable(e){return!(!this.db.autoVersion&&!this.enableCache||Array.isArray(e)||e instanceof IDBKeyRange)}async performSpecialQuery(e){if(!e)return null;let t=this.indices,o=this.getPrimaryKey(),s=e?[o,...t.map(n=>typeof n.keyPath=="string"?n.keyPath:"")].find(n=>n&&Object.hasOwn(e,n)):void 0;if(s){let n=e[s],i=typeof n=="object"&&"$in"in n;if(typeof n=="string"||typeof n=="number"||i){if(s===o){let c=await this.get(n);return c?{key:s,data:[c]}:null}let a=t.find(c=>c.keyPath===s);if(a)return{key:s,data:await this.getAllFromIndex(a.indexName,n,!0)}}}return null}getCacheData(e){if(!!this.isCacheable(e))return this.cache.get(e)}setCacheData(e,t){!this.isCacheable(e)||this.cache.set(e,t)}deleteCacheData(e){!this.isCacheable(e)||this.cache.delete(e)}async getApi(e){if(D())return"";let{transaction:t,store:o}=await this.basicOpenStore("get",this.storeName);return new Promise((s,n)=>{let i=e(o),a,c=this.getPrimaryKey();i.onsuccess=l=>{a=l.target.result},t.oncomplete=()=>{if(this.db.db?.close(),this.db.versionChange&&(this.db.versionChange=!1),a&&typeof a=="object"&&c in a){let l=a[c];this.setCacheData(l,a)}s(a)},t.onabort=l=>{let{name:u,message:f}=l?.target?.error||{};le(`${je}-getDB-about-err`,je,`${u}: ${f}`),this.db.db?.close(),n(l)},t.onerror=l=>{let{name:u,message:f}=l?.target?.error||{};le(`${je}-getDB-catch-err`,je,`${u}: ${f}`),this.db.db?.close(),n(l)}})}createIndex(e,t,o){if(D())return!1;if(!this.db.autoVersion)throw new Error("Can not create index dynamically when version is set");let s={indexName:e,keyPath:t,options:o??{}};return this.db.setVersion(this.db.vero+1),this.db.stores.has(this.storeName)?(this.indices.push(s),!0):!1}async getAllFromIndex(e,t,o=!0){return de.enqueue(()=>this.getApi(s=>{let n=s.index(e);return o?n.getAll(t):n.get(t)}),"getAllFromIndex")}liveQuery(e){return Me(()=>this.query(e),this.getQueryRange())}async query(e){let t=await this.performSpecialQuery(e);if(t){let s={...e};return delete s[t.key],Lt(t.data,s)}let o=await this.getAll();return e?Lt(o,e):o}async get(e){let t=this.getCacheData(e);return typeof t<"u"?t:de.enqueue(()=>this.getApi(o=>o.get(e)),"get")}async getAll(e,t){let o=await de.enqueue(()=>this.getApi(s=>s.getAll(e,t)),"getAll");return Array.isArray(o)?o.filter(s=>s!==null):o}async getKey(e){return de.enqueue(()=>this.getApi(t=>t.getKey(e)),"getKey")}async getAllKeys(){return de.enqueue(()=>this.getApi(e=>e.getAllKeys()),"getAllKeys")}async count(){return de.enqueue(()=>this.getApi(e=>e.count()),"count")}onMutate(){this.db.autoVersion||ir(ue,{changedParts:this.getQueryRange()})}async setApi(e,{silent:t=!1}={}){if(D())return!1;let{transaction:o,store:s}=await this.basicOpenStore("set",this.storeName);return new Promise((n,i)=>{let a=!1;o.oncomplete=()=>{this.db.versionChange&&(this.db.versionChange=!1),this.db.db?.close(),n(!0),t||this.onMutate()},o.onerror=c=>{if(a)return;this.db.db?.close();let{name:l,message:u}=c?.target?.error||{};le(`${je}-setDB-tx-err`,je,`${l}: ${u}`),i(!1)};try{e({store:s,transaction:o})}catch(c){a=!0,o?.abort(),this.db.db?.close(),le(`${je}-setDB-catch-err`,je,typeof c=="object"&&c?.message?`${c?.name}: ${c?.message}`:JSON.stringify(c)),i(c)}})}baseSet(e,{clear:t=!1,silent:o=!1,isSet:s=!0}={}){let n=this.getPrimaryKey(),i;return Array.isArray(e)?i=e:i=[e],this.enableCache&&!this.db.autoVersion&&i.forEach(a=>{n in a&&this.setCacheData(a[n],a)}),de.enqueue(()=>this.setApi(({store:a})=>{let c=[];return t&&c.push(a.clear()),c.push(...i.map(l=>s?a.put(l):a.add(l))),{request:c,method:"set"}},{silent:o}),t?"clearSet":"set")}async set(e,{clear:t=!1,silent:o=!1}={}){return this.baseSet(e,{clear:t,silent:o,isSet:!0})}async add(e,{clear:t=!1,silent:o=!1}={}){return this.baseSet(e,{clear:t,silent:o,isSet:!1})}async batchDelete(e){return de.enqueue(()=>this.setApi(({store:t})=>({request:e.map(s=>(this.deleteCacheData(s),t.delete(s))),method:"delete"})),"batchDelete")}async delete(e){return de.enqueue(()=>this.setApi(({store:t})=>(this.deleteCacheData(e),{request:t.delete(e),method:"delete"})),"delete")}getQueryRange(){return[this.db.dbInfo.dbName,this.storeName].join("_")}async clear(){return de.enqueue(()=>this.setApi(({store:e})=>(this.cache.clear(),{request:e.clear(),method:"clear"})),"clear")}async deleteStore(e){return e?this.db.deleteStore(e):this.db.deleteStore(this.storeName)}openStore(e,t){return this.db.openStore(e,t)}getInstance(){return new Promise((e,t)=>{let o=indexedDB.open(this.db.dbName);o.onsuccess=()=>{let s=o?.result,n=s?.version,i=s?.objectStoreNames?.contains?.(this.storeName);this.storeExist=i,this.db.autoVersion&&(this.db.vero=n+1,i||this.db.setVersion(n+1)),s?.close(),e(this)},o.onerror=s=>{t(s?.target?.error)}})}setVersion(e){this.db.setVersion(e)}basicOpenStore(e,t){return this.db.basicOpenStore(e,t)}};var Ue="idb";$s();var Dt=class{constructor(e){m(this,"dbInfo");m(this,"db");m(this,"store");m(this,"transaction");m(this,"stores");m(this,"versionChange");m(this,"vero");m(this,"storeExist");m(this,"autoVersion");m(this,"dbName");m(this,"id");let t;typeof e=="string"?t={dbName:e,config:{}}:typeof e=="object"?t=e:t={};let{dbName:o,config:s,version:n}=t;this.dbInfo={dbName:o??"FE"},t.timeout&&de.setTimeout(t.timeout),this.dbName=`OK_${this.dbInfo.dbName.toUpperCase()}`,this.db=null,this.store=null,this.transaction=null,this.stores=new Map,this.versionChange=!1,this.autoVersion=typeof n>"u",this.vero=n??1,this.storeExist=!1,this.id=Ms(),this.initStores(s)}initStores(e){!e||Object.keys(e).forEach(t=>{let{indices:o,options:s,enableCache:n,preload:i}=e[t];this.stores.has(t)||this.stores.set(t,new lr({storeName:t,indices:o,options:s,db:this,enableCache:n,preload:i}))})}static async deleteDb(e){if(!e)return!0;if(typeof e=="string"){let t=`OK_${e.toUpperCase()}`;return t==="OK_FE"?!0:new Promise((o,s)=>{let n=indexedDB.deleteDatabase(t);n.onsuccess=()=>{o(!0)},n.onerror=i=>{s(i)}})}if(Array.isArray(e)){let t=e.map(o=>{let s=`OK_${o.toUpperCase()}`;return s==="OK_FE"?!0:new Promise((n,i)=>{let a=indexedDB.deleteDatabase(s);a.onsuccess=()=>{n(!0)},a.onerror=c=>{i(c)}})});return Promise.all(t).then(o=>o.every(s=>s===!0))}return!0}setVersion(e){this.versionChange=!0,this.vero=e}basicOpenStore(e,t){let o=this.versionChange;return new Promise((s,n)=>{let i;if(o||!this.autoVersion){let a=this.vero;i=indexedDB.open(this.dbName,a)}else i=indexedDB.open(this.dbName);i.onupgradeneeded=a=>{try{let c=a.target,l=i?.result;this.db=l;let u;if(Array.from(this.stores.values()).map(f=>({options:f.options,indices:f.indices,storeName:f.storeName})).forEach(f=>{let{options:d,indices:g,storeName:_}=f;if(l.objectStoreNames.contains(_)?u=c.transaction.objectStore(_):u=l.createObjectStore(_,d),g?.forEach(y=>{let{indexName:E,keyPath:b,options:S}=y;u.indexNames.contains(E)||u.createIndex(E,b,S)}),!this.autoVersion)for(let y=0;y<u.indexNames.length;y++){let E=u.indexNames[y];g?.find(b=>b.indexName===E)||u.deleteIndex(E)}}),!this.autoVersion)for(let f=0;f<l.objectStoreNames.length;f++){let d=l.objectStoreNames[f];Array.from(this.stores.keys()).find(g=>g===d)||l.deleteObjectStore(d)}}catch(c){let{name:l,message:u}=c||{};le(`${Ue}-openDB-catch-err-in-upgrade`,Ue,`${l}: ${u}`)}},i.onsuccess=()=>{try{let a=i?.result;if(this.db=a,t){let c=e==="get"?"readonly":"readwrite",l=a.transaction(t,c,e==="get"?void 0:{durability:"strict"}),u=l.objectStore(t);s({store:u,transaction:l})}else s({store:null,transaction:null})}catch(a){let{name:c,message:l}=a||{};le(`${Ue}-openDB-catch-err-in-success`,Ue,`${c}: ${l}`),n(l)}},i.onerror=()=>{let{name:a,message:c}=i?.error||{};c?.includes?.("The connection was closed")||le(`${Ue}-openDB-catch-err-in-error`,Ue,`${a}: ${c}`),c?.includes?.("less than the existing version")?(this.autoVersion&&indexedDB.deleteDatabase(this.dbName),n(new Error(`${c} Please reload the page!`))):n(c)},i.onblocked=()=>{let{name:a,message:c}=i?.error||{};le(`${Ue}-openDB-catch-block`,Ue,`${a}: ${c}`),n(new Error("Database is outdated, please reload the page!"))}})}static async openStore(e,t){return new Dt().openStore(e,t)}async openStore(e,t){return this.stores.has(e)?this.stores.get(e):(this.initStores({[e]:{options:t}}),this.stores.get(e).getInstance())}deleteStore(e){return D()?!1:new Promise((t,o)=>{if(!this.stores.get(e))return;let s=this.stores.get(e);this.stores.delete(e),s.getInstance().then(n=>{if(n.storeExist){let i=indexedDB.open(this.dbName,this.vero);i.onupgradeneeded=()=>{let a=i?.result;a?.deleteObjectStore?.(e),a?.close(),t(!0)},i.onerror=a=>{i?.result?.close(),o(a)}}}).catch(n=>{o(n)})})}};p();h();p();h();p();h();var ne="ok_";p();h();var hc=new Proxy(globalThis.chrome||globalThis.browser,{get(r,e,t){return e==="storage"?typeof __okxCustomChromeStorage__>"u"?void 0:__okxCustomChromeStorage__:r[e]}});function $e(r,...e){let t=r(...e);function o(s){if(s.done)return s.value;let n=s.value;return n instanceof Promise?n.then(i=>o(t.next(i))):o(t.next(n))}return o(t.next())}function _o(){return hc}var K="_expire",it=N();function Ot(r,e,t){ir(ue,{changedParts:`${ne+r}_${e}_${t}`})}var xe=class{constructor(e,t,o){m(this,"storageKey");m(this,"projectKey");m(this,"options");this.storageKey=e,this.projectKey=t,this.options=o}static isCorrectExpire(e){return typeof e<"u"&&Number.isInteger(Number(e))&&Number.isSafeInteger(e)&&e>new Date().getTime()}static isCorrectExpireSeconds(e){return typeof e<"u"&&Number.isInteger(e)&&Number.isSafeInteger(e)&&e>0}static getExpire(e){return new Date().getTime()+e*1e3}getProjectData(e){let t=this;function*o(){let{getItem:s}=t.options??{};if(D())return{};let n=s?yield s(t.projectKey):it[t.storageKey].getItem(t.projectKey),i={};try{i=typeof n=="object"&&n?n:JSON.parse(n||"{}")}catch{i={}}let a={[K]:{}},c=i[K]||{};return Object.keys(i).forEach(l=>{l!==K&&(c[l]===void 0||xe.isCorrectExpire(c[l]))&&(a[l]=i[l],a[K]&&(a[K][l]=c[l]))}),e&&delete a[K],a}return $e(o)}get(e){let t=this;function*o(){return e==null||e instanceof Function||e instanceof Array||e instanceof Object?void 0:(yield t.getProjectData())[e]}return $e(o)}set(e,t,o){let s=this;function*n(){if(D())return!1;let{setItem:i}=s.options??{};if(e==null||e instanceof Function||e instanceof Array||e===K)return!1;let a=yield s.getProjectData();if(!(e instanceof Object)){a[e]=t,typeof o<"u"&&xe.isCorrectExpireSeconds(o)?(a[K]||(a[K]={}),a[K][e]=xe.getExpire(o)):a[K]&&delete a[K][e];try{i?yield i(s.projectKey,a):it[s.storageKey].setItem(s.projectKey,JSON.stringify(a))}catch{return!1}return Ot(s.storageKey,s.projectKey,e),!0}return yield s.setAll(e,t)}return $e(n)}setAll(e={},t={}){let o=this;function*s(){if(D())return!1;let{setItem:n}=o.options??{},i=yield o.getProjectData();Object.entries(e).forEach(a=>{let c=a[0];if(c===K)return;let l=t[c];i[c]=a[1],xe.isCorrectExpireSeconds(l)?(i[K]||(i[K]={}),i[K][c]=xe.getExpire(l)):i[K]&&delete i[K][c]});try{n?yield n(o.projectKey,i):it[o.storageKey].setItem(o.projectKey,JSON.stringify(i))}catch{return!1}return Ot(o.storageKey,o.projectKey,""),!0}return $e(s)}remove(e){let t=this;function*o(){if(D()||e==null||e instanceof Function||e.constructor&&e.constructor===Object)return!1;let{setItem:s}=t.options??{},n=[];e instanceof Array?n=e:n.push(e);let i=yield t.getProjectData();return n.forEach(a=>{delete i[a],i[K]&&delete i[K][a]}),s?yield s(t.projectKey,i):it[t.storageKey].setItem(t.projectKey,JSON.stringify(i)),Ot(t.storageKey,t.projectKey,e),!0}return $e(o)}getAll(){return this.getProjectData(!0)}cleanAll(){let e=this;function*t(){if(D())return;let{setItem:o}=e.options??{};o?yield o(e.projectKey,{}):it[e.storageKey].setItem(e.projectKey,JSON.stringify({})),Ot(e.storageKey,e.projectKey,"")}return $e(t)}cleanInvalidData(){let e=this;function*t(){if(D())return;let{setItem:o}=e.options??{};if(o){let s=yield e.getProjectData();yield o(e.projectKey,s)}else it[e.storageKey].setItem(e.projectKey,JSON.stringify(e.getProjectData()));Ot(e.storageKey,e.projectKey,"")}return $e(t)}liveQuery(e){return Me(()=>this.get(e),[`${ne+this.storageKey}_${this.projectKey}_${e}`,`${ne+this.storageKey}_${this.projectKey}_`])}},F=xe;var Bs=`${ne}global`,at={getItem:r=>new Promise(e=>{_o().storage.local.get([r],t=>{e(t[r])})}),setItem:(r,e)=>new Promise(t=>{_o().storage.local.set({[r]:e},()=>{t(!0)})})},So=class extends F{constructor(t){super("chromeStorage",ne+t,at);m(this,"global");m(this,"g");this.global=new F("chromeStorage",Bs,at),this.g=new F("chromeStorage",Bs,at)}},Ks=So;p();h();p();h();var Gs=`${ne}global`,bo="localStorage",Eo=class extends F{constructor(t){super(bo,ne+t);m(this,"global");m(this,"g");this.global=new F(bo,Gs),this.g=new F(bo,Gs)}},Ws=Eo;p();h();var Co="sessionStorage",Vs=`${ne}global`,yo=class extends F{constructor(t){super(Co,ne+t);m(this,"global");m(this,"g");this.global=new F(Co,Vs),this.g=new F(Co,Vs)}},Js=yo;var To=class{constructor(){m(this,"local");m(this,"session");m(this,"chromeStorage");this.local={},this.session={},this.chromeStorage={}}localProject(e){return this.local[e]||(this.local[e]=new Ws(e)),this.local[e]}sessionProject(e){return this.session[e]||(this.session[e]=new Js(e)),this.session[e]}chromeStorageProject(e,t=!1){if(!this.chromeStorage[e]){if(t)return null;this.chromeStorage[e]=new Ks(e)}return this.chromeStorage[e]}},Qe=new To;var se="ok_",Ce="default",ur="global",Pt="localStorage",ve="sessionStorage",Ye=se+Ce,dr=se+ur;function fr(r){if(r===Ce)throw new Error("'default' is not allowed as a project name.");if(r===ur)throw new Error("'global' is not allowed as a project name. Please use 'storage.g' or 'storage.session.g' instead.");return r}function Io(r,e,t,o){let s=new F(r,e,o);return t?s.getAll():s.getProjectData()}function we(r,e,t){if(D())return;new F(r,e,t).cleanInvalidData()}var Rt={get(r,e,t,o){return new F(r,e,o).get(t)},set(r,e,t,o,s,n){return new F(r,e,n).set(t,o,s)},setAll(r,e,t={},o={}){return new F(r,e).setAll(t,o)},remove(r,e,t,o){return new F(r,e,o).remove(t)},getAll(r,e,t){return new F(r,e,t).getAll()},cleanAll(r,e,t){return new F(r,e,t).cleanAll()}};function ct({isLocal:r,isGlobal:e,options:t}){function o(){return r?Pt:ve}function s(){return e?dr:Ye}return{set(n,i,a){return Rt.set(o(),s(),n,i,a,t)},get(n){return Rt.get(o(),s(),n,t)},remove(n){return Rt.remove(o(),s(),n,t)},getAll(){return Rt.getAll(o(),s(),t)},cleanAll(){return Rt.cleanAll(o(),s(),t)},liveQuery(n){return Me(()=>this.get(n),[`${se+o()}_${s()}_${n}`,`${se+o()}_${s()}_`])}}}var Xs=(()=>{let r={...ct({isLocal:!0,isGlobal:!0})};return{...ct({isLocal:!0,isGlobal:!1}),getProjectStorage(e){return Io(Pt,se+e,!0)},global:r,g:r}})();function _c(r){let{project:e}=r,t=fr(e);return Ye=se+t,we(Pt,Ye),we(Pt,dr),t!==Ce&&we(Pt,se+Ce),Qe.localProject(t)}function Sc(r){let e=fr(r);return Qe.localProject(e)}function bc(r){let{project:e}=r,t=fr(e);return Ye=se+t,we(ve,Ye),we(ve,dr),t!==Ce&&we(ve,se+Ce),Qe.sessionProject(t)}function Ec(r){let e=fr(r);return Qe.sessionProject(e)}var Cc=(()=>{let r={...ct({isLocal:!1,isGlobal:!0})};return{...ct({isLocal:!1,isGlobal:!1}),getProjectStorage(e){return Io(ve,se+e,!0)},global:r,g:r,init:bc,getInstance:Ec}})();async function yc({project:r}){let e={...at},t=r===ur?Ce:r;return Ye=se+t,await we(ve,Ye,e),await we(ve,dr,e),t!==Ce&&await we(ve,se+Ce,e),Qe.chromeStorageProject(t)}function Tc(r){let e=r===ur?Ce:r;return Qe.chromeStorageProject(e,!0)}var Ic=(()=>{let r={...at},e={...ct({isLocal:!1,isGlobal:!0,options:r})};return{...ct({isLocal:!1,isGlobal:!1,options:r}),getProjectStorage(t){return Io(ve,se+t,!0,r)},global:e,g:e,init:yc,getInstance:Tc}})(),Ac={getInstance:Sc,init:_c,session:Cc,...Xs,local:Xs,chrome:Ic};var lt=Ac;p();h();p();h();var fe={get(r){if(D())return"";let e=new RegExp(`(^| )${r}=([^;]*)(;|$)`),t=!D()&&typeof document<"u"&&document?.cookie?.match(e);return t?decodeURIComponent(t[2]):""}};var Ao=U(),xc="toLocale cannot be used outside of LocaleProvider, issue key is ";function ge(r="",e,t,o){let{localeStore:s,localeDevStore:n,localeState:i,SSRProviderModule:a}=k;try{let{partName:c}=t||{},{withJSX:l,useBr:u=!0}=t||{};c=Z(c||"");let f=c||i.fetchModules&&i.fetchModules[0]&&i.fetchModules[0].project||"main";f=Z(f);let d=s[f],g,_;if(be&&be()){if(xt()){let C=vt(a)||{};g=C?.ssrModuleName,_=C?.ssrLocale}let S=X({locale:_?.toLowerCase(),project:g});if(d=ot(S)?.messages||{},D()&&_&&_!==Ao.locale?.toLowerCase()){if(Ao?.envSign!=="prod")throw new Error(`${xc}${r}`);return""}}let y=i[f]?.locale||Ao.locale||!D()&&fe.get("locale")||!D()&&fe.get("language")||_s;D()&&be()&&(f=g,y=_);let E=d&&d[r]||"";if(k.isInDevMode&&!D()&&n[f]){let S=n[f][r];S&&(E=S)}return Cs({key:r,moduleName:f,handler:o,content:E,useBr:u,withJSX:l,values:e,currLocale:y,from:"i18n"})}catch(c){return console.log(c),""}}function Nt(r="",e,t){let o=ge(r,{},{...t,withJSX:!0},{hasBr:!0});return bs(o,e)}function kt(r="",e,t={}){let o=ge(r,e,t);return o&&typeof o=="object"&&"props"in o?o.props.children:o}function ut(r){let e=Z(r,!0);ge[e]=(t,o)=>ge(t,o,{partName:r}),kt[e]=(t,o)=>kt(t,o,{partName:r}),Nt[e]=(t,o)=>Nt(t,o,{partName:r})}p();h();var xo="MULTILINGUAL_OKDB",vc=9007199254740992,vo="okI18nVersion",Hs=r=>{let t=lt.g.get(vo)||{};t[r.project]||(t[r.project]={}),t[r.project][r.locale]=r.version,lt.g.set(vo,t)};function me(r){try{let e=new Date().getTime(),t=!r.err&&(e-(r?.startTime||0))/1e3||0;if(t>1){let o={...r?.msg,timeout:t};Ie(r?.name,o)}else r.err&&Ie(r?.name,r?.msg)}catch{Ie("dbTimeOutReport-catch-err",r?.msg)}}var Qs=(r,e)=>{if(!e)return null;if(localStorage.i18nDBversion=Number(e)+1,e>=vc)return window?.indexedDB?.deleteDatabase(xo),lt.g.set(vo,{}),null;let t={project:r.project,locale:r.locale,version:r.version},o=null;try{window?.indexedDB&&(o=window.indexedDB.open(xo,Number(e)+1))}catch{return null}if(!o)return null;o.onsuccess=s=>{(s?.target?.result).close()},o.onerror=()=>{let s={name:"setDB-open-err",err:"err",msg:{...t,err:"open-err"}};me(s)},o.onblocked=()=>{let s={name:"setDB-onblocked-err",err:"err",msg:{...t,err:"onblocked"}};me(s)},o.onupgradeneeded=s=>{let n=s?.target?.result,i=null;try{if(n.objectStoreNames.contains(`${r.project}_${r.locale}`)){let a=s?.target?.transaction;if(!a)return;let c=a.objectStore(`${r.project}_${r.locale}`).put({project:r?.data.project,version:r?.data.version,data:JSON.stringify(r.data)});c.onsuccess=()=>{Hs(r)},c.onerror=l=>{let u={err:"err",name:"setDB-put-db-err",msg:{...t,err:l?.target?.error}};me(u),n?.close()}}else{i=n.createObjectStore(`${r.project}_${r.locale}`,{keyPath:"project"}),i.createIndex("project","project",{unique:!1});let a=s?.target?.transaction;if(!a)return;let c=a.objectStore(`${r.project}_${r.locale}`).add({project:r?.data.project,version:r?.data.version,data:JSON.stringify(r.data)});c.onsuccess=()=>{Hs(r)},c.onerror=l=>{let u={err:"err",name:"setDB-add-db-err",msg:{...t,err:l?.target?.error}};me(u),n?.close()}}}catch(a){let c={err:"err",name:"setDB-put-db-catch-err",msg:{...t,err:a instanceof Error?a.message:String(a)}};me(c)}}},Ys=(r,e,t)=>{let o=new Date().getTime(),s=null;try{window?.indexedDB&&(s=window.indexedDB.open(xo))}catch{return t(r)}if(!s)return t(r);s.onsuccess=n=>{let i=n?.target?.result;try{if(i.objectStoreNames.contains(`${r.project}_${r.locale}`)){let a=i.transaction([`${r.project}_${r.locale}`]);a.oncomplete=()=>{i?.close()};let l=a.objectStore(`${r.project}_${r.locale}`).get(`${r.project}_${r.locale}`);l.onsuccess=()=>{if(l.result){let u=l.result,f={startTime:o,name:"getDB-got-db-timeout",msg:{...r}};me(f),e(u)}else{let u={startTime:o,name:"getDB-nogot-db-timeout",msg:{...r}};me(u),t(r)}},l.onerror=u=>{let f={startTime:o,name:"getDB-getRequest-onerror-timeout",msg:{...r,err:u?.target?.error}};me(f),t(r),i?.close()}}else{let a={startTime:o,name:"getDB-no-storeNames-timeout",msg:{...r}};me(a),t(r)}}catch(a){let c={startTime:o,name:"getDB-catch-err",err:"err",msg:{...r,err:a instanceof Error?a.message:String(a)}};me(c),t(r),i?.close()}},s.onerror=n=>{let i={startTime:o,name:"getDB-onerror-err",err:"err",msg:{...r,err:n?.target?.error}};me(i),t(r)},s.onblocked=n=>{let i={startTime:o,name:"getDB-onblocked-err",err:"err",msg:{...r,err:n?.target?.error}};me(i),t(r)}};var wc="okI18nVersion",gr="en_US",pr=U(),B=N();function wo(r){if(!r)return null;let{site:e,project:t,version:o,resourceType:s="js",fetchBaseUrl:n=k.fetchBaseUrl}=r,{LANGUAGE_VERSIONS:i}=_e(),a=r.locale||pr.locale||!D()&&fe.get("locale")||!D()&&fe.get("language")||gr,c=e?.toLowerCase(),l=t?.toLowerCase(),u=a&&a.toLowerCase&&a.toLowerCase().replace(/-/g,"_"),f=`${c}_${l}_${u}`,d=`${n}/${e}/${l}/${u}.${s}`,g=Z(t,!0),_=i[g]||o;return{url:`${d}${_?`?v=${_}`:""}`,namespace:f,finalVersion:_,locale:a}}function Zs(r,e,t,o){let{localeDevStore:s,localeState:n}=k,a=n[e]?.locale||pr?.locale||fe.get("locale")||fe.get("language")||gr,c=It(),l=r||{...B&&B[`${e}`],version:t,project:e},u={...s[`${e}`],...l,...c};V(u,{locale:a.toLowerCase(),project:e});let f=[];n.fetchModules.forEach(_=>{_.project===e?f.push({..._,fetchDone:!0}):f.push(_)}),n.fetchModules=f,n[`${e}_${o}`]?.updateView?.();let g=n.fetchConfigs.find(_=>_.project===e);g?.fastRender&&g.onLocaleReady?.(r||B[`${e}`])}function mr(r,e,t,o){let{localeStore:s,localeDevStore:n,localeState:i,hasLoadedModules:a}=k,{onLocaleDataReady:c}=B||{},u=i[e.project]?.locale||pr.locale||fe.get("locale")||fe.get("language")||gr;!t&&B[`${e.project}`]&&!o&&!e.noCache&&B.addEventListener("load",()=>{try{let _=JSON.stringify(B[`${e.project}`]),y=qr(e.locale,_),E=localStorage.i18nDBversion||1e4;!y&&Qs({project:e.project,locale:e.locale||"",version:e.version||"",data:{...B[`${e.project}`],project:`${e.project}_${e.locale}`,version:e.version||""}},Number.isNaN(E)?1e4:E)}catch{Ie("i18n-multiLoaded-setDB-err",e)}});let f=t||{...B&&B[`${e.project}`],version:e.version,project:e.project},d=It(),g={...n[`${e.project}`],...f,...d};if(c&&c(t||(B&&B[`${e.project}`],{project:e.project})),V(g,{locale:u.toLowerCase(),project:e.project}),r){a.push(e.project),e?.resolveFn?.(g);return}if(!k.usingRemote){s[`${e.project}`]=t||B&&B[`${e.project}`];return}!i[`${e.project}_${e.flag}`]||(s[`${e.project}`]=t||B&&B[`${e.project}`],Zs(t,e.project,e.version,e.flag))}function Lc(r,e){let{localeState:t}=k,o=r.flag?t[`${r.project}_${r.flag}`]:t[r.project];typeof o.errorTimes=="number"&&(o.errorTimes+=1);let{errorTimes:s}=o;if(typeof s=="number"&&s>=4){Ie("i18n-remote-data-err",r);return}if(s!==2){e({...r},!r.flag,!0);return}let n=gr,i=r.locale||pr.locale||fe.get("locale")||fe.get("language");if(s===2&&i!==n){let a=t.fetchConfigs.find(u=>u.project===r.project),c=r;a?(a.locale=n,a.flag=r.flag,t[r.project]=n):c.locale=n;let l=r.flag?{...a}:{...c};e(l,!r.flag,!0)}}function dt(r,e,t){let o=document.createElement("script");o.setAttribute("src",r.url),o.onerror=e,o.onload=t,document.head.appendChild(o)}function hr(r,e,t){let{localeState:o,hasLoadedModules:s}=k,{project:n,noCache:i,flag:a,noFetch:c,resolveFn:l}=r;e&&!t&&(o[n]={errorTimes:0});let u=wo(r),f=u?.finalVersion;if(s.includes(n))return Zs(!1,n,f,a),r?.resolveFn&&r?.resolveFn(B[`${n}`]);let d=u?.locale,g=()=>{Lc(r,hr)},_={project:n,version:f,locale:d,noCache:i,flag:a,resolveFn:l},y=()=>{mr(e,_,!1)};if(!D()&&window?.indexedDB&&typeof window?.indexedDB.open=="function"&&!i&&!c){let b=lt.g.get(wc)||{};(b[n]&&b[n][d]||"")===f?B[`${n}`]?mr(e,_,!1,!0):(Ys({project:n,version:f,locale:d},C=>{if(C){let A=qr(d,C.data||""),I=JSON.parse(C.data);I&&!A&&(B[`${n}`]=I),f===C.version&&!A?mr(e,_,I):dt(u,g,y)}else dt(u,g,y)},()=>{dt(u,g,y)}),Es(n,u,dt,g,y)):B[`${n}`]?mr(e,_,B[`${n}`],!0):dt(u,g,y)}else!c&&dt(u,g,y),c&&y();return null}p();h();var Sr=H(Wo()),mt=H(qe());var ft={project:""},_r=U(),ze=D(),Lo="en_US",Dc="ok_language",Oc="main",Rc="prod",qs=1;function Pc(){let r=Date.now();return++qs,r+=qs,r}var Do=class extends mt.default.Component{componentDidMount(){let{fetchConfig:e}=this.props;ze||e&&window&&window.react_locale_is_done&&window.react_locale_is_done()}render(){return(0,Sr.jsx)(mt.Fragment,{children:this.props.children})}},br=class extends mt.default.Component{constructor(e){super(e);m(this,"flag");m(this,"unmount",!1);this.flag=Pc();let{part:t={},isDev:o,localeData:s,fetchConfig:n={},partsData:i,noRemoteData:a}=this.props,{localeStore:c,localeDevStore:l,baseInitState:u,localeState:f,isPreview:d,isShowKeyMode:g,isShowKeyTips:_,hasLoadedModules:y,SSRProviderModule:E}=k,b=Lo,S={...n,project:Z(n?.project)},T={...t};T.project=Z(T?.project||"");let{intl:C={}}=S;(Object.keys(C)||[]).length===0?b=S.locale||_r?.locale||Lo:b=C.intlConfigs&&C.intlConfigs.locale||_r?.locale||Lo;let I=T.project||S.project||Oc;if(s){let L=It();if(be()){let P=b.toLowerCase();c[I]={},c[I].moduleLanguage=b,xt()&&vt(E,{ssrModuleName:I,ssrLocale:P})}else c[I]={...s,...L};ze||(f[`${I}_${this.flag}`]={...u});let O={locale:b};f[I]=O,(ze||a)&&(V({...s,...L},{locale:b.toLowerCase(),project:I,from:"i18n"}),!f.fetchModules.find(q=>I===q?.project)&&f.fetchModules.push({project:I,flag:this.flag,fetchDone:!1}),a&&_&&g&&f.fetchConfigs.push(S));let R=y.includes(S.project);(o||R)&&(Ne({isInDevMode:!0}),l[I]=s,R&&V(s,{locale:b.toLowerCase(),project:I}),!S.project&&!S.site&&V(s,{locale:b.toLowerCase(),project:I})),!S.project&&f.fetchModules.length<1&&f.fetchModules.push({project:I})}if(g&&d){let L=localStorage.getItem(Dc),O=JSON.parse(L)||{},R=`${I}_${b.toLowerCase()}`,P=(O[R]||O[I]||{}).localData;c[I]=P,f[`${I}_${this.flag}`]={...u};let q={locale:b};f[I]=q,Ne({isInDevMode:!0}),l[I]=P}let{project:w=""}=S;if((ze||a)&&ut(w),!ze&&w&&!a){ft=S,ft.locale=b,_r.envSign&&_r.envSign!==Rc&&Ne({fetchBaseUrl:_e().BASE_URL_PREVIEW}),S.noCdn===1&&Ne({fetchBaseUrl:_e().BASE_URL_NOCDN_PREVIEW}),S.noCdn===2&&Ne({fetchBaseUrl:_e().BASE_URL_NOCDN_PUBLISH}),c[w]=window?.[w]||{},f[`${w}_${this.flag}`]={...u};let L={locale:b};f[w]=L,f.fetchModules.push({flag:this.flag,project:w,fetchDone:!1}),f.fetchConfigs.find(R=>R.site===S.site&&R.project===S.project&&R.locale===S.locale)||f.fetchConfigs.push(S),Ne({usingRemote:!0}),ut(w)}else i&&(Ne({partsDataProvided:!0}),Object.keys(i).forEach(L=>{c[L]=i[L],ut(L),V(i[L],{locale:b.toLowerCase(),project:L})}));if(T.project){let L={...ft};L.site=T.site,f.locale=ft.locale,L.project=T.project;let O={...ft,...L};f.fetchConfigs.push(O),ze?c[T.project]={}:c[T.project]=window?.[T.project]||{},f[`${T.project}_${this.flag}`]={...u};let R={locale:b};f[T.project]=R,f.fetchModules.push({project:T.project,fetchDone:!1,flag:this.flag}),k.usingRemote||k.partsDataProvided||(ge[T.project]=ge),ut(T.project)}}componentDidMount(){let{part:e={},fetchConfig:t={},noRemoteData:o}=this.props,{localeState:s}=k,n={...e},i={...t};i.project=Z(i?.project||""),n.project=Z(n?.project||"");let{project:a=""}=i,c=()=>{!this.unmount&&this.forceUpdate()};if(n.project||i){let l=n?.project?`${n.project}_${this.flag}`:null,u=s[l||`${i.project}_${this.flag}`];u&&(u.updateView=c)}if(!ze&&a&&!o){let l={...i,flag:this.flag};hr(l)}if(n.project){let u={...{...ft,site:n.site,project:n.project},flag:this.flag};hr(u)}}componentWillUnmount(){let{localeState:e}=k;this.unmount=!0;let{part:t={},fetchConfig:o={},noRemoteData:s}=this.props,n={...t},i={...o},a=Z(i?.project||""),c=Z(n?.project||""),l=a||c,u=e.fetchModules.findIndex(f=>f?.project===l&&f.flag===this.flag);s||(delete e[`${l}_${this.flag}`],u>-1&&e?.fetchModules?.splice(u,1))}render(){let{part:e={},children:t,customRender:o,normalCsr:s,fetchConfig:n={}}=this.props,{localeState:i}=k,a={...e},c={...n};c.project=Z(c?.project||""),a.project=Z(a?.project||"");let l=typeof o=="function";if(!k.usingRemote)return(0,Sr.jsx)(mt.Fragment,{children:t});if(a.project||c&&!c.fastRender){let u=a.project||c.project,f=i.fetchModules.find(y=>y.project===u&&y.flag===this.flag?y.fetchDone:!1),d=!f&&i.fetchModules.find(y=>y.project===u?y.fetchDone:!1),g=f||d,_=window?.__INIT_STATE__?.appContext?.isSSR;if(!g&&s||!g&&!_)return l?o(t,!1):null}return(0,Sr.jsx)(Do,{fetchConfig:c,children:l?o(t,!0):t})}};var Nc=ge;var{localeStore:eh}=k;var kc=D()?()=>{}:()=>document.body,Mh=D()?void 0:window.getComputedStyle;p();h();p();h();p();h();p();h();p();h();p();h();var ei=H(qe());function jc({children:r,...e}){return ei.default.createElement(Ho,{fetchConfig:En.fetchConfig,...e},r)}p();h();p();h();Ar();p();h();var Er=[We.BTC_MAINNET,We.TON_MAINNET];p();h();var ti=(r,e)=>{let t=r.split(".").map(Number),o=e.split(".").map(Number),s=Math.max(t.length,o.length);for(let n=0;n<s;n++){let i=t[n]||0,a=o[n]||0;if(i>a)return 1;if(i<a)return-1}return 0};var Mt=class{constructor(){m(this,"commonStore",null);m(this,"userForbiddenWithBridge",vr);m(this,"setUserForbiddenBridge",e=>{this.userForbiddenWithBridge=e});m(this,"defaultWalletConfig",zo);m(this,"walletConfig",this.defaultWalletConfig);m(this,"hasInitWalletInfo",!1);m(this,"setHasInitWalletInfo",e=>{this.hasInitWalletInfo=e});m(this,"chainId",Oe);m(this,"setChainId",e=>{this.chainId=e});m(this,"fromChainId",Oe);m(this,"setFromChainId",e=>{this.fromChainId=e});m(this,"addressType","");m(this,"setAddressType",e=>{this.addressType=e});m(this,"walletSupportMev",!1);m(this,"setWalletSupportMev",e=>{this.walletSupportMev=e});m(this,"checkOkxVersion",async()=>{let e="2.82.31",t=this.walletConfig.isOkxWallet;if(this.isConnectedWallet&&t&&window?.okxwallet?.getVersion){let o=await window.okxwallet.getVersion(),n=ti(o,e)>=0;this.setWalletSupportMev(n)}else this.setWalletSupportMev(!1)});m(this,"signWalletChainId",We.ETHEREUM_MAINNET)}getDeviceId(){}getChainId(){}get scanAppType(){throw new Error("scanAppType is not defined")}get walletType(){throw new Error("walletType is not defined")}get address(){return Oe}get computedForbiddenBridge(){let{computedIsCrossChain:e}=Ke(this.rootStore,"fromToStore",{});return e?this.userForbiddenWithBridge:vr}get computedAccountId(){let{walletConfig:e}=this;return e.walletId}setWalletConfig(e={}){this.walletConfig=e}getAddressByChainId(){}get isConnectedWallet(){return!!this.walletConfig.walletId}get computedNonsupportChain(){return!this.isConnectedWallet||!St(this.fromChainId)?!1:!this.address}get computedAccountWalletAddresses(){return Ir(Ke(this,"walletConfig.address",[])).join(",")||this.address}get computedAccountWalletAddressesArray(){return Ir(Ke(this,"walletConfig.address",[]))||[this.address]}get computedMultiAddresses(){let e=[],t=[];return Er.forEach(o=>{let s=this.getAddressByChainId(o);s&&(e.push(o),t.push(s))}),{targetChainId:e.join(),targetWalletAddress:t.join()}}setSignWalletChainId(e){this.signWalletChainId=e}get computedSignWalletAddress(){let e=this.computedAccountWalletAddressesArray;return e?.length===1?e[0]:this.getAddressByChainId(this.signWalletChainId)}cleanWalletConfig(){this.walletConfig=this.defaultWalletConfig,this.hasInitWalletInfo=!1}};p();h();p();h();function jt(r=[],e=[]){let t={};r.forEach(s=>{t[s]=ht});let o={};return e.forEach(s=>{o[s]=Jo}),{...t,...o}}var ri=jt(["walletConfig","chainId","hasInitWalletInfo","fromChainId","addressType"],["computedAccountId","isConnectedWallet","computedNonsupportChain","computedAccountWalletAddresses","computedAccountWalletAddressesArray","address","computedMultiAddresses"]);var Oo=class extends Mt{constructor(t){super();m(this,"formatWalletType",()=>{let{walletInfo:t}=Ge,{isHARDWARE:o,isMNEMONIC:s,isMPC:n,isPRIVATE:i}=t?.walletType||{};return o?_t.HARDWARE:s?_t.MNEMONIC:n?_t.MPC:i?_t.PRIVATE_KEY:null});m(this,"formatWalletAccount",t=>{let o=Object.values(t.account);return{...t,OKXWalletType:this.formatWalletType(),address:o}});m(this,"keyringIdentityTypeEnum",{});m(this,"walletList",[]);m(this,"addressBookList",[]);m(this,"hasInitWalletInfo",!1);m(this,"getAddressByChainId",t=>{if(!St(t))return Oe;let o=this.getWalletChainName(t);return this.walletConfig.account?.[o]||Oe});this.rootStore=t,this.commonStore=t.commonStore,Bt(this,ri)}async getDeviceId(){let{devid:t}=await Ge.localStore.get("devid");return t}getCurrentChainAddress(t){let o=this.rootStore?.fromToStore.from.chainId;if(!St(o))return Oe;let s=this.getWalletChainName(o);return t.account[s]}getWalletChainName(t){return Ge.getNetWorkName(t)}replaceAddressByType(t){if(this.addressType){let o={};return Er.forEach(s=>{let n=this.getWalletChainName(s);if(t.account?.[n]){let a=t.accountsMap?.[n]?.[this.addressType]?.address;a&&(o[n]=a)}}),{...t,account:{...t.account,...o}}}return t}setWalletConfig(t){this.walletConfig=this.formatWalletAccount(this.replaceAddressByType(t)),this.hasInitWalletInfo=!0}webSwapHistoryDetailViewMore(){}setAddressBookList(t){this.addressBookList=t}setWalletList(t){this.walletList=t.map(o=>o.walletId===this.computedAccountId?this.replaceAddressByType(o):o)}setKeyringIdentityTypeEnum(t){this.keyringIdentityTypeEnum=t}get address(){return this.getAddressByChainId(this.fromChainId)}},nS=Oo;p();h();p();h();var Po=H(qe());Ar();p();h();var uS={FROM:"FROM",TO:"TO"},dS={COMMON:"COMMON",COLLECTION:"COLLECTION"},Le={COLLECT_LIST:"COLLECT_LIST",ALL_NETWORK:"ALL_NETWORK",CHAIN_LIST:"CHAIN_LIST",SEARCH:"SEARCH",ALL_TOKENS:"ALL_TOKENS",HISTORY_LIST:"HISTORY_LIST"},Uc={[Le.COLLECT_LIST]:{[j.SWAP]:Or,[j.LIMIT_ORDER]:Or,[j.BRIDGE]:un},[Le.ALL_NETWORK]:{[j.SWAP]:cn,[j.LIMIT_ORDER]:an,[j.BRIDGE]:ln},[Le.SEARCH]:{[j.SWAP]:fn,[j.LIMIT_ORDER]:dn,[j.BRIDGE]:mn},[Le.CHAIN_LIST]:{[j.ORDERS]:Dr,[j.SWAP]:Dr,[j.LIMIT_ORDER]:sn,[j.BRIDGE]:nn},[Le.ALL_TOKENS]:{[j.SWAP]:Lr,[j.LIMIT_ORDER]:Lr,[j.BRIDGE]:rn},[Le.HISTORY_LIST]:{[j.SWAP]:qo,[j.LIMIT_ORDER]:en,[j.BRIDGE]:tn}},Ro=(r,e)=>Uc[r]?.[e]??"";var Ut=class{constructor(e){m(this,"watchTopDomRef",(0,Po.createRef)());m(this,"watchBottomDomRef",(0,Po.createRef)());m(this,"rootStore",null);m(this,"userUniqueId",_n.initUniqueId());m(this,"chainListFreshCount",0);m(this,"chainList",[]);m(this,"setChainList",e=>{this.chainList=e,this.chainListFreshCount+=1});m(this,"transactionLoading",!1);m(this,"setTransactionLoading",e=>{this.transactionLoading=e});m(this,"nowCurrencyUnit",{});m(this,"tokenModalVisible",!1);m(this,"safemoonSlippage",0);m(this,"getChainListUrl",({isHistory:e,currentTab:t})=>{let o=Ro(Le.CHAIN_LIST,this.currentTab||t);return e&&(o=Ro(Le.CHAIN_LIST,t||this.currentTab)),o});m(this,"fetchChainList",async({businessLine:e=1,isLimit:t=!1,isHistory:o=!1,currentTab:s,chainIdConfig:n={}})=>{if(Xo())return[];let i=this.getChainListUrl({isHistory:o,isLimit:t,currentTab:s}),[a,c]=await Kt(he.get(i,{params:{businessLine:t?Zo.LIMIT_ORDER:e,...n}}));if(a)return pe.error(Te.CHAIN_LIST_LOAD_ERROR,{error:a}),[];let l=c?.data||[];return l.length||pe.info(Te.TOKEN_LIST_FETCH_RESULT_EMPTY,{data:{isLimit:t,isHistory:o,currentTab:s}}),!o&&this.setChainList(l),this.setCurrentTabChainList({[s||this.currentTab]:l}),l});m(this,"currentTabChainList",{});m(this,"setCurrentTabChainList",e=>{this.currentTabChainList={...this.currentTabChainList,...e}});m(this,"getTradeType",()=>this.rootStore?.fromToStore?.computedIsCrossChain?wr.MULTI:wr.SINGLE);m(this,"globalMessages",null);m(this,"setGlobalMessage",e=>{this.globalMessages=e});m(this,"cleanGlobalMessage",()=>{this.globalMessages=null});m(this,"socketStatus",!1);m(this,"balancePushSocketStatus",!1);m(this,"resetFromToByTabChange",!1);m(this,"setResetFromToByTabChange",e=>{this.resetFromToByTabChange=e});m(this,"portal",ye.DEX);m(this,"setPortal",e=>{this.portal=e});m(this,"currencyConversion",e=>{let{usdToThisRate:t}=this.nowCurrencyUnit,o=xr.BigNumber(e);return!t||o.isNaN()?"":o.multipliedBy(t)});m(this,"currencyReConversion",e=>{let{usdToThisRate:t}=this.nowCurrencyUnit,o=xr.BigNumber(e);return!t||o.isNaN()?"":o.dividedBy(t).toString()});m(this,"isSensitiveChain",e=>this.computedSensitiveChainIds.some(t=>String(t)===String(e)));m(this,"getTokenAddress",e=>xn(e,this.isSensitiveChain(e?.chainId)));m(this,"equalsChainId",(e,t)=>vn(e,t));m(this,"equalsToken",(e,t)=>{let o=this.isSensitiveChain(e?.chainId);return wn(e,t,o)});m(this,"fromFillToken",!1);m(this,"currentTab","");m(this,"setCurrentTab",(e,t)=>{this.currentTab!==e&&(this.setResetFromToByTabChange(!0),this.rootStore?.fromToStore?.clearFromTo()),this.currentTab=e,this.fromFillToken=!!t});m(this,"forceUpdateFromToByHash",0);m(this,"forceUpdateFromTo",()=>{this.forceUpdateFromToByHash+=1});m(this,"isFirstInit",!0);m(this,"visibleAddFunds",!1);m(this,"setAddFundsVisible",e=>{this.visibleAddFunds=e});m(this,"currencyConversionWithSymbol",(e,t={})=>{let o=this.currencyConversion(e).toString(),s=this.computedNowCurrencySymbol;return hn(o,s,t)});m(this,"disclaimerVisible",Pn());m(this,"setDisclaimerVisible",e=>{this.disclaimerVisible=e});m(this,"buySellAmountChangedCount",0);m(this,"triggerBuySellAmountChanged",()=>{this.buySellAmountChangedCount+=1});m(this,"tradeTokenChangeMsg",{fromModule:"",tradeDirection:"",token:{},msgId:""});m(this,"sendTradeTokenChangeMsg",({fromModule:e,tradeDirection:t,token:o})=>{this.tradeTokenChangeMsg={fromModule:e,tradeDirection:t,token:o,msgId:`${e}-${t}-${new Date().getTime()}`}});this.rootStore=e,Rn&&this.setPortal(ye.LEDGER)}setChainType(){}get computedReserveGas(){let{chainList:e}=this,t=Ke(this.rootStore,"fromToStore.from.chainId");return e.find(s=>Number(s.chainId)===Number(t))?.reserveGas||""}getChainByID(e){return this.chainList.find(t=>(this.computedCurrentTabIsLimit||t.chainUsed)&&t.chainId===Number(e))}getUserUnit(){}get computedRealSlippageValue(){return Ke(this,"rootStore.slippageStore",{}).computedRealSlippageValue||0}setSocketStatus(e){this.socketStatus=e}setBalanceSocketStatus(e){this.balancePushSocketStatus=e}get computedIsWalletEnv(){return this.portal===ye.OKX_WALLET_EXTENSION}get computedIsWalletDashBoard(){return this.portal===ye.WALLET_DASHBOARD}get computedIsMarket(){return this.portal===ye.MARKET}get computedNotThirdBiz(){return this.portal===ye.OKX_WALLET_EXTENSION||this.portal===ye.DEX||this.portal===ye.MARKET}get computedNowCurrencySymbol(){return this.nowCurrencyUnit.symbol||""}get computedSensitiveChainIds(){return this.chainList.map(e=>Number(e.isSensitive)===Qo.YES?e.chainId:null).filter(Boolean)}get computedCurrentTabIsLimit(){return this.currentTab===j.LIMIT_ORDER}get computedIsUrlFillSwap(){return this.computedIsWalletDashBoard||this.computedIsWalletEnv}setIsFirstInit(e){this.isFirstInit=e}get computedTradeTokenChangeMsgId(){return this.tradeTokenChangeMsg.msgId}};p();h();var oi=jt(["userUniqueId","chainList","transactionLoading","nowCurrencyUnit","tokenModalVisible","safemoonSlippage","globalMessages","socketStatus","balancePushSocketStatus","portal","currentTab","currentTabChainList","forceUpdateFromToByHash","isFirstInit","visibleAddFunds","disclaimerVisible","buySellAmountChangedCount","tradeTokenChangeMsg"],["computedReserveGas","computedNowCurrencySymbol","computedSensitiveChainIds","computedIsWalletEnv","computedCurrentTabIsLimit","computedTradeTokenChangeMsgId"]);var No=class extends Ut{constructor(t){super(t);m(this,"swapCollapse",!1);m(this,"setSwapCollapse",t=>{this.swapCollapse=t});m(this,"chainListLoadError",!1);m(this,"setChainListLoadError",t=>{this.chainListLoadError=t});Bt(this,{...oi,swapCollapse:ht,chainListLoadError:ht}),this.setPortal(Yo)}getUserUnit(t){this.nowCurrencyUnit=t}};p();h();p();h();var ko=class{constructor(e){m(this,"updateTxHash",e=>(pe.info(Te.UPDATE_HASH,{...e,tags:{orderId:e.orderId,status:e?.status||1}}),he.post(on,e).catch(t=>{pe.info(Te.UPDATE_HASH_ERROR,{...e,error:t,tags:{orderId:e.orderId}})})));m(this,"cancelOrder",e=>(pe.info(Te.CANCEL_ORDER,{tags:{orderId:e}}),he.get(gn,{params:{id:e}})));m(this,"cancelLimitOrder",()=>{});this.rootStore=e}},ni=ko;var Mo=class extends ni{constructor(){super(...arguments);m(this,"sendTransaction",async(...t)=>Pr(...t));m(this,"sendTransactionEnhance",async(...t)=>Pr(...t));m(this,"signTransaction",async(t,o)=>{let[s,n]=await Kt(In(t,o));return[s,n]})}},eb=Mo;p();h();var yr=H(qe());p();h();var Cr=H(si());async function $c(r,e){let{devid:t}=await r.get("devid");return(o,s)=>{Cr.setDeviceId(t);let n=Cr.newInstance({site:"okex",product:o});return n.setApiEndpoint(`${e}/amplitude`),n.setCommonParams(Wt()),s(n),n}}async function Uo(r,e){(await $c(r,e))("web3_trade",Tn)}var Fc=()=>{let[r,e]=(0,yr.useState)(!1);return(0,yr.useEffect)(()=>{let{getApiHostname:t}=Ge.global;Uo(Ge.localStore,t()).then(()=>e(!0)).catch(()=>{})},[]),{initialized:r}},pb=Fc;p();h();var bb=r=>String(r?.isLeveraged)==="1",Eb=r=>String(r?.isHoneypot)==="1",Cb=r=>String(r?.isSafeMoonToken)==="1";p();h();p();h();var ii=()=>{if(Gt()){let t={home:Cn()?De.TGAPP:De.PLUGIN,coinDetail:De.WALLET,bot:De.COMMAND,coin_info_dialog:De.COIN_INFO_DIALOG},o=Rr.get("pageSource");return{orderSource:t[o]}}let e=Wt()?.source;if(e===De.MARKET){let t=Rr.get(Sn);e=bn[t]||De.MARKET}return{orderSource:e}};var Bc=r=>{let e=r[0];return{fromAdr:e.from,toAdr:e.to,inputData:e.inputData}},Kc=async({walletId:r,swapParams:e,signedTransactions:t,txArray:o,enableJito:s,isMemeMode:n=!1,orderId:i,isWalletInstantTrade:a=!1})=>{let c=o.length>1,{signedTx:l,transactionHash:u}=await Dn(t,{isMemeMode:n,isWidgetEnv:yn(),isWallet:Gt()||An.isExtensionEnv,isWalletInstantTrade:a}),f="";c?f=JSON.stringify(l):f=l[0];let d=u[0],g=c?{mev:"Jito",jitoHash:u[1]}:{},_=Bc(o),y=On(o),E={...e,enableJito:s,...ii()};return s&&(E.mevInfo="jito"),{updateMultiOrderInfo:{transactionHash:d,walletTxData:{extJson:JSON.stringify({...g,rent:y,txSource:3,feeType:4,multiTag:0,isMainTx:!1,coinAmount:0,serviceCharge:0,signedTx:c?JSON.parse(f):f}),isMainTx:!1,serviceCharge:0,txHash:d,walletId:r,txSource:3,coinAmount:0,walletType:2,signedTx:f,..._},orderId:i},dexMultiMetaSaveOrderParam:E}},Kb=async({signedTransactions:r,swapParams:e,walletId:t,txArray:o,enableJito:s,orderId:n})=>{let i=await Kc({walletId:t,signedTransactions:r,swapParams:e,txArray:o,enableJito:s,orderId:n});return he.post(pn,i)};p();h();Ar();var $o=class{constructor(){m(this,"txData",async e=>{let t;return Vo(e)?t=JSON.parse(e):t=e,Ln(t)})}};m($o,"chainId",We.SOLANA_MAINNET);p();h();var ai=H(qe());var Fo=class extends ai.PureComponent{constructor(e){super(e),this.state={hasError:!1,error:void 0,errorInfo:{}}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.isMainEntry?pe.error("fatal rendering error",{error:e,errorInfo:t,level:"fatal"}):pe.error(Te.ERROR_BOUNDARY,{error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}onRetry(){this.setState({hasError:!1})}render(){let{error:e,errorInfo:t,hasError:o}=this.state;return o?this.props.fallbackComponent({error:e,errorInfo:t,onRetry:()=>this.onRetry()}):this.props.children}};p();h();async function nE(r,e){return await he.post("/priapi/v6/dx/trade/multi/preCheck",r,e)}async function sE(r,e){return await he.post("/priapi/v6/dx/trade/multi/broadcast",r,e)}export{si as a,Y as b,er as c,ke as d,or as e,hf as f,_f as g,fc as h,Lt as i,Dt as j,ge as k,br as l,Nc as m,Fo as n,Uo as o,jc as p,jt as q,nS as r,uS as s,dS as t,Le as u,Ro as v,No as w,bb as x,Eb as y,Cb as z,eb as A,ii as B,Kc as C,Kb as D,$o as E,pb as F,nE as G,sE as H};
//# sourceMappingURL=chunk-5JUYNHHM.js.map
