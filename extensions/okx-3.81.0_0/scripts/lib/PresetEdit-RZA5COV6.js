import{a as be}from"./chunk-O5LVQ457.js";import{a as xe}from"./chunk-C7HUNOKC.js";import{a as Te}from"./chunk-XVAXXWFU.js";import{b as Ee,d as Ce,e as Ne}from"./chunk-JZPO4NU4.js";import{a as Se}from"./chunk-QRTQZ46Y.js";import"./chunk-RSS4ZW7H.js";import{b as G}from"./chunk-CPCRKRJC.js";import"./chunk-YU25S3Z6.js";import{d as ye,e as Me,f as he}from"./chunk-GLEO4M2L.js";import{a as ge}from"./chunk-NVT6KZMA.js";import{f,g as Y}from"./chunk-UNX7SSQ5.js";import{a as ve}from"./chunk-VN6CTHUI.js";import"./chunk-T2IRCTJA.js";import{a as _e}from"./chunk-BADVKNVD.js";import{e as j,i as K,s as fe,u as de}from"./chunk-FLUPYUSZ.js";import{H as wt,I as Z,n as I}from"./chunk-UC2GDSBD.js";import"./chunk-PI6SXITR.js";import{Xa as ce,Ya as pe,vd as S}from"./chunk-LZ43QKYM.js";import"./chunk-LLRT7ZCZ.js";import{a as P}from"./chunk-LH3J3TLH.js";import{n as ue}from"./chunk-XEVJKE53.js";import{_ as le,j as B,z as D}from"./chunk-NLHAZXT3.js";import"./chunk-J5HV5RZ5.js";import"./chunk-JXDUUE4S.js";import"./chunk-Y5NME4BP.js";import"./chunk-T7EATGE4.js";import{y as N}from"./chunk-YP7AL7GO.js";import"./chunk-VYWNZTTM.js";import"./chunk-33JFC56H.js";import{a as z}from"./chunk-6N5VE5LT.js";import{a as H}from"./chunk-6YOUVTKE.js";import"./chunk-AEGO4G2O.js";import"./chunk-7BSXWXHJ.js";import{f as k,o as y,q as M}from"./chunk-4J7XGGEQ.js";y();M();var a=k(H()),q=k(z());le();y();M();var C=k(H()),U=k(z());y();M();var E={root:"_root_1fcv2_1",title:"_title_1fcv2_12","input-container":"_input-container_1fcv2_19",inputContainer:"_input-container_1fcv2_19",input:"_input_1fcv2_19","input-tag":"_input-tag_1fcv2_25",inputTag:"_input-tag_1fcv2_25","custom-input":"_custom-input_1fcv2_28",customInput:"_custom-input_1fcv2_28","inner-input":"_inner-input_1fcv2_28",innerInput:"_inner-input_1fcv2_28","error-input":"_error-input_1fcv2_36",errorInput:"_error-input_1fcv2_36","err-text":"_err-text_1fcv2_39",errText:"_err-text_1fcv2_39"};var kt=({className:e,amountList:o,setAmountList:n,currentMode:t,currency:i,decimals:u,placeholderRef:m})=>{let l=(0,C.useMemo)(()=>t==="sell"?S("swaptrade_meme_input_label_sell_amount"):S("swaptrade_meme_input_label_pay_amount",{token:i}),[t,i]),[_,g]=(0,C.useMemo)(()=>t==="sell"?[!0,2]:[!1,u],[t,u]),r=(s,p)=>{if(_&&P.gt(s,100))return;let d=o.map((c,h)=>h===p?s:c);n(d)},v=(0,C.useMemo)(()=>o.some(s=>P.eq(s,0)),[o]),T=()=>{m.current?.scrollIntoView({behavior:"smooth",block:"center"})};return C.default.createElement("div",{className:(0,U.default)(e,E.root)},C.default.createElement("div",{className:(0,U.default)(E.title)},l),C.default.createElement("div",{className:(0,U.default)("flex items-center",E.inputContainer)},o.map((s,p)=>C.default.createElement(I.Number,{key:p,value:s,size:I.SIZE.sm,symbol:_?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:g,enableMinus:!1,min:0,className:E.input,inputClassName:E.inputTag,innerClassName:(0,U.default)(E.customInput,E.innerInput,{[E.errorInput]:P.eq(s,0)}),onChange:d=>{r(d,p)},onFocus:T}))),v&&C.default.createElement("div",{className:(0,U.default)(E.errText)},S("swaptrade_meme_input_error_no_zero")))},we=kt;y();M();var L=k(H()),R=k(z());y();M();var O={root:"_root_1vg59_1",title:"_title_1vg59_12",tips:"_tips_1vg59_19",input:"_input_1vg59_26","custom-input":"_custom-input_1vg59_26",customInput:"_custom-input_1vg59_26"};var It=({className:e,name:o,setName:n,disabled:t})=>{let i=g=>{let r=g.target.value;r.length>12&&(r=r.substring(0,12)),n(r)},[u,m]=(0,L.useState)(!1),l=(0,L.useMemo)(()=>String(o).length>=1&&u,[o,u]),{isSm:_}=ve();return L.default.createElement("div",{className:(0,R.default)(e,O.root)},L.default.createElement("div",{className:(0,R.default)(O.title)},S("swaptrade_meme_input_label_preset_name")),L.default.createElement(I,{value:o,size:_?I.SIZE.lg:I.SIZE.sm,error:()=>String(o).length<1?S("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,R.default)(O.input,O.customInput),disabled:t,errorType:I.TIP_TYPE.always,onChange:i,onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),l&&L.default.createElement("div",{className:O.tips},`${o.length}/12`))},ke=It;y();M();var x=k(H()),Ie=k(wt());le();function De({currentMode:e,computeBuyDefaultPresetList:o,computedSellDefaultPresetList:n}){return(0,x.useMemo)(()=>e==="buy"?o:n,[e,o,n])}function Pe({isEdit:e,currentMode:o,savePresetFn:n,onClose:t,setConfirmText:i,setConfirmVisible:u}){let m=(0,Ie.useHistory)(),l=(0,x.useCallback)(()=>{n(),t?t():m.goBack()},[m,t,n]),_=(0,x.useCallback)(()=>{if(!e){let r=o==="buy",v=r?ce:pe,T=r?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!Z.get(v)){i(S(T)),u(!0),Z.set(v,"1");return}}n(),t?t():m.goBack()},[e,o,t,n,i,u,m]);return[l,_]}function Fe({slippage:e,setSlippageMode:o,setSlippageUse:n,setSlippageError:t,setCustomMaxUse:i,setCustomMaxError:u,editPresetValue:m,setEditPreset:l,isEdit:_}){return(0,x.useCallback)(({mode:r,fixedData:v,dynamicData:T})=>{if(o(r),r===j.FIXED){let{value:s,level:p,error:d}=v;n(s),t(d),l({isEdit:_,value:{...m,slippage:{...e,mode:r,value:s?Y(s):"",type:p}}})}if(r===j.DYNAMIC){let{customMax:s,error:p}=T;i(s),u(p),l({isEdit:_,value:{...m,slippage:{...e,mode:r,customMax:s?Y(s):""}}})}},[m,_,u,i,t,o,n,e,l])}function Ae({setEditPreset:e,isEdit:o,editPresetValue:n,priorityFee:t,setPriorityFeeError:i,setLatestSelectFeeType:u}){return(0,x.useCallback)((l,_,g)=>{e({isEdit:o,value:{...n,priorityFee:{...t,value:_,type:l}}}),i(g),l!=="custom"&&u(l)},[n,o,t,e,u,i])}function Ue({setAmountListUsed:e,setEditPreset:o,isEdit:n,editPresetValue:t,currentMode:i}){return(0,x.useCallback)(m=>{e(m),o({isEdit:n,value:{...t,amountList:m.map(l=>i==="sell"?Y(l):l)}})},[e,o,n,t,i])}function Oe({defaultPresetList:e,id:o,slippage:n,priorityFee:t,amountList:i,slippageError:u,priorityFeeError:m,customMaxError:l,name:_,mevModeStatus:g}){let r=(0,x.useMemo)(()=>e.find(p=>p.id===o)||null,[e,o]),v=(0,x.useMemo)(()=>r?D(r.slippage.value,n.value)&&D(r.slippage.type,n.type)&&D(r.priorityFee.type,t.type)&&D(r.amountList,i)&&D(r.slippage.mode,n.mode)&&D(r.slippage.customMax,n.customMax):!0,[r,n,t,i]),T=(0,x.useMemo)(()=>u||m||l||_.length===0||i.some(p=>P.eq(p,0))||g===6,[u,m,l,_,i,g]),s=(0,x.useMemo)(()=>o?.includes(fe),[o]);return[r,v,T,s]}function He({newPreset:e,setSlippageUse:o,setSlippageMode:n,setCustomMaxUse:t,setPriorityFeeError:i,setSlippageError:u,setCustomMaxError:m,currentMode:l,setAmountListUsed:_,setEditPreset:g,isEdit:r,editPresetValue:v,slippage:T,priorityFee:s}){return(0,x.useCallback)(()=>{if(e){o(f(e.slippage.value)),n(e.slippage.mode),t(f(e.slippage.customMax)),i(!1),u(!1),m(!1);let d=e.amountList.map(c=>l==="sell"?f(c):c);_(d),g({isEdit:r,value:{...v,slippage:{...T,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...s,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,o,n,t,i,u,m,l,_,g,r,v,T,s])}y();M();var w={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var Dt=ue(({onClose:e})=>{let{configStore:o,quoteStore:n}=G(),{currentMode:t,computedConfig:i,tradeScene:u}=o,{mevUnstableShowLevel:m,jitoIsSuccess:l}=n,_=B(i,"nativeTokenInfo.decimals",0),g=B(i,"mevPriceThreshold"),r=B(i,"nativeTokenInfo.chainName"),{chainSymbol:v}=xe(),{editPreset:T,setEditPreset:s}=Ee(),{value:p,isEdit:d}=T,{slippage:c,priorityFee:h,name:X,amountList:V,id:Be,priorityMode:Ye,manualType:Re}={...de,...p},{savePresetFn:qe}=Ce(),[ze,W]=(0,a.useState)(!1),[Ze,$]=(0,a.useState)(!1),[je,J]=(0,a.useState)(!1),[Q,Ke]=(0,a.useState)(Ye),[ee,Ge]=(0,a.useState)(Re),Xe=ge({priorityMode:Q,manualType:ee,jitoIsSuccess:l,mevUnstableShowLevel:m}),Ve={low:f(c.config.low),medium:f(c.config.medium),high:f(c.config.high)},te=f(c.min),oe=f(c.max),We=f(c.dynamicMax),$e=f(c.dynamicMin),Je=f(c.recommendMax),Qe=f(c.recommendMin),et=b=>be({value:b,min:te,max:oe,level:c.type}),[tt,ne]=(0,a.useState)(f(c?.value)),[ot,re]=(0,a.useState)(c.mode),[nt,se]=(0,a.useState)(f(c.customMax)),[rt,st]=(0,a.useState)(h.type!==K.CUSTOM?h.type:K.MARKET),{getTokenAmount:it,getUsd:at}=Te(G),{computeBuyDefaultPresetList:mt,computedSellDefaultPresetList:lt}=Se(),ut=De({currentMode:t,computeBuyDefaultPresetList:mt,computedSellDefaultPresetList:lt}),[ct,pt]=(0,a.useState)(!1),[_t,ft]=(0,a.useState)(""),[dt,gt]=Pe({isEdit:d,currentMode:t,savePresetFn:qe,onClose:e,setConfirmText:ft,setConfirmVisible:pt}),vt=b=>{s({isEdit:d,value:{...p,name:b}})},yt=b=>{Ke(b),s({isEdit:d,value:{...p,priorityMode:b}})},Mt=b=>{Ge(b),s({isEdit:d,value:{...p,manualType:b}})},ht=Fe({slippage:c,setSlippageMode:re,setSlippageUse:ne,setSlippageError:W,setCustomMaxUse:se,setCustomMaxError:J,editPresetValue:p,setEditPreset:s,isEdit:d}),St=Ae({setEditPreset:s,editPresetValue:p,isEdit:d,setPriorityFeeError:$,setLatestSelectFeeType:st,priorityFee:h}),[xt,ie]=(0,a.useState)(V.map(b=>t==="sell"?Number(f(b)):b)),Tt=Ue({setAmountListUsed:ie,setEditPreset:s,isEdit:d,editPresetValue:p,currentMode:t}),[bt,Et,Ct,ae]=Oe({defaultPresetList:ut,id:Be,slippage:c,priorityFee:h,amountList:V,slippageError:ze,priorityFeeError:Ze,customMaxError:je,name:X,mevModeStatus:Xe}),Nt=He({newPreset:bt,setSlippageUse:ne,setSlippageMode:re,setCustomMaxUse:se,setPriorityFeeError:$,setSlippageError:W,setCustomMaxError:J,currentMode:t,setAmountListUsed:ie,setEditPreset:s,isEdit:d,editPresetValue:p,slippage:c,priorityFee:h}),me=(0,a.useRef)(null),Lt=_e();return a.default.createElement("div",{className:(0,q.default)(w.root)},a.default.createElement(ke,{className:w.name,name:X,setName:vt,disabled:ae}),u===0&&a.default.createElement(he,{className:w.mev,priorityMode:Q,setMode:yt,manualType:ee,setManualType:Mt,mevUnstableShowLevel:m,jitoIsSuccess:l,mevPriceThreshold:g,chainName:r}),a.default.createElement(Me,{className:w.slippage,mode:ot,fixedData:{value:tt,level:c.type,levelMap:Ve,min:te,max:oe,validator:et},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:c.supportCustomMax,customMax:nt,dynamicMax:We,dynamicMin:$e,recommendMax:Je,recommendMin:Qe},onChange:ht}),a.default.createElement(ye.SelectMode,{className:w.priority,fee:h?.value,type:h?.type,feeMap:h.config,max:h?.max,currency:v,onChange:St,recommendMaxValue:h?.recommendMaxValue,recommendMinValue:h?.recommendMinValue,latestSelectType:rt,getTokenAmount:it,getUsd:at,tradeScene:u}),a.default.createElement(we,{className:w.amount,amountList:xt,setAmountList:Tt,currency:v,currentMode:t,decimals:_,placeholderRef:me}),a.default.createElement("div",{className:(0,q.default)({[w.placeholderTg]:Lt}),ref:me}),a.default.createElement("div",{className:(0,q.default)("flex justify-between",w.btns)},ae&&a.default.createElement(N,{className:"flex-1",category:N.CATEGORY.outline,type:N.TYPE.primary,size:N.SIZE.lg,block:!0,disabled:Et,onClick:Nt},S("swaptrade_general_btn_reset")),a.default.createElement(N,{className:"flex-1",category:N.CATEGORY.fill,type:N.TYPE.primary,disabled:Ct,size:N.SIZE.lg,block:!0,onClick:gt},S("swaptrade_dialog_btn_confirm"))),a.default.createElement(Ne,{onConfirm:dt,visible:ct,showChecked:!1,text:_t,confirmText:S("commonall_text_btn_ok_active")}))}),Vo=Dt;export{Vo as default};
//# sourceMappingURL=PresetEdit-RZA5COV6.js.map
