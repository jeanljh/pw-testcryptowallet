import{a as Re}from"./chunk-55MFL6ZJ.js";import"./chunk-LL3KTXMQ.js";import{a as Ye}from"./chunk-O5LVQ457.js";import{a as we}from"./chunk-C7HUNOKC.js";import{a as K}from"./chunk-XVAXXWFU.js";import{a as Le}from"./chunk-QRTQZ46Y.js";import{a as ke,b as Ie,c as Oe,d as ze}from"./chunk-RSS4ZW7H.js";import{b as R}from"./chunk-CPCRKRJC.js";import"./chunk-YU25S3Z6.js";import{a as he}from"./chunk-NYLS5KPS.js";import{d as Ne,e as De,f as Ae}from"./chunk-GLEO4M2L.js";import{a as be}from"./chunk-NVT6KZMA.js";import{f as i,g as ne}from"./chunk-UNX7SSQ5.js";import"./chunk-VN6CTHUI.js";import"./chunk-T2IRCTJA.js";import{K as Ce,L as Ue}from"./chunk-SPXYT2VO.js";import{p as xe}from"./chunk-7CFB2XTF.js";import"./chunk-BADVKNVD.js";import{e as ie,i as I,s as Ee,u as Pe}from"./chunk-FLUPYUSZ.js";import{H as No}from"./chunk-UC2GDSBD.js";import"./chunk-RYV5MLCF.js";import"./chunk-OE3Y2WW2.js";import{a as ve}from"./chunk-PI6SXITR.js";import{vd as k}from"./chunk-LZ43QKYM.js";import"./chunk-LLRT7ZCZ.js";import{a as z}from"./chunk-LH3J3TLH.js";import{F as H,n as Fe}from"./chunk-XEVJKE53.js";import"./chunk-2TP4LTGZ.js";import"./chunk-FA47DEF6.js";import"./chunk-NHQL3RON.js";import"./chunk-AUVAPXJK.js";import"./chunk-UCYWIXHR.js";import"./chunk-25RXMKCK.js";import"./chunk-YS3HYG35.js";import"./chunk-GVNSNU7P.js";import"./chunk-N3AWCE75.js";import"./chunk-MVO3PFGF.js";import"./chunk-DKCWR6P4.js";import{B as _e,C as ge,G,H as Se,_ as Te,j as se,z as f}from"./chunk-NLHAZXT3.js";import"./chunk-Z7O2BQPT.js";import"./chunk-RRVELJ3L.js";import"./chunk-MWBMNCFR.js";import"./chunk-J5HV5RZ5.js";import"./chunk-JXDUUE4S.js";import"./chunk-Y5NME4BP.js";import"./chunk-T7EATGE4.js";import{y as M}from"./chunk-YP7AL7GO.js";import"./chunk-VYWNZTTM.js";import"./chunk-33JFC56H.js";import{a as ho}from"./chunk-6N5VE5LT.js";import{a as Me}from"./chunk-6YOUVTKE.js";import"./chunk-AEGO4G2O.js";import"./chunk-GQPYV2B4.js";import"./chunk-7BSXWXHJ.js";import"./chunk-M7JGFMJS.js";import{f as B,o as L,q as w}from"./chunk-4J7XGGEQ.js";L();w();var e=B(Me()),Xe=B(ho());Te();L();w();var T=B(Me()),Ge=B(No());Te();function He({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,T.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function Ke({tradeScene:t,computedQuoteSafemoon:r}){return{safeMoonToken:(0,T.useMemo)(()=>t===0?r:"",[t,r])}}function qe(){let{getUsd:t}=K(R);return{formatUSD:s=>ge(s)||_e(s)?"--":t(s)}}function je({priorityFeeState:t,priorityFee:r,tradeScene:s,solSinglePrice:p}){let[a,y]=(0,T.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),u=(0,T.useMemo)(()=>{let l=r||"0";return ve(l)?"0":new z.BigNumber(l).toString(10)},[r]),[F,v]=(0,T.useMemo)(()=>{let l=u;s===0&&(l=z.add(u,a));let x=z.mul(p||0,l);return[z.mul(p||0,u),x]},[u,a,p,s]);return{baseFeeValue:a,baseFeeUsd:y,priorityFeeForShow:u,priorityFeeUSD:F,totalFeeUSD:v}}function Qe({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:p,setPriorityFeeType:a,setPriorityFeeError:y,slippage:u,setSlippage:F,setSlippageError:v,slippageType:l,setSlippageType:x,feeMap:E,slippageMode:h,setSlippageMode:N,customMax:P,setCustomMax:o,setCustomMaxError:C,priorityMode:_,setPriorityMode:U,setManualType:D}){let n=(0,T.useMemo)(()=>t.find(S=>S.id===r)||null,[t,r]);return{resetDisabled:(0,T.useMemo)(()=>n?f(i(n.slippage.value),u)&&f(n.slippage.type,l)&&f(n.priorityFee.type,p)&&f(n.slippage.mode,h)&&f(i(n.slippage.customMax),P)&&f(n.priorityMode,_):!0,[n,u,l,p,h,P,_]),handleReset:()=>{a(n.priorityFee.type),F(i(n.slippage.value)),x(n.slippage.type),s(E[n.priorityFee.type].amount),N(n.slippage.mode),o(i(n.slippage.customMax)),U(n.priorityMode),D(n.manualType),v(!1),y(!1),C(!1)}}}var Lo=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function We({slippageType:t,initState:r,slippage:s,priorityFee:p,priorityFeeType:a,slippageMode:y,customMax:u,currentPreset:F,slippageState:v,presetPriorityFee:l,currentPresetList:x,currentPresetId:E,setCurrentPresetList:h,currentMode:N,onClose:P,priorityMode:o,manualType:C}){let _=(0,Ge.useHistory)(),U=Re(xe);return{handleConfirm:()=>{if(U({custom_or_auto:t}),!(f(r.mode,y)&&f(r.slippage,s)&&f(r.slippageType,t)&&f(r.priorityFee,p)&&f(r.priorityFeeType,a)&&f(r.customMax,u)&&Lo({priorityMode:o,manualType:C},r))){let g=G({},F,{slippage:G({},v,{value:s?ne(s):"",type:t,mode:y,customMax:u?ne(u):""}),priorityFee:G({},l,{value:a===I.CUSTOM?p:"",type:a}),priorityMode:o,manualType:C}),A=x.map(S=>S.id===E?g:S);h(A),Ue.info(Ce.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:g,currentMode:N}})}P?P():_.goBack()}}}L();w();var d={root:"_root_y7yz0_1",name:"_name_y7yz0_8",mev:"_mev_y7yz0_9",slippage:"_slippage_y7yz0_10",priority:"_priority_y7yz0_11",btns:"_btns_y7yz0_14",notice:"_notice_y7yz0_23","notice-title":"_notice-title_y7yz0_29",noticeTitle:"_notice-title_y7yz0_29","notice-text":"_notice-text_y7yz0_32",noticeText:"_notice-text_y7yz0_32"};var wo=Fe(({onClose:t})=>{let{quoteStore:r,configStore:s}=R(),{currentMode:p,tradeScene:a,computedConfig:y}=s,u=se(y,"mevPriceThreshold"),F=se(y,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:v,jitoIsSuccess:l,computedAutoSlippage:x,mevUnstableShowLevel:E}=r,{chainSymbol:h}=we(),{currentPreset:N}=ke(),P=Se(Pe,["name","amountList"]),{slippage:o,priorityFee:C,id:_,priorityMode:U,manualType:D}={...P,...N},n=(0,e.useMemo)(()=>_?.includes(Ee),[_]),[g,A]=(0,e.useState)("auto"),[S,q]=(0,e.useState)(0);(0,e.useEffect)(()=>{A(U),q(D)},[U,D]);let ae=be({priorityMode:g,manualType:S,jitoIsSuccess:l,mevUnstableShowLevel:E}),Ze=he(ae),{formatPriorityFee:m}=Ie({priorityFee:C,isEnableMev:Ze}),[O,j]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{j(o.mode)},[o.mode]);let[Q,W]=(0,e.useState)(i(o.customMax));(0,e.useEffect)(()=>{W(i(o.customMax))},[o.customMax]);let[Je,me]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(i(o.value)),[Y,J]=(0,e.useState)(o.type),[$e,ue]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Z(i(o.value)),J(o.type)},[o.value,o.type]);let[$,ee]=(0,e.useState)(m.value),[oe,pe]=(0,e.useState)(m.type),le=(0,e.useRef)(m.type),[eo,ce]=(0,e.useState)(!1),[oo,to]=(0,e.useState)(m.type!==I.CUSTOM?m.type:I.MARKET);(0,e.useEffect)(()=>{let c=le.current;if(c===I.CUSTOM)return;let b=m.config[c]?.amount;ee(b)},[m.config]);let ro=O==="fixed"&&$e||O==="dynamic"&&Je||eo||ae===6,so={mode:o.mode,customMax:i(o.customMax),slippage:i(o.value),slippageType:o.type,priorityFee:m.value,priorityFeeType:m.type,priorityMode:U,manualType:D},io={low:i(o.config.low),medium:i(o.config.medium),high:i(o.config.high)},fe=i(o.min),de=i(o.max),te=i(x),no=i(o.dynamicMax),ao=i(o.dynamicMin),mo=i(o.recommendMax),uo=i(o.recommendMin),{computeBuyDefaultPresetList:po,computedSellDefaultPresetList:lo}=Le(),{defaultPresetList:co}=He({currentMode:p,computeBuyDefaultPresetList:po,computedSellDefaultPresetList:lo}),{setCurrentPresetList:fo,currentPresetId:yo,currentPresetList:Mo}=ze(),{handleReset:_o,resetDisabled:go}=Qe({defaultPresetList:co,id:_,setPriorityFee:ee,priorityFeeType:oe,setPriorityFeeType:pe,slippage:X,setSlippage:Z,slippageType:Y,setSlippageType:J,slippageMode:O,setSlippageMode:j,customMax:Q,setCustomMax:W,setPriorityFeeError:ce,setSlippageError:ue,setCustomMaxError:me,feeMap:m.config,priorityMode:g,setPriorityMode:A,setManualType:q}),{handleConfirm:So}=We({slippageType:Y,initState:so,slippage:X,priorityFee:$,priorityFeeType:oe,slippageMode:O,customMax:Q,currentPreset:N,slippageState:o,presetPriorityFee:C,currentPresetList:Mo,currentPresetId:yo,setCurrentPresetList:fo,currentMode:p,onClose:t,priorityMode:g,manualType:S}),{solSinglePrice:To}=Oe(),{baseFeeValue:Fo,baseFeeUsd:vo,totalFeeUSD:xo,priorityFeeUSD:Eo,priorityFeeForShow:Po}=je({priorityFeeState:m,priorityFee:$,tradeScene:a,solSinglePrice:To}),{formatUSD:re}=qe(),{safeMoonToken:ye}=Ke({tradeScene:a,computedQuoteSafemoon:v}),Co=c=>Ye({value:c,min:fe,max:de,level:Y,auto:te,safemoon:ye}),{getTokenAmount:Uo,getUsd:bo}=K(R);return e.default.createElement("div",{className:d.root},a===0&&e.default.createElement(Ae,{className:d.mev,setMode:A,priorityMode:g,setManualType:q,manualType:S,mevUnstableShowLevel:E,jitoIsSuccess:l,mevPriceThreshold:u,chainName:F}),e.default.createElement(De,{className:d.slippage,mode:O,fixedData:{value:X,level:Y,levelMap:io,min:fe,max:de,validator:Co,auto:te},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:te,supportCustomMax:o.supportCustomMax,customMax:Q,dynamicMax:no,dynamicMin:ao,recommendMax:mo,recommendMin:uo,safemoon:ye},onChange:({mode:c,fixedData:b,dynamicData:V})=>{j(c),c===ie.FIXED&&(Z(b.value),J(b.level),ue(b.error)),c===ie.DYNAMIC&&(W(V.customMax),me(V.error))}}),e.default.createElement(Ne.DetailMode,{className:d.priority,fee:$,type:oe,latestSelectType:oo,feeMap:m.config,max:m.max,recommendMaxValue:m?.recommendMaxValue,recommendMinValue:m?.recommendMinValue,currency:h,onChange:(c,b,V)=>{ee(b),pe(c),le.current=c,ce(V),c!=="custom"&&to(c)},getTokenAmount:Uo,getUsd:bo,tradeScene:a}),a===0&&e.default.createElement("div",{className:d.notice},e.default.createElement("div",{className:d.noticeTitle},H(k("swaptrade_trade_label_total_fees",{price:re(xo)}))),e.default.createElement("div",{className:d.noticeText},H(k("swaptrade_trade_label_base_fee_value",{value:Fo,price:re(vo)}))),e.default.createElement("div",{className:d.noticeText},H(k("swaptrade_trade_label_priority_fee_value",{value:Po,price:re(Eo)})))),e.default.createElement("div",{className:(0,Xe.default)("flex justify-between",d.btns)},n&&e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.outline,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,onClick:_o,disabled:go},k("swaptrade_general_btn_reset")),e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.fill,type:M.TYPE.primary,disabled:ro,size:M.SIZE.lg,block:!0,onClick:So},k("swaptrade_dialog_btn_confirm"))))}),Ut=wo;export{Ut as default};
//# sourceMappingURL=Configure-T2M7OPMP.js.map
