import{n as _}from"./chunk-YAZIRKLK.js";import{b as F,c as U}from"./chunk-3FSEKPUM.js";import{c as Ce}from"./chunk-OGVTPJRM.js";import{a as we}from"./chunk-CHJAVPER.js";import{b as q}from"./chunk-ALZVVIHH.js";import{O as Ie}from"./chunk-SPXYT2VO.js";import{k as ge}from"./chunk-7CFB2XTF.js";import{d as _e,f as n,i as S,l as g,o as G}from"./chunk-UC2GDSBD.js";import{m as fe,t as Ee}from"./chunk-PI6SXITR.js";import{Ba as x,Ka as ce,Oc as me,ga as C,pd as pe,vd as t,wd as ue}from"./chunk-LZ43QKYM.js";import{c as M}from"./chunk-LLRT7ZCZ.js";import{H as Y,d as Q,e as Z,l as de,n as v}from"./chunk-XEVJKE53.js";import{M as ae,U as ne,V as K,X as z,_ as Le,j as oe,m as se,t as B,y as ie}from"./chunk-NLHAZXT3.js";import{s as le,y as T}from"./chunk-YP7AL7GO.js";import{G as O}from"./chunk-33JFC56H.js";import{a as y}from"./chunk-6N5VE5LT.js";import{a as f}from"./chunk-6YOUVTKE.js";import{f as p,o as s,q as i}from"./chunk-4J7XGGEQ.js";s();i();Le();var X=class{constructor(){this.setLiquidityModelVisible=e=>{_.update({liquidityModelVisible:e})};this.setDataStatus=e=>{_.update({dataStatus:e})};this.setData=e=>{_.update({rawData:e})};this.resetAllLiquidityData=()=>{_.update({rawData:[],selectedListIds:[],confirmIds:null})};this.initAllLiquidityData=e=>{let o=B(e,"id");_.update({rawData:e,selectedListIds:o});let a=_.fromChainId;Ee(a)&&_.update({confirmIds:ae({},a,o)})};this.fetchLiquidityData=async()=>{this.resetAllLiquidityData(),this.setDataStatus(x.LOADING),_.LiquidityCancelRef&&_.LiquidityCancelRef.abort(),_.update({LiquidityCancelRef:Ie()});let[e,o]=await Y(q.get(me,{params:{chainId:_.fromChainId},signal:_.LiquidityCancelRef?.signal,isolate:!0}));if(e)this.setDataStatus(x.ERROR);else{let a=oe(o,"data");ie(a)?this.setDataStatus(x.NULL):(this.initAllLiquidityData(a),this.setDataStatus(x.READY))}};this.setSelectedListIds=e=>{_.update({selectedListIds:e})};this.setConfirmIds=e=>{_.update({confirmIds:e})};this.filterSelectedListIds=(e,o)=>{let a;o?a=z(_.selectedListIds,e):a=se(_.selectedListIds,e),this.setSelectedListIds(K(a))};this.checkAllBtn=()=>{let e="",o=_.computedSearchStatus?_.computedSearchData:_.rawData,a=B(o,"id");_.computedListCheckedAll?e=z(_.selectedListIds,...a):e=ne(_.selectedListIds,a),this.setSelectedListIds(K(e))};this.setLiquiditySearchValue=e=>{_.update({searchLiquidityValue:e})}}},he=new X;s();i();var k=p(f()),j=p(y());s();i();var A={"quote-interval-box":"_quote-interval-box_dm0co_1",quoteIntervalBox:"_quote-interval-box_dm0co_1","quote-interval-reset":"_quote-interval-reset_dm0co_17",quoteIntervalReset:"_quote-interval-reset_dm0co_17","right-arrow":"_right-arrow_dm0co_25",rightArrow:"_right-arrow_dm0co_25","error-icon":"_error-icon_dm0co_28",errorIcon:"_error-icon_dm0co_28","alert-icon":"_alert-icon_dm0co_29",alertIcon:"_alert-icon_dm0co_29","warn-icon":"_warn-icon_dm0co_30",warnIcon:"_warn-icon_dm0co_30"};function J({openLiquidityDialog:r}){return k.default.createElement(_e,{className:A.quoteIntervalReset,onClick:r},t("commonall_filter_dropdown_select"),k.default.createElement(le,{className:(0,j.default)("okx-defi-dex-arrow-right-1",A.rightArrow)}))}var Pe=({isNoDexLiquidity:r})=>{let{quoteStore:e,fromToStore:o}=M(),{computedIsNoLiquidity:a,computedCrossChainIntervalOutOfRange:u}=e,{computedIsCrossChain:l}=o,{computedIsCustomLiquidity:E,computedIds:N=[]}=_,{setLiquidityModelVisible:b}=he,w="",h=null;if((a||r)&&E){let H=()=>{b(!0),ge({button_name:"liquidity_sources"})};h=t("swaptrade_1swap_notification_selected_pools_reselect",{swaptrade_1swap_notification_selected_pools_reselect:N.length}),w=k.default.createElement(J,{openLiquidityDialog:H})}else if((a||u)&&l)w=k.default.createElement("span",{className:A.quoteIntervalReset},t("swaptrade_dialog_desc_not_supported"));else if(a)w=k.default.createElement("span",{className:A.quoteIntervalReset},t("swaptrade_swap_card_text_no_quote_fetched"));else return null;return k.default.createElement(n,{title:h,desc:w,type:n.TYPE.warn,closable:!1,className:(0,j.default)("mt-16")})},it=v(Pe);s();i();var $=class{constructor(){this.unbindRefCodeList=[];this.unbindRefCodeInfoMap={};this.fetchRefInfo=async(e,o)=>{let[a,u]=await Y(q.get(pe,{params:{code:e,ipCheck:!0}}));if(a)return null;let{data:l}=u||{},{discountRate:E,discountRateThreshold:N,inviterAddresses:b}=l||{},w=(b||[])?.some(h=>h.address===o);return l&&E>=N&&!w?{...l,code:e}:null};this.fetchUnbindRefInfoList=async(e,o)=>{let u=(await Promise.all(e.map(async l=>this.fetchRefInfo(l,o)))).filter(l=>!!l);this.unbindRefCodeInfoMap=u.reduce((l,E)=>(E&&(l[E.code]=E),l),{}),this.unbindRefCodeList=u.map(({code:l})=>l)};this.clearRefInfo=e=>{e?(this.unbindRefCodeList=this.unbindRefCodeList.filter(o=>o!==e),this.unbindRefCodeInfoMap[e]=null):(this.unbindRefCodeList=[],this.unbindRefCodeInfoMap={})};de(this,{unbindRefCodeList:Q,unbindRefCodeInfoMap:Q,refCode:Z,refInfo:Z})}get refCode(){return this.unbindRefCodeList?.[0]||""}get refInfo(){return this.unbindRefCodeInfoMap?.[this.refCode]||null}},ut=new $;s();i();var ee=p(f());s();i();var V=p(f());s();i();var Te={"warn-state-container":"_warn-state-container_1n8v8_1",warnStateContainer:"_warn-state-container_1n8v8_1","error-state-container":"_error-state-container_1n8v8_2",errorStateContainer:"_error-state-container_1n8v8_2","error-state-title":"_error-state-title_1n8v8_15",errorStateTitle:"_error-state-title_1n8v8_15","error-state-content":"_error-state-content_1n8v8_21",errorStateContent:"_error-state-content_1n8v8_21","add-funds":"_add-funds_1n8v8_28",addFunds:"_add-funds_1n8v8_28",warning:"_warning_1n8v8_33",error:"_error_1n8v8_2","ledger-network-tips":"_ledger-network-tips_1n8v8_39",ledgerNetworkTips:"_ledger-network-tips_1n8v8_39",mb16:"_mb16_1n8v8_42","error-icon":"_error-icon_1n8v8_45",errorIcon:"_error-icon_1n8v8_45","warn-icon":"_warn-icon_1n8v8_46",warnIcon:"_warn-icon_1n8v8_46"};var De=({chainName:r})=>{let e=()=>{let o=g.tip({infoType:g.Tip.INFO_TYPE.default,children:t("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:t("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{o.destroy()},confirmBtnProps:{block:!0,size:T.SIZE.md}})};return V.default.createElement(V.default.Fragment,null,t("swaptrade_top_alert_desc_paychain_not_supported",{payChain:r}),V.default.createElement(S,{className:Te.ledgerNetworkTips,type:S.TYPE.primary,weight:S.WEIGHT.muted,size:S.SIZE.xs,onClick:e},t("swaptrade_top_alert_textbtn_view_supported_chains")))},ke=De;var ye={warn:O.warn,error:O.error,info:O.info};var Mt={["PROVIDER_PRICE_WARN"]:({computedReducePercent:r})=>({title:t("swaptrade_swap_tooltip_title_highprice_difference"),desc:t("swaptrade_swap_tooltip_desc_choose_provider",{percent:r}),type:ye.warn}),["UNSUPPORTED_CHAIN"]:r=>{let{chainName:e}=r,o=t("swaptrade_adjustslip_modal_title_wrongnetwork"),a=t("swaptrade_card_alert_switch_wallet_to_match",{chainName:e});return C()?(o=t("swaptrade_extension_mid_plzswitch_wallet"),a=t("swaptrade_extension_mid_plzswitch_wallettips",{chain:e})):we&&(o=t("swaptrade_top_alert_title_please_switch_network"),a=ee.default.createElement(ke,{chainName:e})),{title:o,desc:a,type:n.TYPE.warn}},["ACCOUNT_ERROR_TIPS"]:()=>({title:t("swaptrade_adjustslip_modal_title_wrongnetwork"),desc:t("swaptrade_mid_alert_desc_vm_wallet"),type:n.TYPE.warn}),["FEE_CONFIG_ERROR"]:()=>({title:t("swaptrade_card_reminder_title_parameter_error"),desc:t("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:fe(ce,{needZero:!1})}),type:n.TYPE.error}),["LIMIT_REGION"]:()=>({title:null,desc:t("swaptrade_mid_toast_title_service_suspended"),type:n.TYPE.warn}),["SWAP_ON_OTHER_DAPP"]:()=>({title:t("swaptrade_toast_title_unsupported_swap"),desc:t("swaptrade_toast_desc_unsupported_swap"),type:n.TYPE.warn}),["INSUFFICIENT_LIQUIDITY"]:r=>({title:null,desc:r.error_message||t("swaptrade_quote_error_desc_insufficient_liquidity"),type:n.TYPE.error}),["BUY_HONEYPOT"]:()=>({title:null,desc:t("wallet_swap_toast_scam_token_desc"),type:n.TYPE.error}),["SELL_HONEYPOT"]:()=>({title:null,desc:t("wallet_swap_toast_scam_token_sell"),type:n.TYPE.warn}),["BLACKLIST_ADDRESS"]:()=>({title:null,desc:t("swaptrade_transfer_notif_suspended_services"),type:n.TYPE.error}),["NEW_ADDRESS"]:()=>({title:null,desc:t("swaptrade_swap_error_toast_desc_new_address_check",{num:10}),type:n.TYPE.error}),["NETWORK_ERROR"]:()=>({title:t("swap_title_quote_server_error"),desc:t("swaptrade_quote_server_error_content"),type:n.TYPE.error}),["SAFE_MOON"]:r=>({title:t("swaptrade_top_alert_burning_mechanism",r),desc:t("swaptrade_top_text_token_not_supported"),type:n.TYPE.warn}),["SAFE_MOON_NEW"]:({message:r})=>({title:null,desc:r,type:n.TYPE.warn}),["MIN_SELL_AMOUNT"]:r=>({title:null,desc:t("swaptrade_top_notif_min_sell_amount",r),type:n.TYPE.warn}),["LEVERAGE_TOKEN"]:()=>({type:n.TYPE.error,title:null,desc:t("wallet_swap_toast_scam_token_desc")}),["VALUE_DIFFERENCE"]:({text:r,percentage:e})=>({title:null,desc:t(r,{percentage:e}),type:n.TYPE.error}),["QUOTE_OTHER_ERROR"]:r=>({title:t("swap_title_quote_server_error"),desc:r.error_message||t("swaptrade_quote_error_no_update"),type:n.TYPE.error}),["LIQUIDITY_RESET"]:r=>{let{dexIds:e,openLiquidityDialog:o}=r;return{title:t("swaptrade_1swap_notification_selected_pools_reselect",{swaptrade_1swap_notification_selected_pools_reselect:e}),desc:ee.default.createElement(J,{openLiquidityDialog:o}),type:n.TYPE.warn}},["REVOKE_APPROVE"]:r=>({title:t("swaptrade_transfer_reminder_title_insufficient_approve"),desc:t("swaptrade_transfer_reminder_desc_insufficient_approve",{ccy:r.tokenSymbol}),type:n.TYPE.warn}),["ORDER_LIMIT"]:r=>({title:null,desc:t("swaptrade_mid_toast_title_service_suspended",r),type:n.TYPE.warn}),["INVALID_MARKET_CAP"]:()=>({title:null,desc:t("swaptrade_tee_alert_desc_mcap_unavailable"),type:n.TYPE.warn}),["CHAIN_IN_MAINTANCE"]:r=>({title:null,desc:r.toastContent,type:n.TYPE.error}),["PRE_CHECK_ERROR"]:r=>({type:r?.type===1?n.TYPE.warn:n.TYPE.error,title:null,desc:r?.title})};s();i();var R=p(f()),Ne=p(y());s();i();var te=p(f());var L=({className:r,onChangeAgreed:e,agreed:o,size:a})=>te.default.createElement("div",{className:r},te.default.createElement(G,{onChange:e,checked:o,size:a||G.SIZE.md},t("swaptrade_confirmation_checkbox_aware_risk")));s();i();var P=p(f());s();i();var d={body:"_body_1u2d5_1",content:"_content_1u2d5_5","freeze-assets":"_freeze-assets_1u2d5_8",freezeAssets:"_freeze-assets_1u2d5_8","terms-service":"_terms-service_1u2d5_11",termsService:"_terms-service_1u2d5_11",checkbox:"_checkbox_1u2d5_17","checkbox-web":"_checkbox-web_1u2d5_20",checkboxWeb:"_checkbox-web_1u2d5_20","checkbox-wallet":"_checkbox-wallet_1u2d5_23",checkboxWallet:"_checkbox-wallet_1u2d5_23","market-disclaimer-wrapper":"_market-disclaimer-wrapper_1u2d5_26",marketDisclaimerWrapper:"_market-disclaimer-wrapper_1u2d5_26","market-top":"_market-top_1u2d5_45",marketTop:"_market-top_1u2d5_45","market-title":"_market-title_1u2d5_45",marketTitle:"_market-title_1u2d5_45","market-content":"_market-content_1u2d5_51",marketContent:"_market-content_1u2d5_51","market-bottom":"_market-bottom_1u2d5_56",marketBottom:"_market-bottom_1u2d5_56","market-checkbox":"_market-checkbox_1u2d5_56",marketCheckbox:"_market-checkbox_1u2d5_56","widget-content":"_widget-content_1u2d5_61",widgetContent:"_widget-content_1u2d5_61"};var Oe=({className:r})=>{let e=C()?t("swaptrade_general_dialog_text_terms_service_link"):t("swaptrade_web_link_ecosystem_tos");return P.default.createElement(Ce,{className:r||d.termsService,href:e},t("swaptrade_general_dialog_text_terms_service"))},D=({className:r,linkClassName:e})=>P.default.createElement("div",{className:r},ue("swaptrade_general_dialog_desc_legal_disclaimer",{freezeAssets:P.default.createElement("span",{className:d.freezeAssets},t("swaptrade_general_dialog_text_freeze_content")),termsService:P.default.createElement(Oe,{className:e})}));function Re({agreed:r,onChangeAgreed:e}){let o=C();return R.default.createElement("div",{className:d.body},R.default.createElement(D,{className:d.content}),R.default.createElement(L,{className:(0,Ne.default)({[d.checkbox]:!0,[d.checkboxWeb]:!o,[d.checkboxWallet]:o}),onChangeAgreed:e,agreed:r}))}function ur(){if(!U())return()=>Promise.resolve(!0);let e=null,o=!1,a=u=>{o=u?.target?.checked,e?.update({children:R.default.createElement(Re,{agreed:o,onChangeAgreed:a}),confirmBtnProps:{disabled:!o,type:T.TYPE.primary}})};return()=>new Promise((u,l)=>{e=g.tip({infoType:g.Tip.INFO_TYPE.warn,btnFull:!1,title:t("swaptrade_general_dialog_title_legal_disclaimer"),children:R.default.createElement(Re,{agreed:o,onChangeAgreed:a}),confirmText:t("swaptrade_general_dialog_btn_start_trading"),confirmBtnProps:{disabled:!o,type:T.TYPE.primary},cancelText:t("commonall_text_btn_cancel"),onConfirm:()=>{F(!1),e?.destroy(),u(!0)},onClose:()=>{e?.destroy(),e=null,l(new Error("Risk prompt closed"))},onCancel:()=>{l(new Error("Risk prompt closed"))}})})}s();i();s();i();var W=p(f());var be=({setStoreDisclaimerVisible:r})=>{let e=typeof r=="function"?r:()=>{},o=(0,W.useMemo)(()=>U(),[]);return(0,W.useEffect)(()=>{e(o)},[o]),{agreeDisclaimer:()=>{e(!1),F(!1)}}};s();i();var I=p(f()),Se=p(y());var xe=({infoType:r,disclaimerVisible:e,setDisclaimerVisible:o,onAgree:a})=>{let[u,l]=(0,I.useState)(!1),{agreeDisclaimer:E}=be({setStoreDisclaimerVisible:o}),N=()=>{o(!1)},b=H=>{l(H?.target?.checked)},w=()=>{E(),a&&a()};(0,I.useEffect)(()=>(e||l(!1),()=>{l(!1)}),[e]);let h=C();return I.default.createElement(g.Tip,{visible:e,btnFull:!1,infoType:r||g.Tip.INFO_TYPE.default,title:t("swaptrade_general_dialog_title_legal_disclaimer"),confirmText:t("swaptrade_general_dialog_btn_start_trading"),confirmDisabled:!u,onConfirm:w,confirmBtnProps:{type:T.TYPE.primary},cancelText:t("commonall_text_btn_cancel"),onClose:N},I.default.createElement("div",{className:d.body},I.default.createElement(D,{className:d.content}),I.default.createElement(L,{className:(0,Se.default)({[d.checkbox]:!0,[d.checkboxWeb]:!h,[d.checkboxWallet]:h}),onChangeAgreed:b,agreed:u})))};s();i();var Ae=p(f());var vr=v(()=>{let{commonStore:r}=M();return Ae.default.createElement(xe,{disclaimerVisible:r.disclaimerVisible,setDisclaimerVisible:r.setDisclaimerVisible})});s();i();var re=p(f()),ve=p(y());export{he as a,A as b,J as c,it as d,ye as e,Mt as f,xe as g,ur as h,ut as i};
//# sourceMappingURL=chunk-OJWZP4US.js.map
