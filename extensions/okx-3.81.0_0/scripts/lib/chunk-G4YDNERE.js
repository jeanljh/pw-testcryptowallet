import{b as Ye}from"./chunk-3WFUHCRH.js";import{i as k}from"./chunk-OJWZP4US.js";import{b as ce}from"./chunk-63FXY6V3.js";import{g as H,h as oe}from"./chunk-YU25S3Z6.js";import{b as Oe,m as Ke}from"./chunk-46D3AKOR.js";import{a as Ue}from"./chunk-B65FDDLM.js";import{a as We}from"./chunk-VN6CTHUI.js";import{M as Ve,e as Q,n as Ae,o as Ne}from"./chunk-SPXYT2VO.js";import{W as Le,e as Me,k as Be,r as Re}from"./chunk-7CFB2XTF.js";import{n as Fe}from"./chunk-FLUPYUSZ.js";import{H as mo,I as A,d as K,l as I,o as we,v as $}from"./chunk-UC2GDSBD.js";import{f as De,m as Pe,n as Ie}from"./chunk-PI6SXITR.js";import{Mb as j,Ua as X,Va as v,ia as ve,ja as ye,na as Se,oa as Ee,rb as se,va as Y,vd as c,wd as ee}from"./chunk-LZ43QKYM.js";import{F as ke,H as Te,X as xe,Y as be,n as he}from"./chunk-XEVJKE53.js";import{_ as ae,c as ge,f as h,j as D}from"./chunk-NLHAZXT3.js";import{a as Ce}from"./chunk-T7EATGE4.js";import{s as P,y as x}from"./chunk-YP7AL7GO.js";import{a as U}from"./chunk-6N5VE5LT.js";import{a as w}from"./chunk-6YOUVTKE.js";import{f as p,o as r,q as n}from"./chunk-4J7XGGEQ.js";r();n();var m=p(w()),Xe=p(mo()),le=p(U());ae();r();n();var y={root:"_root_tldcp_1",select:"_select_tldcp_11",body:"_body_tldcp_14",item:"_item_tldcp_17",icon:"_icon_tldcp_34",name:"_name_tldcp_38",check:"_check_tldcp_47"};var po=({key:o,icon:e,name:t,onClick:i,checked:a})=>m.default.createElement(K,{key:o,className:y.item,onClick:i},m.default.createElement(P,{className:`${e} ${y.icon}`,style:{fontSize:32}}),m.default.createElement("span",{className:y.name},t),a?m.default.createElement(we.Circle,{checked:!0,className:y.check}):null),_o=async()=>{let[o,e]=await Te(Ye({sceneType:0}));if(o)return null;let t=e.data.find(s=>ge(s.chainId)===se.SOLANA_MAINNET)||{},i=D(t,"nativeTokenInfo.chainId",""),a=D(t,"nativeTokenInfo.tokenContractAddress","");return{chainId:i,address:a}},uo=o=>{let[e,t]=(0,m.useState)(null);return(0,m.useEffect)(()=>{e||o||_o().then(i=>{t(i)}).catch(h)},[e,o]),e},go=({className:o,swapClick:e,bridgeClick:t,memeClick:i})=>{let{isSm:a}=We(),s=(0,Xe.useHistory)(),[_,l]=(0,m.useState)(!1),{pathname:C,search:b}=s.location,J=C===xe,L=C===be,S=J||L,F=C===ve,E=C===ye,V=uo(S),W=Y(Ee),Z=Y(Se),O=Y(""),eo=Y("/bridge");(0,m.useEffect)(()=>{let u=v.SWAP;E&&(u=v.BRIDGE),J&&(u=v.MEME_BUY),L&&(u=v.MEME_SELL),A.set(X,u)},[]);let oo=()=>{if(A.set(X,v.MEME_BUY),S&&(i&&i(),l(!1)),F){let u=H(b),io=D(u,"from.chainId",0),ao=D(u,"from.tokenContractAddress",""),so=D(u,"to.chainId",0),co=D(u,"to.tokenContractAddress",""),lo=io===V?.chainId&&ao===V?.address,fo=so===V?.chainId&&co===V?.address;lo?s.replace(W+oe(H(b))):fo?s.replace(Z+oe(H(b))):s.replace(W)}E&&s.replace(W)},to=()=>{A.set(X,v.SWAP),e&&e(),F&&l(!1),S&&s.replace(O+oe(H(b))),E&&s.replace(O)},ro=()=>{A.set(X,v.BRIDGE),t&&t(),E&&l(!1),(S||F)&&s.replace(eo)},ue=[{tab:j.MEME_SWAP,icon:"okx-defi-dex-meme-mode",name:c("swaptrade_trade_bttmsheet_option_meme"),onClick:()=>{oo()},checked:S},{tab:j.SWAP,icon:"okx-defi-dex-advanced",name:c("swaptrade_trade_bttmsheet_option_advanced"),onClick:()=>{to()},checked:F},{tab:j.BRIDGE,icon:"okx-defi-dex-bridge",name:c("swaptrade_trade_bttmsheet_option_bridge"),onClick:()=>{ro()},checked:E}],no=ue.find(u=>u.checked);return m.default.createElement(m.default.Fragment,null,m.default.createElement(K,{className:(0,le.default)(o,y.root),onClick:()=>{l(!0)}},m.default.createElement("span",null,no?.name||"--"),m.default.createElement(P,{className:(0,le.default)("okx-defi-dex-arrow-down-sincere",y.select),style:{fontSize:12,height:32,width:32}})),m.default.createElement(I.Action,{onClose:()=>{l(!1)},visible:_,title:c("swaptrade_trade_bttmsheet_header_select_mode"),windowStyle:{borderTopLeftRadius:a?16:6,borderTopRightRadius:a?16:6}},m.default.createElement("div",{className:y.body},ue.map(u=>m.default.createElement(po,{key:u.tab,...u})))))},Ho=he(go);r();n();var N=p(w());ae();function $o(o){let{computedAccountId:e,walletConfig:t}=o,[i,a]=(0,N.useState)(!1),s=(0,N.useCallback)(async()=>{if(!e)return;let l=t.address?.join(",")??void 0;await ce.loadHiddenTokenConfig(e,l)},[e,t.address]),_=(0,N.useCallback)(async()=>{await ce.loadSmallAssetConfig()},[]);return(0,N.useEffect)(()=>{Promise.allSettled([_(),s()]).then(h).catch(h).finally(()=>{a(!0)})},[e]),{loaded:i}}r();n();var M=p(w()),de=p(U());r();n();var te={wrapper:"_wrapper_1k1o5_1",desc:"_desc_1k1o5_11"};var Co=({token:o,className:e,iconClassName:t,showTooltip:i,showDesc:a,iconSize:s=12})=>{let _=Number(o?.riskLevel)===4,l=(0,M.useMemo)(()=>M.default.createElement("div",{className:(0,de.default)(te.wrapper,e)},M.default.createElement(Ue,{className:(0,de.default)("okx-defi-dex-risky-svg",te.icon,t),size:s}),a?M.default.createElement("span",{className:te.desc},c("swaptrade_cefimode_alert_desc_unsafe_token")):null),[a,e,t,s]);return _?i?M.default.createElement($,{title:c("swaptrade_cefimode_textarea_unsafe_and_malicious")},l):l:null},ft=Co;r();n();var B=p(w()),qe=p(U());r();n();var g=p(w()),ze=p(U());r();n();var He={"button-container":"_button-container_wmrwa_1",buttonContainer:"_button-container_wmrwa_1",base:"_base_wmrwa_12","tips-container":"_tips-container_wmrwa_21",tipsContainer:"_tips-container_wmrwa_21",footer:"_footer_wmrwa_30"};var wo=({dialogShow:o,tipsModuleShow:e,isSwapChain:t,swapChainValueDifferenceTooltip:i,crossValueDifferenceTooltipProps:a})=>{let{gasFlag:s,feeUsd:_,quote:l,computedIsFreeNetworkFee:C}=a||{},{crossChainFee:b,toToken:J,bridge:L}=l?.bestRoute||{},S=Oe(l?.bestRoute),F=()=>{if(t)return g.default.createElement(g.default.Fragment,null,g.default.createElement("p",null,c("swaptrade_card_modal_value_difference_tips")),g.default.createElement("p",null,i));let W=g.default.createElement("p",null,c(s?"swaptrade_card_modal_value_difference_details1":"swaptrade_card_modal_value_difference_tips"));if(C)return g.default.createElement(g.default.Fragment,null,W,g.default.createElement("p",null,c("swaptrade_pop_dialog_desc_value_diff_bridgeprovider")));let Z=De(b,{needPlaceholder:!0}),O=L?.crossToToken?.tokenSymbol;return Ae()||!S?g.default.createElement("p",null,ke(c("swaptrade_servicefee_dialog_value_differ",{bridge:L?.bridgeName,value:_,amount:Z,symbol:O}))):g.default.createElement("p",null,c("swaptrade_servicefee_dialog_value_diff",{bridge:L?.bridgeName,value:_,amount:Z,symbol:O,toChain:J?.chainName}))},E={title:c("swaptrade_modal_title_value_diff"),mobileWidth:"328",visible:e,confirmText:c("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{o(!1)},onClose:()=>{o(!1)}},V=g.default.createElement("div",{className:(0,ze.default)(He.tipsContainer)},F());return g.default.createElement(I.Tip,{...E},V)},Ge=wo;r();n();var re={default:"_default_hmm0n_1",down:"_down_hmm0n_9",up:"_up_hmm0n_13"};var ho=({valueDifference:o,isSwapChain:e,crossValueDifferenceTooltipProps:t,swapChainValueDifferenceTooltip:i})=>{let[a,s]=(0,B.useState)(!1),{diffPercent:_,diffValueType:l}=o;return B.default.createElement("div",{className:"flex align-items-center"},l!=="hidden"&&B.default.createElement($,{title:i,disabled:!e||!i},B.default.createElement(K,{"data-testid":"diff-input",className:(0,qe.default)("ml-4","content-contrast","keep-ltr",re.default,{[re.up]:l==="up",[re.down]:l==="down"}),onClick:()=>{Be({button_name:"value_difference"}),s(!0)}},`(${_})`)),B.default.createElement(Ge,{dialogShow:C=>{s(C)},tipsModuleShow:a,isSwapChain:e,swapChainValueDifferenceTooltip:i,crossValueDifferenceTooltipProps:t}))},Ht=ho;r();n();var z=p(w()),me=p(U());r();n();r();n();var ko=async()=>await Q.getWalletType()===Q.walletTypeEnum.OKX_WALLET;var ne=async()=>{try{return await ko()?(await(await Q.getWalletProvider())?.requestWallets()??{})[0]?.targetWalletId??null:null}catch{return null}};var Je=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i})=>{let a=await ne();Re({wallet_id:a,referral_code:k.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i})},Ze=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i})=>{let a=await ne();Le({wallet_id:a,referral_code:k.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i})};var $e=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i,btnName:a})=>{let s=await ne();Me({wallet_id:s,referral_code:k.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i,button_name:a})};r();n();var fe={referralTag:"_referralTag_wkv6n_1",icon:"_icon_wkv6n_13"};var To=({className:o,dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})=>((0,z.useEffect)(()=>{Je({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})},[]),z.default.createElement("div",{className:(0,me.default)(fe.referralTag,o)},z.default.createElement(P,{className:(0,me.default)(fe.icon,"okx-defi-referral")}),c("swaptrade_placeorder_tag_referral"))),kr=To;r();n();var _e=p(w());ae();r();n();var je=o=>{if(!o)return;let t={[o.toUpperCase()]:!0};A.set(Ve,t)};r();n();var T=p(w());r();n();var R={dialogContent:"_dialogContent_1vyih_1",dialogTitle:"_dialogTitle_1vyih_7",dialogDesc:"_dialogDesc_1vyih_14",btnWrapper:"_btnWrapper_1vyih_20",refCode:"_refCode_1vyih_27"};var xo=({titleKey:o,descKey:e,refCode:t,refInfo:i,confirmTextKey:a,cancelTextKey:s,onConfirm:_,onCancel:l})=>T.default.createElement("div",{className:R.dialogContent},T.default.createElement(Ce,{width:128,height:128,src:Fe(Ke()?"/cdn/assets/imgs/259/71D5A4042455ED22.png":"/cdn/assets/imgs/259/ABA5EC26AEF4A0F2.png"),alt:"ref-code-stop"}),T.default.createElement("div",{className:R.dialogTitle},c(o)),T.default.createElement("div",{className:R.dialogDesc},ee(e,{code:T.default.createElement("span",{className:R.refCode},t),discountNum:T.default.createElement("span",{className:R.discountNum},Ie(i?.discountRate))})),T.default.createElement("div",{className:R.btnWrapper},T.default.createElement(x,{category:x.CATEGORY.fill,type:x.TYPE.highlight,size:x.SIZE.xl,block:!0,onClick:_},c(a)),T.default.createElement(x,{category:x.CATEGORY.outline,type:x.TYPE.primary,size:x.SIZE.xl,block:!0,onClick:l},c(s)))),pe=xo;var bo=({onStop:o,onBtnClick:e})=>{if(!k.refInfo)return;let{refInfo:t,refCode:i}=k,a=I.show({children:_e.default.createElement(pe,{titleKey:"swaptrade_placeorder_modaltitle_code_removed",descKey:"swaptrade_placeorder_modaldesc_code_removed_from_tnx",refCode:i,refInfo:t,confirmTextKey:"swaptrade_placeorder_modalbtn_no_keep_using",cancelTextKey:"swaptrade_placeorder_modalbtn_yes_stop_using",onConfirm:()=>{e("keep_using"),a.destroy()},onCancel:()=>{e("stop_using"),o?.(t),je(i),k.clearRefInfo(i),a.destroy()}}),onClose:()=>{e("exit"),a.destroy()},width:420})},jr=({onStop:o,dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})=>{if(!k.refInfo)return;Ze({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a}).then(h).catch(h);let s=b=>{$e({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a,btnName:b}).then(h).catch(h)},{refCode:_,refInfo:l}=k,C=I.show({children:_e.default.createElement(pe,{titleKey:"swaptrade_placeorder_modaltitle_code_applied",descKey:"swaptrade_placeorder_modaldesc_code_transaction_auto",refCode:_,refInfo:l,confirmTextKey:"commonall_text_btn_ok_active",cancelTextKey:"swaptrade_placeorder_modalbtn_dont_use",onConfirm:()=>{s("ok"),C.destroy()},onCancel:()=>{s("do_not_use_code"),C.destroy(),bo({onStop:o,onBtnClick:s})}}),onClose:()=>{s("exit"),C.destroy()},width:420})};r();n();var an=({specialValueRangePrompt:o,isOfflineType:e,isReferredFee:t,extendFeeConfig:i})=>{let a=o?c("swaptrade_intro_dialog_desc_single_value_diff"):c("swaptrade_card_modal_value_difference_tips1");return e?c("swaptrade_pop_dialog_desc_value_diff_cover"):t?c("swaptrade_card_dialog_price_diff",{thirdParty:Ne().iframe_referrer,value:Pe(i?.feePercent,{needZero:!1})}):a};r();n();var q=p(w());r();n();var ie=p(w());var Qe=({isUp:o=!1,children:e,customClassName:t="",isZero:i=!1})=>{let a=(0,ie.useMemo)(()=>i?{}:{color:o?"var(--color-up-text)":"var(--color-down-text)"},[i,o]);return ie.default.createElement("span",{className:t,style:a},e)};r();n();var G={container:"_container_17xnn_1",icon:"_icon_17xnn_10",error:"_error_17xnn_15","error-color":"_error-color_17xnn_18",errorColor:"_error-color_17xnn_18"};var bn=({loseDiffValueTxt:o,isUp:e})=>q.default.createElement("div",{className:G.container},q.default.createElement(P,{fontSize:"28px",iconName:"okds-warning-circle-fill",className:G.icon}),q.default.createElement("span",{className:G.error},ee("swaptrade_valuediff_select_title_one_value",{value:q.default.createElement(Qe,{customClassName:G.errorColor,isUp:e},o)})));export{Ht as a,an as b,ft as c,bn as d,Ho as e,kr as f,jr as g,$o as h};
//# sourceMappingURL=chunk-G4YDNERE.js.map
