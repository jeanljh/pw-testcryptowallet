import{b as Y,c as Le,d as Ne,g as Ue,o as p,q as w}from"./chunk-4J7XGGEQ.js";function Nt(){if(!jt&&(jt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jt(qn)}var jt,qn,re=Y(()=>{p();w();qn=new Uint8Array(16)});var ke,He=Y(()=>{p();w();ke=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Rn(t){return typeof t=="string"&&ke.test(t)}var ut,Ut=Y(()=>{p();w();He();ut=Rn});function Ln(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(M[t[n+0]]+M[t[n+1]]+M[t[n+2]]+M[t[n+3]]+"-"+M[t[n+4]]+M[t[n+5]]+"-"+M[t[n+6]]+M[t[n+7]]+"-"+M[t[n+8]]+M[t[n+9]]+"-"+M[t[n+10]]+M[t[n+11]]+M[t[n+12]]+M[t[n+13]]+M[t[n+14]]+M[t[n+15]]).toLowerCase();if(!ut(e))throw TypeError("Stringified UUID is invalid");return e}var M,zt,dt,kt=Y(()=>{p();w();Ut();M=[];for(zt=0;zt<256;++zt)M.push((zt+256).toString(16).substr(1));dt=Ln});function Nn(t,n,e){var r=n&&e||0,o=n||new Array(16);t=t||{};var s=t.node||$e,i=t.clockseq!==void 0?t.clockseq:oe;if(s==null||i==null){var c=t.random||(t.rng||Nt)();s==null&&(s=$e=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),i==null&&(i=oe=(c[6]<<8|c[7])&16383)}var f=t.msecs!==void 0?t.msecs:Date.now(),a=t.nsecs!==void 0?t.nsecs:ie+1,h=f-se+(a-ie)/1e4;if(h<0&&t.clockseq===void 0&&(i=i+1&16383),(h<0||f>se)&&t.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");se=f,ie=a,oe=i,f+=122192928e5;var l=((f&268435455)*1e4+a)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=l&255;var d=f/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=d&255,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=i>>>8|128,o[r++]=i&255;for(var E=0;E<6;++E)o[r+E]=s[E];return n||dt(o)}var $e,oe,se,ie,Ve,Ze=Y(()=>{p();w();re();kt();se=0,ie=0;Ve=Nn});function Un(t){if(!ut(t))throw TypeError("Invalid UUID");var n,e=new Uint8Array(16);return e[0]=(n=parseInt(t.slice(0,8),16))>>>24,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=n&255,e[4]=(n=parseInt(t.slice(9,13),16))>>>8,e[5]=n&255,e[6]=(n=parseInt(t.slice(14,18),16))>>>8,e[7]=n&255,e[8]=(n=parseInt(t.slice(19,23),16))>>>8,e[9]=n&255,e[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=n/4294967296&255,e[12]=n>>>24&255,e[13]=n>>>16&255,e[14]=n>>>8&255,e[15]=n&255,e}var Dt,fe=Y(()=>{p();w();Ut();Dt=Un});function kn(t){t=unescape(encodeURIComponent(t));for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}function Pt(t,n,e){function r(o,s,i,c){if(typeof o=="string"&&(o=kn(o)),typeof s=="string"&&(s=Dt(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+o.length);if(f.set(s),f.set(o,s.length),f=e(f),f[6]=f[6]&15|n,f[8]=f[8]&63|128,i){c=c||0;for(var a=0;a<16;++a)i[c+a]=f[a];return i}return dt(f)}try{r.name=t}catch{}return r.DNS=Hn,r.URL=$n,r}var Hn,$n,ce=Y(()=>{p();w();kt();fe();Hn="6ba7b810-9dad-11d1-80b4-00c04fd430c8",$n="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Vn(t){if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return Zn(Mn(jn(t),t.length*8))}function Zn(t){for(var n=[],e=t.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var s=t[o>>5]>>>o%32&255,i=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);n.push(i)}return n}function Me(t){return(t+64>>>9<<4)+14+1}function Mn(t,n){t[n>>5]|=128<<n%32,t[Me(n)-1]=n;for(var e=1732584193,r=-271733879,o=-1732584194,s=271733878,i=0;i<t.length;i+=16){var c=e,f=r,a=o,h=s;e=z(e,r,o,s,t[i],7,-680876936),s=z(s,e,r,o,t[i+1],12,-389564586),o=z(o,s,e,r,t[i+2],17,606105819),r=z(r,o,s,e,t[i+3],22,-1044525330),e=z(e,r,o,s,t[i+4],7,-176418897),s=z(s,e,r,o,t[i+5],12,1200080426),o=z(o,s,e,r,t[i+6],17,-1473231341),r=z(r,o,s,e,t[i+7],22,-45705983),e=z(e,r,o,s,t[i+8],7,1770035416),s=z(s,e,r,o,t[i+9],12,-1958414417),o=z(o,s,e,r,t[i+10],17,-42063),r=z(r,o,s,e,t[i+11],22,-1990404162),e=z(e,r,o,s,t[i+12],7,1804603682),s=z(s,e,r,o,t[i+13],12,-40341101),o=z(o,s,e,r,t[i+14],17,-1502002290),r=z(r,o,s,e,t[i+15],22,1236535329),e=D(e,r,o,s,t[i+1],5,-165796510),s=D(s,e,r,o,t[i+6],9,-1069501632),o=D(o,s,e,r,t[i+11],14,643717713),r=D(r,o,s,e,t[i],20,-373897302),e=D(e,r,o,s,t[i+5],5,-701558691),s=D(s,e,r,o,t[i+10],9,38016083),o=D(o,s,e,r,t[i+15],14,-660478335),r=D(r,o,s,e,t[i+4],20,-405537848),e=D(e,r,o,s,t[i+9],5,568446438),s=D(s,e,r,o,t[i+14],9,-1019803690),o=D(o,s,e,r,t[i+3],14,-187363961),r=D(r,o,s,e,t[i+8],20,1163531501),e=D(e,r,o,s,t[i+13],5,-1444681467),s=D(s,e,r,o,t[i+2],9,-51403784),o=D(o,s,e,r,t[i+7],14,1735328473),r=D(r,o,s,e,t[i+12],20,-1926607734),e=P(e,r,o,s,t[i+5],4,-378558),s=P(s,e,r,o,t[i+8],11,-2022574463),o=P(o,s,e,r,t[i+11],16,1839030562),r=P(r,o,s,e,t[i+14],23,-35309556),e=P(e,r,o,s,t[i+1],4,-1530992060),s=P(s,e,r,o,t[i+4],11,1272893353),o=P(o,s,e,r,t[i+7],16,-155497632),r=P(r,o,s,e,t[i+10],23,-1094730640),e=P(e,r,o,s,t[i+13],4,681279174),s=P(s,e,r,o,t[i],11,-358537222),o=P(o,s,e,r,t[i+3],16,-722521979),r=P(r,o,s,e,t[i+6],23,76029189),e=P(e,r,o,s,t[i+9],4,-640364487),s=P(s,e,r,o,t[i+12],11,-421815835),o=P(o,s,e,r,t[i+15],16,530742520),r=P(r,o,s,e,t[i+2],23,-995338651),e=K(e,r,o,s,t[i],6,-198630844),s=K(s,e,r,o,t[i+7],10,1126891415),o=K(o,s,e,r,t[i+14],15,-1416354905),r=K(r,o,s,e,t[i+5],21,-57434055),e=K(e,r,o,s,t[i+12],6,1700485571),s=K(s,e,r,o,t[i+3],10,-1894986606),o=K(o,s,e,r,t[i+10],15,-1051523),r=K(r,o,s,e,t[i+1],21,-2054922799),e=K(e,r,o,s,t[i+8],6,1873313359),s=K(s,e,r,o,t[i+15],10,-30611744),o=K(o,s,e,r,t[i+6],15,-1560198380),r=K(r,o,s,e,t[i+13],21,1309151649),e=K(e,r,o,s,t[i+4],6,-145523070),s=K(s,e,r,o,t[i+11],10,-1120210379),o=K(o,s,e,r,t[i+2],15,718787259),r=K(r,o,s,e,t[i+9],21,-343485551),e=lt(e,c),r=lt(r,f),o=lt(o,a),s=lt(s,h)}return[e,r,o,s]}function jn(t){if(t.length===0)return[];for(var n=t.length*8,e=new Uint32Array(Me(n)),r=0;r<n;r+=8)e[r>>5]|=(t[r/8]&255)<<r%32;return e}function lt(t,n){var e=(t&65535)+(n&65535),r=(t>>16)+(n>>16)+(e>>16);return r<<16|e&65535}function zn(t,n){return t<<n|t>>>32-n}function Kt(t,n,e,r,o,s){return lt(zn(lt(lt(n,t),lt(r,s)),o),e)}function z(t,n,e,r,o,s,i){return Kt(n&e|~n&r,t,n,o,s,i)}function D(t,n,e,r,o,s,i){return Kt(n&r|e&~r,t,n,o,s,i)}function P(t,n,e,r,o,s,i){return Kt(n^e^r,t,n,o,s,i)}function K(t,n,e,r,o,s,i){return Kt(e^(n|~r),t,n,o,s,i)}var je,ze=Y(()=>{p();w();je=Vn});var Dn,De,Pe=Y(()=>{p();w();ce();ze();Dn=Pt("v3",48,je),De=Dn});function Pn(t,n,e){t=t||{};var r=t.random||(t.rng||Nt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=r[o];return n}return dt(r)}var Ke,Ye=Y(()=>{p();w();re();kt();Ke=Pn});function Kn(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}}function ae(t,n){return t<<n|t>>>32-n}function Yn(t){var n=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var o=0;o<r.length;++o)t.push(r.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,i=Math.ceil(s/16),c=new Array(i),f=0;f<i;++f){for(var a=new Uint32Array(16),h=0;h<16;++h)a[h]=t[f*64+h*4]<<24|t[f*64+h*4+1]<<16|t[f*64+h*4+2]<<8|t[f*64+h*4+3];c[f]=a}c[i-1][14]=(t.length-1)*8/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=(t.length-1)*8&4294967295;for(var l=0;l<i;++l){for(var d=new Uint32Array(80),E=0;E<16;++E)d[E]=c[l][E];for(var q=16;q<80;++q)d[q]=ae(d[q-3]^d[q-8]^d[q-14]^d[q-16],1);for(var x=e[0],u=e[1],g=e[2],v=e[3],B=e[4],S=0;S<80;++S){var O=Math.floor(S/20),I=ae(x,5)+Kn(O,u,g,v)+B+n[O]+d[S]>>>0;B=v,v=g,g=ae(u,30)>>>0,u=x,x=I}e[0]=e[0]+x>>>0,e[1]=e[1]+u>>>0,e[2]=e[2]+g>>>0,e[3]=e[3]+v>>>0,e[4]=e[4]+B>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ge,We=Y(()=>{p();w();Ge=Yn});var Gn,Xe,Qe=Y(()=>{p();w();ce();We();Gn=Pt("v5",80,Ge),Xe=Gn});var Je,Fe=Y(()=>{p();w();Je="00000000-0000-0000-0000-000000000000"});function Wn(t){if(!ut(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var tn,en=Y(()=>{p();w();Ut();tn=Wn});var ue={};Ne(ue,{NIL:()=>Je,parse:()=>Dt,stringify:()=>dt,v1:()=>Ve,v3:()=>De,v4:()=>Ke,v5:()=>Xe,validate:()=>ut,version:()=>tn});var de=Y(()=>{p();w();Ze();Pe();Ye();Qe();Fe();en();Ut();kt();fe()});var rn=Le((Go,nn)=>{p();w();var Xn=(de(),Ue(ue)).v4,Qn=function(t,n,e,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};let o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");let s={method:t};if(o===2&&(s.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");s.params=n}if(typeof e>"u"){let i=typeof r.generator=="function"?r.generator:function(){return Xn()};s.id=i(s,r)}else o===2&&e===null?r.notificationIdNull&&(s.id=null):s.id=e;return s};nn.exports=Qn});var tr=Le((Qo,on)=>{p();w();var Jn=(de(),Ue(ue)).v4,Fn=rn(),Ht=function(t,n){if(!(this instanceof Ht))return new Ht(t,n);n||(n={}),this.options={reviver:typeof n.reviver<"u"?n.reviver:null,replacer:typeof n.replacer<"u"?n.replacer:null,generator:typeof n.generator<"u"?n.generator:function(){return Jn()},version:typeof n.version<"u"?n.version:2,notificationIdNull:typeof n.notificationIdNull=="boolean"?n.notificationIdNull:!1},this.callServer=t};on.exports=Ht;Ht.prototype.request=function(t,n,e,r){let o=this,s=null,i=Array.isArray(t)&&typeof n=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&t&&typeof t=="object"&&typeof n=="function")r=n,s=t;else{typeof e=="function"&&(r=e,e=void 0);let a=typeof r=="function";try{s=Fn(t,n,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(a)return r(h);throw h}if(!a)return s}let f;try{f=JSON.stringify(s,this.options.replacer)}catch(a){return r(a)}return this.callServer(f,function(a,h){o._parseResponse(a,h,r)}),s};Ht.prototype._parseResponse=function(t,n,e){if(t){e(t);return}if(!n)return e();let r;try{r=JSON.parse(n,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){let o=function(i){return typeof i.error<"u"},s=function(i){return!o(i)};return e(null,r.filter(o),r.filter(s))}else return e(null,r.error,r.result);e(null,r)}});p();w();p();w();p();w();p();w();function sn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function er(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ct(t,...n){if(!er(t))throw new Error("Uint8Array expected");if(n.length>0&&!n.includes(t.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${t.length}`)}function fn(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sn(t.outputLen),sn(t.blockLen)}function Tt(t,n=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(n&&t.finished)throw new Error("Hash#digest() has already been called")}function cn(t,n){Ct(t);let e=n.outputLen;if(t.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}p();w();p();w();var bt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Yt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),et=(t,n)=>t<<32-n|t>>>n;var cs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function nr(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $t(t){return typeof t=="string"&&(t=nr(t)),Ct(t),t}function an(...t){let n=0;for(let r=0;r<t.length;r++){let o=t[r];Ct(o),n+=o.length}let e=new Uint8Array(n);for(let r=0,o=0;r<t.length;r++){let s=t[r];e.set(s,o),o+=s.length}return e}var Ot=class{clone(){return this._cloneInto()}},as={}.toString;function un(t){let n=r=>t().update($t(r)).digest(),e=t();return n.outputLen=e.outputLen,n.blockLen=e.blockLen,n.create=()=>t(),n}function dn(t=32){if(bt&&typeof bt.getRandomValues=="function")return bt.getRandomValues(new Uint8Array(t));if(bt&&typeof bt.randomBytes=="function")return bt.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function rr(t,n,e,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(n,e,r);let o=BigInt(32),s=BigInt(4294967295),i=Number(e>>o&s),c=Number(e&s),f=r?4:0,a=r?0:4;t.setUint32(n+f,i,r),t.setUint32(n+a,c,r)}var ln=(t,n,e)=>t&n^~t&e,hn=(t,n,e)=>t&n^t&e^n&e,Gt=class extends Ot{constructor(n,e,r,o){super(),this.blockLen=n,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=Yt(this.buffer)}update(n){Tt(this);let{view:e,buffer:r,blockLen:o}=this;n=$t(n);let s=n.length;for(let i=0;i<s;){let c=Math.min(o-this.pos,s-i);if(c===o){let f=Yt(n);for(;o<=s-i;i+=o)this.process(f,i);continue}r.set(n.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){Tt(this),cn(n,this),this.finished=!0;let{buffer:e,view:r,blockLen:o,isLE:s}=this,{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let l=i;l<o;l++)e[l]=0;rr(r,o-8,BigInt(this.length*8),s),this.process(r,0);let c=Yt(n),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let a=f/4,h=this.get();if(a>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<a;l++)c.setUint32(4*l,h[l],s)}digest(){let{buffer:n,outputLen:e}=this;this.digestInto(n);let r=n.slice(0,e);return this.destroy(),r}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());let{blockLen:e,buffer:r,length:o,finished:s,destroyed:i,pos:c}=this;return n.length=o,n.pos=c,n.finished=s,n.destroyed=i,o%e&&n.buffer.set(r),n}};var or=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ht=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=new Uint32Array(64),le=class extends Gt{constructor(){super(64,32,8,!1),this.A=ht[0]|0,this.B=ht[1]|0,this.C=ht[2]|0,this.D=ht[3]|0,this.E=ht[4]|0,this.F=ht[5]|0,this.G=ht[6]|0,this.H=ht[7]|0}get(){let{A:n,B:e,C:r,D:o,E:s,F:i,G:c,H:f}=this;return[n,e,r,o,s,i,c,f]}set(n,e,r,o,s,i,c,f){this.A=n|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=c|0,this.H=f|0}process(n,e){for(let l=0;l<16;l++,e+=4)gt[l]=n.getUint32(e,!1);for(let l=16;l<64;l++){let d=gt[l-15],E=gt[l-2],q=et(d,7)^et(d,18)^d>>>3,x=et(E,17)^et(E,19)^E>>>10;gt[l]=x+gt[l-7]+q+gt[l-16]|0}let{A:r,B:o,C:s,D:i,E:c,F:f,G:a,H:h}=this;for(let l=0;l<64;l++){let d=et(c,6)^et(c,11)^et(c,25),E=h+d+ln(c,f,a)+or[l]+gt[l]|0,x=(et(r,2)^et(r,13)^et(r,22))+hn(r,o,s)|0;h=a,a=f,f=c,c=i+E|0,i=s,s=o,o=r,r=E+x|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,c=c+this.E|0,f=f+this.F|0,a=a+this.G|0,h=h+this.H|0,this.set(r,o,s,i,c,f,a,h)}roundClean(){gt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var gn=un(()=>new le);p();w();p();w();var Wt=class extends Ot{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,fn(n);let r=$t(e);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?n.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=n.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(n){return Tt(this),this.iHash.update(n),this}digestInto(n){Tt(this),Ct(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){let n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:c}=this;return n=n,n.finished=o,n.destroyed=s,n.blockLen=i,n.outputLen=c,n.oHash=e._cloneInto(n.oHash),n.iHash=r._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},he=(t,n,e)=>new Wt(t,n).update(e).digest();he.create=(t,n)=>new Wt(t,n);p();w();p();w();p();w();var be={};Ne(be,{aInRange:()=>wt,abool:()=>vt,abytes:()=>qt,bitGet:()=>ur,bitLen:()=>xe,bitMask:()=>Zt,bitSet:()=>dr,bytesToHex:()=>Et,bytesToNumberBE:()=>ot,bytesToNumberLE:()=>Qt,concatBytes:()=>Rt,createHmacDrbg:()=>ye,ensureBytes:()=>Q,equalBytes:()=>cr,hexToBytes:()=>_t,hexToNumber:()=>we,inRange:()=>Vt,isBytes:()=>mt,memoized:()=>Ft,notImplemented:()=>hr,numberToBytesBE:()=>pt,numberToBytesLE:()=>Jt,numberToHexUnpadded:()=>Bt,numberToVarBytesBE:()=>fr,utf8ToBytes:()=>ar,validateObject:()=>xt});p();w();var pe=BigInt(0),Xt=BigInt(1),sr=BigInt(2);function mt(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function qt(t){if(!mt(t))throw new Error("Uint8Array expected")}function vt(t,n){if(typeof n!="boolean")throw new Error(`${t} must be valid boolean, got "${n}".`)}var ir=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function Et(t){qt(t);let n="";for(let e=0;e<t.length;e++)n+=ir[t[e]];return n}function Bt(t){let n=t.toString(16);return n.length&1?`0${n}`:n}function we(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var rt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function mn(t){if(t>=rt._0&&t<=rt._9)return t-rt._0;if(t>=rt._A&&t<=rt._F)return t-(rt._A-10);if(t>=rt._a&&t<=rt._f)return t-(rt._a-10)}function _t(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let n=t.length,e=n/2;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);let r=new Uint8Array(e);for(let o=0,s=0;o<e;o++,s+=2){let i=mn(t.charCodeAt(s)),c=mn(t.charCodeAt(s+1));if(i===void 0||c===void 0){let f=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}r[o]=i*16+c}return r}function ot(t){return we(Et(t))}function Qt(t){return qt(t),we(Et(Uint8Array.from(t).reverse()))}function pt(t,n){return _t(t.toString(16).padStart(n*2,"0"))}function Jt(t,n){return pt(t,n).reverse()}function fr(t){return _t(Bt(t))}function Q(t,n,e){let r;if(typeof n=="string")try{r=_t(n)}catch(s){throw new Error(`${t} must be valid hex string, got "${n}". Cause: ${s}`)}else if(mt(n))r=Uint8Array.from(n);else throw new Error(`${t} must be hex string or Uint8Array`);let o=r.length;if(typeof e=="number"&&o!==e)throw new Error(`${t} expected ${e} bytes, got ${o}`);return r}function Rt(...t){let n=0;for(let r=0;r<t.length;r++){let o=t[r];qt(o),n+=o.length}let e=new Uint8Array(n);for(let r=0,o=0;r<t.length;r++){let s=t[r];e.set(s,o),o+=s.length}return e}function cr(t,n){if(t.length!==n.length)return!1;let e=0;for(let r=0;r<t.length;r++)e|=t[r]^n[r];return e===0}function ar(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}var ge=t=>typeof t=="bigint"&&pe<=t;function Vt(t,n,e){return ge(t)&&ge(n)&&ge(e)&&n<=t&&t<e}function wt(t,n,e,r){if(!Vt(n,e,r))throw new Error(`expected valid ${t}: ${e} <= n < ${r}, got ${typeof n} ${n}`)}function xe(t){let n;for(n=0;t>pe;t>>=Xt,n+=1);return n}function ur(t,n){return t>>BigInt(n)&Xt}function dr(t,n,e){return t|(e?Xt:pe)<<BigInt(n)}var Zt=t=>(sr<<BigInt(t-1))-Xt,me=t=>new Uint8Array(t),pn=t=>Uint8Array.from(t);function ye(t,n,e){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=me(t),o=me(t),s=0,i=()=>{r.fill(1),o.fill(0),s=0},c=(...l)=>e(o,r,...l),f=(l=me())=>{o=c(pn([0]),l),r=c(),l.length!==0&&(o=c(pn([1]),l),r=c())},a=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,d=[];for(;l<n;){r=c();let E=r.slice();d.push(E),l+=r.length}return Rt(...d)};return(l,d)=>{i(),f(l);let E;for(;!(E=d(a()));)f();return i(),E}}var lr={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||mt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,n)=>n.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xt(t,n,e={}){let r=(o,s,i)=>{let c=lr[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);let f=t[o];if(!(i&&f===void 0)&&!c(f,t))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${s}`)};for(let[o,s]of Object.entries(n))r(o,s,!1);for(let[o,s]of Object.entries(e))r(o,s,!0);return t}var hr=()=>{throw new Error("not implemented")};function Ft(t){let n=new WeakMap;return(e,...r)=>{let o=n.get(e);if(o!==void 0)return o;let s=t(e,...r);return n.set(e,s),s}}var $=BigInt(0),H=BigInt(1),St=BigInt(2),gr=BigInt(3),ve=BigInt(4),wn=BigInt(5),xn=BigInt(8),mr=BigInt(9),pr=BigInt(16);function j(t,n){let e=t%n;return e>=$?e:n+e}function wr(t,n,e){if(e<=$||n<$)throw new Error("Expected power/modulo > 0");if(e===H)return $;let r=H;for(;n>$;)n&H&&(r=r*t%e),t=t*t%e,n>>=H;return r}function J(t,n,e){let r=t;for(;n-- >$;)r*=r,r%=e;return r}function te(t,n){if(t===$||n<=$)throw new Error(`invert: expected positive integers, got n=${t} mod=${n}`);let e=j(t,n),r=n,o=$,s=H,i=H,c=$;for(;e!==$;){let a=r/e,h=r%e,l=o-i*a,d=s-c*a;r=e,e=h,o=i,s=c,i=l,c=d}if(r!==H)throw new Error("invert: does not exist");return j(o,n)}function xr(t){let n=(t-H)/St,e,r,o;for(e=t-H,r=0;e%St===$;e/=St,r++);for(o=St;o<t&&wr(o,n,t)!==t-H;o++);if(r===1){let i=(t+H)/ve;return function(f,a){let h=f.pow(a,i);if(!f.eql(f.sqr(h),a))throw new Error("Cannot find square root");return h}}let s=(e+H)/St;return function(c,f){if(c.pow(f,n)===c.neg(c.ONE))throw new Error("Cannot find square root");let a=r,h=c.pow(c.mul(c.ONE,o),e),l=c.pow(f,s),d=c.pow(f,e);for(;!c.eql(d,c.ONE);){if(c.eql(d,c.ZERO))return c.ZERO;let E=1;for(let x=c.sqr(d);E<a&&!c.eql(x,c.ONE);E++)x=c.sqr(x);let q=c.pow(h,H<<BigInt(a-E-1));h=c.sqr(q),l=c.mul(l,q),d=c.mul(d,h),a=E}return l}}function yr(t){if(t%ve===gr){let n=(t+H)/ve;return function(r,o){let s=r.pow(o,n);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(t%xn===wn){let n=(t-wn)/xn;return function(r,o){let s=r.mul(o,St),i=r.pow(s,n),c=r.mul(o,i),f=r.mul(r.mul(c,St),i),a=r.mul(c,r.sub(f,r.ONE));if(!r.eql(r.sqr(a),o))throw new Error("Cannot find square root");return a}}return t%pr,xr(t)}var qs=(t,n)=>(j(t,n)&H)===H,br=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ee(t){let n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=br.reduce((r,o)=>(r[o]="function",r),n);return xt(t,e)}function vr(t,n,e){if(e<$)throw new Error("Expected power > 0");if(e===$)return t.ONE;if(e===H)return n;let r=t.ONE,o=n;for(;e>$;)e&H&&(r=t.mul(r,o)),o=t.sqr(o),e>>=H;return r}function Er(t,n){let e=new Array(n.length),r=n.reduce((s,i,c)=>t.is0(i)?s:(e[c]=s,t.mul(s,i)),t.ONE),o=t.inv(r);return n.reduceRight((s,i,c)=>t.is0(i)?s:(e[c]=t.mul(s,e[c]),t.mul(s,i)),o),e}function Be(t,n){let e=n!==void 0?n:t.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function ee(t,n,e=!1,r={}){if(t<=$)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:o,nByteLength:s}=Be(t,n);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let i=yr(t),c=Object.freeze({ORDER:t,BITS:o,BYTES:s,MASK:Zt(o),ZERO:$,ONE:H,create:f=>j(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return $<=f&&f<t},is0:f=>f===$,isOdd:f=>(f&H)===H,neg:f=>j(-f,t),eql:(f,a)=>f===a,sqr:f=>j(f*f,t),add:(f,a)=>j(f+a,t),sub:(f,a)=>j(f-a,t),mul:(f,a)=>j(f*a,t),pow:(f,a)=>vr(c,f,a),div:(f,a)=>j(f*te(a,t),t),sqrN:f=>f*f,addN:(f,a)=>f+a,subN:(f,a)=>f-a,mulN:(f,a)=>f*a,inv:f=>te(f,t),sqrt:r.sqrt||(f=>i(c,f)),invertBatch:f=>Er(c,f),cmov:(f,a,h)=>h?a:f,toBytes:f=>e?Jt(f,s):pt(f,s),fromBytes:f=>{if(f.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${f.length}`);return e?Qt(f):ot(f)}});return Object.freeze(c)}function yn(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let n=t.toString(2).length;return Math.ceil(n/8)}function _e(t){let n=yn(t);return n+Math.ceil(n/2)}function bn(t,n,e=!1){let r=t.length,o=yn(n),s=_e(n);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);let i=e?ot(t):Qt(t),c=j(i,n-H)+H;return e?Jt(c,o):pt(c,o)}var _r=BigInt(0),Se=BigInt(1),Ae=new WeakMap,vn=new WeakMap;function En(t,n){let e=(s,i)=>{let c=i.negate();return s?c:i},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>n)throw new Error(`Wrong window size=${s}, should be [1..${n}]`)},o=s=>{r(s);let i=Math.ceil(n/s)+1,c=2**(s-1);return{windows:i,windowSize:c}};return{constTimeNegate:e,unsafeLadder(s,i){let c=t.ZERO,f=s;for(;i>_r;)i&Se&&(c=c.add(f)),f=f.double(),i>>=Se;return c},precomputeWindow(s,i){let{windows:c,windowSize:f}=o(i),a=[],h=s,l=h;for(let d=0;d<c;d++){l=h,a.push(l);for(let E=1;E<f;E++)l=l.add(h),a.push(l);h=l.double()}return a},wNAF(s,i,c){let{windows:f,windowSize:a}=o(s),h=t.ZERO,l=t.BASE,d=BigInt(2**s-1),E=2**s,q=BigInt(s);for(let x=0;x<f;x++){let u=x*a,g=Number(c&d);c>>=q,g>a&&(g-=E,c+=Se);let v=u,B=u+Math.abs(g)-1,S=x%2!==0,O=g<0;g===0?l=l.add(e(S,i[v])):h=h.add(e(O,i[B]))}return{p:h,f:l}},wNAFCached(s,i,c){let f=vn.get(s)||1,a=Ae.get(s);return a||(a=this.precomputeWindow(s,f),f!==1&&Ae.set(s,c(a))),this.wNAF(f,a,i)},setWindowSize(s,i){r(i),vn.set(s,i),Ae.delete(s)}}}function Bn(t,n,e,r){if(!Array.isArray(e)||!Array.isArray(r)||r.length!==e.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((h,l)=>{if(!n.isValid(h))throw new Error(`wrong scalar at index ${l}`)}),e.forEach((h,l)=>{if(!(h instanceof t))throw new Error(`wrong point at index ${l}`)});let o=xe(BigInt(e.length)),s=o>12?o-3:o>4?o-2:o?2:1,i=(1<<s)-1,c=new Array(i+1).fill(t.ZERO),f=Math.floor((n.BITS-1)/s)*s,a=t.ZERO;for(let h=f;h>=0;h-=s){c.fill(t.ZERO);for(let d=0;d<r.length;d++){let E=r[d],q=Number(E>>BigInt(h)&BigInt(i));c[q]=c[q].add(e[d])}let l=t.ZERO;for(let d=c.length-1,E=t.ZERO;d>0;d--)E=E.add(c[d]),l=l.add(E);if(a=a.add(l),h!==0)for(let d=0;d<s;d++)a=a.double()}return a}function Ie(t){return Ee(t.Fp),xt(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Be(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function _n(t){t.lowS!==void 0&&vt("lowS",t.lowS),t.prehash!==void 0&&vt("prehash",t.prehash)}function Sr(t){let n=Ie(t);xt(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:r,a:o}=n;if(e){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}var{bytesToNumberBE:Ar,hexToBytes:Ir}=be,st={Err:class extends Error{constructor(n=""){super(n)}},_tlv:{encode:(t,n)=>{let{Err:e}=st;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length&1)throw new e("tlv.encode: unpadded data");let r=n.length/2,o=Bt(r);if(o.length/2&128)throw new e("tlv.encode: long form length too big");let s=r>127?Bt(o.length/2|128):"";return`${Bt(t)}${s}${o}${n}`},decode(t,n){let{Err:e}=st,r=0;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length<2||n[r++]!==t)throw new e("tlv.decode: wrong tlv");let o=n[r++],s=!!(o&128),i=0;if(!s)i=o;else{let f=o&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");let a=n.subarray(r,r+f);if(a.length!==f)throw new e("tlv.decode: length bytes not complete");if(a[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let h of a)i=i<<8|h;if(r+=f,i<128)throw new e("tlv.decode(long): not minimal encoding")}let c=n.subarray(r,r+i);if(c.length!==i)throw new e("tlv.decode: wrong value length");return{v:c,l:n.subarray(r+i)}}},_int:{encode(t){let{Err:n}=st;if(t<it)throw new n("integer: negative integers are not allowed");let e=Bt(t);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new n("unexpected assertion");return e},decode(t){let{Err:n}=st;if(t[0]&128)throw new n("Invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new n("Invalid signature integer: unnecessary leading zero");return Ar(t)}},toSig(t){let{Err:n,_int:e,_tlv:r}=st,o=typeof t=="string"?Ir(t):t;qt(o);let{v:s,l:i}=r.decode(48,o);if(i.length)throw new n("Invalid signature: left bytes after parsing");let{v:c,l:f}=r.decode(2,s),{v:a,l:h}=r.decode(2,f);if(h.length)throw new n("Invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(a)}},hexFromSig(t){let{_tlv:n,_int:e}=st,r=`${n.encode(2,e.encode(t.r))}${n.encode(2,e.encode(t.s))}`;return n.encode(48,r)}},it=BigInt(0),Z=BigInt(1),js=BigInt(2),Sn=BigInt(3),zs=BigInt(4);function Cr(t){let n=Sr(t),{Fp:e}=n,r=ee(n.n,n.nBitLength),o=n.toBytes||((x,u,g)=>{let v=u.toAffine();return Rt(Uint8Array.from([4]),e.toBytes(v.x),e.toBytes(v.y))}),s=n.fromBytes||(x=>{let u=x.subarray(1),g=e.fromBytes(u.subarray(0,e.BYTES)),v=e.fromBytes(u.subarray(e.BYTES,2*e.BYTES));return{x:g,y:v}});function i(x){let{a:u,b:g}=n,v=e.sqr(x),B=e.mul(v,x);return e.add(e.add(B,e.mul(x,u)),g)}if(!e.eql(e.sqr(n.Gy),i(n.Gx)))throw new Error("bad generator point: equation left != right");function c(x){return Vt(x,Z,n.n)}function f(x){let{allowedPrivateKeyLengths:u,nByteLength:g,wrapPrivateKey:v,n:B}=n;if(u&&typeof x!="bigint"){if(mt(x)&&(x=Et(x)),typeof x!="string"||!u.includes(x.length))throw new Error("Invalid key");x=x.padStart(g*2,"0")}let S;try{S=typeof x=="bigint"?x:ot(Q("private key",x,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof x}`)}return v&&(S=j(S,B)),wt("private key",S,Z,B),S}function a(x){if(!(x instanceof d))throw new Error("ProjectivePoint expected")}let h=Ft((x,u)=>{let{px:g,py:v,pz:B}=x;if(e.eql(B,e.ONE))return{x:g,y:v};let S=x.is0();u==null&&(u=S?e.ONE:e.inv(B));let O=e.mul(g,u),I=e.mul(v,u),_=e.mul(B,u);if(S)return{x:e.ZERO,y:e.ZERO};if(!e.eql(_,e.ONE))throw new Error("invZ was invalid");return{x:O,y:I}}),l=Ft(x=>{if(x.is0()){if(n.allowInfinityPoint&&!e.is0(x.py))return;throw new Error("bad point: ZERO")}let{x:u,y:g}=x.toAffine();if(!e.isValid(u)||!e.isValid(g))throw new Error("bad point: x or y not FE");let v=e.sqr(g),B=i(u);if(!e.eql(v,B))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(u,g,v){if(this.px=u,this.py=g,this.pz=v,u==null||!e.isValid(u))throw new Error("x required");if(g==null||!e.isValid(g))throw new Error("y required");if(v==null||!e.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(u){let{x:g,y:v}=u||{};if(!u||!e.isValid(g)||!e.isValid(v))throw new Error("invalid affine point");if(u instanceof d)throw new Error("projective point not allowed");let B=S=>e.eql(S,e.ZERO);return B(g)&&B(v)?d.ZERO:new d(g,v,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(u){let g=e.invertBatch(u.map(v=>v.pz));return u.map((v,B)=>v.toAffine(g[B])).map(d.fromAffine)}static fromHex(u){let g=d.fromAffine(s(Q("pointHex",u)));return g.assertValidity(),g}static fromPrivateKey(u){return d.BASE.multiply(f(u))}static msm(u,g){return Bn(d,r,u,g)}_setWindowSize(u){q.setWindowSize(this,u)}assertValidity(){l(this)}hasEvenY(){let{y:u}=this.toAffine();if(e.isOdd)return!e.isOdd(u);throw new Error("Field doesn't support isOdd")}equals(u){a(u);let{px:g,py:v,pz:B}=this,{px:S,py:O,pz:I}=u,_=e.eql(e.mul(g,I),e.mul(S,B)),A=e.eql(e.mul(v,I),e.mul(O,B));return _&&A}negate(){return new d(this.px,e.neg(this.py),this.pz)}double(){let{a:u,b:g}=n,v=e.mul(g,Sn),{px:B,py:S,pz:O}=this,I=e.ZERO,_=e.ZERO,A=e.ZERO,T=e.mul(B,B),F=e.mul(S,S),k=e.mul(O,O),R=e.mul(B,S);return R=e.add(R,R),A=e.mul(B,O),A=e.add(A,A),I=e.mul(u,A),_=e.mul(v,k),_=e.add(I,_),I=e.sub(F,_),_=e.add(F,_),_=e.mul(I,_),I=e.mul(R,I),A=e.mul(v,A),k=e.mul(u,k),R=e.sub(T,k),R=e.mul(u,R),R=e.add(R,A),A=e.add(T,T),T=e.add(A,T),T=e.add(T,k),T=e.mul(T,R),_=e.add(_,T),k=e.mul(S,O),k=e.add(k,k),T=e.mul(k,R),I=e.sub(I,T),A=e.mul(k,F),A=e.add(A,A),A=e.add(A,A),new d(I,_,A)}add(u){a(u);let{px:g,py:v,pz:B}=this,{px:S,py:O,pz:I}=u,_=e.ZERO,A=e.ZERO,T=e.ZERO,F=n.a,k=e.mul(n.b,Sn),R=e.mul(g,S),X=e.mul(v,O),m=e.mul(B,I),y=e.add(g,v),b=e.add(S,O);y=e.mul(y,b),b=e.add(R,X),y=e.sub(y,b),b=e.add(g,B);let C=e.add(S,I);return b=e.mul(b,C),C=e.add(R,m),b=e.sub(b,C),C=e.add(v,B),_=e.add(O,I),C=e.mul(C,_),_=e.add(X,m),C=e.sub(C,_),T=e.mul(F,b),_=e.mul(k,m),T=e.add(_,T),_=e.sub(X,T),T=e.add(X,T),A=e.mul(_,T),X=e.add(R,R),X=e.add(X,R),m=e.mul(F,m),b=e.mul(k,b),X=e.add(X,m),m=e.sub(R,m),m=e.mul(F,m),b=e.add(b,m),R=e.mul(X,b),A=e.add(A,R),R=e.mul(C,b),_=e.mul(y,_),_=e.sub(_,R),R=e.mul(y,X),T=e.mul(C,T),T=e.add(T,R),new d(_,A,T)}subtract(u){return this.add(u.negate())}is0(){return this.equals(d.ZERO)}wNAF(u){return q.wNAFCached(this,u,d.normalizeZ)}multiplyUnsafe(u){wt("scalar",u,it,n.n);let g=d.ZERO;if(u===it)return g;if(u===Z)return this;let{endo:v}=n;if(!v)return q.unsafeLadder(this,u);let{k1neg:B,k1:S,k2neg:O,k2:I}=v.splitScalar(u),_=g,A=g,T=this;for(;S>it||I>it;)S&Z&&(_=_.add(T)),I&Z&&(A=A.add(T)),T=T.double(),S>>=Z,I>>=Z;return B&&(_=_.negate()),O&&(A=A.negate()),A=new d(e.mul(A.px,v.beta),A.py,A.pz),_.add(A)}multiply(u){let{endo:g,n:v}=n;wt("scalar",u,Z,v);let B,S;if(g){let{k1neg:O,k1:I,k2neg:_,k2:A}=g.splitScalar(u),{p:T,f:F}=this.wNAF(I),{p:k,f:R}=this.wNAF(A);T=q.constTimeNegate(O,T),k=q.constTimeNegate(_,k),k=new d(e.mul(k.px,g.beta),k.py,k.pz),B=T.add(k),S=F.add(R)}else{let{p:O,f:I}=this.wNAF(u);B=O,S=I}return d.normalizeZ([B,S])[0]}multiplyAndAddUnsafe(u,g,v){let B=d.BASE,S=(I,_)=>_===it||_===Z||!I.equals(B)?I.multiplyUnsafe(_):I.multiply(_),O=S(this,g).add(S(u,v));return O.is0()?void 0:O}toAffine(u){return h(this,u)}isTorsionFree(){let{h:u,isTorsionFree:g}=n;if(u===Z)return!0;if(g)return g(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:u,clearCofactor:g}=n;return u===Z?this:g?g(d,this):this.multiplyUnsafe(n.h)}toRawBytes(u=!0){return vt("isCompressed",u),this.assertValidity(),o(d,this,u)}toHex(u=!0){return vt("isCompressed",u),Et(this.toRawBytes(u))}}d.BASE=new d(n.Gx,n.Gy,e.ONE),d.ZERO=new d(e.ZERO,e.ONE,e.ZERO);let E=n.nBitLength,q=En(d,n.endo?Math.ceil(E/2):E);return{CURVE:n,ProjectivePoint:d,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:c}}function Tr(t){let n=Ie(t);return xt(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}function An(t){let n=Tr(t),{Fp:e,n:r}=n,o=e.BYTES+1,s=2*e.BYTES+1;function i(m){return j(m,r)}function c(m){return te(m,r)}let{ProjectivePoint:f,normPrivateKeyToScalar:a,weierstrassEquation:h,isWithinCurveOrder:l}=Cr({...n,toBytes(m,y,b){let C=y.toAffine(),U=e.toBytes(C.x),V=Rt;return vt("isCompressed",b),b?V(Uint8Array.from([y.hasEvenY()?2:3]),U):V(Uint8Array.from([4]),U,e.toBytes(C.y))},fromBytes(m){let y=m.length,b=m[0],C=m.subarray(1);if(y===o&&(b===2||b===3)){let U=ot(C);if(!Vt(U,Z,e.ORDER))throw new Error("Point is not on curve");let V=h(U),G;try{G=e.sqrt(V)}catch(tt){let ct=tt instanceof Error?": "+tt.message:"";throw new Error("Point is not on curve"+ct)}let W=(G&Z)===Z;return(b&1)===1!==W&&(G=e.neg(G)),{x:U,y:G}}else if(y===s&&b===4){let U=e.fromBytes(C.subarray(0,e.BYTES)),V=e.fromBytes(C.subarray(e.BYTES,2*e.BYTES));return{x:U,y:V}}else throw new Error(`Point of length ${y} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),d=m=>Et(pt(m,n.nByteLength));function E(m){let y=r>>Z;return m>y}function q(m){return E(m)?i(-m):m}let x=(m,y,b)=>ot(m.slice(y,b));class u{constructor(y,b,C){this.r=y,this.s=b,this.recovery=C,this.assertValidity()}static fromCompact(y){let b=n.nByteLength;return y=Q("compactSignature",y,b*2),new u(x(y,0,b),x(y,b,2*b))}static fromDER(y){let{r:b,s:C}=st.toSig(Q("DER",y));return new u(b,C)}assertValidity(){wt("r",this.r,Z,r),wt("s",this.s,Z,r)}addRecoveryBit(y){return new u(this.r,this.s,y)}recoverPublicKey(y){let{r:b,s:C,recovery:U}=this,V=I(Q("msgHash",y));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");let G=U===2||U===3?b+n.n:b;if(G>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let W=(U&1)===0?"02":"03",ft=f.fromHex(W+d(G)),tt=c(G),ct=i(-V*tt),Lt=i(C*tt),at=f.BASE.multiplyAndAddUnsafe(ft,ct,Lt);if(!at)throw new Error("point at infinify");return at.assertValidity(),at}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new u(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return _t(this.toDERHex())}toDERHex(){return st.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _t(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let g={isValidPrivateKey(m){try{return a(m),!0}catch{return!1}},normPrivateKeyToScalar:a,randomPrivateKey:()=>{let m=_e(n.n);return bn(n.randomBytes(m),n.n)},precompute(m=8,y=f.BASE){return y._setWindowSize(m),y.multiply(BigInt(3)),y}};function v(m,y=!0){return f.fromPrivateKey(m).toRawBytes(y)}function B(m){let y=mt(m),b=typeof m=="string",C=(y||b)&&m.length;return y?C===o||C===s:b?C===2*o||C===2*s:m instanceof f}function S(m,y,b=!0){if(B(m))throw new Error("first arg must be private key");if(!B(y))throw new Error("second arg must be public key");return f.fromHex(y).multiply(a(m)).toRawBytes(b)}let O=n.bits2int||function(m){let y=ot(m),b=m.length*8-n.nBitLength;return b>0?y>>BigInt(b):y},I=n.bits2int_modN||function(m){return i(O(m))},_=Zt(n.nBitLength);function A(m){return wt(`num < 2^${n.nBitLength}`,m,it,_),pt(m,n.nByteLength)}function T(m,y,b=F){if(["recovered","canonical"].some(yt=>yt in b))throw new Error("sign() legacy options not supported");let{hash:C,randomBytes:U}=n,{lowS:V,prehash:G,extraEntropy:W}=b;V==null&&(V=!0),m=Q("msgHash",m),_n(b),G&&(m=Q("prehashed msgHash",C(m)));let ft=I(m),tt=a(y),ct=[A(tt),A(ft)];if(W!=null&&W!==!1){let yt=W===!0?U(e.BYTES):W;ct.push(Q("extraEntropy",yt))}let Lt=Rt(...ct),at=ft;function ne(yt){let At=O(yt);if(!l(At))return;let Oe=c(At),nt=f.BASE.multiply(At).toAffine(),It=i(nt.x);if(It===it)return;let Mt=i(Oe*i(at+It*tt));if(Mt===it)return;let qe=(nt.x===It?0:2)|Number(nt.y&Z),Re=Mt;return V&&E(Mt)&&(Re=q(Mt),qe^=1),new u(It,Re,qe)}return{seed:Lt,k2sig:ne}}let F={lowS:n.lowS,prehash:!1},k={lowS:n.lowS,prehash:!1};function R(m,y,b=F){let{seed:C,k2sig:U}=T(m,y,b),V=n;return ye(V.hash.outputLen,V.nByteLength,V.hmac)(C,U)}f.BASE._setWindowSize(8);function X(m,y,b,C=k){let U=m;if(y=Q("msgHash",y),b=Q("publicKey",b),"strict"in C)throw new Error("options.strict was renamed to lowS");_n(C);let{lowS:V,prehash:G}=C,W,ft;try{if(typeof U=="string"||mt(U))try{W=u.fromDER(U)}catch(nt){if(!(nt instanceof st.Err))throw nt;W=u.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){let{r:nt,s:It}=U;W=new u(nt,It)}else throw new Error("PARSE");ft=f.fromHex(b)}catch(nt){if(nt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(V&&W.hasHighS())return!1;G&&(y=n.hash(y));let{r:tt,s:ct}=W,Lt=I(y),at=c(ct),ne=i(Lt*at),yt=i(tt*at),At=f.BASE.multiplyAndAddUnsafe(ft,ne,yt)?.toAffine();return At?i(At.x)===tt:!1}return{CURVE:n,getPublicKey:v,getSharedSecret:S,sign:R,verify:X,ProjectivePoint:f,Signature:u,utils:g}}function Or(t){return{hash:t,hmac:(n,...e)=>he(t,n,an(...e)),randomBytes:dn}}function In(t,n){let e=r=>An({...t,...Or(r)});return Object.freeze({...e(n),create:e})}var On=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qr=BigInt(1),Ce=BigInt(2),Tn=(t,n)=>(t+n/Ce)/n;function Rr(t){let n=On,e=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),c=BigInt(44),f=BigInt(88),a=t*t*t%n,h=a*a*t%n,l=J(h,e,n)*h%n,d=J(l,e,n)*h%n,E=J(d,Ce,n)*a%n,q=J(E,o,n)*E%n,x=J(q,s,n)*q%n,u=J(x,c,n)*x%n,g=J(u,f,n)*u%n,v=J(g,c,n)*x%n,B=J(v,e,n)*h%n,S=J(B,i,n)*q%n,O=J(S,r,n)*a%n,I=J(O,Ce,n);if(!Te.eql(Te.sqr(I),t))throw new Error("Cannot find square root");return I}var Te=ee(On,void 0,void 0,{sqrt:Rr}),Lr=In({a:BigInt(0),b:BigInt(7),Fp:Te,n:Cn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let n=Cn,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-qr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,i=BigInt("0x100000000000000000000000000000000"),c=Tn(s*t,n),f=Tn(-r*t,n),a=j(t-c*e-f*o,n),h=j(-c*r-f*s,n),l=a>i,d=h>i;if(l&&(a=n-a),d&&(h=n-h),a>i||h>i)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:a,k2neg:d,k2:h}}}},gn),ni=BigInt(0);var ri=Lr.ProjectivePoint;export{un as a,dn as b,Gt as c,vt as d,Et as e,Qt as f,Jt as g,Q as h,Rt as i,wt as j,xt as k,Ft as l,j as m,J as n,qs as o,ee as p,En as q,Bn as r,Ie as s,tr as t,Lr as u};
//# sourceMappingURL=chunk-UCYWIXHR.js.map
