import{a as nn,c as Vr,d as Gr}from"./chunk-NNPQ7BFS.js";import{n as Dr,o as Jr}from"./chunk-5JUYNHHM.js";import{b as on,c as rn,d as jr,e as zr,f as Yr,g as $r}from"./chunk-JIPHW3JW.js";import{g as so}from"./chunk-YAZIRKLK.js";import{a as ao}from"./chunk-NYLS5KPS.js";import{a as Kr}from"./chunk-WRDP4AN2.js";import{d as lo,e as Qr,f as Xr}from"./chunk-GLEO4M2L.js";import{a as io}from"./chunk-NVT6KZMA.js";import{f as Te,h as uo,i as co}from"./chunk-UNX7SSQ5.js";import{a as en,b as Wr,c as tn,d as Et}from"./chunk-6PQVK4Y4.js";import{a as La}from"./chunk-XDPVWBGA.js";import{a as Zr}from"./chunk-OGVTPJRM.js";import{b as no,c as oo,e as pt,g as Br,h as Fr}from"./chunk-T2IRCTJA.js";import{e as Ur,f as qr,g as ro}from"./chunk-NDCJG34S.js";import{b as vt}from"./chunk-QCBPGYXR.js";import{b as Hr}from"./chunk-ALZVVIHH.js";import{$ as Rr,A as Jn,B as Ar,C as eo,D as L,F as xr,G as Zt,H as Er,I as vr,J as wr,K as Be,L as Ye,N as to,X as Jt,Z as Mr,aa as Pr,g as ct,ka as Nr,la as Or,oa as S,t as Xt,u as Xn,v as Zn,w as Sr,x as yr,y as Cr,z as br}from"./chunk-SPXYT2VO.js";import{H as Ir,R as hr,t as Tr,y as kr}from"./chunk-7CFB2XTF.js";import{A as mt,e as $t,f as At,i as xt}from"./chunk-FLUPYUSZ.js";import{A as ze,H as wa,I as q,d as ve,l as zn,n as je,p as Yn,t as dt,v as Re,y as Z,z as J}from"./chunk-UC2GDSBD.js";import{f as Lr}from"./chunk-RYV5MLCF.js";import{a as fr,f as fe,i as Qt,t as _r,u as $n}from"./chunk-PI6SXITR.js";import{$c as zt,Ba as ae,Jb as Kt,ad as bt,ba as ar,bd as Yt,cb as ut,ia as lr,nd as ur,od as cr,qd as mr,rb as Ct,rd as pr,tc as jt,ua as dr,ud as gr,vd as C,wd as De}from"./chunk-LZ43QKYM.js";import{a as te}from"./chunk-LH3J3TLH.js";import{D as Gt,G as rr,H as ne,L as sr,O as ir,f as tr,g as nr,h as Vt,k as or,m as Pe,n as B,t as Qn,y as Ht}from"./chunk-XEVJKE53.js";import{E as yt,G as Je,K as Jo,R as jn,V as er,_ as ce,i as Gn,j as K,o as Kn,s as Xo,v as Zo,y as lt}from"./chunk-NLHAZXT3.js";import{a as we}from"./chunk-T7EATGE4.js";import{s as N,t as et,y as me}from"./chunk-YP7AL7GO.js";import{a as X}from"./chunk-6N5VE5LT.js";import{a as w}from"./chunk-6YOUVTKE.js";import{f as h,o as s,q as i}from"./chunk-4J7XGGEQ.js";s();i();var $e=h(w()),qt=h(wa());s();i();s();i();var Go=h(w());s();i();var Ho=h(w());s();i();var j=h(w()),Vo=h(X());s();i();s();i();function Le(t){let e=fe(t.amountNum,{needPlaceholder:!0});return{...t,formattedBalance:e}}function Fe(t,e){return String(t.chainId)===String(e.chainId)&&t.tokenContractAddress===e.tokenContractAddress}function es(t,e,n,o){let r={...t};return n&&(Fe(t,n)?(n.currencyAmount!==void 0&&(r.currencyAmount=n.currencyAmount),n.amountNum!==void 0&&(r.amountNum=n.amountNum)):console.warn("Token mismatch in mergeTokenInfo:",`strategy: ${t.chainId}/${t.tokenContractAddress}`,`currency: ${n.chainId}/${n.tokenContractAddress}`)),e&&(r.defaultSellPercentList=e),o&&(r.currencyDefaultBuyAmountList=o),r}function sn(t,e){return!t||!e||e.length===0?null:e.find(n=>n.chainId===t.chainId&&n.tokenContractAddress===t.tokenContractAddress)||null}function ts(t,e){return!t||!e||e.length===0?null:e.findIndex(o=>o.chainId===t.chainId&&o.tokenContractAddress===t.tokenContractAddress)}function mo(t,e){return t.map(n=>({...n.currencyTokenInfo,formattedBalance:fe(n.currencyTokenInfo.amountNum,{needPlaceholder:!0}),formattedCurrencyAmount:S.currencyConversionWithSymbol(n.currencyTokenInfo.currencyAmount,{needPlaceholder:!0}),currencyDefaultBuyAmountList:n.currencyDefaultBuyAmountList,defaultSellPercentList:e}))}function ns(t,e){return{...t,marketCap:e.marketCap,formattedMarketCap:S.currencyConversionWithSymbol(e.marketCap,{needPlaceholder:!0})}}function os(t){try{return new Lr(t),!0}catch{return!1}}s();i();s();i();s();i();var rs={WIDTH:340,HEIGHT:320,BUY_HEIGHT:420,SELL_HEIGHT:530,PRESET_WIDTH:400,PRESET_HEIGHT:800,SETTING_WIDTH:340,SETTING_HEIGHT:268,FOOTER_HEIGHT:37},ss={WIDTH:342,HEIGHT:307,BUY_HEIGHT:417,SELL_HEIGHT:527,PRESET_WIDTH:400,PRESET_HEIGHT:800,FOOTER_HEIGHT:37},an={SPACE:"Space"},wt=[{key:"Q"},{key:"W"},{key:"E"},{key:"R"},{key:"T"},{key:"Y"}],Lt=[{key:"A"},{key:"S"},{key:"D"},{key:"F"},{key:"G"},{key:"H"}],Se={ORDER_FROM:"INSTANT_TRADE",ORDER_SOURCE:"INSTANT_TRADE",TRADE_MODE:7,SUCCESS:"1",FAILED:"-1"},ln={SHOW_PNL:"instant_trade_showPnl"},ld=[Ct.SOLANA_MAINNET];s();i();ce();var po=class{constructor(){this.currentWallet=null;this.getAddressByChainId=e=>S.getWalletAddressByChainId(e);this.userUniqueId=ct.initUniqueId();this.walletSupportMev=!1;this.setWalletSupportMev=e=>{this.walletSupportMev=e};this.defaultEnabledSilentMethod=!1;this.silentEnabled=!1;this.isSaAccountNormal=!1;Pe(this)}setCurrentWallet(e){this.currentWallet=S.formatCurrentWallet(e)}get computedAccountWalletAddresses(){let e=K(this.currentWallet,"address",[]);return Array.isArray(e)?er(e).join(","):""}get computedAccountId(){return this.currentWallet?.walletId}get isConnectedWallet(){return!!this.currentWallet?.walletId}get computedTeeStatus(){return this.currentWallet?.teeStatus||{}}get computedIsOkxWallet(){return this.currentWallet?.isOkxWallet||!1}get computedTeeInfo(){return this.currentWallet?.tee}get computedInitWalletAtExtension(){return S.isExtensionEnv?S.isExtensionEnv&&!!this.computedAccountId:!0}setDefaultEnabledSilentMethod(e){this.defaultEnabledSilentMethod=e}setSilentEnabled(e){this.silentEnabled=e}setIsSaAccountNormal(e){this.isSaAccountNormal=e}},R=new po;s();i();s();i();s();i();s();i();ce();var We="MARKET_TRADER_PRICING_TOKEN_AMOUNT_LIST",Ue="MARKET_TRADER_SELL_AMOUNT_LIST_STORAGE",ft=({token:t,amountList:e,storageKey:n,isSell:o=!1})=>{if(!$n(t))return;let r=q.get(n),a=K(t,"chainId"),l=oo(t),d=o?{[a]:e}:{[a]:{[l]:e}};q.set(n,Je({},r,d))},dn=({token:t,storageKey:e})=>{if(!$n(t))return null;let n=q.get(e),o=K(t,"chainId"),r=oo(t),a=K(n,`[${o}]`);if(Array.isArray(a))return a;let l=K(a,`[${r}]`);return Array.isArray(l)?l:null};function is(t,e){!t?.chainId||!t?.tokenContractAddress||ft({token:t,amountList:e,storageKey:We})}function as(t,e){!t?.chainId||!t?.tokenContractAddress||ft({token:t,amountList:e,storageKey:Ue})}s();i();ce();s();i();var ls="INITIAL_SELECTED_TOKEN",un=({chainId:t,storageKey:e}={})=>{let n=q.get(ls)||{};return t&&e?n?.[t]?.[e]||"":n},ds=({chainId:t,tokenAddress:e,storageKey:n})=>{let o=un();o[t]||(o[t]={}),o[t][n]=e,q.set(ls,o)};s();i();s();i();ce();async function ye({url:t,params:e}){let n=S.getOnt(),[o,r]=await ne(n.get(t,{params:e}));return[o,r?.data||null]}async function cn({url:t,data:e}){let n=S.getOnt(),[o,r]=await ne(n.post(t,e));return[o,r?.data||null]}function mn(t,e){let n=t||{};return e?{...n,amountNum:e.amountNum,currencyAmount:e.currencyAmount,balance:e.amountNum}:n}function us(t,e){let o=t.map(({currencyTokenInfo:r,currencyDefaultBuyAmountList:a})=>({...r,currencyDefaultBuyAmountList:a,balance:r?.amountNum})).filter(r=>!pt(r,e));return o.length?Jo(o,r=>Number(r.currencyAmount||0),"desc"):[]}var Mt=(t,e)=>Array.isArray(t)?t.map((n,o)=>e==="buy"?{amount:n,buttonUniqueId:`buy_${o}`}:{percent:n,buttonUniqueId:`sell_${o}`}):[],cs=t=>{let e=dn({token:t,storageKey:We});return e||t?.currencyDefaultBuyAmountList||[]},ms=t=>{let e=cs(t),n=t?.currencyDefaultBuyAmountList;return Mt(e||n,"buy")},ps=({token:t,config:e})=>{ft({token:t,amountList:e,storageKey:We,isSell:!1})},fs=t=>{let e=dn({token:t,storageKey:Ue});return e||t?.defaultSellPercentList||[]},gs=t=>{let e=fs(t),n=t?.defaultSellPercentList;return Mt(e||n,"sell")},_s=({token:t,config:e})=>{ft({token:t,amountList:e,storageKey:Ue,isSell:!0})},fo=(t,e)=>{if(S.isExtensionEnv)return S.global.goToSwapPage?.({fromToken:t,toToken:e});let n=Br({from:t,toToken:e}),o=Fr(n);return ir(`${dr(lr)}?${o}`,"_self")};async function go(t){let{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r}=t;try{let[a,l]=await Promise.all([ye({url:Yt,params:{chainId:e,tokenContractAddress:n}}),ye({url:bt,params:{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r,tradeType:1}})]),[d,u]=a,[c,m]=l;if(d||!u)throw console.error("Failed to fetch market order placer strategy:",d),new Error("Failed to fetch market order placer strategy");if(c||!m||m.length===0)throw console.error("Failed to fetch meme currency token list:",c),new Error("Failed to fetch meme currency token list");let k=m.map(y=>y.currencyTokenInfo),g=sn(u.tokenInfo,k),f=g?m.find(y=>y.currencyTokenInfo.chainId===g.chainId&&y.currencyTokenInfo.tokenContractAddress===g.tokenContractAddress):null,p=es(u.tokenInfo,u.defaultSellPercentList,g??null,f?.currencyDefaultBuyAmountList),I=mo(m,u.defaultSellPercentList);return g||console.warn("No matching currency token found for:",`${u.tokenInfo.chainId}/${u.tokenInfo.tokenContractAddress}`,"Proceeding with strategy token info only"),f||console.warn("Failed to find currency item with buy amount list, using defaults"),{tokenInfo:p,defaultSellPercentList:u.defaultSellPercentList,currencyDefaultBuyAmountList:f?.currencyDefaultBuyAmountList??[],tokenSelectionList:I}}catch(a){throw console.error("fetchInstantTradeTokenData error:",a),new Error("Failed to fetch instant trade token data")}}var pn=async(t,e)=>{let{chainId:n,tokenContractAddress:o,accountId:r,userUniqueId:a}=e;try{let l=await ye({url:bt,params:{chainId:n,tokenContractAddress:o,accountId:r,userUniqueId:a,tradeType:1}}),[d,u]=l;if(d||!u||u.length===0)throw console.error("Failed to fetch currency token list:",d),new Error("Failed to fetch currency token list");return mo(u,t)}catch(l){throw console.error("fetchCurrencyTokenList error:",l),new Error("Failed to fetch currency token list")}},Ts=async t=>{let{chainId:e,tokenContractAddress:n}=t;try{let o=await ye({url:zt,params:{chainId:e,tokenContractAddress:n}}),[r,a]=o;if(r||!a)throw console.error("Failed to fetch token balance:",r),new Error("Failed to fetch token balance");return a}catch(o){throw console.error("fetchTokenBalance error:",o),new Error("Failed to fetch token balance")}},_o=async t=>{let{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r,userWalletAddress:a}=t;try{let l=await ye({url:jt,params:{chainId:e,tokenAddress:n,accountId:o,walletId:o,userUniqueId:r,userWalletAddress:a,businessType:"1"}}),[d,u]=l;return d||!u?(console.error("Failed to fetch token info with balance:",d),null):u}catch(l){return console.error("fetchTokenInfoWithBalance error:",l),null}};var Rt="501",ko="11111111111111111111111111111111",To=class{constructor(){this.isInitialized=!1;this.defaultToken=null;this.selectedToken=null;this.buyTokenIndex=0;this.sellTokenIndex=0;this.buyConfigStorage="";this.sellConfigStorage="";this.clearData=()=>{this.defaultToken=null,this.selectedToken=null,this.buyTokenIndex=0,this.sellTokenIndex=0};this.refreshForAccountChange=async()=>{try{let e=R.computedAccountId,n=R.userUniqueId;if(!e||!n){console.error("refreshForAccountChange: Account info not available");return}if(this.defaultToken?.tokenInfo){let o=this.defaultToken.tokenInfo,r=await pn(this.defaultToken.sellPercentList,{chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,tradeType:1});if(r){this.defaultToken.tokenSelectionList=r;let a=sn(o,r);a?.amountNum&&(this.defaultToken.tokenInfo=Le({...o,amountNum:a.amountNum}))}}if(this.selectedToken?.tokenInfo){let o=this.selectedToken.tokenInfo,r=R.getAddressByChainId(o.chainId),[a,l]=await Promise.all([pn(this.selectedToken.sellPercentList,{chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,tradeType:1}),_o({chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,userWalletAddress:r})]);a&&(this.selectedToken.tokenSelectionList=a),l?.amountNum&&(this.selectedToken.tokenInfo=Le({...o,amountNum:l.amountNum}))}}catch(e){console.error("refreshForAccountChange error:",e)}};this.initBuyAndSellIndex=({tokenList:e})=>{if(!e.length)return;let n=un({chainId:Number(Rt),storageKey:"extensionMarketBuy"}),o=e.findIndex(l=>l.tokenContractAddress===n);o!==-1&&(this.buyTokenIndex=o);let r=un({chainId:Number(Rt),storageKey:"extensionMarketSell"}),a=e.findIndex(l=>l.tokenContractAddress===r);a!==-1&&(this.sellTokenIndex=a)};this.initializeInstantTrade=async()=>{try{let e=R.computedAccountId,n=R.userUniqueId;if(!e||!n)return console.error("Account info not available from currentWalletStore"),null;let o=await go({chainId:Rt,tokenContractAddress:ko,accountId:e,userUniqueId:n});return o?(this.initBuyAndSellIndex({tokenList:o.tokenSelectionList}),this.defaultToken={tokenInfo:Le(o.tokenInfo),buyAmountList:o.currencyDefaultBuyAmountList,sellPercentList:o.defaultSellPercentList,tokenSelectionList:o.tokenSelectionList},this.isInitialized=!0,o):null}catch(e){return console.error("initializeInstantTrade error",e),null}};this.addSelectedToken=async(e,n)=>{try{let o=R.computedAccountId,r=R.userUniqueId;if(!o||!r)return console.error("Account info not available from currentWalletStore"),null;Fe(this.buyWithToken,{tokenContractAddress:e,chainId:n})&&(this.buyTokenIndex=0),Fe(this.sellForToken,{tokenContractAddress:e,chainId:n})&&(this.sellTokenIndex=0);let a=R.getAddressByChainId(n),[l,d,u]=await Promise.all([go({chainId:n,tokenContractAddress:e,accountId:o,userUniqueId:r}),Ts({chainId:n,tokenContractAddress:e}),_o({chainId:n,tokenContractAddress:e,accountId:o,userUniqueId:r,userWalletAddress:a})]);if(!l||!l.tokenInfo?.tokenContractAddress)return console.error("Failed to fetch token data for CA:",e),null;let c=ns(l.tokenInfo,d);return u?.amountNum&&(c={...c,amountNum:u.amountNum}),this.selectedToken={tokenInfo:Le(c),buyAmountList:l.currencyDefaultBuyAmountList,sellPercentList:l.defaultSellPercentList,tokenSelectionList:l.tokenSelectionList},l}catch(o){return console.error("addSelectedToken error",o),null}};this.removeSelectedToken=()=>{this.selectedToken=null};this.setBuyTokenIndex=e=>{let n=this.tokenSelectionList;if(!n||n.length===0){console.warn("Cannot set buy token index: token selection list is empty");return}if(e<0||e>=n.length){console.warn(`Buy token index ${e} is out of bounds (0-${n.length-1})`);return}this.buyTokenIndex=e};this.setSellTokenIndex=e=>{let n=this.tokenSelectionList;if(!n||n.length===0){console.warn("Cannot set sell token index: token selection list is empty");return}if(e<0||e>=n.length){console.warn(`Sell token index ${e} is out of bounds (0-${n.length-1})`);return}this.sellTokenIndex=e};this.updateTokenBalance=e=>{if(!e?.chainId||!e?.tokenContractAddress)return;let n=String(e.amountNum);if(this.selectedToken?.tokenSelectionList){let o=this.selectedToken.tokenSelectionList.findIndex(r=>Fe(r,e));if(o!==-1){let a={...this.selectedToken.tokenSelectionList[o],amountNum:n};this.selectedToken.tokenSelectionList[o]=Le(a)}}if(this.defaultToken?.tokenSelectionList){let o=this.defaultToken.tokenSelectionList.findIndex(r=>Fe(r,e));if(o!==-1){let a={...this.defaultToken.tokenSelectionList[o],amountNum:n};this.defaultToken.tokenSelectionList[o]=Le(a)}}if(this.selectedToken?.tokenInfo&&Fe(this.selectedToken.tokenInfo,e)){let o={...this.selectedToken.tokenInfo,amountNum:n};this.selectedToken.tokenInfo=Le(o)}if(this.defaultToken?.tokenInfo&&Fe(this.defaultToken.tokenInfo,e)){let o={...this.defaultToken.tokenInfo,amountNum:n};this.defaultToken.tokenInfo=Le(o)}};this.updateTokenSelectionList=async()=>{let e=this.selectedToken?this.selectedToken?.tokenInfo:this.defaultToken?.tokenInfo;if(!e){console.error("Cannot update token selection list: no token data available");return}let n=await pn(e.defaultSellPercentList,{chainId:e.chainId,tokenContractAddress:e.tokenContractAddress,accountId:R.computedAccountId,userUniqueId:R.userUniqueId,tradeType:1});if(!n){console.error("Cannot update token selection list: no token selection list available");return}this.selectedToken?this.selectedToken.tokenSelectionList=n:this.defaultToken.tokenSelectionList=n};this.getTokenFromSelectionList=e=>{let n=this.tokenSelectionList;return!n||n.length===0?null:n[e]};Pe(this,{getTokenFromSelectionList:!1,getTokenBuyConfigStorage:!1,getTokenSellConfigStorage:!1}),this.buyConfigStorage=q.get(We),this.sellConfigStorage=q.get(Ue),window.addEventListener("storage",tr(e=>{if(e.key===`ok_${ar}`){let n=JSON.parse(e.newValue);this.buyConfigStorage=K(n,We,""),this.sellConfigStorage=K(n,Ue,"")}})),Vt(()=>({accountId:R.computedAccountId,userUniqueId:R.userUniqueId}),({accountId:e,userUniqueId:n})=>{e&&n&&(this.defaultToken||this.selectedToken)&&this.refreshForAccountChange().catch(()=>{})},{fireImmediately:!1,equals:(e,n)=>e.accountId===n.accountId&&e.userUniqueId===n.userUniqueId})}getTokenBuyConfigStorage({chainId:e,tokenContractAddress:n}){return K(this.buyConfigStorage,`${e}.${n}`,[])}getTokenSellConfigStorage({chainId:e,tokenContractAddress:n}){return K(this.sellConfigStorage,`${e}.${n}`,[])}reloadConfigsFromStorage(){this.buyConfigStorage=q.get(We),this.sellConfigStorage=q.get(Ue)}get buyWithToken(){let e=this.getTokenFromSelectionList(this.buyTokenIndex);return e?Le(e):null}get sellForToken(){let e=this.getTokenFromSelectionList(this.sellTokenIndex);return e?Le(e):null}get buyButtonList(){let e=this.buyWithToken||this.defaultToken?.tokenInfo,n=this.getTokenBuyConfigStorage({chainId:e?.chainId,tokenContractAddress:jn(e?.tokenContractAddress)}),o=e?.currencyDefaultBuyAmountList,r=this.defaultToken?.buyAmountList;return Kn({},n?.length>0?{list:n}:null,o?.length>0?{list:o}:null,r?.length>0?{list:r}:null,{list:[]}).list.map((l,d)=>({amount:Number(l),buttonUniqueId:`buy_${d}`}))}get sellButtonList(){let e=this.sellForToken||this.defaultToken?.tokenInfo,n=this.getTokenSellConfigStorage({chainId:e?.chainId,tokenContractAddress:jn(e?.tokenContractAddress)}),o=this.sellForToken?.defaultSellPercentList,r=this.defaultToken?.sellPercentList;return Kn({},n?.length>0?{list:n}:null,o?.length>0?{list:o}:null,r?.length>0?{list:r}:null,{list:[]}).list.map((l,d)=>({percent:Number(l),buttonUniqueId:`sell_${d}`}))}get tokenSelectionList(){let e=this.selectedToken?.tokenSelectionList||this.defaultToken?.tokenSelectionList||[];return this.selectedToken?.tokenInfo?e.filter(n=>!Fe(n,this.selectedToken.tokenInfo)):e}},O=new To;var Io=class{constructor(e){this.isPresetModalOpen=!1;this.isSettingModalOpen=!1;this.isEditModeActive=!1;this.isShortcutActive=!1;this.spacePressed=!1;this.tokenSelectorState=null;this.tokenSelectorHideCount=0;this.boostOnboardingShown=q.get("boostOnboardingShown")??!1;this.isBoostInfoShown=!0;this.loadingButtonMap=new Map;this.tempBuyModeConfigList=[];this.tempSellModeConfigList=[];this.sizeConfig=e,Pe(this)}setPresetModalOpen(e){this.isPresetModalOpen=e,this.applyWindowResize()}setSettingModalOpen(e){this.isSettingModalOpen=e,this.applyWindowResize()}get computedDialogState(){return this.isPresetModalOpen?"preset":this.isSettingModalOpen?"setting":"main"}saveEditModeConfigs(){let e=this.tempBuyModeConfigList.map(o=>String(o)),n=this.tempSellModeConfigList.map(o=>String(o));is(O.buyWithToken,e),as(O.sellForToken,n),O.reloadConfigsFromStorage(),this.isEditModeActive=!1}setEditModeActive(e){this.isEditModeActive=e}setShortcutActive(e){this.isShortcutActive=e}setSpacePressed(e){this.spacePressed=e}setTokenSelectorState(e){this.tokenSelectorState=e,e!==null&&(this.isEditModeActive=!1),this.applyWindowResize(!1)}updateTokenSelectorHideCount(){this.tokenSelectorHideCount+=1}setBoostOnboardingShown(e){this.boostOnboardingShown=e,q.set("boostOnboardingShown",e)}setBoostInfoShown(e){this.isBoostInfoShown=e,this.applyWindowResize(!1)}showBoostInfo(){this.setBoostInfoShown(!0)}hideBoostInfo(){this.setBoostInfoShown(!1)}setButtonLoading(e,n){this.loadingButtonMap.set(e,n)}getButtonLoading(e){return this.loadingButtonMap.get(e)||!1}clearButtonLoading(e){this.loadingButtonMap.delete(e)}clearAllButtonLoading(){this.loadingButtonMap.clear()}getLoadingButtonIds(){let e=[];return this.loadingButtonMap.forEach((n,o)=>{n&&e.push(o)}),e}hasAnyButtonLoading(){return this.getLoadingButtonIds().length>0}setTempBuyModeConfigList(e){this.tempBuyModeConfigList=e}setTempSellModeConfigList(e){this.tempSellModeConfigList=e}hasTempConfigs(){return this.tempBuyModeConfigList.length>0||this.tempSellModeConfigList.length>0}get computedWindowSize(){if(this.isPresetModalOpen)return{width:this.sizeConfig.PRESET_WIDTH,height:this.sizeConfig.PRESET_HEIGHT};if(S.isExtensionEnv&&this.isSettingModalOpen)return{width:this.sizeConfig.SETTING_WIDTH,height:this.sizeConfig.SETTING_HEIGHT};if(this.tokenSelectorState!==null){let o=this.tokenSelectorState==="buy";return{width:this.sizeConfig.WIDTH,height:o?this.sizeConfig.BUY_HEIGHT:this.sizeConfig.SELL_HEIGHT}}let e=this.sizeConfig.HEIGHT,n=this.isBoostInfoShown?this.sizeConfig.FOOTER_HEIGHT:0;return{width:this.sizeConfig.WIDTH,height:e+n}}applyWindowResize(e){let n=this.computedWindowSize;S.isExtensionEnv&&S.global.resize(n,e)}},b=new Io(S.isExtensionEnv?rs:ss);s();i();var ho=class{constructor(){this.ctxIsReady=!1;this.currentToken=null;this.buyWithToken=null;this.sellForToken=null;this.tokenList=[];this.buyModeConfigList=[];this.sellModeConfigList=[];this.initDataLoading=!1;this.tokenListLoading=!0;this.activeTokenSelector=null;this.activeTokenSelectorShown=!1;this.marketLatestInfo=null;this.tokenPairFeeRate={["buy"]:null,["sell"]:null};this.showPnl=q.get(ln.SHOW_PNL)??!0;this.selectTradeMode="buy";Pe(this)}setCtxIsReady(e){this.ctxIsReady=e}setCurrentToken(e){this.currentToken=e}get computedFormattedCurrentToken(){return{...this.currentToken,tokenSymbol:this.currentToken?.tokenSymbol||Kt,formattedTokenContractAddress:mt(this.currentToken?.tokenContractAddress,6,4),formattedBalance:fe(this.currentToken?.balance,{needPlaceholder:!0}),formattedAvailableCurrencyAmount:S.currencyConversionWithSymbol(this.currentToken?.currencyAmount,{needPlaceholder:!0})}}setBuyWithToken(e){this.buyWithToken=e}get computedFormattedBuyWithToken(){let e=this.buyWithToken;return{...e,tokenSymbol:e?.tokenSymbol||Kt,formattedTokenContractAddress:mt(e?.tokenContractAddress,6,4),formattedBalance:fe(e?.balance,{needPlaceholder:!0})}}setSellForToken(e){this.sellForToken=e}get computedFormattedSellForToken(){let e=this.sellForToken;return{...e,tokenSymbol:e?.tokenSymbol||Kt,formattedTokenContractAddress:mt(e?.tokenContractAddress,6,4),formattedBalance:fe(e?.balance,{needPlaceholder:!0})}}setTokenList(e){this.tokenList=e}get computedFormattedTokenList(){return this.tokenList.map(e=>({...e,label:e.tokenSymbol,value:e.tokenContractAddress,formattedBalance:fe(e.balance,{needPlaceholder:!0}),formattedCurrencyAmount:S.currencyConversionWithSymbol(e.currencyAmount,{needPlaceholder:!0})}))}setBuyModeConfigList(e){this.buyModeConfigList=e}setSellModeConfigList(e){this.sellModeConfigList=e}setInitDataLoading(e){this.initDataLoading=e}setTokenListLoading(e){this.tokenListLoading=e}setActiveTokenSelector(e,n){this.activeTokenSelector!==e&&!n||(this.activeTokenSelector=e,this.activeTokenSelectorShown=n)}setMarketLatestInfo(e){this.marketLatestInfo=e}get computedMarketLatestInfo(){return{...this.marketLatestInfo,formattedMarketCap:S.currencyConversionWithSymbol(this.marketLatestInfo?.marketCap)}}setTokenPairFeeRate(e){this.tokenPairFeeRate=e}},v=new ho;s();i();var So=class{constructor(){this.getWalletInfoForRequest=e=>({accountId:R.computedAccountId,walletId:R.computedAccountId,userUniqueId:R.userUniqueId,userWalletAddress:R.getAddressByChainId(e)})}},Is=new So;var yo=class{constructor(){this.updateCurrentTokenInfo=async e=>{let[n,o]=await ye({url:Yt,params:e});if(n||!o)return null;let r={...o.tokenInfo||{},balance:o.tokenInfo?.amountNum,defaultSellPercentList:o.defaultSellPercentList};return v.setCurrentToken(r),r};this.getTokenInfoAndBalance=async e=>{let n={chainId:e.chainId,tokenAddress:e.tokenContractAddress,...Is.getWalletInfoForRequest(e.chainId),businessType:"1"},[o,r]=await ye({url:jt,params:n});return o||!r?null:(this.updateTokenBalance(r),r)};this.updateTokenBalance=e=>{if(pt(e,v.currentToken)){let n=mn(v.currentToken,e);v.setCurrentToken(n)}if(pt(e,v.buyWithToken)){let n=mn(v.buyWithToken,e);v.setBuyWithToken(n)}if(pt(e,v.sellForToken)){let n=mn(v.sellForToken,e);v.setSellForToken(n)}};this.updateTokenList=async({params:e,currentToken:n,needLoading:o})=>{o&&v.setTokenListLoading(!0);let[r,a]=await ye({url:bt,params:{...e,accountId:R.computedAccountId,userUniqueId:R.userUniqueId,tradeType:1}});if(v.setTokenListLoading(!1),r||!a||!Array.isArray(a)||!a?.length)return v.setTokenList([]),[];let l=us(a,n);return l.length?(v.setTokenList(l),l):(v.setTokenList([]),[])};this.storeBuyModeConfigList=e=>{let n=Mt(e,"buy");ps({token:v.buyWithToken,config:e}),v.setBuyModeConfigList(n)};this.updateBuyModeConfigListByToken=e=>{let n=ms(e);v.setBuyModeConfigList(n)};this.storeSellModeConfigList=e=>{let n=Mt(e,"sell");_s({token:v.currentToken,config:e}),v.setSellModeConfigList(n)};this.updateSellModeConfigListByToken=e=>{let n=gs(e);v.setSellModeConfigList(n)};this.openPresetModal=()=>{b.setPresetModalOpen(!0)};this.closePresetModal=()=>{b.setPresetModalOpen(!1)};this.openSettingModal=()=>{b.setSettingModalOpen(!0)};this.closeSettingModal=()=>{b.setSettingModalOpen(!1)};this.activateEditMode=()=>{b.setEditModeActive(!0)};this.deactivateEditMode=()=>{b.setEditModeActive(!1)};this.activateShortcut=()=>{b.setShortcutActive(!0)};this.deactivateShortcut=()=>{b.setShortcutActive(!1)};this.setBoostOnboardingShown=e=>{b.setBoostOnboardingShown(e)};this.resetUIState=()=>{b.setPresetModalOpen(!1),b.setSettingModalOpen(!1),b.setEditModeActive(!1),b.setShortcutActive(!1)};this.resetStoreData=()=>{v.setBuyModeConfigList([]),v.setSellModeConfigList([]),v.setCurrentToken(null),v.setBuyWithToken(null),v.setSellForToken(null)}}setShowPnl(e){v.showPnl=e,q.set(ln.SHOW_PNL,e)}setSelectTradeMode(e){v.selectTradeMode=e}},V=new yo;s();i();s();i();var hs=h(w());s();i();var Co=h(w());s();i();var Ss=h(w());ce();var ys=({tokenSymbol:t,amount:e,balance:n})=>!e||te.lte(e,0)?(J.error({title:C("swaptrade_instant_toast_cannot_be_zero")}),!1):te.gt(e,n)?(J.error({title:C("swaptrade_home_btn_insufficient_balance_of",{tokenSymbol:t})}),!1):!0,Cs=t=>{if(K(t,"dexData.orderFrom","")===Se.ORDER_FROM){let{dexData:n,type:o}=t||{},{status:r,transactionHash:a,orderId:l}=n||{};if(r===Se.SUCCESS&&Number(o)===1){if(Er(a),vr(a))return;wr(a);let d=Zt.getDuration(l),u=d?De("swaptrade_toast_msg_transaction_success_time",{time:Ss.default.createElement(xr,{duration:d})}):C("swaptrade_orders_text_details_success");Z.success({title:u,placement:Z.DIRECTION.top})}else r===Se.FAILED&&Z.error({title:C("swaptrade_top_text_history_failed"),placement:Z.DIRECTION.top})}};var bs=({chainId:t,tokenContractAddress:e})=>{let{computedAccountWalletAddresses:n,userUniqueId:o,computedAccountId:r}=R,{ctxIsReady:a}=v;(0,Co.useEffect)(()=>{let l;return n&&a&&(l=Wr(n)),()=>{l?.()}},[n,a]),(0,Co.useEffect)(()=>{let l;return a&&(l=en({isPri:!0,needLogin:!0,subscribeParams:[{channel:Et.DEX_PUSH_ENGINE},{channel:Et.WALLET_ASSET}],onListenError:()=>{},onListenData:(d,u)=>{if(!!d&&(u?.channel===Et.DEX_PUSH_ENGINE&&Cs(d),u.channel===Et.WALLET_ASSET)){let c=d;if(c.tokenAddress!==e&&!c.isNativeToken)return;let m=c.tokenAddress;c.isNativeToken&&(m=ko);let k=parseFloat(c.coinAmountOriginalDec)||c.amountNum||0,g={...c,amountNum:k};O.updateTokenBalance({chainId:c.chainId,tokenContractAddress:m,amountNum:k}),V.updateTokenBalance(g),V.updateTokenList({params:{chainId:t,userUniqueId:o,accountId:r,tokenContractAddress:e},currentToken:v.currentToken})}}})),()=>{l?.()}},[t,e,o,r,a])};s();i();var As=h(w());var xs=()=>{let{isConnectedWallet:t,computedAccountId:e}=R;(0,As.useEffect)(()=>{t&&S.checkSupportMev().then(n=>{R.setWalletSupportMev(n)}).catch(()=>{})},[t,e])};s();i();var kn=h(w());s();i();s();i();ce();s();i();var Es=async t=>{let{chainId:e,unsignedTx:n,hasReferralCommission:o,signWalletAddress:r,accountId:a,requestCommissionAddress:l,orderId:d,txHash:u}=t,c="";try{let k=JSON.parse(n);c=k.array?k.array[0].data:k.data}catch(k){Ye.stuff({msg:"log-verifyCallData-error-parse-tx",error:k,unsignedTx:n})}c||to({success:!1,refCode:"",parsedAddress:"",localCommissionAddress:"",walletId:a,txHash:u,orderId:d,callDataIsEmpty:!0,requestCommissionAddress:l,module:"market-quick-buy"});let m=await Rr({callData:c,chainId:Number(e),address:r,hasReferralCommission:o});m.success||to({...m,walletId:a,txHash:u,orderId:d,requestCommissionAddress:l,module:"market-quick-buy"})};s();i();s();i();var vs=async t=>{if(!t)return{status:"confirm_order_error",success:!1,error:new Error("params is required")};let[e,n]=await cn({url:pr,data:{walletId:t.accountId,userWalletAddress:t.userWalletAddress,orderId:t.orderId,signedTx:t.signedTx,transactionHash:t.transactionHash,executeSilentSignPreExecInConfirm:t.isSilent}});return e?(Z.error({title:e?.error_message||C("swaptrade_home_toast_broadcast_failed"),placement:Z.DIRECTION.top}),{status:"confirm_order_error",success:!1,error:e}):{status:"confirm_order_success",success:!0,result:n}};s();i();var Ra=async t=>{let e={isSilent:t.isSilent||t.defaultEnabledSilentMethod};if(S.isExtensionEnv){let d={calldataParams:{userWalletAddress:t.walletAddress,walletId:S.getWalletId()}},[u,c]=await ne(S.signSolanaAllTransactions(t.txInfo,d)),m=await ro(c,{isWalletInstantTrade:!0});return[u,m]}let n=qr(t.txInfo),o={chainId:Number(t.chainId),transactions:n},[r,a]=await ne(Vr.signAllTransactions(o,e));if(r)return[r,null];let l=await ro(a);return[r,l]},ws=async t=>{let e=await Ur(t.calldata.unsignedTx),[n,o]=await Ra({txInfo:e,isSilent:t.isSilent,defaultEnabledSilentMethod:t.defaultEnabledSilentMethod,walletAddress:t.userWalletAddress,chainId:t.chainId});return n?(nn(n)&&Z.error({title:C("swaptrade_notification_notif_transaction_canceled"),placement:Z.DIRECTION.top}),{status:"wallet_denied_eoa_sign_error",success:!1,error:n}):{status:"eoa_sign_success",success:!0,result:{txInfo:e,signedTx:o.signedTx,transactionHash:o.transactionHash||[]}}};s();i();var fn=async t=>{if(!t)return{status:"prepare_order_error",success:!1,error:new Error("params is required")};let{tradeMode:e,isSilent:n,isSa:o,presetConfig:r={},referralForQuote:a={},toTokenSymbol:l,...d}=t,[u,c]=await cn({url:mr,data:{...d,...a,...r,teeSilentSignEnabled:o&&n,executeSilentSignPreExecInConfirm:n,accountBizLine:o?ut.sa:ut.other,referId:ct.getWalletId(),tradeMode:Se.TRADE_MODE,direction:e==="buy"?"0":"1",orderFrom:Se.ORDER_FROM,orderSource:Se.ORDER_SOURCE}});return u?(Number(u?.error_code)===10058?J.error({title:C("swaptrade_mid_alert_highrisk_token",{token:l}),desc:C("swaptrade_top_text_protect_capital")}):J.error({title:u?.error_message||C("swaptrade_home_toast_initiation_error")}),{status:"prepare_order_error",success:!1,error:u}):{status:"prepare_order_success",success:!0,result:c}};s();i();ce();var Ls=async()=>{let t=S.getSignWalletAddress(),e=S.getWalletAddressByChainId(Ct.ETHEREUM_MAINNET);return t||e},Ms=()=>{let t=S.getSignWalletAddress(),e=S.getWalletAddressByChainId(Ct.ETHEREUM_MAINNET);return t||e||""},gn=async(t,e)=>{let n=await Mr({address:t,chainId:Number(e)});return lt(n)?{referralForQuote:{},referInfo:{}}:{referralForQuote:{refCode:n.refCode,referralCommissionJsVersion:Pr},referInfo:n}},_n=(t,e)=>t?.referralCommissionAddress?{...t,...e}:t||{};var Rs=async t=>{let{chainId:e,fromTokenAddress:n,toTokenAddress:o,amount:r,tradeMode:a,isSilent:l,isSa:d,referralForQuote:u,toTokenSymbol:c,buttonUniqueId:m,userWalletAddress:k,accountId:g,referInfo:f,defaultEnabledSilentMethod:p,presetConfig:I}=t,y=await fn({chainId:e,fromTokenAddress:n,toTokenAddress:o,amount:r,tradeMode:a,isSilent:l,isSa:d,presetConfig:I,referralForQuote:u,toTokenSymbol:c,userWalletAddress:k});if(!y.success)return{...y,buttonUniqueId:m};let A=K(y.result,"broadcastParam")||{},E=K(y.result,"calldata")||{},x=K(y.result,"orderId")||"",F=K(A,"serviceFeeInfo")||{},Y=_n(F,f),ee=await ws({calldata:E,userWalletAddress:k,chainId:A.chainId,isSilent:l,defaultEnabledSilentMethod:p});if(!ee.success)return{...ee,buttonUniqueId:m};let{signedTx:se,transactionHash:$}=ee.result;Es({chainId:A.chainId,unsignedTx:E.unsignedTx,hasReferralCommission:E?.hasReferralCommission,signWalletAddress:k,accountId:g,requestCommissionAddress:Y?.referralCommissionAddress,orderId:x,txHash:$?.[0]}).catch(()=>{}),x&&Zt.setTimestamp(x);let z=await vs({accountId:g,userWalletAddress:k,orderId:x,signedTx:se,transactionHash:$,isSilent:l});return z.success?{...z,buttonUniqueId:m}:{...z,buttonUniqueId:m}};s();i();var Pa=t=>{let e=zn.tip({infoType:zn.Tip.INFO_TYPE.warn,title:C("swaptrade_top_alert_switch_wallets"),children:C("swaptrade_card_alert_switch_wallet_to_match",{chainName:t}),confirmText:C("commonall_text_btn_ok_passive"),onConfirm:()=>{e.destroy()}})},Ps=async(t,e,n,o,r)=>{if(!o&&!S.isExtensionEnv)return await Jt(Number(t)),{status:"wallet_not_connected",success:!1};if(S.isExtensionEnv){if(!o)return S.global.startOnboarding?.(),{status:"extension_will_onboard",success:!1};if(!r)return J.error({title:C("swaptrade_top_alert_switch_wallets")}),{status:"no_user_wallet_address",success:!1};if(!await S.global.unlockWallet?.())return{status:"extension_wallet_not_unlocked",success:!1}}return await Or({chainId:Number(t)})?await Nr({chain:Number(t)})?{status:"done",success:!0}:{status:"switch_network_error",success:!1}:(Pa(e),{status:"not_support_chain",success:!1,toastMessage:`Chain ${e} not supported`})};s();i();ce();s();i();s();i();async function Ns(t){return await Hr.post("/priapi/v1/dx/trade/multi/signAndBroadcast",t)}function Na(t){if(nn(t))Z.error({title:C("swaptrade_notification_notif_transaction_canceled"),placement:Z.DIRECTION.top});else{let e=t.error_message||t.msg||C("swaptrade_home_toast_initiation_error");Z.error({title:e,placement:Z.DIRECTION.top})}}async function Oa(t,e,{isSilent:n=!1,logger:o=Ye}){let r=n?{methodStart:performance.now(),beforeSign:0,afterSign:0,afterRequest:0}:null;o.info(Be.INTENTION_SWAP_SIGN_AND_BROADCAST_START,{type:t,chainId:e.chainId,fromTokenAddress:e.signParams?.fromTokenAddress,toTokenAddress:e.signParams?.toTokenAddress,fromAmount:e.signParams?.fromAmount,isSilent:n});try{if(!await Jt(Number(e.chainId)))throw new Error("Switch network failed");let{signParams:l,tpslConfig:d,teeId:u,...c}=e;r&&(r.beforeSign=performance.now());let{signMsg:m,signature:k}=await Gr[t]({chainId:Number(l.chainId),walletAddress:l.walletAddress,fromTokenAddress:l.fromTokenAddress,toTokenAddress:l.toTokenAddress,fromAmount:l.fromAmount,minReturnAmount:l.minReturnAmount,referrerAddress:l.referrerAddress||"",referrerCode:l.referrerCode||"",expireMs:l.expireMs},{isSilent:n}),g={signMsg:m,signature:k,accountId:e.accountId,address:e.userWalletAddress,teeId:u,chainId:e.chainId,command:t};r&&(r.afterSign=performance.now());let[f,p]=await ne(Ns({...c,walletAuthParam:g}));if(r&&(r.afterRequest=performance.now()),f)throw o.error(Be.INTENTION_SWAP_SIGN_AND_BROADCAST_ERROR,{type:t,chainId:e.chainId,error:f}),Na(f),f;return o.updateMonitorData({txHash:p?.data?.marketOrderDetail?.transactionHash,orderId:p?.data?.marketOrderDetail?.orderId}),o.info(Be.INTENTION_SWAP_SIGN_AND_BROADCAST_SUCCESS,{type:t,chainId:e.chainId,result:p}),p}catch(a){throw o.error(Be.INTENTION_SWAP_SIGN_AND_BROADCAST_ERROR,{type:t,chainId:e.chainId,error:a}),a}}async function Tn(t,e){try{return await Oa("Swap",t,{isSilent:e.isSilent})}catch(n){throw console.error(n),n}}var Os=async t=>{let{buttonUniqueId:e,userWalletAddress:n,accountId:o,teeStatus:r,isOkxWallet:a,updateSAStatus:l,referInfo:d,defaultEnabledSilentMethod:u,...c}=t,m=await fn({...c,userWalletAddress:n});if(!m.success)return{...m,buttonUniqueId:t.buttonUniqueId};let k=K(m.result,"broadcastParam")||{},g=K(m.result,"commonDexInfo")||{},f=K(k,"serviceFeeInfo")||{},p=_n(f,d),{fromToken:I,toToken:y}=g,[A,E]=await ne(Tn({...k,tradeMode:4,accountId:o,orderFrom:"instant_trade",signParams:{chainId:Number(c.chainId),walletAddress:n,fromTokenAddress:I?.tokenContractAddress,toTokenAddress:y?.tokenContractAddress,fromAmount:vt(c.amount,I?.decimals),minReturnAmount:vt(k?.minimumReceived||"0",y?.decimals),referrerAddress:p?.referralCommissionAddress,referrerCode:p?.refCode},teeId:r?.id},{isSilent:c.isSilent||u}));return A?(l?.(r?.id,a),{status:"manual_sa_trade_error",success:!1,error:A,buttonUniqueId:t.buttonUniqueId}):{status:"done",success:!0,result:E,buttonUniqueId:t.buttonUniqueId}};s();i();var Ds=async t=>{let{buttonUniqueId:e,userWalletAddress:n,isSilent:o,defaultEnabledSilentMethod:r,referInfo:a,fromToken:l,toToken:d,accountId:u,teeStatus:c,isOkxWallet:m,updateSAStatus:k,chainId:g,amount:f,presetConfig:p,tradeMode:I,isSa:y}=t,A={chainId:g,fromTokenAddress:l?.tokenContractAddress,toTokenAddress:d?.tokenContractAddress,teeSilentSignEnabled:o,executeSilentSignPreExecInConfirm:!0,accountBizLine:y?ut.sa:ut.other,routerModeType:p.routeModeType,...p,referId:ct.getWalletId(),amount:f,userWalletAddress:n,accountId:u,referrerAddress:a?.referralCommissionAddress,referrerCode:a?.refCode,tradeMode:Se.TRADE_MODE,orderSource:Se.ORDER_SOURCE,orderFrom:Se.ORDER_FROM,direction:I==="buy"?"0":"1",useBackendQuote:!0},[E,x]=await ne(Tn({...A,signParams:{chainId:Number(g),walletAddress:n,fromTokenAddress:l?.tokenContractAddress,toTokenAddress:d?.tokenContractAddress,fromAmount:vt(f,l?.decimals),minReturnAmount:"0",referrerAddress:a?.referralCommissionAddress,referrerCode:a?.refCode},teeId:c?.id},{isSilent:o||r}));return E?(k?.(c?.id,m),{status:"silent_sa_trade_error",success:!1,error:E,buttonUniqueId:e}):{status:"done",success:!0,result:x,buttonUniqueId:e}};var Bs=t=>(t.success&&Z.pending({title:C("wallet_swap_toast_swap_submitted"),placement:Z.DIRECTION.top}),t),Fs=async t=>{let{chainName:e,amount:n,toToken:o,accountId:r,userWalletAddress:a,teeStatus:l,isOkxWallet:d,buttonUniqueId:u,isSilent:c,isSa:m,defaultEnabledSilentMethod:k,updateSAStatus:g,...f}=t,p=await Ps(f.chainId,e,n,r,a);if(!p.success)return{...p,buttonUniqueId:u};let I=await Ls(),{referralForQuote:y,referInfo:A}=await gn(I,f.chainId);if(m&&!c){let x=await Os({chainId:t.chainId,fromTokenAddress:t.fromToken.tokenContractAddress,toTokenAddress:t.toToken.tokenContractAddress,amount:String(n),accountId:r,teeStatus:l,isOkxWallet:d,referInfo:A,defaultEnabledSilentMethod:k,userWalletAddress:a,tradeMode:t.tradeMode,isSilent:c,isSa:m,presetConfig:t.presetConfig,referralForQuote:y,toTokenSymbol:t.toToken.tokenSymbol,buttonUniqueId:u});return Bs(x)}if(m&&c){let x=await Ds({chainId:t.chainId,amount:String(n),userWalletAddress:a,fromToken:t.fromToken,toToken:t.toToken,accountId:r,teeStatus:l,isOkxWallet:d,presetConfig:t.presetConfig,buttonUniqueId:u,isSilent:c,defaultEnabledSilentMethod:k,referInfo:A,updateSAStatus:g,tradeMode:t.tradeMode,isSa:m});return Bs(x)}let E=await Rs({isSilent:c,defaultEnabledSilentMethod:k,accountId:r,userWalletAddress:a,chainId:t.chainId,fromTokenAddress:t.fromToken.tokenContractAddress,toTokenAddress:t.toToken.tokenContractAddress,amount:String(n),tradeMode:t.tradeMode,isSa:m,referralForQuote:y,toTokenSymbol:t.toToken.tokenSymbol,buttonUniqueId:u,referInfo:A,presetConfig:t.presetConfig});return E.success&&Z.pending({title:C("wallet_swap_toast_swap_submitted"),placement:Z.DIRECTION.top}),{...E,buttonUniqueId:u}};var tt=(t,e)=>{let{defaultEnabledSilentMethod:n,silentEnabled:o}=R,r=R.computedAccountId,a=R.computedTeeInfo,l=R.computedIsOkxWallet,{fetchConfigStatus:d,computedSelectPriorityFeeStateForInstantBuy:u,computedSelectPriorityFeeStateForInstantSell:c,computedSelectSlippageStateForInstantBuy:m,computedSelectSlippageStateForInstantSell:k,computedSelectRouterModeTypeForInstantBuy:g,computedSelectRouterModeTypeForInstantSell:f}=L,p=(0,kn.useMemo)(()=>{let I=t==="buy"?u:c,{type:y,value:A}=I,E=t==="buy"?m:k,{mode:x,value:F,customMax:Y}=E,ee=yr[y],se=Sr[x],$={};return se===1?$={maxSlippage:Y}:$={slippage:F},{routeModeType:t==="buy"?g:f,priorityFeeType:ee,priorityFee:ee===4?A:null,slippageType:se,...$}},[t,m,k,u,c,g,f]);return(0,kn.useCallback)(async I=>{let{amount:y,fromToken:A,toToken:E,buttonUniqueId:x}=I;b.setButtonLoading(x,!0);let{chainId:F,chainName:Y,tokenSymbol:ee,balance:se}=A||{},{chainId:$,chainName:z}=E||{},ue=F||$,Ee=Y||z,pe=R.getAddressByChainId(F);if(S.isExtensionEnv&&!r){S.global.startOnboarding?.(),b.setButtonLoading(x,!1);return}if(!ys({tokenSymbol:ee,amount:y,balance:se})){b.setButtonLoading(x,!1);return}if(d===ae.ERROR){J.error({title:C("swaptrade_quick_buy_alert_title_unable_to_load_preset")}),b.setButtonLoading(x,!1);return}try{let Xe=await Fs({amount:y,chainId:`${ue}`,chainName:Ee,fromToken:A,toToken:E,userWalletAddress:pe,tradeMode:t,presetConfig:p,accountId:r,teeStatus:a,isOkxWallet:l,buttonUniqueId:x,isSilent:o,isSa:!1,defaultEnabledSilentMethod:n,updateSAStatus:e});b.setButtonLoading(Xe.buttonUniqueId,!1)}catch(Xe){console.error("TRADE_ERROR",Xe),b.setButtonLoading(x,!1)}},[t,p,d,r,a,l,o,n,e])};s();i();var qs=h(w());s();i();var Ba={0:"buy_order_qty_low_click",1:"buy_order_qty_mid_click",2:"buy_order_qty_high_click",3:"buy_order_qty_full_click"},Fa={0:"sell_order_qty_low_click",1:"sell_order_qty_mid_click",2:"sell_order_qty_high_click",3:"sell_order_qty_full_click"},Wa={0:"buy_order_qty_low_hotkey",1:"buy_order_qty_mid_hotkey",2:"buy_order_qty_high_hotkey",3:"buy_order_qty_full_hotkey"},Ua={0:"sell_order_qty_low_hotkey",1:"sell_order_qty_mid_hotkey",2:"sell_order_qty_high_hotkey",3:"sell_order_qty_full_hotkey"},qa={0:"low",1:"mid",2:"high",3:"full"},Us=()=>({business_type:"instant_trade",page_name:"instant_trade",orderSource:"instant_trade",terminal:S.isExtensionEnv?"extension":"web",popup_source:S.isExtensionEnv?S.global.domainName:"market_token_details"}),Ce=t=>{Tr({...Us(),button_name:t})},qe=({btnIndex:t,isHotkey:e,isBuy:n,toTokenSymbol:o,fromTokenSymbol:r})=>{let a=n?{hotkey:Wa[t],normal:Ba[t]}:{hotkey:Ua[t],normal:Fa[t]};Ce(a[e?"hotkey":"normal"]);let l=n?{buy_qty:!0}:{sell_qty:!0};Ir({...Us(),button_name:a[e?"hotkey":"normal"],instant_order_type:e?"hotkey":"click",instant_order_qty:qa[t],from_token_symbol:r,to_token_symbol:o,...l})};s();i();var Vs=h(w());s();i();var Hs=h(w());s();i();ce();s();i();s();i();ce();function Va(t){return typeof t=="number"&&Number.isFinite(t)||typeof t=="string"&&t!==""&&Number.isFinite(Number(t))}var In=(t="")=>{let{pathname:e}=sr(),n=t||e,[o,r]=n.split("/").slice(-2),a,l,d=!1;return Va(o)?(a=o,l=Qn.chainInfo?.[a]||"",d=!!l):(l=o,a=Xo(Qn.chainInfo,u=>u===l)),{chainId:a,chainName:l,tokenContractAddress:decodeURIComponent(r),needRedirect:d}};s();i();function bo(t){let e=t.slippageConfig.slippageRange.find(r=>r.selected),n;t.feeConfig?.feeOptions&&(n=t.feeConfig?.feeOptions.find(r=>r.selected));let o={slippageType:t.slippageConfig.slippageType};return t.routeConfig&&(o.routerModeType=t.routeConfig.routerModeType),n&&(o.feeLevel=n?.feeLevel),t.slippageConfig.slippageType===2&&(o.slippageLevel=e?.slippageLevel,o.slippageValue=e.slippageValue),t.slippageConfig.slippageType===1&&t.slippageConfig.dynamicMaxSlippageValue&&(o.dynamicMaxSlippageValue=t.slippageConfig.dynamicMaxSlippageValue),n?.feeLevel===4&&(o.feeValue=n.feeValue),o}var Ao=class{constructor(){this.fetchPreset=async({chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r=!1})=>{L.cancelFetchPresetRef&&L.cancelFetchPresetRef.abort();let a=S.createAbortController();L.update({userWalletAddress:o,accountId:n,chainId:e,cancelFetchPresetRef:a});let l={chainId:e};o&&(l.walletAddress=o);let d=S.getOnt(),[u,c]=await ne(d.get(ur,{params:l,signal:L.cancelFetchPresetRef?.signal,isolate:!0}));if(u){if(S.isCancel(u))return;L.update({fetchConfigStatus:ae.ERROR,loadError:!0,presetsList:[]}),Ye.info(Be.MARKET_SWAP_FETCH_CONFIG_ERROR,{data:{params:{chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r},type:"fetchPreset",error:u}});return}let{data:m}=c;if(r){let{chainId:k}=In();if(Number(k)!==Number(m?.chainId)){L.update({fetchConfigStatus:ae.ERROR,loadError:!0}),Ye.info(Be.MARKET_SWAP_FETCH_CONFIG_ERROR,{data:{params:{chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r},type:"fetchPreset",res:c}});return}}L.update({loadError:!1}),this.updatePreset(m,o),this.initQuickBuyAmount(m.quickBuyDefaultBuyAmount)};this.updatePreset=(e,n)=>{if(!e)return;let{dexPresetResultVOList:o,nativeTokenInfo:r,mevPriceThreshold:a,dynamicSupportMax:l,supportAutoMode:d,supportSlippage:u,supportEip1559:c,supportCustomGasFee:m,memeChainType:k,networkFeeUnit:g,networkFeeDecimals:f,subscribeProvider:p,quoteIntervalMs:I}=e,y=q.get(Xt),{presetSelectType:A}=y?.[n]||{};!o.some(x=>x.presetType===A)&&o.length>0&&(A=o[0].presetType),L.update({firstFetchPresetStatus:!0,fetchConfigStatus:ae.READY,presetsList:o,nativeTokenInfo:r,mevPriceThreshold:a,dynamicSupportMax:l,supportSlippage:u,presetSelectType:A,supportAutoMode:d,supportEip1559:c,supportCustomGasFee:m,memeChainType:k,networkFeeUnit:g,networkFeeDecimals:f,subscribeProvider:p,quoteIntervalMs:I})};this.fetchPresets=async({chainIds:e,accountId:n,currentChainId:o,userWalletAddress:r})=>{L.cancelFetchPresetRef&&L.cancelFetchPresetRef.abort(),L.update({userWalletAddress:r,accountId:n,chainId:o,cancelFetchPresetRef:S.createAbortController()});let[a,l]=await ne(S.getOnt().get?.(cr,{params:{chainIds:e,accountId:n},signal:L.cancelFetchPresetRef?.signal,isolate:!0}));if(a){if(S.isCancel(a))return;L.update({fetchConfigStatus:ae.ERROR,presetsList:[]});return}let{data:d}=l,u=d.find(c=>c.chainId===Number(o));u&&(this.updatePreset(u,r),this.initQuickBuyAmount(u.quickBuyDefaultBuyAmount)),L.update({presetListWithChain:d})};this.savePreset=async e=>{let{chainId:n,accountId:o,userWalletAddress:r}=L;if(yt(n)||yt(o)||yt(r)||lt(e))return J.error({title:C("swaptrade_preset_toast_header_unable_to_save_changes")}),!1;L.update({fetchSaveStatus:ae.LOADING});let a=e.map(({id:d,name:u,presetType:c,buyPreset:m,sellPreset:k})=>({id:d,name:u,presetType:c,buyPreset:bo(m),sellPreset:bo(k)})),[l]=await ne(on.save({chainId:n,accountId:o,userWalletAddress:r,sceneType:0,presets:a}));return l?(L.update({fetchSaveStatus:ae.ERROR}),J.error({title:C("swaptrade_preset_toast_header_unable_to_save_changes")}),!1):(Ye.info(Be.PRESET_EDIT_SAVE,{data:{chainId:n,accountId:o,userWalletAddress:r,presets:a,selectType:L.presetEditType}}),await this.fetchPreset({chainId:L.chainId,accountId:L.accountId,userWalletAddress:L.userWalletAddress}),L.update({fetchSaveStatus:ae.READY}),this.setSelectType(L.presetEditType),!0)};this.resetPreset=async e=>{if(yt(e))return J.error({title:C("swaptrade_preset_toast_header_unable_to_reset_this")}),!1;L.update({fetchResetStatus:ae.LOADING});let[n,o]=await ne(on.reset({chainId:L.chainId,presetType:e}));if(n)return L.update({fetchResetStatus:ae.ERROR}),J.error({title:C("swaptrade_preset_toast_header_unable_to_reset_this")}),!1;let{dexPresetResultVOList:r}=o.data,a=r?.[0],l=L.editPresetsList.map(d=>d.presetType===e?{...a,name:d.name}:d);return L.update({fetchResetStatus:ae.READY,editPresetsList:l}),!0};this.setSelectType=e=>{L.update({presetSelectType:e}),this.storageSelectType(e)};this.storageSelectType=e=>{let n=q.get(Xt),{userWalletAddress:o}=L,r=Je({},n,{[o]:{presetSelectType:e}});q.set(Xt,r)};this.setQuickBuyAmount=e=>{L.updateByKey("quickBuyAmount",e),q.set(Xn,e)};this.initQuickBuyAmount=e=>{let n=q.get(Xn);this.setQuickBuyAmount(n||e)};this.setQuickBuyPresetGuide=e=>{L.updateByKey("quickBuyPresetGuide",e),q.set(Zn,e)};this.initQuickBuyPresetGuide=()=>{let e=q.get(Zn);this.setQuickBuyPresetGuide(e??1)}}},nt=new Ao;function Gs({defaultChainId:t,shouldFetch:e}={shouldFetch:!0}){let{currentToken:n}=v,o=n?.chainId||t,{computedAccountId:r}=R,a=R.getAddressByChainId(o),l=v.ctxIsReady;(0,Hs.useEffect)(()=>{e&&o&&l&&a&&(L.update({selectTradeMode:"buy",tradeScene:0}),nt.fetchPreset({chainId:o,accountId:r||"",userWalletAddress:a}))},[r,a,o,l,e])}s();i();var Nt=h(w());var Ha=t=>{let{buyModeConfigList:e,buyWithToken:n,currentToken:o}=v;return{amount:String(e[t].amount),fromToken:n,toToken:o,buttonUniqueId:e[t].buttonUniqueId}},Ga=t=>{let{sellModeConfigList:e,currentToken:n,sellForToken:o}=v,r=e[t].percent;return{amount:te.floorMul(r,n.amountNum,n.decimals),fromToken:n,toToken:o,buttonUniqueId:e[t].buttonUniqueId}},Ks=()=>{let t=tt("buy"),e=tt("sell"),{currentToken:n}=v,{isSettingModalOpen:o,isEditModeActive:r,isPresetModalOpen:a,isShortcutActive:l}=b,d=(0,Nt.useMemo)(()=>n&&!(o||r||a),[n,o,r,a]);(0,Nt.useEffect)(()=>{let u=m=>{if(!!d&&m.code===an.SPACE){if(m.repeat)return;b.setSpacePressed(!0)}},c=m=>{if(!!d){if(b.isShortcutActive&&b.spacePressed&&m.code!==an.SPACE){let g=[...wt,...Lt].find(f=>m.code===`Key${f.key.toUpperCase()}`);if(g){let f=wt.findIndex(I=>I.key===g.key),p=Lt.findIndex(I=>I.key===g.key);if(f>-1){let I=Ha(f);qe({btnIndex:f,toTokenSymbol:I.toToken?.tokenSymbol,fromTokenSymbol:I.fromToken?.tokenSymbol,isHotkey:!0,isBuy:!0}),t(I)}else if(p>-1){let I=Ga(p);qe({btnIndex:p,toTokenSymbol:I.toToken?.tokenSymbol,fromTokenSymbol:I.fromToken?.tokenSymbol,isHotkey:!0,isBuy:!1}),e(I)}}}m.code===an.SPACE&&b.setSpacePressed(!1)}};return l?(document.addEventListener("keydown",u),document.addEventListener("keyup",c)):(document.removeEventListener("keydown",u),document.removeEventListener("keyup",c)),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",c)}},[l,t,e,d]),(0,Nt.useEffect)(()=>{let u=()=>{b.spacePressed&&b.setSpacePressed(!1)},c=()=>{document.hidden&&b.spacePressed&&b.setSpacePressed(!1)};return window.addEventListener("blur",u),document.addEventListener("visibilitychange",c),()=>{window.removeEventListener("blur",u),document.removeEventListener("visibilitychange",c)}},[])};s();i();var Ie=h(w());s();i();var js=async t=>await S.getOnt()?.get?.("/priapi/v1/dx/trade/multi/tokenPair/feeRate",{params:t});var Ka=t=>Object.fromEntries(Object.entries(t).map(([e,n])=>[e,typeof n=="number"?parseFloat(n.toFixed(5)):n])),zs=4,Ys=t=>{let[e,n]=(0,Ie.useState)(null),[o,r]=(0,Ie.useState)(!1),[a,l]=(0,Ie.useState)(null),{chainId:d}=t||{},{chainId:u}=In(),{currentToken:c,buyWithToken:m,sellForToken:k}=v,g=Ms(),f=(0,Ie.useRef)({chainId:"",currentTokenAddress:"",buyWithTokenAddress:"",sellForTokenAddress:"",userWalletAddress:""}),p=(0,Ie.useRef)(!1),I=(0,Ie.useMemo)(()=>({chainId:d||u||"",currentTokenAddress:c?.tokenContractAddress||"",buyWithTokenAddress:m?.tokenContractAddress||"",sellForTokenAddress:k?.tokenContractAddress||"",userWalletAddress:g||""}),[d,u,c?.tokenContractAddress,m?.tokenContractAddress,k?.tokenContractAddress,g]),y=(0,Ie.useMemo)(()=>{let E=f.current;return{chainId:E.chainId!==I.chainId,currentTokenAddress:E.currentTokenAddress!==I.currentTokenAddress,buyWithTokenAddress:E.buyWithTokenAddress!==I.buyWithTokenAddress,sellForTokenAddress:E.sellForTokenAddress!==I.sellForTokenAddress,userWalletAddress:E.userWalletAddress!==I.userWalletAddress}},[I]),A=(0,Ie.useMemo)(()=>Object.values(y).some(Boolean),[y]);return(0,Ie.useEffect)(()=>!I.chainId||!I.currentTokenAddress||!A||p.current?void 0:((async()=>{try{p.current=!0,r(!0),l(null),f.current={...I};let x=[],{referInfo:F}=await gn(I.userWalletAddress,I.chainId),Y=F?.refCode||"";if(I.buyWithTokenAddress&&(y.chainId||y.currentTokenAddress||y.buyWithTokenAddress||y.userWalletAddress)&&x.push({mode:"buy",params:{chainId:I.chainId,fromTokenAddress:I.buyWithTokenAddress,toTokenAddress:I.currentTokenAddress,tradeMode:zs,refCode:Y,userWalletAddress:I.userWalletAddress}}),I.sellForTokenAddress&&(y.chainId||y.currentTokenAddress||y.sellForTokenAddress||y.userWalletAddress)&&x.push({mode:"sell",params:{chainId:I.chainId,fromTokenAddress:I.currentTokenAddress,toTokenAddress:I.sellForTokenAddress,tradeMode:zs,refCode:Y,userWalletAddress:I.userWalletAddress}}),x.length===0)return;let ee=await Promise.allSettled(x.map($=>js($.params))),se={};if(ee.forEach(($,z)=>{if($.status==="fulfilled"){let ue=x[z].mode;se[ue]=Ka($.value.data)}}),Object.keys(se).length>0){let z={...v.tokenPairFeeRate||{},...se};v.setTokenPairFeeRate(z),n(z)}}catch(x){l(x instanceof Error?x.message:"Unknown error")}finally{r(!1),p.current=!1}})().catch(x=>{l(x instanceof Error?x.message:"Unknown error"),p.current=!1}),()=>{p.current=!1}),[I,A,y]),{data:e,loading:o,error:a}};s();i();var ja=h(w());s();i();var oe=h(w());var za=(t={})=>{let{onPaste:e,targetElement:n,enabled:o=!0}=t,[r,a]=(0,oe.useState)(""),[l,d]=(0,oe.useState)(!1),u=(0,oe.useRef)(null),c=(0,oe.useRef)({text:"",timestamp:0}),m=(0,oe.useCallback)(E=>{let x=Date.now(),F=c.current;F.text===E&&x-F.timestamp<100||(c.current={text:E,timestamp:x},a(E),e?.(E))},[e]),k=(0,oe.useCallback)(async()=>{try{if(!navigator.clipboard||!navigator.clipboard.readText)return"";let E=await navigator.clipboard.readText();return m(E),hr({token_contract_address:E}),E}catch{return""}},[m]),g=(0,oe.useCallback)(E=>{if(!o)return;let x=E.clipboardData?.getData("text/plain")||"";m(x)},[o,m]),f=(0,oe.useCallback)(E=>{if(!o)return;(navigator.platform.toUpperCase().indexOf("MAC")>=0?E.metaKey:E.ctrlKey)&&E.key==="v"&&setTimeout(()=>{k()},10)},[o,k]),p=(0,oe.useCallback)(()=>{if(!o)return;let E=n||u.current||document;E.addEventListener("paste",g),E.addEventListener("keydown",f),d(!0)},[o,n,g,f]),I=(0,oe.useCallback)(()=>{let E=n||u.current||document;E.removeEventListener("paste",g),E.removeEventListener("keydown",f),d(!1)},[n,g,f]),y=(0,oe.useCallback)(()=>k(),[k]),A=(0,oe.useCallback)(()=>{a("")},[]);return(0,oe.useEffect)(()=>(o?p():I(),()=>{I()}),[o,p,I]),{pastedText:r,isListening:l,startListening:p,stopListening:I,triggerPaste:y,clearPastedText:A,elementRef:u}},Qs=za;s();i();var Dt=h(w()),Xs=h(X());s();i();var Sn=h(w()),$s=h(X());s();i();var Ot={content:"_content_1imqe_1","from-onboarding":"_from-onboarding_1imqe_10",fromOnboarding:"_from-onboarding_1imqe_10",link:"_link_1imqe_14","boost-text":"_boost-text_1imqe_19",boostText:"_boost-text_1imqe_19"};var Ya=({fromOnboarding:t,onClick:e})=>Sn.default.createElement("div",{className:(0,$s.default)(Ot.content,{[Ot.fromOnboarding]:!!t})},De("swaptrade_function_emptystate_get_boost",{get:Sn.default.createElement("span",{className:Ot.link,onClick:e},De("swaptrade_function_emptystate_text_boost_points",{boost:Sn.default.createElement("span",{className:Ot.boostText},C("swaptrade_function_emptystate_text_boost"))}))})),yn=Ya;s();i();var Cn={"boost-info":"_boost-info_1w65k_1",boostInfo:"_boost-info_1w65k_1",close:"_close_1w65k_8"};var Qa=({fromOnboarding:t,onClick:e,onClose:n})=>Dt.default.createElement("div",{className:(0,Xs.default)(Cn.boostInfo,{[Cn.fromOnboarding]:t})},Dt.default.createElement(yn,{onClick:e}),Dt.default.createElement("div",{className:Cn.close,onClick:n},Dt.default.createElement(N,{className:"okds-close",fontSize:"16px"}))),Zs=Qa;s();i();var Ae=h(w());var Eo=h(X());s();i();var be={"boost-onboarding":"_boost-onboarding_jxvm5_1",boostOnboarding:"_boost-onboarding_jxvm5_1","top-bar":"_top-bar_jxvm5_11",topBar:"_top-bar_jxvm5_11","close-icon":"_close-icon_jxvm5_21",closeIcon:"_close-icon_jxvm5_21","drag-icon":"_drag-icon_jxvm5_31",dragIcon:"_drag-icon_jxvm5_31","extension-logo":"_extension-logo_jxvm5_42",extensionLogo:"_extension-logo_jxvm5_42","content-wrapper":"_content-wrapper_jxvm5_46",contentWrapper:"_content-wrapper_jxvm5_46",content:"_content_jxvm5_46","main-image":"_main-image_jxvm5_63",mainImage:"_main-image_jxvm5_63",button:"_button_jxvm5_67"};s();i();var le=h(w());var $a=()=>le.default.createElement("svg",{className:be.mainImage,width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"https://www.w3.org/2000/svg"},le.default.createElement("path",{d:"M85.5544 43.3911L66.8049 43.3911",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M53.751 23.559C51.2839 17.0492 45.6508 12.5 39.0964 12.5C31.3017 12.5 24.8101 18.9336 23.3965 27.4473",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M57.2149 54.9486C59.9326 51.5011 61.5879 46.9279 61.5879 41.9101C61.5879 31.1758 54.0121 22.4719 44.6668 22.4694C44.5557 22.4694 44.4448 22.4706 44.3342 22.473L44.3342 22.4676L49.808 22.4674C59.1533 22.4699 66.7291 31.1738 66.7291 41.9082C66.7291 48.9357 63.482 55.0913 58.6171 58.5039L57.2149 54.9486Z",fill:"#BCFF2F",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M57.1809 54.8507C59.843 51.4146 61.4612 46.8805 61.4612 41.9101C61.4612 31.1757 53.9137 22.4718 44.6034 22.4693C39.243 22.4679 33.7663 25.2924 30.6658 29.9385",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M34.101 12.5C25.2725 12.5 18.1155 20.7536 18.1155 30.935C18.1155 31.1064 18.1175 31.2773 18.1215 31.4476C19.0922 29.433 21.0073 27.8948 23.383 27.5299C24.7387 19.1581 31.0008 12.7777 38.597 12.5088V12.5H34.101Z",fill:"#BCFF2F",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M7.5 83.4996H84.6803",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M81.5582 43.3911L77.3254 43.3911C75.9867 43.3911 74.81 44.278 74.4414 45.5649L65.5726 76.5243",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M18.1155 38.4086L11.3122 38.4086C9.95087 38.4086 9.01352 39.7748 9.50342 41.0449L24.398 79.6592C25.2906 81.9735 27.5154 83.4999 29.9959 83.4999L67.8314 83.4999",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M34.87 38.4086L48.7337 38.4086C49.9728 38.4086 51.0844 39.1703 51.5316 40.3259L65.3307 75.9852C66.0955 77.9616 67.9967 79.2645 70.116 79.2645C72.4196 79.2645 74.4409 77.7292 75.0589 75.5101L83.6051 44.8243C83.841 43.9771 84.6127 43.391 85.4921 43.391C87.0205 43.391 88.1424 44.8267 87.773 46.3098L80.0202 77.4334C79.1323 80.9979 75.9309 83.4997 72.2574 83.4997H68.2485",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M69.1958 83.4999H67.091C64.6224 83.4999 62.4057 81.9879 61.5048 79.6895L46.5153 41.447C45.943 39.9869 47.0196 38.4086 48.5879 38.4086",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),le.default.createElement("path",{d:"M23.7895 48.3735H36.9087C37.6006 48.3735 38.0834 47.6878 37.8501 47.0364L32.972 33.4132C31.6906 29.8349 28.2741 27.4473 24.4733 27.4473C19.5282 27.4473 16.1007 32.4357 17.9264 37.0315L21.9307 47.1119C22.2333 47.8735 22.9699 48.3735 23.7895 48.3735Z",stroke:"white",strokeWidth:"0.75"}),le.default.createElement("ellipse",{cx:"25.6087",cy:"35.9174",rx:"3.49684",ry:"3.4877",stroke:"white",strokeWidth:"0.75"}),le.default.createElement("path",{d:"M76.0631 12.5L76.063 12.6054M82.0577 18.4789L81.9365 18.479M76.0631 24.4578L76.063 24.3524M70.0685 18.4789L70.1896 18.4788M70.1896 18.4788C73.4324 18.4765 76.0607 15.8483 76.063 12.6054M70.1896 18.4788C73.4324 18.4811 76.0607 21.1095 76.063 24.3524M76.063 12.6054C76.0653 15.8483 78.6937 18.4767 81.9365 18.479M76.063 24.3524C76.0653 21.1095 78.6937 18.4813 81.9365 18.479",stroke:"white",strokeWidth:"0.75",strokeLinejoin:"round"}),le.default.createElement("ellipse",{cx:"11.6213",cy:"75.7769",rx:"2.49775",ry:"2.49121",stroke:"white",strokeWidth:"0.75"})),Js=$a;var Xa=({onClose:t})=>{let e=`https://${S.global?.getStaticHostname?.()}/cdn/assets/imgs/254/43DEFFE88CCA0D7C.png`;return Ae.default.createElement("div",{className:be.boostOnboarding},Ae.default.createElement(N,{className:(0,Eo.default)(be.dragIcon,"okx-defi-dex-drag")}),Ae.default.createElement("div",{className:be.topBar},Ae.default.createElement(we,{src:e,pictureClassName:be.extensionLogo,width:16,height:16}),Ae.default.createElement(N,{className:(0,Eo.default)(be.closeIcon,"okx-defi-collapse"),onClick:n=>{n?.detail!==0&&t&&t()},a11yText:"Close"})),Ae.default.createElement("div",{className:be.contentWrapper},Ae.default.createElement("div",{className:be.content},Ae.default.createElement("div",{className:be.image},Ae.default.createElement(Js,null)),Ae.default.createElement(yn,{fromOnboarding:!0,onClick:()=>{}})),Ae.default.createElement(me,{className:be.button,category:me.CATEGORY.outline,type:me.TYPE.primary,size:me.SIZE.md,onClick:()=>{b.setBoostOnboardingShown(!0)}},C("swaptrade_function_emptystate_btn_start"))))},ei=B(Xa);s();i();var gt=h(w());s();i();var ge=h(w()),si=h(La());s();i();var ot=h(w());s();i();var{DEX_MARKET_CHANNEL:Za,DEX_MARKET_TX_CHANNEL:ti}=tn,Ja=t=>t?t==="1"?ti:Za:ti,ni=t=>Array.isArray(t)?t.map(e=>({channel:Ja(e?.isTxPrice),chainId:String(e?.chainId),tokenAddress:e?.tokenContractAddress||e?.tokenAddress})):[];ce();s();i();var vo=class{constructor(){this.marketLatestInfo=null;Pe(this)}setMarketLatestInfo(e){this.marketLatestInfo=e}get computedMarketLatestInfo(){return{...this.marketLatestInfo,formattedMarketCap:S.currencyConversionWithSymbol(this.marketLatestInfo?.marketCap)}}},bn=new vo;var Lo=t=>{!t||bn.setMarketLatestInfo(t)},wo=async({chainId:t,tokenContractAddress:e,setLatestInfo:n})=>{let[o,r]=await ye({url:zt,params:{chainId:t,tokenContractAddress:e}});!o&&r&&(n(r),Lo(r))},el=({tokenContractAddress:t,chainId:e})=>Boolean(t&&_r(e)),oi=({chainId:t,tokenContractAddress:e,onSocketError:n})=>{let[o,r]=(0,ot.useState)({}),{ctxIsReady:a}=v,l=(0,ot.useRef)(null);(0,ot.useEffect)(()=>{el({tokenContractAddress:e,chainId:t})&&a&&wo({chainId:t,tokenContractAddress:e,setLatestInfo:r})},[e,t,a]);let{isTxPrice:d,tokenContractAddress:u}=o;return(0,ot.useEffect)(()=>{let c;return e&&a&&(l.current={chainId:t,tokenContractAddress:e,isTxPrice:d},c=en({isPri:!1,needLogin:!1,subscribeParams:ni([{chainId:t,tokenContractAddress:e,isTxPrice:d}]),onListenData:(m,k)=>{if(k?.channel===tn.DEX_MARKET_CHANNEL)Lo(m?.[0]);else{if(u!==e)return;let g=m?.find?.(f=>Gn(f.chainId)===Gn(t)&&f.tokenContractAddress===e);Lo(g)}},onListenError:()=>{n?.(),wo({chainId:t,tokenContractAddress:e,setLatestInfo:r})},onListenReconnected:()=>{n?.(),wo({chainId:t,tokenContractAddress:e,setLatestInfo:r})}})),()=>{!l.current||no(l.current)!==no({chainId:t,tokenContractAddress:e})||c?.()}},[t,e,d,a,u,n]),{latestInfo:o}};s();i();var An=h(w());var tl=()=>{let{currentToken:t}=v,{userUniqueId:e,computedAccountId:n}=R,o=(0,An.useCallback)(async()=>{if(!t)return;let a=(await V.updateTokenList({params:{chainId:t.chainId,userUniqueId:e,accountId:n,tokenContractAddress:t.tokenContractAddress},currentToken:t,needLoading:!0}))[0];a&&(v.setBuyWithToken(a),v.setSellForToken(a)),V.updateBuyModeConfigListByToken(a),V.updateSellModeConfigListByToken(t)},[n,t,e]);(0,An.useEffect)(()=>{o()},[t?.tokenContractAddress])},ri=tl;s();i();var Me={"token-info-container":"_token-info-container_crlsd_1",tokenInfoContainer:"_token-info-container_crlsd_1","close-btn":"_close-btn_crlsd_9",closeBtn:"_close-btn_crlsd_9","token-info":"_token-info_crlsd_1",tokenInfo:"_token-info_crlsd_1",left:"_left_crlsd_27",right:"_right_crlsd_31","token-logo":"_token-logo_crlsd_35",tokenLogo:"_token-logo_crlsd_35","token-contract-address":"_token-contract-address_crlsd_39",tokenContractAddress:"_token-contract-address_crlsd_39","copy-icon":"_copy-icon_crlsd_43",copyIcon:"_copy-icon_crlsd_43","copy-group":"_copy-group_crlsd_47",copyGroup:"_copy-group_crlsd_47","top-token":"_top-token_crlsd_59",topToken:"_top-token_crlsd_59","top-right-title":"_top-right-title_crlsd_65",topRightTitle:"_top-right-title_crlsd_65","top-right-logo":"_top-right-logo_crlsd_70",topRightLogo:"_top-right-logo_crlsd_70","config-list":"_config-list_crlsd_73",configList:"_config-list_crlsd_73"};var nl=({onDiscardToken:t})=>{let e="501",{selectedToken:n}=O,{computedMarketLatestInfo:o}=bn;return oi({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress,onSocketError:()=>{}}),ri(),bs({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress}),Ys({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress}),ge.default.createElement("div",{className:Me.tokenInfoContainer},ge.default.createElement("div",{className:Me.tokenInfo},ge.default.createElement("div",{className:Me.left},ge.default.createElement(we,{src:n?.tokenInfo.tokenLogoUrl,width:16,height:16,className:Me.tokenLogo}),ge.default.createElement("span",{className:Me.tokenSymbol},n?.tokenInfo.tokenSymbol),ge.default.createElement(Re,{title:n?.tokenInfo.tokenContractAddress,width:200},ge.default.createElement(si.CopyToClipboard,{text:n?.tokenInfo.tokenContractAddress,onCopy:()=>{J.success(C("swaptrade_common_address_copied_toast"))}},ge.default.createElement("span",{className:Me.copyGroup},ge.default.createElement("span",{className:Me.tokenContractAddress},mt(n?.tokenInfo.tokenContractAddress,6,4)),ge.default.createElement(N,{className:Me.copyIcon,fontSize:"16px",iconName:"okx-defi-dex-copy1",a11yText:"Copy"}))))),n?.tokenInfo.marketCap&&ge.default.createElement("div",{className:Me.right},o?.formattedMarketCap)),ge.default.createElement("div",{className:Me.closeBtn},ge.default.createElement(N,{fontSize:"16px",iconName:"okds-clear-fill",onClick:t,a11yText:"Clear"})))},ii=B(nl);s();i();var xn={container:"_container_3pqe1_1",input:"_input_3pqe1_4","input-inner":"_input-inner_3pqe1_4",inputInner:"_input-inner_3pqe1_4"};var ol=({validationState:t,contractAddress:e,onClearAddress:n,onFocus:o,onBlur:r})=>{let{selectedToken:a}=O;if(t==="valid"&&!!a)return gt.default.createElement(ii,{onDiscardToken:n});let l=t==="validating",d=t==="invalid",u=()=>l?gt.default.createElement(et.Circle,{size:et.SIZE.sm}):null,c=()=>e&&!l?gt.default.createElement(N,{fontSize:"16px",iconName:"okds-clear-fill",onClick:n,style:{cursor:"pointer"},a11yText:"Clear"}):null,m=()=>l?"":C("swaptrade_function_input_placeholder_paste_ca"),k=()=>l?"":e;return gt.default.createElement("div",{className:xn.container},gt.default.createElement(je,{onFocus:o,onBlur:r,prefix:u(),value:k(),suffix:c(),size:je.SIZE.sm,placeholder:m(),forceError:d,className:xn.input,innerClassName:xn.inputInner,readOnly:!0}))},ai=B(ol);s();i();var No=h(w());s();i();var Wt=h(w());s();i();var He=h(w());var ki=h(X());s();i();var W=h(w()),wn=h(X());s();i();var Ft=h(w()),Ro=h(X());s();i();var _t=h(w()),Mo=h(X());s();i();var D={"quick-select":"_quick-select_w7pnn_1",quickSelect:"_quick-select_w7pnn_1","edit-btn":"_edit-btn_w7pnn_6",editBtn:"_edit-btn_w7pnn_6",selected:"_selected_w7pnn_13","base-input":"_base-input_w7pnn_16",baseInput:"_base-input_w7pnn_16","base-input-inner":"_base-input-inner_w7pnn_16",baseInputInner:"_base-input-inner_w7pnn_16","base-input-input":"_base-input-input_w7pnn_21",baseInputInput:"_base-input-input_w7pnn_21","edit-input":"_edit-input_w7pnn_26",editInput:"_edit-input_w7pnn_26","edit-input-inner":"_edit-input-inner_w7pnn_29",editInputInner:"_edit-input-inner_w7pnn_29","instant-trade-edit-input":"_instant-trade-edit-input_w7pnn_32",instantTradeEditInput:"_instant-trade-edit-input_w7pnn_32","instant-trade-edit-input-inner":"_instant-trade-edit-input-inner_w7pnn_35",instantTradeEditInputInner:"_instant-trade-edit-input-inner_w7pnn_35","options-wrapper":"_options-wrapper_w7pnn_38",optionsWrapper:"_options-wrapper_w7pnn_38","shortcut-column-gap":"_shortcut-column-gap_w7pnn_43",shortcutColumnGap:"_shortcut-column-gap_w7pnn_43","quick-select-btn":"_quick-select-btn_w7pnn_46",quickSelectBtn:"_quick-select-btn_w7pnn_46","quick-select-btn-content":"_quick-select-btn-content_w7pnn_55",quickSelectBtnContent:"_quick-select-btn-content_w7pnn_55","error-tips":"_error-tips_w7pnn_58",errorTips:"_error-tips_w7pnn_58","shortcut-key":"_shortcut-key_w7pnn_64",shortcutKey:"_shortcut-key_w7pnn_64","instant-trade-button":"_instant-trade-button_w7pnn_83",instantTradeButton:"_instant-trade-button_w7pnn_83","instant-trade-button-content":"_instant-trade-button-content_w7pnn_109",instantTradeButtonContent:"_instant-trade-button-content_w7pnn_109","instant-trade-button-buy":"_instant-trade-button-buy_w7pnn_123",instantTradeButtonBuy:"_instant-trade-button-buy_w7pnn_123","instant-trade-button-sell":"_instant-trade-button-sell_w7pnn_130",instantTradeButtonSell:"_instant-trade-button-sell_w7pnn_130","all-radius":"_all-radius_w7pnn_137",allRadius:"_all-radius_w7pnn_137","left-radius":"_left-radius_w7pnn_140",leftRadius:"_left-radius_w7pnn_140",disabled:"_disabled_w7pnn_143"};s();i();var rl=({label:t,onClick:e,disabled:n,leftRadius:o,className:r,loading:a,instantTradeStyle:l})=>{let d=()=>{n||a||e()};return _t.default.createElement("div",{className:(0,Mo.default)(D.instantTradeButton,r,{[D.instantTradeButtonBuy]:l===1,[D.instantTradeButtonSell]:l===2,[D.leftRadius]:o,[D.allRadius]:!o,[D.disabled]:n}),onClick:d},_t.default.createElement("div",{className:(0,Mo.default)(D.instantTradeButtonContent,"ellipsis")},a?_t.default.createElement(et.Circle,{type:et.TYPE.neutral,size:et.SIZE.sm,className:"flex"}):t))},li=(0,_t.memo)(rl);var sl=({label:t,onClick:e,isSelected:n,disabled:o,leftRadius:r,className:a,loading:l,instantTradeStyle:d})=>d!==0?Ft.default.createElement(li,{label:t,onClick:e,disabled:o,leftRadius:r,className:a,loading:l,instantTradeStyle:d}):Ft.default.createElement(me,{onClick:e,category:me.CATEGORY.fill,type:me.TYPE.gray,size:me.SIZE.xxs,rect:!0,className:(0,Ro.default)(D.quickSelectBtn,a,{[D.selected]:n,[D.leftRadius]:r}),contentClassName:(0,Ro.default)(D.quickSelectBtnContent,"ellipsis"),disabled:o,loading:l},t),di=(0,Ft.memo)(sl);s();i();var Ne=h(w()),Po=h(X());var il=({isEditMode:t,toggleEditMode:e,disabled:n})=>{let o=(0,Ne.useRef)(null);return Ne.default.createElement(Ne.default.Fragment,null,Ne.default.createElement(Re,{placement:Re.DIRECTION.topRight,title:C("swaptrade_multichain_tooltips_customize"),disabled:t},Ne.default.createElement(me,{onClick:e,category:me.CATEGORY.fill,type:me.TYPE.gray,size:me.SIZE.xxs,className:(0,Po.default)(D.editBtn,{[D.selected]:t}),rect:!0,disabled:t&&n||n,ref:o},Ne.default.createElement(N,{className:(0,Po.default)(D.editIcon,t?"okx-defi-dex-check":"okx-defi-marketplace-edit")}))))},ui=(0,Ne.memo)(il);s();i();var vn=h(w());var En=h(X());var al=({value:t,onChange:e,symbol:n,min:o,max:r,precision:a,disabled:l,onRef:d,instantTradeStyle:u})=>{let c=u!==0;return vn.default.createElement(je.Number,{value:t,className:(0,En.default)(D.baseInput,{[D.instantTradeEditInput]:c,[D.editInput]:!c}),innerClassName:(0,En.default)(D.baseInputInner,{[D.instantTradeEditInputInner]:c,[D.editInputInner]:!c}),inputClassName:(0,En.default)(D.baseInputInput,{[D.instantTradeEditInputInput]:c,[D.editInputInput]:!c}),autoHeight:!0,onChange:e,symbol:n,min:o,max:r,precision:a,onChangeTriggerValidate:!0,error:!Qt(t),disabled:l,onRef:m=>{d&&d(m)}})},ci=(0,vn.memo)(al);var ll=({options:t,updateInnerOption:e,disabled:n,useFocusFirstInput:o=!0,instantTradeStyle:r=0})=>{let[a,l]=(0,W.useState)(null);return(0,W.useEffect)(()=>{a&&o&&a.focus()},[a,o]),t.map(({label:d,value:u,symbol:c,min:m,max:k,precision:g},f)=>{let p=`quick-click-edit-input-${d}-${f}`;return W.default.createElement(ci,{value:u,onChange:I=>{e(f,I)},key:p,symbol:c,min:m,max:k,precision:g,disabled:n,onRef:f===0&&l,instantTradeStyle:r})})},dl=({options:t,selectedIndex:e,disabled:n,onMonitorClick:o,shortcutKeys:r,isShortcutActive:a,spacePressed:l,loadingUniqueIds:d,instantTradeStyle:u=0})=>t.map((c,m)=>{let{label:k,onClick:g}=c,f=a&&l,p=f&&r[m]?.key||"";return W.default.createElement("div",{className:(0,wn.default)("flex items-center",D.quickSelectBtnContent),key:`quick-click-btn-${k}-${m}`},W.default.createElement(di,{label:k,onClick:()=>{if(g?.(c),o){let I="qty_low";c.key==="meme_select2"?I="qty_mid":c.key==="meme_select3"&&(I="qty_high"),o(I,"quick_button")}},isSelected:e===m,disabled:n,"data-shortcut-key":r?.[m]?.key,leftRadius:f,instantTradeStyle:u,loading:d&&d.includes(c.buttonUniqueId)}),p?W.default.createElement("div",{className:D.shortcutKey},p):null)}),ul=(0,W.forwardRef)(({options:t,selectedIndex:e,handleUpdateQuickSelectOptions:n,onOptionsChange:o,disabled:r,onMonitorClick:a=()=>{},isControlledEditMode:l=!1,hideEditBtn:d=!1,shortcutKeys:u,isShortcutActive:c,spacePressed:m,className:k,useFocusFirstInput:g=!0,customRenderError:f=!1,loadingUniqueIds:p,instantTradeStyle:I=0},y)=>{let[A,E]=(0,W.useState)(t),x=(0,W.useCallback)((z,ue)=>{E(Ee=>{let pe=[...Ee];if(pe[z]={...pe[z],value:ue},o){let Ke=pe.map(Xe=>Xe.value);o(Ke)}return pe})},[o]),F=(0,W.useMemo)(()=>A?.length?A.some(z=>Number(z.value)===0):!1,[A]),[Y,ee]=(0,W.useState)(!1),se=(0,W.useCallback)(()=>{a?.("qty_edit","quick_button"),ee(z=>{let ue=!z;if(ue)E(t);else{let Ee=A.map(({value:pe})=>pe);n?.(Ee)}return ue})},[n,A,t,a]),$=Y||l;return(0,W.useEffect)(()=>{if($||!Array.isArray(t)||!Array.isArray(A))return;let z=A.map(({value:Ee})=>Number(Ee)).join(","),ue=t.map(({value:Ee})=>Number(Ee)).join(",");z!==ue&&E(t)},[A,t,$]),(0,W.useImperativeHandle)(y,()=>({onChange:()=>[...A.map(({value:ue})=>ue)]}),[A]),t?.length?W.default.createElement(W.default.Fragment,null,W.default.createElement("div",{className:(0,wn.default)(D.quickSelect,k)},W.default.createElement("div",{className:(0,wn.default)(D.optionsWrapper,"options-wrapper",{[D.shortcutColumnGap]:m&&c})},$?W.default.createElement(ll,{disabled:r,options:A,updateInnerOption:x,useFocusFirstInput:g,instantTradeStyle:I}):W.default.createElement(dl,{disabled:r,options:t,selectedIndex:e,onMonitorClick:a,shortcutKeys:u,isShortcutActive:c,spacePressed:m,loadingUniqueIds:p,instantTradeStyle:I})),!!n&&!d&&W.default.createElement(ui,{isEditMode:Y,toggleEditMode:se,disabled:F||r})),$&&F&&!f&&W.default.createElement("div",{className:D.errorTips},C("swaptrade_meme_input_error_no_zero"))):null}),Ln=(0,W.memo)(ul);s();i();var Mn=h(w());ce();var mi=t=>{let{buyButtonList:e,buyWithToken:n,selectedToken:o}=O,r=o?.tokenInfo||O.defaultToken?.tokenInfo,a=K(n,"decimals",0),l=(0,Mn.useCallback)(d=>{qe({btnIndex:d.index,fromTokenSymbol:n?.tokenSymbol,toTokenSymbol:r?.tokenSymbol,isHotkey:!1,isBuy:!0}),t({amount:d.value,fromToken:n,toToken:r,buttonUniqueId:d.buttonUniqueId})},[t,n,r]);return(0,Mn.useMemo)(()=>e?.length?e.map((d,u)=>({label:fe(d.amount,{sigFigs:a||0}),value:d.amount,precision:a,type:"select",index:u,key:`buy_select_${u+1}`,onClick:l,buttonUniqueId:d.buttonUniqueId})):null,[a,e,l])};s();i();var he=h(w()),Rn=h(X());s();i();var Ve={"keep-ltr":"_keep-ltr_1kmeq_1",keepLtr:"_keep-ltr_1kmeq_1","keep-rtl":"_keep-rtl_1kmeq_5",keepRtl:"_keep-rtl_1kmeq_5","preset-config-info-wrapper":"_preset-config-info-wrapper_1kmeq_9",presetConfigInfoWrapper:"_preset-config-info-wrapper_1kmeq_9","preset-config-info":"_preset-config-info_1kmeq_9",presetConfigInfo:"_preset-config-info_1kmeq_9","preset-icon":"_preset-icon_1kmeq_21",presetIcon:"_preset-icon_1kmeq_21",divide:"_divide_1kmeq_26","go-icon":"_go-icon_1kmeq_32",goIcon:"_go-icon_1kmeq_32"};s();i();var fi=h(w());ce();var pi=t=>{let e=Ar(t),n=te.mul(e,100);return Number.isNaN(n)?e:Ht.percent(n)},gi=()=>{let{computedSelectPreset:t}=L;return(0,fi.useMemo)(()=>{let n=t?.buyPreset||{},o=t?.sellPreset||{};return{isNodata:lt(t),buySlippage:pi(n.slippageConfig),sellSlippage:pi(o.slippageConfig),buyFee:Jn(n.feeConfig),sellFee:Jn(o.feeConfig),buyMev:eo(n.routeConfig),sellMev:eo(o.routeConfig)}},[t])};var cl=({tradeMode:t})=>{let{isNodata:e,buySlippage:n,sellSlippage:o,buyFee:r,sellFee:a,buyMev:l,sellMev:d}=gi(),u=t==="buy"?n:o,c=t==="buy"?r:a,m=t==="buy"?l:d,k=(0,he.useMemo)(()=>{let g=Number(c);return Number.isNaN(g)?c:fe(c,{useScientificNotation:!0})},[c]);return he.default.createElement("div",{className:(0,Rn.default)("flex justify-start",Ve.presetConfigInfoWrapper)},e?null:he.default.createElement("div",{className:(0,Rn.default)("flex items-center",Ve.presetConfigInfo),onClick:()=>{V.deactivateEditMode(),V.openPresetModal(),V.setSelectTradeMode(t),Ce("settings_enter")},role:"presentation",onKeyDown:()=>{}},he.default.createElement(N,{className:Ve.presetIcon,iconName:"okx-defi-dex-slippage"}),he.default.createElement("span",{className:"font-12 ml-4 font-500"},u),he.default.createElement("span",{className:Ve.divide}),he.default.createElement(N,{className:Ve.presetIcon,iconName:"okx-defi-dex-fee"}),he.default.createElement("span",{className:"font-12 ml-4 font-500"},k),he.default.createElement("span",{className:Ve.divide}),he.default.createElement(Kr,{...m,greenClassName:Ve.greenLight}),he.default.createElement(N,{className:(0,Rn.default)("okx-defi-marketplace-chevron-right",Ve.goIcon)})))},Pn=B(cl);s();i();var Tt={"top-token":"_top-token_1etbn_1",topToken:"_top-token_1etbn_1","top-right-title":"_top-right-title_1etbn_7",topRightTitle:"_top-right-title_1etbn_7","top-right-logo":"_top-right-logo_1etbn_12",topRightLogo:"_top-right-logo_1etbn_12","config-list":"_config-list_1etbn_15",configList:"_config-list_1etbn_15",hight28:"_hight28_1etbn_18","btn-group":"_btn-group_1etbn_21",btnGroup:"_btn-group_1etbn_21"};s();i();var kt=h(w()),Ti=h(X());s();i();var U=h(w());var Oe=h(X());s();i();var Q={"select-token":"_select-token_1otj7_1",selectToken:"_select-token_1otj7_1","select-token--disabled":"_select-token--disabled_1otj7_4",selectTokenDisabled:"_select-token--disabled_1otj7_4","display-area":"_display-area_1otj7_7",displayArea:"_display-area_1otj7_7","prefix-text":"_prefix-text_1otj7_11",prefixText:"_prefix-text_1otj7_11","token-symbol":"_token-symbol_1otj7_15",tokenSymbol:"_token-symbol_1otj7_15","suffix-icon":"_suffix-icon_1otj7_19",suffixIcon:"_suffix-icon_1otj7_19",active:"_active_1otj7_24","suffix-icon--disabled":"_suffix-icon--disabled_1otj7_27",suffixIconDisabled:"_suffix-icon--disabled_1otj7_27","value-box":"_value-box_1otj7_30",valueBox:"_value-box_1otj7_30",footer:"_footer_1otj7_34","link-to-swap":"_link-to-swap_1otj7_44",linkToSwap:"_link-to-swap_1otj7_44","option-cont":"_option-cont_1otj7_49",optionCont:"_option-cont_1otj7_49",option:"_option_1otj7_49","option-right":"_option-right_1otj7_56",optionRight:"_option-right_1otj7_56","option-title":"_option-title_1otj7_59",optionTitle:"_option-title_1otj7_59","option-sub-title":"_option-sub-title_1otj7_65",optionSubTitle:"_option-sub-title_1otj7_65","option-left-icon":"_option-left-icon_1otj7_71",optionLeftIcon:"_option-left-icon_1otj7_71"};var ml=(t,{option:e})=>U.default.createElement("div",{className:(0,Oe.default)("flex justify-between items-center",Q.option)},U.default.createElement("div",{className:(0,Oe.default)("flex items-center",Q.optionLeft)},U.default.createElement(we,{src:e?.tokenLogoUrl,width:28,height:28,className:Q.optionLeftIcon}),U.default.createElement("div",{className:(0,Oe.default)("flex flex-col",Q.optionLeftText)},U.default.createElement("span",{className:Q.optionTitle},e?.tokenSymbol),U.default.createElement("span",{className:Q.optionSubTitle},e?.tokenName))),t?U.default.createElement("div",{className:(0,Oe.default)("flex flex-col",Q.optionRight)},U.default.createElement("span",{className:Q.optionTitle},e?.formattedBalance),U.default.createElement("span",{className:Q.optionSubTitle},e?.formattedCurrencyAmount)):null),pl=({token:t,className:e,tradeMode:n,isDragging:o,disabled:r})=>{let a=(0,U.useRef)(null),{selectedToken:l,defaultToken:d,buyWithToken:u,sellForToken:c,tokenSelectionList:m}=O,k=l?.tokenInfo||d?.tokenInfo,g=(0,U.useMemo)(()=>n==="buy"?C("swaptrade_instant_buy_with"):C("swaptrade_instant_sell_for"),[n]),f=b.tokenSelectorHideCount;(0,U.useEffect)(()=>{a.current?.setVisible(!1)},[n,f]);let p=(0,U.useCallback)(x=>{let F=n==="buy",Y=x?n:null;nr(async()=>{b.setTokenSelectorState(Y),x&&await O.updateTokenSelectionList()}),Ce(F?"token_from":"token_to")},[n]),I=(0,U.useCallback)(x=>{let F=n==="buy";Ce("token_select"),ds({chainId:Number(x.chainId),tokenAddress:x.tokenContractAddress,storageKey:F?"extensionMarketBuy":"extensionMarketSell"});let Y=ts(x,m);F?O.setBuyTokenIndex(Y):O.setSellTokenIndex(Y)},[n,m]),y=(0,U.useMemo)(()=>({suffixIconComp:x})=>U.default.createElement("div",{className:(0,Oe.default)(Q.displayArea,"flex items-center font-12")},U.default.createElement("span",{className:Q.prefixText},g),U.default.createElement("span",{className:(0,Oe.default)("font-500",Q.tokenSymbol)},t?.tokenSymbol),x),[t?.tokenSymbol,g]),A=(0,U.useCallback)(()=>{n==="buy"?fo(u,k):fo(k,c)},[k,u,c,n]),E=(0,U.useCallback)(x=>ml(R.computedInitWalletAtExtension,x),[]);return(0,U.useEffect)(()=>{o&&a.current?.setVisible(!1)},[o]),U.default.createElement(dt,{className:(0,Oe.default)(e,Q.selectToken,`instant-trade-token-selector-${n}`,r&&Q["select-token--disabled"]),popupProps:{popupStyle:{width:308},graspBaseDom:!1,alwaysUpdatePopper:!0},ref:a,options:m,displayArea:y,value:t?.tokenContractAddress,align:dt.DIRECTION.left,scrollStyle:{maxHeight:208},valueBoxClassName:Q.valueBox,optionFooter:U.default.createElement("div",{className:Q.footer},U.default.createElement("span",null,De("swaptrade_placeorder_segmentedctl_pay_with_other_tokens",{Advanced:U.default.createElement(ve,{onClick:A,className:Q.linkToSwap},C("swaptrade_placeorder_segmentedctl_advanced"))}))),suffixIcon:x=>U.default.createElement(N,{iconName:"okx-defi-dex-market-sort-down",className:(0,Oe.default)(Q.suffixIcon,{[Q.active]:x,[Q["suffix-icon--disabled"]]:r})}),optionContClassName:(0,Oe.default)(Q.optionCont,`instant-trade-token-selector-option-cont-${n}`),renderOption:E,onToggleShow:p,onChange:I,disabled:r})},_i=B(pl);s();i();var Nn={"top-token":"_top-token_10xx9_1",topToken:"_top-token_10xx9_1","top-right-title":"_top-right-title_10xx9_7",topRightTitle:"_top-right-title_10xx9_7","top-right-logo":"_top-right-logo_10xx9_12",topRightLogo:"_top-right-logo_10xx9_12","config-list":"_config-list_10xx9_15",configList:"_config-list_10xx9_15"};var fl=({token:t,tradeMode:e,className:n,isDragging:o})=>{let{buyWithToken:r,sellForToken:a}=O,l=e==="buy"?r:a;return kt.default.createElement("div",{className:(0,Ti.default)("flex justify-between items-center",Nn.topToken,n)}," ",kt.default.createElement(_i,{token:l,tradeMode:e,isDragging:o,disabled:!l})," ",!!t&&kt.default.createElement("div",{className:"flex items-center"}," ",kt.default.createElement("span",{className:Nn.topRightTitle}," ",t?.formattedBalance)," ",kt.default.createElement(we,{src:t?.tokenLogoUrl,width:16,height:16,className:Nn.topRightLogo})," "))},On=B(fl);var gl=({disabledBuyOptions:t,className:e,shortcutKeys:n,updateSAStatus:o,isDragging:r})=>{let{isEditModeActive:a,isShortcutActive:l,spacePressed:d}=b,u=tt("buy",o),c=mi(u),m=(0,He.useCallback)(p=>{b.setTempBuyModeConfigList(p)},[]),k=!Array.isArray(c)||c.length===0,g=b.getLoadingButtonIds(),f=O.buyWithToken;return He.default.createElement("div",{className:e},He.default.createElement(On,{token:f,tradeMode:"buy",isDragging:r}),He.default.createElement("div",{className:(0,ki.default)("flex justify-between",Tt.hight28)},He.default.createElement(rn,{height:28,loading:k},He.default.createElement(Ln,{disabled:t,options:c,hideEditBtn:!0,isControlledEditMode:a,shortcutKeys:n,isShortcutActive:l,spacePressed:d,className:Tt.btnGroup,instantTradeStyle:1,loadingUniqueIds:g,useFocusFirstInput:!0,customRenderError:!0,onOptionsChange:m}))),He.default.createElement(Pn,{tradeMode:"buy"}))},Ii=B(gl);s();i();var Ge=h(w());var Si=h(X());s();i();var Dn=h(w());var hi=t=>{let{sellButtonList:e,sellForToken:n,selectedToken:o}=O,r=(0,Dn.useCallback)(a=>{qe({btnIndex:a.index,toTokenSymbol:n?.tokenSymbol,fromTokenSymbol:o?.tokenInfo?.tokenSymbol,isHotkey:!1,isBuy:!1});let l=te.div(a.value,100),d=te.floorMul(l,o?.tokenInfo?.amountNum,o?.tokenInfo?.decimals);t({amount:d,fromToken:o?.tokenInfo,toToken:n,buttonUniqueId:a.buttonUniqueId})},[t,o,n]);return(0,Dn.useMemo)(()=>!Array.isArray(e)||e?.length===0?null:e.map((a,l)=>{let d=te.mul(a.percent,100);return{label:Ht.percent(d),value:d,type:"select",index:l,key:`sell_select_${l+1}`,symbol:"%",min:0,max:100,precision:0,onClick:r,buttonUniqueId:a.buttonUniqueId}}),[e,r])};var _l=({disabledSellOptions:t,className:e,shortcutKeys:n,updateSAStatus:o,isDragging:r})=>{let{isEditModeActive:a,isShortcutActive:l,spacePressed:d}=b,{selectedToken:u}=O,c=tt("sell",o),m=hi(c),k=(0,Ge.useCallback)(p=>{let I=p.map(y=>Qt(y)?te.floorDiv(y,100,2):y);b.setTempSellModeConfigList(I)},[]),g=!Array.isArray(m)||m.length===0,f=b.getLoadingButtonIds();return Ge.default.createElement("div",{className:e},Ge.default.createElement(On,{token:u?.tokenInfo,tradeMode:"sell",isDragging:r}),Ge.default.createElement("div",{className:(0,Si.default)("flex justify-between",Tt.hight28)},Ge.default.createElement(rn,{height:28,loading:g},Ge.default.createElement(Ln,{options:m,hideEditBtn:!0,disabled:t,isControlledEditMode:a,shortcutKeys:n,isShortcutActive:l,spacePressed:d,className:Tt.btnGroup,instantTradeStyle:2,useFocusFirstInput:!1,loadingUniqueIds:f,customRenderError:!0,onOptionsChange:k}))),Ge.default.createElement(Pn,{tradeMode:"sell"}))},yi=B(_l);var Tl=({updateSAStatus:t})=>{let{isEditModeActive:e}=b,{buyWithToken:n,sellForToken:o,selectedToken:r}=O,a=!!r;return Wt.default.createElement(Wt.default.Fragment,null,Wt.default.createElement(Ii,{disabledBuyOptions:!(a&&!!n||e),shortcutKeys:wt,updateSAStatus:t}),Wt.default.createElement(yi,{disabledSellOptions:!(a&&!!o||e),shortcutKeys:Lt,updateSAStatus:t}))},Ci=Tl;s();i();var bi={container:"_container_14vg4_1"};var kl=({updateSAStatus:t})=>No.default.createElement("div",{className:bi.container},No.default.createElement(Ci,{updateSAStatus:t})),Ai=kl;s();i();var Ut=h(w()),Wi=h(X());s();i();var Fn=h(w());s();i();var vi=h(w());s();i();ce();var Il=(t,e,n,o,r,a,l)=>{let d=t?.value,u=t?.price;return t?.type==="fast"?(d=e,u=n):t?.type==="market"?(d=o,u=r):t?.type==="turbo"&&(d=a,u=l),{value:d,price:u}},xi=({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o})=>{if(e||o){let{fastFee:l,fastFeeUsd:d,marketFee:u,marketFeeUsd:c,turboFee:m,turboFeeUsd:k,baseFee:g,baseFeeUsd:f}=n,p={fast:{amount:l,price:d},market:{amount:u,price:c},turbo:{amount:m,price:k}},{value:I,price:y}=Il(t,l,d,u,c,m,k);return Je({},t,{value:I,price:y,config:p,baseFee:g,baseFeeUsd:f,gasPrice:g})}let{baseFee:r,baseFeeUsd:a}=n;return{value:r,price:a,gasPrice:r}},Ei=({priorityFee:t,priorityFeeInfo:e})=>{let{baseFee:n,baseFeeUsd:o,fastFee:r,fastFeeUsd:a,marketFee:l,marketFeeUsd:d,turboFee:u,turboFeeUsd:c}=e,m={fast:{amount:r,price:a},market:{amount:l,price:d},turbo:{amount:u,price:c}},k=t?.value,g=t?.price;return t?.type==="fast"?(k=r,g=a):t?.type==="market"?(k=l,g=d):t?.type==="turbo"&&(k=u,g=c),Je({},t,{value:k,price:g,config:m,baseFee:n,baseFeeUsd:o,gasPrice:n})};var wi=({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o,tradeScene:r})=>({formatPriorityFee:(0,vi.useMemo)(()=>r===0?xi({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o}):Ei({priorityFee:t,priorityFeeInfo:n}),[n,t,e,o,r])});s();i();var M=h(w());ce();s();i();var Oo=h(w());function Li({computedQuoteSafemoon:t}){return{safeMoonToken:(0,Oo.useMemo)(()=>t,[t])}}function Mi({formatPriorityFee:t,nativeTokenPrice:e,isSolana:n,networkFeeDecimals:o,estimateGasFee:r,supportCustomGasFee:a,supportEip1559:l}){return(0,Oo.useMemo)(()=>{if(n){let c=t.baseFee||0,m=t.baseFeeUsd||0,k=t.value||"0";fr(k)&&(k="0"),k=new te.BigNumber(k).toString(10);let g=te.add(k,c),f=te.mul(e||0,g),p=te.mul(e||0,k);return{baseFeeValue:c,baseFeeUsd:m,priorityFeeForShow:k,priorityFeeUSD:p,totalFeeUSD:f}}return{totalFeeUSD:so({formatPriorityFee:t,nativeTokenPrice:e,isSolana:n,networkFeeDecimals:o,estimateGasFee:r,supportCustomGasFee:a,supportEip1559:l})}},[t,e,n,o,r,a,l])}s();i();var Bn=h(w()),Do=h(X());s();i();var rt={"tab-pane":"_tab-pane_2q8hv_1",tabPane:"_tab-pane_2q8hv_1","active-pane":"_active-pane_2q8hv_1",activePane:"_active-pane_2q8hv_1","buy-pane":"_buy-pane_2q8hv_1",buyPane:"_buy-pane_2q8hv_1","sell-pane":"_sell-pane_2q8hv_5",sellPane:"_sell-pane_2q8hv_5",name:"_name_2q8hv_9","name-active":"_name-active_2q8hv_14",nameActive:"_name-active_2q8hv_14"};var hl=({list:t,onTabChange:e,activeTabType:n,className:o,disabled:r})=>Bn.default.createElement(ze.Segmented,{useReactTransition:!0,className:o,activeId:n,onChange:a=>{r||e(a)},buttonNoBorder:!0,hideContent:!0,onlyRightMore:!0,average:!0,noActiveBorder:!0,fullScreenScroll:!0,clickToView:!0,paneSpacing:8,size:ze.SIZE.sm},t.map(a=>Bn.default.createElement(ze.TabPane,{style:{cursor:r&&n!==a.type?"not-allowed":"pointer"},className:(0,Do.default)({[rt.activePane]:n===a.type,[rt.tabPane]:n===a.type,[rt.buyPane]:n==="buy",[rt.sellPane]:n==="sell"}),tab:Bn.default.createElement("span",{className:(0,Do.default)(rt.name,{[rt.nameActive]:n===a.type})},C(a.name)),key:a.type,id:a.type}))),Ri=hl;s();i();var xe=h(w());s();i();var re=h(w()),It=h(X());s();i();var _e={icon:"_icon_1yr0h_1",name:"_name_1yr0h_4","edit-icon":"_edit-icon_1yr0h_8",editIcon:"_edit-icon_1yr0h_8","check-mark-disabled":"_check-mark-disabled_1yr0h_11",checkMarkDisabled:"_check-mark-disabled_1yr0h_11",input:"_input_1yr0h_14","input-box":"_input-box_1yr0h_17",inputBox:"_input-box_1yr0h_17","custom-input":"_custom-input_1yr0h_17",customInput:"_custom-input_1yr0h_17","custom-box":"_custom-box_1yr0h_17",customBox:"_custom-box_1yr0h_17"};var yl=({isActive:t,name:e,type:n,onNameChange:o,supportChangeName:r,isEdit:a,setIsEdit:l})=>{let[d,u]=(0,re.useState)(null),[c,m]=(0,re.useState)(e);(0,re.useEffect)(()=>{d&&d?.focus()},[d]);let k=g=>{let f=g.target?.value?.trim();f.length>12||m(f)};return t&&a&&r?re.default.createElement(je,{inputClassName:_e.input,innerClassName:(0,It.default)(_e.inputBox,_e.customInput,_e.customBox),size:je.SIZE.md,value:c,onChange:k,"aria-label":"Edit_preset_name",onBlur:g=>{let f=g.relatedTarget;f&&f.dataset.type==="suffix-button"||(c.length>0?o(c,n):m(e),l(!1))},onRef:g=>{u(g)},suffix:re.default.createElement(ve,{"data-type":"suffix-button",onClick:()=>{c.length>0&&(o(c,n),l(!1))},className:c.length>0?"cursor-pointer":"cursor-not-allowed"},re.default.createElement(N,{className:(0,It.default)("okds-checkmark",_e.icon,_e.editIcon,{[_e.checkMarkDisabled]:c.length<1})}))}):t&&r?re.default.createElement("div",{className:"flex items-center"},n===2&&re.default.createElement(N,{className:(0,It.default)(" okx-defi-dex-meme-mode",_e.icon)}),re.default.createElement("span",{className:_e.name},c),re.default.createElement(ve,{onClick:()=>{l(!0)},className:_e.editIcon},re.default.createElement(N,{className:(0,It.default)("okds-draw",_e.icon)}))):re.default.createElement("div",{className:"flex items-center"},n===2&&re.default.createElement(N,{className:(0,It.default)(" okx-defi-dex-meme-mode",_e.icon)}),re.default.createElement("span",{className:_e.name},c))},Pi=yl;s();i();var Bo="PRESET_SELECT_GUIDE_STORAGE_KEY";var Cl=({list:t,onTabChange:e,activeTabType:n,className:o,disabled:r,onPresetListChange:a})=>{let[l,d]=(0,xe.useState)(null),[u,c]=(0,xe.useState)({}),m=(p,I)=>{c(y=>({...y,[p]:I}))},k=(p,I)=>{let y=t.map(A=>A.presetType===I?{...A,name:p}:A);a(y)},[g,f]=(0,xe.useState)(!1);return(0,xe.useEffect)(()=>{q.get(Bo)||(f(!0),q.set(Bo,"1"))},[]),xe.default.createElement("div",{className:"flex flex-col"},xe.default.createElement(Yn,{title:C("swaptrade_preset_coachmrk_title_switch_between_presets"),description:C("swaptrade_preset_coachmrk_desc_set_up_different_buy"),placement:Yn.DIRECTION.bottomLeft,show:g,closeable:!0,onClose:()=>{f(!1)},arrowAlignBoundary:()=>({left:"20px",right:"unset",top:"unset",transform:"unset"}),referenceRef:l}),xe.default.createElement(ze.Button,{useReactTransition:!0,className:o,activeId:n,onChange:p=>{r||e(p)},buttonNoBorder:!0,hideContent:!0,hideNav:Object.values(u).some(p=>p),average:!0,paneSpacing:8,size:ze.SIZE.md,getPaneListRef:p=>{d(p)}},t.map(p=>xe.default.createElement(ze.TabPane,{style:{cursor:r&&n!==p.presetType?"not-allowed":"pointer"},tab:xe.default.createElement(Pi,{name:p.name,type:p.presetType,isActive:n===p.presetType,onNameChange:k,supportChangeName:p.supportChangeName,isEdit:u[p.presetType]||!1,setIsEdit:I=>{m(p.presetType,I)}}),key:p.presetType,id:p.presetType}))))},Ni=Cl;s();i();var Qe={root:"_root_uuhsg_1","scroll-content":"_scroll-content_uuhsg_7",scrollContent:"_scroll-content_uuhsg_7",name:"_name_uuhsg_14",priority:"_priority_uuhsg_15",mev:"_mev_uuhsg_18",slippage:"_slippage_uuhsg_19",direction:"_direction_uuhsg_23"};var bl=(t,e,n)=>{let o=(0,M.useMemo)(()=>[t.mode,uo(t.customMax),uo(t.value),t.type,{low:Te(t.config.low),medium:Te(t.config.medium),high:Te(t.config.high)},Te(t.min),Te(t.max),Te(t.fixedRecommendMax),Te(t.fixedRecommendMin),Te(t.dynamicMax),Te(t.dynamicMin),Te(t.recommendMax),Te(t.recommendMin)],[t]),r=(0,M.useMemo)(()=>Te(e),[e]),[a,l,d,u,c,m,k,g,f,p,I,y,A]=o,E=(0,M.useCallback)(x=>br({value:x,min:m,max:k,recommendMin:f,recommendMax:g,level:u,auto:r,safemoon:n}),[m,k,u,r,n,f,g]);return{slippageMode:a,customMax:l,slippage:d,slippageType:u,slippageMapUse:c,minUse:m,maxUse:k,fixedRecommendMaxUse:g,fixedRecommendMinUse:f,dynamicMaxUse:p,dynamicMinUse:I,recommendMaxUse:y,recommendMinUse:A,dynamicSlippageUse:r,validator:E}},Al=(t,e,n)=>{let o=(0,M.useCallback)(()=>{let l={...t.find(u=>u.presetType===e)},d=n==="buy"?"buyPreset":"sellPreset";return{newPreset:l,direction:d}},[t,e,n]),r=(0,M.useCallback)(a=>{let l=t.map(d=>d.presetType===e?a:d);L.update({editPresetsList:l})},[t,e]);return{getEditPresetCopy:o,updateEditPreset:r}},Oi=(t,e)=>{let n=t==="manual",o=e===0,r=e===1;return n&&o?2:n&&r?3:1},xl=(t,e,n,o)=>{let r=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].routeConfig.routerModeType=Oi(g,o),e(f)},[t,e,o]),a=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].routeConfig.routerModeType=Oi(n,g),e(f)},[t,e,n]),l=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.slippageType=g===$t.FIXED?2:1,e(f)},[t,e]),d=(0,M.useCallback)(g=>{let{value:f,level:p}=g;if(p===At.CUSTOM){let{newPreset:y,direction:A}=t();y[A].slippageConfig.slippageRange[3].slippageValue=co(f),e(y)}},[t,e]),u=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.slippageRange.forEach((I,y)=>{f[p].slippageConfig.slippageRange[y].selected=!1}),g===At.LOW?f[p].slippageConfig.slippageRange[0].selected=!0:g===At.MEDIUM?f[p].slippageConfig.slippageRange[1].selected=!0:g===At.HIGH?f[p].slippageConfig.slippageRange[2].selected=!0:f[p].slippageConfig.slippageRange[3].selected=!0,e(f)},[t,e]),c=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.dynamicMaxSlippageValue=co(g),e(f)},[t,e]),m=(0,M.useCallback)(({value:g,type:f})=>{if(f===xt.CUSTOM){let{newPreset:I,direction:y}=t(),A="feeOptions";I[y].feeConfig[A][3].feeValue=g,e(I)}},[t,e]),k=(0,M.useCallback)(g=>{let{newPreset:f,direction:p}=t(),I="feeOptions";f[p].feeConfig[I].forEach((y,A)=>{f[p].feeConfig[I][A].selected=!1}),g===xt.MARKET?f[p].feeConfig[I][0].selected=!0:g===xt.FAST?f[p].feeConfig[I][1].selected=!0:g===xt.TURBO?f[p].feeConfig[I][2].selected=!0:f[p].feeConfig[I][3].selected=!0,e(f)},[t,e]);return{setPriorityMode:r,setManualType:a,setSlippageMode:l,setSlippage:d,setSlippageType:u,setCustomMax:c,setPriorityFee:m,setPriorityFeeType:k}},El=({slippage:t,slippageType:e,slippageMapUse:n,minUse:o,maxUse:r,fixedRecommendMinUse:a,fixedRecommendMaxUse:l,validator:d,dynamicSlippageUse:u,computedAutoSlippage:c,slippageState:m,customMax:k,dynamicMaxUse:g,dynamicMinUse:f,recommendMaxUse:p,recommendMinUse:I,safeMoonToken:y})=>{let A=(0,M.useMemo)(()=>({value:t,level:e,levelMap:n,min:o,max:r,recommendMin:a,recommendMax:l,validator:d,auto:u}),[t,e,n,o,r,a,l,d,u]),E=(0,M.useMemo)(()=>({showDynamicSlippage:Zo(c),dynamicSlippage:u,supportCustomMax:m.supportCustomMax,customMax:k,dynamicMax:g,dynamicMin:f,recommendMax:p,recommendMin:I,safemoon:y}),[c,u,m.supportCustomMax,k,g,f,p,I,y]);return{slippageFixedData:A,slippageDynamicData:E}},vl=({supportAutoMode:t,isEnableMevStatus:e,mevPriorityFeeInfo:n,nonMevPriorityFeeInfo:o,supportMev:r,supportCustomGasFee:a})=>{let l=(0,M.useMemo)(()=>t&&e,[t,e]),d=(0,M.useMemo)(()=>l?n:o,[l,n,o]),u=(0,M.useMemo)(()=>t&&r,[t,r]),c=(0,M.useMemo)(()=>a,[a]);return{computedPriorityFeeInfo:d,computedShowAutoMode:u,computedShowDetailMode:c}},wl=(t,e,n,o,r)=>({isFormDisabled:(0,M.useMemo)(()=>{let l=t==="fixed"&&e,d=t==="dynamic"&&n,u=r===6;return l||d||o||u},[t,e,n,o,r])}),Ll=({presetHandlers:t,setSlippageError:e,setCustomMaxError:n,setPriorityFeeError:o,presetEditType:r,editPresetsList:a,onClose:l})=>{let d=(0,M.useCallback)(({mode:k,fixedData:g,dynamicData:f})=>{t.setSlippageMode(k);let p=k===$t.FIXED,I=k===$t.DYNAMIC;p&&(t.setSlippage(g),t.setSlippageType(g.level),e(g.error)),I&&(t.setCustomMax(f.customMax),n(f.error))},[t,e,n]),u=(0,M.useCallback)((k,g,f)=>{t.setPriorityFee({value:g,type:k}),t.setPriorityFeeType(k),o(f)},[t,o]),c=(0,M.useCallback)(async()=>{await nt.resetPreset(r)&&(e(!1),n(!1),o(!1))},[r,e,n,o]),m=(0,M.useCallback)(async()=>{await nt.savePreset(a)&&l()},[a,l]);return{handleSlippageChange:d,handlePriorityFeeChange:u,handleReset:c,handleConfirm:m}},Ml=()=>{let t=(0,M.useCallback)(o=>{L.update({presetEditType:o})},[]),e=(0,M.useCallback)(o=>{L.update({editTradeMode:o})},[]),n=(0,M.useCallback)(o=>{L.update({editPresetsList:o})},[]);return{onPresetTypeChange:t,onPresetDirectionChange:e,onPresetListChange:n}},Rl=t=>{let e=(0,M.useMemo)(()=>C(t?"swaptrade_modal_dialog_title_priority":"swaptrade_swap_history_subtitle_network_fee"),[t]),n=(0,M.useMemo)(()=>C(t?"swaptrade_modal_dialog_desc_priority_meme":"swaptrade_orders_tooltips_how_paygas"),[t]);return{dialogTitle:e,dialogTooltip:n}},Pl=B(({onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a=y=>y,getUsd:l=y=>y,mevPriorityFeeInfo:d={},nonMevPriorityFeeInfo:u={},nativeTokenPrice:c,computedGetEstimateGasFee:m,renderTipsComponent:k,usePriorityFee:g,disableChangeTradeDirection:f,isAutoSellChecked:p,supportMev:I})=>{let{tradeScene:y,presetsList:A,presetSelectType:E,selectTradeMode:x,editPresetsList:F,presetEditType:Y,editTradeMode:ee,fetchSaveStatus:se,fetchResetStatus:$,computedChainName:z,networkFeeUnit:ue,networkFeeDecimals:Ee,computedEditPriorityMode:pe,computedEditManualType:Ke,mevPriceThreshold:Xe,computedEditSlippageState:Ko,computedEditNoQuotePriorityFeeState:$i,supportAutoMode:Xi,supportCustomGasFee:qn,supportEip1559:jo,memeChainType:zo,computedSupportPriorityFee:Zi}=L;(0,M.useEffect)(()=>(L.update({editPresetsList:or(A),presetEditType:E,editTradeMode:x}),()=>{L.update({editPresetsList:[],presetEditType:2,editTradeMode:"buy"})}),[]);let Yo=io({priorityMode:pe,manualType:Ke,jitoIsSuccess:n,mevUnstableShowLevel:r}),Ji=ao(Yo),{computedPriorityFeeInfo:ea,computedShowAutoMode:ta,computedShowDetailMode:na}=vl({supportAutoMode:Xi,isEnableMevStatus:Ji,mevPriorityFeeInfo:d,nonMevPriorityFeeInfo:u,supportMev:I,supportCustomGasFee:qn}),{formatPriorityFee:Ze}=g({priorityFee:$i,priorityFeeInfo:ea,supportCustomGasFee:qn,supportEip1559:jo,isSolana:zo==="0",tradeScene:0}),{safeMoonToken:Qo}=Li({computedQuoteSafemoon:e}),ie=bl(Ko,o,Qo),{getEditPresetCopy:oa,updateEditPreset:ra}=Al(F,Y,ee),Vn=xl(oa,ra,pe,Ke),{slippageFixedData:sa,slippageDynamicData:ia}=El({slippage:ie.slippage,slippageType:ie.slippageType,slippageMapUse:ie.slippageMapUse,minUse:ie.minUse,maxUse:ie.maxUse,fixedRecommendMinUse:ie.fixedRecommendMinUse,fixedRecommendMaxUse:ie.fixedRecommendMaxUse,validator:ie.validator,dynamicSlippageUse:ie.dynamicSlippageUse,computedAutoSlippage:o,slippageState:Ko,customMax:ie.customMax,dynamicMaxUse:ie.dynamicMaxUse,dynamicMinUse:ie.dynamicMinUse,recommendMaxUse:ie.recommendMaxUse,recommendMinUse:ie.recommendMinUse,safeMoonToken:Qo}),[aa,la]=(0,M.useState)(!1),[da,ua]=(0,M.useState)(!1),[ca,ma]=(0,M.useState)(!1),[$o,pa]=(0,M.useMemo)(()=>[Ze.value,Ze.type],[Ze]),fa=(0,M.useMemo)(()=>pe==="manual"&&Ke===1,[pe,Ke]),{isFormDisabled:Hn}=wl(ie.slippageMode,da,aa,ca,Yo),{handleSlippageChange:ga,handlePriorityFeeChange:_a,handleReset:Ta,handleConfirm:ka}=Ll({presetHandlers:Vn,setSlippageError:ua,setCustomMaxError:la,setPriorityFeeError:ma,presetEditType:Y,editPresetsList:F,onClose:t}),{onPresetTypeChange:Ia,onPresetDirectionChange:ha,onPresetListChange:Sa}=Ml(),{dialogTitle:ya,dialogTooltip:Ca}=Rl(Zi),ba=Mi({formatPriorityFee:Ze,nativeTokenPrice:c,isSolana:zo==="0",networkFeeDecimals:Ee,estimateGasFee:m,supportCustomGasFee:qn,supportEip1559:jo}),Aa=Hn||f,xa=se===ae.LOADING,Ea=$===ae.LOADING,va=(0,M.useMemo)(()=>p&&ee==="sell",[p,ee]);return M.default.createElement("div",{className:Qe.root},M.default.createElement("div",{className:Qe.scrollContent},M.default.createElement(Ni,{list:F,activeTabType:Y,onTabChange:Ia,onPresetListChange:Sa,className:"mt-24",disabled:Hn}),M.default.createElement(Ri,{list:Cr,activeTabType:ee,onTabChange:ha,className:Qe.direction,disabled:Aa}),ta&&M.default.createElement(Xr,{className:Qe.mev,setMode:Vn.setPriorityMode,priorityMode:pe,setManualType:Vn.setManualType,manualType:Ke,mevUnstableShowLevel:r,jitoIsSuccess:n,mevPriceThreshold:Xe,chainName:z,showOffMevTips:fa}),M.default.createElement(Qr,{className:Qe.slippage,mode:ie.slippageMode,fixedData:sa,dynamicData:ia,showDynamicTips:va,onChange:ga}),na?M.default.createElement(lo.DetailMode,{className:Qe.priority,fee:$o,type:pa,feeMap:Ze.config,max:Ze.max,min:Ze.min,noRecommend:!0,currency:ue,onChange:_a,getTokenAmount:a,getUsd:l,tradeScene:y,tipsComponent:k(ba),dialogTitle:ya,dialogTooltip:Ca,hidePrice:!0}):M.default.createElement(lo.NoSupportCustomMode,{networkFee:$o,symbol:ue,className:Qe.priority})),M.default.createElement($r,{confirmDisabled:Hn,handleConfirm:ka,handleReset:Ta,confirmLoading:xa,resetLoading:Ea}))}),Di=Pl;var Nl=B(({onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a,getUsd:l,mevPriorityFeeInfo:d={},nonMevPriorityFeeInfo:u={},nativeTokenPrice:c,disableChangeTradeDirection:m,computedGetEstimateGasFee:k,isAutoSellChecked:g,supportMev:f})=>Fn.default.createElement(Di,{onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a,getUsd:l,mevPriorityFeeInfo:d,nonMevPriorityFeeInfo:u,nativeTokenPrice:c,usePriorityFee:wi,isAutoSellChecked:g,disableChangeTradeDirection:m,computedGetEstimateGasFee:k,supportMev:f,renderTipsComponent:p=>p.totalFeeUSD?p.baseFeeValue?Fn.default.createElement(Yr,{totalFeeUSD:p.totalFeeUSD,baseFeeValue:p.baseFeeValue,baseFeeUsd:p.baseFeeUsd,priorityFeeForShow:p.priorityFeeForShow,priorityFeeUSD:p.priorityFeeUSD}):Fn.default.createElement(zr,{totalFeeUSD:p.totalFeeUSD}):null})),Bi=Nl;s();i();var Fi={"preset-dialog":"_preset-dialog_46n92_1",presetDialog:"_preset-dialog_46n92_1"};var Ol=()=>{let{getTokenAmount:t,getUsd:e}=jr(),n=()=>{V.closePresetModal()};return(0,Ut.useEffect)(()=>{L.update({selectTradeMode:"buy",tradeScene:0})},[]),Ut.default.createElement("div",{className:(0,Wi.default)(Fi.presetDialog)},Ut.default.createElement(Bi,{onClose:n,getTokenAmount:t,getUsd:e,supportMev:R.walletSupportMev}))},Ui=B(Ol);s();i();var it=h(w()),Fo=h(X());s();i();var st={"setting-dialog":"_setting-dialog_l2ds8_1",settingDialog:"_setting-dialog_l2ds8_1","setting-item":"_setting-item_l2ds8_5",settingItem:"_setting-item_l2ds8_5",left:"_left_l2ds8_13",title:"_title_l2ds8_20",description1:"_description1_l2ds8_25","go-icon":"_go-icon_l2ds8_31",goIcon:"_go-icon_l2ds8_31"};var Dl=()=>it.default.createElement("div",{className:(0,Fo.default)(st.settingDialog)},it.default.createElement(ve,{className:st.settingItem,onClick:()=>{S.global.switchInstantTrade?.()}},it.default.createElement("div",{className:st.left},it.default.createElement("p",{className:st.title},C("swaptrade_instant_cell_tag_instant_trade_switch")),it.default.createElement("p",{className:st.description1},C("swaptrade_instant_dialog_desc_set_the_enabling_status"))),it.default.createElement(N,{className:(0,Fo.default)("okx-defi-marketplace-chevron-right",st.goIcon)}))),qi=Dl;s();i();var P=h(w()),at=h(X());s();i();var Wo=h(w());var Vi=()=>{let t=(0,Wo.useCallback)(()=>{V.deactivateEditMode(),b.isShortcutActive?(Ce("hot_key_off"),V.deactivateShortcut()):(Ce("hot_key_on"),V.activateShortcut())},[]),e=(0,Wo.useCallback)(()=>{b.isEditModeActive?b.saveEditModeConfigs():(Ce("qty_edit"),V.activateEditMode())},[]);return{handleShortcutToggle:t,handleEditModeToggle:e}};s();i();var G=h(w()),ht=h(X());s();i();var Hi=h(w());var Gi=()=>{let t=v.ctxIsReady,e=!!R.computedAccountId;return(0,Hi.useMemo)(()=>t&&e,[t,e])};s();i();var de={"preset-selector":"_preset-selector_1rr07_1",presetSelector:"_preset-selector_1rr07_1","extension-logo":"_extension-logo_1rr07_5",extensionLogo:"_extension-logo_1rr07_5","select-preset":"_select-preset_1rr07_11",selectPreset:"_select-preset_1rr07_11","display-area":"_display-area_1rr07_14",displayArea:"_display-area_1rr07_14","display-area-label":"_display-area-label_1rr07_18",displayAreaLabel:"_display-area-label_1rr07_18","value-box":"_value-box_1rr07_27",valueBox:"_value-box_1rr07_27",footer:"_footer_1rr07_31","settings-icon":"_settings-icon_1rr07_41",settingsIcon:"_settings-icon_1rr07_41","option-cont":"_option-cont_1rr07_45",optionCont:"_option-cont_1rr07_45",option:"_option_1rr07_45","option-label":"_option-label_1rr07_55",optionLabel:"_option-label_1rr07_55","check-icon":"_check-icon_1rr07_61",checkIcon:"_check-icon_1rr07_61",active:"_active_1rr07_65"};var Bl=({option:t,isActive:e})=>G.default.createElement("div",{className:(0,ht.default)("flex justify-between items-center",de.option)},G.default.createElement("div",{className:de.optionLabel},t?.label),G.default.createElement(N,{className:(0,ht.default)("okx-defi-dex-check",de.checkIcon,{[de.active]:e})})),Fl=({minimize:t,onMinimize:e,className:n,isDragging:o})=>{let r=(0,G.useRef)(null),a=(0,G.useMemo)(()=>({popupStyle:{width:140},graspBaseDom:!1,alwaysUpdatePopper:!0}),[]),l=(0,G.useCallback)(A=>{V.deactivateEditMode(),A&&(Ce("preset_switch"),t&&e?.(!1))},[t,e]),d=(0,G.useCallback)(()=>{t&&e?.(!1)},[t,e]),u=A=>{nt.setSelectType(A.value)},c=(0,G.useCallback)(()=>{r.current?.setVisible(!1),V.openPresetModal()},[]),m=L.presetsList,k=(0,G.useMemo)(()=>!Array.isArray(m)||m?.length===0?[]:m.map(A=>({label:A.name,value:A.presetType})),[m]),g=L.presetSelectType,f=Gi(),p=(0,G.useMemo)(()=>f?m?.length>0:!1,[m,f]),I=`https://${S.global?.getStaticHostname?.()}/cdn/assets/imgs/254/43DEFFE88CCA0D7C.png`;(0,G.useEffect)(()=>{o&&r.current?.setVisible(!1)},[o]);let y=({selectedOption:A,suffixIconComp:E})=>G.default.createElement("div",{className:(0,ht.default)(de.displayArea)},S.isExtensionEnv&&G.default.createElement(we,{src:I,pictureClassName:de.extensionLogo,width:16,height:16,onClick:d}),G.default.createElement("div",{className:de.displayAreaLabel},A?.label),E);return G.default.createElement("div",{className:de.presetSelector},!p&&S.isExtensionEnv&&G.default.createElement(we,{src:I,pictureClassName:de.extensionLogo,width:16,height:16,onClick:d}),p&&G.default.createElement(dt,{ref:r,className:(0,ht.default)(n,de.selectPreset),popupProps:a,options:k,displayArea:y,value:g,align:dt.DIRECTION.left,scrollStyle:{maxHeight:200},valueBoxClassName:de.valueBox,optionFooter:G.default.createElement("div",{className:de.footer},G.default.createElement(ve,{onClick:c,className:de.footer},G.default.createElement(N,{className:(0,ht.default)("okx-defi-dex-web3-settings",de.settingsIcon)}),G.default.createElement("span",null,C("swaptrade_preset_header_edit_presets")))),optionContClassName:de.optionCont,renderOption:Bl,onChange:u,onToggleShow:l}))},Ki=B(Fl);s();i();var Uo=h(w());var qo=h(X());s();i();var H={"top-bar":"_top-bar_wlkc9_1",topBar:"_top-bar_wlkc9_1","top-bar--setting":"_top-bar--setting_wlkc9_14",topBarSetting:"_top-bar--setting_wlkc9_14","top-bar--preset":"_top-bar--preset_wlkc9_17",topBarPreset:"_top-bar--preset_wlkc9_17","drag-handle":"_drag-handle_wlkc9_21",dragHandle:"_drag-handle_wlkc9_21","drag-icon":"_drag-icon_wlkc9_28",dragIcon:"_drag-icon_wlkc9_28","top-bar-left":"_top-bar-left_wlkc9_35",topBarLeft:"_top-bar-left_wlkc9_35","back-icon":"_back-icon_wlkc9_35",backIcon:"_back-icon_wlkc9_35","top-bar-center":"_top-bar-center_wlkc9_41",topBarCenter:"_top-bar-center_wlkc9_41",title:"_title_wlkc9_45","title-with-logo":"_title-with-logo_wlkc9_52",titleWithLogo:"_title-with-logo_wlkc9_52","top-bar-right":"_top-bar-right_wlkc9_55",topBarRight:"_top-bar-right_wlkc9_55","icon-btn":"_icon-btn_wlkc9_60",iconBtn:"_icon-btn_wlkc9_60",active:"_active_wlkc9_80",disabled:"_disabled_wlkc9_83","active-icon":"_active-icon_wlkc9_87",activeIcon:"_active-icon_wlkc9_87",icon:"_icon_wlkc9_60","close-icon":"_close-icon_wlkc9_99",closeIcon:"_close-icon_wlkc9_99","tooltip-title-text-value":"_tooltip-title-text-value_wlkc9_109",tooltipTitleTextValue:"_tooltip-title-text-value_wlkc9_109"};var Wn=({iconName:t,isActive:e,isSelected:n,className:o,iconClassName:r,handleClick:a,minimize:l,onMinimize:d,a11yText:u,disabled:c})=>Uo.default.createElement(ve,{className:(0,qo.default)(H.iconBtn,o,{[H.active]:e||n,[H.disabled]:c}),disabled:c,onClick:m=>{if(m?.detail!==0){if(l){d?.(!1);return}a?.()}}},Uo.default.createElement(N,{className:(0,qo.default)(H.icon,t,r,{[H.activeIcon]:e}),a11yText:u}));var Wl=(0,P.forwardRef)(({className:t,onClose:e},n)=>{let{handleEditModeToggle:o,handleShortcutToggle:r}=Vi(),a=(0,P.useMemo)(()=>b.isShortcutActive?De("swaptrade_instant_to_use_hotkeys_replace",{btn:P.default.createElement("span",{className:H.tooltipTitleTextValue},C("swaptrade_instant_to_use_hotkeys_variable"))}):C("swaptrade_instant_enable_hotkeys"),[b.isShortcutActive]),l=()=>{if(b.computedDialogState==="setting")return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:H.topBarLeft},P.default.createElement(N,{className:(0,at.default)(H.backIcon,"okds-arrow-chevron-left-centered-sm"),onClick:()=>b.setSettingModalOpen(!1),fontSize:"16px"})),P.default.createElement("div",{className:H.topBarCenter},P.default.createElement("span",{className:H.title},C("swaptrade_instant_dialog_header_simple_title"))),P.default.createElement("div",{className:H.topBarRight,style:{width:"24px"}}));if(b.computedDialogState==="preset"){let{computedChainLogoUrl:d,computedChainSymbol:u}=L;return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:H.topBarLeft},P.default.createElement(N,{className:(0,at.default)(H.backIcon,"okds-arrow-chevron-left-centered-sm"),onClick:()=>{V.closePresetModal()},fontSize:"16px"})),P.default.createElement("div",{className:H.topBarCenter},P.default.createElement("div",{className:"flex justify-center align-items-center"},P.default.createElement(Zr,{src:d,alt:u,size:24}),P.default.createElement("span",{className:(0,at.default)(H.title,H.titleWithLogo)},C("swaptrade_meme_header_edit_preset")))),P.default.createElement("div",{className:H.topBarRight,style:{width:"24px"}}))}return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:H.topBarLeft},P.default.createElement(Ki,null)),P.default.createElement("div",{className:H.topBarRight},P.default.createElement(Re,{title:C("swaptrade_multichain_tooltips_customize"),placement:Re.DIRECTION.bottomRight,disabled:b.isEditModeActive},P.default.createElement(Wn,{iconName:b.isEditModeActive?"okx-defi-dex-check":"okx-defi-marketplace-edit",isSelected:b.isEditModeActive,handleClick:o,a11yText:C("swaptrade_multichain_tooltips_customize")})),P.default.createElement(Re,{title:a,placement:Re.DIRECTION.bottom,maxWidth:100},P.default.createElement(Wn,{isActive:b.isShortcutActive,iconName:"okx-defi-dex-keyboard",handleClick:r,a11yText:b.isShortcutActive?C("swaptrade_instant_to_use_hotkeys"):C("swaptrade_instant_enable_hotkeys")})),P.default.createElement(Wn,{iconName:"okx-defi-dex-web3-settings",handleClick:()=>{V.deactivateEditMode(),V.openSettingModal(),kr()},a11yText:"Settings"}),P.default.createElement(N,{className:(0,at.default)(H.closeIcon,"okx-defi-collapse"),onClick:d=>{d?.detail!==0&&e&&e()},a11yText:"Close"})))};return P.default.createElement("div",{className:(0,at.default)(H.topBar,t,{[H.topBarPreset]:b.computedDialogState==="preset",[H.topBarSetting]:b.computedDialogState==="setting"})},P.default.createElement("div",{className:H.dragHandle,ref:n},P.default.createElement(N,{className:(0,at.default)(H.dragIcon,"okx-defi-dex-drag")})),l())}),ji=B(Wl);s();i();var Un={mask:"_mask_m9z1s_1","dialog-window":"_dialog-window_m9z1s_10",dialogWindow:"_dialog-window_m9z1s_10","no-content-padding":"_no-content-padding_m9z1s_23",noContentPadding:"_no-content-padding_m9z1s_23","loading-overlay":"_loading-overlay_m9z1s_26",loadingOverlay:"_loading-overlay_m9z1s_26",container:"_container_m9z1s_39","pb-16":"_pb-16_m9z1s_47",pb16:"_pb-16_m9z1s_47","pt-24":"_pt-24_m9z1s_50",pt24:"_pt-24_m9z1s_50","service-fee":"_service-fee_m9z1s_53",serviceFee:"_service-fee_m9z1s_53"};var Ul=({className:t,visible:e,onClose:n,updateSAStatus:o,windowClass:r,id:a,isReady:l})=>{let[d,u]=(0,j.useState)(""),[c,m]=(0,j.useState)(!1),[k,g]=(0,j.useState)("initial"),f=(0,j.useCallback)(async x=>{g("validating"),u(x);try{if(!os(x)){J.error({title:Gt("swaptrade_function_input_toast_unsupported_network")}),g("invalid");return}let F=await O.addSelectedToken(x,Rt);!F||!F.tokenInfo.tokenContractAddress?(g("invalid"),J.error({title:Gt("swaptrade_function_input_toast_invalid_ca")})):(g("valid"),await V.updateCurrentTokenInfo({chainId:"501",tokenContractAddress:x}))}catch(F){console.error("validateContractAddress error:",F),g("invalid"),J.error({title:Gt("swaptrade_function_input_toast_invalid_ca")})}},[]);Qs({onPaste:x=>{f(x)},enabled:c&&l}),xs(),Ks(),(0,j.useEffect)(()=>{l&&O.initializeInstantTrade()},[l]),(0,j.useEffect)(()=>{let x=Vt(()=>({isInstantTradeInitialized:O.isInitialized,defaultToken:O.defaultToken,boostOnboardingShown:b.boostOnboardingShown}),({isInstantTradeInitialized:F,defaultToken:Y,boostOnboardingShown:ee})=>{if(!ee){S.global.setContentLoading?.(!1);return}let se=F&&!!Y;S.global.setContentLoading?.(!se)},{fireImmediately:!0});return()=>{x(),S.global.setContentLoading?.(!1)}},[]);let p=(0,j.useCallback)(()=>{let x="https://web3.okx.com/boost";S.global.goto?.(x)},[]);if(!e||!l)return null;let{isBoostInfoShown:I,boostOnboardingShown:y,computedDialogState:A,computedWindowSize:E}=b;return y?j.default.createElement(j.default.Fragment,null,j.default.createElement("div",{className:(0,Vo.default)(Un.dialogWindow,Un.dark,r,t),"data-testid":"okd-dialog-window",role:"dialog","aria-modal":"true",id:a,style:{width:`${E.width}px`,height:`${E.height}px`},draggable:!1},j.default.createElement(ji,{onClose:n}),A==="setting"&&j.default.createElement(qi,null),A==="preset"&&j.default.createElement(Ui,null),A==="main"&&j.default.createElement(j.default.Fragment,null,j.default.createElement("div",{className:(0,Vo.default)(Un.container,t)},j.default.createElement(ai,{onFocus:()=>{m(!0)},onBlur:()=>{m(!1)},validationState:k,contractAddress:d,onClearAddress:()=>{O.removeSelectedToken(),u(""),g("initial")}}),j.default.createElement(Ai,{updateSAStatus:o})),I&&j.default.createElement(Zs,{onClick:p,onClose:()=>b.hideBoostInfo()})))):j.default.createElement(ei,{onClose:n})},zi=B(Ul);var ql=({onClose:t,isReady:e=!1,...n})=>Ho.default.createElement(Dr,{fallbackComponent:()=>null},Ho.default.createElement(zi,{visible:!0,onClose:t,isReady:e,...n})),Yi=ql;s();i();var St=h(w());var Qi=({currency:t,currentWallet:e,walletInfo:n,ontCore:o,globalCtx:r,LocalStore:a,stateInfo:l,isSaAccountNormal:d})=>{let[u,c]=(0,St.useState)(!1);return(0,St.useEffect)(()=>{S.initSentry(r?.dsn,r?.config,r?.version),S.updateEnvConfig({currency:t,currentWallet:e,walletInfo:n,ontCore:o,globalCtx:r,LocalStore:a});let{getApiHostname:m}=S.global;Jr(S.localStore,m?.()).then(()=>{c(!0),v.setCtxIsReady(!0),b.applyWindowResize(!1)}).catch(()=>{c(!0),v.setCtxIsReady(!0),b.applyWindowResize(!1)})},[t,e,n,o,r,a]),(0,St.useEffect)(()=>{R.setDefaultEnabledSilentMethod(l?.defaultEnabledSilentMethod??!1),R.setSilentEnabled(l?.silentEnabled),R.setIsSaAccountNormal(d)},[l?.defaultEnabledSilentMethod,l?.silentEnabled,d]),(0,St.useEffect)(()=>{S.updateEnvConfig({currentWallet:e}),R.setCurrentWallet(e)},[e]),{isInit:u}};var Vl=({localeData:t,walletInfo:e,onBack:n,currency:o,currentWallet:r,ontCore:a,globalCtx:l,LocalStore:d,currentLocale:u,defaultChainId:c,onClose:m,chainId:k,tokenContractAddress:g,isReady:f,...p})=>{let{isInit:I}=Qi({currency:o,currentWallet:r,walletInfo:e,ontCore:a,globalCtx:l,LocalStore:d});return Gs({defaultChainId:c,shouldFetch:!0}),Go.default.createElement(rr,{fetchConfig:gr.fetchConfig,localeData:t,isDev:!0,noRemoteData:!0,key:u},Go.default.createElement(Yi,{onClose:m,isReady:I&&f,...p}))};var Hl=B(Vl);var Gl=$e.default.lazy(()=>import("./Advanced-IMREEI6P.js")),Kl=$e.default.lazy(()=>import("./MemeMode-AQ5ZTS4R.js")),jl=({...t})=>$e.default.createElement(qt.Switch,null,$e.default.createElement(qt.Route,{path:"/dex-swap/meme",render:()=>$e.default.createElement(Kl,{...t})}),$e.default.createElement(qt.Route,{path:"/dex-swap",render:()=>$e.default.createElement(Gl,{...t})}));var qx=B(jl);export{Hl as a};
//# sourceMappingURL=chunk-KNKOADGB.js.map
