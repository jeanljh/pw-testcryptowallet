import{g as Ce}from"./chunk-LVDNG6XA.js";import{a as he}from"./chunk-QKPPTYDW.js";import{a as Te,d as ke}from"./chunk-IN42FW4K.js";import{b as oe,c as te,g as se,j as re,v as ae}from"./chunk-BC5LWHDZ.js";import{f as ee}from"./chunk-JZBABWUI.js";import{b as ne}from"./chunk-UQTI5PPO.js";import{b as Q}from"./chunk-VEPTXEII.js";import{A as pe,B as de,D as ge,d as X,k as ie,m as ce,t as me,v as le,x as fe}from"./chunk-ZOKF3EKQ.js";import{a as J}from"./chunk-WRVJM3F3.js";import{b as ue}from"./chunk-XRCQOGA2.js";import{e as Y}from"./chunk-SWUBCABA.js";import{o as V}from"./chunk-Z62JX42S.js";import{Na as Z,la as q}from"./chunk-2QHGKEME.js";import{_ as z}from"./chunk-WU2LB6XB.js";import{a as H,c as B,m as F,o as I,p as K,s as O,u as $,z as j}from"./chunk-EFOY37CC.js";import{A as b,K as W,o as U}from"./chunk-VZKEX7KP.js";import{q as _}from"./chunk-BJKBO23H.js";import{J as M,va as xe}from"./chunk-XFTQD4B2.js";import{b as w}from"./chunk-73B6GL3S.js";import{f as h,o as u,q as l}from"./chunk-Y5OH3DDZ.js";u();l();var be=h(w()),T=h(Z());u();l();W();function Ge(n,{symbol:e,decimals:t}={}){let s;return n=j($(n,t||18)),n==="0"?s="0":s=U.thousandFormat(n),e&&(s+=` ${e}`),s}function Ze(n){let e=n?.isSupportEip1559?n?.maxFeePerGas||0:n?.gasPrice||0,t=n?.gasLimit||0;return Te(O,K)(e,t)}function Je(n){let e=le(),{symbol:t,usdToThisRate:s}=(0,T.useSelector)(q),a=H(e?.price,s),r=Ge(n,{symbol:e?.symbol,decimals:e?.decimals}),m=ke({amount:n,rate:a,symbol:t},{useApproximate:!0});return`${r} ${m}`}function Qe(){let n=ue(),e=(0,T.useSelector)(te),t=(0,T.useSelector)(se),s=(0,T.useSelector)(re),a=(0,T.useSelector)(oe),{setGasType:r,chainGasLevels:m,currentGasInfo:f,setCustomGasOption:c,chainGasLoading:p,chainGasLoadFailed:k,chainGasPriceLoading:y,chainGasLimitLoading:C,chainGasPriceLoadFailed:G,chainGasLimitLoadFailed:d}=ee({to:e,from:n,value:t,data:s,tokenAddress:a});return{setGasType:r,chainGasLevels:m,currentGasInfo:f,setCustomGasOption:c,chainGasLoading:p,chainGasLoadFailed:k,chainGasPriceLoading:y,chainGasLimitLoading:C,chainGasPriceLoadFailed:G,chainGasLimitLoadFailed:d}}function Xe(){let n=(0,T.useDispatch)(),e=J(),{loadingNonce:t,nonce:s,suggestedNonce:a}=Ce(void 0,e);return(0,be.useEffect)(()=>{n(ae(a))},[a]),{loadingNonce:t,nonce:s,suggestedNonce:a}}u();l();var N=h(w()),x=h(Z()),_e=h(V());var Le={mainTokens:[],chainTokens:[]},Ee=(n,e)=>{let t=(0,N.useRef)(Le),s=(0,x.useDispatch)(),a=(0,x.useSelector)(ne),r=pe(e),m=fe(e),f=ce(),c=n||f,p=()=>{let{chainTokens:k}=t.current;k.forEach(async({rpcUrl:y,chainId:C,account:G,address:d})=>{if(c!==G)return;let E=await m(d,G,d?null:await X(y));s(ie({chainId:C,account:G,address:d,balance:E}))})};(0,N.useEffect)(()=>{t.current=r},[r]),(0,_e.useUpdateEffect)(()=>{a!==0&&p()},[a])},mn=Ee;u();l();var o=h(w()),ye=h(V());W();u();l();var L={customInput:"_customInput_1jr5r_1"};var Se=({isSupportEip1559:n,baseFeePerGas:e,setBaseFeePerGas:t,maxPriorityFeePerGas:s,setMaxPriorityFeePerGas:a,gasLimit:r,setGasLimit:m,gasPrice:f,setGasPrice:c,chainGasLimitLoadFailed:p})=>o.default.createElement(o.default.Fragment,null,n?o.default.createElement(o.default.Fragment,null,o.default.createElement(_.Number,{title:b("extension_wallet_transaction_text_maxbase_fee"),enableMinus:!1,precision:9,value:e,onChange:t,className:L.customInput}),o.default.createElement(_.Number,{title:b("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:s,onChange:a,className:L.customInput})):o.default.createElement(_.Number,{title:b("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:f,onChange:c,className:L.customInput}),o.default.createElement(_.Number,{title:b("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:_.TIP_TYPE.always,error:p&&b("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:r,onChange:m}));function ve({onBack:n,rpcInfo:e={},setGasType:t,visible:s,currentGasInfo:a={},chainGasLevels:r=[],setCustomGasOption:m,chainGasLimitLoadFailed:f=!1}){let c=(0,o.useMemo)(()=>r.find(({typeKey:i})=>i===z.CUSTOM)||{},[r]),{isSupportEip1559:p}=c,[k,y]=(0,o.useState)(c.gasLimit),[C,G]=(0,o.useState)(I(c.gasPrice)),[d,E]=(0,o.useState)(I(c.maxPriorityFeePerGas)),[S,we]=(0,o.useState)(I(c.baseFeePerGas)),g=(0,o.useMemo)(()=>{let i={gasLimit:k};return p?(i.baseFeePerGas=F(S),i.maxPriorityFeePerGas=F(d),i.maxFeePerGas=B(i.baseFeePerGas,i.maxPriorityFeePerGas)):i.gasPrice=F(C),{...c,...i}},[k,C,S,c,p,d]),[v,Fe,Ie]=Q(e.chainId),R=(0,o.useMemo)(()=>{let i=!Number(g.gasPrice);return g.isSupportEip1559&&(i=!Number(g.maxPriorityFeePerGas)),i||!Number(g.gasLimit)},[g]),A=(0,ye.useMemoizedFn)(async i=>{let D={...g};delete D.getLimit,m(g),t(g.typeKey),i?await Fe(D):Ie(e?.chainId)}),Ne=(0,o.useMemo)(()=>({useDefaultGas:!!v,...c,estimatedTime:"",canConfirm:!R,onConfirm:A,chainName:e.name}),[v,e.name,R,c,A]);return o.default.createElement(he,{onBack:n,visible:s,supportDefaultGas:!0,feeDataList:r,feeType:a?.typeKey,onChange:i=>{t(i.typeKey)},custom:{...Ne,components:o.default.createElement(Se,{isSupportEip1559:p,baseFeePerGas:S,setBaseFeePerGas:we,maxPriorityFeePerGas:d,setMaxPriorityFeePerGas:E,gasLimit:k,setGasLimit:y,gasPrice:C,setGasPrice:G,chainGasLimitLoadFailed:f})}})}var Fn=o.default.memo(ve);u();l();var Pe=h(w());xe();var Rn=()=>{let n=de(),e=ge(),{rpcNetworks:t=[]}=Y(),s=me(()=>t,t,(a,r)=>!M(a,r));Pe.default.useEffect(()=>{let a=e?.reduce((r,{walletIdentities:m})=>[...r,...m.map(({account:{mainnet:f}})=>f)],[]);s.forEach(async r=>{a.forEach(m=>{let f=r.chainId;n(f,void 0,{...r,account:m})})})},[e,s])};export{Ge as a,Ze as b,Je as c,Qe as d,Xe as e,mn as f,Fn as g,Rn as h};
//# sourceMappingURL=chunk-VXCH3ZZK.js.map
