import{a as rf}from"./chunk-SEAUBLKM.js";import{a as dr}from"./chunk-Z2AIGJGI.js";import{b as Tn,d as lr}from"./chunk-SLQQVCPY.js";import{c as tf}from"./chunk-ZRVP4J67.js";import{d as gt}from"./chunk-RX4V72AK.js";import{c as M,o as _,p as T,q as b}from"./chunk-Y5OH3DDZ.js";var Qu=M(Xu=>{_();b();Object.defineProperty(Xu,"__esModule",{value:!0})});var An=M(S=>{_();b();Object.defineProperty(S,"__esModule",{value:!0});S.s16=S.s8=S.nu64be=S.u48be=S.u40be=S.u32be=S.u24be=S.u16be=S.nu64=S.u48=S.u40=S.u32=S.u24=S.u16=S.u8=S.offset=S.greedy=S.Constant=S.UTF8=S.CString=S.Blob=S.Boolean=S.BitField=S.BitStructure=S.VariantLayout=S.Union=S.UnionLayoutDiscriminator=S.UnionDiscriminator=S.Structure=S.Sequence=S.DoubleBE=S.Double=S.FloatBE=S.Float=S.NearInt64BE=S.NearInt64=S.NearUInt64BE=S.NearUInt64=S.IntBE=S.Int=S.UIntBE=S.UInt=S.OffsetLayout=S.GreedyCount=S.ExternalLayout=S.bindConstructorLayout=S.nameWithProperty=S.Layout=S.uint8ArrayToBuffer=S.checkUint8Array=void 0;S.constant=S.utf8=S.cstr=S.blob=S.unionLayoutDiscriminator=S.union=S.seq=S.bits=S.struct=S.f64be=S.f64=S.f32be=S.f32=S.ns64be=S.s48be=S.s40be=S.s32be=S.s24be=S.s16be=S.ns64=S.s48=S.s40=S.s32=S.s24=void 0;var js=gt();function In(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}S.checkUint8Array=In;function V(r){return In(r),js.Buffer.from(r.buffer,r.byteOffset,r.length)}S.uint8ArrayToBuffer=V;var G=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};S.Layout=G;function Fs(r,e){return e.property?r+"["+e.property+"]":r}S.nameWithProperty=Fs;function nf(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof G))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}S.bindConstructorLayout=nf;var rt=class extends G{isCount(){throw new Error("ExternalLayout is abstract")}};S.ExternalLayout=rt;var Ri=class extends rt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){In(e);let n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}};S.GreedyCount=Ri;var si=class extends rt{constructor(e,t=0,n){if(!(e instanceof G))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof yt||this.layout instanceof Et}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}};S.OffsetLayout=si;var yt=class extends G{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return V(e).readUIntLE(t,this.span)}encode(e,t,n=0){return V(t).writeUIntLE(e,n,this.span),this.span}};S.UInt=yt;var Et=class extends G{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return V(e).readUIntBE(t,this.span)}encode(e,t,n=0){return V(t).writeUIntBE(e,n,this.span),this.span}};S.UIntBE=Et;var Or=class extends G{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return V(e).readIntLE(t,this.span)}encode(e,t,n=0){return V(t).writeIntLE(e,n,this.span),this.span}};S.Int=Or;var Wr=class extends G{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return V(e).readIntBE(t,this.span)}encode(e,t,n=0){return V(t).writeIntBE(e,n,this.span),this.span}};S.IntBE=Wr;var Rs=Math.pow(2,32);function io(r){let e=Math.floor(r/Rs),t=r-e*Rs;return{hi32:e,lo32:t}}function oo(r,e){return r*Rs+e}var ji=class extends G{constructor(e){super(8,e)}decode(e,t=0){let n=V(e),i=n.readUInt32LE(t),a=n.readUInt32LE(t+4);return oo(a,i)}encode(e,t,n=0){let i=io(e),a=V(t);return a.writeUInt32LE(i.lo32,n),a.writeUInt32LE(i.hi32,n+4),8}};S.NearUInt64=ji;var Fi=class extends G{constructor(e){super(8,e)}decode(e,t=0){let n=V(e),i=n.readUInt32BE(t),a=n.readUInt32BE(t+4);return oo(i,a)}encode(e,t,n=0){let i=io(e),a=V(t);return a.writeUInt32BE(i.hi32,n),a.writeUInt32BE(i.lo32,n+4),8}};S.NearUInt64BE=Fi;var Vi=class extends G{constructor(e){super(8,e)}decode(e,t=0){let n=V(e),i=n.readUInt32LE(t),a=n.readInt32LE(t+4);return oo(a,i)}encode(e,t,n=0){let i=io(e),a=V(t);return a.writeUInt32LE(i.lo32,n),a.writeInt32LE(i.hi32,n+4),8}};S.NearInt64=Vi;var Yi=class extends G{constructor(e){super(8,e)}decode(e,t=0){let n=V(e),i=n.readInt32BE(t),a=n.readUInt32BE(t+4);return oo(i,a)}encode(e,t,n=0){let i=io(e),a=V(t);return a.writeInt32BE(i.hi32,n),a.writeUInt32BE(i.lo32,n+4),8}};S.NearInt64BE=Yi;var Gi=class extends G{constructor(e){super(4,e)}decode(e,t=0){return V(e).readFloatLE(t)}encode(e,t,n=0){return V(t).writeFloatLE(e,n),4}};S.Float=Gi;var Wi=class extends G{constructor(e){super(4,e)}decode(e,t=0){return V(e).readFloatBE(t)}encode(e,t,n=0){return V(t).writeFloatBE(e,n),4}};S.FloatBE=Wi;var $i=class extends G{constructor(e){super(8,e)}decode(e,t=0){return V(e).readDoubleLE(t)}encode(e,t,n=0){return V(t).writeDoubleLE(e,n),8}};S.Double=$i;var Hi=class extends G{constructor(e){super(8,e)}decode(e,t=0){return V(e).readDoubleBE(t)}encode(e,t,n=0){return V(t).writeDoubleBE(e,n),8}};S.DoubleBE=Hi;var Zi=class extends G{constructor(e,t,n){if(!(e instanceof G))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof rt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof rt)&&0<e.span&&(i=t*e.span),super(i,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof rt&&(i=i.decode(e,t)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let a=0;for(;a<i;)n+=this.elementLayout.getSpan(e,t+n),++a}return n}decode(e,t=0){let n=[],i=0,a=this.count;for(a instanceof rt&&(a=a.decode(e,t));i<a;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return n}encode(e,t,n=0){let i=this.elementLayout,a=e.reduce((d,y)=>d+i.encode(y,t,n+d),0);return this.count instanceof rt&&this.count.encode(e.length,t,n),a}};S.Sequence=Zi;var Ji=class extends G{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((a,d)=>a&&d instanceof G,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(let a of e)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((a,d)=>a+d.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,a)=>{let d=a.getSpan(e,t);return t+=d,i+d},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){In(e);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){let i=n,a=0,d=0;for(let y of this.fields){let w=y.span;if(d=0<w?w:0,y.property!==void 0){let P=e[y.property];P!==void 0&&(d=y.encode(P,t,n),0>w&&(w=y.getSpan(t,n)))}a=n,n+=w}return a+d-i}fromArray(e){let t=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};S.Structure=Ji;var ai=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};S.UnionDiscriminator=ai;var Mn=class extends ai{constructor(e,t){if(!(e instanceof rt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};S.UnionLayoutDiscriminator=Mn;var ui=class extends G{constructor(e,t,n){let i;if(e instanceof yt||e instanceof Et)i=new Mn(new si(e));else if(e instanceof rt&&e.isCount())i=new Mn(e);else if(e instanceof ai)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof G))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let a=-1;t&&(a=t.span,0<=a&&(e instanceof yt||e instanceof Et)&&(a+=i.layout.span)),super(a,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof yt||e instanceof Et,this.defaultLayout=t,this.registry={};let d=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(y){return d(y)},this.configGetSourceVariant=function(y){d=y.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n,i=this.discriminator,a=i.decode(e,t),d=this.registry[a];if(d===void 0){let y=this.defaultLayout,w=0;this.usesPrefixDiscriminator&&(w=i.layout.span),n=this.makeDestinationObject(),n[i.property]=a,n[y.property]=y.decode(e,t+w)}else n=d.decode(e,t);return n}encode(e,t,n=0){let i=this.getSourceVariant(e);if(i===void 0){let a=this.discriminator,d=this.defaultLayout,y=0;return this.usesPrefixDiscriminator&&(y=a.layout.span),a.encode(e[a.property],t,n),y+d.encode(e[d.property],t,n+y)}return i.encode(e,t,n)}addVariant(e,t,n){let i=new Xi(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}};S.Union=ui;var Xi=class extends G{constructor(e,t,n,i){if(!(e instanceof ui))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof G))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let a=e.span;0>e.span&&(a=n?n.span:0,0<=a&&e.usesPrefixDiscriminator&&(a+=e.discriminator.layout.span)),super(a,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+n)),n+i}decode(e,t=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let a=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),a+=this.layout.getSpan(t,n+i),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};S.VariantLayout=Xi;function Pn(r){return 0>r&&(r+=4294967296),r}var ci=class extends G{constructor(e,t,n){if(!(e instanceof yt||e instanceof Et))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(a){return i=Pn(a),this},this._packedGetValue=function(){return i}}decode(e,t=0){let n=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(let a of this.fields)a.property!==void 0&&(n[a.property]=a.decode(e));return n}encode(e,t,n=0){let i=this.word.decode(t,n);this._packedSetValue(i);for(let a of this.fields)if(a.property!==void 0){let d=e[a.property];d!==void 0&&a.encode(d)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){let n=new di(this,e,t);return this.fields.push(n),n}addBoolean(e){let t=new Qi(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};S.BitStructure=ci;var di=class{constructor(e,t,n){if(!(e instanceof ci))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let i=8*e.span,a=e.fields.reduce((d,y)=>d+y.bits,0);if(t+a>i)throw new Error("bits too long for span remainder ("+(i-a)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=a,this.container.msb&&(this.start=i-a-t),this.wordMask=Pn(this.valueMask<<this.start),this.property=n}decode(e,t){let n=this.container._packedGetValue();return Pn(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Pn(e&this.valueMask))throw new TypeError(Fs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),n=Pn(e<<this.start);this.container._packedSetValue(Pn(t&~this.wordMask)|n)}};S.BitField=di;var Qi=class extends di{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};S.Boolean=Qi;var eo=class extends G{constructor(e,t){if(!(e instanceof rt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof rt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),V(e).slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof rt&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Fs("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>t.length)throw new RangeError("encoding overruns Uint8Array");let a=V(e);return V(t).write(a.toString("hex"),n,i,"hex"),this.length instanceof rt&&this.length.encode(i,t,n),i}};S.Blob=eo;var to=class extends G{constructor(e){super(-1,e)}getSpan(e,t=0){In(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){let n=this.getSpan(e,t);return V(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=js.Buffer.from(e,"utf8"),a=i.length;if(n+a>t.length)throw new RangeError("encoding overruns Buffer");let d=V(t);return i.copy(d,n),d[n+a]=0,a+1}};S.CString=to;var ro=class extends G{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return In(e),e.length-t}decode(e,t=0){let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return V(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=js.Buffer.from(e,"utf8"),a=i.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(n+a>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(V(t),n),a}};S.UTF8=ro;var no=class extends G{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};S.Constant=no;S.greedy=(r,e)=>new Ri(r,e);S.offset=(r,e,t)=>new si(r,e,t);S.u8=r=>new yt(1,r);S.u16=r=>new yt(2,r);S.u24=r=>new yt(3,r);S.u32=r=>new yt(4,r);S.u40=r=>new yt(5,r);S.u48=r=>new yt(6,r);S.nu64=r=>new ji(r);S.u16be=r=>new Et(2,r);S.u24be=r=>new Et(3,r);S.u32be=r=>new Et(4,r);S.u40be=r=>new Et(5,r);S.u48be=r=>new Et(6,r);S.nu64be=r=>new Fi(r);S.s8=r=>new Or(1,r);S.s16=r=>new Or(2,r);S.s24=r=>new Or(3,r);S.s32=r=>new Or(4,r);S.s40=r=>new Or(5,r);S.s48=r=>new Or(6,r);S.ns64=r=>new Vi(r);S.s16be=r=>new Wr(2,r);S.s24be=r=>new Wr(3,r);S.s32be=r=>new Wr(4,r);S.s40be=r=>new Wr(5,r);S.s48be=r=>new Wr(6,r);S.ns64be=r=>new Yi(r);S.f32=r=>new Gi(r);S.f32be=r=>new Wi(r);S.f64=r=>new $i(r);S.f64be=r=>new Hi(r);S.struct=(r,e,t)=>new Ji(r,e,t);S.bits=(r,e,t)=>new ci(r,e,t);S.seq=(r,e,t)=>new Zi(r,e,t);S.union=(r,e,t)=>new ui(r,e,t);S.unionLayoutDiscriminator=(r,e)=>new Mn(r,e);S.blob=(r,e)=>new eo(r,e);S.cstr=r=>new to(r);S.utf8=(r,e)=>new ro(r,e);S.constant=(r,e)=>new no(r,e)});var Bn=M(so=>{_();b();Object.defineProperty(so,"__esModule",{value:!0});so.encodeDecode=void 0;var of=r=>{let e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};so.encodeDecode=of});var sc=M($=>{_();b();Object.defineProperty($,"__esModule",{value:!0});$.notImplemented=$.bitMask=void 0;$.isBytes=co;$.abytes=lo;$.abool=af;$.bytesToHex=Gs;$.numberToHexUnpadded=rc;$.hexToNumber=Ws;$.hexToBytes=fo;$.bytesToNumberBE=cf;$.bytesToNumberLE=df;$.numberToBytesBE=nc;$.numberToBytesLE=lf;$.numberToVarBytesBE=ff;$.ensureBytes=hf;$.concatBytes=ic;$.equalBytes=gf;$.utf8ToBytes=yf;$.inRange=oc;$.aInRange=pf;$.bitLen=_f;$.bitGet=bf;$.bitSet=mf;$.createHmacDrbg=vf;$.validateObject=Tf;$.memoized=Mf;var ao=BigInt(0),uo=BigInt(1),sf=BigInt(2);function co(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function lo(r){if(!co(r))throw new Error("Uint8Array expected")}function af(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}var uf=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Gs(r){lo(r);let e="";for(let t=0;t<r.length;t++)e+=uf[r[t]];return e}function rc(r){let e=r.toString(16);return e.length&1?"0"+e:e}function Ws(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?ao:BigInt("0x"+r)}var Cr={_0:48,_9:57,A:65,F:70,a:97,f:102};function ec(r){if(r>=Cr._0&&r<=Cr._9)return r-Cr._0;if(r>=Cr.A&&r<=Cr.F)return r-(Cr.A-10);if(r>=Cr.a&&r<=Cr.f)return r-(Cr.a-10)}function fo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let i=0,a=0;i<t;i++,a+=2){let d=ec(r.charCodeAt(a)),y=ec(r.charCodeAt(a+1));if(d===void 0||y===void 0){let w=r[a]+r[a+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+a)}n[i]=d*16+y}return n}function cf(r){return Ws(Gs(r))}function df(r){return lo(r),Ws(Gs(Uint8Array.from(r).reverse()))}function nc(r,e){return fo(r.toString(16).padStart(e*2,"0"))}function lf(r,e){return nc(r,e).reverse()}function ff(r){return fo(rc(r))}function hf(r,e,t){let n;if(typeof e=="string")try{n=fo(e)}catch(a){throw new Error(r+" must be hex string or Uint8Array, cause: "+a)}else if(co(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function ic(...r){let e=0;for(let n=0;n<r.length;n++){let i=r[n];lo(i),e+=i.length}let t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let a=r[n];t.set(a,i),i+=a.length}return t}function gf(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function yf(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}var Vs=r=>typeof r=="bigint"&&ao<=r;function oc(r,e,t){return Vs(r)&&Vs(e)&&Vs(t)&&e<=r&&r<t}function pf(r,e,t,n){if(!oc(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function _f(r){let e;for(e=0;r>ao;r>>=uo,e+=1);return e}function bf(r,e){return r>>BigInt(e)&uo}function mf(r,e,t){return r|(t?uo:ao)<<BigInt(e)}var wf=r=>(sf<<BigInt(r-1))-uo;$.bitMask=wf;var Ys=r=>new Uint8Array(r),tc=r=>Uint8Array.from(r);function vf(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=Ys(r),i=Ys(r),a=0,d=()=>{n.fill(1),i.fill(0),a=0},y=(...A)=>t(i,n,...A),w=(A=Ys())=>{i=y(tc([0]),A),n=y(),A.length!==0&&(i=y(tc([1]),A),n=y())},P=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let A=0,k=[];for(;A<e;){n=y();let C=n.slice();k.push(C),A+=n.length}return ic(...k)};return(A,k)=>{d(),w(A);let C;for(;!(C=k(P()));)w();return d(),C}}var Sf={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||co(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Tf(r,e,t={}){let n=(i,a,d)=>{let y=Sf[a];if(typeof y!="function")throw new Error("invalid validator function");let w=r[i];if(!(d&&w===void 0)&&!y(w,r))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+w)};for(let[i,a]of Object.entries(e))n(i,a,!1);for(let[i,a]of Object.entries(t))n(i,a,!0);return r}var Pf=()=>{throw new Error("not implemented")};$.notImplemented=Pf;function Mf(r){let e=new WeakMap;return(t,...n)=>{let i=e.get(t);if(i!==void 0)return i;let a=r(t,...n);return e.set(t,a),a}}});var go=M(fr=>{_();b();Object.defineProperty(fr,"__esModule",{value:!0});fr.toBufferLE=fr.toBufferBE=fr.toBigIntLE=fr.toBigIntBE=void 0;var ac=gt(),ho=sc();function If(r){let e=r instanceof Uint8Array?r:new Uint8Array(r);return(0,ho.bytesToNumberBE)(e)}fr.toBigIntBE=If;function Af(r){let e=r instanceof Uint8Array?r:new Uint8Array(r);return(0,ho.bytesToNumberLE)(e)}fr.toBigIntLE=Af;function Bf(r,e){if(!Number.isFinite(e)||e<=0)throw new Error("width must be a positive integer");let t=(0,ho.numberToBytesBE)(r,e);return ac.Buffer.from(t)}fr.toBufferBE=Bf;function kf(r,e){if(!Number.isFinite(e)||e<=0)throw new Error("width must be a positive integer");let t=(0,ho.numberToBytesLE)(r,e);return ac.Buffer.from(t)}fr.toBufferLE=kf});var $s=M(H=>{_();b();Object.defineProperty(H,"__esModule",{value:!0});H.u256be=H.u256=H.u192be=H.u192=H.u128be=H.u128=H.u64be=H.u64=H.bigIntBE=H.bigInt=void 0;var uc=gt(),cc=An(),yo=go(),dc=Bn(),Ef=r=>e=>{let t=(0,cc.blob)(r,e),{encode:n,decode:i}=(0,dc.encodeDecode)(t),a=t;return a.decode=(d,y)=>{let w=i(d,y);return(0,yo.toBigIntLE)(uc.Buffer.from(w))},a.encode=(d,y,w)=>{let P=(0,yo.toBufferLE)(d,r);return n(P,y,w)},a};H.bigInt=Ef;var Of=r=>e=>{let t=(0,cc.blob)(r,e),{encode:n,decode:i}=(0,dc.encodeDecode)(t),a=t;return a.decode=(d,y)=>{let w=i(d,y);return(0,yo.toBigIntBE)(uc.Buffer.from(w))},a.encode=(d,y,w)=>{let P=(0,yo.toBufferBE)(d,r);return n(P,y,w)},a};H.bigIntBE=Of;H.u64=(0,H.bigInt)(8);H.u64be=(0,H.bigIntBE)(8);H.u128=(0,H.bigInt)(16);H.u128be=(0,H.bigIntBE)(16);H.u192=(0,H.bigInt)(24);H.u192be=(0,H.bigIntBE)(24);H.u256=(0,H.bigInt)(32);H.u256be=(0,H.bigIntBE)(32)});var fc=M($r=>{_();b();Object.defineProperty($r,"__esModule",{value:!0});$r.decimal=$r.WAD=void 0;var lc=lr(),Cf=Bn(),Kf=$s();$r.WAD=new lc.BigNumber("1e+18");var xf=r=>{let e=(0,Kf.u128)(r),{encode:t,decode:n}=(0,Cf.encodeDecode)(e),i=e;return i.decode=(a,d)=>{let y=n(a,d).toString();return new lc.BigNumber(y).div($r.WAD)},i.encode=(a,d,y)=>{let w=BigInt(a.times($r.WAD).integerValue().toString());return t(w,d,y)},i};$r.decimal=xf});var hc=M(po=>{_();b();Object.defineProperty(po,"__esModule",{value:!0});po.bool=void 0;var Lf=An(),Df=Bn(),qf=r=>{let e=(0,Lf.u8)(r),{encode:t,decode:n}=(0,Df.encodeDecode)(e),i=e;return i.decode=(a,d)=>!!n(a,d),i.encode=(a,d,y)=>{let w=Number(a);return t(w,d,y)},i};po.bool=qf});var gc=M(_o=>{_();b();Object.defineProperty(_o,"__esModule",{value:!0});_o.publicKey=void 0;var Uf=An(),zf=ie(),Nf=Bn(),Rf=r=>{let e=(0,Uf.blob)(32,r),{encode:t,decode:n}=(0,Nf.encodeDecode)(e),i=e;return i.decode=(a,d)=>{let y=n(a,d);return new zf.PublicKey(y)},i.encode=(a,d,y)=>{let w=a.toBuffer();return t(w,d,y)},i};_o.publicKey=Rf});var yc=M(Nt=>{_();b();var jf=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kn=Nt&&Nt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&jf(e,r,t)};Object.defineProperty(Nt,"__esModule",{value:!0});kn(Bn(),Nt);kn($s(),Nt);kn(fc(),Nt);kn(hc(),Nt);kn(gc(),Nt);kn(An(),Nt)});var He=M(Hr=>{_();b();var Ff=Hr&&Hr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pc=Hr&&Hr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ff(e,r,t)};Object.defineProperty(Hr,"__esModule",{value:!0});pc(An(),Hr);pc(yc(),Hr)});var Hs=M(hr=>{_();b();var Vf=hr&&hr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Yf=hr&&hr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Gf=hr&&hr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Vf(e,r,t);return Yf(e,r),e};Object.defineProperty(hr,"__esModule",{value:!0});hr.FeeCalculatorLayout=void 0;var Wf=Gf(He());hr.FeeCalculatorLayout=Wf.nu64("lamportsPerSignature")});var _c=M(rr=>{_();b();Object.defineProperty(rr,"__esModule",{value:!0});rr.SOLANA_SCHEMA=rr.Enum=rr.Struct=void 0;var $f=gt(),Zs=rf(),bo=class{constructor(e){Object.assign(this,e)}encode(){return $f.Buffer.from((0,Zs.serialize)(rr.SOLANA_SCHEMA,this))}static decode(e){return(0,Zs.deserialize)(rr.SOLANA_SCHEMA,this,e)}static decodeUnchecked(e){return(0,Zs.deserializeUnchecked)(rr.SOLANA_SCHEMA,this,e)}};rr.Struct=bo;var Js=class extends bo{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}};rr.Enum=Js;rr.SOLANA_SCHEMA=new Map});var hn=M(mo=>{_();b();Object.defineProperty(mo,"__esModule",{value:!0});mo.toBuffer=void 0;var Xs=gt(),Hf=r=>Xs.Buffer.isBuffer(r)?r:r instanceof Uint8Array?Xs.Buffer.from(r.buffer,r.byteOffset,r.byteLength):Xs.Buffer.from(r);mo.toBuffer=Hf});var Ot=M(jt=>{_();b();Object.defineProperty(jt,"__esModule",{value:!0});jt.PublicKey=jt.PUBLIC_KEY_LENGTH=jt.MAX_SEED_LENGTH=void 0;var En=lr(),Kr=gt(),wc=_c(),Zf=hn(),Jf=Tn();jt.MAX_SEED_LENGTH=32;jt.PUBLIC_KEY_LENGTH=32;function Xf(r){return r._bn!==void 0}var bc=1,Rt=class extends wc.Struct{constructor(e){if(super({}),Xf(e))this._bn=e._bn;else{if(typeof e=="string"){let t=En.base.fromBase58(e);if(t.length!=jt.PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new En.BN(t)}else this._bn=new En.BN(e);if(this._bn.byteLength()>jt.PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){let e=new Rt(bc);return bc+=1,new Rt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return En.base.toBase58(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(Kr.Buffer);if(e.length===jt.PUBLIC_KEY_LENGTH)return e;let t=Kr.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){let i=Kr.Buffer.concat([e.toBuffer(),Kr.Buffer.from(t),n.toBuffer()]),a=En.base.sha256(i);return new Rt(a)}static createProgramAddressSync(e,t){let n=Kr.Buffer.alloc(0);e.forEach(function(a){if(a.length>jt.MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");n=Kr.Buffer.concat([n,(0,Zf.toBuffer)(a)])}),n=Kr.Buffer.concat([n,t.toBuffer(),Kr.Buffer.from("ProgramDerivedAddress")]);let i=En.base.sha256(n);if(mc(i))throw new Error("Invalid seeds, address must fall off the curve");return new Rt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{let a=e.concat(Kr.Buffer.from([n]));i=this.createProgramAddressSync(a,t)}catch(a){if(a instanceof TypeError)throw a;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new Rt(e);return mc(t.toBytes())==1}};jt.PublicKey=Rt;Rt.default=new Rt("11111111111111111111111111111111");wc.SOLANA_SCHEMA.set(Rt,{kind:"struct",fields:[["_bn","u256"]]});function mc(r){try{return Jf.signUtil.ed25519.publicKeyVerify(r)?1:0}catch{return 0}}});var vc=M(vo=>{_();b();Object.defineProperty(vo,"__esModule",{value:!0});vo.Keypair=void 0;var Qf=Ot(),wo=Tn(),li=class{constructor(e){this._keypair=e}static fromSecretKey(e,t){if(!t||!t.skipValidation){let a=new TextEncoder().encode("@solana/web3.js-validation-v1"),d=wo.signUtil.ed25519.sign(a,e),y=wo.signUtil.ed25519.publicKeyCreate(e);if(!wo.signUtil.ed25519.verify(a,d,y))throw new Error("provided secretKey is invalid")}let n=wo.signUtil.ed25519.publicKeyCreate(e);return new li({publicKey:n,secretKey:e})}get publicKey(){return new Qf.PublicKey(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}};vo.Keypair=li});var To=M(So=>{_();b();Object.defineProperty(So,"__esModule",{value:!0});So.MessageAccountKeys=void 0;var Qs=class{constructor(e,t){this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((a,d)=>{n.set(a.toBase58(),d)});let i=a=>{let d=n.get(a.toBase58());if(d===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return d};return e.map(a=>({programIdIndex:i(a.programId),accountKeyIndexes:a.keys.map(d=>i(d.pubkey)),data:a.data}))}};So.MessageAccountKeys=Qs});var xr=M(Z=>{_();b();var eh=Z&&Z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),th=Z&&Z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),rh=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&eh(e,r,t);return th(e,r),e};Object.defineProperty(Z,"__esModule",{value:!0});Z.getAlloc=Z.voteInit=Z.lockup=Z.authorized=Z.rustString=Z.uint64=Z.signature=Z.publicKey=void 0;var Sc=gt(),Xe=rh(He()),nh=(r="publicKey")=>Xe.blob(32,r);Z.publicKey=nh;var ih=(r="signature")=>Xe.blob(64,r);Z.signature=ih;var oh=(r="uint64")=>Xe.blob(8,r);Z.uint64=oh;var sh=(r="string")=>{let e=Xe.struct([Xe.u32("length"),Xe.u32("lengthPadding"),Xe.blob(Xe.offset(Xe.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(a,d)=>t(a,d).chars.toString(),i.encode=(a,d,y)=>{let w={chars:Sc.Buffer.from(a,"utf8")};return n(w,d,y)},i.alloc=a=>Xe.u32().span+Xe.u32().span+Sc.Buffer.from(a,"utf8").length,i};Z.rustString=sh;var ah=(r="authorized")=>Xe.struct([(0,Z.publicKey)("staker"),(0,Z.publicKey)("withdrawer")],r);Z.authorized=ah;var uh=(r="lockup")=>Xe.struct([Xe.ns64("unixTimestamp"),Xe.ns64("epoch"),(0,Z.publicKey)("custodian")],r);Z.lockup=uh;var ch=(r="voteInit")=>Xe.struct([(0,Z.publicKey)("nodePubkey"),(0,Z.publicKey)("authorizedVoter"),(0,Z.publicKey)("authorizedWithdrawer"),Xe.u8("commission")],r);Z.voteInit=ch;function Tc(r,e){let t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let a=e[i.property];if(Array.isArray(a))return a.length*t(i.elementLayout)}else if("fields"in i)return Tc({layout:i},e[i.property]);return 0},n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}Z.getAlloc=Tc});var gn=M(Zr=>{_();b();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.SIGNATURE_LENGTH_IN_BYTES=Zr.VERSION_PREFIX_MASK=Zr.PACKET_DATA_SIZE=void 0;Zr.PACKET_DATA_SIZE=1280-40-8;Zr.VERSION_PREFIX_MASK=127;Zr.SIGNATURE_LENGTH_IN_BYTES=64});var fi=M(On=>{_();b();Object.defineProperty(On,"__esModule",{value:!0});On.encodeLength=On.decodeLength=void 0;function dh(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}On.decodeLength=dh;function lh(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}On.encodeLength=lh});var yn=M(ea=>{_();b();Object.defineProperty(ea,"__esModule",{value:!0});function fh(r,e){if(!r)throw new Error(e||"Assertion failed")}ea.default=fh});var ta=M(Cn=>{_();b();var hh=Cn&&Cn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.CompiledKeys=void 0;var Po=hh(yn()),hi=Ot(),gi=class{constructor(e,t){this.payer=e,this.keyMetaMap=t}static compile(e,t){let n=new Map,i=d=>{let y=d.toBase58(),w=n.get(y);return w===void 0&&(w={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(y,w)),w},a=i(t);a.isSigner=!0,a.isWritable=!0;for(let d of e){i(d.programId).isInvoked=!0;for(let y of d.keys){let w=i(y.pubkey);w.isSigner||(w.isSigner=y.isSigner),w.isWritable||(w.isWritable=y.isWritable)}}return new gi(t,n)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];(0,Po.default)(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,w])=>w.isSigner&&w.isWritable),n=e.filter(([,w])=>w.isSigner&&!w.isWritable),i=e.filter(([,w])=>!w.isSigner&&w.isWritable),a=e.filter(([,w])=>!w.isSigner&&!w.isWritable),d={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:a.length};{(0,Po.default)(t.length>0,"Expected at least one writable signer key");let[w]=t[0];(0,Po.default)(w===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let y=[...t.map(([w])=>new hi.PublicKey(w)),...n.map(([w])=>new hi.PublicKey(w)),...i.map(([w])=>new hi.PublicKey(w)),...a.map(([w])=>new hi.PublicKey(w))];return[d,y]}extractTableLookup(e){let[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,d=>!d.isSigner&&!d.isInvoked&&d.isWritable),[i,a]=this.drainKeysFoundInLookupTable(e.state.addresses,d=>!d.isSigner&&!d.isInvoked&&!d.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:a}]}drainKeysFoundInLookupTable(e,t){let n=new Array,i=new Array;for(let[a,d]of this.keyMetaMap.entries())if(t(d)){let y=new hi.PublicKey(a),w=e.findIndex(P=>P.equals(y));w>=0&&((0,Po.default)(w<256,"Max lookup table index exceeded"),n.push(w),i.push(y),this.keyMetaMap.delete(a))}return[n,i]}};Cn.CompiledKeys=gi});var na=M(gr=>{_();b();var gh=gr&&gr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yh=gr&&gr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ra=gr&&gr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gh(e,r,t);return yh(e,r),e};Object.defineProperty(gr,"__esModule",{value:!0});gr.Message=void 0;var Kn=lr(),Ft=gt(),pt=ra(He()),xn=Ot(),Pc=ra(xr()),Mc=gn(),Jr=ra(fi()),ph=hn(),_h=ta(),Ic=To(),Ln=class{constructor(e){this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new xn.PublicKey(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Kn.base.fromBase58(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ic.MessageAccountKeys(this.staticAccountKeys)}static compile(e){let t=_h.CompiledKeys.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),d=new Ic.MessageAccountKeys(i).compileInstructions(e.instructions).map(y=>({programIdIndex:y.programIdIndex,accounts:y.accountKeyIndexes,data:Kn.base.toBase58(y.data)}));return new Ln({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:d})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let n=e-t,a=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<a}else{let n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];Jr.encodeLength(t,e);let n=this.instructions.map(A=>{let{accounts:k,programIdIndex:C}=A,z=Array.from(Kn.base.fromBase58(A.data)),E=[];Jr.encodeLength(E,k.length);let L=[];return Jr.encodeLength(L,z.length),{programIdIndex:C,keyIndicesCount:Ft.Buffer.from(E),keyIndices:k,dataLength:Ft.Buffer.from(L),data:z}}),i=[];Jr.encodeLength(i,n.length);let a=Ft.Buffer.alloc(Mc.PACKET_DATA_SIZE);Ft.Buffer.from(i).copy(a);let d=i.length;n.forEach(A=>{let C=pt.struct([pt.u8("programIdIndex"),pt.blob(A.keyIndicesCount.length,"keyIndicesCount"),pt.seq(pt.u8("keyIndex"),A.keyIndices.length,"keyIndices"),pt.blob(A.dataLength.length,"dataLength"),pt.seq(pt.u8("userdatum"),A.data.length,"data")]).encode(A,a,d);d+=C}),a=a.slice(0,d);let y=pt.struct([pt.blob(1,"numRequiredSignatures"),pt.blob(1,"numReadonlySignedAccounts"),pt.blob(1,"numReadonlyUnsignedAccounts"),pt.blob(t.length,"keyCount"),pt.seq(Pc.publicKey("key"),e,"keys"),Pc.publicKey("recentBlockhash")]),w={numRequiredSignatures:Ft.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Ft.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Ft.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Ft.Buffer.from(t),keys:this.accountKeys.map(A=>(0,ph.toBuffer)(A.toBytes())),recentBlockhash:Kn.base.fromBase58(this.recentBlockhash)},P=Ft.Buffer.alloc(2048),B=y.encode(w,P);return a.copy(P,B),P.slice(0,B+a.length)}static from(e){let t=[...e],n=t.shift();if(n!==(n&Mc.VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=t.shift(),a=t.shift(),d=Jr.decodeLength(t),y=[];for(let k=0;k<d;k++){let C=t.slice(0,xn.PUBLIC_KEY_LENGTH);t=t.slice(xn.PUBLIC_KEY_LENGTH),y.push(new xn.PublicKey(Ft.Buffer.from(C)))}let w=t.slice(0,xn.PUBLIC_KEY_LENGTH);t=t.slice(xn.PUBLIC_KEY_LENGTH);let P=Jr.decodeLength(t),B=[];for(let k=0;k<P;k++){let C=t.shift(),z=Jr.decodeLength(t),E=t.slice(0,z);t=t.slice(z);let L=Jr.decodeLength(t),q=t.slice(0,L),de=Kn.base.toBase58(Ft.Buffer.from(q));t=t.slice(L),B.push({programIdIndex:C,accounts:E,data:de})}let A={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:a},recentBlockhash:Kn.base.toBase58(Ft.Buffer.from(w)),accountKeys:y,instructions:B};return new Ln(A)}};gr.Message=Ln});var sa=M(Vt=>{_();b();var bh=Vt&&Vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),mh=Vt&&Vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),oa=Vt&&Vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bh(e,r,t);return mh(e,r),e},wh=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.MessageV0=void 0;var Ac=lr(),Q=oa(He()),ia=oa(xr()),yi=Ot(),_t=oa(fi()),Bc=wh(yn()),Mo=gn(),vh=ta(),kc=To(),Dn=class{constructor(e){this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new kc.MessageAccountKeys(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){let i=e-n,a=this.addressTableLookups.reduce((d,y)=>d+y.writableIndexes.length,0);return i<a}else if(e>=this.header.numRequiredSignatures){let i=e-t,d=n-t-this.header.numReadonlyUnsignedAccounts;return i<d}else{let i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=e.find(a=>a.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let a of n.writableIndexes)if(a<i.state.addresses.length)t.writable.push(i.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${n.accountKey.toBase58()}`);for(let a of n.readonlyIndexes)if(a<i.state.addresses.length)t.readonly.push(i.state.addresses[a]);else throw new Error(`Failed to find address for index ${a} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){let t=vh.CompiledKeys.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},a=e.addressLookupTableAccounts||[];for(let B of a){let A=t.extractTableLookup(B);if(A!==void 0){let[k,{writable:C,readonly:z}]=A;n.push(k),i.writable.push(...C),i.readonly.push(...z)}}let[d,y]=t.getMessageComponents(),P=new kc.MessageAccountKeys(y,i).compileInstructions(e.instructions);return new Dn({header:d,staticAccountKeys:y,recentBlockhash:e.recentBlockhash,compiledInstructions:P,addressTableLookups:n})}serialize(){let e=Array();_t.encodeLength(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),n=Array();_t.encodeLength(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),a=Array();_t.encodeLength(a,this.addressTableLookups.length);let d=Q.struct([Q.u8("prefix"),Q.struct([Q.u8("numRequiredSignatures"),Q.u8("numReadonlySignedAccounts"),Q.u8("numReadonlyUnsignedAccounts")],"header"),Q.blob(e.length,"staticAccountKeysLength"),Q.seq(ia.publicKey(),this.staticAccountKeys.length,"staticAccountKeys"),ia.publicKey("recentBlockhash"),Q.blob(n.length,"instructionsLength"),Q.blob(t.length,"serializedInstructions"),Q.blob(a.length,"addressTableLookupsLength"),Q.blob(i.length,"serializedAddressTableLookups")]),y=new Uint8Array(Mo.PACKET_DATA_SIZE),w=1<<7,P=d.encode({prefix:w,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(B=>B.toBytes()),recentBlockhash:Ac.base.fromBase58(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(a),serializedAddressTableLookups:i},y);return y.slice(0,P)}serializeInstructions(){let e=0,t=new Uint8Array(Mo.PACKET_DATA_SIZE);for(let n of this.compiledInstructions){let i=Array();_t.encodeLength(i,n.accountKeyIndexes.length);let a=Array();_t.encodeLength(a,n.data.length);let d=Q.struct([Q.u8("programIdIndex"),Q.blob(i.length,"encodedAccountKeyIndexesLength"),Q.seq(Q.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),Q.blob(a.length,"encodedDataLength"),Q.blob(n.data.length,"data")]);e+=d.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(a),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(Mo.PACKET_DATA_SIZE);for(let n of this.addressTableLookups){let i=Array();_t.encodeLength(i,n.writableIndexes.length);let a=Array();_t.encodeLength(a,n.readonlyIndexes.length);let d=Q.struct([ia.publicKey("accountKey"),Q.blob(i.length,"encodedWritableIndexesLength"),Q.seq(Q.u8(),n.writableIndexes.length,"writableIndexes"),Q.blob(a.length,"encodedReadonlyIndexesLength"),Q.seq(Q.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=d.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(a),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],n=t.shift(),i=n&Mo.VERSION_PREFIX_MASK;(0,Bc.default)(n!==i,"Expected versioned message but received legacy message");let a=i;(0,Bc.default)(a===0,`Expected versioned message with version 0 but found version ${a}`);let d={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},y=[],w=_t.decodeLength(t);for(let z=0;z<w;z++)y.push(new yi.PublicKey(t.splice(0,yi.PUBLIC_KEY_LENGTH)));let P=Ac.base.toBase58(t.splice(0,yi.PUBLIC_KEY_LENGTH)),B=_t.decodeLength(t),A=[];for(let z=0;z<B;z++){let E=t.shift(),L=_t.decodeLength(t),q=t.splice(0,L),de=_t.decodeLength(t),Yr=new Uint8Array(t.splice(0,de));A.push({programIdIndex:E,accountKeyIndexes:q,data:Yr})}let k=_t.decodeLength(t),C=[];for(let z=0;z<k;z++){let E=new yi.PublicKey(t.splice(0,yi.PUBLIC_KEY_LENGTH)),L=_t.decodeLength(t),q=t.splice(0,L),de=_t.decodeLength(t),Yr=t.splice(0,de);C.push({accountKey:E,writableIndexes:q,readonlyIndexes:Yr})}return new Dn({header:d,staticAccountKeys:y,recentBlockhash:P,compiledInstructions:A,addressTableLookups:C})}};Vt.MessageV0=Dn});var aa=M(pi=>{_();b();Object.defineProperty(pi,"__esModule",{value:!0});pi.VersionedMessage=void 0;var Sh=gn(),Th=na(),Ph=sa();pi.VersionedMessage={deserializeMessageVersion(r){let e=r[0],t=e&Sh.VERSION_PREFIX_MASK;return t===e?"legacy":t},deserialize:r=>{let e=pi.VersionedMessage.deserializeMessageVersion(r);if(e==="legacy")return Th.Message.from(r);if(e===0)return Ph.MessageV0.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}}});var Ao=M(yr=>{_();b();var Mh=yr&&yr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Io=yr&&yr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Mh(e,r,t)};Object.defineProperty(yr,"__esModule",{value:!0});Io(To(),yr);Io(na(),yr);Io(aa(),yr);Io(sa(),yr)});var ua=M(Yt=>{_();b();var Ih=Yt&&Yt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ah=Yt&&Yt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Cc=Yt&&Yt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ih(e,r,t);return Ah(e,r),e};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.NonceAccount=Yt.NONCE_ACCOUNT_LENGTH=void 0;var Bo=Cc(He()),Ec=Cc(xr()),Oc=Ot(),Bh=Hs(),kh=hn(),Kc=Bo.struct([Bo.u32("version"),Bo.u32("state"),Ec.publicKey("authorizedPubkey"),Ec.publicKey("nonce"),Bo.struct([Bh.FeeCalculatorLayout],"feeCalculator")]);Yt.NONCE_ACCOUNT_LENGTH=Kc.span;var _i=class{constructor(e){this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=Kc.decode((0,kh.toBuffer)(e),0);return new _i({authorizedPubkey:new Oc.PublicKey(t.authorizedPubkey),nonce:new Oc.PublicKey(t.nonce).toString(),feeCalculator:t.feeCalculator})}};Yt.NonceAccount=_i});var bi=M(pr=>{_();b();Object.defineProperty(pr,"__esModule",{value:!0});pr.u256=pr.u192=pr.u128=pr.u64=void 0;var Eh=gt(),Oh=He(),xc=go(),Ch=r=>{let e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},ko=r=>e=>{let t=(0,Oh.blob)(r,e),{encode:n,decode:i}=Ch(t),a=t;return a.decode=(d,y)=>{let w=i(d,y);return(0,xc.toBigIntLE)(Eh.Buffer.from(w))},a.encode=(d,y,w)=>{let P=(0,xc.toBufferLE)(d,r);return n(P,y,w)},a};pr.u64=ko(8);pr.u128=ko(16);pr.u192=ko(24);pr.u256=ko(32)});var mi=M(Gt=>{_();b();var Kh=Gt&&Gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),xh=Gt&&Gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Lh=Gt&&Gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Kh(e,r,t);return xh(e,r),e};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.decodeData=Gt.encodeData=void 0;var Dh=gt(),qh=Lh(xr());function Uh(r,e){let t=r.layout.span>=0?r.layout.span:qh.getAlloc(r,e),n=Dh.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}Gt.encodeData=Uh;function zh(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}Gt.decodeData=zh});var ca=M(We=>{_();b();Object.defineProperty(We,"__esModule",{value:!0});We.SYSVAR_STAKE_HISTORY_PUBKEY=We.SYSVAR_SLOT_HISTORY_PUBKEY=We.SYSVAR_SLOT_HASHES_PUBKEY=We.SYSVAR_REWARDS_PUBKEY=We.SYSVAR_RENT_PUBKEY=We.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=We.SYSVAR_INSTRUCTIONS_PUBKEY=We.SYSVAR_EPOCH_SCHEDULE_PUBKEY=We.SYSVAR_CLOCK_PUBKEY=void 0;var Lr=Ot();We.SYSVAR_CLOCK_PUBKEY=new Lr.PublicKey("SysvarC1ock11111111111111111111111111111111");We.SYSVAR_EPOCH_SCHEDULE_PUBKEY=new Lr.PublicKey("SysvarEpochSchedu1e111111111111111111111111");We.SYSVAR_INSTRUCTIONS_PUBKEY=new Lr.PublicKey("Sysvar1nstructions1111111111111111111111111");We.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new Lr.PublicKey("SysvarRecentB1ockHashes11111111111111111111");We.SYSVAR_RENT_PUBKEY=new Lr.PublicKey("SysvarRent111111111111111111111111111111111");We.SYSVAR_REWARDS_PUBKEY=new Lr.PublicKey("SysvarRewards111111111111111111111111111111");We.SYSVAR_SLOT_HASHES_PUBKEY=new Lr.PublicKey("SysvarS1otHashes111111111111111111111111111");We.SYSVAR_SLOT_HISTORY_PUBKEY=new Lr.PublicKey("SysvarS1otHistory11111111111111111111111111");We.SYSVAR_STAKE_HISTORY_PUBKEY=new Lr.PublicKey("SysvarStakeHistory1111111111111111111111111")});var Lc=M(Xr=>{_();b();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.TransactionExpiredNonceInvalidError=Xr.TransactionExpiredTimeoutError=Xr.TransactionExpiredBlockheightExceededError=void 0;var Eo=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=e}};Xr.TransactionExpiredBlockheightExceededError=Eo;Object.defineProperty(Eo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Oo=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=e}};Xr.TransactionExpiredTimeoutError=Oo;Object.defineProperty(Oo.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Co=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=e}};Xr.TransactionExpiredNonceInvalidError=Co;Object.defineProperty(Co.prototype,"name",{value:"TransactionExpiredNonceInvalidError"})});var da=M(bt=>{_();b();var Nh=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Rh=bt&&bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jh=bt&&bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Nh(e,r,t);return Rh(e,r),e},Fh=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});bt.Transaction=bt.TransactionInstruction=void 0;var qr=gt(),vi=gn(),Dc=Ao(),Vh=Ot(),qc=jh(fi()),Yh=hn(),Dr=Fh(yn()),wi=lr(),Uc=Tn(),Gh=qr.Buffer.alloc(vi.SIGNATURE_LENGTH_IN_BYTES).fill(0),Si=class{constructor(e){this.data=qr.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}};bt.TransactionInstruction=Si;var qn=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.instructions=[],!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{let{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Si(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<t.length;E++)if(t[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);let i=[],a=[];t.forEach(E=>{E.keys.forEach(q=>{a.push({...q})});let L=E.programId.toString();i.includes(L)||i.push(L)}),i.forEach(E=>{a.push({pubkey:new Vh.PublicKey(E),isSigner:!1,isWritable:!1})});let d=[];a.forEach(E=>{let L=E.pubkey.toString(),q=d.findIndex(de=>de.pubkey.toString()===L);q>-1?(d[q].isWritable=d[q].isWritable||E.isWritable,d[q].isSigner=d[q].isSigner||E.isSigner):d.push(E)}),d.sort(function(E,L){return E.isSigner!==L.isSigner?E.isSigner?-1:1:E.isWritable!==L.isWritable?E.isWritable?-1:1:E.pubkey.toBase58().localeCompare(L.pubkey.toBase58())});let y=d.findIndex(E=>E.pubkey.equals(n));if(y>-1){let[E]=d.splice(y,1);E.isSigner=!0,E.isWritable=!0,d.unshift(E)}else d.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let E of this.signatures){let L=d.findIndex(q=>q.pubkey.equals(E.publicKey));if(L>-1)d[L].isSigner||(d[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let w=0,P=0,B=0,A=[],k=[];d.forEach(({pubkey:E,isSigner:L,isWritable:q})=>{L?(A.push(E.toString()),w+=1,q||(P+=1)):(k.push(E.toString()),q||(B+=1))});let C=A.concat(k),z=t.map(E=>{let{data:L,programId:q}=E;return{programIdIndex:C.indexOf(q.toString()),accounts:E.keys.map(de=>C.indexOf(de.pubkey.toString())),data:wi.base.toBase58(L)}});return z.forEach(E=>{(0,Dr.default)(E.programIdIndex>=0),E.accounts.forEach(L=>(0,Dr.default)(L>=0))}),new Dc.Message({header:{numRequiredSignatures:w,numReadonlySignedAccounts:P,numReadonlyUnsignedAccounts:B},accountKeys:C,recentBlockhash:e,instructions:z})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,a)=>t[a].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(n=>{let i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let a of e){let d=a.publicKey.toString();t.has(d)||(t.add(d),n.push(a))}this.signatures=n.map(a=>({signature:null,publicKey:a.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let a of e){let d=a.publicKey.toString();t.has(d)||(t.add(d),n.push(a))}let i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){let n=e.serialize();t.forEach(i=>{let a=Uc.signUtil.ed25519.sign(n,i.secretKey);this._addSignature(i.publicKey,(0,Yh.toBuffer)(a))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){(0,Dr.default)(t.length===64);let n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=qr.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(t)return!1}else if(!Uc.signUtil.ed25519.verify(e,n,i.toBytes()))return!1;return!0}serialize(e){let{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,t))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){let{signatures:t}=this,n=[];qc.encodeLength(n,t.length);let i=n.length+t.length*64+e.length,a=qr.Buffer.alloc(i);return(0,Dr.default)(t.length<256),qr.Buffer.from(n).copy(a,0),t.forEach(({signature:d},y)=>{d!==null&&((0,Dr.default)(d.length===64,"signature has invalid length"),qr.Buffer.from(d).copy(a,n.length+y*64))}),e.copy(a,n.length+t.length*64),(0,Dr.default)(a.length<=vi.PACKET_DATA_SIZE,`Transaction too large: ${a.length} > ${vi.PACKET_DATA_SIZE}`),a}get keys(){return(0,Dr.default)(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return(0,Dr.default)(this.instructions.length===1),this.instructions[0].programId}get data(){return(0,Dr.default)(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],n=qc.decodeLength(t),i=[];for(let a=0;a<n;a++){let d=t.slice(0,vi.SIGNATURE_LENGTH_IN_BYTES);t=t.slice(vi.SIGNATURE_LENGTH_IN_BYTES),i.push(wi.base.toBase58(qr.Buffer.from(d)))}return qn.populate(Dc.Message.from(t),i)}static populate(e,t=[]){let n=new qn;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,a)=>{let d={signature:i==wi.base.toBase58(Gh)?null:qr.Buffer.from(wi.base.fromBase58(i)),publicKey:e.accountKeys[a]};n.signatures.push(d)}),e.instructions.forEach(i=>{let a=i.accounts.map(d=>{let y=e.accountKeys[d];return{pubkey:y,isSigner:n.signatures.some(w=>w.publicKey.toString()===y.toString())||e.isAccountSigner(d),isWritable:e.isAccountWritable(d)}});n.instructions.push(new Si({keys:a,programId:e.accountKeys[i.programIdIndex],data:qr.Buffer.from(wi.base.fromBase58(i.data))}))}),n._message=e,n._json=n.toJSON(),n}};bt.Transaction=qn});var Rc=M(Un=>{_();b();var Wh=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});Un.TransactionMessage=void 0;var zc=Wh(yn()),$h=hn(),Nc=Ao(),Hh=da(),Ti=class{constructor(e){this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){let{header:n,compiledInstructions:i,recentBlockhash:a}=e,{numRequiredSignatures:d,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:w}=n,P=d-y;(0,zc.default)(P>0,"Message header is invalid");let B=e.staticAccountKeys.length-d-w;(0,zc.default)(B>=0,"Message header is invalid");let A=e.getAccountKeys(t),k=A.get(0);if(k===void 0)throw new Error("Failed to decompile message because no account keys were found");let C=[];for(let z of i){let E=[];for(let q of z.accountKeyIndexes){let de=A.get(q);if(de===void 0)throw new Error(`Failed to find key for account key index ${q}`);let Yr=q<d,at;Yr?at=q<P:q<A.staticAccountKeys.length?at=q-d<B:at=q-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,E.push({pubkey:de,isSigner:q<n.numRequiredSignatures,isWritable:at})}let L=A.get(z.programIdIndex);if(L===void 0)throw new Error(`Failed to find program id for program id index ${z.programIdIndex}`);C.push(new Hh.TransactionInstruction({programId:L,data:(0,$h.toBuffer)(z.data),keys:E}))}return new Ti({payerKey:k,instructions:C,recentBlockhash:a})}compileToLegacyMessage(){return Nc.Message.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Nc.MessageV0.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}};Un.TransactionMessage=Ti});var Vc=M(Wt=>{_();b();var Zh=Wt&&Wt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Jh=Wt&&Wt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),la=Wt&&Wt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Zh(e,r,t);return Jh(e,r),e},Xh=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.VersionedTransaction=void 0;var Ko=la(He()),xo=Xh(yn()),Qh=aa(),jc=gn(),Fc=la(fi()),eg=la(xr()),tg=Tn(),rg=gt(),Pi=class{get signature(){return this.signatures.length>0?rg.Buffer.from(this.signatures[0]):null}get version(){return this.message.version}constructor(e,t){if(t!==void 0)(0,xo.default)(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(jc.SIGNATURE_LENGTH_IN_BYTES));this.signatures=n}this.message=e}serialize(){let e=this.message.serialize(),t=Array();Fc.encodeLength(t,this.signatures.length);let n=Ko.struct([Ko.blob(t.length,"encodedSignaturesLength"),Ko.seq(eg.signature(),this.signatures.length,"signatures"),Ko.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),a=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,a)}static deserialize(e){let t=[...e],n=[],i=Fc.decodeLength(t);for(let d=0;d<i;d++)n.push(new Uint8Array(t.splice(0,jc.SIGNATURE_LENGTH_IN_BYTES)));let a=Qh.VersionedMessage.deserialize(new Uint8Array(t));return new Pi(a,n)}sign(e){let t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of e){let a=n.findIndex(d=>d.equals(i.publicKey));(0,xo.default)(a>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[a]=tg.signUtil.ed25519.sign(t,i.secretKey)}}addSignature(e,t){(0,xo.default)(t.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(a=>a.equals(e));(0,xo.default)(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}};Wt.VersionedTransaction=Pi});var Ii=M(nr=>{_();b();var ng=nr&&nr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Mi=nr&&nr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ng(e,r,t)};Object.defineProperty(nr,"__esModule",{value:!0});Mi(gn(),nr);Mi(Lc(),nr);Mi(da(),nr);Mi(Rc(),nr);Mi(Vc(),nr)});var ha=M(N=>{_();b();var ig=N&&N.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),og=N&&N.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Wc=N&&N.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ig(e,r,t);return og(e,r),e};Object.defineProperty(N,"__esModule",{value:!0});N.SystemProgram=N.SYSTEM_INSTRUCTION_LAYOUTS=N.SystemInstruction=void 0;var F=Wc(He()),re=mi(),ut=Wc(xr()),Yc=ua(),$t=Ot(),Ai=ca(),_r=Ii(),ir=hn(),Gc=bi(),fa=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=F.u32("instruction").decode(e.data),i;for(let[a,d]of Object.entries(N.SYSTEM_INSTRUCTION_LAYOUTS))if(d.index==n){i=a;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:n,programId:i}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new $t.PublicKey(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:n,programId:i}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new $t.PublicKey(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:n,space:i,programId:a}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new $t.PublicKey(t),seed:n,space:i,programId:new $t.PublicKey(a)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new $t.PublicKey(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:n,programId:i}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new $t.PublicKey(t),seed:n,programId:new $t.PublicKey(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:n,lamports:i,space:a,programId:d}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new $t.PublicKey(t),seed:n,lamports:i,space:a,programId:new $t.PublicKey(d)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new $t.PublicKey(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=(0,re.decodeData)(N.SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new $t.PublicKey(t)}}static checkProgramId(e){if(!e.equals(Qr.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}};N.SystemInstruction=fa;N.SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:F.struct([F.u32("instruction"),F.ns64("lamports"),F.ns64("space"),ut.publicKey("programId")])},Assign:{index:1,layout:F.struct([F.u32("instruction"),ut.publicKey("programId")])},Transfer:{index:2,layout:F.struct([F.u32("instruction"),(0,Gc.u64)("lamports")])},CreateWithSeed:{index:3,layout:F.struct([F.u32("instruction"),ut.publicKey("base"),ut.rustString("seed"),F.ns64("lamports"),F.ns64("space"),ut.publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:F.struct([F.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:F.struct([F.u32("instruction"),F.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:F.struct([F.u32("instruction"),ut.publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:F.struct([F.u32("instruction"),ut.publicKey("authorized")])},Allocate:{index:8,layout:F.struct([F.u32("instruction"),F.ns64("space")])},AllocateWithSeed:{index:9,layout:F.struct([F.u32("instruction"),ut.publicKey("base"),ut.rustString("seed"),F.ns64("space"),ut.publicKey("programId")])},AssignWithSeed:{index:10,layout:F.struct([F.u32("instruction"),ut.publicKey("base"),ut.rustString("seed"),ut.publicKey("programId")])},TransferWithSeed:{index:11,layout:F.struct([F.u32("instruction"),(0,Gc.u64)("lamports"),ut.rustString("seed"),ut.publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:F.struct([F.u32("instruction")])}});var Qr=class{constructor(){}static createAccount(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.Create,n=(0,re.encodeData)(t,{lamports:e.lamports,space:e.space,programId:(0,ir.toBuffer)(e.programId.toBuffer())});return new _r.TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){let i=N.SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;t=(0,re.encodeData)(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:(0,ir.toBuffer)(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=N.SYSTEM_INSTRUCTION_LAYOUTS.Transfer;t=(0,re.encodeData)(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _r.TransactionInstruction({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){let i=N.SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;t=(0,re.encodeData)(i,{base:(0,ir.toBuffer)(e.basePubkey.toBuffer()),seed:e.seed,programId:(0,ir.toBuffer)(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=N.SYSTEM_INSTRUCTION_LAYOUTS.Assign;t=(0,re.encodeData)(i,{programId:(0,ir.toBuffer)(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _r.TransactionInstruction({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,n=(0,re.encodeData)(t,{base:(0,ir.toBuffer)(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:(0,ir.toBuffer)(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _r.TransactionInstruction({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){let t=new _r.Transaction;"basePubkey"in e&&"seed"in e?t.add(Qr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Yc.NONCE_ACCOUNT_LENGTH,programId:this.programId})):t.add(Qr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Yc.NONCE_ACCOUNT_LENGTH,programId:this.programId}));let n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,n=(0,re.encodeData)(t,{authorized:(0,ir.toBuffer)(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ai.SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Ai.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new _r.TransactionInstruction(i)}static nonceAdvance(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,n=(0,re.encodeData)(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ai.SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new _r.TransactionInstruction(i)}static nonceWithdraw(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,n=(0,re.encodeData)(t,{lamports:e.lamports});return new _r.TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ai.SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Ai.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){let t=N.SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,n=(0,re.encodeData)(t,{authorized:(0,ir.toBuffer)(e.newAuthorizedPubkey.toBuffer())});return new _r.TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){let i=N.SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;t=(0,re.encodeData)(i,{base:(0,ir.toBuffer)(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:(0,ir.toBuffer)(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=N.SYSTEM_INSTRUCTION_LAYOUTS.Allocate;t=(0,re.encodeData)(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _r.TransactionInstruction({keys:n,programId:this.programId,data:t})}};N.SystemProgram=Qr;Qr.programId=new $t.PublicKey("11111111111111111111111111111111")});var $c=M(Lo=>{_();b();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.decodeData=void 0;function sg(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}Lo.decodeData=sg});var ed=M(Ht=>{_();b();var ag=Ht&&Ht.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ug=Ht&&Ht.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Xc=Ht&&Ht.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ag(e,r,t);return ug(e,r),e},cg=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.AddressLookupTableAccount=void 0;var br=Xc(He()),Hc=cg(yn()),Qc=Xc(xr()),Zc=Ot(),dg=bi(),lg=$c(),Jc=56,ga=class{constructor(e){this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=(0,lg.decodeData)(fg,e),n=e.length-Jc;(0,Hc.default)(n>=0,"lookup table is invalid"),(0,Hc.default)(n%32===0,"lookup table is invalid");let i=n/32,{addresses:a}=br.struct([br.seq(Qc.publicKey(),i,"addresses")]).decode(e.slice(Jc));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Zc.PublicKey(t.authority[0]):void 0,addresses:a.map(d=>new Zc.PublicKey(d))}}};Ht.AddressLookupTableAccount=ga;var fg={index:1,layout:br.struct([br.u32("typeIndex"),(0,dg.u64)("deactivationSlot"),br.nu64("lastExtendedSlot"),br.u8("lastExtendedStartIndex"),br.u8(),br.seq(Qc.publicKey(),br.offset(br.u8(),-1),"authority")])}});var id=M(ee=>{_();b();var nd=ee&&ee.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hg=ee&&ee.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),pa=ee&&ee.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&nd(e,r,t);return hg(e,r),e},gg=ee&&ee.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&nd(e,r,t)};Object.defineProperty(ee,"__esModule",{value:!0});ee.AddressLookupTableProgram=ee.AddressLookupTableInstruction=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=void 0;var yg=go(),ct=pa(He()),pg=pa(xr()),_a=Ot(),td=pa(bi()),rd=ha(),Bi=Ii(),pn=mi();gg(ed(),ee);ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Object.freeze({CreateLookupTable:{index:0,layout:ct.struct([ct.u32("instruction"),td.u64("recentSlot"),ct.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:ct.struct([ct.u32("instruction")])},ExtendLookupTable:{index:2,layout:ct.struct([ct.u32("instruction"),td.u64(),ct.seq(pg.publicKey(),ct.offset(ct.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ct.struct([ct.u32("instruction")])},CloseLookupTable:{index:4,layout:ct.struct([ct.u32("instruction")])}});var ya=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=ct.u32("instruction").decode(e.data),i;for(let[a,d]of Object.entries(ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS))if(d.index==n){i=a;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:t}=(0,pn.decodeData)(ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:t}=(0,pn.decodeData)(ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new _a.PublicKey(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ki.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}};ee.AddressLookupTableInstruction=ya;var ki=class{constructor(){}static createLookupTable(e){let[t,n]=_a.PublicKey.findProgramAddressSync([e.authority.toBuffer(),(0,yg.toBufferLE)(BigInt(e.recentSlot),8)],this.programId),i=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,a=(0,pn.encodeData)(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:rd.SystemProgram.programId,isSigner:!1,isWritable:!1}];return[new Bi.TransactionInstruction({programId:this.programId,keys:d,data:a}),t]}static freezeLookupTable(e){let t=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable,n=(0,pn.encodeData)(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Bi.TransactionInstruction({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){let t=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,n=(0,pn.encodeData)(t,{addresses:e.addresses.map(a=>a.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:rd.SystemProgram.programId,isSigner:!1,isWritable:!1}),new Bi.TransactionInstruction({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){let t=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable,n=(0,pn.encodeData)(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Bi.TransactionInstruction({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){let t=ee.LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable,n=(0,pn.encodeData)(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Bi.TransactionInstruction({programId:this.programId,keys:i,data:n})}};ee.AddressLookupTableProgram=ki;ki.programId=new _a.PublicKey("AddressLookupTab1e1111111111111111111111111")});var qo=M(oe=>{_();b();var _g=oe&&oe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bg=oe&&oe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mg=oe&&oe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_g(e,r,t);return bg(e,r),e};Object.defineProperty(oe,"__esModule",{value:!0});oe.ComputeBudgetProgram=oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=oe.ComputeBudgetInstruction=void 0;var Ct=mg(He()),en=mi(),wg=Ot(),Do=Ii(),vg=bi(),ba=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=Ct.u8("instruction").decode(e.data),i;for(let[a,d]of Object.entries(oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS))if(d.index==n){i=a;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:n}=(0,en.decodeData)(oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=(0,en.decodeData)(oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:t}=(0,en.decodeData)(oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:t}=(0,en.decodeData)(oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Ei.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}};oe.ComputeBudgetInstruction=ba;oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:Ct.struct([Ct.u8("instruction"),Ct.u32("units"),Ct.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Ct.struct([Ct.u8("instruction"),Ct.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Ct.struct([Ct.u8("instruction"),Ct.u32("units")])},SetComputeUnitPrice:{index:3,layout:Ct.struct([Ct.u8("instruction"),(0,vg.u64)("microLamports")])}});var Ei=class{constructor(){}static requestUnits(e){let t=oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,n=(0,en.encodeData)(t,e);return new Do.TransactionInstruction({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){let t=oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,n=(0,en.encodeData)(t,e);return new Do.TransactionInstruction({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){let t=oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,n=(0,en.encodeData)(t,e);return new Do.TransactionInstruction({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){let t=oe.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,n=(0,en.encodeData)(t,{microLamports:BigInt(e.microLamports)});return new Do.TransactionInstruction({keys:[],programId:this.programId,data:n})}};oe.ComputeBudgetProgram=Ei;Ei.programId=new wg.PublicKey("ComputeBudget111111111111111111111111111111")});var od=M(Ur=>{_();b();var Sg=Ur&&Ur.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ma=Ur&&Ur.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Sg(e,r,t)};Object.defineProperty(Ur,"__esModule",{value:!0});ma(id(),Ur);ma(ha(),Ur);ma(qo(),Ur)});var ie=M(Qe=>{_();b();var Tg=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zr=Qe&&Qe.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tg(e,r,t)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.LAMPORTS_PER_SOL=void 0;zr(Qu(),Qe);zr(Hs(),Qe);zr(vc(),Qe);zr(Ao(),Qe);zr(ua(),Qe);zr(od(),Qe);zr(Ot(),Qe);zr(Ii(),Qe);zr(ca(),Qe);Qe.LAMPORTS_PER_SOL=1e9});var mr=M(dt=>{_();b();Object.defineProperty(dt,"__esModule",{value:!0});dt.programSupportsExtensions=dt.NATIVE_MINT_2022=dt.NATIVE_MINT=dt.ASSOCIATED_TOKEN_PROGRAM_ID=dt.TOKEN_2022_PROGRAM_ID=dt.TOKEN_PROGRAM_ID=void 0;var Oi=ie();dt.TOKEN_PROGRAM_ID=new Oi.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");dt.TOKEN_2022_PROGRAM_ID=new Oi.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");dt.ASSOCIATED_TOKEN_PROGRAM_ID=new Oi.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");dt.NATIVE_MINT=new Oi.PublicKey("So11111111111111111111111111111111111111112");dt.NATIVE_MINT_2022=new Oi.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");function Pg(r){return r!==dt.TOKEN_PROGRAM_ID}dt.programSupportsExtensions=Pg});var Nr=M(ne=>{_();b();Object.defineProperty(ne,"__esModule",{value:!0});ne.TokenInvalidInstructionTypeError=ne.TokenInvalidInstructionDataError=ne.TokenInvalidInstructionKeysError=ne.TokenInvalidInstructionProgramError=ne.TokenOwnerOffCurveError=ne.TokenInvalidOwnerError=ne.TokenInvalidMintError=ne.TokenInvalidAccountSizeError=ne.TokenInvalidAccountOwnerError=ne.TokenAccountNotFoundError=ne.TokenError=void 0;var Kt=class extends Error{constructor(e){super(e)}};ne.TokenError=Kt;var wa=class extends Kt{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}};ne.TokenAccountNotFoundError=wa;var va=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}};ne.TokenInvalidAccountOwnerError=va;var Sa=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}};ne.TokenInvalidAccountSizeError=Sa;var Ta=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidMintError"}};ne.TokenInvalidMintError=Ta;var Pa=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}};ne.TokenInvalidOwnerError=Pa;var Ma=class extends Kt{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}};ne.TokenOwnerOffCurveError=Ma;var Ia=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}};ne.TokenInvalidInstructionProgramError=Ia;var Aa=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}};ne.TokenInvalidInstructionKeysError=Aa;var Ba=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}};ne.TokenInvalidInstructionDataError=Ba;var ka=class extends Kt{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}};ne.TokenInvalidInstructionTypeError=ka});var tn=M(Ci=>{_();b();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.TokenInstruction=void 0;var Mg;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2"})(Mg=Ci.TokenInstruction||(Ci.TokenInstruction={}))});var _n=M(Uo=>{_();b();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.addSigners=void 0;var Ig=ie();function Ag(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(let n of t)r.push({pubkey:n instanceof Ig.PublicKey?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}Uo.addSigners=Ag});var cd=M(mt=>{_();b();Object.defineProperty(mt,"__esModule",{value:!0});mt.decodeTransferInstructionUnchecked=mt.decodeTransferInstruction=mt.createTransferInstruction=mt.transferInstructionData=void 0;var Ea=He(),Bg=ie(),sd=mr(),zo=Nr(),kg=_n(),ad=tn();mt.transferInstructionData=(0,Ea.struct)([(0,Ea.u8)("instruction"),(0,Ea.u64)("amount")]);function Eg(r,e,t,n,i=[],a=sd.TOKEN_PROGRAM_ID){let d=(0,kg.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,i),y=T.Buffer.alloc(mt.transferInstructionData.span);return mt.transferInstructionData.encode({instruction:ad.TokenInstruction.Transfer,amount:BigInt(n)},y),new Bg.TransactionInstruction({keys:d,programId:a,data:y})}mt.createTransferInstruction=Eg;function Og(r,e=sd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new zo.TokenInvalidInstructionProgramError;if(r.data.length!==mt.transferInstructionData.span)throw new zo.TokenInvalidInstructionDataError;let{keys:{source:t,destination:n,owner:i,multiSigners:a},data:d}=ud(r);if(d.instruction!==ad.TokenInstruction.Transfer)throw new zo.TokenInvalidInstructionTypeError;if(!t||!n||!i)throw new zo.TokenInvalidInstructionKeysError;return{programId:e,keys:{source:t,destination:n,owner:i,multiSigners:a},data:d}}mt.decodeTransferInstruction=Og;function ud({programId:r,keys:[e,t,n,...i],data:a}){return{programId:r,keys:{source:e,destination:t,owner:n,multiSigners:i},data:mt.transferInstructionData.decode(a)}}mt.decodeTransferInstructionUnchecked=ud});var hd=M(wt=>{_();b();Object.defineProperty(wt,"__esModule",{value:!0});wt.decodeTransferCheckedInstructionUnchecked=wt.decodeTransferCheckedInstruction=wt.createTransferCheckedInstruction=wt.transferCheckedInstructionData=void 0;var No=He(),Cg=ie(),dd=mr(),Ro=Nr(),Kg=_n(),ld=tn();wt.transferCheckedInstructionData=(0,No.struct)([(0,No.u8)("instruction"),(0,No.u64)("amount"),(0,No.u8)("decimals")]);function xg(r,e,t,n,i,a,d=[],y=dd.TOKEN_PROGRAM_ID){let w=(0,Kg.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],n,d),P=T.Buffer.alloc(wt.transferCheckedInstructionData.span);return wt.transferCheckedInstructionData.encode({instruction:ld.TokenInstruction.TransferChecked,amount:BigInt(i),decimals:a},P),new Cg.TransactionInstruction({keys:w,programId:y,data:P})}wt.createTransferCheckedInstruction=xg;function Lg(r,e=dd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new Ro.TokenInvalidInstructionProgramError;if(r.data.length!==wt.transferCheckedInstructionData.span)throw new Ro.TokenInvalidInstructionDataError;let{keys:{source:t,mint:n,destination:i,owner:a,multiSigners:d},data:y}=fd(r);if(y.instruction!==ld.TokenInstruction.TransferChecked)throw new Ro.TokenInvalidInstructionTypeError;if(!t||!n||!i||!a)throw new Ro.TokenInvalidInstructionKeysError;return{programId:e,keys:{source:t,mint:n,destination:i,owner:a,multiSigners:d},data:y}}wt.decodeTransferCheckedInstruction=Lg;function fd({programId:r,keys:[e,t,n,i,...a],data:d}){return{programId:r,keys:{source:e,mint:t,destination:n,owner:i,multiSigners:a},data:wt.transferCheckedInstructionData.decode(d)}}wt.decodeTransferCheckedInstructionUnchecked=fd});var yd=M(jo=>{_();b();Object.defineProperty(jo,"__esModule",{value:!0});jo.createAssociatedTokenAccountInstruction=void 0;var Oa=ie(),gd=mr();function Dg(r,e,t,n,i=gd.TOKEN_PROGRAM_ID,a=gd.ASSOCIATED_TOKEN_PROGRAM_ID){let d=[{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Oa.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Oa.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new Oa.TransactionInstruction({keys:d,programId:a,data:T.Buffer.alloc(0)})}jo.createAssociatedTokenAccountInstruction=Dg});var md=M(vt=>{_();b();Object.defineProperty(vt,"__esModule",{value:!0});vt.decodeBurnInstructionUnchecked=vt.decodeBurnInstruction=vt.createBurnInstruction=vt.burnInstructionData=void 0;var Ca=He(),qg=ie(),pd=mr(),Fo=Nr(),Ug=_n(),_d=tn();vt.burnInstructionData=(0,Ca.struct)([(0,Ca.u8)("instruction"),(0,Ca.u64)("amount")]);function zg(r,e,t,n,i=[],a=pd.TOKEN_PROGRAM_ID){let d=(0,Ug.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,i),y=T.Buffer.alloc(vt.burnInstructionData.span);return vt.burnInstructionData.encode({instruction:_d.TokenInstruction.Burn,amount:BigInt(n)},y),new qg.TransactionInstruction({keys:d,programId:a,data:y})}vt.createBurnInstruction=zg;function Ng(r,e=pd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new Fo.TokenInvalidInstructionProgramError;if(r.data.length!==vt.burnInstructionData.span)throw new Fo.TokenInvalidInstructionDataError;let{keys:{account:t,mint:n,owner:i,multiSigners:a},data:d}=bd(r);if(d.instruction!==_d.TokenInstruction.Burn)throw new Fo.TokenInvalidInstructionTypeError;if(!t||!n||!i)throw new Fo.TokenInvalidInstructionKeysError;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:a},data:d}}vt.decodeBurnInstruction=Ng;function bd({programId:r,keys:[e,t,n,...i],data:a}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:vt.burnInstructionData.decode(a)}}vt.decodeBurnInstructionUnchecked=bd});var Td=M(St=>{_();b();Object.defineProperty(St,"__esModule",{value:!0});St.decodeBurnCheckedInstructionUnchecked=St.decodeBurnCheckedInstruction=St.createBurnCheckedInstruction=St.burnCheckedInstructionData=void 0;var Vo=He(),Rg=ie(),wd=mr(),Yo=Nr(),jg=_n(),vd=tn();St.burnCheckedInstructionData=(0,Vo.struct)([(0,Vo.u8)("instruction"),(0,Vo.u64)("amount"),(0,Vo.u8)("decimals")]);function Fg(r,e,t,n,i,a=[],d=wd.TOKEN_PROGRAM_ID){let y=(0,jg.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,a),w=T.Buffer.alloc(St.burnCheckedInstructionData.span);return St.burnCheckedInstructionData.encode({instruction:vd.TokenInstruction.BurnChecked,amount:BigInt(n),decimals:i},w),new Rg.TransactionInstruction({keys:y,programId:d,data:w})}St.createBurnCheckedInstruction=Fg;function Vg(r,e=wd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new Yo.TokenInvalidInstructionProgramError;if(r.data.length!==St.burnCheckedInstructionData.span)throw new Yo.TokenInvalidInstructionDataError;let{keys:{account:t,mint:n,owner:i,multiSigners:a},data:d}=Sd(r);if(d.instruction!==vd.TokenInstruction.BurnChecked)throw new Yo.TokenInvalidInstructionTypeError;if(!t||!n||!i)throw new Yo.TokenInvalidInstructionKeysError;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:a},data:d}}St.decodeBurnCheckedInstruction=Vg;function Sd({programId:r,keys:[e,t,n,...i],data:a}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:St.burnCheckedInstructionData.decode(a)}}St.decodeBurnCheckedInstructionUnchecked=Sd});var Ad=M(Tt=>{_();b();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.decodeMintToInstructionUnchecked=Tt.decodeMintToInstruction=Tt.createMintToInstruction=Tt.mintToInstructionData=void 0;var Ka=He(),Yg=ie(),Pd=mr(),Go=Nr(),Gg=_n(),Md=tn();Tt.mintToInstructionData=(0,Ka.struct)([(0,Ka.u8)("instruction"),(0,Ka.u64)("amount")]);function Wg(r,e,t,n,i=[],a=Pd.TOKEN_PROGRAM_ID){let d=(0,Gg.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,i),y=T.Buffer.alloc(Tt.mintToInstructionData.span);return Tt.mintToInstructionData.encode({instruction:Md.TokenInstruction.MintTo,amount:BigInt(n)},y),new Yg.TransactionInstruction({keys:d,programId:a,data:y})}Tt.createMintToInstruction=Wg;function $g(r,e=Pd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new Go.TokenInvalidInstructionProgramError;if(r.data.length!==Tt.mintToInstructionData.span)throw new Go.TokenInvalidInstructionDataError;let{keys:{mint:t,destination:n,authority:i,multiSigners:a},data:d}=Id(r);if(d.instruction!==Md.TokenInstruction.MintTo)throw new Go.TokenInvalidInstructionTypeError;if(!t||!n||!i)throw new Go.TokenInvalidInstructionKeysError;return{programId:e,keys:{mint:t,destination:n,authority:i,multiSigners:a},data:d}}Tt.decodeMintToInstruction=$g;function Id({programId:r,keys:[e,t,n,...i],data:a}){return{programId:r,keys:{mint:e,destination:t,authority:n,multiSigners:i},data:Tt.mintToInstructionData.decode(a)}}Tt.decodeMintToInstructionUnchecked=Id});var Od=M(Pt=>{_();b();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.decodeMintToCheckedInstructionUnchecked=Pt.decodeMintToCheckedInstruction=Pt.createMintToCheckedInstruction=Pt.mintToCheckedInstructionData=void 0;var Wo=He(),Hg=ie(),Bd=mr(),$o=Nr(),Zg=_n(),kd=tn();Pt.mintToCheckedInstructionData=(0,Wo.struct)([(0,Wo.u8)("instruction"),(0,Wo.u64)("amount"),(0,Wo.u8)("decimals")]);function Jg(r,e,t,n,i,a=[],d=Bd.TOKEN_PROGRAM_ID){let y=(0,Zg.addSigners)([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,a),w=T.Buffer.alloc(Pt.mintToCheckedInstructionData.span);return Pt.mintToCheckedInstructionData.encode({instruction:kd.TokenInstruction.MintToChecked,amount:BigInt(n),decimals:i},w),new Hg.TransactionInstruction({keys:y,programId:d,data:w})}Pt.createMintToCheckedInstruction=Jg;function Xg(r,e=Bd.TOKEN_PROGRAM_ID){if(!r.programId.equals(e))throw new $o.TokenInvalidInstructionProgramError;if(r.data.length!==Pt.mintToCheckedInstructionData.span)throw new $o.TokenInvalidInstructionDataError;let{keys:{mint:t,destination:n,authority:i,multiSigners:a},data:d}=Ed(r);if(d.instruction!==kd.TokenInstruction.MintToChecked)throw new $o.TokenInvalidInstructionTypeError;if(!t||!n||!i)throw new $o.TokenInvalidInstructionKeysError;return{programId:e,keys:{mint:t,destination:n,authority:i,multiSigners:a},data:d}}Pt.decodeMintToCheckedInstruction=Xg;function Ed({programId:r,keys:[e,t,n,...i],data:a}){return{programId:r,keys:{mint:e,destination:t,authority:n,multiSigners:i},data:Pt.mintToCheckedInstructionData.decode(a)}}Pt.decodeMintToCheckedInstructionUnchecked=Ed});var Cd=M(Mt=>{_();b();var Qg=Mt&&Mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),rn=Mt&&Mt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Qg(e,r,t)};Object.defineProperty(Mt,"__esModule",{value:!0});rn(tn(),Mt);rn(cd(),Mt);rn(hd(),Mt);rn(yd(),Mt);rn(md(),Mt);rn(Td(),Mt);rn(Ad(),Mt);rn(Od(),Mt)});var Ho=M(or=>{_();b();var ey=or&&or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),xa=or&&or.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ey(e,r,t)};Object.defineProperty(or,"__esModule",{value:!0});or.getAssociatedTokenAddress=void 0;var Kd=ie(),xd=mr(),ty=Nr();xa(Cd(),or);xa(mr(),or);xa(Nr(),or);async function ry(r,e,t=!1,n=xd.TOKEN_PROGRAM_ID,i=xd.ASSOCIATED_TOKEN_PROGRAM_ID){if(!t&&!Kd.PublicKey.isOnCurve(e.toBuffer()))throw new ty.TokenOwnerOffCurveError;let[a]=await Kd.PublicKey.findProgramAddress([e.toBuffer(),n.toBuffer(),r.toBuffer()],i);return a}or.getAssociatedTokenAddress=ry});var it=M(nt=>{_();b();Object.defineProperty(nt,"__esModule",{value:!0});nt.isElementCollectionFixedSizeBeet=nt.isFixableBeet=nt.assertFixedSizeBeet=nt.isFixedSizeBeet=nt.BEET_TYPE_ARG_INNER=nt.BEET_TYPE_ARG_LEN=nt.BEET_PACKAGE=void 0;var ny=dr();nt.BEET_PACKAGE="@metaplex-foundation/beet";nt.BEET_TYPE_ARG_LEN="len";nt.BEET_TYPE_ARG_INNER="Beet<{innner}>";function Ld(r){return Object.keys(r).includes("byteSize")}nt.isFixedSizeBeet=Ld;function iy(r,e=`${r} should have been a fixed beet`){(0,ny.strict)(Ld(r),e)}nt.assertFixedSizeBeet=iy;function oy(r){return typeof r.toFixedFromData=="function"&&typeof r.toFixedFromValue=="function"}nt.isFixableBeet=oy;function sy(r){let e=Object.keys(r);return e.includes("length")&&e.includes("elementByteSize")&&e.includes("lenPrefixByteSize")}nt.isElementCollectionFixedSizeBeet=sy});var qd=M((Dd,La)=>{_();b();(function(r,e){"use strict";function t(p,o){if(!p)throw new Error(o||"Assertion failed")}function n(p,o){p.super_=o;var u=function(){};u.prototype=o.prototype,p.prototype=new u,p.prototype.constructor=p}function i(p,o,u){if(i.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((o==="le"||o==="be")&&(u=o,o=10),this._init(p||0,o||10,u||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=gt().Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,u){return o.cmp(u)>0?o:u},i.min=function(o,u){return o.cmp(u)<0?o:u},i.prototype._init=function(o,u,c){if(typeof o=="number")return this._initNumber(o,u,c);if(typeof o=="object")return this._initArray(o,u,c);u==="hex"&&(u=16),t(u===(u|0)&&u>=2&&u<=36),o=o.toString().replace(/\s+/g,"");var l=0;o[0]==="-"&&(l++,this.negative=1),l<o.length&&(u===16?this._parseHex(o,l,c):(this._parseBase(o,u,l),c==="le"&&this._initArray(this.toArray(),u,c)))},i.prototype._initNumber=function(o,u,c){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(t(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),c==="le"&&this._initArray(this.toArray(),u,c)},i.prototype._initArray=function(o,u,c){if(t(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var h,m,v=0;if(c==="be")for(l=o.length-1,h=0;l>=0;l-=3)m=o[l]|o[l-1]<<8|o[l-2]<<16,this.words[h]|=m<<v&67108863,this.words[h+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,h++);else if(c==="le")for(l=0,h=0;l<o.length;l+=3)m=o[l]|o[l+1]<<8|o[l+2]<<16,this.words[h]|=m<<v&67108863,this.words[h+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,h++);return this._strip()};function d(p,o){var u=p.charCodeAt(o);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;t(!1,"Invalid character in "+p)}function y(p,o,u){var c=d(p,u);return u-1>=o&&(c|=d(p,u-1)<<4),c}i.prototype._parseHex=function(o,u,c){this.length=Math.ceil((o.length-u)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var h=0,m=0,v;if(c==="be")for(l=o.length-1;l>=u;l-=2)v=y(o,u,l)<<h,this.words[m]|=v&67108863,h>=18?(h-=18,m+=1,this.words[m]|=v>>>26):h+=8;else{var f=o.length-u;for(l=f%2===0?u+1:u;l<o.length;l+=2)v=y(o,u,l)<<h,this.words[m]|=v&67108863,h>=18?(h-=18,m+=1,this.words[m]|=v>>>26):h+=8}this._strip()};function w(p,o,u,c){for(var l=0,h=0,m=Math.min(p.length,u),v=o;v<m;v++){var f=p.charCodeAt(v)-48;l*=c,f>=49?h=f-49+10:f>=17?h=f-17+10:h=f,t(f>=0&&h<c,"Invalid character"),l+=h}return l}i.prototype._parseBase=function(o,u,c){this.words=[0],this.length=1;for(var l=0,h=1;h<=67108863;h*=u)l++;l--,h=h/u|0;for(var m=o.length-c,v=m%l,f=Math.min(m,m-v)+c,s=0,g=c;g<f;g+=l)s=w(o,g,g+l,u),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(v!==0){var O=1;for(s=w(o,g,o.length,u),g=0;g<v;g++)O*=u;this.imuln(O),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var u=0;u<this.length;u++)o.words[u]=this.words[u];o.length=this.length,o.negative=this.negative,o.red=this.red};function P(p,o){p.words=o.words,p.length=o.length,p.negative=o.negative,p.red=o.red}if(i.prototype._move=function(o){P(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=B}catch{i.prototype.inspect=B}else i.prototype.inspect=B;function B(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,u){o=o||10,u=u|0||1;var c;if(o===16||o==="hex"){c="";for(var l=0,h=0,m=0;m<this.length;m++){var v=this.words[m],f=((v<<l|h)&16777215).toString(16);h=v>>>24-l&16777215,l+=2,l>=26&&(l-=26,m--),h!==0||m!==this.length-1?c=A[6-f.length]+f+c:c=f+c}for(h!==0&&(c=h.toString(16)+c);c.length%u!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}if(o===(o|0)&&o>=2&&o<=36){var s=k[o],g=C[o];c="";var O=this.clone();for(O.negative=0;!O.isZero();){var K=O.modrn(g).toString(o);O=O.idivn(g),O.isZero()?c=K+c:c=A[s-K.length]+K+c}for(this.isZero()&&(c="0"+c);c.length%u!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,u){return this.toArrayLike(a,o,u)}),i.prototype.toArray=function(o,u){return this.toArrayLike(Array,o,u)};var z=function(o,u){return o.allocUnsafe?o.allocUnsafe(u):new o(u)};i.prototype.toArrayLike=function(o,u,c){this._strip();var l=this.byteLength(),h=c||Math.max(1,l);t(l<=h,"byte array longer than desired length"),t(h>0,"Requested array length <= 0");var m=z(o,h),v=u==="le"?"LE":"BE";return this["_toArrayLike"+v](m,l),m},i.prototype._toArrayLikeLE=function(o,u){for(var c=0,l=0,h=0,m=0;h<this.length;h++){var v=this.words[h]<<m|l;o[c++]=v&255,c<o.length&&(o[c++]=v>>8&255),c<o.length&&(o[c++]=v>>16&255),m===6?(c<o.length&&(o[c++]=v>>24&255),l=0,m=0):(l=v>>>24,m+=2)}if(c<o.length)for(o[c++]=l;c<o.length;)o[c++]=0},i.prototype._toArrayLikeBE=function(o,u){for(var c=o.length-1,l=0,h=0,m=0;h<this.length;h++){var v=this.words[h]<<m|l;o[c--]=v&255,c>=0&&(o[c--]=v>>8&255),c>=0&&(o[c--]=v>>16&255),m===6?(c>=0&&(o[c--]=v>>24&255),l=0,m=0):(l=v>>>24,m+=2)}if(c>=0)for(o[c--]=l;c>=0;)o[c--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var u=o,c=0;return u>=4096&&(c+=13,u>>>=13),u>=64&&(c+=7,u>>>=7),u>=8&&(c+=4,u>>>=4),u>=2&&(c+=2,u>>>=2),c+u},i.prototype._zeroBits=function(o){if(o===0)return 26;var u=o,c=0;return(u&8191)===0&&(c+=13,u>>>=13),(u&127)===0&&(c+=7,u>>>=7),(u&15)===0&&(c+=4,u>>>=4),(u&3)===0&&(c+=2,u>>>=2),(u&1)===0&&c++,c},i.prototype.bitLength=function(){var o=this.words[this.length-1],u=this._countBits(o);return(this.length-1)*26+u};function E(p){for(var o=new Array(p.bitLength()),u=0;u<o.length;u++){var c=u/26|0,l=u%26;o[u]=p.words[c]>>>l&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,u=0;u<this.length;u++){var c=this._zeroBits(this.words[u]);if(o+=c,c!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var u=0;u<o.length;u++)this.words[u]=this.words[u]|o.words[u];return this._strip()},i.prototype.ior=function(o){return t((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var u;this.length>o.length?u=o:u=this;for(var c=0;c<u.length;c++)this.words[c]=this.words[c]&o.words[c];return this.length=u.length,this._strip()},i.prototype.iand=function(o){return t((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var u,c;this.length>o.length?(u=this,c=o):(u=o,c=this);for(var l=0;l<c.length;l++)this.words[l]=u.words[l]^c.words[l];if(this!==u)for(;l<u.length;l++)this.words[l]=u.words[l];return this.length=u.length,this._strip()},i.prototype.ixor=function(o){return t((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){t(typeof o=="number"&&o>=0);var u=Math.ceil(o/26)|0,c=o%26;this._expand(u),c>0&&u--;for(var l=0;l<u;l++)this.words[l]=~this.words[l]&67108863;return c>0&&(this.words[l]=~this.words[l]&67108863>>26-c),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,u){t(typeof o=="number"&&o>=0);var c=o/26|0,l=o%26;return this._expand(c+1),u?this.words[c]=this.words[c]|1<<l:this.words[c]=this.words[c]&~(1<<l),this._strip()},i.prototype.iadd=function(o){var u;if(this.negative!==0&&o.negative===0)return this.negative=0,u=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,u=this.isub(o),o.negative=1,u._normSign();var c,l;this.length>o.length?(c=this,l=o):(c=o,l=this);for(var h=0,m=0;m<l.length;m++)u=(c.words[m]|0)+(l.words[m]|0)+h,this.words[m]=u&67108863,h=u>>>26;for(;h!==0&&m<c.length;m++)u=(c.words[m]|0)+h,this.words[m]=u&67108863,h=u>>>26;if(this.length=c.length,h!==0)this.words[this.length]=h,this.length++;else if(c!==this)for(;m<c.length;m++)this.words[m]=c.words[m];return this},i.prototype.add=function(o){var u;return o.negative!==0&&this.negative===0?(o.negative=0,u=this.sub(o),o.negative^=1,u):o.negative===0&&this.negative!==0?(this.negative=0,u=o.sub(this),this.negative=1,u):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var u=this.iadd(o);return o.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var c=this.cmp(o);if(c===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,h;c>0?(l=this,h=o):(l=o,h=this);for(var m=0,v=0;v<h.length;v++)u=(l.words[v]|0)-(h.words[v]|0)+m,m=u>>26,this.words[v]=u&67108863;for(;m!==0&&v<l.length;v++)u=(l.words[v]|0)+m,m=u>>26,this.words[v]=u&67108863;if(m===0&&v<l.length&&l!==this)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=Math.max(this.length,v),l!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function L(p,o,u){u.negative=o.negative^p.negative;var c=p.length+o.length|0;u.length=c,c=c-1|0;var l=p.words[0]|0,h=o.words[0]|0,m=l*h,v=m&67108863,f=m/67108864|0;u.words[0]=v;for(var s=1;s<c;s++){for(var g=f>>>26,O=f&67108863,K=Math.min(s,o.length-1),x=Math.max(0,s-p.length+1);x<=K;x++){var U=s-x|0;l=p.words[U]|0,h=o.words[x]|0,m=l*h+O,g+=m/67108864|0,O=m&67108863}u.words[s]=O|0,f=g|0}return f!==0?u.words[s]=f|0:u.length--,u._strip()}var q=function(o,u,c){var l=o.words,h=u.words,m=c.words,v=0,f,s,g,O=l[0]|0,K=O&8191,x=O>>>13,U=l[1]|0,W=U&8191,J=U>>>13,Gr=l[2]|0,X=Gr&8191,te=Gr>>>13,Lu=l[3]|0,he=Lu&8191,ge=Lu>>>13,Du=l[4]|0,ye=Du&8191,pe=Du>>>13,qu=l[5]|0,_e=qu&8191,be=qu>>>13,Uu=l[6]|0,me=Uu&8191,we=Uu>>>13,zu=l[7]|0,ve=zu&8191,Se=zu>>>13,Nu=l[8]|0,Te=Nu&8191,Pe=Nu>>>13,Ru=l[9]|0,Me=Ru&8191,Ie=Ru>>>13,ju=h[0]|0,Ae=ju&8191,Be=ju>>>13,Fu=h[1]|0,ke=Fu&8191,Ee=Fu>>>13,Vu=h[2]|0,Oe=Vu&8191,Ce=Vu>>>13,Yu=h[3]|0,Ke=Yu&8191,xe=Yu>>>13,Gu=h[4]|0,Le=Gu&8191,De=Gu>>>13,Wu=h[5]|0,qe=Wu&8191,Ue=Wu>>>13,$u=h[6]|0,ze=$u&8191,Ne=$u>>>13,Hu=h[7]|0,Re=Hu&8191,je=Hu>>>13,Zu=h[8]|0,Fe=Zu&8191,Ve=Zu>>>13,Ju=h[9]|0,Ye=Ju&8191,Ge=Ju>>>13;c.negative=o.negative^u.negative,c.length=19,f=Math.imul(K,Ae),s=Math.imul(K,Be),s=s+Math.imul(x,Ae)|0,g=Math.imul(x,Be);var Ss=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,f=Math.imul(W,Ae),s=Math.imul(W,Be),s=s+Math.imul(J,Ae)|0,g=Math.imul(J,Be),f=f+Math.imul(K,ke)|0,s=s+Math.imul(K,Ee)|0,s=s+Math.imul(x,ke)|0,g=g+Math.imul(x,Ee)|0;var Ts=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,f=Math.imul(X,Ae),s=Math.imul(X,Be),s=s+Math.imul(te,Ae)|0,g=Math.imul(te,Be),f=f+Math.imul(W,ke)|0,s=s+Math.imul(W,Ee)|0,s=s+Math.imul(J,ke)|0,g=g+Math.imul(J,Ee)|0,f=f+Math.imul(K,Oe)|0,s=s+Math.imul(K,Ce)|0,s=s+Math.imul(x,Oe)|0,g=g+Math.imul(x,Ce)|0;var Ps=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,f=Math.imul(he,Ae),s=Math.imul(he,Be),s=s+Math.imul(ge,Ae)|0,g=Math.imul(ge,Be),f=f+Math.imul(X,ke)|0,s=s+Math.imul(X,Ee)|0,s=s+Math.imul(te,ke)|0,g=g+Math.imul(te,Ee)|0,f=f+Math.imul(W,Oe)|0,s=s+Math.imul(W,Ce)|0,s=s+Math.imul(J,Oe)|0,g=g+Math.imul(J,Ce)|0,f=f+Math.imul(K,Ke)|0,s=s+Math.imul(K,xe)|0,s=s+Math.imul(x,Ke)|0,g=g+Math.imul(x,xe)|0;var Ms=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,f=Math.imul(ye,Ae),s=Math.imul(ye,Be),s=s+Math.imul(pe,Ae)|0,g=Math.imul(pe,Be),f=f+Math.imul(he,ke)|0,s=s+Math.imul(he,Ee)|0,s=s+Math.imul(ge,ke)|0,g=g+Math.imul(ge,Ee)|0,f=f+Math.imul(X,Oe)|0,s=s+Math.imul(X,Ce)|0,s=s+Math.imul(te,Oe)|0,g=g+Math.imul(te,Ce)|0,f=f+Math.imul(W,Ke)|0,s=s+Math.imul(W,xe)|0,s=s+Math.imul(J,Ke)|0,g=g+Math.imul(J,xe)|0,f=f+Math.imul(K,Le)|0,s=s+Math.imul(K,De)|0,s=s+Math.imul(x,Le)|0,g=g+Math.imul(x,De)|0;var Is=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Is>>>26)|0,Is&=67108863,f=Math.imul(_e,Ae),s=Math.imul(_e,Be),s=s+Math.imul(be,Ae)|0,g=Math.imul(be,Be),f=f+Math.imul(ye,ke)|0,s=s+Math.imul(ye,Ee)|0,s=s+Math.imul(pe,ke)|0,g=g+Math.imul(pe,Ee)|0,f=f+Math.imul(he,Oe)|0,s=s+Math.imul(he,Ce)|0,s=s+Math.imul(ge,Oe)|0,g=g+Math.imul(ge,Ce)|0,f=f+Math.imul(X,Ke)|0,s=s+Math.imul(X,xe)|0,s=s+Math.imul(te,Ke)|0,g=g+Math.imul(te,xe)|0,f=f+Math.imul(W,Le)|0,s=s+Math.imul(W,De)|0,s=s+Math.imul(J,Le)|0,g=g+Math.imul(J,De)|0,f=f+Math.imul(K,qe)|0,s=s+Math.imul(K,Ue)|0,s=s+Math.imul(x,qe)|0,g=g+Math.imul(x,Ue)|0;var As=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(As>>>26)|0,As&=67108863,f=Math.imul(me,Ae),s=Math.imul(me,Be),s=s+Math.imul(we,Ae)|0,g=Math.imul(we,Be),f=f+Math.imul(_e,ke)|0,s=s+Math.imul(_e,Ee)|0,s=s+Math.imul(be,ke)|0,g=g+Math.imul(be,Ee)|0,f=f+Math.imul(ye,Oe)|0,s=s+Math.imul(ye,Ce)|0,s=s+Math.imul(pe,Oe)|0,g=g+Math.imul(pe,Ce)|0,f=f+Math.imul(he,Ke)|0,s=s+Math.imul(he,xe)|0,s=s+Math.imul(ge,Ke)|0,g=g+Math.imul(ge,xe)|0,f=f+Math.imul(X,Le)|0,s=s+Math.imul(X,De)|0,s=s+Math.imul(te,Le)|0,g=g+Math.imul(te,De)|0,f=f+Math.imul(W,qe)|0,s=s+Math.imul(W,Ue)|0,s=s+Math.imul(J,qe)|0,g=g+Math.imul(J,Ue)|0,f=f+Math.imul(K,ze)|0,s=s+Math.imul(K,Ne)|0,s=s+Math.imul(x,ze)|0,g=g+Math.imul(x,Ne)|0;var Bs=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,f=Math.imul(ve,Ae),s=Math.imul(ve,Be),s=s+Math.imul(Se,Ae)|0,g=Math.imul(Se,Be),f=f+Math.imul(me,ke)|0,s=s+Math.imul(me,Ee)|0,s=s+Math.imul(we,ke)|0,g=g+Math.imul(we,Ee)|0,f=f+Math.imul(_e,Oe)|0,s=s+Math.imul(_e,Ce)|0,s=s+Math.imul(be,Oe)|0,g=g+Math.imul(be,Ce)|0,f=f+Math.imul(ye,Ke)|0,s=s+Math.imul(ye,xe)|0,s=s+Math.imul(pe,Ke)|0,g=g+Math.imul(pe,xe)|0,f=f+Math.imul(he,Le)|0,s=s+Math.imul(he,De)|0,s=s+Math.imul(ge,Le)|0,g=g+Math.imul(ge,De)|0,f=f+Math.imul(X,qe)|0,s=s+Math.imul(X,Ue)|0,s=s+Math.imul(te,qe)|0,g=g+Math.imul(te,Ue)|0,f=f+Math.imul(W,ze)|0,s=s+Math.imul(W,Ne)|0,s=s+Math.imul(J,ze)|0,g=g+Math.imul(J,Ne)|0,f=f+Math.imul(K,Re)|0,s=s+Math.imul(K,je)|0,s=s+Math.imul(x,Re)|0,g=g+Math.imul(x,je)|0;var ks=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(ks>>>26)|0,ks&=67108863,f=Math.imul(Te,Ae),s=Math.imul(Te,Be),s=s+Math.imul(Pe,Ae)|0,g=Math.imul(Pe,Be),f=f+Math.imul(ve,ke)|0,s=s+Math.imul(ve,Ee)|0,s=s+Math.imul(Se,ke)|0,g=g+Math.imul(Se,Ee)|0,f=f+Math.imul(me,Oe)|0,s=s+Math.imul(me,Ce)|0,s=s+Math.imul(we,Oe)|0,g=g+Math.imul(we,Ce)|0,f=f+Math.imul(_e,Ke)|0,s=s+Math.imul(_e,xe)|0,s=s+Math.imul(be,Ke)|0,g=g+Math.imul(be,xe)|0,f=f+Math.imul(ye,Le)|0,s=s+Math.imul(ye,De)|0,s=s+Math.imul(pe,Le)|0,g=g+Math.imul(pe,De)|0,f=f+Math.imul(he,qe)|0,s=s+Math.imul(he,Ue)|0,s=s+Math.imul(ge,qe)|0,g=g+Math.imul(ge,Ue)|0,f=f+Math.imul(X,ze)|0,s=s+Math.imul(X,Ne)|0,s=s+Math.imul(te,ze)|0,g=g+Math.imul(te,Ne)|0,f=f+Math.imul(W,Re)|0,s=s+Math.imul(W,je)|0,s=s+Math.imul(J,Re)|0,g=g+Math.imul(J,je)|0,f=f+Math.imul(K,Fe)|0,s=s+Math.imul(K,Ve)|0,s=s+Math.imul(x,Fe)|0,g=g+Math.imul(x,Ve)|0;var Es=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Es>>>26)|0,Es&=67108863,f=Math.imul(Me,Ae),s=Math.imul(Me,Be),s=s+Math.imul(Ie,Ae)|0,g=Math.imul(Ie,Be),f=f+Math.imul(Te,ke)|0,s=s+Math.imul(Te,Ee)|0,s=s+Math.imul(Pe,ke)|0,g=g+Math.imul(Pe,Ee)|0,f=f+Math.imul(ve,Oe)|0,s=s+Math.imul(ve,Ce)|0,s=s+Math.imul(Se,Oe)|0,g=g+Math.imul(Se,Ce)|0,f=f+Math.imul(me,Ke)|0,s=s+Math.imul(me,xe)|0,s=s+Math.imul(we,Ke)|0,g=g+Math.imul(we,xe)|0,f=f+Math.imul(_e,Le)|0,s=s+Math.imul(_e,De)|0,s=s+Math.imul(be,Le)|0,g=g+Math.imul(be,De)|0,f=f+Math.imul(ye,qe)|0,s=s+Math.imul(ye,Ue)|0,s=s+Math.imul(pe,qe)|0,g=g+Math.imul(pe,Ue)|0,f=f+Math.imul(he,ze)|0,s=s+Math.imul(he,Ne)|0,s=s+Math.imul(ge,ze)|0,g=g+Math.imul(ge,Ne)|0,f=f+Math.imul(X,Re)|0,s=s+Math.imul(X,je)|0,s=s+Math.imul(te,Re)|0,g=g+Math.imul(te,je)|0,f=f+Math.imul(W,Fe)|0,s=s+Math.imul(W,Ve)|0,s=s+Math.imul(J,Fe)|0,g=g+Math.imul(J,Ve)|0,f=f+Math.imul(K,Ye)|0,s=s+Math.imul(K,Ge)|0,s=s+Math.imul(x,Ye)|0,g=g+Math.imul(x,Ge)|0;var Os=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Os>>>26)|0,Os&=67108863,f=Math.imul(Me,ke),s=Math.imul(Me,Ee),s=s+Math.imul(Ie,ke)|0,g=Math.imul(Ie,Ee),f=f+Math.imul(Te,Oe)|0,s=s+Math.imul(Te,Ce)|0,s=s+Math.imul(Pe,Oe)|0,g=g+Math.imul(Pe,Ce)|0,f=f+Math.imul(ve,Ke)|0,s=s+Math.imul(ve,xe)|0,s=s+Math.imul(Se,Ke)|0,g=g+Math.imul(Se,xe)|0,f=f+Math.imul(me,Le)|0,s=s+Math.imul(me,De)|0,s=s+Math.imul(we,Le)|0,g=g+Math.imul(we,De)|0,f=f+Math.imul(_e,qe)|0,s=s+Math.imul(_e,Ue)|0,s=s+Math.imul(be,qe)|0,g=g+Math.imul(be,Ue)|0,f=f+Math.imul(ye,ze)|0,s=s+Math.imul(ye,Ne)|0,s=s+Math.imul(pe,ze)|0,g=g+Math.imul(pe,Ne)|0,f=f+Math.imul(he,Re)|0,s=s+Math.imul(he,je)|0,s=s+Math.imul(ge,Re)|0,g=g+Math.imul(ge,je)|0,f=f+Math.imul(X,Fe)|0,s=s+Math.imul(X,Ve)|0,s=s+Math.imul(te,Fe)|0,g=g+Math.imul(te,Ve)|0,f=f+Math.imul(W,Ye)|0,s=s+Math.imul(W,Ge)|0,s=s+Math.imul(J,Ye)|0,g=g+Math.imul(J,Ge)|0;var Cs=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,f=Math.imul(Me,Oe),s=Math.imul(Me,Ce),s=s+Math.imul(Ie,Oe)|0,g=Math.imul(Ie,Ce),f=f+Math.imul(Te,Ke)|0,s=s+Math.imul(Te,xe)|0,s=s+Math.imul(Pe,Ke)|0,g=g+Math.imul(Pe,xe)|0,f=f+Math.imul(ve,Le)|0,s=s+Math.imul(ve,De)|0,s=s+Math.imul(Se,Le)|0,g=g+Math.imul(Se,De)|0,f=f+Math.imul(me,qe)|0,s=s+Math.imul(me,Ue)|0,s=s+Math.imul(we,qe)|0,g=g+Math.imul(we,Ue)|0,f=f+Math.imul(_e,ze)|0,s=s+Math.imul(_e,Ne)|0,s=s+Math.imul(be,ze)|0,g=g+Math.imul(be,Ne)|0,f=f+Math.imul(ye,Re)|0,s=s+Math.imul(ye,je)|0,s=s+Math.imul(pe,Re)|0,g=g+Math.imul(pe,je)|0,f=f+Math.imul(he,Fe)|0,s=s+Math.imul(he,Ve)|0,s=s+Math.imul(ge,Fe)|0,g=g+Math.imul(ge,Ve)|0,f=f+Math.imul(X,Ye)|0,s=s+Math.imul(X,Ge)|0,s=s+Math.imul(te,Ye)|0,g=g+Math.imul(te,Ge)|0;var Ks=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,f=Math.imul(Me,Ke),s=Math.imul(Me,xe),s=s+Math.imul(Ie,Ke)|0,g=Math.imul(Ie,xe),f=f+Math.imul(Te,Le)|0,s=s+Math.imul(Te,De)|0,s=s+Math.imul(Pe,Le)|0,g=g+Math.imul(Pe,De)|0,f=f+Math.imul(ve,qe)|0,s=s+Math.imul(ve,Ue)|0,s=s+Math.imul(Se,qe)|0,g=g+Math.imul(Se,Ue)|0,f=f+Math.imul(me,ze)|0,s=s+Math.imul(me,Ne)|0,s=s+Math.imul(we,ze)|0,g=g+Math.imul(we,Ne)|0,f=f+Math.imul(_e,Re)|0,s=s+Math.imul(_e,je)|0,s=s+Math.imul(be,Re)|0,g=g+Math.imul(be,je)|0,f=f+Math.imul(ye,Fe)|0,s=s+Math.imul(ye,Ve)|0,s=s+Math.imul(pe,Fe)|0,g=g+Math.imul(pe,Ve)|0,f=f+Math.imul(he,Ye)|0,s=s+Math.imul(he,Ge)|0,s=s+Math.imul(ge,Ye)|0,g=g+Math.imul(ge,Ge)|0;var xs=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(xs>>>26)|0,xs&=67108863,f=Math.imul(Me,Le),s=Math.imul(Me,De),s=s+Math.imul(Ie,Le)|0,g=Math.imul(Ie,De),f=f+Math.imul(Te,qe)|0,s=s+Math.imul(Te,Ue)|0,s=s+Math.imul(Pe,qe)|0,g=g+Math.imul(Pe,Ue)|0,f=f+Math.imul(ve,ze)|0,s=s+Math.imul(ve,Ne)|0,s=s+Math.imul(Se,ze)|0,g=g+Math.imul(Se,Ne)|0,f=f+Math.imul(me,Re)|0,s=s+Math.imul(me,je)|0,s=s+Math.imul(we,Re)|0,g=g+Math.imul(we,je)|0,f=f+Math.imul(_e,Fe)|0,s=s+Math.imul(_e,Ve)|0,s=s+Math.imul(be,Fe)|0,g=g+Math.imul(be,Ve)|0,f=f+Math.imul(ye,Ye)|0,s=s+Math.imul(ye,Ge)|0,s=s+Math.imul(pe,Ye)|0,g=g+Math.imul(pe,Ge)|0;var Ls=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,f=Math.imul(Me,qe),s=Math.imul(Me,Ue),s=s+Math.imul(Ie,qe)|0,g=Math.imul(Ie,Ue),f=f+Math.imul(Te,ze)|0,s=s+Math.imul(Te,Ne)|0,s=s+Math.imul(Pe,ze)|0,g=g+Math.imul(Pe,Ne)|0,f=f+Math.imul(ve,Re)|0,s=s+Math.imul(ve,je)|0,s=s+Math.imul(Se,Re)|0,g=g+Math.imul(Se,je)|0,f=f+Math.imul(me,Fe)|0,s=s+Math.imul(me,Ve)|0,s=s+Math.imul(we,Fe)|0,g=g+Math.imul(we,Ve)|0,f=f+Math.imul(_e,Ye)|0,s=s+Math.imul(_e,Ge)|0,s=s+Math.imul(be,Ye)|0,g=g+Math.imul(be,Ge)|0;var Ds=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,f=Math.imul(Me,ze),s=Math.imul(Me,Ne),s=s+Math.imul(Ie,ze)|0,g=Math.imul(Ie,Ne),f=f+Math.imul(Te,Re)|0,s=s+Math.imul(Te,je)|0,s=s+Math.imul(Pe,Re)|0,g=g+Math.imul(Pe,je)|0,f=f+Math.imul(ve,Fe)|0,s=s+Math.imul(ve,Ve)|0,s=s+Math.imul(Se,Fe)|0,g=g+Math.imul(Se,Ve)|0,f=f+Math.imul(me,Ye)|0,s=s+Math.imul(me,Ge)|0,s=s+Math.imul(we,Ye)|0,g=g+Math.imul(we,Ge)|0;var qs=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(qs>>>26)|0,qs&=67108863,f=Math.imul(Me,Re),s=Math.imul(Me,je),s=s+Math.imul(Ie,Re)|0,g=Math.imul(Ie,je),f=f+Math.imul(Te,Fe)|0,s=s+Math.imul(Te,Ve)|0,s=s+Math.imul(Pe,Fe)|0,g=g+Math.imul(Pe,Ve)|0,f=f+Math.imul(ve,Ye)|0,s=s+Math.imul(ve,Ge)|0,s=s+Math.imul(Se,Ye)|0,g=g+Math.imul(Se,Ge)|0;var Us=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(Us>>>26)|0,Us&=67108863,f=Math.imul(Me,Fe),s=Math.imul(Me,Ve),s=s+Math.imul(Ie,Fe)|0,g=Math.imul(Ie,Ve),f=f+Math.imul(Te,Ye)|0,s=s+Math.imul(Te,Ge)|0,s=s+Math.imul(Pe,Ye)|0,g=g+Math.imul(Pe,Ge)|0;var zs=(v+f|0)+((s&8191)<<13)|0;v=(g+(s>>>13)|0)+(zs>>>26)|0,zs&=67108863,f=Math.imul(Me,Ye),s=Math.imul(Me,Ge),s=s+Math.imul(Ie,Ye)|0,g=Math.imul(Ie,Ge);var Ns=(v+f|0)+((s&8191)<<13)|0;return v=(g+(s>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,m[0]=Ss,m[1]=Ts,m[2]=Ps,m[3]=Ms,m[4]=Is,m[5]=As,m[6]=Bs,m[7]=ks,m[8]=Es,m[9]=Os,m[10]=Cs,m[11]=Ks,m[12]=xs,m[13]=Ls,m[14]=Ds,m[15]=qs,m[16]=Us,m[17]=zs,m[18]=Ns,v!==0&&(m[19]=v,c.length++),c};Math.imul||(q=L);function de(p,o,u){u.negative=o.negative^p.negative,u.length=p.length+o.length;for(var c=0,l=0,h=0;h<u.length-1;h++){var m=l;l=0;for(var v=c&67108863,f=Math.min(h,o.length-1),s=Math.max(0,h-p.length+1);s<=f;s++){var g=h-s,O=p.words[g]|0,K=o.words[s]|0,x=O*K,U=x&67108863;m=m+(x/67108864|0)|0,U=U+v|0,v=U&67108863,m=m+(U>>>26)|0,l+=m>>>26,m&=67108863}u.words[h]=v,c=m,m=l}return c!==0?u.words[h]=c:u.length--,u._strip()}function Yr(p,o,u){return de(p,o,u)}i.prototype.mulTo=function(o,u){var c,l=this.length+o.length;return this.length===10&&o.length===10?c=q(this,o,u):l<63?c=L(this,o,u):l<1024?c=de(this,o,u):c=Yr(this,o,u),c};function at(p,o){this.x=p,this.y=o}at.prototype.makeRBT=function(o){for(var u=new Array(o),c=i.prototype._countBits(o)-1,l=0;l<o;l++)u[l]=this.revBin(l,c,o);return u},at.prototype.revBin=function(o,u,c){if(o===0||o===c-1)return o;for(var l=0,h=0;h<u;h++)l|=(o&1)<<u-h-1,o>>=1;return l},at.prototype.permute=function(o,u,c,l,h,m){for(var v=0;v<m;v++)l[v]=u[o[v]],h[v]=c[o[v]]},at.prototype.transform=function(o,u,c,l,h,m){this.permute(m,o,u,c,l,h);for(var v=1;v<h;v<<=1)for(var f=v<<1,s=Math.cos(2*Math.PI/f),g=Math.sin(2*Math.PI/f),O=0;O<h;O+=f)for(var K=s,x=g,U=0;U<v;U++){var W=c[O+U],J=l[O+U],Gr=c[O+U+v],X=l[O+U+v],te=K*Gr-x*X;X=K*X+x*Gr,Gr=te,c[O+U]=W+Gr,l[O+U]=J+X,c[O+U+v]=W-Gr,l[O+U+v]=J-X,U!==f&&(te=s*K-g*x,x=s*x+g*K,K=te)}},at.prototype.guessLen13b=function(o,u){var c=Math.max(u,o)|1,l=c&1,h=0;for(c=c/2|0;c;c=c>>>1)h++;return 1<<h+1+l},at.prototype.conjugate=function(o,u,c){if(!(c<=1))for(var l=0;l<c/2;l++){var h=o[l];o[l]=o[c-l-1],o[c-l-1]=h,h=u[l],u[l]=-u[c-l-1],u[c-l-1]=-h}},at.prototype.normalize13b=function(o,u){for(var c=0,l=0;l<u/2;l++){var h=Math.round(o[2*l+1]/u)*8192+Math.round(o[2*l]/u)+c;o[l]=h&67108863,h<67108864?c=0:c=h/67108864|0}return o},at.prototype.convert13b=function(o,u,c,l){for(var h=0,m=0;m<u;m++)h=h+(o[m]|0),c[2*m]=h&8191,h=h>>>13,c[2*m+1]=h&8191,h=h>>>13;for(m=2*u;m<l;++m)c[m]=0;t(h===0),t((h&-8192)===0)},at.prototype.stub=function(o){for(var u=new Array(o),c=0;c<o;c++)u[c]=0;return u},at.prototype.mulp=function(o,u,c){var l=2*this.guessLen13b(o.length,u.length),h=this.makeRBT(l),m=this.stub(l),v=new Array(l),f=new Array(l),s=new Array(l),g=new Array(l),O=new Array(l),K=new Array(l),x=c.words;x.length=l,this.convert13b(o.words,o.length,v,l),this.convert13b(u.words,u.length,g,l),this.transform(v,m,f,s,l,h),this.transform(g,m,O,K,l,h);for(var U=0;U<l;U++){var W=f[U]*O[U]-s[U]*K[U];s[U]=f[U]*K[U]+s[U]*O[U],f[U]=W}return this.conjugate(f,s,l),this.transform(f,s,x,m,l,h),this.conjugate(x,m,l),this.normalize13b(x,l),c.negative=o.negative^u.negative,c.length=o.length+u.length,c._strip()},i.prototype.mul=function(o){var u=new i(null);return u.words=new Array(this.length+o.length),this.mulTo(o,u)},i.prototype.mulf=function(o){var u=new i(null);return u.words=new Array(this.length+o.length),Yr(this,o,u)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var u=o<0;u&&(o=-o),t(typeof o=="number"),t(o<67108864);for(var c=0,l=0;l<this.length;l++){var h=(this.words[l]|0)*o,m=(h&67108863)+(c&67108863);c>>=26,c+=h/67108864|0,c+=m>>>26,this.words[l]=m&67108863}return c!==0&&(this.words[l]=c,this.length++),u?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var u=E(o);if(u.length===0)return new i(1);for(var c=this,l=0;l<u.length&&u[l]===0;l++,c=c.sqr());if(++l<u.length)for(var h=c.sqr();l<u.length;l++,h=h.sqr())u[l]!==0&&(c=c.mul(h));return c},i.prototype.iushln=function(o){t(typeof o=="number"&&o>=0);var u=o%26,c=(o-u)/26,l=67108863>>>26-u<<26-u,h;if(u!==0){var m=0;for(h=0;h<this.length;h++){var v=this.words[h]&l,f=(this.words[h]|0)-v<<u;this.words[h]=f|m,m=v>>>26-u}m&&(this.words[h]=m,this.length++)}if(c!==0){for(h=this.length-1;h>=0;h--)this.words[h+c]=this.words[h];for(h=0;h<c;h++)this.words[h]=0;this.length+=c}return this._strip()},i.prototype.ishln=function(o){return t(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,u,c){t(typeof o=="number"&&o>=0);var l;u?l=(u-u%26)/26:l=0;var h=o%26,m=Math.min((o-h)/26,this.length),v=67108863^67108863>>>h<<h,f=c;if(l-=m,l=Math.max(0,l),f){for(var s=0;s<m;s++)f.words[s]=this.words[s];f.length=m}if(m!==0)if(this.length>m)for(this.length-=m,s=0;s<this.length;s++)this.words[s]=this.words[s+m];else this.words[0]=0,this.length=1;var g=0;for(s=this.length-1;s>=0&&(g!==0||s>=l);s--){var O=this.words[s]|0;this.words[s]=g<<26-h|O>>>h,g=O&v}return f&&g!==0&&(f.words[f.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,u,c){return t(this.negative===0),this.iushrn(o,u,c)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){t(typeof o=="number"&&o>=0);var u=o%26,c=(o-u)/26,l=1<<u;if(this.length<=c)return!1;var h=this.words[c];return!!(h&l)},i.prototype.imaskn=function(o){t(typeof o=="number"&&o>=0);var u=o%26,c=(o-u)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=c)return this;if(u!==0&&c++,this.length=Math.min(c,this.length),u!==0){var l=67108863^67108863>>>u<<u;this.words[this.length-1]&=l}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return t(typeof o=="number"),t(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},i.prototype.isubn=function(o){if(t(typeof o=="number"),t(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,u,c){var l=o.length+c,h;this._expand(l);var m,v=0;for(h=0;h<o.length;h++){m=(this.words[h+c]|0)+v;var f=(o.words[h]|0)*u;m-=f&67108863,v=(m>>26)-(f/67108864|0),this.words[h+c]=m&67108863}for(;h<this.length-c;h++)m=(this.words[h+c]|0)+v,v=m>>26,this.words[h+c]=m&67108863;if(v===0)return this._strip();for(t(v===-1),v=0,h=0;h<this.length;h++)m=-(this.words[h]|0)+v,v=m>>26,this.words[h]=m&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,u){var c=this.length-o.length,l=this.clone(),h=o,m=h.words[h.length-1]|0,v=this._countBits(m);c=26-v,c!==0&&(h=h.ushln(c),l.iushln(c),m=h.words[h.length-1]|0);var f=l.length-h.length,s;if(u!=="mod"){s=new i(null),s.length=f+1,s.words=new Array(s.length);for(var g=0;g<s.length;g++)s.words[g]=0}var O=l.clone()._ishlnsubmul(h,1,f);O.negative===0&&(l=O,s&&(s.words[f]=1));for(var K=f-1;K>=0;K--){var x=(l.words[h.length+K]|0)*67108864+(l.words[h.length+K-1]|0);for(x=Math.min(x/m|0,67108863),l._ishlnsubmul(h,x,K);l.negative!==0;)x--,l.negative=0,l._ishlnsubmul(h,1,K),l.isZero()||(l.negative^=1);s&&(s.words[K]=x)}return s&&s._strip(),l._strip(),u!=="div"&&c!==0&&l.iushrn(c),{div:s||null,mod:l}},i.prototype.divmod=function(o,u,c){if(t(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var l,h,m;return this.negative!==0&&o.negative===0?(m=this.neg().divmod(o,u),u!=="mod"&&(l=m.div.neg()),u!=="div"&&(h=m.mod.neg(),c&&h.negative!==0&&h.iadd(o)),{div:l,mod:h}):this.negative===0&&o.negative!==0?(m=this.divmod(o.neg(),u),u!=="mod"&&(l=m.div.neg()),{div:l,mod:m.mod}):(this.negative&o.negative)!==0?(m=this.neg().divmod(o.neg(),u),u!=="div"&&(h=m.mod.neg(),c&&h.negative!==0&&h.isub(o)),{div:m.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?u==="div"?{div:this.divn(o.words[0]),mod:null}:u==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,u)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var u=this.divmod(o);if(u.mod.isZero())return u.div;var c=u.div.negative!==0?u.mod.isub(o):u.mod,l=o.ushrn(1),h=o.andln(1),m=c.cmp(l);return m<0||h===1&&m===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},i.prototype.modrn=function(o){var u=o<0;u&&(o=-o),t(o<=67108863);for(var c=(1<<26)%o,l=0,h=this.length-1;h>=0;h--)l=(c*l+(this.words[h]|0))%o;return u?-l:l},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var u=o<0;u&&(o=-o),t(o<=67108863);for(var c=0,l=this.length-1;l>=0;l--){var h=(this.words[l]|0)+c*67108864;this.words[l]=h/o|0,c=h%o}return this._strip(),u?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){t(o.negative===0),t(!o.isZero());var u=this,c=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var l=new i(1),h=new i(0),m=new i(0),v=new i(1),f=0;u.isEven()&&c.isEven();)u.iushrn(1),c.iushrn(1),++f;for(var s=c.clone(),g=u.clone();!u.isZero();){for(var O=0,K=1;(u.words[0]&K)===0&&O<26;++O,K<<=1);if(O>0)for(u.iushrn(O);O-- >0;)(l.isOdd()||h.isOdd())&&(l.iadd(s),h.isub(g)),l.iushrn(1),h.iushrn(1);for(var x=0,U=1;(c.words[0]&U)===0&&x<26;++x,U<<=1);if(x>0)for(c.iushrn(x);x-- >0;)(m.isOdd()||v.isOdd())&&(m.iadd(s),v.isub(g)),m.iushrn(1),v.iushrn(1);u.cmp(c)>=0?(u.isub(c),l.isub(m),h.isub(v)):(c.isub(u),m.isub(l),v.isub(h))}return{a:m,b:v,gcd:c.iushln(f)}},i.prototype._invmp=function(o){t(o.negative===0),t(!o.isZero());var u=this,c=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var l=new i(1),h=new i(0),m=c.clone();u.cmpn(1)>0&&c.cmpn(1)>0;){for(var v=0,f=1;(u.words[0]&f)===0&&v<26;++v,f<<=1);if(v>0)for(u.iushrn(v);v-- >0;)l.isOdd()&&l.iadd(m),l.iushrn(1);for(var s=0,g=1;(c.words[0]&g)===0&&s<26;++s,g<<=1);if(s>0)for(c.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(m),h.iushrn(1);u.cmp(c)>=0?(u.isub(c),l.isub(h)):(c.isub(u),h.isub(l))}var O;return u.cmpn(1)===0?O=l:O=h,O.cmpn(0)<0&&O.iadd(o),O},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var u=this.clone(),c=o.clone();u.negative=0,c.negative=0;for(var l=0;u.isEven()&&c.isEven();l++)u.iushrn(1),c.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;c.isEven();)c.iushrn(1);var h=u.cmp(c);if(h<0){var m=u;u=c,c=m}else if(h===0||c.cmpn(1)===0)break;u.isub(c)}while(!0);return c.iushln(l)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){t(typeof o=="number");var u=o%26,c=(o-u)/26,l=1<<u;if(this.length<=c)return this._expand(c+1),this.words[c]|=l,this;for(var h=l,m=c;h!==0&&m<this.length;m++){var v=this.words[m]|0;v+=h,h=v>>>26,v&=67108863,this.words[m]=v}return h!==0&&(this.words[m]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var u=o<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var c;if(this.length>1)c=1;else{u&&(o=-o),t(o<=67108863,"Number is too big");var l=this.words[0]|0;c=l===o?0:l<o?-1:1}return this.negative!==0?-c|0:c},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var u=this.ucmp(o);return this.negative!==0?-u|0:u},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var u=0,c=this.length-1;c>=0;c--){var l=this.words[c]|0,h=o.words[c]|0;if(l!==h){l<h?u=-1:l>h&&(u=1);break}}return u},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new le(o)},i.prototype.toRed=function(o){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return t(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return t(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var ws={k256:null,p224:null,p192:null,p25519:null};function zt(p,o){this.name=p,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}zt.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},zt.prototype.ireduce=function(o){var u=o,c;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),c=u.bitLength();while(c>this.n);var l=c<this.n?-1:u.ucmp(this.p);return l===0?(u.words[0]=0,u.length=1):l>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},zt.prototype.split=function(o,u){o.iushrn(this.n,0,u)},zt.prototype.imulK=function(o){return o.imul(this.k)};function Ni(){zt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(Ni,zt),Ni.prototype.split=function(o,u){for(var c=4194303,l=Math.min(o.length,9),h=0;h<l;h++)u.words[h]=o.words[h];if(u.length=l,o.length<=9){o.words[0]=0,o.length=1;return}var m=o.words[9];for(u.words[u.length++]=m&c,h=10;h<o.length;h++){var v=o.words[h]|0;o.words[h-10]=(v&c)<<4|m>>>22,m=v}m>>>=22,o.words[h-10]=m,m===0&&o.length>10?o.length-=10:o.length-=9},Ni.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var u=0,c=0;c<o.length;c++){var l=o.words[c]|0;u+=l*977,o.words[c]=u&67108863,u=l*64+(u/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Ku(){zt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(Ku,zt);function xu(){zt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(xu,zt);function vs(){zt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(vs,zt),vs.prototype.imulK=function(o){for(var u=0,c=0;c<o.length;c++){var l=(o.words[c]|0)*19+u,h=l&67108863;l>>>=26,o.words[c]=h,u=l}return u!==0&&(o.words[o.length++]=u),o},i._prime=function(o){if(ws[o])return ws[o];var u;if(o==="k256")u=new Ni;else if(o==="p224")u=new Ku;else if(o==="p192")u=new xu;else if(o==="p25519")u=new vs;else throw new Error("Unknown prime "+o);return ws[o]=u,u};function le(p){if(typeof p=="string"){var o=i._prime(p);this.m=o.p,this.prime=o}else t(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}le.prototype._verify1=function(o){t(o.negative===0,"red works only with positives"),t(o.red,"red works only with red numbers")},le.prototype._verify2=function(o,u){t((o.negative|u.negative)===0,"red works only with positives"),t(o.red&&o.red===u.red,"red works only with red numbers")},le.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(P(o,o.umod(this.m)._forceRed(this)),o)},le.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},le.prototype.add=function(o,u){this._verify2(o,u);var c=o.add(u);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},le.prototype.iadd=function(o,u){this._verify2(o,u);var c=o.iadd(u);return c.cmp(this.m)>=0&&c.isub(this.m),c},le.prototype.sub=function(o,u){this._verify2(o,u);var c=o.sub(u);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},le.prototype.isub=function(o,u){this._verify2(o,u);var c=o.isub(u);return c.cmpn(0)<0&&c.iadd(this.m),c},le.prototype.shl=function(o,u){return this._verify1(o),this.imod(o.ushln(u))},le.prototype.imul=function(o,u){return this._verify2(o,u),this.imod(o.imul(u))},le.prototype.mul=function(o,u){return this._verify2(o,u),this.imod(o.mul(u))},le.prototype.isqr=function(o){return this.imul(o,o.clone())},le.prototype.sqr=function(o){return this.mul(o,o)},le.prototype.sqrt=function(o){if(o.isZero())return o.clone();var u=this.m.andln(3);if(t(u%2===1),u===3){var c=this.m.add(new i(1)).iushrn(2);return this.pow(o,c)}for(var l=this.m.subn(1),h=0;!l.isZero()&&l.andln(1)===0;)h++,l.iushrn(1);t(!l.isZero());var m=new i(1).toRed(this),v=m.redNeg(),f=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,f).cmp(v)!==0;)s.redIAdd(v);for(var g=this.pow(s,l),O=this.pow(o,l.addn(1).iushrn(1)),K=this.pow(o,l),x=h;K.cmp(m)!==0;){for(var U=K,W=0;U.cmp(m)!==0;W++)U=U.redSqr();t(W<x);var J=this.pow(g,new i(1).iushln(x-W-1));O=O.redMul(J),g=J.redSqr(),K=K.redMul(g),x=W}return O},le.prototype.invm=function(o){var u=o._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},le.prototype.pow=function(o,u){if(u.isZero())return new i(1).toRed(this);if(u.cmpn(1)===0)return o.clone();var c=4,l=new Array(1<<c);l[0]=new i(1).toRed(this),l[1]=o;for(var h=2;h<l.length;h++)l[h]=this.mul(l[h-1],o);var m=l[0],v=0,f=0,s=u.bitLength()%26;for(s===0&&(s=26),h=u.length-1;h>=0;h--){for(var g=u.words[h],O=s-1;O>=0;O--){var K=g>>O&1;if(m!==l[0]&&(m=this.sqr(m)),K===0&&v===0){f=0;continue}v<<=1,v|=K,f++,!(f!==c&&(h!==0||O!==0))&&(m=this.mul(m,l[v]),f=0,v=0)}s=26}return m},le.prototype.convertTo=function(o){var u=o.umod(this.m);return u===o?u.clone():u},le.prototype.convertFrom=function(o){var u=o.clone();return u.red=null,u},i.mont=function(o){return new fn(o)};function fn(p){le.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(fn,le),fn.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},fn.prototype.convertFrom=function(o){var u=this.imod(o.mul(this.rinv));return u.red=null,u},fn.prototype.imul=function(o,u){if(o.isZero()||u.isZero())return o.words[0]=0,o.length=1,o;var c=o.imul(u),l=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=c.isub(l).iushrn(this.shift),m=h;return h.cmp(this.m)>=0?m=h.isub(this.m):h.cmpn(0)<0&&(m=h.iadd(this.m)),m._forceRed(this)},fn.prototype.mul=function(o,u){if(o.isZero()||u.isZero())return new i(0)._forceRed(this);var c=o.mul(u),l=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=c.isub(l).iushrn(this.shift),m=h;return h.cmp(this.m)>=0?m=h.isub(this.m):h.cmpn(0)<0&&(m=h.iadd(this.m)),m._forceRed(this)},fn.prototype.invm=function(o){var u=this.imod(o._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof La>"u"||La,Dd)});var nn=M(R=>{_();b();var ay=R&&R.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(R,"__esModule",{value:!0});R.numbersTypeMap=R.bool=R.i512=R.i256=R.i128=R.i64=R.i32=R.i16=R.i8=R.u512=R.u256=R.u128=R.u64=R.u32=R.u16=R.u8=void 0;var zn=ay(qd()),se=it();R.u8={write:function(r,e,t){r.writeUInt8(t,e)},read:function(r,e){return r.readUInt8(e)},byteSize:1,description:"u8"};R.u16={write:function(r,e,t){r.writeUInt16LE(t,e)},read:function(r,e){return r.readUInt16LE(e)},byteSize:2,description:"u16"};R.u32={write:function(r,e,t){r.writeUInt32LE(t,e)},read:function(r,e){return r.readUInt32LE(e)},byteSize:4,description:"u32"};function Zo(r,e){return{write:function(t,n,i){let d=(zn.default.isBN(i)?i:new zn.default(i)).toArray("le",this.byteSize);T.Buffer.from(d).copy(t,n,0,this.byteSize)},read:function(t,n){let i=t.slice(n,n+this.byteSize);return new zn.default(i,"le")},byteSize:r,description:e}}R.u64=Zo(8,"u64");R.u128=Zo(16,"u128");R.u256=Zo(32,"u256");R.u512=Zo(64,"u512");R.i8={write:function(r,e,t){r.writeInt8(t,e)},read:function(r,e){return r.readInt8(e)},byteSize:1,description:"i8"};R.i16={write:function(r,e,t){r.writeInt16LE(t,e)},read:function(r,e){return r.readInt16LE(e)},byteSize:2,description:"i16"};R.i32={write:function(r,e,t){r.writeInt32LE(t,e)},read:function(r,e){return r.readInt32LE(e)},byteSize:4,description:"i32"};function Jo(r,e){let t=r*8;return{write:function(n,i,a){let y=(zn.default.isBN(a)?a:new zn.default(a)).toTwos(t).toArray("le",this.byteSize);T.Buffer.from(y).copy(n,i,0,this.byteSize)},read:function(n,i){let a=n.slice(i,i+this.byteSize);return new zn.default(a,"le").fromTwos(t)},byteSize:r,description:e}}R.i64=Jo(8,"i64");R.i128=Jo(16,"i128");R.i256=Jo(32,"i256");R.i512=Jo(64,"i512");R.bool={write:function(r,e,t){let n=t?1:0;R.u8.write(r,e,n)},read:function(r,e){return R.u8.read(r,e)===1},byteSize:1,description:"bool"};R.numbersTypeMap={u8:{beet:"u8",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},u16:{beet:"u16",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},u32:{beet:"u32",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},i8:{beet:"i8",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},i16:{beet:"i16",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},i32:{beet:"i32",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"number"},bool:{beet:"bool",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"boolean"},u64:{beet:"u64",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},u128:{beet:"u128",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},u256:{beet:"u256",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},u512:{beet:"u512",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},i64:{beet:"i64",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},i128:{beet:"i128",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},i256:{beet:"i256",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE},i512:{beet:"i512",isFixable:!1,sourcePack:se.BEET_PACKAGE,ts:"bignum",pack:se.BEET_PACKAGE}}});var Ua=M((j1,Nd)=>{_();b();var Ud={white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97},zd={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107},Da={},qa={},Ki={};Object.keys(Ud).forEach(function(r){var e=Da[r]="\x1B["+Ud[r]+"m",t=qa[r]="\x1B[39m";Ki[r]=function(n){return e+n+t}});Object.keys(zd).forEach(function(r){var e=Da[r]="\x1B["+zd[r]+"m",t=qa[r]="\x1B[49m";Ki[r]=function(n){return e+n+t}});Nd.exports=Ki;Ki.open=Da;Ki.close=qa});var Rr=M($e=>{_();b();var jd=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.UnreachableCaseError=$e.stringify=$e.bytes=$e.beetBytes=$e.logTrace=$e.logDebug=$e.logInfo=$e.logError=void 0;var Xo=jd(tf()),uy=jd(Ua()),Rd=it(),{brightBlack:Fd}=uy.default;$e.logError=(0,Xo.default)("beet:error");$e.logInfo=(0,Xo.default)("beet:info");$e.logDebug=(0,Xo.default)("beet:debug");$e.logTrace=(0,Xo.default)("beet:trace");function cy(r,e=!1){let t;if((0,Rd.isFixableBeet)(r))t="? B";else if((0,Rd.isElementCollectionFixedSizeBeet)(r)){let n=e?"length":r.length,i=r.lenPrefixByteSize;t=i>0?`${i} + (${r.elementByteSize} * ${n}) B  (${r.byteSize} B)`:`(${r.elementByteSize} * ${n}) B (${r.byteSize} B)`}else t=`${r.byteSize} B`;return Fd(t)}$e.beetBytes=cy;function dy(r){return Fd(`${r} B`)}$e.bytes=dy;function ly(r){return r.toString==="function"?r.toString():r}$e.stringify=ly;var za=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};$e.UnreachableCaseError=za});var Rn=M(Nn=>{_();b();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.fixBeetFromValue=Nn.fixBeetFromData=void 0;var Qo=it(),Vd=Rr();function fy(r,e,t){if((0,Qo.isFixedSizeBeet)(r))return r;if((0,Qo.isFixableBeet)(r))return r.toFixedFromData(e,t);throw new Vd.UnreachableCaseError(r)}Nn.fixBeetFromData=fy;function hy(r,e){if((0,Qo.isFixedSizeBeet)(r))return r;if((0,Qo.isFixableBeet)(r))return r.toFixedFromValue(e);throw new Vd.UnreachableCaseError(r)}Nn.fixBeetFromValue=hy});var es=M(ot=>{_();b();Object.defineProperty(ot,"__esModule",{value:!0});ot.collectionsTypeMap=ot.uint8Array=ot.fixedSizeUint8Array=ot.fixedSizeBuffer=ot.array=ot.fixedSizeArray=ot.uniformFixedSizeArray=void 0;var jn=it(),bn=dr(),on=nn(),Fn=it(),Gd=Rr(),Yd=Rn();function gy(r,e,t=!1){let n=r.byteSize*e,i=t?4+n:n;return{write:function(a,d,y){bn.strict.equal(y.length,e,`array length ${y.length} should match len ${e}`),t&&(on.u32.write(a,d,e),d+=4);for(let w=0;w<e;w++)r.write(a,d+w*r.byteSize,y[w])},read:function(a,d){if(t){let w=on.u32.read(a,d);bn.strict.equal(w,e,"invalid byte size"),d+=4}let y=new Array(e);for(let w=0;w<e;w++)y[w]=r.read(a,d+w*r.byteSize);return y},byteSize:i,length:e,elementByteSize:r.byteSize,lenPrefixByteSize:4,description:`Array<${r.description}>(${e})`}}ot.uniformFixedSizeArray=gy;function Na(r,e){let t=r.length,n=t===0?"<EMPTY>":r[0].description;return{write:function(i,a,d){bn.strict.equal(d.length,t,`array length ${d.length} should match len ${t}`),on.u32.write(i,a,t);let y=a+4;for(let w=0;w<t;w++){let P=r[w];P.write(i,y,d[w]),y+=P.byteSize}},read:function(i,a){let d=on.u32.read(i,a);bn.strict.equal(d,t,"invalid byte size");let y=a+4,w=new Array(t);for(let P=0;P<t;P++){let B=r[P];w[P]=B.read(i,y),y+=B.byteSize}return w},byteSize:4+e,length:t,description:`Array<${n}>(${t})[ 4 + ${e} ]`}}ot.fixedSizeArray=Na;function yy(r){return{toFixedFromData(e,t){let n=on.u32.read(e,t);(0,Gd.logTrace)(`${this.description}[${n}]`);let i=t+4,a=i,d=new Array(n);for(let y=0;y<n;y++){let w=(0,Yd.fixBeetFromData)(r,e,a);d[y]=w,a+=w.byteSize}return Na(d,a-i)},toFixedFromValue(e){(0,bn.strict)(Array.isArray(e),`${e} should be an array`);let t=0,n=new Array(e.length);for(let i=0;i<e.length;i++){let a=(0,Yd.fixBeetFromValue)(r,e[i]);n[i]=a,t+=a.byteSize}return Na(n,t)},description:"array"}}ot.array=yy;function Wd(r){return{write:function(e,t,n){n.copy(e,t,0,r)},read:function(e,t){return e.slice(t,t+r)},byteSize:r,description:`Buffer(${r})`}}ot.fixedSizeBuffer=Wd;function Ra(r,e=!1){let t=Wd(r),n=e?r+4:r;return{write:function(i,a,d){bn.strict.equal(d.byteLength,r,`Uint8Array length ${d.byteLength} should match len ${r}`),e&&(on.u32.write(i,a,r),a+=4);let y=T.Buffer.from(d);t.write(i,a,y)},read:function(i,a){if(e){let y=on.u32.read(i,a);bn.strict.equal(y,r,"invalid byte size"),a+=4}let d=t.read(i,a);return Uint8Array.from(d)},byteSize:n,description:`Uint8Array(${r})`}}ot.fixedSizeUint8Array=Ra;ot.uint8Array={toFixedFromData(r,e){let t=on.u32.read(r,e);return(0,Gd.logTrace)(`${this.description}[${t}]`),Ra(t,!0)},toFixedFromValue(r){let e=r.byteLength;return Ra(e,!0)},description:"Uint8Array"};ot.collectionsTypeMap={Array:{beet:"array",isFixable:!0,sourcePack:Fn.BEET_PACKAGE,ts:"Array",arg:jn.BEET_TYPE_ARG_LEN},FixedSizeArray:{beet:"fixedSizeArray",isFixable:!1,sourcePack:Fn.BEET_PACKAGE,ts:"Array",arg:jn.BEET_TYPE_ARG_LEN},UniformFixedSizeArray:{beet:"uniformFixedSizeArray",isFixable:!1,sourcePack:Fn.BEET_PACKAGE,ts:"Array",arg:jn.BEET_TYPE_ARG_LEN},Buffer:{beet:"fixedSizeBuffer",isFixable:!1,sourcePack:Fn.BEET_PACKAGE,ts:"Buffer",arg:jn.BEET_TYPE_ARG_LEN},FixedSizeUint8Array:{beet:"fixedSizeUint8Array",isFixable:!1,sourcePack:Fn.BEET_PACKAGE,ts:"Uint8Array",arg:jn.BEET_TYPE_ARG_LEN},Uint8Array:{beet:"uint8Array",isFixable:!0,sourcePack:Fn.BEET_PACKAGE,ts:"Uint8Array",arg:jn.BEET_TYPE_ARG_LEN}}});var Wa=M(It=>{_();b();Object.defineProperty(It,"__esModule",{value:!0});It.compositesTypeMap=It.coption=It.coptionSome=It.coptionNone=It.isNoneBuffer=It.isSomeBuffer=void 0;var xi=dr(),ja=it(),$d=it(),Zd=Rr(),Hd=Rn(),Jd=0,Xd=1;function Ya(r,e){return r[e]===Xd}It.isSomeBuffer=Ya;function Ga(r,e){return r[e]===Jd}It.isNoneBuffer=Ga;function Fa(r){return(0,Zd.logTrace)(`coptionNone(${r})`),{write:function(e,t,n){(0,xi.strict)(n==null,"coptionNone can only handle `null` values"),e[t]=Jd},read:function(e,t){return(0,xi.strict)(Ga(e,t),"coptionNone can only handle `NONE` data"),null},byteSize:1,description:`COption<None(${r})>`}}It.coptionNone=Fa;function Va(r){let e=1+r.byteSize,t={write:function(n,i,a){(0,ja.assertFixedSizeBeet)(r,`coption inner type ${r.description} needs to be fixed before calling write`),(0,xi.strict)(a!=null,"coptionSome cannot handle `null` values"),n[i]=Xd,r.write(n,i+1,a)},read:function(n,i){return(0,ja.assertFixedSizeBeet)(r,`coption inner type ${r.description} needs to be fixed before calling read`),(0,xi.strict)(Ya(n,i),"coptionSome can only handle `SOME` data"),r.read(n,i+1)},description:`COption<${r.description}>[1 + ${r.byteSize}]`,byteSize:e,inner:r};return(0,Zd.logTrace)(t.description),t}It.coptionSome=Va;function py(r){return{toFixedFromData(e,t){if(Ya(e,t)){let n=(0,Hd.fixBeetFromData)(r,e,t+1);return Va(n)}else return(0,xi.strict)(Ga(e,t),`Expected ${e} to hold a COption`),Fa(r.description)},toFixedFromValue(e){return e==null?Fa(r.description):Va((0,Hd.fixBeetFromValue)(r,e))},description:`COption<${r.description}>`}}It.coption=py;It.compositesTypeMap={option:{beet:"coption",isFixable:!0,sourcePack:$d.BEET_PACKAGE,ts:"COption<Inner>",arg:ja.BEET_TYPE_ARG_INNER,pack:$d.BEET_PACKAGE}}});var Za=M(wr=>{_();b();Object.defineProperty(wr,"__esModule",{value:!0});wr.stringTypeMap=wr.utf8String=wr.fixedSizeUtf8String=void 0;var $a=it(),Qd=dr(),Ha=nn(),_y=Rr(),by=r=>({write:function(e,t,n){let i=T.Buffer.from(n,"utf8");Qd.strict.equal(i.byteLength,r,`${n} has invalid byte size`),Ha.u32.write(e,t,r),i.copy(e,t+4,0,r)},read:function(e,t){let n=Ha.u32.read(e,t);return Qd.strict.equal(n,r,"invalid byte size"),e.slice(t+4,t+4+r).toString("utf8")},elementByteSize:1,length:r,lenPrefixByteSize:4,byteSize:4+r,description:`Utf8String(4 + ${r})`});wr.fixedSizeUtf8String=by;wr.utf8String={toFixedFromData(r,e){let t=Ha.u32.read(r,e);return(0,_y.logTrace)(`${this.description}[${t}]`),(0,wr.fixedSizeUtf8String)(t)},toFixedFromValue(r){let e=T.Buffer.from(r).byteLength;return(0,wr.fixedSizeUtf8String)(e)},description:"Utf8String"};wr.stringTypeMap={fixedSizeString:{beet:"fixedSizeUtf8String",isFixable:!1,sourcePack:$a.BEET_PACKAGE,ts:"string",arg:$a.BEET_TYPE_ARG_LEN},string:{beet:"utf8String",isFixable:!0,sourcePack:$a.BEET_PACKAGE,ts:"string"}}});var Qa=M(Vn=>{_();b();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.BeetReader=Vn.BeetWriter=void 0;var my=dr(),Ja=class{constructor(e){this.buf=T.Buffer.alloc(e),this._offset=0}get buffer(){return this.buf}get offset(){return this._offset}maybeResize(e){this._offset+e>this.buf.length&&my.strict.fail(`We shouldn't ever need to resize, but ${this._offset+e} > ${this.buf.length}`)}write(e,t){this.maybeResize(e.byteSize),e.write(this.buf,this._offset,t),this._offset+=e.byteSize}writeStruct(e,t){for(let[n,i]of t){let a=e[n];this.write(i,a)}}};Vn.BeetWriter=Ja;var Xa=class{constructor(e,t=0){this.buffer=e,this._offset=t}get offset(){return this._offset}read(e){let t=e.read(this.buffer,this._offset);return this._offset+=e.byteSize,t}readStruct(e){let t={};for(let[n,i]of e)t[n]=this.read(i);return t}};Vn.BeetReader=Xa});var ts=M(sn=>{_();b();Object.defineProperty(sn,"__esModule",{value:!0});sn.BeetArgsStruct=sn.isBeetStruct=sn.BeetStruct=void 0;var el=Qa(),jr=Rr(),vr=class{constructor(e,t,n=vr.description){if(this.fields=e,this.construct=t,this.description=n,this.byteSize=this.getByteSize(),jr.logDebug.enabled){let i=e.map(([a,d])=>`${String(a)}: ${d.description} ${(0,jr.beetBytes)(d)}`).join(`
  `);(0,jr.logDebug)(`struct ${n} {
  ${i}
} ${(0,jr.beetBytes)(this)}`)}}read(e,t){let[n]=this.deserialize(e,t);return n}write(e,t,n){let[i,a]=this.serialize(n);i.copy(e,t,0,a)}deserialize(e,t=0){jr.logTrace.enabled&&((0,jr.logTrace)("deserializing [%s] from %d bytes buffer",this.description,e.byteLength),(0,jr.logTrace)(e),(0,jr.logTrace)(e.toJSON().data));let n=new el.BeetReader(e,t),i=n.readStruct(this.fields);return[this.construct(i),n.offset]}serialize(e,t=this.byteSize){(0,jr.logTrace)("serializing [%s] %o to %d bytes buffer",this.description,e,t);let n=new el.BeetWriter(t);return n.writeStruct(e,this.fields),[n.buffer,n.offset]}getByteSize(){return this.fields.reduce((e,[t,n])=>e+n.byteSize,0)}get type(){return vr.TYPE}};sn.BeetStruct=vr;vr.description="BeetStruct";vr.TYPE="BeetStruct";function wy(r){return r.type===vr.TYPE}sn.isBeetStruct=wy;var Yn=class extends vr{constructor(e,t=Yn.description){super(e,n=>n,t)}};sn.BeetArgsStruct=Yn;Yn.description="BeetArgsStruct"});var tu=M(Sr=>{_();b();var vy=Sr&&Sr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.FixableBeetArgsStruct=Sr.isFixableBeetStruct=Sr.FixableBeetStruct=void 0;var tl=Rn(),rs=ts(),Sy=it(),Ty=dr(),eu=Rr(),Py=vy(Ua()),{brightBlack:My}=Py.default,Zt=class{constructor(e,t,n=Zt.description){this.fields=e,this.construct=t,this.description=n;let i=0;if(eu.logDebug.enabled){let a=e.map(([y,w])=>((0,Sy.isFixedSizeBeet)(w)&&(i+=w.byteSize),`${y}: ${w.description} ${(0,eu.beetBytes)(w)}`)).join(`
  `),d=`> ${i} B`;(0,eu.logDebug)(`struct ${n} {
  ${a}
} ${My(d)}`)}}deserialize(e,t=0){return this.toFixedFromData(e,t).deserialize(e,t)}serialize(e,t){return this.toFixedFromValue(e).serialize(e,t)}toFixedFromData(e,t){let n=t,i=new Array(this.fields.length);for(let a=0;a<this.fields.length;a++){let[d,y]=this.fields[a],w=(0,tl.fixBeetFromData)(y,e,n);i[a]=[d,w],n+=w.byteSize}return this.description!==Zt.description?new rs.BeetStruct(i,this.construct,this.description):new rs.BeetStruct(i,this.construct)}toFixedFromValue(e){let t=Object.keys(e),n=new Array(this.fields.length);for(let i=0;i<this.fields.length;i++){let[a,d]=this.fields[i];(0,Ty.strict)(t.includes(a),`Value with keys [ ${t} ] should include struct key '${a}' but doesn't.`);let y=e[a],w=(0,tl.fixBeetFromValue)(d,y);n[i]=[a,w]}return this.description!==Zt.description?new rs.BeetStruct(n,this.construct,this.description):new rs.BeetStruct(n,this.construct)}get type(){return Zt.TYPE}};Sr.FixableBeetStruct=Zt;Zt.description="FixableBeetStruct";Zt.TYPE="FixableBeetStruct";function Iy(r){return r.type===Zt.TYPE}Sr.isFixableBeetStruct=Iy;var Gn=class extends Zt{constructor(e,t=Gn.description){super(e,n=>n,t)}};Sr.FixableBeetArgsStruct=Gn;Gn.description="FixableBeetArgsStruct"});var ns=M(Wn=>{_();b();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.unitTypeMap=Wn.unit=void 0;var Ay=it();Wn.unit={write:function(r,e,t){},read:function(r,e){},byteSize:0,description:"unit"};Wn.unitTypeMap={unit:{beet:"unit",isFixable:!1,sourcePack:Ay.BEET_PACKAGE,ts:"void"}}});var ru=M(Tr=>{_();b();Object.defineProperty(Tr,"__esModule",{value:!0});Tr.enumsTypeMap=Tr.dataEnum=Tr.uniformDataEnum=Tr.fixedScalarEnum=void 0;var an=it(),sr=nn(),$n=dr(),By=ts(),ky=tu(),Ey=ns();function rl(r,e){return e?`${r}`:r}function Oy(r){let e=Object.keys(r);return{write(t,n,i){let a=typeof i=="number",d=rl(i,a);if(e.includes(d)||$n.fail(`${i} should be a variant of the provided enum type, i.e. [ ${Object.values(r).join(", ")} ], but isn't`),a)sr.u8.write(t,n,i);else{let y=r[d];sr.u8.write(t,n,y)}},read(t,n){let i=sr.u8.read(t,n),a=typeof i=="number",d=rl(i,a);return e.includes(d)||$n.fail(`${i} should be a of a variant of the provided enum type, i.e. [ ${Object.values(r).join(", ")} ], but isn't`),a?i:r[d]},byteSize:sr.u8.byteSize,description:"Enum"}}Tr.fixedScalarEnum=Oy;function Cy(r){return{write:function(e,t,n){sr.u8.write(e,t,n.kind),r.write(e,t+1,n.data)},read:function(e,t){let n=sr.u8.read(e,t),i=r.read(e,t+1);return{kind:n,data:i}},byteSize:1+r.byteSize,description:`UniformDataEnum<${r.description}>`}}Tr.uniformDataEnum=Cy;function nl(r,e,t){return{write(n,i,a){sr.u8.write(n,i,e),r.write(n,i+sr.u8.byteSize,a)},read(n,i){let a=r.read(n,i+sr.u8.byteSize);return{__kind:t,...a}},byteSize:r.byteSize+sr.u8.byteSize,description:`EnumData<${r.description}>`}}function Ky(r){for(let[e,t]of r)$n((0,By.isBeetStruct)(t)||(0,ky.isFixableBeetStruct)(t)||t===Ey.unit,"dataEnum: variants must be a data beet struct or a scalar unit");return{toFixedFromData(e,t){let n=sr.u8.read(e,t),i=r[n];$n(i!=null,`Discriminant ${n} out of range for ${r.length} variants`);let[a,d]=i,y=(0,an.isFixedSizeBeet)(d)?d:d.toFixedFromData(e,t+1);return nl(y,n,a)},toFixedFromValue(e){if(e.__kind==null){let P=Object.keys(e).join(", "),B=r.map(([A])=>A).join(", ");$n.fail(`Value with fields [ ${P} ] is missing __kind, which needs to be set to one of [ ${B} ]`)}let t=r.findIndex(([P])=>P===e.__kind);if(t<0){let P=r.map(([B])=>B).join(", ");$n.fail(`${e.__kind} is not a valid kind, needs to be one of [ ${P} ]`)}let n=r[t],{__kind:i,...a}=e,[d,y]=n,w=(0,an.isFixedSizeBeet)(y)?y:y.toFixedFromValue(a);return nl(w,t,d)},description:`DataEnum<${r.length} variants>`}}Tr.dataEnum=Ky;Tr.enumsTypeMap={fixedScalarEnum:{beet:"fixedScalarEnum",isFixable:!1,sourcePack:an.BEET_PACKAGE,ts:"<TypeName>",arg:an.BEET_TYPE_ARG_INNER,pack:an.BEET_PACKAGE},dataEnum:{beet:"dataEnum",isFixable:!1,sourcePack:an.BEET_PACKAGE,ts:"DataEnum<Kind, Inner>",arg:an.BEET_TYPE_ARG_INNER,pack:an.BEET_PACKAGE}}});var nu=M(Hn=>{_();b();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.aliasesTypeMap=Hn.bytes=void 0;var il=es();Hn.bytes=il.uint8Array;Hn.aliasesTypeMap={bytes:il.collectionsTypeMap.Uint8Array}});var su=M(un=>{_();b();Object.defineProperty(un,"__esModule",{value:!0});un.tuplesTypeMap=un.tuple=un.fixedSizeTuple=void 0;var ol=it(),iu=dr(),sl=Rn();function ou(r){let e=r.length,t=r.map(a=>a.description),n=r.map(a=>a.byteSize),i=n.reduce((a,d)=>a+d,0);return{write:function(a,d,y){iu.strict.equal(y.length,e,`tuple value element size ${y.length} should match len ${e}`);let w=d;for(let P=0;P<e;P++){let B=y[P],A=r[P];A.write(a,w,B),w+=A.byteSize}},read:function(a,d){let y=[],w=d;for(let P=0;P<e;P++){let B=r[P];y[P]=B.read(a,w),w+=B.byteSize}return y},byteSize:i,length:e,description:`FixedSizeTuple<${t.join(",")}>[ ${n.join(", ")} ]`}}un.fixedSizeTuple=ou;function xy(r){let e=r.length,t=r.map(n=>n.description);return{toFixedFromData(n,i){let a=i,d=new Array(e);for(let y=0;y<e;y++){let w=(0,sl.fixBeetFromData)(r[y],n,a);d[y]=w,a+=w.byteSize}return ou(d)},toFixedFromValue(n){(0,iu.strict)(Array.isArray(n),`${n} should be an array of tuple values`),iu.strict.equal(n.length,e,`There should be ${e} tuple values, but there are ${n.length}`);let i=new Array(e);for(let a=0;a<n.length;a++){let d=(0,sl.fixBeetFromValue)(r[a],n[a]);i[a]=d}return ou(i)},description:`Tuple<${t.join(",")}>`}}un.tuple=xy;un.tuplesTypeMap={Tuple:{beet:"tuple",isFixable:!0,sourcePack:ol.BEET_PACKAGE,ts:"[__tuple_elements__]"},FixedSizeTuple:{beet:"fixedSizeTuple",isFixable:!1,sourcePack:ol.BEET_PACKAGE,ts:"[__tuple_elements__]"}}});var cu=M(Zn=>{_();b();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.mapsTypeMap=Zn.map=void 0;var Li=it(),uu=nn(),Ly=Rr(),au=dr();function is(r,e,t,n){let i=(0,Li.isFixedSizeBeet)(r),a=(0,Li.isFixedSizeBeet)(e);function d(){if(i&&a){let P=r.byteSize+e.byteSize;return{elementByteSize:P,byteSize:4+n*P}}else if(i){let P=0;for(let[A,k]of t.values())P+=k.byteSize;return{elementByteSize:r.byteSize+Math.ceil(P/n),byteSize:4+r.byteSize*n+P}}else if(a){let P=0;for(let[A,k]of t.values())P+=A.byteSize;return{elementByteSize:Math.ceil(P/n)+e.byteSize,byteSize:4+P+e.byteSize*n}}else{let P=0,B=0;for(let[k,C]of t.values())P+=k.byteSize,B+=C.byteSize;return{elementByteSize:Math.ceil(P/n+B/n),byteSize:4+P+B}}}let{elementByteSize:y,byteSize:w}=d();return{write:function(P,B,A){let k=B+4,C=0;for(let[z,E]of A.entries()){let L=i?r:null,q=a?e:null;if(L==null||q==null){let de=t.get(z);(0,au.strict)(de!=null,`Should be able to find beet els for ${(0,Ly.stringify)(z)}, but could not`),L??(L=de[0]),q??(q=de[1])}L.write(P,k,z),k+=L.byteSize,q.write(P,k,E),k+=q.byteSize,C++}uu.u32.write(P,B,C),au.strict.equal(C,n,`Expected map to have size ${n}, but has ${C}.`)},read:function(P,B){let A=uu.u32.read(P,B);au.strict.equal(A,n,`Expected map to have size ${n}, but has ${A}.`);let k=B+4,C=new Map;for(let z=0;z<A;z++){let E=i?r:r.toFixedFromData(P,k),L=E.read(P,k);k+=E.byteSize;let q=a?e:e.toFixedFromData(P,k),de=q.read(P,k);k+=q.byteSize,C.set(L,de)}return C},elementByteSize:y,byteSize:w,length:n,lenPrefixByteSize:4,description:`Map<${r.description}, ${e.description}>`}}function Dy(r,e){let t=(0,Li.isFixedSizeBeet)(r),n=(0,Li.isFixedSizeBeet)(e);return{toFixedFromData(i,a){let d=uu.u32.read(i,a),y=a+4;if(t&&n)return is(r,e,new Map,d);let w=new Map;for(let P=0;P<d;P++){let B=t?r:r.toFixedFromData(i,y),A=B.read(i,y);y+=B.byteSize;let k=n?e:e.toFixedFromData(i,y);y+=k.byteSize,w.set(A,[B,k])}return is(r,e,w,d)},toFixedFromValue(i){let a=i.size;if(t&&n)return is(r,e,new Map,a);let d=new Map;for(let[y,w]of i){let P=t?r:r.toFixedFromValue(y),B=n?e:e.toFixedFromValue(w);d.set(y,[P,B])}return is(r,e,d,a)},description:`FixableMap<${r.description}, ${e.description}>`}}Zn.map=Dy;Zn.mapsTypeMap={Map:{beet:"map",isFixable:!0,sourcePack:Li.BEET_PACKAGE,ts:"Map"}}});var hu=M(Jn=>{_();b();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.setsTypeMap=Jn.set=void 0;var fu=it(),lu=nn(),qy=Rr(),du=dr();function os(r,e,t){let n=(0,fu.isFixedSizeBeet)(r);function i(){if(n){let y=r.byteSize;return{elementByteSize:y,byteSize:4+t*y}}else{let y=0;for(let P of e.values())y+=P.byteSize;return{elementByteSize:Math.ceil(y/t),byteSize:4+y}}}let{elementByteSize:a,byteSize:d}=i();return{write:function(y,w,P){let B=w+4,A=0;for(let k of P.keys()){let C=n?r:null;if(C==null){let z=e.get(k);(0,du.strict)(z!=null,`Should be able to find beet el for ${(0,qy.stringify)(k)}, but could not`),C??(C=z)}C.write(y,B,k),B+=C.byteSize,A++}lu.u32.write(y,w,A),du.strict.equal(A,t,`Expected set to have size ${t}, but has ${A}.`)},read:function(y,w){let P=lu.u32.read(y,w);du.strict.equal(P,t,`Expected set to have size ${t}, but has ${P}.`);let B=w+4,A=new Set;for(let k=0;k<P;k++){let C=n?r:r.toFixedFromData(y,B),z=C.read(y,B);B+=C.byteSize,A.add(z)}return A},elementByteSize:a,byteSize:d,length:t,lenPrefixByteSize:4,description:`Set<${r.description}>`}}function Uy(r){let e=(0,fu.isFixedSizeBeet)(r);return{toFixedFromData(t,n){let i=lu.u32.read(t,n),a=n+4;if(e)return os(r,new Map,i);let d=new Map;for(let y=0;y<i;y++){let w=e?r:r.toFixedFromData(t,a),P=w.read(t,a);a+=w.byteSize,d.set(P,w)}return os(r,d,i)},toFixedFromValue(t){let n=t.size;if(e)return os(r,new Map,n);let i=new Map;for(let a of t){let d=e?r:r.toFixedFromValue(a);i.set(a,d)}return os(r,i,n)},description:`FixableSet<${r.description}>`}}Jn.set=Uy;Jn.setsTypeMap={Set:{beet:"set",isFixable:!0,sourcePack:fu.BEET_PACKAGE,ts:"Set"}}});var At=M(ae=>{_();b();var zy=ae&&ae.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lt=ae&&ae.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&zy(e,r,t)};Object.defineProperty(ae,"__esModule",{value:!0});ae.supportedTypeMap=void 0;var Ny=es(),Ry=Wa(),jy=nn(),Fy=Za(),Vy=ru(),Yy=nu(),Gy=su(),Wy=cu(),$y=ns(),Hy=hu();lt(nu(),ae);lt(es(),ae);lt(Wa(),ae);lt(ru(),ae);lt(cu(),ae);lt(nn(),ae);lt(hu(),ae);lt(Za(),ae);lt(su(),ae);lt(ns(),ae);lt(Rn(),ae);lt(Qa(),ae);lt(ts(),ae);lt(tu(),ae);lt(it(),ae);ae.supportedTypeMap={...Ny.collectionsTypeMap,...Fy.stringTypeMap,...Ry.compositesTypeMap,...Vy.enumsTypeMap,...jy.numbersTypeMap,...Yy.aliasesTypeMap,...Gy.tuplesTypeMap,...Wy.mapsTypeMap,...Hy.setsTypeMap,...$y.unitTypeMap}});var as=M(ss=>{_();b();Object.defineProperty(ss,"__esModule",{value:!0});ss.publicKey=void 0;var Zy=ie(),Jy=At(),gu=(0,Jy.fixedSizeUint8Array)(32);ss.publicKey={write:function(r,e,t){let n=t.toBytes();gu.write(r,e,n)},read:function(r,e){let t=gu.read(r,e);return new Zy.PublicKey(t)},byteSize:gu.byteSize,description:"PublicKey"}});var pu=M(Pr=>{_();b();var Xy=Pr&&Pr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Qy=Pr&&Pr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ep=Pr&&Pr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Xy(e,r,t);return Qy(e,r),e};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.seedsVecBeet=void 0;var yu=ep(At());Pr.seedsVecBeet=new yu.FixableBeetArgsStruct([["seeds",yu.array(yu.bytes)]],"SeedsVec")});var _u=M(Mr=>{_();b();var tp=Mr&&Mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),rp=Mr&&Mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),np=Mr&&Mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&tp(e,r,t);return rp(e,r),e};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.leafInfoBeet=void 0;var Xn=np(At());Mr.leafInfoBeet=new Xn.FixableBeetArgsStruct([["leaf",Xn.uniformFixedSizeArray(Xn.u8,32)],["proof",Xn.array(Xn.uniformFixedSizeArray(Xn.u8,32))]],"LeafInfo")});var bu=M(Ze=>{_();b();var ip=Ze&&Ze.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),op=Ze&&Ze.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),al=Ze&&Ze.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ip(e,r,t);return op(e,r),e};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.payloadTypeBeet=Ze.isPayloadTypeNumber=Ze.isPayloadTypeMerkleProof=Ze.isPayloadTypeSeeds=Ze.isPayloadTypePubkey=void 0;var Ir=al(At()),sp=al(as()),ap=pu(),up=_u(),cp=r=>r.__kind==="Pubkey";Ze.isPayloadTypePubkey=cp;var dp=r=>r.__kind==="Seeds";Ze.isPayloadTypeSeeds=dp;var lp=r=>r.__kind==="MerkleProof";Ze.isPayloadTypeMerkleProof=lp;var fp=r=>r.__kind==="Number";Ze.isPayloadTypeNumber=fp;Ze.payloadTypeBeet=Ir.dataEnum([["Pubkey",new Ir.BeetArgsStruct([["fields",Ir.fixedSizeTuple([sp.publicKey])]],'PayloadTypeRecord["Pubkey"]')],["Seeds",new Ir.FixableBeetArgsStruct([["fields",Ir.tuple([ap.seedsVecBeet])]],'PayloadTypeRecord["Seeds"]')],["MerkleProof",new Ir.FixableBeetArgsStruct([["fields",Ir.tuple([up.leafInfoBeet])]],'PayloadTypeRecord["MerkleProof"]')],["Number",new Ir.BeetArgsStruct([["fields",Ir.fixedSizeTuple([Ir.u64])]],'PayloadTypeRecord["Number"]')]])});var wu=M(Ar=>{_();b();var hp=Ar&&Ar.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gp=Ar&&Ar.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),yp=Ar&&Ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&hp(e,r,t);return gp(e,r),e};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.payloadBeet=void 0;var mu=yp(At()),pp=bu();Ar.payloadBeet=new mu.FixableBeetArgsStruct([["map",mu.map(mu.utf8String,pp.payloadTypeBeet)]],"Payload")});var us=M(Br=>{_();b();var _p=Br&&Br.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bp=Br&&Br.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mp=Br&&Br.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_p(e,r,t);return bp(e,r),e};Object.defineProperty(Br,"__esModule",{value:!0});Br.authorizationDataBeet=void 0;var wp=mp(At()),vp=wu();Br.authorizationDataBeet=new wp.FixableBeetArgsStruct([["payload",vp.payloadBeet]],"AuthorizationData")});var vu=M(Jt=>{_();b();var Sp=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Tp=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Pp=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Sp(e,r,t);return Tp(e,r),e};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.transferArgsBeet=Jt.isTransferArgsV1=void 0;var cs=Pp(At()),Mp=us(),Ip=r=>r.__kind==="V1";Jt.isTransferArgsV1=Ip;Jt.transferArgsBeet=cs.dataEnum([["V1",new cs.FixableBeetArgsStruct([["amount",cs.u64],["authorizationData",cs.coption(Mp.authorizationDataBeet)]],'TransferArgsRecord["V1"]')]])});var dl=M(st=>{_();b();var Ap=st&&st.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Bp=st&&st.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),cl=st&&st.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ap(e,r,t);return Bp(e,r),e};Object.defineProperty(st,"__esModule",{value:!0});st.createTransferInstruction=st.transferInstructionDiscriminator=st.TransferStruct=void 0;var ul=cl(At()),Su=cl(ie()),kp=vu();st.TransferStruct=new ul.FixableBeetArgsStruct([["instructionDiscriminator",ul.u8],["transferArgs",kp.transferArgsBeet]],"TransferInstructionArgs");st.transferInstructionDiscriminator=49;function Ep(r,e,t=new Su.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s")){let[n]=st.TransferStruct.serialize({instructionDiscriminator:st.transferInstructionDiscriminator,...e}),i=[{pubkey:r.token,isWritable:!0,isSigner:!1},{pubkey:r.tokenOwner,isWritable:!1,isSigner:!1},{pubkey:r.destination,isWritable:!0,isSigner:!1},{pubkey:r.destinationOwner,isWritable:!1,isSigner:!1},{pubkey:r.mint,isWritable:!1,isSigner:!1},{pubkey:r.metadata,isWritable:!0,isSigner:!1},{pubkey:r.edition??t,isWritable:!1,isSigner:!1},{pubkey:r.ownerTokenRecord??t,isWritable:r.ownerTokenRecord!=null,isSigner:!1},{pubkey:r.destinationTokenRecord??t,isWritable:r.destinationTokenRecord!=null,isSigner:!1},{pubkey:r.authority,isWritable:!1,isSigner:!0},{pubkey:r.payer,isWritable:!0,isSigner:!0},{pubkey:r.systemProgram??Su.SystemProgram.programId,isWritable:!1,isSigner:!1},{pubkey:r.sysvarInstructions,isWritable:!1,isSigner:!1},{pubkey:r.splTokenProgram,isWritable:!1,isSigner:!1},{pubkey:r.splAtaProgram,isWritable:!1,isSigner:!1},{pubkey:r.authorizationRulesProgram??t,isWritable:!1,isSigner:!1},{pubkey:r.authorizationRules??t,isWritable:!1,isSigner:!1}];return new Su.TransactionInstruction({programId:t,keys:i,data:n})}st.createTransferInstruction=Ep});var ll=M(mn=>{_();b();var Op=mn&&mn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Cp=mn&&mn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Op(e,r,t)};Object.defineProperty(mn,"__esModule",{value:!0});Cp(dl(),mn)});var hl=M(xt=>{_();b();var Kp=xt&&xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),xp=xt&&xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Lp=xt&&xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Kp(e,r,t);return xp(e,r),e};Object.defineProperty(xt,"__esModule",{value:!0});xt.authorityTypeBeet=xt.AuthorityType=void 0;var Dp=Lp(At()),fl;(function(r){r[r.None=0]="None",r[r.Metadata=1]="Metadata",r[r.Holder=2]="Holder",r[r.MetadataDelegate=3]="MetadataDelegate",r[r.TokenDelegate=4]="TokenDelegate"})(fl=xt.AuthorityType||(xt.AuthorityType={}));xt.authorityTypeBeet=Dp.fixedScalarEnum(fl)});var yl=M(j=>{_();b();var qp=j&&j.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Up=j&&j.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),gl=j&&j.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qp(e,r,t);return Up(e,r),e};Object.defineProperty(j,"__esModule",{value:!0});j.delegateArgsBeet=j.isDelegateArgsProgrammableConfigItemV1=j.isDelegateArgsCollectionItemV1=j.isDelegateArgsDataItemV1=j.isDelegateArgsAuthorityItemV1=j.isDelegateArgsProgrammableConfigV1=j.isDelegateArgsLockedTransferV1=j.isDelegateArgsStandardV1=j.isDelegateArgsStakingV1=j.isDelegateArgsUtilityV1=j.isDelegateArgsDataV1=j.isDelegateArgsTransferV1=j.isDelegateArgsSaleV1=j.isDelegateArgsCollectionV1=void 0;var Y=gl(At()),zp=gl(as()),Xt=us(),Np=r=>r.__kind==="CollectionV1";j.isDelegateArgsCollectionV1=Np;var Rp=r=>r.__kind==="SaleV1";j.isDelegateArgsSaleV1=Rp;var jp=r=>r.__kind==="TransferV1";j.isDelegateArgsTransferV1=jp;var Fp=r=>r.__kind==="DataV1";j.isDelegateArgsDataV1=Fp;var Vp=r=>r.__kind==="UtilityV1";j.isDelegateArgsUtilityV1=Vp;var Yp=r=>r.__kind==="StakingV1";j.isDelegateArgsStakingV1=Yp;var Gp=r=>r.__kind==="StandardV1";j.isDelegateArgsStandardV1=Gp;var Wp=r=>r.__kind==="LockedTransferV1";j.isDelegateArgsLockedTransferV1=Wp;var $p=r=>r.__kind==="ProgrammableConfigV1";j.isDelegateArgsProgrammableConfigV1=$p;var Hp=r=>r.__kind==="AuthorityItemV1";j.isDelegateArgsAuthorityItemV1=Hp;var Zp=r=>r.__kind==="DataItemV1";j.isDelegateArgsDataItemV1=Zp;var Jp=r=>r.__kind==="CollectionItemV1";j.isDelegateArgsCollectionItemV1=Jp;var Xp=r=>r.__kind==="ProgrammableConfigItemV1";j.isDelegateArgsProgrammableConfigItemV1=Xp;j.delegateArgsBeet=Y.dataEnum([["CollectionV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["CollectionV1"]')],["SaleV1",new Y.FixableBeetArgsStruct([["amount",Y.u64],["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["SaleV1"]')],["TransferV1",new Y.FixableBeetArgsStruct([["amount",Y.u64],["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["TransferV1"]')],["DataV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["DataV1"]')],["UtilityV1",new Y.FixableBeetArgsStruct([["amount",Y.u64],["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["UtilityV1"]')],["StakingV1",new Y.FixableBeetArgsStruct([["amount",Y.u64],["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["StakingV1"]')],["StandardV1",new Y.BeetArgsStruct([["amount",Y.u64]],'DelegateArgsRecord["StandardV1"]')],["LockedTransferV1",new Y.FixableBeetArgsStruct([["amount",Y.u64],["lockedAddress",zp.publicKey],["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["LockedTransferV1"]')],["ProgrammableConfigV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["ProgrammableConfigV1"]')],["AuthorityItemV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["AuthorityItemV1"]')],["DataItemV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["DataItemV1"]')],["CollectionItemV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["CollectionItemV1"]')],["ProgrammableConfigItemV1",new Y.FixableBeetArgsStruct([["authorizationData",Y.coption(Xt.authorizationDataBeet)]],'DelegateArgsRecord["ProgrammableConfigItemV1"]')]])});var _l=M(Lt=>{_();b();var Qp=Lt&&Lt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),e0=Lt&&Lt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),t0=Lt&&Lt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Qp(e,r,t);return e0(e,r),e};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.metadataDelegateRoleBeet=Lt.MetadataDelegateRole=void 0;var r0=t0(At()),pl;(function(r){r[r.AuthorityItem=0]="AuthorityItem",r[r.Collection=1]="Collection",r[r.Use=2]="Use",r[r.Data=3]="Data",r[r.ProgrammableConfig=4]="ProgrammableConfig",r[r.DataItem=5]="DataItem",r[r.CollectionItem=6]="CollectionItem",r[r.ProgrammableConfigItem=7]="ProgrammableConfigItem"})(pl=Lt.MetadataDelegateRole||(Lt.MetadataDelegateRole={}));Lt.metadataDelegateRoleBeet=r0.fixedScalarEnum(pl)});var ml=M(Dt=>{_();b();var n0=Dt&&Dt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),i0=Dt&&Dt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),o0=Dt&&Dt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&n0(e,r,t);return i0(e,r),e};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.tokenDelegateRoleBeet=Dt.TokenDelegateRole=void 0;var s0=o0(At()),bl;(function(r){r[r.Sale=0]="Sale",r[r.Transfer=1]="Transfer",r[r.Utility=2]="Utility",r[r.Staking=3]="Staking",r[r.Standard=4]="Standard",r[r.LockedTransfer=5]="LockedTransfer",r[r.Migration=6]="Migration"})(bl=Dt.TokenDelegateRole||(Dt.TokenDelegateRole={}));Dt.tokenDelegateRoleBeet=s0.fixedScalarEnum(bl)});var vl=M(qt=>{_();b();var a0=qt&&qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),u0=qt&&qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),c0=qt&&qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&a0(e,r,t);return u0(e,r),e};Object.defineProperty(qt,"__esModule",{value:!0});qt.tokenStandardBeet=qt.TokenStandard=void 0;var d0=c0(At()),wl;(function(r){r[r.NonFungible=0]="NonFungible",r[r.FungibleAsset=1]="FungibleAsset",r[r.Fungible=2]="Fungible",r[r.NonFungibleEdition=3]="NonFungibleEdition",r[r.ProgrammableNonFungible=4]="ProgrammableNonFungible"})(wl=qt.TokenStandard||(qt.TokenStandard={}));qt.tokenStandardBeet=d0.fixedScalarEnum(wl)});var Sl=M(et=>{_();b();var l0=et&&et.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ar=et&&et.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&l0(e,r,t)};Object.defineProperty(et,"__esModule",{value:!0});ar(hl(),et);ar(us(),et);ar(yl(),et);ar(_u(),et);ar(_l(),et);ar(wu(),et);ar(bu(),et);ar(pu(),et);ar(ml(),et);ar(vl(),et);ar(vu(),et)});var cn=M(Ut=>{_();b();var f0=Ut&&Ut.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Tl=Ut&&Ut.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&f0(e,r,t)};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.PROGRAM_ID=Ut.PROGRAM_ADDRESS=void 0;var h0=ie();Tl(ll(),Ut);Tl(Sl(),Ut);Ut.PROGRAM_ADDRESS="metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s";Ut.PROGRAM_ID=new h0.PublicKey(Ut.PROGRAM_ADDRESS)});var Tu=M(Fr=>{_();b();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.isBigNumber=Fr.toOptionBigNumber=Fr.toBigNumber=void 0;var g0=lr(),y0=(r,e)=>new g0.BN(r,e);Fr.toBigNumber=y0;var p0=r=>r===null?null:(0,Fr.toBigNumber)(r);Fr.toOptionBigNumber=p0;var _0=r=>r?.__opaque__==="BigNumber";Fr.isBigNumber=_0});var Ml=M(ds=>{_();b();Object.defineProperty(ds,"__esModule",{value:!0});ds.token=void 0;var Pl=Tu(),b0=(r,e=0,t="Token")=>(typeof r!="number"&&(r=(0,Pl.toBigNumber)(r).toNumber()),{basisPoints:(0,Pl.toBigNumber)(r*Math.pow(10,e)),currency:{symbol:t,decimals:e,namespace:"spl-token"}});ds.token=b0});var Al=M(ls=>{_();b();Object.defineProperty(ls,"__esModule",{value:!0});ls.Pda=void 0;var Il=ie(),Di=class extends Il.PublicKey{constructor(e,t){super(e),this.bump=t}static find(e,t){let[n,i]=Il.PublicKey.findProgramAddressSync(t,e);return new Di(n,i)}};ls.Pda=Di});var kl=M(kr=>{_();b();Object.defineProperty(kr,"__esModule",{value:!0});kr.systemProgram=kr.associatedTokenProgram=kr.tokenProgram=kr.tokenMetadataProgram=void 0;var m0=ie(),w0=cn(),Bl=Ho();kr.tokenMetadataProgram={name:"TokenMetadataProgram",address:w0.PROGRAM_ID};kr.tokenProgram={name:"TokenProgram",address:Bl.TOKEN_PROGRAM_ID};kr.associatedTokenProgram={name:"AssociatedTokenProgram",address:Bl.ASSOCIATED_TOKEN_PROGRAM_ID};kr.systemProgram={name:"SystemProgram",address:m0.SystemProgram.programId}});var El=M(Qn=>{_();b();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.toPublicKey=Qn.PublicKey=void 0;var v0=ie(),S0=ie();Object.defineProperty(Qn,"PublicKey",{enumerable:!0,get:function(){return S0.PublicKey}});var T0=r=>typeof r=="object"&&"publicKey"in r?r.publicKey:typeof r=="object"&&"address"in r?r.address:new v0.PublicKey(r);Qn.toPublicKey=T0});var Ol=M(ft=>{_();b();Object.defineProperty(ft,"__esModule",{value:!0});ft.getSignerHistogram=ft.isIdentitySigner=ft.isKeypairSigner=ft.isSigner=void 0;var P0=r=>typeof r=="object"&&"publicKey"in r&&("secretKey"in r||"signTransaction"in r);ft.isSigner=P0;var M0=r=>(0,ft.isSigner)(r)&&"secretKey"in r&&r.secretKey!=null;ft.isKeypairSigner=M0;var I0=r=>(0,ft.isSigner)(r)&&!(0,ft.isKeypairSigner)(r);ft.isIdentitySigner=I0;var A0=r=>r.reduce((e,t)=>{let n=e.all.findIndex(({publicKey:y})=>y.equals(t.publicKey)),i=e.all[n]??null,a=i?(0,ft.isIdentitySigner)(i):!1,d=(0,ft.isIdentitySigner)(t);if(!i)e.all.push(t),d?e.identities.push(t):e.keypairs.push(t);else if(a&&!d){let y=e.identities.findIndex(({publicKey:w})=>w.equals(t.publicKey));e.all.splice(n,1),e.identities.splice(y,1),e.all.push(t),e.keypairs.push(t)}return e},{all:[],keypairs:[],identities:[]});ft.getSignerHistogram=A0});var ti=M(Qt=>{_();b();var B0=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ei=Qt&&Qt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&B0(e,r,t)};Object.defineProperty(Qt,"__esModule",{value:!0});ei(Ml(),Qt);ei(Tu(),Qt);ei(Al(),Qt);ei(kl(),Qt);ei(El(),Qt);ei(Ol(),Qt)});var Cl=M(ur=>{_();b();Object.defineProperty(ur,"__esModule",{value:!0});ur.getDefaultDelegateArgs=ur.getMetadataDelegateRoleSeed=ur.getMetadataDelegateRole=ur.getTokenDelegateRole=void 0;var tt=cn(),k0={StandardV1:tt.TokenDelegateRole.Standard,TransferV1:tt.TokenDelegateRole.Transfer,LockedTransferV1:tt.TokenDelegateRole.LockedTransfer,SaleV1:tt.TokenDelegateRole.Sale,UtilityV1:tt.TokenDelegateRole.Utility,StakingV1:tt.TokenDelegateRole.Staking},E0={CollectionV1:tt.MetadataDelegateRole.Collection,DataV1:tt.MetadataDelegateRole.Data,ProgrammableConfigV1:tt.MetadataDelegateRole.ProgrammableConfig},O0={[tt.MetadataDelegateRole.AuthorityItem]:"authority_item_delegate",[tt.MetadataDelegateRole.Collection]:"collection_delegate",[tt.MetadataDelegateRole.Use]:"use_delegate",[tt.MetadataDelegateRole.Data]:"data_delegate",[tt.MetadataDelegateRole.ProgrammableConfig]:"programmable_config_delegate",[tt.MetadataDelegateRole.DataItem]:"data_item_delegate",[tt.MetadataDelegateRole.CollectionItem]:"collection_item_delegate",[tt.MetadataDelegateRole.ProgrammableConfigItem]:"prog_config_item_delegate"},C0={CollectionV1:!1,DataV1:!1,ProgrammableConfigV1:!1,StandardV1:!0,TransferV1:!0,SaleV1:!0,UtilityV1:!0,StakingV1:!0,LockedTransferV1:!0},K0=r=>{let e=k0[r];if(!e)throw new Error(`UnreachableCaseError: ${r}`);return e};ur.getTokenDelegateRole=K0;var x0=r=>{let e=E0[r];if(!e)throw new Error(`UnreachableCaseError: ${r}`);return e};ur.getMetadataDelegateRole=x0;var L0=r=>O0[(0,ur.getMetadataDelegateRole)(r)];ur.getMetadataDelegateRoleSeed=L0;var D0=r=>{let e=C0[r];if(e===void 0)throw new Error(`UnreachableCaseError: ${r}`);if(e)throw new Error(`DelegateRoleRequiredDataError: ${r}`);return{__kind:r}};ur.getDefaultDelegateArgs=D0});var Pu=M(er=>{_();b();Object.defineProperty(er,"__esModule",{value:!0});er.getMetadataDelegateRecord=er.getTokenRecord=er.getAssociatedTokenAccount=er.getMasterEdition=er.getMetadata=void 0;var vn=gt(),fs=cn(),wn=ti(),q0=Cl(),U0=r=>{let e=fs.PROGRAM_ID;return wn.Pda.find(e,[vn.Buffer.from("metadata","utf8"),e.toBuffer(),r.toBuffer()])};er.getMetadata=U0;var z0=r=>{let e=fs.PROGRAM_ID;return wn.Pda.find(e,[vn.Buffer.from("metadata","utf8"),e.toBuffer(),r.toBuffer(),vn.Buffer.from("edition","utf8")])};er.getMasterEdition=z0;var N0=r=>wn.Pda.find(wn.associatedTokenProgram.address,[r.owner.toBuffer(),wn.tokenProgram.address.toBuffer(),r.mint.toBuffer()]);er.getAssociatedTokenAccount=N0;var R0=r=>{let e=fs.PROGRAM_ID;return wn.Pda.find(e,[vn.Buffer.from("metadata","utf8"),e.toBuffer(),r.mint.toBuffer(),vn.Buffer.from("token_record","utf8"),r.token.toBuffer()])};er.getTokenRecord=R0;var j0=r=>{let e=fs.PROGRAM_ID;return wn.Pda.find(e,[vn.Buffer.from("metadata","utf8"),e.toBuffer(),r.mint.toBuffer(),vn.Buffer.from((0,q0.getMetadataDelegateRoleSeed)(r.type),"utf8"),r.updateAuthority.toBuffer(),r.delegate.toBuffer()])};er.getMetadataDelegateRecord=j0});var Kl=M(hs=>{_();b();Object.defineProperty(hs,"__esModule",{value:!0});hs.parseTokenMetadataDelegateInput=void 0;var F0=ti(),Mu=Pu(),V0=(r,e,t)=>{if("updateAuthority"in e)return{isTokenDelegate:!1,delegate:e.delegate,approver:e.updateAuthority,delegateRecord:(0,Mu.getMetadataDelegateRecord)({mint:r,type:e.type,updateAuthority:e.updateAuthority,delegate:(0,F0.isSigner)(e.delegate)?e.delegate.publicKey:e.delegate,programs:t})};let n=e.token??(0,Mu.getAssociatedTokenAccount)({mint:r,owner:e.owner,programs:t});return{isTokenDelegate:!0,delegate:e.delegate,approver:e.owner,delegateRecord:(0,Mu.getTokenRecord)({mint:r,token:n,programs:t}),tokenAccount:n}};hs.parseTokenMetadataDelegateInput=V0});var Ll=M(ri=>{_();b();Object.defineProperty(ri,"__esModule",{value:!0});ri.getSignerFromTokenMetadataAuthority=ri.parseTokenMetadataAuthorization=void 0;var gs=cn(),xl=Kl(),Y0=r=>{let e={accounts:{authorizationRules:r.authorizationDetails?.rules??null},signers:[],data:{authorizationData:r.authorizationDetails?.data??null}};if(r.authority.__kind==="metadata")e.accounts.authority=r.authority.updateAuthority.publicKey,e.accounts.token=r.authority.token,e.signers.push(r.authority.updateAuthority),e.data.authorityType=gs.AuthorityType.Metadata;else if(r.authority.__kind==="metadataDelegate"){let{delegateRecord:t,approver:n}=(0,xl.parseTokenMetadataDelegateInput)(r.mint,r.authority,r.programs);e.accounts.authority=r.authority.delegate.publicKey,e.accounts.delegateRecord=t,e.accounts.approver=n,e.signers.push(r.authority.delegate),e.data.authorityType=gs.AuthorityType.MetadataDelegate}else if(r.authority.__kind==="tokenDelegate"){let{delegateRecord:t,approver:n,tokenAccount:i}=(0,xl.parseTokenMetadataDelegateInput)(r.mint,r.authority,r.programs);e.accounts.authority=r.authority.delegate.publicKey,e.accounts.token=i,e.accounts.delegateRecord=t,e.accounts.approver=n,e.signers.push(r.authority.delegate),e.data.authorityType=gs.AuthorityType.TokenDelegate}else if(r.authority.__kind==="holder")e.accounts.authority=r.authority.owner.publicKey,e.accounts.token=r.authority.token,e.signers.push(r.authority.owner),e.data.authorityType=gs.AuthorityType.Holder;else throw new Error(`UnreachableCaseError: ${r.authority.__kind}`);return e};ri.parseTokenMetadataAuthorization=Y0;var G0=r=>{if(!("__kind"in r))return r;switch(r.__kind){case"metadata":return r.updateAuthority;case"metadataDelegate":case"tokenDelegate":return r.delegate;case"holder":return r.owner;default:throw new Error(`UnreachableCaseError: ${r.__kind}`)}};ri.getSignerFromTokenMetadataAuthority=G0});var Ul=M(dn=>{_();b();Object.defineProperty(dn,"__esModule",{value:!0});dn.getSerializedTransaction=dn.getSignedTransaction=dn.TransactionBuilder=void 0;var W0=ie(),$0=ti(),Dl=lr(),Vr=class{constructor(e={}){this.records=[],this.feePayer=void 0,this.context={},this.transactionOptions=e}static make(e){return new Vr(e)}prepend(...e){let t=e.flatMap(n=>n instanceof Vr?n.getInstructionsWithSigners():[n]);return this.records=[...t,...this.records],this}append(...e){let t=e.flatMap(n=>n instanceof Vr?n.getInstructionsWithSigners():[n]);return this.records=[...this.records,...t],this}add(...e){return this.append(...e)}splitUsingKey(e,t=!0){let n=new Vr(this.transactionOptions),i=new Vr(this.transactionOptions),a=this.records.findIndex(d=>d.key===e);return a>-1?(a+=t?1:0,n.add(...this.records.slice(0,a)),i.add(...this.records.slice(a))):n.add(this),[n,i]}splitBeforeKey(e){return this.splitUsingKey(e,!1)}splitAfterKey(e){return this.splitUsingKey(e,!0)}getInstructionsWithSigners(){return this.records}getInstructions(){return this.records.map(e=>e.instruction)}getInstructionCount(){return this.records.length}isEmpty(){return this.getInstructionCount()===0}getSigners(){let e=this.feePayer==null?[]:[this.feePayer],t=this.records.flatMap(n=>n.signers);return[...e,...t]}setTransactionOptions(e){return this.transactionOptions=e,this}getTransactionOptions(){return this.transactionOptions}setFeePayer(e){return this.feePayer=e,this}getFeePayer(){return this.feePayer}setContext(e){return this.context=e,this}getContext(){return this.context}when(e,t){return e?t(this):this}unless(e,t){return this.when(!e,t)}toTransaction(e,t={}){t={...this.getTransactionOptions(),...t};let n=new W0.Transaction({feePayer:this.getFeePayer()?.publicKey,signatures:t.signatures,blockhash:e.blockhash,lastValidBlockHeight:e.lastValidBlockHeight});return n.add(...this.getInstructions()),n}};dn.TransactionBuilder=Vr;function ql(r,e,t){return!("records"in r)&&r.recentBlockhash&&r.lastValidBlockHeight&&(t={blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight}),"records"in r&&(e=[...r.getSigners(),...e],r=r.toTransaction(t)),{transaction:r,signers:e,blockhashWithExpiryBlockHeight:t}}function H0(r,e){let{keypairs:t}=(0,$0.getSignerHistogram)(e);return t.length>0&&r.partialSign(...t),r}function Z0(r,e=[],t){let n=ql(r,e,t);return r=n.transaction,e=n.signers,r=H0(r,e),Dl.base.toBase58(r.serialize())}dn.getSignedTransaction=Z0;function J0(r,e=[],t){return r=ql(r,e,t).transaction,Dl.base.toBase58(r.serialize({requireAllSignatures:!1,verifySignatures:!1}))}dn.getSerializedTransaction=J0});var Nl=M(zl=>{_();b();Object.defineProperty(zl,"__esModule",{value:!0})});var Iu=M(ln=>{_();b();var X0=ln&&ln.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Rl=ln&&ln.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&X0(e,r,t)};Object.defineProperty(ln,"__esModule",{value:!0});Rl(Ul(),ln);Rl(Nl(),ln)});var jl=M(ni=>{_();b();Object.defineProperty(ni,"__esModule",{value:!0});ni.isProgrammable=ni.isNonFungible=void 0;var ys=cn(),Q0=r=>r.tokenStandard===null||r.tokenStandard===ys.TokenStandard.NonFungible||r.tokenStandard===ys.TokenStandard.NonFungibleEdition||r.tokenStandard===ys.TokenStandard.ProgrammableNonFungible;ni.isNonFungible=Q0;var e_=r=>r.tokenStandard===ys.TokenStandard.ProgrammableNonFungible;ni.isProgrammable=e_});var Fl=M(Sn=>{_();b();var t_=Sn&&Sn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),r_=Sn&&Sn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&t_(e,r,t)};Object.defineProperty(Sn,"__esModule",{value:!0});r_(jl(),Sn)});var Gl=M(ps=>{_();b();Object.defineProperty(ps,"__esModule",{value:!0});ps.transferNftBuilder=void 0;var n_=cn(),Yl=ie(),qi=ti(),ii=Pu(),Vl=Ll(),i_=Iu(),Au=Fl(),o_=new Yl.PublicKey("auth9SigNpDKz4sJJ1DfCTuZrZNSAgh9sFD3rboVmgg"),s_=(r,e,t)=>{let{nftOrSft:n,authority:i,toOwner:a,amount:d=(0,qi.token)(1),authorizationDetails:y}=r,w=r.fromOwner??(0,Vl.getSignerFromTokenMetadataAuthority)(i).publicKey,P=(0,ii.getMetadata)(n.address),B=(0,ii.getMasterEdition)(n.address),A=r.fromToken??(0,ii.getAssociatedTokenAccount)({mint:n.address,owner:w}),k=r.toToken??(0,ii.getAssociatedTokenAccount)({mint:n.address,owner:a}),C=(0,ii.getTokenRecord)({mint:n.address,token:A}),z=(0,ii.getTokenRecord)({mint:n.address,token:k}),E=(0,Vl.parseTokenMetadataAuthorization)({mint:n.address,authority:"__kind"in i?i:{__kind:"holder",owner:i,token:A},authorizationDetails:y,programs:t});return i_.TransactionBuilder.make().setFeePayer(e).add({instruction:(0,n_.createTransferInstruction)({token:A,tokenOwner:w,destination:k,destinationOwner:a,mint:n.address,metadata:P,edition:(0,Au.isNonFungible)(n)?B:void 0,ownerTokenRecord:(0,Au.isProgrammable)(n)?C:void 0,destinationTokenRecord:(0,Au.isProgrammable)(n)?z:void 0,authority:E.accounts.authority,payer:e.publicKey,systemProgram:qi.systemProgram.address,sysvarInstructions:Yl.SYSVAR_INSTRUCTIONS_PUBKEY,splTokenProgram:qi.tokenProgram.address,splAtaProgram:qi.associatedTokenProgram.address,authorizationRules:E.accounts.authorizationRules,authorizationRulesProgram:o_},{transferArgs:{__kind:"V1",amount:d.basisPoints,...E.data}},qi.tokenMetadataProgram.address),signers:[e,...E.signers],key:r.instructionKey??"transferNft"})};ps.transferNftBuilder=s_});var _s=M(cr=>{_();b();var a_=cr&&cr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ui=cr&&cr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&a_(e,r,t)};Object.defineProperty(cr,"__esModule",{value:!0});Ui(as(),cr);Ui(cn(),cr);Ui(Gl(),cr);Ui(Iu(),cr);Ui(ti(),cr)});var ku=M(Bt=>{_();b();var u_=Bt&&Bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),c_=Bt&&Bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Bu=Bt&&Bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&u_(e,r,t);return c_(e,r),e};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.metaplex=Bt.web3=Bt.spl=void 0;Bt.spl=Bu(Ho());Bt.web3=Bu(ie());Bt.metaplex=Bu(_s())});var $l=M(D=>{_();b();Object.defineProperty(D,"__esModule",{value:!0});D.validSignedTransaction=D.getSerializedMplTransaction=D.signMplTransaction=D.createAndSignVersionedTransaction=D.getSerializedVersionedTransaction=D.getSerializedTokenTransferVersionedTransaction=D.signTokenTransferVersionedTransaction=D.signTransferVersionedTransaction=D.getSerializedTransferVersionedTransaction=D.getHardwareTransaction=D.deserializeMessages=D.signMessage=D.appendTokenBurnInstruction=D.appendTokenMintToInstruction=D.appendTokenTransferInstruction=D.appendTransferInstruction=D.signTransaction=D.appendInstruction=D.createRawTransaction=D.validAddress=D.getNewAddress=void 0;var zi=Tn(),ce=lr(),I=ku(),Je=ie(),oi=_s(),Er=Ho(),ht=qo(),Wl=mi();function d_(r){if(!r)throw new Error("invalid key");let e=ce.base.fromBase58(r);if(e.length!=64)throw new Error("invalid key length");let t=zi.signUtil.ed25519.publicKeyCreate(e);return ce.base.toBase58(t)}D.getNewAddress=d_;function l_(r){try{return ce.base.fromBase58(r).length==32}catch{return!1}}D.validAddress=l_;function f_(r,e){return new I.web3.Transaction({feePayer:new I.web3.PublicKey(r),blockhash:e,lastValidBlockHeight:0})}D.createRawTransaction=f_;async function h_(r,...e){r.add(...e)}D.appendInstruction=h_;async function g_(r,...e){let t=[];return e.forEach(n=>{t.push(I.web3.Keypair.fromSecretKey(ce.base.fromBase58(n)))}),r.sign(...t),r.signature?Promise.resolve(ce.base.toBase58(r.serialize())):Promise.reject("sign error")}D.signTransaction=g_;async function y_(r,e,t,n){r.add(I.web3.SystemProgram.transfer({fromPubkey:new I.web3.PublicKey(e),toPubkey:new I.web3.PublicKey(t),lamports:n}))}D.appendTransferInstruction=y_;async function p_(r,e,t,n,i,a,d,y){let w=d===!0?Er.TOKEN_2022_PROGRAM_ID:Er.TOKEN_PROGRAM_ID,P=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(n),new I.web3.PublicKey(e),!1,w),B=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(n),new I.web3.PublicKey(t),!0,w);if(a&&r.add(I.spl.createAssociatedTokenAccountInstruction(new I.web3.PublicKey(e),new I.web3.PublicKey(B),new I.web3.PublicKey(t),new I.web3.PublicKey(n),new I.web3.PublicKey(w))),d){if(!y)throw new Error("invalid decimal for token 2022");r.add(I.spl.createTransferCheckedInstruction(new I.web3.PublicKey(P),new I.web3.PublicKey(n),new I.web3.PublicKey(B),new I.web3.PublicKey(e),i,y,[],new I.web3.PublicKey(w)))}else r.add(I.spl.createTransferInstruction(new I.web3.PublicKey(P),new I.web3.PublicKey(B),new I.web3.PublicKey(e),i,[],new I.web3.PublicKey(w)))}D.appendTokenTransferInstruction=p_;async function __(r,e,t,n,i,a,d,y){let w=y===!0?Er.TOKEN_2022_PROGRAM_ID:Er.TOKEN_PROGRAM_ID,P=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(n),new I.web3.PublicKey(t),!1,w);d&&r.add(I.spl.createAssociatedTokenAccountInstruction(new I.web3.PublicKey(e),new I.web3.PublicKey(P),new I.web3.PublicKey(t),new I.web3.PublicKey(n),new I.web3.PublicKey(w))),r.add(I.spl.createMintToInstruction(new I.web3.PublicKey(n),new I.web3.PublicKey(P),new I.web3.PublicKey(i),a,[],new I.web3.PublicKey(w)))}D.appendTokenMintToInstruction=__;async function b_(r,e,t,n,i,a){let d=a===!0?Er.TOKEN_2022_PROGRAM_ID:Er.TOKEN_PROGRAM_ID;r.add(I.spl.createBurnInstruction(new I.web3.PublicKey(t),new I.web3.PublicKey(n),new I.web3.PublicKey(e),i,[],new I.web3.PublicKey(d)))}D.appendTokenBurnInstruction=b_;async function m_(r,e,t){let n=t?.encoding||"base58";if(n==="base58"){let i=ce.base.fromBase58(r),a=ce.base.fromBase58(e),d=zi.signUtil.ed25519.sign(i,a),y=ce.base.toBase58(d);return Promise.resolve(y)}else if(n==="base64"){let i=ce.base.fromBase64(r),a=ce.base.fromBase58(e),d=zi.signUtil.ed25519.sign(i,a),y=ce.base.toBase64(d);return Promise.resolve(y)}else return Promise.reject("invalid encoding, only base58 and base64 are supported")}D.signMessage=m_;async function w_(r){let e=[];for(let t=0;t<r.length;t++){let n=!0,i=0,a=!1,d=0,y=r[t];try{let P=I.web3.VersionedTransaction.deserialize(ce.base.fromBase58(y)).message;for(let B=0;B<P.compiledInstructions.length;B++){let A=P.compiledInstructions[B];if(P.staticAccountKeys[A.programIdIndex].toBase58()==ht.ComputeBudgetProgram.programId.toBase58()){let k=T.Buffer.from(A.data);try{let{units:C}=(0,Wl.decodeData)(ht.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,k);i=C,a=!0}catch{}try{let{microLamports:C}=(0,Wl.decodeData)(ht.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,k);d=C}catch{}}}a||(i=0,P.compiledInstructions.length>1&&(i=(P.compiledInstructions.length-1)*2e5))}catch{n=!1}e.push({deserialized:n,computeUnitLimit:i.toString(),computeUnitPrice:d.toString()})}return Promise.resolve(e)}D.deserializeMessages=w_;async function v_(r,e,t){let n=I.web3.Transaction.from(ce.base.fromHex(r));return n.addSignature(new Je.PublicKey(e),ce.base.fromHex(t)),n.signature?Promise.resolve(ce.base.toBase58(n.serialize())):Promise.reject("getHardwareTransaction error")}D.getHardwareTransaction=v_;async function S_(r,...e){let t=[];if(r.needPriorityFee&&r.computeUnitLimit&&r.computeUnitPrice){let n=ht.ComputeBudgetProgram.setComputeUnitLimit({units:r.computeUnitLimit}),i=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:r.computeUnitPrice});t.push(n),t.push(i)}return t.push(I.web3.SystemProgram.transfer({fromPubkey:new I.web3.PublicKey(r.from),toPubkey:new I.web3.PublicKey(r.to),lamports:r.amount})),Eu(r.payer,r.blockHash,t,e)}D.getSerializedTransferVersionedTransaction=S_;async function T_(r,...e){let t=[];if(r.computeUnitLimit&&r.computeUnitPrice){let n=ht.ComputeBudgetProgram.setComputeUnitLimit({units:r.computeUnitLimit}),i=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:r.computeUnitPrice});t.push(n),t.push(i)}return t.push(I.web3.SystemProgram.transfer({fromPubkey:new I.web3.PublicKey(r.from),toPubkey:new I.web3.PublicKey(r.to),lamports:r.amount})),Ou(r.payer,r.blockHash,t,e)}D.signTransferVersionedTransaction=T_;async function P_(r,...e){let t=r.token2022===!0?Er.TOKEN_2022_PROGRAM_ID:Er.TOKEN_PROGRAM_ID,n=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(r.mint),new I.web3.PublicKey(r.from),!1,t),i=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(r.mint),new I.web3.PublicKey(r.to),!0,t),a=[];if(r.computeUnitLimit&&r.computeUnitPrice){let d=ht.ComputeBudgetProgram.setComputeUnitLimit({units:r.computeUnitLimit}),y=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:r.computeUnitPrice});a.push(d),a.push(y)}return r.createAssociatedAddress&&a.push(I.spl.createAssociatedTokenAccountInstruction(new I.web3.PublicKey(r.from),new I.web3.PublicKey(i),new I.web3.PublicKey(r.to),new I.web3.PublicKey(r.mint),new I.web3.PublicKey(t))),a.push(I.spl.createTransferInstruction(new I.web3.PublicKey(n),new I.web3.PublicKey(i),new I.web3.PublicKey(r.from),r.amount,[],new I.web3.PublicKey(t))),Ou(r.payer,r.blockHash,a,e)}D.signTokenTransferVersionedTransaction=P_;async function M_(r,...e){let t=r.token2022===!0?Er.TOKEN_2022_PROGRAM_ID:Er.TOKEN_PROGRAM_ID,n=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(r.mint),new I.web3.PublicKey(r.from),!1,t),i=await I.spl.getAssociatedTokenAddress(new I.web3.PublicKey(r.mint),new I.web3.PublicKey(r.to),!1,t),a=[];if(r.needPriorityFee&&r.computeUnitLimit&&r.computeUnitPrice){let d=ht.ComputeBudgetProgram.setComputeUnitLimit({units:r.computeUnitLimit}),y=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:r.computeUnitPrice});a.push(d),a.push(y)}return r.createAssociatedAddress&&a.push(I.spl.createAssociatedTokenAccountInstruction(new I.web3.PublicKey(r.from),new I.web3.PublicKey(i),new I.web3.PublicKey(r.to),new I.web3.PublicKey(r.mint),new I.web3.PublicKey(t))),a.push(I.spl.createTransferInstruction(new I.web3.PublicKey(n),new I.web3.PublicKey(i),new I.web3.PublicKey(r.from),r.amount,[],new I.web3.PublicKey(t))),Eu(r.payer,r.blockHash,a,e)}D.getSerializedTokenTransferVersionedTransaction=M_;async function Eu(r,e,t,n){let i=new Je.TransactionMessage({payerKey:new Je.PublicKey(r),recentBlockhash:e,instructions:t}).compileToV0Message(),a=new Je.VersionedTransaction(i);return Promise.resolve(ce.base.toBase58(a.serialize()))}D.getSerializedVersionedTransaction=Eu;async function Ou(r,e,t,n){let i=new Je.TransactionMessage({payerKey:new Je.PublicKey(r),recentBlockhash:e,instructions:t}).compileToV0Message(),a=new Je.VersionedTransaction(i),d=[];return n.forEach(y=>{let w=Je.Keypair.fromSecretKey(ce.base.fromBase58(y));d.push({publicKey:w.publicKey,secretKey:w.secretKey})}),a.sign(d),a.signature?Promise.resolve(ce.base.toBase58(a.serialize())):Promise.reject("sign error")}D.createAndSignVersionedTransaction=Ou;async function I_(r,e,t,n,i,a,d=oi.TokenStandard.ProgrammableNonFungible,y,w){let P={tokenStandard:d,address:new Je.PublicKey(n)},B={publicKey:new Je.PublicKey(e),secretKey:ce.base.fromBase58(a)},A=(0,oi.transferNftBuilder)({nftOrSft:P,authority:B,fromOwner:new Je.PublicKey(e),toOwner:new Je.PublicKey(t)},B);if(y&&w){let k=ht.ComputeBudgetProgram.setComputeUnitLimit({units:y}),C=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:w});A.add({instruction:k,signers:[]}),A.add({instruction:C,signers:[]})}return(0,oi.getSignedTransaction)(A,void 0,{blockhash:i,lastValidBlockHeight:0})}D.signMplTransaction=I_;async function A_(r,e,t,n,i,a,d=oi.TokenStandard.ProgrammableNonFungible,y,w){let P={tokenStandard:d,address:new Je.PublicKey(n)},B={publicKey:new Je.PublicKey(e),secretKey:ce.base.fromBase58(a)},A=(0,oi.transferNftBuilder)({nftOrSft:P,authority:B,fromOwner:new Je.PublicKey(e),toOwner:new Je.PublicKey(t)},B);if(y&&w){let k=ht.ComputeBudgetProgram.setComputeUnitLimit({units:y}),C=ht.ComputeBudgetProgram.setComputeUnitPrice({microLamports:w});A.add({instruction:k,signers:[]}),A.add({instruction:C,signers:[]})}return(0,oi.getSerializedTransaction)(A,void 0,{blockhash:i,lastValidBlockHeight:0})}D.getSerializedMplTransaction=A_;function B_(r,e,t){if(e){let y=Je.VersionedTransaction.deserialize(ce.base.fromBase58(r)),w=y.signature,P=y.message.serialize(),B=y.message.getAccountKeys().get(0)?.toBytes();if(!t&&!zi.signUtil.ed25519.verify(P,w,B))throw Error("signature error");return y}let n=Je.Transaction.from(ce.base.fromBase58(r)),i=n.signature,a=n.serializeMessage(),d=n.feePayer.toBytes();if(!t&&!zi.signUtil.ed25519.verify(a,i,d))throw Error("signature error");return n}D.validSignedTransaction=B_});var Jl=M(ms=>{_();b();Object.defineProperty(ms,"__esModule",{value:!0});ms.SolWallet=void 0;var ue=lr(),tr=lr(),Hl=Tn(),fe=Xl(),bs=qo(),Zl=_s(),Cu=class extends ue.BaseWallet{async getDerivedPath(e){return`m/44'/501'/${e.index}'/0'`}async getRandomPrivateKey(){try{return Promise.resolve(Hl.signUtil.ed25519.ed25519_getRandomPrivateKey(!0,"base58"))}catch{return Promise.reject(ue.GenPrivateKeyError)}}async getDerivedPrivateKey(e){try{let t=await Hl.signUtil.ed25519.ed25519_getDerivedPrivateKey(e.mnemonic,e.hdPath,!0,"base58");return Promise.resolve(t)}catch{return Promise.reject(ue.GenPrivateKeyError)}}checkPrivateKey(e){let t=tr.base.fromBase58(e);return t.length==64&&!t.every(n=>n===0)}async getNewAddress(e){try{if(!this.checkPrivateKey(e.privateKey))return Promise.reject(ue.NewAddressError);let t=fe.api.getNewAddress(e.privateKey),n={address:t,publicKey:tr.base.toHex(tr.base.fromBase58(t))};return Promise.resolve(n)}catch{return Promise.reject(ue.NewAddressError)}}async validPrivateKey(e){let t;try{t=this.checkPrivateKey(e.privateKey)}catch{t=!1}let n={isValid:t,privateKey:e.privateKey};return Promise.resolve(n)}async validAddress(e){let t;try{t=tr.base.fromBase58(e.address).length==32}catch{t=!1}let n={isValid:t,address:e.address};return Promise.resolve(n)}async signCommonMsg(e){let t=tr.base.fromBase58(e.privateKey);return super.signCommonMsg({privateKey:e.privateKey,privateKeyHex:tr.base.toHex(t),message:e.message,signType:ue.SignType.ED25519})}async signTransaction(e){try{let t=e.data,n=fe.api.createRawTransaction(t.payer,t.blockHash);if(t.computeUnitLimit&&t.computeUnitPrice){let a=bs.ComputeBudgetProgram.setComputeUnitLimit({units:t.computeUnitLimit}),d=bs.ComputeBudgetProgram.setComputeUnitPrice({microLamports:t.computeUnitPrice});n.add(a).add(d)}if(t.type==="transfer"){if(t.from==null||t.to==null||t.amount==null)return Promise.reject(ue.SignTxError);if(t.version===0)return fe.api.signTransferVersionedTransaction(e.data,e.privateKey);await fe.api.appendTransferInstruction(n,t.from,t.to,t.amount)}else if(t.type==="tokenTransfer"){if(t.from==null||t.to==null||t.mint==null||t.amount==null||t.createAssociatedAddress==null)return Promise.reject(ue.SignTxError);if(t.version===0)return fe.api.signTokenTransferVersionedTransaction(e.data,e.privateKey);await fe.api.appendTokenTransferInstruction(n,t.from,t.to,t.mint,t.amount,t.createAssociatedAddress,t.token2022,t.decimal)}else if(t.type==="mplTransfer"){if(t.from==null||t.to==null||t.mint==null)return Promise.reject(ue.SignTxError);let a=t.tokenStandard??Zl.TokenStandard.ProgrammableNonFungible;return await fe.api.signMplTransaction(t.payer,t.from,t.to,t.mint,t.blockHash,e.privateKey,a,t.computeUnitLimit,t.computeUnitPrice)}else return Promise.reject(ue.SignTxError);if(!e.privateKey)return Promise.resolve(tr.base.toHex(n.serialize({verifySignatures:!1})));let i=await fe.api.signTransaction(n,e.privateKey);return Promise.resolve(i)}catch{return Promise.reject(ue.SignTxError)}}async signMessage(e){try{let t=e.data,n=await fe.api.signMessage(t,e.privateKey,e.extra);return Promise.resolve(n)}catch{return Promise.reject(ue.SignTxError)}}async deserializeMessages(e){try{let t=await fe.api.deserializeMessages(e.data);return Promise.resolve(t)}catch{return Promise.reject("deserializeMessages error")}}async getSerializedTransaction(e){try{let t=e.data,n=fe.api.createRawTransaction(t.payer,t.blockHash);if(t.needPriorityFee&&t.computeUnitLimit&&t.computeUnitPrice){let a=bs.ComputeBudgetProgram.setComputeUnitLimit({units:t.computeUnitLimit}),d=bs.ComputeBudgetProgram.setComputeUnitPrice({microLamports:t.computeUnitPrice});n.add(a).add(d)}if(t.type==="transfer"){if(t.from==null||t.to==null||t.amount==null)return Promise.reject(ue.SignTxError);if(t.version===0)return fe.api.getSerializedTransferVersionedTransaction(e.data,e.privateKey);await fe.api.appendTransferInstruction(n,t.from,t.to,t.amount)}else if(t.type==="tokenTransfer"){if(t.from==null||t.to==null||t.mint==null||t.amount==null||t.createAssociatedAddress==null)return Promise.reject(ue.SignTxError);if(t.version===0)return fe.api.getSerializedTokenTransferVersionedTransaction(e.data,e.privateKey);await fe.api.appendTokenTransferInstruction(n,t.from,t.to,t.mint,t.amount,t.createAssociatedAddress,t.token2022,t.decimal)}else if(t.type==="mplTransfer"){if(t.from==null||t.to==null||t.mint==null)return Promise.reject(ue.SignTxError);let a=t.tokenStandard??Zl.TokenStandard.ProgrammableNonFungible;return t.needPriorityFee?await fe.api.getSerializedMplTransaction(t.payer,t.from,t.to,t.mint,t.blockHash,e.privateKey,a,t.computeUnitLimit,t.computeUnitPrice):await fe.api.getSerializedMplTransaction(t.payer,t.from,t.to,t.mint,t.blockHash,e.privateKey,a)}else return Promise.reject(ue.SignTxError);let i=tr.base.toBase58(n.serialize({requireAllSignatures:!1,verifySignatures:!1}));return Promise.resolve(i)}catch{return Promise.reject(ue.SignTxError)}}async calcTxHash(e){try{let t=e.extra?.encoding??"base58",n;if(t==="base58")n=tr.base.fromBase58(e.data);else if(t==="base64")n=tr.base.fromBase64(e.data);else return Promise.reject("invalid encoding, only base58 and base64 are supported");let i;try{i=fe.web3.Transaction.from(n)}catch{i=fe.web3.VersionedTransaction.deserialize(n)}if(i.signature==null)return Promise.reject(ue.CalcTxHashError);let a=i.signature,d=e.extra?.retEncoding??"base58",y;if(d==="base64")y=tr.base.toBase64(a);else if(d==="base58")y=tr.base.toBase58(a);else return Promise.reject("invalid retEncoding, only base58 and base64 are supported");return Promise.resolve(y)}catch{return Promise.reject(ue.CalcTxHashError)}}async getHardWareRawTransaction(e){try{return await this.signTransaction(e)}catch{return Promise.reject(ue.GetHardwareRawTransactionError)}}async getHardWareSignedTransaction(e){try{return await fe.api.getHardwareTransaction(e.raw,e.pubKey,e.sig)}catch{return Promise.reject(ue.GetHardwareSignedTransactionError)}}async validSignedTransaction(e){try{let t=e.data?e.data.version:void 0,n=e.data?e.data.skipCheckSign:void 0,i=fe.api.validSignedTransaction(e.tx,t||!1,n||!1);return Promise.resolve((0,ue.jsonStringifyUniform)(i))}catch{return Promise.reject(ue.validSignedTransactionError)}}};ms.SolWallet=Cu});var Xl=M(kt=>{_();b();var Ql=kt&&kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),k_=kt&&kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),E_=kt&&kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ql(e,r,t);return k_(e,r),e},ef=kt&&kt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ql(e,r,t)};Object.defineProperty(kt,"__esModule",{value:!0});kt.api=void 0;kt.api=E_($l());ef(ku(),kt);ef(Jl(),kt)});export{Xl as a};
//# sourceMappingURL=chunk-IFI4PUHT.js.map
