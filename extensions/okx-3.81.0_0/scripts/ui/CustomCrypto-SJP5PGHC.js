import{a as Ye,b as Ge}from"./chunk-6S2Q4SIT.js";import"./chunk-QGIEUVEJ.js";import{a as ze}from"./chunk-5QYLVV6H.js";import{a as re}from"./chunk-7QX2TXNH.js";import{d as je}from"./chunk-ZDHJHPQ5.js";import{a as He}from"./chunk-TE6AOABI.js";import{a as Be,b as Ue}from"./chunk-AP337SRV.js";import"./chunk-TF4QEXO7.js";import"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import"./chunk-JHO7RU36.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import{a as j}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import{b as Me}from"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{I as Fe,a as De,l as Le,m as Re}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{u as Z}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as Ae}from"./chunk-Z62JX42S.js";import{H as w}from"./chunk-2QHGKEME.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as me}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import{k as Oe}from"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import{c as N}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Nb as ve,Sb as Io,Ta as Ee,bb as D,db as Pe,gb as Se,hb as te,na as oe,tb as M}from"./chunk-COF7YKSN.js";import{A as s,D as U,K as O}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{I as ee,g as W,o as Ne,q as p}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import{I as be,va as ko}from"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import{a as ce}from"./chunk-GVV6OTQP.js";import{t as Te,u as we,z as x}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as ho}from"./chunk-4QGZDIBD.js";import{b as E}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as _,o as t,q as r}from"./chunk-Y5OH3DDZ.js";t();r();var i=_(E()),no=_(me());O();t();r();var L=_(E()),ne=_(me()),We=_(ho());O();var xo=(e,o)=>{let n=e==="protocol"?Re:Le;if(o){let a=new URLSearchParams(o).toString();return`${n}?${a}`}return n},bo=({selectedInfo:e,category:o})=>{let n=(0,ne.useHistory)(),a=(0,ne.useLocation)(),c=new URLSearchParams(a.search);return L.default.createElement("div",{"data-testid":j.CUSTOM_COIN_PAGE.NETWORK_SELECTOR,className:"chain-select",onClick:()=>{let d={...Object.fromEntries(c.entries()),pageType:"customCrypto"};n.push(xo(o,d))}},L.default.createElement("div",{className:"chain-select-title"},o==="protocol"?s("extension_defi_info_title_protocol"):s("wallet_custom_crypto_subtitle_select_network")),L.default.createElement("div",{className:"chain-select-box","aria-label":o==="protocol"?"protocol-select-box":"chain-select-box",role:"button"},o==="protocol"?null:L.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:""}),L.default.createElement("div",{className:"chain-select-name"},e?.name),L.default.createElement(Te,{className:(0,We.default)("okx-wallet-plugin-right","chain-select-arrow")})))},ie=bo;t();r();var ue=_(E());var To=({currentAddress:e,addressInputTitle:o,errorText:n,placeHolderText:a,addressIsInvalid:c,updateCustomCoin:d})=>ue.default.createElement("div",{className:"contract-address-box"},ue.default.createElement(p.TextArea,{"data-testid":j.CUSTOM_COIN_PAGE.CONTRACT_ADDRESS_INPUT,autoResize:!0,value:e,title:o,size:p.SIZE.xl,error:c&&n,errorType:p.TIP_TYPE.always,placeholder:a,onChange:g=>{d(g.target.value)}})),Ze=To;t();r();var Ve=_(E());O();M();t();r();var qe={root:"_root_11n0d_1"};var wo=({customCoin:e}={})=>e?.decimals===void 0||e?.localType===oe?null:Ve.default.createElement(p,{className:qe.root,label:s("wallet_manage_crypto_custom_coin_subtitle_decimals"),disabled:!0,value:e.decimals,size:p.SIZE.xl}),$e=wo;t();r();var y=_(E());O();t();r();var R={"risk-dialog-footer":"_risk-dialog-footer_1jyn7_1",riskDialogFooter:"_risk-dialog-footer_1jyn7_1","risk-dialog-content":"_risk-dialog-content_1jyn7_4",riskDialogContent:"_risk-dialog-content_1jyn7_4","risk-dialog-confirm-btn":"_risk-dialog-confirm-btn_1jyn7_7",riskDialogConfirmBtn:"_risk-dialog-confirm-btn_1jyn7_7","risk-dialog-title":"_risk-dialog-title_1jyn7_16",riskDialogTitle:"_risk-dialog-title_1jyn7_16","risk-dialog-desc":"_risk-dialog-desc_1jyn7_22",riskDialogDesc:"_risk-dialog-desc_1jyn7_22","risk-dialog-jump-link":"_risk-dialog-jump-link_1jyn7_25",riskDialogJumpLink:"_risk-dialog-jump-link_1jyn7_25"};var No=({onCloseDialog:e,onNext:o,riskJumpUrl:n})=>{let a=He(),c=(0,y.useCallback)(()=>{n&&setTimeout(()=>{globalThis.platform.openTab({url:`${a.origin}${n}`})},100)},[n]);return y.default.createElement(Ne,{visible:!0,title:!1,footer:y.default.createElement(N.FlexBox,{className:R.riskDialogFooter,direction:N.DIRECTION.vertical,align:N.ALIGN.center},y.default.createElement(x,{category:x.CATEGORY.outline,type:x.TYPE.primary,size:x.SIZE.lg,block:!0,onClick:e},U("commonall_text_btn_cancel")),y.default.createElement("span",{className:R.riskDialogConfirmBtn,onClick:o},U("wallet_extension_risk_alert_btn_continue_add"))),noMargin:!0,isFull:!0,hideCloseBtn:!0},y.default.createElement(N.FlexBox,{direction:N.DIRECTION.vertical,align:N.ALIGN.center,justify:"center",className:R.riskDialogContent},y.default.createElement(ce,{width:100,height:100,src:"/static/images/risk-warning.png",layout:ce.LAYOUT.contain}),y.default.createElement(Z.Text,{strong:500,className:R.riskDialogTitle},U("wallet_extension_risk_alert_title_approve_eoa")),y.default.createElement(Z.Text,{size:Z.SIZE.sm,type:Z.TYPE.secondary,strong:400,className:R.riskDialogDesc},U("wallet_extension_risk_alert_desc_approve_eoa",{detail:""})),n&&y.default.createElement(W,{type:W.TYPE.primary,underline:!0,weight:W.WEIGHT.muted,size:W.SIZE.md,onClick:c,className:R.riskDialogJumpLink},U("wallet_extension_risk_alert_icu_approve_eoa"))))},Ke=No;t();r();var Qe=_(E());O();t();r();M();function q(e){return e===te}M();t();r();var Je={root:"_root_11n0d_1"};var Eo=(e,o,n)=>q(o.coinId)?{show:!0,value:n,disabled:!1}:e?.localType===oe?{show:!1,value:e?.symbol,disabled:!0}:{show:e?.symbol!==void 0,value:e?.symbol,disabled:!0},Po=({customCoin:e={},selectedNetwork:o,onChange:n,value:a,title:c,placeholder:d})=>{let g=I=>{n?.(I.target.value)},{show:k,value:h,disabled:f}=Eo(e,o,a);return k&&Qe.default.createElement(p,{className:Je.root,label:c||s("wallet_manage_crypto_subtitle_custom_crpto_symbol"),placeholder:d,disabled:f,value:h,size:p.SIZE.xl,onChange:g})},Xe=Po;t();r();Io();M();var de={[D]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[ve]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[Ee]:{title:"extension_wallet_customcoin_text_currency_symbol",titleId:"wallet_extension_cat_desc_token_id",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[Pe]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Se]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},[te]:{title:"wallet_extension_selecttoken_input_label_asset_issuer",placeholder:"wallet_extension_selecttoken_input_placeholder_issuer_name",symbolTitle:"wallet_extension_selecttoken_input_label_asset_code",symbolPlaceholder:"wallet_extension_selecttoken_input_placeholder_asset_code",error:"developer_mode_manage_errortip_request_failed"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};t();r();var H=_(E());O();M();var So=({selectedNetwork:e,account:o,accountIsInvalid:n,accountErrorMessage:a,setAccount:c,updateCustomCoin:d,accountRef:g,setProtocol:k,protocol:h,protocolList:f=[]})=>{let I=re(),m=Number(I.get("protocolId"));return(0,H.useEffect)(()=>{let l=null;if(!w(e)){k("");return}if(m&&f?.length&&(l=f.find(C=>C.protocolId===m)),!l&&f.length>0&&(l=f[0]),l){let C={...l,name:l.protocolName};k(C)}},[f,e]),{renderCustomForm:()=>e?.coinId===D?H.default.createElement("div",{className:"contract-address-box"},H.default.createElement(p.TextArea,{autoResize:!0,value:o,title:s("wallet_extension_create_input_title_contract_account_name"),size:p.SIZE.xl,error:n&&a,errorType:p.TIP_TYPE.always,placeholder:s("wallet_extension_create_input_title_contract_token_symbol"),onChange:l=>{c(l.target.value),g.current=l.target.value,d()}})):w(e)&&h?H.default.createElement(ie,{selectedInfo:h,category:"protocol"}):null}},eo=So;t();r();var P=_(E()),oo=_(Ae());ko();M();var vo=e=>e?.data?.originalError?.data?.code==="ERR_NETWORK",Ao=(e,o)=>w(e)?{protocolId:o}:{},Oo=(e,o)=>e?{symbol:o}:{},Do=e=>`facet_${e}`,Lo=(e,o)=>e?Do(o):o,Ro=(e,o)=>e&&be(o),Fo=(e,o)=>e.coinId===D&&!o?.accountValid,Bo=({selectedNetwork:e,currentAddress:o,isFacet:n,currentAddressRef:a,currentSymbolRef:c,accountRef:d,protocol:g})=>{let[k,h]=(0,P.useState)({}),[f,I]=(0,P.useState)(!1),[m,z]=(0,P.useState)(""),[l,C]=(0,P.useState)(!0),[V,Y]=(0,P.useState)(""),[b,S]=(0,P.useState)(!1),[ae,F]=(0,P.useState)(!1),{run:$}=(0,oo.useDebounceFn)(async({addr:v,accountName:K,protocolId:J,symbol:Q})=>{if(F(!1),!v)return;let B=q(e.coinId);if(Ro(B,Q))return;let T;try{T=await Be({contractAddress:Lo(n,v),chainInfo:e,account:K,isFacet:n,...Ao(e,J),...Oo(B,Q)})}catch(X){T={},vo(X)&&F(!0)}if(v===o){if(h(T),Fo(e,T)){I(!0),z(T?.msg||""),C(!0);return}else if(!V&&e?.coinId===D){S(!1),C(!0);return}I(!1),z(""),v&&T?.symbol?(S(!1),C(!1)):v?(S(!0),C(!0)):(S(!1),C(!0))}},{wait:500});return{customCoin:k,accountIsInvalid:f,accountErrorMessage:m,stateOnLock:l,account:V,addressIsInvalid:b,setAccount:Y,updateCustomCoin:()=>{h({}),C(!0),$({addr:a.current,accountName:d.current,protocolId:g?.protocolId,symbol:c.current})},networkError:ae}},to=Bo;t();r();var ro=_(me()),se=_(Ae());O();t();r();function Uo(e,o){if(e.key&&o.key)return e.key===o.key;if(e.coinId&&o.coinId)return e.coinId===o.coinId;let n=e.address||e.contractAddress,a=o.address||o.contractAddress;return n&&a?n.toLowerCase()===a.toLowerCase()&&e.localType===o.localType:!1}function _e(e,o){for(let n=0;n<o.length;n++){let a=o[n];if(Uo(a,e)||a.childrenCoin&&_e(e,a.childrenCoin))return!0}return!1}function pe(e,o,n=!1){let a=(0,ro.useHistory)(),[c,{setTrue:d,setFalse:g}]=(0,se.useBoolean)(),k=ze(),{run:h}=(0,se.useDebounceFn)(async()=>{if(d(),_e(e,k)){ee.error(s("wallet_manage_crypto_errortip_crypto_added")),g();return}try{await Ue({...e,protocolId:o}),ee.success(s("wallet_manage_crypto_toast_custom_crypto_success")),n?globalThis.platform.closeCurrentWindow():a.push(De)}catch(I){let m=I?.data?.originalError?.msg||s("wallet_extenshion_toast_add_failed");ee.error(m)}finally{g()}},{wait:100});return{isSubmitting:c,submitAction:h}}t();r();var Mo="Ethereum",jo=()=>{let e=(0,no.useHistory)(),o=i.default.useRef(""),n=i.default.useRef(""),a=i.default.useRef(""),c=i.default.useRef(""),[d,g]=(0,i.useState)(!1),[k,h]=(0,i.useState)(""),[f,I]=(0,i.useState)(""),[m,z]=(0,i.useState)(""),[l,C]=(0,i.useState)({imageUrl:"",name:"",coinId:-1}),[V,Y]=(0,i.useState)(!1),{supportNetworkList:b,run:S,loading:ae}=Ge({cachePriority:!0}),{protocolList:F,run:$,loading:fe}=Ye(l.coinId),v=ae||fe,K=re(),J=K.get("network"),Q=K.get("close"),{title:B,titleId:T,error:X,placeholder:ge,placeholderName:Ce,placeholderId:ye,symbolTitle:io,symbolPlaceholder:so}=de[l?.coinId]||de.default,ao=(0,i.useMemo)(()=>w(l)&&m?.searchType?m.searchType===1?s(B):s(T):s(B),[m.searchType,l,B,T]),lo=(0,i.useMemo)(()=>w(l)&&m?.searchType?m.searchType===1?s(Ce):s(ye):s(ge),[ge,ye,Ce,m.searchType,l]),{customCoin:G,accountIsInvalid:ke,accountErrorMessage:co,stateOnLock:mo,account:uo,addressIsInvalid:he,setAccount:_o,updateCustomCoin:le,networkError:Ie}=to({selectedNetwork:l,currentAddress:k,currentSymbol:f,isFacet:d,currentAddressRef:a,currentSymbolRef:c,accountRef:o,protocol:m}),po=(0,i.useMemo)(()=>Ie?s("developer_mode_manage_errortip_network_error"):s(X),[X,Ie]),{renderCustomForm:fo}=eo({selectedNetwork:l,account:uo,accountIsInvalid:ke,accountErrorMessage:co,setAccount:_o,updateCustomCoin:le,accountRef:o,protocolRef:n,setProtocol:z,protocol:m,protocolList:F,isFacet:d,setIsFacet:g}),{isSubmitting:go,submitAction:xe}=pe(G,m.protocolId,Q);return(0,i.useEffect)(()=>{(!b||b.length===0)&&S()},[S,b]),(0,i.useEffect)(()=>{w(l)&&(!F||F?.length===0)&&$()},[l,$]),(0,i.useEffect)(()=>{async function A(){if(b.length>0){let Co=J||Mo;C(b.filter(yo=>yo.name===Co)[0]||b[0])}}A()},[b,J]),i.default.createElement("div",{className:"custom-crypto-page main-container"},i.default.createElement(je,{title:s("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(Fe)}}),i.default.createElement(N.Spin,{loading:v,size:we.SIZE.lg},i.default.createElement("div",{className:"custom-crypto--body"},i.default.createElement(ie,{selectedInfo:l}),fo(),i.default.createElement(Ze,{updateCustomCoin:A=>{a.current=A,h(A),le()},currentAddress:k,addressInputTitle:ao,errorText:po,placeHolderText:lo,addressIsInvalid:he}),i.default.createElement(Xe,{title:s(io),placeholder:s(so),customCoin:G,value:f,selectedNetwork:l,onChange:A=>{c.current=A,I(A),le()}}),i.default.createElement($e,{customCoin:G})),i.default.createElement(Me.FooterActions,{usePortal:!0},i.default.createElement(x,{"data-testid":j.CUSTOM_COIN_PAGE.ADD_COIN_CONFIRM_BUTTON,onClick:()=>{G.riskType===Oe.NORMAL?xe():Y(!0)},size:x.SIZE.lg,type:x.TYPE.highlight,category:x.CATEGORY.fill,loading:go,disabled:he||mo||ke},s("wallet_set_password_btn_confirm")))),V&&i.default.createElement(Ke,{onCloseDialog:()=>{Y(!1)},onNext:()=>{Y(!1),xe()},riskJumpUrl:G.riskJumpUrl}))},Qr=jo;export{Qr as default};
//# sourceMappingURL=CustomCrypto-SJP5PGHC.js.map
