import{a as fs}from"./chunk-IZUTUDUM.js";import{b as Bn}from"./chunk-UGJ3FMEQ.js";import{a as ss}from"./chunk-OPJRP6YV.js";import{a as os}from"./chunk-OJXBW2YQ.js";import{k as is}from"./chunk-C5XO4JMZ.js";import{b as ns}from"./chunk-HI3LE734.js";import{d as _i}from"./chunk-RX4V72AK.js";import{c as $,o as _,p as b,q as S}from"./chunk-Y5OH3DDZ.js";var or=$(Vt=>{_();S();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.output=Vt.exists=Vt.hash=Vt.bytes=Vt.bool=Vt.number=void 0;function Sr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}Vt.number=Sr;function Si(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}Vt.bool=Si;function En(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}Vt.bytes=En;function Bi(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Sr(t.outputLen),Sr(t.blockLen)}Vt.hash=Bi;function Ei(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}Vt.exists=Ei;function Ai(t,e){En(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Vt.output=Ai;var us={number:Sr,bool:Si,bytes:En,hash:Bi,exists:Ei,output:Ai};Vt.default=us});var Ti=$(Br=>{_();S();Object.defineProperty(Br,"__esModule",{value:!0});Br.crypto=void 0;Br.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Ce=$(C=>{_();S();Object.defineProperty(C,"__esModule",{value:!0});C.randomBytes=C.wrapConstructorWithOpts=C.wrapConstructor=C.checkOpts=C.Hash=C.concatBytes=C.toBytes=C.utf8ToBytes=C.asyncLoop=C.nextTick=C.hexToBytes=C.bytesToHex=C.isLE=C.rotr=C.createView=C.u32=C.u8=void 0;var Er=Ti(),as=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);C.u8=as;var hs=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));C.u32=hs;var cs=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);C.createView=cs;var ls=(t,e)=>t<<32-e|t>>>e;C.rotr=ls;C.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!C.isLE)throw new Error("Non little-endian hardware is not supported");var ds=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gs(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=ds[t[r]];return e}C.bytesToHex=gs;function ps(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let o=r*2,i=t.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[r]=a}return e}C.hexToBytes=ps;var ys=async()=>{};C.nextTick=ys;async function ms(t,e,r){let o=Date.now();for(let i=0;i<t;i++){r(i);let a=Date.now()-o;a>=0&&a<e||(await(0,C.nextTick)(),o+=a)}}C.asyncLoop=ms;function Ii(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}C.utf8ToBytes=Ii;function Tn(t){if(typeof t=="string"&&(t=Ii(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}C.toBytes=Tn;function ws(...t){if(!t.every(o=>o instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e);for(let o=0,i=0;o<t.length;o++){let a=t[o];r.set(a,i),i+=a.length}return r}C.concatBytes=ws;var An=class{clone(){return this._cloneInto()}};C.Hash=An;var vs=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function bs(t,e){if(e!==void 0&&(typeof e!="object"||!vs(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}C.checkOpts=bs;function xs(t){let e=o=>t().update(Tn(o)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}C.wrapConstructor=xs;function Ms(t){let e=(o,i)=>t(i).update(Tn(o)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=o=>t(o),e}C.wrapConstructorWithOpts=Ms;function _s(t=32){if(Er.crypto.web)return Er.crypto.web.getRandomValues(new Uint8Array(t));if(Er.crypto.node)return new Uint8Array(Er.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}C.randomBytes=_s});var Pi=$(sr=>{_();S();Object.defineProperty(sr,"__esModule",{value:!0});sr.hmac=void 0;var Ar=or(),In=Ce(),Tr=class extends In.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ar.default.hash(e);let o=(0,In.toBytes)(r);if(this.iHash=e.create(),!(this.iHash instanceof In.Hash))throw new TypeError("Expected instance of class which extends utils.Hash");let i=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;let a=new Uint8Array(i);a.set(o.length>this.iHash.blockLen?e.create().update(o).digest():o);for(let g=0;g<a.length;g++)a[g]^=54;this.iHash.update(a),this.oHash=e.create();for(let g=0;g<a.length;g++)a[g]^=106;this.oHash.update(a),a.fill(0)}update(e){return Ar.default.exists(this),this.iHash.update(e),this}digestInto(e){Ar.default.exists(this),Ar.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:o,finished:i,destroyed:a,blockLen:g,outputLen:m}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=g,e.outputLen=m,e.oHash=r._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ss=(t,e,r)=>new Tr(t,e).update(r).digest();sr.hmac=Ss;sr.hmac.create=(t,e)=>new Tr(t,e)});var ki=$(Ir=>{_();S();Object.defineProperty(Ir,"__esModule",{value:!0});Ir.SHA2=void 0;var Pn=or(),fr=Ce();function Bs(t,e,r,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,o);let i=BigInt(32),a=BigInt(4294967295),g=Number(r>>i&a),m=Number(r&a),v=o?4:0,x=o?0:4;t.setUint32(e+v,g,o),t.setUint32(e+x,m,o)}var kn=class extends fr.Hash{constructor(e,r,o,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=o,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,fr.createView)(this.buffer)}update(e){Pn.default.exists(this);let{view:r,buffer:o,blockLen:i}=this;e=(0,fr.toBytes)(e);let a=e.length;for(let g=0;g<a;){let m=Math.min(i-this.pos,a-g);if(m===i){let v=(0,fr.createView)(e);for(;i<=a-g;g+=i)this.process(v,g);continue}o.set(e.subarray(g,g+m),this.pos),this.pos+=m,g+=m,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pn.default.exists(this),Pn.default.output(e,this),this.finished=!0;let{buffer:r,view:o,blockLen:i,isLE:a}=this,{pos:g}=this;r[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>i-g&&(this.process(o,0),g=0);for(let v=g;v<i;v++)r[v]=0;Bs(o,i-8,BigInt(this.length*8),a),this.process(o,0);let m=(0,fr.createView)(e);this.get().forEach((v,x)=>m.setUint32(4*x,v,a))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:o,length:i,finished:a,destroyed:g,pos:m}=this;return e.length=i,e.pos=m,e.finished=a,e.destroyed=g,i%r&&e.buffer.set(o),e}};Ir.SHA2=kn});var Hi=$(Pr=>{_();S();Object.defineProperty(Pr,"__esModule",{value:!0});Pr.sha256=void 0;var Es=ki(),re=Ce(),As=(t,e,r)=>t&e^~t&r,Ts=(t,e,r)=>t&e^t&r^e&r,Is=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Se=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Be=new Uint32Array(64),Hn=class extends Es.SHA2{constructor(){super(64,32,8,!1),this.A=Se[0]|0,this.B=Se[1]|0,this.C=Se[2]|0,this.D=Se[3]|0,this.E=Se[4]|0,this.F=Se[5]|0,this.G=Se[6]|0,this.H=Se[7]|0}get(){let{A:e,B:r,C:o,D:i,E:a,F:g,G:m,H:v}=this;return[e,r,o,i,a,g,m,v]}set(e,r,o,i,a,g,m,v){this.A=e|0,this.B=r|0,this.C=o|0,this.D=i|0,this.E=a|0,this.F=g|0,this.G=m|0,this.H=v|0}process(e,r){for(let P=0;P<16;P++,r+=4)Be[P]=e.getUint32(r,!1);for(let P=16;P<64;P++){let k=Be[P-15],O=Be[P-2],nt=(0,re.rotr)(k,7)^(0,re.rotr)(k,18)^k>>>3,J=(0,re.rotr)(O,17)^(0,re.rotr)(O,19)^O>>>10;Be[P]=J+Be[P-7]+nt+Be[P-16]|0}let{A:o,B:i,C:a,D:g,E:m,F:v,G:x,H:I}=this;for(let P=0;P<64;P++){let k=(0,re.rotr)(m,6)^(0,re.rotr)(m,11)^(0,re.rotr)(m,25),O=I+k+As(m,v,x)+Is[P]+Be[P]|0,J=((0,re.rotr)(o,2)^(0,re.rotr)(o,13)^(0,re.rotr)(o,22))+Ts(o,i,a)|0;I=x,x=v,v=m,m=g+O|0,g=a,a=i,i=o,o=O+J|0}o=o+this.A|0,i=i+this.B|0,a=a+this.C|0,g=g+this.D|0,m=m+this.E|0,v=v+this.F|0,x=x+this.G|0,I=I+this.H|0,this.set(o,i,a,g,m,v,x,I)}roundClean(){Be.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Pr.sha256=(0,re.wrapConstructor)(()=>new Hn)});var Un=$(H=>{_();S();Object.defineProperty(H,"__esModule",{value:!0});H.utils=H.schnorr=H.verify=H.signSync=H.sign=H.getSharedSecret=H.recoverPublicKey=H.getPublicKey=H.Signature=H.Point=H.CURVE=void 0;var Ps=is(),N=BigInt(0),D=BigInt(1),rt=BigInt(2),ar=BigInt(3),ks=BigInt(8),Ln=rt**BigInt(256),K={a:N,b:BigInt(7),P:Ln-rt**BigInt(32)-BigInt(977),n:Ln-BigInt("432420386565659656852420866394968145599"),h:D,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};H.CURVE=K;function Li(t){let{a:e,b:r}=K,o=M(t*t),i=M(o*t);return M(i+e*t+r)}var kr=K.a===N,j=class{constructor(e,r,o){this.x=e,this.y=r,this.z=o}static fromAffine(e){if(!(e instanceof U))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new j(e.x,e.y,D)}static toAffineBatch(e){let r=Cs(e.map(o=>o.z));return e.map((o,i)=>o.toAffine(r[i]))}static normalizeZ(e){return j.toAffineBatch(e).map(j.fromAffine)}equals(e){if(!(e instanceof j))throw new TypeError("JacobianPoint expected");let{x:r,y:o,z:i}=this,{x:a,y:g,z:m}=e,v=M(i**rt),x=M(m**rt),I=M(r*x),P=M(a*v),k=M(M(o*m)*x),O=M(M(g*i)*v);return I===P&&k===O}negate(){return new j(this.x,M(-this.y),this.z)}double(){let{x:e,y:r,z:o}=this,i=M(e**rt),a=M(r**rt),g=M(a**rt),m=M(rt*(M((e+a)**rt)-i-g)),v=M(ar*i),x=M(v**rt),I=M(x-rt*m),P=M(v*(m-I)-ks*g),k=M(rt*r*o);return new j(I,P,k)}add(e){if(!(e instanceof j))throw new TypeError("JacobianPoint expected");let{x:r,y:o,z:i}=this,{x:a,y:g,z:m}=e;if(a===N||g===N)return this;if(r===N||o===N)return e;let v=M(i**rt),x=M(m**rt),I=M(r*x),P=M(a*v),k=M(M(o*m)*x),O=M(M(g*i)*v),nt=M(P-I),J=M(O-k);if(nt===N)return J===N?this.double():j.ZERO;let $t=M(nt**rt),Me=M(nt*$t),Kt=M(I*$t),ve=M(J**rt-Me-rt*Kt),$e=M(J*(Kt-ve)-k*Me),_r=M(i*m*nt);return new j(ve,$e,_r)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=j.ZERO;if(typeof e=="bigint"&&e===N)return r;let o=Oi(e);if(o===D)return this;if(!kr){let P=r,k=this;for(;o>N;)o&D&&(P=P.add(k)),k=k.double(),o>>=D;return P}let{k1neg:i,k1:a,k2neg:g,k2:m}=Ni(o),v=r,x=r,I=this;for(;a>N||m>N;)a&D&&(v=v.add(I)),m&D&&(x=x.add(I)),I=I.double(),a>>=D,m>>=D;return i&&(v=v.negate()),g&&(x=x.negate()),x=new j(M(x.x*K.beta),x.y,x.z),v.add(x)}precomputeWindow(e){let r=kr?128/e+1:256/e+1,o=[],i=this,a=i;for(let g=0;g<r;g++){a=i,o.push(a);for(let m=1;m<2**(e-1);m++)a=a.add(i),o.push(a);i=a.double()}return o}wNAF(e,r){!r&&this.equals(j.BASE)&&(r=U.BASE);let o=r&&r._WINDOW_SIZE||1;if(256%o)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Rn.get(r);i||(i=this.precomputeWindow(o),r&&o!==1&&(i=j.normalizeZ(i),Rn.set(r,i)));let a=j.ZERO,g=j.ZERO,m=1+(kr?128/o:256/o),v=2**(o-1),x=BigInt(2**o-1),I=2**o,P=BigInt(o);for(let k=0;k<m;k++){let O=k*v,nt=Number(e&x);if(e>>=P,nt>v&&(nt-=I,e+=D),nt===0){let J=i[O];k%2&&(J=J.negate()),g=g.add(J)}else{let J=i[O+Math.abs(nt)-1];nt<0&&(J=J.negate()),a=a.add(J)}}return{p:a,f:g}}multiply(e,r){let o=Oi(e),i,a;if(kr){let{k1neg:g,k1:m,k2neg:v,k2:x}=Ni(o),{p:I,f:P}=this.wNAF(m,r),{p:k,f:O}=this.wNAF(x,r);g&&(I=I.negate()),v&&(k=k.negate()),k=new j(M(k.x*K.beta),k.y,k.z),i=I.add(k),a=P.add(O)}else{let{p:g,f:m}=this.wNAF(o,r);i=g,a=m}return j.normalizeZ([i,a])[0]}toAffine(e=Ze(this.z)){let{x:r,y:o,z:i}=this,a=e,g=M(a*a),m=M(g*a),v=M(r*g),x=M(o*m);if(M(i*a)!==D)throw new Error("invZ was invalid");return new U(v,x)}};j.BASE=new j(K.Gx,K.Gy,D);j.ZERO=new j(N,D,N);var Rn=new WeakMap,U=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Rn.delete(this)}static fromCompressedHex(e){let r=e.length===32,o=Dt(r?e:e.subarray(1));if(!Rr(o))throw new Error("Point is not on curve");let i=Li(o),a=Rs(i),g=(a&D)===D;r?g&&(a=M(-a)):(e[0]&1)===1!==g&&(a=M(-a));let m=new U(o,a);return m.assertValidity(),m}static fromUncompressedHex(e){let r=Dt(e.subarray(1,33)),o=Dt(e.subarray(33,65)),i=new U(r,o);return i.assertValidity(),i}static fromHex(e){let r=ie(e),o=r.length,i=r[0];if(o===32||o===33&&(i===2||i===3))return this.fromCompressedHex(r);if(o===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${o}`)}static fromPrivateKey(e){return U.BASE.multiply(ue(e))}static fromSignature(e,r,o){e=ie(e);let i=Ki(e),{r:a,s:g}=ji(r);if(o!==0&&o!==1)throw new Error("Cannot recover signature: invalid recovery bit");let m=o&1?"03":"02",v=U.fromHex(m+be(a)),{n:x}=K,I=Ze(a,x),P=M(-i*I,x),k=M(g*I,x),O=U.BASE.multiplyAndAddUnsafe(v,P,k);if(!O)throw new Error("Cannot recover signature: point at infinify");return O.assertValidity(),O}toRawBytes(e=!1){return xe(this.toHex(e))}toHex(e=!1){let r=be(this.x);return e?`${this.y&D?"03":"02"}${r}`:`04${r}${be(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:o}=this;if(!Rr(r)||!Rr(o))throw new Error(e);let i=M(o*o),a=Li(r);if(M(i-a)!==N)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new U(this.x,M(-this.y))}double(){return j.fromAffine(this).double().toAffine()}add(e){return j.fromAffine(this).add(j.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return j.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,o){let i=j.fromAffine(this),a=r===N||r===D||this!==U.BASE?i.multiplyUnsafe(r):i.multiply(r),g=j.fromAffine(e).multiplyUnsafe(o),m=a.add(g);return m.equals(j.ZERO)?void 0:m.toAffine()}};H.Point=U;U.BASE=new U(K.Gx,K.Gy);U.ZERO=new U(N,N);function Ri(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Ci(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Ve(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Dt(r),left:t.subarray(e+2)}}function Hs(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Ve(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=Ci(t.subarray(2)),{data:o,left:i}=Ci(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ve(i)}`);return{r:e,s:o}}var ne=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=hr(e),o="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${o}: Expected string or Uint8Array`);let i=r?Ve(e):e;if(i.length!==128)throw new Error(`${o}: Expected 64-byte hex`);return new ne(Cr(i.slice(0,64)),Cr(i.slice(64,128)))}static fromDER(e){let r=hr(e);if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:o,s:i}=Hs(r?e:xe(e));return new ne(o,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!De(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!De(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=K.n>>D;return this.s>e}normalizeS(){return this.hasHighS()?new ne(this.r,K.n-this.s):this}toDERRawBytes(e=!1){return xe(this.toDERHex(e))}toDERHex(e=!1){let r=Ri(ur(this.s));if(e)return r;let o=Ri(ur(this.r)),i=ur(o.length/2),a=ur(r.length/2);return`30${ur(o.length/2+r.length/2+4)}02${i}${o}02${a}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return xe(this.toCompactHex())}toCompactHex(){return be(this.r)+be(this.s)}};H.Signature=ne;function je(...t){if(!t.every(hr))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e);for(let o=0,i=0;o<t.length;o++){let a=t[o];r.set(a,i),i+=a.length}return r}function hr(t){return t instanceof Uint8Array}var Ls=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ve(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=Ls[t[r]];return e}function be(t){if(t>Ln)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function ze(t){return xe(be(t))}function ur(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Cr(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function xe(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let o=r*2,i=t.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[r]=a}return e}function Dt(t){return Cr(Ve(t))}function ie(t){return t instanceof Uint8Array?Uint8Array.from(t):xe(t)}function Oi(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&De(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function M(t,e=K.P){let r=t%e;return r>=N?r:e+r}function Yt(t,e){let{P:r}=K,o=t;for(;e-- >N;)o*=o,o%=r;return o}function Rs(t){let{P:e}=K,r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),g=BigInt(44),m=BigInt(88),v=t*t*t%e,x=v*v*t%e,I=Yt(x,ar)*x%e,P=Yt(I,ar)*x%e,k=Yt(P,rt)*v%e,O=Yt(k,o)*k%e,nt=Yt(O,i)*O%e,J=Yt(nt,g)*nt%e,$t=Yt(J,m)*J%e,Me=Yt($t,g)*nt%e,Kt=Yt(Me,ar)*x%e,ve=Yt(Kt,a)*O%e,$e=Yt(ve,r)*v%e;return Yt($e,rt)}function Ze(t,e=K.P){if(t===N||e<=N)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=M(t,e),o=e,i=N,a=D,g=D,m=N;for(;r!==N;){let x=o/r,I=o%r,P=i-g*x,k=a-m*x;o=r,r=I,i=g,a=m,g=P,m=k}if(o!==D)throw new Error("invert: does not exist");return M(i,e)}function Cs(t,e=K.P){let r=new Array(t.length),o=t.reduce((a,g,m)=>g===N?a:(r[m]=a,M(a*g,e)),D),i=Ze(o,e);return t.reduceRight((a,g,m)=>g===N?a:(r[m]=M(a*r[m],e),M(a*g,e)),i),r}var Ui=(t,e)=>(t+e/rt)/e,Hr=rt**BigInt(128);function Ni(t){let{n:e}=K,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-D*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,g=Ui(a*t,e),m=Ui(-o*t,e),v=M(t-g*r-m*i,e),x=M(-g*o-m*a,e),I=v>Hr,P=x>Hr;if(I&&(v=e-v),P&&(x=e-x),v>Hr||x>Hr)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:I,k1:v,k2neg:P,k2:x}}function Ki(t){let{n:e}=K,o=t.length*8-256,i=Dt(t);return o>0&&(i=i>>BigInt(o)),i>=e&&(i-=e),i}var Or=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return H.utils.hmacSha256(this.k,...e)}hmacSync(...e){if(typeof H.utils.hmacSha256Sync!="function")throw new Error("utils.hmacSha256Sync is undefined, you need to set it");let r=H.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}};function De(t){return N<t&&t<K.n}function Rr(t){return N<t&&t<K.P}function $i(t,e,r){let o=Dt(t);if(!De(o))return;let{n:i}=K,a=U.BASE.multiply(o),g=M(a.x,i);if(g===N)return;let m=M(Ze(o,i)*M(e+r*g,i),i);if(m===N)return;let v=new ne(g,m),x=(a.x===v.r?0:2)|Number(a.y&D);return{sig:v,recovery:x}}function ue(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=Cr(t)}else if(hr(t)){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Dt(t)}else throw new TypeError("Expected valid private key");if(!De(e))throw new Error("Expected private key: 0 < key < n");return e}function Cn(t){return t instanceof U?(t.assertValidity(),t):U.fromHex(t)}function ji(t){if(t instanceof ne)return t.assertValidity(),t;try{return ne.fromDER(t)}catch{return ne.fromCompact(t)}}function Os(t,e=!1){return U.fromPrivateKey(t).toRawBytes(e)}H.getPublicKey=Os;function Us(t,e,r,o=!1){return U.fromSignature(t,e,r).toRawBytes(o)}H.recoverPublicKey=Us;function qi(t){let e=hr(t),r=typeof t=="string",o=(e||r)&&t.length;return e?o===33||o===65:r?o===66||o===130:t instanceof U}function Ns(t,e,r=!1){if(qi(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!qi(e))throw new TypeError("getSharedSecret: second arg must be public key");let o=Cn(e);return o.assertValidity(),o.multiply(ue(t)).toRawBytes(r)}H.getSharedSecret=Ns;function zi(t){let e=t.length>32?t.slice(0,32):t;return Dt(e)}function qs(t){let e=zi(t),r=M(e,K.n);return Vi(r<N?e:r)}function Vi(t){if(typeof t!="bigint")throw new Error("Expected bigint");let e=be(t);return xe(e)}function Di(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let o=ie(t),i=ue(e),a=[Vi(i),qs(o)];if(r!=null){r===!0&&(r=H.utils.randomBytes(32));let v=ie(r);if(v.length!==32)throw new Error("sign: Expected 32 bytes of extra data");a.push(v)}let g=je(...a),m=zi(o);return{seed:g,m,d:i}}function Zi(t,e){let{sig:r,recovery:o}=t,{canonical:i,der:a,recovered:g}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),o^=1);let m=a?r.toDERRawBytes():r.toCompactRawBytes();return g?[m,o]:m}async function Ks(t,e,r={}){let{seed:o,m:i,d:a}=Di(t,e,r.extraEntropy),g,m=new Or;for(await m.reseed(o);!(g=$i(await m.generate(),i,a));)await m.reseed();return Zi(g,r)}H.sign=Ks;function $s(t,e,r={}){let{seed:o,m:i,d:a}=Di(t,e,r.extraEntropy),g,m=new Or;for(m.reseedSync(o);!(g=$i(m.generateSync(),i,a));)m.reseedSync();return Zi(g,r)}H.signSync=$s;var js={strict:!0};function zs(t,e,r,o=js){let i;try{i=ji(t),e=ie(e)}catch{return!1}let{r:a,s:g}=i;if(o.strict&&i.hasHighS())return!1;let m=Ki(e),v;try{v=Cn(r)}catch{return!1}let{n:x}=K,I=Ze(g,x),P=M(m*I,x),k=M(a*I,x),O=U.BASE.multiplyAndAddUnsafe(v,P,k);return O?M(O.x,x)===a:!1}H.verify=zs;function Ur(t){return M(Dt(t),K.n)}function On(t){return(t.y&D)===N}var Ae=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=ie(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let o=Dt(r.subarray(0,32)),i=Dt(r.subarray(32,64));return new Ae(o,i)}assertValidity(){let{r:e,s:r}=this;if(!Rr(e)||!De(r))throw new Error("Invalid signature")}toHex(){return be(this.r)+be(this.s)}toRawBytes(){return xe(this.toHex())}};function Vs(t){return U.fromPrivateKey(t).toRawX()}function Wi(t,e,r){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);let o=ie(t),i=ue(e),a=ie(r);if(a.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let g=U.fromPrivateKey(i),m=g.toRawX(),v=On(g)?i:K.n-i;return{m:o,P:g,px:m,d:v,rand:a}}function Fi(t,e){return ze(t^Dt(e))}function Gi(t){let e=M(Dt(t),K.n);if(e===N)throw new Error("sign: Creation of signature failed. k is zero");let r=U.fromPrivateKey(e),o=r.toRawX(),i=On(r)?e:K.n-e;return{R:r,rx:o,k:i}}function Xi(t,e,r,o){return new Ae(t.x,M(e+r*o,K.n)).toRawBytes()}async function Ds(t,e,r=H.utils.randomBytes()){let{m:o,px:i,d:a,rand:g}=Wi(t,e,r),m=Fi(a,await H.utils.taggedHash(Ee.aux,g)),{R:v,rx:x,k:I}=Gi(await H.utils.taggedHash(Ee.nonce,m,i,o)),P=Ur(await H.utils.taggedHash(Ee.challenge,x,i,o)),k=Xi(v,I,P,a);if(!await Ji(k,o,i))throw new Error("sign: Invalid signature produced");return k}function Zs(t,e,r=H.utils.randomBytes()){let{m:o,px:i,d:a,rand:g}=Wi(t,e,r),m=Fi(a,H.utils.taggedHashSync(Ee.aux,g)),{R:v,rx:x,k:I}=Gi(H.utils.taggedHashSync(Ee.nonce,m,i,o)),P=Ur(H.utils.taggedHashSync(Ee.challenge,x,i,o)),k=Xi(v,I,P,a);if(!to(k,o,i))throw new Error("sign: Invalid signature produced");return k}function Yi(t,e,r){let o=t instanceof Ae,i=o?t:Ae.fromHex(t);return o&&i.assertValidity(),{...i,m:ie(e),P:Cn(r)}}function Qi(t,e,r,o){let i=U.BASE.multiplyAndAddUnsafe(e,ue(r),M(-o,K.n));return!(!i||!On(i)||i.x!==t)}async function Ji(t,e,r){try{let{r:o,s:i,m:a,P:g}=Yi(t,e,r),m=Ur(await H.utils.taggedHash(Ee.challenge,ze(o),g.toRawX(),a));return Qi(o,g,i,m)}catch{return!1}}function to(t,e,r){try{let{r:o,s:i,m:a,P:g}=Yi(t,e,r),m=Ur(H.utils.taggedHashSync(Ee.challenge,ze(o),g.toRawX(),a));return Qi(o,g,i,m)}catch{return!1}}H.schnorr={Signature:Ae,getPublicKey:Vs,sign:Ds,verify:Ji,signSync:Zs,verifySync:to};U.BASE._setWindowSize(8);var Ft={node:Ps,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Ee={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Lr={};H.utils={isValidPrivateKey(t){try{return ue(t),!0}catch{return!1}},privateAdd:(t,e)=>{let r=ue(t),o=ue(e);return ze(M(r+o,K.n))},privateNegate:t=>{let e=ue(t);return ze(K.n-e)},pointAddScalar:(t,e,r)=>{let o=U.fromHex(t),i=ue(e),a=U.BASE.multiplyAndAddUnsafe(o,i,D);if(!a)throw new Error("Tweaked point at infinity");return a.toRawBytes(r)},pointMultiply:(t,e,r)=>{let o=U.fromHex(t),i=Dt(ie(e));return o.multiply(i).toRawBytes(r)},hashToPrivateKey:t=>{if(t=ie(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");let e=M(Dt(t),K.n-D)+D;return ze(e)},randomBytes:(t=32)=>{if(Ft.web)return Ft.web.getRandomValues(new Uint8Array(t));if(Ft.node){let{randomBytes:e}=Ft.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>H.utils.hashToPrivateKey(H.utils.randomBytes(40)),bytesToHex:Ve,hexToBytes:xe,concatBytes:je,mod:M,invert:Ze,sha256:async(...t)=>{if(Ft.web){let e=await Ft.web.subtle.digest("SHA-256",je(...t));return new Uint8Array(e)}else if(Ft.node){let{createHash:e}=Ft.node,r=e("sha256");return t.forEach(o=>r.update(o)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Ft.web){let r=await Ft.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=je(...e),i=await Ft.web.subtle.sign("HMAC",r,o);return new Uint8Array(i)}else if(Ft.node){let{createHmac:r}=Ft.node,o=r("sha256",t);return e.forEach(i=>o.update(i)),Uint8Array.from(o.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=Lr[t];if(r===void 0){let o=await H.utils.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=je(o,o),Lr[t]=r}return H.utils.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof H.utils.sha256Sync!="function")throw new Error("utils.sha256Sync is undefined, you need to set it");let r=Lr[t];if(r===void 0){let o=H.utils.sha256Sync(Uint8Array.from(t,i=>i.charCodeAt(0)));r=je(o,o),Lr[t]=r}return H.utils.sha256Sync(r,...e)},precompute(t=8,e=U.BASE){let r=e===U.BASE?e:new U(e.x,e.y);return r._setWindowSize(t),r.multiply(ar),r}}});var Nr=$(Q=>{_();S();Object.defineProperty(Q,"__esModule",{value:!0});Q.schnorr=Q.Signature=Q.Point=Q.CURVE=Q.utils=Q.getSharedSecret=Q.recoverPublicKey=Q.verify=Q.signSync=Q.sign=Q.getPublicKey=void 0;var Ws=Pi(),Fs=Hi(),Gs=Un(),oe=Un();Object.defineProperty(Q,"getPublicKey",{enumerable:!0,get:function(){return oe.getPublicKey}});Object.defineProperty(Q,"sign",{enumerable:!0,get:function(){return oe.sign}});Object.defineProperty(Q,"signSync",{enumerable:!0,get:function(){return oe.signSync}});Object.defineProperty(Q,"verify",{enumerable:!0,get:function(){return oe.verify}});Object.defineProperty(Q,"recoverPublicKey",{enumerable:!0,get:function(){return oe.recoverPublicKey}});Object.defineProperty(Q,"getSharedSecret",{enumerable:!0,get:function(){return oe.getSharedSecret}});Object.defineProperty(Q,"utils",{enumerable:!0,get:function(){return oe.utils}});Object.defineProperty(Q,"CURVE",{enumerable:!0,get:function(){return oe.CURVE}});Object.defineProperty(Q,"Point",{enumerable:!0,get:function(){return oe.Point}});Object.defineProperty(Q,"Signature",{enumerable:!0,get:function(){return oe.Signature}});Object.defineProperty(Q,"schnorr",{enumerable:!0,get:function(){return oe.schnorr}});Gs.utils.hmacSha256Sync=(t,...e)=>{let r=Ws.hmac.create(Fs.sha256,t);return e.forEach(o=>r.update(o)),r.digest()}});var Kr=$(z=>{_();S();Object.defineProperty(z,"__esModule",{value:!0});z.RLP_EMPTY_STRING=z.KECCAK256_RLP=z.KECCAK256_RLP_S=z.KECCAK256_RLP_ARRAY=z.KECCAK256_RLP_ARRAY_S=z.KECCAK256_NULL=z.KECCAK256_NULL_S=z.TWO_POW256=z.SECP256K1_ORDER_DIV_2=z.SECP256K1_ORDER=z.MAX_INTEGER_BIGINT=z.MAX_INTEGER=z.MAX_UINT64=void 0;var qr=_i(),eo=Nr();z.MAX_UINT64=BigInt("0xffffffffffffffff");z.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");z.MAX_INTEGER_BIGINT=BigInt(2)**BigInt(256)-BigInt(1);z.SECP256K1_ORDER=eo.CURVE.n;z.SECP256K1_ORDER_DIV_2=eo.CURVE.n/BigInt(2);z.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");z.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";z.KECCAK256_NULL=qr.Buffer.from(z.KECCAK256_NULL_S,"hex");z.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";z.KECCAK256_RLP_ARRAY=qr.Buffer.from(z.KECCAK256_RLP_ARRAY_S,"hex");z.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";z.KECCAK256_RLP=qr.Buffer.from(z.KECCAK256_RLP_S,"hex");z.RLP_EMPTY_STRING=qr.Buffer.from([128])});var ho=$(ae=>{_();S();Object.defineProperty(ae,"__esModule",{value:!0});ae.RLP=ae.utils=ae.decode=ae.encode=void 0;function Kn(t){if(Array.isArray(t)){let r=[];for(let i=0;i<t.length;i++)r.push(Kn(t[i]));let o=$r(...r);return $r(no(o.length,192),o)}let e=ao(t);return e.length===1&&e[0]<128?e:$r(no(e.length,128),e)}ae.encode=Kn;function We(t,e,r){if(r>t.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,r)}function ro(t){if(t[0]===0)throw new Error("invalid RLP: extra zeros");return so(oo(t))}function no(t,e){if(t<56)return Uint8Array.from([t+e]);let r=qn(t),o=r.length/2,i=qn(e+55+o);return Uint8Array.from(jr(i+r))}function io(t,e=!1){if(typeof t>"u"||t===null||t.length===0)return Uint8Array.from([]);let r=ao(t),o=Nn(r);if(e)return o;if(o.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return o.data}ae.decode=io;function Nn(t){let e,r,o,i,a,g=[],m=t[0];if(m<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(m<=183){if(e=m-127,m===128?o=Uint8Array.from([]):o=We(t,1,e),e===2&&o[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:o,remainder:t.slice(e)}}else if(m<=191){if(r=m-182,t.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(e=ro(We(t,1,r)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return o=We(t,r,e+r),{data:o,remainder:t.slice(e+r)}}else if(m<=247){for(e=m-191,i=We(t,1,e);i.length;)a=Nn(i),g.push(a.data),i=a.remainder;return{data:g,remainder:t.slice(e)}}else{if(r=m-246,e=ro(We(t,1,r)),e<56)throw new Error("invalid RLP: encoded list too short");let v=r+e;if(v>t.length)throw new Error("invalid RLP: total length is larger than the data");for(i=We(t,r,v);i.length;)a=Nn(i),g.push(a.data),i=a.remainder;return{data:g,remainder:t.slice(v)}}}var Xs=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oo(t){let e="";for(let r=0;r<t.length;r++)e+=Xs[t[r]];return e}function so(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function jr(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let o=r*2;e[r]=so(t.slice(o,o+2))}return e}function $r(...t){if(t.length===1)return t[0];let e=t.reduce((o,i)=>o+i.length,0),r=new Uint8Array(e);for(let o=0,i=0;o<t.length;o++){let a=t[o];r.set(a,i),i+=a.length}return r}function fo(t){return new TextEncoder().encode(t)}function qn(t){if(t<0)throw new Error("Invalid integer as argument, must be unsigned!");let e=t.toString(16);return e.length%2?`0${e}`:e}function Ys(t){return t.length%2?`0${t}`:t}function uo(t){return t.length>=2&&t[0]==="0"&&t[1]==="x"}function Qs(t){return typeof t!="string"?t:uo(t)?t.slice(2):t}function ao(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return uo(t)?jr(Ys(Qs(t))):fo(t);if(typeof t=="number"||typeof t=="bigint")return t?jr(qn(t)):Uint8Array.from([]);if(t==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof t)}ae.utils={bytesToHex:oo,concatBytes:$r,hexToBytes:jr,utf8ToBytes:fo};ae.RLP={encode:Kn,decode:io}});var go=$(Qt=>{_();S();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.add=Qt.toBig=Qt.split=Qt.fromBig=void 0;var zr=BigInt(2**32-1),$n=BigInt(32);function jn(t,e=!1){return e?{h:Number(t&zr),l:Number(t>>$n&zr)}:{h:Number(t>>$n&zr)|0,l:Number(t&zr)|0}}Qt.fromBig=jn;function co(t,e=!1){let r=new Uint32Array(t.length),o=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:a,l:g}=jn(t[i],e);[r[i],o[i]]=[a,g]}return[r,o]}Qt.split=co;var Js=(t,e)=>BigInt(t>>>0)<<$n|BigInt(e>>>0);Qt.toBig=Js;var tf=(t,e,r)=>t>>>r,ef=(t,e,r)=>t<<32-r|e>>>r,rf=(t,e,r)=>t>>>r|e<<32-r,nf=(t,e,r)=>t<<32-r|e>>>r,of=(t,e,r)=>t<<64-r|e>>>r-32,sf=(t,e,r)=>t>>>r-32|e<<64-r,ff=(t,e)=>e,uf=(t,e)=>t,af=(t,e,r)=>t<<r|e>>>32-r,hf=(t,e,r)=>e<<r|t>>>32-r,cf=(t,e,r)=>e<<r-32|t>>>64-r,lf=(t,e,r)=>t<<r-32|e>>>64-r;function lo(t,e,r,o){let i=(e>>>0)+(o>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}Qt.add=lo;var df=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),gf=(t,e,r,o)=>e+r+o+(t/2**32|0)|0,pf=(t,e,r,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),yf=(t,e,r,o,i)=>e+r+o+i+(t/2**32|0)|0,mf=(t,e,r,o,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0)+(i>>>0),wf=(t,e,r,o,i,a)=>e+r+o+i+a+(t/2**32|0)|0,vf={fromBig:jn,split:co,toBig:Qt.toBig,shrSH:tf,shrSL:ef,rotrSH:rf,rotrSL:nf,rotrBH:of,rotrBL:sf,rotr32H:ff,rotr32L:uf,rotlSH:af,rotlSL:hf,rotlBH:cf,rotlBL:lf,add:lo,add3L:df,add3H:gf,add4L:pf,add4H:yf,add5H:wf,add5L:mf};Qt.default=vf});var Mo=$(G=>{_();S();Object.defineProperty(G,"__esModule",{value:!0});G.shake256=G.shake128=G.keccak_512=G.keccak_384=G.keccak_256=G.keccak_224=G.sha3_512=G.sha3_384=G.sha3_256=G.sha3_224=G.Keccak=G.keccakP=void 0;var Fe=or(),dr=go(),lr=Ce(),[mo,wo,vo]=[[],[],[]],bf=BigInt(0),cr=BigInt(1),xf=BigInt(2),Mf=BigInt(7),_f=BigInt(256),Sf=BigInt(113);for(let t=0,e=cr,r=1,o=0;t<24;t++){[r,o]=[o,(2*r+3*o)%5],mo.push(2*(5*o+r)),wo.push((t+1)*(t+2)/2%64);let i=bf;for(let a=0;a<7;a++)e=(e<<cr^(e>>Mf)*Sf)%_f,e&xf&&(i^=cr<<(cr<<BigInt(a))-cr);vo.push(i)}var[Bf,Ef]=dr.default.split(vo,!0),po=(t,e,r)=>r>32?dr.default.rotlBH(t,e,r):dr.default.rotlSH(t,e,r),yo=(t,e,r)=>r>32?dr.default.rotlBL(t,e,r):dr.default.rotlSL(t,e,r);function bo(t,e=24){let r=new Uint32Array(10);for(let o=24-e;o<24;o++){for(let g=0;g<10;g++)r[g]=t[g]^t[g+10]^t[g+20]^t[g+30]^t[g+40];for(let g=0;g<10;g+=2){let m=(g+8)%10,v=(g+2)%10,x=r[v],I=r[v+1],P=po(x,I,1)^r[m],k=yo(x,I,1)^r[m+1];for(let O=0;O<50;O+=10)t[g+O]^=P,t[g+O+1]^=k}let i=t[2],a=t[3];for(let g=0;g<24;g++){let m=wo[g],v=po(i,a,m),x=yo(i,a,m),I=mo[g];i=t[I],a=t[I+1],t[I]=v,t[I+1]=x}for(let g=0;g<50;g+=10){for(let m=0;m<10;m++)r[m]=t[g+m];for(let m=0;m<10;m++)t[g+m]^=~r[(m+2)%10]&r[(m+4)%10]}t[0]^=Bf[o],t[1]^=Ef[o]}r.fill(0)}G.keccakP=bo;var Oe=class extends lr.Hash{constructor(e,r,o,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=o,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Fe.default.number(o),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,lr.u32)(this.state)}keccak(){bo(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Fe.default.exists(this);let{blockLen:r,state:o}=this;e=(0,lr.toBytes)(e);let i=e.length;for(let a=0;a<i;){let g=Math.min(r-this.pos,i-a);for(let m=0;m<g;m++)o[this.pos++]^=e[a++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:o,blockLen:i}=this;e[o]^=r,(r&128)!==0&&o===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Fe.default.exists(this,!1),Fe.default.bytes(e),this.finish();let r=this.state,{blockLen:o}=this;for(let i=0,a=e.length;i<a;){this.posOut>=o&&this.keccak();let g=Math.min(o-this.posOut,a-i);e.set(r.subarray(this.posOut,this.posOut+g),i),this.posOut+=g,i+=g}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fe.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Fe.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:o,outputLen:i,rounds:a,enableXOF:g}=this;return e||(e=new Oe(r,o,i,g,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=o,e.outputLen=i,e.enableXOF=g,e.destroyed=this.destroyed,e}};G.Keccak=Oe;var Te=(t,e,r)=>(0,lr.wrapConstructor)(()=>new Oe(e,t,r));G.sha3_224=Te(6,144,224/8);G.sha3_256=Te(6,136,256/8);G.sha3_384=Te(6,104,384/8);G.sha3_512=Te(6,72,512/8);G.keccak_224=Te(1,144,224/8);G.keccak_256=Te(1,136,256/8);G.keccak_384=Te(1,104,384/8);G.keccak_512=Te(1,72,512/8);var xo=(t,e,r)=>(0,lr.wrapConstructorWithOpts)((o={})=>new Oe(e,t,o.dkLen===void 0?r:o.dkLen,!0));G.shake128=xo(31,168,128/8);G.shake256=xo(31,136,256/8)});var Vn=$((Z,gr)=>{_();S();var Af=Z&&Z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Z,"__esModule",{value:!0});Z.crypto=Z.wrapHash=Z.equalsBytes=Z.hexToBytes=Z.bytesToUtf8=Z.utf8ToBytes=Z.createView=Z.concatBytes=Z.toHex=Z.bytesToHex=Z.assertBytes=Z.assertBool=void 0;var zn=Af(or()),Tf=Ce(),If=zn.default.bool;Z.assertBool=If;var Pf=zn.default.bytes;Z.assertBytes=Pf;var pr=Ce();Object.defineProperty(Z,"bytesToHex",{enumerable:!0,get:function(){return pr.bytesToHex}});Object.defineProperty(Z,"toHex",{enumerable:!0,get:function(){return pr.bytesToHex}});Object.defineProperty(Z,"concatBytes",{enumerable:!0,get:function(){return pr.concatBytes}});Object.defineProperty(Z,"createView",{enumerable:!0,get:function(){return pr.createView}});Object.defineProperty(Z,"utf8ToBytes",{enumerable:!0,get:function(){return pr.utf8ToBytes}});function kf(t){if(!(t instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)}Z.bytesToUtf8=kf;function Hf(t){let e=t.startsWith("0x")?t.substring(2):t;return(0,Tf.hexToBytes)(e)}Z.hexToBytes=Hf;function Lf(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}Z.equalsBytes=Lf;function Rf(t){return e=>(zn.default.bytes(e),t(e))}Z.wrapHash=Rf;Z.crypto=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0,e=typeof gr<"u"&&typeof gr.require=="function"&&gr.require.bind(gr);return{node:e&&!t?e("crypto"):void 0,web:t}})()});var Dr=$(he=>{_();S();Object.defineProperty(he,"__esModule",{value:!0});he.keccak512=he.keccak384=he.keccak256=he.keccak224=void 0;var yr=Mo(),Vr=Vn();he.keccak224=(0,Vr.wrapHash)(yr.keccak_224);he.keccak256=(()=>{let t=(0,Vr.wrapHash)(yr.keccak_256);return t.create=yr.keccak_256.create,t})();he.keccak384=(0,Vr.wrapHash)(yr.keccak_384);he.keccak512=(0,Vr.wrapHash)(yr.keccak_512)});var Ge=$(tt=>{_();S();Object.defineProperty(tt,"__esModule",{value:!0});tt.isHexString=tt.getKeys=tt.fromAscii=tt.fromUtf8=tt.toAscii=tt.arrayContainsArray=tt.getBinarySize=tt.padToEven=tt.stripHexPrefix=tt.isHexPrefixed=void 0;function _o(t){if(typeof t!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof t}`);return t[0]==="0"&&t[1]==="x"}tt.isHexPrefixed=_o;var Cf=t=>{if(typeof t!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return _o(t)?t.slice(2):t};tt.stripHexPrefix=Cf;function So(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}tt.padToEven=So;function Of(t){if(typeof t!="string")throw new Error(`[getBinarySize] method requires input type 'string', recieved ${typeof t}`);return b.Buffer.byteLength(t,"utf8")}tt.getBinarySize=Of;function Uf(t,e,r){if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof t}'`);if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof e}'`);return e[r===!0?"some":"every"](o=>t.indexOf(o)>=0)}tt.arrayContainsArray=Uf;function Nf(t){let e="",r=0,o=t.length;for(t.substring(0,2)==="0x"&&(r=2);r<o;r+=2){let i=parseInt(t.substr(r,2),16);e+=String.fromCharCode(i)}return e}tt.toAscii=Nf;function qf(t){let e=b.Buffer.from(t,"utf8");return`0x${So(e.toString("hex")).replace(/^0+|0+$/g,"")}`}tt.fromUtf8=qf;function Kf(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r).toString(16);e+=i.length<2?`0${i}`:i}return`0x${e}`}tt.fromAscii=Kf;function $f(t,e,r){if(!Array.isArray(t))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof t}`);if(typeof e!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof t}`);let o=[];for(let i=0;i<t.length;i++){let a=t[i][e];if(r===!0&&!a)a="";else if(typeof a!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof a}`);o.push(a)}return o}tt.getKeys=$f;function jf(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e<"u"&&e>0&&t.length!==2+2*e)}tt.isHexString=jf});var Zr=$(ce=>{_();S();Object.defineProperty(ce,"__esModule",{value:!0});ce.assertIsString=ce.assertIsArray=ce.assertIsBuffer=ce.assertIsHexString=void 0;var zf=Ge(),Vf=function(t){if(!(0,zf.isHexString)(t)){let e=`This method only supports 0x-prefixed hex strings but input was: ${t}`;throw new Error(e)}};ce.assertIsHexString=Vf;var Df=function(t){if(!b.Buffer.isBuffer(t)){let e=`This method only supports Buffer but input was: ${t}`;throw new Error(e)}};ce.assertIsBuffer=Df;var Zf=function(t){if(!Array.isArray(t)){let e=`This method only supports number arrays but input was: ${t}`;throw new Error(e)}};ce.assertIsArray=Zf;var Wf=function(t){if(typeof t!="string"){let e=`This method only supports strings but input was: ${t}`;throw new Error(e)}};ce.assertIsString=Wf});var Xe=$(E=>{_();S();Object.defineProperty(E,"__esModule",{value:!0});E.bigIntToUnpaddedBuffer=E.bigIntToHex=E.bufArrToArr=E.arrToBufArr=E.validateNoLeadingZeroes=E.baToJSON=E.toUtf8=E.short=E.addHexPrefix=E.toUnsigned=E.fromSigned=E.bufferToInt=E.bigIntToBuffer=E.bufferToBigInt=E.bufferToHex=E.toBuffer=E.unpadHexString=E.unpadArray=E.unpadBuffer=E.setLengthRight=E.setLengthLeft=E.zeros=E.intToBuffer=E.intToHex=void 0;var mr=Zr(),Ue=Ge(),Ff=function(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`};E.intToHex=Ff;var Gf=function(t){let e=(0,E.intToHex)(t);return b.Buffer.from((0,Ue.padToEven)(e.slice(2)),"hex")};E.intToBuffer=Gf;var Xf=function(t){return b.Buffer.allocUnsafe(t).fill(0)};E.zeros=Xf;var Bo=function(t,e,r){let o=(0,E.zeros)(e);return r?t.length<e?(t.copy(o),o):t.slice(0,e):t.length<e?(t.copy(o,e-t.length),o):t.slice(-e)},Yf=function(t,e){return(0,mr.assertIsBuffer)(t),Bo(t,e,!1)};E.setLengthLeft=Yf;var Qf=function(t,e){return(0,mr.assertIsBuffer)(t),Bo(t,e,!0)};E.setLengthRight=Qf;var Dn=function(t){let e=t[0];for(;t.length>0&&e.toString()==="0";)t=t.slice(1),e=t[0];return t},Jf=function(t){return(0,mr.assertIsBuffer)(t),Dn(t)};E.unpadBuffer=Jf;var tu=function(t){return(0,mr.assertIsArray)(t),Dn(t)};E.unpadArray=tu;var eu=function(t){return(0,mr.assertIsHexString)(t),t=(0,Ue.stripHexPrefix)(t),"0x"+Dn(t)};E.unpadHexString=eu;var ru=function(t){if(t==null)return b.Buffer.allocUnsafe(0);if(b.Buffer.isBuffer(t))return b.Buffer.from(t);if(Array.isArray(t)||t instanceof Uint8Array)return b.Buffer.from(t);if(typeof t=="string"){if(!(0,Ue.isHexString)(t))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return b.Buffer.from((0,Ue.padToEven)((0,Ue.stripHexPrefix)(t)),"hex")}if(typeof t=="number")return(0,E.intToBuffer)(t);if(typeof t=="bigint"){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),b.Buffer.from(e,"hex")}if(t.toArray)return b.Buffer.from(t.toArray());if(t.toBuffer)return b.Buffer.from(t.toBuffer());throw new Error("invalid type")};E.toBuffer=ru;var nu=function(t){return t=(0,E.toBuffer)(t),"0x"+t.toString("hex")};E.bufferToHex=nu;function Zn(t){let e=(0,E.bufferToHex)(t);return BigInt(e==="0x"?0:e)}E.bufferToBigInt=Zn;function Wn(t){return(0,E.toBuffer)("0x"+t.toString(16))}E.bigIntToBuffer=Wn;var iu=function(t){let e=Number(Zn(t));if(!Number.isSafeInteger(e))throw new Error("Number exceeds 53 bits");return e};E.bufferToInt=iu;var ou=function(t){return BigInt.asIntN(256,Zn(t))};E.fromSigned=ou;var su=function(t){return Wn(BigInt.asUintN(256,t))};E.toUnsigned=su;var fu=function(t){return typeof t!="string"||(0,Ue.isHexPrefixed)(t)?t:"0x"+t};E.addHexPrefix=fu;function uu(t,e=50){let r=b.Buffer.isBuffer(t)?t.toString("hex"):t;return r.length<=e?r:r.slice(0,e)+"\u2026"}E.short=uu;var au=function(t){let e=/^(00)+|(00)+$/g;if(t=(0,Ue.stripHexPrefix)(t),t.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return b.Buffer.from(t.replace(e,""),"hex").toString("utf8")};E.toUtf8=au;var hu=function(t){if(b.Buffer.isBuffer(t))return`0x${t.toString("hex")}`;if(t instanceof Array){let e=[];for(let r=0;r<t.length;r++)e.push((0,E.baToJSON)(t[r]));return e}};E.baToJSON=hu;var cu=function(t){for(let[e,r]of Object.entries(t))if(r!==void 0&&r.length>0&&r[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${r.toString("hex")}`)};E.validateNoLeadingZeroes=cu;function Eo(t){return Array.isArray(t)?t.map(e=>Eo(e)):b.Buffer.from(t)}E.arrToBufArr=Eo;function Ao(t){return Array.isArray(t)?t.map(e=>Ao(e)):Uint8Array.from(t??[])}E.bufArrToArr=Ao;var lu=t=>"0x"+t.toString(16);E.bigIntToHex=lu;function du(t){return(0,E.unpadBuffer)(Wn(t))}E.bigIntToUnpaddedBuffer=du});var Fn=$(L=>{_();S();Object.defineProperty(L,"__esModule",{value:!0});L.accountBodyToRLP=L.accountBodyToSlim=L.accountBodyFromSlim=L.isZeroAddress=L.zeroAddress=L.importPublic=L.privateToAddress=L.privateToPublic=L.publicToAddress=L.pubToAddress=L.isValidPublic=L.isValidPrivate=L.generateAddress2=L.generateAddress=L.isValidChecksumAddress=L.toChecksumAddress=L.isValidAddress=L.Account=void 0;var wr=ho(),Qe=Dr(),Je=Nr(),gu=Vn(),X=Xe(),Ie=Kr(),Jt=Zr(),pu=Ge(),Ye=BigInt(0),tr=class{constructor(e=Ye,r=Ye,o=Ie.KECCAK256_RLP,i=Ie.KECCAK256_NULL){this.nonce=e,this.balance=r,this.storageRoot=o,this.codeHash=i,this._validate()}static fromAccountData(e){let{nonce:r,balance:o,storageRoot:i,codeHash:a}=e;return new tr(r!==void 0?(0,X.bufferToBigInt)((0,X.toBuffer)(r)):void 0,o!==void 0?(0,X.bufferToBigInt)((0,X.toBuffer)(o)):void 0,i!==void 0?(0,X.toBuffer)(i):void 0,a!==void 0?(0,X.toBuffer)(a):void 0)}static fromRlpSerializedAccount(e){let r=(0,X.arrToBufArr)(wr.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)}static fromValuesArray(e){let[r,o,i,a]=e;return new tr((0,X.bufferToBigInt)(r),(0,X.bufferToBigInt)(o),i,a)}_validate(){if(this.nonce<Ye)throw new Error("nonce must be greater than zero");if(this.balance<Ye)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,X.bigIntToUnpaddedBuffer)(this.nonce),(0,X.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return b.Buffer.from(wr.RLP.encode((0,X.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(Ie.KECCAK256_NULL)}isEmpty(){return this.balance===Ye&&this.nonce===Ye&&this.codeHash.equals(Ie.KECCAK256_NULL)}};L.Account=tr;var yu=function(t){try{(0,Jt.assertIsString)(t)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(t)};L.isValidAddress=yu;var mu=function(t,e){(0,Jt.assertIsHexString)(t);let r=(0,pu.stripHexPrefix)(t).toLowerCase(),o="";e!==void 0&&(o=(0,X.bufferToBigInt)((0,X.toBuffer)(e)).toString()+"0x");let i=b.Buffer.from(o+r,"utf8"),a=(0,gu.bytesToHex)((0,Qe.keccak256)(i)),g="0x";for(let m=0;m<r.length;m++)parseInt(a[m],16)>=8?g+=r[m].toUpperCase():g+=r[m];return g};L.toChecksumAddress=mu;var wu=function(t,e){return(0,L.isValidAddress)(t)&&(0,L.toChecksumAddress)(t,e)===t};L.isValidChecksumAddress=wu;var vu=function(t,e){return(0,Jt.assertIsBuffer)(t),(0,Jt.assertIsBuffer)(e),(0,X.bufferToBigInt)(e)===BigInt(0)?b.Buffer.from((0,Qe.keccak256)(wr.RLP.encode((0,X.bufArrToArr)([t,null])))).slice(-20):b.Buffer.from((0,Qe.keccak256)(wr.RLP.encode((0,X.bufArrToArr)([t,e])))).slice(-20)};L.generateAddress=vu;var bu=function(t,e,r){if((0,Jt.assertIsBuffer)(t),(0,Jt.assertIsBuffer)(e),(0,Jt.assertIsBuffer)(r),t.length!==20)throw new Error("Expected from to be of length 20");if(e.length!==32)throw new Error("Expected salt to be of length 32");let o=(0,Qe.keccak256)(b.Buffer.concat([b.Buffer.from("ff","hex"),t,e,(0,Qe.keccak256)(r)]));return(0,X.toBuffer)(o).slice(-20)};L.generateAddress2=bu;var xu=function(t){return Je.utils.isValidPrivateKey(t)};L.isValidPrivate=xu;var Mu=function(t,e=!1){if((0,Jt.assertIsBuffer)(t),t.length===64)try{return Je.Point.fromHex(b.Buffer.concat([b.Buffer.from([4]),t])),!0}catch{return!1}if(!e)return!1;try{return Je.Point.fromHex(t),!0}catch{return!1}};L.isValidPublic=Mu;var _u=function(t,e=!1){if((0,Jt.assertIsBuffer)(t),e&&t.length!==64&&(t=b.Buffer.from(Je.Point.fromHex(t).toRawBytes(!1).slice(1))),t.length!==64)throw new Error("Expected pubKey to be of length 64");return b.Buffer.from((0,Qe.keccak256)(t)).slice(-20)};L.pubToAddress=_u;L.publicToAddress=L.pubToAddress;var Su=function(t){return(0,Jt.assertIsBuffer)(t),b.Buffer.from(Je.Point.fromPrivateKey(t).toRawBytes(!1).slice(1))};L.privateToPublic=Su;var Bu=function(t){return(0,L.publicToAddress)((0,L.privateToPublic)(t))};L.privateToAddress=Bu;var Eu=function(t){return(0,Jt.assertIsBuffer)(t),t.length!==64&&(t=b.Buffer.from(Je.Point.fromHex(t).toRawBytes(!1).slice(1))),t};L.importPublic=Eu;var Au=function(){let e=(0,X.zeros)(20);return(0,X.bufferToHex)(e)};L.zeroAddress=Au;var Tu=function(t){try{(0,Jt.assertIsString)(t)}catch{return!1}return(0,L.zeroAddress)()===t};L.isZeroAddress=Tu;function Io(t){let[e,r,o,i]=t;return[e,r,(0,X.arrToBufArr)(o).length===0?Ie.KECCAK256_RLP:o,(0,X.arrToBufArr)(i).length===0?Ie.KECCAK256_NULL:i]}L.accountBodyFromSlim=Io;var To=new Uint8Array(0);function Iu(t){let[e,r,o,i]=t;return[e,r,(0,X.arrToBufArr)(o).equals(Ie.KECCAK256_RLP)?To:o,(0,X.arrToBufArr)(i).equals(Ie.KECCAK256_NULL)?To:i]}L.accountBodyToSlim=Iu;function Pu(t,e=!0){let r=e?Io(t):t;return(0,X.arrToBufArr)(wr.RLP.encode(r))}L.accountBodyToRLP=Pu});var Po=$(Fr=>{_();S();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Address=void 0;var vr=Fn(),Wr=Xe(),se=class{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new se((0,Wr.zeros)(20))}static fromString(e){if(!(0,vr.isValidAddress)(e))throw new Error("Invalid address");return new se((0,Wr.toBuffer)(e))}static fromPublicKey(e){if(!b.Buffer.isBuffer(e))throw new Error("Public key should be Buffer");let r=(0,vr.pubToAddress)(e);return new se(r)}static fromPrivateKey(e){if(!b.Buffer.isBuffer(e))throw new Error("Private key should be Buffer");let r=(0,vr.privateToAddress)(e);return new se(r)}static generate(e,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new se((0,vr.generateAddress)(e.buf,(0,Wr.bigIntToBuffer)(r)))}static generate2(e,r,o){if(!b.Buffer.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!b.Buffer.isBuffer(o))throw new Error("Expected initCode to be a Buffer");return new se((0,vr.generateAddress2)(e.buf,r,o))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(se.zero())}isPrecompileOrSystemAddress(){let e=(0,Wr.bufferToBigInt)(this.buf),r=BigInt(0),o=BigInt("0xffff");return e>=r&&e<=o}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return b.Buffer.from(this.buf)}};Fr.Address=se});var Ho=$(jt=>{_();S();Object.defineProperty(jt,"__esModule",{value:!0});jt.hashPersonalMessage=jt.isValidSignature=jt.fromRpcSig=jt.toCompactSig=jt.toRpcSig=jt.ecrecover=jt.ecsign=void 0;var ku=Dr(),ko=Nr(),Wt=Xe(),Gn=Kr(),Hu=Zr();function Lu(t,e,r){let[o,i]=(0,ko.signSync)(t,e,{recovered:!0,der:!1}),a=b.Buffer.from(o.slice(0,32)),g=b.Buffer.from(o.slice(32,64)),m=r===void 0?BigInt(i+27):BigInt(i+35)+BigInt(r)*BigInt(2);return{r:a,s:g,v:m}}jt.ecsign=Lu;function Gr(t,e){return t===BigInt(0)||t===BigInt(1)?t:e===void 0?t-BigInt(27):t-(e*BigInt(2)+BigInt(35))}function Xr(t){return t===BigInt(0)||t===BigInt(1)}var Ru=function(t,e,r,o,i){let a=b.Buffer.concat([(0,Wt.setLengthLeft)(r,32),(0,Wt.setLengthLeft)(o,32)],64),g=Gr(e,i);if(!Xr(g))throw new Error("Invalid signature v value");let m=(0,ko.recoverPublicKey)(t,a,Number(g));return b.Buffer.from(m.slice(1))};jt.ecrecover=Ru;var Cu=function(t,e,r,o){let i=Gr(t,o);if(!Xr(i))throw new Error("Invalid signature v value");return(0,Wt.bufferToHex)(b.Buffer.concat([(0,Wt.setLengthLeft)(e,32),(0,Wt.setLengthLeft)(r,32),(0,Wt.toBuffer)(t)]))};jt.toRpcSig=Cu;var Ou=function(t,e,r,o){let i=Gr(t,o);if(!Xr(i))throw new Error("Invalid signature v value");let a=r;return(t>BigInt(28)&&t%BigInt(2)===BigInt(1)||t===BigInt(1)||t===BigInt(28))&&(a=b.Buffer.from(r),a[0]|=128),(0,Wt.bufferToHex)(b.Buffer.concat([(0,Wt.setLengthLeft)(e,32),(0,Wt.setLengthLeft)(a,32)]))};jt.toCompactSig=Ou;var Uu=function(t){let e=(0,Wt.toBuffer)(t),r,o,i;if(e.length>=65)r=e.slice(0,32),o=e.slice(32,64),i=(0,Wt.bufferToBigInt)(e.slice(64));else if(e.length===64)r=e.slice(0,32),o=e.slice(32,64),i=BigInt((0,Wt.bufferToInt)(e.slice(32,33))>>7),o[0]&=127;else throw new Error("Invalid signature length");return i<27&&(i=i+BigInt(27)),{v:i,r,s:o}};jt.fromRpcSig=Uu;var Nu=function(t,e,r,o=!0,i){if(e.length!==32||r.length!==32||!Xr(Gr(t,i)))return!1;let a=(0,Wt.bufferToBigInt)(e),g=(0,Wt.bufferToBigInt)(r);return!(a===BigInt(0)||a>=Gn.SECP256K1_ORDER||g===BigInt(0)||g>=Gn.SECP256K1_ORDER||o&&g>=Gn.SECP256K1_ORDER_DIV_2)};jt.isValidSignature=Nu;var qu=function(t){(0,Hu.assertIsBuffer)(t);let e=b.Buffer.from(`Ethereum Signed Message:
${t.length}`,"utf-8");return b.Buffer.from((0,ku.keccak256)(b.Buffer.concat([e,t])))};jt.hashPersonalMessage=qu});var Lo=$(Ne=>{_();S();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.toType=Ne.TypeOutput=void 0;var Yr=Xe(),Ku=Ge(),br;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Buffer=2]="Buffer",t[t.PrefixedHexString=3]="PrefixedHexString"})(br=Ne.TypeOutput||(Ne.TypeOutput={}));function $u(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!(0,Ku.isHexString)(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let r=(0,Yr.toBuffer)(t);switch(e){case br.Buffer:return r;case br.BigInt:return(0,Yr.bufferToBigInt)(r);case br.Number:{let o=(0,Yr.bufferToBigInt)(r);if(o>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(o)}case br.PrefixedHexString:return(0,Yr.bufferToHex)(r);default:throw new Error("unknown outputType")}}Ne.toType=$u});var Ro=$(Qr=>{_();S();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.AsyncEventEmitter=void 0;var ju=fs(),zu=ns(),Xn=class extends zu.EventEmitter{emit(e,...r){let[o,i]=r,a=this,g=a._events[e]??[];return i===void 0&&typeof o=="function"&&(i=o,o=void 0),(e==="newListener"||e==="removeListener")&&(o={event:o,fn:i},i=void 0),g=Array.isArray(g)?g:[g],(0,ju.eachSeries)(g.slice(),function(m,v){let x;if(m.length<2){try{m.call(a,o)}catch(I){x=I}return v(x)}m.call(a,o,v)},i),a.listenerCount(e)>0}once(e,r){let o=this,i;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?i=function(a,g){o.removeListener(e,i),r(a,g)}:i=function(a){o.removeListener(e,i),r(a,i)},o.on(e,i),o}first(e,r){let o=this._events[e]??[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(o)||(this._events[e]=o=[o]),o.unshift(r),this}before(e,r,o){return this.beforeOrAfter(e,r,o)}after(e,r,o){return this.beforeOrAfter(e,r,o,"after")}beforeOrAfter(e,r,o,i){let a=this._events[e]??[],g,m,v=i==="after"?1:0;if(typeof o!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),m=a.length,g=a.length;g--;)if(a[g]===r){m=g+v;break}return a.splice(m,0,o),this}on(e,r){return super.on(e,r)}addListener(e,r){return super.addListener(e,r)}prependListener(e,r){return super.prependListener(e,r)}prependOnceListener(e,r){return super.prependOnceListener(e,r)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,r){return super.removeListener(e,r)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}};Qr.AsyncEventEmitter=Xn});var Co=$(Jr=>{_();S();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.Lock=void 0;var Yn=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(e=>this.promiseResolverQueue.push(e))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;let e=this.promiseResolverQueue.shift();e&&e(!0)}}};Jr.Lock=Yn});var xr=$(q=>{_();S();var Vu=q&&q.__createBinding||(Object.create?function(t,e,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,i)}:function(t,e,r,o){o===void 0&&(o=r),t[o]=e[r]}),Pe=q&&q.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vu(e,t,r)};Object.defineProperty(q,"__esModule",{value:!0});q.toAscii=q.stripHexPrefix=q.padToEven=q.isHexString=q.isHexPrefixed=q.getKeys=q.getBinarySize=q.fromUtf8=q.fromAscii=q.arrayContainsArray=void 0;Pe(Kr(),q);Pe(Fn(),q);Pe(Po(),q);Pe(Ho(),q);Pe(Xe(),q);Pe(Lo(),q);Pe(Ro(),q);var le=Ge();Object.defineProperty(q,"arrayContainsArray",{enumerable:!0,get:function(){return le.arrayContainsArray}});Object.defineProperty(q,"fromAscii",{enumerable:!0,get:function(){return le.fromAscii}});Object.defineProperty(q,"fromUtf8",{enumerable:!0,get:function(){return le.fromUtf8}});Object.defineProperty(q,"getBinarySize",{enumerable:!0,get:function(){return le.getBinarySize}});Object.defineProperty(q,"getKeys",{enumerable:!0,get:function(){return le.getKeys}});Object.defineProperty(q,"isHexPrefixed",{enumerable:!0,get:function(){return le.isHexPrefixed}});Object.defineProperty(q,"isHexString",{enumerable:!0,get:function(){return le.isHexString}});Object.defineProperty(q,"padToEven",{enumerable:!0,get:function(){return le.padToEven}});Object.defineProperty(q,"stripHexPrefix",{enumerable:!0,get:function(){return le.stripHexPrefix}});Object.defineProperty(q,"toAscii",{enumerable:!0,get:function(){return le.toAscii}});Pe(Co(),q)});var er=$(zt=>{_();S();Object.defineProperty(zt,"__esModule",{value:!0});zt.numberToBuffer=zt.normalize=zt.recoverPublicKey=zt.concatSig=zt.legacyToBuffer=zt.isNullish=zt.padWithZeroes=void 0;var te=xr(),Qn=Bn();function Jn(t,e){if(t!==""&&!/^[a-f0-9]+$/iu.test(t))throw new Error(`Expected an unprefixed hex string. Received: ${t}`);if(e<0)throw new Error(`Expected a non-negative integer target length. Received: ${e}`);return String.prototype.padStart.call(t,e,"0")}zt.padWithZeroes=Jn;function Du(t){return t==null}zt.isNullish=Du;function Zu(t){return typeof t=="string"&&!(0,Qn.isHexString)(t)?b.Buffer.from(t):(0,te.toBuffer)(t)}zt.legacyToBuffer=Zu;function Wu(t,e,r){let o=(0,te.fromSigned)(e),i=(0,te.fromSigned)(r),a=(0,te.bufferToInt)(t),g=Jn((0,te.toUnsigned)(o).toString("hex"),64),m=Jn((0,te.toUnsigned)(i).toString("hex"),64),v=(0,Qn.stripHexPrefix)((0,Qn.intToHex)(a));return(0,te.addHexPrefix)(g.concat(m,v))}zt.concatSig=Wu;function Fu(t,e){let r=(0,te.fromRpcSig)(e);return(0,te.ecrecover)(t,r.v,r.r,r.s)}zt.recoverPublicKey=Fu;function Gu(t){if(!!t){if(typeof t=="number"){if(t<0)return"0x";let e=(0,te.toBuffer)(t);t=(0,te.bufferToHex)(e)}if(typeof t!="string"){let e="eth-sig-util.normalize() requires hex string or integer input.";throw e+=` received ${typeof t}: ${t}`,new Error(e)}return(0,te.addHexPrefix)(t.toLowerCase())}}zt.normalize=Gu;function Xu(t){let e=t.toString(16),r=e.length%2?"0":"";return b.Buffer.from(r+e,"hex")}zt.numberToBuffer=Xu});var Uo=$(ke=>{_();S();Object.defineProperty(ke,"__esModule",{value:!0});ke.extractPublicKey=ke.recoverPersonalSignature=ke.personalSign=void 0;var rr=xr(),de=er();function Yu({privateKey:t,data:e}){if((0,de.isNullish)(e))throw new Error("Missing data parameter");if((0,de.isNullish)(t))throw new Error("Missing privateKey parameter");let r=(0,de.legacyToBuffer)(e),o=(0,rr.hashPersonalMessage)(r),i=(0,rr.ecsign)(o,t);return(0,de.concatSig)((0,rr.toBuffer)(i.v),i.r,i.s)}ke.personalSign=Yu;function Qu({data:t,signature:e}){if((0,de.isNullish)(t))throw new Error("Missing data parameter");if((0,de.isNullish)(e))throw new Error("Missing signature parameter");let r=Oo(t,e),o=(0,rr.publicToAddress)(r);return(0,rr.bufferToHex)(o)}ke.recoverPersonalSignature=Qu;function Ju({data:t,signature:e}){if((0,de.isNullish)(t))throw new Error("Missing data parameter");if((0,de.isNullish)(e))throw new Error("Missing signature parameter");return`0x${Oo(t,e).toString("hex")}`}ke.extractPublicKey=Ju;function Oo(t,e){let r=(0,rr.hashPersonalMessage)((0,de.legacyToBuffer)(t));return(0,de.recoverPublicKey)(r,e)}});var qo=$((No,ti)=>{_();S();(function(t,e){"use strict";function r(p,n){if(!p)throw new Error(n||"Assertion failed")}function o(p,n){p.super_=n;var f=function(){};f.prototype=n.prototype,p.prototype=new f,p.prototype.constructor=p}function i(p,n,f){if(i.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((n==="le"||n==="be")&&(f=n,n=10),this._init(p||0,n||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{a=_i().Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,f){return n.cmp(f)>0?n:f},i.min=function(n,f){return n.cmp(f)<0?n:f},i.prototype._init=function(n,f,u){if(typeof n=="number")return this._initNumber(n,f,u);if(typeof n=="object")return this._initArray(n,f,u);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),n=n.toString().replace(/\s+/g,"");var h=0;n[0]==="-"&&h++,f===16?this._parseHex(n,h):this._parseBase(n,f,h),n[0]==="-"&&(this.negative=1),this.strip(),u==="le"&&this._initArray(this.toArray(),f,u)},i.prototype._initNumber=function(n,f,u){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),f,u)},i.prototype._initArray=function(n,f,u){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var d,y,w=0;if(u==="be")for(h=n.length-1,d=0;h>=0;h-=3)y=n[h]|n[h-1]<<8|n[h-2]<<16,this.words[d]|=y<<w&67108863,this.words[d+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,d++);else if(u==="le")for(h=0,d=0;h<n.length;h+=3)y=n[h]|n[h+1]<<8|n[h+2]<<16,this.words[d]|=y<<w&67108863,this.words[d+1]=y>>>26-w&67108863,w+=24,w>=26&&(w-=26,d++);return this.strip()};function g(p,n,f){for(var u=0,h=Math.min(p.length,f),d=n;d<h;d++){var y=p.charCodeAt(d)-48;u<<=4,y>=49&&y<=54?u|=y-49+10:y>=17&&y<=22?u|=y-17+10:u|=y&15}return u}i.prototype._parseHex=function(n,f){this.length=Math.ceil((n.length-f)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,d,y=0;for(u=n.length-6,h=0;u>=f;u-=6)d=g(n,u,u+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303,y+=24,y>=26&&(y-=26,h++);u+6!==f&&(d=g(n,f,u+6),this.words[h]|=d<<y&67108863,this.words[h+1]|=d>>>26-y&4194303),this.strip()};function m(p,n,f,u){for(var h=0,d=Math.min(p.length,f),y=n;y<d;y++){var w=p.charCodeAt(y)-48;h*=u,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(n,f,u){this.words=[0],this.length=1;for(var h=0,d=1;d<=67108863;d*=f)h++;h--,d=d/f|0;for(var y=n.length-u,w=y%h,c=Math.min(y,y-w)+u,s=0,l=u;l<c;l+=h)s=m(n,l,l+h,f),this.imuln(d),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(w!==0){var B=1;for(s=m(n,l,n.length,f),l=0;l<w;l++)B*=f;this.imuln(B),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}},i.prototype.copy=function(n){n.words=new Array(this.length);for(var f=0;f<this.length;f++)n.words[f]=this.words[f];n.length=this.length,n.negative=this.negative,n.red=this.red},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,f){n=n||10,f=f|0||1;var u;if(n===16||n==="hex"){u="";for(var h=0,d=0,y=0;y<this.length;y++){var w=this.words[y],c=((w<<h|d)&16777215).toString(16);d=w>>>24-h&16777215,d!==0||y!==this.length-1?u=v[6-c.length]+c+u:u=c+u,h+=2,h>=26&&(h-=26,y--)}for(d!==0&&(u=d.toString(16)+u);u.length%f!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(n===(n|0)&&n>=2&&n<=36){var s=x[n],l=I[n];u="";var B=this.clone();for(B.negative=0;!B.isZero();){var A=B.modn(l).toString(n);B=B.idivn(l),B.isZero()?u=A+u:u=v[s-A.length]+A+u}for(this.isZero()&&(u="0"+u);u.length%f!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(n,f){return r(typeof a<"u"),this.toArrayLike(a,n,f)},i.prototype.toArray=function(n,f){return this.toArrayLike(Array,n,f)},i.prototype.toArrayLike=function(n,f,u){var h=this.byteLength(),d=u||Math.max(1,h);r(h<=d,"byte array longer than desired length"),r(d>0,"Requested array length <= 0"),this.strip();var y=f==="le",w=new n(d),c,s,l=this.clone();if(y){for(s=0;!l.isZero();s++)c=l.andln(255),l.iushrn(8),w[s]=c;for(;s<d;s++)w[s]=0}else{for(s=0;s<d-h;s++)w[s]=0;for(s=0;!l.isZero();s++)c=l.andln(255),l.iushrn(8),w[d-s-1]=c}return w},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var f=n,u=0;return f>=4096&&(u+=13,f>>>=13),f>=64&&(u+=7,f>>>=7),f>=8&&(u+=4,f>>>=4),f>=2&&(u+=2,f>>>=2),u+f},i.prototype._zeroBits=function(n){if(n===0)return 26;var f=n,u=0;return(f&8191)===0&&(u+=13,f>>>=13),(f&127)===0&&(u+=7,f>>>=7),(f&15)===0&&(u+=4,f>>>=4),(f&3)===0&&(u+=2,f>>>=2),(f&1)===0&&u++,u},i.prototype.bitLength=function(){var n=this.words[this.length-1],f=this._countBits(n);return(this.length-1)*26+f};function P(p){for(var n=new Array(p.bitLength()),f=0;f<n.length;f++){var u=f/26|0,h=f%26;n[f]=(p.words[u]&1<<h)>>>h}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,f=0;f<this.length;f++){var u=this._zeroBits(this.words[f]);if(n+=u,u!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var f=0;f<n.length;f++)this.words[f]=this.words[f]|n.words[f];return this.strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var f;this.length>n.length?f=n:f=this;for(var u=0;u<f.length;u++)this.words[u]=this.words[u]&n.words[u];return this.length=f.length,this.strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var f,u;this.length>n.length?(f=this,u=n):(f=n,u=this);for(var h=0;h<u.length;h++)this.words[h]=f.words[h]^u.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var f=Math.ceil(n/26)|0,u=n%26;this._expand(f),u>0&&f--;for(var h=0;h<f;h++)this.words[h]=~this.words[h]&67108863;return u>0&&(this.words[h]=~this.words[h]&67108863>>26-u),this.strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,f){r(typeof n=="number"&&n>=0);var u=n/26|0,h=n%26;return this._expand(u+1),f?this.words[u]=this.words[u]|1<<h:this.words[u]=this.words[u]&~(1<<h),this.strip()},i.prototype.iadd=function(n){var f;if(this.negative!==0&&n.negative===0)return this.negative=0,f=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,f=this.isub(n),n.negative=1,f._normSign();var u,h;this.length>n.length?(u=this,h=n):(u=n,h=this);for(var d=0,y=0;y<h.length;y++)f=(u.words[y]|0)+(h.words[y]|0)+d,this.words[y]=f&67108863,d=f>>>26;for(;d!==0&&y<u.length;y++)f=(u.words[y]|0)+d,this.words[y]=f&67108863,d=f>>>26;if(this.length=u.length,d!==0)this.words[this.length]=d,this.length++;else if(u!==this)for(;y<u.length;y++)this.words[y]=u.words[y];return this},i.prototype.add=function(n){var f;return n.negative!==0&&this.negative===0?(n.negative=0,f=this.sub(n),n.negative^=1,f):n.negative===0&&this.negative!==0?(this.negative=0,f=n.sub(this),this.negative=1,f):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var f=this.iadd(n);return n.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var u=this.cmp(n);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,d;u>0?(h=this,d=n):(h=n,d=this);for(var y=0,w=0;w<d.length;w++)f=(h.words[w]|0)-(d.words[w]|0)+y,y=f>>26,this.words[w]=f&67108863;for(;y!==0&&w<h.length;w++)f=(h.words[w]|0)+y,y=f>>26,this.words[w]=f&67108863;if(y===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function k(p,n,f){f.negative=n.negative^p.negative;var u=p.length+n.length|0;f.length=u,u=u-1|0;var h=p.words[0]|0,d=n.words[0]|0,y=h*d,w=y&67108863,c=y/67108864|0;f.words[0]=w;for(var s=1;s<u;s++){for(var l=c>>>26,B=c&67108863,A=Math.min(s,n.length-1),T=Math.max(0,s-p.length+1);T<=A;T++){var R=s-T|0;h=p.words[R]|0,d=n.words[T]|0,y=h*d+B,l+=y/67108864|0,B=y&67108863}f.words[s]=B|0,c=l|0}return c!==0?f.words[s]=c|0:f.length--,f.strip()}var O=function(n,f,u){var h=n.words,d=f.words,y=u.words,w=0,c,s,l,B=h[0]|0,A=B&8191,T=B>>>13,R=h[1]|0,V=R&8191,W=R>>>13,_e=h[2]|0,F=_e&8191,Y=_e>>>13,si=h[3]|0,it=si&8191,ot=si>>>13,fi=h[4]|0,st=fi&8191,ft=fi>>>13,ui=h[5]|0,ut=ui&8191,at=ui>>>13,ai=h[6]|0,ht=ai&8191,ct=ai>>>13,hi=h[7]|0,lt=hi&8191,dt=hi>>>13,ci=h[8]|0,gt=ci&8191,pt=ci>>>13,li=h[9]|0,yt=li&8191,mt=li>>>13,di=d[0]|0,wt=di&8191,vt=di>>>13,gi=d[1]|0,bt=gi&8191,xt=gi>>>13,pi=d[2]|0,Mt=pi&8191,_t=pi>>>13,yi=d[3]|0,St=yi&8191,Bt=yi>>>13,mi=d[4]|0,Et=mi&8191,At=mi>>>13,wi=d[5]|0,Tt=wi&8191,It=wi>>>13,vi=d[6]|0,Pt=vi&8191,kt=vi>>>13,bi=d[7]|0,Ht=bi&8191,Lt=bi>>>13,xi=d[8]|0,Rt=xi&8191,Ct=xi>>>13,Mi=d[9]|0,Ot=Mi&8191,Ut=Mi>>>13;u.negative=n.negative^f.negative,u.length=19,c=Math.imul(A,wt),s=Math.imul(A,vt),s=s+Math.imul(T,wt)|0,l=Math.imul(T,vt);var sn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(sn>>>26)|0,sn&=67108863,c=Math.imul(V,wt),s=Math.imul(V,vt),s=s+Math.imul(W,wt)|0,l=Math.imul(W,vt),c=c+Math.imul(A,bt)|0,s=s+Math.imul(A,xt)|0,s=s+Math.imul(T,bt)|0,l=l+Math.imul(T,xt)|0;var fn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(fn>>>26)|0,fn&=67108863,c=Math.imul(F,wt),s=Math.imul(F,vt),s=s+Math.imul(Y,wt)|0,l=Math.imul(Y,vt),c=c+Math.imul(V,bt)|0,s=s+Math.imul(V,xt)|0,s=s+Math.imul(W,bt)|0,l=l+Math.imul(W,xt)|0,c=c+Math.imul(A,Mt)|0,s=s+Math.imul(A,_t)|0,s=s+Math.imul(T,Mt)|0,l=l+Math.imul(T,_t)|0;var un=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(un>>>26)|0,un&=67108863,c=Math.imul(it,wt),s=Math.imul(it,vt),s=s+Math.imul(ot,wt)|0,l=Math.imul(ot,vt),c=c+Math.imul(F,bt)|0,s=s+Math.imul(F,xt)|0,s=s+Math.imul(Y,bt)|0,l=l+Math.imul(Y,xt)|0,c=c+Math.imul(V,Mt)|0,s=s+Math.imul(V,_t)|0,s=s+Math.imul(W,Mt)|0,l=l+Math.imul(W,_t)|0,c=c+Math.imul(A,St)|0,s=s+Math.imul(A,Bt)|0,s=s+Math.imul(T,St)|0,l=l+Math.imul(T,Bt)|0;var an=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(an>>>26)|0,an&=67108863,c=Math.imul(st,wt),s=Math.imul(st,vt),s=s+Math.imul(ft,wt)|0,l=Math.imul(ft,vt),c=c+Math.imul(it,bt)|0,s=s+Math.imul(it,xt)|0,s=s+Math.imul(ot,bt)|0,l=l+Math.imul(ot,xt)|0,c=c+Math.imul(F,Mt)|0,s=s+Math.imul(F,_t)|0,s=s+Math.imul(Y,Mt)|0,l=l+Math.imul(Y,_t)|0,c=c+Math.imul(V,St)|0,s=s+Math.imul(V,Bt)|0,s=s+Math.imul(W,St)|0,l=l+Math.imul(W,Bt)|0,c=c+Math.imul(A,Et)|0,s=s+Math.imul(A,At)|0,s=s+Math.imul(T,Et)|0,l=l+Math.imul(T,At)|0;var hn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(hn>>>26)|0,hn&=67108863,c=Math.imul(ut,wt),s=Math.imul(ut,vt),s=s+Math.imul(at,wt)|0,l=Math.imul(at,vt),c=c+Math.imul(st,bt)|0,s=s+Math.imul(st,xt)|0,s=s+Math.imul(ft,bt)|0,l=l+Math.imul(ft,xt)|0,c=c+Math.imul(it,Mt)|0,s=s+Math.imul(it,_t)|0,s=s+Math.imul(ot,Mt)|0,l=l+Math.imul(ot,_t)|0,c=c+Math.imul(F,St)|0,s=s+Math.imul(F,Bt)|0,s=s+Math.imul(Y,St)|0,l=l+Math.imul(Y,Bt)|0,c=c+Math.imul(V,Et)|0,s=s+Math.imul(V,At)|0,s=s+Math.imul(W,Et)|0,l=l+Math.imul(W,At)|0,c=c+Math.imul(A,Tt)|0,s=s+Math.imul(A,It)|0,s=s+Math.imul(T,Tt)|0,l=l+Math.imul(T,It)|0;var cn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(cn>>>26)|0,cn&=67108863,c=Math.imul(ht,wt),s=Math.imul(ht,vt),s=s+Math.imul(ct,wt)|0,l=Math.imul(ct,vt),c=c+Math.imul(ut,bt)|0,s=s+Math.imul(ut,xt)|0,s=s+Math.imul(at,bt)|0,l=l+Math.imul(at,xt)|0,c=c+Math.imul(st,Mt)|0,s=s+Math.imul(st,_t)|0,s=s+Math.imul(ft,Mt)|0,l=l+Math.imul(ft,_t)|0,c=c+Math.imul(it,St)|0,s=s+Math.imul(it,Bt)|0,s=s+Math.imul(ot,St)|0,l=l+Math.imul(ot,Bt)|0,c=c+Math.imul(F,Et)|0,s=s+Math.imul(F,At)|0,s=s+Math.imul(Y,Et)|0,l=l+Math.imul(Y,At)|0,c=c+Math.imul(V,Tt)|0,s=s+Math.imul(V,It)|0,s=s+Math.imul(W,Tt)|0,l=l+Math.imul(W,It)|0,c=c+Math.imul(A,Pt)|0,s=s+Math.imul(A,kt)|0,s=s+Math.imul(T,Pt)|0,l=l+Math.imul(T,kt)|0;var ln=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(ln>>>26)|0,ln&=67108863,c=Math.imul(lt,wt),s=Math.imul(lt,vt),s=s+Math.imul(dt,wt)|0,l=Math.imul(dt,vt),c=c+Math.imul(ht,bt)|0,s=s+Math.imul(ht,xt)|0,s=s+Math.imul(ct,bt)|0,l=l+Math.imul(ct,xt)|0,c=c+Math.imul(ut,Mt)|0,s=s+Math.imul(ut,_t)|0,s=s+Math.imul(at,Mt)|0,l=l+Math.imul(at,_t)|0,c=c+Math.imul(st,St)|0,s=s+Math.imul(st,Bt)|0,s=s+Math.imul(ft,St)|0,l=l+Math.imul(ft,Bt)|0,c=c+Math.imul(it,Et)|0,s=s+Math.imul(it,At)|0,s=s+Math.imul(ot,Et)|0,l=l+Math.imul(ot,At)|0,c=c+Math.imul(F,Tt)|0,s=s+Math.imul(F,It)|0,s=s+Math.imul(Y,Tt)|0,l=l+Math.imul(Y,It)|0,c=c+Math.imul(V,Pt)|0,s=s+Math.imul(V,kt)|0,s=s+Math.imul(W,Pt)|0,l=l+Math.imul(W,kt)|0,c=c+Math.imul(A,Ht)|0,s=s+Math.imul(A,Lt)|0,s=s+Math.imul(T,Ht)|0,l=l+Math.imul(T,Lt)|0;var dn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(dn>>>26)|0,dn&=67108863,c=Math.imul(gt,wt),s=Math.imul(gt,vt),s=s+Math.imul(pt,wt)|0,l=Math.imul(pt,vt),c=c+Math.imul(lt,bt)|0,s=s+Math.imul(lt,xt)|0,s=s+Math.imul(dt,bt)|0,l=l+Math.imul(dt,xt)|0,c=c+Math.imul(ht,Mt)|0,s=s+Math.imul(ht,_t)|0,s=s+Math.imul(ct,Mt)|0,l=l+Math.imul(ct,_t)|0,c=c+Math.imul(ut,St)|0,s=s+Math.imul(ut,Bt)|0,s=s+Math.imul(at,St)|0,l=l+Math.imul(at,Bt)|0,c=c+Math.imul(st,Et)|0,s=s+Math.imul(st,At)|0,s=s+Math.imul(ft,Et)|0,l=l+Math.imul(ft,At)|0,c=c+Math.imul(it,Tt)|0,s=s+Math.imul(it,It)|0,s=s+Math.imul(ot,Tt)|0,l=l+Math.imul(ot,It)|0,c=c+Math.imul(F,Pt)|0,s=s+Math.imul(F,kt)|0,s=s+Math.imul(Y,Pt)|0,l=l+Math.imul(Y,kt)|0,c=c+Math.imul(V,Ht)|0,s=s+Math.imul(V,Lt)|0,s=s+Math.imul(W,Ht)|0,l=l+Math.imul(W,Lt)|0,c=c+Math.imul(A,Rt)|0,s=s+Math.imul(A,Ct)|0,s=s+Math.imul(T,Rt)|0,l=l+Math.imul(T,Ct)|0;var gn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(gn>>>26)|0,gn&=67108863,c=Math.imul(yt,wt),s=Math.imul(yt,vt),s=s+Math.imul(mt,wt)|0,l=Math.imul(mt,vt),c=c+Math.imul(gt,bt)|0,s=s+Math.imul(gt,xt)|0,s=s+Math.imul(pt,bt)|0,l=l+Math.imul(pt,xt)|0,c=c+Math.imul(lt,Mt)|0,s=s+Math.imul(lt,_t)|0,s=s+Math.imul(dt,Mt)|0,l=l+Math.imul(dt,_t)|0,c=c+Math.imul(ht,St)|0,s=s+Math.imul(ht,Bt)|0,s=s+Math.imul(ct,St)|0,l=l+Math.imul(ct,Bt)|0,c=c+Math.imul(ut,Et)|0,s=s+Math.imul(ut,At)|0,s=s+Math.imul(at,Et)|0,l=l+Math.imul(at,At)|0,c=c+Math.imul(st,Tt)|0,s=s+Math.imul(st,It)|0,s=s+Math.imul(ft,Tt)|0,l=l+Math.imul(ft,It)|0,c=c+Math.imul(it,Pt)|0,s=s+Math.imul(it,kt)|0,s=s+Math.imul(ot,Pt)|0,l=l+Math.imul(ot,kt)|0,c=c+Math.imul(F,Ht)|0,s=s+Math.imul(F,Lt)|0,s=s+Math.imul(Y,Ht)|0,l=l+Math.imul(Y,Lt)|0,c=c+Math.imul(V,Rt)|0,s=s+Math.imul(V,Ct)|0,s=s+Math.imul(W,Rt)|0,l=l+Math.imul(W,Ct)|0,c=c+Math.imul(A,Ot)|0,s=s+Math.imul(A,Ut)|0,s=s+Math.imul(T,Ot)|0,l=l+Math.imul(T,Ut)|0;var pn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(pn>>>26)|0,pn&=67108863,c=Math.imul(yt,bt),s=Math.imul(yt,xt),s=s+Math.imul(mt,bt)|0,l=Math.imul(mt,xt),c=c+Math.imul(gt,Mt)|0,s=s+Math.imul(gt,_t)|0,s=s+Math.imul(pt,Mt)|0,l=l+Math.imul(pt,_t)|0,c=c+Math.imul(lt,St)|0,s=s+Math.imul(lt,Bt)|0,s=s+Math.imul(dt,St)|0,l=l+Math.imul(dt,Bt)|0,c=c+Math.imul(ht,Et)|0,s=s+Math.imul(ht,At)|0,s=s+Math.imul(ct,Et)|0,l=l+Math.imul(ct,At)|0,c=c+Math.imul(ut,Tt)|0,s=s+Math.imul(ut,It)|0,s=s+Math.imul(at,Tt)|0,l=l+Math.imul(at,It)|0,c=c+Math.imul(st,Pt)|0,s=s+Math.imul(st,kt)|0,s=s+Math.imul(ft,Pt)|0,l=l+Math.imul(ft,kt)|0,c=c+Math.imul(it,Ht)|0,s=s+Math.imul(it,Lt)|0,s=s+Math.imul(ot,Ht)|0,l=l+Math.imul(ot,Lt)|0,c=c+Math.imul(F,Rt)|0,s=s+Math.imul(F,Ct)|0,s=s+Math.imul(Y,Rt)|0,l=l+Math.imul(Y,Ct)|0,c=c+Math.imul(V,Ot)|0,s=s+Math.imul(V,Ut)|0,s=s+Math.imul(W,Ot)|0,l=l+Math.imul(W,Ut)|0;var yn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(yn>>>26)|0,yn&=67108863,c=Math.imul(yt,Mt),s=Math.imul(yt,_t),s=s+Math.imul(mt,Mt)|0,l=Math.imul(mt,_t),c=c+Math.imul(gt,St)|0,s=s+Math.imul(gt,Bt)|0,s=s+Math.imul(pt,St)|0,l=l+Math.imul(pt,Bt)|0,c=c+Math.imul(lt,Et)|0,s=s+Math.imul(lt,At)|0,s=s+Math.imul(dt,Et)|0,l=l+Math.imul(dt,At)|0,c=c+Math.imul(ht,Tt)|0,s=s+Math.imul(ht,It)|0,s=s+Math.imul(ct,Tt)|0,l=l+Math.imul(ct,It)|0,c=c+Math.imul(ut,Pt)|0,s=s+Math.imul(ut,kt)|0,s=s+Math.imul(at,Pt)|0,l=l+Math.imul(at,kt)|0,c=c+Math.imul(st,Ht)|0,s=s+Math.imul(st,Lt)|0,s=s+Math.imul(ft,Ht)|0,l=l+Math.imul(ft,Lt)|0,c=c+Math.imul(it,Rt)|0,s=s+Math.imul(it,Ct)|0,s=s+Math.imul(ot,Rt)|0,l=l+Math.imul(ot,Ct)|0,c=c+Math.imul(F,Ot)|0,s=s+Math.imul(F,Ut)|0,s=s+Math.imul(Y,Ot)|0,l=l+Math.imul(Y,Ut)|0;var mn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(mn>>>26)|0,mn&=67108863,c=Math.imul(yt,St),s=Math.imul(yt,Bt),s=s+Math.imul(mt,St)|0,l=Math.imul(mt,Bt),c=c+Math.imul(gt,Et)|0,s=s+Math.imul(gt,At)|0,s=s+Math.imul(pt,Et)|0,l=l+Math.imul(pt,At)|0,c=c+Math.imul(lt,Tt)|0,s=s+Math.imul(lt,It)|0,s=s+Math.imul(dt,Tt)|0,l=l+Math.imul(dt,It)|0,c=c+Math.imul(ht,Pt)|0,s=s+Math.imul(ht,kt)|0,s=s+Math.imul(ct,Pt)|0,l=l+Math.imul(ct,kt)|0,c=c+Math.imul(ut,Ht)|0,s=s+Math.imul(ut,Lt)|0,s=s+Math.imul(at,Ht)|0,l=l+Math.imul(at,Lt)|0,c=c+Math.imul(st,Rt)|0,s=s+Math.imul(st,Ct)|0,s=s+Math.imul(ft,Rt)|0,l=l+Math.imul(ft,Ct)|0,c=c+Math.imul(it,Ot)|0,s=s+Math.imul(it,Ut)|0,s=s+Math.imul(ot,Ot)|0,l=l+Math.imul(ot,Ut)|0;var wn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(wn>>>26)|0,wn&=67108863,c=Math.imul(yt,Et),s=Math.imul(yt,At),s=s+Math.imul(mt,Et)|0,l=Math.imul(mt,At),c=c+Math.imul(gt,Tt)|0,s=s+Math.imul(gt,It)|0,s=s+Math.imul(pt,Tt)|0,l=l+Math.imul(pt,It)|0,c=c+Math.imul(lt,Pt)|0,s=s+Math.imul(lt,kt)|0,s=s+Math.imul(dt,Pt)|0,l=l+Math.imul(dt,kt)|0,c=c+Math.imul(ht,Ht)|0,s=s+Math.imul(ht,Lt)|0,s=s+Math.imul(ct,Ht)|0,l=l+Math.imul(ct,Lt)|0,c=c+Math.imul(ut,Rt)|0,s=s+Math.imul(ut,Ct)|0,s=s+Math.imul(at,Rt)|0,l=l+Math.imul(at,Ct)|0,c=c+Math.imul(st,Ot)|0,s=s+Math.imul(st,Ut)|0,s=s+Math.imul(ft,Ot)|0,l=l+Math.imul(ft,Ut)|0;var vn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(vn>>>26)|0,vn&=67108863,c=Math.imul(yt,Tt),s=Math.imul(yt,It),s=s+Math.imul(mt,Tt)|0,l=Math.imul(mt,It),c=c+Math.imul(gt,Pt)|0,s=s+Math.imul(gt,kt)|0,s=s+Math.imul(pt,Pt)|0,l=l+Math.imul(pt,kt)|0,c=c+Math.imul(lt,Ht)|0,s=s+Math.imul(lt,Lt)|0,s=s+Math.imul(dt,Ht)|0,l=l+Math.imul(dt,Lt)|0,c=c+Math.imul(ht,Rt)|0,s=s+Math.imul(ht,Ct)|0,s=s+Math.imul(ct,Rt)|0,l=l+Math.imul(ct,Ct)|0,c=c+Math.imul(ut,Ot)|0,s=s+Math.imul(ut,Ut)|0,s=s+Math.imul(at,Ot)|0,l=l+Math.imul(at,Ut)|0;var bn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(bn>>>26)|0,bn&=67108863,c=Math.imul(yt,Pt),s=Math.imul(yt,kt),s=s+Math.imul(mt,Pt)|0,l=Math.imul(mt,kt),c=c+Math.imul(gt,Ht)|0,s=s+Math.imul(gt,Lt)|0,s=s+Math.imul(pt,Ht)|0,l=l+Math.imul(pt,Lt)|0,c=c+Math.imul(lt,Rt)|0,s=s+Math.imul(lt,Ct)|0,s=s+Math.imul(dt,Rt)|0,l=l+Math.imul(dt,Ct)|0,c=c+Math.imul(ht,Ot)|0,s=s+Math.imul(ht,Ut)|0,s=s+Math.imul(ct,Ot)|0,l=l+Math.imul(ct,Ut)|0;var xn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(xn>>>26)|0,xn&=67108863,c=Math.imul(yt,Ht),s=Math.imul(yt,Lt),s=s+Math.imul(mt,Ht)|0,l=Math.imul(mt,Lt),c=c+Math.imul(gt,Rt)|0,s=s+Math.imul(gt,Ct)|0,s=s+Math.imul(pt,Rt)|0,l=l+Math.imul(pt,Ct)|0,c=c+Math.imul(lt,Ot)|0,s=s+Math.imul(lt,Ut)|0,s=s+Math.imul(dt,Ot)|0,l=l+Math.imul(dt,Ut)|0;var Mn=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,c=Math.imul(yt,Rt),s=Math.imul(yt,Ct),s=s+Math.imul(mt,Rt)|0,l=Math.imul(mt,Ct),c=c+Math.imul(gt,Ot)|0,s=s+Math.imul(gt,Ut)|0,s=s+Math.imul(pt,Ot)|0,l=l+Math.imul(pt,Ut)|0;var _n=(w+c|0)+((s&8191)<<13)|0;w=(l+(s>>>13)|0)+(_n>>>26)|0,_n&=67108863,c=Math.imul(yt,Ot),s=Math.imul(yt,Ut),s=s+Math.imul(mt,Ot)|0,l=Math.imul(mt,Ut);var Sn=(w+c|0)+((s&8191)<<13)|0;return w=(l+(s>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,y[0]=sn,y[1]=fn,y[2]=un,y[3]=an,y[4]=hn,y[5]=cn,y[6]=ln,y[7]=dn,y[8]=gn,y[9]=pn,y[10]=yn,y[11]=mn,y[12]=wn,y[13]=vn,y[14]=bn,y[15]=xn,y[16]=Mn,y[17]=_n,y[18]=Sn,w!==0&&(y[19]=w,u.length++),u};Math.imul||(O=k);function nt(p,n,f){f.negative=n.negative^p.negative,f.length=p.length+n.length;for(var u=0,h=0,d=0;d<f.length-1;d++){var y=h;h=0;for(var w=u&67108863,c=Math.min(d,n.length-1),s=Math.max(0,d-p.length+1);s<=c;s++){var l=d-s,B=p.words[l]|0,A=n.words[s]|0,T=B*A,R=T&67108863;y=y+(T/67108864|0)|0,R=R+w|0,w=R&67108863,y=y+(R>>>26)|0,h+=y>>>26,y&=67108863}f.words[d]=w,u=y,y=h}return u!==0?f.words[d]=u:f.length--,f.strip()}function J(p,n,f){var u=new $t;return u.mulp(p,n,f)}i.prototype.mulTo=function(n,f){var u,h=this.length+n.length;return this.length===10&&n.length===10?u=O(this,n,f):h<63?u=k(this,n,f):h<1024?u=nt(this,n,f):u=J(this,n,f),u};function $t(p,n){this.x=p,this.y=n}$t.prototype.makeRBT=function(n){for(var f=new Array(n),u=i.prototype._countBits(n)-1,h=0;h<n;h++)f[h]=this.revBin(h,u,n);return f},$t.prototype.revBin=function(n,f,u){if(n===0||n===u-1)return n;for(var h=0,d=0;d<f;d++)h|=(n&1)<<f-d-1,n>>=1;return h},$t.prototype.permute=function(n,f,u,h,d,y){for(var w=0;w<y;w++)h[w]=f[n[w]],d[w]=u[n[w]]},$t.prototype.transform=function(n,f,u,h,d,y){this.permute(y,n,f,u,h,d);for(var w=1;w<d;w<<=1)for(var c=w<<1,s=Math.cos(2*Math.PI/c),l=Math.sin(2*Math.PI/c),B=0;B<d;B+=c)for(var A=s,T=l,R=0;R<w;R++){var V=u[B+R],W=h[B+R],_e=u[B+R+w],F=h[B+R+w],Y=A*_e-T*F;F=A*F+T*_e,_e=Y,u[B+R]=V+_e,h[B+R]=W+F,u[B+R+w]=V-_e,h[B+R+w]=W-F,R!==c&&(Y=s*A-l*T,T=s*T+l*A,A=Y)}},$t.prototype.guessLen13b=function(n,f){var u=Math.max(f,n)|1,h=u&1,d=0;for(u=u/2|0;u;u=u>>>1)d++;return 1<<d+1+h},$t.prototype.conjugate=function(n,f,u){if(!(u<=1))for(var h=0;h<u/2;h++){var d=n[h];n[h]=n[u-h-1],n[u-h-1]=d,d=f[h],f[h]=-f[u-h-1],f[u-h-1]=-d}},$t.prototype.normalize13b=function(n,f){for(var u=0,h=0;h<f/2;h++){var d=Math.round(n[2*h+1]/f)*8192+Math.round(n[2*h]/f)+u;n[h]=d&67108863,d<67108864?u=0:u=d/67108864|0}return n},$t.prototype.convert13b=function(n,f,u,h){for(var d=0,y=0;y<f;y++)d=d+(n[y]|0),u[2*y]=d&8191,d=d>>>13,u[2*y+1]=d&8191,d=d>>>13;for(y=2*f;y<h;++y)u[y]=0;r(d===0),r((d&-8192)===0)},$t.prototype.stub=function(n){for(var f=new Array(n),u=0;u<n;u++)f[u]=0;return f},$t.prototype.mulp=function(n,f,u){var h=2*this.guessLen13b(n.length,f.length),d=this.makeRBT(h),y=this.stub(h),w=new Array(h),c=new Array(h),s=new Array(h),l=new Array(h),B=new Array(h),A=new Array(h),T=u.words;T.length=h,this.convert13b(n.words,n.length,w,h),this.convert13b(f.words,f.length,l,h),this.transform(w,y,c,s,h,d),this.transform(l,y,B,A,h,d);for(var R=0;R<h;R++){var V=c[R]*B[R]-s[R]*A[R];s[R]=c[R]*A[R]+s[R]*B[R],c[R]=V}return this.conjugate(c,s,h),this.transform(c,s,T,y,h,d),this.conjugate(T,y,h),this.normalize13b(T,h),u.negative=n.negative^f.negative,u.length=n.length+f.length,u.strip()},i.prototype.mul=function(n){var f=new i(null);return f.words=new Array(this.length+n.length),this.mulTo(n,f)},i.prototype.mulf=function(n){var f=new i(null);return f.words=new Array(this.length+n.length),J(this,n,f)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){r(typeof n=="number"),r(n<67108864);for(var f=0,u=0;u<this.length;u++){var h=(this.words[u]|0)*n,d=(h&67108863)+(f&67108863);f>>=26,f+=h/67108864|0,f+=d>>>26,this.words[u]=d&67108863}return f!==0&&(this.words[u]=f,this.length++),this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var f=P(n);if(f.length===0)return new i(1);for(var u=this,h=0;h<f.length&&f[h]===0;h++,u=u.sqr());if(++h<f.length)for(var d=u.sqr();h<f.length;h++,d=d.sqr())f[h]!==0&&(u=u.mul(d));return u},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var f=n%26,u=(n-f)/26,h=67108863>>>26-f<<26-f,d;if(f!==0){var y=0;for(d=0;d<this.length;d++){var w=this.words[d]&h,c=(this.words[d]|0)-w<<f;this.words[d]=c|y,y=w>>>26-f}y&&(this.words[d]=y,this.length++)}if(u!==0){for(d=this.length-1;d>=0;d--)this.words[d+u]=this.words[d];for(d=0;d<u;d++)this.words[d]=0;this.length+=u}return this.strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,f,u){r(typeof n=="number"&&n>=0);var h;f?h=(f-f%26)/26:h=0;var d=n%26,y=Math.min((n-d)/26,this.length),w=67108863^67108863>>>d<<d,c=u;if(h-=y,h=Math.max(0,h),c){for(var s=0;s<y;s++)c.words[s]=this.words[s];c.length=y}if(y!==0)if(this.length>y)for(this.length-=y,s=0;s<this.length;s++)this.words[s]=this.words[s+y];else this.words[0]=0,this.length=1;var l=0;for(s=this.length-1;s>=0&&(l!==0||s>=h);s--){var B=this.words[s]|0;this.words[s]=l<<26-d|B>>>d,l=B&w}return c&&l!==0&&(c.words[c.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(n,f,u){return r(this.negative===0),this.iushrn(n,f,u)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var f=n%26,u=(n-f)/26,h=1<<f;if(this.length<=u)return!1;var d=this.words[u];return!!(d&h)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var f=n%26,u=(n-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(f!==0&&u++,this.length=Math.min(u,this.length),f!==0){var h=67108863^67108863>>>f<<f;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,f,u){var h=n.length+u,d;this._expand(h);var y,w=0;for(d=0;d<n.length;d++){y=(this.words[d+u]|0)+w;var c=(n.words[d]|0)*f;y-=c&67108863,w=(y>>26)-(c/67108864|0),this.words[d+u]=y&67108863}for(;d<this.length-u;d++)y=(this.words[d+u]|0)+w,w=y>>26,this.words[d+u]=y&67108863;if(w===0)return this.strip();for(r(w===-1),w=0,d=0;d<this.length;d++)y=-(this.words[d]|0)+w,w=y>>26,this.words[d]=y&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(n,f){var u=this.length-n.length,h=this.clone(),d=n,y=d.words[d.length-1]|0,w=this._countBits(y);u=26-w,u!==0&&(d=d.ushln(u),h.iushln(u),y=d.words[d.length-1]|0);var c=h.length-d.length,s;if(f!=="mod"){s=new i(null),s.length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var B=h.clone()._ishlnsubmul(d,1,c);B.negative===0&&(h=B,s&&(s.words[c]=1));for(var A=c-1;A>=0;A--){var T=(h.words[d.length+A]|0)*67108864+(h.words[d.length+A-1]|0);for(T=Math.min(T/y|0,67108863),h._ishlnsubmul(d,T,A);h.negative!==0;)T--,h.negative=0,h._ishlnsubmul(d,1,A),h.isZero()||(h.negative^=1);s&&(s.words[A]=T)}return s&&s.strip(),h.strip(),f!=="div"&&u!==0&&h.iushrn(u),{div:s||null,mod:h}},i.prototype.divmod=function(n,f,u){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,d,y;return this.negative!==0&&n.negative===0?(y=this.neg().divmod(n,f),f!=="mod"&&(h=y.div.neg()),f!=="div"&&(d=y.mod.neg(),u&&d.negative!==0&&d.iadd(n)),{div:h,mod:d}):this.negative===0&&n.negative!==0?(y=this.divmod(n.neg(),f),f!=="mod"&&(h=y.div.neg()),{div:h,mod:y.mod}):(this.negative&n.negative)!==0?(y=this.neg().divmod(n.neg(),f),f!=="div"&&(d=y.mod.neg(),u&&d.negative!==0&&d.isub(n)),{div:y.div,mod:d}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?f==="div"?{div:this.divn(n.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modn(n.words[0]))}:this._wordDiv(n,f)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var f=this.divmod(n);if(f.mod.isZero())return f.div;var u=f.div.negative!==0?f.mod.isub(n):f.mod,h=n.ushrn(1),d=n.andln(1),y=u.cmp(h);return y<0||d===1&&y===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(n){r(n<=67108863);for(var f=(1<<26)%n,u=0,h=this.length-1;h>=0;h--)u=(f*u+(this.words[h]|0))%n;return u},i.prototype.idivn=function(n){r(n<=67108863);for(var f=0,u=this.length-1;u>=0;u--){var h=(this.words[u]|0)+f*67108864;this.words[u]=h/n|0,f=h%n}return this.strip()},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var f=this,u=n.clone();f.negative!==0?f=f.umod(n):f=f.clone();for(var h=new i(1),d=new i(0),y=new i(0),w=new i(1),c=0;f.isEven()&&u.isEven();)f.iushrn(1),u.iushrn(1),++c;for(var s=u.clone(),l=f.clone();!f.isZero();){for(var B=0,A=1;(f.words[0]&A)===0&&B<26;++B,A<<=1);if(B>0)for(f.iushrn(B);B-- >0;)(h.isOdd()||d.isOdd())&&(h.iadd(s),d.isub(l)),h.iushrn(1),d.iushrn(1);for(var T=0,R=1;(u.words[0]&R)===0&&T<26;++T,R<<=1);if(T>0)for(u.iushrn(T);T-- >0;)(y.isOdd()||w.isOdd())&&(y.iadd(s),w.isub(l)),y.iushrn(1),w.iushrn(1);f.cmp(u)>=0?(f.isub(u),h.isub(y),d.isub(w)):(u.isub(f),y.isub(h),w.isub(d))}return{a:y,b:w,gcd:u.iushln(c)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var f=this,u=n.clone();f.negative!==0?f=f.umod(n):f=f.clone();for(var h=new i(1),d=new i(0),y=u.clone();f.cmpn(1)>0&&u.cmpn(1)>0;){for(var w=0,c=1;(f.words[0]&c)===0&&w<26;++w,c<<=1);if(w>0)for(f.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(y),h.iushrn(1);for(var s=0,l=1;(u.words[0]&l)===0&&s<26;++s,l<<=1);if(s>0)for(u.iushrn(s);s-- >0;)d.isOdd()&&d.iadd(y),d.iushrn(1);f.cmp(u)>=0?(f.isub(u),h.isub(d)):(u.isub(f),d.isub(h))}var B;return f.cmpn(1)===0?B=h:B=d,B.cmpn(0)<0&&B.iadd(n),B},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var f=this.clone(),u=n.clone();f.negative=0,u.negative=0;for(var h=0;f.isEven()&&u.isEven();h++)f.iushrn(1),u.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;u.isEven();)u.iushrn(1);var d=f.cmp(u);if(d<0){var y=f;f=u,u=y}else if(d===0||u.cmpn(1)===0)break;f.isub(u)}while(!0);return u.iushln(h)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var f=n%26,u=(n-f)/26,h=1<<f;if(this.length<=u)return this._expand(u+1),this.words[u]|=h,this;for(var d=h,y=u;d!==0&&y<this.length;y++){var w=this.words[y]|0;w+=d,d=w>>>26,w&=67108863,this.words[y]=w}return d!==0&&(this.words[y]=d,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var f=n<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var u;if(this.length>1)u=1;else{f&&(n=-n),r(n<=67108863,"Number is too big");var h=this.words[0]|0;u=h===n?0:h<n?-1:1}return this.negative!==0?-u|0:u},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var f=this.ucmp(n);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var f=0,u=this.length-1;u>=0;u--){var h=this.words[u]|0,d=n.words[u]|0;if(h!==d){h<d?f=-1:h>d&&(f=1);break}}return f},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new et(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var Me={k256:null,p224:null,p192:null,p25519:null};function Kt(p,n){this.name=p,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Kt.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},Kt.prototype.ireduce=function(n){var f=n,u;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),u=f.bitLength();while(u>this.n);var h=u<this.n?-1:f.ucmp(this.p);return h===0?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):f.strip(),f},Kt.prototype.split=function(n,f){n.iushrn(this.n,0,f)},Kt.prototype.imulK=function(n){return n.imul(this.k)};function ve(){Kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(ve,Kt),ve.prototype.split=function(n,f){for(var u=4194303,h=Math.min(n.length,9),d=0;d<h;d++)f.words[d]=n.words[d];if(f.length=h,n.length<=9){n.words[0]=0,n.length=1;return}var y=n.words[9];for(f.words[f.length++]=y&u,d=10;d<n.length;d++){var w=n.words[d]|0;n.words[d-10]=(w&u)<<4|y>>>22,y=w}y>>>=22,n.words[d-10]=y,y===0&&n.length>10?n.length-=10:n.length-=9},ve.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var f=0,u=0;u<n.length;u++){var h=n.words[u]|0;f+=h*977,n.words[u]=f&67108863,f=h*64+(f/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function $e(){Kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o($e,Kt);function _r(){Kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(_r,Kt);function on(){Kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(on,Kt),on.prototype.imulK=function(n){for(var f=0,u=0;u<n.length;u++){var h=(n.words[u]|0)*19+f,d=h&67108863;h>>>=26,n.words[u]=d,f=h}return f!==0&&(n.words[n.length++]=f),n},i._prime=function(n){if(Me[n])return Me[n];var f;if(n==="k256")f=new ve;else if(n==="p224")f=new $e;else if(n==="p192")f=new _r;else if(n==="p25519")f=new on;else throw new Error("Unknown prime "+n);return Me[n]=f,f};function et(p){if(typeof p=="string"){var n=i._prime(p);this.m=n.p,this.prime=n}else r(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}et.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},et.prototype._verify2=function(n,f){r((n.negative|f.negative)===0,"red works only with positives"),r(n.red&&n.red===f.red,"red works only with red numbers")},et.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},et.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},et.prototype.add=function(n,f){this._verify2(n,f);var u=n.add(f);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},et.prototype.iadd=function(n,f){this._verify2(n,f);var u=n.iadd(f);return u.cmp(this.m)>=0&&u.isub(this.m),u},et.prototype.sub=function(n,f){this._verify2(n,f);var u=n.sub(f);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},et.prototype.isub=function(n,f){this._verify2(n,f);var u=n.isub(f);return u.cmpn(0)<0&&u.iadd(this.m),u},et.prototype.shl=function(n,f){return this._verify1(n),this.imod(n.ushln(f))},et.prototype.imul=function(n,f){return this._verify2(n,f),this.imod(n.imul(f))},et.prototype.mul=function(n,f){return this._verify2(n,f),this.imod(n.mul(f))},et.prototype.isqr=function(n){return this.imul(n,n.clone())},et.prototype.sqr=function(n){return this.mul(n,n)},et.prototype.sqrt=function(n){if(n.isZero())return n.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var u=this.m.add(new i(1)).iushrn(2);return this.pow(n,u)}for(var h=this.m.subn(1),d=0;!h.isZero()&&h.andln(1)===0;)d++,h.iushrn(1);r(!h.isZero());var y=new i(1).toRed(this),w=y.redNeg(),c=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,c).cmp(w)!==0;)s.redIAdd(w);for(var l=this.pow(s,h),B=this.pow(n,h.addn(1).iushrn(1)),A=this.pow(n,h),T=d;A.cmp(y)!==0;){for(var R=A,V=0;R.cmp(y)!==0;V++)R=R.redSqr();r(V<T);var W=this.pow(l,new i(1).iushln(T-V-1));B=B.redMul(W),l=W.redSqr(),A=A.redMul(l),T=V}return B},et.prototype.invm=function(n){var f=n._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},et.prototype.pow=function(n,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return n.clone();var u=4,h=new Array(1<<u);h[0]=new i(1).toRed(this),h[1]=n;for(var d=2;d<h.length;d++)h[d]=this.mul(h[d-1],n);var y=h[0],w=0,c=0,s=f.bitLength()%26;for(s===0&&(s=26),d=f.length-1;d>=0;d--){for(var l=f.words[d],B=s-1;B>=0;B--){var A=l>>B&1;if(y!==h[0]&&(y=this.sqr(y)),A===0&&w===0){c=0;continue}w<<=1,w|=A,c++,!(c!==u&&(d!==0||B!==0))&&(y=this.mul(y,h[w]),c=0,w=0)}s=26}return y},et.prototype.convertTo=function(n){var f=n.umod(this.m);return f===n?f.clone():f},et.prototype.convertFrom=function(n){var f=n.clone();return f.red=null,f},i.mont=function(n){return new Re(n)};function Re(p){et.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(Re,et),Re.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Re.prototype.convertFrom=function(n){var f=this.imod(n.mul(this.rinv));return f.red=null,f},Re.prototype.imul=function(n,f){if(n.isZero()||f.isZero())return n.words[0]=0,n.length=1,n;var u=n.imul(f),h=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=u.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},Re.prototype.mul=function(n,f){if(n.isZero()||f.isZero())return new i(0)._forceRed(this);var u=n.mul(f),h=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=u.isub(h).iushrn(this.shift),y=d;return d.cmp(this.m)>=0?y=d.isub(this.m):d.cmpn(0)<0&&(y=d.iadd(this.m)),y._forceRed(this)},Re.prototype.invm=function(n){var f=this.imod(n._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof ti>"u"||ti,No)});var Vo=$(pe=>{_();S();var ta=pe&&pe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pe,"__esModule",{value:!0});pe.rawEncode=pe.parseNumber=pe.solidityPack=void 0;var Le=xr(),ea=Bn(),qe=ta(qo()),$o=er();function ra(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");let r=[];for(let o=0;o<t.length;o++){let i=zo(t[o]),a=e[o];r.push(jo(i,a,null))}return b.Buffer.concat(r)}pe.solidityPack=ra;function tn(t){return t.lastIndexOf("]")===t.length-1}function en(t){let e=t.match(/(.*)\[(.*?)\]$/u);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function nr(t){return parseInt(/^\D+(\d+)$/u.exec(t)[1],10)}function He(t){let e=typeof t;if(e==="string")return(0,Le.isHexPrefixed)(t)?new qe.default((0,ea.stripHexPrefix)(t),16):new qe.default(t,10);if(e==="number")return new qe.default(t);if(t.toArray)return t;throw new Error("Argument is not a number")}pe.parseNumber=He;function jo(t,e,r){let o,i;if(tn(t)){let a=t.replace(/\[.*?\]/u,"");if(!tn(a)){let m=en(t);if(m!=="dynamic"&&m!==0&&e.length>m)throw new Error(`Elements exceed array size: ${m}`)}let g=e.map(function(m){return jo(a,m,256)});return b.Buffer.concat(g)}else{if(t==="bytes")return e;if(t==="string")return b.Buffer.from(e,"utf8");if(t==="bool"){r=r||8;let a=Array(r/4).join("0");return b.Buffer.from(e?`${a}1`:`${a}0`,"hex")}else if(t==="address"){let a=20;return r&&(a=r/8),(0,Le.setLengthLeft)((0,Le.toBuffer)(e),a)}else if(t.startsWith("bytes")){if(o=nr(t),o<1||o>32)throw new Error(`Invalid bytes<N> width: ${o}`);return typeof e=="number"&&(e=(0,$o.normalize)(e)),(0,Le.setLengthRight)((0,Le.toBuffer)(e),o)}else if(t.startsWith("uint")){if(o=nr(t),o%8||o<8||o>256)throw new Error(`Invalid uint<N> width: ${o}`);if(i=He(e),i.bitLength()>o)throw new Error(`Supplied uint exceeds width: ${o} vs ${i.bitLength()}`);return r=r||o,i.toArrayLike(b.Buffer,"be",r/8)}else if(t.startsWith("int")){if(o=nr(t),o%8||o<8||o>256)throw new Error(`Invalid int<N> width: ${o}`);if(i=He(e),i.bitLength()>o)throw new Error(`Supplied int exceeds width: ${o} vs ${i.bitLength()}`);return r=r||o,i.toTwos(o).toArrayLike(b.Buffer,"be",r/8)}}throw new Error(`Unsupported or invalid type: ${t}`)}function zo(t){return t.startsWith("int[")?`int256${t.slice(3)}`:t==="int"?"int256":t.startsWith("uint[")?`uint256${t.slice(4)}`:t==="uint"?"uint256":t.startsWith("fixed[")?`fixed128x128${t.slice(5)}`:t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?`ufixed128x128${t.slice(6)}`:t==="ufixed"?"ufixed128x128":t}function na(t,e){let r=[],o=[],i=0;t.forEach(function(a){if(tn(a)){let g=en(a);g!=="dynamic"?i+=32*g:i+=32}else i+=32});for(let a=0;a<t.length;a++){let g=zo(t[a]),m=e[a],v=ge(g,m);ia(g)?(r.push(ge("uint256",i)),o.push(v),i+=v.length):r.push(v)}return b.Buffer.concat(r.concat(o))}pe.rawEncode=na;function ge(t,e){let r,o,i,a;if(t==="address")return ge("uint160",He(e));if(t==="bool")return ge("uint8",e?1:0);if(t==="string")return ge("bytes",b.Buffer.from(e,"utf8"));if(tn(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=en(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error(`Elements exceed array size: ${r}`);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.push(ge(t,e[a]));if(r==="dynamic"){let g=ge("uint256",e.length);i.unshift(g)}return b.Buffer.concat(i)}else{if(t==="bytes")return e=b.Buffer.from(e),i=b.Buffer.concat([ge("uint256",e.length),e]),e.length%32!==0&&(i=b.Buffer.concat([i,(0,Le.zeros)(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=nr(t),r<1||r>32)throw new Error(`Invalid bytes<N> width: ${r}`);return typeof e=="number"&&(e=(0,$o.normalize)(e)),(0,Le.setLengthRight)((0,Le.toBuffer)(e),32)}else if(t.startsWith("uint")){if(r=nr(t),r%8||r<8||r>256)throw new Error(`Invalid uint<N> width: ${r}`);if(o=He(e),o.bitLength()>r)throw new Error(`Supplied uint exceeds width: ${r} vs ${o.bitLength()}`);if(o<0)throw new Error("Supplied uint is negative");return o.toArrayLike(b.Buffer,"be",32)}else if(t.startsWith("int")){if(r=nr(t),r%8||r<8||r>256)throw new Error(`Invalid int<N> width: ${r}`);if(o=He(e),o.bitLength()>r)throw new Error(`Supplied int exceeds width: ${r} vs ${o.bitLength()}`);return o.toTwos(256).toArrayLike(b.Buffer,"be",32)}else if(t.startsWith("ufixed")){if(r=Ko(t),o=He(e),o<0)throw new Error("Supplied ufixed is negative");return ge("uint256",o.mul(new qe.default(2).pow(new qe.default(r[1]))))}else if(t.startsWith("fixed"))return r=Ko(t),ge("int256",He(e).mul(new qe.default(2).pow(new qe.default(r[1]))))}throw new Error(`Unsupported or invalid type: ${t}`)}function ia(t){return t==="string"||t==="bytes"||en(t)==="dynamic"}function Ko(t){let e=/^\D+(\d+)x(\d+)$/u.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}});var Go=$(Nt=>{_();S();Object.defineProperty(Nt,"__esModule",{value:!0});Nt.recoverTypedSignature=Nt.signTypedData=Nt.typedSignatureHash=Nt.TypedDataUtils=Nt.TYPED_MESSAGE_SCHEMA=Nt.SignTypedDataVersion=void 0;var oa=Bn(),Gt=xr(),ye=Dr(),Mr=Vo(),me=er(),Zt;(function(t){t.V1="V1",t.V3="V3",t.V4="V4"})(Zt=Nt.SignTypedDataVersion||(Nt.SignTypedDataVersion={}));Nt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function ir(t,e){if(Object.keys(Zt).includes(t)){if(e&&!e.includes(t))throw new Error(`SignTypedDataVersion not allowed: '${t}'. Allowed versions are: ${e.join(", ")}`)}else throw new Error(`Invalid version: '${t}'`)}function Do(t,e,r,o,i){if(ir(i,[Zt.V3,Zt.V4]),t[r]!==void 0)return["bytes32",i===Zt.V4&&o==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,Gt.arrToBufArr)((0,ye.keccak256)(ri(r,o,t,i)))];if(o===void 0)throw new Error(`missing value for field ${e} of type ${r}`);if(r==="bytes")return typeof o=="number"?o=(0,me.numberToBuffer)(o):(0,oa.isHexString)(o)?o=(0,me.numberToBuffer)(parseInt(o,16)):o=b.Buffer.from(o,"utf8"),["bytes32",(0,Gt.arrToBufArr)((0,ye.keccak256)(o))];if(r==="string")return typeof o=="number"?o=(0,me.numberToBuffer)(o):o=b.Buffer.from(o??"","utf8"),["bytes32",(0,Gt.arrToBufArr)((0,ye.keccak256)(o))];if(r.lastIndexOf("]")===r.length-1){if(i===Zt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),g=o.map(m=>Do(t,e,a,m,i));return["bytes32",(0,Gt.arrToBufArr)((0,ye.keccak256)((0,Mr.rawEncode)(g.map(([m])=>m),g.map(([,m])=>m))))]}return[r,o]}function ri(t,e,r,o){ir(o,[Zt.V3,Zt.V4]);let i=["bytes32"],a=[Wo(t,r)];for(let g of r[t]){if(o===Zt.V3&&e[g.name]===void 0)continue;let[m,v]=Do(r,g.name,g.type,e[g.name],o);i.push(m),a.push(v)}return(0,Mr.rawEncode)(i,a)}function Zo(t,e){let r="",o=ni(t,e);o.delete(t);let i=[t,...Array.from(o).sort()];for(let a of i){if(!e[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${e[a].map(({name:m,type:v})=>`${v} ${m}`).join(",")})`}return r}function ni(t,e,r=new Set){if([t]=t.match(/^\w*/u),r.has(t)||e[t]===void 0)return r;r.add(t);for(let o of e[t])ni(o.type,e,r);return r}function ei(t,e,r,o){return ir(o,[Zt.V3,Zt.V4]),(0,Gt.arrToBufArr)((0,ye.keccak256)(ri(t,e,r,o)))}function Wo(t,e){let r=b.Buffer.from(Zo(t,e),"utf-8");return(0,Gt.arrToBufArr)((0,ye.keccak256)(r))}function Fo(t){let e={};for(let r in Nt.TYPED_MESSAGE_SCHEMA.properties)t[r]&&(e[r]=t[r]);return"types"in e&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e}function sa(t,e){ir(e,[Zt.V3,Zt.V4]);let r=Fo(t),o=[b.Buffer.from("1901","hex")];return o.push(ei("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&o.push(ei(r.primaryType,r.message,r.types,e)),(0,Gt.arrToBufArr)((0,ye.keccak256)(b.Buffer.concat(o)))}Nt.TypedDataUtils={encodeData:ri,encodeType:Zo,findTypeDependencies:ni,hashStruct:ei,hashType:Wo,sanitizeData:Fo,eip712Hash:sa};function fa(t){let e=ii(t);return(0,Gt.bufferToHex)(e)}Nt.typedSignatureHash=fa;function ii(t){let e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!("length"in t)||!t.length)throw e;let r=t.map(function(a){return a.type!=="bytes"?a.value:(0,me.legacyToBuffer)(a.value)}),o=t.map(function(a){return a.type}),i=t.map(function(a){if(!a.name)throw e;return`${a.type} ${a.name}`});return(0,Gt.arrToBufArr)((0,ye.keccak256)((0,Mr.solidityPack)(["bytes32","bytes32"],[(0,ye.keccak256)((0,Mr.solidityPack)(new Array(t.length).fill("string"),i)),(0,ye.keccak256)((0,Mr.solidityPack)(o,r))])))}function ua({privateKey:t,data:e,version:r}){if(ir(r),(0,me.isNullish)(e))throw new Error("Missing data parameter");if((0,me.isNullish)(t))throw new Error("Missing private key parameter");let o=r===Zt.V1?ii(e):Nt.TypedDataUtils.eip712Hash(e,r),i=(0,Gt.ecsign)(o,t);return(0,me.concatSig)((0,Gt.toBuffer)(i.v),i.r,i.s)}Nt.signTypedData=ua;function aa({data:t,signature:e,version:r}){if(ir(r),(0,me.isNullish)(t))throw new Error("Missing data parameter");if((0,me.isNullish)(e))throw new Error("Missing signature parameter");let o=r===Zt.V1?ii(t):Nt.TypedDataUtils.eip712Hash(t,r),i=(0,me.recoverPublicKey)(o,e),a=(0,Gt.publicToAddress)(i);return(0,Gt.bufferToHex)(a)}Nt.recoverTypedSignature=aa});var ts=$(qt=>{_();S();var ha=qt&&qt.__createBinding||(Object.create?function(t,e,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,i)}:function(t,e,r,o){o===void 0&&(o=r),t[o]=e[r]}),ca=qt&&qt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xo=qt&&qt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ha(e,t,r);return ca(e,t),e};Object.defineProperty(qt,"__esModule",{value:!0});qt.getEncryptionPublicKey=qt.decryptSafely=qt.decrypt=qt.encryptSafely=qt.encrypt=void 0;var Ke=Xo(os()),fe=Xo(ss()),we=er();function Yo({publicKey:t,data:e,version:r}){if((0,we.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,we.isNullish)(e))throw new Error("Missing data parameter");if((0,we.isNullish)(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof e!="string")throw new Error("Message data must be given as a string");let o=Ke.box.keyPair(),i;try{i=fe.decodeBase64(t)}catch{throw new Error("Bad public key")}let a=fe.decodeUTF8(e),g=Ke.randomBytes(Ke.box.nonceLength),m=Ke.box(a,g,i,o.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:fe.encodeBase64(g),ephemPublicKey:fe.encodeBase64(o.publicKey),ciphertext:fe.encodeBase64(m)}}default:throw new Error("Encryption type/version not supported")}}qt.encrypt=Yo;function la({publicKey:t,data:e,version:r}){if((0,we.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,we.isNullish)(e))throw new Error("Missing data parameter");if((0,we.isNullish)(r))throw new Error("Missing version parameter");let o=2**11,i=16;if(typeof e=="object"&&"toJSON"in e)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:e,padding:""},m=b.Buffer.byteLength(JSON.stringify(a),"utf-8")%o,v=0;m>0&&(v=o-m-i),a.padding="0".repeat(v);let x=JSON.stringify(a);return Yo({publicKey:t,data:x,version:r})}qt.encryptSafely=la;function Qo({encryptedData:t,privateKey:e}){if((0,we.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,we.isNullish)(e))throw new Error("Missing privateKey parameter");switch(t.version){case"x25519-xsalsa20-poly1305":{let r=Jo(e),o=Ke.box.keyPair.fromSecretKey(r).secretKey,i=fe.decodeBase64(t.nonce),a=fe.decodeBase64(t.ciphertext),g=fe.decodeBase64(t.ephemPublicKey),m=Ke.box.open(a,i,g,o),v;try{v=fe.encodeUTF8(m)}catch{throw new Error("Decryption failed.")}if(v)return v;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}qt.decrypt=Qo;function da({encryptedData:t,privateKey:e}){if((0,we.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,we.isNullish)(e))throw new Error("Missing privateKey parameter");return JSON.parse(Qo({encryptedData:t,privateKey:e})).data}qt.decryptSafely=da;function ga(t){let e=Jo(t),r=Ke.box.keyPair.fromSecretKey(e).publicKey;return fe.encodeBase64(r)}qt.getEncryptionPublicKey=ga;function Jo(t){let e=b.Buffer.from(t,"hex").toString("base64");return fe.decodeBase64(e)}});var rs=$(Xt=>{_();S();var pa=Xt&&Xt.__createBinding||(Object.create?function(t,e,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,i)}:function(t,e,r,o){o===void 0&&(o=r),t[o]=e[r]}),oi=Xt&&Xt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pa(e,t,r)};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.normalize=Xt.concatSig=void 0;oi(Uo(),Xt);oi(Go(),Xt);oi(ts(),Xt);var es=er();Object.defineProperty(Xt,"concatSig",{enumerable:!0,get:function(){return es.concatSig}});Object.defineProperty(Xt,"normalize",{enumerable:!0,get:function(){return es.normalize}})});var ba=$(ee=>{_();S();var ya=ee&&ee.__createBinding||(Object.create?function(t,e,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,o,i)}:function(t,e,r,o){o===void 0&&(o=r),t[o]=e[r]}),ma=ee&&ee.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wa=ee&&ee.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ya(e,t,r);return ma(e,t),e};Object.defineProperty(ee,"__esModule",{value:!0});ee.transformTypedData=void 0;var rn=wa(rs());function nn(t){switch(Object.prototype.toString.call(t)){case"[object Object]":{let e=Object.keys(t).map(r=>[r,nn(t[r])]);return Object.fromEntries(e)}case"[object Array]":return t.map(e=>nn(e));case"[object BigInt]":return t.toString();default:return t}}var va=(t,e)=>{if(!e)throw new Error("Trezor: Only version 4 of typed data signing is supported");let r=rn.SignTypedDataVersion.V4,{types:o,primaryType:i,domain:a,message:g}=rn.TypedDataUtils.sanitizeData(t),m=rn.TypedDataUtils.hashStruct("EIP712Domain",nn(a),o,r).toString("hex"),v=null;return i!=="EIP712Domain"&&(v=rn.TypedDataUtils.hashStruct(i,nn(g),o,r).toString("hex")),Object.assign({domain_separator_hash:m,message_hash:v},t)};ee.transformTypedData=va;ee.default=ee.transformTypedData});export{ba as a};
//# sourceMappingURL=chunk-6TFEPOEK.js.map
