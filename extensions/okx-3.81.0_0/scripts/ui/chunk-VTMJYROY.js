import{a as K}from"./chunk-ARK47WR5.js";import{n as v}from"./chunk-HIVYZXF3.js";import{D as B,E as G,a as Y,f as F}from"./chunk-HKU7TMFJ.js";import{i as O,q as V}from"./chunk-FGRS6VIX.js";import{Ba as A}from"./chunk-INIQCRIO.js";import{a as P}from"./chunk-ZFBXO46L.js";import{a as u}from"./chunk-6Z5HVUBK.js";import{c as m,d as s,k as q}from"./chunk-ZBDGRK4Q.js";import{B as N,G as R,I as y,j as r,va as I,w as b,x as w}from"./chunk-XFTQD4B2.js";import{o as i,q as a}from"./chunk-Y5OH3DDZ.js";i();a();I();i();a();var X={[1]:{priorityMode:"auto",manualType:0},[2]:{priorityMode:"manual",manualType:0},[3]:{priorityMode:"manual",manualType:1}},se={GENERAL:"general",EXPLAIN:"explain",QUICK_BUTTON:"quick_button",TRADE:"trade",OTHER:"others"},C={ROUTE_AUTO:"route_auto",ROUTE_MANUAL:"route_manual",SLIPPAGE_DYNAMIC:"slippage_dynamic",SLIPPAGE_FIXED:"slippage_fixed",SLIPPAGE_DYNAMIC_MAX:"slippage_dynamic_max",PRIORITY_MARKET:"priority_gas_market",PRIORITY_FAST:"priority_gas_fast",PRIORITY_TURBO:"priority_gas_turbo",PRIORITY_CUSTOM:"priority_gas_custom",RESET:"reset",CONFIRM:"confirm",BACK:"back"},E={MARKET:"market",FAST:"fast",TURBO:"turbo",CUSTOM:"custom"},ie={[E.MARKET]:C.PRIORITY_MARKET,[E.FAST]:C.PRIORITY_FAST,[E.TURBO]:C.PRIORITY_TURBO,[E.CUSTOM]:C.PRIORITY_CUSTOM},Q={ON:"1",OFF:"0"},ae={MARKET:"1",FAST:"2",TURBO:"3",CUSTOM:"4"};i();a();var $=({formatPriorityFee:n,nativeTokenPrice:e,isSolana:t,networkFeeDecimals:o,estimateGasFee:p,supportCustomGasFee:d,supportEip1559:c})=>{if(t){let{baseFee:l,value:h}=n,T=u.add(l||0,h);return u.mul(e,T)}if(d&&c){let{baseFee:l,value:h}=n;return u.div(u.mul(e,u.mul(u.add(l,h),p)),10**o)}return d?u.div(u.mul(e,u.mul(n.value,p)),10**o):n.price};var k=class{constructor(){this.settingPanelVisible=!1;this.priorityMode="auto";this.manualType=0;this.fetchedSetting={};this.swapConfig={};this.feeType=F.MARKET;this.setStoreFeeType=e=>{this.feeType=e};this.customFeeUsd="";this.setCustomFee=e=>{this.customFeeUsd=e};this.priorityFeeInfo={};this.fee="";this.setPriorityFee=e=>{this.fee=e};this.feeMap={};this.setFeeMap=e=>{this.feeMap=e};this.slippageSetting={};K(this)}setSettingPanelVisible(e){this.settingPanelVisible=e}setPriorityMode(e){this.priorityMode=e}setManualType(e){this.manualType=e}setFetchedSetting(e){this.fetchedSetting=e}get originAutoMode(){return X[this.routerModeType]}setSwapConfig(e){this.swapConfig=e}get routerModeType(){return r(this.swapConfig,"dexPresetResultVOList[0].buyPreset.routeConfig.routerModeType",void 0)}get computedMevPriceThreshold(){return r(this.swapConfig,"mevPriceThreshold","")}get supportAutoMode(){return r(this.swapConfig,"supportAutoMode",!1)}get supportEip1559(){return r(this.swapConfig,"supportEip1559",!1)}get memeChainType(){return r(this.swapConfig,"memeChainType","")}get supportCustomGasFee(){return r(this.swapConfig,"supportCustomGasFee",!1)}get networkFeeDecimals(){return r(this.swapConfig,"networkFeeDecimals","")}get nativeTokenPrice(){return r(this.swapConfig,"nativeTokenPrice","")}get networkFeeUnit(){return r(this.swapConfig,"networkFeeUnit","")}setPriorityFeeInfo(e){this.priorityFeeInfo=e||{}}get computedPriorityFeeAmount(){return this.priorityFeeInfo?this.feeType===F.CUSTOM?this.fee:this.feeMap[this.feeType]?.amount:""}getComputedPriorityFeeInfo(e,{feeType:t,feeValue:o,feeMap:p,customFeeUsd:d,estimateGasFee:c}){if(!e)return{totalFeeUSD:""};let l=t||this.feeType,h=o??this.fee,T=p||this.feeMap||{},g=l===F.CUSTOM?{amount:h,price:d||this.customFeeUsd||""}:T[l]||{},{supportCustomGasFee:D,supportEip1559:U}=this,_=g?.amount,S=g?.price,M=e?.baseFee?$({formatPriorityFee:{baseFee:e?.baseFee,value:_,price:S},nativeTokenPrice:this.nativeTokenPrice,isSolana:this.memeChainType==="0",networkFeeDecimals:this.networkFeeDecimals,estimateGasFee:c,supportCustomGasFee:D,supportEip1559:U}):e?.baseFeeUsd||S;return this.memeChainType==="0"?{totalFeeUSD:M,baseFeeValue:e?.baseFee,baseFeeUsd:e?.baseFeeUsd,priorityFeeForShow:_,priorityFeeUSD:S}:{totalFeeUSD:M}}getMevInfo(e){let t=!1;return this.priorityMode==="auto"?t=e===Q.ON:t=this.manualType===0,t?r(this.priorityFeeInfo,"mev[0].name",""):""}setSlippageSetting(e){this.slippageSetting=e}},Ie=new k;i();a();var Ue=({realTimeTokenPrice:n,amount:e,nonRealTimeTokenValue:t})=>!O(n)||!O(e)?t:u.mul(n,e).toString();i();a();I();I();var L=class extends v{constructor(){super();this.liquidityModelVisible=!1;this.dataStatus=A.DEFAULT;this.rawData=[];this.LiquidityCancelRef=null;this.selectedListIds=[];this.confirmIds=null;this.fromChainId="";this.searchLiquidityValue="";q(this,{liquidityModelVisible:m,dataStatus:m,rawData:m,LiquidityCancelRef:m,selectedListIds:m,confirmIds:m,fromChainId:m,searchLiquidityValue:m,computedListCheckedAll:s,computedCheckedAllDisabled:s,computedLiquidityNum:s,computedClearAll:s,computedCheckedData:s,computedSortListData:s,computedSearchStatus:s,computedSearchDataIsNull:s,computedSearchData:s,computedSearchIfAllChecked:s,computedShowData:s,computedIds:s,computedIsCustomLiquidity:s,computedMonitorLiquidSelectType:s,computedIsSelectedAllDex:s,computedDexIds:s})}get computedListCheckedAll(){return this.computedSearchStatus?this.computedSearchIfAllChecked:this.selectedListIds.length===this.rawData.length}get computedCheckedAllDisabled(){return this.computedSearchStatus&&y(this.computedSearchData)}get computedLiquidityNum(){let t="--",{dataStatus:o,rawData:p,confirmIds:d}=this;if(o===A.NULL)t="0 / 0";else if(o===A.READY){let c=r(d,this.fromChainId);t=`${!c||c&&c.length===0?p.length:c.length} / ${p.length}`}return t}get computedClearAll(){return y(this.selectedListIds)}get computedCheckedData(){return N(this.rawData,o=>({...o,isChecked:!!R(this.selectedListIds,o.id)}))}get computedSortListData(){return B(this.computedCheckedData)}get computedSearchStatus(){return!!this.searchLiquidityValue}get computedSearchDataIsNull(){return this.computedSearchStatus&&y(this.computedSearchData)}get computedSearchData(){return G(this.computedCheckedData,this.searchLiquidityValue)}get computedSearchIfAllChecked(){let t=b(this.computedSearchData,o=>o?.isChecked);return!y(this.computedSearchData)&&t}get computedShowData(){return this.searchLiquidityValue?this.computedSearchData:this.computedSortListData}get computedIds(){return r(this.confirmIds,this.fromChainId)}get computedIsCustomLiquidity(){return(this.computedIds||[]).length<this.rawData.length}get computedDexIds(){return this.computedIsCustomLiquidity?this.computedIds:void 0}get computedMonitorLiquidSelectType(){let{computedIds:t=[],rawData:o}=this;return!t.length||t.length===o?.length?"all":t.length>1?"custom_>1":t.length===1?"custom_=1":""}get computeExcludedDexIds(){return(this.computedIsCustomLiquidity?w(this.rawData,o=>!R(this.computedIds,o.id)):[]).map(o=>o.id)}get computedIsSelectedAllDex(){let{computedIds:t=[],rawData:o}=this;return!t.length||t.length===o?.length}},H=new L;i();a();I();i();a();var x="1",J="2",W="3",Ye="0",Be={[x]:"swaptrade_aggregator_tag_best_value",[J]:"swaptrade_xrouting_tag_fastest",[W]:"swaptrade_xrouting_tag_best_in_all_dimensions"};var Z=()=>{let{accountStore:n,quoteStore:e}=P(),t=r(e,"quote.bestRoute",{})||{},o=t.defiPlatformInfoList?.findIndex(p=>p.defiPlatformId===e.aggregateSelectId)+1;return{wallet_address:n.address,provider_name:t.name,best_price:t.isBest?"yes":"no",price_difference:V(t.reducePercent),price_ranking:o}},We=()=>{let{accountStore:n,quoteStore:e}=P(),{bestRoute:t}=e.quote;if(!t)return{};let{slippage:o,slippageType:p}=e.computedSlippage,{fromToken:d,fromTokenAmount:c,fromTokenPrice:l,toTokenPrice:h,receiveAmount:T,toToken:g,swapType:D,routerLabel:U}=t,_=Number(D)===0,S=_?{liquidity_source:H.computedMonitorLiquidSelectType}:{},M=_?{}:{bridge_selection:U?.includes(x)?"overall best":"custom"};return{wallet_address:n.address,from_token_name:d?.tokenName,from_token_address:d?.tokenContractAddress,from_token_amount:c,from_amount_usdt:l,to_token_address:g?.tokenContractAddress,to_token_amount:T,to_amount_usdt:h,chain:d?.chainName,from_chain:d?.chainName,to_chain:g?.chainName,swap_type:_?"swap":"cross_chain_swap",slippage:{type:p===Y.AUTO?"auto":"custom",amount:o},...S,...M,...Z()}};export{X as a,se as b,C as c,ie as d,Q as e,ae as f,$ as g,Ie as h,Ue as i,x as j,J as k,W as l,Ye as m,H as n,Z as o,We as p};
//# sourceMappingURL=chunk-VTMJYROY.js.map
