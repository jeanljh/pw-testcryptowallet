import{a as Te}from"./chunk-JM5K7QT5.js";import{a as Se}from"./chunk-NFM2PBST.js";import{a as xe}from"./chunk-QVGLEQL5.js";import{b as be,d as Ee,e as Ce}from"./chunk-LQ3PT46O.js";import{a as he}from"./chunk-SYP4PRCG.js";import"./chunk-TA357MUD.js";import{b as K}from"./chunk-QL63AAOK.js";import"./chunk-QXEXAETB.js";import{d as ve,e as ye,f as Me}from"./chunk-DOCYQV54.js";import{a as de}from"./chunk-STXPU7A6.js";import{f,g as B}from"./chunk-PFSPFZNW.js";import{a as pe}from"./chunk-ZYYACLV7.js";import{a as ge}from"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import{b as Z,f as j,p as _e,r as fe}from"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import{a as z}from"./chunk-7I4OPLNV.js";import"./chunk-FGRS6VIX.js";import{Xa as ue,Ya as ce,vd as S}from"./chunk-INIQCRIO.js";import"./chunk-ZFBXO46L.js";import{a as P}from"./chunk-6Z5HVUBK.js";import{m as le}from"./chunk-ZBDGRK4Q.js";import{a as Lt}from"./chunk-6PA65BO3.js";import{q as I}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import{J as D,j as O,va as me}from"./chunk-XFTQD4B2.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{z as N}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as q}from"./chunk-4QGZDIBD.js";import{b as H}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-5F7M5EJ4.js";import{f as k,o as y,q as M}from"./chunk-Y5OH3DDZ.js";y();M();var a=k(H()),R=k(q());me();y();M();var C=k(H()),A=k(q());y();M();var E={root:"_root_1fcv2_1",title:"_title_1fcv2_12","input-container":"_input-container_1fcv2_19",inputContainer:"_input-container_1fcv2_19",input:"_input_1fcv2_19","input-tag":"_input-tag_1fcv2_25",inputTag:"_input-tag_1fcv2_25","custom-input":"_custom-input_1fcv2_28",customInput:"_custom-input_1fcv2_28","inner-input":"_inner-input_1fcv2_28",innerInput:"_inner-input_1fcv2_28","error-input":"_error-input_1fcv2_36",errorInput:"_error-input_1fcv2_36","err-text":"_err-text_1fcv2_39",errText:"_err-text_1fcv2_39"};var wt=({className:e,amountList:o,setAmountList:n,currentMode:t,currency:i,decimals:u,placeholderRef:m})=>{let l=(0,C.useMemo)(()=>t==="sell"?S("swaptrade_meme_input_label_sell_amount"):S("swaptrade_meme_input_label_pay_amount",{token:i}),[t,i]),[_,g]=(0,C.useMemo)(()=>t==="sell"?[!0,2]:[!1,u],[t,u]),r=(s,p)=>{if(_&&P.gt(s,100))return;let d=o.map((c,h)=>h===p?s:c);n(d)},v=(0,C.useMemo)(()=>o.some(s=>P.eq(s,0)),[o]),T=()=>{m.current?.scrollIntoView({behavior:"smooth",block:"center"})};return C.default.createElement("div",{className:(0,A.default)(e,E.root)},C.default.createElement("div",{className:(0,A.default)(E.title)},l),C.default.createElement("div",{className:(0,A.default)("flex items-center",E.inputContainer)},o.map((s,p)=>C.default.createElement(I.Number,{key:p,value:s,size:I.SIZE.sm,symbol:_?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:g,enableMinus:!1,min:0,className:E.input,inputClassName:E.inputTag,innerClassName:(0,A.default)(E.customInput,E.innerInput,{[E.errorInput]:P.eq(s,0)}),onChange:d=>{r(d,p)},onFocus:T}))),v&&C.default.createElement("div",{className:(0,A.default)(E.errText)},S("swaptrade_meme_input_error_no_zero")))},Le=wt;y();M();var L=k(H()),Y=k(q());y();M();var U={root:"_root_1vg59_1",title:"_title_1vg59_12",tips:"_tips_1vg59_19",input:"_input_1vg59_26","custom-input":"_custom-input_1vg59_26",customInput:"_custom-input_1vg59_26"};var kt=({className:e,name:o,setName:n,disabled:t})=>{let i=g=>{let r=g.target.value;r.length>12&&(r=r.substring(0,12)),n(r)},[u,m]=(0,L.useState)(!1),l=(0,L.useMemo)(()=>String(o).length>=1&&u,[o,u]),{isSm:_}=ge();return L.default.createElement("div",{className:(0,Y.default)(e,U.root)},L.default.createElement("div",{className:(0,Y.default)(U.title)},S("swaptrade_meme_input_label_preset_name")),L.default.createElement(I,{value:o,size:_?I.SIZE.lg:I.SIZE.sm,error:()=>String(o).length<1?S("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,Y.default)(U.input,U.customInput),disabled:t,errorType:I.TIP_TYPE.always,onChange:i,onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),l&&L.default.createElement("div",{className:U.tips},`${o.length}/12`))},we=kt;y();M();var x=k(H()),ke=k(Lt());me();function Ie({currentMode:e,computeBuyDefaultPresetList:o,computedSellDefaultPresetList:n}){return(0,x.useMemo)(()=>e==="buy"?o:n,[e,o,n])}function De({isEdit:e,currentMode:o,savePresetFn:n,onClose:t,setConfirmText:i,setConfirmVisible:u}){let m=(0,ke.useHistory)(),l=(0,x.useCallback)(()=>{n(),t?t():m.goBack()},[m,t,n]),_=(0,x.useCallback)(()=>{if(!e){let r=o==="buy",v=r?ue:ce,T=r?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!z.get(v)){i(S(T)),u(!0),z.set(v,"1");return}}n(),t?t():m.goBack()},[e,o,t,n,i,u,m]);return[l,_]}function Pe({slippage:e,setSlippageMode:o,setSlippageUse:n,setSlippageError:t,setCustomMaxUse:i,setCustomMaxError:u,editPresetValue:m,setEditPreset:l,isEdit:_}){return(0,x.useCallback)(({mode:r,fixedData:v,dynamicData:T})=>{if(o(r),r===Z.FIXED){let{value:s,level:p,error:d}=v;n(s),t(d),l({isEdit:_,value:{...m,slippage:{...e,mode:r,value:s?B(s):"",type:p}}})}if(r===Z.DYNAMIC){let{customMax:s,error:p}=T;i(s),u(p),l({isEdit:_,value:{...m,slippage:{...e,mode:r,customMax:s?B(s):""}}})}},[m,_,u,i,t,o,n,e,l])}function Fe({setEditPreset:e,isEdit:o,editPresetValue:n,priorityFee:t,setPriorityFeeError:i,setLatestSelectFeeType:u}){return(0,x.useCallback)((l,_,g)=>{e({isEdit:o,value:{...n,priorityFee:{...t,value:_,type:l}}}),i(g),l!=="custom"&&u(l)},[n,o,t,e,u,i])}function Ae({setAmountListUsed:e,setEditPreset:o,isEdit:n,editPresetValue:t,currentMode:i}){return(0,x.useCallback)(m=>{e(m),o({isEdit:n,value:{...t,amountList:m.map(l=>i==="sell"?B(l):l)}})},[e,o,n,t,i])}function Ue({defaultPresetList:e,id:o,slippage:n,priorityFee:t,amountList:i,slippageError:u,priorityFeeError:m,customMaxError:l,name:_,mevModeStatus:g}){let r=(0,x.useMemo)(()=>e.find(p=>p.id===o)||null,[e,o]),v=(0,x.useMemo)(()=>r?D(r.slippage.value,n.value)&&D(r.slippage.type,n.type)&&D(r.priorityFee.type,t.type)&&D(r.amountList,i)&&D(r.slippage.mode,n.mode)&&D(r.slippage.customMax,n.customMax):!0,[r,n,t,i]),T=(0,x.useMemo)(()=>u||m||l||_.length===0||i.some(p=>P.eq(p,0))||g===6,[u,m,l,_,i,g]),s=(0,x.useMemo)(()=>o?.includes(_e),[o]);return[r,v,T,s]}function Oe({newPreset:e,setSlippageUse:o,setSlippageMode:n,setCustomMaxUse:t,setPriorityFeeError:i,setSlippageError:u,setCustomMaxError:m,currentMode:l,setAmountListUsed:_,setEditPreset:g,isEdit:r,editPresetValue:v,slippage:T,priorityFee:s}){return(0,x.useCallback)(()=>{if(e){o(f(e.slippage.value)),n(e.slippage.mode),t(f(e.slippage.customMax)),i(!1),u(!1),m(!1);let d=e.amountList.map(c=>l==="sell"?f(c):c);_(d),g({isEdit:r,value:{...v,slippage:{...T,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...s,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,o,n,t,i,u,m,l,_,g,r,v,T,s])}y();M();var w={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var It=le(({onClose:e})=>{let{configStore:o,quoteStore:n}=K(),{currentMode:t,computedConfig:i,tradeScene:u}=o,{mevUnstableShowLevel:m,jitoIsSuccess:l}=n,_=O(i,"nativeTokenInfo.decimals",0),g=O(i,"mevPriceThreshold"),r=O(i,"nativeTokenInfo.chainName"),{chainSymbol:v}=Se(),{editPreset:T,setEditPreset:s}=be(),{value:p,isEdit:d}=T,{slippage:c,priorityFee:h,name:G,amountList:X,id:He,priorityMode:Be,manualType:Ye}={...fe,...p},{savePresetFn:Re}=Ee(),[qe,V]=(0,a.useState)(!1),[ze,W]=(0,a.useState)(!1),[Ze,$]=(0,a.useState)(!1),[J,je]=(0,a.useState)(Be),[Q,Ke]=(0,a.useState)(Ye),Ge=de({priorityMode:J,manualType:Q,jitoIsSuccess:l,mevUnstableShowLevel:m}),Xe={low:f(c.config.low),medium:f(c.config.medium),high:f(c.config.high)},ee=f(c.min),te=f(c.max),Ve=f(c.dynamicMax),We=f(c.dynamicMin),$e=f(c.recommendMax),Je=f(c.recommendMin),Qe=b=>Te({value:b,min:ee,max:te,level:c.type}),[et,oe]=(0,a.useState)(f(c?.value)),[tt,ne]=(0,a.useState)(c.mode),[ot,re]=(0,a.useState)(f(c.customMax)),[nt,rt]=(0,a.useState)(h.type!==j.CUSTOM?h.type:j.MARKET),{getTokenAmount:st,getUsd:it}=xe(K),{computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}=he(),lt=Ie({currentMode:t,computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}),[ut,ct]=(0,a.useState)(!1),[pt,_t]=(0,a.useState)(""),[ft,dt]=De({isEdit:d,currentMode:t,savePresetFn:Re,onClose:e,setConfirmText:_t,setConfirmVisible:ct}),gt=b=>{s({isEdit:d,value:{...p,name:b}})},vt=b=>{je(b),s({isEdit:d,value:{...p,priorityMode:b}})},yt=b=>{Ke(b),s({isEdit:d,value:{...p,manualType:b}})},Mt=Pe({slippage:c,setSlippageMode:ne,setSlippageUse:oe,setSlippageError:V,setCustomMaxUse:re,setCustomMaxError:$,editPresetValue:p,setEditPreset:s,isEdit:d}),ht=Fe({setEditPreset:s,editPresetValue:p,isEdit:d,setPriorityFeeError:W,setLatestSelectFeeType:rt,priorityFee:h}),[St,se]=(0,a.useState)(X.map(b=>t==="sell"?Number(f(b)):b)),xt=Ae({setAmountListUsed:se,setEditPreset:s,isEdit:d,editPresetValue:p,currentMode:t}),[Tt,bt,Et,ie]=Ue({defaultPresetList:lt,id:He,slippage:c,priorityFee:h,amountList:X,slippageError:qe,priorityFeeError:ze,customMaxError:Ze,name:G,mevModeStatus:Ge}),Ct=Oe({newPreset:Tt,setSlippageUse:oe,setSlippageMode:ne,setCustomMaxUse:re,setPriorityFeeError:W,setSlippageError:V,setCustomMaxError:$,currentMode:t,setAmountListUsed:se,setEditPreset:s,isEdit:d,editPresetValue:p,slippage:c,priorityFee:h}),ae=(0,a.useRef)(null),Nt=pe();return a.default.createElement("div",{className:(0,R.default)(w.root)},a.default.createElement(we,{className:w.name,name:G,setName:gt,disabled:ie}),u===0&&a.default.createElement(Me,{className:w.mev,priorityMode:J,setMode:vt,manualType:Q,setManualType:yt,mevUnstableShowLevel:m,jitoIsSuccess:l,mevPriceThreshold:g,chainName:r}),a.default.createElement(ye,{className:w.slippage,mode:tt,fixedData:{value:et,level:c.type,levelMap:Xe,min:ee,max:te,validator:Qe},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:c.supportCustomMax,customMax:ot,dynamicMax:Ve,dynamicMin:We,recommendMax:$e,recommendMin:Je},onChange:Mt}),a.default.createElement(ve.SelectMode,{className:w.priority,fee:h?.value,type:h?.type,feeMap:h.config,max:h?.max,currency:v,onChange:ht,recommendMaxValue:h?.recommendMaxValue,recommendMinValue:h?.recommendMinValue,latestSelectType:nt,getTokenAmount:st,getUsd:it,tradeScene:u}),a.default.createElement(Le,{className:w.amount,amountList:St,setAmountList:xt,currency:v,currentMode:t,decimals:_,placeholderRef:ae}),a.default.createElement("div",{className:(0,R.default)({[w.placeholderTg]:Nt}),ref:ae}),a.default.createElement("div",{className:(0,R.default)("flex justify-between",w.btns)},ie&&a.default.createElement(N,{className:"flex-1",category:N.CATEGORY.outline,type:N.TYPE.primary,size:N.SIZE.lg,block:!0,disabled:bt,onClick:Ct},S("swaptrade_general_btn_reset")),a.default.createElement(N,{className:"flex-1",category:N.CATEGORY.fill,type:N.TYPE.primary,disabled:Et,size:N.SIZE.lg,block:!0,onClick:dt},S("swaptrade_dialog_btn_confirm"))),a.default.createElement(Ce,{onConfirm:ft,visible:ut,showChecked:!1,text:pt,confirmText:S("commonall_text_btn_ok_active")}))}),Xo=It;export{Xo as default};
//# sourceMappingURL=PresetEdit-EOBXBG3N.js.map
