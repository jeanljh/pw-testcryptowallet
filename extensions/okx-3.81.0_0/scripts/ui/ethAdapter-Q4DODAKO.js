import{a as C}from"./chunk-6TFEPOEK.js";import"./chunk-IZUTUDUM.js";import{a as K,b as u,c as O}from"./chunk-IEVBF5LG.js";import"./chunk-PFJL2XWX.js";import"./chunk-GFFOVUC5.js";import"./chunk-7THBEIEJ.js";import{a as M}from"./chunk-QFKKFFVA.js";import"./chunk-YGZYVSPD.js";import{a as S,b as H}from"./chunk-XSVHDPBS.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import{a as f}from"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{O as P,la as y,tb as D}from"./chunk-COF7YKSN.js";import"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-Z2AIGJGI.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as g,o as E,q as I}from"./chunk-Y5OH3DDZ.js";E();I();var _=g(K()),k=g(C()),o=g(P());D();var w=_.default.HardwareWebSdk,x=class extends O{async signTransaction(l,r,p){return new Promise((e,n)=>{(async()=>{let{onekeyInfo:s,hdPathMap:t}=l,i;try{i=await this.initOneKey({onekeyInfo:s,onUiCancel(){n(new Error(f))}})}catch(m){return n(this.handleErrors(m))}r=M(r);let c=await S(r),d=t[y],{success:h,payload:a}=await w.evmSignTransaction(s?.connectId,i,{path:d,transaction:{...c.toJSON(),to:(0,o.bufferToHex)(c.to).toString(),chainId:r.chainId}});if(u.closeModal(),h){let m=await H(c,a);return e(p?m:{rawTxResult:m})}return n(this.handleErrors(a))})()})}async signPersonalMessage(l,r={}){return new Promise((p,e)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){e(new Error(f))}})}catch(a){return e(this.handleErrors(a))}let{data:i=""}=r||{},c=s[y],{success:d,payload:h}=await w.evmSignMessage(n?.connectId,t,{path:c,messageHex:(0,o.stripHexPrefix)(i)});if(u.closeModal(),d){let{signature:a=""}=h||{};return p((0,o.addHexPrefix)(a))}return e(this.handleErrors(h))})()})}async signTypedData(l,r={}){return new Promise((p,e)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){e(new Error(f))}})}catch(v){return e(this.handleErrors(v))}let i=s[y];if(!(r.version==="V4"))return u.closeModal(),e(new Error("OneKey: Only version 4 of typed data signing is supported"));let d=JSON.parse(r.data),{domain_separator_hash:h,message_hash:a}=(0,k.default)(d,!0),{success:m,payload:T}=await w.evmSignTypedData(n?.connectId,t,{path:i,data:d,metamask_v4_compat:!0,domainHash:h,messageHash:a});return u.closeModal(),m?p((0,o.addHexPrefix)(T?.signature)):e(this.handleErrors(T))})()})}},J=new x;export{J as default};
//# sourceMappingURL=ethAdapter-Q4DODAKO.js.map
