import{a as c}from"./chunk-HGC2KGIM.js";import{c as _}from"./chunk-K4U5WZQU.js";import{C as F,E as w}from"./chunk-3ZKJXYZ4.js";import{k as C,l as z}from"./chunk-YIFLUVTR.js";import{b as v}from"./chunk-Z7PBP7IJ.js";import{f as j,o as s,q as i}from"./chunk-Y5OH3DDZ.js";s();i();var A=j(v());s();i();var D=({scrollLoad:t,lastRowId:e,scrollLoading:o,initLoading:a,scrollLoadLimitReached:l})=>!t||Boolean(e)&&!o&&!a&&!l;s();i();z();s();i();function J(t){return async(e,o)=>{await e(b({...t,dates:c().stringDates})),await e(m(!0));let a=o();e(x(P(a)))}}var K=49,r=C({name:"txHistory",initialState:{filters:{dates:c().stringDates,chainId:"",groupType:0,coinId:void 0},txList:[],txGroupList:[],initLoading:!0,scrollLoading:!1,filterLoading:!1,lastRowId:"",historyPageSearchValue:"",scrollLoadCount:0,scrollLoadLimitReached:!1},reducers:{setHistoryPageSearchValue:(t,e)=>{t.historyPageSearchValue=e.payload},setInitLoading:(t,e)=>{t.initLoading=e.payload},setScrollLoading:(t,e)=>{t.scrollLoading=e.payload},setFilterLoading:(t,e)=>{t.filterLoading=e.payload},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload,init:!1}},setLastRowId:(t,e)=>{t.lastRowId=e.payload},setTxList:(t,e)=>{t.txList=e.payload},setTxGroupList:(t,e)=>{t.txGroupList=e.payload},mergeTxList:(t,e)=>{t.txList=[...t.txList,...e.payload]},resetFilters(t){t.scrollLoadCount=0,t.scrollLoadLimitReached=!1,t.filters={dates:c().stringDates,chainId:"",groupType:0,coinId:void 0}},resetTxHistory:t=>{t.txList=[],t.initLoading=!1,t.scrollLoading=!1,t.filterLoading=!1,t.lastRowId="",t.historyPageSearchValue="",t.scrollLoadCount=0,t.scrollLoadLimitReached=!1},incrementScrollLoadCount:t=>{t.scrollLoadCount+=1,t.scrollLoadCount>=K&&(t.scrollLoadLimitReached=!0)},resetScrollLoadCount:t=>{t.scrollLoadCount=0,t.scrollLoadLimitReached=!1}}}),{actions:Q,reducer:Y}=r,gt=Y,ft=t=>t[r.name].txList,Z=t=>t[r.name].filters,xt=t=>t[r.name].txGroupList,P=t=>{let e=Z(t),{dates:[o,a],chainId:l,groupType:d,coinId:n}=e;return{startTime:new Date(`${o} 00:00:00`).getTime(),endTime:new Date(`${a} 23:59:59`).getTime(),chainId:l,groupType:d,coinId:n}},k=t=>t[r.name].initLoading,q=t=>t[r.name].scrollLoading,M=t=>t[r.name].lastRowId,pt=t=>t[r.name].filterLoading,ht=t=>t[r.name].historyPageSearchValue;var V=t=>t[r.name].scrollLoadLimitReached,{setFilters:b,setTxList:p,mergeTxList:h,setInitLoading:R,setScrollLoading:T,setFilterLoading:m,resetTxHistory:Rt,setLastRowId:S,resetFilters:Tt,setTxGroupList:St,setHistoryPageSearchValue:yt,incrementScrollLoadCount:H,resetScrollLoadCount:G}=Q;var tt=t=>t?w:F,et=t=>(0,A.isEmpty)(t)?[]:t,x=(t,e={initLoad:!1,scrollLoad:!1,autoRefresh:!1,fromCoinDetail:!1,hasMoreData:!0,hasInitData:!0})=>async(o,a)=>{let l={...t},{initLoad:d,scrollLoad:n,fromCoinDetail:O,hasMoreData:E,hasInitData:W}=e,$=tt(O),L=a(),y=M(L),I=V(L),B=k(L),N=q(L);if(!(n&&I||!E&&W||!D({scrollLoad:n,lastRowId:y,scrollLoading:N,initLoading:B,scrollLoadLimitReached:I}))){d&&(o(R(!0)),o(S("")),o(G())),n&&(o(T(!0)),l.lastRowId=y),l.hideRisk=_();try{let g=await $(l),u=et(g?.content);n?(o(H()),o(h(u))):o(p(u));let U=u.length,X=g.hasViewMore?u[U-1]?.rowId:"";o(S(X))}catch{o(n?h([]):p([]))}d&&o(R(!1)),n&&o(T(!1)),o(m(!1))}};export{x as a,J as b,gt as c,ft as d,Z as e,xt as f,P as g,k as h,q as i,M as j,pt as k,ht as l,V as m,b as n,p as o,R as p,Rt as q,S as r,Tt as s,St as t,yt as u,G as v};
//# sourceMappingURL=chunk-6D46L7TU.js.map
