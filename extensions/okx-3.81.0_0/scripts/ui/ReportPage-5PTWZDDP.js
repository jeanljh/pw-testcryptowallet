import{a as W}from"./chunk-S7VT2TWF.js";import"./chunk-BNS5ABAB.js";import{a as q}from"./chunk-7QX2TXNH.js";import{d as U}from"./chunk-ZDHJHPQ5.js";import"./chunk-WY5R5HAR.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{T as H,U as G}from"./chunk-3ZKJXYZ4.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import{a as v}from"./chunk-47LIW52M.js";import{a as I}from"./chunk-33XRMYWN.js";import"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import{c as F}from"./chunk-OOYDFTEF.js";import{a as g}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{h as Y}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as _e}from"./chunk-Z62JX42S.js";import"./chunk-2QHGKEME.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as le}from"./chunk-6PA65BO3.js";import{f as M}from"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import{c as r}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import"./chunk-COF7YKSN.js";import{D as n,F as N,K as ie}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{I as S,P as R,q as T,r as B,y}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{u as L,z as u}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as re}from"./chunk-4QGZDIBD.js";import{b as ae}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-H6JAOQCX.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as m,o as b,q as p}from"./chunk-Y5OH3DDZ.js";b();p();var e=m(ae()),j=m(le()),z=m(_e()),_=m(re());ie();b();p();var o={"retina-border-basic":"_retina-border-basic_1b1w3_1",retinaBorderBasic:"_retina-border-basic_1b1w3_1","report-page":"_report-page_1b1w3_29",reportPage:"_report-page_1b1w3_29",content:"_content_1b1w3_34",label:"_label_1b1w3_40","coin-info":"_coin-info_1b1w3_46",coinInfo:"_coin-info_1b1w3_46","coin-header":"_coin-header_1b1w3_80",coinHeader:"_coin-header_1b1w3_80","coin-left":"_coin-left_1b1w3_84",coinLeft:"_coin-left_1b1w3_84","coin-icon":"_coin-icon_1b1w3_90",coinIcon:"_coin-icon_1b1w3_90","coin-symbol":"_coin-symbol_1b1w3_96",coinSymbol:"_coin-symbol_1b1w3_96","chain-tag":"_chain-tag_1b1w3_104",chainTag:"_chain-tag_1b1w3_104","chain-name":"_chain-name_1b1w3_107",chainName:"_chain-name_1b1w3_107","coin-right":"_coin-right_1b1w3_114",coinRight:"_coin-right_1b1w3_114","contract-address":"_contract-address_1b1w3_117",contractAddress:"_contract-address_1b1w3_117","reasons-section":"_reasons-section_1b1w3_123",reasonsSection:"_reasons-section_1b1w3_123",loading:"_loading_1b1w3_126","section-title":"_section-title_1b1w3_133",sectionTitle:"_section-title_1b1w3_133","reasons-list":"_reasons-list_1b1w3_139",reasonsList:"_reasons-list_1b1w3_139","reason-item":"_reason-item_1b1w3_143",reasonItem:"_reason-item_1b1w3_143","reason-label":"_reason-label_1b1w3_156",reasonLabel:"_reason-label_1b1w3_156","other-reason-section":"_other-reason-section_1b1w3_163",otherReasonSection:"_other-reason-section_1b1w3_163","submit-section":"_submit-section_1b1w3_167",submitSection:"_submit-section_1b1w3_167"};var D=300,K=5,de=1;function me(){let E=(0,j.useHistory)(),C=q(),Q=C.get("coinId"),x=C.get("address"),O=Y(),{coin:s}=W(Number(Q),!0),[X,P]=(0,e.useState)(!1),{data:Z=[],loading:J,run:V}=(0,z.useRequest)(async()=>{P(!1);let[t,a]=await N(G());return!t&&Array.isArray(a?.data?.tokenReasons)?a.data.tokenReasons||[]:(P(!0),[])}),[i,$]=(0,e.useState)([]),[l,k]=(0,e.useState)(""),[h,A]=(0,e.useState)(!1),c=i.includes(K),w=i.length>0&&(!c||l.length>0),ee=(0,e.useCallback)((t,a)=>{$(d=>a?[...d,t]:(t===K&&k(""),d.filter(f=>f!==t)))},[]),oe=(0,e.useCallback)(t=>{t.length<=D&&k(t)},[]),te=(0,e.useCallback)(async()=>{if(!w||h)return;A(!0);let t={reportedAddress:s?.address,chainIndex:s?.chainId,reportType:de,reasonTypes:i,address:x,comment:c?l:""},a={walletSignParams:{needWalletSign:!0,walletId:O}},[d,f]=await N(H(t,a));if(!d&&f?.data?.reportStatus){S.success({title:e.default.createElement("span",{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_SUCCESS_TOAST},n("wallet_extension_top_toast_report_success"))});let ne=v.get(I.reportedCoins)||[];v.set(I.reportedCoins,ne.concat(s?.coinId)),E.goBack()}else S.error(n("wallet_extension_assets_notification_desc_report_fail"));A(!1)},[w,h,s?.address,s?.chainId,s?.coinId,i,x,c,l,O,E]),se=()=>J?e.default.createElement("div",{className:o.loading},e.default.createElement(L.Circle,null)):X?e.default.createElement("div",{className:o.loading},e.default.createElement(y.State,{type:y.State.TYPE.noNetwork,title:n("wallet_extension_general_empty_title_loading_failed"),description:n("wallet_extension_general_empty_subtitle_data_retrive_fail"),onButtonClick:()=>{V()},buttonText:n("wallet_extension_general_empty_btn_reload")})):e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:o.sectionTitle},n("wallet_extension_assets_chips_label_report_issue")),e.default.createElement("div",{className:o.reasonsList},Z.map(t=>e.default.createElement("div",{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_REASON_ITEM,key:t.reasonType,className:o.reasonItem,onClick:()=>{let a=i.includes(t.reasonType);ee(t.reasonType,!a)}},e.default.createElement("div",{className:(0,_.default)("ellipsis",o.reasonLabel)},t.content),e.default.createElement(B,{circle:!0,checked:i.includes(t.reasonType)})))),c&&e.default.createElement("div",{className:o.otherReasonSection},e.default.createElement(T.TextArea,{style:{height:124},showCount:!0,cleanable:!0,errorType:T.TIP_TYPE.always,value:l,onChange:t=>oe(t?.target?.value),placeholder:n("wallet_extension_assets_textarea_placeholder_enter_issue",{},{useBr:!1}),maxLength:D})));return e.default.createElement(r.Container,{loading:!1,className:o.reportPage},e.default.createElement(U,{bordered:!1,title:n("wallet_extension_assets_header_report_token"),className:o.navigator,closeable:!1}),e.default.createElement("div",{className:o.content},e.default.createElement("span",{className:o.label},n("wallet_extension_assets_cell_label_token")),s&&e.default.createElement("div",{className:o.coinInfo},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,justify:"space-between",className:o.coinHeader},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:o.coinLeft},e.default.createElement(F,{src:s?.image,text:s?.symbol,className:o.coinIcon}),e.default.createElement("div",{className:(0,_.default)(o.coinSymbol,"ellipsis")},s?.symbol),e.default.createElement(R,{className:(0,_.default)(o.chainTag)},e.default.createElement("div",{className:(0,_.default)(o.chainName,"ellipsis")},s?.chainName))),e.default.createElement("div",{className:o.coinRight},s?.address&&e.default.createElement("div",{className:o.contractAddress},M(s?.address))))),e.default.createElement("div",{className:o.reasonsSection},se()),e.default.createElement("div",{className:o.submitSection},e.default.createElement(u,{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_SUBMIT_BUTTON,type:u.TYPE.highlight,size:u.SIZE.lg,loading:h,disabled:!w,onClick:te,block:!0},n("wallet_extension_btn_general_confirm")))))}export{me as default};
//# sourceMappingURL=ReportPage-5PTWZDDP.js.map
