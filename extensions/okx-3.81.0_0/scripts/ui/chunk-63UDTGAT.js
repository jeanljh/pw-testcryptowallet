import{b as Et}from"./chunk-AZ2KZKVQ.js";import{a as tn,c as qr,d as Hr}from"./chunk-VCDDTW7H.js";import{a as Or,b as Zr}from"./chunk-UULU72LG.js";import{b as nn,c as on,d as Kr,e as jr,f as zr,g as Qr}from"./chunk-E6XUX33V.js";import{g as ro}from"./chunk-VTMJYROY.js";import{a as io}from"./chunk-BEIWULHW.js";import{d as ao,e as Yr,f as $r}from"./chunk-DOCYQV54.js";import{a as Gr}from"./chunk-6T3CLU73.js";import{a as so}from"./chunk-STXPU7A6.js";import{f as _e,h as lo,i as uo}from"./chunk-PFSPFZNW.js";import{a as Jt,b as Fr,c as en,d as xt}from"./chunk-BF6TFHGA.js";import{b as Vr}from"./chunk-F57QKCZQ.js";import{A as Jn,B as w,D as xr,E as Xt,F as Er,G as vr,H as wr,I as De,J as ze,L as eo,V as Zt,X as Lr,Z as Mr,_ as Rr,e as ut,ia as Pr,ja as Nr,ma as h,r as $t,s as $n,t as Xn,u as Sr,v as yr,w as Cr,x as br,y as Zn,z as Ar}from"./chunk-HIVYZXF3.js";import{H as Ir,R as hr,t as Tr,y as kr}from"./chunk-4Y52FA3V.js";import{a as wa}from"./chunk-B6WLGAPL.js";import{a as Xr}from"./chunk-TQMC5UQS.js";import{b as to,c as no,e as mt,g as Dr,h as Br}from"./chunk-A2QIZMPL.js";import{b as Qt,c as bt,f as At,x as ct}from"./chunk-HKU7TMFJ.js";import{a as U}from"./chunk-7I4OPLNV.js";import{a as fr,f as pe,i as Yt,t as _r,u as Qn}from"./chunk-FGRS6VIX.js";import{$c as jt,Ba as ie,Jb as Gt,ad as Ct,ba as ar,bd as zt,cb as dt,ia as lr,nd as ur,od as cr,qd as mr,rb as yt,rd as pr,tc as Kt,ua as dr,ud as gr,vd as y,wd as Oe}from"./chunk-INIQCRIO.js";import{e as Wr,f as Ur,g as oo}from"./chunk-2P6PTKAN.js";import{a as ee}from"./chunk-6Z5HVUBK.js";import{C as Ht,F as rr,G as te,K as sr,N as ir,e as tr,f as nr,g as qt,j as or,l as Re,m as D,s as Yn,x as Vt}from"./chunk-ZBDGRK4Q.js";import{a as va}from"./chunk-6PA65BO3.js";import{A as Me,H as X,I as Z,O as je,b as Ee,o as jn,q as Ke,s as zn,x as lt}from"./chunk-BJKBO23H.js";import{f as er}from"./chunk-JLNZTUPO.js";import{A as $o,E as Xo,I as at,O as St,U as Ze,Z as Zo,i as Hn,j as G,ka as Kn,pa as Jo,t as Gn,va as ue}from"./chunk-XFTQD4B2.js";import{a as ve}from"./chunk-GVV6OTQP.js";import{t as P,u as Je,z as ce}from"./chunk-ZFVABNQN.js";import{a as $}from"./chunk-4QGZDIBD.js";import{b as v}from"./chunk-73B6GL3S.js";import{f as I,o as s,q as i}from"./chunk-Y5OH3DDZ.js";s();i();var Qe=I(v()),Ut=I(va());s();i();s();i();var Ho=I(v());s();i();var Vo=I(v());s();i();var K=I(v()),qo=I($());s();i();s();i();function we(t){let e=pe(t.amountNum,{needPlaceholder:!0});return{...t,formattedBalance:e}}function Be(t,e){return String(t.chainId)===String(e.chainId)&&t.tokenContractAddress===e.tokenContractAddress}function Jr(t,e,n,o){let r={...t};return n&&(Be(t,n)?(n.currencyAmount!==void 0&&(r.currencyAmount=n.currencyAmount),n.amountNum!==void 0&&(r.amountNum=n.amountNum)):console.warn("Token mismatch in mergeTokenInfo:",`strategy: ${t.chainId}/${t.tokenContractAddress}`,`currency: ${n.chainId}/${n.tokenContractAddress}`)),e&&(r.defaultSellPercentList=e),o&&(r.currencyDefaultBuyAmountList=o),r}function rn(t,e){return!t||!e||e.length===0?null:e.find(n=>n.chainId===t.chainId&&n.tokenContractAddress===t.tokenContractAddress)||null}function es(t,e){return!t||!e||e.length===0?null:e.findIndex(o=>o.chainId===t.chainId&&o.tokenContractAddress===t.tokenContractAddress)}function co(t,e){return t.map(n=>({...n.currencyTokenInfo,formattedBalance:pe(n.currencyTokenInfo.amountNum,{needPlaceholder:!0}),formattedCurrencyAmount:h.currencyConversionWithSymbol(n.currencyTokenInfo.currencyAmount,{needPlaceholder:!0}),currencyDefaultBuyAmountList:n.currencyDefaultBuyAmountList,defaultSellPercentList:e}))}function ts(t,e){return{...t,marketCap:e.marketCap,formattedMarketCap:h.currencyConversionWithSymbol(e.marketCap,{needPlaceholder:!0})}}function ns(t){try{return new er(t),!0}catch{return!1}}s();i();s();i();s();i();var os={WIDTH:340,HEIGHT:320,BUY_HEIGHT:420,SELL_HEIGHT:530,PRESET_WIDTH:400,PRESET_HEIGHT:800,SETTING_WIDTH:340,SETTING_HEIGHT:268,FOOTER_HEIGHT:37},rs={WIDTH:342,HEIGHT:307,BUY_HEIGHT:417,SELL_HEIGHT:527,PRESET_WIDTH:400,PRESET_HEIGHT:800,FOOTER_HEIGHT:37},sn={SPACE:"Space"},vt=[{key:"Q"},{key:"W"},{key:"E"},{key:"R"},{key:"T"},{key:"Y"}],wt=[{key:"A"},{key:"S"},{key:"D"},{key:"F"},{key:"G"},{key:"H"}],he={ORDER_FROM:"INSTANT_TRADE",ORDER_SOURCE:"INSTANT_TRADE",TRADE_MODE:7,SUCCESS:"1",FAILED:"-1"},an={SHOW_PNL:"instant_trade_showPnl"},ad=[yt.SOLANA_MAINNET];s();i();ue();var mo=class{constructor(){this.currentWallet=null;this.getAddressByChainId=e=>h.getWalletAddressByChainId(e);this.userUniqueId=ut.initUniqueId();this.walletSupportMev=!1;this.setWalletSupportMev=e=>{this.walletSupportMev=e};this.defaultEnabledSilentMethod=!1;this.silentEnabled=!1;this.isSaAccountNormal=!1;Re(this)}setCurrentWallet(e){this.currentWallet=h.formatCurrentWallet(e)}get computedAccountWalletAddresses(){let e=G(this.currentWallet,"address",[]);return Array.isArray(e)?Jo(e).join(","):""}get computedAccountId(){return this.currentWallet?.walletId}get isConnectedWallet(){return!!this.currentWallet?.walletId}get computedTeeStatus(){return this.currentWallet?.teeStatus||{}}get computedIsOkxWallet(){return this.currentWallet?.isOkxWallet||!1}get computedTeeInfo(){return this.currentWallet?.tee}get computedInitWalletAtExtension(){return h.isExtensionEnv?h.isExtensionEnv&&!!this.computedAccountId:!0}setDefaultEnabledSilentMethod(e){this.defaultEnabledSilentMethod=e}setSilentEnabled(e){this.silentEnabled=e}setIsSaAccountNormal(e){this.isSaAccountNormal=e}},M=new mo;s();i();s();i();s();i();s();i();ue();var Fe="MARKET_TRADER_PRICING_TOKEN_AMOUNT_LIST",We="MARKET_TRADER_SELL_AMOUNT_LIST_STORAGE",pt=({token:t,amountList:e,storageKey:n,isSell:o=!1})=>{if(!Qn(t))return;let r=U.get(n),a=G(t,"chainId"),l=no(t),d=o?{[a]:e}:{[a]:{[l]:e}};U.set(n,Ze({},r,d))},ln=({token:t,storageKey:e})=>{if(!Qn(t))return null;let n=U.get(e),o=G(t,"chainId"),r=no(t),a=G(n,`[${o}]`);if(Array.isArray(a))return a;let l=G(a,`[${r}]`);return Array.isArray(l)?l:null};function ss(t,e){!t?.chainId||!t?.tokenContractAddress||pt({token:t,amountList:e,storageKey:Fe})}function is(t,e){!t?.chainId||!t?.tokenContractAddress||pt({token:t,amountList:e,storageKey:We})}s();i();ue();s();i();var as="INITIAL_SELECTED_TOKEN",dn=({chainId:t,storageKey:e}={})=>{let n=U.get(as)||{};return t&&e?n?.[t]?.[e]||"":n},ls=({chainId:t,tokenAddress:e,storageKey:n})=>{let o=dn();o[t]||(o[t]={}),o[t][n]=e,U.set(as,o)};s();i();s();i();ue();async function Se({url:t,params:e}){let n=h.getOnt(),[o,r]=await te(n.get(t,{params:e}));return[o,r?.data||null]}async function un({url:t,data:e}){let n=h.getOnt(),[o,r]=await te(n.post(t,e));return[o,r?.data||null]}function cn(t,e){let n=t||{};return e?{...n,amountNum:e.amountNum,currencyAmount:e.currencyAmount,balance:e.amountNum}:n}function ds(t,e){let o=t.map(({currencyTokenInfo:r,currencyDefaultBuyAmountList:a})=>({...r,currencyDefaultBuyAmountList:a,balance:r?.amountNum})).filter(r=>!mt(r,e));return o.length?Zo(o,r=>Number(r.currencyAmount||0),"desc"):[]}var Lt=(t,e)=>Array.isArray(t)?t.map((n,o)=>e==="buy"?{amount:n,buttonUniqueId:`buy_${o}`}:{percent:n,buttonUniqueId:`sell_${o}`}):[],us=t=>{let e=ln({token:t,storageKey:Fe});return e||t?.currencyDefaultBuyAmountList||[]},cs=t=>{let e=us(t),n=t?.currencyDefaultBuyAmountList;return Lt(e||n,"buy")},ms=({token:t,config:e})=>{pt({token:t,amountList:e,storageKey:Fe,isSell:!1})},ps=t=>{let e=ln({token:t,storageKey:We});return e||t?.defaultSellPercentList||[]},fs=t=>{let e=ps(t),n=t?.defaultSellPercentList;return Lt(e||n,"sell")},gs=({token:t,config:e})=>{pt({token:t,amountList:e,storageKey:We,isSell:!0})},po=(t,e)=>{if(h.isExtensionEnv)return h.global.goToSwapPage?.({fromToken:t,toToken:e});let n=Dr({from:t,toToken:e}),o=Br(n);return ir(`${dr(lr)}?${o}`,"_self")};async function fo(t){let{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r}=t;try{let[a,l]=await Promise.all([Se({url:zt,params:{chainId:e,tokenContractAddress:n}}),Se({url:Ct,params:{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r,tradeType:1}})]),[d,u]=a,[c,m]=l;if(d||!u)throw console.error("Failed to fetch market order placer strategy:",d),new Error("Failed to fetch market order placer strategy");if(c||!m||m.length===0)throw console.error("Failed to fetch meme currency token list:",c),new Error("Failed to fetch meme currency token list");let T=m.map(S=>S.currencyTokenInfo),g=rn(u.tokenInfo,T),f=g?m.find(S=>S.currencyTokenInfo.chainId===g.chainId&&S.currencyTokenInfo.tokenContractAddress===g.tokenContractAddress):null,p=Jr(u.tokenInfo,u.defaultSellPercentList,g??null,f?.currencyDefaultBuyAmountList),k=co(m,u.defaultSellPercentList);return g||console.warn("No matching currency token found for:",`${u.tokenInfo.chainId}/${u.tokenInfo.tokenContractAddress}`,"Proceeding with strategy token info only"),f||console.warn("Failed to find currency item with buy amount list, using defaults"),{tokenInfo:p,defaultSellPercentList:u.defaultSellPercentList,currencyDefaultBuyAmountList:f?.currencyDefaultBuyAmountList??[],tokenSelectionList:k}}catch(a){throw console.error("fetchInstantTradeTokenData error:",a),new Error("Failed to fetch instant trade token data")}}var mn=async(t,e)=>{let{chainId:n,tokenContractAddress:o,accountId:r,userUniqueId:a}=e;try{let l=await Se({url:Ct,params:{chainId:n,tokenContractAddress:o,accountId:r,userUniqueId:a,tradeType:1}}),[d,u]=l;if(d||!u||u.length===0)throw console.error("Failed to fetch currency token list:",d),new Error("Failed to fetch currency token list");return co(u,t)}catch(l){throw console.error("fetchCurrencyTokenList error:",l),new Error("Failed to fetch currency token list")}},_s=async t=>{let{chainId:e,tokenContractAddress:n}=t;try{let o=await Se({url:jt,params:{chainId:e,tokenContractAddress:n}}),[r,a]=o;if(r||!a)throw console.error("Failed to fetch token balance:",r),new Error("Failed to fetch token balance");return a}catch(o){throw console.error("fetchTokenBalance error:",o),new Error("Failed to fetch token balance")}},go=async t=>{let{chainId:e,tokenContractAddress:n,accountId:o,userUniqueId:r,userWalletAddress:a}=t;try{let l=await Se({url:Kt,params:{chainId:e,tokenAddress:n,accountId:o,walletId:o,userUniqueId:r,userWalletAddress:a,businessType:"1"}}),[d,u]=l;return d||!u?(console.error("Failed to fetch token info with balance:",d),null):u}catch(l){return console.error("fetchTokenInfoWithBalance error:",l),null}};var Mt="501",To="11111111111111111111111111111111",_o=class{constructor(){this.isInitialized=!1;this.defaultToken=null;this.selectedToken=null;this.buyTokenIndex=0;this.sellTokenIndex=0;this.buyConfigStorage="";this.sellConfigStorage="";this.clearData=()=>{this.defaultToken=null,this.selectedToken=null,this.buyTokenIndex=0,this.sellTokenIndex=0};this.refreshForAccountChange=async()=>{try{let e=M.computedAccountId,n=M.userUniqueId;if(!e||!n){console.error("refreshForAccountChange: Account info not available");return}if(this.defaultToken?.tokenInfo){let o=this.defaultToken.tokenInfo,r=await mn(this.defaultToken.sellPercentList,{chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,tradeType:1});if(r){this.defaultToken.tokenSelectionList=r;let a=rn(o,r);a?.amountNum&&(this.defaultToken.tokenInfo=we({...o,amountNum:a.amountNum}))}}if(this.selectedToken?.tokenInfo){let o=this.selectedToken.tokenInfo,r=M.getAddressByChainId(o.chainId),[a,l]=await Promise.all([mn(this.selectedToken.sellPercentList,{chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,tradeType:1}),go({chainId:o.chainId,tokenContractAddress:o.tokenContractAddress,accountId:e,userUniqueId:n,userWalletAddress:r})]);a&&(this.selectedToken.tokenSelectionList=a),l?.amountNum&&(this.selectedToken.tokenInfo=we({...o,amountNum:l.amountNum}))}}catch(e){console.error("refreshForAccountChange error:",e)}};this.initBuyAndSellIndex=({tokenList:e})=>{if(!e.length)return;let n=dn({chainId:Number(Mt),storageKey:"extensionMarketBuy"}),o=e.findIndex(l=>l.tokenContractAddress===n);o!==-1&&(this.buyTokenIndex=o);let r=dn({chainId:Number(Mt),storageKey:"extensionMarketSell"}),a=e.findIndex(l=>l.tokenContractAddress===r);a!==-1&&(this.sellTokenIndex=a)};this.initializeInstantTrade=async()=>{try{let e=M.computedAccountId,n=M.userUniqueId;if(!e||!n)return console.error("Account info not available from currentWalletStore"),null;let o=await fo({chainId:Mt,tokenContractAddress:To,accountId:e,userUniqueId:n});return o?(this.initBuyAndSellIndex({tokenList:o.tokenSelectionList}),this.defaultToken={tokenInfo:we(o.tokenInfo),buyAmountList:o.currencyDefaultBuyAmountList,sellPercentList:o.defaultSellPercentList,tokenSelectionList:o.tokenSelectionList},this.isInitialized=!0,o):null}catch(e){return console.error("initializeInstantTrade error",e),null}};this.addSelectedToken=async(e,n)=>{try{let o=M.computedAccountId,r=M.userUniqueId;if(!o||!r)return console.error("Account info not available from currentWalletStore"),null;Be(this.buyWithToken,{tokenContractAddress:e,chainId:n})&&(this.buyTokenIndex=0),Be(this.sellForToken,{tokenContractAddress:e,chainId:n})&&(this.sellTokenIndex=0);let a=M.getAddressByChainId(n),[l,d,u]=await Promise.all([fo({chainId:n,tokenContractAddress:e,accountId:o,userUniqueId:r}),_s({chainId:n,tokenContractAddress:e}),go({chainId:n,tokenContractAddress:e,accountId:o,userUniqueId:r,userWalletAddress:a})]);if(!l||!l.tokenInfo?.tokenContractAddress)return console.error("Failed to fetch token data for CA:",e),null;let c=ts(l.tokenInfo,d);return u?.amountNum&&(c={...c,amountNum:u.amountNum}),this.selectedToken={tokenInfo:we(c),buyAmountList:l.currencyDefaultBuyAmountList,sellPercentList:l.defaultSellPercentList,tokenSelectionList:l.tokenSelectionList},l}catch(o){return console.error("addSelectedToken error",o),null}};this.removeSelectedToken=()=>{this.selectedToken=null};this.setBuyTokenIndex=e=>{let n=this.tokenSelectionList;if(!n||n.length===0){console.warn("Cannot set buy token index: token selection list is empty");return}if(e<0||e>=n.length){console.warn(`Buy token index ${e} is out of bounds (0-${n.length-1})`);return}this.buyTokenIndex=e};this.setSellTokenIndex=e=>{let n=this.tokenSelectionList;if(!n||n.length===0){console.warn("Cannot set sell token index: token selection list is empty");return}if(e<0||e>=n.length){console.warn(`Sell token index ${e} is out of bounds (0-${n.length-1})`);return}this.sellTokenIndex=e};this.updateTokenBalance=e=>{if(!e?.chainId||!e?.tokenContractAddress)return;let n=String(e.amountNum);if(this.selectedToken?.tokenSelectionList){let o=this.selectedToken.tokenSelectionList.findIndex(r=>Be(r,e));if(o!==-1){let a={...this.selectedToken.tokenSelectionList[o],amountNum:n};this.selectedToken.tokenSelectionList[o]=we(a)}}if(this.defaultToken?.tokenSelectionList){let o=this.defaultToken.tokenSelectionList.findIndex(r=>Be(r,e));if(o!==-1){let a={...this.defaultToken.tokenSelectionList[o],amountNum:n};this.defaultToken.tokenSelectionList[o]=we(a)}}if(this.selectedToken?.tokenInfo&&Be(this.selectedToken.tokenInfo,e)){let o={...this.selectedToken.tokenInfo,amountNum:n};this.selectedToken.tokenInfo=we(o)}if(this.defaultToken?.tokenInfo&&Be(this.defaultToken.tokenInfo,e)){let o={...this.defaultToken.tokenInfo,amountNum:n};this.defaultToken.tokenInfo=we(o)}};this.updateTokenSelectionList=async()=>{let e=this.selectedToken?this.selectedToken?.tokenInfo:this.defaultToken?.tokenInfo;if(!e){console.error("Cannot update token selection list: no token data available");return}let n=await mn(e.defaultSellPercentList,{chainId:e.chainId,tokenContractAddress:e.tokenContractAddress,accountId:M.computedAccountId,userUniqueId:M.userUniqueId,tradeType:1});if(!n){console.error("Cannot update token selection list: no token selection list available");return}this.selectedToken?this.selectedToken.tokenSelectionList=n:this.defaultToken.tokenSelectionList=n};this.getTokenFromSelectionList=e=>{let n=this.tokenSelectionList;return!n||n.length===0?null:n[e]};Re(this,{getTokenFromSelectionList:!1,getTokenBuyConfigStorage:!1,getTokenSellConfigStorage:!1}),this.buyConfigStorage=U.get(Fe),this.sellConfigStorage=U.get(We),window.addEventListener("storage",tr(e=>{if(e.key===`ok_${ar}`){let n=JSON.parse(e.newValue);this.buyConfigStorage=G(n,Fe,""),this.sellConfigStorage=G(n,We,"")}})),qt(()=>({accountId:M.computedAccountId,userUniqueId:M.userUniqueId}),({accountId:e,userUniqueId:n})=>{e&&n&&(this.defaultToken||this.selectedToken)&&this.refreshForAccountChange().catch(()=>{})},{fireImmediately:!1,equals:(e,n)=>e.accountId===n.accountId&&e.userUniqueId===n.userUniqueId})}getTokenBuyConfigStorage({chainId:e,tokenContractAddress:n}){return G(this.buyConfigStorage,`${e}.${n}`,[])}getTokenSellConfigStorage({chainId:e,tokenContractAddress:n}){return G(this.sellConfigStorage,`${e}.${n}`,[])}reloadConfigsFromStorage(){this.buyConfigStorage=U.get(Fe),this.sellConfigStorage=U.get(We)}get buyWithToken(){let e=this.getTokenFromSelectionList(this.buyTokenIndex);return e?we(e):null}get sellForToken(){let e=this.getTokenFromSelectionList(this.sellTokenIndex);return e?we(e):null}get buyButtonList(){let e=this.buyWithToken||this.defaultToken?.tokenInfo,n=this.getTokenBuyConfigStorage({chainId:e?.chainId,tokenContractAddress:Kn(e?.tokenContractAddress)}),o=e?.currencyDefaultBuyAmountList,r=this.defaultToken?.buyAmountList;return Gn({},n?.length>0?{list:n}:null,o?.length>0?{list:o}:null,r?.length>0?{list:r}:null,{list:[]}).list.map((l,d)=>({amount:Number(l),buttonUniqueId:`buy_${d}`}))}get sellButtonList(){let e=this.sellForToken||this.defaultToken?.tokenInfo,n=this.getTokenSellConfigStorage({chainId:e?.chainId,tokenContractAddress:Kn(e?.tokenContractAddress)}),o=this.sellForToken?.defaultSellPercentList,r=this.defaultToken?.sellPercentList;return Gn({},n?.length>0?{list:n}:null,o?.length>0?{list:o}:null,r?.length>0?{list:r}:null,{list:[]}).list.map((l,d)=>({percent:Number(l),buttonUniqueId:`sell_${d}`}))}get tokenSelectionList(){let e=this.selectedToken?.tokenSelectionList||this.defaultToken?.tokenSelectionList||[];return this.selectedToken?.tokenInfo?e.filter(n=>!Be(n,this.selectedToken.tokenInfo)):e}},N=new _o;var ko=class{constructor(e){this.isPresetModalOpen=!1;this.isSettingModalOpen=!1;this.isEditModeActive=!1;this.isShortcutActive=!1;this.spacePressed=!1;this.tokenSelectorState=null;this.tokenSelectorHideCount=0;this.boostOnboardingShown=U.get("boostOnboardingShown")??!1;this.isBoostInfoShown=!0;this.loadingButtonMap=new Map;this.tempBuyModeConfigList=[];this.tempSellModeConfigList=[];this.sizeConfig=e,Re(this)}setPresetModalOpen(e){this.isPresetModalOpen=e,this.applyWindowResize()}setSettingModalOpen(e){this.isSettingModalOpen=e,this.applyWindowResize()}get computedDialogState(){return this.isPresetModalOpen?"preset":this.isSettingModalOpen?"setting":"main"}saveEditModeConfigs(){let e=this.tempBuyModeConfigList.map(o=>String(o)),n=this.tempSellModeConfigList.map(o=>String(o));ss(N.buyWithToken,e),is(N.sellForToken,n),N.reloadConfigsFromStorage(),this.isEditModeActive=!1}setEditModeActive(e){this.isEditModeActive=e}setShortcutActive(e){this.isShortcutActive=e}setSpacePressed(e){this.spacePressed=e}setTokenSelectorState(e){this.tokenSelectorState=e,e!==null&&(this.isEditModeActive=!1),this.applyWindowResize(!1)}updateTokenSelectorHideCount(){this.tokenSelectorHideCount+=1}setBoostOnboardingShown(e){this.boostOnboardingShown=e,U.set("boostOnboardingShown",e)}setBoostInfoShown(e){this.isBoostInfoShown=e,this.applyWindowResize(!1)}showBoostInfo(){this.setBoostInfoShown(!0)}hideBoostInfo(){this.setBoostInfoShown(!1)}setButtonLoading(e,n){this.loadingButtonMap.set(e,n)}getButtonLoading(e){return this.loadingButtonMap.get(e)||!1}clearButtonLoading(e){this.loadingButtonMap.delete(e)}clearAllButtonLoading(){this.loadingButtonMap.clear()}getLoadingButtonIds(){let e=[];return this.loadingButtonMap.forEach((n,o)=>{n&&e.push(o)}),e}hasAnyButtonLoading(){return this.getLoadingButtonIds().length>0}setTempBuyModeConfigList(e){this.tempBuyModeConfigList=e}setTempSellModeConfigList(e){this.tempSellModeConfigList=e}hasTempConfigs(){return this.tempBuyModeConfigList.length>0||this.tempSellModeConfigList.length>0}get computedWindowSize(){if(this.isPresetModalOpen)return{width:this.sizeConfig.PRESET_WIDTH,height:this.sizeConfig.PRESET_HEIGHT};if(h.isExtensionEnv&&this.isSettingModalOpen)return{width:this.sizeConfig.SETTING_WIDTH,height:this.sizeConfig.SETTING_HEIGHT};if(this.tokenSelectorState!==null){let o=this.tokenSelectorState==="buy";return{width:this.sizeConfig.WIDTH,height:o?this.sizeConfig.BUY_HEIGHT:this.sizeConfig.SELL_HEIGHT}}let e=this.sizeConfig.HEIGHT,n=this.isBoostInfoShown?this.sizeConfig.FOOTER_HEIGHT:0;return{width:this.sizeConfig.WIDTH,height:e+n}}applyWindowResize(e){let n=this.computedWindowSize;h.isExtensionEnv&&h.global.resize(n,e)}},C=new ko(h.isExtensionEnv?os:rs);s();i();var Io=class{constructor(){this.ctxIsReady=!1;this.currentToken=null;this.buyWithToken=null;this.sellForToken=null;this.tokenList=[];this.buyModeConfigList=[];this.sellModeConfigList=[];this.initDataLoading=!1;this.tokenListLoading=!0;this.activeTokenSelector=null;this.activeTokenSelectorShown=!1;this.marketLatestInfo=null;this.tokenPairFeeRate={["buy"]:null,["sell"]:null};this.showPnl=U.get(an.SHOW_PNL)??!0;this.selectTradeMode="buy";Re(this)}setCtxIsReady(e){this.ctxIsReady=e}setCurrentToken(e){this.currentToken=e}get computedFormattedCurrentToken(){return{...this.currentToken,tokenSymbol:this.currentToken?.tokenSymbol||Gt,formattedTokenContractAddress:ct(this.currentToken?.tokenContractAddress,6,4),formattedBalance:pe(this.currentToken?.balance,{needPlaceholder:!0}),formattedAvailableCurrencyAmount:h.currencyConversionWithSymbol(this.currentToken?.currencyAmount,{needPlaceholder:!0})}}setBuyWithToken(e){this.buyWithToken=e}get computedFormattedBuyWithToken(){let e=this.buyWithToken;return{...e,tokenSymbol:e?.tokenSymbol||Gt,formattedTokenContractAddress:ct(e?.tokenContractAddress,6,4),formattedBalance:pe(e?.balance,{needPlaceholder:!0})}}setSellForToken(e){this.sellForToken=e}get computedFormattedSellForToken(){let e=this.sellForToken;return{...e,tokenSymbol:e?.tokenSymbol||Gt,formattedTokenContractAddress:ct(e?.tokenContractAddress,6,4),formattedBalance:pe(e?.balance,{needPlaceholder:!0})}}setTokenList(e){this.tokenList=e}get computedFormattedTokenList(){return this.tokenList.map(e=>({...e,label:e.tokenSymbol,value:e.tokenContractAddress,formattedBalance:pe(e.balance,{needPlaceholder:!0}),formattedCurrencyAmount:h.currencyConversionWithSymbol(e.currencyAmount,{needPlaceholder:!0})}))}setBuyModeConfigList(e){this.buyModeConfigList=e}setSellModeConfigList(e){this.sellModeConfigList=e}setInitDataLoading(e){this.initDataLoading=e}setTokenListLoading(e){this.tokenListLoading=e}setActiveTokenSelector(e,n){this.activeTokenSelector!==e&&!n||(this.activeTokenSelector=e,this.activeTokenSelectorShown=n)}setMarketLatestInfo(e){this.marketLatestInfo=e}get computedMarketLatestInfo(){return{...this.marketLatestInfo,formattedMarketCap:h.currencyConversionWithSymbol(this.marketLatestInfo?.marketCap)}}setTokenPairFeeRate(e){this.tokenPairFeeRate=e}},E=new Io;s();i();var ho=class{constructor(){this.getWalletInfoForRequest=e=>({accountId:M.computedAccountId,walletId:M.computedAccountId,userUniqueId:M.userUniqueId,userWalletAddress:M.getAddressByChainId(e)})}},ks=new ho;var So=class{constructor(){this.updateCurrentTokenInfo=async e=>{let[n,o]=await Se({url:zt,params:e});if(n||!o)return null;let r={...o.tokenInfo||{},balance:o.tokenInfo?.amountNum,defaultSellPercentList:o.defaultSellPercentList};return E.setCurrentToken(r),r};this.getTokenInfoAndBalance=async e=>{let n={chainId:e.chainId,tokenAddress:e.tokenContractAddress,...ks.getWalletInfoForRequest(e.chainId),businessType:"1"},[o,r]=await Se({url:Kt,params:n});return o||!r?null:(this.updateTokenBalance(r),r)};this.updateTokenBalance=e=>{if(mt(e,E.currentToken)){let n=cn(E.currentToken,e);E.setCurrentToken(n)}if(mt(e,E.buyWithToken)){let n=cn(E.buyWithToken,e);E.setBuyWithToken(n)}if(mt(e,E.sellForToken)){let n=cn(E.sellForToken,e);E.setSellForToken(n)}};this.updateTokenList=async({params:e,currentToken:n,needLoading:o})=>{o&&E.setTokenListLoading(!0);let[r,a]=await Se({url:Ct,params:{...e,accountId:M.computedAccountId,userUniqueId:M.userUniqueId,tradeType:1}});if(E.setTokenListLoading(!1),r||!a||!Array.isArray(a)||!a?.length)return E.setTokenList([]),[];let l=ds(a,n);return l.length?(E.setTokenList(l),l):(E.setTokenList([]),[])};this.storeBuyModeConfigList=e=>{let n=Lt(e,"buy");ms({token:E.buyWithToken,config:e}),E.setBuyModeConfigList(n)};this.updateBuyModeConfigListByToken=e=>{let n=cs(e);E.setBuyModeConfigList(n)};this.storeSellModeConfigList=e=>{let n=Lt(e,"sell");gs({token:E.currentToken,config:e}),E.setSellModeConfigList(n)};this.updateSellModeConfigListByToken=e=>{let n=fs(e);E.setSellModeConfigList(n)};this.openPresetModal=()=>{C.setPresetModalOpen(!0)};this.closePresetModal=()=>{C.setPresetModalOpen(!1)};this.openSettingModal=()=>{C.setSettingModalOpen(!0)};this.closeSettingModal=()=>{C.setSettingModalOpen(!1)};this.activateEditMode=()=>{C.setEditModeActive(!0)};this.deactivateEditMode=()=>{C.setEditModeActive(!1)};this.activateShortcut=()=>{C.setShortcutActive(!0)};this.deactivateShortcut=()=>{C.setShortcutActive(!1)};this.setBoostOnboardingShown=e=>{C.setBoostOnboardingShown(e)};this.resetUIState=()=>{C.setPresetModalOpen(!1),C.setSettingModalOpen(!1),C.setEditModeActive(!1),C.setShortcutActive(!1)};this.resetStoreData=()=>{E.setBuyModeConfigList([]),E.setSellModeConfigList([]),E.setCurrentToken(null),E.setBuyWithToken(null),E.setSellForToken(null)}}setShowPnl(e){E.showPnl=e,U.set(an.SHOW_PNL,e)}setSelectTradeMode(e){E.selectTradeMode=e}},q=new So;s();i();s();i();var Is=I(v());s();i();var yo=I(v());s();i();var hs=I(v());ue();var Ss=({tokenSymbol:t,amount:e,balance:n})=>!e||ee.lte(e,0)?(Z.error({title:y("swaptrade_instant_toast_cannot_be_zero")}),!1):ee.gt(e,n)?(Z.error({title:y("swaptrade_home_btn_insufficient_balance_of",{tokenSymbol:t})}),!1):!0,ys=t=>{if(G(t,"dexData.orderFrom","")===he.ORDER_FROM){let{dexData:n,type:o}=t||{},{status:r,transactionHash:a,orderId:l}=n||{};if(r===he.SUCCESS&&Number(o)===1){if(Er(a),vr(a))return;wr(a);let d=Xt.getDuration(l),u=d?Oe("swaptrade_toast_msg_transaction_success_time",{time:hs.default.createElement(xr,{duration:d})}):y("swaptrade_orders_text_details_success");X.success({title:u,placement:X.DIRECTION.top})}else r===he.FAILED&&X.error({title:y("swaptrade_top_text_history_failed"),placement:X.DIRECTION.top})}};var Cs=({chainId:t,tokenContractAddress:e})=>{let{computedAccountWalletAddresses:n,userUniqueId:o,computedAccountId:r}=M,{ctxIsReady:a}=E;(0,yo.useEffect)(()=>{let l;return n&&a&&(l=Fr(n)),()=>{l?.()}},[n,a]),(0,yo.useEffect)(()=>{let l;return a&&(l=Jt({isPri:!0,needLogin:!0,subscribeParams:[{channel:xt.DEX_PUSH_ENGINE},{channel:xt.WALLET_ASSET}],onListenError:()=>{},onListenData:(d,u)=>{if(!!d&&(u?.channel===xt.DEX_PUSH_ENGINE&&ys(d),u.channel===xt.WALLET_ASSET)){let c=d;if(c.tokenAddress!==e&&!c.isNativeToken)return;let m=c.tokenAddress;c.isNativeToken&&(m=To);let T=parseFloat(c.coinAmountOriginalDec)||c.amountNum||0,g={...c,amountNum:T};N.updateTokenBalance({chainId:c.chainId,tokenContractAddress:m,amountNum:T}),q.updateTokenBalance(g),q.updateTokenList({params:{chainId:t,userUniqueId:o,accountId:r,tokenContractAddress:e},currentToken:E.currentToken})}}})),()=>{l?.()}},[t,e,o,r,a])};s();i();var bs=I(v());var As=()=>{let{isConnectedWallet:t,computedAccountId:e}=M;(0,bs.useEffect)(()=>{t&&h.checkSupportMev().then(n=>{M.setWalletSupportMev(n)}).catch(()=>{})},[t,e])};s();i();var Tn=I(v());s();i();s();i();ue();s();i();var xs=async t=>{let{chainId:e,unsignedTx:n,hasReferralCommission:o,signWalletAddress:r,accountId:a,requestCommissionAddress:l,orderId:d,txHash:u}=t,c="";try{let T=JSON.parse(n);c=T.array?T.array[0].data:T.data}catch(T){ze.stuff({msg:"log-verifyCallData-error-parse-tx",error:T,unsignedTx:n})}c||eo({success:!1,refCode:"",parsedAddress:"",localCommissionAddress:"",walletId:a,txHash:u,orderId:d,callDataIsEmpty:!0,requestCommissionAddress:l,module:"market-quick-buy"});let m=await Mr({callData:c,chainId:Number(e),address:r,hasReferralCommission:o});m.success||eo({...m,walletId:a,txHash:u,orderId:d,requestCommissionAddress:l,module:"market-quick-buy"})};s();i();s();i();var Es=async t=>{if(!t)return{status:"confirm_order_error",success:!1,error:new Error("params is required")};let[e,n]=await un({url:pr,data:{walletId:t.accountId,userWalletAddress:t.userWalletAddress,orderId:t.orderId,signedTx:t.signedTx,transactionHash:t.transactionHash,executeSilentSignPreExecInConfirm:t.isSilent}});return e?(X.error({title:e?.error_message||y("swaptrade_home_toast_broadcast_failed"),placement:X.DIRECTION.top}),{status:"confirm_order_error",success:!1,error:e}):{status:"confirm_order_success",success:!0,result:n}};s();i();var Ma=async t=>{let e={isSilent:t.isSilent||t.defaultEnabledSilentMethod};if(h.isExtensionEnv){let d={calldataParams:{userWalletAddress:t.walletAddress,walletId:h.getWalletId()}},[u,c]=await te(h.signSolanaAllTransactions(t.txInfo,d)),m=await oo(c,{isWalletInstantTrade:!0});return[u,m]}let n=Ur(t.txInfo),o={chainId:Number(t.chainId),transactions:n},[r,a]=await te(qr.signAllTransactions(o,e));if(r)return[r,null];let l=await oo(a);return[r,l]},vs=async t=>{let e=await Wr(t.calldata.unsignedTx),[n,o]=await Ma({txInfo:e,isSilent:t.isSilent,defaultEnabledSilentMethod:t.defaultEnabledSilentMethod,walletAddress:t.userWalletAddress,chainId:t.chainId});return n?(tn(n)&&X.error({title:y("swaptrade_notification_notif_transaction_canceled"),placement:X.DIRECTION.top}),{status:"wallet_denied_eoa_sign_error",success:!1,error:n}):{status:"eoa_sign_success",success:!0,result:{txInfo:e,signedTx:o.signedTx,transactionHash:o.transactionHash||[]}}};s();i();var pn=async t=>{if(!t)return{status:"prepare_order_error",success:!1,error:new Error("params is required")};let{tradeMode:e,isSilent:n,isSa:o,presetConfig:r={},referralForQuote:a={},toTokenSymbol:l,...d}=t,[u,c]=await un({url:mr,data:{...d,...a,...r,teeSilentSignEnabled:o&&n,executeSilentSignPreExecInConfirm:n,accountBizLine:o?dt.sa:dt.other,referId:ut.getWalletId(),tradeMode:he.TRADE_MODE,direction:e==="buy"?"0":"1",orderFrom:he.ORDER_FROM,orderSource:he.ORDER_SOURCE}});return u?(Number(u?.error_code)===10058?Z.error({title:y("swaptrade_mid_alert_highrisk_token",{token:l}),desc:y("swaptrade_top_text_protect_capital")}):Z.error({title:u?.error_message||y("swaptrade_home_toast_initiation_error")}),{status:"prepare_order_error",success:!1,error:u}):{status:"prepare_order_success",success:!0,result:c}};s();i();ue();var ws=async()=>{let t=h.getSignWalletAddress(),e=h.getWalletAddressByChainId(yt.ETHEREUM_MAINNET);return t||e},Ls=()=>{let t=h.getSignWalletAddress(),e=h.getWalletAddressByChainId(yt.ETHEREUM_MAINNET);return t||e||""},fn=async(t,e)=>{let n=await Lr({address:t,chainId:Number(e)});return at(n)?{referralForQuote:{},referInfo:{}}:{referralForQuote:{refCode:n.refCode,referralCommissionJsVersion:Rr},referInfo:n}},gn=(t,e)=>t?.referralCommissionAddress?{...t,...e}:t||{};var Ms=async t=>{let{chainId:e,fromTokenAddress:n,toTokenAddress:o,amount:r,tradeMode:a,isSilent:l,isSa:d,referralForQuote:u,toTokenSymbol:c,buttonUniqueId:m,userWalletAddress:T,accountId:g,referInfo:f,defaultEnabledSilentMethod:p,presetConfig:k}=t,S=await pn({chainId:e,fromTokenAddress:n,toTokenAddress:o,amount:r,tradeMode:a,isSilent:l,isSa:d,presetConfig:k,referralForQuote:u,toTokenSymbol:c,userWalletAddress:T});if(!S.success)return{...S,buttonUniqueId:m};let b=G(S.result,"broadcastParam")||{},x=G(S.result,"calldata")||{},A=G(S.result,"orderId")||"",B=G(b,"serviceFeeInfo")||{},z=gn(B,f),J=await vs({calldata:x,userWalletAddress:T,chainId:b.chainId,isSilent:l,defaultEnabledSilentMethod:p});if(!J.success)return{...J,buttonUniqueId:m};let{signedTx:re,transactionHash:Q}=J.result;xs({chainId:b.chainId,unsignedTx:x.unsignedTx,hasReferralCommission:x?.hasReferralCommission,signWalletAddress:T,accountId:g,requestCommissionAddress:z?.referralCommissionAddress,orderId:A,txHash:Q?.[0]}).catch(()=>{}),A&&Xt.setTimestamp(A);let j=await Es({accountId:g,userWalletAddress:T,orderId:A,signedTx:re,transactionHash:Q,isSilent:l});return j.success?{...j,buttonUniqueId:m}:{...j,buttonUniqueId:m}};s();i();var Ra=t=>{let e=jn.tip({infoType:jn.Tip.INFO_TYPE.warn,title:y("swaptrade_top_alert_switch_wallets"),children:y("swaptrade_card_alert_switch_wallet_to_match",{chainName:t}),confirmText:y("commonall_text_btn_ok_passive"),onConfirm:()=>{e.destroy()}})},Rs=async(t,e,n,o,r)=>{if(!o&&!h.isExtensionEnv)return await Zt(Number(t)),{status:"wallet_not_connected",success:!1};if(h.isExtensionEnv){if(!o)return h.global.startOnboarding?.(),{status:"extension_will_onboard",success:!1};if(!r)return Z.error({title:y("swaptrade_top_alert_switch_wallets")}),{status:"no_user_wallet_address",success:!1};if(!await h.global.unlockWallet?.())return{status:"extension_wallet_not_unlocked",success:!1}}return await Nr({chainId:Number(t)})?await Pr({chain:Number(t)})?{status:"done",success:!0}:{status:"switch_network_error",success:!1}:(Ra(e),{status:"not_support_chain",success:!1,toastMessage:`Chain ${e} not supported`})};s();i();ue();s();i();s();i();async function Ps(t){return await Vr.post("/priapi/v1/dx/trade/multi/signAndBroadcast",t)}function Pa(t){if(tn(t))X.error({title:y("swaptrade_notification_notif_transaction_canceled"),placement:X.DIRECTION.top});else{let e=t.error_message||t.msg||y("swaptrade_home_toast_initiation_error");X.error({title:e,placement:X.DIRECTION.top})}}async function Na(t,e,{isSilent:n=!1,logger:o=ze}){let r=n?{methodStart:performance.now(),beforeSign:0,afterSign:0,afterRequest:0}:null;o.info(De.INTENTION_SWAP_SIGN_AND_BROADCAST_START,{type:t,chainId:e.chainId,fromTokenAddress:e.signParams?.fromTokenAddress,toTokenAddress:e.signParams?.toTokenAddress,fromAmount:e.signParams?.fromAmount,isSilent:n});try{if(!await Zt(Number(e.chainId)))throw new Error("Switch network failed");let{signParams:l,tpslConfig:d,teeId:u,...c}=e;r&&(r.beforeSign=performance.now());let{signMsg:m,signature:T}=await Hr[t]({chainId:Number(l.chainId),walletAddress:l.walletAddress,fromTokenAddress:l.fromTokenAddress,toTokenAddress:l.toTokenAddress,fromAmount:l.fromAmount,minReturnAmount:l.minReturnAmount,referrerAddress:l.referrerAddress||"",referrerCode:l.referrerCode||"",expireMs:l.expireMs},{isSilent:n}),g={signMsg:m,signature:T,accountId:e.accountId,address:e.userWalletAddress,teeId:u,chainId:e.chainId,command:t};r&&(r.afterSign=performance.now());let[f,p]=await te(Ps({...c,walletAuthParam:g}));if(r&&(r.afterRequest=performance.now()),f)throw o.error(De.INTENTION_SWAP_SIGN_AND_BROADCAST_ERROR,{type:t,chainId:e.chainId,error:f}),Pa(f),f;return o.updateMonitorData({txHash:p?.data?.marketOrderDetail?.transactionHash,orderId:p?.data?.marketOrderDetail?.orderId}),o.info(De.INTENTION_SWAP_SIGN_AND_BROADCAST_SUCCESS,{type:t,chainId:e.chainId,result:p}),p}catch(a){throw o.error(De.INTENTION_SWAP_SIGN_AND_BROADCAST_ERROR,{type:t,chainId:e.chainId,error:a}),a}}async function _n(t,e){try{return await Na("Swap",t,{isSilent:e.isSilent})}catch(n){throw console.error(n),n}}var Ns=async t=>{let{buttonUniqueId:e,userWalletAddress:n,accountId:o,teeStatus:r,isOkxWallet:a,updateSAStatus:l,referInfo:d,defaultEnabledSilentMethod:u,...c}=t,m=await pn({...c,userWalletAddress:n});if(!m.success)return{...m,buttonUniqueId:t.buttonUniqueId};let T=G(m.result,"broadcastParam")||{},g=G(m.result,"commonDexInfo")||{},f=G(T,"serviceFeeInfo")||{},p=gn(f,d),{fromToken:k,toToken:S}=g,[b,x]=await te(_n({...T,tradeMode:4,accountId:o,orderFrom:"instant_trade",signParams:{chainId:Number(c.chainId),walletAddress:n,fromTokenAddress:k?.tokenContractAddress,toTokenAddress:S?.tokenContractAddress,fromAmount:Et(c.amount,k?.decimals),minReturnAmount:Et(T?.minimumReceived||"0",S?.decimals),referrerAddress:p?.referralCommissionAddress,referrerCode:p?.refCode},teeId:r?.id},{isSilent:c.isSilent||u}));return b?(l?.(r?.id,a),{status:"manual_sa_trade_error",success:!1,error:b,buttonUniqueId:t.buttonUniqueId}):{status:"done",success:!0,result:x,buttonUniqueId:t.buttonUniqueId}};s();i();var Os=async t=>{let{buttonUniqueId:e,userWalletAddress:n,isSilent:o,defaultEnabledSilentMethod:r,referInfo:a,fromToken:l,toToken:d,accountId:u,teeStatus:c,isOkxWallet:m,updateSAStatus:T,chainId:g,amount:f,presetConfig:p,tradeMode:k,isSa:S}=t,b={chainId:g,fromTokenAddress:l?.tokenContractAddress,toTokenAddress:d?.tokenContractAddress,teeSilentSignEnabled:o,executeSilentSignPreExecInConfirm:!0,accountBizLine:S?dt.sa:dt.other,routerModeType:p.routeModeType,...p,referId:ut.getWalletId(),amount:f,userWalletAddress:n,accountId:u,referrerAddress:a?.referralCommissionAddress,referrerCode:a?.refCode,tradeMode:he.TRADE_MODE,orderSource:he.ORDER_SOURCE,orderFrom:he.ORDER_FROM,direction:k==="buy"?"0":"1",useBackendQuote:!0},[x,A]=await te(_n({...b,signParams:{chainId:Number(g),walletAddress:n,fromTokenAddress:l?.tokenContractAddress,toTokenAddress:d?.tokenContractAddress,fromAmount:Et(f,l?.decimals),minReturnAmount:"0",referrerAddress:a?.referralCommissionAddress,referrerCode:a?.refCode},teeId:c?.id},{isSilent:o||r}));return x?(T?.(c?.id,m),{status:"silent_sa_trade_error",success:!1,error:x,buttonUniqueId:e}):{status:"done",success:!0,result:A,buttonUniqueId:e}};var Ds=t=>(t.success&&X.pending({title:y("wallet_swap_toast_swap_submitted"),placement:X.DIRECTION.top}),t),Bs=async t=>{let{chainName:e,amount:n,toToken:o,accountId:r,userWalletAddress:a,teeStatus:l,isOkxWallet:d,buttonUniqueId:u,isSilent:c,isSa:m,defaultEnabledSilentMethod:T,updateSAStatus:g,...f}=t,p=await Rs(f.chainId,e,n,r,a);if(!p.success)return{...p,buttonUniqueId:u};let k=await ws(),{referralForQuote:S,referInfo:b}=await fn(k,f.chainId);if(m&&!c){let A=await Ns({chainId:t.chainId,fromTokenAddress:t.fromToken.tokenContractAddress,toTokenAddress:t.toToken.tokenContractAddress,amount:String(n),accountId:r,teeStatus:l,isOkxWallet:d,referInfo:b,defaultEnabledSilentMethod:T,userWalletAddress:a,tradeMode:t.tradeMode,isSilent:c,isSa:m,presetConfig:t.presetConfig,referralForQuote:S,toTokenSymbol:t.toToken.tokenSymbol,buttonUniqueId:u});return Ds(A)}if(m&&c){let A=await Os({chainId:t.chainId,amount:String(n),userWalletAddress:a,fromToken:t.fromToken,toToken:t.toToken,accountId:r,teeStatus:l,isOkxWallet:d,presetConfig:t.presetConfig,buttonUniqueId:u,isSilent:c,defaultEnabledSilentMethod:T,referInfo:b,updateSAStatus:g,tradeMode:t.tradeMode,isSa:m});return Ds(A)}let x=await Ms({isSilent:c,defaultEnabledSilentMethod:T,accountId:r,userWalletAddress:a,chainId:t.chainId,fromTokenAddress:t.fromToken.tokenContractAddress,toTokenAddress:t.toToken.tokenContractAddress,amount:String(n),tradeMode:t.tradeMode,isSa:m,referralForQuote:S,toTokenSymbol:t.toToken.tokenSymbol,buttonUniqueId:u,referInfo:b,presetConfig:t.presetConfig});return x.success&&X.pending({title:y("wallet_swap_toast_swap_submitted"),placement:X.DIRECTION.top}),{...x,buttonUniqueId:u}};var et=(t,e)=>{let{defaultEnabledSilentMethod:n,silentEnabled:o}=M,r=M.computedAccountId,a=M.computedTeeInfo,l=M.computedIsOkxWallet,{fetchConfigStatus:d,computedSelectPriorityFeeStateForInstantBuy:u,computedSelectPriorityFeeStateForInstantSell:c,computedSelectSlippageStateForInstantBuy:m,computedSelectSlippageStateForInstantSell:T,computedSelectRouterModeTypeForInstantBuy:g,computedSelectRouterModeTypeForInstantSell:f}=w,p=(0,Tn.useMemo)(()=>{let k=t==="buy"?u:c,{type:S,value:b}=k,x=t==="buy"?m:T,{mode:A,value:B,customMax:z}=x,J=yr[S],re=Sr[A],Q={};return re===1?Q={maxSlippage:z}:Q={slippage:B},{routeModeType:t==="buy"?g:f,priorityFeeType:J,priorityFee:J===4?b:null,slippageType:re,...Q}},[t,m,T,u,c,g,f]);return(0,Tn.useCallback)(async k=>{let{amount:S,fromToken:b,toToken:x,buttonUniqueId:A}=k;C.setButtonLoading(A,!0);let{chainId:B,chainName:z,tokenSymbol:J,balance:re}=b||{},{chainId:Q,chainName:j}=x||{},de=B||Q,xe=z||j,me=M.getAddressByChainId(B);if(h.isExtensionEnv&&!r){h.global.startOnboarding?.(),C.setButtonLoading(A,!1);return}if(!Ss({tokenSymbol:J,amount:S,balance:re})){C.setButtonLoading(A,!1);return}if(d===ie.ERROR){Z.error({title:y("swaptrade_quick_buy_alert_title_unable_to_load_preset")}),C.setButtonLoading(A,!1);return}try{let $e=await Bs({amount:S,chainId:`${de}`,chainName:xe,fromToken:b,toToken:x,userWalletAddress:me,tradeMode:t,presetConfig:p,accountId:r,teeStatus:a,isOkxWallet:l,buttonUniqueId:A,isSilent:o,isSa:!1,defaultEnabledSilentMethod:n,updateSAStatus:e});C.setButtonLoading($e.buttonUniqueId,!1)}catch($e){console.error("TRADE_ERROR",$e),C.setButtonLoading(A,!1)}},[t,p,d,r,a,l,o,n,e])};s();i();var Us=I(v());s();i();var Da={0:"buy_order_qty_low_click",1:"buy_order_qty_mid_click",2:"buy_order_qty_high_click",3:"buy_order_qty_full_click"},Ba={0:"sell_order_qty_low_click",1:"sell_order_qty_mid_click",2:"sell_order_qty_high_click",3:"sell_order_qty_full_click"},Fa={0:"buy_order_qty_low_hotkey",1:"buy_order_qty_mid_hotkey",2:"buy_order_qty_high_hotkey",3:"buy_order_qty_full_hotkey"},Wa={0:"sell_order_qty_low_hotkey",1:"sell_order_qty_mid_hotkey",2:"sell_order_qty_high_hotkey",3:"sell_order_qty_full_hotkey"},Ua={0:"low",1:"mid",2:"high",3:"full"},Ws=()=>({business_type:"instant_trade",page_name:"instant_trade",orderSource:"instant_trade",terminal:h.isExtensionEnv?"extension":"web",popup_source:h.isExtensionEnv?h.global.domainName:"market_token_details"}),ye=t=>{Tr({...Ws(),button_name:t})},Ue=({btnIndex:t,isHotkey:e,isBuy:n,toTokenSymbol:o,fromTokenSymbol:r})=>{let a=n?{hotkey:Fa[t],normal:Da[t]}:{hotkey:Wa[t],normal:Ba[t]};ye(a[e?"hotkey":"normal"]);let l=n?{buy_qty:!0}:{sell_qty:!0};Ir({...Ws(),button_name:a[e?"hotkey":"normal"],instant_order_type:e?"hotkey":"click",instant_order_qty:Ua[t],from_token_symbol:r,to_token_symbol:o,...l})};s();i();var qs=I(v());s();i();var Vs=I(v());s();i();ue();s();i();s();i();ue();function qa(t){return typeof t=="number"&&Number.isFinite(t)||typeof t=="string"&&t!==""&&Number.isFinite(Number(t))}var kn=(t="")=>{let{pathname:e}=sr(),n=t||e,[o,r]=n.split("/").slice(-2),a,l,d=!1;return qa(o)?(a=o,l=Yn.chainInfo?.[a]||"",d=!!l):(l=o,a=$o(Yn.chainInfo,u=>u===l)),{chainId:a,chainName:l,tokenContractAddress:decodeURIComponent(r),needRedirect:d}};s();i();function Co(t){let e=t.slippageConfig.slippageRange.find(r=>r.selected),n;t.feeConfig?.feeOptions&&(n=t.feeConfig?.feeOptions.find(r=>r.selected));let o={slippageType:t.slippageConfig.slippageType};return t.routeConfig&&(o.routerModeType=t.routeConfig.routerModeType),n&&(o.feeLevel=n?.feeLevel),t.slippageConfig.slippageType===2&&(o.slippageLevel=e?.slippageLevel,o.slippageValue=e.slippageValue),t.slippageConfig.slippageType===1&&t.slippageConfig.dynamicMaxSlippageValue&&(o.dynamicMaxSlippageValue=t.slippageConfig.dynamicMaxSlippageValue),n?.feeLevel===4&&(o.feeValue=n.feeValue),o}var bo=class{constructor(){this.fetchPreset=async({chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r=!1})=>{w.cancelFetchPresetRef&&w.cancelFetchPresetRef.abort();let a=h.createAbortController();w.update({userWalletAddress:o,accountId:n,chainId:e,cancelFetchPresetRef:a});let l={chainId:e};o&&(l.walletAddress=o);let d=h.getOnt(),[u,c]=await te(d.get(ur,{params:l,signal:w.cancelFetchPresetRef?.signal,isolate:!0}));if(u){if(h.isCancel(u))return;w.update({fetchConfigStatus:ie.ERROR,loadError:!0,presetsList:[]}),ze.info(De.MARKET_SWAP_FETCH_CONFIG_ERROR,{data:{params:{chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r},type:"fetchPreset",error:u}});return}let{data:m}=c;if(r){let{chainId:T}=kn();if(Number(T)!==Number(m?.chainId)){w.update({fetchConfigStatus:ie.ERROR,loadError:!0}),ze.info(De.MARKET_SWAP_FETCH_CONFIG_ERROR,{data:{params:{chainId:e,accountId:n,userWalletAddress:o,needCheckChainId:r},type:"fetchPreset",res:c}});return}}w.update({loadError:!1}),this.updatePreset(m,o),this.initQuickBuyAmount(m.quickBuyDefaultBuyAmount)};this.updatePreset=(e,n)=>{if(!e)return;let{dexPresetResultVOList:o,nativeTokenInfo:r,mevPriceThreshold:a,dynamicSupportMax:l,supportAutoMode:d,supportSlippage:u,supportEip1559:c,supportCustomGasFee:m,memeChainType:T,networkFeeUnit:g,networkFeeDecimals:f,subscribeProvider:p,quoteIntervalMs:k}=e,S=U.get($t),{presetSelectType:b}=S?.[n]||{};!o.some(A=>A.presetType===b)&&o.length>0&&(b=o[0].presetType),w.update({firstFetchPresetStatus:!0,fetchConfigStatus:ie.READY,presetsList:o,nativeTokenInfo:r,mevPriceThreshold:a,dynamicSupportMax:l,supportSlippage:u,presetSelectType:b,supportAutoMode:d,supportEip1559:c,supportCustomGasFee:m,memeChainType:T,networkFeeUnit:g,networkFeeDecimals:f,subscribeProvider:p,quoteIntervalMs:k})};this.fetchPresets=async({chainIds:e,accountId:n,currentChainId:o,userWalletAddress:r})=>{w.cancelFetchPresetRef&&w.cancelFetchPresetRef.abort(),w.update({userWalletAddress:r,accountId:n,chainId:o,cancelFetchPresetRef:h.createAbortController()});let[a,l]=await te(h.getOnt().get?.(cr,{params:{chainIds:e,accountId:n},signal:w.cancelFetchPresetRef?.signal,isolate:!0}));if(a){if(h.isCancel(a))return;w.update({fetchConfigStatus:ie.ERROR,presetsList:[]});return}let{data:d}=l,u=d.find(c=>c.chainId===Number(o));u&&(this.updatePreset(u,r),this.initQuickBuyAmount(u.quickBuyDefaultBuyAmount)),w.update({presetListWithChain:d})};this.savePreset=async e=>{let{chainId:n,accountId:o,userWalletAddress:r}=w;if(St(n)||St(o)||St(r)||at(e))return Z.error({title:y("swaptrade_preset_toast_header_unable_to_save_changes")}),!1;w.update({fetchSaveStatus:ie.LOADING});let a=e.map(({id:d,name:u,presetType:c,buyPreset:m,sellPreset:T})=>({id:d,name:u,presetType:c,buyPreset:Co(m),sellPreset:Co(T)})),[l]=await te(nn.save({chainId:n,accountId:o,userWalletAddress:r,sceneType:0,presets:a}));return l?(w.update({fetchSaveStatus:ie.ERROR}),Z.error({title:y("swaptrade_preset_toast_header_unable_to_save_changes")}),!1):(ze.info(De.PRESET_EDIT_SAVE,{data:{chainId:n,accountId:o,userWalletAddress:r,presets:a,selectType:w.presetEditType}}),await this.fetchPreset({chainId:w.chainId,accountId:w.accountId,userWalletAddress:w.userWalletAddress}),w.update({fetchSaveStatus:ie.READY}),this.setSelectType(w.presetEditType),!0)};this.resetPreset=async e=>{if(St(e))return Z.error({title:y("swaptrade_preset_toast_header_unable_to_reset_this")}),!1;w.update({fetchResetStatus:ie.LOADING});let[n,o]=await te(nn.reset({chainId:w.chainId,presetType:e}));if(n)return w.update({fetchResetStatus:ie.ERROR}),Z.error({title:y("swaptrade_preset_toast_header_unable_to_reset_this")}),!1;let{dexPresetResultVOList:r}=o.data,a=r?.[0],l=w.editPresetsList.map(d=>d.presetType===e?{...a,name:d.name}:d);return w.update({fetchResetStatus:ie.READY,editPresetsList:l}),!0};this.setSelectType=e=>{w.update({presetSelectType:e}),this.storageSelectType(e)};this.storageSelectType=e=>{let n=U.get($t),{userWalletAddress:o}=w,r=Ze({},n,{[o]:{presetSelectType:e}});U.set($t,r)};this.setQuickBuyAmount=e=>{w.updateByKey("quickBuyAmount",e),U.set($n,e)};this.initQuickBuyAmount=e=>{let n=U.get($n);this.setQuickBuyAmount(n||e)};this.setQuickBuyPresetGuide=e=>{w.updateByKey("quickBuyPresetGuide",e),U.set(Xn,e)};this.initQuickBuyPresetGuide=()=>{let e=U.get(Xn);this.setQuickBuyPresetGuide(e??1)}}},tt=new bo;function Hs({defaultChainId:t,shouldFetch:e}={shouldFetch:!0}){let{currentToken:n}=E,o=n?.chainId||t,{computedAccountId:r}=M,a=M.getAddressByChainId(o),l=E.ctxIsReady;(0,Vs.useEffect)(()=>{e&&o&&l&&a&&(w.update({selectTradeMode:"buy",tradeScene:0}),tt.fetchPreset({chainId:o,accountId:r||"",userWalletAddress:a}))},[r,a,o,l,e])}s();i();var Pt=I(v());var Va=t=>{let{buyModeConfigList:e,buyWithToken:n,currentToken:o}=E;return{amount:String(e[t].amount),fromToken:n,toToken:o,buttonUniqueId:e[t].buttonUniqueId}},Ha=t=>{let{sellModeConfigList:e,currentToken:n,sellForToken:o}=E,r=e[t].percent;return{amount:ee.floorMul(r,n.amountNum,n.decimals),fromToken:n,toToken:o,buttonUniqueId:e[t].buttonUniqueId}},Gs=()=>{let t=et("buy"),e=et("sell"),{currentToken:n}=E,{isSettingModalOpen:o,isEditModeActive:r,isPresetModalOpen:a,isShortcutActive:l}=C,d=(0,Pt.useMemo)(()=>n&&!(o||r||a),[n,o,r,a]);(0,Pt.useEffect)(()=>{let u=m=>{if(!!d&&m.code===sn.SPACE){if(m.repeat)return;C.setSpacePressed(!0)}},c=m=>{if(!!d){if(C.isShortcutActive&&C.spacePressed&&m.code!==sn.SPACE){let g=[...vt,...wt].find(f=>m.code===`Key${f.key.toUpperCase()}`);if(g){let f=vt.findIndex(k=>k.key===g.key),p=wt.findIndex(k=>k.key===g.key);if(f>-1){let k=Va(f);Ue({btnIndex:f,toTokenSymbol:k.toToken?.tokenSymbol,fromTokenSymbol:k.fromToken?.tokenSymbol,isHotkey:!0,isBuy:!0}),t(k)}else if(p>-1){let k=Ha(p);Ue({btnIndex:p,toTokenSymbol:k.toToken?.tokenSymbol,fromTokenSymbol:k.fromToken?.tokenSymbol,isHotkey:!0,isBuy:!1}),e(k)}}}m.code===sn.SPACE&&C.setSpacePressed(!1)}};return l?(document.addEventListener("keydown",u),document.addEventListener("keyup",c)):(document.removeEventListener("keydown",u),document.removeEventListener("keyup",c)),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",c)}},[l,t,e,d]),(0,Pt.useEffect)(()=>{let u=()=>{C.spacePressed&&C.setSpacePressed(!1)},c=()=>{document.hidden&&C.spacePressed&&C.setSpacePressed(!1)};return window.addEventListener("blur",u),document.addEventListener("visibilitychange",c),()=>{window.removeEventListener("blur",u),document.removeEventListener("visibilitychange",c)}},[])};s();i();var ke=I(v());s();i();var Ks=async t=>await h.getOnt()?.get?.("/priapi/v1/dx/trade/multi/tokenPair/feeRate",{params:t});var Ga=t=>Object.fromEntries(Object.entries(t).map(([e,n])=>[e,typeof n=="number"?parseFloat(n.toFixed(5)):n])),js=4,zs=t=>{let[e,n]=(0,ke.useState)(null),[o,r]=(0,ke.useState)(!1),[a,l]=(0,ke.useState)(null),{chainId:d}=t||{},{chainId:u}=kn(),{currentToken:c,buyWithToken:m,sellForToken:T}=E,g=Ls(),f=(0,ke.useRef)({chainId:"",currentTokenAddress:"",buyWithTokenAddress:"",sellForTokenAddress:"",userWalletAddress:""}),p=(0,ke.useRef)(!1),k=(0,ke.useMemo)(()=>({chainId:d||u||"",currentTokenAddress:c?.tokenContractAddress||"",buyWithTokenAddress:m?.tokenContractAddress||"",sellForTokenAddress:T?.tokenContractAddress||"",userWalletAddress:g||""}),[d,u,c?.tokenContractAddress,m?.tokenContractAddress,T?.tokenContractAddress,g]),S=(0,ke.useMemo)(()=>{let x=f.current;return{chainId:x.chainId!==k.chainId,currentTokenAddress:x.currentTokenAddress!==k.currentTokenAddress,buyWithTokenAddress:x.buyWithTokenAddress!==k.buyWithTokenAddress,sellForTokenAddress:x.sellForTokenAddress!==k.sellForTokenAddress,userWalletAddress:x.userWalletAddress!==k.userWalletAddress}},[k]),b=(0,ke.useMemo)(()=>Object.values(S).some(Boolean),[S]);return(0,ke.useEffect)(()=>!k.chainId||!k.currentTokenAddress||!b||p.current?void 0:((async()=>{try{p.current=!0,r(!0),l(null),f.current={...k};let A=[],{referInfo:B}=await fn(k.userWalletAddress,k.chainId),z=B?.refCode||"";if(k.buyWithTokenAddress&&(S.chainId||S.currentTokenAddress||S.buyWithTokenAddress||S.userWalletAddress)&&A.push({mode:"buy",params:{chainId:k.chainId,fromTokenAddress:k.buyWithTokenAddress,toTokenAddress:k.currentTokenAddress,tradeMode:js,refCode:z,userWalletAddress:k.userWalletAddress}}),k.sellForTokenAddress&&(S.chainId||S.currentTokenAddress||S.sellForTokenAddress||S.userWalletAddress)&&A.push({mode:"sell",params:{chainId:k.chainId,fromTokenAddress:k.currentTokenAddress,toTokenAddress:k.sellForTokenAddress,tradeMode:js,refCode:z,userWalletAddress:k.userWalletAddress}}),A.length===0)return;let J=await Promise.allSettled(A.map(Q=>Ks(Q.params))),re={};if(J.forEach((Q,j)=>{if(Q.status==="fulfilled"){let de=A[j].mode;re[de]=Ga(Q.value.data)}}),Object.keys(re).length>0){let j={...E.tokenPairFeeRate||{},...re};E.setTokenPairFeeRate(j),n(j)}}catch(A){l(A instanceof Error?A.message:"Unknown error")}finally{r(!1),p.current=!1}})().catch(A=>{l(A instanceof Error?A.message:"Unknown error"),p.current=!1}),()=>{p.current=!1}),[k,b,S]),{data:e,loading:o,error:a}};s();i();var Ka=I(v());s();i();var ne=I(v());var ja=(t={})=>{let{onPaste:e,targetElement:n,enabled:o=!0}=t,[r,a]=(0,ne.useState)(""),[l,d]=(0,ne.useState)(!1),u=(0,ne.useRef)(null),c=(0,ne.useRef)({text:"",timestamp:0}),m=(0,ne.useCallback)(x=>{let A=Date.now(),B=c.current;B.text===x&&A-B.timestamp<100||(c.current={text:x,timestamp:A},a(x),e?.(x))},[e]),T=(0,ne.useCallback)(async()=>{try{if(!navigator.clipboard||!navigator.clipboard.readText)return"";let x=await navigator.clipboard.readText();return m(x),hr({token_contract_address:x}),x}catch{return""}},[m]),g=(0,ne.useCallback)(x=>{if(!o)return;let A=x.clipboardData?.getData("text/plain")||"";m(A)},[o,m]),f=(0,ne.useCallback)(x=>{if(!o)return;(navigator.platform.toUpperCase().indexOf("MAC")>=0?x.metaKey:x.ctrlKey)&&x.key==="v"&&setTimeout(()=>{T()},10)},[o,T]),p=(0,ne.useCallback)(()=>{if(!o)return;let x=n||u.current||document;x.addEventListener("paste",g),x.addEventListener("keydown",f),d(!0)},[o,n,g,f]),k=(0,ne.useCallback)(()=>{let x=n||u.current||document;x.removeEventListener("paste",g),x.removeEventListener("keydown",f),d(!1)},[n,g,f]),S=(0,ne.useCallback)(()=>T(),[T]),b=(0,ne.useCallback)(()=>{a("")},[]);return(0,ne.useEffect)(()=>(o?p():k(),()=>{k()}),[o,p,k]),{pastedText:r,isListening:l,startListening:p,stopListening:k,triggerPaste:S,clearPastedText:b,elementRef:u}},Ys=ja;s();i();var Ot=I(v()),$s=I($());s();i();var hn=I(v()),Qs=I($());s();i();var Nt={content:"_content_1imqe_1","from-onboarding":"_from-onboarding_1imqe_10",fromOnboarding:"_from-onboarding_1imqe_10",link:"_link_1imqe_14","boost-text":"_boost-text_1imqe_19",boostText:"_boost-text_1imqe_19"};var za=({fromOnboarding:t,onClick:e})=>hn.default.createElement("div",{className:(0,Qs.default)(Nt.content,{[Nt.fromOnboarding]:!!t})},Oe("swaptrade_function_emptystate_get_boost",{get:hn.default.createElement("span",{className:Nt.link,onClick:e},Oe("swaptrade_function_emptystate_text_boost_points",{boost:hn.default.createElement("span",{className:Nt.boostText},y("swaptrade_function_emptystate_text_boost"))}))})),Sn=za;s();i();var yn={"boost-info":"_boost-info_1w65k_1",boostInfo:"_boost-info_1w65k_1",close:"_close_1w65k_8"};var Ya=({fromOnboarding:t,onClick:e,onClose:n})=>Ot.default.createElement("div",{className:(0,$s.default)(yn.boostInfo,{[yn.fromOnboarding]:t})},Ot.default.createElement(Sn,{onClick:e}),Ot.default.createElement("div",{className:yn.close,onClick:n},Ot.default.createElement(P,{className:"okds-close",fontSize:"16px"}))),Xs=Ya;s();i();var be=I(v());var xo=I($());s();i();var Ce={"boost-onboarding":"_boost-onboarding_jxvm5_1",boostOnboarding:"_boost-onboarding_jxvm5_1","top-bar":"_top-bar_jxvm5_11",topBar:"_top-bar_jxvm5_11","close-icon":"_close-icon_jxvm5_21",closeIcon:"_close-icon_jxvm5_21","drag-icon":"_drag-icon_jxvm5_31",dragIcon:"_drag-icon_jxvm5_31","extension-logo":"_extension-logo_jxvm5_42",extensionLogo:"_extension-logo_jxvm5_42","content-wrapper":"_content-wrapper_jxvm5_46",contentWrapper:"_content-wrapper_jxvm5_46",content:"_content_jxvm5_46","main-image":"_main-image_jxvm5_63",mainImage:"_main-image_jxvm5_63",button:"_button_jxvm5_67"};s();i();var ae=I(v());var Qa=()=>ae.default.createElement("svg",{className:Ce.mainImage,width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"https://www.w3.org/2000/svg"},ae.default.createElement("path",{d:"M85.5544 43.3911L66.8049 43.3911",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M53.751 23.559C51.2839 17.0492 45.6508 12.5 39.0964 12.5C31.3017 12.5 24.8101 18.9336 23.3965 27.4473",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M57.2149 54.9486C59.9326 51.5011 61.5879 46.9279 61.5879 41.9101C61.5879 31.1758 54.0121 22.4719 44.6668 22.4694C44.5557 22.4694 44.4448 22.4706 44.3342 22.473L44.3342 22.4676L49.808 22.4674C59.1533 22.4699 66.7291 31.1738 66.7291 41.9082C66.7291 48.9357 63.482 55.0913 58.6171 58.5039L57.2149 54.9486Z",fill:"#BCFF2F",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M57.1809 54.8507C59.843 51.4146 61.4612 46.8805 61.4612 41.9101C61.4612 31.1757 53.9137 22.4718 44.6034 22.4693C39.243 22.4679 33.7663 25.2924 30.6658 29.9385",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M34.101 12.5C25.2725 12.5 18.1155 20.7536 18.1155 30.935C18.1155 31.1064 18.1175 31.2773 18.1215 31.4476C19.0922 29.433 21.0073 27.8948 23.383 27.5299C24.7387 19.1581 31.0008 12.7777 38.597 12.5088V12.5H34.101Z",fill:"#BCFF2F",stroke:"#BCFF2F",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M7.5 83.4996H84.6803",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M81.5582 43.3911L77.3254 43.3911C75.9867 43.3911 74.81 44.278 74.4414 45.5649L65.5726 76.5243",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M18.1155 38.4086L11.3122 38.4086C9.95087 38.4086 9.01352 39.7748 9.50342 41.0449L24.398 79.6592C25.2906 81.9735 27.5154 83.4999 29.9959 83.4999L67.8314 83.4999",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M34.87 38.4086L48.7337 38.4086C49.9728 38.4086 51.0844 39.1703 51.5316 40.3259L65.3307 75.9852C66.0955 77.9616 67.9967 79.2645 70.116 79.2645C72.4196 79.2645 74.4409 77.7292 75.0589 75.5101L83.6051 44.8243C83.841 43.9771 84.6127 43.391 85.4921 43.391C87.0205 43.391 88.1424 44.8267 87.773 46.3098L80.0202 77.4334C79.1323 80.9979 75.9309 83.4997 72.2574 83.4997H68.2485",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M69.1958 83.4999H67.091C64.6224 83.4999 62.4057 81.9879 61.5048 79.6895L46.5153 41.447C45.943 39.9869 47.0196 38.4086 48.5879 38.4086",stroke:"white",strokeWidth:"0.75",strokeLinecap:"round"}),ae.default.createElement("path",{d:"M23.7895 48.3735H36.9087C37.6006 48.3735 38.0834 47.6878 37.8501 47.0364L32.972 33.4132C31.6906 29.8349 28.2741 27.4473 24.4733 27.4473C19.5282 27.4473 16.1007 32.4357 17.9264 37.0315L21.9307 47.1119C22.2333 47.8735 22.9699 48.3735 23.7895 48.3735Z",stroke:"white",strokeWidth:"0.75"}),ae.default.createElement("ellipse",{cx:"25.6087",cy:"35.9174",rx:"3.49684",ry:"3.4877",stroke:"white",strokeWidth:"0.75"}),ae.default.createElement("path",{d:"M76.0631 12.5L76.063 12.6054M82.0577 18.4789L81.9365 18.479M76.0631 24.4578L76.063 24.3524M70.0685 18.4789L70.1896 18.4788M70.1896 18.4788C73.4324 18.4765 76.0607 15.8483 76.063 12.6054M70.1896 18.4788C73.4324 18.4811 76.0607 21.1095 76.063 24.3524M76.063 12.6054C76.0653 15.8483 78.6937 18.4767 81.9365 18.479M76.063 24.3524C76.0653 21.1095 78.6937 18.4813 81.9365 18.479",stroke:"white",strokeWidth:"0.75",strokeLinejoin:"round"}),ae.default.createElement("ellipse",{cx:"11.6213",cy:"75.7769",rx:"2.49775",ry:"2.49121",stroke:"white",strokeWidth:"0.75"})),Zs=Qa;var $a=({onClose:t})=>{let e=`https://${h.global?.getStaticHostname?.()}/cdn/assets/imgs/254/43DEFFE88CCA0D7C.png`;return be.default.createElement("div",{className:Ce.boostOnboarding},be.default.createElement(P,{className:(0,xo.default)(Ce.dragIcon,"okx-defi-dex-drag")}),be.default.createElement("div",{className:Ce.topBar},be.default.createElement(ve,{src:e,pictureClassName:Ce.extensionLogo,width:16,height:16}),be.default.createElement(P,{className:(0,xo.default)(Ce.closeIcon,"okx-defi-collapse"),onClick:n=>{n?.detail!==0&&t&&t()},a11yText:"Close"})),be.default.createElement("div",{className:Ce.contentWrapper},be.default.createElement("div",{className:Ce.content},be.default.createElement("div",{className:Ce.image},be.default.createElement(Zs,null)),be.default.createElement(Sn,{fromOnboarding:!0,onClick:()=>{}})),be.default.createElement(ce,{className:Ce.button,category:ce.CATEGORY.outline,type:ce.TYPE.primary,size:ce.SIZE.md,onClick:()=>{C.setBoostOnboardingShown(!0)}},y("swaptrade_function_emptystate_btn_start"))))},Js=D($a);s();i();var ft=I(v());s();i();var fe=I(v()),ri=I(wa());s();i();var nt=I(v());s();i();var{DEX_MARKET_CHANNEL:Xa,DEX_MARKET_TX_CHANNEL:ei}=en,Za=t=>t?t==="1"?ei:Xa:ei,ti=t=>Array.isArray(t)?t.map(e=>({channel:Za(e?.isTxPrice),chainId:String(e?.chainId),tokenAddress:e?.tokenContractAddress||e?.tokenAddress})):[];ue();s();i();var Eo=class{constructor(){this.marketLatestInfo=null;Re(this)}setMarketLatestInfo(e){this.marketLatestInfo=e}get computedMarketLatestInfo(){return{...this.marketLatestInfo,formattedMarketCap:h.currencyConversionWithSymbol(this.marketLatestInfo?.marketCap)}}},Cn=new Eo;var wo=t=>{!t||Cn.setMarketLatestInfo(t)},vo=async({chainId:t,tokenContractAddress:e,setLatestInfo:n})=>{let[o,r]=await Se({url:jt,params:{chainId:t,tokenContractAddress:e}});!o&&r&&(n(r),wo(r))},Ja=({tokenContractAddress:t,chainId:e})=>Boolean(t&&_r(e)),ni=({chainId:t,tokenContractAddress:e,onSocketError:n})=>{let[o,r]=(0,nt.useState)({}),{ctxIsReady:a}=E,l=(0,nt.useRef)(null);(0,nt.useEffect)(()=>{Ja({tokenContractAddress:e,chainId:t})&&a&&vo({chainId:t,tokenContractAddress:e,setLatestInfo:r})},[e,t,a]);let{isTxPrice:d,tokenContractAddress:u}=o;return(0,nt.useEffect)(()=>{let c;return e&&a&&(l.current={chainId:t,tokenContractAddress:e,isTxPrice:d},c=Jt({isPri:!1,needLogin:!1,subscribeParams:ti([{chainId:t,tokenContractAddress:e,isTxPrice:d}]),onListenData:(m,T)=>{if(T?.channel===en.DEX_MARKET_CHANNEL)wo(m?.[0]);else{if(u!==e)return;let g=m?.find?.(f=>Hn(f.chainId)===Hn(t)&&f.tokenContractAddress===e);wo(g)}},onListenError:()=>{n?.(),vo({chainId:t,tokenContractAddress:e,setLatestInfo:r})},onListenReconnected:()=>{n?.(),vo({chainId:t,tokenContractAddress:e,setLatestInfo:r})}})),()=>{!l.current||to(l.current)!==to({chainId:t,tokenContractAddress:e})||c?.()}},[t,e,d,a,u,n]),{latestInfo:o}};s();i();var bn=I(v());var el=()=>{let{currentToken:t}=E,{userUniqueId:e,computedAccountId:n}=M,o=(0,bn.useCallback)(async()=>{if(!t)return;let a=(await q.updateTokenList({params:{chainId:t.chainId,userUniqueId:e,accountId:n,tokenContractAddress:t.tokenContractAddress},currentToken:t,needLoading:!0}))[0];a&&(E.setBuyWithToken(a),E.setSellForToken(a)),q.updateBuyModeConfigListByToken(a),q.updateSellModeConfigListByToken(t)},[n,t,e]);(0,bn.useEffect)(()=>{o()},[t?.tokenContractAddress])},oi=el;s();i();var Le={"token-info-container":"_token-info-container_crlsd_1",tokenInfoContainer:"_token-info-container_crlsd_1","close-btn":"_close-btn_crlsd_9",closeBtn:"_close-btn_crlsd_9","token-info":"_token-info_crlsd_1",tokenInfo:"_token-info_crlsd_1",left:"_left_crlsd_27",right:"_right_crlsd_31","token-logo":"_token-logo_crlsd_35",tokenLogo:"_token-logo_crlsd_35","token-contract-address":"_token-contract-address_crlsd_39",tokenContractAddress:"_token-contract-address_crlsd_39","copy-icon":"_copy-icon_crlsd_43",copyIcon:"_copy-icon_crlsd_43","copy-group":"_copy-group_crlsd_47",copyGroup:"_copy-group_crlsd_47","top-token":"_top-token_crlsd_59",topToken:"_top-token_crlsd_59","top-right-title":"_top-right-title_crlsd_65",topRightTitle:"_top-right-title_crlsd_65","top-right-logo":"_top-right-logo_crlsd_70",topRightLogo:"_top-right-logo_crlsd_70","config-list":"_config-list_crlsd_73",configList:"_config-list_crlsd_73"};var tl=({onDiscardToken:t})=>{let e="501",{selectedToken:n}=N,{computedMarketLatestInfo:o}=Cn;return ni({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress,onSocketError:()=>{}}),oi(),Cs({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress}),zs({chainId:e,tokenContractAddress:n?.tokenInfo.tokenContractAddress}),fe.default.createElement("div",{className:Le.tokenInfoContainer},fe.default.createElement("div",{className:Le.tokenInfo},fe.default.createElement("div",{className:Le.left},fe.default.createElement(ve,{src:n?.tokenInfo.tokenLogoUrl,width:16,height:16,className:Le.tokenLogo}),fe.default.createElement("span",{className:Le.tokenSymbol},n?.tokenInfo.tokenSymbol),fe.default.createElement(Me,{title:n?.tokenInfo.tokenContractAddress,width:200},fe.default.createElement(ri.CopyToClipboard,{text:n?.tokenInfo.tokenContractAddress,onCopy:()=>{Z.success(y("swaptrade_common_address_copied_toast"))}},fe.default.createElement("span",{className:Le.copyGroup},fe.default.createElement("span",{className:Le.tokenContractAddress},ct(n?.tokenInfo.tokenContractAddress,6,4)),fe.default.createElement(P,{className:Le.copyIcon,fontSize:"16px",iconName:"okx-defi-dex-copy1",a11yText:"Copy"}))))),n?.tokenInfo.marketCap&&fe.default.createElement("div",{className:Le.right},o?.formattedMarketCap)),fe.default.createElement("div",{className:Le.closeBtn},fe.default.createElement(P,{fontSize:"16px",iconName:"okds-clear-fill",onClick:t,a11yText:"Clear"})))},si=D(tl);s();i();var An={container:"_container_3pqe1_1",input:"_input_3pqe1_4","input-inner":"_input-inner_3pqe1_4",inputInner:"_input-inner_3pqe1_4"};var nl=({validationState:t,contractAddress:e,onClearAddress:n,onFocus:o,onBlur:r})=>{let{selectedToken:a}=N;if(t==="valid"&&!!a)return ft.default.createElement(si,{onDiscardToken:n});let l=t==="validating",d=t==="invalid",u=()=>l?ft.default.createElement(Je.Circle,{size:Je.SIZE.sm}):null,c=()=>e&&!l?ft.default.createElement(P,{fontSize:"16px",iconName:"okds-clear-fill",onClick:n,style:{cursor:"pointer"},a11yText:"Clear"}):null,m=()=>l?"":y("swaptrade_function_input_placeholder_paste_ca"),T=()=>l?"":e;return ft.default.createElement("div",{className:An.container},ft.default.createElement(Ke,{onFocus:o,onBlur:r,prefix:u(),value:T(),suffix:c(),size:Ke.SIZE.sm,placeholder:m(),forceError:d,className:An.input,innerClassName:An.inputInner,readOnly:!0}))},ii=D(nl);s();i();var Po=I(v());s();i();var Ft=I(v());s();i();var Ve=I(v());var Ti=I($());s();i();var F=I(v()),vn=I($());s();i();var Bt=I(v()),Mo=I($());s();i();var gt=I(v()),Lo=I($());s();i();var O={"quick-select":"_quick-select_w7pnn_1",quickSelect:"_quick-select_w7pnn_1","edit-btn":"_edit-btn_w7pnn_6",editBtn:"_edit-btn_w7pnn_6",selected:"_selected_w7pnn_13","base-input":"_base-input_w7pnn_16",baseInput:"_base-input_w7pnn_16","base-input-inner":"_base-input-inner_w7pnn_16",baseInputInner:"_base-input-inner_w7pnn_16","base-input-input":"_base-input-input_w7pnn_21",baseInputInput:"_base-input-input_w7pnn_21","edit-input":"_edit-input_w7pnn_26",editInput:"_edit-input_w7pnn_26","edit-input-inner":"_edit-input-inner_w7pnn_29",editInputInner:"_edit-input-inner_w7pnn_29","instant-trade-edit-input":"_instant-trade-edit-input_w7pnn_32",instantTradeEditInput:"_instant-trade-edit-input_w7pnn_32","instant-trade-edit-input-inner":"_instant-trade-edit-input-inner_w7pnn_35",instantTradeEditInputInner:"_instant-trade-edit-input-inner_w7pnn_35","options-wrapper":"_options-wrapper_w7pnn_38",optionsWrapper:"_options-wrapper_w7pnn_38","shortcut-column-gap":"_shortcut-column-gap_w7pnn_43",shortcutColumnGap:"_shortcut-column-gap_w7pnn_43","quick-select-btn":"_quick-select-btn_w7pnn_46",quickSelectBtn:"_quick-select-btn_w7pnn_46","quick-select-btn-content":"_quick-select-btn-content_w7pnn_55",quickSelectBtnContent:"_quick-select-btn-content_w7pnn_55","error-tips":"_error-tips_w7pnn_58",errorTips:"_error-tips_w7pnn_58","shortcut-key":"_shortcut-key_w7pnn_64",shortcutKey:"_shortcut-key_w7pnn_64","instant-trade-button":"_instant-trade-button_w7pnn_83",instantTradeButton:"_instant-trade-button_w7pnn_83","instant-trade-button-content":"_instant-trade-button-content_w7pnn_109",instantTradeButtonContent:"_instant-trade-button-content_w7pnn_109","instant-trade-button-buy":"_instant-trade-button-buy_w7pnn_123",instantTradeButtonBuy:"_instant-trade-button-buy_w7pnn_123","instant-trade-button-sell":"_instant-trade-button-sell_w7pnn_130",instantTradeButtonSell:"_instant-trade-button-sell_w7pnn_130","all-radius":"_all-radius_w7pnn_137",allRadius:"_all-radius_w7pnn_137","left-radius":"_left-radius_w7pnn_140",leftRadius:"_left-radius_w7pnn_140",disabled:"_disabled_w7pnn_143"};s();i();var ol=({label:t,onClick:e,disabled:n,leftRadius:o,className:r,loading:a,instantTradeStyle:l})=>{let d=()=>{n||a||e()};return gt.default.createElement("div",{className:(0,Lo.default)(O.instantTradeButton,r,{[O.instantTradeButtonBuy]:l===1,[O.instantTradeButtonSell]:l===2,[O.leftRadius]:o,[O.allRadius]:!o,[O.disabled]:n}),onClick:d},gt.default.createElement("div",{className:(0,Lo.default)(O.instantTradeButtonContent,"ellipsis")},a?gt.default.createElement(Je.Circle,{type:Je.TYPE.neutral,size:Je.SIZE.sm,className:"flex"}):t))},ai=(0,gt.memo)(ol);var rl=({label:t,onClick:e,isSelected:n,disabled:o,leftRadius:r,className:a,loading:l,instantTradeStyle:d})=>d!==0?Bt.default.createElement(ai,{label:t,onClick:e,disabled:o,leftRadius:r,className:a,loading:l,instantTradeStyle:d}):Bt.default.createElement(ce,{onClick:e,category:ce.CATEGORY.fill,type:ce.TYPE.gray,size:ce.SIZE.xxs,rect:!0,className:(0,Mo.default)(O.quickSelectBtn,a,{[O.selected]:n,[O.leftRadius]:r}),contentClassName:(0,Mo.default)(O.quickSelectBtnContent,"ellipsis"),disabled:o,loading:l},t),li=(0,Bt.memo)(rl);s();i();var Pe=I(v()),Ro=I($());var sl=({isEditMode:t,toggleEditMode:e,disabled:n})=>{let o=(0,Pe.useRef)(null);return Pe.default.createElement(Pe.default.Fragment,null,Pe.default.createElement(Me,{placement:Me.DIRECTION.topRight,title:y("swaptrade_multichain_tooltips_customize"),disabled:t},Pe.default.createElement(ce,{onClick:e,category:ce.CATEGORY.fill,type:ce.TYPE.gray,size:ce.SIZE.xxs,className:(0,Ro.default)(O.editBtn,{[O.selected]:t}),rect:!0,disabled:t&&n||n,ref:o},Pe.default.createElement(P,{className:(0,Ro.default)(O.editIcon,t?"okx-defi-dex-check":"okx-defi-marketplace-edit")}))))},di=(0,Pe.memo)(sl);s();i();var En=I(v());var xn=I($());var il=({value:t,onChange:e,symbol:n,min:o,max:r,precision:a,disabled:l,onRef:d,instantTradeStyle:u})=>{let c=u!==0;return En.default.createElement(Ke.Number,{value:t,className:(0,xn.default)(O.baseInput,{[O.instantTradeEditInput]:c,[O.editInput]:!c}),innerClassName:(0,xn.default)(O.baseInputInner,{[O.instantTradeEditInputInner]:c,[O.editInputInner]:!c}),inputClassName:(0,xn.default)(O.baseInputInput,{[O.instantTradeEditInputInput]:c,[O.editInputInput]:!c}),autoHeight:!0,onChange:e,symbol:n,min:o,max:r,precision:a,onChangeTriggerValidate:!0,error:!Yt(t),disabled:l,onRef:m=>{d&&d(m)}})},ui=(0,En.memo)(il);var al=({options:t,updateInnerOption:e,disabled:n,useFocusFirstInput:o=!0,instantTradeStyle:r=0})=>{let[a,l]=(0,F.useState)(null);return(0,F.useEffect)(()=>{a&&o&&a.focus()},[a,o]),t.map(({label:d,value:u,symbol:c,min:m,max:T,precision:g},f)=>{let p=`quick-click-edit-input-${d}-${f}`;return F.default.createElement(ui,{value:u,onChange:k=>{e(f,k)},key:p,symbol:c,min:m,max:T,precision:g,disabled:n,onRef:f===0&&l,instantTradeStyle:r})})},ll=({options:t,selectedIndex:e,disabled:n,onMonitorClick:o,shortcutKeys:r,isShortcutActive:a,spacePressed:l,loadingUniqueIds:d,instantTradeStyle:u=0})=>t.map((c,m)=>{let{label:T,onClick:g}=c,f=a&&l,p=f&&r[m]?.key||"";return F.default.createElement("div",{className:(0,vn.default)("flex items-center",O.quickSelectBtnContent),key:`quick-click-btn-${T}-${m}`},F.default.createElement(li,{label:T,onClick:()=>{if(g?.(c),o){let k="qty_low";c.key==="meme_select2"?k="qty_mid":c.key==="meme_select3"&&(k="qty_high"),o(k,"quick_button")}},isSelected:e===m,disabled:n,"data-shortcut-key":r?.[m]?.key,leftRadius:f,instantTradeStyle:u,loading:d&&d.includes(c.buttonUniqueId)}),p?F.default.createElement("div",{className:O.shortcutKey},p):null)}),dl=(0,F.forwardRef)(({options:t,selectedIndex:e,handleUpdateQuickSelectOptions:n,onOptionsChange:o,disabled:r,onMonitorClick:a=()=>{},isControlledEditMode:l=!1,hideEditBtn:d=!1,shortcutKeys:u,isShortcutActive:c,spacePressed:m,className:T,useFocusFirstInput:g=!0,customRenderError:f=!1,loadingUniqueIds:p,instantTradeStyle:k=0},S)=>{let[b,x]=(0,F.useState)(t),A=(0,F.useCallback)((j,de)=>{x(xe=>{let me=[...xe];if(me[j]={...me[j],value:de},o){let Ge=me.map($e=>$e.value);o(Ge)}return me})},[o]),B=(0,F.useMemo)(()=>b?.length?b.some(j=>Number(j.value)===0):!1,[b]),[z,J]=(0,F.useState)(!1),re=(0,F.useCallback)(()=>{a?.("qty_edit","quick_button"),J(j=>{let de=!j;if(de)x(t);else{let xe=b.map(({value:me})=>me);n?.(xe)}return de})},[n,b,t,a]),Q=z||l;return(0,F.useEffect)(()=>{if(Q||!Array.isArray(t)||!Array.isArray(b))return;let j=b.map(({value:xe})=>Number(xe)).join(","),de=t.map(({value:xe})=>Number(xe)).join(",");j!==de&&x(t)},[b,t,Q]),(0,F.useImperativeHandle)(S,()=>({onChange:()=>[...b.map(({value:de})=>de)]}),[b]),t?.length?F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:(0,vn.default)(O.quickSelect,T)},F.default.createElement("div",{className:(0,vn.default)(O.optionsWrapper,"options-wrapper",{[O.shortcutColumnGap]:m&&c})},Q?F.default.createElement(al,{disabled:r,options:b,updateInnerOption:A,useFocusFirstInput:g,instantTradeStyle:k}):F.default.createElement(ll,{disabled:r,options:t,selectedIndex:e,onMonitorClick:a,shortcutKeys:u,isShortcutActive:c,spacePressed:m,loadingUniqueIds:p,instantTradeStyle:k})),!!n&&!d&&F.default.createElement(di,{isEditMode:z,toggleEditMode:re,disabled:B||r})),Q&&B&&!f&&F.default.createElement("div",{className:O.errorTips},y("swaptrade_meme_input_error_no_zero"))):null}),wn=(0,F.memo)(dl);s();i();var Ln=I(v());ue();var ci=t=>{let{buyButtonList:e,buyWithToken:n,selectedToken:o}=N,r=o?.tokenInfo||N.defaultToken?.tokenInfo,a=G(n,"decimals",0),l=(0,Ln.useCallback)(d=>{Ue({btnIndex:d.index,fromTokenSymbol:n?.tokenSymbol,toTokenSymbol:r?.tokenSymbol,isHotkey:!1,isBuy:!0}),t({amount:d.value,fromToken:n,toToken:r,buttonUniqueId:d.buttonUniqueId})},[t,n,r]);return(0,Ln.useMemo)(()=>e?.length?e.map((d,u)=>({label:pe(d.amount,{sigFigs:a||0}),value:d.amount,precision:a,type:"select",index:u,key:`buy_select_${u+1}`,onClick:l,buttonUniqueId:d.buttonUniqueId})):null,[a,e,l])};s();i();var Ie=I(v()),Mn=I($());s();i();var qe={"keep-ltr":"_keep-ltr_1kmeq_1",keepLtr:"_keep-ltr_1kmeq_1","keep-rtl":"_keep-rtl_1kmeq_5",keepRtl:"_keep-rtl_1kmeq_5","preset-config-info-wrapper":"_preset-config-info-wrapper_1kmeq_9",presetConfigInfoWrapper:"_preset-config-info-wrapper_1kmeq_9","preset-config-info":"_preset-config-info_1kmeq_9",presetConfigInfo:"_preset-config-info_1kmeq_9","preset-icon":"_preset-icon_1kmeq_21",presetIcon:"_preset-icon_1kmeq_21",divide:"_divide_1kmeq_26","go-icon":"_go-icon_1kmeq_32",goIcon:"_go-icon_1kmeq_32"};s();i();var pi=I(v());ue();var mi=t=>{let e=Ar(t),n=ee.mul(e,100);return Number.isNaN(n)?e:Vt.percent(n)},fi=()=>{let{computedSelectPreset:t}=w;return(0,pi.useMemo)(()=>{let n=t?.buyPreset||{},o=t?.sellPreset||{};return{isNodata:at(t),buySlippage:mi(n.slippageConfig),sellSlippage:mi(o.slippageConfig),buyFee:Zn(n.feeConfig),sellFee:Zn(o.feeConfig),buyMev:Jn(n.routeConfig),sellMev:Jn(o.routeConfig)}},[t])};var ul=({tradeMode:t})=>{let{isNodata:e,buySlippage:n,sellSlippage:o,buyFee:r,sellFee:a,buyMev:l,sellMev:d}=fi(),u=t==="buy"?n:o,c=t==="buy"?r:a,m=t==="buy"?l:d,T=(0,Ie.useMemo)(()=>{let g=Number(c);return Number.isNaN(g)?c:pe(c,{useScientificNotation:!0})},[c]);return Ie.default.createElement("div",{className:(0,Mn.default)("flex justify-start",qe.presetConfigInfoWrapper)},e?null:Ie.default.createElement("div",{className:(0,Mn.default)("flex items-center",qe.presetConfigInfo),onClick:()=>{q.deactivateEditMode(),q.openPresetModal(),q.setSelectTradeMode(t),ye("settings_enter")},role:"presentation",onKeyDown:()=>{}},Ie.default.createElement(P,{className:qe.presetIcon,iconName:"okx-defi-dex-slippage"}),Ie.default.createElement("span",{className:"font-12 ml-4 font-500"},u),Ie.default.createElement("span",{className:qe.divide}),Ie.default.createElement(P,{className:qe.presetIcon,iconName:"okx-defi-dex-fee"}),Ie.default.createElement("span",{className:"font-12 ml-4 font-500"},T),Ie.default.createElement("span",{className:qe.divide}),Ie.default.createElement(Gr,{...m,greenClassName:qe.greenLight}),Ie.default.createElement(P,{className:(0,Mn.default)("okx-defi-marketplace-chevron-right",qe.goIcon)})))},Rn=D(ul);s();i();var _t={"top-token":"_top-token_1etbn_1",topToken:"_top-token_1etbn_1","top-right-title":"_top-right-title_1etbn_7",topRightTitle:"_top-right-title_1etbn_7","top-right-logo":"_top-right-logo_1etbn_12",topRightLogo:"_top-right-logo_1etbn_12","config-list":"_config-list_1etbn_15",configList:"_config-list_1etbn_15",hight28:"_hight28_1etbn_18","btn-group":"_btn-group_1etbn_21",btnGroup:"_btn-group_1etbn_21"};s();i();var Tt=I(v()),_i=I($());s();i();var W=I(v());var Ne=I($());s();i();var Y={"select-token":"_select-token_1otj7_1",selectToken:"_select-token_1otj7_1","select-token--disabled":"_select-token--disabled_1otj7_4",selectTokenDisabled:"_select-token--disabled_1otj7_4","display-area":"_display-area_1otj7_7",displayArea:"_display-area_1otj7_7","prefix-text":"_prefix-text_1otj7_11",prefixText:"_prefix-text_1otj7_11","token-symbol":"_token-symbol_1otj7_15",tokenSymbol:"_token-symbol_1otj7_15","suffix-icon":"_suffix-icon_1otj7_19",suffixIcon:"_suffix-icon_1otj7_19",active:"_active_1otj7_24","suffix-icon--disabled":"_suffix-icon--disabled_1otj7_27",suffixIconDisabled:"_suffix-icon--disabled_1otj7_27","value-box":"_value-box_1otj7_30",valueBox:"_value-box_1otj7_30",footer:"_footer_1otj7_34","link-to-swap":"_link-to-swap_1otj7_44",linkToSwap:"_link-to-swap_1otj7_44","option-cont":"_option-cont_1otj7_49",optionCont:"_option-cont_1otj7_49",option:"_option_1otj7_49","option-right":"_option-right_1otj7_56",optionRight:"_option-right_1otj7_56","option-title":"_option-title_1otj7_59",optionTitle:"_option-title_1otj7_59","option-sub-title":"_option-sub-title_1otj7_65",optionSubTitle:"_option-sub-title_1otj7_65","option-left-icon":"_option-left-icon_1otj7_71",optionLeftIcon:"_option-left-icon_1otj7_71"};var cl=(t,{option:e})=>W.default.createElement("div",{className:(0,Ne.default)("flex justify-between items-center",Y.option)},W.default.createElement("div",{className:(0,Ne.default)("flex items-center",Y.optionLeft)},W.default.createElement(ve,{src:e?.tokenLogoUrl,width:28,height:28,className:Y.optionLeftIcon}),W.default.createElement("div",{className:(0,Ne.default)("flex flex-col",Y.optionLeftText)},W.default.createElement("span",{className:Y.optionTitle},e?.tokenSymbol),W.default.createElement("span",{className:Y.optionSubTitle},e?.tokenName))),t?W.default.createElement("div",{className:(0,Ne.default)("flex flex-col",Y.optionRight)},W.default.createElement("span",{className:Y.optionTitle},e?.formattedBalance),W.default.createElement("span",{className:Y.optionSubTitle},e?.formattedCurrencyAmount)):null),ml=({token:t,className:e,tradeMode:n,isDragging:o,disabled:r})=>{let a=(0,W.useRef)(null),{selectedToken:l,defaultToken:d,buyWithToken:u,sellForToken:c,tokenSelectionList:m}=N,T=l?.tokenInfo||d?.tokenInfo,g=(0,W.useMemo)(()=>n==="buy"?y("swaptrade_instant_buy_with"):y("swaptrade_instant_sell_for"),[n]),f=C.tokenSelectorHideCount;(0,W.useEffect)(()=>{a.current?.setVisible(!1)},[n,f]);let p=(0,W.useCallback)(A=>{let B=n==="buy",z=A?n:null;nr(async()=>{C.setTokenSelectorState(z),A&&await N.updateTokenSelectionList()}),ye(B?"token_from":"token_to")},[n]),k=(0,W.useCallback)(A=>{let B=n==="buy";ye("token_select"),ls({chainId:Number(A.chainId),tokenAddress:A.tokenContractAddress,storageKey:B?"extensionMarketBuy":"extensionMarketSell"});let z=es(A,m);B?N.setBuyTokenIndex(z):N.setSellTokenIndex(z)},[n,m]),S=(0,W.useMemo)(()=>({suffixIconComp:A})=>W.default.createElement("div",{className:(0,Ne.default)(Y.displayArea,"flex items-center font-12")},W.default.createElement("span",{className:Y.prefixText},g),W.default.createElement("span",{className:(0,Ne.default)("font-500",Y.tokenSymbol)},t?.tokenSymbol),A),[t?.tokenSymbol,g]),b=(0,W.useCallback)(()=>{n==="buy"?po(u,T):po(T,c)},[T,u,c,n]),x=(0,W.useCallback)(A=>cl(M.computedInitWalletAtExtension,A),[]);return(0,W.useEffect)(()=>{o&&a.current?.setVisible(!1)},[o]),W.default.createElement(lt,{className:(0,Ne.default)(e,Y.selectToken,`instant-trade-token-selector-${n}`,r&&Y["select-token--disabled"]),popupProps:{popupStyle:{width:308},graspBaseDom:!1,alwaysUpdatePopper:!0},ref:a,options:m,displayArea:S,value:t?.tokenContractAddress,align:lt.DIRECTION.left,scrollStyle:{maxHeight:208},valueBoxClassName:Y.valueBox,optionFooter:W.default.createElement("div",{className:Y.footer},W.default.createElement("span",null,Oe("swaptrade_placeorder_segmentedctl_pay_with_other_tokens",{Advanced:W.default.createElement(Ee,{onClick:b,className:Y.linkToSwap},y("swaptrade_placeorder_segmentedctl_advanced"))}))),suffixIcon:A=>W.default.createElement(P,{iconName:"okx-defi-dex-market-sort-down",className:(0,Ne.default)(Y.suffixIcon,{[Y.active]:A,[Y["suffix-icon--disabled"]]:r})}),optionContClassName:(0,Ne.default)(Y.optionCont,`instant-trade-token-selector-option-cont-${n}`),renderOption:x,onToggleShow:p,onChange:k,disabled:r})},gi=D(ml);s();i();var Pn={"top-token":"_top-token_10xx9_1",topToken:"_top-token_10xx9_1","top-right-title":"_top-right-title_10xx9_7",topRightTitle:"_top-right-title_10xx9_7","top-right-logo":"_top-right-logo_10xx9_12",topRightLogo:"_top-right-logo_10xx9_12","config-list":"_config-list_10xx9_15",configList:"_config-list_10xx9_15"};var pl=({token:t,tradeMode:e,className:n,isDragging:o})=>{let{buyWithToken:r,sellForToken:a}=N,l=e==="buy"?r:a;return Tt.default.createElement("div",{className:(0,_i.default)("flex justify-between items-center",Pn.topToken,n)}," ",Tt.default.createElement(gi,{token:l,tradeMode:e,isDragging:o,disabled:!l})," ",!!t&&Tt.default.createElement("div",{className:"flex items-center"}," ",Tt.default.createElement("span",{className:Pn.topRightTitle}," ",t?.formattedBalance)," ",Tt.default.createElement(ve,{src:t?.tokenLogoUrl,width:16,height:16,className:Pn.topRightLogo})," "))},Nn=D(pl);var fl=({disabledBuyOptions:t,className:e,shortcutKeys:n,updateSAStatus:o,isDragging:r})=>{let{isEditModeActive:a,isShortcutActive:l,spacePressed:d}=C,u=et("buy",o),c=ci(u),m=(0,Ve.useCallback)(p=>{C.setTempBuyModeConfigList(p)},[]),T=!Array.isArray(c)||c.length===0,g=C.getLoadingButtonIds(),f=N.buyWithToken;return Ve.default.createElement("div",{className:e},Ve.default.createElement(Nn,{token:f,tradeMode:"buy",isDragging:r}),Ve.default.createElement("div",{className:(0,Ti.default)("flex justify-between",_t.hight28)},Ve.default.createElement(on,{height:28,loading:T},Ve.default.createElement(wn,{disabled:t,options:c,hideEditBtn:!0,isControlledEditMode:a,shortcutKeys:n,isShortcutActive:l,spacePressed:d,className:_t.btnGroup,instantTradeStyle:1,loadingUniqueIds:g,useFocusFirstInput:!0,customRenderError:!0,onOptionsChange:m}))),Ve.default.createElement(Rn,{tradeMode:"buy"}))},ki=D(fl);s();i();var He=I(v());var hi=I($());s();i();var On=I(v());var Ii=t=>{let{sellButtonList:e,sellForToken:n,selectedToken:o}=N,r=(0,On.useCallback)(a=>{Ue({btnIndex:a.index,toTokenSymbol:n?.tokenSymbol,fromTokenSymbol:o?.tokenInfo?.tokenSymbol,isHotkey:!1,isBuy:!1});let l=ee.div(a.value,100),d=ee.floorMul(l,o?.tokenInfo?.amountNum,o?.tokenInfo?.decimals);t({amount:d,fromToken:o?.tokenInfo,toToken:n,buttonUniqueId:a.buttonUniqueId})},[t,o,n]);return(0,On.useMemo)(()=>!Array.isArray(e)||e?.length===0?null:e.map((a,l)=>{let d=ee.mul(a.percent,100);return{label:Vt.percent(d),value:d,type:"select",index:l,key:`sell_select_${l+1}`,symbol:"%",min:0,max:100,precision:0,onClick:r,buttonUniqueId:a.buttonUniqueId}}),[e,r])};var gl=({disabledSellOptions:t,className:e,shortcutKeys:n,updateSAStatus:o,isDragging:r})=>{let{isEditModeActive:a,isShortcutActive:l,spacePressed:d}=C,{selectedToken:u}=N,c=et("sell",o),m=Ii(c),T=(0,He.useCallback)(p=>{let k=p.map(S=>Yt(S)?ee.floorDiv(S,100,2):S);C.setTempSellModeConfigList(k)},[]),g=!Array.isArray(m)||m.length===0,f=C.getLoadingButtonIds();return He.default.createElement("div",{className:e},He.default.createElement(Nn,{token:u?.tokenInfo,tradeMode:"sell",isDragging:r}),He.default.createElement("div",{className:(0,hi.default)("flex justify-between",_t.hight28)},He.default.createElement(on,{height:28,loading:g},He.default.createElement(wn,{options:m,hideEditBtn:!0,disabled:t,isControlledEditMode:a,shortcutKeys:n,isShortcutActive:l,spacePressed:d,className:_t.btnGroup,instantTradeStyle:2,useFocusFirstInput:!1,loadingUniqueIds:f,customRenderError:!0,onOptionsChange:T}))),He.default.createElement(Rn,{tradeMode:"sell"}))},Si=D(gl);var _l=({updateSAStatus:t})=>{let{isEditModeActive:e}=C,{buyWithToken:n,sellForToken:o,selectedToken:r}=N,a=!!r;return Ft.default.createElement(Ft.default.Fragment,null,Ft.default.createElement(ki,{disabledBuyOptions:!(a&&!!n||e),shortcutKeys:vt,updateSAStatus:t}),Ft.default.createElement(Si,{disabledSellOptions:!(a&&!!o||e),shortcutKeys:wt,updateSAStatus:t}))},yi=_l;s();i();var Ci={container:"_container_14vg4_1"};var Tl=({updateSAStatus:t})=>Po.default.createElement("div",{className:Ci.container},Po.default.createElement(yi,{updateSAStatus:t})),bi=Tl;s();i();var Wt=I(v()),Fi=I($());s();i();var Bn=I(v());s();i();var Ei=I(v());s();i();ue();var kl=(t,e,n,o,r,a,l)=>{let d=t?.value,u=t?.price;return t?.type==="fast"?(d=e,u=n):t?.type==="market"?(d=o,u=r):t?.type==="turbo"&&(d=a,u=l),{value:d,price:u}},Ai=({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o})=>{if(e||o){let{fastFee:l,fastFeeUsd:d,marketFee:u,marketFeeUsd:c,turboFee:m,turboFeeUsd:T,baseFee:g,baseFeeUsd:f}=n,p={fast:{amount:l,price:d},market:{amount:u,price:c},turbo:{amount:m,price:T}},{value:k,price:S}=kl(t,l,d,u,c,m,T);return Ze({},t,{value:k,price:S,config:p,baseFee:g,baseFeeUsd:f,gasPrice:g})}let{baseFee:r,baseFeeUsd:a}=n;return{value:r,price:a,gasPrice:r}},xi=({priorityFee:t,priorityFeeInfo:e})=>{let{baseFee:n,baseFeeUsd:o,fastFee:r,fastFeeUsd:a,marketFee:l,marketFeeUsd:d,turboFee:u,turboFeeUsd:c}=e,m={fast:{amount:r,price:a},market:{amount:l,price:d},turbo:{amount:u,price:c}},T=t?.value,g=t?.price;return t?.type==="fast"?(T=r,g=a):t?.type==="market"?(T=l,g=d):t?.type==="turbo"&&(T=u,g=c),Ze({},t,{value:T,price:g,config:m,baseFee:n,baseFeeUsd:o,gasPrice:n})};var vi=({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o,tradeScene:r})=>({formatPriorityFee:(0,Ei.useMemo)(()=>r===0?Ai({priorityFee:t,isSolana:e,priorityFeeInfo:n,supportCustomGasFee:o}):xi({priorityFee:t,priorityFeeInfo:n}),[n,t,e,o,r])});s();i();var L=I(v());ue();s();i();var No=I(v());function wi({computedQuoteSafemoon:t}){return{safeMoonToken:(0,No.useMemo)(()=>t,[t])}}function Li({formatPriorityFee:t,nativeTokenPrice:e,isSolana:n,networkFeeDecimals:o,estimateGasFee:r,supportCustomGasFee:a,supportEip1559:l}){return(0,No.useMemo)(()=>{if(n){let c=t.baseFee||0,m=t.baseFeeUsd||0,T=t.value||"0";fr(T)&&(T="0"),T=new ee.BigNumber(T).toString(10);let g=ee.add(T,c),f=ee.mul(e||0,g),p=ee.mul(e||0,T);return{baseFeeValue:c,baseFeeUsd:m,priorityFeeForShow:T,priorityFeeUSD:p,totalFeeUSD:f}}return{totalFeeUSD:ro({formatPriorityFee:t,nativeTokenPrice:e,isSolana:n,networkFeeDecimals:o,estimateGasFee:r,supportCustomGasFee:a,supportEip1559:l})}},[t,e,n,o,r,a,l])}s();i();var Dn=I(v()),Oo=I($());s();i();var ot={"tab-pane":"_tab-pane_2q8hv_1",tabPane:"_tab-pane_2q8hv_1","active-pane":"_active-pane_2q8hv_1",activePane:"_active-pane_2q8hv_1","buy-pane":"_buy-pane_2q8hv_1",buyPane:"_buy-pane_2q8hv_1","sell-pane":"_sell-pane_2q8hv_5",sellPane:"_sell-pane_2q8hv_5",name:"_name_2q8hv_9","name-active":"_name-active_2q8hv_14",nameActive:"_name-active_2q8hv_14"};var Il=({list:t,onTabChange:e,activeTabType:n,className:o,disabled:r})=>Dn.default.createElement(je.Segmented,{useReactTransition:!0,className:o,activeId:n,onChange:a=>{r||e(a)},buttonNoBorder:!0,hideContent:!0,onlyRightMore:!0,average:!0,noActiveBorder:!0,fullScreenScroll:!0,clickToView:!0,paneSpacing:8,size:je.SIZE.sm},t.map(a=>Dn.default.createElement(je.TabPane,{style:{cursor:r&&n!==a.type?"not-allowed":"pointer"},className:(0,Oo.default)({[ot.activePane]:n===a.type,[ot.tabPane]:n===a.type,[ot.buyPane]:n==="buy",[ot.sellPane]:n==="sell"}),tab:Dn.default.createElement("span",{className:(0,Oo.default)(ot.name,{[ot.nameActive]:n===a.type})},y(a.name)),key:a.type,id:a.type}))),Mi=Il;s();i();var Ae=I(v());s();i();var oe=I(v()),kt=I($());s();i();var ge={icon:"_icon_1yr0h_1",name:"_name_1yr0h_4","edit-icon":"_edit-icon_1yr0h_8",editIcon:"_edit-icon_1yr0h_8","check-mark-disabled":"_check-mark-disabled_1yr0h_11",checkMarkDisabled:"_check-mark-disabled_1yr0h_11",input:"_input_1yr0h_14","input-box":"_input-box_1yr0h_17",inputBox:"_input-box_1yr0h_17","custom-input":"_custom-input_1yr0h_17",customInput:"_custom-input_1yr0h_17","custom-box":"_custom-box_1yr0h_17",customBox:"_custom-box_1yr0h_17"};var Sl=({isActive:t,name:e,type:n,onNameChange:o,supportChangeName:r,isEdit:a,setIsEdit:l})=>{let[d,u]=(0,oe.useState)(null),[c,m]=(0,oe.useState)(e);(0,oe.useEffect)(()=>{d&&d?.focus()},[d]);let T=g=>{let f=g.target?.value?.trim();f.length>12||m(f)};return t&&a&&r?oe.default.createElement(Ke,{inputClassName:ge.input,innerClassName:(0,kt.default)(ge.inputBox,ge.customInput,ge.customBox),size:Ke.SIZE.md,value:c,onChange:T,"aria-label":"Edit_preset_name",onBlur:g=>{let f=g.relatedTarget;f&&f.dataset.type==="suffix-button"||(c.length>0?o(c,n):m(e),l(!1))},onRef:g=>{u(g)},suffix:oe.default.createElement(Ee,{"data-type":"suffix-button",onClick:()=>{c.length>0&&(o(c,n),l(!1))},className:c.length>0?"cursor-pointer":"cursor-not-allowed"},oe.default.createElement(P,{className:(0,kt.default)("okds-checkmark",ge.icon,ge.editIcon,{[ge.checkMarkDisabled]:c.length<1})}))}):t&&r?oe.default.createElement("div",{className:"flex items-center"},n===2&&oe.default.createElement(P,{className:(0,kt.default)(" okx-defi-dex-meme-mode",ge.icon)}),oe.default.createElement("span",{className:ge.name},c),oe.default.createElement(Ee,{onClick:()=>{l(!0)},className:ge.editIcon},oe.default.createElement(P,{className:(0,kt.default)("okds-draw",ge.icon)}))):oe.default.createElement("div",{className:"flex items-center"},n===2&&oe.default.createElement(P,{className:(0,kt.default)(" okx-defi-dex-meme-mode",ge.icon)}),oe.default.createElement("span",{className:ge.name},c))},Ri=Sl;s();i();var Do="PRESET_SELECT_GUIDE_STORAGE_KEY";var yl=({list:t,onTabChange:e,activeTabType:n,className:o,disabled:r,onPresetListChange:a})=>{let[l,d]=(0,Ae.useState)(null),[u,c]=(0,Ae.useState)({}),m=(p,k)=>{c(S=>({...S,[p]:k}))},T=(p,k)=>{let S=t.map(b=>b.presetType===k?{...b,name:p}:b);a(S)},[g,f]=(0,Ae.useState)(!1);return(0,Ae.useEffect)(()=>{U.get(Do)||(f(!0),U.set(Do,"1"))},[]),Ae.default.createElement("div",{className:"flex flex-col"},Ae.default.createElement(zn,{title:y("swaptrade_preset_coachmrk_title_switch_between_presets"),description:y("swaptrade_preset_coachmrk_desc_set_up_different_buy"),placement:zn.DIRECTION.bottomLeft,show:g,closeable:!0,onClose:()=>{f(!1)},arrowAlignBoundary:()=>({left:"20px",right:"unset",top:"unset",transform:"unset"}),referenceRef:l}),Ae.default.createElement(je.Button,{useReactTransition:!0,className:o,activeId:n,onChange:p=>{r||e(p)},buttonNoBorder:!0,hideContent:!0,hideNav:Object.values(u).some(p=>p),average:!0,paneSpacing:8,size:je.SIZE.md,getPaneListRef:p=>{d(p)}},t.map(p=>Ae.default.createElement(je.TabPane,{style:{cursor:r&&n!==p.presetType?"not-allowed":"pointer"},tab:Ae.default.createElement(Ri,{name:p.name,type:p.presetType,isActive:n===p.presetType,onNameChange:T,supportChangeName:p.supportChangeName,isEdit:u[p.presetType]||!1,setIsEdit:k=>{m(p.presetType,k)}}),key:p.presetType,id:p.presetType}))))},Pi=yl;s();i();var Ye={root:"_root_uuhsg_1","scroll-content":"_scroll-content_uuhsg_7",scrollContent:"_scroll-content_uuhsg_7",name:"_name_uuhsg_14",priority:"_priority_uuhsg_15",mev:"_mev_uuhsg_18",slippage:"_slippage_uuhsg_19",direction:"_direction_uuhsg_23"};var Cl=(t,e,n)=>{let o=(0,L.useMemo)(()=>[t.mode,lo(t.customMax),lo(t.value),t.type,{low:_e(t.config.low),medium:_e(t.config.medium),high:_e(t.config.high)},_e(t.min),_e(t.max),_e(t.fixedRecommendMax),_e(t.fixedRecommendMin),_e(t.dynamicMax),_e(t.dynamicMin),_e(t.recommendMax),_e(t.recommendMin)],[t]),r=(0,L.useMemo)(()=>_e(e),[e]),[a,l,d,u,c,m,T,g,f,p,k,S,b]=o,x=(0,L.useCallback)(A=>br({value:A,min:m,max:T,recommendMin:f,recommendMax:g,level:u,auto:r,safemoon:n}),[m,T,u,r,n,f,g]);return{slippageMode:a,customMax:l,slippage:d,slippageType:u,slippageMapUse:c,minUse:m,maxUse:T,fixedRecommendMaxUse:g,fixedRecommendMinUse:f,dynamicMaxUse:p,dynamicMinUse:k,recommendMaxUse:S,recommendMinUse:b,dynamicSlippageUse:r,validator:x}},bl=(t,e,n)=>{let o=(0,L.useCallback)(()=>{let l={...t.find(u=>u.presetType===e)},d=n==="buy"?"buyPreset":"sellPreset";return{newPreset:l,direction:d}},[t,e,n]),r=(0,L.useCallback)(a=>{let l=t.map(d=>d.presetType===e?a:d);w.update({editPresetsList:l})},[t,e]);return{getEditPresetCopy:o,updateEditPreset:r}},Ni=(t,e)=>{let n=t==="manual",o=e===0,r=e===1;return n&&o?2:n&&r?3:1},Al=(t,e,n,o)=>{let r=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].routeConfig.routerModeType=Ni(g,o),e(f)},[t,e,o]),a=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].routeConfig.routerModeType=Ni(n,g),e(f)},[t,e,n]),l=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.slippageType=g===Qt.FIXED?2:1,e(f)},[t,e]),d=(0,L.useCallback)(g=>{let{value:f,level:p}=g;if(p===bt.CUSTOM){let{newPreset:S,direction:b}=t();S[b].slippageConfig.slippageRange[3].slippageValue=uo(f),e(S)}},[t,e]),u=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.slippageRange.forEach((k,S)=>{f[p].slippageConfig.slippageRange[S].selected=!1}),g===bt.LOW?f[p].slippageConfig.slippageRange[0].selected=!0:g===bt.MEDIUM?f[p].slippageConfig.slippageRange[1].selected=!0:g===bt.HIGH?f[p].slippageConfig.slippageRange[2].selected=!0:f[p].slippageConfig.slippageRange[3].selected=!0,e(f)},[t,e]),c=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t();f[p].slippageConfig.dynamicMaxSlippageValue=uo(g),e(f)},[t,e]),m=(0,L.useCallback)(({value:g,type:f})=>{if(f===At.CUSTOM){let{newPreset:k,direction:S}=t(),b="feeOptions";k[S].feeConfig[b][3].feeValue=g,e(k)}},[t,e]),T=(0,L.useCallback)(g=>{let{newPreset:f,direction:p}=t(),k="feeOptions";f[p].feeConfig[k].forEach((S,b)=>{f[p].feeConfig[k][b].selected=!1}),g===At.MARKET?f[p].feeConfig[k][0].selected=!0:g===At.FAST?f[p].feeConfig[k][1].selected=!0:g===At.TURBO?f[p].feeConfig[k][2].selected=!0:f[p].feeConfig[k][3].selected=!0,e(f)},[t,e]);return{setPriorityMode:r,setManualType:a,setSlippageMode:l,setSlippage:d,setSlippageType:u,setCustomMax:c,setPriorityFee:m,setPriorityFeeType:T}},xl=({slippage:t,slippageType:e,slippageMapUse:n,minUse:o,maxUse:r,fixedRecommendMinUse:a,fixedRecommendMaxUse:l,validator:d,dynamicSlippageUse:u,computedAutoSlippage:c,slippageState:m,customMax:T,dynamicMaxUse:g,dynamicMinUse:f,recommendMaxUse:p,recommendMinUse:k,safeMoonToken:S})=>{let b=(0,L.useMemo)(()=>({value:t,level:e,levelMap:n,min:o,max:r,recommendMin:a,recommendMax:l,validator:d,auto:u}),[t,e,n,o,r,a,l,d,u]),x=(0,L.useMemo)(()=>({showDynamicSlippage:Xo(c),dynamicSlippage:u,supportCustomMax:m.supportCustomMax,customMax:T,dynamicMax:g,dynamicMin:f,recommendMax:p,recommendMin:k,safemoon:S}),[c,u,m.supportCustomMax,T,g,f,p,k,S]);return{slippageFixedData:b,slippageDynamicData:x}},El=({supportAutoMode:t,isEnableMevStatus:e,mevPriorityFeeInfo:n,nonMevPriorityFeeInfo:o,supportMev:r,supportCustomGasFee:a})=>{let l=(0,L.useMemo)(()=>t&&e,[t,e]),d=(0,L.useMemo)(()=>l?n:o,[l,n,o]),u=(0,L.useMemo)(()=>t&&r,[t,r]),c=(0,L.useMemo)(()=>a,[a]);return{computedPriorityFeeInfo:d,computedShowAutoMode:u,computedShowDetailMode:c}},vl=(t,e,n,o,r)=>({isFormDisabled:(0,L.useMemo)(()=>{let l=t==="fixed"&&e,d=t==="dynamic"&&n,u=r===6;return l||d||o||u},[t,e,n,o,r])}),wl=({presetHandlers:t,setSlippageError:e,setCustomMaxError:n,setPriorityFeeError:o,presetEditType:r,editPresetsList:a,onClose:l})=>{let d=(0,L.useCallback)(({mode:T,fixedData:g,dynamicData:f})=>{t.setSlippageMode(T);let p=T===Qt.FIXED,k=T===Qt.DYNAMIC;p&&(t.setSlippage(g),t.setSlippageType(g.level),e(g.error)),k&&(t.setCustomMax(f.customMax),n(f.error))},[t,e,n]),u=(0,L.useCallback)((T,g,f)=>{t.setPriorityFee({value:g,type:T}),t.setPriorityFeeType(T),o(f)},[t,o]),c=(0,L.useCallback)(async()=>{await tt.resetPreset(r)&&(e(!1),n(!1),o(!1))},[r,e,n,o]),m=(0,L.useCallback)(async()=>{await tt.savePreset(a)&&l()},[a,l]);return{handleSlippageChange:d,handlePriorityFeeChange:u,handleReset:c,handleConfirm:m}},Ll=()=>{let t=(0,L.useCallback)(o=>{w.update({presetEditType:o})},[]),e=(0,L.useCallback)(o=>{w.update({editTradeMode:o})},[]),n=(0,L.useCallback)(o=>{w.update({editPresetsList:o})},[]);return{onPresetTypeChange:t,onPresetDirectionChange:e,onPresetListChange:n}},Ml=t=>{let e=(0,L.useMemo)(()=>y(t?"swaptrade_modal_dialog_title_priority":"swaptrade_swap_history_subtitle_network_fee"),[t]),n=(0,L.useMemo)(()=>y(t?"swaptrade_modal_dialog_desc_priority_meme":"swaptrade_orders_tooltips_how_paygas"),[t]);return{dialogTitle:e,dialogTooltip:n}},Rl=D(({onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a=S=>S,getUsd:l=S=>S,mevPriorityFeeInfo:d={},nonMevPriorityFeeInfo:u={},nativeTokenPrice:c,computedGetEstimateGasFee:m,renderTipsComponent:T,usePriorityFee:g,disableChangeTradeDirection:f,isAutoSellChecked:p,supportMev:k})=>{let{tradeScene:S,presetsList:b,presetSelectType:x,selectTradeMode:A,editPresetsList:B,presetEditType:z,editTradeMode:J,fetchSaveStatus:re,fetchResetStatus:Q,computedChainName:j,networkFeeUnit:de,networkFeeDecimals:xe,computedEditPriorityMode:me,computedEditManualType:Ge,mevPriceThreshold:$e,computedEditSlippageState:Go,computedEditNoQuotePriorityFeeState:Qi,supportAutoMode:$i,supportCustomGasFee:Un,supportEip1559:Ko,memeChainType:jo,computedSupportPriorityFee:Xi}=w;(0,L.useEffect)(()=>(w.update({editPresetsList:or(b),presetEditType:x,editTradeMode:A}),()=>{w.update({editPresetsList:[],presetEditType:2,editTradeMode:"buy"})}),[]);let zo=so({priorityMode:me,manualType:Ge,jitoIsSuccess:n,mevUnstableShowLevel:r}),Zi=io(zo),{computedPriorityFeeInfo:Ji,computedShowAutoMode:ea,computedShowDetailMode:ta}=El({supportAutoMode:$i,isEnableMevStatus:Zi,mevPriorityFeeInfo:d,nonMevPriorityFeeInfo:u,supportMev:k,supportCustomGasFee:Un}),{formatPriorityFee:Xe}=g({priorityFee:Qi,priorityFeeInfo:Ji,supportCustomGasFee:Un,supportEip1559:Ko,isSolana:jo==="0",tradeScene:0}),{safeMoonToken:Yo}=wi({computedQuoteSafemoon:e}),se=Cl(Go,o,Yo),{getEditPresetCopy:na,updateEditPreset:oa}=bl(B,z,J),qn=Al(na,oa,me,Ge),{slippageFixedData:ra,slippageDynamicData:sa}=xl({slippage:se.slippage,slippageType:se.slippageType,slippageMapUse:se.slippageMapUse,minUse:se.minUse,maxUse:se.maxUse,fixedRecommendMinUse:se.fixedRecommendMinUse,fixedRecommendMaxUse:se.fixedRecommendMaxUse,validator:se.validator,dynamicSlippageUse:se.dynamicSlippageUse,computedAutoSlippage:o,slippageState:Go,customMax:se.customMax,dynamicMaxUse:se.dynamicMaxUse,dynamicMinUse:se.dynamicMinUse,recommendMaxUse:se.recommendMaxUse,recommendMinUse:se.recommendMinUse,safeMoonToken:Yo}),[ia,aa]=(0,L.useState)(!1),[la,da]=(0,L.useState)(!1),[ua,ca]=(0,L.useState)(!1),[Qo,ma]=(0,L.useMemo)(()=>[Xe.value,Xe.type],[Xe]),pa=(0,L.useMemo)(()=>me==="manual"&&Ge===1,[me,Ge]),{isFormDisabled:Vn}=vl(se.slippageMode,la,ia,ua,zo),{handleSlippageChange:fa,handlePriorityFeeChange:ga,handleReset:_a,handleConfirm:Ta}=wl({presetHandlers:qn,setSlippageError:da,setCustomMaxError:aa,setPriorityFeeError:ca,presetEditType:z,editPresetsList:B,onClose:t}),{onPresetTypeChange:ka,onPresetDirectionChange:Ia,onPresetListChange:ha}=Ll(),{dialogTitle:Sa,dialogTooltip:ya}=Ml(Xi),Ca=Li({formatPriorityFee:Xe,nativeTokenPrice:c,isSolana:jo==="0",networkFeeDecimals:xe,estimateGasFee:m,supportCustomGasFee:Un,supportEip1559:Ko}),ba=Vn||f,Aa=re===ie.LOADING,xa=Q===ie.LOADING,Ea=(0,L.useMemo)(()=>p&&J==="sell",[p,J]);return L.default.createElement("div",{className:Ye.root},L.default.createElement("div",{className:Ye.scrollContent},L.default.createElement(Pi,{list:B,activeTabType:z,onTabChange:ka,onPresetListChange:ha,className:"mt-24",disabled:Vn}),L.default.createElement(Mi,{list:Cr,activeTabType:J,onTabChange:Ia,className:Ye.direction,disabled:ba}),ea&&L.default.createElement($r,{className:Ye.mev,setMode:qn.setPriorityMode,priorityMode:me,setManualType:qn.setManualType,manualType:Ge,mevUnstableShowLevel:r,jitoIsSuccess:n,mevPriceThreshold:$e,chainName:j,showOffMevTips:pa}),L.default.createElement(Yr,{className:Ye.slippage,mode:se.slippageMode,fixedData:ra,dynamicData:sa,showDynamicTips:Ea,onChange:fa}),ta?L.default.createElement(ao.DetailMode,{className:Ye.priority,fee:Qo,type:ma,feeMap:Xe.config,max:Xe.max,min:Xe.min,noRecommend:!0,currency:de,onChange:ga,getTokenAmount:a,getUsd:l,tradeScene:S,tipsComponent:T(Ca),dialogTitle:Sa,dialogTooltip:ya,hidePrice:!0}):L.default.createElement(ao.NoSupportCustomMode,{networkFee:Qo,symbol:de,className:Ye.priority})),L.default.createElement(Qr,{confirmDisabled:Vn,handleConfirm:Ta,handleReset:_a,confirmLoading:Aa,resetLoading:xa}))}),Oi=Rl;var Pl=D(({onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a,getUsd:l,mevPriorityFeeInfo:d={},nonMevPriorityFeeInfo:u={},nativeTokenPrice:c,disableChangeTradeDirection:m,computedGetEstimateGasFee:T,isAutoSellChecked:g,supportMev:f})=>Bn.default.createElement(Oi,{onClose:t,computedQuoteSafemoon:e,jitoIsSuccess:n,computedAutoSlippage:o,mevUnstableShowLevel:r,getTokenAmount:a,getUsd:l,mevPriorityFeeInfo:d,nonMevPriorityFeeInfo:u,nativeTokenPrice:c,usePriorityFee:vi,isAutoSellChecked:g,disableChangeTradeDirection:m,computedGetEstimateGasFee:T,supportMev:f,renderTipsComponent:p=>p.totalFeeUSD?p.baseFeeValue?Bn.default.createElement(zr,{totalFeeUSD:p.totalFeeUSD,baseFeeValue:p.baseFeeValue,baseFeeUsd:p.baseFeeUsd,priorityFeeForShow:p.priorityFeeForShow,priorityFeeUSD:p.priorityFeeUSD}):Bn.default.createElement(jr,{totalFeeUSD:p.totalFeeUSD}):null})),Di=Pl;s();i();var Bi={"preset-dialog":"_preset-dialog_46n92_1",presetDialog:"_preset-dialog_46n92_1"};var Nl=()=>{let{getTokenAmount:t,getUsd:e}=Kr(),n=()=>{q.closePresetModal()};return(0,Wt.useEffect)(()=>{w.update({selectTradeMode:"buy",tradeScene:0})},[]),Wt.default.createElement("div",{className:(0,Fi.default)(Bi.presetDialog)},Wt.default.createElement(Di,{onClose:n,getTokenAmount:t,getUsd:e,supportMev:M.walletSupportMev}))},Wi=D(Nl);s();i();var st=I(v()),Bo=I($());s();i();var rt={"setting-dialog":"_setting-dialog_l2ds8_1",settingDialog:"_setting-dialog_l2ds8_1","setting-item":"_setting-item_l2ds8_5",settingItem:"_setting-item_l2ds8_5",left:"_left_l2ds8_13",title:"_title_l2ds8_20",description1:"_description1_l2ds8_25","go-icon":"_go-icon_l2ds8_31",goIcon:"_go-icon_l2ds8_31"};var Ol=()=>st.default.createElement("div",{className:(0,Bo.default)(rt.settingDialog)},st.default.createElement(Ee,{className:rt.settingItem,onClick:()=>{h.global.switchInstantTrade?.()}},st.default.createElement("div",{className:rt.left},st.default.createElement("p",{className:rt.title},y("swaptrade_instant_cell_tag_instant_trade_switch")),st.default.createElement("p",{className:rt.description1},y("swaptrade_instant_dialog_desc_set_the_enabling_status"))),st.default.createElement(P,{className:(0,Bo.default)("okx-defi-marketplace-chevron-right",rt.goIcon)}))),Ui=Ol;s();i();var R=I(v()),it=I($());s();i();var Fo=I(v());var qi=()=>{let t=(0,Fo.useCallback)(()=>{q.deactivateEditMode(),C.isShortcutActive?(ye("hot_key_off"),q.deactivateShortcut()):(ye("hot_key_on"),q.activateShortcut())},[]),e=(0,Fo.useCallback)(()=>{C.isEditModeActive?C.saveEditModeConfigs():(ye("qty_edit"),q.activateEditMode())},[]);return{handleShortcutToggle:t,handleEditModeToggle:e}};s();i();var H=I(v()),It=I($());s();i();var Vi=I(v());var Hi=()=>{let t=E.ctxIsReady,e=!!M.computedAccountId;return(0,Vi.useMemo)(()=>t&&e,[t,e])};s();i();var le={"preset-selector":"_preset-selector_1rr07_1",presetSelector:"_preset-selector_1rr07_1","extension-logo":"_extension-logo_1rr07_5",extensionLogo:"_extension-logo_1rr07_5","select-preset":"_select-preset_1rr07_11",selectPreset:"_select-preset_1rr07_11","display-area":"_display-area_1rr07_14",displayArea:"_display-area_1rr07_14","display-area-label":"_display-area-label_1rr07_18",displayAreaLabel:"_display-area-label_1rr07_18","value-box":"_value-box_1rr07_27",valueBox:"_value-box_1rr07_27",footer:"_footer_1rr07_31","settings-icon":"_settings-icon_1rr07_41",settingsIcon:"_settings-icon_1rr07_41","option-cont":"_option-cont_1rr07_45",optionCont:"_option-cont_1rr07_45",option:"_option_1rr07_45","option-label":"_option-label_1rr07_55",optionLabel:"_option-label_1rr07_55","check-icon":"_check-icon_1rr07_61",checkIcon:"_check-icon_1rr07_61",active:"_active_1rr07_65"};var Dl=({option:t,isActive:e})=>H.default.createElement("div",{className:(0,It.default)("flex justify-between items-center",le.option)},H.default.createElement("div",{className:le.optionLabel},t?.label),H.default.createElement(P,{className:(0,It.default)("okx-defi-dex-check",le.checkIcon,{[le.active]:e})})),Bl=({minimize:t,onMinimize:e,className:n,isDragging:o})=>{let r=(0,H.useRef)(null),a=(0,H.useMemo)(()=>({popupStyle:{width:140},graspBaseDom:!1,alwaysUpdatePopper:!0}),[]),l=(0,H.useCallback)(b=>{q.deactivateEditMode(),b&&(ye("preset_switch"),t&&e?.(!1))},[t,e]),d=(0,H.useCallback)(()=>{t&&e?.(!1)},[t,e]),u=b=>{tt.setSelectType(b.value)},c=(0,H.useCallback)(()=>{r.current?.setVisible(!1),q.openPresetModal()},[]),m=w.presetsList,T=(0,H.useMemo)(()=>!Array.isArray(m)||m?.length===0?[]:m.map(b=>({label:b.name,value:b.presetType})),[m]),g=w.presetSelectType,f=Hi(),p=(0,H.useMemo)(()=>f?m?.length>0:!1,[m,f]),k=`https://${h.global?.getStaticHostname?.()}/cdn/assets/imgs/254/43DEFFE88CCA0D7C.png`;(0,H.useEffect)(()=>{o&&r.current?.setVisible(!1)},[o]);let S=({selectedOption:b,suffixIconComp:x})=>H.default.createElement("div",{className:(0,It.default)(le.displayArea)},h.isExtensionEnv&&H.default.createElement(ve,{src:k,pictureClassName:le.extensionLogo,width:16,height:16,onClick:d}),H.default.createElement("div",{className:le.displayAreaLabel},b?.label),x);return H.default.createElement("div",{className:le.presetSelector},!p&&h.isExtensionEnv&&H.default.createElement(ve,{src:k,pictureClassName:le.extensionLogo,width:16,height:16,onClick:d}),p&&H.default.createElement(lt,{ref:r,className:(0,It.default)(n,le.selectPreset),popupProps:a,options:T,displayArea:S,value:g,align:lt.DIRECTION.left,scrollStyle:{maxHeight:200},valueBoxClassName:le.valueBox,optionFooter:H.default.createElement("div",{className:le.footer},H.default.createElement(Ee,{onClick:c,className:le.footer},H.default.createElement(P,{className:(0,It.default)("okx-defi-dex-web3-settings",le.settingsIcon)}),H.default.createElement("span",null,y("swaptrade_preset_header_edit_presets")))),optionContClassName:le.optionCont,renderOption:Dl,onChange:u,onToggleShow:l}))},Gi=D(Bl);s();i();var Wo=I(v());var Uo=I($());s();i();var V={"top-bar":"_top-bar_wlkc9_1",topBar:"_top-bar_wlkc9_1","top-bar--setting":"_top-bar--setting_wlkc9_14",topBarSetting:"_top-bar--setting_wlkc9_14","top-bar--preset":"_top-bar--preset_wlkc9_17",topBarPreset:"_top-bar--preset_wlkc9_17","drag-handle":"_drag-handle_wlkc9_21",dragHandle:"_drag-handle_wlkc9_21","drag-icon":"_drag-icon_wlkc9_28",dragIcon:"_drag-icon_wlkc9_28","top-bar-left":"_top-bar-left_wlkc9_35",topBarLeft:"_top-bar-left_wlkc9_35","back-icon":"_back-icon_wlkc9_35",backIcon:"_back-icon_wlkc9_35","top-bar-center":"_top-bar-center_wlkc9_41",topBarCenter:"_top-bar-center_wlkc9_41",title:"_title_wlkc9_45","title-with-logo":"_title-with-logo_wlkc9_52",titleWithLogo:"_title-with-logo_wlkc9_52","top-bar-right":"_top-bar-right_wlkc9_55",topBarRight:"_top-bar-right_wlkc9_55","icon-btn":"_icon-btn_wlkc9_60",iconBtn:"_icon-btn_wlkc9_60",active:"_active_wlkc9_80",disabled:"_disabled_wlkc9_83","active-icon":"_active-icon_wlkc9_87",activeIcon:"_active-icon_wlkc9_87",icon:"_icon_wlkc9_60","close-icon":"_close-icon_wlkc9_99",closeIcon:"_close-icon_wlkc9_99","tooltip-title-text-value":"_tooltip-title-text-value_wlkc9_109",tooltipTitleTextValue:"_tooltip-title-text-value_wlkc9_109"};var Fn=({iconName:t,isActive:e,isSelected:n,className:o,iconClassName:r,handleClick:a,minimize:l,onMinimize:d,a11yText:u,disabled:c})=>Wo.default.createElement(Ee,{className:(0,Uo.default)(V.iconBtn,o,{[V.active]:e||n,[V.disabled]:c}),disabled:c,onClick:m=>{if(m?.detail!==0){if(l){d?.(!1);return}a?.()}}},Wo.default.createElement(P,{className:(0,Uo.default)(V.icon,t,r,{[V.activeIcon]:e}),a11yText:u}));var Fl=(0,R.forwardRef)(({className:t,onClose:e},n)=>{let{handleEditModeToggle:o,handleShortcutToggle:r}=qi(),a=(0,R.useMemo)(()=>C.isShortcutActive?Oe("swaptrade_instant_to_use_hotkeys_replace",{btn:R.default.createElement("span",{className:V.tooltipTitleTextValue},y("swaptrade_instant_to_use_hotkeys_variable"))}):y("swaptrade_instant_enable_hotkeys"),[C.isShortcutActive]),l=()=>{if(C.computedDialogState==="setting")return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:V.topBarLeft},R.default.createElement(P,{className:(0,it.default)(V.backIcon,"okds-arrow-chevron-left-centered-sm"),onClick:()=>C.setSettingModalOpen(!1),fontSize:"16px"})),R.default.createElement("div",{className:V.topBarCenter},R.default.createElement("span",{className:V.title},y("swaptrade_instant_dialog_header_simple_title"))),R.default.createElement("div",{className:V.topBarRight,style:{width:"24px"}}));if(C.computedDialogState==="preset"){let{computedChainLogoUrl:d,computedChainSymbol:u}=w;return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:V.topBarLeft},R.default.createElement(P,{className:(0,it.default)(V.backIcon,"okds-arrow-chevron-left-centered-sm"),onClick:()=>{q.closePresetModal()},fontSize:"16px"})),R.default.createElement("div",{className:V.topBarCenter},R.default.createElement("div",{className:"flex justify-center align-items-center"},R.default.createElement(Xr,{src:d,alt:u,size:24}),R.default.createElement("span",{className:(0,it.default)(V.title,V.titleWithLogo)},y("swaptrade_meme_header_edit_preset")))),R.default.createElement("div",{className:V.topBarRight,style:{width:"24px"}}))}return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:V.topBarLeft},R.default.createElement(Gi,null)),R.default.createElement("div",{className:V.topBarRight},R.default.createElement(Me,{title:y("swaptrade_multichain_tooltips_customize"),placement:Me.DIRECTION.bottomRight,disabled:C.isEditModeActive},R.default.createElement(Fn,{iconName:C.isEditModeActive?"okx-defi-dex-check":"okx-defi-marketplace-edit",isSelected:C.isEditModeActive,handleClick:o,a11yText:y("swaptrade_multichain_tooltips_customize")})),R.default.createElement(Me,{title:a,placement:Me.DIRECTION.bottom,maxWidth:100},R.default.createElement(Fn,{isActive:C.isShortcutActive,iconName:"okx-defi-dex-keyboard",handleClick:r,a11yText:C.isShortcutActive?y("swaptrade_instant_to_use_hotkeys"):y("swaptrade_instant_enable_hotkeys")})),R.default.createElement(Fn,{iconName:"okx-defi-dex-web3-settings",handleClick:()=>{q.deactivateEditMode(),q.openSettingModal(),kr()},a11yText:"Settings"}),R.default.createElement(P,{className:(0,it.default)(V.closeIcon,"okx-defi-collapse"),onClick:d=>{d?.detail!==0&&e&&e()},a11yText:"Close"})))};return R.default.createElement("div",{className:(0,it.default)(V.topBar,t,{[V.topBarPreset]:C.computedDialogState==="preset",[V.topBarSetting]:C.computedDialogState==="setting"})},R.default.createElement("div",{className:V.dragHandle,ref:n},R.default.createElement(P,{className:(0,it.default)(V.dragIcon,"okx-defi-dex-drag")})),l())}),Ki=D(Fl);s();i();var Wn={mask:"_mask_m9z1s_1","dialog-window":"_dialog-window_m9z1s_10",dialogWindow:"_dialog-window_m9z1s_10","no-content-padding":"_no-content-padding_m9z1s_23",noContentPadding:"_no-content-padding_m9z1s_23","loading-overlay":"_loading-overlay_m9z1s_26",loadingOverlay:"_loading-overlay_m9z1s_26",container:"_container_m9z1s_39","pb-16":"_pb-16_m9z1s_47",pb16:"_pb-16_m9z1s_47","pt-24":"_pt-24_m9z1s_50",pt24:"_pt-24_m9z1s_50","service-fee":"_service-fee_m9z1s_53",serviceFee:"_service-fee_m9z1s_53"};var Wl=({className:t,visible:e,onClose:n,updateSAStatus:o,windowClass:r,id:a,isReady:l})=>{let[d,u]=(0,K.useState)(""),[c,m]=(0,K.useState)(!1),[T,g]=(0,K.useState)("initial"),f=(0,K.useCallback)(async A=>{g("validating"),u(A);try{if(!ns(A)){Z.error({title:Ht("swaptrade_function_input_toast_unsupported_network")}),g("invalid");return}let B=await N.addSelectedToken(A,Mt);!B||!B.tokenInfo.tokenContractAddress?(g("invalid"),Z.error({title:Ht("swaptrade_function_input_toast_invalid_ca")})):(g("valid"),await q.updateCurrentTokenInfo({chainId:"501",tokenContractAddress:A}))}catch(B){console.error("validateContractAddress error:",B),g("invalid"),Z.error({title:Ht("swaptrade_function_input_toast_invalid_ca")})}},[]);Ys({onPaste:A=>{f(A)},enabled:c&&l}),As(),Gs(),(0,K.useEffect)(()=>{l&&N.initializeInstantTrade()},[l]),(0,K.useEffect)(()=>{let A=qt(()=>({isInstantTradeInitialized:N.isInitialized,defaultToken:N.defaultToken,boostOnboardingShown:C.boostOnboardingShown}),({isInstantTradeInitialized:B,defaultToken:z,boostOnboardingShown:J})=>{if(!J){h.global.setContentLoading?.(!1);return}let re=B&&!!z;h.global.setContentLoading?.(!re)},{fireImmediately:!0});return()=>{A(),h.global.setContentLoading?.(!1)}},[]);let p=(0,K.useCallback)(()=>{let A="https://web3.okx.com/boost";h.global.goto?.(A)},[]);if(!e||!l)return null;let{isBoostInfoShown:k,boostOnboardingShown:S,computedDialogState:b,computedWindowSize:x}=C;return S?K.default.createElement(K.default.Fragment,null,K.default.createElement("div",{className:(0,qo.default)(Wn.dialogWindow,Wn.dark,r,t),"data-testid":"okd-dialog-window",role:"dialog","aria-modal":"true",id:a,style:{width:`${x.width}px`,height:`${x.height}px`},draggable:!1},K.default.createElement(Ki,{onClose:n}),b==="setting"&&K.default.createElement(Ui,null),b==="preset"&&K.default.createElement(Wi,null),b==="main"&&K.default.createElement(K.default.Fragment,null,K.default.createElement("div",{className:(0,qo.default)(Wn.container,t)},K.default.createElement(ii,{onFocus:()=>{m(!0)},onBlur:()=>{m(!1)},validationState:T,contractAddress:d,onClearAddress:()=>{N.removeSelectedToken(),u(""),g("initial")}}),K.default.createElement(bi,{updateSAStatus:o})),k&&K.default.createElement(Xs,{onClick:p,onClose:()=>C.hideBoostInfo()})))):K.default.createElement(Js,{onClose:n})},ji=D(Wl);var Ul=({onClose:t,isReady:e=!1,...n})=>Vo.default.createElement(Or,{fallbackComponent:()=>null},Vo.default.createElement(ji,{visible:!0,onClose:t,isReady:e,...n})),zi=Ul;s();i();var ht=I(v());var Yi=({currency:t,currentWallet:e,walletInfo:n,ontCore:o,globalCtx:r,LocalStore:a,stateInfo:l,isSaAccountNormal:d})=>{let[u,c]=(0,ht.useState)(!1);return(0,ht.useEffect)(()=>{h.initSentry(r?.dsn,r?.config,r?.version),h.updateEnvConfig({currency:t,currentWallet:e,walletInfo:n,ontCore:o,globalCtx:r,LocalStore:a});let{getApiHostname:m}=h.global;Zr(h.localStore,m?.()).then(()=>{c(!0),E.setCtxIsReady(!0),C.applyWindowResize(!1)}).catch(()=>{c(!0),E.setCtxIsReady(!0),C.applyWindowResize(!1)})},[t,e,n,o,r,a]),(0,ht.useEffect)(()=>{M.setDefaultEnabledSilentMethod(l?.defaultEnabledSilentMethod??!1),M.setSilentEnabled(l?.silentEnabled),M.setIsSaAccountNormal(d)},[l?.defaultEnabledSilentMethod,l?.silentEnabled,d]),(0,ht.useEffect)(()=>{h.updateEnvConfig({currentWallet:e}),M.setCurrentWallet(e)},[e]),{isInit:u}};var ql=({localeData:t,walletInfo:e,onBack:n,currency:o,currentWallet:r,ontCore:a,globalCtx:l,LocalStore:d,currentLocale:u,defaultChainId:c,onClose:m,chainId:T,tokenContractAddress:g,isReady:f,...p})=>{let{isInit:k}=Yi({currency:o,currentWallet:r,walletInfo:e,ontCore:a,globalCtx:l,LocalStore:d});return Hs({defaultChainId:c,shouldFetch:!0}),Ho.default.createElement(rr,{fetchConfig:gr.fetchConfig,localeData:t,isDev:!0,noRemoteData:!0,key:u},Ho.default.createElement(zi,{onClose:m,isReady:k&&f,...p}))};var Vl=D(ql);var Hl=Qe.default.lazy(()=>import("./Advanced-RVRFFFYD.js")),Gl=Qe.default.lazy(()=>import("./MemeMode-JBOKL3CM.js")),Kl=({...t})=>Qe.default.createElement(Ut.Switch,null,Qe.default.createElement(Ut.Route,{path:"/dex-swap/meme",render:()=>Qe.default.createElement(Gl,{...t})}),Qe.default.createElement(Ut.Route,{path:"/dex-swap",render:()=>Qe.default.createElement(Hl,{...t})}));var Ux=D(Kl);export{Ux as a};
//# sourceMappingURL=chunk-63UDTGAT.js.map
