import{a as he}from"./chunk-WELDOPJD.js";import{a as Ee}from"./chunk-AZ2KZKVQ.js";import{aa as xe}from"./chunk-4Y52FA3V.js";import{f as we}from"./chunk-YMYQJ726.js";import{d as Ie,f as ke,j as se,t as Fe}from"./chunk-FGRS6VIX.js";import{Mb as z,R as fe,S as X,jb as pe,kb as _e,lb as Se,mb as ge,nb as Te,ob as Ce,vd as C}from"./chunk-INIQCRIO.js";import{c}from"./chunk-ZFBXO46L.js";import{a as ne}from"./chunk-6Z5HVUBK.js";import{A as re,da as p,m as D}from"./chunk-ZBDGRK4Q.js";import{a as Pe}from"./chunk-6PA65BO3.js";import{A as te}from"./chunk-BJKBO23H.js";import{j as de,ka as oe,va as le}from"./chunk-XFTQD4B2.js";import{a as Le}from"./chunk-4QGZDIBD.js";import{b as F}from"./chunk-73B6GL3S.js";import{f as T,o as a,q as i}from"./chunk-Y5OH3DDZ.js";a();i();var y=T(F()),ve=T(Pe());var Ze=()=>{let e=(0,ve.useLocation)(),{search:o}=e,{needUpdate:t,type:r}=we(o);return(0,y.useMemo)(()=>({needUpdate:t===fe.on,type:r}),[t,r])},K=e=>{let{quoteStore:o,facetStore:t}=c(),r=o?.quote?.bestRoute||{},{fromToken:s,toToken:n,fromTokenAmount:m,receiveAmount:d}=r,{computedFacetOrderTokens:u}=t;return(0,y.useMemo)(()=>e===X.REDEEM?u:{fromToken:{...s,amount:m},toToken:{...n,amount:d}},[e,s,m,n,d,u])},Oe=e=>{let{fromToken:o,toToken:t}=K(e);return(0,y.useMemo)(()=>o.chainId!==t.chainId?[o,t]:[o],[o,t])},eo=e=>{let{quoteStore:o,fromToStore:t,facetStore:r,walletContractStore:s,accountStore:{walletConfig:n,address:m},slippageStore:d}=c(),u=e===X.REDEEM,l=e===X.INTENT_SWAP,{fromToken:f,toToken:S}=K(e),g=Oe(e),A=n?.walletId,{data:k}=s?.transactionPayload||{},{computedFacetOrderFromToRate:w,computedFacetOrderToFromRate:E,computedFacetOrderMinimumReceived:h}=r,{quote:ee,computedIsUsingCentralizedBridge:R,enableQuoteAggregates:G}=o,N=ee?.bestRoute?.bridge,L=o?.computedIsOfflineType,{name:P,logo:x,estimatedTime:O}=o?.quote?.bestRoute||{},{computedRate:B,computedToFromRate:W,computedIsBridge:q,computedIsEvmChain:U,computedIsFromBtcCoin:H,computedIsCrossChain:Y}=t,{computedMinimumReceived:$}=d;return(0,y.useMemo)(()=>{let v={walletId:A,address:m,networks:g,data:k,fromToken:f,toToken:S};return u?{rate:w,toFromRate:E,minimumReceived:h,isFromBtcCoin:!1,isEvmChain:!0,hideExchangeBtn:!1,...v}:{estimatedTime:(parseInt(O||0,10)/60).toFixed(0)??"--",isIntentBridge:L,computedIsCrossChain:Y,rate:B,toFromRate:W,minimumReceived:$,isFromBtcCoin:H,hideExchangeBtn:q||R,isEvmChain:U,isIntentSwap:l,bridge:N,enableQuoteAggregates:G,name:P,logo:x,...v}},[A,m,g,k,u,B,W,$,H,q,U,R,N,w,E,h,f,S,l,G,P,x,O,L,Y])};function Be(){return{[z.SWAP]:{image:{light:pe(),dark:_e()},title:{text:C("swaptrade_top_segmentedctl_swap")}},[z.BRIDGE]:{image:{light:Se(),dark:ge()},title:{text:C("swaptrade_top_segmentedctl_bridge")}},[z.CLAIM]:{image:{light:Te(),dark:Ce()},title:{text:C("commonall_modal_btn_claim")}}}}var oo=(e="")=>{let{commonStore:o}=c(),{currentTab:t}=o,r=e||t;return(0,y.useMemo)(()=>Be()[r],[r])};a();i();var me=T(F());var ae=(e,o,t)=>`${e}${re.mul(o||0,re.pow(10,t||0))}`,ie=e=>{let{useCoin:o}=p.hooks;return o(e?.chainId,e.isNativeToken?"":e.tokenContractAddress)},We=()=>{let{fromToStore:e,gasDropStore:o}=c(),{to:t}=e,r=ie({chainId:t.chainId}),{computedGasDropSelected:s,gasDropConfig:n}=o||{},{gasDrop:m}=n||{};return(0,me.useMemo)(()=>s?{coinId:r?.coinId,assetChange:ae("+",m,r?.decimals),useMinPrecision:!1,displayEstimate:!1,desc:C("swaptrade_transfer_text_for_gas")}:null,[s,m,r])};function qe(e){let{fromToken:o,toToken:t}=K(e),r=We(),s=ie(o),n=ie(t);return(0,me.useMemo)(()=>({fromList:[{coinId:s?.coinId,assetChange:ae("-",o?.amount,s?.decimals),useMinPrecision:!1}],toList:[{coinId:n?.coinId,assetChange:ae("+",t?.amount,n?.decimals),useMinPrecision:!1},r].filter(Boolean)}),[s?.coinId,s?.decimals,o?.amount,n?.coinId,n?.decimals,t?.amount,r])}a();i();var So={container:"_container_wvaui_1",loading:"_loading_wvaui_5",wrap:"_wrap_wvaui_10",scroll:"_scroll_wvaui_13"};a();i();var Ae=T(F());var Ue=e=>{let{walletContractStore:o}=c(),t=he(e);return(0,Ae.useEffect)(()=>{Fe(e)&&o.setNativeCoin(t)},[t,e]),{coin:t}},xo=Ue;a();i();var Z=T(F());a();i();var ce=T(F());a();i();var Q=T(F());le();var V=({estimatedGasFeeInt:e,maxGasFeeInt:o,decimals:t,isClaim:r=!1})=>{let{quoteStore:s}=c(),n=de(s,"quote.bestRoute.bridge.estimateBridgeFeeAmount");return(0,Q.useMemo)(()=>{let m=se(o,t),d=se(e,t);return n&&!r&&(d=ne.add(d,n,{returnString:!0}),m=ne.add(m,n,{returnString:!0})),{maxGasFee:m,estimatedGasFee:d}},[o,t,e,n,r])},j=e=>{let{walletContractStore:o}=c();(0,Q.useEffect)(()=>{o.setGasFee(e)},[e])};var He=(e,o,t=!1)=>{let{useFeeDisplay:r}=p.hooks,{walletContractStore:s}=c(),{coinAmount:n,coinSymbol:m,estimatedGasFeeInt:d,maxGasFeeInt:u,decimals:l,loading:f}=r(e,{calldata:o}),{maxGasFee:S,estimatedGasFee:g}=V({maxGasFeeInt:u,estimatedGasFeeInt:d,decimals:l,isClaim:t});return j(S),(0,ce.useEffect)(()=>{s.setMaxGasFeeInt(u)},[u,s]),(0,ce.useEffect)(()=>{s.setGasFeeLoading(f)},[f,s]),{maxGasFee:S,estimatedGasFee:g,coinAmount:n,coinSymbol:m,feeLoading:f}},Ge=He;a();i();var b=T(F()),De=T(Le());a();i();var Ne={"network-fee-title":"_network-fee-title_16onq_1",networkFeeTitle:"_network-fee-title_16onq_1","tooltip-icon":"_tooltip-icon_16onq_4",tooltipIcon:"_tooltip-icon_16onq_4","gas-type":"_gas-type_16onq_8",gasType:"_gas-type_16onq_8"};var Ye=({chainName:e,coinSymbol:o,isClaim:t=!1})=>{let{quoteStore:r,commonStore:s,fromToStore:n}=c(),{currencyConversion:m,computedNowCurrencySymbol:d}=s,{computedIsCrossChain:u}=n,{estimateBridgeFeeAmount:l,estimateBridgeFeeAmountUsd:f}=r?.quote?.bestRoute?.bridge||{},S=(0,b.useMemo)(()=>u?C("swaptrade_intro_dialog_desc_cross_fee_notice",{value:C("swaptrade_modal_desc_crosschain_valuediff_variavle",{price:l?Ie(m(f).toString(),d):"--",fee:l?`${ke(l)} ${o}`:"--"})}):C("swaptrade_extension_tooltip_mining_fee"),[o,u,d,m,l,f]),g=(0,b.useMemo)(()=>b.default.createElement("span",{className:(0,De.default)("font-12 content-contrast",{[Ne.networkFeeTitle]:!t})},C("swaptrade_history_card_text_destination_chain_fee",{chainName:e})),[e]);return t?g:b.default.createElement(te,{rebirthPopper:!0,popupProps:{className:"text-center"},maxWidth:200,placement:te.DIRECTION.topRight,title:S},g)},J=D(Ye);var $e=({chainId:e,transactionPayload:o,isClaim:t=!1})=>{let{NetworkFeeEnter:r,SectionWrap:s}=p.components,{estimatedGasFee:n,feeLoading:m,coinSymbol:d}=Ge(e,o,t),{walletContractStore:u}=c(),{nativeCoin:l}=u;return Z.default.createElement(s,null,Z.default.createElement(r,{title:Z.default.createElement(J,{chainName:l?.chainName,coinSymbol:d,isClaim:t}),coinId:l?.coinId,loading:m,networkFee:n,useMinPrecision:!1}))},it=D($e);a();i();var I=T(F());le();a();i();var ue=T(F());a();i();a();i();var M={SLOW:"SLOW",MODERATE:"MODERATE",FAST:"FAST",CUSTOM:"CUSTOM"},ye={[M.SLOW]:"slow",[M.MODERATE]:"standard",[M.FAST]:"fast",[M.CUSTOM]:"custom"};var Xe=(e,o=!0)=>{if(o)return{initialGasType:ye[M.MODERATE]};let{maxPriorityFeePerGas:t,gas:r}=e||{};return{initialGasType:"custom",initialCustomMaxPriorityFee:t,initialCustomGasLimit:r,initialCustomMaxBaseFee:t}},be=Xe;var ze=(e,o,t,r=!1)=>{let{useFeeDisplay:s}=p.hooks,{walletContractStore:n,fromToStore:m}=c(),d=be(t,m.computedIsCrossChain),u=s(o,{gasInfo:e,calldata:t}),{coinAmount:l,coinSymbol:f,estimatedGasFeeInt:S,maxGasFeeInt:g,decimals:A,loading:k,error:w}=u,{maxGasFee:E,estimatedGasFee:h}=V({maxGasFeeInt:g,estimatedGasFeeInt:S,decimals:A,isClaim:r});return j(E),(0,ue.useEffect)(()=>{n.setGasFeeLoading(k)},[k,n]),(0,ue.useEffect)(()=>{n.setGasLimitError(w)},[w,n]),{txInitGasInfo:d,coinAmount:l,coinSymbol:f,maxGasFee:E,estimatedGasFee:h,gasType:e.gasType,feeLoading:u.loading,error:w}},Me=ze;var Ke=({chainId:e,transactionPayload:o,isClaim:t=!1})=>{let{EthereumNetworkFee:r,NetworkFeeEnter:s,SectionWrap:n}=p.components,{useGasReturnActivity:m}=p.hooks,[d,u]=(0,I.useState)(!1),{walletContractStore:l,accountStore:f,mevStore:S,fromToStore:g}=c(),{computedIsCrossChain:A}=g,{gasInfo:k,setGasInfo:w,nativeCoin:E,setActivityId:h}=l,{computedIsMevOpen:ee,mevInfo:R}=S,{to:G,from:N,data:L,value:P}=o||{},{coinId:x,chainName:O}=E||{},{txInitGasInfo:B,coinSymbol:W,gasType:q,estimatedGasFee:U,maxGasFee:H,feeLoading:Y,error:$}=Me(k,e,o,t),v=m({coinId:x,fromAddress:oe(N),toAddress:oe(G),unavailable:k.gasType==="custom",disabled:!G||!N||!x,gasInfo:k,txType:2,fee:Ee(k.networkFee||0)}),Re=()=>{u(!1)};return(0,I.useEffect)(()=>{h(v?.activityId)},[v,h]),I.default.createElement(I.default.Fragment,null,I.default.createElement(n,null,I.default.createElement(s,{level:q,title:I.default.createElement(J,{chainName:O,coinSymbol:W,isClaim:t}),coinId:x,loading:Y,networkFee:U,maxNetworkFee:H,gasReturn:v,estimateFailed:$,onClick:A?()=>{xe({wallet_address:f.address,button_name:"network_fee"}),u(!0)}:void 0,useMinPrecision:!1})),x&&I.default.createElement(r,{visible:d,coinId:x,address:N,inputData:L,tokenAddress:G,value:P,onBack:Re,onClose:p.goHome,onGasChange:w,initialGasData:B,gasReturn:v,isMev:ee,mevInfo:R}))},bt=D(Ke);export{Ze as a,K as b,eo as c,oo as d,xo as e,J as f,V as g,j as h,it as i,bt as j,ae as k,ie as l,qe as m,So as n};
//# sourceMappingURL=chunk-PAV4PF4B.js.map
