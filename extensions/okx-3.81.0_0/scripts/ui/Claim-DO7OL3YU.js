import{d as ct,e as dt,i as ut,j as ft,k as pt,l as Ct,n as k}from"./chunk-PAV4PF4B.js";import"./chunk-WELDOPJD.js";import"./chunk-AZ2KZKVQ.js";import{a as lt}from"./chunk-3MTWCI34.js";import{b as mt}from"./chunk-57F7LIJM.js";import{b as nt}from"./chunk-F57QKCZQ.js";import{I as at,J as it}from"./chunk-HIVYZXF3.js";import"./chunk-4Y52FA3V.js";import"./chunk-ZYYACLV7.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import{f as st}from"./chunk-YMYQJ726.js";import{j as rt}from"./chunk-FGRS6VIX.js";import{Mb as ot,Ub as et,vd as C}from"./chunk-INIQCRIO.js";import{c as d}from"./chunk-ZFBXO46L.js";import{a as tt}from"./chunk-6Z5HVUBK.js";import{G as O,da as b,l as R,m as L}from"./chunk-ZBDGRK4Q.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-B624VS3G.js";import{a as Ot}from"./chunk-6PA65BO3.js";import"./chunk-QCEQQDCM.js";import{d as q}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-SEAUBLKM.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{u as z,z as y}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as X}from"./chunk-4QGZDIBD.js";import{b as w}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RX4V72AK.js";import{f as u,o as a,q as i}from"./chunk-Y5OH3DDZ.js";a();i();var o=u(w()),B=u(Ot()),j=u(X());a();i();var V={list:"list",coin:"coin",orderDetail:"orderDetail"};a();i();var D=u(w());a();i();var _t=u(w());var N=()=>{let{walletContractStore:e}=d(),{gasFee:t,nativeCoin:r}=e,{coinAmountInt:s,decimals:n}=r??{};return(0,_t.useMemo)(()=>{let l=rt(s,n);return tt.gte(l,t||"0")},[t,s,n])};var Nt=()=>{let{HeaderTip:e}=b.components,{walletContractStore:t}=d(),{gasInfo:r,gasLimitError:s,nativeCoin:n,compuletedGetNativeCoinError:l,compuletedGetNativeCoinLoading:m,computedTipsBtnProps:T}=t,{symbol:h}=n??{},f={type:q.TYPE.error,renderGasStation:!1},S=N(),p=()=>D.default.createElement(e,{type:q.TYPE.warn,message:C("swaptrade_extension_cinteraction_insufficient_networkfee",{symbol:h}),actions:[T],renderGasStation:!1}),x=()=>D.default.createElement(e,{...f,message:C("swaptrade_extension_cinteraction_might_error")}),I=()=>D.default.createElement(e,{...f,message:s});return m?null:l?D.default.createElement(e,{...f,message:C("swaptrade_history_error_retrieve_balance_error")}):s?I():S&&r?.gasLimitInfo?.queryGasLimitErrorUseDefault?x():S?null:p()},gt=L(Nt);a();i();var ht=u(w());var Mt=({chainId:e,tokenContractAddress:t,amount:r,isNativeToken:s})=>{let n=Ct({chainId:e,tokenContractAddress:t,isNativeToken:s}),{coinId:l,decimals:m}=n||{};return(0,ht.useMemo)(()=>[{coinId:l,assetChange:pt("+",r,m),useMinPrecision:!1}],[r,l,m])},St=Mt;a();i();var g=u(w()),It=u(X());a();i();var yt=u(w());var Bt=()=>{let{walletContractStore:e}=d(),t=N(),{gasInfo:r,gasLimitError:s,compuletedGetNativeCoinError:n,compuletedGetNativeCoinLoading:l,gasFeeLoading:m}=e;return(0,yt.useMemo)(()=>m||s||n||l||r?.isGasLimitLoading||r?.gasLimitInfo?.queryGasLimitErrorUseDefault||!t,[n,l,m,r?.gasLimitInfo?.queryGasLimitErrorUseDefault,r?.isGasLimitLoading,s,t])},Tt=Bt;a();i();var wt=u(w());a();i();var Z=class{constructor(){this.isLoading=!1;this.setLoading=t=>{this.isLoading=t};this.orderDetail=null;this.setOrderDetail=t=>{this.orderDetail=t};this.fetchOrderDetail=async t=>{this.setLoading(!0);let[r,s]=await O(nt.get(et,{params:{orderId:t}}));if(r){this.setError(r),this.setLoading(!1);return}let n=s.data;this.setOrderDetail(n)};this.payload=null;this.setPayload=t=>{this.payload=t};this.sourceClaimPayload=null;this.setSourceClaimPayload=t=>{this.sourceClaimPayload=t};this.error=null;this.reset=()=>{this.setLoading(!1),this.setOrderDetail(null),this.setPayload(null),this.setSourceClaimPayload(null),this.clearError()};R(this,{},{autoBind:!0})}setError(t){this.error=t}clearError(){this.error=null}},E=new Z;var Wt=e=>{let{sendTransactionStore:t,walletContractStore:r,swapStore:s}=d(),{toChainId:n,orderId:l}=e||{};return(0,wt.useCallback)(async()=>{let{history:m}=b,{payload:T}=E;it.info(at.CLAIM_PAYLOAD,{payload:T,tags:{orderId:l}});let[h,f]=await O(t.sendTransaction(n,T[0],r.walletSendParams));if(h){s.onWalletFail(h,l,!0);return}let{result:S,nonce:p}=lt(n,f);await s.updateClaimOrder({mainOrderId:l,redeemTxHash:S,nonce:p}),m?.goBack()},[t,n,r.walletSendParams,s,l])},Et=Wt;a();i();var M={footer:"_footer_18rul_1","button-style":"_button-style_18rul_8",buttonStyle:"_button-style_18rul_8"};var Ft=({onChangeHeight:e,trade:t})=>{let r=(0,g.useRef)(null),[s,n]=(0,g.useState)(!1),{walletContractStore:l}=d(),{computedCancelBtnProps:m}=l;(0,g.useEffect)(()=>{let f=p=>{e&&e(p.offsetHeight)},S=new MutationObserver(p=>{f(p[0]?.target)});return r.current&&(f(r.current),S.observe(r.current,{childList:!0})),()=>{S.disconnect()}},[e]);let T=Tt(),h=Et(t);return g.default.createElement("div",{className:(0,It.default)(M.footer)},g.default.createElement(y,{block:!0,circle:!1,className:M.buttonStyle,size:y.SIZE.lg,category:y.CATEGORY.outline,type:y.TYPE.primary,loading:m.loading,loadingText:m.btnText,disabled:m.disabled,onClick:m.onClick},m.btnText),g.default.createElement(y,{block:!0,circle:!1,className:M.buttonStyle,size:y.SIZE.lg,type:y.TYPE.highlight,category:y.CATEGORY.fill,disabled:T,loading:s,loadingText:C("swaptrade_common_btn_confirm"),onClick:async()=>{n(!0),await h(),n(!1)}},C("swaptrade_common_btn_confirm")))},Lt=L(Ft);a();i();var $=u(w());var Ht=({chainId:e,transactionPayload:t})=>{let{fromToStore:r}=d(),{isEvmChain:s}=r;return dt(e),s(e)?$.default.createElement(ft,{chainId:e,transactionPayload:t,isClaim:!0}):$.default.createElement(ut,{chainId:e,transactionPayload:t,isClaim:!0})},bt=Ht;var Ut=()=>{let[e,t]=(0,o.useState)(""),{components:{MultipleChangeSummary:r,TxTypeWithTools:s,SectionWrap:n,InteractiveAddress:l,ModuleWrap:m,ViewData:T}}=b,h=(0,B.useHistory)(),[f,S]=(0,o.useState)(80),{search:p}=(0,B.useLocation)(),{orderId:x,source:I}=(0,o.useMemo)(()=>st(p),[p]),{swapStore:v,accountStore:W,fromToStore:kt,walletContractStore:xt}=d(),{computedAccountId:vt}=W,{isEvmChain:Pt}=kt,{gasInfo:F}=xt,{orderDetail:c,setPayload:P,payload:J,setLoading:H,setSourceClaimPayload:K,sourceClaimPayload:U}=E;(0,o.useEffect)(()=>{I&&(I===V.list||I===V.coin)&&e&&mt("bridge_claim_click","history_main",e)},[I,e]),(0,o.useEffect)(()=>{x&&E.fetchOrderDetail(x)},[x]),(0,o.useEffect)(()=>()=>{E.reset()},[]),(0,o.useEffect)(()=>{if(c){let G=W.getAddressByChainId(c.toChainId);t(G),v.fetchClaimCalldata(c,G).then(A=>{if(H(!1),!A){h.goBack();return}let{payload:Y,sourceClaimPayload:At}=A;P(Y),K(At)}).catch(()=>{H(!1)})}},[v,c,W,P,H,K,h]);let Q=(0,o.useCallback)(async(G,A)=>{let Y=await v.formatClaimPayload(G,A);P(Y)},[P,v]);(0,o.useEffect)(()=>{c&&U&&F&&Q(U,c)},[F.networkFee,c,U,P,v,F,Q]);let Dt=ct(ot.CLAIM),Gt=St({chainId:c?.toChainId,tokenContractAddress:c?.toTokenAddress,isNativeToken:c?.isNativeToken==="1",amount:c?.bridgeChildOrderDetailVo?.toAmountOut});return E.isLoading?o.default.createElement("div",{className:(0,j.default)(k.container,k.loading)},o.default.createElement(z,{size:z.SIZE.lg})):o.default.createElement("div",{className:k.container},o.default.createElement("div",{style:{height:`calc(100% - ${f}px)`},className:(0,j.default)(k.wrap)},o.default.createElement("div",{className:k.scroll,id:"wallet_scroll"},o.default.createElement(gt,null),o.default.createElement(s,{txTypeInfo:{baseInfo:Dt}},o.default.createElement(r,{title:C("swaptrade_orders_label_receive"),summaryList:Gt})),o.default.createElement(bt,{chainId:c?.toChainId,transactionPayload:J?.[0]}),o.default.createElement(n,null,o.default.createElement(l,{title:C("swaptrade_transfer_textarea_wallet_used"),address:e,walletId:vt})),o.default.createElement(n,{bordered:!1},Pt(c?.toChainId)&&o.default.createElement(T,{copyable:{hideDesc:!0},data:J?.[0]?.data})))),o.default.createElement(Lt,{onChangeHeight:S,trade:c}))},he=L(Ut);export{he as default};
//# sourceMappingURL=Claim-DO7OL3YU.js.map
