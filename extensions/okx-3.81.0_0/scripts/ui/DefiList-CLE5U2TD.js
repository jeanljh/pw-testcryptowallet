import{b as oo}from"./chunk-Z5IYSPVF.js";import{a as eo}from"./chunk-RKT4UZET.js";import"./chunk-PRGPMYUJ.js";import"./chunk-7F5XJ2TU.js";import"./chunk-MI2Q756Z.js";import"./chunk-SUQDM3DA.js";import"./chunk-XRMLFEEQ.js";import"./chunk-GRN4OI4B.js";import"./chunk-62VQDLH5.js";import"./chunk-QNQLOUVT.js";import"./chunk-32IFYA56.js";import"./chunk-ZZ5BEB5E.js";import{f as Qt}from"./chunk-GNGB7SWC.js";import"./chunk-ELXRV4IW.js";import"./chunk-T4CFY3IH.js";import"./chunk-6PSK4535.js";import{b as Lt}from"./chunk-GCPFAJKK.js";import"./chunk-7OWNMKUE.js";import"./chunk-EDJJACNG.js";import"./chunk-V7XA3BQU.js";import"./chunk-MK5QRIIU.js";import"./chunk-WD3IVQAU.js";import"./chunk-JVF7GJB3.js";import"./chunk-QKPPTYDW.js";import"./chunk-KPUXAS7Z.js";import"./chunk-IN42FW4K.js";import"./chunk-PQQFVOPL.js";import"./chunk-WST3WRLT.js";import"./chunk-6GOHKXI5.js";import"./chunk-PDSFU775.js";import"./chunk-NTAM5KQ5.js";import"./chunk-5QYLVV6H.js";import"./chunk-I4EML244.js";import"./chunk-TJIPZMF7.js";import"./chunk-57D6LCV2.js";import"./chunk-X7ACMHNF.js";import"./chunk-DEJA7CK3.js";import"./chunk-LS6URCUV.js";import"./chunk-XDEC3ZLT.js";import"./chunk-RGPNT5G7.js";import"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import"./chunk-AQO2BBXJ.js";import"./chunk-GWMNMJND.js";import"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import"./chunk-S7VT2TWF.js";import"./chunk-HBNZZZEG.js";import"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import"./chunk-BNS5ABAB.js";import"./chunk-UFGJXE4D.js";import"./chunk-7QX2TXNH.js";import"./chunk-LBNBJFSZ.js";import"./chunk-SFA2I2L2.js";import"./chunk-ZDHJHPQ5.js";import"./chunk-ROS2ENQV.js";import"./chunk-DFPRATON.js";import"./chunk-WY5R5HAR.js";import{b as to}from"./chunk-YX2POTUH.js";import"./chunk-GTQ5U6DA.js";import"./chunk-MYXJSJEA.js";import"./chunk-SMB23TMJ.js";import{a as _t}from"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import"./chunk-AP337SRV.js";import"./chunk-TF4QEXO7.js";import"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import"./chunk-QJ36ZOFH.js";import"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import"./chunk-JHO7RU36.js";import"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-3ZKJXYZ4.js";import{b as Ce}from"./chunk-PMO2NS5Q.js";import"./chunk-4ZSKRAEE.js";import"./chunk-IIJNHSKZ.js";import"./chunk-SOSR34AP.js";import"./chunk-GEL5KEYP.js";import"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-47LIW52M.js";import"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{m as Xt}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import{a as b}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-DZGSODSZ.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-J6XCA7RV.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{h as Oe}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import"./chunk-GCS2RK7E.js";import{a as Yt}from"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as Zt,f as j,u as m}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as Jt}from"./chunk-Z62JX42S.js";import{Na as Ie,la as q}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{F as Ht}from"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import{h as Kt}from"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import{a as B,c as Le,h as Mt,l as zt,t as Ut}from"./chunk-EFOY37CC.js";import{c as n}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import{b as pe,c as ot}from"./chunk-GR7YC6C3.js";import{E as Wt,J as kn}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Jb as gt,Sb as $t,la as ut,ra as ft,tb as qt}from"./chunk-COF7YKSN.js";import{A as g,G as Gt,K as se,l as Rt,o as Ot}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{A as ct,E as fe,I as St,P as J,Q as pt,R as Vt,U as jt,c as bt,e as ve,o as le,y as De}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import{j as dt,va as An}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{t as z,u as tt,z as R}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as Te}from"./chunk-4QGZDIBD.js";import{b as M}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as I,o as i,q as s}from"./chunk-Y5OH3DDZ.js";i();s();var Q=I(M()),Tn=I(Te());se();i();s();var Ae=I(M());i();s();ot();var no=({analysisPlatformId:e,chainId:o})=>{let t=Oe(),{data:r,loading:a}=Ce(pe.getDefiDetail,{method:"GET",params:{accountId:t||"",platformList:JSON.stringify([{analysisPlatformId:e,chainId:o}])}},{refreshDeps:[e,o,t],ready:!!t});return{defiDetail:r?(()=>{let l=r?.data?.[0]?.platformDetailListByAccountId?.[0]??{},c=r?.data?.[0]??{};return{...l,...c}})():null,loading:a}};i();s();var U=I(M()),on=I(Ie());se();i();s();i();s();var yt={DEFAULT:"default",PROTOCOL:"protocol"};var ro={[1]:2,[2]:4,[3]:5,[4]:6,[5]:16};i();s();var Fe=I(M()),lo=I(Ie());se();i();s();var ao=I(M());se();var he=()=>{let e=_t();return{navigateToInvestment:(0,ao.useCallback)(t=>{let{detailPath:r,platformInfo:a,isInvestTypeSupport:d=!1,source:l="positionpage"}=t,c=a.platformUrl;d&&r&&a?.detailPrePath&&(c=`${e?.origin}${a?.detailPrePath}${r}#source=${l}`),c&&Gt(c)},[e?.origin])}};i();s();var nt=I(M()),io=I(Te());i();s();var Je={container:"_container_15yph_1",logoGroup:"_logoGroup_15yph_6",tokenLogo:"_tokenLogo_15yph_10",small:"_small_15yph_19",moreLogo:"_moreLogo_15yph_23"};var Ze=({investLogo:e,size:o=20,type:t})=>{let{middleLogoList:r=[],topRightLogoList:a=[]}=e,d=o===16,l=()=>(t===yt.PROTOCOL?r:r.slice(0,2)).map(p=>nt.default.createElement(fe,{key:p?.tokenLogo,src:p?.tokenLogo,className:(0,io.default)(Je.tokenLogo,{[Je.small]:d})})),c=()=>a.length===0?null:nt.default.createElement(fe,{src:a[0]?.tokenLogo,className:Je.moreLogo});return r.length===0?null:nt.default.createElement(n.Box,{className:Je.container},nt.default.createElement("div",{className:Je.logoGroup},l()),c())};i();s();var ge=I(M()),rt=I(Te());i();s();var ie={container:"_container_vjjz5_1","padding-none":"_padding-none_vjjz5_5",paddingNone:"_padding-none_vjjz5_5","padding-sm":"_padding-sm_vjjz5_8",paddingSm:"_padding-sm_vjjz5_8","padding-md":"_padding-md_vjjz5_11",paddingMd:"_padding-md_vjjz5_11","padding-lg":"_padding-lg_vjjz5_14",paddingLg:"_padding-lg_vjjz5_14","radius-none":"_radius-none_vjjz5_17",radiusNone:"_radius-none_vjjz5_17","radius-sm":"_radius-sm_vjjz5_20",radiusSm:"_radius-sm_vjjz5_20","radius-md":"_radius-md_vjjz5_23",radiusMd:"_radius-md_vjjz5_23",divider:"_divider_vjjz5_26",content:"_content_vjjz5_35",left:"_left_vjjz5_38",right:"_right_vjjz5_42",textEllipsis:"_textEllipsis_vjjz5_46","price-row__content":"_price-row__content_vjjz5_53",priceRowContent:"_price-row__content_vjjz5_53","price-row__content--gap-xs":"_price-row__content--gap-xs_vjjz5_56",priceRowContentGapXs:"_price-row__content--gap-xs_vjjz5_56","price-row__content--gap-sm":"_price-row__content--gap-sm_vjjz5_59",priceRowContentGapSm:"_price-row__content--gap-sm_vjjz5_59","price-row__content--gap-md":"_price-row__content--gap-md_vjjz5_62",priceRowContentGapMd:"_price-row__content--gap-md_vjjz5_62","price-row__content--gap-lg":"_price-row__content--gap-lg_vjjz5_65",priceRowContentGapLg:"_price-row__content--gap-lg_vjjz5_65","price-row__left":"_price-row__left_vjjz5_68",priceRowLeft:"_price-row__left_vjjz5_68","price-row__right":"_price-row__right_vjjz5_73",priceRowRight:"_price-row__right_vjjz5_73","price-row__right--clickable":"_price-row__right--clickable_vjjz5_79",priceRowRightClickable:"_price-row__right--clickable_vjjz5_79","price-row__right--default":"_price-row__right--default_vjjz5_82",priceRowRightDefault:"_price-row__right--default_vjjz5_82","price-content__container":"_price-content__container_vjjz5_85",priceContentContainer:"_price-content__container_vjjz5_85","price-content__values":"_price-content__values_vjjz5_88",priceContentValues:"_price-content__values_vjjz5_88","price-content__logo":"_price-content__logo_vjjz5_91",priceContentLogo:"_price-content__logo_vjjz5_91"};var so=(e,o=!1)=>{let t=o?ie.textEllipsis:"";if(typeof e=="string")return ge.default.createElement(m.Text,{size:m.SIZE.sm,className:t},e);let{text:r,size:a="sm",type:d="default",strong:l}=e;return ge.default.createElement(m.Text,{size:m.SIZE[a],type:m.TYPE[d],strong:l,className:t},r)},Dn=e=>{let{primary:o,secondary:t,hiddenAssets:r=!1,hiddenString:a="****",showArrow:d=!1,primarySize:l="sm",secondarySize:c="xs",primaryColor:u,logo:p}=e;return ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:ie["price-content__container"]},ge.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.end,className:ie["price-content__values"]},ge.default.createElement(m.Text,{size:m.SIZE[l],strong:500,style:u?{color:u}:{}},r?a:o),t&&ge.default.createElement(m.Text,{size:m.SIZE[c],type:m.TYPE.secondary},r?a:t)),p&&ge.default.createElement(n.FlexBox,{className:ie["price-content__logo"]},p),d&&ge.default.createElement(z,{iconName:"okds-arrow-chevron-right-centered-md","data-testid":b.DEFI_PAGE.FLEX_ROW_ARROW}))},Y=({left:e,leftText:o,right:t,rightText:r,priceConfig:a,gap:d="sm",onClick:l,className:c="",padding:u="none","data-testid":p})=>{let C=(0,rt.default)(ie.container,ie[`padding-${u}`],c),f=(0,rt.default)(ie.content,ie["price-row__content"],ie[`price-row__content--gap-${d}`]),h=(0,rt.default)(ie.left,ie["price-row__left"]),k=l&&a?.showArrow,L=(0,rt.default)(ie.right,ie["price-row__right"],{[ie["price-row__right--clickable"]]:k,[ie["price-row__right--default"]]:!k}),w=o?so(o,!0):e,S;return a?S=Dn(a):r?S=so(r):S=t,ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:C,"data-testid":p},ge.default.createElement(n.FlexBox,{className:f,align:n.ALIGN.center},w&&ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:h,"data-testid":b.DEFI_PAGE.FLEX_ROW_LEFT},w),S&&ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"flex-end",className:L,onClick:a?.showArrow?l:void 0,role:l&&a?.showArrow?"button":void 0,tabIndex:l&&a?.showArrow?0:void 0,"data-testid":b.DEFI_PAGE.FLEX_ROW_RIGHT},S)))};i();s();var ze={main:"_main_na6wu_1",content:"_content_na6wu_4",nameSection:"_nameSection_na6wu_8",feeRate:"_feeRate_na6wu_11",omission:"_omission_na6wu_14"};var mo=({investName:e="",investmentName:o="",investLogo:t={middleLogoList:[]},feeRate:r="",totalValue:a="",hiddenAssets:d=!1,detailPath:l,platformInfo:c,isInvestTypeSupport:u})=>{let{symbol:p,usdToThisRate:C}=(0,lo.useSelector)(q),{navigateToInvestment:f}=he(),h=d?W:j(B(a,C),{currencySign:p}).value,k=()=>{f({detailPath:l,platformInfo:c,isInvestTypeSupport:u})},L=Rt.percent(Ut(B(r,"100"),2));return Fe.default.createElement(Y,{className:ze.main,left:Fe.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:ze.leftContent},Fe.default.createElement(Ze,{investLogo:t}),Fe.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:ze.content},Fe.default.createElement(n.FlexBox,{align:n.ALIGN.end,className:ze.nameSection},Fe.default.createElement(m.Text,{className:ze.omission,size:m.SIZE.sm,strong:500},o),r&&Fe.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.xs,className:ze.feeRate},`/${L}`)),Fe.default.createElement(pt,{size:J.SIZE.sm},e))),priceConfig:{primary:h,hiddenAssets:d,hiddenString:W,showArrow:!0},onClick:k,"data-testid":b.DEFI_PAGE.CARD_HEADER})};i();s();var at=I(M()),po=I(Ie());i();s();var Ue=I(M()),xt=I(Te());i();s();var Ye={"risk-tag":"_risk-tag_9k4hg_1",riskTag:"_risk-tag_9k4hg_1","risk-icon":"_risk-icon_9k4hg_11",riskIcon:"_risk-icon_9k4hg_11","risk-text":"_risk-text_9k4hg_19",riskText:"_risk-text_9k4hg_19","risk-safe":"_risk-safe_9k4hg_22",riskSafe:"_risk-safe_9k4hg_22","risk-warning":"_risk-warning_9k4hg_29",riskWarning:"_risk-warning_9k4hg_29","risk-danger":"_risk-danger_9k4hg_36",riskDanger:"_risk-danger_9k4hg_36","risk-unknown":"_risk-unknown_9k4hg_43",riskUnknown:"_risk-unknown_9k4hg_43"};function bn({healthLevel:e,showLevel:o=!0,levelConfig:t={},className:r}){let a={[1]:"safe",[2]:"warning",[3]:"danger",[0]:"unknown"},d={safe:{icon:"okx-wallet-plugin-security-fill",textIcon:"okx-wallet-plugin-illimited"},warning:{icon:"okx-wallet-plugin-security-1",text:"--"},danger:{icon:"okx-wallet-plugin-security-filled",text:"--"},unknown:{icon:"okx-wallet-plugin-security-1",text:"--"}},l=a[e]||a[0],c=t?.text||d[l]?.text,u=t?.textIcon||d[l]?.textIcon,p=t?.icon||d[l]?.icon;return Ue.default.createElement("div",{className:(0,xt.default)(Ye.riskTag,Ye[`risk-${l}`],r)},Ue.default.createElement(z,{fontSize:"16px",className:(0,xt.default)(p,Ye.riskIcon)}),o&&Ue.default.createElement(Ue.default.Fragment,null,c?Ue.default.createElement(m.Text,{size:m.SIZE.xs,strong:400,className:Ye["risk-text"]},c):Ue.default.createElement(z,{fontSize:"16px",className:(0,xt.default)(u,Ye["risk-text"])})))}var Tt=bn;i();s();var co={leftContent:"_leftContent_1pm16_1"};var Sn=e=>{let{totalValue:o,investTypeName:t,healthRate:r,hiddenAssets:a=!1,detailPath:d,isInvestTypeSupport:l,platformInfo:c,showArrow:u=!0}=e,{symbol:p,usdToThisRate:C}=(0,po.useSelector)(q),{navigateToInvestment:f}=he(),h=()=>{f({detailPath:d,platformInfo:c,isInvestTypeSupport:l})},k=at.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:co.leftContent},t&&at.default.createElement(J,{size:J.SIZE.md,category:J.CATEGORY.fill,color:J.COLOR.grey},t),r&&at.default.createElement(Tt,{healthLevel:r.level,levelConfig:{text:r.rate}}));return at.default.createElement(Y,{left:k,onClick:h,priceConfig:{primary:a?W:j(B(o||"0",C),{currencySign:p}).value,showArrow:u,hiddenAssets:a,hiddenString:W},gap:"md","data-testid":b.DEFI_PAGE.CARD_MAIN})},uo=Sn;i();s();var we=I(M()),jo=I(Ie());i();s();var Ve=e=>e===4||e===5,fo=e=>e.some(o=>o?Ve(o.rewardType):!1);i();s();var Ln=e=>!e||!Array.isArray(e)?"0":e.reduce((o,t)=>Le(o,t.currencyAmount||"0"),"0"),Nn=e=>e===4||e===5,go=(e,o,t)=>({...o,items:[...o.items,e],totalCurrencyAmount:Le(o.totalCurrencyAmount,t,{returnString:!0})}),En=(e,o)=>{let t=[];if(e.items.length>0){let r={...e,chainId:e.items[0]?.chainId};t.push(r)}if(o.items.length>0){let r={...o,chainId:o.items[0]?.chainId};t.push(r)}return t};function It(e){if(!e||e.length===0)return[];let o={rewardType:1,totalCurrencyAmount:"0",items:[],displayName:"wallet_extension_defiposition_title_rewards"},t={rewardType:4,totalCurrencyAmount:"0",items:[],displayName:"wallet_extension_defiposition_title_okx_bonus"};return e.forEach(r=>{if(!r||typeof r!="object")return;let{rewardType:a,baseDefiTokenInfos:d}=r,l=Ln(d);a===1?o=go(r,o,l):Nn(a)&&(t=go(r,t,l))}),En(t,o)}i();s();se();var yo=(e,o)=>Ve(e)?e===4?g("wallet_extension_defiposition_title_okx_bonus"):g("wallet_extension_bonus_mid_title_merkl_bonus"):o?g(o):"",Pn=e=>"callDataRewardType"in e&&"claimIndex"in e,vn=(e,o)=>{let t={};return e?.callDataRewardType===2&&(t.claimOverdue=1),e?.claimIndex&&(t.claimIndex=[e.claimIndex]),o?.canClaimAll===!0&&(t.claimAll=1),t},Fn=(e,o)=>{let t={...o};return e&&(t.callDataExtJson=JSON.parse(e)),JSON.stringify(t)},Bn=(e,o)=>{let t=e.callDataExtJson||"",r=Pn(e)?vn(e,o):{};return Fn(t,r)},Rn=(e,o)=>{if(e!==void 0)return e;if(o&&"chainId"in o)return o.chainId},xo=(e,o={})=>{let{chainId:t,isOpenLink:r=!1,buttonType:a,claimInfo:d}=o,l=Bn(e,d),c=Rn(t,e);return{investLogo:{middleLogoList:[{tokenLogo:e.tokenLogo,tokenName:e.tokenSymbol}]},tokenSymbol:e.tokenSymbol,tokenLogo:e.tokenLogo,coinAmount:e.coinAmount,currencyAmount:e.currencyAmount,isOpenLink:r,buttonType:a??e.buttonType,callDataExtJson:l,tokenAddress:e.tokenAddress,chainId:c,tokenPrecision:e.tokenPrecision}},it=(e,o={})=>(e||[]).map(t=>xo(t,o)),To=(e,o,t)=>{let{availableRewards:r=[]}=e||{};if(!r||r.length===0)return[];let a={redeemCalldataExtInfo:[],rewardAddress:"",chainId:o};return t&&(a.analysisPlatformId=t),r.filter(l=>!!l?.baseDefiTokenInfos?.length).map(l=>{let c={...a};return l.callDataExtJson&&(c.callDataExtJson=JSON.parse(l.callDataExtJson)),{title:"",rewardType:1,list:it(l?.baseDefiTokenInfos||[],{chainId:o}),buttonType:l?.buttonType,callDataExtJson:JSON.stringify(c),chainId:o,hideArrow:!0}})},Io=(e,o)=>!e.items||e.items.length===0?[]:e.items.map(t=>{let r=t.rewardType||e.rewardType;return{title:yo(r),list:it(t?.baseDefiTokenInfos||[],{chainId:o}),claimMode:t.claimMode,buttonType:t?.buttonType,hideArrow:!0,chainId:o,rewardType:r,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")})}}),Co=(e,o)=>e.map(t=>({title:g(t.displayName),hideArrow:!0,rewardType:1,list:it(t.items,{chainId:o,isOpenLink:!1}),chainId:o,buttonType:t.buttonType,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")})})),ho=(e,o)=>{let{chainId:t,mainAsset:r}=o,a=[{title:r.title,list:[{investLogo:r.investLogo,tokenSymbol:r.tokenSymbol,tokenLogo:"",coinAmount:r.coinAmount,currencyAmount:r.currencyAmount,isOpenLink:!0,detailPath:r?.detailPath,isInvestTypeSupport:r?.isInvestTypeSupport}]}];return e.forEach(d=>{let l=yo(d.rewardType,d.displayName);a.push({...d,title:l,hideArrow:!0,list:d.items.flatMap(c=>it(c.baseDefiTokenInfos||[],{chainId:d.chainId??t,isOpenLink:!1})),chainId:d.chainId??t,buttonType:d.items[0]?.buttonType,callDataExtJson:"",rewardType:d.rewardType})}),a},wo=(e,o)=>!e||e.length===0?[]:e.map(t=>({title:"",list:it(t.baseDefiTokenInfos||[],{chainId:o,isOpenLink:!1}),buttonType:t.buttonType,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")}),rewardType:1,hideArrow:!0,chainId:o})),Ao=(e,o,t)=>!e||e.length===0?[]:[{list:e.map(r=>xo(r,{chainId:o,claimInfo:t})),buttonType:0,chainId:o,rewardType:1,hideArrow:!0}];i();s();var E=I(M());se();i();s();$t();function On(e){let o=gt({chainId:e}),t=Xt(o?.localType);return o?t:null}var Ct=On;i();s();var oe=I(M()),ko=I(Ie()),Nt=I(Te());se();i();s();var y={dialogContent:"_dialogContent_7daqu_1",headerContainer:"_headerContainer_7daqu_5",tokenSection:"_tokenSection_7daqu_10",itemContainer:"_itemContainer_7daqu_14",claimButtonContainer:"_claimButtonContainer_7daqu_18",claimButton:"_claimButton_7daqu_18",specialRewardIcon:"_specialRewardIcon_7daqu_25",questionMarkIcon:"_questionMarkIcon_7daqu_30",bonusWarningIcon:"_bonusWarningIcon_7daqu_35",bonusTitle:"_bonusTitle_7daqu_38",bonusDescription:"_bonusDescription_7daqu_43",bonusContainer:"_bonusContainer_7daqu_47",bonusLabel:"_bonusLabel_7daqu_53",bonusValue:"_bonusValue_7daqu_54",bonusDivider:"_bonusDivider_7daqu_57",bonusActionButton:"_bonusActionButton_7daqu_62",bonusConfirmButton:"_bonusConfirmButton_7daqu_67",bonusCancelButton:"_bonusCancelButton_7daqu_72",bonusDialogContainer:"_bonusDialogContainer_7daqu_77",bonusHeaderContainer:"_bonusHeaderContainer_7daqu_81",bonusRewardsList:"_bonusRewardsList_7daqu_84",bonusRewardItem:"_bonusRewardItem_7daqu_87",bonusTotalRow:"_bonusTotalRow_7daqu_91",bonusNetworkFeeRow:"_bonusNetworkFeeRow_7daqu_95",bonusButtonContainer:"_bonusButtonContainer_7daqu_99",gasFeeDialogWindow:"_gasFeeDialogWindow_7daqu_103",gasFeeDragHandle:"_gasFeeDragHandle_7daqu_108",gasFeeTitle:"_gasFeeTitle_7daqu_115",gasFeeDescription:"_gasFeeDescription_7daqu_121",gasFeeContinueButton:"_gasFeeContinueButton_7daqu_125",gasFeeCancelButton:"_gasFeeCancelButton_7daqu_126",gasFeeMainContainer:"_gasFeeMainContainer_7daqu_132",gasFeeHeaderPadding:"_gasFeeHeaderPadding_7daqu_137",gasFeeContentPadding:"_gasFeeContentPadding_7daqu_141",gasFeeHeaderSection:"_gasFeeHeaderSection_7daqu_146",gasFeeIconWrapper:"_gasFeeIconWrapper_7daqu_150",gasFeeButtonSectionLayout:"_gasFeeButtonSectionLayout_7daqu_155",gasFeeButtonGroupLayout:"_gasFeeButtonGroupLayout_7daqu_159",titleContainer:"_titleContainer_7daqu_164",tipDialogContent:"_tipDialogContent_7daqu_167",loadingContainer:"_loadingContainer_7daqu_170",sectionTitleContainer:"_sectionTitleContainer_7daqu_176",emptyContainer:"_emptyContainer_7daqu_179"};var Do=({visible:e,onClose:o,onConfirm:t,bonusData:r,platformInfo:a})=>{let d=(0,ko.useSelector)(q),l=d?.usdToThisRate,c=d?.symbol,u=r.reduce((p,C)=>{let f=C.currencyAmount||"0";return Le(p,f)},"0");return oe.default.createElement(le.Action,{visible:e,onClose:o,hideCloseBtn:!1,maskClosable:!0},oe.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusDialogContainer,"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG},oe.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:y.bonusHeaderContainer},oe.default.createElement(z,{iconName:"okds-warning-circle",fontSize:"56px",className:y.bonusWarningIcon}),oe.default.createElement(m.Text,{size:m.SIZE.xl,strong:700,align:"center",className:y.bonusTitle,style:{fontSize:"24px"}},g("wallet_extension_defi_bonus_reminder_title"))),oe.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusDescription,align:"center"},g("wallet_extension_defiposition_bttmsheet_desc_claim_all_rewards")),oe.default.createElement("div",{className:y.bonusContainer},oe.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusRewardsList},r.map(p=>oe.default.createElement("div",{key:`${p.tokenAddress}-${p.tokenSymbol}-${p.coinAmount}-${p.currencyAmount}`,className:y.bonusRewardItem},oe.default.createElement(Ge,{logo:p.tokenLogo,tokenSymbol:p.tokenSymbol,coinAmount:p.coinAmount,currencyAmount:p.currencyAmount,title:p.tokenSymbol,hideArrow:!0,platformInfo:a}))),r.length>0&&oe.default.createElement("div",{className:y.bonusDivider}),oe.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusTotalRow},oe.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_defiposition_common_label_total_rewards")),oe.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},j(B(u,l||1),{currencySign:c||"$"}).value)))),oe.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusButtonContainer},oe.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.xl,onClick:t,className:(0,Nt.default)(y.bonusActionButton,y.bonusConfirmButton),"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG_CONTINUE_BUTTON},g("wallet_extension_defiposition_bttmsheet_btn_continue_claim")),oe.default.createElement(R,{category:R.CATEGORY.outline,type:R.TYPE.default,size:R.SIZE.xl,onClick:o,className:(0,Nt.default)(y.bonusActionButton,y.bonusCancelButton),"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG_CANCEL_BUTTON},g("commonall_text_btn_cancel")))))};i();s();var me=I(M()),Po=I(Jt());qt();i();s();var bo={fullscreenDialog:"_fullscreenDialog_1ckr4_1"};i();s();var ht=I(M());ot();var Lo=()=>{let{runAsync:e}=Ce(pe.postInvestTransactionSaveOrder,{method:"POST",catchMode:"noToast"},{manual:!0});return{handleSaveOrderWithFetch:(0,ht.useCallback)(async t=>{let{walletId:r,chainId:a,txParams:d,defiDetail:l}=t,c=d?.from||"",u=d?.to||"",p=d?.data||"",C=l?.analysisPlatformId,f=l?.investmentId,h=l?.list||[],k=l?.orderType||2,L={coinAmount:0,fromAdr:c,inputData:p,toAdr:u,accountId:r,walletPlug:5,tokenInfo:h,totalValue:l?.totalValue,orderType:k,analysisPlatformId:C,chainId:a,investmentId:f,extJson:JSON.stringify({})},w=await e(L);return w&&w.code==0&&w.data?{orderId:w.data.orderId,orderTxInfoId:w.data.orderTxInfoId,fromAddress:c}:null},[e])}},No=()=>{let{runAsync:e}=Ce(pe.postInvestTransactionBindOrderAndTx,{catchMode:"noToast",method:"POST"},{manual:!0});return{handleTransactionSuccessWithFetch:(0,ht.useCallback)(async t=>{let{txResult:r,orderInfo:a,txParams:d,signedTxParams:l}=t,{orderId:c,orderTxInfoId:u,fromAddress:p}=a,C=r?.txHash;if(!C)return;let f={txHash:C,orderId:c,orderTxInfoId:u,fromAddress:p,inputData:d?.data||""};l&&(f.nonce=l.nonce),await e(f)},[e])}},Eo=()=>{let{runAsync:e}=Ce(pe.postInvestTransactionSyncOrderStatus,{method:"POST",catchMode:"noToast"},{manual:!0});return{handleTransactionFailureWithFetch:(0,ht.useCallback)(async t=>{let{reason:r,status:a=2,orderInfo:d}=t,{orderId:l,orderTxInfoId:c}=d;await e({orderId:l,orderTxInfoId:c,status:a,failedReason:r})},[e])}};var Mn=({unapproved:e,onClose:o,visible:t})=>{let{chainId:r,baseChain:a,txParams:d,orderInfo:l,defiDetail:c}=e,u=Oe(),p=(0,me.useRef)(!1),C=(0,me.useRef)(null),[f,h]=(0,me.useState)(null),{handleSaveOrderWithFetch:k}=Lo(),{handleTransactionSuccessWithFetch:L}=No(),{handleTransactionFailureWithFetch:w}=Eo();(0,Po.useMount)(()=>{(async()=>{if(l||!d||f)return;let O=await k({walletId:u,chainId:r,txParams:d,defiDetail:c});O&&h(O)})()});let S=(0,me.useCallback)(async A=>{let O=f||l;!O||p.current||(p.current=!0,await L({txResult:A,orderInfo:O,txParams:d,signedTxParams:C.current}))},[f,l,d,L]),V=(0,me.useCallback)(async(A,O=2)=>{let K=f||l;!K||await w({reason:A,status:O,orderInfo:K})},[f,l,w]),P=async A=>{if(A?.error){await V(A.error?.message||A.error?.msg||"",2);return}A&&(await S(A),o&&o())},D=async()=>{try{await V("User cancelled transaction",1)}catch{}finally{o&&o()}},x=()=>{switch(a){case ft:if(!d.serializedData)throw new Error("Missing serializedData for Solana transaction");return me.default.createElement(eo,{id:`defi-claim-${u}-${r}`,walletId:u,method:Ht.SIGN_AND_SEND_TRANSACTION,params:{message:[{serializedMessage:d.serializedData}]},onConfirm:P,onCancel:D,addPriorityFee:!1});case ut:default:return me.default.createElement(Qt,{walletId:u,chainId:r,txParams:d,onCancel:D,onConfirm:P,onBeforeSign:A=>(C.current=A,A)})}};return me.default.createElement(le,{visible:t,hideCloseBtn:!1,maskClosable:!1,noContentPadding:!0,onClose:o,windowClass:bo.fullscreenDialog},me.default.createElement("div",{"data-testid":b.DEFI_PAGE.CLAIM_CONFIRM_DIALOG},x()))},vo=(0,me.memo)(Mn);i();s();var F=I(M()),Fo=I(Ie()),je=I(Te());se();var Bo=({visible:e,gasFeeAmount:o="0",rewardAmount:t="0",onConfirm:r,onCancel:a})=>{let{symbol:d,usdToThisRate:l}=(0,Fo.useSelector)(q),c=(0,F.useMemo)(()=>j(B(o,l),{currencySign:d,useApproximate:!1}).value,[o,l,d]),u=(0,F.useCallback)(()=>{r?.()},[r]),p=(0,F.useCallback)(()=>{a?.()},[a]);return F.default.createElement(le,{visible:e,maskClosable:!1,onClose:p,alignBottom:!0,noMargin:!0,noContentPadding:!0,hideCloseBtn:!0,className:y.gasDialog,windowClass:y.gasFeeDialogWindow},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG,align:n.ALIGN.center,className:(0,je.default)(y.gasFeeContainer,y.gasFeeMainContainer)},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,je.default)(y.gasFeeSheetHeader,y.gasFeeHeaderPadding)},F.default.createElement("div",{className:y.gasFeeDragHandle})),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,je.default)(y.gasFeeSheetContent,y.gasFeeContentPadding)},F.default.createElement(n.FlexBox,{className:(0,je.default)(y.bonusHeaderContainer,y.gasFeeHeaderSection),direction:n.DIRECTION.vertical,align:n.ALIGN.center},F.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.gasFeeIconWrapper},F.default.createElement(z,{iconName:"okds-warning-circle",fontSize:"56px"})),F.default.createElement(m.Text,{size:m.SIZE.xl,strong:700,align:"center",className:y.gasFeeTitle,style:{fontSize:"24px"}},g("wallet_extension_defiposition_dialog_title_reminder")),F.default.createElement(m.Text,{size:m.SIZE.sm,align:"center",className:y.gasFeeDescription},g("wallet_extension_defiposition_bttmsheet_desc_pay_to_claim",{value:F.default.createElement("span",{style:{color:"var(--okd-color-semantic-notice)"}},c)}))),F.default.createElement("div",{className:y.bonusContainer},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusRewardsList},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusNetworkFeeRow},F.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_fb_header_network_fee")),F.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},c)),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusTotalRow},F.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_defiposition_title_rewards")),F.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},j(B(t,l),{currencySign:d,useApproximate:!1}).value))))),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,je.default)(y.gasFeeButtonSection,y.gasFeeButtonSectionLayout)},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,je.default)(y.gasFeeButtonGroup,y.gasFeeButtonGroupLayout)},F.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.primary,size:R.SIZE.xl,onClick:u,className:y.gasFeeContinueButton,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG_CONTINUE_BUTTON},g("wallet_extension_defiposition_bttmsheet_btn_continue_claim")),F.default.createElement(R,{category:R.CATEGORY.outline,type:R.TYPE.secondary,size:R.SIZE.xl,onClick:p,className:y.gasFeeCancelButton,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG_CANCEL_BUTTON},g("commonall_text_btn_cancel"))))))};i();s();var We=I(M());ot();i();s();var _e=I(M());An();ot();var wt=()=>{let[e,o]=(0,_e.useState)(!1),[t,r]=(0,_e.useState)(!1),[a,d]=(0,_e.useState)(null),[l,c]=(0,_e.useState)(null),{runAsync:u}=Ce(pe.postInvestTransactionCallData,{method:"POST"},{manual:!0}),{runAsync:p}=Ce(pe.postInvestTransactionClaimValidate,{method:"POST"},{manual:!0}),{runAsync:C}=Ce(pe.getUserClaimInfo,{method:"POST"},{manual:!0}),f=(0,_e.useCallback)(async P=>{o(!0);try{let D=await u(P);return dt(D,"data",null)}finally{o(!1)}},[u]),h=(0,_e.useCallback)(async P=>{let D=await p(P);return dt(D,"data",null)},[p]),k=(0,_e.useCallback)(async P=>{let D=await C(P);return dt(D,"data",null)},[C]),L=(0,_e.useCallback)(async(P,D)=>{let x=await h(P);if(!x)return!0;let{allGasFee:A,claimableBalance:O}=x,K=A?.allGasFeeAmount||"0",N=O?.insufficientRewardList||[],de=Mt(K,D),ae=N.length>0;return de||ae?(d({shouldShowDialog:!0,gasFeeAmount:K,rewardAmount:D,insufficientRewardList:N}),r(!0),new Promise(X=>{c(()=>X)})):!0},[h]),w=(0,_e.useCallback)(()=>{r(!1),c(null)},[]),S=(0,_e.useCallback)(()=>{l&&l(!0),w()},[l,w]),V=(0,_e.useCallback)(()=>{l&&l(!1),w()},[l,w]);return{claimRewards:f,validateClaim:h,getUserClaimInfo:k,checkClaimGasFee:L,loading:e,gasFeeDialogVisible:t,gasFeeCheckResult:a,closeGasFeeDialog:w,confirmGasFeeDialog:S,cancelGasFeeDialog:V}};i();s();$t();qt();i();s();var Ro={[4]:6,[5]:16};var Xe={CALLDATA:"calldata",SAVE_ORDER:"saveOrder"},Et=(e,o,t=Xe.CALLDATA)=>{let r=(l,c)=>{let u=Lt(l.coinAmount,l.tokenPrecision),C={chainId:l.chainId||c,coinAmount:u,tokenAddress:l.tokenAddress||""};return t===Xe.SAVE_ORDER?{...C,currencyAmount:l.currencyAmount||"0",expectTokenAddress:l.tokenAddress||""}:{...C}},a=e.chainId||0,d=e.list.map(l=>r(l,a));if(t===Xe.SAVE_ORDER){let l=d.reduce((p,C)=>{let f=C.currencyAmount,h=zt(f)||"0";return Le(p,h)},"0"),c=e.rewardType,u=(c&&Ro[c])??2;return{totalValue:l,rewardType:c,orderType:u,list:d}}return d},Oo=e=>{let o=e.chainId||0;return e.list.map(t=>{let r=Lt(t.coinAmount||"0",t.tokenPrecision);return{chainId:t.chainId||o,coinAmount:r,tokenAddress:t.tokenAddress||"",currencyAmount:t.currencyAmount||"0",tokenSymbol:t.tokenSymbol,tokenPrecision:t.tokenPrecision}})},Go=e=>{let{data:o,address:t,investmentId:r}=e,a=Et(o,[],Xe.CALLDATA);return{address:t,expectOutputList:a,extra:o.callDataExtJson||"",investmentIdList:r?[r]:[],type:ro[o.rewardType],userInputList:[]}},Mo=(e,o,t,r)=>({chainId:e[0]?.chainId||1,contractAddress:o.to||"",address:t,inputData:o.data||"",investmentId:r,userClaimTokenAndAmounts:e.map(d=>({rewardTokenAddress:d.tokenAddress,rewardCoinAmount:d.coinAmount}))}),zo=(e,o)=>e.list.reduce((r,a,d)=>o[d]?Le(r,a.currencyAmount||"0"):r,"0"),Uo=e=>{let t=gt({chainId:e})?.baseChain;return{isSupported:t===ft||t===ut,baseChain:t}};var zn=(e,o,t,r)=>t!==void 0&&r!==void 0?{buttonType:t.buttonType,chainId:t.chainId||e.chainId,callDataExtJson:t.callDataExtJson&&t.callDataExtJson!=="{}"?t.callDataExtJson:e.callDataExtJson,rewardType:e.rewardType,list:[t],sectionIndex:o,claimKey:`${o}-${r}`,title:e.title}:{buttonType:e.buttonType,chainId:e.chainId,callDataExtJson:e.callDataExtJson,rewardType:e.rewardType,list:e.list,sectionIndex:o,claimKey:`section-${o}`,title:e.title},Vo=({modalData:e,address:o,investmentId:t,platformInfo:r,onCloseParentDialog:a})=>{let{claimRewards:d,checkClaimGasFee:l,loading:c,gasFeeDialogVisible:u,gasFeeCheckResult:p,confirmGasFeeDialog:C,cancelGasFeeDialog:f}=wt(),{navigateToInvestment:h}=he(),{runAsync:k}=Ce(pe.getBonusWindowDetail,{method:"POST"},{manual:!0}),[L,w]=(0,We.useState)(new Set),[S,V]=(0,We.useState)(!1),[P,D]=(0,We.useState)([]),[x,A]=(0,We.useState)(null),[O,K]=(0,We.useState)(!1),[N,de]=(0,We.useState)(null),ae=async(v,_,Z,Be)=>{let Re=await k({investmentId:v,chainId:_,userAddress:Z,unclaimedTokenAddress:Be});if(Re&&Re.code===0&&Re.data)return Re.data;throw new Error(Re&&Re.error_message||"Failed to fetch bonus window data")},H=v=>v.rewardType===5,X=v=>v.list.map(_=>_.tokenAddress).filter(_=>Boolean(_)),xe=async v=>{let _=Go({data:v,modalData:e,address:o,investmentId:t}),Z=_.expectOutputList[0]?.chainId;if(!Z)return;let Be=Uo(Z);if(!Be.isSupported){r.platformUrl&&h({platformInfo:r,isInvestTypeSupport:!1});return}let ce=await d(_);if(!ce)return;let Re=zo(v,_.expectOutputList),In=Mo(_.expectOutputList,ce,o,t);try{if(!await l(In,Re.toString()))return;let hn=Oo(v),mt=Et(v,e,Xe.SAVE_ORDER),wn={defiDetail:{investmentId:t,analysisPlatformId:r.analysisPlatformId,totalValue:mt.totalValue,rewardType:mt.rewardType,orderType:mt.orderType,list:mt.list},baseChain:Be.baseChain,txParams:ce,expectedTokensWithCurrency:hn,chainId:Z};de(wn),K(!0)}catch{}};return{handleClaim:async v=>{try{if(w(_=>new Set(_).add(v.claimKey)),H(v)&&t){let _=X(v);if(_.length>0)try{let Z=v.chainId||e[v.sectionIndex]?.chainId||0,Be=await ae(t,Z,o,_);A(v),D(Be),V(!0);return}catch{}}await xe(v)}catch{}finally{w(_=>{let Z=new Set(_);return Z.delete(v.claimKey),Z})}},claimingItems:L,loading:c,gasFeeDialogVisible:u,gasFeeCheckResult:p,confirmGasFeeDialog:C,cancelGasFeeDialog:f,bonusWindowVisible:S,bonusWindowData:P,handleBonusWindowConfirm:async()=>{if(V(!1),x)try{await xe(x)}finally{w(v=>{let _=new Set(v);return _.delete(x.claimKey),_}),A(null)}},handleBonusWindowCancel:()=>{V(!1),x&&w(v=>{let _=new Set(v);return _.delete(x.claimKey),_}),A(null)},txConfirmVisible:O,txConfirmData:N,handleTxConfirmClose:()=>{K(!1),de(null),a&&a()},createUnifiedClaimData:zn}};var Ne=({visible:e,platformInfo:o,modalData:t=[],investmentId:r,title:a,onClose:d,headerComponent:l,loading:c=!1,popUpData:u})=>{let{platformUrl:p,chainId:C}=o,[f,h]=(0,E.useState)(null),k=t.length>0&&t.some(G=>G.list.length>0),L=Ct(C),{handleClaim:w,claimingItems:S,gasFeeDialogVisible:V,gasFeeCheckResult:P,confirmGasFeeDialog:D,cancelGasFeeDialog:x,bonusWindowVisible:A,bonusWindowData:O,handleBonusWindowConfirm:K,handleBonusWindowCancel:N,txConfirmVisible:de,txConfirmData:ae,handleTxConfirmClose:H,createUnifiedClaimData:X}=Vo({platformInfo:o,modalData:t,address:L||"",investmentId:r,platformUrl:p||"",onCloseParentDialog:d});(0,E.useEffect)(()=>{!e&&f&&(f.destroy(),h(null))},[e,f]);let xe=(G,Se,ee)=>!G||G!==2&&G!==3?null:E.default.createElement(n.FlexBox,{justify:"flex-end",className:y.claimButtonContainer},E.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.xs,className:y.claimButton,disabled:G===2||S.has(Se),loading:S.has(Se),onClick:()=>{if(G===3){let v=ee();w(v)}}},g("commonall_modal_btn_claim"))),He=u?E.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.titleContainer},E.default.createElement(m.Text,null,a),E.default.createElement(z,{iconName:"okds-question-mark-circle",className:y.questionMarkIcon,a11yText:"Help_information",onClick:()=>{f&&f.destroy();let G=le.tip({title:null,children:E.default.createElement(n.FlexBox,{className:y.tipDialogContent},u.content),confirmText:u?.actions?.[0]?.actionName||"",onConfirm:()=>{G.destroy(),h(null)},onClose:()=>{h(null)}});h(G)}})):a;return E.default.createElement(le.Action,{visible:e,title:He||E.default.createElement(E.default.Fragment,null),hideCloseBtn:!1,maskClosable:!0,noContentPadding:!1,onClose:d},E.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.dialogContent},l&&E.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.headerContainer},typeof l=="function"?E.default.createElement(l,null):l),c&&E.default.createElement(n.FlexBox,{justify:"center",align:n.ALIGN.center,className:y.loadingContainer},E.default.createElement(tt,null)),!c&&E.default.createElement(E.default.Fragment,null,k?t.map((G,Se)=>G.list.length>0&&E.default.createElement(n.FlexBox,{key:`${G.rewardType}-${G.title}-${G.list.length}-${G.callDataExtJson}`,direction:n.DIRECTION.vertical,className:y.tokenSection},E.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.sectionTitleContainer},E.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary},G.title),Ve(G.rewardType)&&E.default.createElement(z,{iconName:"okds-fire-flame_filled",className:y.specialRewardIcon})),G.list.map((ee,v)=>E.default.createElement(n.FlexBox,{key:`${ee.tokenSymbol}-${ee.coinAmount}-${ee.currencyAmount}-${ee.tokenAddress}-${ee.callDataExtJson}`,direction:n.DIRECTION.vertical,className:y.itemContainer},E.default.createElement(Ge,{title:G.title||"",platformInfo:o,investLogo:ee.investLogo,tokenSymbol:ee.tokenSymbol,coinAmount:ee.coinAmount,currencyAmount:ee.currencyAmount,hideArrow:G.hideArrow??!1,hiddenAssets:ee.hiddenAssets,detailPath:ee.detailPath,isInvestTypeSupport:ee.isInvestTypeSupport}),xe(ee.buttonType,`${Se}-${v}`,()=>X(G,Se,ee,v)))),xe(G.buttonType,`section-${Se}`,()=>X(G,Se)))):E.default.createElement(n.FlexBox,{justify:"center",align:n.ALIGN.center,className:y.emptyContainer},E.default.createElement(De.State,{type:De.State.TYPE.noRecord}))),E.default.createElement(Bo,{visible:V&&!!P,gasFeeAmount:P?.gasFeeAmount||"0",rewardAmount:P?.rewardAmount||"0",onConfirm:D,onCancel:x}),E.default.createElement(Do,{visible:A,onClose:N,onConfirm:K,bonusData:O,platformInfo:o}),ae&&E.default.createElement(vo,{unapproved:ae,visible:de,onClose:H})))};i();s();var st={specialRewardIcon:"_specialRewardIcon_1vwsp_1",leftContent:"_leftContent_1vwsp_4",tokenInfo:"_tokenInfo_1vwsp_7",tokenSymbol:"_tokenSymbol_1vwsp_10"};var Un=e=>{let{detailPath:o,isInvestTypeSupport:t,logo:r,tokenSymbol:a,coinAmount:d,currencyAmount:l,lendingAssetItem:c,investLogo:u,platformInfo:p,title:C,hideArrow:f=!1,hiddenAssets:h=!1,hiddenString:k}=e,[L,w]=(0,we.useState)(!1),{symbol:S,usdToThisRate:V}=(0,jo.useSelector)(q),{platformUrl:P}=p,{navigateToInvestment:D}=he(),x=u||{middleLogoList:[{tokenLogo:r||"",tokenName:a}]},{supplied:A,rewards:O=[]}=c||{},K=It(O),N=fo(O),de=ho(K,{chainId:c?.extraData?.chainId??p.chainId,mainAsset:{investLogo:x,tokenSymbol:A?.[0].tokenSymbol||a,coinAmount:d,currencyAmount:l,title:C,detailPath:c?.detailPath,isInvestTypeSupport:c?.isInvestTypeSupport}}),ae=()=>{w(!0)},H=()=>{if(!f){if(O.length>0){ae();return}D({detailPath:o||c?.detailPath,isInvestTypeSupport:t||c?.isInvestTypeSupport,platformInfo:p})}},X=we.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:st.leftContent},we.default.createElement(Ze,{investLogo:x}),we.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:st.tokenInfo},we.default.createElement(m.Text,{size:m.SIZE.xs,strong:500,className:st.tokenSymbol},a),N&&we.default.createElement(z,{iconName:"okds-fire-flame_filled",fontSize:"16px",className:st.specialRewardIcon})));return we.default.createElement(we.default.Fragment,null,we.default.createElement(Y,{left:X,priceConfig:{primary:Zt(d).value,secondary:j(B(l,V),{currencySign:S}).value,hiddenAssets:h,hiddenString:k,showArrow:!!(P&&!f)},onClick:P?H:void 0,gap:"md","data-testid":b.DEFI_PAGE.CARD_PRICE}),we.default.createElement(Ne,{investmentId:c?.investmentId,visible:L,platformInfo:p,modalData:de,onClose:()=>w(!1)}))},Ge=Un;i();s();var ye=I(M()),$o=I(Ie());se();i();s();var Wo={main:"_main_1fabw_1"};var Vn=e=>e.reduce((o,t)=>Le(o,t.currencyAmount||"0"),"0"),qo=g("wallet_extension_defidashboard_bttmsheet_header_mkt_rewards"),jn=({platformInfo:e,marketRewards:o,hiddenAssets:t=!1})=>{let{symbol:r,usdToThisRate:a}=(0,$o.useSelector)(q),[d,l]=(0,ye.useState)(!1),[c,u]=(0,ye.useState)([]),p=(0,ye.useMemo)(()=>!o||o.length===0?"0":Vn(o),[o]);if(!o||o.length===0)return null;let C=()=>{l(!0);let f=wo(o,e.chainId);u(f)};return ye.default.createElement(ye.default.Fragment,null,ye.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Wo.main,"data-testid":b.DEFI_PAGE.MARKET_REWARDS},ye.default.createElement(Y,{left:ye.default.createElement(n.FlexBox,{align:n.ALIGN.center,style:{gap:"4px"}},ye.default.createElement(m.Text,{size:m.SIZE.xs,color:"primary"},qo)),priceConfig:{primary:t?W:j(B(p,a),{currencySign:r}).value,showArrow:!0,hiddenAssets:t,hiddenString:W},onClick:C})),ye.default.createElement(Ne,{visible:d,platformInfo:e,modalData:c,title:qo,loading:!1,popUpData:null,onClose:()=>{l(!1)}}))},Ho=jn;i();s();var qe=I(M()),Jo=I(Ie()),Zo=I(Te());i();s();var Qe={tagsContainer:"_tagsContainer_1purc_1",primaryTag:"_primaryTag_1purc_6",secondaryTag:"_secondaryTag_1purc_10",tagContent:"_tagContent_1purc_14",infoIcon:"_infoIcon_1purc_17"};var Wn=({investToken:e,hiddenAssets:o=!1,platformInfo:t})=>{let{symbol:r,usdToThisRate:a}=(0,Jo.useSelector)(q),{navigateToInvestment:d}=he(),l=()=>{d({detailPath:e.detailPath,isInvestTypeSupport:e.isInvestTypeSupport,platformInfo:t})},c=C=>{C.stopPropagation();let f=e?.extraData?.investmentNameTip?.popUpData;if(!f)return;let h=le.tip({infoType:le.Tip.INFO_TYPE.default,title:e?.extraData?.investmentNameTip?.tipContent,children:f.content,confirmText:f.actions[0].actionName,onConfirm:()=>{h.destroy()},onClose:()=>{h.destroy()}})},u=qe.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Qe.tagsContainer},qe.default.createElement(J,{className:Qe.primaryTag,category:J.CATEGORY.fill,color:J.COLOR.grey,size:J.SIZE.md},e.investName),e?.extraData?.investmentNameTip?.tipContent&&qe.default.createElement(J,{className:Qe.secondaryTag,category:J.CATEGORY.fill,color:J.COLOR.grey,size:J.SIZE.md},qe.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Qe.tagContent,onClick:e?.extraData?.investmentNameTip?.popUpData?c:void 0,style:{cursor:e?.extraData?.investmentNameTip?.popUpData?"pointer":"default"}},e?.extraData?.investmentNameTip?.tipContent,e?.extraData?.investmentNameTip?.popUpData&&qe.default.createElement(z,{fontSize:"16px",className:(0,Zo.default)("okx-wallet-plugin-information",Qe.infoIcon)})))),p={primary:j(B(e.totalValue,a),{currencySign:r}).value,showArrow:!!l,hiddenAssets:o,primarySize:"sm"};return qe.default.createElement(Y,{left:u,priceConfig:p,onClick:l,"data-testid":b.DEFI_PAGE.PERPETUAL_CARD})},Yo=Wn;i();s();var ne=I(M()),Ko=I(Ie());se();i();s();var Pt={main:"_main_12ii3_1",specialRewardIcon:"_specialRewardIcon_12ii3_6"};var qn=({platformInfo:e,rewards:o,hiddenAssets:t=!1,investmentId:r,hideRewardCommon:a=!1})=>{let{chainId:d}=e,{symbol:l,usdToThisRate:c}=(0,Ko.useSelector)(q),u=Ct(d),{getUserClaimInfo:p}=wt(),[C,f]=(0,ne.useState)(!1),[h,k]=(0,ne.useState)([]),[L,w]=(0,ne.useState)(""),[S,V]=(0,ne.useState)(!1),[P,D]=(0,ne.useState)(null),x=(0,ne.useMemo)(()=>It(o),[o]),A=(0,ne.useMemo)(()=>x.filter(N=>a?N.rewardType!==1:!0),[x,a]),O=N=>N===1?g("wallet_extension_defiposition_item_claimable_rewards"):g("wallet_extension_defiposition_tag_bonus"),K=async N=>{let de=O(N.rewardType);if(w(de),f(!0),D(null),N.items.some(H=>H.claimMode===1&&H.rewardType===1)&&r&&u){V(!0),k([]);try{let H=await p({investmentId:r,userAddress:u,pageType:1});if(H?.rewardTokenInfos){let X=H.extraData?.claimTipInfo?.popUpData;D(X||null);let xe=H.extraData?.claimTipInfo?.tipContent;xe&&w(xe);let He=Ao(H.rewardTokenInfos,N?.chainId??d,H);k(He)}else{St.error({title:g("wallet_extension_toast_asset_error_try_again")}),f(!1);return}}catch{St.error({title:g("wallet_extension_toast_asset_error_try_again")}),f(!1);return}finally{V(!1)}}else{let H=Io(N,N?.chainId??d);k(H)}};return A.length===0?null:ne.default.createElement(ne.default.Fragment,null,ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Pt.main,"data-testid":b.DEFI_PAGE.REWARDS_AND_BONUS},A.map(N=>ne.default.createElement(Y,{key:`${N.rewardType}-${N.totalCurrencyAmount}-${N.displayName}-${N.chainId}`,left:ne.default.createElement(n.FlexBox,{align:n.ALIGN.center,style:{gap:"4px"}},ne.default.createElement(m.Text,{size:m.SIZE.xs,color:"primary"},O(N.rewardType)),Ve(N.rewardType)&&ne.default.createElement(z,{iconName:"okds-fire-flame_filled",fontSize:"16px",className:Pt.specialRewardIcon})),priceConfig:{primary:t?W:j(B(N.totalCurrencyAmount,c),{currencySign:l}).value,showArrow:!!r,hiddenAssets:t,hiddenString:W},onClick:()=>{K(N)}}))),ne.default.createElement(Ne,{investmentId:r,visible:C,platformInfo:e,modalData:h,title:L,loading:S,popUpData:P,onClose:()=>{f(!1)}}))},vt=qn;i();s();var $=I(M()),Qo=I(Ie()),en=I(Te());se();i();s();function Xo(e,o,t){let r=[];return e&&e.length>0&&r.push({type:"supplied",items:e,displayName:"wallet_extension_defiposition_title_assets"}),o&&o.length>0&&o.forEach(a=>{a&&a.baseDefiTokenInfos&&Array.isArray(a.baseDefiTokenInfos)&&a.baseDefiTokenInfos.length>0&&r.push({type:"rewards",items:a.baseDefiTokenInfos,displayName:"wallet_extension_defiposition_item_claimable_rewards",buttonType:a.buttonType,callDataExtJson:a.callDataExtJson})}),t&&t.length>0&&t.forEach(a=>{a&&a.baseDefiTokenInfos&&Array.isArray(a.baseDefiTokenInfos)&&a.baseDefiTokenInfos.length>0&&r.push({type:"unclaimedFees",items:a.baseDefiTokenInfos,displayName:"wallet_extension_defiposition_item_unclaimed_fee_income",buttonType:a.buttonType,callDataExtJson:a.callDataExtJson})}),r}i();s();var et={container:"_container_18zof_1",leftSection:"_leftSection_18zof_8",statusRow:"_statusRow_18zof_12",statusTag:"_statusTag_18zof_16",rightSection:"_rightSection_18zof_19",chevronIcon:"_chevronIcon_18zof_24",v3Container:"_v3Container_18zof_30",v3Header:"_v3Header_18zof_33",warningContainer:"_warningContainer_18zof_36",warningIcon:"_warningIcon_18zof_42",warningText:"_warningText_18zof_45"};var $n=({positionInfo:e,hiddenAssets:o=!1,platformInfo:t,detailPath:r,isInvestTypeSupport:a,investmentId:d})=>{let{positionStatus:l,tokenId:c,range:u,totalValue:p,supplied:C,rewardDefiTokenInfo:f,unclaimFeesDefiTokenInfo:h}=e,k=l==="ACTIVE",{symbol:L,usdToThisRate:w}=(0,Qo.useSelector)(q),[S,V]=(0,$.useState)(!1),{navigateToInvestment:P}=he(),{platformUrl:D,chainId:x}=t,A=(0,$.useMemo)(()=>Xo(C,f,h),[C,f,h]),O=(0,$.useMemo)(()=>Co(A,x),[A,x]),K=()=>{if(D&&r){P({detailPath:r,isInvestTypeSupport:a,platformInfo:t});return}A.length>0&&V(!0)},N=(0,$.useMemo)(()=>{let X=k?Vt:jt,xe=l==="ACTIVE"?g("wallet_extension_investredeem_top_tag_active"):g("wallet_extension_investredeem_top_tag_inactive");return $.default.createElement(X,{size:J.SIZE.md},xe)},[k,l]),de=(0,$.useMemo)(()=>{let X=c.toString();return X.length>6?X.slice(-6):X},[c]),ae=(0,$.useMemo)(()=>{let X=p&&!Number.isNaN(Number(p))?p:"0";return{primary:o?W:j(B(X,w),{currencySign:L}).value,showArrow:!!(D||A.length>0),hiddenAssets:o,hiddenString:W}},[o,p,w,L,D,A.length]),H=$.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:et.v3Container},$.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:et.v3Header},N,$.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary},"#",de)),$.default.createElement(m.Text,{size:m.SIZE.xs},u));return $.default.createElement($.default.Fragment,null,$.default.createElement(Y,{left:H,priceConfig:ae,onClick:D||A.length>0?K:void 0,padding:"sm",gap:"md","data-testid":b.DEFI_PAGE.POSITION_INFO_ITEM}),$.default.createElement(Ne,{visible:S,platformInfo:t,modalData:O,investmentId:d,title:"",headerComponent:$.default.createElement($.default.Fragment,null,$.default.createElement(Y,{left:H,priceConfig:{...ae,showArrow:!1},onClick:D||A.length>0?K:void 0,gap:"md"}),!k&&$.default.createElement("div",{className:et.warningContainer},$.default.createElement(z,{fontSize:"16px",className:(0,en.default)("okds-warning-circle-fill",et.warningIcon)}),$.default.createElement(m.Text,{size:m.SIZE.xs,className:et.warningText},g("wallet_extension_defiposition_hover_alert_desc_no_income")))),onClose:()=>V(!1)}))},tn=$n;i();s();var lt={main:"_main_7ty37_1",tips:"_tips_7ty37_9",tipText:"_tipText_7ty37_16",tipIcon:"_tipIcon_7ty37_21",leftAlignText:"_leftAlignText_7ty37_27"};var W="****",Hn=e=>[{data:e?.supply??[],title:g("wallet_extension_defiposition_title_supplied"),keyPrefix:"supply"},{data:e?.borrow??[],title:g("wallet_extension_defiposition_title_borrowed"),keyPrefix:"borrow"}],Ft=({platformInfo:e,investToken:o,isLending:t,hiddenAssets:r,accountId:a})=>{let d=(0,on.useSelector)(q),{symbol:l,usdToThisRate:c}=d,{investLogo:u,investName:p,investmentName:C,totalValue:f,supplied:h,rewards:k,investTypeName:L,healthRate:w,investType:S,assetMap:V,feeRate:P,positionInfoList:D,perpetual:x,investmentId:A,detailPath:O,isInvestTypeSupport:K,marketRewards:N}=o,de=[{title:g("wallet_extension_defiposition_title_positions"),key:"positions",data:x?.position||[]},{title:g("wallet_extension_defiposition_title_margin"),key:"margin",data:x?.margin}],ae=!!D?.length,H=[2,3].includes(S)&&ae,X=()=>S===18?null:H?U.default.createElement(mo,{investName:p,investmentName:C,investLogo:u,feeRate:P||"",totalValue:f,hiddenAssets:r,detailPath:O,platformInfo:e,isInvestTypeSupport:K}):U.default.createElement(uo,{showArrow:!t,type:1,investTypeName:L||p,healthRate:w,totalValue:f,hiddenAssets:r,detailPath:O,isInvestTypeSupport:K,platformInfo:e}),xe=()=>N&&U.default.createElement(Ho,{platformInfo:e,investmentId:A,marketRewards:N,hiddenAssets:r,accountId:a}),He=()=>t&&U.default.createElement(U.default.Fragment,null,Hn(V).map(({data:_,title:Z,keyPrefix:Be})=>_.length>0&&U.default.createElement(U.default.Fragment,{key:`${Be}-${Z}-${_.length}`},U.default.createElement(m.Text,{size:m.SIZE.xs,strong:400,className:lt.leftAlignText},Z),_.map(ce=>U.default.createElement(Ge,{key:`${ce.investmentName}-${ce.tokenSymbol}-${ce.investmentId}-${ce.tokenLogo}`,title:Z,platformInfo:e,lendingAssetItem:ce,investLogo:ce.investLogo,hiddenAssets:r,hiddenString:W,tokenSymbol:ce.investmentName,coinAmount:ce.supplied[0].coinAmount,currencyAmount:ce.supplied[0].currencyAmount}))))),G=()=>U.default.createElement(vt,{platformInfo:e,investmentId:A,rewards:k?.map(_=>({..._,buttonType:_.buttonType||0,rewardType:_.rewardType||1})),hiddenAssets:r,hideRewardCommon:ae}),Se=()=>S!==18&&h?.length>0&&U.default.createElement(U.default.Fragment,null,U.default.createElement(m.Text,{size:m.SIZE.xs,className:lt.leftAlignText},g("wallet_extension_defiposition_title_assets")),h.map(_=>U.default.createElement(Ge,{key:`${_.tokenSymbol}-${_.coinAmount}-${_.currencyAmount}--${_.tokenAddress}`,hiddenAssets:r,hiddenString:W,investLogo:{middleLogoList:[{tokenLogo:_.tokenLogo,tokenName:_.tokenSymbol}]},tokenSymbol:_.tokenSymbol,coinAmount:_.coinAmount,currencyAmount:_.currencyAmount,title:"",platformInfo:e,hideArrow:!0}))),ee=()=>D?.map(_=>U.default.createElement(tn,{investmentId:A,key:`position-info-${_.tokenId}-${_.positionName}--${_.totalValue}`,positionInfo:_,hiddenAssets:r,platformInfo:e})),v=()=>S===18&&U.default.createElement(U.default.Fragment,null,U.default.createElement(Yo,{investToken:o,hiddenAssets:r,platformInfo:e}),x?.tradePair&&U.default.createElement(Y,{leftText:{text:g("wallet_extension_defidashboard_card_title_trading_pair"),type:m.TYPE.secondary},rightText:x?.tradePair,"data-testid":b.DEFI_PAGE.PERPETUAL_TRADING_PAIR}),x?.pnl&&U.default.createElement(Y,{leftText:{text:g("wallet_extension_defiposition_title_pnl"),type:m.TYPE.secondary},priceConfig:{primary:j(B(x.pnl,c),{currencySign:l}).value,hiddenAssets:r,showArrow:!1,primaryColor:Number(x.pnl)<0?"var(--okd-color-preference-loss)":"var(--okd-color-preference-profit)"},"data-testid":b.DEFI_PAGE.PERPETUAL_PNL}),U.default.createElement(vt,{platformInfo:e,investmentId:A,rewards:k?.map(_=>({..._,buttonType:_.buttonType||0,rewardType:_.rewardType||1})),hiddenAssets:r,hideRewardCommon:ae}),de.map(_=>_?.data&&_.data.length>0&&U.default.createElement(U.default.Fragment,{key:`perpetual-${_.title}-${_.key}`},U.default.createElement(m.Text,{size:m.SIZE.xs,strong:500,className:lt.leftAlignText,type:m.TYPE.secondary},_.title),_.data.map(Z=>U.default.createElement(Ge,{key:`${_.title}-${_.key}-${Z.tokenSymbol}-${Z.tokenAddress}`,title:_.title,platformInfo:e,tokenSymbol:Z.tokenSymbol,coinAmount:Z.coinAmount,currencyAmount:Z.currencyAmount,logo:Z.tokenLogo,hiddenAssets:r,hiddenString:W,hideArrow:!0})))));return U.default.createElement(n.FlexBox,{align:n.ALIGN.center,direction:n.DIRECTION.vertical,className:lt.main,"data-testid":b.DEFI_PAGE.CARD_CONTAINER},X(),xe(),He(),G(),Se(),ee(),v())};i();s();var At=I(M());se();i();s();var Me={main:"_main_8f3tk_1",skeleton:"_skeleton_8f3tk_4",skeletonItem:"_skeletonItem_8f3tk_7",clickableTitle:"_clickableTitle_8f3tk_10",infoContainer:"_infoContainer_8f3tk_16"};var nn=({healthRate:e})=>{let o=t=>{t.stopPropagation();let r=le.tip({infoType:le.Tip.INFO_TYPE.default,title:g("wallet_extension_defiposition_mid_title_health_factor"),children:g("wallet_extension_defiposition_toast_dialog_desc_health_factor"),confirmText:g("wallet_extension_btn_general_ok"),onConfirm:()=>{r.destroy()},onClose:()=>{r.destroy()}})};return At.default.createElement(Y,{left:At.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,className:Me.clickableTitle,onClick:o},g("wallet_extension_defiposition_mid_title_health_factor")),right:At.default.createElement(Tt,{healthLevel:e.level,levelConfig:{text:e.rate}})})};i();s();var be=I(M()),rn=I(Te());se();i();s();var $e={main:"_main_1mr9q_1",logo:"_logo_1mr9q_6",number:"_number_1mr9q_12",link:"_link_1mr9q_15",title:"_title_1mr9q_20",content:"_content_1mr9q_26"};var an=({points:e,hiddenAssets:o})=>{let{value:t,logo:r,pointListData:a}=e||{},d=()=>{globalThis.open(a?.url)};return be.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"space-between",className:$e.main},be.default.createElement(ct,{title:g("wallet_extension_defiposition_toast_dialog_desc_points")},be.default.createElement(m.Text,{size:m.SIZE.sm,type:m.TYPE.secondary,className:$e.title},g("wallet_extension_defiposition_mid_title_points"))),be.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:$e.content},o?W:be.default.createElement(be.default.Fragment,null,be.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,ellipsis:!0},t),be.default.createElement(fe,{src:r,className:$e.logo}),a?.pointList?.length>0&&be.default.createElement(pt,{className:$e.number},`+${a?.pointList?.length}`),be.default.createElement(z,{className:(0,rn.default)("okx-wallet-plugin-right",$e.link),onClick:d}))))};i();s();var Ee=I(M()),ln=I(Ie());se();i();s();var sn={title:"_title_ue62x_1"};var mn=({platformInfo:e,protocolRewards:o,hiddenAssets:t})=>{let{analysisPlatformId:r,chainId:a,platformName:d}=e,l=(0,ln.useSelector)(q),{symbol:c,usdToThisRate:u}=l,{totalReward:p,tokenLogoList:C=[]}=o||{},[f,h]=(0,Ee.useState)(!1),k=To(o,a,r),L=()=>{h(!0)},w={middleLogoList:C.length>0?C.map(S=>({tokenLogo:S,tokenName:""})):[]};return Ee.default.createElement(Ee.default.Fragment,null,Ee.default.createElement(Y,{left:Ee.default.createElement(ct,{title:g("wallet_extension_defiposition_toast_dialog_desc_protocol_rewards",{protocol:d})},Ee.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,className:sn.title},g("wallet_extension_defiposition_mid_title_protocol_rewards"))),priceConfig:{primary:t?W:j(B(p,u),{currencySign:c,useApproximate:!1}).value,hiddenAssets:t,hiddenString:W,showArrow:!!k.length,primarySize:"sm",logo:C.length>0?Ee.default.createElement(Ze,{investLogo:w,size:16,type:yt.PROTOCOL}):void 0},onClick:L}),Ee.default.createElement(Ne,{title:g("wallet_extension_defiposition_mid_title_protocol_rewards"),visible:f,platformInfo:e,modalData:k,onClose:()=>h(!1)}))};var dn=({analysisPlatformId:e,chainId:o,hiddenAssets:t})=>{let r=Oe(),{defiDetail:a,loading:d}=no({analysisPlatformId:e,chainId:o}),{protocolExtraData:l,investMarketTokenBalanceVoList:c,platformName:u,investTokenBalanceVoList:p,platformUrl:C,platformLogo:f,accountId:h,network:k,detailPrePath:L}=a||{},w={detailPrePath:L,analysisPlatformId:e,chainId:o,network:k,platformLogo:f,platformName:u,platformUrl:C||""},{points:S,protocolRewards:V,healthRate:P}=l||{};if(d)return Ae.default.createElement(n.Box,{className:Me.skeleton},Ae.default.createElement(ve.Input,{size:ve.SIZE.sm}),Ae.default.createElement(ve.Input,{className:Me.skeletonItem,size:ve.SIZE.md}),Ae.default.createElement(ve.Input,{className:Me.skeletonItem,size:ve.SIZE.md}));let D=P&&!c?.length;return Ae.default.createElement(n.FlexBox,{className:Me.main,align:n.ALIGN.center,direction:n.DIRECTION.vertical,"data-testid":`${b.DEFI_PAGE.CARD_CONTAINER}-${o}-${e}`},S&&Ae.default.createElement(an,{points:S,hiddenAssets:t}),(D||V)&&Ae.default.createElement("div",{className:Me.infoContainer},D&&Ae.default.createElement(nn,{healthRate:P}),V&&Ae.default.createElement(mn,{platformInfo:w,protocolRewards:V,hiddenAssets:t})),c&&c.length>0&&c.map(x=>Ae.default.createElement(Ft,{platformInfo:w,key:`market-${x.investmentId}-${x.investType}-${x.investmentName}-${x.totalValue}-${x.marketId}`,investToken:x,isLending:!0,hiddenAssets:t,accountId:h||r})),p&&p.length>0&&p.map(x=>Ae.default.createElement(Ft,{platformInfo:w,key:`token-${x.investmentId}-${x.investType}-${x.investmentName}-${x.totalValue}-${x.marketId}`,investToken:x,isLending:!1,hiddenAssets:t,accountId:h||r})))};i();s();var te=I(M()),un=I(Te());se();i();s();var cn=I(Jt());ot();kn();var pn=()=>{let e=Oe(),{loading:o,run:t,error:r,data:a}=(0,cn.useRequest)(async()=>(await Wt(pe.getDefiBanner,{walletId:e}))?.data?.defiBoardInvestmentVos||[],{refreshDeps:[e]});return{loading:o,run:t,error:r,bannerList:a}};i();s();var re={main:"_main_wh5tq_1",backgroundImage:"_backgroundImage_wh5tq_9",content:"_content_wh5tq_18",header:"_header_wh5tq_28",investmentName:"_investmentName_wh5tq_31",rate:"_rate_wh5tq_34",tokenSingle:"_tokenSingle_wh5tq_39",tokenDoubleLeft:"_tokenDoubleLeft_wh5tq_49",tokenDoubleRight:"_tokenDoubleRight_wh5tq_59",linkWrapper:"_linkWrapper_wh5tq_69",link:"_link_wh5tq_69",icon:"_icon_wh5tq_76",empty:"_empty_wh5tq_79",error:"_error_wh5tq_82",skeleton:"_skeleton_wh5tq_85",errorImg:"_errorImg_wh5tq_91",emptyImg:"_emptyImg_wh5tq_95"};var fn=()=>{let e=_t(),o=Kt({light:"/cdn/assets/imgs/249/82CFBD93C928950F.png",dark:"/cdn/assets/imgs/249/9F574C0EC619D615.png"}),{loading:t,run:r,error:a,bannerList:d}=pn();if(a)return te.default.createElement(De.State,{className:re.error,type:De.State.TYPE.noNetwork,imgClassName:re.errorImg,title:g("wallet_extension_nft_text_loading_failed"),buttonText:g("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{r()}});if(t)return te.default.createElement(ve.Input,{active:!0,className:re.skeleton});if(d.length===0)return te.default.createElement(De.State,{className:re.empty,type:De.State.TYPE.noResult,imgClassName:re.emptyImg,title:g("wallet_extension_text_enjoy_massive_defi"),buttonText:g("wallet_extension_btn_explore_dapps"),onButtonClick:()=>{globalThis.platform.openTab({url:g("extension_btn_link_okxweb3yield")})}});let{investmentName:l="",platformName:c="",middleLogoList:u=[],rate:p="",rateTypeDesc:C="",investmentId:f=""}=d[0]||{},h=()=>{globalThis.open(`${e?.defiDetail}/${f}#source=extension`)},k=()=>{let L=u?.length||0;switch(!0){case L===1:return te.default.createElement(fe,{src:u[0]?.tokenLogo,className:re.tokenSingle});case L>=2:return te.default.createElement(te.default.Fragment,null,te.default.createElement(fe,{src:u[0]?.tokenLogo,className:re.tokenDoubleLeft}),te.default.createElement(fe,{src:u[1]?.tokenLogo,className:re.tokenDoubleRight}));default:return null}};return te.default.createElement(n.FlexBox,{className:re.main,align:n.ALIGN.center},te.default.createElement(fe,{src:o,className:re.backgroundImage}),te.default.createElement(n.FlexBox,{className:re.content,direction:n.DIRECTION.vertical},te.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:re.header},te.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:re.investmentName},l),te.default.createElement(J,{category:J.CATEGORY.fill,color:J.COLOR.grey,size:J.SIZE.sm},c)),te.default.createElement(m.Text,{className:re.rate,strong:700},`${Ot.truncate(B(+p,100),2)}% ${C}`),te.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:re.linkWrapper,onClick:h},te.default.createElement(m.Text,{size:m.SIZE.xs,className:re.link,strong:700},g("wallet_extension_card_textbtn_stake_now")),te.default.createElement(z,{className:(0,un.default)("okx-wallet-plugin-right",re.icon)})),k()))};i();s();var ue=I(M()),yn=I(Ie()),Bt=I(Te());i();s();var Dt=I(M()),gn=I(Te());i();s();var kt={main:"_main_15eo7_1",rightBottom:"_rightBottom_15eo7_9"};var _n=({mainLogoUrl:e,secondaryLogoUrl:o,className:t})=>Dt.default.createElement(n.Box,{className:(0,gn.default)(kt.main,t)},Dt.default.createElement(fe,{src:e,className:kt.main}),Dt.default.createElement(fe,{src:o,className:kt.rightBottom}));i();s();var Pe={main:"_main_ln2cc_1",logo:"_logo_ln2cc_5",content:"_content_ln2cc_8",leftContent:"_leftContent_ln2cc_11",platformName:"_platformName_ln2cc_14",link:"_link_ln2cc_17",tipIcon:"_tipIcon_ln2cc_24",warnInfo:"_warnInfo_ln2cc_28",amount:"_amount_ln2cc_32"};var xn=({defi:e,hiddenAssets:o})=>{let{platformUrl:t,networkLogo:r,platformName:a,currencyAmount:d,network:l,platformLogo:c,warnInfo:u}=e,p=k=>{k.stopPropagation(),globalThis.open(t)},C=(0,yn.useSelector)(q),{symbol:f,usdToThisRate:h}=C;return ue.default.createElement(n.FlexBox,{className:Pe.main,align:n.ALIGN.center},ue.default.createElement(_n,{mainLogoUrl:c,secondaryLogoUrl:r,className:Pe.logo}),ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"space-between",className:Pe.content},ue.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Pe.leftContent},ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Pe.platformName},ue.default.createElement(m.Text,{size:m.SIZE.md,ellipsis:!0},a),ue.default.createElement(z,{className:(0,Bt.default)("okx-wallet-plugin-open-link",Pe.link),onClick:p})),ue.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.xs,ellipsis:!0},l)),ue.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.end,className:Pe.amount},ue.default.createElement(m.Text,{strong:500,size:m.SIZE.md,ellipsis:!0},o?W:j(B(d,h),{currencySign:f,useApproximate:!1}).value),u&&ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Pe.warnInfo},ue.default.createElement(z,{className:(0,Bt.default)("okx-wallet-plugin-warning-circle-fill",Pe.tipIcon)}),ue.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,ellipsis:!0},u)))))};i();s();var ke={accordion:"_accordion_176px_1",header:"_header_176px_5",title:"_title_176px_9",content:"_content_176px_12",button:"_button_176px_15",showButton:"_showButton_176px_19",error:"_error_176px_27",errorImg:"_errorImg_176px_31",loader:"_loader_176px_35",bannerWrapper:"_bannerWrapper_176px_39",container:"_container_176px_42"};var Jn=190,Zn=({hiddenAssets:e,isWalletCreated:o,scrollTop:t,backupHeight:r})=>{let{currentNetworkUniqueId:a}=Yt(),{data:d=[],loading:l,error:c,run:u}=oo(),[p,C]=(0,Q.useState)(null);(0,Q.useEffect)(()=>{o&&u()},[o,u]);let f=(0,Q.useMemo)(()=>{let x=d||[];return a!==""?x.filter(A=>A.chainId===+a):x},[d,a]),h=(x,A,O)=>{C(O)},k=x=>`${x.analysisPlatformId}-${x.chainId}`,L=()=>Q.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:n.ALIGN.center,className:ke.loader},Q.default.createElement(tt,{size:tt.SIZE.lg})),w=()=>Q.default.createElement(De.State,{type:De.State.TYPE.noNetwork,className:ke.error,imgClassName:ke.errorImg,title:g("wallet_extension_nft_text_loading_failed"),buttonText:g("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{u()}}),S=(0,Q.useMemo)(()=>f.length>8&&t>Jn,[f.length,t]),{paddingBottom:V,buttonPaddingBottom:P,absoluteBottom:D}=to({isButtonAbsolute:S,backupHeight:r});return c?w():f.length?Q.default.createElement("div",{className:ke.container,style:{paddingBottom:V}},Q.default.createElement(bt.Group,{onChange:h,expandedIds:p},f.map(x=>Q.default.createElement(bt.Item,{key:k(x),className:ke.accordion,headerClassName:ke.header,contentClassName:ke.content,titleClass:ke.title,title:Q.default.createElement(xn,{defi:x,hiddenAssets:e}),id:k(x)},p?.includes(k(x))&&Q.default.createElement(dn,{analysisPlatformId:x.analysisPlatformId,chainId:x.chainId,hiddenAssets:e})))),Q.default.createElement("div",{className:(0,Tn.default)(ke.button,{[ke.showButton]:S}),style:{bottom:D,paddingBottom:P}},Q.default.createElement(R,{circle:!0,category:R.CATEGORY.outline,type:R.TYPE.secondary,size:R.SIZE.md,onClick:()=>{globalThis.platform.openTab({url:g("extension_btn_link_okxweb3yield")})}},g("wallet_extension_bot_btn_go_to_defi")))):l?L():Q.default.createElement(n.FlexBox,{className:ke.bannerWrapper,style:{paddingBottom:D}},Q.default.createElement(fn,null))},tf=Zn;export{tf as default};
//# sourceMappingURL=DefiList-CLE5U2TD.js.map
