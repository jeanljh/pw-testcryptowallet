import{a as dl}from"./chunk-VL3NMULI.js";import{a as fl}from"./chunk-TULNXNFS.js";import{a as re,j as cl}from"./chunk-2UMIXQCO.js";import{a as il,b as ul,c as as,d as ll}from"./chunk-FUUQG7B5.js";import{a as sl}from"./chunk-6BLOO7ZN.js";import{a as ol}from"./chunk-TWQ73ZDV.js";import{c as al}from"./chunk-LY5BPYXI.js";import"./chunk-WRGSQF3V.js";import"./chunk-ELHHHA5F.js";import{a as Wo,b as Hu}from"./chunk-KPUXAS7Z.js";import"./chunk-IN42FW4K.js";import{b as Uo,c as os,d as Qu}from"./chunk-PQQFVOPL.js";import{a as Zu}from"./chunk-WST3WRLT.js";import"./chunk-PDSFU775.js";import{a as el}from"./chunk-5QYLVV6H.js";import"./chunk-57D6LCV2.js";import"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import{A as En,B as $r,b as Kn,t as Ku,x as At}from"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import"./chunk-AQO2BBXJ.js";import{a as Xu,f as Ju}from"./chunk-GWMNMJND.js";import{d as Yu,m as qu,x as $u}from"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import"./chunk-S7VT2TWF.js";import"./chunk-HBNZZZEG.js";import"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import{d as yr,e as Gu}from"./chunk-BNS5ABAB.js";import{a as Vu}from"./chunk-UFGJXE4D.js";import"./chunk-7QX2TXNH.js";import"./chunk-ZDHJHPQ5.js";import{a as Go,b as dr,c as Vr,d as ht,e as ct,f as rl,g as Ho,h as nl}from"./chunk-BBPJBLQ2.js";import{a as tl}from"./chunk-CRK64DJ6.js";import"./chunk-ROS2ENQV.js";import"./chunk-DFPRATON.js";import"./chunk-WY5R5HAR.js";import"./chunk-GTQ5U6DA.js";import"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import{c as Ue}from"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import{A as Au,B as _u,C as Bu,D as xu,E as Ro,F as wu,G as Ft,H as Su,I as Tu,J as yu,K as Fu,L as bu,M as Nu,a as Je,b as Yr,c as me,d as He,e as ru,f as nu,g as ou,h as au,i as su,j as iu,k as uu,l as lu,m as cu,n as fu,o as du,p as vn,q as lt,r as mu,s as pu,t as hu,u as gu,v as vu,w as Cu,x as Du,y as rs,z as Eu}from"./chunk-ZRLUOHGM.js";import{a as Ji,b as Qi,d as eu,e as tu}from"./chunk-JZBABWUI.js";import{b as Po}from"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import"./chunk-QJ36ZOFH.js";import"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import{d as zo}from"./chunk-JHO7RU36.js";import{b as Tr,p as Iu}from"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import{g as Uu}from"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{Q as Wi,c as ji,l as zi}from"./chunk-3ZKJXYZ4.js";import"./chunk-SOSR34AP.js";import"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import{E as Yi,Ia as $i,X as qi,f as Ui,k as Gi,w as Hi}from"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{c as Lo,d as Zi,i as Pu,m as Cn,o as ju,x as zu}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import{c as Ye}from"./chunk-OOYDFTEF.js";import{a as Dn}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import{e as Vi}from"./chunk-SWUBCABA.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-4W7LQOP5.js";import{a as Wu}from"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{j as Mu,m as Ru}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{J as ku,Sa as qr,Ta as qn,Ua as $n,Va as Vn}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import{f as Ki}from"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as Sr,g as ap,u as Be}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{g as np,m as op,o as Ee}from"./chunk-Z62JX42S.js";import{C as No,Na as yt,la as Oo}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import{a as Ou}from"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as ns}from"./chunk-6PA65BO3.js";import"./chunk-XSVHDPBS.js";import{c as Qe,d as Mo,e as Xi}from"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{da as es,ia as er,l as Io,n as Ja,s as Qa,u as ko}from"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import{b as Pi,c as To,d as Va,e as Ka,f as Qm}from"./chunk-YIFLUVTR.js";import{c as ts,e as rp}from"./chunk-EN2WHAVL.js";import{h as jo}from"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import{b as Fi,c as xo,d as pn,j as bi,m as Rn,o as Ni,u as Ya}from"./chunk-EFOY37CC.js";import{c as S}from"./chunk-HMTT52FG.js";import{a as Lu}from"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import{b as Jt,c as Wn}from"./chunk-GR7YC6C3.js";import{E as Qt,J as Hn}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import{c as So,i as Un,n as Gn}from"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Aa as fe,Ba as We,Ja as ve,Ra as Za,Sb as ep,Ua as fr,Ub as Mi,Xa as yo,Za as gn,_a as Fo,_b as tp,a as mi,b as Zm,bc as Ri,fc as Yn,gb as bo,nc as Xa,ra as De,tb as je,ub as Li,wa as ye}from"./chunk-COF7YKSN.js";import{A as T,B as yi,K as he,o as G}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{A as Et,H as $a,N as ki,Q as wo,c as Oi,d as jn,g as zn,o as Hr,q as Fe,r as wr,w as qa,x as hn,z as Ii}from"./chunk-BJKBO23H.js";import{a as Xm}from"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import{B as Ln,G as Ci,I as Di,M as Ei,S as mn,U as _o,V as Ai,Y as _i,aa as Bi,ba as xi,da as wi,f as pi,ia as Si,l as hi,ma as Bo,n as gi,pa as Ti,qa as Mn,va as st,x as vi}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{t as ut,u as Ht,z as te}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as $e}from"./chunk-4QGZDIBD.js";import{b as ee}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import{b as Jm}from"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{c as di,f as O,h as Gt,o as v,q as C}from"./chunk-Y5OH3DDZ.js";var hc=di((uA,pc)=>{v();C();pc.exports=kg;var dc="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",mc="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",Og=new RegExp("^[^"+mc+"]*["+dc+"]"),Ig=new RegExp("^[^"+dc+"]*["+mc+"]");function kg(t){return t=String(t||""),Og.test(t)?"rtl":Ig.test(t)?"ltr":"neutral"}});var Wc=di(rr=>{v();C();Object.defineProperty(rr,"__esModule",{value:!0});var qg=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),xs={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},$g={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:qg?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Mc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(oo=1;oo<20;oo++)Mc["f"+oo]=111+oo;var oo;function fa(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(s){return Rc(s,e)}),o=function(i){return n.some(function(c){return jc(c,i)})},a=r==null?o:o(r);return a}function Vg(t,e){return fa(t,e)}function Kg(t,e){return fa(t,{byKey:!0},e)}function Rc(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var o=t.split("+"),a=o.length;for(var s in xs)n[xs[s]]=!1;var i=!0,c=!1,l=void 0;try{for(var f=o[Symbol.iterator](),g;!(i=(g=f.next()).done);i=!0){var h=g.value,m=h.endsWith("?")&&h.length>1;m&&(h=h.slice(0,-1));var p=ws(h),u=xs[p];(a===1||!u)&&(r?n.key=p:n.which=zc(h)),u&&(n[u]=m?null:!0)}}catch(D){c=!0,l=D}finally{try{!i&&f.return&&f.return()}finally{if(c)throw l}}return n}function jc(t,e){for(var r in t){var n=t[r],o=void 0;if(n!=null&&(r==="key"&&e.key!=null?o=e.key.toLowerCase():r==="which"?o=n===91&&e.which===93?91:e.which:o=e[r],!(o==null&&n===!1)&&o!==n))return!1}return!0}function zc(t){t=ws(t);var e=Mc[t]||t.toUpperCase().charCodeAt(0);return e}function ws(t){return t=t.toLowerCase(),t=$g[t]||t,t}rr.default=fa;rr.isHotkey=fa;rr.isCodeHotkey=Vg;rr.isKeyHotkey=Kg;rr.parseHotkey=Rc;rr.compareHotkey=jc;rr.toKeyCode=zc;rr.toKeyName=ws});v();C();var Wr=O(ee()),Ga=O(yt()),fn=O(ns()),Wm=O(Ee());v();C();v();C();var ml=O(ee()),Zn=O(yt()),pl=O(Ee());var kt=(t,e)=>r=>{let n=(0,Zn.useSelector)(t),o=(0,Zn.useDispatch)(),a=i=>{e&&o(e(i))},s=(0,pl.useMemoizedFn)(a);return(0,ml.useEffect)(()=>{if(r===void 0)return;let i=typeof r=="function"?r():r;s(i)},[r,s]),[n,a]},hl=t=>()=>{let e=(0,Zn.useDispatch)();return(...n)=>{t&&e(t(...n))}};var qe=kt(au,Du),ue=kt(su,Cu),Yo=kt(iu,Ro),An=kt(uu,wu),it=kt(nu,vu),qo=kt(hu,Bu),n0=kt(gu,xu),Ae=kt(lu,Eu),gl=hl(Tu),ft=kt(fu,Au),dt=kt(du,_u),_n=kt(ou,Su);v();C();var _l=O(ee()),Jn=O(yt()),Fr=O(Ee());he();v();C();var ss=O(Ee());he();Xa();je();Wn();Hn();var sp="8000",$o=()=>{let t=At();return(0,ss.useMemoizedFn)(async({coinId:e,address:r,inputData:n})=>{let o=await t({coinId:e,address:r,fromAddr:r,scenario:Io.SCENARIO_SEND_COIN}),a=o,{gasUnitPrice:s}=o;if(n){let{data:{gasLimit:c}}=await Qt(Jt.getAptosGasLimit,{inputData:n});a=c}else a=sp;let i=G.mul(s,a);return{...o,networkFee:i,maxGasAmount:a,gasUnitPrice:s}})},vl=()=>{let t=En({localType:ye});return(0,ss.useMemoizedFn)(async({to:e,from:r,amount:n,baseCoinId:o,metaAddress:a,sequenceNumber:s,maxGasAmount:i,gasUnitPrice:c,protocolType:l,chainId:f,expirationTimestampSecs:g,tyArg:h})=>{let p={base:{sequenceNumber:s,chainId:f,maxGasAmount:i,gasUnitPrice:c,expirationTimestampSecs:g}},u={amount:n,recipientAddress:e};return o===0&&(p.type=ko.TRANSFER,p.data=u),o!==0&&l===Yn.APTOS_FUNGIBLE_TOKEN&&(p.type=ko.FUNGIBLE_ASSET_TRANSFER,p.data={...u,fungibleAssetMetadataAddress:a}),o!==0&&l===Yn.APTOS_TOKEN&&(p.type=ko.TOKEN_TRANSFER,p.data={...u,tyArg:h}),await t({params:p,fromAddr:r})})};v();C();var Xn=O(Ee());he();Xa();je();var Cl=()=>(0,Xn.useMemoizedFn)(async({to:t,toes:e,from:r,value:n,values:o,budget:a,gasPrice:s,inputCoins:i,tokenInputCoins:c,baseCoinId:l})=>{let f=e?.length?e:[t],g=o?.length?o:[n],h=i.map((u={})=>{let{digest:D,version:E,objectId:A}=u;return{digest:D,version:E,objectId:A}}),m=new qu;if(m.setGasPrice(s),m.setGasPayment(h||[]),m.setSender(r),a&&m.setGasBudget(a),l===0){let u=m.splitCoins(m.gas,g);f.forEach((D,E)=>{m.transferObjects([u[E]],m.pure.address(D))})}else if(c?.length>1){let u=c.slice(1).map(A=>m.object(A.objectId)),D=m.object(c[0].objectId);m.mergeCoins(D,u);let E=m.splitCoins(D,[n]);m.transferObjects([E],m.pure.address(t))}else{let u=m.splitCoins(m.object(c[0].objectId),[n]);m.transferObjects([u],m.pure.address(t))}let p=Yu(await m.build({client:sl}));return{tx:m,txBytes:p}}),Vo=()=>{let t=At(),e=Cl();return(0,Xn.useMemoizedFn)(async({to:r,from:n,value:o,values:a,toes:s,coinId:i,baseCoinId:c})=>{let l=a?.length?a?.reduce((m,p)=>G.add(m,p),0):o,f=await t({coinId:i,address:n,value:l,toAddr:s?.[0]||r});return(await e({...f,to:r,toes:s,from:n,value:o,coinId:i,values:a,baseCoinId:c}))?.tx?.blockData?.gasConfig?.budget||"0"})},Dl=()=>{let t=Cl(),e=At(),r=En({localType:We});return(0,Xn.useMemoizedFn)(async({to:n,toes:o,values:a,from:s,coinId:i,value:c,baseCoinId:l})=>{let f=a?.length?a?.reduce((D,E)=>G.add(D,E),0):c,g=await e({value:f,coinId:i,address:s,toAddr:o?.[0]||n}),{tx:h,txBytes:m}=await t({...g,value:c,coinId:i,to:n,toes:o,from:s,values:a,baseCoinId:l}),u=await r({params:{type:"raw",data:m},fromAddr:s});return{tx:h,txBytes:m,signedTx:u}})},El=t=>{let e=Ru(),r=Mu(),n=$r({coinId:t,txSource:Ri.NORMAL});return(0,Xn.useMemoizedFn)(async({tx:o,to:a,from:s,txBytes:i,coinAmount:c,signedTx:l,walletId:f})=>{let{signature:g,hash:h}=l||{},m=e(f)||r;return await n({tx_bytes:i,signatures:[g],request_type:"WaitForEffectsCert"},{txHash:h,coinAmount:c,accountId:f,fromAdr:s,toAdr:a,walletType:m?.serverWalletType,serviceCharge:o?.blockData?.gasConfig?.budget||"0"})})};rp();Gn();je();v();C();var Al=O(ee());var Kr=t=>{let[e]=qe(),r=t||e?.rpcUrl;return(0,Al.useCallback)(async()=>r?await Zi(r):{},[r])};var Ko=t=>{let[e]=qe(),r=t||e?.rpcUrl;return Ji(r)};var ip=(t,e)=>{let[r]=ue(),{ready:n=!0,onSuccess:o}=e||{},a=Qi(t);(0,Fr.useRequest)(async()=>{let s=await a(r?.chainId);return{isSupportEip1559:s?.[0]?.isSupportEip1559||!1,gasPriceLevels:s}},{onSuccess:o,pollingInterval:7e3,ready:!!r?.chainId&&!!n})},Bl=()=>{let[t]=ue(),[e]=qe(),r=(0,Jn.useDispatch)(),[n]=qo(),[o,a]=(0,_l.useState)([]),[,s]=_n(),i=Cn(t?.localType),c=i&&Qe(i,t?.localType),l=(0,Jn.useSelector)(vn);return ip(e?.rpcUrl,{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:f,gasPriceLevels:g})=>{let h=tu({chainGasLevels:g,chainGasRate:l});s(f),r(rs(h)),a(h)}}),Zu({coinId:t?.coinId,chainId:t?.chainId,address:c},{ready:!!t?.coinId&&![ye,De,We,fe,ve].includes(t?.localType)&&n===Yr.CONFIRM,onSuccess:f=>{let{gasPrice:g,needExtFee:h}=f;r(Fu(h)),s(g?.supportEip1559||!1),a(os(g)),r(rs(os(g)))}}),o};var Zo=()=>{let t=yr(fr,{withPrice:!0}),e=At(),r=Ku();return(0,Fr.useMemoizedFn)(async({from:n,to:o,coinId:a,chainId:s})=>{let i=await e({coinId:a,toAddr:o,address:n,fromAddr:n,scenario:Io.SCENARIO_SEND_COIN})||{},c=await r({from:n,chainId:s,coinId:a,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[es.TX_ANALYZE]}),{simulateTransactionResultList:l}=c?.[es.TX_ANALYZE]||{},{unitGasLimit:f}=l[0]||{},{fee:g,feelimit:h,computeUnitPrice:m,rent:p,solRent:u,toAddressLegal:D,tokenAccountToAddress:E}=i;if(g){let{priorityFee:A,priorityGasPrice:x,priorityGasLimit:w}=Iu(h,m,f),y=G.add(g,A),N=G.div(y,10**t?.decimals);return{rent:p,solRent:u,networkFee:N,networkFeeInt:y,computeUnitLimit:w,computeUnitPrice:x,networkFeeMarket:G.mul(N,t?.currencyPrice),toAddressLegal:D,tokenAccountToAddress:E}}return{estimateFailed:!0}})},xl=()=>{let t=yr(Fo,{withPrice:!0}),e=Vo();return(0,Fr.useMemoizedFn)(async({coinId:r,from:n,to:o,value:a,baseCoinId:s})=>{let i=await e({to:o,from:n,value:a,coinId:r,baseCoinId:s}),c=G.div(i,10**t?.decimals);return{networkFee:c,networkFeeInt:i,networkFeeMarket:G.mul(c,t?.currencyPrice)}})},Xo=t=>{let e=yr(t||gn,{withPrice:!0});return(0,Fr.useMemoizedFn)(async({to:r,chainId:n,contractAddress:o})=>{let a={address:r,type:"Transfer",contractAddress:o,chainId:n||e?.chainId},i=(await ol(a))?.data?.fee||"0",c=G.div(i,10**(e?.decimals||0));return{networkFee:c,networkFeeInt:i,networkFeeMarket:G.mul(c,e?.currencyPrice)}})},wl=()=>{let t=yr(yo,{withPrice:!0}),e=$o();return(0,Fr.useMemoizedFn)(async({coinId:r,address:n,inputData:o})=>{let{networkFee:a}=await e({coinId:r,address:n,inputData:o}),s=G.div(a,10**t?.decimals);return{networkFee:s,networkFeeInt:a,networkFeeMarket:G.mul(s,t?.currencyPrice)}})},Jo=()=>{let e=Ho(!1,ve).map(i=>i.options).flat(),r=(0,Jn.useDispatch)(),n=ll(),o=yr(bo,{withPrice:!0}),[a]=ue(),s=At();return(0,Fr.useMemoizedFn)(async({baseCoinId:i,coinId:c,chainId:l,from:f,to:g,tokenAddress:h,decimals:m,amount:p,sendMode:u=Tr.CARRY_ALL_REMAINING_BALANCE,memo:D})=>{let A=e?.find(U=>U.address===f)?.walletId||await ts().getWalletIdByAddress(f,ve),x=await ts().getWalletIdentityByWalletId(A),w=$u(x,f),y=await s({coinId:c,address:f,fromAddr:f,toAddr:g,value:"0"}),N=await n(y,a?.baseCoinId);if(r(bu(N)),N.getCustomPayloadInfoRpcError)return{networkFee:0,networkFeeInt:0,networkFeeMarket:0,signInfo:N,gasLimitInfo:null,bodyParams:null};let b={to:g,seqno:N?.nonce,decimal:m,amount:p,memo:D,expireAt:il(N?.ttl),walletVersion:w};i===0?b={...b,type:as.TRANSFER,sendMode:u}:(b={...b,type:as.JETTON_TRANSFER,fromJettonAccount:N?.fromJettonAccount,sendMode:Tr.PAY_GAS_SEPARATELY+Tr.IGNORE_ERRORS},N?.customPayload&&(b={...b,customPayload:N?.customPayload,stateInit:N?.stateInit}));let L=await ul({fromAddress:f,body:b,walletId:A}),{data:F}=await ji({address:f,tokenAddress:h,chainId:l,coinId:c,value:"0",inputData:JSON.stringify(L)}),{invokeNotificationFee:W="0",gasLimit:V="0"}=F,M=i===0?V:xo(V,W),q=G.div(M,10**(o?.decimals||0));return{networkFee:q,networkFeeInt:M,networkFeeMarket:G.mul(q,o?.currencyPrice),signInfo:N,gasLimitInfo:F,bodyParams:b}})};je();v();C();var $t=O(ee());he();v();C();var up={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},J=up;v();C();var mr=O(ee());var Qo=O($e());v();C();v();C();var Qn=O(ee());v();C();var Sl=O(ns());function lp(){let t=(0,Sl.useHistory)(),[e,r]=qo(),n=(m,p)=>(u=!0)=>{e!==p&&r(p),u?t.replace(m):t.push(m)},o=m=>t.location.pathname===m,a=n(qr,Yr.SELECT_TYPE),s=n(qn,Yr.ADD_ADDRESS),i=n($n,Yr.CONFIRM),c=n(Vn,Yr.SEND),l=o(qr),f=o(qn),g=o($n),h=o(Vn);return{isConfirmPage:g,isHomePage:l,isSendPage:h,isAddressPage:f,gotoAddressPage:s,gotoConfirmPage:i,gotoSendPage:c,gotoHomePage:a}}var _t=lp;function cp(){let[t]=qe(),[e]=ue(),[r]=Ae(),{gotoHomePage:n,gotoAddressPage:o,isConfirmPage:a,isSendPage:s,isAddressPage:i,isHomePage:c}=_t(),l=(0,Qn.useCallback)(()=>{!t&&!e?.symbol&&!c&&n()},[t,e,c,n]),f=(0,Qn.useCallback)(()=>{r.length<=0&&!i&&o()},[r,i,o]);(0,Qn.useLayoutEffect)(()=>{i?l():(a||s)&&(l(),f())},[l,f,i,a,s])}var Tl=cp;function fp(){return Tl(),null}var yl=fp;v();C();var Zr={root:"_root_189ao_1",container:"_container_189ao_6",okgLayout:"_okgLayout_189ao_10",headerBox:"_headerBox_189ao_32",header:"_header_189ao_32",footer:"_footer_189ao_125"};function dp({children:t}){return mr.default.createElement(S.Box,{className:Zr.footer},t)}function mp({children:t,footer:e,useOkg:r=!0,headerProps:n={}}){let o=r?mr.default.Fragment:S.Box;return mr.default.createElement(S.FlexBox,{className:Zr.root,direction:S.DIRECTION.vertical},mr.default.createElement(S.Container,{className:(0,Qo.default)(Zr.container,r&&Zr.okgLayout)},mr.default.createElement(o,{className:(0,Qo.default)(!r&&Zr.headerBox)},mr.default.createElement(fl,{...n,className:(0,Qo.default)(Zr.header,n.className)})),t),mr.default.createElement(dp,null,e),mr.default.createElement(yl,null))}var br=mp;v();C();var Er=O(ee()),jf=O($e());he();v();C();var Ne=O(ee()),Gs=O(Ee()),kf=O(Jm());v();C();v();C();function Fl(t){return Object.prototype.toString.call(t)==="[object Object]"}function et(t){var e,r;return Fl(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Fl(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}Qm();var pp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=_.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},hp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=pe.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},gp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=k.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},ta=new WeakMap,ra=new WeakMap,to=new WeakMap,ic=new WeakMap,bl=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,_={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=_.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var o=t[n],a=e[n];if(o!==a)break;r.push(o)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return _.equals(n,o)&&a>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),o=e.slice(0,r);return _.equals(n,o)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return _.equals(n,o)&&a<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return _.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&_.compare(t,e)===0},isBefore(t,e){return _.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&_.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&_.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&_.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&_.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),o=t[t.length-1],a=e[e.length-1];return o!==a&&_.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],o=0;o<=t.length;o++)n.push(t.slice(0,o));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!_.isAncestor(e,t)&&!_.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:o="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(_.equals(a,n)||_.endsBefore(a,n)||_.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(_.equals(s,n)||_.isAncestor(s,n))return null;_.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:c}=e;_.equals(i,n)||_.endsBefore(i,n)?n[i.length-1]-=1:_.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=c);break}case"split_node":{var{path:l,position:f}=e;if(_.equals(l,n)){if(o==="forward")n[n.length-1]+=1;else if(o!=="backward")return null}else _.endsBefore(l,n)?n[l.length-1]+=1:_.isAncestor(l,n)&&t[l.length]>=f&&(n[l.length-1]+=1,n[l.length]-=f);break}case"move_node":{var{path:g,newPath:h}=e;if(_.equals(g,h))return n;if(_.isAncestor(g,n)||_.equals(g,n)){var m=h.slice();return _.endsBefore(g,h)&&g.length<h.length&&(m[g.length-1]-=1),m.concat(n.slice(g.length))}else _.isSibling(g,h)&&(_.isAncestor(h,n)||_.equals(h,n))?_.endsBefore(g,n)?n[g.length-1]-=1:n[g.length-1]+=1:_.endsBefore(h,n)||_.equals(h,n)||_.isAncestor(h,n)?(_.endsBefore(g,n)&&(n[g.length-1]-=1),n[h.length-1]+=1):_.endsBefore(g,n)&&(_.equals(h,n)&&(n[h.length-1]+=1),n[g.length-1]-=1);break}}return n}};function gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function eo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Il(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vp=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:o}=r,a=$.parent(t,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,o),e)for(var[i,c]of k.points(e))e[c]=pe.transform(i,r);break}case"insert_text":{var{path:l,offset:f,text:g}=r;if(g.length===0)break;var h=$.leaf(t,l),m=h.text.slice(0,f),p=h.text.slice(f);if(h.text=m+g+p,e)for(var[u,D]of k.points(e))e[D]=pe.transform(u,r);break}case"merge_node":{var{path:E}=r,A=$.get(t,E),x=_.previous(E),w=$.get(t,x),y=$.parent(t,E),N=E[E.length-1];if(Q.isText(A)&&Q.isText(w))w.text+=A.text;else if(!Q.isText(A)&&!Q.isText(w))w.children.push(...A.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(E,"] to nodes of different interfaces: ").concat(tt.stringify(A)," ").concat(tt.stringify(w)));if(y.children.splice(N,1),e)for(var[b,L]of k.points(e))e[L]=pe.transform(b,r);break}case"move_node":{var{path:F,newPath:W}=r;if(_.isAncestor(F,W))throw new Error("Cannot move a path [".concat(F,"] to new path [").concat(W,"] because the destination is inside itself."));var V=$.get(t,F),M=$.parent(t,F),q=F[F.length-1];M.children.splice(q,1);var U=_.transform(F,r),H=$.get(t,_.parent(U)),ne=U[U.length-1];if(H.children.splice(ne,0,V),e)for(var[oe,de]of k.points(e))e[de]=pe.transform(oe,r);break}case"remove_node":{var{path:X}=r,ae=X[X.length-1],we=$.parent(t,X);if(we.children.splice(ae,1),e)for(var[Ce,Ze]of k.points(e)){var B=pe.transform(Ce,r);if(e!=null&&B!=null)e[Ze]=B;else{var Y=void 0,j=void 0;for(var[K,ce]of $.texts(t))if(_.compare(ce,X)===-1)Y=[K,ce];else{j=[K,ce];break}var se=!1;Y&&j&&(_.equals(j[1],X)?se=!_.hasPrevious(j[1]):se=_.common(Y[1],X).length<_.common(j[1],X).length),Y&&!se?(Ce.path=Y[1],Ce.offset=Y[0].text.length):j?(Ce.path=j[1],Ce.offset=0):e=null}}break}case"remove_text":{var{path:ge,offset:ke,text:Ie}=r;if(Ie.length===0)break;var Pe=$.leaf(t,ge),be=Pe.text.slice(0,ke),at=Pe.text.slice(ke+Ie.length);if(Pe.text=be+at,e)for(var[mt,Xe]of k.points(e))e[Xe]=pe.transform(mt,r);break}case"set_node":{var{path:Ot,properties:zt,newProperties:pt}=r;if(Ot.length===0)throw new Error("Cannot set properties on the root node!");var It=$.get(t,Ot);for(var _e in pt){if(_e==="children"||_e==="text")throw new Error('Cannot set the "'.concat(_e,'" property of nodes!'));var cr=pt[_e];cr==null?delete It[_e]:It[_e]=cr}for(var dn in zt)pt.hasOwnProperty(dn)||delete It[dn];break}case"set_selection":{var{newProperties:ot}=r;if(ot==null)e=ot;else{if(e==null){if(!k.isRange(ot))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(tt.stringify(ot)," when there is no current selection."));e=eo({},ot)}for(var Wt in ot){var Eo=ot[Wt];if(Eo==null){if(Wt==="anchor"||Wt==="focus")throw new Error('Cannot remove the "'.concat(Wt,'" selection property'));delete e[Wt]}else e[Wt]=Eo}}break}case"split_node":{var{path:Ut,position:Ur,properties:Ao}=r;if(Ut.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ut,"] because the root node cannot be split."));var Gr=$.get(t,Ut),Um=$.parent(t,Ut),Gm=Ut[Ut.length-1],Ha;if(Q.isText(Gr)){var Hm=Gr.text.slice(0,Ur),Ym=Gr.text.slice(Ur);Gr.text=Hm,Ha=eo(eo({},Ao),{},{text:Ym})}else{var qm=Gr.children.slice(0,Ur),$m=Gr.children.slice(Ur);Gr.children=qm,Ha=eo(eo({},Ao),{},{children:$m})}if(Um.children.splice(Gm+1,0,Ha),e)for(var[Vm,Km]of k.points(e))e[Km]=pe.transform(Vm,r);break}}return e},Cp={transform(t,e){t.children=Va(t.children);var r=t.selection&&Va(t.selection);try{r=vp(t,r,e)}finally{t.children=Ka(t.children),r?t.selection=Pi(r)?Ka(r):r:t.selection=null}}},Dp={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},Ep={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},uc=(t,e)=>{for(var r in t){var n=t[r],o=e[r];if(et(n)&&et(o)){if(!uc(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function Ap(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function gr(t,e){if(t==null)return{};var r=Ap(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var _p=["anchor","focus"];function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Bp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var k={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:o}=t;return k.isBackward(t)===r?[n,o]:[o,n]},end(t){var[,e]=k.edges(t);return e},equals(t,e){return pe.equals(t.anchor,e.anchor)&&pe.equals(t.focus,e.focus)},includes(t,e){if(k.isRange(e)){if(k.includes(t,e.anchor)||k.includes(t,e.focus))return!0;var[r,n]=k.edges(t),[o,a]=k.edges(e);return pe.isBefore(r,o)&&pe.isAfter(n,a)}var[s,i]=k.edges(t),c=!1,l=!1;return pe.isPoint(e)?(c=pe.compare(e,s)>=0,l=pe.compare(e,i)<=0):(c=_.compare(e,s.path)>=0,l=_.compare(e,i.path)<=0),c&&l},intersection(t,e){var r=gr(t,_p),[n,o]=k.edges(t),[a,s]=k.edges(e),i=pe.isBefore(n,a)?a:n,c=pe.isBefore(o,s)?o:s;return pe.isBefore(c,i)?null:Bp({anchor:i,focus:c},r)},isBackward(t){var{anchor:e,focus:r}=t;return pe.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return pe.equals(e,r)},isExpanded(t){return!k.isCollapsed(t)},isForward(t){return!k.isBackward(t)},isRange(t){return et(t)&&pe.isPoint(t.anchor)&&pe.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=k.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return To(t,n=>{if(n===null)return null;var{affinity:o="inward"}=r,a,s;if(o==="inward"){var i=k.isCollapsed(n);k.isForward(n)?(a="forward",s=i?a:"backward"):(a="backward",s=i?a:"forward")}else o==="outward"?k.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=o,s=o);var c=pe.transform(n.anchor,e,{affinity:a}),l=pe.transform(n.focus,e,{affinity:s});if(!c||!l)return null;n.anchor=c,n.focus=l})}},Pl=t=>et(t)&&$.isNodeList(t.children)&&!d.isEditor(t),Z={isAncestor(t){return et(t)&&$.isNodeList(t.children)},isElement:Pl,isElementList(t){return Array.isArray(t)&&t.every(e=>Z.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Pl(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},xp=["children"],wp=["text"],Ll=new WeakMap,$={ancestor(t,e){var r=$.get(t,e);if(Q.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(tt.stringify(r)));return r},*ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of _.ancestors(e,r)){var o=$.ancestor(t,n),a=[o,n];yield a}},child(t,e){if(Q.isText(t))throw new Error("Cannot get the child of a text node: ".concat(tt.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(tt.stringify(t)));return r},*children(t,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,o=$.ancestor(t,e),{children:a}=o,s=n?a.length-1:0;n?s>=0:s<a.length;){var i=$.child(o,s),c=e.concat(s);yield[i,c],s=n?s-1:s+1}},common(t,e,r){var n=_.common(e,r),o=$.get(t,n);return[o,n]},descendant(t,e){var r=$.get(t,e);if(d.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(tt.stringify(r)));return r},*descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))n.length!==0&&(yield[r,n])},*elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))Z.isElement(r)&&(yield[r,n])},extractProps(t){if(Z.isAncestor(t)){var e=gr(t,xp);return e}else{var e=gr(t,wp);return e}},first(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(Q.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(Q.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(tt.stringify(t)));var r=To({children:t.children},n=>{var[o,a]=k.edges(e),s=$.nodes(n,{reverse:!0,pass:h=>{var[,m]=h;return!k.includes(e,m)}});for(var[,i]of s){if(!k.includes(e,i)){var c=$.parent(n,i),l=i[i.length-1];c.children.splice(l,1)}if(_.equals(i,a.path)){var f=$.leaf(n,i);f.text=f.text.slice(0,a.offset)}if(_.equals(i,o.path)){var g=$.leaf(n,i);g.text=g.text.slice(o.offset)}}d.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(tt.stringify(t)));r=r.children[o]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(t){return Q.isText(t)||Z.isElement(t)||d.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=Ll.get(t);if(e!==void 0)return e;var r=t.every(n=>$.isNode(n));return Ll.set(t,r),r},last(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(Q.isText(n)||n.children.length===0);){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(t,e){var r=$.get(t,e);if(!Q.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(tt.stringify(r)));return r},*levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of _.levels(e,r)){var o=$.get(t,n);yield[o,n]}},matches(t,e){return Z.isElement(t)&&Z.isElementProps(e)&&Z.matches(t,e)||Q.isText(t)&&Q.isTextProps(e)&&Q.matches(t,e)},*nodes(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=e,{from:o=[],to:a}=e,s=new Set,i=[],c=t;!(a&&(n?_.isBefore(i,a):_.isAfter(i,a)));){if(s.has(c)||(yield[c,i]),!s.has(c)&&!Q.isText(c)&&c.children.length!==0&&(r==null||r([c,i])===!1)){s.add(c);var l=n?c.children.length-1:0;_.isAncestor(i,o)&&(l=o[i.length]),i=i.concat(l),c=$.get(t,i);continue}if(i.length===0)break;if(!n){var f=_.next(i);if($.has(t,f)){i=f,c=$.get(t,i);continue}}if(n&&i[i.length-1]!==0){var g=_.previous(i);i=g,c=$.get(t,i);continue}i=_.parent(i),c=$.get(t,i),s.add(c)}},parent(t,e){var r=_.parent(e),n=$.get(t,r);if(Q.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return Q.isText(t)?t.text:t.children.map($.string).join("")},*texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))Q.isText(r)&&(yield[r,n])}};function Ml(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ml(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ml(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hr={isNodeOperation(t){return hr.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!et(t))return!1;switch(t.type){case"insert_node":return _.isPath(t.path)&&$.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&_.isPath(t.path);case"merge_node":return typeof t.position=="number"&&_.isPath(t.path)&&et(t.properties);case"move_node":return _.isPath(t.path)&&_.isPath(t.newPath);case"remove_node":return _.isPath(t.path)&&$.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&_.isPath(t.path);case"set_node":return _.isPath(t.path)&&et(t.properties)&&et(t.newProperties);case"set_selection":return t.properties===null&&k.isRange(t.newProperties)||t.newProperties===null&&k.isRange(t.properties)||et(t.properties)&&et(t.newProperties);case"split_node":return _.isPath(t.path)&&typeof t.position=="number"&&et(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>hr.isOperation(e))},isSelectionOperation(t){return hr.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return hr.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Le(Le({},t),{},{type:"remove_node"});case"insert_text":return Le(Le({},t),{},{type:"remove_text"});case"merge_node":return Le(Le({},t),{},{type:"split_node",path:_.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(_.equals(e,r))return t;if(_.isSibling(r,e))return Le(Le({},t),{},{path:e,newPath:r});var n=_.transform(r,t),o=_.transform(_.next(r),t);return Le(Le({},t),{},{path:n,newPath:o})}case"remove_node":return Le(Le({},t),{},{type:"insert_node"});case"remove_text":return Le(Le({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return Le(Le({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:i,newProperties:c}=t;return i==null?Le(Le({},t),{},{properties:c,newProperties:null}):c==null?Le(Le({},t),{},{properties:null,newProperties:i}):Le(Le({},t),{},{properties:c,newProperties:i})}case"split_node":return Le(Le({},t),{},{type:"merge_node",path:_.next(t.path)})}}},Rl=new WeakMap,Sp=t=>{var e=Rl.get(t);if(e!==void 0)return e;if(!et(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||et(t.marks))&&(t.selection===null||k.isRange(t.selection))&&$.isNodeList(t.children)&&hr.isOperationList(t.operations);return Rl.set(t,r),r},d={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return Sp(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}};var Tp={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(_.isPath)}};function jl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pe={compare(t,e){var r=_.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return pe.compare(t,e)===1},isBefore(t,e){return pe.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&_.equals(t.path,e.path)},isPoint(t){return et(t)&&typeof t.offset=="number"&&_.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return To(t,n=>{if(n===null)return null;var{affinity:o="forward"}=r,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=_.transform(a,e,r);break}case"insert_text":{_.equals(e.path,a)&&(e.offset<s||e.offset===s&&o==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{_.equals(e.path,a)&&(n.offset+=e.position),n.path=_.transform(a,e,r);break}case"remove_text":{_.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(_.equals(e.path,a)||_.isAncestor(e.path,a))return null;n.path=_.transform(a,e,r);break}case"split_node":{if(_.equals(e.path,a)){if(e.position===s&&o==null)return null;(e.position<s||e.position===s&&o==="forward")&&(n.offset-=e.position,n.path=_.transform(a,e,zl(zl({},r),{},{affinity:"forward"})))}else n.path=_.transform(a,e,r);break}}})}},Wl=void 0,tt={setScrubber(t){Wl=t},stringify(t){return JSON.stringify(t,Wl)}},yp=["text"],Fp=["anchor","focus"];function Ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ul(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Q={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function o(a){var s=gr(a,yp);return s}return uc(n?o(t):t,n?o(e):e)},isText(t){return et(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>Q.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[pr({},t)];for(var n of e){var o=gr(n,Fp),[a,s]=k.edges(n),i=[],c=0,l=a.offset,f=s.offset;for(var g of r){var{length:h}=g.text,m=c;if(c+=h,l<=m&&c<=f){Object.assign(g,o),i.push(g);continue}if(l!==f&&(l===c||f===m)||l>c||f<m||f===m&&m!==0){i.push(g);continue}var p=g,u=void 0,D=void 0;if(f<c){var E=f-m;D=pr(pr({},p),{},{text:p.text.slice(E)}),p=pr(pr({},p),{},{text:p.text.slice(0,E)})}if(l>m){var A=l-m;u=pr(pr({},p),{},{text:p.text.slice(0,A)}),p=pr(pr({},p),{},{text:p.text.slice(A)})}Object.assign(p,o),u&&i.push(u),i.push(p),D&&i.push(D)}r=i}return r}},is=t=>t.selection?t.selection:t.children.length>0?d.end(t,[]):[0],xn=(t,e)=>{var[r]=d.node(t,e);return n=>n===r},us=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,o=r?Pp(e):e,a=le.None,s=le.None,i=0,c=null,l=null;for(var f of o){var g=f.codePointAt(0);if(!g)break;var h=$p(f,g);if([a,s]=n?[s,h]:[h,a],Bn(a,le.ZWJ)&&Bn(s,le.ExtPict)&&(n?c=Gl(e.substring(0,i)):c=Gl(e.substring(0,e.length-i)),!c)||Bn(a,le.RI)&&Bn(s,le.RI)&&(l!==null?l=!l:n?l=!0:l=Jp(e.substring(0,e.length-i)),!l)||a!==le.None&&s!==le.None&&Kp(a,s))break;i+=f.length}return i||1},bp=/\s/,Np=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Op=/['\u2018\u2019]/,Ip=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,o=!1;e.length>0;){var a=us(e,r),[s,i]=ls(e,a,r);if(kp(s,i,r))o=!0,n+=a;else if(!o)n+=a;else break;e=i}return n},ls=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},kp=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(bp.test(e))return!1;if(Op.test(e)){var o=us(r,n),[a,s]=ls(r,o,n);if(t(a,s,n))return!0}return!Np.test(e)},Pp=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var o=e.charAt(r-n);if(Mp(o.charCodeAt(0))){var a=e.charAt(r-n-1);if(Lp(a.charCodeAt(0))){yield a+o,n++;continue}}yield o}},Lp=t=>t>=55296&&t<=56319,Mp=t=>t>=56320&&t<=57343,le;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(le||(le={}));var Rp=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,jp=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,zp=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Wp=/^[\u1100-\u115F\uA960-\uA97C]$/,Up=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Gp=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Hp=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Yp=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,qp=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,$p=(t,e)=>{var r=le.Any;return t.search(Rp)!==-1&&(r|=le.Extend),e===8205&&(r|=le.ZWJ),e>=127462&&e<=127487&&(r|=le.RI),t.search(jp)!==-1&&(r|=le.Prepend),t.search(zp)!==-1&&(r|=le.SpacingMark),t.search(Wp)!==-1&&(r|=le.L),t.search(Up)!==-1&&(r|=le.V),t.search(Gp)!==-1&&(r|=le.T),t.search(Hp)!==-1&&(r|=le.LV),t.search(Yp)!==-1&&(r|=le.LVT),t.search(qp)!==-1&&(r|=le.ExtPict),r};function Bn(t,e){return(t&e)!==0}var Vp=[[le.L,le.L|le.V|le.LV|le.LVT],[le.LV|le.V,le.V|le.T],[le.LVT|le.T,le.T],[le.Any,le.Extend|le.ZWJ],[le.Any,le.SpacingMark],[le.Prepend,le.Any],[le.ZWJ,le.ExtPict],[le.RI,le.RI]];function Kp(t,e){return Vp.findIndex(r=>Bn(t,r[0])&&Bn(e,r[1]))===-1}var Zp=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Gl=t=>t.search(Zp)!==-1,Xp=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Jp=t=>{var e=t.match(Xp);if(e===null)return!1;var r=e[0].length/2;return r%2===1},Qp={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:o=is(t)}=r;if(_.isPath(o)&&(o=d.range(t,o)),k.isRange(o))if(k.isCollapsed(o))o=o.anchor;else{var a=k.end(o);if(!n&&d.void(t,{at:a}))return;var s=k.start(o),i=d.pointRef(t,s),c=d.pointRef(t,a);z.delete(t,{at:o,voids:n});var l=i.unref(),f=c.unref();o=l||f,z.setSelection(t,{anchor:o,focus:o})}if(!(!n&&d.void(t,{at:o})||d.elementReadOnly(t,{at:o}))){var{path:g,offset:h}=o;e.length>0&&t.apply({type:"insert_text",path:g,offset:h,text:e})}})}};function Hl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var z=ea(ea(ea(ea({},Cp),Dp),Ep),Qp),eh=(t,e)=>{for(var r of d.pathRefs(t))pp.transform(r,e);for(var n of d.pointRefs(t))hp.transform(n,e);for(var o of d.rangeRefs(t))gp.transform(o,e);var a=ta.get(t)||[],s=ra.get(t)||new Set,i,c,l=p=>{if(p){var u=p.join(",");c.has(u)||(c.add(u),i.push(p))}};if(_.operationCanTransformPath(e)){i=[],c=new Set;for(var f of a){var g=_.transform(f,e);l(g)}}else i=a,c=s;var h=t.getDirtyPaths(e);for(var m of h)l(m);ta.set(t,i),ra.set(t,c),z.transform(t,e),t.operations.push(e),d.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),to.get(t)||(to.set(t,!0),Promise.resolve().then(()=>{to.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},th=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return _.levels(r)}case"insert_node":{var{node:n,path:o}=e,a=_.levels(o),s=Q.isText(n)?[]:Array.from($.nodes(n),W=>{var[,V]=W;return o.concat(V)});return[...a,...s]}case"merge_node":{var{path:i}=e,c=_.ancestors(i),l=_.previous(i);return[...c,l]}case"move_node":{var{path:f,newPath:g}=e;if(_.equals(f,g))return[];var h=[],m=[];for(var p of _.ancestors(f)){var u=_.transform(p,e);h.push(u)}for(var D of _.ancestors(g)){var E=_.transform(D,e);m.push(E)}var A=m[m.length-1],x=g[g.length-1],w=A.concat(x);return[...h,...m,w]}case"remove_node":{var{path:y}=e,N=_.ancestors(y);return[...N]}case"split_node":{var{path:b}=e,L=_.levels(b),F=_.next(b);return[...L,F]}default:return[]}},rh=t=>{var{selection:e}=t;return e?$.fragment(t,e):[]},nh=(t,e)=>{var[r,n]=e;if(!Q.isText(r)){if(Z.isElement(r)&&r.children.length===0){var o={text:""};z.insertNodes(t,o,{at:n.concat(0),voids:!0});return}for(var a=d.isEditor(r)?!1:Z.isElement(r)&&(t.isInline(r)||r.children.length===0||Q.isText(r.children[0])||t.isInline(r.children[0])),s=0,i=0;i<r.children.length;i++,s++){var c=$.get(t,n);if(!Q.isText(c)){var l=c.children[s],f=c.children[s-1],g=i===r.children.length-1,h=Q.isText(l)||Z.isElement(l)&&t.isInline(l);if(h!==a)z.removeNodes(t,{at:n.concat(s),voids:!0}),s--;else if(Z.isElement(l)){if(t.isInline(l)){if(f==null||!Q.isText(f)){var m={text:""};z.insertNodes(t,m,{at:n.concat(s),voids:!0}),s++}else if(g){var p={text:""};z.insertNodes(t,p,{at:n.concat(s+1),voids:!0}),s++}}}else f!=null&&Q.isText(f)&&(Q.equals(l,f,{loose:!0})?(z.mergeNodes(t,{at:n.concat(s),voids:!0}),s--):f.text===""?(z.removeNodes(t,{at:n.concat(s-1),voids:!0}),s--):l.text===""&&(z.removeNodes(t,{at:n.concat(s),voids:!0}),s--))}}}},oh=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,o=n*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},ah=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:o="lowest",at:a=e.selection,match:s}=r;if(!!a){var i=d.path(e,a),c=o==="lowest";for(var[l,f]of d.levels(e,{at:i,voids:n,match:s,reverse:c}))if(!Q.isText(l)){if(k.isRange(a)){if(_.isAncestor(f,a.anchor.path)&&_.isAncestor(f,a.focus.path))return[l,f]}else if(!_.equals(i,f))return[l,f]}}};function Yl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ql(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sh=(t,e,r)=>{var{selection:n}=t;if(n){var o=(g,h)=>{if(!Q.isText(g))return!1;var[m,p]=d.parent(t,h);return!t.isVoid(m)||t.markableVoid(m)},a=k.isExpanded(n),s=!1;if(!a){var[i,c]=d.node(t,n);if(i&&o(i,c)){var[l]=d.parent(t,c);s=l&&t.markableVoid(l)}}if(a||s)z.setNodes(t,{[e]:r},{match:o,split:!0,voids:!0});else{var f=ql(ql({},d.marks(t)||{}),{},{[e]:r});t.marks=f,to.get(t)||t.onChange()}}};function $l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$l(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ih=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.point(e,r,{edge:"end"}),a=d.end(e,[]),s={anchor:o,focus:a},{distance:i=1}=n,c=0,l;for(var f of d.positions(e,Vl(Vl({},n),{},{at:s}))){if(c>i)break;c!==0&&(l=f),c++}return l};function Kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var uh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.start(e,[]),a=d.point(e,r,{edge:"start"}),s={anchor:o,focus:a},{distance:i=1}=n,c=0,l;for(var f of d.positions(e,Zl(Zl({},n),{},{at:s,reverse:!0}))){if(c>i)break;c!==0&&(l=f),c++}return l},lh=(t,e)=>{var{selection:r}=t;r&&k.isCollapsed(r)&&z.delete(t,{unit:e,reverse:!0})},ch=(t,e)=>{var{selection:r}=t;r&&k.isCollapsed(r)&&z.delete(t,{unit:e})},fh=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&k.isExpanded(n)&&z.delete(e,{reverse:r==="backward"})},dh=(t,e)=>[d.start(t,e),d.end(t,e)];function Xl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Jl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xl(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,Jl(Jl({},r),{},{match:n=>Z.isElement(n)&&d.isElementReadOnly(e,n)}))},ph=(t,e)=>d.point(t,e,{edge:"end"}),hh=(t,e)=>{var r=d.path(t,e,{edge:"start"});return d.node(t,r)},gh=(t,e)=>{var r=d.range(t,e);return $.fragment(t,r)};function Ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ec(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,ec(ec({},r),{},{match:n=>Z.isElement(n)&&d.isVoid(e,n)}))},Ch=(t,e)=>e.children.some(r=>Z.isElement(r)&&d.isBlock(t,r)),Dh=(t,e)=>e.children.some(r=>Q.isText(r)||d.isInline(t,r)),Eh=(t,e)=>$.has(t,e),Ah=(t,e)=>e.children.every(r=>Q.isText(r)),_h=t=>{z.splitNodes(t,{always:!0})},Bh=(t,e,r)=>{z.insertNodes(t,e,r)},xh=t=>{z.splitNodes(t,{always:!0})};function tc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function wh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tc(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Sh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=e;if(o){if(a){var s=wh({text:r},a);z.insertNodes(e,s,{at:n.at,voids:n.voids})}else z.insertText(e,r,n);e.marks=null}},Th=(t,e)=>!t.isInline(e),yh=(t,e,r)=>d.isStart(t,e,r)||d.isEnd(t,e,r),Fh=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&Q.isText(n)&&n.text===""&&!t.isVoid(e)},bh=(t,e,r)=>{var n=d.end(t,r);return pe.equals(e,n)},Nh=t=>{var e=ic.get(t);return e===void 0?!0:e},Oh=(t,e,r)=>{if(e.offset!==0)return!1;var n=d.start(t,r);return pe.equals(e,n)},Ih=(t,e)=>{var r=d.path(t,e,{edge:"end"});return d.node(t,r)},kh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=$.leaf(e,o);return[a,o]};function*Ph(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,reverse:n=!1,voids:o=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!r){var s=[],i=d.path(t,r);for(var[c,l]of $.levels(t,i))if(!!a(c,l)&&(s.push([c,l]),!o&&Z.isElement(c)&&d.isVoid(t,c)))break;n&&s.reverse(),yield*s}}var Lh=["text"],Mh=["text"],Rh=function(e){var{marks:r,selection:n}=e;if(!n)return null;if(r)return r;if(k.isExpanded(n)){var[o]=d.nodes(e,{match:Q.isText});if(o){var[a]=o,s=gr(a,Lh);return s}else return{}}var{anchor:i}=n,{path:c}=i,[l]=d.leaf(e,c);if(i.offset===0){var f=d.previous(e,{at:c,match:Q.isText}),g=d.above(e,{match:E=>Z.isElement(E)&&d.isVoid(e,E)&&e.markableVoid(E)});if(!g){var h=d.above(e,{match:E=>Z.isElement(E)&&d.isBlock(e,E)});if(f&&h){var[m,p]=f,[,u]=h;_.isAncestor(u,p)&&(l=m)}}}var D=gr(l,Mh);return D},jh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.after(e,s,{voids:o});if(!!i){var[,c]=d.last(e,[]),l=[i.path,c];if(_.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(_.isPath(s)){var[f]=d.parent(e,s);a=h=>f.children.includes(h)}else a=()=>!0;var[g]=d.nodes(e,{at:l,match:a,mode:n,voids:o});return g}}},zh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=$.get(e,o);return[a,o]};function*Wh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:i=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!r){var l,f;if(Tp.isSpan(r))l=r[0],f=r[1];else{var g=d.path(t,r,{edge:"start"}),h=d.path(t,r,{edge:"end"});l=a?h:g,f=a?g:h}var m=$.nodes(t,{reverse:a,from:l,to:f,pass:w=>{var[y]=w;return Z.isElement(y)?!!(!s&&(d.isVoid(t,y)||d.isElementReadOnly(t,y))||i&&!d.isSelectable(t,y)):!1}}),p=[],u;for(var[D,E]of m)if(!(i&&Z.isElement(D)&&!d.isSelectable(t,D))){var A=u&&_.compare(E,u[1])===0;if(!(n==="highest"&&A)){if(!c(D,E)){if(o&&!A&&Q.isText(D))return;continue}if(n==="lowest"&&A){u=[D,E];continue}var x=n==="lowest"?u:[D,E];x&&(o?p.push(x):yield x),u=[D,E]}}n==="lowest"&&u&&(o?p.push(u):yield u),o&&(yield*p)}}var Uh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:o}=r,a=f=>ta.get(f)||[],s=f=>ra.get(f)||new Set,i=f=>{var g=a(f).pop(),h=g.join(",");return s(f).delete(h),g};if(!!d.isNormalizing(e)){if(n){var c=Array.from($.nodes(e),f=>{var[,g]=f;return g}),l=new Set(c.map(f=>f.join(",")));ta.set(e,c),ra.set(e,l)}a(e).length!==0&&d.withoutNormalizing(e,()=>{for(var f of a(e))if($.has(e,f)){var g=d.node(e,f),[h,m]=g;Z.isElement(h)&&h.children.length===0&&e.normalizeNode(g,{operation:o})}for(var p=a(e),u=p.length,D=0;p.length!==0;){if(!e.shouldNormalize({dirtyPaths:p,iteration:D,initialDirtyPathsLength:u,operation:o}))return;var E=i(e);if($.has(e,E)){var A=d.node(e,E);e.normalizeNode(A,{operation:o})}D++,p=a(e)}})}},Gh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=_.parent(o),s=d.node(e,a);return s},Hh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.pathRefs(e);return c.delete(a),a.current=null,i}},s=d.pathRefs(e);return s.add(a),a},Yh=t=>{var e=bl.get(t);return e||(e=new Set,bl.set(t,e)),e},qh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=n;if(_.isPath(r)){if(a==="start"){var[,s]=$.first(e,r);r=s}else if(a==="end"){var[,i]=$.last(e,r);r=i}}return k.isRange(r)&&(a==="start"?r=k.start(r):a==="end"?r=k.end(r):r=_.common(r.anchor.path,r.focus.path)),pe.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},$h=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.pointRefs(e);return c.delete(a),a.current=null,i}},s=d.pointRefs(e);return s.add(a),a},Vh=t=>{var e=Nl.get(t);return e||(e=new Set,Nl.set(t,e)),e},Kh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=n;if(_.isPath(r)){var a;if(o==="end"){var[,s]=$.last(e,r);a=s}else{var[,i]=$.first(e,r);a=i}var c=$.get(e,a);if(!Q.isText(c))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?c.text.length:0}}if(k.isRange(r)){var[l,f]=k.edges(r);return o==="start"?l:f}return r};function*Zh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,unit:n="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!r)return;var i=d.range(t,r),[c,l]=k.edges(i),f=o?l:c,g=!1,h="",m=0,p=0,u=0;for(var[D,E]of d.nodes(t,{at:r,reverse:o,voids:a,ignoreNonSelectable:s})){if(Z.isElement(D)){if(!a&&(t.isVoid(D)||t.isElementReadOnly(D))){yield d.start(t,E);continue}if(t.isInline(D))continue;if(d.hasInlines(t,D)){var A=_.isAncestor(E,l.path)?l:d.end(t,E),x=_.isAncestor(E,c.path)?c:d.start(t,E);h=d.string(t,{anchor:x,focus:A},{voids:a}),g=!0}}if(Q.isText(D)){var w=_.equals(E,f.path);for(w?(p=o?f.offset:D.text.length-f.offset,u=f.offset):(p=D.text.length,u=o?p:0),(w||g||n==="offset")&&(yield{path:E,offset:u},g=!1);;){if(m===0){if(h==="")break;m=y(h,n,o),h=ls(h,m,o)[1]}if(u=o?u-m:u+m,p=p-m,p<0){m=-p;break}m=0,yield{path:E,offset:u}}}}function y(N,b,L){return b==="character"?us(N,L):b==="word"?Ip(N,L):b==="line"||b==="block"?N.length:1}}var Xh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.before(e,s,{voids:o});if(!!i){var[,c]=d.first(e,[]),l=[i.path,c];if(_.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(_.isPath(s)){var[f]=d.parent(e,s);a=h=>f.children.includes(h)}else a=()=>!0;var[g]=d.nodes(e,{reverse:!0,at:l,match:a,mode:n,voids:o});return g}}},Jh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.rangeRefs(e);return c.delete(a),a.current=null,i}},s=d.rangeRefs(e);return s.add(a),a},Qh=t=>{var e=Ol.get(t);return e||(e=new Set,Ol.set(t,e)),e},eg=(t,e,r)=>{if(k.isRange(e)&&!r)return e;var n=d.start(t,e),o=d.end(t,r||e);return{anchor:n,focus:o}};function rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function tg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rc(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rg=(t,e)=>{var{selection:r}=t;if(r){var n=(f,g)=>{if(!Q.isText(f))return!1;var[h,m]=d.parent(t,g);return!t.isVoid(h)||t.markableVoid(h)},o=k.isExpanded(r),a=!1;if(!o){var[s,i]=d.node(t,r);if(s&&n(s,i)){var[c]=d.parent(t,i);a=c&&t.markableVoid(c)}}if(o||a)z.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var l=tg({},d.marks(t)||{});delete l[e],t.marks=l,to.get(t)||t.onChange()}}},ng=(t,e)=>{ic.set(t,e)},og=(t,e)=>d.point(t,e,{edge:"start"}),ag=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,a=d.range(e,r),[s,i]=k.edges(a),c="";for(var[l,f]of d.nodes(e,{at:a,match:Q.isText,voids:o})){var g=l.text;_.equals(f,i.path)&&(g=g.slice(0,i.offset)),_.equals(f,s.path)&&(g=g.slice(s.offset)),c+=g}return c},sg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,[a,s]=k.edges(r);if(a.offset!==0||s.offset!==0||k.isCollapsed(r)||_.hasPrevious(s.path))return r;var i=d.above(e,{at:s,match:p=>Z.isElement(p)&&d.isBlock(e,p),voids:o}),c=i?i[1]:[],l=d.start(e,a),f={anchor:l,focus:s},g=!0;for(var[h,m]of d.nodes(e,{at:f,match:Q.isText,reverse:!0,voids:o})){if(g){g=!1;continue}if(h.text!==""||_.isBefore(m,c)){s={path:m,offset:h.text.length};break}}return{anchor:a,focus:s}},ig=(t,e)=>{var r=d.isNormalizing(t);d.setNormalizing(t,!1);try{e()}finally{d.setNormalizing(t,r)}d.normalize(t)},ug=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var n,o,{reverse:a=!1,unit:s="character",distance:i=1,voids:c=!1}=r,{at:l=e.selection,hanging:f=!1}=r;if(!!l){var g=!1;if(k.isRange(l)&&k.isCollapsed(l)&&(g=!0,l=l.anchor),pe.isPoint(l)){var h=d.void(e,{at:l,mode:"highest"});if(!c&&h){var[,m]=h;l=m}else{var p={unit:s,distance:i},u=a?d.before(e,l,p)||d.start(e,[]):d.after(e,l,p)||d.end(e,[]);l={anchor:l,focus:u},f=!0}}if(_.isPath(l)){z.removeNodes(e,{at:l,voids:c});return}if(!k.isCollapsed(l)){if(!f){var[,D]=k.edges(l),E=d.end(e,[]);pe.equals(D,E)||(l=d.unhangRange(e,l,{voids:c}))}var[A,x]=k.edges(l),w=d.above(e,{match:be=>Z.isElement(be)&&d.isBlock(e,be),at:A,voids:c}),y=d.above(e,{match:be=>Z.isElement(be)&&d.isBlock(e,be),at:x,voids:c}),N=w&&y&&!_.equals(w[1],y[1]),b=_.equals(A.path,x.path),L=c?null:(n=d.void(e,{at:A,mode:"highest"}))!==null&&n!==void 0?n:d.elementReadOnly(e,{at:A,mode:"highest"}),F=c?null:(o=d.void(e,{at:x,mode:"highest"}))!==null&&o!==void 0?o:d.elementReadOnly(e,{at:x,mode:"highest"});if(L){var W=d.before(e,A);W&&w&&_.isAncestor(w[1],W.path)&&(A=W)}if(F){var V=d.after(e,x);V&&y&&_.isAncestor(y[1],V.path)&&(x=V)}var M=[],q;for(var U of d.nodes(e,{at:l,voids:c})){var[H,ne]=U;q&&_.compare(ne,q)===0||(!c&&Z.isElement(H)&&(d.isVoid(e,H)||d.isElementReadOnly(e,H))||!_.isCommon(ne,A.path)&&!_.isCommon(ne,x.path))&&(M.push(U),q=ne)}var oe=Array.from(M,be=>{var[,at]=be;return d.pathRef(e,at)}),de=d.pointRef(e,A),X=d.pointRef(e,x),ae="";if(!b&&!L){var we=de.current,[Ce]=d.leaf(e,we),{path:Ze}=we,{offset:B}=A,Y=Ce.text.slice(B);Y.length>0&&(e.apply({type:"remove_text",path:Ze,offset:B,text:Y}),ae=Y)}if(oe.reverse().map(be=>be.unref()).filter(be=>be!==null).forEach(be=>z.removeNodes(e,{at:be,voids:c})),!F){var j=X.current,[K]=d.leaf(e,j),{path:ce}=j,se=b?A.offset:0,ge=K.text.slice(se,x.offset);ge.length>0&&(e.apply({type:"remove_text",path:ce,offset:se,text:ge}),ae=ge)}!b&&N&&X.current&&de.current&&z.mergeNodes(e,{at:X.current,hanging:!0,voids:c}),g&&a&&s==="character"&&ae.length>1&&ae.match(/[\u0E00-\u0E7F]+/)&&z.insertText(e,ae.slice(0,ae.length-i));var ke=de.unref(),Ie=X.unref(),Pe=a?ke||Ie:Ie||ke;r.at==null&&Pe&&z.select(e,Pe)}}})},lg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1}=n,{at:s=is(e)}=n;if(!!r.length){if(k.isRange(s))if(o||(s=d.unhangRange(e,s,{voids:a})),k.isCollapsed(s))s=s.anchor;else{var[,i]=k.edges(s);if(!a&&d.void(e,{at:i}))return;var c=d.pointRef(e,i);z.delete(e,{at:s}),s=c.unref()}else _.isPath(s)&&(s=d.start(e,s));if(!(!a&&d.void(e,{at:s}))){var l=d.above(e,{at:s,match:B=>Z.isElement(B)&&d.isInline(e,B),mode:"highest",voids:a});if(l){var[,f]=l;if(d.isEnd(e,s,f)){var g=d.after(e,f);s=g}else if(d.isStart(e,s,f)){var h=d.before(e,f);s=h}}var m=d.above(e,{match:B=>Z.isElement(B)&&d.isBlock(e,B),at:s,voids:a}),[,p]=m,u=d.isStart(e,s,p),D=d.isEnd(e,s,p),E=u&&D,A=!u||u&&D,x=!D,[,w]=$.first({children:r},[]),[,y]=$.last({children:r},[]),N=[],b=B=>{var[Y,j]=B,K=j.length===0;return K?!1:E?!0:!(A&&_.isAncestor(j,w)&&Z.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y)||x&&_.isAncestor(j,y)&&Z.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y))};for(var L of $.nodes({children:r},{pass:b}))b(L)&&N.push(L);var F=[],W=[],V=[],M=!0,q=!1;for(var[U]of N)Z.isElement(U)&&!e.isInline(U)?(M=!1,q=!0,W.push(U)):M?F.push(U):V.push(U);var[H]=d.nodes(e,{at:s,match:B=>Q.isText(B)||d.isInline(e,B),mode:"highest",voids:a}),[,ne]=H,oe=d.isStart(e,s,ne),de=d.isEnd(e,s,ne),X=d.pathRef(e,D&&!V.length?_.next(p):p),ae=d.pathRef(e,de?_.next(ne):ne);z.splitNodes(e,{at:s,match:B=>q?Z.isElement(B)&&d.isBlock(e,B):Q.isText(B)||d.isInline(e,B),mode:q?"lowest":"highest",always:q&&(!u||F.length>0)&&(!D||V.length>0),voids:a});var we=d.pathRef(e,!oe||oe&&de?_.next(ne):ne);if(z.insertNodes(e,F,{at:we.current,match:B=>Q.isText(B)||d.isInline(e,B),mode:"highest",voids:a}),E&&!F.length&&W.length&&!V.length&&z.delete(e,{at:p,voids:a}),z.insertNodes(e,W,{at:X.current,match:B=>Z.isElement(B)&&d.isBlock(e,B),mode:"lowest",voids:a}),z.insertNodes(e,V,{at:ae.current,match:B=>Q.isText(B)||d.isInline(e,B),mode:"highest",voids:a}),!n.at){var Ce;if(V.length>0&&ae.current?Ce=_.previous(ae.current):W.length>0&&X.current?Ce=_.previous(X.current):we.current&&(Ce=_.previous(we.current)),Ce){var Ze=d.end(e,Ce);z.select(e,Ze)}}we.unref(),X.unref(),ae.unref()}}})},cg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:o}=e;if(o){if(n==="anchor")z.select(e,o.anchor);else if(n==="focus")z.select(e,o.focus);else if(n==="start"){var[a]=k.edges(o);z.select(e,a)}else if(n==="end"){var[,s]=k.edges(o);z.select(e,s)}}else return},fg=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},dg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:o=1,unit:a="character",reverse:s=!1}=r,{edge:i=null}=r;if(!!n){i==="start"&&(i=k.isBackward(n)?"focus":"anchor"),i==="end"&&(i=k.isBackward(n)?"anchor":"focus");var{anchor:c,focus:l}=n,f={distance:o,unit:a,ignoreNonSelectable:!0},g={};if(i==null||i==="anchor"){var h=s?d.before(e,c,f):d.after(e,c,f);h&&(g.anchor=h)}if(i==null||i==="focus"){var m=s?d.before(e,l,f):d.after(e,l,f);m&&(g.focus=m)}z.setSelection(e,g)}},mg=(t,e)=>{var{selection:r}=t;if(e=d.range(t,e),r){z.setSelection(t,e);return}if(!k.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(tt.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function nc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function oc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nc(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=e,{edge:a="both"}=n;if(!!o){a==="start"&&(a=k.isBackward(o)?"focus":"anchor"),a==="end"&&(a=k.isBackward(o)?"anchor":"focus");var{anchor:s,focus:i}=o,c=a==="anchor"?s:i;z.setSelection(e,{[a==="anchor"?"anchor":"focus"]:oc(oc({},c),r)})}},hg=(t,e)=>{var{selection:r}=t,n={},o={};if(!!r){for(var a in e)(a==="anchor"&&e.anchor!=null&&!pe.equals(e.anchor,r.anchor)||a==="focus"&&e.focus!=null&&!pe.equals(e.focus,r.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==r[a])&&(n[a]=r[a],o[a]=e[a]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:o})}},gg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1,mode:s="lowest"}=n,{at:i,match:c,select:l}=n;if($.isNode(r)&&(r=[r]),r.length!==0){var[f]=r;if(i||(i=is(e),l=!0),l==null&&(l=!1),k.isRange(i))if(o||(i=d.unhangRange(e,i,{voids:a})),k.isCollapsed(i))i=i.anchor;else{var[,g]=k.edges(i),h=d.pointRef(e,g);z.delete(e,{at:i}),i=h.unref()}if(pe.isPoint(i)){c==null&&(Q.isText(f)?c=b=>Q.isText(b):e.isInline(f)?c=b=>Q.isText(b)||d.isInline(e,b):c=b=>Z.isElement(b)&&d.isBlock(e,b));var[m]=d.nodes(e,{at:i.path,match:c,mode:s,voids:a});if(m){var[,p]=m,u=d.pathRef(e,p),D=d.isEnd(e,i,p);z.splitNodes(e,{at:i,match:c,mode:s,voids:a});var E=u.unref();i=D?_.next(E):E}else return}var A=_.parent(i),x=i[i.length-1];if(!(!a&&d.void(e,{at:A}))){for(var w of r){var y=A.concat(x);x++,e.apply({type:"insert_node",path:y,node:w}),i=_.next(i)}if(i=_.previous(i),l){var N=d.end(e,i);N&&z.select(e,N)}}}})},vg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:o="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=_.isPath(n)?xn(e,n):w=>Z.isElement(w)&&d.isBlock(e,w)),!!n){var i=d.nodes(e,{at:n,match:s,mode:o,voids:a}),c=Array.from(i,w=>{var[,y]=w;return d.pathRef(e,y)});for(var l of c){var f=l.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var g=d.node(e,_.parent(f)),[h,m]=g,p=f[f.length-1],{length:u}=h.children;if(u===1){var D=_.next(m);z.moveNodes(e,{at:f,to:D,voids:a}),z.removeNodes(e,{at:m,voids:a})}else if(p===0)z.moveNodes(e,{at:f,to:m,voids:a});else if(p===u-1){var E=_.next(m);z.moveNodes(e,{at:f,to:E,voids:a})}else{var A=_.next(f),x=_.next(m);z.splitNodes(e,{at:A,voids:a}),z.moveNodes(e,{at:f,to:x,voids:a})}}}})},Cg=["text"],Dg=["children"],lc=(t,e)=>{if(Z.isElement(e)){var r=e;return d.isVoid(t,e)?!0:r.children.length===1?lc(t,r.children[0]):!1}else return!d.isEditor(e)},Eg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:i="lowest"}=r;if(!!o){if(n==null)if(_.isPath(o)){var[c]=d.parent(e,o);n=W=>c.children.includes(W)}else n=W=>Z.isElement(W)&&d.isBlock(e,W);if(!a&&k.isRange(o)&&(o=d.unhangRange(e,o,{voids:s})),k.isRange(o))if(k.isCollapsed(o))o=o.anchor;else{var[,l]=k.edges(o),f=d.pointRef(e,l);z.delete(e,{at:o}),o=f.unref(),r.at==null&&z.select(e,o)}var[g]=d.nodes(e,{at:o,match:n,voids:s,mode:i}),h=d.previous(e,{at:o,match:n,voids:s,mode:i});if(!(!g||!h)){var[m,p]=g,[u,D]=h;if(!(p.length===0||D.length===0)){var E=_.next(D),A=_.common(p,D),x=_.isSibling(p,D),w=Array.from(d.levels(e,{at:p}),W=>{var[V]=W;return V}).slice(A.length).slice(0,-1),y=d.above(e,{at:p,mode:"highest",match:W=>w.includes(W)&&lc(e,W)}),N=y&&d.pathRef(e,y[1]),b,L;if(Q.isText(m)&&Q.isText(u)){var F=gr(m,Cg);L=u.text.length,b=F}else if(Z.isElement(m)&&Z.isElement(u)){var F=gr(m,Dg);L=u.children.length,b=F}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(tt.stringify(m)," ").concat(tt.stringify(u)));x||z.moveNodes(e,{at:p,to:E,voids:s}),N&&z.removeNodes(e,{at:N.current,voids:s}),Z.isElement(u)&&d.isEmpty(e,u)||Q.isText(u)&&u.text===""&&D[D.length-1]!==0?z.removeNodes(e,{at:D,voids:s}):e.apply({type:"merge_node",path:E,position:L,properties:b}),N&&N.unref()}}}})},Ag=(t,e)=>{d.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:o="lowest",voids:a=!1}=e,{match:s}=e;if(!!n){s==null&&(s=_.isPath(n)?xn(t,n):m=>Z.isElement(m)&&d.isBlock(t,m));var i=d.pathRef(t,r),c=d.nodes(t,{at:n,match:s,mode:o,voids:a}),l=Array.from(c,m=>{var[,p]=m;return d.pathRef(t,p)});for(var f of l){var g=f.unref(),h=i.current;g.length!==0&&t.apply({type:"move_node",path:g,newPath:h}),i.current&&_.isSibling(h,g)&&_.isAfter(h,g)&&(i.current=_.next(i.current))}i.unref()}})},_g=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=_.isPath(s)?xn(e,s):m=>Z.isElement(m)&&d.isBlock(e,m)),!n&&k.isRange(s)&&(s=d.unhangRange(e,s,{voids:o}));var c=d.nodes(e,{at:s,match:i,mode:a,voids:o}),l=Array.from(c,m=>{var[,p]=m;return d.pathRef(e,p)});for(var f of l){var g=f.unref();if(g){var[h]=d.node(e,g);e.apply({type:"remove_node",path:g,node:h})}}}})},Bg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{match:o,at:a=e.selection,compare:s,merge:i}=n,{hanging:c=!1,mode:l="lowest",split:f=!1,voids:g=!1}=n;if(!!a){if(o==null&&(o=_.isPath(a)?xn(e,a):L=>Z.isElement(L)&&d.isBlock(e,L)),!c&&k.isRange(a)&&(a=d.unhangRange(e,a,{voids:g})),f&&k.isRange(a)){if(k.isCollapsed(a)&&d.leaf(e,a.anchor)[0].text.length>0)return;var h=d.rangeRef(e,a,{affinity:"inward"}),[m,p]=k.edges(a),u=l==="lowest"?"lowest":"highest",D=d.isEnd(e,p,p.path);z.splitNodes(e,{at:p,match:o,mode:u,voids:g,always:!D});var E=d.isStart(e,m,m.path);z.splitNodes(e,{at:m,match:o,mode:u,voids:g,always:!E}),a=h.unref(),n.at==null&&z.select(e,a)}s||(s=(L,F)=>L!==F);for(var[A,x]of d.nodes(e,{at:a,match:o,mode:l,voids:g})){var w={},y={};if(x.length!==0){var N=!1;for(var b in r)b==="children"||b==="text"||s(r[b],A[b])&&(N=!0,A.hasOwnProperty(b)&&(w[b]=A[b]),i?r[b]!=null&&(y[b]=i(A[b],r[b])):r[b]!=null&&(y[b]=r[b]));N&&e.apply({type:"set_node",path:x,properties:w,newProperties:y})}}}})},xg=(t,e)=>{if(k.isCollapsed(e))return e.anchor;var[,r]=k.edges(e),n=d.pointRef(t,r);return z.delete(t,{at:e}),n.unref()},wg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection,height:i=0,always:c=!1}=r;if(a==null&&(a=X=>Z.isElement(X)&&d.isBlock(e,X)),k.isRange(s)&&(s=xg(e,s)),_.isPath(s)){var l=s,f=d.point(e,l),[g]=d.parent(e,l);a=X=>X===g,i=f.path.length-l.length+1,s=f,c=!0}if(!!s){var h=d.pointRef(e,s,{affinity:"backward"}),m;try{var[p]=d.nodes(e,{at:s,match:a,mode:n,voids:o});if(!p)return;var u=d.void(e,{at:s,mode:"highest"}),D=0;if(!o&&u){var[E,A]=u;if(Z.isElement(E)&&e.isInline(E)){var x=d.after(e,A);if(!x){var w={text:""},y=_.next(A);z.insertNodes(e,w,{at:y,voids:o}),x=d.point(e,y)}s=x,c=!0}var N=s.path.length-A.length;i=N+1,c=!0}m=d.pointRef(e,s);var b=s.path.length-i,[,L]=p,F=s.path.slice(0,b),W=i===0?s.offset:s.path[b]+D;for(var[V,M]of d.levels(e,{at:F,reverse:!0,voids:o})){var q=!1;if(M.length<L.length||M.length===0||!o&&Z.isElement(V)&&d.isVoid(e,V))break;var U=h.current,H=d.isEnd(e,U,M);if(c||!h||!d.isEdge(e,U,M)){q=!0;var ne=$.extractProps(V);e.apply({type:"split_node",path:M,position:W,properties:ne})}W=M[M.length-1]+(q||H?1:0)}if(r.at==null){var oe=m.current||d.end(e,[]);z.select(e,oe)}}finally{var de;h.unref(),(de=m)===null||de===void 0||de.unref()}}})},Sg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var a of r)o[a]=null;z.setNodes(e,o,n)},Tg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=_.isPath(s)?xn(e,s):m=>Z.isElement(m)&&d.isBlock(e,m)),_.isPath(s)&&(s=d.range(e,s));var c=k.isRange(s)?d.rangeRef(e,s):null,l=d.nodes(e,{at:s,match:i,mode:n,voids:a}),f=Array.from(l,m=>{var[,p]=m;return d.pathRef(e,p)}).reverse(),g=function(p){var u=p.unref(),[D]=d.node(e,u),E=d.range(e,u);o&&c&&(E=k.intersection(c.current,E)),z.liftNodes(e,{at:E,match:A=>Z.isAncestor(D)&&D.children.includes(A),voids:a})};for(var h of f)g(h);c&&c.unref()}})};function ac(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function sc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ac(Object(r),!0).forEach(function(n){gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ac(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var yg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{mode:o="lowest",split:a=!1,voids:s=!1}=n,{match:i,at:c=e.selection}=n;if(!!c){if(i==null&&(_.isPath(c)?i=xn(e,c):e.isInline(r)?i=E=>Z.isElement(E)&&d.isInline(e,E)||Q.isText(E):i=E=>Z.isElement(E)&&d.isBlock(e,E)),a&&k.isRange(c)){var[l,f]=k.edges(c),g=d.rangeRef(e,c,{affinity:"inward"});z.splitNodes(e,{at:f,match:i,voids:s}),z.splitNodes(e,{at:l,match:i,voids:s}),c=g.unref(),n.at==null&&z.select(e,c)}var h=Array.from(d.nodes(e,{at:c,match:e.isInline(r)?E=>Z.isElement(E)&&d.isBlock(e,E):E=>d.isEditor(E),mode:"lowest",voids:s}));for(var[,m]of h){var p=k.isRange(c)?k.intersection(c,d.range(e,m)):c;if(!!p){var u=Array.from(d.nodes(e,{at:p,match:i,mode:o,voids:s}));if(u.length>0){var D=function(){var[E]=u,A=u[u.length-1],[,x]=E,[,w]=A;if(x.length===0&&w.length===0)return"continue";var y=_.equals(x,w)?_.parent(x):_.common(x,w),N=d.range(e,x,w),b=d.node(e,y),[L]=b,F=y.length+1,W=_.next(w.slice(0,F)),V=sc(sc({},r),{},{children:[]});z.insertNodes(e,V,{at:W,voids:s}),z.moveNodes(e,{at:N,match:M=>Z.isAncestor(L)&&L.children.includes(M),to:W.concat(0),voids:s})}();if(D==="continue")continue}}}}})},cc=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return eh(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sh(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lh(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ch(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fh(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rh(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _h(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xh(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lg(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bh(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sh(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nh(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rg(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return th(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return oh(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ah(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ih(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uh(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cg(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ug(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fg(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dh(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mh(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ph(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hh(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gh(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rh(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ch(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dh(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Eh(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ah(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gg(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Th(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yh(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fh(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bh(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Nh(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Oh(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ih(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return kh(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ph(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vg(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Eg(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dg(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ag(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jh(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return zh(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Wh(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Uh(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Gh(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qh(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Hh(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Yh(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Kh(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $h(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Vh(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zh(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xh(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return eg(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jh(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qh(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _g(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mg(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bg(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ng(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pg(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hg(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wg(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return og(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ag(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sg(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sg(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Tg(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vh(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ig(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yg(t,...n)}};return t};v();C();var Fg={isHistory(t){return et(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||hr.isOperationList(t.redos[0].operations))&&(t.undos.length===0||hr.isOperationList(t.undos[0].operations))}};var cs=new WeakMap,fs=new WeakMap,wn={isHistoryEditor(t){return Fg.isHistory(t.history)&&d.isEditor(t)},isMerging(t){return fs.get(t)},isSaving(t){return cs.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=wn.isMerging(t);fs.set(t,!1),e(),fs.set(t,r)},withoutSaving(t,e){var r=wn.isSaving(t);cs.set(t,!1),e(),cs.set(t,r)}},fc=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:o}=n;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&z.setSelection(e,a.selectionBefore),wn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:n}=e,{undos:o}=n;if(o.length>0){var a=o[o.length-1];wn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{var s=a.operations.map(hr.inverse).reverse();for(var i of s)e.apply(i);a.selectionBefore&&z.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),n.undos.pop()}},e.apply=n=>{var{operations:o,history:a}=e,{undos:s}=a,i=s[s.length-1],c=i&&i.operations[i.operations.length-1],l=wn.isSaving(e),f=wn.isMerging(e);if(l==null&&(l=Ng(n)),l){if(f==null&&(i==null?f=!1:o.length!==0?f=!0:f=bg(n,c)),i&&f)i.operations.push(n);else{var g={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",g)}for(;s.length>100;)s.shift();a.redos=[]}r(n)},e.writeHistory=(n,o)=>{e.history[n].push(o)},e},bg=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&_.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&_.equals(t.path,e.path)),Ng=(t,e)=>t.type!=="set_selection";v();C();var Ps=O(hc()),tf=O(np()),rf=O(op()),P=O(ee());v();C();v();C();function gc(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function vc(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function ds(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return vc(r.overflowY,e)||vc(r.overflowX,e)||function(n){var o=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(t)}return!1}function na(t,e,r,n,o,a,s,i){return a<t&&s>e||a>t&&s<e?0:a<=t&&i<=r||s>=e&&i>=r?a-t-n:s>e&&i<r||a<t&&i>r?s-e+o:0}var ms=function(t,e){var r=window,n=e.scrollMode,o=e.block,a=e.inline,s=e.boundary,i=e.skipOverflowHiddenElements,c=typeof s=="function"?s:function(be){return be!==s};if(!gc(t))throw new TypeError("Invalid target");for(var l,f,g=document.scrollingElement||document.documentElement,h=[],m=t;gc(m)&&c(m);){if((m=(f=(l=m).parentElement)==null?l.getRootNode().host||null:f)===g){h.push(m);break}m!=null&&m===document.body&&ds(m)&&!ds(document.documentElement)||m!=null&&ds(m,i)&&h.push(m)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,u=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,E=window.scrollY||pageYOffset,A=t.getBoundingClientRect(),x=A.height,w=A.width,y=A.top,N=A.right,b=A.bottom,L=A.left,F=o==="start"||o==="nearest"?y:o==="end"?b:y+x/2,W=a==="center"?L+w/2:a==="end"?N:L,V=[],M=0;M<h.length;M++){var q=h[M],U=q.getBoundingClientRect(),H=U.height,ne=U.width,oe=U.top,de=U.right,X=U.bottom,ae=U.left;if(n==="if-needed"&&y>=0&&L>=0&&b<=u&&N<=p&&y>=oe&&b<=X&&L>=ae&&N<=de)return V;var we=getComputedStyle(q),Ce=parseInt(we.borderLeftWidth,10),Ze=parseInt(we.borderTopWidth,10),B=parseInt(we.borderRightWidth,10),Y=parseInt(we.borderBottomWidth,10),j=0,K=0,ce="offsetWidth"in q?q.offsetWidth-q.clientWidth-Ce-B:0,se="offsetHeight"in q?q.offsetHeight-q.clientHeight-Ze-Y:0,ge="offsetWidth"in q?q.offsetWidth===0?0:ne/q.offsetWidth:0,ke="offsetHeight"in q?q.offsetHeight===0?0:H/q.offsetHeight:0;if(g===q)j=o==="start"?F:o==="end"?F-u:o==="nearest"?na(E,E+u,u,Ze,Y,E+F,E+F+x,x):F-u/2,K=a==="start"?W:a==="center"?W-p/2:a==="end"?W-p:na(D,D+p,p,Ce,B,D+W,D+W+w,w),j=Math.max(0,j+E),K=Math.max(0,K+D);else{j=o==="start"?F-oe-Ze:o==="end"?F-X+Y+se:o==="nearest"?na(oe,X,H,Ze,Y+se,F,F+x,x):F-(oe+H/2)+se/2,K=a==="start"?W-ae-Ce:a==="center"?W-(ae+ne/2)+ce/2:a==="end"?W-de+B+ce:na(ae,de,ne,Ce,B+ce,W,W+w,w);var Ie=q.scrollLeft,Pe=q.scrollTop;F+=Pe-(j=Math.max(0,Math.min(Pe+j/ke,q.scrollHeight-H/ke+se))),W+=Ie-(K=Math.max(0,Math.min(Ie+K/ge,q.scrollWidth-ne/ge+ce)))}V.push({el:q,top:j,left:K})}return V};function Cc(t){return t===Object(t)&&Object.keys(t).length!==0}function Pg(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var o=n.el,a=n.top,s=n.left;o.scroll&&r?o.scroll({top:a,left:s,behavior:e}):(o.scrollTop=a,o.scrollLeft=s)})}function Lg(t){return t===!1?{block:"end",inline:"nearest"}:Cc(t)?t:{block:"start",inline:"nearest"}}function Mg(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Cc(e)&&typeof e.behavior=="function")return e.behavior(r?ms(t,e):[]);if(!!r){var n=Lg(e);return Pg(ms(t,n),n.behavior)}}var Dc=Mg;v();C();v();C();v();C();v();C();v();C();v();C();v();C();var Pt=[];var Ec=function(){return Pt.some(function(t){return t.activeTargets.length>0})};v();C();var Ac=function(){return Pt.some(function(t){return t.skippedTargets.length>0})};v();C();var _c="ResizeObserver loop completed with undelivered notifications.",Bc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:_c}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=_c),window.dispatchEvent(t)};v();C();v();C();v();C();v();C();var Xr;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Xr||(Xr={}));v();C();v();C();var Yt=function(t){return Object.freeze(t)};var ps=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Yt(this)}return t}();v();C();var hs=function(){function t(e,r,n,o){return this.x=e,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Yt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,o=e.top,a=e.right,s=e.bottom,i=e.left,c=e.width,l=e.height;return{x:r,y:n,top:o,right:a,bottom:s,left:i,width:c,height:l}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();v();C();var ro=function(t){return t instanceof SVGElement&&"getBBox"in t},oa=function(t){if(ro(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var o=t,a=o.offsetWidth,s=o.offsetHeight;return!(a||s||t.getClientRects().length)},gs=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},xc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};v();C();var Jr=typeof window<"u"?window:{};var aa=new WeakMap,wc=/auto|scroll/,Rg=/^tb|vertical/,jg=/msie|trident/i.test(Jr.navigator&&Jr.navigator.userAgent),tr=function(t){return parseFloat(t||"0")},Sn=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new ps((r?e:t)||0,(r?t:e)||0)},Sc=Yt({devicePixelContentBoxSize:Sn(),borderBoxSize:Sn(),contentBoxSize:Sn(),contentRect:new hs(0,0,0,0)}),vs=function(t,e){if(e===void 0&&(e=!1),aa.has(t)&&!e)return aa.get(t);if(oa(t))return aa.set(t,Sc),Sc;var r=getComputedStyle(t),n=ro(t)&&t.ownerSVGElement&&t.getBBox(),o=!jg&&r.boxSizing==="border-box",a=Rg.test(r.writingMode||""),s=!n&&wc.test(r.overflowY||""),i=!n&&wc.test(r.overflowX||""),c=n?0:tr(r.paddingTop),l=n?0:tr(r.paddingRight),f=n?0:tr(r.paddingBottom),g=n?0:tr(r.paddingLeft),h=n?0:tr(r.borderTopWidth),m=n?0:tr(r.borderRightWidth),p=n?0:tr(r.borderBottomWidth),u=n?0:tr(r.borderLeftWidth),D=g+l,E=c+f,A=u+m,x=h+p,w=i?t.offsetHeight-x-t.clientHeight:0,y=s?t.offsetWidth-A-t.clientWidth:0,N=o?D+A:0,b=o?E+x:0,L=n?n.width:tr(r.width)-N-y,F=n?n.height:tr(r.height)-b-w,W=L+D+y+A,V=F+E+w+x,M=Yt({devicePixelContentBoxSize:Sn(Math.round(L*devicePixelRatio),Math.round(F*devicePixelRatio),a),borderBoxSize:Sn(W,V,a),contentBoxSize:Sn(L,F,a),contentRect:new hs(g,c,L,F)});return aa.set(t,M),M},sa=function(t,e,r){var n=vs(t,r),o=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Xr.DEVICE_PIXEL_CONTENT_BOX:return s;case Xr.BORDER_BOX:return o;default:return a}};var Cs=function(){function t(e){var r=vs(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Yt([r.borderBoxSize]),this.contentBoxSize=Yt([r.contentBoxSize]),this.devicePixelContentBoxSize=Yt([r.devicePixelContentBoxSize])}return t}();v();C();var ia=function(t){if(oa(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var Tc=function(){var t=1/0,e=[];Pt.forEach(function(s){if(s.activeTargets.length!==0){var i=[];s.activeTargets.forEach(function(l){var f=new Cs(l.target),g=ia(l.target);i.push(f),l.lastReportedSize=sa(l.target,l.observedBox),g<t&&(t=g)}),e.push(function(){s.callback.call(s.observer,i,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var o=n[r];o()}return t};v();C();var Ds=function(t){Pt.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(ia(o.target)>t?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var yc=function(){var t=0;for(Ds(t);Ec();)t=Tc(),Ds(t);return Ac()&&Bc(),t>0};v();C();v();C();var Es,Fc=[],zg=function(){return Fc.splice(0).forEach(function(t){return t()})},bc=function(t){if(!Es){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return zg()}).observe(r,n),Es=function(){r.textContent="".concat(e?e--:e++)}}Fc.push(t),Es()};var Nc=function(t){bc(function(){requestAnimationFrame(t)})};var ua=0,Wg=function(){return!!ua},Ug=250,Gg={attributes:!0,characterData:!0,childList:!0,subtree:!0},Oc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ic=function(t){return t===void 0&&(t=0),Date.now()+t},As=!1,Hg=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Ug),!As){As=!0;var n=Ic(e);Nc(function(){var o=!1;try{o=yc()}finally{if(As=!1,e=n-Ic(),!Wg())return;o?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Gg)};document.body?r():Jr.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Oc.forEach(function(r){return Jr.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Oc.forEach(function(r){return Jr.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),la=new Hg,_s=function(t){!ua&&t>0&&la.start(),ua+=t,!ua&&la.stop()};v();C();var Yg=function(t){return!ro(t)&&!xc(t)&&getComputedStyle(t).display==="inline"},kc=function(){function t(e,r){this.target=e,this.observedBox=r||Xr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=sa(this.target,this.observedBox,!0);return Yg(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();v();C();var Pc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var ca=new WeakMap,Lc=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},no=function(){function t(){}return t.connect=function(e,r){var n=new Pc(e,r);ca.set(e,n)},t.observe=function(e,r,n){var o=ca.get(e),a=o.observationTargets.length===0;Lc(o.observationTargets,r)<0&&(a&&Pt.push(o),o.observationTargets.push(new kc(r,n&&n.box)),_s(1),la.schedule())},t.unobserve=function(e,r){var n=ca.get(e),o=Lc(n.observationTargets,r),a=n.observationTargets.length===1;o>=0&&(a&&Pt.splice(Pt.indexOf(n),1),n.observationTargets.splice(o,1),_s(-1))},t.disconnect=function(e){var r=this,n=ca.get(e);n.observationTargets.slice().forEach(function(o){return r.unobserve(e,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}();var Bs=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");no.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gs(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");no.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gs(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");no.unobserve(this,e)},t.prototype.disconnect=function(){no.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var pa=O(Wc()),nf=O(Xm());function Da(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zg(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function yn(t,e){if(t==null)return{};var r=Zg(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Ls=(0,P.createContext)(null),Pr=()=>{var t=(0,P.useContext)(Ls);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},Xg=parseInt(P.default.version.split(".")[0],10)>=17,Jg=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Uc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),bt=typeof navigator<"u"&&/Android/.test(navigator.userAgent),va=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ao=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Qg=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),of=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),ev=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),tv=bt&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),rv=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),nv=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),ov=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),ha=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nr=(!ev||!tv)&&!Qg&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Ms=new WeakMap,Rs=new WeakMap,af=new WeakMap,ga=new WeakMap,Ts=new WeakMap,io=new WeakMap,tn=new WeakMap,ys=new WeakMap,Ea=new WeakMap,Fs=new WeakMap,Qr=new WeakMap,en=new WeakMap,so=new WeakMap,bs=new WeakMap,js=new WeakMap,qt=new WeakMap,vr=new WeakMap,Bt=new WeakMap,Or=new WeakMap,Ir=new WeakMap,sf=new WeakMap,Fn=Symbol("placeholder"),uf=Symbol("mark-placeholder"),av=globalThis.Text,zs=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,sv=t=>kr(t)&&t.nodeType===8,Lt=t=>kr(t)&&t.nodeType===1,kr=t=>{var e=zs(t);return!!e&&t instanceof e.Node},Ns=t=>{var e=t&&t.anchorNode&&zs(t.anchorNode);return!!e&&t instanceof e.Selection},lf=t=>kr(t)&&t.nodeType===3,iv=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,uv=t=>{var[e,r]=t;if(Lt(e)&&e.childNodes.length){var n=r===e.childNodes.length,o=n?r-1:r;for([e,o]=cf(e,o,n?"backward":"forward"),n=o<r;Lt(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=cv(e,a,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},lv=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},cf=(t,e,r)=>{for(var{childNodes:n}=t,o=n[e],a=e,s=!1,i=!1;(sv(o)||Lt(o)&&o.childNodes.length===0||Lt(o)&&o.getAttribute("contenteditable")==="false")&&!(s&&i);){if(a>=n.length){s=!0,a=e-1,r="backward";continue}if(a<0){i=!0,a=e+1,r="forward";continue}o=n[a],e=a,a+=r==="forward"?1:-1}return[o,e]},cv=(t,e,r)=>{var[n]=cf(t,e,r);return n},ff=t=>{var e="";if(lf(t)&&t.nodeValue)return t.nodeValue;if(Lt(t)){for(var r of Array.from(t.childNodes))e+=ff(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},fv=/data-slate-fragment="(.+?)"/m,dv=t=>{var e=t.getData("text/html"),[,r]=e.match(fv)||[];return r},Ws=(t,e,r)=>{var{target:n}=e;if(Lt(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=R.getWindow(t);if(o.contains(n))return R.hasDOMNode(t,n,{editable:!0});var a=r.find(s=>{var{addedNodes:i,removedNodes:c}=s;for(var l of i)if(l===n||l.contains(n))return!0;for(var f of c)if(f===n||f.contains(n))return!0});return!a||a===e?!1:Ws(t,a,r)},mv=0,Os=class{constructor(){this.id="".concat(mv++)}},R={androidPendingDiffs:t=>Bt.get(t),androidScheduleFlush:t=>{var e;(e=js.get(t))===null||e===void 0||e()},blur:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Qr.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=R.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&z.deselect(t)},findDocumentOrShadowRoot:t=>{var e=R.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:o}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=R.toSlateNode(t,e.target),s=R.findPath(t,a);if(Z.isElement(a)&&d.isVoid(t,a)){var i=o.getBoundingClientRect(),c=t.isInline(a)?r-i.left<i.left+i.width-r:n-i.top<i.top+i.height-n,l=d.point(t,s,{edge:c?"start":"end"}),f=c?d.before(t,l):d.after(t,l);if(f){var g=d.range(t,f);return g}}var h,{document:m}=R.getWindow(t);if(m.caretRangeFromPoint)h=m.caretRangeFromPoint(r,n);else{var p=m.caretPositionFromPoint(r,n);p&&(h=m.createRange(),h.setStart(p.offsetNode,p.offset),h.setEnd(p.offsetNode,p.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=R.toSlateRange(t,h,{exactMatch:!1,suppressThrow:!1});return u},findKey:(t,e)=>{var r=ys.get(e);return r||(r=new Os,ys.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var o=Rs.get(n);if(o==null){if(d.isEditor(n))return r;break}var a=Ms.get(n);if(a==null)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(tt.stringify(e)))},focus:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Qr.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=af.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=n,a=R.toDOMNode(e,e),s;try{s=Lt(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?s.closest("[data-slate-editor]")===a&&(!o||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>kr(e)&&R.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return d.hasPath(t,r.path)&&d.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>R.hasEditableTarget(t,e)||R.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>kr(e)&&R.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!en.get(t),isFocused:t=>!!Qr.get(t),isReadOnly:t=>!!Fs.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Fs.get(t))return!1;var r=R.hasTarget(t,e)&&R.toSlateNode(t,e);return Z.isElement(r)&&d.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=Ea.get(t),n=d.isEditor(e)?ga.get(t):r?.get(R.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(tt.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=d.node(t,e.path),n=R.toDOMNode(t,r),o;d.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(a)),i=0,c=0;c<s.length;c++){var l=s[c],f=l.childNodes[0];if(!(f==null||f.textContent==null)){var{length:g}=f.textContent,h=l.getAttribute("data-slate-length"),m=h==null?g:parseInt(h,10),p=i+m,u=s[c+1];if(e.offset===p&&u!==null&&u!==void 0&&u.hasAttribute("data-slate-mark-placeholder")){var D,E=u.childNodes[0];o=[E instanceof av?E:u,(D=u.textContent)!==null&&D!==void 0&&D.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var A=Math.min(g,Math.max(0,e.offset-i));o=[f,A];break}i=p}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(tt.stringify(e)));return o},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,o=k.isBackward(e),a=R.toDOMPoint(t,r),s=k.isCollapsed(e)?a:R.toDOMPoint(t,n),i=R.getWindow(t),c=i.document.createRange(),[l,f]=o?s:a,[g,h]=o?a:s,m=Lt(l)?l:l.parentElement,p=!!m.getAttribute("data-slate-zero-width"),u=Lt(g)?g:g.parentElement,D=!!u.getAttribute("data-slate-zero-width");return c.setStart(l,p?1:f),c.setEnd(g,D?1:h),c},toSlateNode:(t,e)=>{var r=Lt(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?io.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,[a,s]=n?e:uv(e),i=a.parentNode,c=null,l=0;if(i){var f,g,h=R.toDOMNode(t,t),m=i.closest('[data-slate-void="true"]'),p=m&&h.contains(m)?m:null,u=i.closest("[data-slate-leaf]"),D=null;if(u){if(c=u.closest('[data-slate-node="text"]'),c){var E=R.getWindow(t),A=E.document.createRange();A.setStart(c,0),A.setEnd(a,s);var x=A.cloneContents(),w=[...Array.prototype.slice.call(x.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(x.querySelectorAll("[contenteditable=false]"))];w.forEach(U=>{if(bt&&!n&&U.hasAttribute("data-slate-zero-width")&&U.textContent.length>0&&U.textContext!=="\uFEFF"){U.textContent.startsWith("\uFEFF")&&(U.textContent=U.textContent.slice(1));return}U.parentNode.removeChild(U)}),l=x.textContent.length,D=c}}else if(p){for(var y=p.querySelectorAll("[data-slate-leaf]"),N=0;N<y.length;N++){var b=y[N];if(R.hasDOMNode(t,b)){u=b;break}}u?(c=u.closest('[data-slate-node="text"]'),D=u,l=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(U=>{l-=U.textContent.length})):l=1}D&&l===D.textContent.length&&bt&&D.getAttribute("data-slate-zero-width")==="z"&&(f=D.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(i.hasAttribute("data-slate-zero-width")||va&&(g=D.textContent)!==null&&g!==void 0&&g.endsWith(`

`))&&l--}if(bt&&!c&&!n){var L=i.hasAttribute("data-slate-node")?i:i.closest("[data-slate-node]");if(L&&R.hasDOMNode(t,L,{editable:!0})){var F=R.toSlateNode(t,L),{path:W,offset:V}=d.start(t,R.findPath(t,F));return L.querySelector("[data-slate-leaf]")||(V=s),{path:W,offset:V}}}if(!c){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var M=R.toSlateNode(t,c),q=R.findPath(t,M);return{path:q,offset:l}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,a=Ns(e)?e.anchorNode:e.startContainer,s,i,c,l,f;if(a&&(Ns(e)?(s=e.anchorNode,i=e.anchorOffset,c=e.focusNode,l=e.focusOffset,of&&lv(s)?f=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:f=e.isCollapsed):(s=e.startContainer,i=e.startOffset,c=e.endContainer,l=e.endOffset,f=e.collapsed)),s==null||c==null||i==null||l==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in c&&c.getAttribute("contenteditable")==="false"){var g;c=s,l=((g=s.textContent)===null||g===void 0?void 0:g.length)||0}var h=R.toSlatePoint(t,[s,i],{exactMatch:n,suppressThrow:o});if(!h)return null;var m=f?h:R.toSlatePoint(t,[c,l],{exactMatch:n,suppressThrow:o});if(!m)return null;if(va&&!f&&s!==c){var p=d.isEnd(t,h,h.path),u=d.isStart(t,m,m.path);if(p){var D=d.after(t,h);h=D||h}if(u){var E=d.before(t,m);m=E||m}}var A={anchor:h,focus:m};return k.isExpanded(A)&&k.isForward(A)&&Lt(c)&&d.void(t,{at:A.focus,mode:"highest"})&&(A=d.unhangRange(t,A,{voids:!0})),A}};function pv(t,e){var{path:r,diff:n}=e;if(!d.hasPath(t,r))return!1;var o=$.get(t,r);if(!Q.isText(o))return!1;if(n.start!==o.text.length||n.text.length===0)return o.text.slice(n.start,n.start+n.text.length)===n.text;var a=_.next(r);if(!d.hasPath(t,a))return!1;var s=$.get(t,a);return Q.isText(s)&&s.text.startsWith(n.text)}function df(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),t)}function hv(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function gv(t,e,r){for(var n=Math.min(t.length,e.length,r),o=0;o<n;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return n}function mf(t,e){var{start:r,end:n,text:o}=e,a=t.slice(r,n),s=hv(a,o),i=Math.min(a.length-s,o.length-s),c=gv(a,o,i),l={start:r+s,end:n-c,text:o.slice(s,o.length-c)};return l.start===l.end&&l.text.length===0?null:l}function vv(t,e,r){var n=Math.min(e.start,r.start),o=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),a=df(t,e,r),s=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-o),i=a.slice(n,s),c=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return mf(t,{start:n,end:c,text:i})}function Cv(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Is(t,e){var{path:r,offset:n}=e;if(!d.hasPath(t,r))return null;var o=$.get(t,r);if(!Q.isText(o))return null;var a=d.above(t,{match:i=>Z.isElement(i)&&d.isBlock(t,i),at:r});if(!a)return null;for(;n>o.text.length;){var s=d.next(t,{at:r,match:Q.isText});if(!s||!_.isDescendant(s[1],a[1]))return null;n-=o.text.length,o=s[0],r=s[1]}return{path:r,offset:n}}function Gc(t,e){var r=Is(t,e.anchor);if(!r)return null;if(k.isCollapsed(e))return{anchor:r,focus:r};var n=Is(t,e.focus);return n?{anchor:r,focus:n}:null}function ks(t,e,r){var n=Bt.get(t),o=n?.find(f=>{var{path:g}=f;return _.equals(g,e.path)});if(!o||e.offset<=o.diff.start)return pe.transform(e,r,{affinity:"backward"});var{diff:a}=o;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},i=pe.transform(s,r,{affinity:"backward"});return i?{path:i.path,offset:i.offset+e.offset-a.start}:null}var c={path:e.path,offset:e.offset-a.text.length+a.end-a.start},l=pe.transform(c,r,{affinity:"backward"});return l?r.type==="split_node"&&_.equals(r.path,e.path)&&c.offset<r.position&&a.start<r.position?l:{path:l.path,offset:l.offset+a.text.length-a.end+a.start}:null}function Hc(t,e,r){var n=ks(t,e.anchor,r);if(!n)return null;if(k.isCollapsed(e))return{anchor:n,focus:n};var o=ks(t,e.focus,r);return o?{anchor:n,focus:o}:null}function Dv(t,e){var{path:r,diff:n,id:o}=t;switch(e.type){case"insert_text":return!_.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:o,path:r};case"remove_text":return!_.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:o,path:r};case"split_node":return!_.equals(e.path,r)||e.position>=n.end?{diff:n,id:o,path:_.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:o,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:o,path:_.transform(r,e,{affinity:"forward"})};case"merge_node":return _.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:o,path:_.transform(r,e)}:{diff:n,id:o,path:_.transform(r,e)}}var a=_.transform(r,e);return a?{diff:n,path:a,id:o}:null}function Yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function da(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ev=25,Av=200,_v=function(){},Bv=t=>t?.constructor.name==="DataTransfer";function xv(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,o=!1,a=null,s=null,i=null,c=0,l=!1,f=()=>{var M=Ir.get(e);if(Ir.delete(e),M){var{selection:q}=e,U=Gc(e,M);U&&(!q||!k.equals(U,q))&&z.select(e,U)}},g=()=>{var M=Or.get(e);if(Or.delete(e),!!M){if(M.at){var q=pe.isPoint(M.at)?Is(e,M.at):Gc(e,M.at);if(!q)return;var U=d.range(e,q);(!e.selection||!k.equals(e.selection,U))&&z.select(e,q)}M.run()}},h=()=>{if(s&&(clearTimeout(s),s=null),i&&(clearTimeout(i),i=null),!w()&&!x()){f();return}o||(o=!0,setTimeout(()=>o=!1)),x()&&(o="action");var M=e.selection&&d.rangeRef(e,e.selection,{affinity:"forward"});vr.set(e,e.marks),_v("flush",Or.get(e),Bt.get(e));for(var q=w(),U;U=(H=Bt.get(e))===null||H===void 0?void 0:H[0];){var H,ne,oe=qt.get(e);oe!==void 0&&(qt.delete(e),e.marks=oe),oe&&l===!1&&(l=null);var de=Cv(U);(!e.selection||!k.equals(e.selection,de))&&z.select(e,de),U.diff.text?d.insertText(e,U.diff.text):d.deleteFragment(e),Bt.set(e,(ne=Bt.get(e))===null||ne===void 0?void 0:ne.filter(we=>{var{id:Ce}=we;return Ce!==U.id})),pv(e,U)||(q=!1,Or.delete(e),vr.delete(e),o="action",Ir.delete(e),r.cancel(),n.cancel(),M?.unref())}var X=M?.unref();if(X&&!Ir.get(e)&&(!e.selection||!k.equals(X,e.selection))&&z.select(e,X),x()){g();return}q&&r(),r.flush(),n.flush(),f();var ae=vr.get(e);vr.delete(e),ae!==void 0&&(e.marks=ae,e.onChange())},m=M=>{a&&clearTimeout(a),a=setTimeout(()=>{en.set(e,!1),h()},Ev)},p=M=>{en.set(e,!0),a&&(clearTimeout(a),a=null)},u=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,U=Ts.get(e);if(!!U){if(w()||q){U.style.display="none";return}U.style.removeProperty("display")}},D=(M,q)=>{var U,H=(U=Bt.get(e))!==null&&U!==void 0?U:[];Bt.set(e,H);var ne=$.leaf(e,M),oe=H.findIndex(ae=>_.equals(ae.path,M));if(oe<0){var de=mf(ne.text,q);de&&H.push({path:M,diff:q,id:c++}),u();return}var X=vv(ne.text,H[oe].diff,q);if(!X){H.splice(oe,1),u();return}H[oe]=da(da({},H[oe]),{},{diff:X})},E=function(q){var{at:U}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l=!1,Ir.delete(e),r.cancel(),n.cancel(),x()&&h(),Or.set(e,{at:U,run:q}),i=setTimeout(h)},A=M=>{var q;s&&(clearTimeout(s),s=null);var{inputType:U}=M,H=null,ne=M.dataTransfer||M.data||void 0;l!==!1&&U!=="insertText"&&U!=="insertCompositionText"&&(l=!1);var[oe]=M.getTargetRanges();oe&&(H=R.toSlateRange(e,oe,{exactMatch:!1,suppressThrow:!0}));var de=R.getWindow(e),X=de.getSelection();if(!H&&X&&(oe=X,H=R.toSlateRange(e,X,{exactMatch:!1,suppressThrow:!0})),H=(q=H)!==null&&q!==void 0?q:e.selection,!!H){var ae=!0;if(U.startsWith("delete")){if(k.isExpanded(H)){var[we,Ce]=k.edges(H),Ze=$.leaf(e,we.path);if(Ze.text.length===we.offset&&Ce.offset===0){var B=d.next(e,{at:we.path,match:Q.isText});B&&_.equals(B[1],Ce.path)&&(H={anchor:Ce,focus:Ce})}}var Y=U.endsWith("Backward")?"backward":"forward",[j,K]=k.edges(H),[ce,se]=d.leaf(e,j.path),ge={text:"",start:j.offset,end:K.offset},ke=Bt.get(e),Ie=ke?.find(Ut=>_.equals(Ut.path,se)),Pe=Ie?[Ie.diff,ge]:[ge],be=df(ce.text,...Pe);if(be.length===0&&(ae=!1),k.isExpanded(H)){if(ae&&_.equals(H.anchor.path,H.focus.path)){var at={path:H.anchor.path,offset:j.offset},mt=d.range(e,at,at);return b(mt),D(H.anchor.path,{text:"",end:K.offset,start:j.offset})}return E(()=>d.deleteFragment(e,{direction:Y}),{at:H})}}switch(U){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return E(()=>d.deleteFragment(e),{at:H});case"deleteContent":case"deleteContentForward":{var{anchor:Xe}=H;if(ae&&k.isCollapsed(H)){var Ot=$.leaf(e,Xe.path);if(Xe.offset<Ot.text.length)return D(Xe.path,{text:"",start:Xe.offset,end:Xe.offset+1})}return E(()=>d.deleteForward(e),{at:H})}case"deleteContentBackward":{var zt,{anchor:pt}=H,It=Ns(oe)?oe.isCollapsed:!!((zt=oe)!==null&&zt!==void 0&&zt.collapsed);return ae&&It&&k.isCollapsed(H)&&pt.offset>0?D(pt.path,{text:"",start:pt.offset-1,end:pt.offset}):E(()=>d.deleteBackward(e),{at:H})}case"deleteEntireSoftLine":return E(()=>{d.deleteBackward(e,{unit:"line"}),d.deleteForward(e,{unit:"line"})},{at:H});case"deleteHardLineBackward":return E(()=>d.deleteBackward(e,{unit:"block"}),{at:H});case"deleteSoftLineBackward":return E(()=>d.deleteBackward(e,{unit:"line"}),{at:H});case"deleteHardLineForward":return E(()=>d.deleteForward(e,{unit:"block"}),{at:H});case"deleteSoftLineForward":return E(()=>d.deleteForward(e,{unit:"line"}),{at:H});case"deleteWordBackward":return E(()=>d.deleteBackward(e,{unit:"word"}),{at:H});case"deleteWordForward":return E(()=>d.deleteForward(e,{unit:"word"}),{at:H});case"insertLineBreak":return E(()=>d.insertSoftBreak(e),{at:H});case"insertParagraph":return E(()=>d.insertBreak(e),{at:H});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Bv(ne))return E(()=>R.insertData(e,ne),{at:H});var _e=ne??"";if(qt.get(e)&&(_e=_e.replace("\uFEFF","")),U==="insertText"&&/.*\n.*\n$/.test(_e)&&(_e=_e.slice(0,-1)),_e.includes(`
`))return E(()=>{var Ut=_e.split(`
`);Ut.forEach((Ur,Ao)=>{Ur&&d.insertText(e,Ur),Ao!==Ut.length-1&&d.insertSoftBreak(e)})},{at:H});if(_.equals(H.anchor.path,H.focus.path)){var[cr,dn]=k.edges(H),ot={start:cr.offset,end:dn.offset,text:_e};if(_e&&l&&U==="insertCompositionText"){var Wt=l.start+l.text.search(/\S|$/),Eo=ot.start+ot.text.search(/\S|$/);Eo===Wt+1&&ot.end===l.start+l.text.length?(ot.start-=1,l=null,W()):l=!1}else U==="insertText"?l===null?l=ot:l&&k.isCollapsed(H)&&l.end+l.text.length===cr.offset?l=da(da({},l),{},{text:l.text+_e}):l=!1:l=!1;if(ae){D(cr.path,ot);return}}return E(()=>d.insertText(e,_e),{at:H})}}}},x=()=>!!Or.get(e),w=()=>{var M;return!!((M=Bt.get(e))!==null&&M!==void 0&&M.length)},y=()=>x()||w(),N=()=>o,b=M=>{Ir.set(e,M),s&&(clearTimeout(s),s=null);var{selection:q}=e;if(!!M){var U=!q||!_.equals(q.anchor.path,M.anchor.path),H=!q||!_.equals(q.anchor.path.slice(0,-1),M.anchor.path.slice(0,-1));(U&&l||H)&&(l=!1),(U||w())&&(s=setTimeout(h,Av))}},L=()=>{(x()||!w())&&h()},F=M=>{w()||(u(!0),setTimeout(u))},W=()=>{x()||(i=setTimeout(h))},V=M=>{if(!(w()||x())&&M.some(U=>Ws(e,U,M))){var q;(q=sf.get(e))===null||q===void 0||q()}};return{flush:h,scheduleFlush:W,hasPendingDiffs:w,hasPendingAction:x,hasPendingChanges:y,isFlushing:N,handleUserSelect:b,handleCompositionEnd:m,handleCompositionStart:p,handleDOMBeforeInput:A,handleKeyDown:F,handleDomMutations:V,handleInput:L}}function wv(){var t=(0,P.useRef)(!1);return(0,P.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var uo=ha?P.useLayoutEffect:P.useEffect;function Sv(t,e,r){var[n]=(0,P.useState)(()=>new MutationObserver(e));uo(()=>{n.takeRecords()}),(0,P.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var Tv=["node"];function qc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function yv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fv={subtree:!0,childList:!0,characterData:!0},bv=bt?t=>{var{node:e}=t,r=yn(t,Tv);if(!bt)return null;var n=Pr(),o=wv(),[a]=(0,P.useState)(()=>xv(yv({editor:n},r)));return Sv(e,a.handleDomMutations,Fv),js.set(n,a.scheduleFlush),o&&a.flush(),a}:()=>null,Nv=["anchor","focus"],Ov=["anchor","focus"],Iv=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),pf=(t,e)=>{var r=yn(t,Nv),n=yn(e,Ov);return t[Fn]===e[Fn]&&Iv(r,n)},kv=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!k.equals(n,o)||!pf(n,o))return!1}return!0},Pv=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!pf(n,o))return!1}return!0},Lv=t=>{var{isLast:e,leaf:r,parent:n,text:o}=t,a=Pr(),s=R.findPath(a,o),i=_.parent(s),c=r[uf]===!0;return a.isVoid(n)?P.default.createElement(Ss,{length:$.string(n).length}):r.text===""&&n.children[n.children.length-1]===o&&!a.isInline(n)&&d.string(a,i)===""?P.default.createElement(Ss,{isLineBreak:!0,isMarkPlaceholder:c}):r.text===""?P.default.createElement(Ss,{isMarkPlaceholder:c}):e&&r.text.slice(-1)===`
`?P.default.createElement($c,{isTrailing:!0,text:r.text}):P.default.createElement($c,{text:r.text})},$c=t=>{var{text:e,isTrailing:r=!1}=t,n=(0,P.useRef)(null),o=()=>"".concat(e??"").concat(r?`
`:""),[a]=(0,P.useState)(o);return uo(()=>{var s=o();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),P.default.createElement(Mv,{ref:n},a)},Mv=(0,P.memo)((0,P.forwardRef)((t,e)=>P.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),Ss=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,o={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(o["data-slate-mark-placeholder"]=!0),P.default.createElement("span",Object.assign({},o),!bt||!r?"\uFEFF":null,r?P.default.createElement("br",null):null)};function Rv(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Vc(t){t.current&&(clearTimeout(t.current),t.current=null)}var jv=t=>{var{leaf:e,isLast:r,text:n,parent:o,renderPlaceholder:a,renderLeaf:s=A=>P.default.createElement(Wv,Object.assign({},A))}=t,i=Pr(),c=(0,P.useRef)(null),l=(0,P.useRef)(null),[f,g]=(0,P.useState)(!1),h=(0,P.useRef)(null),m=(0,P.useCallback)(A=>{if(Rv(c,A==null),A==null){var x;Ts.delete(i),(x=e.onPlaceholderResize)===null||x===void 0||x.call(e,null)}else{if(Ts.set(i,A),!c.current){var w=window.ResizeObserver||Bs;c.current=new w(()=>{var y;(y=e.onPlaceholderResize)===null||y===void 0||y.call(e,A)})}c.current.observe(A),l.current=A}},[l,e,i]),p=P.default.createElement(Lv,{isLast:r,leaf:e,parent:o,text:n}),u=e[Fn];if((0,P.useEffect)(()=>(u?h.current||(h.current=setTimeout(()=>{g(!0),h.current=null},300)):(Vc(h),g(!1)),()=>Vc(h)),[u,g]),u&&f){var D={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:ao?"inherit":void 0},contentEditable:!1,ref:m}};p=P.default.createElement(P.default.Fragment,null,a(D),p)}var E={"data-slate-leaf":!0};return s({attributes:E,children:p,leaf:e,text:n})},zv=P.default.memo(jv,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Q.equals(e.leaf,t.leaf)&&e.leaf[Fn]===t.leaf[Fn]),Wv=t=>{var{attributes:e,children:r}=t;return P.default.createElement("span",Object.assign({},e),r)},Uv=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:a,text:s}=t,i=Pr(),c=(0,P.useRef)(null),l=Q.decorations(s,e),f=R.findKey(i,s),g=[],h=0;h<l.length;h++){var m=l[h];g.push(P.default.createElement(zv,{isLast:r&&h===l.length-1,key:"".concat(f.id,"-").concat(h),renderPlaceholder:o,leaf:m,text:s,parent:n,renderLeaf:a}))}var p=(0,P.useCallback)(u=>{var D=Ea.get(i);u?(D?.set(f,u),tn.set(s,u),io.set(u,s)):(D?.delete(f),tn.delete(s),c.current&&io.delete(c.current)),c.current=u},[c,i,f,s]);return P.default.createElement("span",{"data-slate-node":"text",ref:p},g)},hf=P.default.memo(Uv,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Pv(e.decorations,t.decorations)),Gv=t=>{var{decorations:e,element:r,renderElement:n=A=>P.default.createElement(Yv,Object.assign({},A)),renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=Pr(),c=Vv(),l=i.isInline(r),f=R.findKey(i,r),g=(0,P.useCallback)(A=>{var x=Ea.get(i);A?(x?.set(f,A),tn.set(r,A),io.set(A,r)):(x?.delete(f),tn.delete(r))},[i,f,r]),h=vf({decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}),m={"data-slate-node":"element",ref:g};if(l&&(m["data-slate-inline"]=!0),!l&&d.hasInlines(i,r)){var p=$.string(r),u=(0,Ps.default)(p);u==="rtl"&&(m.dir=u)}if(d.isVoid(i,r)){m["data-slate-void"]=!0,!c&&l&&(m.contentEditable=!1);var D=l?"span":"div",[[E]]=$.texts(r);h=P.default.createElement(D,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},P.default.createElement(hf,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:E})),Ms.set(E,0),Rs.set(E,r)}return n({attributes:m,children:h,element:r})},Hv=P.default.memo(Gv,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&kv(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&k.equals(t.selection,e.selection))),Yv=t=>{var{attributes:e,children:r,element:n}=t,o=Pr(),a=o.isInline(n)?"span":"div";return P.default.createElement(a,Object.assign({},e,{style:{position:"relative"}}),r)},gf=(0,P.createContext)(()=>[]),qv=()=>(0,P.useContext)(gf),$v=(0,P.createContext)(!1);var vf=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=qv(),c=Pr(),l=R.findPath(c,r),f=[],g=Z.isElement(r)&&!c.isInline(r)&&d.hasInlines(c,r),h=0;h<r.children.length;h++){var m=l.concat(h),p=r.children[h],u=R.findKey(c,p),D=d.range(c,m),E=s&&k.intersection(D,s),A=i([p,m]);for(var x of e){var w=k.intersection(x,D);w&&A.push(w)}Z.isElement(p)?f.push(P.default.createElement($v.Provider,{key:"provider-".concat(u.id),value:!!E},P.default.createElement(Hv,{decorations:A,element:p,key:u.id,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:E}))):f.push(P.default.createElement(hf,{decorations:A,key:u.id,isLast:g&&h===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:a,text:p})),Ms.set(p,h),Rs.set(p,r)}return f},Cf=(0,P.createContext)(!1),Vv=()=>(0,P.useContext)(Cf),Df=(0,P.createContext)(null),Kv=()=>{var t=(0,P.useContext)(Df);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function Zv(){var t=Pr(),e=(0,P.useRef)(!1),r=(0,P.useRef)(0),n=(0,P.useCallback)(()=>{if(!e.current){e.current=!0;var o=R.getWindow(t);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,P.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var Xv=3,Jv={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Qv={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},eC={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Me=t=>{var e=Jv[t],r=Qv[t],n=eC[t],o=e&&(0,pa.isKeyHotkey)(e),a=r&&(0,pa.isKeyHotkey)(r),s=n&&(0,pa.isKeyHotkey)(n);return i=>!!(o&&o(i)||Uc&&a&&a(i)||!Uc&&s&&s(i))},ze={isBold:Me("bold"),isCompose:Me("compose"),isMoveBackward:Me("moveBackward"),isMoveForward:Me("moveForward"),isDeleteBackward:Me("deleteBackward"),isDeleteForward:Me("deleteForward"),isDeleteLineBackward:Me("deleteLineBackward"),isDeleteLineForward:Me("deleteLineForward"),isDeleteWordBackward:Me("deleteWordBackward"),isDeleteWordForward:Me("deleteWordForward"),isExtendBackward:Me("extendBackward"),isExtendForward:Me("extendForward"),isExtendLineBackward:Me("extendLineBackward"),isExtendLineForward:Me("extendLineForward"),isItalic:Me("italic"),isMoveLineBackward:Me("moveLineBackward"),isMoveLineForward:Me("moveLineForward"),isMoveWordBackward:Me("moveWordBackward"),isMoveWordForward:Me("moveWordForward"),isRedo:Me("redo"),isSoftBreak:Me("insertSoftBreak"),isSplitBlock:Me("splitBlock"),isTransposeCharacter:Me("transposeCharacter"),isUndo:Me("undo")},tC=(t,e)=>{var r=[],n=()=>{r=[]},o=s=>{if(!!e.current){var i=s.filter(c=>Ws(t,c,s));r.push(...i)}};function a(){r.length>0&&(r.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(i=>{s.target.insertBefore(i,s.nextSibling)}),s.addedNodes.forEach(i=>{s.target.removeChild(i)}))}),n())}return{registerMutations:o,restoreDOM:a,clear:n}},rC={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},Ca=class extends P.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,rC)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=tC(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,o=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};Ca.contextType=Ls;var nC=bt?Ca:t=>{var{children:e}=t;return P.default.createElement(P.default.Fragment,null,e)},oC=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],aC=["text"];function Kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sC=t=>P.default.createElement(P.default.Fragment,null,vf(t)),Ef=t=>{var e=(0,P.useCallback)(B=>P.default.createElement(iC,Object.assign({},B)),[]),{autoFocus:r,decorate:n=uC,onDOMBeforeInput:o,placeholder:a,readOnly:s=!1,renderElement:i,renderLeaf:c,renderPlaceholder:l=e,scrollSelectionIntoView:f=lC,style:g={},as:h="div",disableDefaultStyles:m=!1}=t,p=yn(t,oC),u=Kv(),[D,E]=(0,P.useState)(!1),A=(0,P.useRef)(null),x=(0,P.useRef)([]),[w,y]=(0,P.useState)(),{onUserInput:N,receivedUserInput:b}=Zv(),[,L]=(0,P.useReducer)(B=>B+1,0);sf.set(u,L),Fs.set(u,s);var F=(0,P.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,P.useEffect)(()=>{A.current&&r&&A.current.focus()},[r]);var W=(0,P.useRef)(),V=(0,P.useMemo)(()=>(0,rf.default)(()=>{var B=W.current;if((bt||!R.isComposing(u))&&(!F.isUpdatingSelection||B!=null&&B.isFlushing())&&!F.isDraggingInternally){var Y=R.findDocumentOrShadowRoot(u),{activeElement:j}=Y,K=R.toDOMNode(u,u),ce=Y.getSelection();if(j===K?(F.latestElement=j,Qr.set(u,!0)):Qr.delete(u),!ce)return z.deselect(u);var{anchorNode:se,focusNode:ge}=ce,ke=R.hasEditableTarget(u,se)||R.isTargetInsideNonReadonlyVoid(u,se),Ie=R.hasEditableTarget(u,ge)||R.isTargetInsideNonReadonlyVoid(u,ge);if(ke&&Ie){var Pe=R.toSlateRange(u,ce,{exactMatch:!1,suppressThrow:!0});Pe&&(!R.isComposing(u)&&!(B!=null&&B.hasPendingChanges())&&!(B!=null&&B.isFlushing())?z.select(u,Pe):B?.handleUserSelect(Pe))}s&&(!ke||!Ie)&&z.deselect(u)}},100),[u,s,F]),M=(0,P.useMemo)(()=>(0,tf.default)(V,0),[V]);W.current=bv({node:A,onDOMSelectionChange:V,scheduleOnDOMSelectionChange:M}),uo(()=>{var B,Y,j;A.current&&(j=zs(A.current))?(af.set(u,j),ga.set(u,A.current),tn.set(u,A.current),io.set(A.current,u)):tn.delete(u);var{selection:K}=u,ce=R.findDocumentOrShadowRoot(u),se=ce.getSelection();if(!(!se||!R.isFocused(u)||(B=W.current)!==null&&B!==void 0&&B.hasPendingAction())){var ge=at=>{var mt=se.type!=="None";if(!(!K&&!mt)){var Xe=ga.get(u),Ot=!1;if(Xe.contains(se.anchorNode)&&Xe.contains(se.focusNode)&&(Ot=!0),mt&&Ot&&K&&!at){var zt=R.toSlateRange(u,se,{exactMatch:!0,suppressThrow:!0});if(zt&&k.equals(zt,K)){var pt;if(!F.hasMarkPlaceholder)return;var{anchorNode:It}=se;if(It!=null&&(pt=It.parentElement)!==null&&pt!==void 0&&pt.hasAttribute("data-slate-mark-placeholder"))return}}if(K&&!R.hasRange(u,K)){u.selection=R.toSlateRange(u,se,{exactMatch:!1,suppressThrow:!0});return}F.isUpdatingSelection=!0;var _e=K&&R.toDOMRange(u,K);return _e?(k.isBackward(K)?se.setBaseAndExtent(_e.endContainer,_e.endOffset,_e.startContainer,_e.startOffset):se.setBaseAndExtent(_e.startContainer,_e.startOffset,_e.endContainer,_e.endOffset),f(u,_e)):se.removeAllRanges(),_e}},ke=ge(),Ie=((Y=W.current)===null||Y===void 0?void 0:Y.isFlushing())==="action";if(!bt||!Ie){setTimeout(()=>{if(ke&&va){var at=R.toDOMNode(u,u);at.focus()}F.isUpdatingSelection=!1});return}var Pe=null,be=requestAnimationFrame(()=>{if(Ie){var at=mt=>{try{var Xe=R.toDOMNode(u,u);Xe.focus(),ge(mt)}catch{}};at(),Pe=setTimeout(()=>{at(!0),F.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(be),Pe&&clearTimeout(Pe)}}});var q=(0,P.useCallback)(B=>{if(N(),!s&&R.hasEditableTarget(u,B.target)&&!cC(B,o)){var Y;if(W.current)return W.current.handleDOMBeforeInput(B);M.flush(),V.flush();var{selection:j}=u,{inputType:K}=B,ce=B.dataTransfer||B.data||void 0,se=K==="insertCompositionText"||K==="deleteCompositionText";if(se&&R.isComposing(u))return;var ge=!1;if(K==="insertText"&&j&&k.isCollapsed(j)&&B.data&&B.data.length===1&&/[a-z ]/i.test(B.data)&&j.anchor.offset!==0){var ke,Ie;ge=!0,u.marks&&(ge=!1);var{anchor:Pe}=j,[be,at]=R.toDOMPoint(u,Pe),mt=(ke=be.parentElement)===null||ke===void 0?void 0:ke.closest("a"),Xe=R.getWindow(u);if(ge&&mt&&R.hasDOMNode(u,mt)){var Ot,zt=Xe?.document.createTreeWalker(mt,NodeFilter.SHOW_TEXT).lastChild();zt===be&&((Ot=zt.textContent)===null||Ot===void 0?void 0:Ot.length)===at&&(ge=!1)}if(ge&&be.parentElement&&(Xe==null||(Ie=Xe.getComputedStyle(be.parentElement))===null||Ie===void 0?void 0:Ie.whiteSpace)==="pre"){var pt=d.above(u,{at:Pe.path,match:Wt=>Z.isElement(Wt)&&d.isBlock(u,Wt)});pt&&$.string(pt[0]).includes("	")&&(ge=!1)}}if(!K.startsWith("delete")||K.startsWith("deleteBy")){var[It]=B.getTargetRanges();if(It){var _e=R.toSlateRange(u,It,{exactMatch:!1,suppressThrow:!1});if(!j||!k.equals(j,_e)){ge=!1;var cr=!se&&u.selection&&d.rangeRef(u,u.selection);z.select(u,_e),cr&&so.set(u,cr)}}}if(se)return;if(ge||B.preventDefault(),j&&k.isExpanded(j)&&K.startsWith("delete")){var dn=K.endsWith("Backward")?"backward":"forward";d.deleteFragment(u,{direction:dn});return}switch(K){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{d.deleteFragment(u);break}case"deleteContent":case"deleteContentForward":{d.deleteForward(u);break}case"deleteContentBackward":{d.deleteBackward(u);break}case"deleteEntireSoftLine":{d.deleteBackward(u,{unit:"line"}),d.deleteForward(u,{unit:"line"});break}case"deleteHardLineBackward":{d.deleteBackward(u,{unit:"block"});break}case"deleteSoftLineBackward":{d.deleteBackward(u,{unit:"line"});break}case"deleteHardLineForward":{d.deleteForward(u,{unit:"block"});break}case"deleteSoftLineForward":{d.deleteForward(u,{unit:"line"});break}case"deleteWordBackward":{d.deleteBackward(u,{unit:"word"});break}case"deleteWordForward":{d.deleteForward(u,{unit:"word"});break}case"insertLineBreak":d.insertSoftBreak(u);break;case"insertParagraph":{d.insertBreak(u);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{K==="insertFromComposition"&&R.isComposing(u)&&(E(!1),en.set(u,!1)),ce?.constructor.name==="DataTransfer"?R.insertData(u,ce):typeof ce=="string"&&(ge?x.current.push(()=>d.insertText(u,ce)):d.insertText(u,ce));break}}var ot=(Y=so.get(u))===null||Y===void 0?void 0:Y.unref();so.delete(u),ot&&(!u.selection||!k.equals(u.selection,ot))&&z.select(u,ot)}},[u,V,N,o,s,M]),U=(0,P.useCallback)(B=>{B==null?(V.cancel(),M.cancel(),ga.delete(u),tn.delete(u),A.current&&Nr&&A.current.removeEventListener("beforeinput",q)):Nr&&B.addEventListener("beforeinput",q),A.current=B},[V,M,u,q]);uo(()=>{var B=R.getWindow(u);return B.document.addEventListener("selectionchange",M),()=>{B.document.removeEventListener("selectionchange",M)}},[M]);var H=n([u,[]]),ne=a&&u.children.length===1&&Array.from($.texts(u)).length===1&&$.string(u)===""&&!D,oe=(0,P.useCallback)(B=>{if(B&&ne){var Y;y((Y=B.getBoundingClientRect())===null||Y===void 0?void 0:Y.height)}else y(void 0)},[ne]);if(ne){var de=d.start(u,[]);H.push({[Fn]:!0,placeholder:a,onPlaceholderResize:oe,anchor:de,focus:de})}var{marks:X}=u;if(F.hasMarkPlaceholder=!1,u.selection&&k.isCollapsed(u.selection)&&X){var{anchor:ae}=u.selection,we=$.leaf(u,ae.path),Ce=yn(we,aC);if(!Q.equals(we,X,{loose:!0})){F.hasMarkPlaceholder=!0;var Ze=Object.fromEntries(Object.keys(Ce).map(B=>[B,null]));H.push(Tn(Tn(Tn({[uf]:!0},Ze),X),{},{anchor:ae,focus:ae}))}}return(0,P.useEffect)(()=>{setTimeout(()=>{var{selection:B}=u;if(B){var{anchor:Y}=B,j=$.leaf(u,Y.path);if(X&&!Q.equals(j,X,{loose:!0})){qt.set(u,X);return}}qt.delete(u)})}),P.default.createElement(Cf.Provider,{value:s},P.default.createElement(gf.Provider,{value:n},P.default.createElement(nC,{node:A,receivedUserInput:b},P.default.createElement(h,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},p,{spellCheck:Nr||!ha?p.spellCheck:!1,autoCorrect:Nr||!ha?p.autoCorrect:"false",autoCapitalize:Nr||!ha?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:U,style:Tn(Tn({},m?{}:Tn({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},w?{minHeight:w}:{})),g),onBeforeInput:(0,P.useCallback)(B=>{if(!Nr&&!s&&!vt(B,p.onBeforeInput)&&R.hasSelectableTarget(u,B.target)&&(B.preventDefault(),!R.isComposing(u))){var Y=B.data;d.insertText(u,Y)}},[p.onBeforeInput,u,s]),onInput:(0,P.useCallback)(B=>{if(!vt(B,p.onInput)){if(W.current){W.current.handleInput();return}for(var Y of x.current)Y();x.current=[]}},[p.onInput]),onBlur:(0,P.useCallback)(B=>{if(!(s||F.isUpdatingSelection||!R.hasSelectableTarget(u,B.target)||vt(B,p.onBlur))){var Y=R.findDocumentOrShadowRoot(u);if(F.latestElement!==Y.activeElement){var{relatedTarget:j}=B,K=R.toDOMNode(u,u);if(j!==K&&!(Lt(j)&&j.hasAttribute("data-slate-spacer"))){if(j!=null&&kr(j)&&R.hasDOMNode(u,j)){var ce=R.toSlateNode(u,j);if(Z.isElement(ce)&&!u.isVoid(ce))return}if(ao){var se=Y.getSelection();se?.removeAllRanges()}Qr.delete(u)}}}},[s,F.isUpdatingSelection,F.latestElement,u,p.onBlur]),onClick:(0,P.useCallback)(B=>{if(R.hasTarget(u,B.target)&&!vt(B,p.onClick)&&kr(B.target)){var Y=R.toSlateNode(u,B.target),j=R.findPath(u,Y);if(!d.hasPath(u,j)||$.get(u,j)!==Y)return;if(B.detail===Xv&&j.length>=1){var K=j;if(!(Z.isElement(Y)&&d.isBlock(u,Y))){var ce,se=d.above(u,{match:mt=>Z.isElement(mt)&&d.isBlock(u,mt),at:j});K=(ce=se?.[1])!==null&&ce!==void 0?ce:j.slice(0,1)}var ge=d.range(u,K);z.select(u,ge);return}if(s)return;var ke=d.start(u,j),Ie=d.end(u,j),Pe=d.void(u,{at:ke}),be=d.void(u,{at:Ie});if(Pe&&be&&_.equals(Pe[1],be[1])){var at=d.range(u,ke);z.select(u,at)}}},[u,p.onClick,s]),onCompositionEnd:(0,P.useCallback)(B=>{if(R.hasSelectableTarget(u,B.target)){var Y;if(R.isComposing(u)&&(E(!1),en.set(u,!1)),(Y=W.current)===null||Y===void 0||Y.handleCompositionEnd(B),vt(B,p.onCompositionEnd)||bt)return;if(!ao&&!rv&&!Jg&&!ov&&!nv&&B.data){var j=qt.get(u);qt.delete(u),j!==void 0&&(vr.set(u,u.marks),u.marks=j),d.insertText(u,B.data);var K=vr.get(u);vr.delete(u),K!==void 0&&(u.marks=K)}}},[p.onCompositionEnd,u]),onCompositionUpdate:(0,P.useCallback)(B=>{R.hasSelectableTarget(u,B.target)&&!vt(B,p.onCompositionUpdate)&&(R.isComposing(u)||(E(!0),en.set(u,!0)))},[p.onCompositionUpdate,u]),onCompositionStart:(0,P.useCallback)(B=>{if(R.hasSelectableTarget(u,B.target)){var Y;if((Y=W.current)===null||Y===void 0||Y.handleCompositionStart(B),vt(B,p.onCompositionStart)||bt)return;E(!0);var{selection:j}=u;if(j){if(k.isExpanded(j)){d.deleteFragment(u);return}var K=d.above(u,{match:ge=>Z.isElement(ge)&&d.isInline(u,ge),mode:"highest"});if(K){var[,ce]=K;if(d.isEnd(u,j.anchor,ce)){var se=d.after(u,ce);z.setSelection(u,{anchor:se,focus:se})}}}}},[p.onCompositionStart,u]),onCopy:(0,P.useCallback)(B=>{R.hasSelectableTarget(u,B.target)&&!vt(B,p.onCopy)&&!Zc(B)&&(B.preventDefault(),R.setFragmentData(u,B.clipboardData,"copy"))},[p.onCopy,u]),onCut:(0,P.useCallback)(B=>{if(!s&&R.hasSelectableTarget(u,B.target)&&!vt(B,p.onCut)&&!Zc(B)){B.preventDefault(),R.setFragmentData(u,B.clipboardData,"cut");var{selection:Y}=u;if(Y)if(k.isExpanded(Y))d.deleteFragment(u);else{var j=$.parent(u,Y.anchor.path);d.isVoid(u,j)&&z.delete(u)}}},[s,u,p.onCut]),onDragOver:(0,P.useCallback)(B=>{if(R.hasTarget(u,B.target)&&!vt(B,p.onDragOver)){var Y=R.toSlateNode(u,B.target);Z.isElement(Y)&&d.isVoid(u,Y)&&B.preventDefault()}},[p.onDragOver,u]),onDragStart:(0,P.useCallback)(B=>{if(!s&&R.hasTarget(u,B.target)&&!vt(B,p.onDragStart)){var Y=R.toSlateNode(u,B.target),j=R.findPath(u,Y),K=Z.isElement(Y)&&d.isVoid(u,Y)||d.void(u,{at:j,voids:!0});if(K){var ce=d.range(u,j);z.select(u,ce)}F.isDraggingInternally=!0,R.setFragmentData(u,B.dataTransfer,"drag")}},[s,u,p.onDragStart,F]),onDrop:(0,P.useCallback)(B=>{if(!s&&R.hasTarget(u,B.target)&&!vt(B,p.onDrop)){B.preventDefault();var Y=u.selection,j=R.findEventRange(u,B),K=B.dataTransfer;z.select(u,j),F.isDraggingInternally&&Y&&!k.equals(Y,j)&&!d.void(u,{at:j,voids:!0})&&z.delete(u,{at:Y}),R.insertData(u,K),R.isFocused(u)||R.focus(u)}F.isDraggingInternally=!1},[s,u,p.onDrop,F]),onDragEnd:(0,P.useCallback)(B=>{!s&&F.isDraggingInternally&&p.onDragEnd&&R.hasTarget(u,B.target)&&p.onDragEnd(B),F.isDraggingInternally=!1},[s,F,p,u]),onFocus:(0,P.useCallback)(B=>{if(!s&&!F.isUpdatingSelection&&R.hasEditableTarget(u,B.target)&&!vt(B,p.onFocus)){var Y=R.toDOMNode(u,u),j=R.findDocumentOrShadowRoot(u);if(F.latestElement=j.activeElement,va&&B.target!==Y){Y.focus();return}Qr.set(u,!0)}},[s,F,u,p.onFocus]),onKeyDown:(0,P.useCallback)(B=>{if(!s&&R.hasEditableTarget(u,B.target)){var Y;(Y=W.current)===null||Y===void 0||Y.handleKeyDown(B);var{nativeEvent:j}=B;if(R.isComposing(u)&&j.isComposing===!1&&(en.set(u,!1),E(!1)),vt(B,p.onKeyDown)||R.isComposing(u))return;var{selection:K}=u,ce=u.children[K!==null?K.focus.path[0]:0],se=(0,Ps.default)($.string(ce))==="rtl";if(ze.isRedo(j)){B.preventDefault();var ge=u;typeof ge.redo=="function"&&ge.redo();return}if(ze.isUndo(j)){B.preventDefault();var ke=u;typeof ke.undo=="function"&&ke.undo();return}if(ze.isMoveLineBackward(j)){B.preventDefault(),z.move(u,{unit:"line",reverse:!0});return}if(ze.isMoveLineForward(j)){B.preventDefault(),z.move(u,{unit:"line"});return}if(ze.isExtendLineBackward(j)){B.preventDefault(),z.move(u,{unit:"line",edge:"focus",reverse:!0});return}if(ze.isExtendLineForward(j)){B.preventDefault(),z.move(u,{unit:"line",edge:"focus"});return}if(ze.isMoveBackward(j)){B.preventDefault(),K&&k.isCollapsed(K)?z.move(u,{reverse:!se}):z.collapse(u,{edge:"start"});return}if(ze.isMoveForward(j)){B.preventDefault(),K&&k.isCollapsed(K)?z.move(u,{reverse:se}):z.collapse(u,{edge:"end"});return}if(ze.isMoveWordBackward(j)){B.preventDefault(),K&&k.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:!se});return}if(ze.isMoveWordForward(j)){B.preventDefault(),K&&k.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:se});return}if(Nr){if((of||ao)&&K&&(ze.isDeleteBackward(j)||ze.isDeleteForward(j))&&k.isCollapsed(K)){var Ie=$.parent(u,K.anchor.path);if(Z.isElement(Ie)&&d.isVoid(u,Ie)&&(d.isInline(u,Ie)||d.isBlock(u,Ie))){B.preventDefault(),d.deleteBackward(u,{unit:"block"});return}}}else{if(ze.isBold(j)||ze.isItalic(j)||ze.isTransposeCharacter(j)){B.preventDefault();return}if(ze.isSoftBreak(j)){B.preventDefault(),d.insertSoftBreak(u);return}if(ze.isSplitBlock(j)){B.preventDefault(),d.insertBreak(u);return}if(ze.isDeleteBackward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u);return}if(ze.isDeleteForward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u);return}if(ze.isDeleteLineBackward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"line"});return}if(ze.isDeleteLineForward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"line"});return}if(ze.isDeleteWordBackward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"word"});return}if(ze.isDeleteWordForward(j)){B.preventDefault(),K&&k.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"word"});return}}}},[s,u,p.onKeyDown]),onPaste:(0,P.useCallback)(B=>{!s&&R.hasEditableTarget(u,B.target)&&!vt(B,p.onPaste)&&(!Nr||iv(B.nativeEvent)||ao)&&(B.preventDefault(),R.insertData(u,B.clipboardData))},[s,u,p.onPaste])}),P.default.createElement(sC,{decorations:H,node:u,renderElement:i,renderPlaceholder:l,renderLeaf:c,selection:u.selection})))))},iC=t=>{var{attributes:e,children:r}=t;return P.default.createElement("span",Object.assign({},e),r,bt&&P.default.createElement("br",null))},uC=()=>[],lC=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&k.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),Dc(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},vt=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Zc=t=>kr(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),cC=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},fC=(0,P.createContext)(!1);var dC=(0,P.createContext)({});function mC(t){var e=(0,P.useRef)([]).current,r=(0,P.useRef)({editor:t}).current,n=(0,P.useCallback)(a=>{r.editor=a,e.forEach(s=>s(a))},[e,r]),o=(0,P.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,r]);return{selectorContext:o,onChange:n}}var pC=["editor","children","onChange","value"],Af=t=>{var{editor:e,children:r,onChange:n,value:o}=t,a=yn(t,pC),s=(0,P.useRef)(!1),[i,c]=P.default.useState(()=>{if(!$.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(tt.stringify(o)));if(!d.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(tt.stringify(e)));return e.children=o,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:l,onChange:f}=mC(e),g=(0,P.useCallback)(()=>{n&&n(e.children),c(p=>({v:p.v+1,editor:e})),f(e)},[e,f,n]);(0,P.useEffect)(()=>(bs.set(e,g),()=>{bs.set(e,()=>{}),s.current=!0}),[e,g]);var[h,m]=(0,P.useState)(R.isFocused(e));return(0,P.useEffect)(()=>{m(R.isFocused(e))},[e]),uo(()=>{var p=()=>m(R.isFocused(e));return Xg?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),P.default.createElement(dC.Provider,{value:l},P.default.createElement(Df.Provider,{value:i},P.default.createElement(Ls.Provider,{value:i.editor},P.default.createElement(fC.Provider,{value:h},r))))};var Xc=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Jc=(t,e,r)=>{var n=R.toDOMRange(t,e).getBoundingClientRect(),o=R.toDOMRange(t,r).getBoundingClientRect();return Xc(n,o)&&Xc(o,n)},hC=(t,e)=>{var r=d.range(t,k.end(e)),n=Array.from(d.positions(t,{at:e})),o=0,a=n.length,s=Math.floor(a/2);if(Jc(t,d.range(t,n[o]),r))return d.range(t,n[o],r);if(n.length<2)return d.range(t,n[n.length-1],r);for(;s!==n.length&&s!==o;)Jc(t,d.range(t,n[s]),r)?a=s:o=s,s=Math.floor((o+a)/2);return d.range(t,n[a],r)};function Qc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ef(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qc(Object(r),!0).forEach(function(n){Da(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _f=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:o,onChange:a,deleteBackward:s,addMark:i,removeMark:c}=n;return Ea.set(n,new WeakMap),n.addMark=(l,f)=>{var g,h;(g=js.get(n))===null||g===void 0||g(),!qt.get(n)&&(h=Bt.get(n))!==null&&h!==void 0&&h.length&&qt.set(n,null),vr.delete(n),i(l,f)},n.removeMark=l=>{var f;!qt.get(n)&&(f=Bt.get(n))!==null&&f!==void 0&&f.length&&qt.set(n,null),vr.delete(n),c(l)},n.deleteBackward=l=>{if(l!=="line")return s(l);if(n.selection&&k.isCollapsed(n.selection)){var f=d.above(n,{match:p=>Z.isElement(p)&&d.isBlock(n,p),at:n.selection});if(f){var[,g]=f,h=d.range(n,g,n.selection.anchor),m=hC(n,h);k.isCollapsed(m)||z.delete(n,{at:m})}}},n.apply=l=>{var f=[],g=Bt.get(n);if(g!=null&&g.length){var h=g.map(N=>Dv(N,l)).filter(Boolean);Bt.set(n,h)}var m=Ir.get(n);m&&Ir.set(n,Hc(n,m,l));var p=Or.get(n);if(p!=null&&p.at){var u=pe.isPoint(p?.at)?ks(n,p.at,l):Hc(n,p.at,l);Or.set(n,u?ef(ef({},p),{},{at:u}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...ma(n,l.path));break}case"set_selection":{var D;(D=so.get(n))===null||D===void 0||D.unref(),so.delete(n);break}case"insert_node":case"remove_node":{f.push(...ma(n,_.parent(l.path)));break}case"merge_node":{var E=_.previous(l.path);f.push(...ma(n,E));break}case"move_node":{var A=_.common(_.parent(l.path),_.parent(l.newPath));f.push(...ma(n,A));break}}o(l);for(var[x,w]of f){var[y]=d.node(n,x);ys.set(y,w)}},n.setFragmentData=l=>{var{selection:f}=n;if(!!f){var[g,h]=k.edges(f),m=d.void(n,{at:g.path}),p=d.void(n,{at:h.path});if(!(k.isCollapsed(f)&&!m)){var u=R.toDOMRange(n,f),D=u.cloneContents(),E=D.childNodes[0];if(D.childNodes.forEach(W=>{W.textContent&&W.textContent.trim()!==""&&(E=W)}),p){var[A]=p,x=u.cloneRange(),w=R.toDOMNode(n,A);x.setEndAfter(w),D=x.cloneContents()}if(m&&(E=D.querySelector("[data-slate-spacer]")),Array.from(D.querySelectorAll("[data-slate-zero-width]")).forEach(W=>{var V=W.getAttribute("data-slate-zero-width")==="n";W.textContent=V?`
`:""}),lf(E)){var y=E.ownerDocument.createElement("span");y.style.whiteSpace="pre",y.appendChild(E),D.appendChild(y),E=y}var N=n.getFragment(),b=JSON.stringify(N),L=window.btoa(encodeURIComponent(b));E.setAttribute("data-slate-fragment",L),l.setData("application/".concat(r),L);var F=D.ownerDocument.createElement("div");return F.appendChild(D),F.setAttribute("hidden","true"),D.ownerDocument.body.appendChild(F),l.setData("text/html",F.innerHTML),l.setData("text/plain",ff(F)),D.ownerDocument.body.removeChild(F),l}}},n.insertData=l=>{n.insertFragmentData(l)||n.insertTextData(l)},n.insertFragmentData=l=>{var f=l.getData("application/".concat(r))||dv(l);if(f){var g=decodeURIComponent(window.atob(f)),h=JSON.parse(g);return n.insertFragment(h),!0}return!1},n.insertTextData=l=>{var f=l.getData("text/plain");if(f){var g=f.split(/\r\n|\r|\n/),h=!1;for(var m of g)h&&z.splitNodes(n,{always:!0}),n.insertText(m),h=!0;return!0}return!1},n.onChange=l=>{nf.default.unstable_batchedUpdates(()=>{var f=bs.get(n);f&&f(),a(l)})},n},ma=(t,e)=>{var r=[];for(var[n,o]of d.levels(t,{at:e})){var a=R.findKey(t,n);r.push([o,a])}return r};v();C();var Mt=O(ee());st();he();v();C();var Re={"retina-border-basic":"_retina-border-basic_1taj3_1",retinaBorderBasic:"_retina-border-basic_1taj3_1","batch-send-address":"_batch-send-address_1taj3_29",batchSendAddress:"_batch-send-address_1taj3_29","batch-send-address-dialog-core":"_batch-send-address-dialog-core_1taj3_58",batchSendAddressDialogCore:"_batch-send-address-dialog-core_1taj3_58","batch-send-address-input":"_batch-send-address-input_1taj3_63",batchSendAddressInput:"_batch-send-address-input_1taj3_63","batch-send-address-accordion":"_batch-send-address-accordion_1taj3_76",batchSendAddressAccordion:"_batch-send-address-accordion_1taj3_76","batch-send-address-accordion-header":"_batch-send-address-accordion-header_1taj3_79",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_1taj3_79","batch-send-address-accordion-content":"_batch-send-address-accordion-content_1taj3_83",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_1taj3_83","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_1taj3_87",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_1taj3_87","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_1taj3_92",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_1taj3_92",upload:"_upload_1taj3_132",uploadIcon:"_uploadIcon_1taj3_147",uploadText:"_uploadText_1taj3_150",addressPre:"_addressPre_1taj3_153",selectAddress:"_selectAddress_1taj3_157",selectedAddressInfo:"_selectedAddressInfo_1taj3_162",addBtn:"_addBtn_1taj3_170","circle-icon":"_circle-icon_1taj3_174",circleIcon:"_circle-icon_1taj3_174",accountTitle:"_accountTitle_1taj3_181",accountTag:"_accountTag_1taj3_185"};var gC=({type:t,title:e,children:r,dropError:n,actionTitle:o,addressErrors:a,onSelectWalletAddress:s})=>{let i=(0,Mt.useMemo)(()=>{if(n)return n;if(!a?.length)return null;let c=Mn(a,"error");return c?.length>1?T("wallet_extension_sending_text_address_error"):c[0]?.errorText?c[0]?.errorText:T(c[0]?.error,c[0]?.args)},[n,a]);return Mt.default.createElement(S.Space,{direction:S.DIRECTION.vertical,space:"12px"},Mt.default.createElement(S.FlexBox,{justify:"space-between",align:S.ALIGN.center},Mt.default.createElement(Be.Text,{strong:700,size:Be.SIZE.lg,style:{lineHeight:"24px"}},e,Mt.default.createElement(Ye,{className:Re.circleIcon,icon:"okx-wallet-plugin-question-mark",size:Ye.SIZE.xs,tooltip:{maxWidth:"300px",placement:Et?.DIRECTION.topRight,title:Mt.default.createElement("pre",{className:Re.addressPre},T("wallet_extension_sending_tooltip_address_condition"))}})),Mt.default.createElement(S.Space,{direction:S.DIRECTION.horizontal,space:"6px",align:S.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{s(t)}},Mt.default.createElement(Ye,{icon:"okx-wallet-plugin-tier-guide",size:Ye.SIZE.md}),Mt.default.createElement(Be.Text,{strong:!0,size:Be.SIZE.sm,style:{lineHeight:"16px"}},o))),r,i&&Mt.default.createElement(Be.Text,{size:Be.SIZE.xs,type:Be.TYPE.danger},i))},Aa=gC;v();C();var bn=O(ee()),yf=O($e());he();v();C();var _a=O(ee()),lo=O(Ee());he();v();C();var Bf=O(tl());var vC=(t,e={})=>new Promise((r,n)=>{Bf.default.parse(t,{complete:o=>{r(o)},error:o=>{n(o)},...e})}),CC=(t,e={})=>vC(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),xf=CC;v();C();var wf=O(ee());function DC(t,{onDrop:e,onDragLeave:r,onDragEnter:n,onDragOver:o}){(0,wf.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",n),t.addEventListener("dragover",o)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o))}),[e,r,n,o,t])}var Us=DC;function EC(t){let e=t.scrollHeight;t.scrollTo(0,e)}var AC=1024,_C=1024*AC,Sf=1,BC=_C*Sf;function xC(t,{onChange:e,slateRef:r,onError:n}={}){let[o,a]=(0,_a.useState)(!1),s=g=>{r?.current&&(r.current.style.pointerEvents=g?"none":"auto")},i=(0,lo.useMemoizedFn)(g=>{g.preventDefault()});Us(document,{onDrop:i,onDragEnter:i,onDragLeave:i,onDragOver:i});let c=(0,lo.useMemoizedFn)(g=>{s(!1),a(!1);let h=g.dataTransfer?.files?.[0];if(!!h){if(h.type!=="text/csv"){n?.(T("wallet_extension_reminder_text_wrong_format"));return}if(h.size>BC){n?.(T("wallet_extension_reminder_text_large_doc",{num:Sf}));return}xf(h).then(m=>{e?.(m)}).catch(()=>{e?.([])})}});(0,_a.useEffect)(()=>{o&&t.current&&EC(t.current)},[o,t]);let l=(0,lo.useMemoizedFn)(()=>{s(!0),a(!0)}),f=(0,lo.useMemoizedFn)(()=>{s(!1),a(!1)});return Us(t.current,{onDrop:c,onDragEnter:l,onDragLeave:f}),{show:o}}var Tf=xC;function wC(t){let{onChange:e,dropRef:r,slateRef:n,onError:o}=t,a=(0,bn.useRef)(null),{show:s}=Tf(r,{onChange:e,slateRef:n,onError:o});return s?bn.default.createElement(S.Box,{ref:a,className:Re.upload},bn.default.createElement(ut,{className:(0,yf.default)("okx-wallet-plugin-add",Re.uploadIcon)}),bn.default.createElement(S.Box,{className:Re.uploadText},T("wallet_extension_reminder_dropzone_input_address"))):void 0}var Ff=wC;v();C();st();var SC=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],bf=(t=[])=>!t||!t?.length?SC:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],Nf=t=>{let[{children:e}]=t;return e.map(({children:r})=>Bo(r?.[0]?.text))},Of=(t=[],e=[])=>!e.some(r=>!t.includes(r)),If=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[n,o]=r;if(Z.isElement(n)&&n.type==="numbered-list"){for(let[a,s]of $.children(t,o))if(Z.isElement(a)&&a.type==="numbered-list"){z.unwrapNodes(t,{at:s});return}}e(r)},t};var TC="Enter",yC=({attributes:t,children:e,element:r})=>{let{error:n}=r;switch(r.type){case"list-item":return Ne.default.createElement("li",{style:{color:n&&"red"},...t},e);case"numbered-list":return Ne.default.createElement("ol",{...t},e);default:return Ne.default.createElement("p",{...t},e)}},FC=({attributes:t,children:e,leaf:r})=>{let{error:n}=r;return Ne.default.createElement("span",{style:{color:n?"red":void 0},...t},e)},bC=(0,Ne.forwardRef)(({type:t,title:e,dropError:r,actionTitle:n,placeholder:o,value:a=[],onChange:s,addressErrors:i,onSelectWalletAddress:c,onDrop:l,onDropError:f},g)=>{let h=(0,Ne.useRef)(0),m=(0,Ne.useCallback)(w=>Ne.default.createElement(yC,{...w}),[]),p=(0,Ne.useCallback)(w=>Ne.default.createElement(FC,{...w}),[]),u=(0,Ne.useMemo)(()=>If(fc(_f(cc()))),[]),D=(0,Ne.useRef)(null),E=(0,Ne.useRef)(null);(0,Ne.useEffect)(()=>{u?.selection?.focus&&(h.current=u?.selection?.focus?.path?.[1])},[u.selection]),(0,Ne.useEffect)(()=>{a.forEach((w,y)=>{z.setNodes(u,{error:!1},{at:[0,y,0]})}),i?.forEach(({at:w})=>{(0,kf.isNil)(w)||z.setNodes(u,{error:!0},{at:[0,w,0]})})},[i]);let A=(0,Gs.useMemoizedFn)(w=>{let{path:y}=u.selection?.focus??{path:null},N=i?.find(L=>L.at===y?.[1])?.address,b=w?.[0]?.children?.[y?.[1]]?.children?.[0]?.text;(N&&b!==N||!b)&&z.setNodes(u,{error:!1},{at:[0,y?.[1],0]}),s?.(w,t)},[i]),x=(0,Gs.useMemoizedFn)(async w=>{let{path:y,offset:N}=u.selection?.focus||{};if(!y||!N)return!1;let b=y?.[1];if(w.key===TC){a?.[b]?.length>N&&z.setNodes(u,{error:!1},{at:[0,b,0]}),await Vu(10);let L=y[1]+1;z.setNodes(u,{error:!1},{at:[0,L,0]})}return!0},[a,i]);return(0,Ne.useImperativeHandle)(g,()=>({insertNodes:(w=[])=>{let y=w.map(b=>({type:"list-item",children:[{text:b}]}));z.insertNodes(u,y);let N=h.current;a?.[N]||z.removeNodes(u,{at:[0,N]})}})),Ne.default.createElement(Aa,{type:t,title:e,dropError:r,actionTitle:n,addressErrors:i,onSelectWalletAddress:c},Ne.default.createElement(S.Box,{className:Re["batch-send-address-input"],ref:D},Ne.default.createElement(S.Box,{ref:E},Ne.default.createElement(Af,{editor:u,value:bf(a),onChange:A},Ne.default.createElement(Ef,{autoFocus:!0,spellCheck:!0,renderLeaf:p,renderElement:m,placeholder:o,onKeyDown:x}))),Ne.default.createElement(Ff,{dropRef:D,onChange:l,slateRef:E,onError:f})))}),Hs=bC;v();C();var Se=O(ee()),Pf=O(Ee());he();tp();v();C();var Ve={SEND:"SEND",RECEIVE:"RECEIVE"};var Lf=t=>Array.isArray(t)?t.map(({name:e,address:r,label:n,options:o})=>r&&!o?{value:r,style:{display:"flex",alignItems:"center"},label:Se.default.createElement(S.Space,{direction:S.DIRECTION.vertical,space:"2px"},Se.default.createElement(S.Box,{className:Re.accountTitle},e&&Se.default.createElement(Be.Text,{strong:!0,size:Be.SIZE.xs},e),!!n&&Se.default.createElement(wo,{className:Re.accountTag,category:wo.CATEGORY.fill,size:wo.SIZE.sm},T(Mi[n]))),r&&Se.default.createElement(Be.Text,{size:Be.SIZE.xs,type:Be.TYPE.secondary},r))}:{value:e,label:Se.default.createElement(Be.Text,{size:Be.SIZE.md},e),options:Lf(o)}):[],NC=t=>{let[e,r]=(0,Se.useState)([]),[n,o]=(0,Se.useState)(!1),a=(0,Se.useMemo)(()=>Lf(t.options),[t.options]),s=(0,Se.useMemo)(()=>a?.map(m=>m.options?.map(({value:p})=>p))?.flat(),[a]),{mode:i,type:c}=t,l=(0,Se.useMemo)(()=>i===J.ONE_TO_MANY&&c===Ve.SEND||i===J.MANY_TO_ONE&&c===Ve.RECEIVE,[i,c]),f=(0,Pf.useMemoizedFn)((m,p,u)=>{if(l){r([p]);return}let D=[...e];m&&p?D=[...e,p]:!m&&p?D=D.filter(E=>E!==p):m&&u&&u.length?D=[...e,...u]:!m&&u&&u.length&&(D=D.filter(E=>!u.includes(E))),r([...new Set(D)])},[l,e]),g=(0,Se.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),h=m=>{let p=m.target.checked;r(p?s:[])};return(0,Se.useEffect)(()=>{o(e.length===s.length)},[e,s]),Se.default.createElement(S.Box,{className:Re.selectAddress},Se.default.createElement(S.Box,{className:Re["batch-send-address-dialog-core"]},a.map(({label:m,options:p})=>Array.isArray(p)&&p?.length?Se.default.createElement(Oi,{defaultExpanded:!0,className:Re["batch-send-address-accordion"],headerClassName:Re["batch-send-address-accordion-header"],contentClassName:Re["batch-send-address-accordion-content"],title:l?m:Se.default.createElement(wr,{clickStopPropagation:!0,checked:Of(e,p.map(({value:u})=>u)),onChange:({target:{checked:u}})=>{f(u,void 0,p.map(({value:D})=>D))}},m)},p.map(({value:u,label:D})=>l?Se.default.createElement(Ii,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,u)}},D):Se.default.createElement(wr,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,u)}},D))):Se.default.createElement(Se.default.Fragment,null))),Se.default.createElement(S.Box,{className:Re["batch-send-address-select-address-actions"]},!l&&Se.default.createElement(S.Box,{className:Re.selectedAddressInfo},Se.default.createElement(wr,{checked:n,onChange:h},T("wallet_extension_addressbook_text_select_all")),Se.default.createElement(Be.Text,{type:Be.TYPE.secondary,size:Be.SIZE.sm},T("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),Se.default.createElement(S.Box,{className:Re.addBtn},Se.default.createElement(te,{category:te.CATEGORY.fill,type:te.TYPE.highlight,size:te.SIZE.lg,onClick:g,disabled:e.length<=0,block:!0},T("wallet_extension_addressbook_btn_add")))))},Mf=NC;v();C();var Ys=O(ee());st();var OC=({type:t,title:e,value:r,onChange:n,actionTitle:o,placeholder:a,addressErrors:s,onSelectWalletAddress:i})=>Ys.default.createElement(Aa,{type:t,title:e,actionTitle:o,addressErrors:s,onSelectWalletAddress:i},Ys.default.createElement(Fe,{size:Fe.SIZE.xl,value:r?.[0],placeholder:a,onChange:({target:{value:c}})=>{n?.([Bo(c)],t,!0)}})),qs=OC;v();C();var Dr=O(ee()),Cr=O(Ee());var Rf=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:n})=>{let o=(0,Dr.useRef)(null),a=(0,Dr.useRef)(null),[s,i]=(0,Dr.useState)(null),[c,l]=(0,Dr.useState)(!1),[f,g]=(0,Dr.useState)([]),[h,m]=(0,Dr.useState)(""),[p,u]=(0,Dr.useState)(""),D=(0,Cr.useMemoizedFn)(()=>{l(!1)},[]),E=(0,Cr.useMemoizedFn)((L,F)=>{F===Ve.SEND&&t===J.ONE_TO_MANY||F===Ve.RECEIVE&&t===J.MANY_TO_ONE?n?.(L,F):(F===Ve.SEND?o:a)?.current?.insertNodes(L),D()},[]),A=(0,Cr.useMemoizedFn)(L=>{let F=L===Ve.SEND?e:r;l(!0),i(L),g(F)},[]),x=(0,Cr.useMemoizedFn)((L=[])=>{o.current.insertNodes(L),m("")}),w=(0,Cr.useMemoizedFn)((L=[])=>{a.current.insertNodes(L),u("")}),y=(0,Cr.useMemoizedFn)((L,F,W=!1)=>{n?.(W?L:Nf(L),F),m(""),u("")},[]),N=(0,Cr.useMemoizedFn)(L=>{u(L)}),b=(0,Cr.useMemoizedFn)(L=>{m(L)});return{visible:c,sendRef:o,receiveRef:a,addressType:s,addressOptions:f,onCloseDialog:D,onInsertAddresses:E,onSelectWalletAddress:A,onSendDrop:x,onReceiveDrop:w,onAddressInputChange:y,onReceiveDropError:N,onSendDropError:b,sendError:h,receiveError:p}};var IC=t=>{let{mode:e,className:r,style:n,toAddresses:o,fromAddresses:a,addressErrors:s}=t,{visible:i,sendRef:c,receiveRef:l,addressType:f,addressOptions:g,onCloseDialog:h,onInsertAddresses:m,onSelectWalletAddress:p,onSendDrop:u,onReceiveDrop:D,onAddressInputChange:E,onReceiveDropError:A,onSendDropError:x,sendError:w,receiveError:y}=Rf(t),{isSm:N}=Ue();return Er.default.createElement(S.FlexBox,{style:n,direction:N?S.DIRECTION.vertical:S.DIRECTION.horizontal,className:(0,jf.default)(Re["batch-send-address"],r)},e===J.ONE_TO_MANY?Er.default.createElement(qs,{value:a,type:Ve.SEND,addressErrors:s?.from,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p}):Er.default.createElement(Hs,{ref:c,value:a,addressErrors:s?.from,type:Ve.SEND,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p,onDrop:u,onDropError:x,dropError:w}),e===J.MANY_TO_ONE?Er.default.createElement(qs,{value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p}):Er.default.createElement(Hs,{ref:l,value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p,onDrop:D,onDropError:A,dropError:y}),Er.default.createElement(Hr,{visible:i,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:T("wallet_extension_addressbook_title_address_book"),onClose:h},Er.default.createElement(Mf,{mode:e,type:f,options:g,onChange:m})))},zf=Er.default.memo(IC);v();C();var nr=O(ee());var $s=O($e());v();C();var rn={root:"_root_1uwjx_1",icon:"_icon_1uwjx_69",title:"_title_1uwjx_88",subtitle:"_subtitle_1uwjx_108",tip:"_tip_1uwjx_136",tipIcon:"_tipIcon_1uwjx_140"};function kC(t){let{icon:e,title:r,subtitle:n,tip:o,className:a,titleClassName:s,subtitleClassName:i}=t;return nr.default.createElement(S.Box,{className:(0,$s.default)(rn.root,a)},e&&nr.default.createElement(S.Box,{className:rn.icon},e),nr.default.createElement(S.Box,null,nr.default.createElement(S.Box,{className:(0,$s.default)(rn.title,s)},r),nr.default.createElement(S.Box,{className:rn.subtitle},nr.default.createElement(S.Box,{className:i},n),o&&nr.default.createElement(Et,{title:o,placement:Et.DIRECTION.bottom,maxWidth:240},nr.default.createElement(S.Box,{className:rn.tip},nr.default.createElement(ut,{className:`okx-wallet-plugin-question-mark ${rn.tipIcon}`}))))))}var Nn=kC;v();C();var nn=O(ee()),Zs=O(Ee());st();he();v();C();je();Wn();Hn();var Wf=O(Ee());var PC=()=>(0,Wf.useMemoizedFn)(async t=>{let{data:e}=await Qt(Jt.getSolRentBatch,{coinId:fr,addresses:t});return e}),Uf=PC;je();Wn();Hn();v();C();st();he();je();var Vs=(t=[],e)=>e===Ve.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r),LC=t=>{let e=Za;return t===De?e=fr:t===We?e=Fo:t===fe?e=gn:t===ye?e=yo:t===ve&&(e=bo),e},MC=({localType:t,addressRegisterStatusMap:e,fromAddressErrors:r,toAddressErrors:n,fromAddress:o,toAddress:a,i:s,tokenSymbol:i})=>{if(t===fe&&o||t===ye&&a){let c=!0;t===fe?c=e[o]??!0:c=e[a]??!0,c===!1&&t===fe&&r.push({address:o,error:"wallet_extension_sending_error_address_no_register",at:s}),c===!1&&t===ye&&n.push({address:a,error:"wallet_extension_sending_error_token_no_register",at:s,args:{token:i}})}},RC=async({mode:t,baseCoinId:e,isRpcMode:r,fromAddresses:n,toAddresses:o,chainIndex:a})=>{let s=[],i=[],c=typeof a=="string"&&a.startsWith("0x")?Go(a):a,l=[];if(t===J.ONE_TO_MANY?l=o.map(f=>({chainIndex:c,to:f,from:n[0]})):t===J.MANY_TO_ONE?l=n.map(f=>({chainIndex:c,from:f,to:o[0]})):l=n.map((f,g)=>({chainIndex:c,from:f,to:o[g]})),[Za,fr].includes(e))try{let{txTagList:f}=await zi({txList:l,rpcChain:!!r});f.forEach((g,h)=>{g?.causeRiskItem?.includes("from_risk_reject")&&s.push({address:l[h].from,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:h}),g?.causeRiskItem?.includes("black_tag")&&i.push({address:l[h].to,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:h})})}catch(f){s.push({address:n[0],errorText:f?.msg||T("wallet_extension_transaction_error_general_check_network")})}return{fromAddressErrors:s,toAddressErrors:i}},Gf=async({mode:t,localType:e,isRpcMode:r,chainIndex:n,tokenSymbol:o,toAddresses:a,fromAddresses:s,walletAccounts:i,addressRegisterStatusMap:c})=>{let l=[],f=[],g=mn([a?.length,s?.length]),h=s[0],m,p=LC(e);for(let D=0;D<g;D++){(t===J.MANY_TO_MANY||t===J.MANY_TO_ONE)&&(h=s[D]),m=a[D],h&&!i?.includes(h)?f.push({address:h,error:"wallet_extension_sending_text_address_wallet_extension",at:D}):t!==J.ONE_TO_MANY&&h&&s.slice(0,D).includes(h)&&f.push({address:h,error:"wallet_extension_sending_text_address_duplicated",at:D});let E=m&&Qe(m,e),A=await Xu(E,p);m&&!A&&l.push({address:m,error:"wallet_extension_sending_text_address_illegal",at:D}),MC({localType:e,addressRegisterStatusMap:c,fromAddressErrors:f,toAddressErrors:l,fromAddress:h,toAddress:m,i:D,tokenSymbol:o})}let u=await RC({mode:t,baseCoinId:p,isRpcMode:r,fromAddresses:s,toAddresses:a,chainIndex:n});return f=f.concat(u.fromAddressErrors),l=l.concat(u.toAddressErrors),{to:l,from:f}};v();C();var Ks=O(Ee());st();v();C();var Hf=O(Ee()),Yf=O(Ou());st();Gn();var jC=10,zC=async({contract:t,addresses:e})=>{let r=e.map(async o=>{let a=await t.balanceOf(o);return{from:o,balance:a.toString()}});return await Promise.all(r)},WC=async({provider:t,addresses:e})=>{let r=e.map(async o=>{let a=await t.getBalance(o);return{from:o,balance:a.toString(),baseCoinBalance:a.toString()}});return await Promise.all(r)},UC=async({provider:t,addressList:e,contractAddress:r})=>{let{ethers:n}=await Un(),o=[];if(!e?.length)return[];if(r){let a=new n.Contract(r,Yf.default,t);return o=await zC({contract:a,addresses:e}),o}return o=await WC({provider:t,addresses:e}),o},qf=t=>{let e=Kr(t);return(0,Hf.useMemoizedFn)(async(r,n)=>{let o=await e(),a=Ti(r),s=gi(a,jC),i=await Promise.all(s.map(l=>UC({provider:o,addressList:l,contractAddress:n}))),c=hi(i);return r?.length!==c?.length?r.map(l=>c.find(({from:g})=>g===l)):c},[e])};je();var GC=()=>{let[t]=ue(),e=ju(void 0,t?.localType),r=Gu();return(0,Ks.useMemoizedFn)(async n=>{let o=ht(t),a=n?.length,s=[];for(let i=0;i<a;i++){let c=n[i],{walletId:l}=e.find(g=>g.address===c)||{},{coinAmountInt:f}=await r(t?.coinId,l)||{};if(o)s.push({from:c,balance:f,baseCoinBalance:f});else{let{coinAmountInt:g}=await r(t?.baseCoinId,l)||{};s.push({from:c,balance:f,baseCoinBalance:g})}}return s})},HC=()=>{let[t]=qe(),[e]=ue(),r=qf(t?.rpcUrl);return(0,Ks.useMemoizedFn)(async n=>{let o=!e?.address,a=[],s=n.map(c=>c&&Qe(c,e?.localType)),i=await r(s,void 0);return o||(a=await r(s,Qe(e?.address,e?.localType))),_o(i,a)},[e])},YC=()=>{let[t]=ue(),e=HC(),r=GC();return[ye,De,We,fe,ve].includes(t?.localType)?r:e},$f=YC;var qC=(t,e)=>{let[r]=ue(),[n,o]=(0,nn.useState)(!1),{gotoConfirmPage:a}=_t(),s=Ho(!0,e),[,i]=An(),c=ct(),l=$f(),f=Uf(),[g,h]=Ae(),[m,p]=(0,nn.useState)(Vs(g,Ve.SEND)),[u,D]=(0,nn.useState)(Vs(g,Ve.RECEIVE)),[E,A]=(0,nn.useState)({}),x=(0,Zs.useMemoizedFn)((b,L)=>{L===Ve.SEND?p(b):D(b)},[]),w=(0,nn.useMemo)(()=>{let b=[];if(t===J.MANY_TO_MANY){let L=Ai(m.length,u.length),F=u.slice(0,L);m.slice(0,L).forEach((V,M)=>{let q=F[M];V&&q&&b.push({to:q,from:V})})}else if(t===J.MANY_TO_ONE){let L=u.find(F=>!!F);m.forEach(F=>{F&&L&&b.push({to:L,from:F})})}else if(t===J.ONE_TO_MANY){let L=m.find(F=>!!F);u.forEach(F=>{L&&F&&b.push({to:F,from:L})})}return b},[m,t,u]),y=!w?.length,N=(0,Zs.useMemoizedFn)(async()=>{try{o(!0);let b=[];r?.localType===fe?b=m:r?.localType===ye&&(b=u);let L={};if([ye,fe].includes(r?.localType))try{let{data:V}=await Qt(Jt.batchQueryAddressRegister,{chainId:r?.chainId,addresses:b,contractAddress:r?.localType===ye?r?.address:void 0});L=V}catch{}let F=await Gf({isRpcMode:c,localType:e,toAddresses:u,fromAddresses:m,walletAccounts:s,mode:t,chainIndex:r?.chainId,addressRegisterStatusMap:L,tokenSymbol:r?.symbol});if(F?.from?.length||F?.to?.length)return o(!1),A(F);let W=await l(Ln(w,"from"));if(r?.localType===De&&r?.baseCoinId!==0){let V=await f(Ln(w,"to"));i(V)}return W=W?.map((V,M)=>({...V,from:Mo(V?.from,r?.localType),id:M})),h(_o([],w,W)),o(!1),a()}catch(b){let L={from:[],to:[]};return L?.from.push({address:m[0],errorText:b?.msg||b?.message||T("wallet_extension_transaction_error_general_check_network")}),o(!1),A(L)}},[u,m,s,w]);return{loading:n,addressErrors:E,sendAddresses:g,fromAddresses:m,toAddresses:u,nextDisabled:y,onNext:N,onAddressChange:x}},Vf=qC;v();C();var Xs={root:"_root_a3p43_2",footer:"_footer_a3p43_67"};var $C=()=>{let{isSm:t}=Ue(),[e]=ue(),[r]=it(),{loading:n,fromAddresses:o,toAddresses:a,addressErrors:s,nextDisabled:i,onNext:c,onAddressChange:l}=Vf(r,e?.localType),[f,g]=nl(e?.localType),{gotoHomePage:h}=_t(),[m,p]=(0,$t.useMemo)(()=>r===J.MANY_TO_MANY?[T("wallet_extension_multitomulti_subtitle_many_transfer"),T("wallet_extension_reminder_tooltips_portfolio_trading")]:r===J.ONE_TO_MANY?[T("wallet_extension_onetomulti_subtitle_one_to_many"),T("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[T("wallet_extension_multitoone_subtitle_many_to_one"),T("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,T]);return $t.default.createElement(br,{footer:$t.default.createElement(S.Box,{className:Xs.footer},$t.default.createElement(te,{block:t,category:te.CATEGORY.outline,type:te.TYPE.primary,size:t?te.SIZE.lg:te.SIZE.xl,onClick:()=>{h()}},T("wallet_extension_footer_btn_back")),$t.default.createElement(te,{block:t,loading:n,disabled:i,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,onClick:c},T("wallet_extension_footer_btn_next")))},$t.default.createElement(Nn,{tip:p,subtitle:m,title:T("wallet_extension_address_maintitle_add_address")}),$t.default.createElement(S.Box,{className:Xs.root},$t.default.createElement(zf,{mode:r,toAddresses:a,fromAddresses:o,addressErrors:s,walletAccounts:f,walletAccountsWithAddressBook:g,onChange:l})))},Kf=$t.default.memo($C);v();C();var rt=O(ee()),Od=O(yt()),ho=O($e());st();he();v();C();var Ar=O(ee()),Qs=O(yt());st();he();je();v();C();var Lr=O(ee()),Zf=O(yt()),or=O(Ee());st();je();var VC=()=>{let t=(0,Zf.useSelector)(Pu);return(0,Lr.useCallback)(e=>{let r=t.filter(n=>n.chainId===e&&!n.isDeleted);return Mn(r,"address")},[t])},KC=(t,e)=>{let r=ct(),{data:n,reload:o,loadingMore:a,listRef:s}=al({aggregation:!1,chainIds:[t],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){return r||!t?{list:[],pageNo:0,isNoMore:!0}:!1}});return{list:(0,or.useCreation)(()=>n?.list??[],[n?.list]),listRef:s,loadingMore:a,refreshDom:o,data:n}},Xf=(t,e)=>{let{chainId:r,localType:n,chainIndex:o}=t||{},[a,s]=(0,Lr.useState)([]),i=ct(),c=(0,or.useDebounce)(e,{wait:300}),{list:l,listRef:f,refreshDom:g,loadingMore:h,data:m}=KC(o,c),p=VC(),u=At(),D=Cn(fe),E=el(),A=(0,Lr.useMemo)(()=>m?.isNoMore&&!h,[m?.isNoMore,h]),x=(0,Lr.useMemo)(()=>{if(i)return[];if(!o)return[];let N=c.toLowerCase().trim();return E.filter(b=>{if(b.chainId!==o)return!1;let L=b.symbol&&b.symbol.toLowerCase().includes(N),F=b.address&&b.address.toLowerCase()===N;return L||F})},[i,c,E,o]);(0,or.useAsyncEffect)(async()=>{if(n===fe){let{coinFeeList:N}=await u({coinId:gn,address:D,fromAddr:D,toAddr:D,value:"0"});s(N)}},[n]);let w=(0,Lr.useMemo)(()=>{let N=l;return!i&&A&&x.length>0&&(N=[...N,...x]),Mn(N,"address")},[l,i,A,x]),y=(0,or.useCreation)(()=>{let N=w;if(n===fe&&a?.length){let b=a.map(({coinId:F})=>F);N=l.filter(({coinId:F})=>Ci(b,F)).map(F=>{let{tokenId:W,originSymbol:V}=a.find(M=>M?.coinId===F?.coinId);return{...F,tokenId:W,originSymbol:V}})}return N},[n,w,a,i,A,x]);return(0,or.useCreation)(()=>i?{list:p(r)??[],listRef:null,refreshDom:null,loadingMore:!1}:{list:y,listRef:f,refreshDom:g,loadingMore:h},[r,y,l,f,h,i,p])},Ba=()=>{let t=ct(),e=Uu();return(0,or.useMemoizedFn)(async({coinId:r})=>t?0:e?.[r]?.coinToUSDRate||"0",[t])};var ZC=(t,e)=>t?.localType===De&&!e,Js=t=>t??"",Jf=t=>t??{},XC=t=>t??0,JC=t=>t?.orderDecimalNum??t?.decimals,QC=(t,e)=>e?t:t?.baseCoin,xa=()=>{let[t]=ue(),[e]=qe(),[r,n]=(0,Ar.useState)(0),[o,a]=(0,Ar.useState)(0),s=(0,Qs.useSelector)(Oo),{usdToThisRate:i}=s,c=ht(t),l=Ba(),f=ZC(t,c),[g]=An(),h=async()=>{if(c){let w=await l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});n(w),a(w)}else{let[w,y]=await Promise.all([l({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);a(w),n(y)}};(0,Ar.useEffect)(()=>{h()},[]);let[m]=Ae(),p=(0,Qs.useSelector)(lt),u=m?.length,D=QC(t,c),E=(0,Ar.useMemo)(()=>m[0]?.realNetworkFee?m.reduce((y,{realNetworkFee:N})=>G.add(y,N),0):G.mul(XC(p?.networkFee),u),[t,p]),A=(0,Ar.useMemo)(()=>{let w=m.reduce((y,{txAmount:N})=>G.add(y,N),0);return G.div(w,10**(t?.decimals??18))},[m]);return(0,Ar.useMemo)(()=>{let w=G.mul(i,G.mul(o,E)),y=G.mul(i,G.mul(r,A)),N=[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:G.thousandFormat(u)},{title:"wallet_extension_info_title_transfer_amount",value:Sr(mn([A,0]),{symbol:Js(t?.symbol),precision:JC(t)}).value,market:y},{title:"wallet_extension_info_title_internet_fee",value:Sr(E,{symbol:Js(D?.symbol),precision:D?.displayPrecision,isStableCoin:D?.stableCoin,useLargeNumberPrecision:!0}).value,market:w}];if(f){let b=Object.values(Jf(g)).filter(W=>!G.eq(W,0)).length,L=G.div(Object.values(Jf(g)).reduce((W,V)=>G.add(W,V),0),10**(D?.decimals??9)),F=G.mul(i,G.mul(o,L));N.push({title:"wallet_extension_info_title_rent_accounts",value:G.thousandFormat(b)}),N.push({title:"wallet_extension_info_title_rent_value",value:Sr(L,{symbol:Js(D?.symbol),precision:D?.displayPrecision}).value,market:F})}return N},[t,e,E,r,o,A,u,f])};v();C();var ar=O(ee()),ei=O($e());he();v();C();var Mr={root:"_root_16t0a_2",row:"_row_16t0a_65",nextRow:"_nextRow_16t0a_86",title:"_title_16t0a_113",subtitle:"_subtitle_16t0a_137",value:"_value_16t0a_163",icon:"_icon_16t0a_166"};function eD(t){let{icon:e,title:r,value:n,showIcon:o=!1,market:a}=t;return ar.default.createElement(S.Box,null,ar.default.createElement(S.Box,{className:Mr.title},T(r)),ar.default.createElement(S.Box,{className:(0,ei.default)(Mr.subtitle)},o&&(e||n)&&ar.default.createElement(Ye,{src:e,className:Mr.icon,text:n,size:Ye.SIZE.md}),ar.default.createElement(S.Box,{className:Mr.value},n)),a!==void 0&&ar.default.createElement(Be.DisplayAmount,{wrap:!0,useApproximate:!0,amount:a,mode:Be.LEGAL,type:Be.TYPE.secondary,size:Be.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function tD({className:t,statistics:e}){let{isSm:r,isMd:n,isLg:o}=Ue(),s=(()=>r?[2,3,e.length-5]:n?[4,e.length-4]:o?[5,e.length-5]:[e.length])(),i=c=>{let l=0;for(let g=0;g<c;g+=1)l+=s[g]||0;let f=l+(s[c]||0);return e.slice(l,f).filter(Boolean)};return ar.default.createElement(S.Box,{className:(0,ei.default)(Mr.root,t)},s.map((c,l)=>{if(c<=0)return null;let f=i(l);if(f.length===0)return null;let g=l===0?Mr.row:Mr.nextRow;return ar.default.createElement(S.Box,{key:l,className:g},f.map((h,m)=>ar.default.createElement(eD,{...h,key:`${l}-${m}`})))}))}var wa=tD;v();C();var ti=O(ee());v();C();var Te={root:"_root_1iryo_2",table:"_table_1iryo_38",row:"_row_1iryo_47",order:"_order_1iryo_52",addressError:"_addressError_1iryo_78",fromError:"_fromError_1iryo_81",text:"_text_1iryo_84",oneLineText:"_oneLineText_1iryo_106",moreLineText:"_moreLineText_1iryo_109",remove:"_remove_1iryo_112",success:"_success_1iryo_117",error:"_error_1iryo_130",open:"_open_1iryo_143",receiveError:"_receiveError_1iryo_146",errorIcon:"_errorIcon_1iryo_149",hash:"_hash_1iryo_154",hashText:"_hashText_1iryo_166",loader:"_loader_1iryo_179"};function rD({dataSource:t,columns:e,scroll:r}){let n=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return ti.default.createElement(S.Box,{className:Te.root},ti.default.createElement(ki,{columns:e,dataSource:t,className:Te.table,onHeaderCell:n,scroll:r}))}var Sa=rD;v();C();var Qf=O(yt());st();function nD(){let[t]=it(),[e]=ue(),[r]=qe(),[n]=ft(),[o]=dt(),[a]=Ae(),s=(0,Qf.useSelector)(lt);return()=>{let i={[J.ONE_TO_MANY]:"one_to_many",[J.MANY_TO_MANY]:"many_to_many",[J.MANY_TO_ONE]:"many_to_one"},c={[me.ALL]:"max",[me.RANDOM]:"range",[me.CUSTOM]:"specific_amount"},l={[He.NONE]:"no_interval",[He.RANDOM]:"range"},f={[Je.LOW]:"slow",[Je.MEDIUM]:"average",[Je.HIGH]:"fast",[Je.CUSTOM]:"custom"},g,h;return t===J.ONE_TO_MANY?(g=1,h=a.length):t===J.MANY_TO_ONE?(g=a.length,h=1):(g=a.length,h=a.length),{transaction_type:i[t],token:e?.symbol,chain:r?.chainId?parseInt(r?.chainId,16):null,sending_address_count:g,receiving_address_count:h,sending_amount_type:c[n?.type],interval_setting:l[o?.type],gas_level:f[s?.level],transactions:a.map(({from:m,to:p,txAmount:u,txHash:D,txStatus:E})=>{let A;return E===re.SUCCEED?A="succeed":E===re.FAILED&&(A="fail"),_i({from:m,to:p,sending_amount:Fi(u,10**e?.decimals),transaction_id:D,succeed_fail:A},Ei)})}}}var Ta=nD;je();v();C();var Oe=O(ee()),ii=O($e());st();he();v();C();v();C();v();C();var ya=O(ee());var ni=O($e());v();C();var ri=O(ee());var ed=O($e());var oD=({children:t,className:e,...r})=>ri.default.createElement(S.Box,{className:(0,ed.default)(Te.row,e),...r},ri.default.createElement(S.Box,null),t),sr=oD;function aD(t){let[e,r]=Ae(),{gotoAddressPage:n}=_t(),{index:o}=t,a=()=>{let s=[...e.slice(0,o),...e.slice(o+1)];r(s),s.length<=0&&n()};return ya.default.createElement(sr,null,ya.default.createElement(S.Box,{className:(0,ni.default)(Te.text),onClick:a},ya.default.createElement(ut,{className:(0,ni.default)("okx-wallet-plugin-trash",Te.remove)})))}var td=aD;v();C();var ir=O(ee()),Fa=O($e());he();function sD(t){let{error:e,showShortAddress:r=!1,from:n,order:o,to:a,isFromAddress:s=!1,showTextOneLine:i=!1,showOrder:c=!1,showError:l=!1,baseCoinBalance:f}=t,[g]=ue(),m=ht(g)?g:g?.baseCoin,p=e===er.BALANCE_INSUFFICIENT,u=!!e,D=p?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",E=(0,ir.useMemo)(()=>e===er.BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_balance"):e===er.FEE_BALANCE_INSUFFICIENT?T("wallet_extension_toast_insufficient_balance_amt_netfee",{token:m?.symbol,amount:Sr(f,{symbol:m?.symbol??"",precision:m?.displayPrecision}).value}):e,[e]),A=s?n:a,x=r?ir.default.createElement(Et,{title:A},No(A)):A;return ir.default.createElement(sr,null,c&&ir.default.createElement(S.Box,{className:Te.order},o,"."),ir.default.createElement(S.Box,{className:(0,Fa.default)(Te.text,{[Te.oneLineText]:i,[Te.moreLineText]:!i,[Te.receiveError]:l&&u})},x),l&&u&&ir.default.createElement(S.Box,{className:(0,Fa.default)(Te.addressError)},ir.default.createElement(Et,{title:E},ir.default.createElement(ut,{className:(0,Fa.default)(D,Te.errorIcon)}))))}var rd=sD;v();C();var oi=O(ee());var nd=O($e());he();st();function iD(t){let{txAmount:e,showTextOneLine:r}=t;return oi.default.createElement(sr,null,oi.default.createElement(S.Box,{className:(0,nd.default)(Te.text,{[Te.oneLineText]:r,[Te.moreLineText]:!r})},G.thousandFormat(mn([e||0,0]))))}var od=iD;v();C();var Rr=O(ee()),ad=O(ap());he();var ai=O($e());function uD(t){let{txHash:e}=t,[r]=qe(),n="",o=r.blockExplorerUrl||r.explorerUrl;o&&(n=cl(o,"tx",e));let a=()=>{e&&(n?globalThis.platform.openTab({url:n}):((0,ad.default)(e),$a.success({desc:Rr.default.createElement(Be.Text,{inherit:!0,forceWrap:!0},e),placement:$a.DIRECTION.top,title:T("wallet_receive_toast_address_copied")})))};return Rr.default.createElement(sr,{className:Te.hash,onClick:a},e?Rr.default.createElement(Rr.default.Fragment,null,Rr.default.createElement(S.Box,{className:(0,ai.default)(Te.text,Te.hashText)},No(e)),Rr.default.createElement(S.Box,null,Rr.default.createElement(ut,{className:(0,ai.default)(Te.open,{"okx-wallet-plugin-open-link":n,"okx-wallet-plugin-copy":!n})}))):"-")}var sd=uD;v();C();var on=O(ee()),id=O($e());he();v();C();var co={inputRoot:"_inputRoot_rigrr_1",input:"_input_rigrr_1",errorIcon:"_errorIcon_rigrr_8",textRoot:"_textRoot_rigrr_12"};function lD({editable:t,memo:e,index:r}){let[n,o]=Ae();if(t){let a=s=>{let i=s.target.value,c=[...n];c[r]={...c[r],memo:i,tonMemoError:i.length>200},o(c)};return on.default.createElement("div",{className:co.inputRoot},on.default.createElement(Fe,{className:co.input,style:{width:"320px"},size:Fe.SIZE.xs,value:n[r]?.memo||"",onChange:a}),n[r]?.tonMemoError&&on.default.createElement(Et,{title:T("wallet_extension_ton_tooltip_character_limit"),placement:Et.DIRECTION.bottomRight},on.default.createElement(ut,{className:(0,id.default)("okx-wallet-plugin-warning-circle-fill",co.errorIcon)})))}return on.default.createElement("div",{className:co.textRoot},on.default.createElement("div",{className:Te.text},e))}var ud=lD;v();C();var Vt=O(ee()),ba=O($e());v();C();var si={"error-icon":"_error-icon_nevzf_1",errorIcon:"_error-icon_nevzf_1","error-text":"_error-text_nevzf_4",errorText:"_error-text_nevzf_4"};function cD(t){let{isMobile:e}=Ue(),{txStatus:r,errorMsg:n}=t;return Vt.default.createElement(sr,null,(()=>{switch(r){case re.SUCCEED:return Vt.default.createElement(ut,{className:(0,ba.default)("okx-wallet-plugin-completed",Te.success)});case re.FAILED:return e?Vt.default.createElement(Et,{title:n},Vt.default.createElement(ut,{className:(0,ba.default)("okx-wallet-plugin-warning-circle",Te.error,si.errorIcon)})):Vt.default.createElement(Et,{title:n,textOverflow:{text:n}},Vt.default.createElement("div",{className:si.errorText},Vt.default.createElement("span",null,n)));case re.DROPPED:return Vt.default.createElement(ut,{className:(0,ba.default)("okx-wallet-plugin-warning-circle",Te.error)});case re.PENDING:return Vt.default.createElement(Ht,{size:Ht.SIZE.md,loaderClassName:Te.loader});default:return Vt.default.createElement("div",null,"-")}})())}var ld=cD;var Ke={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status",MEMO:"memo"},Na={[Ke.ADDRESS]:rd,[Ke.AMOUNT]:od,[Ke.ACTION]:td,[Ke.HASH]:sd,[Ke.STATUS]:ld,[Ke.MEMO]:ud};var _r={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action",MEMO:"memo"},cd=[{title:"wallet_extension_list_title_send_address",key:_r.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:_r.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:_r.TX_AMOUNT,type:Ke.AMOUNT,width:100},{title:"wallet_extension_list_title_operation",key:_r.ACTION,type:Ke.ACTION,width:50}];var fo={[Je.HIGH]:"wallet_extension_gas_select_fast",[Je.MEDIUM]:"wallet_extension_gas_select_average",[Je.LOW]:"wallet_extension_gas_select_slow",[Je.CUSTOM]:"commonall_filter_dropdown_custom"},fd=[{value:me.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:me.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:me.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];v();C();var xt={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};function dd(){return Oe.default.createElement("div",{className:xt.gweiText},T("extension_wallet_transaction_input_gwei"))}var fD=()=>new Promise((t,e)=>{let r=Hr.tip({children:T("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:T("wallet_extension_btn_general_confirm"),cancelText:T("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){t(),r.destroy()},onCancel(){e(),r.destroy()}})});function dD({custom:t,onClose:e,network:r,onConfirm:n,isSupportEip1559:o}){let{gasPrice:a,gasLimit:s,baseFeePerGas:i,maxFeePerGas:c,maxPriorityFeePerGas:l}=t,[f,g,h]=Po(r?.realChainIdHex||r?.chainId),m=Wo(i),p=o?`${T("extension_wallet_transaction_text_maxbase_fee")} (${T("extension_wallet_transaction_text_current",{number:m})})`:T("wallet_extension_cosmos_title_gasfee"),u=Wo(o?pn(c,l):a),[D,E]=(0,Oe.useState)(u),A=Wo(l),[x,w]=(0,Oe.useState)(A),[y,N]=(0,Oe.useState)(!!f),b=W=>{let V=W.target.checked;N(V),V&&$i()};(0,Oe.useEffect)(()=>{N(!!f)},[f]);let[L]=(0,Oe.useState)(s),F=(0,Oe.useMemo)(()=>{let W=!Number(D);return o&&(W=W||!Number(x)),W},[D,x,o]);return Oe.default.createElement(Hr.Confirmation,{maskClosable:!1,visible:!0,title:T("commonall_filter_dropdown_custom"),confirmText:T("commonall_text_btn_confirm"),cancelText:T("commonall_text_btn_cancel"),confirmDisabled:F,onConfirm:async()=>{let{price:W,usdToThisRate:V}=t,M=Rn(o?xo(D,x):D),{networkFee:q,networkFeeInt:U,networkFeeMarket:H}=dr({gasPrice:M,gasLimit:L,price:W,usdToThisRate:V}),ne={...t,isDefault:y,networkFee:q,networkFeeInt:U,networkFeeMarket:H,gasPrice:M,maxFeePerGas:M,maxPriorityFeePerGas:Rn(x),gasLimit:L};!Di(f)&&!y?(await fD(),h()):g({isDefault:!0,isSupportEip1559:o,gasPrice:M,maxFeePerGas:M,maxPriorityFeePerGas:Rn(x),baseFeePerGas:pn(M,Rn(x))}),n(ne)},onCancel:e,onClose:e},Oe.default.createElement(S.Box,null,Oe.default.createElement(Fe.Number,{className:xt.customInput,size:Fe.SIZE.sm,title:p,placeholder:u,value:D,precision:9,enableMinus:!1,min:0,onChange:E,suffix:Oe.default.createElement(dd,null),"data-testid":Dn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_INPUT}),o&&Oe.default.createElement(Fe.Number,{className:xt.customInput,size:Fe.SIZE.sm,placeholder:A,title:T("extension_wallet_transaction_text_priority_fee"),value:x,precision:9,enableMinus:!1,min:0,onChange:w,suffix:Oe.default.createElement(dd,null),"data-testid":Dn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_MAX_PRIORITY_FEE_PER_GAS_INPUT})),Oe.default.createElement(S.Box,{className:xt.defaultTip},T("wallet_extension_mid_checkbox_setting_default")),Oe.default.createElement(wr,{checked:y,onChange:b,className:xt.defaultChecker},T("wallet_extension_bot_alert_default_gas",{networkName:r.name})))}function mD({loading:t,value:e,network:r,className:n,options:o,onChange:a=()=>{},onCustomChange:s=()=>{}}){let[i]=_n(),[c,l]=(0,Oe.useState)(!1);return Oe.default.createElement(S.Spin,{loading:t&&!o?.length,className:(0,ii.default)(xt.root,n)},Oe.default.createElement(S.Box,{className:xt.title},T("wallet_extension_gas_title_internet_fee")),Oe.default.createElement(S.Box,{className:xt.setting},o.map(f=>{let{level:g,unitPriceDisplay:h}=f,m=T(fo[g]);return Oe.default.createElement(S.Box,{className:(0,ii.default)(xt.item,e?.level===g?xt.active:xt.inactive),key:g,"data-testid":`${Dn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_ITEM}-${g}`,onClick:()=>{f.level===Je.CUSTOM?l(!0):a?.(f)}},Oe.default.createElement(S.Box,{className:xt.label},m),Oe.default.createElement(S.Box,{className:xt.fee},Oe.default.createElement(Be.Text,{type:Be.TYPE.secondary,size:Be.SIZE.xs,ellipsis:{tooltip:!0}},h),Oe.default.createElement(S.Box,null,T("extension_wallet_transaction_input_gwei"))))})),c&&Oe.default.createElement(dD,{network:r,isSupportEip1559:i,custom:o[o.length-1],onConfirm:f=>{s(f),l(!1)},onClose:()=>{l(!1)}}))}var md=mD;v();C();var ur=O(ee()),pd=O($e());he();v();C();var ui=O(ee());function pD(){let[t,e]=(0,ui.useState)(!1),[r,n]=(0,ui.useState)(!1),o=(c,l)=>c&&l&&Number(c)>Number(l);return{hasMinError:t,hasMaxError:r,checkMaxError:(c,l)=>{e(!1),n(o(c,l))},checkMinError:(c,l)=>{n(!1),e(o(c,l))},clearError:()=>{n(!1),e(!1)}}}var Oa=pD;v();C();var jr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function hD({value:t,className:e,onChange:r}){let{type:o,min:a,max:s}=t,{hasMinError:i,hasMaxError:c,checkMaxError:l,checkMinError:f,clearError:g}=Oa(),h=y=>{let N={...t,...y};r?.(N)},m=y=>{let N=y;h({min:N}),f(N,s)},p=y=>{h({max:y}),l(a,y)},u=T("wallet_extension_interval_title_send_interval"),D=[{value:He.NONE,label:T("wallet_extension_interval_select_no_interval")},{value:He.RANDOM,label:T("wallet_extension_interval_dropdown_random_interval")}],E=T("wallet_extension_interval_subtitle_lowest"),A=T("wallet_extension_interval_subtitle_highest"),x=y=>{let N=y.value;N!==o&&(h({type:N,min:"",max:""}),g())},w=o===He.NONE;return ur.default.createElement(S.Box,{className:(0,pd.default)(jr.root,e)},ur.default.createElement(S.Box,{className:jr.type},ur.default.createElement(S.Box,{className:jr.title},u),ur.default.createElement(S.Box,null,ur.default.createElement(hn,{options:D,value:o,onChange:x,align:hn.DIRECTION.right}))),ur.default.createElement(S.Box,{className:jr.setting},ur.default.createElement(S.Box,{className:jr.random},ur.default.createElement(Fe.Number,{className:jr.input,title:E,value:a,onChange:m,size:Fe.SIZE.lg,placeholder:"0",min:0,max:600,disabled:w,error:i,errorType:Fe.TIP_TYPE.always}),ur.default.createElement(Fe.Number,{className:jr.input,title:A,value:s,onChange:p,size:Fe.SIZE.lg,placeholder:"0",disabled:w,min:0,max:600,error:c,errorType:Fe.TIP_TYPE.always}))))}var hd=hD;v();C();var wt=O(ee()),gd=O($e()),vd=O(Ee());he();je();v();C();var Br={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};function gD({value:t,className:e,options:r,onChange:n}){let[o]=ue(),[a]=Yo(),s=Number(o?.orderDecimalNum??o?.decimals),{hasMinError:i,hasMaxError:c,checkMaxError:l,checkMinError:f,clearError:g}=Oa(),h=A=>{n?.({min:A}),f(A,t.max)},m=A=>{n?.({max:A}),l(t.min,A)},p=A=>{n?.({amount:A})},u=(0,vd.useMemoizedFn)(A=>{A?.value!==t.type&&(n?.({type:A?.value,amount:"",min:"",max:""}),g())},[t]),D=G.thousandFormat("0.00"),E=(0,wt.useMemo)(()=>o?.localType===De&&ht(o)&&G.div(a,10**o?.decimals)||0,[a,o]);return wt.default.createElement(S.Box,{className:(0,gd.default)(Br.root,e)},wt.default.createElement(S.Box,{className:Br.type},wt.default.createElement(S.Box,{className:Br.title},T("wallet_extension_amount_title_transfer_amount")),wt.default.createElement(S.Box,null,wt.default.createElement(hn,{options:r,value:t?.type,onChange:u,align:hn.DIRECTION.right}))),wt.default.createElement(S.Box,{className:Br.setting},t?.type===me.RANDOM?wt.default.createElement(S.Box,{className:Br.random},wt.default.createElement(Fe.Number,{enableMinus:!1,className:Br.input,suffix:o?.symbol,title:T("wallet_extension_amount_input_lowest"),value:t?.min,onChange:h,size:Fe.SIZE.lg,precision:s,placeholder:D,min:E,error:i,errorType:Fe.TIP_TYPE.always}),wt.default.createElement(Fe.Number,{suffix:o?.symbol,className:Br.input,title:T("wallet_extension_amount_input_highest"),value:t?.max,onChange:m,precision:s,size:Fe.SIZE.lg,placeholder:D,min:E,error:c,errorType:Fe.TIP_TYPE.always})):wt.default.createElement(S.Box,{className:Br.custom},wt.default.createElement(Fe.Number,{enableMinus:!1,suffix:o?.symbol,title:T("wallet_extension_amount_subtitle_send_amount"),value:t?.amount,size:Fe.SIZE.lg,onChange:p,disabled:t?.type===me.ALL,precision:s,placeholder:t?.type===me.ALL?T("wallet_extension_amount_dropdown_all_balance"):D,min:E}))))}var Cd=gD;v();C();var La=O(ee()),xd=O(yt()),Pa=O(Ee());he();v();C();var Dd=O(ee());var Ia=(t,e={})=>(r,n)=>Dd.default.createElement(t,{...n,...e});Gn();je();v();C();st();var vD=(t,e,r=0)=>+xi(t,e,!0).toFixed(r),St=vD;v();C();he();Gn();var ka=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:n,usedFeeCoinBalance:o})=>{if(G.lt(r,o))return er.FEE_BALANCE_INSUFFICIENT;if(e){if(G.lt(t,G.add(n,o)))return er.BALANCE_INSUFFICIENT}else if(G.lt(t,n))return er.BALANCE_INSUFFICIENT;return null},Ed=({balance:t,solRent:e,usedRent:r,txAmount:n,isBaseCoin:o,formattedSolRent:a,baseCoinBalance:s,usedCoinBalance:i,usedFeeCoinBalance:c})=>{let l,f=!0;if(G.lt(s,c))return er.FEE_BALANCE_INSUFFICIENT;if(o){if(G.lt(t,G.add(i,c))&&(f=!1),G.lt(n,e))return T("walletextension_toast_text_minimum_rent_fee",{number:a});l=G.sub(s,G.add(c,i))}return G.lt(s,G.add(c,r))?T("extension_wallet_transfer_alert_insufficient"):(o||(l=G.sub(s,G.add(c,r)),G.lt(t,i)&&(f=!1)),f?Number(l)!==1&&G.lt(l,e)&&G.gt(l,0)?T("walletextension_toast_text_reserve_rent_exempt",{number:a}):null:er.BALANCE_INSUFFICIENT)},Ad=async({coin:t,balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s})=>{let i=ka({balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s});if(i)return i;let{ZksyncWallet:c}=await So(),l=r&&await c.getCloseAmounts(r);return l&&!G.eq(l,r)?T("wallet_extension_placeholder_zksync_max_num",{amount:G.showFloorTruncation(G.div(l,10**t?.decimals),t?.decimals,!1)}):null};function _d({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a,tonSignInfo:s,baseCoinDecimals:i,index:c,mode:l,amountSetting:f}){if(s?.getCustomPayloadInfoRpcError)return T("wallet_extension_multisender_notice_failed_try_again");let g=ka({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a});if(g)return g;if(f.type!==me.CUSTOM&&bi(e,0))return T("wallet_extension_ton_error_cannot_be_zeror");if(!r&&s){let h=s?.minTonLimit,m=G.add(h||"0",a||"0");if(l===J.ONE_TO_MANY&&(m=G.add(m,G.mul(h,c))),G.gt(m,n)){let p=G.div(m,10**i);return T("wallet_extension_ton_errormessage_insufficient_balance_gas2",{amount:p})}}return null}var Bd=9,wd=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:n}=Ue(),[o]=it(),[a]=Yo(),[s]=An(),[i,c]=(0,La.useState)([]),[l,f]=Ae(),g=(0,xd.useSelector)(pu),h=yr(t?.baseCoinId===0?t.coinId:t?.baseCoinId),m=ht(t);(0,Pa.useAsyncEffect)(async()=>{if(!r)return;let{type:A,amount:x,min:w,max:y}=r;A===me.CUSTOM&&f(l?.map(N=>({...N,txAmount:G.mul(x,10**(t?.decimals??18))}))),A===me.RANDOM&&f(l?.map(N=>{let b=w&&y&&Number(w)<=Number(y)?St(w,y,6):0;return{...N,txAmount:G.mul(b,10**(t?.decimals??18))}}))},[r,l?.length,t?.decimals]);let p=async A=>{let{ZksyncWallet:x}=await So();return await Promise.all(A.map(async y=>({...y,txAmount:y?.txAmount&&await x.getCloseAmounts(y?.txAmount)})))};(0,Pa.useAsyncEffect)(async()=>{if(!r)return;let{type:A}=r;if(A===me.ALL&&o===J.ONE_TO_MANY){let[{balance:x}]=l,w=l?.length,y=m?pn(x,G.mul(e?.networkFeeInt,w)):x,N=Ya(G.div(y,l?.length),0),b=Ya(G.div(x,w),0);f(l.map((L,F)=>(F===w-1&&(b=G.sub(x,G.mul(b,w-1)),N=m?G.sub(b,e?.networkFeeInt):b),{...L,txAmount:N,usedBalance:b})))}if(A===me.ALL&&o!==J.ONE_TO_MANY){let x=l.map(w=>{let{balance:y}=w,N=m?pn(y,e?.networkFeeInt):y;return{...w,txAmount:N}});f(t?.localType===fe?await p(x):x)}},[r.type,l?.length,t?.decimals,e?.networkFeeInt]),(0,Pa.useAsyncEffect)(async()=>{c(await(async()=>{let x=0,w=0,y=0,N=e?.networkFeeInt,b=ka;return t?.localType===De?b=Ed:t?.localType===fe?b=Ad:t?.localType===ve&&(b=F=>_d({...F,tonSignInfo:g,baseCoinDecimals:h?.decimals,mode:o,amountSetting:r})),await Promise.all(l.map(async(F,W)=>{let{to:V,txAmount:M,balance:q,baseCoinBalance:U}=F,H=s[V]||"0";return o===J.ONE_TO_MANY?(y=G.add(y,H),x=G.add(x,M),w=G.add(w,N)):(y=H,x=M,w=N),{...F,txAmount:G.truncate(G.div(M,10**(t?.decimals??18)),6,!1),index:W,showShortAddress:n,showTextOneLine:!1,order:W+1,error:await b({index:W,balance:q,needRent:H,usedRent:y,solRent:a,txAmount:M,isBaseCoin:m,formattedSolRent:Sr(a,{useContractPrecision:!0,contractPrecision:{decimals:Bd},precision:Bd}).value,baseCoinBalance:U,usedCoinBalance:x,usedFeeCoinBalance:w})}}))})())},[n,a,s,o,m,l,t?.decimals,h?.decimals,e?.networkFeeInt,g,r]);let u=(0,La.useMemo)(()=>({[_r.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0,showShortAddress:t?.localType===ve},[_r.TO]:{showShortAddress:t?.localType===ve},[_r.MEMO]:{editable:!0}}),[t?.localType]),D=[...cd];t?.localType===ve&&D.splice(2,0,{title:"wallet_extension_ton_header_comment",key:_r.MEMO,type:Ke.MEMO,width:380});let E=D.map(A=>{let{title:x,key:w,type:y,...N}=A;return{title:T(x),dataIndex:w,key:w,render:Ia(Na[y],{...u[w],address:w}),...N}});return{dataSource:i,columns:E}};v();C();var xr=O(ee()),an=O(yt()),mo=O(Ee());he();je();var CD=21e3,Sd=({from:t,to:e,token:r,network:n,txAmount:o=0})=>{let a=(0,an.useDispatch)(),s=(0,an.useSelector)(Oo),[i]=Po(n?.realChainIdHex||n?.chainId),c=(0,an.useSelector)(mu),[l]=(0,xr.useState)(!1),[f,g]=(0,xr.useState)([]),[h,m]=(0,xr.useState)(0),[p,u]=(0,xr.useState)(CD),D=Hu(),E=Zo(),A=xl(),x=wl(),w=Xo(r?.coinId),y=Jo(),N=(0,an.useSelector)(lt),b=Ko(n?.rpcUrl),L=Ba(),F=(0,mo.useMemoizedFn)(U=>{a(Ft(U))},[]),W=(0,mo.useMemoizedFn)(U=>{a(Ft(U)),g(H=>{let ne=[...H],oe=ne.pop();return ne.push({...oe,...U,unitPriceDisplay:D(U.gasPrice)}),ne})}),V=ct(),M=(0,an.useSelector)(vn);(0,mo.useDebounceEffect)(()=>{[ye,De,We,fe,ve].includes(r?.localType)||(async()=>{let U=await b({value:o,to:Qe(e,r?.localType),from:Qe(t,r?.localType)},Qe(r?.address,r.localType));V&&(U=G.ceilMul(U,M?.gasLimit,0)),u(U)})()},[o],{wait:500}),(0,xr.useEffect)(()=>{(async()=>{let U=await L({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});m(U)})()},[]);let{rpcNetworks:q}=Vi();return(0,xr.useEffect)(()=>{if(!(!q?.length&&V)&&![ye,De,We,fe,ve].includes(r?.localType)){let U,H=c.map(ae=>{let{level:we,gasPrice:Ce}=ae,{networkFee:Ze,networkFeeInt:B,networkFeeMarket:Y}=dr({gasPrice:Ce,gasLimit:p,price:h,usdToThisRate:s?.usdToThisRate}),j={...ae,gasLimit:p,tokenPrice:h,networkFee:Ze,networkFeeInt:B,networkFeeMarket:Y,currencySymbol:s?.symbol,label:T(fo[we]),usdToThisRate:s?.usdToThisRate,unitPriceDisplay:D(Ce)};return we===Je.MEDIUM&&(U=j),j}),ne={...U},oe=!1,de=N?.level;i?(ne={...i,...dr({gasLimit:p,price:h,gasPrice:i.gasPrice,usdToThisRate:s?.usdToThisRate})},oe=!0):de===Je.CUSTOM&&(ne=[...f].pop()||U);let X={...ne,level:Je.CUSTOM,unitPriceDisplay:D(ne.gasPrice),label:T(fo[Je.CUSTOM])};if(H.push(X),g(H),de){let ae=H.find(we=>we.level===de);a(Ft(ae||U))}else a(oe?Ft(X):Ft(U))}},[p,c,q,V]),(0,xr.useEffect)(()=>{let U=async()=>{let X=await E({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:ae}=X||{};a(Ro(ae)),a(Ft(X))},H=async()=>{let X=await A({to:e,from:t,value:o,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});a(Ft(X))},ne=async()=>{let X=await w({to:e,chainId:r?.chainId,contractAddress:r?.address});a(Ft(X))},oe=async()=>{let X=await x({coinId:r?.coinId,address:t});a(Ft(X))},de=async()=>{let X=await y({baseCoinId:r?.baseCoinId,coinId:r?.coinId,chainId:r?.chainId,from:t,to:e,tokenAddress:r?.address,decimals:r?.decimals,amount:o});a(Ft(X))};r?.localType===fe?ne():r?.localType===De?U():r?.localType===We?H():r?.localType===ye?oe():r?.localType===ve&&de()},[]),[l,f,F,W]};v();C();he();var Td=O(Ee());je();var yd=O(ee());var Fd=t=>{let[e,r]=ft(),o=fd.filter(({value:s})=>!(t===fe&&s===me.RANDOM)).map(({label:s,value:i})=>({value:i,label:T(s)})),a=(0,Td.useMemoizedFn)((s={})=>{r({...e,...s})},[e]);return(0,yd.useLayoutEffect)(()=>{t===fe&&e?.type===me.RANDOM&&r({type:me.CUSTOM})},[t]),[e,o,a]};v();C();var po=O(ee()),bd=O(Ee());var DD=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:n}=_t(),o=(0,po.useMemo)(()=>{if(!e)return!0;if(e.type===me.CUSTOM)return!e.amount&&e.amount!==0;if(e.type===me.RANDOM){let{min:l,max:f}=e;return!l||!f||Number(l)>Number(f)||Number(f)===0}return!1},[e]),a=(0,po.useMemo)(()=>{if(!r)return!0;if(r.type===He.RANDOM){let{min:l,max:f}=r;return!l||!f||Number(l)>Number(f)}return!1},[r]),s=(0,po.useMemo)(()=>t?.some(({error:l,tonMemoError:f})=>!!l||!!f),[t]),i=(0,po.useMemo)(()=>o||a||s,[o,a,s]),c=(0,bd.useMemoizedFn)(()=>{qi?.(),n()},[]);return[i,c]},Nd=DD;v();C();var Rt={root:"_root_1mpnv_1",statistics:"_statistics_1mpnv_24",setting:"_setting_1mpnv_45",amount:"_amount_1mpnv_64",no_gas:"_no_gas_1mpnv_167",noGas:"_no_gas_1mpnv_167",interval:"_interval_1mpnv_257",gas:"_gas_1mpnv_440",address:"_address_1mpnv_531",footer:"_footer_1mpnv_611",alert:"_alert_1mpnv_682"};var ED=()=>{let{gotoAddressPage:t}=_t(),{isSm:e}=Ue(),[r]=ue(),[n]=qe(),[o]=Ae(),a=(0,Od.useSelector)(lt),s=Ta(),i=wi(Si(o,"balance"))[0],c=![ye,De,We,fe,ve].includes(r?.localType),[l,f,g,h]=Sd({...i,network:n,token:r,isEvmTransaction:c}),[m,p,u]=Fd(r?.localType),{dataSource:D,columns:E}=wd({token:r,network:n,amountSetting:m,networkFee:a}),[A={},x]=dt(),[w,y]=Nd({dataSource:D,amountSetting:m,intervalSetting:A}),N=xa();return rt.default.createElement(br,{footer:rt.default.createElement(S.Box,{className:Rt.footer},rt.default.createElement(te,{block:e,category:te.CATEGORY.outline,type:te.TYPE.primary,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{t()}},T("wallet_extension_footer_btn_back")),rt.default.createElement(te,{block:e,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{y(),Hi(s())},disabled:w||!a},T("wallet_extension_footer_btn_confirm"))),useOkg:!1},rt.default.createElement(S.Box,{className:(0,ho.default)(Rt.root)},rt.default.createElement(Nn,{title:T("wallet_extension_amount_title_input_amount"),subtitle:T("wallet_extension_amount_subtitle_input_number")}),rt.default.createElement(wa,{className:Rt.statistics,statistics:N}),rt.default.createElement(S.Box,{className:Rt.setting},rt.default.createElement(S.Box,{className:(0,ho.default)(Rt.amount,{[Rt.no_gas]:!c})},rt.default.createElement(Cd,{value:m,options:p,onChange:u})),rt.default.createElement(S.Box,{className:(0,ho.default)(Rt.interval,{[Rt.no_gas]:!c})},rt.default.createElement(hd,{value:A,onChange:x})),c&&rt.default.createElement(S.Box,{className:Rt.gas},rt.default.createElement(md,{loading:l,network:n,options:f,onChange:g,value:a,onCustomChange:h})))),rt.default.createElement(S.Box,{className:(0,ho.default)(Rt.address)},r?.localType===fe&&m.type===me.ALL&&rt.default.createElement(jn,{closable:!1,className:Rt.alert,title:T("wallet_extension_toast_zksync_max_num")}),rt.default.createElement(Sa,{dataSource:D,columns:E})))},Id=rt.default.memo(ED);v();C();var Dt=O(ee());he();v();C();var Nt=O(ee());he();var go=O($e());je();v();C();var Ct={root:"_root_a40u5_2",select:"_select_a40u5_67",titleBox:"_titleBox_a40u5_88",title:"_title_a40u5_88",tip:"_tip_a40u5_115",card:"_card_a40u5_131",icon:"_icon_a40u5_188",checkBox:"_checkBox_a40u5_204",check:"_check_a40u5_204",disabled:"_disabled_a40u5_220",active:"_active_a40u5_224",disabledContent:"_disabledContent_a40u5_227",name:"_name_a40u5_230",subtitle:"_subtitle_a40u5_237"};function AD(t){let{icon:e,name:r,mode:n,disable:o,active:a,onSelected:s,subtitle:i}=t,c=()=>{s(n);let l={[J.ONE_TO_MANY]:"1tomany",[J.MANY_TO_MANY]:"manytomany",[J.MANY_TO_ONE]:"manyto1"};Gi({button_name:l[n]})};return Nt.default.createElement(S.Box,{className:(0,go.default)(Ct.card,{[Ct.active]:a,[Ct.disabled]:o}),onClick:c},Nt.default.createElement("img",{src:e,height:72,alt:"",className:(0,go.default)(Ct.icon,{[Ct.disabledContent]:o})}),Nt.default.createElement(S.Box,{className:(0,go.default)(Ct.name,{[Ct.disabledContent]:o})},r),i&&Nt.default.createElement(S.Box,{className:(0,go.default)(Ct.subtitle,{[Ct.disabledContent]:o})},i),a&&Nt.default.createElement(S.Box,{className:Ct.checkBox},Nt.default.createElement(wr.Circle,{checked:!0})))}function _D(){let t=T("wallet_extension_type_title_transaction_method");return Nt.default.createElement(S.FlexBox,{className:Ct.titleBox,align:S.ALIGN.center},Nt.default.createElement(S.Box,{className:Ct.title},t))}function BD(t){let{mode:e,onSelected:r,selectedNetwork:n}=t,o=jo({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),a=jo({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),s=jo({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),i={[J.ONE_TO_MANY]:{mode:J.ONE_TO_MANY,icon:o,disable:n?.localType===fe,name:T("wallet_extension_type_pic_one_to_many")},[J.MANY_TO_ONE]:{mode:J.MANY_TO_ONE,icon:a,name:T("wallet_extension_type_pic_many_to_one")},[J.MANY_TO_MANY]:{mode:J.MANY_TO_MANY,icon:s,name:T("wallet_extension_type_pic_many_to_many")}};return Nt.default.createElement(S.Box,{className:Ct.root},Nt.default.createElement(_D,null),Nt.default.createElement(S.Box,{className:Ct.select},Object.values(i).map((c,l)=>Nt.default.createElement(AD,{key:l,onSelected:r,active:c.mode===e,...c}))))}var kd=BD;v();C();var xe=O(ee()),Ma=O(Ee()),li=O($e()),Md=O(Ou());he();Gn();je();v();C();var Pd=O(ee());var xD=t=>(0,Pd.useCallback)(()=>{globalThis.platform.openExtensionInPopup(`${ku}?network=${t}&close=true`,"",!1)},[t]),Ld=xD;v();C();var Kt={root:"_root_1ggs6_1",title:"_title_1ggs6_4",inputWrap:"_inputWrap_1ggs6_22",option:"_option_1ggs6_25",inputPopup:"_inputPopup_1ggs6_37",show:"_show_1ggs6_53",loadingWrap:"_loadingWrap_1ggs6_56","select-up-active":"_select-up-active_1ggs6_62",selectUpActive:"_select-up-active_1ggs6_62","item-image":"_item-image_1ggs6_66",itemImage:"_item-image_1ggs6_66","arrow-down-icon":"_arrow-down-icon_1ggs6_70",arrowDownIcon:"_arrow-down-icon_1ggs6_70","add-custom-coin":"_add-custom-coin_1ggs6_74",addCustomCoin:"_add-custom-coin_1ggs6_74"};var wD="0x",SD=async(t,e)=>{try{return!Ju(e)||await t.getCode(e)===wD}catch{return!0}},TD=async(t,e)=>{let{ethers:r}=await Un(),n=new r.Contract(t,Md.default,e),[o,a,s]=await Promise.all([n.symbol(),(await n.decimals()).toString(),n.name()]);return{name:s,symbol:o,decimals:a}};function yD(t,e){let{value:r,options:n,disabled:o,selectedNetwork:a,onSelect:s,onInputChange:i,onCustomContractChange:c,refreshInfiniteScrollRef:l,tokensLoadingMore:f}=t,g=(0,xe.useRef)(),h=(0,xe.useRef)(!1),[m,p]=(0,xe.useState)(!1),[u,D]=(0,xe.useState)(!1),[E,A]=(0,xe.useState)(!1),[x,w]=(0,xe.useState)(r?.address||""),[y,N]=(0,xe.useState)(!1),b=(0,xe.useMemo)(()=>![ye,De,We,fe,ve].includes(a?.localType),[a?.localType]),L=(0,xe.useMemo)(()=>!b&&!n?.length&&x&&a?.localType!==fe,[b,n?.length,x,a?.localType]),F=oe=>(A(!1),w(""),s(oe?{...oe,custom:!1}:null)),W=(0,Ma.useMemoizedFn)(async({target:oe})=>{w(oe?.value)},[a?.rpcUrl]);(0,xe.useEffect)(()=>{i?.(x)},[x,i]);let V=async()=>{if(h.current)return;let oe=n.find(({address:de})=>!!x&&de===x);if(oe)F(oe);else if(x&&b){let de=await Lo(a?.rpcUrl);if(await SD(de,x)===!1){let ae=await TD(x,de);c?.({...ae,address:x,custom:!0}),A(!1)}else A(!0),c?.(null)}};(0,xe.useEffect)(()=>{w(""),A(!1)},[a?.chainId]);let M=ct();(0,xe.useEffect)(()=>{w(""),A(!1)},[M]);let q=x&&E,U=!!n?.length;(0,xe.useEffect)(()=>{!m||(U?U&&D(!0):D(!1))},[n]),(0,xe.useLayoutEffect)(()=>{u&&l?.()},[u,l]),(0,Ma.useClickAway)(()=>{if(y){N(!1);return}m&&p(!1),u&&D(!1)},g);let H=T("wallet_extension_type_placeholder_select_crypto"),ne=xe.default.createElement("span",null,yi("wallet_extension_multisender_search_tips_no_results_add",{add:xe.default.createElement("span",{onClick:Ld(a?.name),className:Kt.addCustomCoin,"data-testid":Dn.BATCH_TRANSFER_PAGE.ADD_CUSTOM_COIN},T("wallet_extension_multisender_search_tips_textbtn_add_custom"))}));return xe.default.createElement(S.Box,{className:Kt.root},xe.default.createElement(S.Box,{className:Kt.title},T("wallet_extension_type_title_select_coin")),xe.default.createElement("div",{className:Kt.inputWrap},xe.default.createElement(Fe,{getBoxRef:oe=>{g.current=oe},style:{width:"100%"},error:q&&T("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),tips:L?ne:"",placeholder:H,value:r&&r?.custom===!1?r?.symbol:x||r?.address,onChange:W,onBlur:()=>{V()},onFocus:()=>{p(!0),U&&D(!0)},size:Fe.SIZE.xl,disabled:o,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:xe.default.createElement(Ye,{className:(0,li.default)({[Kt["select-up-active"]]:u}),icon:"okx-wallet-plugin-arrow-small-down",size:Ye.SIZE.xs}),onClear:()=>(N(!0),h.current=!1,F(null))}),!!u&&xe.default.createElement("div",{ref:e,className:(0,li.default)(Kt.inputPopup,{[Kt.show]:u})},n.map(oe=>{let{image:de,imageUrl:X,symbol:ae,address:we}=oe;return xe.default.createElement("div",{className:Kt.option,key:we||ae,onMouseDown:()=>{h.current=!0},onClick:()=>{F(oe)}},xe.default.createElement(Ye,{className:Kt.itemImage,src:de||X,text:ae,size:Ye.SIZE.md}),ae)}),!!f&&xe.default.createElement("div",{className:Kt.loadingWrap},xe.default.createElement(Ht.Circle,{size:Ht.SIZE.md})))))}var Rd=xe.default.forwardRef(yD);v();C();var sn=O(ee());he();v();C();var On={"retina-border-basic":"_retina-border-basic_1vvj9_1",retinaBorderBasic:"_retina-border-basic_1vvj9_1",root:"_root_1vvj9_30",title:"_title_1vvj9_95",item:"_item_1vvj9_118",question:"_question_1vvj9_194",answer:"_answer_1vvj9_211"};v();C();var In=O(ee());v();C();var FD=t=>`${Lu()}${t}`,jd=FD;he();var zd=()=>{let t=jd("/cdn/assets/files/235/C7BA61E964654AF6.csv");return{questions:[{question:T("wallet_extension_faq_title_distinction"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_one_to_many"))},{question:T("wallet_extension_sending_title_multisender_network"),answer:In.default.createElement("pre",null,T("wallet_extension_sending_subtitle_multisender_evm"))},{question:T("wallet_extension_faq_title_what_transfer"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_definition"))},{question:T("wallet_extension_faq_title_how_transfer"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_method",{btn:In.default.createElement(zn,{type:zn.TYPE.primary,href:t,weight:zn.WEIGHT.muted,size:zn.SIZE.sm},T("wallet_extension_multisender_btn_download"))}))}]}};function bD(){let t=T("wallet_extension_faq_maintitle_question"),{questions:e}=zd();return sn.default.createElement(S.Box,{className:On.root},sn.default.createElement(S.Box,{className:On.title},t),sn.default.createElement(S.Box,null,e.map((r,n)=>sn.default.createElement(S.Box,{key:n,className:On.item},sn.default.createElement(S.Box,{className:On.question},r.question),sn.default.createElement(S.Box,{className:On.answer},r.answer)))))}var Wd=bD;v();C();var Tt=O(ee()),Ud=O(yt()),Ra=O(Ee());he();v();C();var Zt={root:"_root_1jex4_2",footer:"_footer_1jex4_11",network:"_network_1jex4_80",networkTitle:"_networkTitle_1jex4_156",networkSelectBox:"_networkSelectBox_1jex4_175",networkSelect:"_networkSelect_1jex4_175",tokenSelect:"_tokenSelect_1jex4_221",icon:"_icon_1jex4_262",loader:"_loader_1jex4_265","network-icon":"_network-icon_1jex4_268",networkIcon:"_network-icon_1jex4_268"};var ND=(t,e)=>t;function OD(t){let e=(0,Tt.useRef)(t);return(0,Ra.useDeepCompareEffect)(()=>{e.current=t},[t]),e.current}var ID=()=>{let[t,e]=(0,Tt.useState)(!1),r=rl(),[,n]=ue(),[,o]=Ae(),{isRpcMode:a,currentNetworkUniqueId:s}=(0,Ud.useSelector)(Ki),i=(0,Tt.useMemo)(()=>r.find(p=>ND(a,p)?p.uniqueId===s:p.netWorkId===s),[r,a,s]),c=OD(i),[l,f]=qe(c),g=(0,Tt.useMemo)(()=>r.map(p=>{let{chainId:u,icon:D,chainName:E,rpcUrl:A}=p;return{network:p,value:u,searchKeyword:E,label:Tt.default.createElement(S.FlexBox,{align:S.ALIGN.center,style:{height:"20px",width:"100%"}},Tt.default.createElement(S.FlexBox,{align:S.ALIGN.center,style:{flex:1}},l?.rpcUrl===A&&t?Tt.default.createElement(Ht,{className:Zt.loader,size:Ht.SIZE.md}):Tt.default.createElement(Ye,{className:Zt.networkIcon,src:D,text:E,size:Ye.SIZE.md}),E))}}),[r,l?.rpcUrl,t]),h=async p=>{try{e(!0),await(await Lo(p)).getFeeData()}catch{let D=Hr.warn({title:T("developer_mode_network_toast_connect_failed"),text:T("developer_mode_network_toast_changenetwork"),cancelText:T("wallet_extension_sending_btn_cancel"),confirmText:T("developer_mode_network_btn_retry"),confirmBtnProps:{type:te.TYPE.highlight,size:te.SIZE.lg},onCancel:()=>{D.destroy(),f(null)},onConfirm:()=>{D.destroy(),h(p)}})}finally{e(!1)}},m=(0,Ra.useMemoizedFn)(({network:p={},label:u,...D})=>{f({...p,...D}),p?.appBaseChain==="ethereum"?h(p.rpcUrl).then(()=>{n(null)}).catch(()=>{}):n(null),Ui(),o([])},[]);return(0,Tt.useEffect)(()=>{n(null)},[a]),[t,l,g,m]},Gd=ID;v();C();var Hd=O(ee()),ja=O(Ee());var kD=t=>{let[e,r]=ue(),[n,o]=(0,Hd.useState)(""),a=ct(),s=Wu(),{list:i,listRef:c,refreshDom:l,loadingMore:f}=Xf(t,n),g=async D=>{if(!D){r(null);return}let E=!D?.address,A=await Wi({coinId:D.coinId}),x;E?x=A:x=s.find(({coinId:y})=>y===D.baseCoinId);let{chainId:w}=t||{};A===null||!E&&x===null||r({chainId:w,...D,...A,baseCoin:E?void 0:x})},h=D=>{let E=!D?.address,{chainId:A}=t||{},x=s.find(({chainId:w})=>w===Go(A));r({chainId:A,...D,baseCoin:E?void 0:x})},m=(0,ja.useMemoizedFn)(D=>{g(D)}),p=(0,ja.useMemoizedFn)(D=>{o(D)}),u=(0,ja.useMemoizedFn)(D=>{h(D)});return[e,i,c,l,f,{onBatchTokenChange:a?u:m,onBatchCustomTokenChange:u,onInputChange:p}]},Yd=kD;var PD=()=>{let{isSm:t}=Ue(),{gotoAddressPage:e}=_t(),[r,n]=it(),[o,a,s,i]=Gd(),[c,l,f,g,h,{onBatchTokenChange:m,onBatchCustomTokenChange:p,onInputChange:u}]=Yd(a);return Dt.default.createElement(br,{footer:Dt.default.createElement(S.FlexBox,{justify:"flex-end",className:Zt.footer},Dt.default.createElement(te,{block:t,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,disabled:!a?.chainId||!r||!c?.symbol,onClick:e},T("wallet_extension_footer_btn_next")))},Dt.default.createElement(S.Box,{className:Zt.root},Dt.default.createElement(Nn,{title:T("wallet_extension_type_title_select_type"),subtitle:T("wallet_extension_type_subtitle_select")}),Dt.default.createElement(S.Box,{className:Zt.network},Dt.default.createElement(S.Box,{className:Zt.networkSelectBox},Dt.default.createElement(S.Box,{className:Zt.networkTitle},T("wallet_extension_type_title_select_internet")),Dt.default.createElement(qa,{block:!0,placeholder:T("wallet_extension_type_placeholder_ethereum"),size:qa.SIZE.xl,onChange:i,value:a?.chainId,options:s,className:Zt.networkSelect,disabled:o,searchFocus:!1,searchPlaceholder:T("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),Dt.default.createElement(S.Box,{className:Zt.tokenSelect},Dt.default.createElement(Rd,{ref:f,disabled:!a?.chainId,value:c,options:l,onSelect:m,onInputChange:u,onCustomContractChange:p,selectedNetwork:a,tokensLoadingMore:h,refreshInfiniteScrollRef:g}))),Dt.default.createElement(kd,{mode:r,selectedNetwork:a,onSelected:n}),Dt.default.createElement(Wd,null)))},qd=Dt.default.memo(PD);v();C();var nt=O(ee()),jm=O($e());st();v();C();var zr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash",MEMO:"memo"},za=[{title:"wallet_extension_list_title_send_address",key:zr.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:zr.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:zr.TX_AMOUNT,type:Ke.AMOUNT},{title:"wallet_extension_list_colheader_state",key:zr.STATUS,type:Ke.STATUS},{title:"wallet_extension_list_colheader_hash",key:zr.HASH,type:Ke.HASH,align:"center",width:"200px"}],Wa={title:"wallet_extension_ton_header_comment",key:zr.MEMO,type:Ke.MEMO};var ie={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},$d={[ie.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ie.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ie.PAUSE}],[ie.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ie.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ie.SENDING}],[ie.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ie.DONE}],[ie.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ie.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ie.DONE}],[ie.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ie.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ie.FAILED}]},Vd={[ie.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[ie.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[ie.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[ie.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};je();Wn();Hn();v();C();var un=O(ee());he();v();C();var Ge={root:"_root_edfdl_1",header:"_header_edfdl_24",content:"_content_edfdl_24",alert:"_alert_edfdl_28",statistics:"_statistics_edfdl_57",address:"_address_edfdl_73",footer:"_footer_edfdl_100",loadingIcon:"_loadingIcon_edfdl_171",pauseLoadingIcon:"_pauseLoadingIcon_edfdl_186",finished:"_finished_edfdl_190",finishedIcon:"_finishedIcon_edfdl_193",failed:"_failed_edfdl_197",failedIcon:"_failedIcon_edfdl_200",sendError:"_sendError_edfdl_204",warning:"_warning_edfdl_207",export:"_export_edfdl_214",exportIcon:"_exportIcon_edfdl_239",finishedConfirm:"_finishedConfirm_edfdl_243","status-icon":"_status-icon_edfdl_285",statusIcon:"_status-icon_edfdl_285","status-icon-pause":"_status-icon-pause_edfdl_298",statusIconPause:"_status-icon-pause_edfdl_298","status-title":"_status-title_edfdl_301",statusTitle:"_status-title_edfdl_301","status-desc-text":"_status-desc-text_edfdl_310",statusDescText:"_status-desc-text_edfdl_310","status-desc-container":"_status-desc-container_edfdl_326",statusDescContainer:"_status-desc-container_edfdl_326","result-main":"_result-main_edfdl_335",resultMain:"_result-main_edfdl_335"};v();C();var vo=O(ee());he();var Kd=({onExport:t,isFinished:e,isSm:r})=>vo.default.createElement(S.Box,{className:Ge.warning},e&&vo.default.createElement(S.Box,{className:Ge.export,onClick:t},vo.default.createElement(Ye,{size:Ye.SIZE.sm,icon:"okx-wallet-plugin-export"}),vo.default.createElement(S.Box,null,T("wallet_extension_complete_btn_export_transaction"))),!e&&!r&&T("wallet_extension_sending_text_no_close_page"));var LD=({onExport:t,onSendStatusChange:e,sendStatus:r=ie.SENDING})=>{let{isSm:n}=Ue(),o=$d[r],a=r===ie.FINISHED,s=a?S.Box:un.default.Fragment;return un.default.createElement(S.FlexBox,{align:S.ALIGN.center,className:Ge.footer},un.default.createElement(Kd,{onExport:t,isFinished:a,isSm:n}),o.map(({actionProps:{children:i,...c},actionType:l})=>un.default.createElement(s,{className:n&&Ge.finishedConfirm},un.default.createElement(te,{block:n,...c,size:n?te.SIZE.lg:te.SIZE.xl,onClick:()=>{e?.(l)}},T(i)))))},Zd=un.default.memo(LD);v();C();var Xt=O(ee()),Xd=O($e());he();var MD=({sendStatus:t})=>{if([ie.SENDING,ie.PAUSE].includes(t))return Xt.default.createElement(Ht,{loaderClassName:(0,Xd.default)(Ge.loadingIcon,{[Ge.pauseLoadingIcon]:t===ie.PAUSE})});let e={className:Ge["status-icon"]};return t===ie.FAILED?e=Object.assign(e,{icon:"okx-wallet-plugin-clear",style:{color:"var(--okd-color-semantic-negative)"}}):t===ie.FINISHED&&(e=Object.assign(e,{icon:"okx-wallet-plugin-completed",style:{color:"var(--okd-color-semantic-positive)"}})),Xt.default.createElement(Ye,{...e})},RD=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=Ue(),{title:n,style:o}=Vd[t],a=T(n),s=(0,Xt.useMemo)(()=>Xt.default.createElement(Be.Text,{strong:700,style:o,className:Ge["status-title"]},a),[o,a]);return Xt.default.createElement(S.Space,{className:Ge["result-main"],space:r?"16px":"22px",align:S.ALIGN.center,direction:r?S.DIRECTION.vertical:S.DIRECTION.horizontal},Xt.default.createElement(MD,{sendStatus:t}),Xt.default.createElement(S.Space,{direction:S.DIRECTION.vertical,space:"8px"},s,Xt.default.createElement(S.Space,{space:r?"4px":"8px",direction:r?S.DIRECTION.vertical:S.DIRECTION.horizontal,className:Ge["status-desc-container"]},e.map(({title:i,args:c,style:l})=>Xt.default.createElement(Be.Text,{key:i,style:l,className:Ge["status-desc-text"]},T(i,c))))))},Jd=RD;v();C();var Co=O(ee());he();function jD({sendStatus:t}){let{isSm:e}=Ue(),[r,n]=(0,Co.useState)(!0),o=ru.FINISHED===t,a=T("wallet_extension_sending_text_no_close_page"),s=e&&r&&!o;return Co.default.createElement(S.Box,{className:Ge.alert},s?Co.default.createElement(jn,{desc:a,type:jn.TYPE.info,onClose:()=>{n(!1)}}):null)}var Qd=jD;v();C();var em=O(ee());he();je();var zD=()=>{let[t]=ue(),[e=[]]=Ae(),r=e.map((s,i)=>({...s,showShortAddress:!0,showTextOneLine:!0,order:i+1,index:i,txAmount:G.truncate(G.div(s?.txAmount,10**(t?.decimals??18)),6,!1)})),n=(0,em.useMemo)(()=>({[zr.FROM]:{showOrder:!0,isFromAddress:!0}}),[]),o=[...za];t?.localType===ve&&o.splice(2,0,Wa);let a=o.map(s=>{let{title:i,key:c,type:l,...f}=s;return{title:T(i),dataIndex:c,key:c,render:Ia(Na[l],n[c]),...f}});return{dataSource:r,columns:a}},tm=zD;v();C();var ci=O(ee());he();var rm=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,ci.useMemo)(()=>{let n=0,o=0,a=0,s=e?.length;return e.forEach(({txStatus:i})=>{i===re.FAILED&&n++,i===re.SUCCEED&&o++,i===re.PENDING&&a++}),{total:s,failed:n,success:o,notExecuted:s-n-a-o}},[e]);return(0,ci.useMemo)(()=>{if(t===ie.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:n,failed:o,success:a,notExecuted:s}=r,i=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:G.thousandFormat(a)}}];return o>0&&i.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:G.thousandFormat(o)},style:{color:"var(--okd-color-semantic-negative)"}}),t===ie.FINISHED?s>0&&i.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:G.thousandFormat(s)}}):i.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:G.thousandFormat(n)}}),i},[t,r])};v();C();var cn=O(ee()),Nm=O(yt()),Om=O(ns()),Im=O(Ee());je();v();C();var vm=O(Ee());v();C();var kn=O(ee()),Pn=O(yt()),ln=O(Ee());he();Xa();ep();je();v();C();var WD=async(t,e,r)=>{let n;try{if(n=await t.getTransactionReceipt(e),n?.status===0)throw new Error("Transaction failed")}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}for(;!n?.blockNumber&&r?.current&&!r.current.isCancelled;)try{await new Promise(o=>setTimeout(o,5e3)),n=await t.getTransactionReceipt(e)}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}return n},nm=WD;v();C();st();Zm();var om=({address:t,localType:e,contractAddress:r,symbol:n,errorMsg:o,txParams:a})=>{try{mi.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:n,txParams:a,errorMsg:o})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{pi()}};v();C();var am=O(Ee());Wn();Hn();var sm=O(ee());var UD=()=>{let t=(0,sm.useRef)();return(0,am.useMemoizedFn)(e=>new Promise(r=>{let n=async()=>{let{data:o}=await Qt(Jt.batchGetTxStatus,{txHashList:[e]}),a=o[e];["SUCCESS","ERROR"].includes(a)&&(r(a),clearInterval(t.current))};t.current=setInterval(()=>{n()},2e3)}))},Ua=UD;v();C();var im=O(Ee());var GD=t=>{let e=Kr(t);return(0,im.useMemoizedFn)(async r=>await(await e()).getTransactionCount(r,"latest"),[e])},um=GD;v();C();var lm=O(Ee());je();var HD=()=>{let t=At(),e=Cn(De);return(0,lm.useMemoizedFn)(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:fr,address:e});return r})},cm=HD;var YD=({selectedNetworkFee:t,injectGasPrice:e})=>{let r=e?.gasPrice||t?.gasPrice,n=e?.maxFeePerGas||t?.maxFeePerGas,o=e?.maxPriorityFeePerGas||t?.maxPriorityFeePerGas;return{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:o}},fm=t=>{let e=Kr(t),[r]=it(),n=(0,kn.useRef)(!1),o=(0,kn.useRef)({}),[a]=ue(),[s]=qe(),i=um(t),c=Ko(t),l=(0,kn.useRef)({isCancelled:!1});(0,kn.useEffect)(()=>()=>{l.current={isCancelled:!0}},[]);let f=Qu(),[g]=_n(),h=(0,Pn.useSelector)(lt),m=zu(),p=(0,Pn.useSelector)(cu);n.current=p,o.current=h;let u=ct(),D=(0,Pn.useSelector)(vn);return(0,ln.useMemoizedFn)(async({to:E,from:A,value:x,usedBalance:w,balance:y,baseCoinBalance:N,transferAmountType:b,gasPrice:L})=>{let F=null,W=n.current||!1,V=null;try{let M=x,q=await e(),{chainId:U}=s,H=ht(a),ne=A&&Qe(A,a?.localType),oe=E&&Qe(E,a?.localType),de=await m(Qe(a?.address,a?.localType),ne,q)||y,X=await c({to:oe,from:ne,value:x},Qe(a?.address,a?.localType));u&&(X=G.ceilMul(X,D?.gasLimit,0));let ae=await i(ne),we=o.current,{gasPrice:Ce,maxFeePerGas:Ze,maxPriorityFeePerGas:B}=YD({selectedNetworkFee:we,injectGasPrice:L}),{networkFeeInt:Y}=dr({gasPrice:Ce,gasLimit:X}),j={to:E,from:A,value:x,nonce:ae,chainId:U,gasLimit:X,supportEip1559:g,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType};if(g?j={maxFeePerGas:Ze,maxPriorityFeePerGas:B,type:Ja.FEE_MARKET,...j}:j={gasPrice:Ce,type:Ja.LEGACY,...j},V=Uo({to:E,from:A,value:x,nonce:ae,chainId:U,gasLimit:X,gasPrice:Ce,maxFeePerGas:Ze,supportEip1559:g,maxPriorityFeePerGas:B,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType}),W){let se=await f({...V,coinId:a?.coinId});Y=G.add(Y,se)}if(H&&r!==J.ONE_TO_MANY&&b===me.ALL&&(M=G.sub(de,Y),V=Uo(Object.assign(j,{value:M}))),H&&r===J.ONE_TO_MANY&&b===me.ALL&&(M=G.sub(w,Y),V=Uo(Object.assign(j,{value:M}))),!Vr({isBaseCoin:H,balance:de,baseCoinBalance:N,txAmount:j?.value,networkFee:Y}))return{to:E,from:A,txStatus:re?.FAILED};F=await zo(V,Mo(V?.from,a.localType),Xi(a.localType));let ce=await Kn(Li,F);return await q.send("eth_sendRawTransaction",[F]),await nm(q,ce,l),{to:E,from:A,txHash:ce,txAmount:M,txStatus:re?.SUCCEED}}catch(M){return om({address:A,localType:s?.localType,contractAddress:Qe(a?.address,a?.localType),symbol:a?.symbol,errorMsg:M?.message,txParams:V}),{to:E,from:A,txStatus:re?.FAILED,errorMsg:M.message}}},[e])},dm=()=>{let[t]=ue(),[e]=it(),r=$r({localType:De,coinId:t?.coinId}),n=cm(),o=Zo(),a=(0,Pn.useSelector)(lt);return(0,ln.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:g,transferAmountType:h})=>{try{let m=c,p=ht(t),u=await n(),D=await o({coinId:t?.coinId,chainId:t?.chainId,to:s,from:i}),{toAddressLegal:E}=D,A=!E,x=D||a||{},{computeUnitLimit:w,computeUnitPrice:y,networkFeeInt:N}=x;h===me.ALL&&p&&e!==J.ONE_TO_MANY&&(m=G.sub(l,N)),h===me.ALL&&p&&e===J.ONE_TO_MANY&&(m=G.sub(f,N));let b={to:s,from:i,blockHash:u,payer:i,computeUnitLimit:w,computeUnitPrice:y,amount:m,type:p?Qa.TRANSFER:Qa.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(b,{mint:t.address,createAssociatedAddress:A}),t?.protocolType===Yn.SPL_TOKEN_2022&&Object.assign(b,{token2022:!0,decimal:t?.decimals}),!Vr({isBaseCoin:p,balance:l,baseCoinBalance:g,txAmount:m,networkFee:N}))return{to:s,from:i,txStatus:re?.FAILED};let F=await zo(b,i,De),W=await Kn(De,F);return await r(F,{txHash:W,signedTx:F,toAdr:s,fromAdr:i,coinAmount:m,serviceCharge:N,walletId:void 0}),{to:s,from:i,txHash:W,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},mm=()=>{let[t]=ue(),[e]=it(),r=Dl(t?.coinId),n=El(t?.coinId),o=Vo(),a=Ua();return(0,ln.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:g,transferAmountType:h})=>{try{let m=c,p=ht(t),u=await o({to:s,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(h===me.ALL&&p&&e!==J.ONE_TO_MANY&&(m=G.sub(l,u)),h===me.ALL&&p&&e===J.ONE_TO_MANY&&(m=G.sub(f,u)),!Vr({isBaseCoin:p,balance:l,baseCoinBalance:g,txAmount:m,networkFee:u}))return{to:s,from:i,txStatus:re?.FAILED};let{tx:E,txBytes:A,signedTx:x}=await r({to:s,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:w}=x||{};return await n({tx:E,txBytes:A,to:s,from:i,coinAmount:c,signedTx:x}),e===J.ONE_TO_MANY&&await a(w)==="ERROR"?{to:s,from:i,txStatus:re?.FAILED}:{to:s,from:i,txHash:w,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},pm=()=>{let[t]=ue(),[e]=it(),r=At(),n=$r({localType:fe,coinId:t?.coinId}),o=(0,Pn.useSelector)(lt),a=Xo(t?.coinId);return(0,ln.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,baseCoinBalance:f,transferAmountType:g})=>{try{let h=c,m=ht(t),p=await r({value:"0",toAddr:s,address:i,fromAddr:i,coinId:t?.coinId}),{accountId:u,nonce:D}=p||{},A=await a({to:s,chainId:t?.chainId,contractAddress:t?.address})||o||{},{networkFeeInt:x}=A;g===me.ALL&&m&&e!==J.ONE_TO_MANY&&(h=G.sub(l,x));let w={to:s,from:i,type:"transfer",fees:x,amounts:h,decimals:t?.decimals,nonce:parseInt(D,10),accountId:parseInt(u,10),tokenSymbol:t?.originSymbol,tokenId:parseInt(t?.tokenId,10)};if(!Vr({isBaseCoin:m,balance:l,baseCoinBalance:f,txAmount:h,networkFee:x}))return{to:s,from:i,txStatus:re?.FAILED};let N=await zo(w,i,fe);if(N?.code)return{to:s,from:i,txStatus:re?.FAILED};let{signature:b,tx:L}=N,{txHash:F,...W}=L||{};return await n(JSON.stringify({signature:b,tx:W}),{txHash:F,signedTx:N,toAdr:L?.to,fromAdr:i,coinAmount:h,serviceCharge:L?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:s,from:i,txHash:F,txAmount:h,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},hm=()=>{let[t]=ue(),[e]=it(),r=vl(),n=$r({localType:ye,coinId:t?.coinId}),o=$o(),a=Ua();return(0,ln.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:g,transferAmountType:h})=>{try{let m=c,p=t?.baseCoinId===0,{tyArg:u,chainId:D,networkFee:E,sequenceNumber:A,maxGasAmount:x,gasUnitPrice:w,expirationTimestampSecs:y}=await o({address:i,coinId:t?.coinId});if(h===me.ALL&&p&&e!==J.ONE_TO_MANY&&(m=G.sub(l,E)),h===me.ALL&&p&&e===J.ONE_TO_MANY&&(m=G.sub(f,E)),!Vr({isBaseCoin:p,balance:l,baseCoinBalance:g,txAmount:m,networkFee:E}))return{to:s,from:i,txStatus:re?.FAILED};let b=await r({to:s,from:i,tyArg:u,chainId:D,gasUnitPrice:w,maxGasAmount:x,sequenceNumber:A,amount:m,coinId:t?.coinId,expirationTimestampSecs:y,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),L=await Kn(ye,b);return await n(b,{txHash:L,signedTx:b,toAdr:s,fromAdr:i,coinAmount:m,serviceCharge:E,walletId:void 0,extJson:JSON.stringify({nonce:A})}),e===J.ONE_TO_MANY?(await a(L),{to:s,from:i,txHash:L,txAmount:m,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:L,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})};function gm(){let[t]=ue(),[e]=it(),r=Jo(),n=En({localType:ve}),o=$r({coinId:t?.coinId,localType:ve}),a=Ua();return(0,ln.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:g,transferAmountType:h,memo:m,isLast:p})=>{try{let u=t?.baseCoinId===0,D;(e===J.MANY_TO_MANY||e===J.MANY_TO_ONE||e===J.ONE_TO_MANY&&p)&&h===me.ALL?D=Tr.CARRY_ALL_REMAINING_BALANCE:D=Tr.PAY_GAS_SEPARATELY+Tr.IGNORE_ERRORS;let{signInfo:E,gasLimitInfo:A,bodyParams:x,networkFeeInt:w}=await r({baseCoinId:t.baseCoinId,coinId:t.coinId,chainId:t.chainId,from:i,to:s,tokenAddress:t.address,decimals:t.decimals,amount:c,sendMode:D,memo:m}),y=c,N;h===me.ALL&&u&&e!==J.ONE_TO_MANY&&(y=G.sub(l,w)),h===me.ALL&&u&&e===J.ONE_TO_MANY&&(y=G.sub(f,w),p&&(N="0"));let{minTonLimit:b}=E||{},L=x;if(u?L={...L,amount:y}:(L={...L,messageAttachedTons:b,invokeNotificationFee:A?.invokeNotificationFee},E?.customPayload&&(L={...L,customPayload:E?.customPayload,stateInit:E?.stateInit})),!Vr({isBaseCoin:u,balance:l,baseCoinBalance:g,txAmount:y,networkFee:w}))return{to:s,from:i,txStatus:re?.FAILED};let V=(await n({params:L,fromAddr:i}))?.boc,M=await Kn(ve,V);return await o(V,{coinAmount:N||y,fromAdr:i,toAdr:s,serviceCharge:w,txHash:M,extJson:JSON.stringify({nonce:L.seqno,isClaim:!!L.customPayload}),walletId:void 0,memo:L.memo}),e===J.ONE_TO_MANY?(await a(M),{to:s,from:i,txHash:M,txAmount:y,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:M,txAmount:y,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})}v();C();v();C();var lr={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},Do=class{constructor(e){Gt(this,"status",lr.uninitialized);Gt(this,"nextInfo",null);Gt(this,"cb",null);Gt(this,"args",[]);Gt(this,"next",(...e)=>{[lr.waiting,lr.canceled,lr.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=lr.waiting,this.nextInfo.execute())});Gt(this,"execute",()=>{this.status=lr.working,this.cb?.(this.next)});Gt(this,"cancel",()=>{this.status=lr.canceled,this.nextInfo?.cancel?.(),this.cb=void 0});Gt(this,"pause",()=>{this.status=lr.paused,this.nextInfo?.pause?.()});Gt(this,"start",(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()});Gt(this,"continue",()=>{this.status=lr.initialized,this.next()});this.generator=e,this.status=lr.initialized,this.nextInfo=null,this.cb=null}};function qD(t){let e=(r,n)=>{let o;return{execute:()=>{o=setTimeout(r,n??t??0)},cancel:()=>{clearTimeout(o)},pause:()=>{clearTimeout(o)}}};return new Do(e)}var jt=qD;var Cm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=hm();return(0,vm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(g=>{let{to:h,from:m,txAmount:p,id:u}=g;return{to:h,from:m,interval:s===He.NONE?100:St(i,c,0)*1e3,request:async()=>o({...g,amount:p,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async g=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:E}=await h.request();n({from:u,startTime:D,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,g(h.interval)}}),f},[])};v();C();var Dm=O(yt()),Em=O(Ee());var Am=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=fm(),a=(0,Dm.useSelector)(lt),s=a?.level===Je.CUSTOM;return(0,Em.useMemoizedFn)(async()=>{let i=0,{type:c,min:l,max:f}=t,g=r.map(m=>{let{to:p,from:u,txAmount:D,id:E}=m;return{to:p,from:u,interval:c===He.NONE?100:St(l,f,0)*1e3,request:async()=>o({...m,from:u,value:D,transferAmountType:e.type,gasPrice:s?a:{}}),id:E}}),h=jt();return h.start(async m=>{let p=g[i];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:u,txHash:D,from:E,txAmount:A,errorMsg:x}=await p.request();n({from:E,to:p?.to,txStatus:u,txHash:D,txAmount:A,id:p?.id,errorMsg:x})}finally{i++,m(p.interval)}}),h},[])};v();C();var _m=O(Ee());var Bm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=dm();return(0,_m.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(g=>{let{to:h,from:m,txAmount:p,id:u}=g;return{to:h,from:m,interval:s===He.NONE?100:St(i,c,0)*1e3,request:async()=>o({...g,amount:p,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async g=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:E}=await h.request();n({from:u,startTime:D,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,g(h.interval)}}),f},[])};v();C();var xm=O(Ee());var wm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=mm();return(0,xm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(g=>{let{to:h,from:m,txAmount:p,id:u}=g;return{to:h,from:m,interval:s===He.NONE?100:St(i,c,0)*1e3,request:async()=>o({...g,amount:p,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async g=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:E}=await h.request();n({from:u,startTime:D,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,g(h.interval)}}),f},[])};v();C();var Sm=O(ee()),Tm=O(Ee());function ym(){let[t]=it(),[e]=dt(),[r]=ft(),[n,o]=Ae(),a=gm(),s=(0,Sm.useRef)(-1);return(0,Tm.useMemoizedFn)(async()=>{let i=0,{type:c,min:l,max:f}=e,g=n.map((m,p)=>{let{to:u,from:D,txAmount:E,id:A}=m;return{to:u,from:D,interval:c===He.NONE?100:St(l,f,0)*1e3,request:async()=>a({...m,amount:E,transferAmountType:r.type,isLast:p===n.length-1}),id:A}}),h=jt();return h.start(async m=>{let p=g[i];if(p){if(t===J.ONE_TO_MANY&&s.current===i)return;s.current=i;try{o({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:u,txHash:D,from:E,startTime:A,txAmount:x}=await p.request();o({from:E,startTime:A,to:p?.to,txStatus:u,txAmount:x,txHash:D,id:p?.id})}catch(u){console.log(u)}finally{s.current=-1,i++,m(p.interval)}}}),h},[])}v();C();var Fm=O(Ee());var bm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=pm();return(0,Fm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(g=>{let{to:h,from:m,txAmount:p,id:u}=g;return{to:h,from:m,interval:s===He.NONE?100:St(i,c,0)*1e3,request:async()=>o({...g,amount:p,transferAmountType:e.type}),id:u}}),f=jt();return f.start(async g=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:E}=await h.request();n({from:u,startTime:D,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,g(h.interval)}}),f},[])};var km=t=>{let[e]=ue(),r=(0,Om.useHistory)(),n=(0,Nm.useDispatch)(),o=dl(),a=(0,cn.useRef)(),[s,i]=(0,cn.useState)(ie.SENDING),c=gl(),l=Am(s,e?.localType),f=Bm(s,e?.localType),g=wm(),h=bm(),m=Cm(),p=ym(),u=l;e?.localType===De?u=f:e?.localType===We?u=g:e?.localType===fe?u=h:e?.localType===ye?u=m:e?.localType===ve&&(u=p),(0,cn.useEffect)(()=>{let A=!t.some(({txStatus:w})=>w!==re.FAILED),x=!t.some(({txStatus:w})=>w===re.PENDING||!w);A?i(ie.FAILED):x&&i(ie.FINISHED)},[t]);let D=()=>{u().then(A=>{a.current=A}).catch(A=>{console.log(A)})};(0,cn.useEffect)(()=>{D()},[]);let E=(0,Im.useMemoizedFn)(async A=>{A===ie.DONE?o():A===ie.PAUSE?(a.current?.pause(),i(ie.PAUSE)):A===ie.CANCELED?(a.current?.cancel(),i(ie.FINISHED)):A===ie.SENDING?(a.current?.continue(),i(ie.SENDING)):A===ie.FINISHED?i(ie.FINISHED):A===ie.FAILED?(a.current?.cancel(),c(),i(ie.SENDING),D()):A===ie.BACK_TO_HOME&&(r.replace(qr),n(yu()))},[]);return[s,E]};v();C();var fi=O(ee()),Mm=O(Ee());st();he();v();C();var Pm=O(tl());var $D=(t,e)=>{let r=window.URL||window.webkitURL||window,n=r.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,o.click(),r.revokeObjectURL(n)},VD=(t=[],e="result.csv",r)=>{let n=Pm.default.unparse(t,r),o="\uFEFF",a=new Blob([`${o}${n}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});$D(a,e)},Lm=VD;je();function KD(t=[]){let[e]=ue(),r=(0,fi.useMemo)(()=>{let s=[...za];return e?.localType===ve&&s.splice(2,0,Wa),s},[e?.localType]),n=(0,fi.useMemo)(()=>r.map(({key:s})=>s),[]),o=(0,Mm.useMemoizedFn)(s=>{let i=T("wallet_extension_multisender_colbody_success"),c=T("wallet_extension_multisender_colbody_fail");switch(s){case re.SUCCEED:return i;case re.FAILED:case re.DROPPED:return c;default:return"-"}});return()=>{let s=`${T("wallet_extension_multisender_colheader_history")}.csv`,i=t.map(f=>{let g={...f,txAmount:G.thousandFormat(f.txAmount??0),txStatus:o(f.txStatus),memo:f.memo||""};return Object.values(Bi(g,n))}),l={fields:r.map(f=>T(f.title)),data:i};Lm(l,s)}}var Rm=KD;var ZD={ERROR:re.FAILED,SUCCESS:re.SUCCEED},XD=()=>{let t=(0,nt.useRef)(),e=(0,nt.useRef)(),[r]=ue(),[n=[],o]=Ae(),{dataSource:a,columns:s}=tm(),{isSm:i}=Ue(),[c,l]=km(a),f=Rm(a),g=rm({sendStatus:c,sendAddress:a}),h=xa(),m=Ta(),p=(0,nt.useMemo)(()=>Ln(vi(n,({txStatus:D,txHash:E})=>E&&D===re.PENDING),"txHash"),[n]),u=async()=>{let{data:D}=await Qt(Jt.batchGetTxStatus,{txHashList:e.current});D&&Object.keys(D).forEach(E=>{let A=D[E];["SUCCESS","ERROR"].includes(A)&&o({txHash:E,txStatus:ZD[A]})})};return(0,nt.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&u()},2e3),()=>{clearInterval(t.current)}),[]),(0,nt.useEffect)(()=>{[ye,De,We,fe,ve].includes(r?.localType)&&(e.current=p)},[r?.localType,p]),(0,nt.useEffect)(()=>{(c===ie.FINISHED||c===ie.FAILED)&&Yi(m())},[c]),nt.default.createElement(br,{footer:nt.default.createElement(Zd,{sendStatus:c,onSendStatusChange:l,onExport:f}),useOkg:!1,headerProps:{className:(0,jm.default)(Ge.header,Ge.content)}},nt.default.createElement(S.Box,{className:Ge.root},nt.default.createElement(Qd,{sendStatus:c}),nt.default.createElement(Jd,{sendStatus:c,sendResult:g}),nt.default.createElement(wa,{className:Ge.statistics,statistics:h})),nt.default.createElement(S.Box,{className:Ge.address},nt.default.createElement(Sa,{dataSource:a,columns:s,scroll:{x:i}})))},zm=nt.default.memo(XD);var SL=()=>{let[t]=ue(),e=(0,Ga.useDispatch)(),r=Bl(),n=(0,Ga.useSelector)(lt),o=ct(),a=eu(),s=t?.chainId;return(0,Wm.useAsyncEffect)(async()=>{if(o&&s){let i=await a(s);e(Nu(i))}},[s,o]),(0,Wr.useEffect)(()=>{if(![ye,De,We,fe,ve].includes(t?.localType)&&r?.length&&n?.level){let{gasLimit:i,tokenPrice:c,usdToThisRate:l}=n,f=r.find(({level:g})=>g===n?.level);if(f){let{gasPrice:g}=f,{networkFee:h,networkFeeInt:m,networkFeeMarket:p}=dr({gasPrice:g,gasLimit:i,price:c,usdToThisRate:l});e(Ft({...n,...f,networkFee:h,networkFeeInt:m,networkFeeMarket:p,unitPriceDisplay:Ni(g)}))}}},[e,r,t?.localType]),Wr.default.createElement(fn.Switch,null,Wr.default.createElement(fn.Route,{path:qr,component:qd,exact:!0}),Wr.default.createElement(fn.Route,{path:qn,component:Kf,exact:!0}),Wr.default.createElement(fn.Route,{path:$n,component:Id,exact:!0}),Wr.default.createElement(fn.Route,{path:Vn,component:zm,exact:!0}))};export{SL as default};
//# sourceMappingURL=BatchTransfer-YXJ7O7SV.js.map
