import{x as k,z as E}from"./chunk-Q7DF5H6O.js";import{a as O,b as U}from"./chunk-QRAFULYC.js";import{o as C}from"./chunk-Z62JX42S.js";import{I as _,U as b,va as w}from"./chunk-XFTQD4B2.js";import{b as P}from"./chunk-73B6GL3S.js";import{f as h,o as u,q as a}from"./chunk-Y5OH3DDZ.js";u();a();var f=h(P());w();u();a();var v=h(C());var F=(n,l)=>{let{coinId:e,address:c}=n||{},p=k(),{ready:m=!0,...r}=l||{},i={retryCount:3,ready:!!m&&!!e&&!!c,...r},{data:t,loading:S,error:s}=(0,v.useRequest)(async()=>await p(n),i);return[S,t,s]},x=F;u();a();var D=h(P()),N=h(C());w();u();a();var W=(n={})=>n?JSON.parse(JSON.stringify(n)):{};var L=7e3,y="wallet-gas-price",A=(n,l)=>{let{chainId:e,coinId:c,address:p,...m}=n||{},{onError:r,onSuccess:i,pollingInterval:t,ready:S=!0}=l||{},s=e!==void 0&&S,I=k(),d=U(y,{ready:s,pollingInterval:t||L,onError:async()=>{let o=await I({coinId:c,address:p,chainId:e,...m});i?.(o),r?.()}});(0,N.useDeepCompareEffect)(()=>{let o=d?.data?.[0]||{},g=W(o);!_(g)&&Number(g?.chainIndex)===Number(e)&&i?.(g)},[d]),(0,D.useEffect)(()=>{if(s)return O.sendChannel({op:"subscribe",args:[{chainId:e,channel:y}]}),()=>{O.sendChannel({op:"unsubscribe",args:[{chainId:e,channel:y}]})}},[s])},T=A;var q=(n,l)=>{let[e,c]=(0,f.useState)({}),[p,m]=(0,f.useState)(!1),r=(0,f.useRef)(null),{onSuccess:i,pollingInterval:t=7e3,...S}=l||{},[s,,I]=x(n,{onSuccess:o=>{c(o),i?.(o)},...S}),d=e?.supportPush;return(0,f.useEffect)(()=>(d===!1&&!s&&t?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{m(!0)},t)):m(!1),()=>{r.current&&clearTimeout(r.current)}),[d,s,t]),E(n,{pollingInterval:t,ready:d===!1&&p,onSuccess:o=>{c(o),i?.(o)}}),T(n,{pollingInterval:t,ready:d===!0,onSuccess:(o={})=>{let g=b({},e,o);c(g),i?.(g)}}),[s,e,I]},dn=q;export{dn as a};
//# sourceMappingURL=chunk-WST3WRLT.js.map
