import{b as z,c as Q,d as V,e as _}from"./chunk-C5QR6RF7.js";import"./chunk-77GR2SPQ.js";import"./chunk-5FY6FXSV.js";import"./chunk-EP773FEO.js";import"./chunk-4QUN6OXW.js";import"./chunk-IVH24YWV.js";import{c as q}from"./chunk-LBF75ZOB.js";import"./chunk-JUPTKFJB.js";import{a as R}from"./chunk-7QX2TXNH.js";import{d as F}from"./chunk-ZDHJHPQ5.js";import"./chunk-K35GFLBJ.js";import{G as B}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import{a as P}from"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import{a as H}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{tb as Y}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as b}from"./chunk-Z62JX42S.js";import{Ma as D,Na as G,fa as k}from"./chunk-2QHGKEME.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as le}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{$b as T,nc as ie}from"./chunk-COF7YKSN.js";import{D as U,K as x,o as M}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{v as N}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import{b as E}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import{b as se}from"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-H6JAOQCX.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as a,o,q as n}from"./chunk-Y5OH3DDZ.js";o();n();var K=a(E());x();o();n();var d=a(E()),J=a(le());o();n();var A=a(E()),$=a(b());var ae=(t,s)=>{let c=(0,A.useMemo)(()=>t.filter(u=>!u.walletIdentities.some(r=>r.walletId===s)).map(u=>u.keyringId),[t,s]),[i,m]=(0,A.useState)(c),y=(0,$.useMemoizedFn)(u=>{let{id:r}=u;m(l=>{let f=l||[];return f.includes(r)?f.filter(I=>I!==r):[...f,r]})});return{collapsedWallets:i,setCollapsedWallets:m,updateCollapsedWallets:y}},j=ae;o();n();var O={root:"_root_2vou1_1",title:"_title_2vou1_6",keyring:"_keyring_2vou1_10",header:"_header_2vou1_13",content:"_content_2vou1_16",icon:"_icon_2vou1_19",wrapper:"_wrapper_2vou1_22"};var X=({keyringIdentities:t=[]})=>{let[s]=P(),i=R().get("walletId"),m=(0,d.useRef)(null),y=(0,J.useHistory)(),u=(0,d.useCallback)(e=>{y.push(`${Y}?walletId=${e}`)},[y]),r={[_.KEYRING]:z,[_.WALLET]:Q},{collapsedWallets:l,updateCollapsedWallets:f}=j(t,i),I=(0,d.useMemo)(()=>{let e=[];return t.forEach(p=>{let L={id:p.keyringId,key:p.keyringId,keyringIdentity:p,hiddenAssets:s,itemType:_.KEYRING,show:!0,collapsedWallets:l};e.push(L),l.includes(p.keyringId)||p.walletIdentities.forEach(g=>{let w={id:g.walletId,keyringId:p.keyringId,key:g.walletId,walletIdentity:g,onClick:()=>u(g.walletId),itemType:_.WALLET,selected:i,collapsedWallets:l,hiddenAssets:s};e.push(w)})}),e},[t,s,l,i]),S=e=>{let p=r[e.itemType];return d.default.createElement(N.Item,{onClick:()=>{if(e.itemType===_.KEYRING)return f({id:e.id})},"data-testid":e.itemType===_.WALLET&&H.UPGRADE_7702_SELECT_WALLET_PAGE.WALLET_IDENTITY},d.default.createElement(p,{...e}))};return d.default.createElement("div",{className:O.root,ref:m},d.default.createElement(V,{data:I,renderWalletListItem:S,getContainer:()=>m.current}))};o();n();var C=a(E()),v=a(G()),Z=a(se());x();ie();var ee=()=>{let[,t=[]]=B(null),s=(0,v.useSelector)(D),c=(0,v.useSelector)(k),i=(0,C.useMemo)(()=>t.filter(r=>r?.hasBackup&&[T.HD_KEYRING,T.SIMPLE_KEYRING].includes(r?.initialType)),[t]),m=(0,C.useMemo)(()=>(0,Z.cloneDeep)(i),[i]),y=(0,C.useMemo)(()=>m.map(r=>{let l=r,f=l?.walletIdentities||[],I=0,S=[];return f.forEach(e=>{let p=e?.account?.mainnet??!1,L=e?.walletId,g=Boolean(c?.[L]),w=!s?.[L];g&&w&&p&&(I=M.add(I,e?.walletAsset??0),S.push(e))}),l.walletIdentities=S,l.walletAsset=String(I),l}),[m,c,s]);return(0,C.useMemo)(()=>y.filter(r=>r.walletIdentities.length>0),[y])};o();n();var h=a(E()),te=a(G()),re=a(b());var oe=()=>{let t=(0,te.useSelector)(k),s=(0,h.useMemo)(()=>Object.keys(t||{}),[t]),c=q(),i=(0,re.useMemoizedFn)(async()=>{await c(s,!1)});(0,h.useEffect)(()=>{i()},[i])};o();n();var ne={wrapper:"_wrapper_6fgs3_1"};var de=()=>{let t=ee();return oe(),K.default.createElement("div",{className:ne.wrapper},K.default.createElement(F,{closeable:!1,title:U("wallet_extension_account_header_title_select_wallet")}),K.default.createElement(X,{keyringIdentities:t}))},ot=de;export{ot as default};
//# sourceMappingURL=Upgrade7702SelectWallet-N3VBII5G.js.map
