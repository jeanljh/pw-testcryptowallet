import{a as V,f as N}from"./chunk-3NE3KUUV.js";import{a as F}from"./chunk-S7VT2TWF.js";import"./chunk-BNS5ABAB.js";import{a as S}from"./chunk-7QX2TXNH.js";import{d as T}from"./chunk-ZDHJHPQ5.js";import"./chunk-WY5R5HAR.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-3ZKJXYZ4.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-33XRMYWN.js";import"./chunk-MDBKHBHQ.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import{b as A}from"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{Da as k,Ea as E}from"./chunk-GCS2RK7E.js";import"./chunk-5PRURJ2O.js";import{u as w}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import"./chunk-Z62JX42S.js";import"./chunk-2QHGKEME.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as M}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import{c as h}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import"./chunk-COF7YKSN.js";import{A as t,K as v}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{D as m,q as P}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{z as f}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import{b}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-H6JAOQCX.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as C,o as n,q as a}from"./chunk-Y5OH3DDZ.js";n();a();var e=C(b());v();n();a();var $=(o="")=>/^[a-z]{1}[a-z1-5]{11}$/g.test(o);n();a();var y={"wax-create-account-form":"_wax-create-account-form_3yjsy_1",waxCreateAccountForm:"_wax-create-account-form_3yjsy_1","wax-create-account-rules":"_wax-create-account-rules_3yjsy_4",waxCreateAccountRules:"_wax-create-account-rules_3yjsy_4"};n();a();var l=C(b()),j=C(M());v();var O=()=>{let o=S(),s=m.useForm(),p=(0,j.useHistory)(),[x,d]=(0,l.useState)(!1),[r,u]=(0,l.useState)({account:o.get("account")||""}),i=Number(o.get("coinId")),{coin:g}=F(i,!1),B=async c=>{try{return await N(c)?await Promise.resolve():(s.setErrors({account:t("extension_wallet_create_errortip_error_name")}),await Promise.reject())}catch{return s.setErrors({account:t("extension_wallet_create_errortip_error_name")}),Promise.reject()}},L=(0,l.useCallback)(async()=>{d(!0);try{let c={coinId:i,chainId:g?.chainId,...r};await B(c);let{ownerKey:_,activeKey:z}=await V(c);_&&z?s.setErrors({account:t("extension_wallet_create_errortip_used_username")}):p.push(`${E}?coinId=${i}&account=${r?.account}&from=${o.get("from")||""}`)}finally{d(!1)}},[g,r]),U=(0,l.useCallback)(c=>{u(c);let{account:_}=c;p.replace(`${k}?account=${_}&coinId=${i}&account=${r?.account}&from=${o.get("from")||""}`)},[]);return{form:s,values:r,loading:x,onSubmit:L,onValuesChange:U}},W=O;var Y=()=>{let{form:o,loading:s,values:p,onSubmit:x,onValuesChange:d}=W();return e.default.createElement(h.Container,{className:y["wax-create-account"]},e.default.createElement(T,{closeable:!1,title:t("extension_wallet_header_title_waxaccount_opening")}),e.default.createElement(m,{form:o,initialValues:p,className:y["wax-create-account-form"],onValuesChange:d,onSubmit:x},e.default.createElement(m.Item,{name:"account",validateTrigger:"onChange",rules:[{validator:(r,u)=>u&&!$(u)?Promise.reject(t("extension_wallet_create_errortip_error_name")):Promise.resolve()}],label:t("extension_wallet_create_text_set_account_name")},e.default.createElement(P,{placeholder:t("extension_wallet_create_input_enter_account_name",{},{useBr:!1})})),e.default.createElement(m.Item,{shouldUpdate:!0},({getFieldValue:r,getFieldsError:u})=>{let i=u(),g=r("account");return e.default.createElement(A.FooterActions,{usePortal:!0},e.default.createElement(f,{loading:s,htmlType:"submit",category:f.CATEGORY.fill,type:f.TYPE.highlight,size:f.SIZE.lg,onClick:x,disabled:!g||i?.length},t("wallet_extension_send_btn_next_step")))})),e.default.createElement(A,{offsetBottom:104,component:h.FlexBox,justify:"center"},e.default.createElement(w.Text,{component:"pre",type:w.TYPE.secondary,size:w.SIZE.xs,className:y["wax-create-account-rules"]},t("extension_wallet_create_input_naming_rules"))))},ge=e.default.memo(Y);export{ge as default};
//# sourceMappingURL=CreateAccount-4TDPWXSA.js.map
