import{c as N,h as K,n as process,o as F,q as $}from"./chunk-Y5OH3DDZ.js";var G=N((k,x)=>{F();$();(function(M,T){typeof k=="object"&&typeof x=="object"?x.exports=T():typeof define=="function"&&define.amd?define([],T):typeof k=="object"?k._prohibitedMonitor=T():M._prohibitedMonitor=T()})(k,function(){return function(){"use strict";var B={"../monitor/src/amp/helper.js":function(S,_,a){a.r(_),a.d(_,{getAmpDefaultEndpoint:function(){return n},getAmplitudeAPIKey:function(){return m},getAmplitudeProject:function(){return s},logSignUpComplete:function(){return i},reportIdentifyEvent:function(){return e}});var d=a("../monitor/src/common/variables.js"),p=a("../monitor/src/common/constants.js");let i=o=>{let{signUpCompleted:f}=sessionStorage;f&&(o.logEvent("signup_completed",{},{language:d.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},s=o=>o||(d.default.isOKLink()?p.default.AMPLITUDE_PROJECT.oklink:d.default.isOKEx()||d.default.isInExtension()?p.default.AMPLITUDE_PROJECT.okx:p.default.AMPLITUDE_PROJECT.okcoin),m=o=>{let f=d.default.isProdEnv(),c=p.default.AMPLITUDE_KEY_MAP?.[o];return c?f?c?.prod:c?.dev:""},e=(o,f)=>{let c=new window.amplitude.Identify;c.set("channel_id",f),o.identify(c,{language:d.default.getOkGlobal().locale})},n=()=>{if(d.default.isInternalSystem()||d.default.isOKEx()||d.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(S,_,a){a.r(_);var d=a("../monitor/src/amp/helper.js"),p=a("../monitor/src/common/constants.js"),i=a("../monitor/src/common/event-bus.js"),s=a("../monitor/src/common/variables.js"),m=a("../monitor/src/lib/libs-amplitude.js"),e=a("../monitor/src/monitor.js");let n={},o,f={RESOLVE:"RESOLVE",REJECT:"REJECT"},c={events:new i.default,getAmplitudeSDKInstance(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((t,u)=>{this.events.on(f.RESOLVE,r=>{t(r)}),this.events.on(f.REJECT,r=>{u(r)}),this.getInstance(l)})},async getInstance(l){let t=(0,d.getAmplitudeProject)(l);o&&clearTimeout(o),window.amplitude||await(0,m.default)();let u=await s.default.getTk(),r=await s.default.getDeviceId()||"";if(n[t])return n[t];let g=window.amplitude.createInstance(),E=(0,d.getAmplitudeAPIKey)(t),h=(0,d.getAmpDefaultEndpoint)(),v=e.default.apiEndpoint?e.default.apiEndpoint:h,I={userId:t===p.default.AMPLITUDE_PROJECT.web3?r:u,deviceId:r,instanceName:t,serverUrl:v,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:s.default.getOkGlobal().assetsBuildVersion};return g.init(E,I),g.setSessionId(s.default.getOrGenerateSessionId()),n[t]=g,sessionStorage.channelId&&(0,d.reportIdentifyEvent)(g,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(A=>{g.logEvent(...A,{language:s.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,d.logSignUpComplete)(g),this.events.emit(f.RESOLVE,g),g}};_.default=c},"../monitor/src/common/constants.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/variables.js");let p="";if(d.default.isInBrowser()){let{cdnBaseUrl:m="//static.coinall.ltd"}=d.default.getOkGlobal();p=m}let i={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},s={[i.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[i.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[i.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[i.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[i.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};_.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:i,AMPLITUDE_KEY_MAP:s,CDN_BASE_URL:p,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(S,_,a){a.r(_);let d=i=>{try{let s=document.cookie.split(";"),m=null;for(let e=0;e<s.length;e++){let n=s[e];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(i)===0){m=n.substring(i.length+1,n.length);break}}return m}catch{return null}},p=function(i,s){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},e=s!==null?m.expirationDays:-1;if(e){let o=new Date;o.setTime(o.getTime()+e*24*60*60*1e3),e=o}let n=`${i}=${s}`;e&&(n+=`; expires=${e.toUTCString()}`),n+="; path=/",document.cookie=n};_.default={set:p,get:d}},"../monitor/src/common/event-bus.js":function(S,_,a){a.r(_);class d{constructor(){K(this,"listeners",{})}on(i,s,m){let e=[],n=arguments.length;for(let o=0;o<n;o++)e.push(arguments[o]);e=e.length>3?e.splice(3,e.length-1):[],typeof this.listeners[i]<"u"?this.listeners[i].push({scope:m,callback:s,args:e}):this.listeners[i]=[{scope:m,callback:s,args:e}]}remove(i,s,m){if(typeof this.listeners[i]<"u"){let e=this.listeners[i].length,n=this.listeners[i].slice(0);for(let o=0;o<e;o++){let f=n[o];f.scope==m&&f.callback==s&&this.listeners[i].splice(o,1)}}}has(i,s,m){if(typeof this.listeners[i]<"u"){let e=this.listeners[i].length;if(s===void 0&&m===void 0)return e>0;for(let n=0;n<e;n++){let o=this.listeners[i][n];if((m?o.scope==m:!0)&&o.callback==s)return!0}}return!1}emit(i){if(typeof this.listeners[i]<"u"){let n=this.listeners[i].slice(),o=n.length;for(var s=arguments.length,m=new Array(s>1?s-1:0),e=1;e<s;e++)m[e-1]=arguments[e];for(let f=0;f<o;f++){let c=n[f];if(c&&c.callback){let l=m.concat(c.args);c.callback.apply(c.scope,l)}}}}}_.default=d},"../monitor/src/common/seo.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/utils.js");let p=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];_.default={getSeoType(){let i=d.default.getUrlDomain(document.referrer);for(let s=0;s<p.length;s++){let{keyword:m,type:e}=p[s];if(i.indexOf(m)>-1)return e}return""}}},"../monitor/src/common/statex.js":function(S,_,a){a.r(_),a.d(_,{default:function(){return d}});function d(p){let i,s=new Set,m=(c,l)=>{let t=typeof c=="function"?c(i):c;if(t!==i){let u=i;i=l??typeof t!="object"?t:Object.assign({},i,t),s.forEach(r=>r(i,u))}},e=()=>i,f={setState:m,getState:e,subscribe:c=>(s.add(c),()=>s.delete(c)),destroy:()=>s.clear()};return i=p(m,e,f),f}},"../monitor/src/common/utils.js":function(S,_,a){a.r(_);let d=/([^{]+)({.+})?/,p=/^{|}$/g,i=/^['"]|['"]$/g,s=/\/\/([^/]+)\//,m={utm_source:30,utm_medium:20,utm_campaign:100,utm_term:100,utm_content:100,gclid:100,gbraid:100,wbraid:255,fbclid:255,ttclid:128,twclid:64,msclkid:64,af_adset:100,af_adset_id:24,af_ad:100,af_ad_id:24,af_keywords:100,af_c_id:24,clickId:256,groupInvitationCode:20,ircid:30};_.default={serializeParams(e){let n=[],o=Object.keys(e);for(let f=0,c=o.length;f<c;f++){let l=o[f];n.push(`${encodeURIComponent(l)}=${encodeURIComponent(e[l])}`)}return n.join("&")},getUrlDomain(e){let n=e.match(s);return n?n[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let n={channelId:"",referralSrc:""};if(!e)return n;let o="",f="";if(e.searchParams.forEach((g,E)=>{let h=E.toLowerCase();h==="channelid"&&(o=g),h==="channelflag"&&(f=g)}),n.channelId=o||f,n.channelId)return n;let c="/join";if(e.pathname.endsWith(c)||!e.pathname.includes(c))return n;let l=e.pathname.split(`${c}/`)[1];if(!l)return n;let t=l.split("/")[0];if(t.startsWith("-"))return n;let u=t.split("-"),r=u[u.length-2]||"";return o=u[u.length-1],o&&(n.referralSrc=r,n.channelId=o),n},getOktsBaggageData(e){if(!e||!e.searchParams)return"";let n=e.searchParams,o=n.get("okts_baggage");if(o)return o;let f=[];return Object.keys(m).forEach(c=>{let l=n.get(c);if(!l)return;let t=this.filterXSS(l),u=m[c];t&&t.length<=u&&f.push(`${c}=${t}`)}),f.join(",")},getGABaggage(){let n=this.filterXSS(this.getCookie("_ga")).match(/^GA1\.\d+\.(.{1,30})$/);return n&&n[1]?`ga_client_id=${n[1]}`:""},getInternalOktsBaggage(){let e=sessionStorage.oktsBaggage,n=this.getGABaggage();return e&&!e.includes("ga_client_id=")&&n?`${e},${n}`:e||n},getFinalOktsBaggage(e){let n=this.getInternalOktsBaggage(),o=sessionStorage.getItem(e);if(!e||!o)return n;let f=`${e}=${o}`;return n?`${f},${n}`:f},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(n,o,f)=>o&&f?o===f?"&":"?":"")},setCookie(e,n,o){let f=new Date;f.setTime(f.getTime()+o),document.cookie=`${e}=${encodeURIComponent(n)};expires=${f.toGMTString()};path=/`},getCookie(e){let n=new RegExp(`(^| )${e}=([^;]*)(;|$)`),o=document.cookie.match(n);return o?decodeURIComponent(o[2]):""},parseTarget(e){let n=e.match(d),o={key:"",data:{}};if(n){let f=n[1],c=n[2],l={};c&&c.replace(p,"").split(",").forEach(u=>{let r=u.split(":");r=r.map(h=>h.trim().replace(i,""));let[g,E]=r;l[g]=E}),o.key=f,o.data=l}return o},matchType(e,n){return Object.prototype.toString.call(e)===`[object ${n}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,n){if(Array.prototype.includes)return e.includes(n);for(let o=0,f=e.length;o<f;o++)if(e[o]===n)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let o=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(n==="x"?o:o&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(n,o,f)=>f===0?`${o.toLowerCase()}`:`_${o.toLowerCase()}`)},filterXSS(e){if(typeof e!="string")return"";let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,o=>n[o])},merge(e,n){let o={};return Object.keys({...e,...n}).forEach(f=>{(n[f]!=null||e[f]!=null)&&(o[f]=n[f]??e[f])}),o},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let o=0;o<22;++o)n+=e.charAt(Math.floor(this.cryptoRandom()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}},removeKeyFromString(e,n){return typeof e!="string"||typeof n!="string"||!n?e:e.split(",").map(o=>o.trim()).filter(o=>{let f=o.indexOf("=");return(f===-1?o:o.slice(0,f)).trim()!==n}).join(",")}}},"../monitor/src/common/variables.js":function(S,_,a){a.r(_);var d=a("../monitor/src/store.js"),p=a("../monitor/src/common/utils.js");let i="oklink",s="okex",m="OKX_GLOBAL",e="okex_inner",n=typeof window<"u",o=Boolean(typeof window>"u"||typeof process<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-0.3.0-251114135109",BUILD_TARGET_ENV:"extension"}.SSR_ENV),f=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,c={_expires:{}};if(n){let{ok_monitor:t='{ "_expires": {} }'}=localStorage;c=JSON.parse(t)}let l={};_.default={setEnv(t){let{screen:u}=window,{_tk:r}=localStorage,{systemLanguage:g,language:E}=navigator,{referrer:h}=document;l.site=this.getSiteInfo(),l.lcl=this.getProductLanguage(),l.fpid=p.default.getCookie("fingerprint_id"),h&&(h.length>256&&(h=h.substr(0,256)),l.rf=h),r&&(l.tk=r),l.lan=(g||E).toLowerCase();let v="0x0";if(u){let{width:P,height:A}=u;v=`${P}x${A}`}l.scr=v;let I=p.default.getCookie("first_ref");I&&(l.frf=I.slice(0,256))},getEnv(){return{...l,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return f},getDeviceId(){let{deviceId:t}=d.default.getState();return t?Promise.resolve(t):window.utils.ont?.getDevId?.()},toLocalStorage(t){let{key:u,value:r,maxAge:g}=t;c[u]=r,c._expires[u]=Date.now()+g,localStorage.ok_monitor=JSON.stringify(c)},removeLocalStorage(t){delete c[t],delete c._expires[t],localStorage.ok_monitor=JSON.stringify(c)},getClientValue(t){let u=sessionStorage.getItem(t);return u||this.getValueFromLocalStorage(t)},getValueFromLocalStorage(t){return Date.now()<c._expires[t]&&c[t]||""},syncUpLocalStorageToSessionStorage(t){let u=this.getValueFromLocalStorage(t);u&&sessionStorage.setItem(t,u)},shouldIgnoreAmpEvent(){return this.isIgnoreEnvironment()},getProductLanguage(){return p.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let t=this.__getOkGlobalSite().sign,u=this.__getOkGlobalSite().subSite;return t===s?!u||u===m?s:u.toLowerCase():t},isOKEx(){return this.__getOkGlobalSite().sign===s},isOKLink(){let t=this.__getOkGlobalSite();return t.sign===i||t.sign===s&&t.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===e},isWeb3(){return this.__getOkGlobalSite()?.is?.Web3===!0},isInSSR(){return o},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},isPreEnv(){return this.getOkGlobal().envSign==="pre"},isIgnoreEnvironment(){if(!this.isInBrowser())return!0;let t=this.getOkGlobal(),u=t.broker&&t.broker.is,r=localStorage.simulatedTrading==="1",{okjp:g}=t.site&&t.site.is||{};return u||r||g===!0},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},isEnableDataFinder(){return this.isIgnoreEnvironment()?!1:this.isProdEnv()||window.location.search.includes("__okdatafinder_test")},isEnableDataFinderDebug(){return this.isProdEnv()||this.isIgnoreEnvironment()?!1:window.location.search.includes("__okdatafinder_test")},getTk(){return f&&window.jsbridge?window.jsbridge.getTK().then(t=>t||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")},getLastActivityTime(){let t=localStorage.getItem("_monitor_last_activity_time"),u=Number(t);return!u||Number.isNaN(u)?0:u},updateLastActivityTime(){let t=Date.now();localStorage.setItem("_monitor_last_activity_time",String(t))},getOrGenerateSessionId(){let t=localStorage.getItem("_monitor_sessionId"),u=this.getLastActivityTime(),r=Date.now();if(t&&r-u<18e5)return t;let g=String(Date.now());return localStorage.setItem("_monitor_sessionId",g),g}}},"../monitor/src/datafinder/constants.js":function(S,_,a){a.r(_),a.d(_,{DATA_FINDER_APPID_MAP:function(){return p},DATA_FINDER_PROJECT:function(){return d}});let d={okx:"okx",web3:"web3",internal_system:"internal_system",oklink:"oklink"},p={[d.okx]:10000010,[d.web3]:10000007,[d.oklink]:10000007,[d.internal_system]:10000009}},"../monitor/src/datafinder/index.js":function(S,_,a){a.r(_),a.d(_,{initDataFinder:function(){return f},initProjectInstance:function(){return o},reportDataFinderEvent:function(){return c}});var d=a("../monitor/src/common/variables.js"),p=a("../monitor/src/monitor.js"),i=a("../monitor/src/datafinder/constants.js"),s=a("../monitor/src/datafinder/libs.js"),m=a("../monitor/src/datafinder/utils.js");let e={},n={},o=async l=>{let t=await d.default.getTk(),u=await d.default.getDeviceId()||"";window.okDataFinder(`${l}.init`,{app_id:i.DATA_FINDER_APPID_MAP[l],channel_domain:p.default.dataFinderApiEndpoint||`${window.location.origin}/priapi/df`,enable_anonymousid:!0,enable_debug:d.default.isEnableDataFinderDebug(),log:d.default.isEnableDataFinderDebug()}),window.okDataFinder(`${l}.setAnonymousId`,u),window.okDataFinder(`${l}.config`,{user_unique_id:l===i.DATA_FINDER_PROJECT.web3?u:t,session_id:d.default.getOrGenerateSessionId(),app_version:d.default.getOkGlobal().assetsBuildVersion,okx_device_id:u}),window.okDataFinder(`${l}.start`),e[l]=!0,delete n[l]},f=async l=>{(!window?.okDataFinder||window.okDataFinder.q)&&await(0,s.default)();let t=(0,m.getDataFinderProject)(l);return n[t]?n[t]:e[t]?Promise.resolve():(n[t]=o(t),n[t])},c=async(l,t,u)=>{let r=(0,m.getDataFinderProject)(u);e[r]||await f(u);let g=localStorage.getItem("_monitor_sessionId"),E=d.default.getOrGenerateSessionId();g!==E&&window.okDataFinder(`${r}.config`,{session_id:E}),d.default.updateLastActivityTime(),window.okDataFinder(`${r}.config`,{language:d.default.getOkGlobal().locale});let h={...t,site:d.default.getSiteInfo()};window.okDataFinder(`${r}.${l}`,h)}},"../monitor/src/datafinder/libs.js":function(S,_,a){a.r(_),a.d(_,{default:function(){return f},loadDataFinderJs:function(){return o},setupDataFinder:function(){return n}});var d=a("../monitor/src/common/variables.js"),p=a("../monitor/src/common/event-bus.js");let i=!1,s=new p.default,m="LOAD_SUCCESS",e="LOAD_FAILED";function n(){let c="okDataFinder";if(window.LogAnalyticsObject=c,!window[c]){let l=function(){l.q.push(arguments)};l.q=l.q||[],window[c]=l}window[c].l=+new Date}function o(){return new Promise((c,l)=>{let t=()=>{s.emit(m),c()},u=A=>{s.emit(e),l(A)};i=!0,n();let{envSign:r,cdnBaseUrl:g}=d.default.getOkGlobal(),E=document.createElement("script");E.type="text/javascript",E.crossOrigin="anonymous",E.async=!0;let h="";switch(r){case"dev":h="cdndev";break;case"pre":h="cdnpre";break;case"daily":h="cdn";break;case"prod":h="cdn";break;default:h="cdn";break}let v="collect-pure-v5.2.9.js",I="collect-rangers-v5.2.9.js";d.default.isInExtension(),E.src=`./scripts/lib/${v}`,E.integrity="sha384-lpjOyUtkqNFTqLx2vLV9bia4eqVhhvlQPqjvoRmxp5WPVKhA4JDa6Rm5wfSZEm/6",E.onload=function(){if(i=!1,!window.okDataFinder||typeof window.okDataFinder!="function")return u("[DataFinder] Error: could not load SDK");t()},E.onerror=function(A){i=!1,u(A)};let P=document.getElementsByTagName("script")[0];P.parentNode.insertBefore(E,P)})}async function f(){if(i)return new Promise((c,l)=>{s.on(m,t=>{c(t)}),s.on(e,t=>{l(t)})});await o()}},"../monitor/src/datafinder/utils.js":function(S,_,a){a.r(_),a.d(_,{getDataFinderProject:function(){return i}});var d=a("../monitor/src/common/variables.js"),p=a("../monitor/src/datafinder/constants.js");let i=s=>s&&s in p.DATA_FINDER_PROJECT?s:d.default.isWeb3()||d.default.isOKLink()?p.DATA_FINDER_PROJECT.web3:d.default.isInternalSystem()?p.DATA_FINDER_PROJECT.internal_system:p.DATA_FINDER_PROJECT.okx},"../monitor/src/de-duplicate.js":function(S,_,a){a.r(_),a.d(_,{shouldReport:function(){return s}});let d={},p,i=m=>{p!==void 0&&clearTimeout(p),p=setTimeout(()=>{d={},p=void 0},m+500)},s=function(m){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,n=typeof m=="string"?m:m.action||m.anchor,o=+new Date,f=d[n]||0;return o-f<e?!1:(i(e),d[n]=o,!0)}},"../monitor/src/error.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/variables.js");let p=d.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];_.default={getErrorInfo(i){let{message:s,filename:m,lineno:e,colno:n,error:o}=i,f="";o&&o.stack?(f=o.stack,f.indexOf("@")!==-1&&(f=`${s} 
\r ${f}`)):(o||s)&&(f=`ThrowError: ${JSON.stringify(o||s)} 
\r at ${m}: ${e}: ${n}`);let c=encodeURIComponent(window.location.href);return{msg:s,file:m,line:e,col:n,stack:f,url:c}},isReported(i){let{file:s,line:m,col:e}=i,n=`${s}__${m}__${e}`;return p.includes(n)},rememberError(i){let{file:s,line:m,col:e}=i,n=`${s}__${m}__${e}`;p.unshift(n),p.length>50&&p.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(p)},0)}}},"../monitor/src/global/attrs.js":function(S,_,a){a.r(_);var d=a("../monitor/src/global/click.js"),p=a("../monitor/src/global/expose.js"),i=a("../monitor/src/common/constants.js");let{Configs:s}=i.default;_.default={listen(m){let e=n=>{m.logEvent({...n,category:"ok"})};this.preprocess(),d.default.listen(e,this),p.default.listen(e,this)},preprocess(){document.querySelectorAll(`[${s.ATTR_LISTEN}]`).forEach(e=>{let n=e.getAttribute(s.ATTR_LISTEN),o=n.indexOf(":");if(o>-1){let f=n.substring(0,o).trim(),c=n.substring(o+1).trim();f.split("+").forEach(t=>{e.setAttribute(`data-${t.trim()}`,c)}),e.removeAttribute(s.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/utils.js"),p=a("../monitor/src/common/constants.js");let{Actions:i,Configs:s}=p.default;_.default={listen(m,e){document.addEventListener("click",n=>{let{target:o}=n;o.getAttribute(s.ATTR_LISTEN)&&e.preprocess();let c=o.getAttribute(s.ATTR_CLICK);if(c){let l=d.default.parseTarget(c),{key:t,data:u}=l;t&&m({target:t,action:i.CLICK,params:u,extras:{area:u.area}})}})}}},"../monitor/src/global/expose.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/utils.js"),p=a("../monitor/src/common/constants.js");let i={},{Actions:s,Configs:m}=p.default;_.default={listen(e){this.trackFn=e;let n={threshold:[.5,1]},o=new window.IntersectionObserver(this.onSectionChange.bind(this),n);document.querySelectorAll(`[${m.ATTR_EXPOSE}]`).forEach(c=>{o.observe(c)}),this.observer=o},onSectionChange(e){e.forEach(n=>{let{target:o,isIntersecting:f}=n,c=o.getAttribute(m.ATTR_EXPOSE),l=d.default.parseTarget(c),{key:t,data:u}=l,r=Number(n.time.toFixed(2));if(f){let g=setTimeout(()=>{let E=i[t],h=o.getBoundingClientRect(),{innerHeight:v,innerWidth:I}=window,{top:P,bottom:A,left:y,right:D}=h;if((P>=0&&P<=v||A>=0&&A<=v)&&(y>=0&&y<=I||D>=0&&D<=I)){let{area:C,elementType:w,actionType:R}=u;delete u.area,delete u.elementType,delete u.actionType,this.trackFn({target:t,action:s.EXPOSE,params:{...u,time:r},extras:{area:C},actionType:R||"Show",elementType:w,anchor:w?t:""}),this.observer.unobserve(o),E.forEach(L=>{window.clearTimeout(L)}),delete i[t]}else E.shift()},m.EXPOSE_DURATION);i[t]||(i[t]=[]),i[t].push(g)}})}}},"../monitor/src/lib/libs-amplitude.js":function(S,_,a){a.r(_),a.d(_,{default:function(){return o}});var d=a("../monitor/src/common/variables.js"),p=a("../monitor/src/common/event-bus.js");let i=!1,s=new p.default,m="LOAD_SUCCESS",e="LOAD_FAILED";function n(){return new Promise((f,c)=>{let l=()=>{s.emit(m),f()},t=I=>{s.emit(e),c(I)};i=!0;let{envSign:u,cdnBaseUrl:r}=d.default.getOkGlobal(),g=document.createElement("script");g.type="text/javascript",g.crossOrigin="anonymous",g.async=!0;let E="";switch(u){case"dev":E="cdndev";break;case"pre":E="cdnpre";break;case"daily":E="cdn";break;case"prod":E="cdn";break;default:E="cdn";break}let h="amplitude-analytics-browser-2.11.8.js";d.default.isInExtension(),g.src=`./scripts/lib/${h}`,g.integrity="sha384-xqvDNRHTNTbqEsaCHJBuL+ohIAflZIyjUW7MnSD/Bl20mW11ri9zTr8XDYF2MiS2",g.onload=function(){if(i=!1,!window.amplitude)return t("[Amplitude] Error: could not load SDK");l()},g.onerror=function(I){i=!1,t(I)};let v=document.getElementsByTagName("script")[0];v.parentNode.insertBefore(g,v)})}async function o(){if(i)return new Promise((f,c)=>{s.on(m,l=>{f(l)}),s.on(e,l=>{c(l)})});await n()}},"../monitor/src/logger.js":function(S,_,a){a.r(_),a.d(_,{default:function(){return f}});var d=a("../monitor/src/common/constants.js"),p=a("../monitor/src/common/cookie.js"),i=a("../monitor/src/common/utils.js"),s=a("../monitor/src/common/variables.js"),m=a("../monitor/src/monitor.js");let e=null,n=!1;class o{constructor(l){s.default.setEnv(l),this._category=l.product}logPV(){if(n)return Promise.resolve();let l={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return n=!0,this.sendLogs(l)}logEvent(l){let t={},{category:u,action:r,target:g,params:E,extras:h,_m:v,anchor:I,elementType:P,actionType:A,tk:y}=l;if(Object.assign(t,{_ct:u,_act:r,_lb:encodeURIComponent(g||""),_anchor_en_name:encodeURIComponent(I||""),_element_type:encodeURIComponent(P||""),_action_type:encodeURIComponent(A||""),...this._getCommonData()}),t._tk=y||t._tk,i.default.isArray(E)){let D=0,O=0;E.forEach((C,w)=>{if(i.default.isObject(C)){let{value:R,random:L}=C,U=encodeURIComponent(R);L?t[`_unlist${O++}`]=U:t[`_reser${D++}`]=U}else t[`_reser${w}`]=encodeURIComponent(C)})}else if(i.default.valueExists(E)){let D=E;i.default.isObject(E)&&(D=JSON.stringify(E));let O=encodeURIComponent(D);t._v=O,t._reser0=O}if(h){h.page=encodeURIComponent(window.location.href);let D={};Object.keys(h).forEach(O=>{D[`__${O}`]=h[O]}),Object.assign(t,D)}return v&&(t._m=v),this.sendLogs(t)}_getCommonData(){let l={...s.default.getEnv()};localStorage._tk&&(l.tk=localStorage._tk);let{src:t}=sessionStorage,u=s.default.getClientValue("pageId"),r=s.default.getClientValue("channelId"),g=s.default.getClientValue("ref"),{deviceId:E=i.default.base64Id(),eventId:h=1,sequenceNumber:v=1}=JSON.parse(p.default.get("_monitor_extras")||"{}");p.default.set("_monitor_extras",JSON.stringify({deviceId:E,eventId:h+1,sequenceNumber:v+1}));let I=JSON.stringify({_amp_rejected:i.default.isTargetingCookiesRejected(),_device_id:E,_event_id:h,_sequence_number:v,_uuid:i.default.generateUUID()}),P={_cid:r,_web3_ref:g,_pgid:u,_source:t,_session_id:s.default.getOrGenerateSessionId(),_page_url:encodeURIComponent(window.location.href.slice(0,1024)),_initial_traffic_attribution:i.default.getInternalOktsBaggage(),_extras:encodeURIComponent(I)};return Object.keys(l).forEach(A=>{P[`_${A}`]=encodeURIComponent(l[A])}),P}sendLogs(l){let t=[];if(Object.keys(l).forEach(u=>{let r=l[u];i.default.valueExists(r)?t.push(`${u}=${r}`):delete l[u]}),s.default.isDevTestEnv()){let{console:u}=window;return u.groupCollapsed(`dev monitor: ${l._ct} > ${l._act}`),u.log(decodeURIComponent(JSON.stringify(l,null,2))),u.groupEnd(),Promise.resolve()}return s.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(u=>{if(u){let r=`_tk=${encodeURIComponent(u)}`,g=t.findIndex(E=>/^_tk/.test(E));g>-1?t[g]=r:t.push(r)}return this.addClientInfo(t.join("&"))}).catch(()=>this.addClientInfo(t.join("&"))):this.addClientInfo(t.join("&"))}addClientInfo(l){let t=`&_ts=${Date.now()}&_r=${Math.floor(i.default.cryptoRandom()*2147483648)}`,u=`${l}${t}`;return s.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(r=>{let g=r?`&_app_info=${encodeURIComponent(r)}`:"";return u=`${l}${g}${t}`,this.sendRequest(u)}).catch(r=>this.sendRequest(u)):this.sendRequest(u)}getApiPath(){return d.default.internalCategory.includes(this._category)?d.default.API_PATH.INTERNAL:s.default.isOKLink()?d.default.API_PATH.OKLINK:d.default.API_PATH.OKX}async sendRequest(l){let t=await s.default.getDeviceId(),u=`_mv=${d.default.DEBUG_KEY}&_uid=${encodeURIComponent(t)}&${l}`;return s.default.updateLastActivityTime(),new Promise((r,g)=>{let E=s.default.isInExtension()&&!s.default.isMiniApp(),h=this.getApiPath();if(navigator.sendBeacon&&!E)navigator.sendBeacon(h,u),r();else{let v=E?m.default.dwApiEndpoint||`https://www.oklink.com${d.default.API_PATH.OKX}`:h,I=new XMLHttpRequest;I.open("POST",v),I.setRequestHeader(d.default.REQUEST_HEADERS.deviceId,t),I.onload=()=>I.status!==200?g(new Error(`Error ${I.status}:${I.statusText}`)):r(),I.onerror=()=>{g(new Error(`Error ${I.status}: ${I.statusText}`))},I.send(u),setTimeout(()=>{r()},150)}})}}function f(c){return e||(e=new o(c),e)}},"../monitor/src/monitor.js":function(S,_,a){a.r(_),a.d(_,{default:function(){return t}});var d=a("../monitor/src/common/utils.js"),p=a("../monitor/src/common/constants.js"),i=a("../monitor/src/common/variables.js"),s=a("../monitor/src/error.js"),m=a("../monitor/src/logger.js"),e=a("../monitor/src/global/attrs.js"),n=a("../monitor/src/amplitude.js"),o=a("../monitor/src/store.js"),f=a("../monitor/src/de-duplicate.js"),c=a("../monitor/src/datafinder/index.js");let l=!1;class t{constructor(r){i.default.isInSSR()||(this.commonParams=r.commonParams||{},this._logger=(0,m.default)(r),this._category=r.product,r.withPV&&this.delayReportPV(),l||(this._initEventListener(),l=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(r){t.apiEndpoint=r}setDWApiEndpoint(r){t.dwApiEndpoint=r}setDataFinderApiEndpoint(r){t.dataFinderApiEndpoint=r}report(r){let{type:g,value:E}=r;if(i.default.isInSSR())return Promise.resolve();let h=E;return(d.default.isObject(h)||d.default.isArray(h))&&(h=JSON.stringify(h)),this._logger.logEvent({category:"performance",action:g,params:h})}logPV(){return this._logger.logPV()}logDataFinder(r,g,E){return i.default.isInSSR()?Promise.resolve():(0,c.reportDataFinderEvent)(r,g,E)}logAmplitudeEvent(r,g,E){if(i.default.isInSSR()||i.default.shouldIgnoreAmpEvent())return Promise.resolve();let h="",v=!1;d.default.isObject(E)&&(h=E.ampProject,v=E.ignoreBackUp);let I={};for(let P in g)Object.prototype.hasOwnProperty.call(g,P)&&(I[P]=g[P]);if(I.monitor_after_navigation){delete I.monitor_after_navigation;let P=JSON.parse(sessionStorage.ampCacheEvents||"[]");return P.push([r,I]),sessionStorage.ampCacheEvents=JSON.stringify(P),Promise.resolve()}return n.default.getInstance(h).then(P=>{let A=i.default.getOrGenerateSessionId();String(P.getSessionId())!==A&&P.setSessionId(A),i.default.updateLastActivityTime(),P.logEvent(r,{...I,site:i.default.getSiteInfo()},{language:i.default.getOkGlobal().locale}),v||this.act(r,g,{isSyncAMP:!1})})}resetAmplitudeUser(){return i.default.isInSSR()?Promise.resolve():n.default.getInstance().then(r=>(r.reset(),Promise.resolve()))}track(r,g,E,h){if(i.default.isInSSR())return Promise.resolve();let v={category:this._category,action:E,target:g,params:h,extras:{area:r}};if(d.default.isObject(r)){let{area:I,action:P,target:A,params:y}=r;Object.assign(v,{action:P,target:A,params:y,extras:{area:I}})}return this._logger.logEvent(v)}act(r){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return i.default.isInSSR()||!(0,f.shouldReport)(r)?Promise.resolve():new Promise((h,v)=>{setTimeout(()=>{this._act(r,g,E).then(h,v)},0)})}async _act(r){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:h,...v}=this.commonParams||{},I={web_mode_okx:d.default.isInArray(p.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},A=Object.assign({},i.default.isOKEx()?I:{}),y=E?.tk||h,D={category:this._category,params:g,_m:"1"};d.default.isObject(g)&&(D.params=d.default.merge({...v,...A},g),A=d.default.merge(i.default.isOKLink()?{...v,...A}:A,g));let O;typeof r=="string"?(O=r,D.action=r):(O=r.action||r.anchor,D.action=O,D.anchor=r.anchor,D.actionType=r.actionType,D.elementType=r.elementType,D={...D,params:d.default.merge(D.params,r.params||{})},y=r.tk||y,A=d.default.merge(A,r.params)),D.tk=y;let{needDurationActions:C,needDurationActionParams:w,actionTriggerTimes:R,setActionTriggerTimes:L,setNeedDurationActionParams:U}=o.default.getState();if(i.default.isEnableAMP()&&E?.isSyncAMP){let j=r?.ampProject;this.logAmplitudeEvent(O,A,{ampProject:j,ignoreBackUp:!0})}if(d.default.isInArray(C,O))return R[O]=Date.now(),L(R),w[O]=D,U(w),Promise.resolve("The event will be reported when the page is closed");if(i.default.isEnableDataFinder()&&r?.uploadCloudPlatform){let j=A||{},W=r?.ampProject;this.logDataFinder(O,j,W)}return this._logger.logEvent(D)}_initEventListener(){window.addEventListener("load",()=>{e.default.listen(this._logger)}),window.addEventListener("error",r=>{let g=s.default.getErrorInfo(r);s.default.isReported(g)||(this._logger.logEvent({category:"error",action:"report",extras:g}),s.default.rememberError(g))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:r,needDurationActionParams:g,actionTriggerTimes:E,setNeedDurationActions:h,setNeedDurationActionParams:v,setActionTriggerTimes:I}=o.default.getState();r.length&&r.forEach(P=>{g[P].params.duration=Date.now()-E[P],this._logger.logEvent(g[P])}),h([]),v({}),I({})})}initABTest(r){let g="ab_experiment";r?.exper_flagKey&&r?.exper_variant&&(Object.assign(this.commonParams,r),this.act(g))}setCommonParams(r){this.commonParams={...this.commonParams,...r}}triggerReportDuration(r){let{needDurationActions:g,setNeedDurationActions:E}=o.default.getState();d.default.isInArray(g,r)||(g.push(r),E(g))}}},"../monitor/src/store.js":function(S,_,a){a.r(_);var d=a("../monitor/src/common/statex.js");let p=(0,d.default)(i=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:s=>i(()=>({deviceId:s})),setNeedDurationActions:s=>i(()=>({needDurationActions:s})),setNeedDurationActionParams:s=>i(()=>({needDurationActionParams:s})),setActionTriggerTimes:s=>i(()=>({actionTriggerTimes:s}))}));_.default=p},"../monitor/src/web.js":function(S,_,a){a.r(_);var d=a("../monitor/src/amplitude.js"),p=a("../monitor/src/common/constants.js"),i=a("../monitor/src/common/seo.js"),s=a("../monitor/src/common/utils.js"),m=a("../monitor/src/common/variables.js"),e=a("../monitor/src/monitor.js"),n=a("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:o}=p.default,f=(c,l)=>{if(m.default.isInSSR())return;let{pathname:t}=window.location;sessionStorage.channelId=c,m.default.toLocalStorage({key:"channelId",value:c,maxAge:o}),l?(sessionStorage.referralSrc=l,m.default.toLocalStorage({key:"referralSrc",value:l,maxAge:o})):(sessionStorage.removeItem("referralSrc"),m.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=t,m.default.toLocalStorage({key:"pageId",value:t,maxAge:o})};_.default={monitor:{get amplitude(){return m.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((l,t)=>{t("Currently not a browser environment!")})}}:d.default},newInstance(c){return m.default.isInSSR()?{setApiEndpoint(){},setDWApiEndpoint(){},setDataFinderApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logDataFinder(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_act(){return Promise.resolve()},_initEventListener(){},initABTest(){},setCommonParams(){},triggerReportDuration(){},delayReportPV(){}}:new e.default(c)},saveChannelId(c){f(c)},getChannelId(){return sessionStorage.channelId},clearChannelId(){sessionStorage.removeItem("channelId"),m.default.removeLocalStorage("channelId")},getOktsBaggage(){return s.default.getFinalOktsBaggage(m.default.isWeb3()?"ref":"channelId")},getRef(){return sessionStorage.ref},setDeviceId(c){let{setDeviceId:l}=n.default.getState();l(c)},getChannelContextFromUrl(c){return s.default.getChannelContext(s.default.getParsedUrl(c))}},parseUrl(){let c=s.default.getParsedUrl(window.location.href),l=c.searchParams.get("src");l&&sessionStorage.setItem("src",l),m.default.isWeb3()?this.parseRef(c):this.parseChannelId(c)},parseChannelId(c){let l=s.default.getChannelIdByUserAgent(),t=i.default.getSeoType(),u=s.default.getChannelContext(c),r=u.channelId,g=u.referralSrc,E=!1;if(m.default.isInDesktop()&&l&&(r=l,g="",E=!0),!r&&t&&(r=t,E=!0),r=s.default.filterXSS(r),this.processOktsBaggage({urlObject:c,attributionKey:"channelId",attribution:r,shouldClearOktBaggage:E}),r){f(r,g);return}m.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(m.default.syncUpLocalStorageToSessionStorage("referralSrc"),m.default.syncUpLocalStorageToSessionStorage("pageId"))},processOktsBaggage(c){let{urlObject:l,attributionKey:t,attribution:u,shouldClearStorage:r}=c;try{if(r){sessionStorage.removeItem("oktsBaggage"),m.default.removeLocalStorage("oktsBaggage");return}if(u){let g=s.default.getOktsBaggageData(l),E=s.default.removeKeyFromString(g,t);m.default.toLocalStorage({key:"oktsBaggage",value:E,maxAge:o})}m.default.syncUpLocalStorageToSessionStorage("oktsBaggage")}catch(g){console.log("Error processing oktsBaggage:",g)}},parseRef(c){let l="";c.searchParams.forEach((u,r)=>{r.toLowerCase()==="ref"&&(l=u)});let t="/join/";if(!l&&c.pathname.includes(t)){let u=c.pathname.split(t)[1];u&&(l=u.split("/")[0])}l=s.default.filterXSS(l),l&&m.default.toLocalStorage({key:"ref",value:l,maxAge:o}),this.processOktsBaggage({urlObject:c,attributionKey:"ref",attribution:l,shouldClearStorage:!1}),m.default.syncUpLocalStorageToSessionStorage("ref")},init(){m.default.isInSSR()||(this.parseUrl(),!s.default.getCookie("first_ref")&&document.referrer&&s.default.setCookie("first_ref",document.referrer.slice(0,256),o),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(c){f(c)}}}},M={};function T(S){var _=M[S];if(_!==void 0)return _.exports;var a=M[S]={exports:{}};return B[S](a,a.exports,T),a.exports}(function(){T.d=function(S,_){for(var a in _)T.o(_,a)&&!T.o(S,a)&&Object.defineProperty(S,a,{enumerable:!0,get:_[a]})}})(),function(){T.o=function(S,_){return Object.prototype.hasOwnProperty.call(S,_)}}(),function(){T.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}}();var b={};return function(){T.r(b);var S=T("../monitor/src/web.js");S.default.init(),b.default=S.default.monitor}(),b=b.default,b}()})});export{G as a};
//# sourceMappingURL=chunk-HAHRUU64.js.map
