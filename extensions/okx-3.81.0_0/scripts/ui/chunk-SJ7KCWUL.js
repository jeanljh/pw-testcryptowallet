import{a as S}from"./chunk-7Y4QHWXE.js";import{d as l}from"./chunk-JHO7RU36.js";import{b as d}from"./chunk-3ZKJXYZ4.js";import{b as C}from"./chunk-U7IWD6UB.js";import{za as y}from"./chunk-GCS2RK7E.js";import{Na as _}from"./chunk-2QHGKEME.js";import{a as k}from"./chunk-6PA65BO3.js";import{Ya as c,tb as T,za as u}from"./chunk-COF7YKSN.js";import{f as h,va as N}from"./chunk-XFTQD4B2.js";import{b as Z}from"./chunk-73B6GL3S.js";import{f as a,o as f,q as g}from"./chunk-Y5OH3DDZ.js";f();g();var x=a(Z()),b=a(_()),m=a(k());N();T();var w=()=>{let{accountMap:t}=C();return t[u]},M=()=>{let t=(0,m.useHistory)(),r=w(),i=async o=>{let n={fromAddr:r,coinId:o},{info:e}=await d(n);return e||{}};return async({coinId:o,baseCoinId:n})=>{if([Number(n),Number(o)].includes(c)){let{accountId:e,nonce:s}=await i(o);if(s===0)return t.push(`${y}?coinId=${o}&nonce=${s}&accountId=${e}`),!1}return!0}},W=({nonce:t=0,address:r,accountId:i})=>{let o=(0,m.useHistory)(),n=(0,b.useDispatch)();return(0,x.useCallback)(async()=>{let s=Number(t),A={nonce:t,accountId:i,type:"changePubkey",from:r},{txHash:P,...p}=await l(A,r,u),{type:I}=p,K={txHash:P,signedTx:JSON.stringify({fastProcessing:null,tx:{nonce:s,...p},signature:null}),toAdr:"",txSource:2,coinAmount:"0",fromAdr:r,serviceCharge:"0",coinId:c,extJson:JSON.stringify({type:I||"ChangePubKey",serviceChargeCoinId:c})};try{await n(S(K)),o.go(-1)}catch{h()}},[])};export{M as a,W as b};
//# sourceMappingURL=chunk-SJ7KCWUL.js.map
