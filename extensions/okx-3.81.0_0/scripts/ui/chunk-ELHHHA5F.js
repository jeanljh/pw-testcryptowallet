import{E as d}from"./chunk-EFOY37CC.js";import{c as g}from"./chunk-COF7YKSN.js";import{f as a,o as k,q as u}from"./chunk-Y5OH3DDZ.js";k();u();var p=a(g());var c={},h=class{constructor(r){this.worker=null,this.processing={},this.url=r,this.setUpWorker()}onMessage(r){let{id:s,payload:o,error:t}=r.data,n=this.processing[s];delete this.processing[s];let{resolve:i,reject:w}=n;t?w(t):i(o)}onError(r){console.log(r)}setUpWorker(){this.worker||(this.worker=new Worker(this.url),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=this.onError.bind(this))}exec(r,s=void 0){let o=s?.id||d(),t=new Promise((n,i)=>{this.processing[o]={resolve:n,reject:i}});return this.worker.postMessage({id:o,method:r,args:s}),t}},f=()=>{let e=p.default.runtime.getURL("/worker.js");if(c[e])return c[e];let r=new h(e);return c[e]=r,r};export{f as a};
//# sourceMappingURL=chunk-ELHHHA5F.js.map
