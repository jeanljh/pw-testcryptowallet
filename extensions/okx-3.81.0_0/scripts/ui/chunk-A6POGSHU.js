import{b as Qt}from"./chunk-7THBEIEJ.js";import{c as Ft}from"./chunk-QFKKFFVA.js";import{a as kt,m as dt,p as ut,r as lt}from"./chunk-E4OV5WXB.js";import{b as Mt,c as Zn}from"./chunk-GR7YC6C3.js";import{E as Lt,J as ei}from"./chunk-O33H5V3V.js";import{Sb as oi,Tb as Dt,_b as ri,la as xt,tb as ti,ub as Te,vb as Bt}from"./chunk-COF7YKSN.js";import{A as Ut,K as Xn}from"./chunk-VZKEX7KP.js";import{I as yt}from"./chunk-BJKBO23H.js";import{b as J}from"./chunk-LVJGLJNA.js";import{b as wt}from"./chunk-HI3LE734.js";import{c as u,f as At,o as n,p as c,q as i}from"./chunk-Y5OH3DDZ.js";var Re=u(w=>{n();i();Object.defineProperty(w,"__esModule",{value:!0});w.LIBUSB_ERROR_MESSAGE=w.serializeError=w.TypedError=w.TrezorError=w.ERROR_CODES=void 0;w.ERROR_CODES={Init_NotInitialized:"TrezorConnect not initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/trezor-suite/blob/develop/docs/packages/connect/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This package is not suitable to work with browser. Use @trezor/connect-web package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};var Ie=class extends Error{constructor(t,o){super(o),this.code=t,this.message=o}};w.TrezorError=Ie;var ni=(e,t)=>new Ie(e,t||w.ERROR_CODES[e]);w.TypedError=ni;var ii=e=>e&&e.error instanceof Error?{error:e.error.message,code:e.error.code}:e;w.serializeError=ii;w.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"});var jt=u(re=>{n();i();Object.defineProperty(re,"__esModule",{value:!0});re.MODULES=re.TYPES=void 0;re.TYPES={bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezos",binance:"Binance",solana:"Solana"};re.MODULES=["binance","cardano","eos","ethereum","nem","ripple","solana","stellar","tezos"]});var Gt=u(ne=>{n();i();Object.defineProperty(ne,"__esModule",{value:!0});ne.NETWORK_IDS=ne.PROTOCOL_MAGICS=void 0;var zt;(function(e){e[e.mainnet=764824073]="mainnet",e[e.testnet_preprod=1]="testnet_preprod",e[e.testnet_preview=2]="testnet_preview",e[e.testnet_legacy=1097911063]="testnet_legacy"})(zt||(ne.PROTOCOL_MAGICS=zt={}));var qt;(function(e){e[e.mainnet=1]="mainnet",e[e.testnet=0]="testnet"})(qt||(ne.NETWORK_IDS=qt={}))});var Kt=u(G=>{n();i();Object.defineProperty(G,"__esModule",{value:!0});G.TxVersion=G.TxType=G.Networks=void 0;var Vt;(function(e){e[e.mainnet=104]="mainnet",e[e.testnet=152]="testnet",e[e.mijin=96]="mijin"})(Vt||(G.Networks=Vt={}));var Wt;(function(e){e[e.TRANSFER=257]="TRANSFER",e[e.COSIGNING=258]="COSIGNING",e[e.IMPORTANCE_TRANSFER=2049]="IMPORTANCE_TRANSFER",e[e.AGGREGATE_MODIFICATION=4097]="AGGREGATE_MODIFICATION",e[e.MULTISIG_SIGNATURE=4098]="MULTISIG_SIGNATURE",e[e.MULTISIG=4100]="MULTISIG",e[e.PROVISION_NAMESPACE=8193]="PROVISION_NAMESPACE",e[e.MOSAIC_CREATION=16385]="MOSAIC_CREATION",e[e.SUPPLY_CHANGE=16386]="SUPPLY_CHANGE"})(Wt||(G.TxType=Wt={}));var Ht;(function(e){e[e.mainnet=1744830464]="mainnet",e[e.testnet=-1744830464]="testnet",e[e.mijin=1610612736]="mijin"})(Ht||(G.TxVersion=Ht={}))});var _t=u(d=>{n();i();Object.defineProperty(d,"__esModule",{value:!0});d.TezosBallotType=d.TezosContractType=d.StellarSignerType=d.StellarMemoType=d.StellarAssetType=d.NEMImportanceTransferMode=d.NEMModificationType=d.NEMSupplyChangeType=d.NEMMosaicLevy=d.MoneroNetworkType=d.Enum_WordRequestType=d.RecoveryDeviceType=d.SdProtectOperationType=d.Enum_Capability=d.Enum_HomescreenFormat=d.Enum_SafetyCheckLevel=d.Enum_BackupType=d.EthereumDataType=d.EthereumDefinitionType=d.DebugPhysicalButton=d.DebugButton=d.Enum_PinMatrixRequestType=d.Enum_ButtonRequestType=d.FailureType=d.CardanoTxWitnessType=d.CardanoTxSigningMode=d.CardanoCVoteRegistrationFormat=d.CardanoTxAuxiliaryDataSupplementType=d.CardanoPoolRelayType=d.CardanoCertificateType=d.CardanoTxOutputSerializationFormat=d.CardanoNativeScriptHashDisplayFormat=d.CardanoNativeScriptType=d.CardanoAddressType=d.CardanoDerivationType=d.Enum_RequestType=d.AmountUnit=d.DecredStakingSpendType=d.Enum_OutputScriptType=d.Enum_InputScriptType=d.BinanceTimeInForce=d.BinanceOrderSide=d.BinanceOrderType=d.DeviceModelInternal=void 0;var Yt;(function(e){e.T1B1="T1B1",e.T2T1="T2T1",e.T2B1="T2B1"})(Yt||(d.DeviceModelInternal=Yt={}));var $t;(function(e){e[e.OT_UNKNOWN=0]="OT_UNKNOWN",e[e.MARKET=1]="MARKET",e[e.LIMIT=2]="LIMIT",e[e.OT_RESERVED=3]="OT_RESERVED"})($t||(d.BinanceOrderType=$t={}));var Jt;(function(e){e[e.SIDE_UNKNOWN=0]="SIDE_UNKNOWN",e[e.BUY=1]="BUY",e[e.SELL=2]="SELL"})(Jt||(d.BinanceOrderSide=Jt={}));var Xt;(function(e){e[e.TIF_UNKNOWN=0]="TIF_UNKNOWN",e[e.GTE=1]="GTE",e[e.TIF_RESERVED=2]="TIF_RESERVED",e[e.IOC=3]="IOC"})(Xt||(d.BinanceTimeInForce=Xt={}));var Zt;(function(e){e[e.SPENDADDRESS=0]="SPENDADDRESS",e[e.SPENDMULTISIG=1]="SPENDMULTISIG",e[e.EXTERNAL=2]="EXTERNAL",e[e.SPENDWITNESS=3]="SPENDWITNESS",e[e.SPENDP2SHWITNESS=4]="SPENDP2SHWITNESS",e[e.SPENDTAPROOT=5]="SPENDTAPROOT"})(Zt||(d.Enum_InputScriptType=Zt={}));var eo;(function(e){e[e.PAYTOADDRESS=0]="PAYTOADDRESS",e[e.PAYTOSCRIPTHASH=1]="PAYTOSCRIPTHASH",e[e.PAYTOMULTISIG=2]="PAYTOMULTISIG",e[e.PAYTOOPRETURN=3]="PAYTOOPRETURN",e[e.PAYTOWITNESS=4]="PAYTOWITNESS",e[e.PAYTOP2SHWITNESS=5]="PAYTOP2SHWITNESS",e[e.PAYTOTAPROOT=6]="PAYTOTAPROOT"})(eo||(d.Enum_OutputScriptType=eo={}));var to;(function(e){e[e.SSGen=0]="SSGen",e[e.SSRTX=1]="SSRTX"})(to||(d.DecredStakingSpendType=to={}));var oo;(function(e){e[e.BITCOIN=0]="BITCOIN",e[e.MILLIBITCOIN=1]="MILLIBITCOIN",e[e.MICROBITCOIN=2]="MICROBITCOIN",e[e.SATOSHI=3]="SATOSHI"})(oo||(d.AmountUnit=oo={}));var ro;(function(e){e[e.TXINPUT=0]="TXINPUT",e[e.TXOUTPUT=1]="TXOUTPUT",e[e.TXMETA=2]="TXMETA",e[e.TXFINISHED=3]="TXFINISHED",e[e.TXEXTRADATA=4]="TXEXTRADATA",e[e.TXORIGINPUT=5]="TXORIGINPUT",e[e.TXORIGOUTPUT=6]="TXORIGOUTPUT",e[e.TXPAYMENTREQ=7]="TXPAYMENTREQ"})(ro||(d.Enum_RequestType=ro={}));var no;(function(e){e[e.LEDGER=0]="LEDGER",e[e.ICARUS=1]="ICARUS",e[e.ICARUS_TREZOR=2]="ICARUS_TREZOR"})(no||(d.CardanoDerivationType=no={}));var io;(function(e){e[e.BASE=0]="BASE",e[e.BASE_SCRIPT_KEY=1]="BASE_SCRIPT_KEY",e[e.BASE_KEY_SCRIPT=2]="BASE_KEY_SCRIPT",e[e.BASE_SCRIPT_SCRIPT=3]="BASE_SCRIPT_SCRIPT",e[e.POINTER=4]="POINTER",e[e.POINTER_SCRIPT=5]="POINTER_SCRIPT",e[e.ENTERPRISE=6]="ENTERPRISE",e[e.ENTERPRISE_SCRIPT=7]="ENTERPRISE_SCRIPT",e[e.BYRON=8]="BYRON",e[e.REWARD=14]="REWARD",e[e.REWARD_SCRIPT=15]="REWARD_SCRIPT"})(io||(d.CardanoAddressType=io={}));var so;(function(e){e[e.PUB_KEY=0]="PUB_KEY",e[e.ALL=1]="ALL",e[e.ANY=2]="ANY",e[e.N_OF_K=3]="N_OF_K",e[e.INVALID_BEFORE=4]="INVALID_BEFORE",e[e.INVALID_HEREAFTER=5]="INVALID_HEREAFTER"})(so||(d.CardanoNativeScriptType=so={}));var ao;(function(e){e[e.HIDE=0]="HIDE",e[e.BECH32=1]="BECH32",e[e.POLICY_ID=2]="POLICY_ID"})(ao||(d.CardanoNativeScriptHashDisplayFormat=ao={}));var co;(function(e){e[e.ARRAY_LEGACY=0]="ARRAY_LEGACY",e[e.MAP_BABBAGE=1]="MAP_BABBAGE"})(co||(d.CardanoTxOutputSerializationFormat=co={}));var uo;(function(e){e[e.STAKE_REGISTRATION=0]="STAKE_REGISTRATION",e[e.STAKE_DEREGISTRATION=1]="STAKE_DEREGISTRATION",e[e.STAKE_DELEGATION=2]="STAKE_DELEGATION",e[e.STAKE_POOL_REGISTRATION=3]="STAKE_POOL_REGISTRATION"})(uo||(d.CardanoCertificateType=uo={}));var lo;(function(e){e[e.SINGLE_HOST_IP=0]="SINGLE_HOST_IP",e[e.SINGLE_HOST_NAME=1]="SINGLE_HOST_NAME",e[e.MULTIPLE_HOST_NAME=2]="MULTIPLE_HOST_NAME"})(lo||(d.CardanoPoolRelayType=lo={}));var _o;(function(e){e[e.NONE=0]="NONE",e[e.CVOTE_REGISTRATION_SIGNATURE=1]="CVOTE_REGISTRATION_SIGNATURE"})(_o||(d.CardanoTxAuxiliaryDataSupplementType=_o={}));var po;(function(e){e[e.CIP15=0]="CIP15",e[e.CIP36=1]="CIP36"})(po||(d.CardanoCVoteRegistrationFormat=po={}));var mo;(function(e){e[e.ORDINARY_TRANSACTION=0]="ORDINARY_TRANSACTION",e[e.POOL_REGISTRATION_AS_OWNER=1]="POOL_REGISTRATION_AS_OWNER",e[e.MULTISIG_TRANSACTION=2]="MULTISIG_TRANSACTION",e[e.PLUTUS_TRANSACTION=3]="PLUTUS_TRANSACTION"})(mo||(d.CardanoTxSigningMode=mo={}));var fo;(function(e){e[e.BYRON_WITNESS=0]="BYRON_WITNESS",e[e.SHELLEY_WITNESS=1]="SHELLEY_WITNESS"})(fo||(d.CardanoTxWitnessType=fo={}));var ho;(function(e){e[e.Failure_UnexpectedMessage=1]="Failure_UnexpectedMessage",e[e.Failure_ButtonExpected=2]="Failure_ButtonExpected",e[e.Failure_DataError=3]="Failure_DataError",e[e.Failure_ActionCancelled=4]="Failure_ActionCancelled",e[e.Failure_PinExpected=5]="Failure_PinExpected",e[e.Failure_PinCancelled=6]="Failure_PinCancelled",e[e.Failure_PinInvalid=7]="Failure_PinInvalid",e[e.Failure_InvalidSignature=8]="Failure_InvalidSignature",e[e.Failure_ProcessError=9]="Failure_ProcessError",e[e.Failure_NotEnoughFunds=10]="Failure_NotEnoughFunds",e[e.Failure_NotInitialized=11]="Failure_NotInitialized",e[e.Failure_PinMismatch=12]="Failure_PinMismatch",e[e.Failure_WipeCodeMismatch=13]="Failure_WipeCodeMismatch",e[e.Failure_InvalidSession=14]="Failure_InvalidSession",e[e.Failure_FirmwareError=99]="Failure_FirmwareError"})(ho||(d.FailureType=ho={}));var go;(function(e){e[e.ButtonRequest_Other=1]="ButtonRequest_Other",e[e.ButtonRequest_FeeOverThreshold=2]="ButtonRequest_FeeOverThreshold",e[e.ButtonRequest_ConfirmOutput=3]="ButtonRequest_ConfirmOutput",e[e.ButtonRequest_ResetDevice=4]="ButtonRequest_ResetDevice",e[e.ButtonRequest_ConfirmWord=5]="ButtonRequest_ConfirmWord",e[e.ButtonRequest_WipeDevice=6]="ButtonRequest_WipeDevice",e[e.ButtonRequest_ProtectCall=7]="ButtonRequest_ProtectCall",e[e.ButtonRequest_SignTx=8]="ButtonRequest_SignTx",e[e.ButtonRequest_FirmwareCheck=9]="ButtonRequest_FirmwareCheck",e[e.ButtonRequest_Address=10]="ButtonRequest_Address",e[e.ButtonRequest_PublicKey=11]="ButtonRequest_PublicKey",e[e.ButtonRequest_MnemonicWordCount=12]="ButtonRequest_MnemonicWordCount",e[e.ButtonRequest_MnemonicInput=13]="ButtonRequest_MnemonicInput",e[e._Deprecated_ButtonRequest_PassphraseType=14]="_Deprecated_ButtonRequest_PassphraseType",e[e.ButtonRequest_UnknownDerivationPath=15]="ButtonRequest_UnknownDerivationPath",e[e.ButtonRequest_RecoveryHomepage=16]="ButtonRequest_RecoveryHomepage",e[e.ButtonRequest_Success=17]="ButtonRequest_Success",e[e.ButtonRequest_Warning=18]="ButtonRequest_Warning",e[e.ButtonRequest_PassphraseEntry=19]="ButtonRequest_PassphraseEntry",e[e.ButtonRequest_PinEntry=20]="ButtonRequest_PinEntry"})(go||(d.Enum_ButtonRequestType=go={}));var Eo;(function(e){e[e.PinMatrixRequestType_Current=1]="PinMatrixRequestType_Current",e[e.PinMatrixRequestType_NewFirst=2]="PinMatrixRequestType_NewFirst",e[e.PinMatrixRequestType_NewSecond=3]="PinMatrixRequestType_NewSecond",e[e.PinMatrixRequestType_WipeCodeFirst=4]="PinMatrixRequestType_WipeCodeFirst",e[e.PinMatrixRequestType_WipeCodeSecond=5]="PinMatrixRequestType_WipeCodeSecond"})(Eo||(d.Enum_PinMatrixRequestType=Eo={}));var So;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.INFO=2]="INFO"})(So||(d.DebugButton=So={}));var bo;(function(e){e[e.LEFT_BTN=0]="LEFT_BTN",e[e.MIDDLE_BTN=1]="MIDDLE_BTN",e[e.RIGHT_BTN=2]="RIGHT_BTN"})(bo||(d.DebugPhysicalButton=bo={}));var vo;(function(e){e[e.NETWORK=0]="NETWORK",e[e.TOKEN=1]="TOKEN"})(vo||(d.EthereumDefinitionType=vo={}));var Oo;(function(e){e[e.UINT=1]="UINT",e[e.INT=2]="INT",e[e.BYTES=3]="BYTES",e[e.STRING=4]="STRING",e[e.BOOL=5]="BOOL",e[e.ADDRESS=6]="ADDRESS",e[e.ARRAY=7]="ARRAY",e[e.STRUCT=8]="STRUCT"})(Oo||(d.EthereumDataType=Oo={}));var To;(function(e){e[e.Bip39=0]="Bip39",e[e.Slip39_Basic=1]="Slip39_Basic",e[e.Slip39_Advanced=2]="Slip39_Advanced"})(To||(d.Enum_BackupType=To={}));var Io;(function(e){e[e.Strict=0]="Strict",e[e.PromptAlways=1]="PromptAlways",e[e.PromptTemporarily=2]="PromptTemporarily"})(Io||(d.Enum_SafetyCheckLevel=Io={}));var Ro;(function(e){e[e.Toif=1]="Toif",e[e.Jpeg=2]="Jpeg",e[e.ToiG=3]="ToiG"})(Ro||(d.Enum_HomescreenFormat=Ro={}));var Po;(function(e){e[e.Capability_Bitcoin=1]="Capability_Bitcoin",e[e.Capability_Bitcoin_like=2]="Capability_Bitcoin_like",e[e.Capability_Binance=3]="Capability_Binance",e[e.Capability_Cardano=4]="Capability_Cardano",e[e.Capability_Crypto=5]="Capability_Crypto",e[e.Capability_EOS=6]="Capability_EOS",e[e.Capability_Ethereum=7]="Capability_Ethereum",e[e.Capability_Lisk=8]="Capability_Lisk",e[e.Capability_Monero=9]="Capability_Monero",e[e.Capability_NEM=10]="Capability_NEM",e[e.Capability_Ripple=11]="Capability_Ripple",e[e.Capability_Stellar=12]="Capability_Stellar",e[e.Capability_Tezos=13]="Capability_Tezos",e[e.Capability_U2F=14]="Capability_U2F",e[e.Capability_Shamir=15]="Capability_Shamir",e[e.Capability_ShamirGroups=16]="Capability_ShamirGroups",e[e.Capability_PassphraseEntry=17]="Capability_PassphraseEntry",e[e.Capability_Solana=18]="Capability_Solana"})(Po||(d.Enum_Capability=Po={}));var Co;(function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE",e[e.REFRESH=2]="REFRESH"})(Co||(d.SdProtectOperationType=Co={}));var No;(function(e){e[e.RecoveryDeviceType_ScrambledWords=0]="RecoveryDeviceType_ScrambledWords",e[e.RecoveryDeviceType_Matrix=1]="RecoveryDeviceType_Matrix"})(No||(d.RecoveryDeviceType=No={}));var Ao;(function(e){e[e.WordRequestType_Plain=0]="WordRequestType_Plain",e[e.WordRequestType_Matrix9=1]="WordRequestType_Matrix9",e[e.WordRequestType_Matrix6=2]="WordRequestType_Matrix6"})(Ao||(d.Enum_WordRequestType=Ao={}));var wo;(function(e){e[e.MAINNET=0]="MAINNET",e[e.TESTNET=1]="TESTNET",e[e.STAGENET=2]="STAGENET",e[e.FAKECHAIN=3]="FAKECHAIN"})(wo||(d.MoneroNetworkType=wo={}));var Uo;(function(e){e[e.MosaicLevy_Absolute=1]="MosaicLevy_Absolute",e[e.MosaicLevy_Percentile=2]="MosaicLevy_Percentile"})(Uo||(d.NEMMosaicLevy=Uo={}));var yo;(function(e){e[e.SupplyChange_Increase=1]="SupplyChange_Increase",e[e.SupplyChange_Decrease=2]="SupplyChange_Decrease"})(yo||(d.NEMSupplyChangeType=yo={}));var Mo;(function(e){e[e.CosignatoryModification_Add=1]="CosignatoryModification_Add",e[e.CosignatoryModification_Delete=2]="CosignatoryModification_Delete"})(Mo||(d.NEMModificationType=Mo={}));var Lo;(function(e){e[e.ImportanceTransfer_Activate=1]="ImportanceTransfer_Activate",e[e.ImportanceTransfer_Deactivate=2]="ImportanceTransfer_Deactivate"})(Lo||(d.NEMImportanceTransferMode=Lo={}));var xo;(function(e){e[e.NATIVE=0]="NATIVE",e[e.ALPHANUM4=1]="ALPHANUM4",e[e.ALPHANUM12=2]="ALPHANUM12"})(xo||(d.StellarAssetType=xo={}));var Bo;(function(e){e[e.NONE=0]="NONE",e[e.TEXT=1]="TEXT",e[e.ID=2]="ID",e[e.HASH=3]="HASH",e[e.RETURN=4]="RETURN"})(Bo||(d.StellarMemoType=Bo={}));var Do;(function(e){e[e.ACCOUNT=0]="ACCOUNT",e[e.PRE_AUTH=1]="PRE_AUTH",e[e.HASH=2]="HASH"})(Do||(d.StellarSignerType=Do={}));var ko;(function(e){e[e.Implicit=0]="Implicit",e[e.Originated=1]="Originated"})(ko||(d.TezosContractType=ko={}));var Fo;(function(e){e[e.Yay=0]="Yay",e[e.Nay=1]="Nay",e[e.Pass=2]="Pass"})(Fo||(d.TezosBallotType=Fo={}))});var Qo=u(U=>{n();i();Object.defineProperty(U,"__esModule",{value:!0});U.PROTO=U.NEM=U.CARDANO=U.NETWORK=U.ERRORS=void 0;var Ee=J();U.ERRORS=Ee.__importStar(Re());U.NETWORK=Ee.__importStar(jt());U.CARDANO=Ee.__importStar(Gt());U.NEM=Ee.__importStar(Kt());U.PROTO=Ee.__importStar(_t())});var ie=u(Q=>{n();i();Object.defineProperty(Q,"__esModule",{value:!0});Q.createUiMessage=Q.UI_REQUEST=Q.UI_EVENT=void 0;Q.UI_EVENT="UI_EVENT";Q.UI_REQUEST={TRANSPORT:"ui-no_transport",BOOTLOADER:"ui-device_bootloader_mode",NOT_IN_BOOTLOADER:"ui-device_not_in_bootloader_mode",REQUIRE_MODE:"ui-device_require_mode",INITIALIZE:"ui-device_not_initialized",SEEDLESS:"ui-device_seedless",FIRMWARE_OLD:"ui-device_firmware_old",FIRMWARE_OUTDATED:"ui-device_firmware_outdated",FIRMWARE_NOT_SUPPORTED:"ui-device_firmware_unsupported",FIRMWARE_NOT_COMPATIBLE:"ui-device_firmware_not_compatible",FIRMWARE_NOT_INSTALLED:"ui-device_firmware_not_installed",FIRMWARE_PROGRESS:"ui-firmware-progress",DEVICE_NEEDS_BACKUP:"ui-device_needs_backup",REQUEST_UI_WINDOW:"ui-request_window",CLOSE_UI_WINDOW:"ui-close_window",REQUEST_PERMISSION:"ui-request_permission",REQUEST_CONFIRMATION:"ui-request_confirmation",REQUEST_PIN:"ui-request_pin",INVALID_PIN:"ui-invalid_pin",REQUEST_PASSPHRASE:"ui-request_passphrase",REQUEST_PASSPHRASE_ON_DEVICE:"ui-request_passphrase_on_device",INVALID_PASSPHRASE:"ui-invalid_passphrase",CONNECT:"ui-connect",LOADING:"ui-loading",SET_OPERATION:"ui-set_operation",SELECT_DEVICE:"ui-select_device",SELECT_ACCOUNT:"ui-select_account",SELECT_FEE:"ui-select_fee",UPDATE_CUSTOM_FEE:"ui-update_custom_fee",INSUFFICIENT_FUNDS:"ui-insufficient_funds",REQUEST_BUTTON:"ui-button",REQUEST_WORD:"ui-request_word",LOGIN_CHALLENGE_REQUEST:"ui-login_challenge_request",BUNDLE_PROGRESS:"ui-bundle_progress",ADDRESS_VALIDATION:"ui-address_validation",IFRAME_FAILURE:"ui-iframe_failure"};var si=(e,t)=>({event:Q.UI_EVENT,type:e,payload:t});Q.createUiMessage=si});var pt=u(se=>{n();i();Object.defineProperty(se,"__esModule",{value:!0});se.createUiResponse=se.UI_RESPONSE=void 0;var ai=ie();se.UI_RESPONSE={RECEIVE_PERMISSION:"ui-receive_permission",RECEIVE_CONFIRMATION:"ui-receive_confirmation",RECEIVE_PIN:"ui-receive_pin",RECEIVE_PASSPHRASE:"ui-receive_passphrase",RECEIVE_DEVICE:"ui-receive_device",RECEIVE_ACCOUNT:"ui-receive_account",RECEIVE_FEE:"ui-receive_fee",RECEIVE_WORD:"ui-receive_word",INVALID_PASSPHRASE_ACTION:"ui-invalid_passphrase_action",CHANGE_SETTINGS:"ui-change_settings",LOGIN_CHALLENGE_RESPONSE:"ui-login_challenge_response"};var ci=(e,t)=>({event:ai.UI_EVENT,type:e,payload:t});se.createUiResponse=ci});var jo=u(j=>{n();i();Object.defineProperty(j,"__esModule",{value:!0});j.createBlockchainMessage=j.BLOCKCHAIN=j.BLOCKCHAIN_EVENT=void 0;j.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT";j.BLOCKCHAIN={CONNECT:"blockchain-connect",ERROR:"blockchain-error",BLOCK:"blockchain-block",NOTIFICATION:"blockchain-notification",FIAT_RATES_UPDATE:"fiat-rates-update"};var di=(e,t)=>({event:j.BLOCKCHAIN_EVENT,type:e,payload:t});j.createBlockchainMessage=di});var zo=u(V=>{n();i();Object.defineProperty(V,"__esModule",{value:!0});V.createResponseMessage=V.RESPONSE_EVENT=void 0;var ui=Re();V.RESPONSE_EVENT="RESPONSE_EVENT";var li=(e,t,o)=>({event:V.RESPONSE_EVENT,type:V.RESPONSE_EVENT,id:e,success:t,payload:t?o:(0,ui.serializeError)(o)});V.createResponseMessage=li});var qo=u(W=>{n();i();Object.defineProperty(W,"__esModule",{value:!0});W.createErrorMessage=W.parseMessage=W.CORE_EVENT=void 0;W.CORE_EVENT="CORE_EVENT";var _i=e=>{let t={event:e.event,type:e.type,payload:e.payload};return typeof e.id=="number"&&(t.id=e.id),typeof e.success=="boolean"&&(t.success=e.success),t};W.parseMessage=_i;var pi=e=>({success:!1,payload:{error:e.message,code:e.code}});W.createErrorMessage=pi});var Go=u(z=>{n();i();Object.defineProperty(z,"__esModule",{value:!0});z.createDeviceMessage=z.DEVICE=z.DEVICE_EVENT=void 0;z.DEVICE_EVENT="DEVICE_EVENT";z.DEVICE={CONNECT:"device-connect",CONNECT_UNACQUIRED:"device-connect_unacquired",DISCONNECT:"device-disconnect",CHANGED:"device-changed",ACQUIRE:"device-acquire",RELEASE:"device-release",ACQUIRED:"device-acquired",RELEASED:"device-released",USED_ELSEWHERE:"device-used_elsewhere",LOADING:"device-loading",BUTTON:"button",PIN:"pin",PASSPHRASE:"passphrase",PASSPHRASE_ON_DEVICE:"passphrase_on_device",WORD:"word"};var mi=(e,t)=>({event:z.DEVICE_EVENT,type:e,payload:t});z.createDeviceMessage=mi});var Vo=u(ae=>{n();i();Object.defineProperty(ae,"__esModule",{value:!0});ae.createIFrameMessage=ae.IFRAME=void 0;var fi=ie();ae.IFRAME={BOOTSTRAP:"iframe-bootstrap",LOADED:"iframe-loaded",INIT:"iframe-init",ERROR:"iframe-error",CALL:"iframe-call",LOG:"iframe-log"};var hi=(e,t)=>({event:fi.UI_EVENT,type:e,payload:t});ae.createIFrameMessage=hi});var Wo=u(ce=>{n();i();Object.defineProperty(ce,"__esModule",{value:!0});ce.createPopupMessage=ce.POPUP=void 0;var gi=ie();ce.POPUP={BOOTSTRAP:"popup-bootstrap",LOADED:"popup-loaded",CORE_LOADED:"popup-core-loaded",INIT:"popup-init",ERROR:"popup-error",EXTENSION_USB_PERMISSIONS:"open-usb-permissions",HANDSHAKE:"popup-handshake",CLOSED:"popup-closed",CANCEL_POPUP_REQUEST:"ui-cancel-popup-request",CLOSE_WINDOW:"window.close",ANALYTICS_RESPONSE:"popup-analytics-response",CONTENT_SCRIPT_LOADED:"popup-content-script-loaded",METHOD_INFO:"popup-method-info"};var Ei=(e,t)=>({event:gi.UI_EVENT,type:e,payload:t});ce.createPopupMessage=Ei});var mt=u(R=>{n();i();Object.defineProperty(R,"__esModule",{value:!0});R.TRANSPORT=R.ACTION_TIMEOUT=R.TREZOR_USB_DESCRIPTORS=R.T1_HID_VENDOR=R.ENDPOINT_ID=R.INTERFACE_ID=R.CONFIGURATION_ID=void 0;R.CONFIGURATION_ID=1;R.INTERFACE_ID=0;R.ENDPOINT_ID=1;R.T1_HID_VENDOR=21324;R.TREZOR_USB_DESCRIPTORS=[{vendorId:21324,productId:1},{vendorId:4617,productId:21440},{vendorId:4617,productId:21441}];R.ACTION_TIMEOUT=1e4;R.TRANSPORT={START:"transport-start",ERROR:"transport-error",UPDATE:"transport-update",DISABLE_WEBUSB:"transport-disable_webusb",REQUEST_DEVICE:"transport-request_device"}});var Ho=u(q=>{n();i();Object.defineProperty(q,"__esModule",{value:!0});q.createTransportMessage=q.TRANSPORT_EVENT=q.TRANSPORT=void 0;var Si=Re(),bi=mt();Object.defineProperty(q,"TRANSPORT",{enumerable:!0,get:function(){return bi.TRANSPORT}});q.TRANSPORT_EVENT="TRANSPORT_EVENT";var vi=(e,t)=>({event:q.TRANSPORT_EVENT,type:e,payload:"error"in t?(0,Si.serializeError)(t):t});q.createTransportMessage=vi});var Yo=u(Ko=>{n();i();Object.defineProperty(Ko,"__esModule",{value:!0})});var ft=u(N=>{n();i();Object.defineProperty(N,"__esModule",{value:!0});N.UI=void 0;var x=J(),Oi=ie(),Ti=pt();x.__exportStar(jo(),N);x.__exportStar(zo(),N);x.__exportStar(qo(),N);x.__exportStar(Go(),N);x.__exportStar(Vo(),N);x.__exportStar(Wo(),N);x.__exportStar(Ho(),N);x.__exportStar(Yo(),N);x.__exportStar(ie(),N);x.__exportStar(pt(),N);N.UI={...Oi.UI_REQUEST,...Ti.UI_RESPONSE}});var Jo=u($o=>{n();i();Object.defineProperty($o,"__esModule",{value:!0})});var Zo=u(Xo=>{n();i();Object.defineProperty(Xo,"__esModule",{value:!0})});var tr=u(er=>{n();i();Object.defineProperty(er,"__esModule",{value:!0})});var rr=u(de=>{n();i();Object.defineProperty(de,"__esModule",{value:!0});de.DeviceModelInternal=de.FirmwareType=void 0;var or;(function(e){e.BitcoinOnly="bitcoin-only",e.Regular="regular"})(or||(de.FirmwareType=or={}));var Ii=_t();Object.defineProperty(de,"DeviceModelInternal",{enumerable:!0,get:function(){return Ii.DeviceModelInternal}})});var ir=u(nr=>{n();i();Object.defineProperty(nr,"__esModule",{value:!0})});var ar=u(sr=>{n();i();Object.defineProperty(sr,"__esModule",{value:!0})});var dr=u(cr=>{n();i();Object.defineProperty(cr,"__esModule",{value:!0})});var lr=u(ur=>{n();i();Object.defineProperty(ur,"__esModule",{value:!0})});var pr=u(_r=>{n();i();Object.defineProperty(_r,"__esModule",{value:!0})});var fr=u(mr=>{n();i();Object.defineProperty(mr,"__esModule",{value:!0})});var gr=u(hr=>{n();i();Object.defineProperty(hr,"__esModule",{value:!0})});var Sr=u(Er=>{n();i();Object.defineProperty(Er,"__esModule",{value:!0})});var vr=u(br=>{n();i();Object.defineProperty(br,"__esModule",{value:!0})});var Tr=u(Or=>{n();i();Object.defineProperty(Or,"__esModule",{value:!0})});var Rr=u(Ir=>{n();i();Object.defineProperty(Ir,"__esModule",{value:!0})});var Cr=u(Pr=>{n();i();Object.defineProperty(Pr,"__esModule",{value:!0})});var Ar=u(Nr=>{n();i();Object.defineProperty(Nr,"__esModule",{value:!0})});var wr=u(T=>{n();i();Object.defineProperty(T,"__esModule",{value:!0});var I=J();I.__exportStar(Jo(),T);I.__exportStar(Zo(),T);I.__exportStar(tr(),T);I.__exportStar(rr(),T);I.__exportStar(ir(),T);I.__exportStar(ar(),T);I.__exportStar(dr(),T);I.__exportStar(lr(),T);I.__exportStar(pr(),T);I.__exportStar(fr(),T);I.__exportStar(gr(),T);I.__exportStar(Sr(),T);I.__exportStar(vr(),T);I.__exportStar(Tr(),T);I.__exportStar(Rr(),T);I.__exportStar(Cr(),T);I.__exportStar(Ar(),T)});var Ur=u(X=>{n();i();Object.defineProperty(X,"__esModule",{value:!0});X.DEFAULT_DOMAIN=X.VERSION=void 0;X.VERSION="9.1.6";var Ri=X.VERSION.split(".").map(e=>parseInt(e,10));X.DEFAULT_DOMAIN=`https://connect.trezor.io/${Ri[0]}/`});var yr=u(B=>{n();i();Object.defineProperty(B,"__esModule",{value:!0});B.parseConnectSettings=B.corsValidator=B.DEFAULT_PRIORITY=void 0;var ue=Ur();B.DEFAULT_PRIORITY=2;var Pi={configSrc:"./data/config.json",version:ue.VERSION,debug:!1,priority:B.DEFAULT_PRIORITY,trustedHost:!0,connectSrc:ue.DEFAULT_DOMAIN,iframeSrc:`${ue.DEFAULT_DOMAIN}iframe.html`,popup:!1,popupSrc:`${ue.DEFAULT_DOMAIN}popup.html`,webusbSrc:`${ue.DEFAULT_DOMAIN}webusb.html`,transports:void 0,pendingTransportEvent:!0,env:"node",lazyLoad:!1,timestamp:new Date().getTime(),interactionTimeout:600,sharedLogger:!0},Ci=e=>{if(!!e&&typeof e.email=="string"&&typeof e.appUrl=="string")return{email:e.email,appUrl:e.appUrl}},Ni=e=>{if(typeof e=="string"&&(e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)))return e};B.corsValidator=Ni;var Ai=(e={})=>{var t;let o={...Pi};"debug"in e&&(typeof e.debug=="boolean"?o.debug=e.debug:typeof e.debug=="string"&&(o.debug=e.debug==="true")),e.trustedHost===!1&&(o.trustedHost=e.trustedHost),typeof e.connectSrc=="string"&&((t=e.connectSrc)===null||t===void 0?void 0:t.startsWith("http"))?o.connectSrc=(0,B.corsValidator)(e.connectSrc):o.trustedHost&&(o.connectSrc=e.connectSrc);let r=o.connectSrc||ue.DEFAULT_DOMAIN;return o.iframeSrc=`${r}iframe.html`,o.popupSrc=`${r}popup.html`,o.webusbSrc=`${r}webusb.html`,typeof e.transportReconnect=="boolean"&&(o.transportReconnect=e.transportReconnect),typeof e.webusb=="boolean"&&(o.webusb=e.webusb),Array.isArray(e.transports)&&(o.transports=e.transports),typeof e.popup=="boolean"&&(o.popup=e.popup),typeof e.lazyLoad=="boolean"&&(o.lazyLoad=e.lazyLoad),typeof e.pendingTransportEvent=="boolean"&&(o.pendingTransportEvent=e.pendingTransportEvent),typeof e.extension=="string"&&(o.extension=e.extension),typeof e.env=="string"&&(o.env=e.env),typeof e.timestamp=="number"&&(o.timestamp=e.timestamp),typeof e.interactionTimeout=="number"&&(o.interactionTimeout=e.interactionTimeout),typeof e.manifest=="object"&&(o.manifest=Ci(e.manifest)),typeof e.sharedLogger=="boolean"&&(o.sharedLogger=e.sharedLogger),o};B.parseConnectSettings=Ai});var le=u(Z=>{n();i();Object.defineProperty(Z,"__esModule",{value:!0});Z.parseConnectSettings=void 0;var ht=J();ht.__exportStar(Qo(),Z);ht.__exportStar(ft(),Z);ht.__exportStar(wr(),Z);var wi=yr();Object.defineProperty(Z,"parseConnectSettings",{enumerable:!0,get:function(){return wi.parseConnectSettings}})});var Mr=u(Pe=>{n();i();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.factory=void 0;var H=ft(),Ui=({eventEmitter:e,manifest:t,init:o,call:r,requestLogin:a,uiResponse:_,renderWebUSBButton:p,disableWebUSB:h,requestWebUSBDevice:y,cancel:M,dispose:b})=>({manifest:t,init:o,getSettings:()=>r({method:"getSettings"}),on:(s,F)=>{e.on(s,F)},off:(s,F)=>{e.removeListener(s,F)},removeAllListeners:s=>{typeof s=="string"?e.removeAllListeners(s):e.removeAllListeners()},uiResponse:_,blockchainGetAccountBalanceHistory:s=>r({...s,method:"blockchainGetAccountBalanceHistory"}),blockchainGetCurrentFiatRates:s=>r({...s,method:"blockchainGetCurrentFiatRates"}),blockchainGetFiatRatesForTimestamps:s=>r({...s,method:"blockchainGetFiatRatesForTimestamps"}),blockchainDisconnect:s=>r({...s,method:"blockchainDisconnect"}),blockchainEstimateFee:s=>r({...s,method:"blockchainEstimateFee"}),blockchainGetTransactions:s=>r({...s,method:"blockchainGetTransactions"}),blockchainSetCustomBackend:s=>r({...s,method:"blockchainSetCustomBackend"}),blockchainSubscribe:s=>r({...s,method:"blockchainSubscribe"}),blockchainSubscribeFiatRates:s=>r({...s,method:"blockchainSubscribeFiatRates"}),blockchainUnsubscribe:s=>r({...s,method:"blockchainUnsubscribe"}),blockchainUnsubscribeFiatRates:s=>r({...s,method:"blockchainUnsubscribeFiatRates"}),requestLogin:s=>a(s),cardanoGetAddress:s=>r({...s,method:"cardanoGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),cardanoGetNativeScriptHash:s=>r({...s,method:"cardanoGetNativeScriptHash"}),cardanoGetPublicKey:s=>r({...s,method:"cardanoGetPublicKey"}),cardanoSignTransaction:s=>r({...s,method:"cardanoSignTransaction"}),cardanoComposeTransaction:s=>r({...s,method:"cardanoComposeTransaction"}),cipherKeyValue:s=>r({...s,method:"cipherKeyValue"}),composeTransaction:s=>r({...s,method:"composeTransaction"}),ethereumGetAddress:s=>r({...s,method:"ethereumGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),ethereumGetPublicKey:s=>r({...s,method:"ethereumGetPublicKey"}),ethereumSignMessage:s=>r({...s,method:"ethereumSignMessage"}),ethereumSignTransaction:s=>r({...s,method:"ethereumSignTransaction"}),ethereumSignTypedData:s=>r({...s,method:"ethereumSignTypedData"}),ethereumVerifyMessage:s=>r({...s,method:"ethereumVerifyMessage"}),getAccountDescriptor:s=>r({...s,method:"getAccountDescriptor"}),getAccountInfo:s=>r({...s,method:"getAccountInfo"}),getAddress:s=>r({...s,method:"getAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),getDeviceState:s=>r({...s,method:"getDeviceState"}),getFeatures:s=>r({...s,method:"getFeatures"}),getFirmwareHash:s=>r({...s,method:"getFirmwareHash"}),getOwnershipId:s=>r({...s,method:"getOwnershipId"}),getOwnershipProof:s=>r({...s,method:"getOwnershipProof"}),getPublicKey:s=>r({...s,method:"getPublicKey"}),nemGetAddress:s=>r({...s,method:"nemGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),nemSignTransaction:s=>r({...s,method:"nemSignTransaction"}),pushTransaction:s=>r({...s,method:"pushTransaction"}),rippleGetAddress:s=>r({...s,method:"rippleGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),rippleSignTransaction:s=>r({...s,method:"rippleSignTransaction"}),signMessage:s=>r({...s,method:"signMessage"}),signTransaction:s=>r({...s,method:"signTransaction"}),solanaGetPublicKey:s=>r({...s,method:"solanaGetPublicKey"}),solanaGetAddress:s=>r({...s,method:"solanaGetAddress"}),solanaSignTransaction:s=>r({...s,method:"solanaSignTransaction"}),stellarGetAddress:s=>r({...s,method:"stellarGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),stellarSignTransaction:s=>r({...s,method:"stellarSignTransaction"}),tezosGetAddress:s=>r({...s,method:"tezosGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),tezosGetPublicKey:s=>r({...s,method:"tezosGetPublicKey"}),tezosSignTransaction:s=>r({...s,method:"tezosSignTransaction"}),unlockPath:s=>r({...s,method:"unlockPath"}),eosGetPublicKey:s=>r({...s,method:"eosGetPublicKey"}),eosSignTransaction:s=>r({...s,method:"eosSignTransaction"}),binanceGetAddress:s=>r({...s,method:"binanceGetAddress",useEventListener:e.listenerCount(H.UI.ADDRESS_VALIDATION)>0}),binanceGetPublicKey:s=>r({...s,method:"binanceGetPublicKey"}),binanceSignTransaction:s=>r({...s,method:"binanceSignTransaction"}),verifyMessage:s=>r({...s,method:"verifyMessage"}),resetDevice:s=>r({...s,method:"resetDevice"}),wipeDevice:s=>r({...s,method:"wipeDevice"}),checkFirmwareAuthenticity:s=>r({...s,method:"checkFirmwareAuthenticity"}),applyFlags:s=>r({...s,method:"applyFlags"}),applySettings:s=>r({...s,method:"applySettings"}),authenticateDevice:s=>r({...s,method:"authenticateDevice"}),authorizeCoinjoin:s=>r({...s,method:"authorizeCoinjoin"}),cancelCoinjoinAuthorization:s=>r({...s,method:"cancelCoinjoinAuthorization"}),showDeviceTutorial:s=>r({...s,method:"showDeviceTutorial"}),backupDevice:s=>r({...s,method:"backupDevice"}),changePin:s=>r({...s,method:"changePin"}),firmwareUpdate:s=>r({...s,method:"firmwareUpdate"}),recoveryDevice:s=>r({...s,method:"recoveryDevice"}),getCoinInfo:s=>r({...s,method:"getCoinInfo"}),rebootToBootloader:s=>r({...s,method:"rebootToBootloader"}),setBusy:s=>r({...s,method:"setBusy"}),setProxy:s=>r({...s,method:"setProxy"}),dispose:b,cancel:M,renderWebUSBButton:p,disableWebUSB:h,requestWebUSBDevice:y});Pe.factory=Ui});var gt=u(A=>{n();i();Object.defineProperty(A,"__esModule",{value:!0});A.getLog=A.enableLogByPrefix=A.enableLog=A.setLogWriter=A.initLog=A.Log=void 0;var Se="#bada55",Lr="#20abd8",xr="#f4a744",yi="#fbd948",Br={"@trezor/connect":`color: ${Lr}; background: #000;`,"@trezor/connect-web":`color: ${Lr}; background: #000;`,IFrame:`color: ${xr}; background: #000;`,Core:`color: ${xr}; background: #000;`,DeviceList:`color: ${Se}; background: #000;`,Device:`color: ${Se}; background: #000;`,DeviceCommands:`color: ${Se}; background: #000;`,"@trezor/transport":`color: ${Se}; background: #000;`,InteractionTimeout:`color: ${Se}; background: #000;`,"@trezor/connect-popup":`color: ${yi}; background: #000;`},Mi=100,Ce=class{constructor(t,o,r){this.prefix=t,this.enabled=o,this.messages=[],this.css=typeof window<"u"&&Br[t]?Br[t]:"",r&&(this.logWriter=r)}addMessage(t,o,...r){let a={level:t,prefix:o,css:this.css,message:r,timestamp:Date.now()};if(this.messages.push(a),this.logWriter)try{this.logWriter.add(a)}catch(_){console.error("There was an error adding log message",_,a)}this.messages.length>Mi&&this.messages.shift()}setWriter(t){this.logWriter=t}log(...t){this.addMessage("log",this.prefix,...t),this.enabled&&console.log(`%c${this.prefix}`,this.css,...t)}error(...t){this.addMessage("error",this.prefix,...t),this.enabled&&console.error(`%c${this.prefix}`,this.css,...t)}warn(...t){this.addMessage("warn",this.prefix,...t),this.enabled&&console.warn(`%c${this.prefix}`,this.css,...t)}debug(...t){this.addMessage("debug",this.prefix,...t),this.enabled&&(this.css?console.log(`%c${this.prefix}`,this.css,...t):console.log(this.prefix,...t))}};A.Log=Ce;var D={},ee,Li=(e,t,o)=>{let r=o||ee,a=new Ce(e,!!t,r);return D[e]=a,a};A.initLog=Li;var xi=e=>{Object.keys(D).forEach(t=>{if(ee=e(),ee){D[t].setWriter(ee);let{messages:o}=D[t];o.forEach(r=>{ee?.add(r)})}})};A.setLogWriter=xi;var Bi=e=>{Object.keys(D).forEach(t=>{D[t].enabled=!!e})};A.enableLog=Bi;var Di=(e,t)=>{D[e]&&(D[e].enabled=t)};A.enableLogByPrefix=Di;var ki=()=>{let e=[];return Object.keys(D).forEach(t=>{e=e.concat(D[t].messages)}),e.sort((t,o)=>t.timestamp-o.timestamp),e};A.getLog=ki});var Dr=u(Ne=>{n();i();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.config=void 0;var Fi=mt();Ne.config={webusb:Fi.TREZOR_USB_DESCRIPTORS,whitelist:[{origin:"chrome-extension://imloifkgjagghnncjkhggdhalmcnfklk",priority:1},{origin:"chrome-extension://niebkpllfhmpfbffbfifagfgoamhpflf",priority:1},{origin:"file://",priority:2},{origin:"trezor.io",priority:0},{origin:"sldev.cz",priority:0},{origin:"localhost",priority:0},{origin:"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion",priority:0}],management:[{origin:"trezor.io"},{origin:"sldev.cz"},{origin:"localhost"}],knownHosts:[{origin:"imloifkgjagghnncjkhggdhalmcnfklk",label:"Trezor Password Manager (Develop)",icon:""},{origin:"niebkpllfhmpfbffbfifagfgoamhpflf",label:"Trezor Password Manager",icon:""},{origin:"mnpfhpndmjholfdlhpkjfmjkgppmodaf",label:"MetaMask",icon:""},{origin:"webextension@metamask.io",label:"MetaMask",icon:""},{origin:"nkbihfbeogaeaoehlefnkodbefgpgknn",label:"MetaMask",icon:""},{origin:"file://",label:" ",icon:""}],onionDomains:{"trezor.io":"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion"},assets:[{name:"coins",url:"./data/coins.json"},{name:"coinsEth",url:"./data/coins-eth.json"},{name:"bridge",url:"./data/bridge/releases.json"},{name:"firmware-t1b1",url:"./data/firmware/t1b1/releases.json"},{name:"firmware-t2t1",url:"./data/firmware/t2t1/releases.json"},{name:"firmware-t2b1",url:"./data/firmware/t2b1/releases.json"}],messages:"./data/messages/messages.json",supportedBrowsers:{chrome:{version:59,download:"https://www.google.com/chrome/",update:"https://support.google.com/chrome/answer/95414"},chromium:{version:59,download:"https://www.chromium.org/",update:"https://www.chromium.org/"},electron:{version:0,download:"https://www.electronjs.org/",update:"https://www.electronjs.org/"},firefox:{version:54,download:"https://www.mozilla.org/en-US/firefox/new/",update:"https://support.mozilla.org/en-US/kb/update-firefox-latest-version"}},supportedFirmware:[{coin:["xrp","txrp"],methods:["getAccountInfo"],min:{T1B1:"0",T2T1:"2.1.0"},max:void 0,comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{coin:["bnb"],min:{T1B1:"1.9.0",T2T1:"2.3.0"},comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{coin:["eth","tsep","tgor"],min:{T1B1:"1.8.0",T2T1:"2.1.0"},comment:["There were protobuf backwards incompatible changes."]},{methods:["rippleGetAddress","rippleSignTransaction"],min:{T1B1:"0",T2T1:"2.1.0"},comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{methods:["cardanoGetAddress","cardanoGetPublicKey"],min:{T1B1:"0",T2T1:"2.3.2"},comment:["Shelley fork support since firmware 2.3.2"]},{methods:["cardanoSignTransaction"],min:{T1B1:"0",T2T1:"2.4.2"},comment:["Non-streamed signing no longer supported"]},{methods:["cardanoGetNativeScriptHash"],min:{T1B1:"0",T2T1:"2.4.3"},comment:["Cardano GetNativeScriptHash call added in 2.4.3"]},{methods:["tezosSignTransaction"],min:{T1B1:"0",T2T1:"2.1.8"},comment:["Since 2.1.8 there are new protobuf fields in tezos transaction (Babylon fork)"]},{methods:["stellarSignTransaction"],min:{T1B1:"1.9.0",T2T1:"2.3.0"},comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{capabilities:["replaceTransaction","amountUnit"],min:{T1B1:"1.9.4",T2T1:"2.3.5"},comment:["new sign tx process since 1.9.4/2.3.5"]},{capabilities:["decreaseOutput"],min:{T1B1:"1.10.0",T2T1:"2.4.0"},comment:["allow reduce output in RBF transaction since 1.10.0/2.4.0"]},{capabilities:["eip1559"],min:{T1B1:"1.10.4",T2T1:"2.4.2"},comment:["new eth transaction pricing mechanism (EIP1559) since 1.10.4/2.4.2"]},{capabilities:["taproot","signMessageNoScriptType"],min:{T1B1:"1.10.4",T2T1:"2.4.3"},comment:["new btc accounts taproot since 1.10.4/2.4.3 (BTC + TEST only)","SignMessage with no_script_type support"]},{coin:["dcr","tdcr"],methods:["signTransaction"],min:{T1B1:"1.10.1",T2T1:"2.4.0"},comment:[""]},{methods:["ethereumSignTypedData"],min:{T1B1:"1.10.5",T2T1:"2.4.3"},comment:["EIP-712 typed signing support added in 1.10.5/2.4.3"]},{capabilities:["eip712-domain-only"],min:{T1B1:"1.10.6",T2T1:"2.4.4"},comment:["EIP-712 domain-only signing, when primaryType=EIP712Domain"]},{capabilities:["coinjoin"],methods:["authorizeCoinjoin","cancelCoinjoinAuthorization","getOwnershipId","getOwnershipProof","setBusy","unlockPath"],min:{T1B1:"1.12.1",T2T1:"2.5.3"}},{methods:["showDeviceTutorial","authenticateDevice"],min:{T1B1:"0",T2T1:"0",T2B1:"2.6.1"},comment:["Only on T2B1"]},{methods:["rebootToBootloader"],min:{T1B1:"1.11.0",T2T1:"2.6.0"}},{methods:["getFirmwareHash"],min:{T1B1:"1.11.1",T2T1:"2.5.1"}},{methods:["solanaGetPublicKey","solanaGetAddress","solanaSignTransaction"],min:{T1B1:"0",T2T1:"2.7.0",T2B1:"2.7.0"}}]}});var kr=u(Ae=>{n();i();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.arrayDistinct=void 0;var Qi=(e,t,o)=>o.indexOf(e)===t;Ae.arrayDistinct=Qi});var Et=u(we=>{n();i();Object.defineProperty(we,"__esModule",{value:!0});we.arrayPartition=void 0;var ji=(e,t)=>e.reduce(([o,r],a)=>t(a)?[[...o,a],r]:[o,[...r,a]],[[],[]]);we.arrayPartition=ji});var Fr=u(Ue=>{n();i();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.arrayShuffle=void 0;var zi=e=>{let t=e.slice();for(let o=t.length-1;o>0;o--){let r=Math.floor(Math.random()*(o+1));[t[o],t[r]]=[t[r],t[o]]}return t};Ue.arrayShuffle=zi});var jr=u(ye=>{n();i();Object.defineProperty(ye,"__esModule",{value:!0});ye.arrayToDictionary=void 0;var Qr=e=>!!["string","number"].includes(typeof e),qi=(e,t,o)=>o?e.reduce((r,a)=>{var _;let p=t(a);return Qr(p)?Object.assign(Object.assign({},r),{[p]:[...(_=r[p])!==null&&_!==void 0?_:[],a]}):r},{}):e.reduce((r,a)=>{let _=t(a);return Qr(_)?Object.assign(Object.assign({},r),{[_]:a}):r},{});ye.arrayToDictionary=qi});var zr=u(_e=>{n();i();Object.defineProperty(_e,"__esModule",{value:!0});_e.getChunkSize=_e.reverseBuffer=void 0;var Gi=e=>{if(e.length<1)return e;let t=c.Buffer.alloc(e.length),o=t.length-1;for(let r=0;r<t.length/2;r++)t[r]=e[o],t[o]=e[r],o--;return t};_e.reverseBuffer=Gi;var Vi=e=>{let t=c.Buffer.allocUnsafe(1);return t.writeUInt8(e),t};_e.getChunkSize=Vi});var Gr=u(Me=>{n();i();Object.defineProperty(Me,"__esModule",{value:!0});Me.bytesToHumanReadable=void 0;var qr=["B","KB","MB","GB","TB"],Wi=e=>{let t=Math.abs(e),o=0;for(;t>=1024||o>=qr.length;)t/=1024,o++;return`${t.toFixed(1)} ${qr[o]}`};Me.bytesToHumanReadable=Wi});var Vr=u(Le=>{n();i();Object.defineProperty(Le,"__esModule",{value:!0});Le.capitalizeFirstLetter=void 0;var Hi=e=>e.charAt(0).toUpperCase()+e.slice(1);Le.capitalizeFirstLetter=Hi});var Wr=u(xe=>{n();i();Object.defineProperty(xe,"__esModule",{value:!0});xe.cloneObject=void 0;var Ki=e=>{let t=JSON.stringify(e);return t===void 0?e:JSON.parse(t)};xe.cloneObject=Ki});var Hr=u(Be=>{n();i();Object.defineProperty(Be,"__esModule",{value:!0});Be.countBytesInString=void 0;var Yi=e=>encodeURI(e).split(/%..|./).length-1;Be.countBytesInString=Yi});var Kr=u(De=>{n();i();Object.defineProperty(De,"__esModule",{value:!0});De.createCooldown=void 0;var $i=e=>{let t=0;return()=>{let o=Date.now();return o-t>=e?(t=o,!0):!1}};De.createCooldown=$i});var Yr=u(ke=>{n();i();Object.defineProperty(ke,"__esModule",{value:!0});ke.createDeferred=void 0;var Ji=e=>{let t=()=>{},o=()=>{},r=new Promise((a,_)=>{t=a,o=_});return{id:e,resolve:t,reject:o,promise:r}};ke.createDeferred=Ji});var $r=u(Fe=>{n();i();Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createTimeoutPromise=void 0;var Xi=e=>new Promise(t=>setTimeout(t,e));Fe.createTimeoutPromise=Xi});var Jr=u(pe=>{n();i();Object.defineProperty(pe,"__esModule",{value:!0});pe.getValueByKey=pe.getKeyByValue=void 0;function Zi(e,t){return e&&Object.keys(e).find(o=>e[o]===t)}pe.getKeyByValue=Zi;function es(e,t){let o=e&&Object.keys(e).find(r=>r===t);return o&&e[o]}pe.getValueByKey=es});var Xr=u(Qe=>{n();i();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getNumberFromPixelString=void 0;var ts=e=>parseInt(e.replace("px",""),10);Qe.getNumberFromPixelString=ts});var Zr=u(je=>{n();i();Object.defineProperty(je,"__esModule",{value:!0});je.getRandomNumberInRange=void 0;var os=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;je.getRandomNumberInRange=os});var en=u(ze=>{n();i();Object.defineProperty(ze,"__esModule",{value:!0});ze.getSynchronize=void 0;var rs=()=>{let e;return t=>{let o=(e??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{e===o&&(e=void 0)});return e=o,e}};ze.getSynchronize=rs});var tn=u(qe=>{n();i();Object.defineProperty(qe,"__esModule",{value:!0});qe.getWeakRandomId=void 0;var ns=e=>{let t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*o.length));return t};qe.getWeakRandomId=ns});var on=u(Ge=>{n();i();Object.defineProperty(Ge,"__esModule",{value:!0});Ge.hasUppercaseLetter=void 0;var is=new RegExp("^(.*[A-Z].*)$"),ss=e=>is.test(e);Ge.hasUppercaseLetter=ss});var rn=u(Ve=>{n();i();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.isAscii=void 0;function as(e){return e?/^[\x00-\x7F]*$/.test(e):!0}Ve.isAscii=as});var nn=u(We=>{n();i();Object.defineProperty(We,"__esModule",{value:!0});We.isHex=void 0;var cs=e=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(e);We.isHex=cs});var sn=u(He=>{n();i();Object.defineProperty(He,"__esModule",{value:!0});He.isNotUndefined=void 0;var ds=e=>typeof e<"u";He.isNotUndefined=ds});var an=u(Ke=>{n();i();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.isUrl=void 0;var us=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i,ls=e=>us.test(e);Ke.isUrl=ls});var un=u(L=>{n();i();Object.defineProperty(L,"__esModule",{value:!0});L.mergeDeepObject=void 0;var cn=e=>{if(typeof e=="object"&&e!==null){if(typeof Object.getPrototypeOf=="function"){let t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}return!1},_s=(...e)=>e.reduce((t,o)=>{if(Array.isArray(o))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(o).forEach(r=>{["__proto__","constructor","prototype"].includes(r)||(Array.isArray(t[r])&&Array.isArray(o[r])?t[r]=L.mergeDeepObject.options.mergeArrays?Array.from(new Set(t[r].concat(o[r]))):o[r]:cn(t[r])&&cn(o[r])?t[r]=(0,L.mergeDeepObject)(t[r],o[r]):t[r]=o[r])}),t},{});L.mergeDeepObject=_s;var dn={mergeArrays:!0};L.mergeDeepObject.options=dn;L.mergeDeepObject.withOptions=(e,...t)=>{L.mergeDeepObject.options=Object.assign({mergeArrays:!0},e);let o=(0,L.mergeDeepObject)(...t);return L.mergeDeepObject.options=dn,o}});var ln=u(me=>{n();i();var ps=me&&me.__rest||function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(o[r[a]]=e[r[a]]);return o};Object.defineProperty(me,"__esModule",{value:!0});me.objectPartition=void 0;var ms=(e,t)=>t.reduce(([o,r],a)=>{let _=r,p=a,h=_[p],y=ps(_,[typeof p=="symbol"?p:p+""]);return typeof h<"u"?[Object.assign(Object.assign({},o),{[a]:h}),y]:[o,r]},[{},e]);me.objectPartition=ms});var _n=u(Ye=>{n();i();Object.defineProperty(Ye,"__esModule",{value:!0});Ye.parseElectrumUrl=void 0;var fs=/^(?:([a-zA-Z0-9.-]+)|\[([a-f0-9:]+)\]):([0-9]{1,5}):([ts])$/,hs=e=>{var t;let o=e.match(fs);if(!!o)return{host:(t=o[1])!==null&&t!==void 0?t:o[2],port:Number.parseInt(o[3],10),protocol:o[4]}};Ye.parseElectrumUrl=hs});var pn=u($e=>{n();i();Object.defineProperty($e,"__esModule",{value:!0});$e.parseHostname=void 0;var gs=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i,Es=e=>{var t,o;return(o=(t=e.match(gs))===null||t===void 0?void 0:t[2])===null||o===void 0?void 0:o.toLowerCase()};$e.parseHostname=Es});var mn=u(fe=>{n();i();var Ss=fe&&fe.__awaiter||function(e,t,o,r){function a(_){return _ instanceof o?_:new o(function(p){p(_)})}return new(o||(o=Promise))(function(_,p){function h(b){try{M(r.next(b))}catch(P){p(P)}}function y(b){try{M(r.throw(b))}catch(P){p(P)}}function M(b){b.done?_(b.value):a(b.value).then(h,y)}M((r=r.apply(e,t||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.promiseAllSequence=void 0;var bs=e=>Ss(void 0,void 0,void 0,function*(){let t=[];for(let o=0;o<e.length;++o){let r=yield e[o]();t.push(r)}return t});fe.promiseAllSequence=bs});var fn=u(te=>{n();i();Object.defineProperty(te,"__esModule",{value:!0});te.redactUserPathFromString=te.startOfUserPathRegex=void 0;te.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;var vs=e=>e.replace(te.startOfUserPathRegex,"$1[*]");te.redactUserPathFromString=vs});var bn=u(he=>{n();i();var St=he&&he.__awaiter||function(e,t,o,r){function a(_){return _ instanceof o?_:new o(function(p){p(_)})}return new(o||(o=Promise))(function(_,p){function h(b){try{M(r.next(b))}catch(P){p(P)}}function y(b){try{M(r.throw(b))}catch(P){p(P)}}function M(b){b.done?_(b.value):a(b.value).then(h,y)}M((r=r.apply(e,t||[])).next())})};Object.defineProperty(he,"__esModule",{value:!0});he.scheduleAction=void 0;var hn=e=>Array.isArray(e),gn=()=>new Error("Aborted by signal"),Os=()=>new Error("Aborted by deadline"),Ts=()=>new Error("Aborted by timeout"),En=(e,t)=>new Promise((o,r)=>{if(t.aborted)return r();if(e===void 0)return o();let a=setTimeout(o,e),_=()=>{clearTimeout(a),t.removeEventListener("abort",_),r()};t.addEventListener("abort",_)}),Sn=(e,t,o)=>new Promise((r,a)=>{if(o.aborted)return a();let _=e!==void 0?setTimeout(()=>a(t()),e):void 0,p=()=>{clearTimeout(_),o.removeEventListener("abort",p),a()};o.addEventListener("abort",p)}),Is=(e,t)=>new Promise((o,r)=>{if(t.aborted)return r();if(e?.aborted)return r(gn());let a=()=>r(gn());e?.addEventListener("abort",a);let _=()=>{e?.removeEventListener("abort",a),t.removeEventListener("abort",_),r()};t.addEventListener("abort",_)}),Rs=(e,t)=>St(void 0,void 0,void 0,function*(){let o=new AbortController,r=()=>o.abort();t.aborted&&r(),t.addEventListener("abort",r);try{return yield new Promise(a=>a(e(o.signal)))}finally{t.removeEventListener("abort",r)}}),Ps=(e,t,o,r)=>St(void 0,void 0,void 0,function*(){for(let a=0;a<e-1&&!r.aborted;a++){let _=new AbortController,p=()=>_.abort();r.addEventListener("abort",p);try{return yield t(a,_.signal)}catch{p(),yield o(a)}finally{r.removeEventListener("abort",p)}}return r.aborted?Promise.reject():t(e-1,r)}),Cs=(e,t)=>St(void 0,void 0,void 0,function*(){let{signal:o,delay:r,attempts:a,timeout:_,deadline:p,gap:h}=t,y=p&&p-Date.now(),M=hn(a)?a.length:a??(p?1/0:1),b=new AbortController,P=b.signal,s=hn(a)?F=>a[F]:()=>({timeout:_,gap:h});try{return yield Promise.race([Is(o,P),Sn(y,Os,P),En(r,P).then(()=>Ps(M,(F,ge)=>Promise.race([Sn(s(F).timeout,Ts,P),Rs(e,ge)]),F=>{var ge;return En((ge=s(F).gap)!==null&&ge!==void 0?ge:0,P)},P))])}finally{b.abort()}});he.scheduleAction=Cs});var vn=u(Je=>{n();i();Object.defineProperty(Je,"__esModule",{value:!0});Je.throwError=void 0;var Ns=e=>{throw new Error(e)};Je.throwError=Ns});var On=u(Xe=>{n();i();Object.defineProperty(Xe,"__esModule",{value:!0});Xe.truncateMiddle=void 0;var As=(e,t,o)=>{if(e.length<=t+o)return e;let r=e.substring(0,t),a=e.substring(e.length-o,e.length);return`${r}\u2026${a}`};Xe.truncateMiddle=As});var Tn=u(Ze=>{n();i();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.topologicalSort=void 0;var ws=Et(),Us=(e,t,o)=>{let r=[],a=p=>(0,ws.arrayPartition)(p,h=>!p.some(y=>t(y,h))),_=e;for(;_.length;){let[p,h]=a(_);if(!p.length)throw new Error("Cycle detected");r.push(...o?p.sort(o):p),_=h}return r};Ze.topologicalSort=Us});var In=u(et=>{n();i();Object.defineProperty(et,"__esModule",{value:!0});et.urlToOnion=void 0;var ys=(e,t)=>{var o;let[,r,a,_,p]=(o=e.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))!==null&&o!==void 0?o:[];if(!(!_||!t[_]))return`${r}://${a??""}${t[_]}${p??""}`};et.urlToOnion=ys});var Nn=u(C=>{n();i();Object.defineProperty(C,"__esModule",{value:!0});C.normalizeVersion=C.isNewerOrEqual=C.isEqual=C.isNewer=C.isVersionArray=void 0;var Ms=e=>{if(!Array.isArray(e)||e.length!==3)return!1;for(let t=0;t<e.length;t++){let o=e[t];if(typeof o!="number"||o<0)return!1}return!0};C.isVersionArray=Ms;var Rn=e=>({major:e[0],minor:e[1],patch:e[2]}),Pn=e=>{let t=e.split(".").map(o=>Number(o));if(!(0,C.isVersionArray)(t))throw new Error(`version string is in wrong format: ${e}`);return t},Cn=e=>`${e[0]}.${e[1]}.${e[2]}`,Ls=(e,t)=>{let o=Rn(typeof e=="string"?Pn(e):e),r=Rn(typeof t=="string"?Pn(t):t);return o.major-r.major!==0?o.major>r.major:o.minor-r.minor!==0?o.minor>r.minor:o.patch-r.patch!==0?o.patch>r.patch:!1};C.isNewer=Ls;var xs=(e,t)=>{let o=typeof e=="string"?e:Cn(e),r=typeof t=="string"?t:Cn(t);return o===r};C.isEqual=xs;var Bs=(e,t)=>(0,C.isNewer)(e,t)||(0,C.isEqual)(e,t);C.isNewerOrEqual=Bs;var Ds=e=>e.replace(/\b0+(\d)/g,"$1");C.normalizeVersion=Ds});var An=u(K=>{n();i();Object.defineProperty(K,"__esModule",{value:!0});K.inDoubleQuotes=K.inSingleQuotes=K.inHTML=void 0;var ks=/</g,Fs=/'/g,Qs=/"/g,js=e=>e.replace(ks,"&lt;");K.inHTML=js;var zs=e=>e.replace(Fs,"&#39;");K.inSingleQuotes=zs;var qs=e=>e.replace(Qs,"&quot;");K.inDoubleQuotes=qs});var wn=u(tt=>{n();i();Object.defineProperty(tt,"__esModule",{value:!0});tt.getLocaleSeparators=void 0;var Gs=e=>{var t,o;let a=new Intl.NumberFormat(e).formatToParts(10000.1),_=(t=a.find(({type:h})=>h==="decimal"))===null||t===void 0?void 0:t.value,p=(o=a.find(({type:h})=>h==="group"))===null||o===void 0?void 0:o.value;return{decimalSeparator:_,thousandsSeparator:p}};tt.getLocaleSeparators=Gs});var Un=u(ot=>{n();i();Object.defineProperty(ot,"__esModule",{value:!0});ot.addDashesToSpaces=void 0;var Vs=e=>e.replace(/\s+/g,"-");ot.addDashesToSpaces=Vs});var nt=u(m=>{n();i();var yn=m&&m.__createBinding||(Object.create?function(e,t,o,r){r===void 0&&(r=o);var a=Object.getOwnPropertyDescriptor(t,o);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,r,a)}:function(e,t,o,r){r===void 0&&(r=o),e[r]=t[o]}),Ws=m&&m.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=m&&m.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&yn(t,e,o)},rt=m&&m.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)&&yn(t,e,o);return Ws(t,e),t};Object.defineProperty(m,"__esModule",{value:!0});m.xssFilters=m.versionUtils=m.enumUtils=m.bufferUtils=void 0;g(kr(),m);g(Et(),m);g(Fr(),m);g(jr(),m);m.bufferUtils=rt(zr());g(Gr(),m);g(Vr(),m);g(Wr(),m);g(Hr(),m);g(Kr(),m);g(Yr(),m);g($r(),m);m.enumUtils=rt(Jr());g(Xr(),m);g(Zr(),m);g(en(),m);g(tn(),m);g(on(),m);g(rn(),m);g(nn(),m);g(sn(),m);g(an(),m);g(un(),m);g(ln(),m);g(_n(),m);g(pn(),m);g(mn(),m);g(fn(),m);g(bn(),m);g(vn(),m);g(On(),m);g(Tn(),m);g(In(),m);m.versionUtils=rt(Nn());m.xssFilters=rt(An());g(wn(),m);g(Un(),m)});var bt=u(Y=>{n();i();Object.defineProperty(Y,"__esModule",{value:!0});Y.getOnionDomain=Y.getHost=Y.getOrigin=void 0;var Mn=nt(),Hs=e=>{var t;if(typeof e!="string")return"unknown";if(e.indexOf("file://")===0)return"file://";let[o]=(t=e.match(/^https?:\/\/[^/]+/))!==null&&t!==void 0?t:[];return o??"unknown"};Y.getOrigin=Hs;var Ks=e=>{var t;if(typeof e!="string")return;let[,,o]=(t=e.match(/^(https?):\/\/([^:/]+)?/i))!==null&&t!==void 0?t:[];if(o){let r=o.split(".");return r.length>2?r.slice(r.length-2,r.length).join("."):o}};Y.getHost=Ks;var Ys=(e,t)=>{var o;return Array.isArray(e)?e.map(r=>{var a;return(a=(0,Mn.urlToOnion)(r,t))!==null&&a!==void 0?a:r}):typeof e=="string"&&(o=(0,Mn.urlToOnion)(e,t))!==null&&o!==void 0?o:e};Y.getOnionDomain=Ys});var Ln=u(vt=>{n();i();Object.defineProperty(vt,"__esModule",{value:!0});var $s='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */';vt.default=$s});var Bn=u(l=>{n();i();Object.defineProperty(l,"__esModule",{value:!0});l.initIframeLogger=l.clearTimeout=l.postMessage=l.init=l.dispose=l.messagePromises=l.error=l.timeout=l.initPromise=l.origin=l.instance=void 0;var Js=J(),Ot=nt(),$=le(),Xs=bt(),Zs=gt(),xn=Js.__importDefault(Ln());l.initPromise=(0,Ot.createDeferred)();l.timeout=0;var it=0;l.messagePromises={};var ea=()=>{if(l.instance&&l.instance.parentNode)try{l.instance.parentNode.removeChild(l.instance)}catch{}l.instance=null,l.timeout=0};l.dispose=ea;var ta=()=>{window.clearTimeout(l.timeout),l.error=$.ERRORS.TypedError("Init_IframeBlocked"),(0,l.dispose)(),l.initPromise.reject(l.error)},oa=()=>{if(!l.instance)throw $.ERRORS.TypedError("Init_IframeBlocked");let e=l.instance.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id","TrezorConnectStylesheet"),o.styleSheet?(o.styleSheet.cssText=xn.default,t.appendChild(o)):(o.appendChild(document.createTextNode(xn.default)),t.append(o))},ra=async e=>{l.initPromise=(0,Ot.createDeferred)();let t=document.getElementById("trezorconnect");t?l.instance=t:(l.instance=document.createElement("iframe"),l.instance.frameBorder="0",l.instance.width="0px",l.instance.height="0px",l.instance.style.position="absolute",l.instance.style.display="none",l.instance.style.border="0px",l.instance.style.width="0px",l.instance.style.height="0px",l.instance.id="trezorconnect");let o;if(e.env==="web"){let a=e.manifest?JSON.stringify(e.manifest):"undefined",_=`version=${e.version}&manifest=${encodeURIComponent(btoa(JSON.stringify(a)))}`;o=`${e.iframeSrc}?${_}`}else o=e.iframeSrc;l.instance.setAttribute("src",o),e.webusb&&console.warn('webusb option is deprecated. use `transports: ["WebUsbTransport"] instead`'),navigator.usb&&l.instance.setAttribute("allow","usb"),l.origin=(0,Xs.getOrigin)(l.instance.src),l.timeout=window.setTimeout(()=>{l.initPromise.reject($.ERRORS.TypedError("Init_IframeTimeout"))},1e4);let r=()=>{var a,_;if(!l.instance){l.initPromise.reject($.ERRORS.TypedError("Init_IframeBlocked"));return}try{let h=(a=l.instance.contentWindow)===null||a===void 0?void 0:a.location.origin;if(!h||h==="null"){ta();return}}catch{}let p;typeof chrome<"u"&&chrome.runtime&&typeof chrome.runtime.onConnect<"u"&&(chrome.runtime.onConnect.addListener(()=>{}),p=chrome.runtime.id),(_=l.instance.contentWindow)===null||_===void 0||_.postMessage({type:$.IFRAME.INIT,payload:{settings:e,extension:p}},l.origin),l.instance.onload=null};l.instance.attachEvent?l.instance.attachEvent("onload",r):l.instance.onload=r,document.body&&(document.body.appendChild(l.instance),oa());try{await l.initPromise.promise}catch(a){throw l.instance&&(l.instance.parentNode&&l.instance.parentNode.removeChild(l.instance),l.instance=null),a}finally{window.clearTimeout(l.timeout),l.timeout=0}};l.init=ra;var na=(e,t=!0)=>{var o,r;if(!l.instance)throw $.ERRORS.TypedError("Init_IframeBlocked");if(t){it++,e.id=it,l.messagePromises[it]=(0,Ot.createDeferred)();let{promise:a}=l.messagePromises[it];return(o=l.instance.contentWindow)===null||o===void 0||o.postMessage(e,l.origin),a}return(r=l.instance.contentWindow)===null||r===void 0||r.postMessage(e,l.origin),null};l.postMessage=na;var ia=()=>{window.clearTimeout(l.timeout)};l.clearTimeout=ia;var sa=()=>{let e=()=>({add:t=>{(0,l.postMessage)({event:$.UI_EVENT,type:$.IFRAME.LOG,payload:t})}});(0,Zs.setLogWriter)(e)};l.initIframeLogger=sa});var Dn=u(st=>{n();i();Object.defineProperty(st,"__esModule",{value:!0});st.showPopupRequest=void 0;var Tt="TrezorConnectInteractionLayer",aa=`
    <div class="trezorconnect-container" id="${Tt}">
        <div class="trezorconnect-window">
            <div class="trezorconnect-head">
                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">
                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>
                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>
                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>
                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>
                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>
                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>
                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>
                </svg>
                <div class="trezorconnect-close">
                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">
                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>
                    </svg>
                </div>
            </div>
            <div class="trezorconnect-body">
                <h3>Popup was blocked</h3>
                <p>Please click to "Continue" to open popup manually</p>
                <button class="trezorconnect-open">Continue</button>
            </div>
        </div>
    </div>
`,ca=(e,t)=>{};st.showPopupRequest=ca});var jn=u(at=>{n();i();Object.defineProperty(at,"__esModule",{value:!0});at.PopupManager=void 0;var da=J(),ua=da.__importDefault(wt()),kn=nt(),S=le(),Fn=bt(),Qn=Dn(),la=850,_a=500,pa=3e3,It=class extends ua.default{constructor(t){super(),this.locked=!1,this.requestTimeout=0,this.closeInterval=0,this.extensionTabId=0,this.settings=t,this.origin=(0,Fn.getOrigin)(t.popupSrc),this.handleMessage=this.handleMessage.bind(this),this.iframeHandshake=(0,kn.createDeferred)(S.IFRAME.LOADED),this.settings.env==="webextension"&&(this.handleExtensionConnect=this.handleExtensionConnect.bind(this),this.handleExtensionMessage=this.handleExtensionMessage.bind(this),chrome.runtime.onConnect.addListener(this.handleExtensionConnect)),window.addEventListener("message",this.handleMessage,!1)}request(){if(this.locked){this.popupWindow&&(this.settings.env==="webextension"?chrome.tabs.update(this.popupWindow.id,{active:!0}):this.popupWindow.focus());return}this.popupWindow&&!this.locked&&this.close();let t=this.open.bind(this);this.locked=!0;let o=this.settings.env==="webextension"?1:la;this.requestTimeout=window.setTimeout(()=>{this.requestTimeout=0,t()},o)}unlock(){this.locked=!1}open(){let t=this.settings.popupSrc;this.popupPromise=(0,kn.createDeferred)(S.POPUP.LOADED),this.openWrapper(t),this.closeInterval=window.setInterval(()=>{!this.popupWindow||(this.settings.env==="webextension"?chrome.tabs.get(this.popupWindow.id,o=>{o||(this.emit(S.POPUP.CLOSED),this.clear())}):this.popupWindow.closed&&(this.clear(),this.emit(S.POPUP.CLOSED)))},_a),this.openTimeout=setTimeout(()=>{this.clear(),(0,Qn.showPopupRequest)(this.open.bind(this),()=>{this.emit(S.POPUP.CLOSED)})},pa)}openWrapper(t){this.settings.env==="webextension"?chrome.windows.getCurrent(o=>{o.type!=="normal"?chrome.windows.create({url:t},r=>{chrome.tabs.query({windowId:r?.id,active:!0},a=>{this.popupWindow=a[0]})}):chrome.tabs.query({currentWindow:!0,active:!0},r=>{this.extensionTabId=r[0].id,chrome.tabs.create({url:t,index:r[0].index+1},a=>{this.popupWindow=a})})}):this.settings.env==="electron"?this.popupWindow=window.open(t,"modal"):(this.popupWindow=window.open("","_blank"),this.popupWindow&&(this.popupWindow.location.href=t))}handleExtensionConnect(t){var o,r;t.name==="trezor-connect"&&(!this.popupWindow||this.popupWindow&&this.popupWindow.id!==((r=(o=t.sender)===null||o===void 0?void 0:o.tab)===null||r===void 0?void 0:r.id)||(this.openTimeout&&clearTimeout(this.openTimeout),this.extensionPort=t,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))}handleExtensionMessage(t){if(!this.extensionPort)return;let o=this.extensionPort,{data:r}=t;if(!(!r||typeof r!="object"))if(r.type===S.POPUP.ERROR){let a=r.payload&&typeof r.payload.error=="string"?r.payload.error:null;this.emit(S.POPUP.CLOSED,a?`Popup error: ${a}`:null),this.clear()}else r.type===S.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then(a=>{o.postMessage({type:S.POPUP.INIT,payload:Object.assign(Object.assign({},a),{settings:this.settings})})})):r.type===S.POPUP.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},a=>{chrome.tabs.create({url:"trezor-usb-permissions.html",index:a[0].index+1},_=>{})}):r.type===S.POPUP.CLOSE_WINDOW&&this.clear()}handleMessage(t){let{data:o}=t;if(!((0,Fn.getOrigin)(t.origin)!==this.origin||!o||typeof o!="object"))if(o.type===S.IFRAME.LOADED)this.iframeHandshake.resolve(o.payload);else if(o.type===S.POPUP.BOOTSTRAP)this.openTimeout&&clearTimeout(this.openTimeout);else if(o.type===S.POPUP.ERROR&&this.popupWindow){let r=o.payload&&typeof o.payload.error=="string"?o.payload.error:null;this.emit(S.POPUP.CLOSED,r?`Popup error: ${r}`:null),this.clear()}else o.type===S.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then(r=>{this.popupWindow.postMessage({type:S.POPUP.INIT,payload:Object.assign(Object.assign({},r),{settings:this.settings})},this.origin)})):(o.type===S.POPUP.CANCEL_POPUP_REQUEST||o.type===S.UI.CLOSE_UI_WINDOW)&&this.clear(!1)}clear(t=!0){this.locked=!1,this.popupPromise=void 0,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=void 0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=void 0),t&&this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0)}close(){if(!!this.popupWindow){if(this.settings.env==="webextension"){let t=chrome.runtime.lastError;chrome.tabs.remove(this.popupWindow.id,()=>{t=chrome.runtime.lastError});return}this.popupWindow.close(),this.popupWindow=null}}async postMessage(t){if(!this.popupWindow&&t.type!==S.UI.REQUEST_UI_WINDOW&&this.openTimeout){this.clear(),(0,Qn.showPopupRequest)(this.open.bind(this),()=>{this.emit(S.POPUP.CLOSED)});return}this.popupPromise&&await this.popupPromise.promise,this.popupWindow&&this.popupWindow.postMessage(t,this.origin)}};at.PopupManager=It});var zn=u(Rt=>{n();i();Object.defineProperty(Rt,"__esModule",{value:!0});var ma=(e="",t)=>{let o=e||".trezor-webusb-button",r=document.querySelectorAll(o),a=`${t}?${Date.now()}`;r.forEach(_=>{if(_.getElementsByTagName("iframe").length<1){let p=_.getBoundingClientRect(),h=document.createElement("iframe");h.frameBorder="0",h.width=`${Math.round(p.width)}px`,h.height=`${Math.round(p.height)}px`,h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.zIndex="1",h.setAttribute("allow","usb"),h.setAttribute("scrolling","no"),h.src=a,_.append(h)}})};Rt.default=ma});var qn=u(oe=>{n();i();Object.defineProperty(oe,"__esModule",{value:!0});oe.parseConnectSettings=oe.getEnv=void 0;var fa=le(),ha=()=>{var e;if(typeof chrome<"u"&&typeof((e=chrome.runtime)===null||e===void 0?void 0:e.onConnect)<"u")return"webextension";if(typeof navigator<"u"){if(typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative")return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};oe.getEnv=ha;var ga=(e,t)=>{let o=new URLSearchParams(e),r={};return Array.from(o.entries()).forEach(([_,p])=>{t.includes(_)&&(r[_]=decodeURIComponent(p))}),r},Ea=(e={})=>{var t;let o=Object.assign({popup:!0},e),r;if(typeof window<"u"?r=window.__TREZOR_CONNECT_SRC:typeof globalThis<"u"&&(r=globalThis.__TREZOR_CONNECT_SRC),typeof r=="string"&&(o.connectSrc=r,o.debug=!0),typeof window<"u"&&typeof((t=window.location)===null||t===void 0?void 0:t.search)=="string"){let a=ga(window.location.search,["trezor-connect-src"]);a["trezor-connect-src"]&&(o.debug=!0,o.connectSrc=a["trezor-connect-src"])}return typeof e.env!="string"&&(o.env=(0,oe.getEnv)()),(0,fa.parseConnectSettings)(o)};oe.parseConnectSettings=Ea});var Ct=u(ct=>{n();i();Object.defineProperty(ct,"__esModule",{value:!0});var ve=J(),Sa=ve.__importDefault(wt()),f=le(),ba=Mr(),va=gt(),Oa=Dr(),E=ve.__importStar(Bn()),Ta=ve.__importStar(jn()),Ia=ve.__importDefault(zn()),Oe=qn(),k=new Sa.default,be=(0,va.initLog)("@trezor/connect-web"),O=(0,Oe.parseConnectSettings)(),v,Gn=()=>{let e=new Ta.PopupManager(O);return e.on(f.POPUP.CLOSED,t=>{E.postMessage({type:f.POPUP.CLOSED,payload:t?{error:t}:null},!1)}),e},Ra=e=>{O=(0,Oe.parseConnectSettings)(Object.assign(Object.assign({},O),{manifest:e}))},Vn=()=>(k.removeAllListeners(),E.dispose(),O=(0,Oe.parseConnectSettings)(),v&&v.close(),Promise.resolve(void 0)),Pa=e=>{v&&v.emit(f.POPUP.CLOSED,e)},Ca=e=>{if(e.origin!==E.origin)return;let t=(0,f.parseMessage)(e.data),o=t.id||0;switch(be.log("handleMessage",t),t.event){case f.RESPONSE_EVENT:E.messagePromises[o]?(E.messagePromises[o].resolve({id:o,success:t.success,payload:t.payload}),delete E.messagePromises[o]):be.warn(`Unknown message id ${o}`);break;case f.DEVICE_EVENT:k.emit(t.event,t),k.emit(t.type,t.payload);break;case f.TRANSPORT_EVENT:k.emit(t.event,t),k.emit(t.type,t.payload);break;case f.BLOCKCHAIN_EVENT:k.emit(t.event,t),k.emit(t.type,t.payload);break;case f.UI_EVENT:if(t.type===f.IFRAME.BOOTSTRAP){E.clearTimeout();break}t.type===f.IFRAME.LOADED&&E.initPromise.resolve(),t.type===f.IFRAME.ERROR&&E.initPromise.reject(t.payload.error),k.emit(t.event,t),k.emit(t.type,t.payload);break;default:be.log("Undefined message",t.event,e.data)}},Wn=async(e={})=>{var t;if(E.instance)throw f.ERRORS.TypedError("Init_AlreadyInitialized");if(O=(0,Oe.parseConnectSettings)(Object.assign(Object.assign({},O),e)),!O.manifest)throw f.ERRORS.TypedError("Init_ManifestMissing");if(!((t=O.transports)===null||t===void 0)&&t.length||(O.transports=["BridgeTransport","WebUsbTransport"]),O.lazyLoad){O.lazyLoad=!1;return}v||(v=Gn()),be.enabled=!!O.debug,window.addEventListener("message",Ca),window.addEventListener("unload",Vn),await E.init(O),O.sharedLogger!==!1&&E.initIframeLogger()},Pt=async e=>{if(!E.instance&&!E.timeout){if(O=(0,Oe.parseConnectSettings)(O),!O.manifest)return(0,f.createErrorMessage)(f.ERRORS.TypedError("Init_ManifestMissing"));v||(v=Gn()),v.request();try{await Wn(O)}catch(t){return v&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(t.code)?v.postMessage((0,f.createUiMessage)(f.UI.IFRAME_FAILURE)):v.clear()),(0,f.createErrorMessage)(t)}}if(E.timeout)return(0,f.createErrorMessage)(f.ERRORS.TypedError("Init_ManifestMissing"));if(E.error)return(0,f.createErrorMessage)(E.error);O.popup&&v&&v.request();try{let t=await E.postMessage({type:f.IFRAME.CALL,payload:e});return t?(!t.success&&t.payload.code!=="Device_CallInProgress"&&v&&v.unlock(),t):(v&&v.unlock(),(0,f.createErrorMessage)(f.ERRORS.TypedError("Method_NoResponse")))}catch(t){return be.error("__call error",t),v&&v.clear(),(0,f.createErrorMessage)(t)}},Na=e=>{if(!E.instance)throw f.ERRORS.TypedError("Init_NotInitialized");let{type:t,payload:o}=e;E.postMessage({event:f.UI_EVENT,type:t,payload:o})},Aa=e=>{(0,Ia.default)(e,O.webusbSrc)},wa=async e=>{if(typeof e.callback=="function"){let{callback:t}=e,o=async a=>{let{data:_}=a;if(_&&_.type===f.UI.LOGIN_CHALLENGE_REQUEST)try{let p=await t();E.postMessage({event:f.UI_EVENT,type:f.UI.LOGIN_CHALLENGE_RESPONSE,payload:p})}catch(p){E.postMessage({event:f.UI_EVENT,type:f.UI.LOGIN_CHALLENGE_RESPONSE,payload:p.message})}};window.addEventListener("message",o,!1);let r=await Pt(Object.assign(Object.assign({method:"requestLogin"},e),{asyncChallenge:!0,callback:null}));return window.removeEventListener("message",o),r}return Pt(Object.assign({method:"requestLogin"},e))},Ua=()=>{if(!E.instance)throw f.ERRORS.TypedError("Init_NotInitialized");E.postMessage({event:f.UI_EVENT,type:f.TRANSPORT.DISABLE_WEBUSB})},ya=async()=>{try{await window.navigator.usb.requestDevice({filters:Oa.config.webusb}),E.postMessage({event:f.UI_EVENT,type:f.TRANSPORT.REQUEST_DEVICE})}catch{}},Ma=(0,ba.factory)({eventEmitter:k,manifest:Ra,init:Wn,call:Pt,requestLogin:wa,uiResponse:Na,renderWebUSBButton:Aa,disableWebUSB:Ua,requestWebUSBDevice:ya,cancel:Pa,dispose:Vn});ct.default=Ma;ve.__exportStar(le(),ct)});n();i();var Jn=At(Ct());Xn();n();i();oi();ri();var La=Qt(lt.bip44,"0/"),xa=async(e,t,o)=>{t[Te]={},await La(e,t,o),t[Te]=t[Te][lt.bip44]},Ba=async({index:e,keys:t})=>{let o={index:e,addressType:{[Bt]:Dt.SEGWIT_NESTED_49}};return await xa(e,o,t),o},Hn=Ba;n();i();Zn();ei();ti();var Kn=async e=>{try{let t=e.map(a=>({evm:[a[xt].address]})),{data:o}=await Lt(Mt.getAssetFromChain,t),r=o.reduce((a,_)=>{let{evm:p}=_;return Ft(a,p),a},{});return e.map(a=>{let{mainnet:_}=a;return{...a,balance:r[_.address]||0}})}catch{return e}};n();i();var Yn=At(Ct());var $n=async()=>{let{success:e,payload:t}=await Yn.default.ethereumGetPublicKey({path:ut,showOnTrezor:!1});if(e)return[{extendedPublicKey:t?.xpub,path:ut}];throw t};var Nt=class{constructor(){this.initSDK(),this.keys=[]}initSDK(){Jn.default.init({lazyLoad:!0,manifest:{email:"support@metamask.io",appUrl:"https://metamask.io"}})}async getXpub(){let t=await $n();this.keys.push(...t)}async getAccounts({page:t}){this.keys.length||await this.getXpub();let o=[];for(let a=t*dt;a<(t+1)*dt;a++){let _=await Hn({index:a,keys:this.keys});o.push(_)}return await Kn(o)}throwTxCancelTip(){throw yt.error({title:Ut("wallet_extension_header_toast_transaction_canceled")}),new Error(kt)}},tp=Nt;export{Ct as a,tp as b};
//# sourceMappingURL=chunk-A6POGSHU.js.map
