import{a as O,b as X}from"./chunk-DFPRATON.js";import{a as q,c as H}from"./chunk-EBRJSEEJ.js";import{a as V}from"./chunk-CIVR4FUI.js";import{e as Q}from"./chunk-U7IWD6UB.js";import{Na as de,ca as h}from"./chunk-2QHGKEME.js";import{o as A}from"./chunk-WU2LB6XB.js";import{Jb as P,Sb as ie,la as M,na as y,oa as R,pa as U,qa as G,qb as z,ra as K,rb as J,tb as L,ua as j,wa as $}from"./chunk-COF7YKSN.js";import{A as k,K as oe}from"./chunk-VZKEX7KP.js";import{H as D}from"./chunk-BJKBO23H.js";import{D as F,P as W,ka as a,va as b}from"./chunk-XFTQD4B2.js";import{b as ne}from"./chunk-73B6GL3S.js";import{f as E,o as B,q as T}from"./chunk-Y5OH3DDZ.js";B();T();var I=E(ne()),C=E(de());b();oe();B();T();L();var Z=[M,y,K,$];L();B();T();b();ie();L();function x(e,t){return!t||!e||!e.length?null:e.find(n=>a(n.address)===a(t))||null}function v(e,t,r){let s,n=x(e,r);return n&&t&&n.networks.indexOf(t)!==-1&&(s=n.name),s}function ee(e,t,r){let s,n=P({localType:t});if(n){let o=e.find(u=>{let m=a(u.account[n.chain]),p=a(r),f=!1;if(t===y||t===j||t===R||t===U||t===G){let l=J(t),c=u.accountsMap?.[l];if(c){let N=Object.values(c).map(g=>g.address);f=!!N.find(g=>a(g)===m)&&!!N.find(g=>a(g)===p),f=Boolean(f)}}return m===p||f});o&&(s=`${o.keyringName} - ${o.walletName}`)}return s}function ae(){return(0,C.useSelector)(O)}function S(){let e=(0,C.useSelector)(O),t=q();return(0,I.useMemo)(()=>e.map(({networks:r,...s})=>({...s,networks:r.map(n=>Z.includes(n)?t.filter(o=>o.baseChain===n).map(({chain:o})=>o):n).flat()})),[e,t])}function ue(e){let{baseCoinId:t,network:r,name:s}=e||{},n=H({coinId:t}),o=S(),u=V(),m=r||n?.localType;return(0,I.useMemo)(()=>{let p=o||[];s&&(p=p.filter(({name:l,address:c})=>l.indexOf(s)!==-1||c.indexOf(s)!==-1)),m&&(p=p.filter(({networks:l})=>l.indexOf(m)!==-1));let f=W(u,"localType");return p.map(l=>({...l,networks:l.networks.map(c=>{let N=f[c];return{name:c,iconUrl:N?.image}})}))},[o,u,s,m])}function te(e){let t=S();return(0,I.useCallback)((r,s)=>v(t,s??e,r),[t])}function se(e){let t=(0,C.useSelector)(h);return(0,I.useCallback)((r,s)=>ee(t,s??e,r),[t])}function le(e){let t=te(e),r=se(e);return(0,I.useCallback)((s,n)=>{let o=t(s,n);return o?{name:o,address:s,type:A.ADDRESS_BOOK}:(o=r(s,n),o?{name:o,address:s,type:A.WALLET_ACCOUNT}:null)},[t,r])}function me(e){return(0,C.useSelector)(X)[e]||[]}function Re(e){let t=ae();return(0,I.useMemo)(()=>x(t,e),[t,e])}var ce=({type:e,name:t,address:r},{addressToNameFn:s,addressInBookToNameFn:n,addressInWalletToNameFn:o})=>{let u=t;if(e===A.ADDRESS_BOOK)u=n(r);else if(e===A.WALLET_ACCOUNT)u=o(r);else if(e===A.DIRECT){let m=s(r);m&&(u=m.name)}return{type:e,address:r,name:u}};function Ue(e,t){let r=[],s=[],n=[],o=[],u=le(e),m=te(e),p=se(e),f=me(e),l=ue({network:e}),c=(0,C.useSelector)(h),N=Q();return(0,I.useMemo)(()=>{f?.length&&(s=f.map(({type:i,name:d,address:_})=>ce({type:i,name:d,address:_},{addressToNameFn:u,addressInBookToNameFn:m,addressInWalletToNameFn:p})),s=s.filter(({address:i})=>a(i)!==a(t)),s?.length&&r.push({group:k("wallet_extension_send_dropdown_recent_address"),list:s}));let g;if(z.includes(e))g=[],c.forEach(i=>{N(e,i.walletId)?.forEach((d,_)=>{a(d.address)!==a(t)&&g.push({address:d.address,group:i.keyringName,name:i.walletName,type:A.WALLET_ACCOUNT,addressType:d.addressType,hideName:_!==0,walletId:i.walletId})})});else{let i=c.filter(d=>{let _=d.needBackup!==1,w=a(d.account[e]),re=a(t);return _&&w!==re&&!!w});i?.length&&(g=i.map(d=>({address:d.account[e],group:d.keyringName,name:d.walletName,type:A.WALLET_ACCOUNT,walletId:d.walletId})))}return o=Object.entries(F(g,"group")),o.forEach(([i,d])=>{r.push({group:i,list:d})}),l?.length&&(n=l.map(({address:i,name:d})=>({address:i,name:d,type:A.ADDRESS_BOOK})),n=n.filter(({address:i})=>a(i)!==a(t)),n?.length&&r.push({group:k("wallet_extension_send_dropdown_address_book"),list:n})),r},[t,f,l,c])}function Ge(e){let t=S();return()=>{t&&t?.length>=200?D.error({title:k("wallet_extension_addressbook_toast_address_limit_reached")}):e&&e()}}export{Z as a,ue as b,le as c,Re as d,Ue as e,Ge as f};
//# sourceMappingURL=chunk-ROS2ENQV.js.map
