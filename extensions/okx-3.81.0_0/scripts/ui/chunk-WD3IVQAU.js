import{a as si}from"./chunk-JVF7GJB3.js";import{a as ii}from"./chunk-QKPPTYDW.js";import{a as O}from"./chunk-KPUXAS7Z.js";import{a as mi}from"./chunk-WST3WRLT.js";import{a as ri}from"./chunk-I4EML244.js";import{b as ai}from"./chunk-LS6URCUV.js";import{a as ye}from"./chunk-Q7DF5H6O.js";import{a as ni,w as oi}from"./chunk-2VUOGSTW.js";import{d as We,g as ti,k as ot}from"./chunk-BNS5ABAB.js";import{a as Qt,b as Jt}from"./chunk-VEPTXEII.js";import{h as ei}from"./chunk-UOWKDFTX.js";import{g as jt,k as Xt}from"./chunk-3ZKJXYZ4.js";import{c as Oe}from"./chunk-EBRJSEEJ.js";import{a as nt}from"./chunk-DZGSODSZ.js";import{a as at}from"./chunk-FGAB46RQ.js";import{o as Ae}from"./chunk-Z62JX42S.js";import{F as Zt}from"./chunk-2QHGKEME.js";import{b as oe}from"./chunk-MAAUVUWY.js";import{E as ke,_ as s,da as rt,fa as le}from"./chunk-WU2LB6XB.js";import{a as w,c as M,d as ne,e as ee,f as z,g as tt,h as A,i as qt,j as ue,l as he,m as j,o as de,p as it,t as be,u as Kt}from"./chunk-EFOY37CC.js";import{O as ns,a as Ht,b as as}from"./chunk-COF7YKSN.js";import{A as I,K as Yt,o as Z}from"./chunk-VZKEX7KP.js";import{d as st,q as R}from"./chunk-BJKBO23H.js";import{I as zt,M as $t,e as Je,f as Vt,va as et}from"./chunk-XFTQD4B2.js";import{b as Ne}from"./chunk-73B6GL3S.js";import{f as J,o as S,q as D}from"./chunk-Y5OH3DDZ.js";S();D();var n=J(Ne());et();Yt();S();D();var ci=()=>t=>Kt(t,0),ui=({gasPrice:e,gasLimit:t,extFee:i,baseCoin:r={},currencyId:a})=>{let c=M(w(e,t),i),u=it(c),F=at(u,{symbol:r?.symbol,precision:r?.displayPrecision}).value,o=ot(r?.coinId,c,{currencyId:a,useApproximate:!0});return{gasFeeDisplay:`${F}${o}`,gasFee:u}},ve=({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:i,maxFeePerGas:r,supportEip1559:a,extFee:c,gasPriceInfo:u,gasLimitInfo:F,gasType:o,baseCoin:p={},currencyId:x})=>{let{minGasFee:m,minGasPrice:G}=ni({gasLimit:t,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:r,supportEip1559:a,extFee:c,gasPriceInfo:u,gasLimitInfo:F,gasType:o}),P=it(m),f=at(P,{symbol:p?.symbol,precision:p?.displayPrecision,isStableCoin:p?.stableCoin,useLargeNumberPrecision:!0}).value,L=ot(p?.coinId,m,{currencyId:x,useApproximate:!0});return{minGasPrice:G,minGasFee:P,minGasFeeDisplay:`${f}${L}`}};S();D();var Ue=J(Ne()),Be=J(Ae());et();S();D();var li=J(Ae()),fi=J(ns());function os({preExecParams:e,coinId:t,from:i,to:r,value:a="0",data:c,typeInt:u,onlyGasLimit:F,method:o,dappInfo:p,authorizationList:x,stateOverrideList:m}){let G=We(t);return(0,li.useMemoizedFn)(async(P={})=>{let f;if(e)f=e;else if(o===ei)f={chainIndex:G?.chainId,method:o,from:i,to:r,amount:a,inputData:c,onlyGasLimit:F};else{let l=`${a||"0"}`;f={dappData:JSON.stringify({to:r,from:i,value:l.startsWith("0x")?l:(0,fi.addHexPrefix)(oe(l)),data:c,typeInt:u}),from:i,authorizationList:x,dappInfo:p||{},chainIndex:G?.chainId,method:o===ke.ONLY_SIGN_TRANSACTION?ke.ONLY_SIGN_TRANSACTION:ke.SIGN_TRANSACTION,stateOverrideList:m,onlyGasLimit:F}}return await Xt({...f,...P})})}var pi=os;function ms(e,t={}){let{wait:i=200,disabled:r=!1,forceUpdate:a=null,onFetchSuccess:c=()=>{},onFetchError:u=()=>{}}=t,[F,o]=(0,Ue.useState)(null),[p,{setTrue:x,setFalse:m}]=(0,Be.useBoolean)(!0),{from:G,to:P,value:f="0x0",data:L,typeInt:l,coinId:y,method:C,authorizationList:U,stateOverrideList:d,onlyGasLimit:T}=e,Q=pi(e),W=async()=>{try{let se=await Q();o(se?.gasFee||{}),Je(c)&&c()}catch{o(Re=>({...Re,queryGasLimitErrorUseDefault:!0})),Je(u)&&u()}finally{m()}},{run:ie}=(0,Be.useDebounceFn)(()=>{if(r){m();return}W()},{wait:i});return(0,Ue.useEffect)(()=>{x(),ie()},[G,P,f,L,l,y,C,U,d,a,T,r]),{isGasLimitLoading:p,gasLimitInfo:F}}var Fi=ms;S();D();function cs({coinId:e,address:t}){let i=We(e),[r,a]=mi({coinId:e,address:t,chainId:i?.chainId});return{isSignInfoInitLoading:r,signInfo:r?null:a}}var Pi=cs;S();D();var Te=J(Ne()),Gi=J(Ae());et();Yt();function us({signInfo:e,gasLimitInfo:t}){let{min:i,safePriorityFee:r,supportEip1559:a}=e?.gasPrice||ye,{gasLimit:c}=t||{};return{min:i,safePriorityFee:r,supportEip1559:a,gasLimit:c}}function ls({initialCustomGasLimit:e,gasLimit:t}){return z(e||"0",t||"0")}function fs({supportEip1559:e,initialCustomMaxPriorityFee:t,safePriorityFee:i,initialCustomMaxBaseFee:r,min:a}){return e&&(z(t||"0",i)||z(M(r||"0",t||"0"),a))}function ps({gasLimitLessBase:e,eip1559GasPriceLessMin:t,gasPriceLessMin:i}){return e||t||i}function Fs({supportEip1559:e,initialCustomGasPrice:t,min:i}){return!e&&z(t||"0",i)}function Ps({coinId:e,initialGasData:t={initialGasType:s.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},signInfo:i,gasLimitInfo:r}){let a=(0,Te.useRef)(!1),[c,u]=(0,Te.useState)(t),[F,o]=(0,Te.useState)(!1),p=Oe({coinId:e}),x=Qt();return(0,Gi.useAsyncEffect)(async()=>{if(!i||!r||a.current)return;if(p?.realChainIdHex)try{let T=await x(p?.realChainIdHex);if(!zt(T)){u({initialGasType:s.CUSTOM,initialCustomGasPrice:T?.gasPrice,initialCustomMaxPriorityFee:T?.maxPriorityFeePerGas,initialCustomMaxBaseFee:Z.sub(T?.maxFeePerGas||"0",T?.maxPriorityFeePerGas||"0")}),o(!0);return}}catch(T){Vt(T)}let m={...t},{initialGasType:G,initialCustomMaxBaseFee:P,initialCustomMaxPriorityFee:f,initialCustomGasPrice:L,initialCustomGasLimit:l}=m,{min:y,safePriorityFee:C,supportEip1559:U,gasLimit:d}=us({signInfo:i,gasLimitInfo:r});if(G===s.CUSTOM){let T=ls({initialCustomGasLimit:l,gasLimit:d});T&&(m.initialCustomGasLimit=d);let Q=fs({supportEip1559:U,initialCustomMaxPriorityFee:f,safePriorityFee:C,initialCustomMaxBaseFee:P,min:y}),W=Fs({supportEip1559:U,initialCustomGasPrice:L,min:y});ps({gasLimitLessBase:T,eip1559GasPriceLessMin:Q,gasPriceLessMin:W})&&(m.initialCustomMaxPriorityFee=null,m.initialCustomMaxBaseFee=null,m.initialCustomGasPrice=null,m.initialGasType=s.STANDARD),u(m)}o(!0),a.current=!0},[i,r]),{finalInitialGasData:c,renderNetworkFee:F}}var gi=Ps;S();D();var X={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};S();D();var te=J(Ne()),xi=J(Ae());as();var Gs=(e={},t={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:i,disabled:r,fetchOnce:a,signInfo:c={}}=t,{coinId:u,supportEip1559:F,tx:o,needExtFee:p=!1}=e,[x,m]=(0,te.useState)(null),[G,P]=(0,te.useState)({data:"",loading:!1,error:""});(0,te.useEffect)(()=>{!p||r||P(l=>({...l,loading:!0,error:""}))},[o,p,r]);let f=()=>{try{if(!u){let l=c;Ht.captureEvent({message:`coinId is ${u}`,contexts:{report:{info:JSON.stringify({href:window&&window.location&&window.location.href,rawData:l})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${u}`}]},tags:{},level:"info"})}}catch{}},L=l=>{let y=A(l?.gasPrice,"0")&&A(l?.gasLimit,"0"),C=A(l?.maxFeePerGas,"0")&&A(l?.maxPriorityFeePerGas,"0")&&A(l?.gasLimit,"0");return{isValidLegacyGas:y,isValid1559Gas:C}};return(0,xi.useDebounceEffect)(()=>{if(!p||r){P(d=>({...d,loading:!1,error:""}));return}if(a===x&&a!==null){P(d=>({...d,loading:!1,error:""}));return}let{isValidLegacyGas:l,isValid1559Gas:y}=L(o);if(!(F?y:l)||!o){P(d=>({...d,loading:!1,error:""}));return}(async()=>{try{let d={...o,value:oe(o.value),gasLimit:oe(o.gasLimit)},T=F?{...d,maxFeePerGas:oe(o.maxFeePerGas),maxPriorityFeePerGas:oe(o.maxPriorityFeePerGas)}:{...d,gasPrice:oe(o.gasPrice)},Q=Zt(T),W=await oi(Q);f();let ie=await jt({inputData:W,coinId:u});P(se=>({...se,data:ie,loading:!1,error:""}))}catch(d){P(T=>({...T,loading:!1,error:d.error_message||"Network error"}))}finally{a&&m(a)}})()},[u,o,a,p],{wait:i}),G},gs=({commonTx:e,gasPrice:t,maxFeePerGas:i,priorityFee:r,supportEip1559:a})=>(0,te.useMemo)(()=>a?{...e,maxFeePerGas:i,maxPriorityFeePerGas:r}:{...e,gasPrice:t},[e,i,t,r,a]),di=({coinId:e,from:t,to:i,value:r,inputData:a,supportEip1559:c,needExtFee:u,estimatedL1FeeOptions:F,selectedGasInfo:o})=>{let p=(0,te.useMemo)(()=>({from:t,to:i,value:r,data:a,gasLimit:o.gasLimit}),[t,i,r,a,o.gasLimit]),x=gs({commonTx:p,gasPrice:o.gasPrice,maxFeePerGas:o.maxFeePerGas,priorityFee:o.maxPriorityFeePerGas,supportEip1559:c}),m=Gs({coinId:e,tx:x,supportEip1559:c,needExtFee:u},F);return(0,te.useMemo)(()=>{let G=m.loading,P=m.error,f={[s.SLOW]:m.data,[s.STANDARD]:m.data,[s.FAST]:m.data,[s.CUSTOM]:m.data};return{loading:G,error:P,data:f}},[m])};var fe=e=>$t(e)||tt(e,0);function yi({className:e}){return n.default.createElement(st,{className:e,desc:I("wallet_extension_transfer_text_higher_than_necessary"),type:st.TYPE.warn,closable:!1})}var xs=({visible:e=!1,address:t="",inputData:i="",tokenAddress:r="",coinId:a="",value:c="0",initialGasData:u={initialGasType:s.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},estimatedL1FeeOptions:F={},onBack:o=()=>{},onClose:p=()=>{},onGasChange:x=()=>{},onServerDataChange:m=()=>{},minimumGasLimit:G="0",isSignInfoLoading:P,signInfo:f,initialGasLimitInfo:L,isGasLimitLoading:l,currencyId:y,gasReturn:C,onGasTypeManualChange:U,isMev:d,mevInfo:T})=>{let Q=(0,n.useRef)(!1),[,W]=ti(a,{withPrice:!0}),ie=Oe({coinId:W?.coinId}),[se,Re,Ti]=Jt(ie?.realChainIdHex),Le=si(),He=ci(),{initialGasType:mt=s.STANDARD,initialCustomMaxBaseFee:ct,initialCustomMaxPriorityFee:ut,initialCustomGasPrice:lt,initialCustomGasLimit:ft}=u||{},pt=fe(ct)?void 0:de(ct),Ft=fe(ut)?void 0:de(ut),Pt=fe(lt)?void 0:de(lt),Li=fe(ft)?void 0:ft,[Gt,_i]=(0,n.useState)(),[gt,Ii]=(0,n.useState)(),[xt,Ci]=(0,n.useState)(),[dt,yt]=(0,n.useState)(),[_e,Tt]=(0,n.useState)(mt),[E,Ie]=(0,n.useState)(mt),Ei=g=>{let{priorityRate:_}=T||{},v=Qe=>w(Qe,_),k=(Qe,ss)=>{let rs=ee([0,w(ss,ne(_,1))]);return M(Qe,rs)},{supportEip1559:K,max:ae,min:Xe,normal:Ut,fastPriorityFee:Me,proposePriorityFee:Bt,safePriorityFee:Rt}=g,ce={};return K&&_&&(ce.fastPriorityFee=v(Me),ce.safePriorityFee=v(Rt),ce.proposePriorityFee=v(Bt),ce.max=k(ae,Me),ce.normal=k(Ut,Bt),ce.min=k(Xe,Rt)),{...g,...ce}},H=(0,n.useMemo)(()=>d?f?.gasPrice?Ei(f?.gasPrice):ye:f?.gasPrice||ye,[f?.gasPrice,d]),Si=f?.needExtFee,{min:Di,normal:wi,max:Mi,minGasPrice:Ni,supportEip1559:B,suggestBaseFee:hi,safePriorityFee:Ge,proposePriorityFee:ge,fastPriorityFee:xe}=H,$=He(Di),Y=He(wi),q=He(Mi),b=(0,n.useMemo)(()=>{let g=qt(L?.minGasLimit,G)?L?.minGasLimit:G,_={...L||{},minGasLimit:g};return z(_?.gasLimit,_?.minGasLimit)&&(_.gasLimit=_?.minGasLimit),_},[L,G]),Lt=`${b?.gasLimit||0}`,V=Li||Lt,Ve=`${b?.minGasLimit||Lt}`,ze=`${b?.maxGasLimit||1500*1e4}`,bi=O($),_t=O(Y),ki=O(q),It=de(Ni),$e=O(hi),Ai=O(ne($,Ge)),Ct=O(ne(Y,ge)),Oi=O(ne(q,xe)),Wi=O(Ge),Et=O(ge),vi=O(xe),Ce=(0,n.useRef)(),Ee=(0,n.useRef)(),Se=(0,n.useRef)(),Ye=(0,n.useRef)(),St={[s.SLOW]:bi,[s.STANDARD]:_t,[s.FAST]:ki,[s.CUSTOM]:fe(Ce.current)?_t:Ce.current},Dt={[s.SLOW]:Ai,[s.STANDARD]:Ct,[s.FAST]:Oi,[s.CUSTOM]:fe(Ee.current)?Ct:Ee.current},wt={[s.SLOW]:Wi,[s.STANDARD]:Et,[s.FAST]:vi,[s.CUSTOM]:fe(Se.current)?Et:Se.current},pe=typeof xt=="string"?xt:Pt||St[E],Fe=typeof Gt=="string"?Gt:pt||Dt[E],Pe=typeof gt=="string"?gt:Ft||wt[E],re=typeof dt=="string"?dt:V,qe=M(Fe,Pe),N={};E===s.SLOW?(N.gasPrice=$,N.maxFeePerGas=$,N.maxPriorityFeePerGas=Ge,N.gasLimit=V):E===s.STANDARD?(N.gasPrice=Y,N.maxFeePerGas=Y,N.maxPriorityFeePerGas=ge,N.gasLimit=V):E===s.FAST?(N.gasPrice=q,N.maxFeePerGas=q,N.maxPriorityFeePerGas=xe,N.gasLimit=V):(N.gasPrice=j(pe),N.maxFeePerGas=j(qe),N.maxPriorityFeePerGas=j(Pe),N.gasLimit=re);let h=di({coinId:a,from:t,to:r,value:c,inputData:i,supportEip1559:B,needExtFee:Si,estimatedL1FeeOptions:{wait:200,...F,signInfo:f},selectedGasInfo:N}),De=P||l||h.loading,{minGasFeeDisplay:Ui,minGasFee:Bi,minGasPrice:Ri}=ve({gasPrice:$,gasLimit:V,maxPriorityFeePerGas:Ge,maxFeePerGas:$,supportEip1559:B,extFee:h?.data?.[s.SLOW],gasPriceInfo:H,gasLimitInfo:b,gasType:_e,baseCoin:W,currencyId:y}),Hi=O(Ri),{minGasFeeDisplay:Vi,minGasFee:zi,minGasPrice:$i}=ve({gasPrice:Y,gasLimit:V,maxPriorityFeePerGas:ge,maxFeePerGas:Y,supportEip1559:B,extFee:h?.data?.[s.STANDARD],gasPriceInfo:H,gasLimitInfo:b,gasType:_e,baseCoin:W,currencyId:y}),Yi=O($i),{minGasFeeDisplay:qi,minGasFee:Ki,minGasPrice:Zi}=ve({gasPrice:q,gasLimit:V,maxPriorityFeePerGas:xe,maxFeePerGas:q,supportEip1559:B,extFee:h?.data?.[s.FAST],gasPriceInfo:H,gasLimitInfo:b,gasType:_e,baseCoin:W,currencyId:y}),ji=O(Zi),Mt=z(Fe,0)?I("extension_wallet_transaction_errortip_basefeelimit"):"",Nt=z(Fe,$e)&&A(Fe,0)?I("extension_wallet_transaction_errortip_notsuccess",{baseFee:$e}):"",ht=tt(Pe,0)?I("extension_wallet_transaction_errortip_priorityfeelimit"):"",bt=z(pe,It)?I("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:It}):"",kt=z(re,Ve)||A(re,ze)?I("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:nt(Ve,0),maxGasLimit:nt(ze)}):"",At=!kt&&(!B&&!bt||B&&!Mt&&!ht),we=j(he((B?qe:pe)||0)),Xi=O(we),{gasFeeDisplay:Ot}=ui({gasPrice:he(we),gasLimit:he(re),extFee:h?.data?.[s.CUSTOM],baseCoin:W,currencyId:y}),Qi=M(w($,V),h?.data?.[s.SLOW]),Ji=M(w(Y,V),h?.data?.[s.STANDARD]),Wt=M(w(q,V),h?.data?.[s.FAST]),vt=M(w(we,re),h?.data?.[s.CUSTOM]),Ke=A(vt,w(Wt,2)),Ze=[{typeKey:s.SLOW,gasFee:Bi,unitPrice:`${Z.ceilShort(Hi,2)} ${I("extension_wallet_transaction_input_gwei")}`,totalPrice:Ui,estimatedTime:Le(H,$),onClick:()=>(U?.(),Ie(s.SLOW))},{typeKey:s.STANDARD,gasFee:zi,unitPrice:`${Z.ceilShort(Yi,2)} ${I("extension_wallet_transaction_input_gwei")}`,totalPrice:Vi,estimatedTime:Le(H,Y),onClick:()=>(U?.(),Ie(s.STANDARD))},{typeKey:s.FAST,gasFee:Ki,unitPrice:`${Z.ceilShort(ji,2)} ${I("extension_wallet_transaction_input_gwei")}`,totalPrice:qi,estimatedTime:Le(H,q),onClick:()=>(U?.(),Ie(s.FAST))}],es=(0,n.useMemo)(()=>C&&C?.status!==1&&(!C?.tip?.error||C?.tip?.key===ai.exceedGasLimit)?Ze?.map(g=>g?.typeKey!==s.CUSTOM&&Z.lte(Z.mul(g?.gasFee,W?.usdPrice),C?.activity?.gas)?{supportGasReturn:!0,...g}:g):Ze,[C,Ze,W?.usdPrice]),ts=Le(H,we,!At),is={unitPricePrefix:Z.ceilShort(Xi,2),unitPriceSuffix:I("extension_wallet_transaction_input_gwei"),totalPrice:Ot?n.default.createElement(ri,{style:{color:Ke?"var(--okd-color-semantic-notice)":null},text:Ot,maxWidth:"120px"}):"",renderWarning:g=>!g&&Ke?n.default.createElement(yi,{className:X.customGasFeeWarningFold}):null,estimatedTime:ts,onClick:()=>{Tt(s.CUSTOM)},canConfirm:At,onConfirm:g=>{Ie(s.CUSTOM),U?.();let _=j(pe),v=j(qe),k=j(Pe),K=re,ae=h?.data?.[s.CUSTOM];Q.current=!0,x({gasType:s.CUSTOM,maxFeePerGas:v,maxPriorityFeePerGas:k,gasPrice:_,gasLimit:K,isGasLimitLoading:l,isNetworkFeeLoading:De,networkFee:vt,supportEip1559:B,gasLimitInfo:b,gasPriceInfo:H,extFee:ae,customConfirmed:Q.current}),Ce.current=pe,Ee.current=Fe,Se.current=Pe,Ye.current=re,g?Re({gasPrice:_,isDefault:!0,maxFeePerGas:v,isSupportEip1559:B,maxPriorityFeePerGas:k,baseFeePerGas:Z.sub(v,k)}):Ti(ie?.realChainIdHex)}};(0,n.useEffect)(()=>{Tt(E)},[e]),(0,n.useEffect)(()=>{if(E===s.CUSTOM)return;let g,_,v,k,K,ae=V;E===s.SLOW?(v=$,g=$,_=Ge,K=Qi,k=h?.data?.[s.SLOW]):E===s.STANDARD?(v=Y,g=Y,_=ge,K=Ji,k=h?.data?.[s.STANDARD]):E===s.FAST&&(v=q,g=q,_=xe,K=Wt,k=h?.data?.[s.FAST]),x({gasType:E,maxFeePerGas:g,maxPriorityFeePerGas:_,gasPrice:v,gasLimit:ae,isGasLimitLoading:l,isNetworkFeeLoading:De,networkFee:K,supportEip1559:B,gasLimitInfo:b,gasPriceInfo:H,extFee:k})},[E,$,Y,q,b,l,De,x]),(0,n.useEffect)(()=>{if(E===s.CUSTOM&&!e){let g=Ye.current;typeof g=="string"&&z(g,b?.minGasLimit)&&(g=b?.minGasLimit,yt(b?.minGasLimit),Ye.current=b?.minGasLimit);let _=j(Ce.current||Pt||St[E]),v=j(Ee.current||pt||Dt[E]),k=j(Se.current||Ft||wt[E]),K=M(v,k),ae=typeof g=="string"?g:V,Xe=h?.data?.[s.CUSTOM],Me=M(w((B?K:_)||0,ae),h?.data?.[s.CUSTOM]);x({gasType:E,maxFeePerGas:K,maxPriorityFeePerGas:k,gasPrice:_,gasLimit:ae,isGasLimitLoading:l,isNetworkFeeLoading:De,networkFee:Me,supportEip1559:B,gasLimitInfo:b,gasPriceInfo:H,extFee:Xe,useDefaultGas:!!se,customConfirmed:Q.current})}},[se,b,H,h]),(0,n.useEffect)(()=>{typeof m=="function"&&f&&m({signInfo:f})},[f]);let je=()=>n.default.createElement("span",{className:X.customGWei},I("extension_wallet_transaction_input_gwei"));return n.default.createElement(ii,{feeType:_e,baseCoinId:W?.coinId,feeDataList:es,onBack:o,onClose:p,visible:e,supportDefaultGas:!0,custom:{useDefaultGas:!!se,chainName:ie?.chainName,...is,components:()=>n.default.createElement(n.default.Fragment,null,B?n.default.createElement(n.default.Fragment,null,n.default.createElement(R.Number,{className:X.customInput,size:R.SIZE.sm,title:n.default.createElement("div",{className:"network-fee--refresh-animation"},I("extension_wallet_transaction_text_maxbase_fee"),n.default.createElement("span",{className:X.customInputSubTitle},I("extension_wallet_transaction_text_current",{number:Z.ceilShort($e,2)}))),value:Fe,error:Mt,errorType:R.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:_i,max:1e7,tips:Nt&&n.default.createElement("div",{className:X.maxBaseFeeWarning},Nt),suffix:je()}),n.default.createElement(R.Number,{className:X.customInput,size:R.SIZE.sm,title:I("extension_wallet_transaction_text_priority_fee"),value:Pe,error:ht,errorType:R.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ii,max:1e7,suffix:je()})):n.default.createElement(R.Number,{className:X.customInput,size:R.SIZE.sm,title:n.default.createElement(n.default.Fragment,null,I("wallet_transfer_gasfee_subtitle_gas_price"),n.default.createElement("span",{className:X.customInputSubTitle},I("extension_wallet_transaction_input_gwei"))),value:pe,error:bt,errorType:R.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ci,max:1e7,suffix:je()}),n.default.createElement(R.Number,{size:R.SIZE.sm,title:I("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:re,error:kt,errorType:R.TIP_TYPE.always,enableMinus:!1,onChange:yt,max:ze,min:Ve,precision:0}),Ke&&n.default.createElement(yi,{className:X.customGasFeeWarning}))}})};function ds(e){let{coinId:t="",address:i="",inputData:r="",typeInt:a,tokenAddress:c="",value:u="0",method:F,dappInfo:o,gasLimitOptions:p={},gasLimitParams:x={},initialGasData:m}=e,{isSignInfoInitLoading:G,signInfo:P}=Pi({coinId:t,address:i}),{isGasLimitLoading:f,gasLimitInfo:L}=Fi({from:i,to:c,value:u,data:r,typeInt:a,coinId:t,method:F,dappInfo:o,onlyGasLimit:!0,...x},{wait:200,...p}),{finalInitialGasData:l,renderNetworkFee:y}=gi({coinId:t,initialGasData:m,signInfo:P,gasLimitInfo:L});return y?n.default.createElement(xs,{...e,initialGasData:l,isSignInfoLoading:G,signInfo:P,initialGasLimitInfo:L,isGasLimitLoading:f}):null}var zr=(0,n.memo)(ds);S();D();var jr=(e,t)=>{let i=e.find(r=>r?.checkType===t);return i?!i?.result:!1},Xr=(e,t,i,r)=>{let a=e.find(c=>c?.checkType===rt.OVERWRITTEN)||{};return a.toastType===le.FAILED?t():a.toastType===le.PENDING?i():a.toastType===le.PENDING_7702?r():e},Qr=(e=[])=>{let t={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},i=e.find(r=>r?.checkType===rt.OVERWRITTEN)||{};return t.nonce=i.nonce,t.newNonce=i.newNonce,t.originGasPrice=w(i?.gasPrice,1.1),t.originPriorityFee=w(i?.priorityFee,1.1),i.toastType===le.FAILED?t.hasFailedTx=!0:i.toastType===le.PENDING?t.hasPendingTx=!0:i.toastType===le.PENDING_7702&&(t.hasPending7702Tx=!0),t},Jr=(e,t,i)=>{let{userGasInfo:r,serverGasInfo:a,originTxGasInfo:c}=t,{originGasPrice:u,originPriorityFee:F}=c,{supportEip1559:o}=r;if(o){let G=!1,{maxFeePerGas:P,maxPriorityFeePerGas:f}=r,{normal:L,proposePriorityFee:l}=a,y=u,C=F,U=ee([P,L,y]);ue(U,P)||(G=!0);let d=ee([f,l,C]),T="0";return ue(d,f)||(T=ne(d,f),G=!0),G?i({maxFeePerGas:M(U,T),maxPriorityFeePerGas:d}):e}let{gasPrice:p}=r,{normal:x}=a,m=ee([p,x,u]);return ue(m,p)?e:i({gasPrice:m})},ea=({userGasInfo:e,serverGasInfo:t,originTxGasInfo:i})=>{let{originGasPrice:r,originPriorityFee:a}=i,{supportEip1559:c}=e;if(c){let p=!1,{maxFeePerGas:x,maxPriorityFeePerGas:m}=e,{normal:G,proposePriorityFee:P}=t,f=r,L=a,l=ee([x,G,f]);ue(l,x)||(p=!0);let y=ee([m,P,L]),C="0";if(ue(y,m)||(C=ne(y,m),p=!0),p)return{maxFeePerGas:be(M(l,C),0),maxPriorityFeePerGas:be(y,0)}}let{gasPrice:u}=e,{normal:F}=t,o=ee([u,F,r]);return ue(o,u)?{}:{gasPrice:be(o,0)}},ta=(e,t,i)=>{let{userGasInfo:r,updateGasInfo:a,baseCoinAmountAvailable:c}=t,{supportEip1559:u,gasLimit:F}=r;if(u){let{maxFeePerGas:p}=a;return A(w(p,F),c)?i():e}let{gasPrice:o}=a;return A(w(o,F),c)?i():e},ia=({userGasInfo:e,updateGasInfo:t,baseCoinAmountAvailable:i,L1FEE:r})=>{let{supportEip1559:a,gasLimit:c}=e;if(a){let{maxFeePerGas:F}=t;return!!A(M(w(F,c),r),i)}let{gasPrice:u}=t;return!!A(M(w(u,c),r),i)};export{pi as a,Pi as b,gi as c,xs as d,zr as e,jr as f,Xr as g,Qr as h,Jr as i,ea as j,ta as k,ia as l};
//# sourceMappingURL=chunk-WD3IVQAU.js.map
