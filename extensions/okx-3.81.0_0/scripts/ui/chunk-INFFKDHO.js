import{b as _,d as h,e as g}from"./chunk-SQUA6K5B.js";import{b as w}from"./chunk-QRAFULYC.js";import{Na as S}from"./chunk-2QHGKEME.js";import{c as a}from"./chunk-WU2LB6XB.js";import{c as f,e as E}from"./chunk-EN2WHAVL.js";import{b as l,c as T}from"./chunk-GR7YC6C3.js";import{E as d,J as x}from"./chunk-O33H5V3V.js";import{D as u,K as P}from"./chunk-VZKEX7KP.js";import{H as p}from"./chunk-BJKBO23H.js";import{b as I}from"./chunk-73B6GL3S.js";import{f as m,o as r,q as s}from"./chunk-Y5OH3DDZ.js";r();s();var C=m(I()),n=m(S());P();r();s();T();x();E();var D=async()=>({walletId:await f().getSelectedWallet()});async function A(){let{walletId:t}=await D();try{let{data:o}=await d(l.postApprovedProjectList,{accountIds:[t]},{walletSignParams:{needWalletSign:!0,walletId:t}});return o||{}}catch(o){throw new Error(o)}}var y=()=>{let t=(0,n.useDispatch)(),o=(0,n.useSelector)(_);return(0,C.useCallback)(async c=>{try{let e=(await A())?.approvalProjectList||[];return typeof c=="function"&&o.length!==e.length&&c(),t(g(!0)),t(h(e)),e}catch(i){let e=i;throw p.error({title:e?.msg||e?.error_message||u("wallet_extension_approval_toast_list_retrieve_fail"),duration:2,placement:p.DIRECTION.top,showClose:!0}),i}},[o])};r();s();var q=()=>{let t=y();w("wallet-transaction",{onSuccess:async o=>{[a.AUTHORIZATION,a.CANCEL_AUTHORIZATION,a.UPGRADE_7702,a.REVOKE_7702].includes(o?.data?.txType)&&await t()},onError:t,pollingInterval:10*1e3})};export{y as a,q as b};
//# sourceMappingURL=chunk-INFFKDHO.js.map
