import{a as I,b as C}from"./chunk-A6POGSHU.js";import{a as P}from"./chunk-5LOF3ALI.js";import{a as H}from"./chunk-6TFEPOEK.js";import"./chunk-IZUTUDUM.js";import"./chunk-7THBEIEJ.js";import{a as _}from"./chunk-QFKKFFVA.js";import"./chunk-IBOMFII7.js";import"./chunk-URNFZHUR.js";import{a as w,b as x}from"./chunk-XSVHDPBS.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import{c as l,e as E}from"./chunk-EN2WHAVL.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import{a as y}from"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{O,la as p,tb as D}from"./chunk-COF7YKSN.js";import{A as g,K as M}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{I as T}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f,o as u,q as d}from"./chunk-Y5OH3DDZ.js";u();d();var S=f(H()),m=f(I()),o=f(O());M();E();D();var h=class extends C{async signTransaction(e,t,a){let c=e.hdPathMap[p];t=_(t);let r=await w(t),{payload:s,success:n}=await m.default.ethereumSignTransaction({path:c,transaction:{...r.toJSON(),to:(0,o.bufferToHex)(r.to).toString(),chainId:t.chainId}});if(n){globalThis.platform.focusCurrentWindow();let i=await x(r,{...s});return P(i,t.from)?a?i:{rawTxResult:i}:this.throwInvalidPassPhraseTip()}return this.throwTxCancelTip()}async signPersonalMessage(e,t={}){let a=e.hdPathMap[p],{data:c=""}=t||{},{success:r,payload:s}=await m.default.ethereumSignMessage({path:a,message:(0,o.stripHexPrefix)(c),hex:!0});if(r){globalThis.platform.focusCurrentWindow();let{signature:n=""}=s||{};return(0,o.addHexPrefix)(n)}return this.throwTxCancelTip()}async signTypedData(e,t={}){let a=e.hdPathMap[p];if(!(t.version==="V4"))throw new Error("Trezor: Only version 4 of typed data signing is supported");let r=JSON.parse(t.data),{domain_separator_hash:s,message_hash:n}=(0,S.default)(r,!0),{success:i,payload:v}=await m.default.ethereumSignTypedData({path:a,data:r,metamask_v4_compat:!0,domain_separator_hash:s,message_hash:n});return i?(l().focusLastOkPopupWithCache(),v?.signature):this.throwTxCancelTip()}throwInvalidPassPhraseTip(){throw T.error(g("wallet_extension_transaction_toast_trezor")),new Error(y)}},j=new h;export{j as default};
//# sourceMappingURL=ethAdapter-D46F6TTE.js.map
