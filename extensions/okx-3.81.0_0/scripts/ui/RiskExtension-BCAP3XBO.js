import{d as S0}from"./chunk-ZDHJHPQ5.js";import{a as w0,b as T0,d as P0,e as R0}from"./chunk-GYBRFZKR.js";import{Oa as k0,sa as v0,z as h0}from"./chunk-MSFAPAHB.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import{b as E0}from"./chunk-7MCLPJAH.js";import"./chunk-GCS2RK7E.js";import{u as z}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as y0}from"./chunk-Z62JX42S.js";import"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-YDSDBRIT.js";import{a as ax}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-S3FOFXM7.js";import{q as g0,s as nx}from"./chunk-YIFLUVTR.js";import{c as s0,e as rx}from"./chunk-EN2WHAVL.js";import{h as I0}from"./chunk-CP2RIMI2.js";import"./chunk-EFOY37CC.js";import"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import{d as u0,e as $0,f as H,g as m0,n as p0,o as xx,q as _0,s as ex,t as o0,u as b0,v as S,w as y,x as i0,z as tx}from"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import{b as l0,h as Q0}from"./chunk-BI4OEIFC.js";import{f as f0,g as V0}from"./chunk-COF7YKSN.js";import{A as k,K as a0,j as c0,l as d0}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{L as D,P as G}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import{a as J}from"./chunk-GVV6OTQP.js";import{z as b}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import{b as M}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-5F7M5EJ4.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-H6JAOQCX.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as C,o as d,q as u}from"./chunk-Y5OH3DDZ.js";d();u();var R=C(M()),K0=C(ax());a0();d();u();var q0=C(M()),F0=C(y0());d();u();var P=C(M()),Z=C(y0());rx();d();u();d();u();$0();d();u();m0();xx();ex();var ox=A;(function(i,o){for(var n=A,e=i();[];)try{var a=parseInt(n(267))/1*(-parseInt(n(228))/2)+parseInt(n(240))/3+parseInt(n(230))/4*(parseInt(n(248))/5)+-parseInt(n(241))/6*(parseInt(n(245))/7)+parseInt(n(227))/8+parseInt(n(223))/9*(-parseInt(n(266))/10)+parseInt(n(262))/11;if(a===o)break;e.push(e.shift())}catch{e.push(e.shift())}})(X,-51*5151+-233576+638317);var ix=function(i,o,n,e){function a(x){return x instanceof n?x:new n(function(r){r(x)})}return new(n||(n=Promise))(function(x,r){var f=A;function c(s){try{t(e.next(s))}catch(m){r(m)}}function l(s){var m=A;try{t(e[m(247)](s))}catch(v){r(v)}}function t(s){var m=A;s[m(251)]?x(s.value):a(s[m(243)])[m(233)](c,l)}t((e=e[f(255)](i,o||[]))[f(254)]())})},sx=function(i,o){var n=ox,e={label:0,sent:function(){if(r[-7891+-274*1+8165]&-9630+7343+2288)throw r[-8301+-735*-9+1687];return r[145*61+3926+-12770]},trys:[],ops:[]},a,x,r,f=Object.create((typeof Iterator===n(253)?Iterator:Object).prototype);return f[n(254)]=c(-2454+-413*-13+53*-55),f[n(247)]=c(-9458+-9479*1+18938),f[n(256)]=c(-3*1688+-6029+11095),typeof Symbol=="function"&&(f[Symbol[n(231)]]=function(){return this}),f;function c(t){return function(s){return l([t,s])}}function l(t){var s=n;if(a)throw new TypeError(s(265)+s(234)+s(246)+".");for(;f&&(f=8969*1+-14*568+1*-1017,t[-8824+-2499*1+13*871]&&(e=-8638+3857+4781)),e;)try{if(a=-5612+2*3148+-683,x&&(r=t[4132+-20*-312+-5186*2]&7111*1+2279*2+-11667?x[s(256)]:t[4789*-1+5800+-1011]?x[s(247)]||((r=x.return)&&r.call(x),1*-3773+-6452+-10225*-1):x[s(254)])&&!(r=r.call(x,t[817+-5736+4920]))[s(251)])return r;switch(x=-2331+9221*1+265*-26,r&&(t=[t[9*-39+4519+-4*1042]&5*-1837+-7*-1259+374,r.value]),t[1*-7172+-3*882+9818]){case 4681+145*33+-9466:case 4490+-1486*-6+-13405:r=t;break;case 572+-9714+269*34:return e[s(249)]++,{value:t[-6787+2927+3861],done:![]};case 9817*1+-4771+-5041:e[s(249)]++,x=t[-5774+1*-3057+-4*-2208],t=[-6703*1+8772+-2069];continue;case-98*9+-1*-5647+-4758:t=e[s(260)][s(225)](),e.trys[s(225)]();continue;default:if(r=e[s(232)],!(r=r[s(250)]>-5039+-487*1+9*614&&r[r[s(250)]-(-990+-4*-1283+-4141)])&&(t[-2773*-3+-1297*4+3131*-1]===25*-30+-344*-2+68||t[5792+13*-679+3035]===91*-3+-87*-17+-1204*1)){e=-19*15+1*-6473+6758;continue}if(t[2467*-2+922+4012]===1216+15*337+-4*1567&&(!r||t[-979*-9+2237*-3+-2099]>r[-988+5232+-4244]&&t[-7*223+3563*-1+5125]<r[-482*9+-9915+14256])){e[s(249)]=t[1*2845+-5426+2582];break}if(t[-2*4328+114*-51+14470*1]===687*-7+1*9958+-5143&&e.label<r[-8855+-6240+15096]){e[s(249)]=r[6078+-1413+-4664],r=t;break}if(r&&e[s(249)]<r[-1162*-7+365*-9+-4847]){e.label=r[-6078+1565+4515],e[s(260)].push(t);break}r[-9297+78*-32+1685*7]&&e[s(260)][s(225)](),e[s(232)].pop();continue}t=o[s(252)](i,e)}catch(m){t=[-1792+443+-5*-271,m],x=-9858+-2190+12048}finally{a=r=8467*1+8507+-16974}if(t[-388*-8+830+7*-562]&-769*10+2*-249+8193)throw t[1388+-1*-5298+-5*1337];return{value:t[9868*1+9857+-5*3945]?t[5859+8923+-14781]:void(-101*62+438*-1+-100*-67),done:!![]}}},fx="/priapi/v1/dis/emc";function A(i,o){var n=X();return A=function(e,a){e=e-(1*1178+-3238+-761*-3);var x=n[e];return x},A(i,o)}function N0(i){return ix(this,arguments,void(1238*8+-1016*-5+-1873*8),function(o){var n=A,e,a,x,r=o[n(226)+n(237)],f=o[n(263)];return sx(this,function(c){var l=n;switch(c.label){case-2505*3+6492+-33*-31:return c[l(232)][l(261)]([-3887*2+-4952+12726,-677*3+1*-9615+11648,,-701*5+-8384+-1982*-6]),e={st:r[l(229)],et:r[l(242)],pm:_0[l(224)]},[-1*2714+-651+3369,p0[l(264)](""[l(235)](f).concat(fx),e)];case 169*-21+-4542+8092:return a=c[l(259)]()[l(242)],[6456+1*-71+-491*13,a];case 7426+-4148+1*-3276:throw x=c[l(259)](),H[l(257)](l(244)+l(236)+l(238)+"r]",{error:x}),x;case-7871*-1+-30*39+-6698:return[-2*-4+917+-923]}})})}function X(){var i=["7TgcYxK"," executing","throw","2225NLeqqv","label","length","done","call","function","next","apply","return","info","__awaiter","sent","ops","push","2791184JfgxfZ","apiBaseUrl","post","Generator ","598090pZYAvF","44837ShXmxV","9dEznaX","plugin","pop","encryptedP","742024CqYzGf","4hUFcYp","timestamp","1600pmoUph","iterator","trys","then","is already","concat","curity][re","ayload","quest_erro","__generato","37797YtDkSn","1473438cMIVQS","data","value","[wallet_se"];return X=function(){return i},X()}m0();d();u();function V(){var i=["decode","length","5305836bAeTZT","10jluaBo","122180lepjPZ","27028xzEtRU","Input cann","utf-8","ot be null","charCodeAt","deobfuscat","2638824rVDQsK","4591568nLPKoa","4045671NqaxZH","ned"," or undefi","message","834570HjDWHr"];return V=function(){return i},V()}function Q(i,o){var n=V();return Q=function(e,a){e=e-(-5714+1529*3+1392);var x=n[e];return x},Q(i,o)}(function(i,o){for(var n=Q,e=i();[];)try{var a=-parseInt(n(277))/1+-parseInt(n(272))/2+-parseInt(n(266))/3+-parseInt(n(278))/4*(-parseInt(n(276))/5)+parseInt(n(275))/6+parseInt(n(268))/7+parseInt(n(267))/8;if(a===o)break;e.push(e.shift())}catch{e.push(e.shift())}})(V,2*557891+449*1429+-1126757);function C0(i){var o=Q;if(i==null)throw new Error(o(279)+o(281)+o(270)+o(269));try{for(var n=atob(i),e=n[o(274)],a=new Uint8Array(e),x=3407*2+14*-389+-1368;x<e;x++)a[x]=n[o(282)](x);for(var r=e%(-1455+-4*2222+-3533*-3),x=64*124+723*13+-17335;x<e;x++)a[x]^=x*r%(-6207+3*1177+2932);for(var x=-2139+-369+2508;x<e-(1*6289+-9375+3087);x++)a[x]^=a[x+(9582+-1151*-3+-13034)];for(var x=3*1678+5112+-10146;x<e;x++)a[x]^=x%(2*-146+-1601+2149);return new TextDecoder(o(280))[o(273)](a)}catch(f){throw new Error(f[o(271)]||o(265)+"e failed")}}d();u();tx();var A0=Y;(function(i,o){for(var n=Y,e=i();[];)try{var a=-parseInt(n(249))/1+-parseInt(n(263))/2*(-parseInt(n(281))/3)+parseInt(n(260))/4*(-parseInt(n(272))/5)+-parseInt(n(251))/6*(parseInt(n(280))/7)+-parseInt(n(279))/8*(parseInt(n(252))/9)+-parseInt(n(271))/10+parseInt(n(264))/11*(parseInt(n(275))/12);if(a===o)break;e.push(e.shift())}catch{e.push(e.shift())}})($,112705*12+23*-21893+-95784);var p=function(i,o){var n=Y,e=typeof Symbol===n(245)&&i[Symbol[n(267)]];if(!e)return i;var a=e[n(268)](i),x,r=[],f;try{for(;(o===void(-15*265+-1*3983+7958)||o-- >235*42+-7470+-2400)&&!(x=a.next())[n(240)];)r[n(270)](x[n(257)])}catch(c){f={error:c}}finally{try{x&&!x[n(240)]&&(e=a[n(262)])&&e[n(268)](a)}finally{if(f)throw f[n(250)]}}return r},_=function(i,o,n){var e=A0;if(n||arguments[e(265)]===8317+-9476+-1161*-1)for(var a=-2075+249*-2+-1*-2573,x=o[e(265)],r;a<x;a++)(r||!(a in o))&&(r||(r=Array[e(247)].slice[e(268)](o,-730*11+1*-9357+-17387*-1,a)),r[a]=o[a]);return i.concat(r||Array.prototype[e(253)][e(268)](o))};function $(){var i=["installTyp","isApp","value","__spreadAr","hostPermis","4269872mnJAox","homepageUr","return","138SZOJor","121ObJFJm","length","type","iterator","call","mayDisable","push","8261500PXUoBB","5tmvDKF","from","floor","3483960ZiYDPT","apply","version","forEach","8XafAYg","7YtNGay","56418gQLXMw","done","concat","ext","deviceId","sions","function","enabled","prototype","now","599327fexlMj","error","3000246HxMRep","6706089LGNgMT","slice","ray"];return $=function(){return i},$()}function Y(i,o){var n=$();return Y=function(e,a){e=e-(-4846+3026+10*206);var x=n[e];return x},Y(i,o)}function L0(i){var o=A0,n=Date[o(248)](),e=_(_([],p(b0(9893+-6090+-1*3803)),![]),p(S(Math[o(274)](n/(3553+14*-689+41*173)))),![]),a=i.extensions,x=[];a[o(278)](function(l){var t=o,s=y(""[t(241)](l["description"],"u8"));x[t(270)][t(276)](x,_([],p(s),![]));var m=S(l[t(246)]?-962+9641+-8678:1999*3+-11*874+3617);x[t(270)].apply(x,_([],p(m),![]));var v=y("".concat(l[t(261)+"l"],"n1"));x[t(270)][t(276)](x,_([],p(v),![]));var N=i0(l[t(259)+t(244)]);x[t(270)].apply(x,_([],p(N),![]));var q=y(""[t(241)](l.id,"k5"));x[t(270)][t(276)](x,_([],p(q),![]));var t0=y(""[t(241)](l[t(255)+"e"],"z7"));x[t(270)][t(276)](x,_([],p(t0),![]));var n0=S(l[t(256)]?-5335+3989*-1+9325:-2162+7125+-709*7);x[t(270)].apply(x,_([],p(n0),![]));var E=S(l[t(269)]?-3610+6672*-1+10283:67*-79+-3079*1+23*364);x[t(270)][t(276)](x,_([],p(E),![]));var F=y(""[t(241)](l.name,"j0"));x[t(270)][t(276)](x,_([],p(F),![]));var K=S(l["offlineEnabled"]?-9713+1879*5+319*1:-4621*1+3755+866);x.push[t(276)](x,_([],p(K),![]));var O=y(""[t(241)](l.optionsUrl,"c4"));x[t(270)][t(276)](x,_([],p(O),![]));var W=i0(l["permissions"]);x[t(270)].apply(x,_([],p(W),![]));var r0=y("".concat(l.shortName,"n6"));x[t(270)][t(276)](x,_([],p(r0),![]));var W0=y(""[t(241)](l[t(266)],"o5"));x[t(270)][t(276)](x,_([],p(W0),![]));var H0=y(""[t(241)](l.updateUrl,"p3"));x[t(270)][t(276)](x,_([],p(H0),![]));var J0=y(""[t(241)](l[t(277)],"z3"));if(x[t(270)][t(276)](x,_([],p(J0),![])),l.ext!==void 0){var X0=y(""[t(241)](l[t(242)],"j4"));x[t(270)][t(276)](x,_([],p(X0),![]))}});var r=o0(x,-1275+2946+-1416),f=[];f[o(270)][o(276)](f,_([],p(y(""[o(241)](i[o(243)],"l2"))),![])),f[o(270)][o(276)](f,_([],p(S(x.length)),![])),f.push[o(276)](f,_([],p(S(r)),![])),f[o(270)].apply(f,_([],p(S(a[o(265)])),![]));var c=o0(f,-289+4450*-2+-1574*-6);return e[o(270)][o(276)](e,_([],p(S(f[o(265)])),![])),e[o(270)][o(276)](e,_([],p(S(c)),![])),e[o(270)](6507+-241*31+968),e[o(270)](-2893+-1*1487+4380,8525+-1753+-3386*2,8969+-9430+461,33*127+4451*-1+5*52,-4*2026+304+7800,-4579+5*112+-1*-4019,1596+5958+2518*-3,256*-6+7085+-31*179,3*484+3848+-265*20),e[o(270)][o(276)](e,_([],p(f),![])),e[o(270)].apply(e,_([],p(x),![])),Uint8Array[o(273)](e)}var D0=L;(function(i,o){for(var n=L,e=i();[];)try{var a=-parseInt(n(484))/1+-parseInt(n(494))/2*(-parseInt(n(527))/3)+parseInt(n(490))/4+parseInt(n(503))/5*(-parseInt(n(516))/6)+parseInt(n(497))/7+-parseInt(n(514))/8*(-parseInt(n(517))/9)+-parseInt(n(504))/10;if(a===o)break;e.push(e.shift())}catch{e.push(e.shift())}})(x0,96643*7+1229581*1+-1132594);var lx=function(i,o,n,e){function a(x){return x instanceof n?x:new n(function(r){r(x)})}return new(n||(n=Promise))(function(x,r){var f=L;function c(s){try{t(e.next(s))}catch(m){r(m)}}function l(s){var m=L;try{t(e[m(492)](s))}catch(v){r(v)}}function t(s){var m=L;s[m(521)]?x(s[m(522)]):a(s[m(522)])[m(520)](c,l)}t((e=e[f(508)](i,o||[]))[f(519)]())})},cx=function(i,o){var n=D0,e={label:0,sent:function(){if(r[46*3+-5138+5e3]&-7358+-1*5855+13214*1)throw r[4*-508+6964+-4931];return r[-263*10+-2*-556+31*49]},trys:[],ops:[]},a,x,r,f=Object[n(499)]((typeof Iterator===n(526)?Iterator:Object).prototype);return f[n(519)]=c(6177+7802+-13979),f.throw=c(-8425+-1361+-9787*-1),f[n(487)]=c(-1*-6695+-631*14+2141),typeof Symbol===n(526)&&(f[Symbol[n(506)]]=function(){return this}),f;function c(t){return function(s){return l([t,s])}}function l(t){var s=n;if(a)throw new TypeError(s(483)+s(515)+s(529)+".");for(;f&&(f=1*-9821+-7629+17450,t[127*37+-1*-1963+-6662]&&(e=4178+3859*1+141*-57)),e;)try{if(a=23*87+-1044+-956,x&&(r=t[-4901+-3*2712+13037]&3715+-314*16+1311?x.return:t[6405+-146*55+13*125]?x[s(492)]||((r=x[s(487)])&&r[s(509)](x),-1985*1+-3122+5107):x.next)&&!(r=r[s(509)](x,t[56*-11+-9664+-149*-69]))[s(521)])return r;switch(x=2*4065+-9394+1264,r&&(t=[t[16*-307+-1*3132+8044]&7067+-8*-958+-14729,r[s(522)]]),t[2355+1325+-46*80]){case 123*2+5245+289*-19:case-1319+-37*-171+-5007:r=t;break;case 8610+7570+1011*-16:return e.label++,{value:t[-179*17+7738+2347*-2],done:![]};case-8752+2858+-17*-347:e.label++,x=t[1*3052+8418+-1*11469],t=[2744+24*-200+-1028*-2];continue;case 9380+8307+-17680*1:t=e[s(501)][s(498)](),e[s(512)][s(498)]();continue;default:if(r=e.trys,!(r=r[s(528)]>5258+475*-7+-1933*1&&r[r[s(528)]-(6898+7186+-14083)])&&(t[-727*-1+-1938+-1211*-1]===-53*167+-9670+18527||t[-28*337+2567+6869]===-744*-4+-2*589+-1796)){e=-7313+-1*-511+2*3401;continue}if(t[5035+-1*787+531*-8]===-3542+-7127*1+10672&&(!r||t[-620+-659+1280]>r[7274+-946+-56*113]&&t[9478+3426*1+-759*17]<r[6416+1*-6301+-28*4])){e.label=t[-935*4+-3767+-2*-3754];break}if(t[179*51+-703*-7+-2*7025]===-1402*-7+5848+-15656&&e[s(511)]<r[9957+-1*-3233+-13189]){e.label=r[1*1973+-2912*-1+74*-66],r=t;break}if(r&&e[s(511)]<r[47*67+-5548+-1*-2401]){e.label=r[3242+3593*1+-6833*1],e[s(501)].push(t);break}r[-8245*-1+-44*-93+-1*12335]&&e[s(501)].pop(),e[s(512)].pop();continue}t=o.call(i,e)}catch(m){t=[995+5284+-369*17,m],x=-53*-113+8155+-442*32}finally{a=r=1*3919+-6936+431*7}if(t[5575+-2*-2869+-11313]&2993*3+-765+-1*8209)throw t[-192+9*437+935*-4];return{value:t[-435+-5013+-8*-681]?t[3405+-1905*-5+-12929]:void(1857+-48*-47+-4113),done:!![]}}},dx=function(i,o){var n=D0,e={};for(var a in i)Object[n(488)][n(523)+n(491)][n(509)](i,a)&&o.indexOf(a)<-698*13+-8737+17811&&(e[a]=i[a]);if(i!=null&&typeof Object[n(495)+n(502)+"s"]=="function")for(var x=7231+-8797+-3*-522,a=Object[n(495)+n(502)+"s"](i);x<a.length;x++)o[n(513)](a[x])<-5590+-43*-82+2064&&Object.prototype[n(507)+n(525)][n(509)](i,a[x])&&(e[a[x]]=i[a[x]]);return e};function L(i,o){var n=x0();return L=function(e,a){e=e-(7720+-1*-6569+-13*1062);var x=n[e];return x},L(i,o)}function U0(i){return lx(this,void(3345+1*9301+-12646),void(7526+6316+-9*1538),function(){var o,n,e,a,x,r,f,c;return cx(this,function(l){var t=L;switch(l.label){case-7309*-1+1*4983+-12292:return l.trys[t(493)]([1*1061+-195*5+-86*1,12*-613+2773+917*5,,920*4+7*92+-4321]),o=i.apiBaseUrl,n=dx(i,[t(518)]),e=L0(n),a=u0(e),[-4532+9289+-4753,N0({encryptedPayload:a,apiBaseUrl:o})];case-5082+-3529+4*2153:return x=l[t(510)](),r=C0(x),f=JSON.parse(r),[-5657*1+-8140+13799,f];case-790+-1788*-5+-8148:throw c=l[t(510)](),H[t(489)](t(524)+t(505)+t(500),{error:c}),c;case-5068+9976+-4905:return[-1*-5376+-5463*1+89]}})})}function x0(){var i=["12358540LGUZed","curity][er","iterator","propertyIs","apply","call","sent","label","trys","indexOf","8CFONPq","is already","216126Papbie","7050303PEJKot","apiBaseUrl","next","then","done","value","hasOwnProp","[wallet_se","Enumerable","function","5103DnUxhj","length"," executing","Generator ","1410605wKfDvj","__awaiter","__rest","return","prototype","info","4523644PtcnmA","erty","throw","push","1654avKzGg","getOwnProp","__generato","944741sNmZNX","pop","create","ror]","ops","ertySymbol","5amrBXr"];return x0=function(){return i},x0()}V0();Q0();nx();var T=i=>i??"",ux=i=>{try{g0("RISK_EXTENSION_DETECT_WALLET_SECURITY_ERROR",{error:i instanceof Error?i.message:String(i)})}catch{}},M0=async i=>{let{devid:o}=await f0.get("devid"),e={extensions:i.map(a=>({description:T(a.description),enabled:a.enabled??!0,homepageUrl:T(a.homepageUrl),hostPermissions:a.hostPermissions??[],id:T(a.id),installType:T(a.installType),isApp:a.isApp??!1,mayDisable:a.mayDisable??!0,name:T(a.name),offlineEnabled:a.offlineEnabled??!1,optionsUrl:T(a.optionsUrl),permissions:a.permissions??[],shortName:T(a.shortName),type:T(a.type),updateUrl:T(a.updateUrl),version:T(a.version),ext:""})),deviceId:o,apiBaseUrl:`https://${l0()}`};try{return await U0(e)??[]}catch(a){throw ux(a),a}};var mx=i=>{let[o,n]=(0,P.useState)(!1),[e,a]=(0,P.useState)(!1),[x,r]=(0,P.useState)(!1),{setRiskExtensionList:f,lastRequestTime:c}=R0(),l=(0,P.useRef)(!1),t=(0,Z.useMemoizedFn)(async E=>{l.current=!0,await f(E??[]),n(!0)}),{loading:s,error:m,runAsync:v,data:N}=(0,Z.useRequest)(async E=>{let K=(await M0(E)).map(O=>{let W=E.find(r0=>r0.id===O.id);return{id:O.id,riskInfo:O.riskInfo,name:W?.name??"",version:W?.version??""}});return await t(K),K},{manual:!0}),q=(0,Z.useMemoizedFn)(async()=>{if(!await s0().checkManagementPermission()||s)return;r(!0),setTimeout(()=>{r(!1)},2e3);let F=await s0().getInstalledExtensions();if(F.length===0){await t([]);return}await v(F)}),t0=(0,P.useMemo)(()=>new Set((i??[]).map(E=>E.id)),[i]),n0=(N??[]).filter(E=>t0.has(E.id));return(0,P.useEffect)(()=>{c>0&&!l.current&&(a(!0),q().catch(()=>{}).finally(()=>{a(!1)}))},[c,q]),{lastRequestTime:c??0,loading:s||e||x,error:m??null,totalRiskList:n0,loaded:o,requestRiskData:q}},B0=mx;var px=()=>{let{hasPermission:i,loading:o,requestPermission:n}=P0(),{loading:e,error:a,refresh:x,extensions:r}=w0(i,{listenUninstall:!0,listenInstall:!0});(0,q0.useEffect)(()=>{o||x()},[o,i,x]);let{lastRequestTime:f,loading:c,error:l,totalRiskList:t,requestRiskData:s,loaded:m}=B0(r),v=(0,F0.useMemoizedFn)(async()=>{let N=await n();return N&&await x(),N});return{hasPermission:i,lastRequestTime:f,loadingPermission:o,loadingExtensions:e,loadExtensionsError:a,loadedRiskData:m,loadingRiskData:c,error:l,totalRiskList:t,extensions:r,requestManagementPermission:v,requestRiskData:s,openExtensionSettings:T0,refreshInstalledExtensions:x}},O0=px;d();u();var w=C(M());a0();d();u();function G0({hasPermission:i,loadingRiskData:o,totalRiskList:n,loadExtensionsError:e,loadedRiskData:a}){return i?o?"scanning":e?"error":n.length>0?"risk":a?"safe":"initial":"needPermission"}d();u();var U={footerGroup:"_footerGroup_1mre1_1",footerBtn:"_footerBtn_1mre1_7"};var _x=({status:i,loadingPermission:o,scan:n,openExtensionSettings:e,requestManagementPermission:a,onFinish:x})=>{let r=()=>{try{v0()}catch{}return n()},f=()=>{try{h0()}catch{}e()};return i==="needPermission"?w.default.createElement("div",{className:U.footerGroup},w.default.createElement(b,{block:!0,onClick:a,type:b.TYPE.primary,size:b.SIZE.lg},k("wallet_extension_bot_dialog_btn_agree_start"))):i==="initial"?w.default.createElement(b,{type:b.TYPE.primary,block:!0,onClick:r,loading:o,className:U.footerBtn,size:b.SIZE.lg},k("wallet_extension_mid_loading_btn_start_scan")):i==="scanning"?null:i==="error"?w.default.createElement("div",{className:U.footerGroup},w.default.createElement(b,{type:b.TYPE.primary,block:!0,onClick:r,className:U.footerBtn,size:b.SIZE.lg},k("wallet_extension_mid_loading_btn_rescan"))):i==="safe"?w.default.createElement("div",{className:U.footerGroup},w.default.createElement(b,{block:!0,onClick:x,type:b.TYPE.primary,size:b.SIZE.lg},k("wallet_extension_complete_btn_done"))):w.default.createElement("div",{className:U.footerGroup},w.default.createElement(b,{block:!0,onClick:r,type:b.TYPE.gray,size:b.SIZE.lg},k("wallet_extension_mid_loading_btn_rescan")),w.default.createElement(b,{block:!0,onClick:f,type:b.TYPE.primary,size:b.SIZE.lg},k("wallet_extension_mid_loading_btn_uninstall")))},Y0=_x;d();u();var j=C(M());d();u();var B={commonImageTag:"_commonImageTag_1upvp_1",commonImage:"_commonImage_1upvp_1",result:"_result_1upvp_8",resultIcon:"_resultIcon_1upvp_14"};var bx=()=>{let i=I0({light:"/cdn/assets/imgs/255/6025EA5FB142C202.png",dark:"/cdn/assets/imgs/255/53598BA0D10E702D.png"});return j.default.createElement(J,{src:i,width:360,className:B.commonImageTag,pictureClassName:B.commonImage})},gx={["scanning"]:D.STATUS.processing,["error"]:D.STATUS.failure,["safe"]:D.STATUS.success,["risk"]:D.STATUS.pending},hx=({status:i})=>{if(i==="initial"||i==="needPermission")return j.default.createElement(bx,null);let o=gx[i];return j.default.createElement("div",{className:B.result},j.default.createElement(D,{status:o,size:D.SIZE.lg,className:B.resultIcon,animationProps:{className:B.resultIcon,loop:i==="scanning"}}))},Z0=hx;d();u();var g=C(M());a0();d();u();var I={main:"_main_1dl09_1",mainTitle:"_mainTitle_1dl09_9",subTitle:"_subTitle_1dl09_18",lastTime:"_lastTime_1dl09_27",riskList:"_riskList_1dl09_40",riskItem:"_riskItem_1dl09_46",riskItemMain:"_riskItemMain_1dl09_51",riskItemIcon:"_riskItemIcon_1dl09_57",riskItemHeader:"_riskItemHeader_1dl09_64",riskItemName:"_riskItemName_1dl09_69",riskItemContent:"_riskItemContent_1dl09_78",riskItemTag:"_riskItemTag_1dl09_82"};var vx={["needPermission"]:"wallet_extension_bot_title_authorize_okx",["initial"]:"wallet_extension_mid_loading_title_check_risks",["scanning"]:"wallet_extension_mid_loading_title_scanning",["safe"]:"wallet_extension_mid_loading_title_exp_safe",["risk"]:"wallet_extension_mid_loading_title_exp_risk",["error"]:"wallet_extension_mid_loading_title_scan_fail"},kx={["needPermission"]:"wallet_extension_bot_dialog_subtitle_authorize_okx",["initial"]:"wallet_extension_mid_loading_subtitle_check_risks",["scanning"]:"wallet_extension_mid_loading_subtitle_checking_apps",["safe"]:"wallet_extension_mid_loading_subtitle_exp_safe",["risk"]:"wallet_extension_mid_loading_subtitle_exp_risk",["error"]:"wallet_extension_mid_loading_subtitle_scan_fail"},yx=({status:i,totalRiskList:o,extensions:n,lastRequestTime:e})=>{let a=(0,g.useMemo)(()=>n.reduce((x,r)=>({...x,[r.id]:r}),{}),[n]);return g.default.createElement("div",{className:I.main},g.default.createElement("div",{className:I.mainTitle},k(vx[i])),g.default.createElement("div",{className:I.subTitle},k(kx[i])),i==="initial"&&e>0&&g.default.createElement("div",{className:I.lastTime},k("wallet_extension_mid_loading_tips_last_scan_time",{date:d0.formatDateTime(new Date(e),{format:c0.SimpleDateTime})})),i==="risk"&&g.default.createElement("div",{className:I.riskList},o.map(x=>{let r=a[x.id],f=r?.icons??[],c=f[f.length-1]?.url??"";return g.default.createElement("div",{key:x.id,className:I.riskItem},g.default.createElement("div",{className:I.riskItemIcon},g.default.createElement(J,{src:c,width:44,height:44})),g.default.createElement("div",{className:I.riskItemMain},g.default.createElement("div",{className:I.riskItemHeader},g.default.createElement(z.Text,{className:I.riskItemName,ellipsis:{tooltip:!0}},r?.name),g.default.createElement(G,{category:G.CATEGORY.fill,color:G.COLOR.grey,size:G.SIZE.sm,className:I.riskItemTag},`V${r?.version}`)),g.default.createElement("div",{className:I.riskItemContent},g.default.createElement(z.Text,{ellipsis:{rows:2,tooltip:!0},size:z.SIZE.xs,type:z.TYPE.secondary},x.riskInfo))))})))},j0=yx;d();u();var e0={container:"_container_14n82_1",content:"_content_14n82_6",footer:"_footer_14n82_13"};var Ix=()=>{let i=(0,K0.useHistory)(),{hasPermission:o,loadingPermission:n,loadingRiskData:e,totalRiskList:a,requestManagementPermission:x,requestRiskData:r,loadExtensionsError:f,error:c,loadedRiskData:l,openExtensionSettings:t,extensions:s,lastRequestTime:m}=O0(),v=G0({hasPermission:o,loadingRiskData:e,totalRiskList:a,loadedRiskData:l,loadExtensionsError:!!f||!!c}),N=()=>{i.goBack()};return(0,R.useEffect)(()=>{try{k0()}catch{}},[]),R.default.createElement("div",{className:e0.container},R.default.createElement(S0,{title:k("wallet_extension_top_loading_header_exp_check"),onBack:N}),R.default.createElement("div",{className:e0.content},R.default.createElement(Z0,{status:v}),R.default.createElement(j0,{status:v,totalRiskList:a,extensions:s,lastRequestTime:m})),R.default.createElement(E0,{className:e0.footer,usePortal:!0},R.default.createElement(Y0,{status:v,loadingPermission:n,scan:r,requestManagementPermission:x,openExtensionSettings:t,onFinish:N})))},ht=Ix;export{ht as default};
//# sourceMappingURL=RiskExtension-BCAP3XBO.js.map
