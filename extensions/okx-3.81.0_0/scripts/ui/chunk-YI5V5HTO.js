import{n as _}from"./chunk-VTMJYROY.js";import{b as M,c as F}from"./chunk-ARK47WR5.js";import{b as Y}from"./chunk-F57QKCZQ.js";import{M as ge}from"./chunk-HIVYZXF3.js";import{k as Ee}from"./chunk-4Y52FA3V.js";import{c as we}from"./chunk-TQMC5UQS.js";import{a as Ie}from"./chunk-ANWN6BF6.js";import{m as ue,t as fe}from"./chunk-FGRS6VIX.js";import{Ba as S,Ka as de,Oc as ce,ga as w,pd as me,vd as t,wd as pe}from"./chunk-INIQCRIO.js";import{c as q}from"./chunk-ZFBXO46L.js";import{G as v,c as G,d as Q,k as le,m as O}from"./chunk-ZBDGRK4Q.js";import{b as ne,d as n,g as b,o as E,r as z}from"./chunk-BJKBO23H.js";import{B as H,I as se,ea as ie,j as re,na as ae,pa as B,q as oe,ra as K,va as Ae}from"./chunk-XFTQD4B2.js";import{t as _e,z as h}from"./chunk-ZFVABNQN.js";import{M as y}from"./chunk-LBWWOQL4.js";import{a as D}from"./chunk-4QGZDIBD.js";import{b as u}from"./chunk-73B6GL3S.js";import{f as m,o as s,q as i}from"./chunk-Y5OH3DDZ.js";s();i();Ae();var Z=class{constructor(){this.setLiquidityModelVisible=e=>{_.update({liquidityModelVisible:e})};this.setDataStatus=e=>{_.update({dataStatus:e})};this.setData=e=>{_.update({rawData:e})};this.resetAllLiquidityData=()=>{_.update({rawData:[],selectedListIds:[],confirmIds:null})};this.initAllLiquidityData=e=>{let o=H(e,"id");_.update({rawData:e,selectedListIds:o});let a=_.fromChainId;fe(a)&&_.update({confirmIds:ie({},a,o)})};this.fetchLiquidityData=async()=>{this.resetAllLiquidityData(),this.setDataStatus(S.LOADING),_.LiquidityCancelRef&&_.LiquidityCancelRef.abort(),_.update({LiquidityCancelRef:ge()});let[e,o]=await v(Y.get(ce,{params:{chainId:_.fromChainId},signal:_.LiquidityCancelRef?.signal,isolate:!0}));if(e)this.setDataStatus(S.ERROR);else{let a=re(o,"data");se(a)?this.setDataStatus(S.NULL):(this.initAllLiquidityData(a),this.setDataStatus(S.READY))}};this.setSelectedListIds=e=>{_.update({selectedListIds:e})};this.setConfirmIds=e=>{_.update({confirmIds:e})};this.filterSelectedListIds=(e,o)=>{let a;o?a=K(_.selectedListIds,e):a=oe(_.selectedListIds,e),this.setSelectedListIds(B(a))};this.checkAllBtn=()=>{let e="",o=_.computedSearchStatus?_.computedSearchData:_.rawData,a=H(o,"id");_.computedListCheckedAll?e=K(_.selectedListIds,...a):e=ae(_.selectedListIds,a),this.setSelectedListIds(B(e))};this.setLiquiditySearchValue=e=>{_.update({searchLiquidityValue:e})}}},Ce=new Z;s();i();var T=m(u()),X=m(D());s();i();var x={"quote-interval-box":"_quote-interval-box_dm0co_1",quoteIntervalBox:"_quote-interval-box_dm0co_1","quote-interval-reset":"_quote-interval-reset_dm0co_17",quoteIntervalReset:"_quote-interval-reset_dm0co_17","right-arrow":"_right-arrow_dm0co_25",rightArrow:"_right-arrow_dm0co_25","error-icon":"_error-icon_dm0co_28",errorIcon:"_error-icon_dm0co_28","alert-icon":"_alert-icon_dm0co_29",alertIcon:"_alert-icon_dm0co_29","warn-icon":"_warn-icon_dm0co_30",warnIcon:"_warn-icon_dm0co_30"};function j({openLiquidityDialog:r}){return T.default.createElement(ne,{className:x.quoteIntervalReset,onClick:r},t("commonall_filter_dropdown_select"),T.default.createElement(_e,{className:(0,X.default)("okx-defi-dex-arrow-right-1",x.rightArrow)}))}var Le=({isNoDexLiquidity:r})=>{let{quoteStore:e,fromToStore:o}=q(),{computedIsNoLiquidity:a,computedCrossChainIntervalOutOfRange:p}=e,{computedIsCrossChain:l}=o,{computedIsCustomLiquidity:f,computedIds:R=[]}=_,{setLiquidityModelVisible:N}=Ce,I="",C=null;if((a||r)&&f){let W=()=>{N(!0),Ee({button_name:"liquidity_sources"})};C=t("swaptrade_1swap_notification_selected_pools_reselect",{swaptrade_1swap_notification_selected_pools_reselect:R.length}),I=T.default.createElement(j,{openLiquidityDialog:W})}else if((a||p)&&l)I=T.default.createElement("span",{className:x.quoteIntervalReset},t("swaptrade_dialog_desc_not_supported"));else if(a)I=T.default.createElement("span",{className:x.quoteIntervalReset},t("swaptrade_swap_card_text_no_quote_fetched"));else return null;return T.default.createElement(n,{title:C,desc:I,type:n.TYPE.warn,closable:!1,className:(0,X.default)("mt-16")})},st=O(Le);s();i();var J=class{constructor(){this.unbindRefCodeList=[];this.unbindRefCodeInfoMap={};this.fetchRefInfo=async(e,o)=>{let[a,p]=await v(Y.get(me,{params:{code:e,ipCheck:!0}}));if(a)return null;let{data:l}=p||{},{discountRate:f,discountRateThreshold:R,inviterAddresses:N}=l||{},I=(N||[])?.some(C=>C.address===o);return l&&f>=R&&!I?{...l,code:e}:null};this.fetchUnbindRefInfoList=async(e,o)=>{let p=(await Promise.all(e.map(async l=>this.fetchRefInfo(l,o)))).filter(l=>!!l);this.unbindRefCodeInfoMap=p.reduce((l,f)=>(f&&(l[f.code]=f),l),{}),this.unbindRefCodeList=p.map(({code:l})=>l)};this.clearRefInfo=e=>{e?(this.unbindRefCodeList=this.unbindRefCodeList.filter(o=>o!==e),this.unbindRefCodeInfoMap[e]=null):(this.unbindRefCodeList=[],this.unbindRefCodeInfoMap={})};le(this,{unbindRefCodeList:G,unbindRefCodeInfoMap:G,refCode:Q,refInfo:Q})}get refCode(){return this.unbindRefCodeList?.[0]||""}get refInfo(){return this.unbindRefCodeInfoMap?.[this.refCode]||null}},pt=new J;s();i();var $=m(u());s();i();var U=m(u());s();i();var he={"warn-state-container":"_warn-state-container_1n8v8_1",warnStateContainer:"_warn-state-container_1n8v8_1","error-state-container":"_error-state-container_1n8v8_2",errorStateContainer:"_error-state-container_1n8v8_2","error-state-title":"_error-state-title_1n8v8_15",errorStateTitle:"_error-state-title_1n8v8_15","error-state-content":"_error-state-content_1n8v8_21",errorStateContent:"_error-state-content_1n8v8_21","add-funds":"_add-funds_1n8v8_28",addFunds:"_add-funds_1n8v8_28",warning:"_warning_1n8v8_33",error:"_error_1n8v8_2","ledger-network-tips":"_ledger-network-tips_1n8v8_39",ledgerNetworkTips:"_ledger-network-tips_1n8v8_39",mb16:"_mb16_1n8v8_42","error-icon":"_error-icon_1n8v8_45",errorIcon:"_error-icon_1n8v8_45","warn-icon":"_warn-icon_1n8v8_46",warnIcon:"_warn-icon_1n8v8_46"};var Pe=({chainName:r})=>{let e=()=>{let o=E.tip({infoType:E.Tip.INFO_TYPE.default,children:t("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:t("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{o.destroy()},confirmBtnProps:{block:!0,size:h.SIZE.md}})};return U.default.createElement(U.default.Fragment,null,t("swaptrade_top_alert_desc_paychain_not_supported",{payChain:r}),U.default.createElement(b,{className:he.ledgerNetworkTips,type:b.TYPE.primary,weight:b.WEIGHT.muted,size:b.SIZE.xs,onClick:e},t("swaptrade_top_alert_textbtn_view_supported_chains")))},Te=Pe;var De={warn:y.warn,error:y.error,info:y.info};var qt={["PROVIDER_PRICE_WARN"]:({computedReducePercent:r})=>({title:t("swaptrade_swap_tooltip_title_highprice_difference"),desc:t("swaptrade_swap_tooltip_desc_choose_provider",{percent:r}),type:De.warn}),["UNSUPPORTED_CHAIN"]:r=>{let{chainName:e}=r,o=t("swaptrade_adjustslip_modal_title_wrongnetwork"),a=t("swaptrade_card_alert_switch_wallet_to_match",{chainName:e});return w()?(o=t("swaptrade_extension_mid_plzswitch_wallet"),a=t("swaptrade_extension_mid_plzswitch_wallettips",{chain:e})):Ie&&(o=t("swaptrade_top_alert_title_please_switch_network"),a=$.default.createElement(Te,{chainName:e})),{title:o,desc:a,type:n.TYPE.warn}},["ACCOUNT_ERROR_TIPS"]:()=>({title:t("swaptrade_adjustslip_modal_title_wrongnetwork"),desc:t("swaptrade_mid_alert_desc_vm_wallet"),type:n.TYPE.warn}),["FEE_CONFIG_ERROR"]:()=>({title:t("swaptrade_card_reminder_title_parameter_error"),desc:t("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:ue(de,{needZero:!1})}),type:n.TYPE.error}),["LIMIT_REGION"]:()=>({title:null,desc:t("swaptrade_mid_toast_title_service_suspended"),type:n.TYPE.warn}),["SWAP_ON_OTHER_DAPP"]:()=>({title:t("swaptrade_toast_title_unsupported_swap"),desc:t("swaptrade_toast_desc_unsupported_swap"),type:n.TYPE.warn}),["INSUFFICIENT_LIQUIDITY"]:r=>({title:null,desc:r.error_message||t("swaptrade_quote_error_desc_insufficient_liquidity"),type:n.TYPE.error}),["BUY_HONEYPOT"]:()=>({title:null,desc:t("wallet_swap_toast_scam_token_desc"),type:n.TYPE.error}),["SELL_HONEYPOT"]:()=>({title:null,desc:t("wallet_swap_toast_scam_token_sell"),type:n.TYPE.warn}),["BLACKLIST_ADDRESS"]:()=>({title:null,desc:t("swaptrade_transfer_notif_suspended_services"),type:n.TYPE.error}),["NEW_ADDRESS"]:()=>({title:null,desc:t("swaptrade_swap_error_toast_desc_new_address_check",{num:10}),type:n.TYPE.error}),["NETWORK_ERROR"]:()=>({title:t("swap_title_quote_server_error"),desc:t("swaptrade_quote_server_error_content"),type:n.TYPE.error}),["SAFE_MOON"]:r=>({title:t("swaptrade_top_alert_burning_mechanism",r),desc:t("swaptrade_top_text_token_not_supported"),type:n.TYPE.warn}),["SAFE_MOON_NEW"]:({message:r})=>({title:null,desc:r,type:n.TYPE.warn}),["MIN_SELL_AMOUNT"]:r=>({title:null,desc:t("swaptrade_top_notif_min_sell_amount",r),type:n.TYPE.warn}),["LEVERAGE_TOKEN"]:()=>({type:n.TYPE.error,title:null,desc:t("wallet_swap_toast_scam_token_desc")}),["VALUE_DIFFERENCE"]:({text:r,percentage:e})=>({title:null,desc:t(r,{percentage:e}),type:n.TYPE.error}),["QUOTE_OTHER_ERROR"]:r=>({title:t("swap_title_quote_server_error"),desc:r.error_message||t("swaptrade_quote_error_no_update"),type:n.TYPE.error}),["LIQUIDITY_RESET"]:r=>{let{dexIds:e,openLiquidityDialog:o}=r;return{title:t("swaptrade_1swap_notification_selected_pools_reselect",{swaptrade_1swap_notification_selected_pools_reselect:e}),desc:$.default.createElement(j,{openLiquidityDialog:o}),type:n.TYPE.warn}},["REVOKE_APPROVE"]:r=>({title:t("swaptrade_transfer_reminder_title_insufficient_approve"),desc:t("swaptrade_transfer_reminder_desc_insufficient_approve",{ccy:r.tokenSymbol}),type:n.TYPE.warn}),["ORDER_LIMIT"]:r=>({title:null,desc:t("swaptrade_mid_toast_title_service_suspended",r),type:n.TYPE.warn}),["INVALID_MARKET_CAP"]:()=>({title:null,desc:t("swaptrade_tee_alert_desc_mcap_unavailable"),type:n.TYPE.warn}),["CHAIN_IN_MAINTANCE"]:r=>({title:null,desc:r.toastContent,type:n.TYPE.error}),["PRE_CHECK_ERROR"]:r=>({type:r?.type===1?n.TYPE.warn:n.TYPE.error,title:null,desc:r?.title})};s();i();var k=m(u()),Re=m(D());s();i();var ee=m(u());var A=({className:r,onChangeAgreed:e,agreed:o,size:a})=>ee.default.createElement("div",{className:r},ee.default.createElement(z,{onChange:e,checked:o,size:a||z.SIZE.md},t("swaptrade_confirmation_checkbox_aware_risk")));s();i();var L=m(u());s();i();var d={body:"_body_1u2d5_1",content:"_content_1u2d5_5","freeze-assets":"_freeze-assets_1u2d5_8",freezeAssets:"_freeze-assets_1u2d5_8","terms-service":"_terms-service_1u2d5_11",termsService:"_terms-service_1u2d5_11",checkbox:"_checkbox_1u2d5_17","checkbox-web":"_checkbox-web_1u2d5_20",checkboxWeb:"_checkbox-web_1u2d5_20","checkbox-wallet":"_checkbox-wallet_1u2d5_23",checkboxWallet:"_checkbox-wallet_1u2d5_23","market-disclaimer-wrapper":"_market-disclaimer-wrapper_1u2d5_26",marketDisclaimerWrapper:"_market-disclaimer-wrapper_1u2d5_26","market-top":"_market-top_1u2d5_45",marketTop:"_market-top_1u2d5_45","market-title":"_market-title_1u2d5_45",marketTitle:"_market-title_1u2d5_45","market-content":"_market-content_1u2d5_51",marketContent:"_market-content_1u2d5_51","market-bottom":"_market-bottom_1u2d5_56",marketBottom:"_market-bottom_1u2d5_56","market-checkbox":"_market-checkbox_1u2d5_56",marketCheckbox:"_market-checkbox_1u2d5_56","widget-content":"_widget-content_1u2d5_61",widgetContent:"_widget-content_1u2d5_61"};var ye=({className:r})=>{let e=w()?t("swaptrade_general_dialog_text_terms_service_link"):t("swaptrade_web_link_ecosystem_tos");return L.default.createElement(we,{className:r||d.termsService,href:e},t("swaptrade_general_dialog_text_terms_service"))},P=({className:r,linkClassName:e})=>L.default.createElement("div",{className:r},pe("swaptrade_general_dialog_desc_legal_disclaimer",{freezeAssets:L.default.createElement("span",{className:d.freezeAssets},t("swaptrade_general_dialog_text_freeze_content")),termsService:L.default.createElement(ye,{className:e})}));function ke({agreed:r,onChangeAgreed:e}){let o=w();return k.default.createElement("div",{className:d.body},k.default.createElement(P,{className:d.content}),k.default.createElement(A,{className:(0,Re.default)({[d.checkbox]:!0,[d.checkboxWeb]:!o,[d.checkboxWallet]:o}),onChangeAgreed:e,agreed:r}))}function pr(){if(!F())return()=>Promise.resolve(!0);let e=null,o=!1,a=p=>{o=p?.target?.checked,e?.update({children:k.default.createElement(ke,{agreed:o,onChangeAgreed:a}),confirmBtnProps:{disabled:!o,type:h.TYPE.primary}})};return()=>new Promise((p,l)=>{e=E.tip({infoType:E.Tip.INFO_TYPE.warn,btnFull:!1,title:t("swaptrade_general_dialog_title_legal_disclaimer"),children:k.default.createElement(ke,{agreed:o,onChangeAgreed:a}),confirmText:t("swaptrade_general_dialog_btn_start_trading"),confirmBtnProps:{disabled:!o,type:h.TYPE.primary},cancelText:t("commonall_text_btn_cancel"),onConfirm:()=>{M(!1),e?.destroy(),p(!0)},onClose:()=>{e?.destroy(),e=null,l(new Error("Risk prompt closed"))},onCancel:()=>{l(new Error("Risk prompt closed"))}})})}s();i();s();i();var V=m(u());var Ne=({setStoreDisclaimerVisible:r})=>{let e=typeof r=="function"?r:()=>{},o=(0,V.useMemo)(()=>F(),[]);return(0,V.useEffect)(()=>{e(o)},[o]),{agreeDisclaimer:()=>{e(!1),M(!1)}}};s();i();var g=m(u()),be=m(D());var Se=({infoType:r,disclaimerVisible:e,setDisclaimerVisible:o,onAgree:a})=>{let[p,l]=(0,g.useState)(!1),{agreeDisclaimer:f}=Ne({setStoreDisclaimerVisible:o}),R=()=>{o(!1)},N=W=>{l(W?.target?.checked)},I=()=>{f(),a&&a()};(0,g.useEffect)(()=>(e||l(!1),()=>{l(!1)}),[e]);let C=w();return g.default.createElement(E.Tip,{visible:e,btnFull:!1,infoType:r||E.Tip.INFO_TYPE.default,title:t("swaptrade_general_dialog_title_legal_disclaimer"),confirmText:t("swaptrade_general_dialog_btn_start_trading"),confirmDisabled:!p,onConfirm:I,confirmBtnProps:{type:h.TYPE.primary},cancelText:t("commonall_text_btn_cancel"),onClose:R},g.default.createElement("div",{className:d.body},g.default.createElement(P,{className:d.content}),g.default.createElement(A,{className:(0,be.default)({[d.checkbox]:!0,[d.checkboxWeb]:!C,[d.checkboxWallet]:C}),onChangeAgreed:N,agreed:p})))};s();i();var xe=m(u());var Or=O(()=>{let{commonStore:r}=q();return xe.default.createElement(Se,{disclaimerVisible:r.disclaimerVisible,setDisclaimerVisible:r.setDisclaimerVisible})});s();i();var te=m(u()),Oe=m(D());export{Ce as a,x as b,j as c,st as d,De as e,qt as f,Se as g,pr as h,pt as i};
//# sourceMappingURL=chunk-YI5V5HTO.js.map
