import{a as _o}from"./chunk-WHMBK4MM.js";import{a as po,b as lo}from"./chunk-T7OTOV53.js";import{a as io}from"./chunk-JSVF3ZQH.js";import{a as no,b as so}from"./chunk-INFFKDHO.js";import"./chunk-SZVQQMYF.js";import{d as ro}from"./chunk-BNS5ABAB.js";import{a as ao}from"./chunk-7QX2TXNH.js";import{d as to}from"./chunk-ZDHJHPQ5.js";import"./chunk-WY5R5HAR.js";import{c as oo}from"./chunk-A4VJP6UE.js";import{b as z,c as J}from"./chunk-SQUA6K5B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-3ZKJXYZ4.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-33XRMYWN.js";import"./chunk-MDBKHBHQ.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{wb as Z}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as X,g as vo,u as c}from"./chunk-FGAB46RQ.js";import{f as Q}from"./chunk-47ZMUKCZ.js";import{o as Io}from"./chunk-Z62JX42S.js";import{Na as Y}from"./chunk-2QHGKEME.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as eo}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import{m as q,n as P}from"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import"./chunk-EFOY37CC.js";import{c as r}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import"./chunk-COF7YKSN.js";import{D as a,K as W,m as U,o as w}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{H as y,d as S}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import{a as H}from"./chunk-GVV6OTQP.js";import{t as F}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as No}from"./chunk-4QGZDIBD.js";import{b as K}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import{b as $}from"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-H6JAOQCX.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as i,o as T,q as x}from"./chunk-Y5OH3DDZ.js";T();x();var o=i(K()),M=i(Y()),ko=i(eo()),To=i(Io()),O=i(No()),xo=i(vo()),yo=i($());W();T();x();var b=i(K()),E=i(Y()),mo=i(eo()),uo=i($());W();var Ao=({approvalNum:p,symbol:m,decimalNum:d,coinId:l})=>{let u=ro(l),N=w.safeCeilDiv(p,10**Number(d));return p===q||Number(N)>P?a("wallet_extension_transfer_title_unlimited_amount",{token:m}):X(p,{symbol:m,useContractPrecision:!0,contractPrecision:{decimals:d},isStableCoin:u?.stableCoin,precision:u?.displayPrecision}).value},go={[2]:"wallet_extension_approval_btn_revoking",[3]:"wallet_extension_approval_btn_approving"},fo=({tokenList:p,chainId:m})=>{let d=(0,E.useSelector)(Q),l=(0,E.useDispatch)(),u=(0,mo.useHistory)();return b.default.createElement(b.default.Fragment,null,p.map(N=>{let{symbol:I,imageUrl:v,approvalNum:f,decimalNum:C,approvalTime:t,status:_,coinId:k,tokenAddress:A,approvalAddress:D,permit2Address:h,address:j}=N,L=U(new Date(t),{format:"yyyyMMdd",locale:d}),B=async()=>{let n=await _o({address:j,chainId:m,tokenAddress:A,approvalAddress:D,permit2Address:h,coinId:k,approvalNum:f});if((0,uo.isEmpty)(n)){y.error({title:a("wallet_extension_approval_toast_initiate_fail"),duration:3,showClose:!0,placement:y.DIRECTION.top});return}l(oo({type:"approve",data:[n]})),u.push(`${Z}?type=approve`)};return b.default.createElement(po,{icon:v,key:`${I}-${k}-${A}`,title:b.default.createElement(Ao,{approvalNum:f,symbol:I,decimalNum:C,coinId:k}),desc:L,btnText:a("wallet_extension_approval_btn_revoke"),btnLoadingText:a(go[_]),btnLoading:[3,2].includes(_),btnClick:B})}))};T();x();var e={"retina-border-basic":"_retina-border-basic_k43oq_1",retinaBorderBasic:"_retina-border-basic_k43oq_1",alert:"_alert_k43oq_29",logo:"_logo_k43oq_32",img:"_img_k43oq_37","text-info":"_text-info_k43oq_42",textInfo:"_text-info_k43oq_42",text:"_text_k43oq_42",project:"_project_k43oq_48","project-name":"_project-name_k43oq_51",projectName:"_project-name_k43oq_51",network:"_network_k43oq_59","address-wrapper":"_address-wrapper_k43oq_67",addressWrapper:"_address-wrapper_k43oq_67",title:"_title_k43oq_131","address-info":"_address-info_k43oq_137",addressInfo:"_address-info_k43oq_137",address:"_address_k43oq_67",icon:"_icon_k43oq_149","copy-icon":"_copy-icon_k43oq_149",copyIcon:"_copy-icon_k43oq_149","add-weight":"_add-weight_k43oq_154",addWeight:"_add-weight_k43oq_154","link-icon":"_link-icon_k43oq_154",linkIcon:"_link-icon_k43oq_154","list-title":"_list-title_k43oq_158",listTitle:"_list-title_k43oq_158","security-icon":"_security-icon_k43oq_166",securityIcon:"_security-icon_k43oq_166","alert-title":"_alert-title_k43oq_171",alertTitle:"_alert-title_k43oq_171"};var bo={[3]:"wallet_extension_approval_alertbanner_dapp_risky_approvals",[2]:"wallet_extension_alertbanner_deprecated_adddress",[1]:"wallet_extension_approve_alertbanner_desc_mal_approval"},Co=()=>{let p=(0,ko.useHistory)(),m=no(),{loading:d,run:l,error:u}=(0,To.useRequest)(async()=>await m(),{manual:!0}),N=(0,M.useSelector)(z),I=ao(),v=I.get("projectAddr"),f=I.get("chainId"),C=io(N),t=(0,o.useMemo)(()=>(C||[]).find(s=>s.approvalAddress===v&&Number(s.chainId)===Number(f))||{},[C,v,f]),_=(0,M.useSelector)(J);(0,o.useEffect)(()=>{_&&(0,yo.isEmpty)(t)&&p.goBack()},[_,t]),(0,o.useEffect)(()=>{!_&&l()},[_,l]);let k=(0,o.useMemo)(()=>t?.tokens?.length?(t.tokens||[]).findIndex(s=>{let g=w.safeCeilDiv(s.approvalNum,10**s.decimalNum);return s.approvalNum===q||Number(g)>P})!==-1:!1,[t.tokens]),A=(0,o.useMemo)(()=>{let n=t.blackTagType,s=!1,g,G,R;if((n||k)&&(s=!0),n){G=S.TYPE.error,R="okx-wallet-plugin-security-1";let V=bo[n];g=n===3?a(V,{num:t.blackTagLongTimeDayLimit}):a(V)}else g=a("wallet_extension_alertbanner_unlimited_approval");return{show:s,props:{title:o.default.createElement("span",{className:e.alertTitle},g),type:G,icon:R}}},[t.blackTagLongTimeDayLimit,t.blackTagType,k]),{projectIcon:D,projectName:h,network:j,approvalAddress:L,linkApprovalAddress:B}=t;return so(),o.default.createElement(r.Container,null,o.default.createElement(to,{bordered:!1,closeable:!1}),o.default.createElement(lo,{isError:!!u,isLoading:d,reload:l},A.show&&o.default.createElement(r.Box,{className:e.alert},o.default.createElement(S,{...A.props,closable:!1})),o.default.createElement(r.FlexBox,{className:e.project},o.default.createElement(H,{pictureClassName:e.logo,className:e.img,src:D,alt:h}),o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,justify:"space-between",className:e.textInfo},o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:e.text},o.default.createElement(c.Text,{className:e.projectName,ellipsis:{tooltip:!0},strong:!0},h)),o.default.createElement(c.Text,{type:c.TYPE.secondary,size:c.SIZE.xs,ellipsis:{tooltip:!0},className:e.network},j))),o.default.createElement(r.Box,{className:e.addressWrapper},o.default.createElement(r.Box,{className:e.title},a("wallet_extension_approval_subtitle_contract_address")),o.default.createElement(r.FlexBox,{className:e.addressInfo,justify:"space-between"},o.default.createElement(c.Text,{size:c.SIZE.md,className:e.address},L),o.default.createElement(r.FlexBox,null,o.default.createElement(F,{className:(0,O.default)("okx-wallet-plugin-copy-3",e.icon,e.copyIcon),onClick:()=>{(0,xo.default)(L),y.success({title:a("wallet_transaction_history_toast_address_copied"),duration:3,showClose:!0,placement:y.DIRECTION.top})}}),o.default.createElement(F,{onClick:()=>{globalThis.open(B)},className:(0,O.default)("okx-wallet-plugin-open-link",e.addWeight,e.linkIcon)})))),o.default.createElement(r.Box,{className:(0,O.default)(e.listTitle)},a("wallet_extension_mid_text_approved_amount")),o.default.createElement(fo,{projectAddr:v,chainId:f,tokenList:t?.tokens||[]})))},_e=Co;export{bo as RISK_ALERT_TITLE_MAP,_e as default};
//# sourceMappingURL=ApproveDetailPage-CFNYTVRM.js.map
