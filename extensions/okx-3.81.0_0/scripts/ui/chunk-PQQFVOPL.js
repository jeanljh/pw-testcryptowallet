import{A as V}from"./chunk-Q7DF5H6O.js";import{f as J}from"./chunk-GWMNMJND.js";import{w as U}from"./chunk-2VUOGSTW.js";import{d as Y}from"./chunk-BNS5ABAB.js";import{a as j}from"./chunk-A5U7X3LN.js";import{b as K}from"./chunk-JHO7RU36.js";import{b as B,c as O}from"./chunk-F2SPBGOT.js";import{g as R}from"./chunk-3ZKJXYZ4.js";import{a as v}from"./chunk-SOSR34AP.js";import{j as z}from"./chunk-YGMRSF47.js";import{o as re}from"./chunk-Z62JX42S.js";import{c as G,d as b,e as C}from"./chunk-OIXGC4LI.js";import{b as W}from"./chunk-MAAUVUWY.js";import{n as _}from"./chunk-WU2LB6XB.js";import{c as u,e as te}from"./chunk-EN2WHAVL.js";import{D}from"./chunk-EFOY37CC.js";import{E as A,J as Z,Lb as I,Sb as $,nc as ee}from"./chunk-COF7YKSN.js";import{aa as H,va as X}from"./chunk-XFTQD4B2.js";import{f as Q,o as S,q as h}from"./chunk-Y5OH3DDZ.js";S();h();ee();$();var p=e=>j(e)?e:D(W(e)),ne=({value:e,toAddr:t,contractAddress:r})=>!r||!J(t)?"":v(t,e),oe="0x0",k=({data:e,value:t,nonce:r,walletId:s,gasPrice:n,gasLimit:i,localType:o,to:x,maxFeePerGas:g,from:m,supportEip1559:y,authorizationList:F,signFn:d,kaiaTxType:E,maxPriorityFeePerGas:L,chainId:M,contractAddress:P,systemToken:N})=>{let w=m&&G(m,o),c=x&&G(x,o),l=M||I(o)?.realChainIdHex,T=e||ne({value:t,toAddr:c,contractAddress:P}),q=F&&F.length>0,a={from:w,walletId:s,data:T,nonce:p(r),chainId:p(l),gasLimit:p(i)};return d&&E&&(a.signFn=d,a.kaiaTxType=E),y?Object.assign(a,{type:_.FEE_MARKET,maxFeePerGas:p(g),maxPriorityFeePerGas:p(L)}):Object.assign(a,{type:_.LEGACY,gasPrice:p(n)}),q&&Object.assign(a,{type:_.AUTH_7702,authorizationList:F}),P?Object.assign(a,{data:T,value:oe,to:G(P,o)}):Object.assign(a,{to:c,value:p(t)}),N&&Object.assign(a,{value:p(t)}),a};var ae=["low","medium","high"],ie=(e={})=>ae.map(t=>t==="low"?{level:t,gasPrice:e?.min,maxFeePerGas:e?.min,baseFeePerGas:e?.baseFee,maxPriorityFeePerGas:e?.safePriorityFee}:t==="medium"?{level:t,gasPrice:e?.normal,maxFeePerGas:e?.normal,baseFeePerGas:e?.baseFee,maxPriorityFeePerGas:e?.proposePriorityFee}:{level:t,gasPrice:e?.max,maxFeePerGas:e?.max,baseFeePerGas:e?.baseFee,maxPriorityFeePerGas:e?.fastPriorityFee});S();h();var f=Q(re());X();te();Z();var De=()=>(0,f.useMemoizedFn)(async e=>{let{coinId:t}=e,r=k(e),n=await U(H(r,["to","data","from","value","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas"]));return await R({coinId:t},{inputData:n})}),me=()=>(0,f.useMemoizedFn)(async e=>{let{authorizationList:t}=e,r=(t||[]).map(s=>{let{address:n,chainId:i,nonce:o,fromAddress:x,walletId:g,localType:m,yParity:y,r:F,s:d}=s||{};return y&&F&&d?s:u().signAuthorizationListItem({fromAddress:b(x,m),walletId:g,baseChain:C(m),signParams:{address:n,chainId:i,nonce:o}})});return{...e,authorizationList:await Promise.all(r)}}),Ie=({coinId:e,fromAddr:t,walletId:r})=>{let s=Y(e),n=s?.localType,i=s?.systemToken,o=V({fromAddr:b(t,n),walletId:r,localType:C(n)}),x=me();return(0,f.useMemoizedFn)(async({data:g,from:m,to:y,value:F,gasPrice:d,maxFeePerGas:E,maxPriorityFeePerGas:L,authorizationList:M,needCapture:P,withSignParams:N=!1,...w})=>{let c=k({to:y,data:g,from:m,value:F,gasPrice:d,coinId:e,walletId:r,localType:n,systemToken:i,maxFeePerGas:E,maxPriorityFeePerGas:L,authorizationList:M,contractAddress:s?.address,...w});c.authorizationList&&(c=await x(c));let l=await o({needCapture:P,params:c}),T=l.rawTxResult||l;return N?{signedTx:T,signParams:c}:T})},Re=({walletId:e})=>{let t=z(e),r={[A.ETH_SIGN]:[O,u().signMessage],[A.PERSONAL_SIGN]:[O,u().signPersonalMessage],[A.ETH_SIGN_TYPED_DATA]:[B,u().signTypedMessage]};return(0,f.useMemoizedFn)(async({msgParams:s,baseChain:n,type:i})=>{let o=r[i];if(o)return K(t?.initialType)?o[0]({walletId:e,msgParams:s,baseChain:n}):o[1](s,n,e);throw new Error("Not Supported")})},We=()=>(0,f.useMemoizedFn)(async(e,t)=>u().encryptionPublicKey(e,t)),je=()=>(0,f.useMemoizedFn)(async(e,t)=>u().decryptMessageInline(e,t)),ve=()=>(0,f.useMemoizedFn)(async(e,t)=>u().decryptMessage(e,t));export{p as a,k as b,ie as c,De as d,Ie as e,Re as f,We as g,je as h,ve as i};
//# sourceMappingURL=chunk-PQQFVOPL.js.map
