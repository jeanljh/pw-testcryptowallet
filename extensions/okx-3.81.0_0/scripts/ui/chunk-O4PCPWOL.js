import{b as v}from"./chunk-EDJJACNG.js";import{a as M}from"./chunk-4TVSOYI7.js";import{p as D}from"./chunk-2VUOGSTW.js";import{a as G}from"./chunk-3W4MTHFJ.js";import{d as N}from"./chunk-BNS5ABAB.js";import{b as C,c as L}from"./chunk-3ZKJXYZ4.js";import{m as h}from"./chunk-ZOKF3EKQ.js";import{b as P}from"./chunk-QRAFULYC.js";import{o as H}from"./chunk-Z62JX42S.js";import{q as u}from"./chunk-WU2LB6XB.js";import{c as k,e as z}from"./chunk-EN2WHAVL.js";import{Ea as g,cb as c,tb as j}from"./chunk-COF7YKSN.js";import{A as l,K}from"./chunk-VZKEX7KP.js";import{b}from"./chunk-73B6GL3S.js";import{f as R,o as y,q as w}from"./chunk-Y5OH3DDZ.js";y();w();var t=R(b()),U=R(H());K();z();j();var J="0";function ft(f){let r=N(c)||{},s=h(g,f),[S,o]=(0,t.useState)(!0),[_,a]=(0,t.useState)(""),[p,E]=(0,t.useState)(""),d=async()=>{try{let{status:i}=await G({chainId:r?.chainId,coinId:c,address:s});E(i),i===u.NOT_STARTED?a(l("wallet_dialog_modal_not_registered")):i===u.PROCESSING?a(l("wallet_extension_transaction_notif_address_registering",{net:r?.chainName})):a("")}catch{a(l("wallet_extension_transaction_notif_address_register_fail",{net:r?.chainName}))}finally{o(!1)}},m=P("wallet-tx-status-toast",{onError:d,pollingInterval:10*1e3});return(0,t.useEffect)(()=>{d()},[m]),{loading:S,registerError:_,registerStatus:p}}function dt(f,r){let{transactions:s}=f?.params||{},S=(0,U.usePrevious)(r),o=h(g,f?.walletId),[_,a]=(0,t.useState)({overallFee:"0"}),{preExecuteRet:p,updateAndExecute:E}=v({coinId:c}),[d,m]=(0,t.useState)(!1),[i,I]=(0,t.useState)(!1),[B,O]=(0,t.useState)(null),q=async()=>{let e=await C({coinId:c,fromAddr:o,toAddr:""});return O(e),e},A=async e=>{let n={type:"multi_contract_call",nonce:e?.info?.nonce,chainId:D.StarknetChainId.SN_MAIN,multiContractCallData:{from:o,calls:s}};return(await k().signTransaction(n,o,g))?.signature},W=async e=>{let{data:n}=await L({coinId:c,address:o,inputData:e});return m(n?.queryGasLimitErrorUseDefault),n?.queryGasLimitErrorUseDefault?{overallFee:J}:n},T=async()=>{try{let e=await q(),n=await A(e),x=await W(n),X=await A(e),F=s?.[0]?.contractAddress||s?.[0]?.contract_address;E({value:0,from:o,to:F,txType:3,tokenAddress:F,data:X}),a({...x,resourceBounds:M(x)})}catch{m(!0)}finally{I(!1)}};return(0,t.useEffect)(()=>{s&&(I(!0),T())},[s]),(0,t.useEffect)(()=>{S===u.PROCESSING&&r===u.COMPLETED&&(I(!0),T())},[r]),{gasFee:_,feeLoading:i,feeError:d,signInfo:B,preExecuteRet:p?.[0]}}export{ft as a,dt as b};
//# sourceMappingURL=chunk-O4PCPWOL.js.map
