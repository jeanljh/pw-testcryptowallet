import{a as x}from"./chunk-5A7EFNRM.js";import{f as L}from"./chunk-MSP5TDR3.js";import{N as B}from"./chunk-3ZKJXYZ4.js";import{h as q}from"./chunk-YGMRSF47.js";import{o as J}from"./chunk-Z62JX42S.js";import{Ha as w,Na as k,ea as R,fa as _}from"./chunk-2QHGKEME.js";import{b}from"./chunk-73B6GL3S.js";import{f as d,o as p,q as C}from"./chunk-Y5OH3DDZ.js";p();C();var c=d(b()),g=d(k()),I=d(J());p();C();var F=d(b()),y=d(k());function P(t){let n=(0,y.useSelector)(R),i=(0,y.useSelector)(_),s=q(),f=t??s;return(0,F.useCallback)(r=>r?L({coins:r,walletIdentityMap:n,createdMap:i,walletId:f}):[],[n,i,f])}var O=t=>{let n=(0,c.useMemo)(()=>i=>x(i,{enableEmptyAccount:t}),[t]);return(0,g.useSelector)(n)},oe=(t,{beforeRequest:n,onFinally:i,reloadDeps:s,enableEmptyAccountCoins:f=!1,enable:r,filter:v=!0}={})=>{let U=O(f),D=(0,g.useSelector)(w),M=(0,c.useRef)(null),z=P(),o=(0,c.useRef)({}),A=(0,I.useMemoizedFn)(async(e=0)=>{if(r===!1)return{list:[],pageNo:e,isNoMore:!0};let h=await n?.();if(h)return h;let S=0,l=null,u=null,W=e;t?.chainIds||(t.chainIds=U.map(m=>m.chainId));do{o.current[e]=o.current[e]||0;let m=++o.current[e];if(u=await B({...t,userUniqueId:D,pageNo:e}),m<o.current[e]||typeof o.current[e]>"u")return{list:[],pageNo:e};o.current[e]===m&&delete o.current[e],v?l=z(u):l=u,W++,S++}while(u&&u.length>0&&l?.length===0&&S<5);return{list:l,pageNo:W,isNoMore:l.length===0}}),a;typeof r=="boolean"?s?a=[...s,r]:a=[r]:a=s;let{data:G,loading:j,loadingMore:E,reload:H}=(0,I.useInfiniteScroll)(e=>A(e?.pageNo??0),{target:M,isNoMore:e=>e?.isNoMore,onFinally:i,reloadDeps:a});return{data:G,loading:j,loadingMore:E,listRef:M,reload:H}};export{P as a,O as b,oe as c};
//# sourceMappingURL=chunk-LY5BPYXI.js.map
