import{d as he}from"./chunk-AQ4KTATJ.js";import{l as oo}from"./chunk-Q7DF5H6O.js";import{e as lo,f as eo}from"./chunk-AQO2BBXJ.js";import{a as ye}from"./chunk-GWMNMJND.js";import{a as co}from"./chunk-S7VT2TWF.js";import{a as Ee}from"./chunk-GTQ5U6DA.js";import{a as tr}from"./chunk-I56NHY6E.js";import{F as fe,O as de,b as Zo,d as jo,e as Jo,f as v,g as Qo,h as Xo,i as oe,j as ee,l as re,m as te,n as ne,o as se,p as ie,r as ue,s as mo,u as ae,v as me,w as ce,z as le}from"./chunk-QJ36ZOFH.js";import{f as ge,g as xe}from"./chunk-V7ZNWTMX.js";import{f as Go}from"./chunk-3ZKJXYZ4.js";import{_ as Vo}from"./chunk-MSFAPAHB.js";import{a as _e}from"./chunk-XRCQOGA2.js";import{a as Wo,g as Q,va as zo,wa as Yo}from"./chunk-GCS2RK7E.js";import{a as $o,f as Ko,u as X}from"./chunk-FGAB46RQ.js";import{o as B}from"./chunk-Z62JX42S.js";import{Na as S,la as Uo}from"./chunk-2QHGKEME.js";import{a as G}from"./chunk-6PA65BO3.js";import{ia as E}from"./chunk-WU2LB6XB.js";import{a as er}from"./chunk-YIFLUVTR.js";import{c as Ho,e as sr}from"./chunk-EN2WHAVL.js";import{i as Ce}from"./chunk-CP2RIMI2.js";import{a as k,b as No,d as J,f as Lo,g as P,h as ao,u as Po,v as vo,z as wo}from"./chunk-EFOY37CC.js";import{c as y}from"./chunk-HMTT52FG.js";import{a as pe}from"./chunk-E4OV5WXB.js";import{a as Mo,c as rr}from"./chunk-GR7YC6C3.js";import{A as Do,E as qo,J as nr}from"./chunk-O33H5V3V.js";import{A as j,F as ko,K as Bo}from"./chunk-VZKEX7KP.js";import{I as U,o as Ro}from"./chunk-BJKBO23H.js";import{I as b,M as bo,va as uo}from"./chunk-XFTQD4B2.js";import{a as Oo}from"./chunk-GVV6OTQP.js";import{z as h}from"./chunk-ZFVABNQN.js";import{b as I}from"./chunk-73B6GL3S.js";import{f as c,o as n,q as s}from"./chunk-Y5OH3DDZ.js";n();s();var ro="DontShowError";n();s();var ve=c(S()),we=c(B());Bo();n();s();var Ne=c(G());uo();n();s();var to=c(I());n();s();var ir=(0,to.createContext)({coinId:null,fromAddress:""});function Ae(){return(0,to.useContext)(ir)}function Fe(){let{coinId:o}=Ae();return o}function w(){let{fromAddress:o}=Ae();return o}function N(o){return(e,r,t)=>{if(!e)return e;let i;return t?i=vo(e,o??r.decimals):i=Po(e,o??r.decimals),wo(i)}}n();s();var x=c(S());var Ie=()=>(0,x.useSelector)(Zo),Jr=()=>(0,x.useSelector)(v),T=()=>{let{coin:o}=p(),e=N(o.decimals),r=(0,x.useSelector)(oe);return e(r,o,!1)},Se=()=>(0,x.useSelector)(ee),Qr=()=>{let o=T(),{coin:e}=p();return k(o,10**e.decimals)},fo=()=>(0,x.useSelector)(ie),po=()=>(0,x.useSelector)(te),Co=()=>{let o=N(),e=po(),r=A();return o(No(e,10**r.decimals),r,!0)},Te=()=>(0,x.useSelector)(se),_o=()=>(0,x.useSelector)(ne),be=()=>{let o=(0,x.useSelector)(Uo),e=(0,x.useSelector)(ue);return e===-1?o.currencyId:e},ke=()=>{let o=(0,x.useSelector)(re),{baseCoin:e}=p();return o===-1?e.coinId:o},go=()=>(0,x.useSelector)(ae),Be=()=>(0,x.useSelector)(me);var xo={vdecimalNum:0,decimals:0,symbol:""};function L(){let{coinId:o}=(0,Ne.useParams)(),e=Fe();return Number(e)||Number(o)}var p=()=>{let o=L(),{coin:e,baseCoin:r}=co(o,!0),t=b(e)?xo:e,i=b(r)?xo:r;return{coin:t,baseCoin:i}},A=()=>{let o=ke(),{coin:e}=co(o,!1);return b(e)?xo:e};n();s();var ho=c(S()),Le=c(G());var Pe=()=>{let o=(0,Le.useHistory)(),e=(0,ho.useSelector)(Xo),r=(0,ho.useSelector)(v),{coin:t}=p();return async()=>{await he(t.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};function It(){let o=(0,ve.useSelector)(mo),e=Te(),r=_o(),{coin:t}=p();return(!!o.key||!!o.text)&&o.type!==E.COMMON_TIP||e||r||!t.coinId}function St(o){let[e,{setTrue:r,setFalse:t}]=(0,we.useBoolean)(),i=Pe();return{loading:e,onClick:async(...u)=>{r();try{if(o){let f=await o(...u),{pause:m}=f||{};m||await i()}}catch(f){let m=f;if(m?.message===pe||m?.message===ro)t();else{let C=m?.data?.msg||m?.msg||m?.data?.originalError?.msg||m?.message||j("wallet_extension_general_error_extension_code_error");U.error({title:C})}}t()}}}n();s();n();s();var Oe=c(G());function ur(){let o=(0,Oe.useHistory)(),e=Ie();return()=>{o.push(e||Wo)}}var ar=ur;n();s();var H=c(I()),V=c(B()),Re=c(er());var O=Symbol("UNSET_INPUT");function mr(){let[o,e]=(0,H.useState)(O),r=(0,V.useLatest)(o);return(0,H.useEffect)(()=>{le(o!==O)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function cr({domainInputValue:o,coinId:e},r,t=!1){let{latestRequestInputRef:i,setLatestRequestInput:u}=mr(),f=(0,V.useLatest)(o),{run:m,cancel:d}=(0,V.useDebounceFn)(C=>{Go({coinId:e,domain:C}).then(({data:g})=>{C===f.current&&g?.address&&r({address:g?.address,domain:C})}).catch(g=>{Re.default.debug(g)}).finally(()=>{i.current===C&&u(O)})},{wait:800});return(0,H.useEffect)(()=>(o.indexOf(".")!==-1&&!t?(u(o),m(o)):u(O),()=>{d&&d()}),[o,t]),{loading:i.current!==O,abort:()=>{d&&d(),u(O)}}}var lr=cr;n();s();var Ht=()=>{let o=w(),{baseCoin:e}=p(),r=_e(e.localType);return e.localType?o||r:""};n();s();var $=c(S()),Me=c(G()),De=c(B());function Jt(){return(0,$.useSelector)(jo)}function Qt(){let o=(0,$.useSelector)(Jo),e=(0,$.useSelector)(v),r=(0,$.useSelector)(Qo);return!e||o||!!r.key}function Xt(){let o=L(),e=(0,Me.useHistory)(),r=w(),{amount:t}=Ee(e&&e.location.search.slice(1));return(0,De.useMemoizedFn)(()=>{let i={pathname:`${Q}/${o}${zo}`};r&&(i.search=`?from=${r}`),t&&(i.search=i.search?`${i.search}&amount=${t}`:`?amount=${t}`),e.push(i)})}n();s();n();s();n();s();var R=c(I()),qe=c(B());function fr(o,e){let[r,t]=(0,R.useState)(0),i=(0,R.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let u=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,R.useCallback)((m,d)=>{(async()=>{let g=++i.current;t(F=>F+1);try{let F={key:"",args:{}};for(let Z of u){let q=await Z(m);if(q){F=q;break}}g===i.current&&d(F)}finally{t(F=>F-1)}})()},u);return{isCheckingError:r>0,runErrorFns:f}}function Ue(o,e,r){let{callback:t,disabled:i}=r||{};(0,qe.useDebounceEffect)(()=>{(async()=>{i||e(o,t)})()},[e,o,i],{wait:100})}var Ge=fr;function mn(o,e,r){let t=T();Ue(t,o,{callback:e,disabled:r})}var K=Ge;n();s();var Eo=c(B());function dr(){return(0,Eo.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function pr(){let{baseCoin:o}=p();return(0,Eo.useMemoizedFn)(async e=>await ye(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function Cn(){let o=dr(),e=pr();return[o,e]}n();s();var M=c(I()),$e=c(S());n();s();var He=c(I());var Cr=o=>{let e=ge(o),r=xe();return(0,He.useCallback)((t,i,u)=>{let{useApproximate:f=!0}=u||{},m=r?.[t]?.coinToUSDRate;return Ko(k(i,k(m,e.usdToThisRate)),{useApproximate:f,currencySign:e.symbol}).value},[r,e.symbol,e.usdToThisRate])},Ve=Cr;function _r(){let{coin:o}=p(),e=no();return(0,M.useCallback)(()=>o.baseCoinId===0&&P(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:E.FEE_BALANCE_INSUFFICIENT}:null,[e])}function yo(){let o=Fo();return(0,M.useCallback)(e=>ao(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:E.BALANCE_INSUFFICIENT}:null,[o])}function Ao(){let o=be(),e=Ve(o),{coin:r}=p(),t=no();return(0,M.useCallback)(i=>{if(ao(i,t)){let u=e(r.coinId,t,{useApproximate:!1}),f=$o(t,{isStableCoin:r.stableCoin,useLargeNumberPrecision:!0,precision:r.displayPrecision,symbol:r.symbol}).value;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:u,cryptoamount:f},type:E.BALANCE_INSUFFICIENT}}return null},[t])}var Pn=o=>{let e=(0,$e.useDispatch)(),r=_r(),t=yo(),i=Ao(),u=[r,t,i],{runErrorFns:f}=K(u,o),m=so();(0,M.useEffect)(()=>{f(m,d=>{e(fe(d))})},[f,m])};n();s();var D=c(I()),Ke=c(S());n();s();var W={AMOUNT:"amount",FEE:"fee"};function gr(){let o=A(),e=We();return(0,D.useCallback)(()=>P(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:E.FEE_BALANCE_INSUFFICIENT,highlight:W.FEE}:null,[e,o.symbol])}function xr(){let o=yo();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:W.AMOUNT}:null},[o])}function hr(){let o=Ao();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:W.AMOUNT}:null},[o])}function Er(){let o=gr(),e=xr(),r=hr();return[o,e,r]}function Kn(o){let e=(0,Ke.useDispatch)(),r=Er(),{runErrorFns:t}=K(r,o),i=so();(0,D.useEffect)(()=>{t(i,u=>{e(de(u))})},[t,i])}n();s();var je=c(S()),Je=c(G()),Qe=c(B());uo();n();s();var Y=c(I()),io=c(B()),Ye=c(tr());n();s();var a=c(I());uo();n();s();var z=c(I());Bo();sr();rr();nr();n();s();var Io={container:"_container_137sj_1",button:"_button_137sj_4"};var So=({feedbackInfo:o})=>{let e=(0,z.useCallback)(async()=>{let t=o.method==="POST"?qo:Do,i=o.feedbackRequestParam||{},u=o.url.startsWith("/")?o.url:`/${o.url}`,m={walletSignParams:{needWalletSign:!0,walletId:await Ho().getSelectedWallet()}},[d,C]=await ko(t(`${Mo.walletHost}${u}`,i,m));!d&&C?.data.reportStatus?U.success({title:o.feedbackResultText}):U.error(j("wallet_home_toast_network_error"))},[o]);return o?z.default.createElement("div",{className:Io.container},z.default.createElement(h,{category:h.CATEGORY.text,type:h.TYPE.primary,size:h.SIZE.sm,block:!0,className:Io.button,onClick:e},o.feedbackEntryText)):null};n();s();var _={root:"_root_1qpa2_1",main:"_main_1qpa2_14",image:"_image_1qpa2_23",title:"_title_1qpa2_27",desc:"_desc_1qpa2_36",descRaw:"_descRaw_1qpa2_37",extLink:"_extLink_1qpa2_44",descList:"_descList_1qpa2_50",addressItem:"_addressItem_1qpa2_53",assressTitle:"_assressTitle_1qpa2_56",assressInfo:"_assressInfo_1qpa2_62",assressGray:"_assressGray_1qpa2_69",footerWrap:"_footerWrap_1qpa2_72",verticalButtons:"_verticalButtons_1qpa2_75",extButton:"_extButton_1qpa2_79"};var yr={vertical:"vertical",horizontal:"horizontal"},To=({evtType:o,btnType:e}={})=>{o&&Vo({specific_risk_scenarios:o,interaction_after_popup_window:e})},Ar=o=>{let{descRaw:e,desc:r,descList:t,evtType:i}=o;return e?a.default.createElement(X.Text,{className:_.descRaw},e):b(r)?b(t)?null:a.default.createElement(y.Box,{className:_.descList},t.map(u=>{let{text:f,highLightLogic:m}=u,d=[];if(m){let[C=6,g=4]=m?.split(":")||[];d.push(u?.desc?.slice(0,C)),d.push(u?.desc?.slice(C,-g)),d.push(u?.desc?.slice(-g))}return a.default.createElement(y.Box,{className:_.addressItem},a.default.createElement(y.Box,{className:_.assressTitle},f),a.default.createElement(y.Box,{className:_.assressInfo},a.default.createElement("span",null,d[0]),a.default.createElement("span",{className:_.assressGray},d[1]),a.default.createElement("span",null,d[2])))})):a.default.createElement(X.Text,{className:_.desc},a.default.createElement("span",null,r.text),a.default.createElement("span",{className:_.extLink,onClick:()=>{To({evtType:i,btnType:"click_on_the_risk_link"}),globalThis.platform.openTab({url:r.link.href})}},r.link?.text))},Fr=o=>{let{btnLayout:e,evtType:r,handleClickHighLightButton:t,handleClickGrayButton:i,confirmBtnText:u,highlightBtnText:f,grayBtnText:m,feedbackInfo:d}=o,[C,g]=(0,a.useState)(!1),F=u||f,Z=async()=>{To({evtType:r,btnType:"click_cancel"}),g(!0),await t(),g(!1)},q=()=>{To({evtType:r,btnType:"after_clicking_advanced_click_continue"}),i()};return e===yr.vertical?a.default.createElement(a.default.Fragment,null,a.default.createElement(So,{feedbackInfo:d}),a.default.createElement(y.Box,{className:_.verticalButtons},a.default.createElement(h,{block:!0,loading:C,size:h.SIZE.lg,onClick:Z,type:h.TYPE.highlight,category:h.CATEGORY.fill},F),m?a.default.createElement(y.Box,{className:_.extButton,onClick:q},m):null)):a.default.createElement(a.default.Fragment,null,a.default.createElement(So,{feedbackInfo:d}),a.default.createElement(oo,{buttonGroup:[m&&{actionType:oo.ACTION_TYPE.CANCEL,btnText:m,onClick:q},{loading:C,actionType:oo.ACTION_TYPE.CONFIRM,btnText:F,onClick:Z}].filter(Boolean)}))},Ir=o=>{let{title:e,image:r}=o,t=Ce(r);return a.default.createElement(y.Box,{className:_.root},a.default.createElement(y.Box,{className:_.main},a.default.createElement(Oo,{className:_.image,src:t}),a.default.createElement(X.Text,{className:_.title},e),a.default.createElement(Ar,{...o})),a.default.createElement(y.Box,{className:_.footerWrap},a.default.createElement(Fr,{...o})))},Sr=({handleCancel:o,handleCloseModal:e,popupInfoList:r})=>{let[t,i]=(0,a.useState)(0),u=r[t],f=t===r.length-1,m=()=>{i(g=>g+1)};return a.default.createElement(Ir,{...u,handleClickGrayButton:()=>f?e():m(),handleClickHighLightButton:()=>o()})},ze=Sr;var Tr=({handleCancel:o=Ye.default}={})=>{let e=(0,Y.useRef)(),r=(0,Y.useRef)(),t=()=>{e.current&&(e.current.destroy(),e.current=null,r.current=null)},i=(0,io.useMemoizedFn)(u=>(r.current||(r.current=new Promise((f,m)=>{e.current=Ro.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:Y.default.createElement(ze,{popupInfoList:u,handleCancel:async()=>{await o(),m(new Error(ro)),t()},handleCloseModal:()=>{f(),t()}})})})),r.current));return(0,io.useUnmount)(t),i},Ze=Tr;function js(){let o=Se(),e=T();return!!o.key&&o.type!==E.COMMON_TIP||bo(e)||e===""||P(e,0)}function Js(){let o=L(),e=(0,Je.useHistory)(),r=(0,je.useSelector)(ce),t=Ze(),i=w();return(0,Qe.useMemoizedFn)(async()=>{try{r?.length&&await t(r);let u={pathname:`${Q}/${o}${Yo}`};i&&(u.search=`?from=${i}`),e.push(u)}catch{}})}n();s();var Xe=()=>{let o=L();return lo(o)},ii=()=>{let o=N(),e=Xe(),{coin:r}=p();return o(eo(e,r.decimals),r,!1)},or=()=>{let o=Xe(),e=go();return e===null?o:e},Fo=()=>{let o=N(),e=or(),{coin:r}=p();return o(eo(e,r.decimals),r,!1)},br=()=>{let{coin:o}=p(),e=A(),r=po(),t=or();return o.coinId===e.coinId?J(t,r):t},no=()=>{let{coin:o}=p(),e=A(),r=Co(),t=Fo();return o.coinId===e.coinId?J(t,r):t},so=()=>{let o=fo(),e=no(),r=T();return o?Lo(e,0)?"0":e:r},kr=()=>{let o=A();return lo(o.coinId)},Br=()=>{let{coin:o}=p(),e=A(),r=kr(),t=Be(),i=go();return t!==null?t:o.coinId===e.coinId&&i!==null?i:r},Nr=()=>{let o=N(),e=Br(),r=A();return o(eo(e,r.decimals),r,!1)},We=()=>{let o=Nr(),e=Co();return J(o,e)},ui=()=>{let{coin:o}=p(),e=fo(),r=T(),t=br();return e?t:k(r,10**o.decimals)};n();s();n();s();var Lr=c(S());export{ir as a,w as b,L as c,p as d,A as e,Jr as f,T as g,Se as h,Qr as i,fo as j,po as k,Co as l,Te as m,_o as n,be as o,ke as p,go as q,Be as r,ar as s,lr as t,Ht as u,Pe as v,Jt as w,Qt as x,Xt as y,mn as z,K as A,dr as B,pr as C,Cn as D,_r as E,yo as F,Ao as G,Pn as H,W as I,gr as J,xr as K,Er as L,Kn as M,ro as N,Ze as O,js as P,Js as Q,Xe as R,ii as S,or as T,Fo as U,no as V,kr as W,Br as X,We as Y,ui as Z,It as _,St as $};
//# sourceMappingURL=chunk-OQUE64GQ.js.map
