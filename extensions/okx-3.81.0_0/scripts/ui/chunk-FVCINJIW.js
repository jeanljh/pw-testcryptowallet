import{a as U,b as _,d as K}from"./chunk-VUHYFIVA.js";import{b as l}from"./chunk-DZGSODSZ.js";import{a as b,b as v,c as k}from"./chunk-EEIYH3NC.js";import{f as M}from"./chunk-VJI6MZK4.js";import{aa as x,d as Q,j as S}from"./chunk-2QHGKEME.js";import{k as A,l as J}from"./chunk-YIFLUVTR.js";import{Jb as w,Sb as X,jb as H,kb as E,tb as Z}from"./chunk-COF7YKSN.js";import{J as O,va as z}from"./chunk-XFTQD4B2.js";import{f as q,o as n,q as s}from"./chunk-Y5OH3DDZ.js";n();s();var D={hideNoValue:"hideNoValue",hideManualHidden:"hideManualHidden",hideUnverifiedCollection:"hideUnverifiedCollection"},d={[D.hideNoValue]:!0,[D.hideManualHidden]:!0,[D.hideUnverifiedCollection]:!1};n();s();z();n();s();var j="nft_list_filters";n();s();var P={SHOW:0,MANUAL:1,AUTO:2};function V(t){if(!t)return d;try{let e=localStorage.getItem(j);if(!e)return d;let r=JSON.parse(e);return r?r[t]??d:d}catch{return d}}var $=t=>({projectCertificated:t.hideUnverifiedCollection,hiddenStatus:[t.hideManualHidden?void 0:P.MANUAL,t.hideNoValue?void 0:P.AUTO].filter(Boolean).join(",")}),B=t=>{let e=V(t);return $(e)},mt=(t,e)=>{let r=V(t);return e?r[e]!==d[e]:!O(r,d)};n();s();J();var F=q(Q());n();s();X();Z();var R=(t,e)=>{let r=w({netWorkId:String(t.chain)})?.localType,{coinId:o,key:a}=e.get(r)??{},i="";return t.coverUrl?i=t.coverUrl:t.resourceType===1&&(i=t.resourceUrl),{...t,id:t.id,tokenId:t.tokenId,contractAddress:t.contractAddress,name:t.name,image:i,lastPrice:t.lastPrice,bestOfferPrice:t.bestOffer,salePrice:t.sale,floorPrice:t.floorPriceDetail,chain:t.chain,tokenStandard:K[t.tokenStandard]||U.UNKNOWN,isIdentification:t.certificateFlag===1,isNew:t.newNft===!0,collectionName:t.projectName,totalBalance:t.lookerNftCount,chainName:t.chainName,chainIcon:t.chainIcon,localType:r,accountAddress:t.ownerAddress,baseCoinId:o,baseCoinKey:a}},W=async({projects:t="",chainIds:e="",saleStatus:r="",pageNo:o=1,pageSize:a=10,projectCertificated:i=!0,hiddenStatus:p="",address:m=""}={})=>{let N;if(!m)N={list:[],total:0,pageNo:o,pageSize:a};else{let g;try{g=await b({address:m,project:t,chain:e,saleStatus:r,pageNo:o,pageSize:a,projectCertificated:i,hiddenStatus:p});let L=await S(),y=new Map(L.map(f=>[f.localType,f]));N={list:g?.data?.list?.map(f=>R(f,y)),total:g.data.total,pageNo:o,pageSize:a}}catch{N={list:[],total:0,pageNo:o,pageSize:a,error:!0}}}return N},Y=async({chainId:t,contractAddress:e,tokenId:r,looker:o})=>{if(!o)return{};let a;t=parseInt(t,10),t===H||t===E?a=await k({inscriptionIdProtocol:r,looker:o}):a=await v({chain:t,contractAddress:e,tokenId:r,looker:o});let i=await S(),p=new Map(i.map(m=>[m.localType,m]));return a?.data?R(a?.data,p):null};var I={list:[],total:0,pageNo:1,pageSize:_},tt={nftFilterChain:[],nftListCatch:[],computedNftCurrency:!1,testNftCurrency:100,nftFilterInfo:{collectionFilter:[],saleStatusFilter:[]},firstSet:!1,nftFilterStatus:!1,nftCollectionLoadingStatus:!1,activeId:1,nftListData:{},listLoading:!0,listLoadingError:!1,hasHiddenNft:!1},u=A({name:"Nft",initialState:tt,reducers:{setHasHiddenNft(t,{payload:e}){t.hasHiddenNft=e},setNftFilterChian(t,{payload:e}){t.nftFilterChain=e.list},setNftListCatch(t,{payload:{list:e}}){t.nftListCatch=e},setComputedNftCurrency(t,{payload:{computedNftCurrency:e}}){t.computedNftCurrency=e},setNftFilterInfo(t,{payload:e}){t.nftFilterInfo=e},setFirstSet(t,{payload:e}){t.firstSet=e},setActiveId(t,{payload:{id:e}}){t.activeId=e},setNftListData(t,{payload:{nftListData:e,walletId:r}}){t.nftListData[r]=e},setNftListLoading(t,{payload:e}){t.listLoading=e},setNftListLoadingError(t,{payload:e}){t.listLoadingError=e},setNftFilterStatus(t,{payload:{nftFilterStatus:e}}){t.nftFilterStatus=e},setNftCollectionLoadingStatus(t,{payload:{nftCollectionLoadingStatus:e}}){t.nftCollectionLoadingStatus=e},updateNftData(t,{payload:{newData:e={},walletId:r,id:o}}){t.nftListData?.[r]||(t.nftListData[r]={list:[],total:0});let a=t.nftListData[r],i=a.list.findIndex(p=>p.id===o);i!==-1?a.list[i]={id:o,...a.list[i]??{},...e}:(a.list.push({id:o,...e}),a.total+=1)},removeNftData:(t,{payload:{walletId:e,id:r}})=>{if(t.nftListData[e]){let o=t.nftListData[e],a=o.list.findIndex(i=>i.id===r);a!==-1&&(o.list.splice(a,1),o.total-=1)}}}}),wt=t=>t[u.name].hasHiddenNft;var T=(0,F.createSelector)(t=>t[u.name].nftListData,t=>x(t),(t,e)=>t[e]??I),bt=(0,F.createSelector)(t=>t[u.name].listLoading,T,(t,e)=>e===I?!0:t),vt=(0,F.createSelector)(t=>t[u.name].listLoadingError,T,(t,e)=>e===I?!1:t),kt=t=>t[u.name].nftFilterInfo;var Mt=t=>t[u.name].activeId;var Ut=u.reducer,{actions:c}=u,G=t=>({...t,lastPrice:l(t.lastPrice),bestOfferPrice:l(t.bestOffer),salePrice:l(t.sale),floorPrice:l(t.floorPriceDetail)}),Kt=c.setHasHiddenNft,jt=c.updateNftData,Vt=c.removeNftData,Bt=c.setNftFilterInfo,Rt=c.setNftListData;function Wt(t){return async(e,r)=>{let o=r(),a=x(o),{list:i}=T(o),p=B(a),{currentNetworkUniqueId:m=""}=M(o),N={projects:"",chainIds:m,pageNo:1,pageSize:_,saleStatus:"",...p},g=Object.assign(N,t);e(c.setNftListLoading(!0));let L=await W(Object.assign(N,t)),y=i.map(f=>G(f)),h=[];g.pageNo>1&&h.push(...y),L.error?e(c.setNftListLoadingError(!0)):(e(c.setNftListLoadingError(!1)),h.push(...L.list.map(f=>G(f)))),e(c.setNftListData({nftListData:{list:h,total:L.total,pageNo:g.pageNo,pageSize:g.pageSize},walletId:a})),e(c.setNftListLoading(!1))}}function Yt(t){return t.metamask.preferences.showNftAmount}async function Gt(t){let e=await Y(t);return e?(e.lastPrice&&(e.lastPrice=l(e?.lastPrice)),e.salePrice&&(e.salePrice=l(e?.salePrice)),e.bestOfferPrice&&(e.bestOfferPrice=l(e?.bestOfferPrice)),e.floorPriceDetail&&(e.floorPriceDetail=l(e?.floorPriceDetail)),e):{}}export{j as a,D as b,d as c,P as d,V as e,$ as f,mt as g,wt as h,T as i,bt as j,vt as k,kt as l,Mt as m,Ut as n,c as o,Kt as p,jt as q,Vt as r,Bt as s,Rt as t,Wt as u,Yt as v,Gt as w};
//# sourceMappingURL=chunk-FVCINJIW.js.map
