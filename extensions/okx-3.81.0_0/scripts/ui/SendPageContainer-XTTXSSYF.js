import{a as Nn,b as vn}from"./chunk-WA56EBYT.js";import{a as Gs,b as tf,c as Ea,d as nf}from"./chunk-FUUQG7B5.js";import{a as Ho,b as Xd,c as Yd,d as ve}from"./chunk-LLFKIP66.js";import{a as Qd}from"./chunk-5PUQMP3R.js";import{a as Ds,b as Hd,c as qd,d as St,e as Kd,f as X,g as Us,h as Zd,l as $d,m as jd,n as be}from"./chunk-A7W3UWEW.js";import{a as Os,b as zd}from"./chunk-ESUENDB2.js";import{a as ef}from"./chunk-XF2W6BUP.js";import{a as of}from"./chunk-6BLOO7ZN.js";import{a as nt}from"./chunk-GRCGLJO7.js";import{a as Jd}from"./chunk-QD5HLRSI.js";import{a as Ms}from"./chunk-OB3M5GPB.js";import"./chunk-IJ7JX7CH.js";import{a as Ud}from"./chunk-J2DVEIJ3.js";import"./chunk-TWQ73ZDV.js";import"./chunk-SLISBEZF.js";import{a as _t,b as Wd}from"./chunk-X43IZLHQ.js";import{a as Od,b as Gd}from"./chunk-OJWYRJWY.js";import{a as Vd}from"./chunk-WEBT7OC4.js";import"./chunk-7IP3VPVS.js";import{a as sr,b as Rs}from"./chunk-M3OTLMUB.js";import{b as io,c as ws,d as Ad,f as Id,h as xd,i as nr,j as Ns,k as rr,m as En,p as hd,q as vs,r as Td,s as yd}from"./chunk-WRGSQF3V.js";import"./chunk-ELHHHA5F.js";import{b as Ld,d as Ls,f as Dd}from"./chunk-GNGB7SWC.js";import"./chunk-ELXRV4IW.js";import"./chunk-T4CFY3IH.js";import{a as Pd,c as wn,d as bd,f as kd}from"./chunk-6PSK4535.js";import"./chunk-GCPFAJKK.js";import"./chunk-7OWNMKUE.js";import"./chunk-EDJJACNG.js";import{a as Rd}from"./chunk-V7XA3BQU.js";import{a as Md}from"./chunk-MK5QRIIU.js";import{a as Bu,b as zu,c as Zu,d as $u}from"./chunk-WD3IVQAU.js";import"./chunk-JVF7GJB3.js";import"./chunk-QKPPTYDW.js";import"./chunk-KPUXAS7Z.js";import{c as pe}from"./chunk-IN42FW4K.js";import{e as Bd}from"./chunk-PQQFVOPL.js";import{a as bo}from"./chunk-WST3WRLT.js";import"./chunk-5QYLVV6H.js";import{a as ka}from"./chunk-I4EML244.js";import"./chunk-TJIPZMF7.js";import"./chunk-57D6LCV2.js";import{a as Oe}from"./chunk-P6XPPG3V.js";import{a as Fd}from"./chunk-4TVSOYI7.js";import{a as ko,d as vd}from"./chunk-KQ6OPOXD.js";import"./chunk-X7ACMHNF.js";import{a as Bs}from"./chunk-DEJA7CK3.js";import{a as ku,d as Nu}from"./chunk-LS6URCUV.js";import"./chunk-XDEC3ZLT.js";import{a as Dt,b as Fa}from"./chunk-RGPNT5G7.js";import{$ as Sd,A as Tn,B as Vo,C as ad,D as md,E as Fs,F as yn,G as cd,H as Q,I as Rt,J as ud,K as dd,L as fd,M as oe,N as Pn,O as Es,Q as bn,R as kn,T as gd,V as Ke,W as Ct,X as Fn,Y as Cd,Z as me,_ as _d,b as ju,c as Ne,d as _,e as Oo,f as w,g as Go,h as Qu,i as K,j as Wo,k as J,l as ed,m as od,n as Ts,o as Ue,p as pt,q as ys,r as xn,s as td,t as nd,u as y,v as rd,w as sd,x as Ps,y as hn,z as bs}from"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import{A as xe,B as he,C as Xu,D as Yu,b as Ae,k as Vu,l as hs,t as Hu,u as qu,v as Ku,w as Ju,x as _e}from"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import{f as ld,g as pd}from"./chunk-AQO2BBXJ.js";import{a as gt,e as ks,f as id}from"./chunk-GWMNMJND.js";import{a as vu,d as Ru,m as Du,n as Mu,o as Uu,t as Ou}from"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import{a as xs}from"./chunk-S7VT2TWF.js";import{c as Wu}from"./chunk-HBNZZZEG.js";import{a as Gu}from"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import{d as to,f as Me,g as Eu,j as wu}from"./chunk-BNS5ABAB.js";import"./chunk-UFGJXE4D.js";import{a as no}from"./chunk-7QX2TXNH.js";import"./chunk-LBNBJFSZ.js";import"./chunk-SFA2I2L2.js";import{d as bu}from"./chunk-ZDHJHPQ5.js";import{c as Ed,e as wd,f as Nd}from"./chunk-ROS2ENQV.js";import"./chunk-DFPRATON.js";import{a as Fu}from"./chunk-WY5R5HAR.js";import"./chunk-GTQ5U6DA.js";import{a as Lu}from"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import{a as _I}from"./chunk-D6JWJBT7.js";import{$ as Lt,A as os,C as pn,D as gn,E as ts,F as Cn,G as dt,H as So,I as Mc,J as _n,K as Uc,L as ns,M as Oc,N as Gc,O as Wc,P as Vc,Q as Hc,R as rs,S as qc,T as ss,U as _a,V as Kc,W as Jc,X as Xc,Y as is,Z as Yc,_ as zc,aa as Sa,b as kc,ba as as,c as ut,ca as or,d as Fc,da as ms,e as Ec,ea as Aa,f as wc,fa as Zc,g as dn,ga as $c,h as zr,ha as Po,i as fn,j as ln,ja as cs,k as Nc,ka as Ia,l as yo,la as us,m as vc,ma as jc,n as Zr,na as ds,o as $r,oa as xa,p as Bc,pa as ha,q as jr,qa as Ta,r as Co,ra as Qc,s as Qr,sa as eu,t as Mo,ta as ou,u as er,ua as tu,v as Lc,va as ya,w as es,wa as nu,x as Rc,y as _o,z as Dc}from"./chunk-GLRDVHLR.js";import{g as ae}from"./chunk-P3S4ES3J.js";import"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import"./chunk-AP337SRV.js";import"./chunk-TF4QEXO7.js";import"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import{A as du,B as Pa,C as gs,D as tr,E as fu,F as lu,I as ft,J as q,K as B,L as ce,M as pu,O as gu,Q as Ce,R as oo,S as lt,T as Cs,b as fs,c as ru,f as ee,g as ls,h as ps,k as su,l as iu,m as eo,n as au,o as Sn,p as Uo,q as mu,s as cu,x as uu,y as An}from"./chunk-QJ36ZOFH.js";import"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import{d as hu}from"./chunk-JHO7RU36.js";import{b as an,p as bc}from"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import{e as ba}from"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{A as dc,B as fc,L as lc,S as pc,a as nn,b as rn,c as Kr,k as ct,r as cc,s as uc}from"./chunk-3ZKJXYZ4.js";import{a as Bt}from"./chunk-SOSR34AP.js";import{a as As,c as Is}from"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-47LIW52M.js";import{Ha as gc,Q as Ca}from"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{p as tt}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import{c as Ao}from"./chunk-OOYDFTEF.js";import{a as Tu}from"./chunk-JNIP4OYT.js";import{c as Iu}from"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-DZGSODSZ.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import{a as Io,b as yu,k as Pu}from"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import{b as Ss}from"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{a as Cu,e as Au,h as ne,j as In,n as _s}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{a as Xr,g as De,ib as Yr,ua as mn,va as cn,wa as un}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as ie,u as Z}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as R}from"./chunk-Z62JX42S.js";import{C as la,F as Wr,H as go,Na as k,aa as Ro,p as Gr,w as nc}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import{a as xu}from"./chunk-YDSDBRIT.js";import{a as we}from"./chunk-6PA65BO3.js";import{a as Qn,c as To}from"./chunk-OIXGC4LI.js";import{a as sn,b as Do}from"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{_ as Qe,ba as ac,c as Ee,da as et,e as rc,ea as mc,ha as ga,ia as te,l as Vr,n as sc,o as pa,q as ic,s as Hr,t as at,u as mt,v as on,w as tn,x as qr}from"./chunk-WU2LB6XB.js";import{b as Sc,d as Ac,f as Ic,g as xc,h as hc,i as Tc,j as yc,n as Pc}from"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import{c as Jr}from"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import{c as Pe,e as ot}from"./chunk-EN2WHAVL.js";import{h as Su}from"./chunk-CP2RIMI2.js";import{c as Cc,f as _c}from"./chunk-3QLLFUC4.js";import{D as km,F as Fm,a as He,b as $e,c as fe,d as qe,e as Yt,f as Le,g as vt,h as Fe,j as Er,v as bm}from"./chunk-EFOY37CC.js";import{c as W}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import{a as _u}from"./chunk-E4OV5WXB.js";import{b as po,c as jt}from"./chunk-GR7YC6C3.js";import{A as Rm,E as Bo,J as Qt,h as Lm,k as SI}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import{b as Bm,c as $n,n as ca}from"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Aa as Om,Ba as ua,Db as fa,Ia as Gm,Ja as Lr,Lb as ec,Na as Rr,O as gI,Pb as Mr,Sb as en,Wb as Ur,Za as Wm,_a as Vm,_b as oc,ab as Hm,ac as tc,bb as qm,bc as Lo,cb as Km,db as Jm,dc as G,eb as Xm,fb as Ym,fc as jn,gb as zm,hb as Dr,ib as Zm,jb as $m,jc as Or,kb as jm,na as vr,nc as Re,ra as Br,ta as Dm,tb as le,wa as Mm,wb as Qm,xb as da,za as Um}from"./chunk-COF7YKSN.js";import{A as b,K as V,o as L,z as Xt}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{E as Nr,H as vm,I as je,O as $t,f as wr,o as fo,q as lo,r as wm,s as Nm}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import{f as Pm,h as CI}from"./chunk-K336SGW3.js";import{B as hm,I as Jt,M as Qo,d as Sm,e as ma,f as Fr,ia as Tm,j as Am,ka as Zn,pa as ym,u as Im,va as Ve,y as xm}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import{a as Em}from"./chunk-GVV6OTQP.js";import{t as zt,u as Zt,z as ge}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as vo}from"./chunk-4QGZDIBD.js";import{b as h}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as c,o as s,p as l,q as i}from"./chunk-Y5OH3DDZ.js";s();i();var Ze=c(h()),Ft=c(we());Ve();s();i();var Bn=c(h()),Ws=c(k()),rf=c(we());var AI=()=>{let e=(0,rf.useHistory)(),o=(0,Ws.useDispatch)(),t=(0,Ws.useSelector)(ru),n=(0,Bn.useRef)(t);return n.current=t,(0,Bn.useEffect)(()=>{let{fromPage:r}=e.location?.state||{};return r&&o(uu(r)),o(An(!0)),()=>{n.current&&(o(Cs()),o(ds()))}},[]),null},sf=(0,Bn.memo)(AI);s();i();s();i();s();i();var gf=c(h());s();i();var Mt=c(h());V();s();i();var af=c(h()),mf=c(R());V();var II=()=>{let[e,o]=(0,af.useState)(!1);return[(0,mf.useMemoizedFn)(async n=>{try{o(!0);let{data:r}=await pc({txSource:1,coinId:n}),a="";if(r?.canRecharge||(a=r.rechargeMsg),r?.canWithdraw||(a=r.withdrawMsg),a){let m=fo.warn({text:a,confirmText:b("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{m.destroy()}});return!1}return!0}catch{return je.error(b("wallet_home_toast_network_error")),!1}finally{o(!1)}}),e]},cf=II;s();i();s();i();var At=c(h());V();function xI({loading:e,tag:o,customRender:t,focus:n,noMargin:r,noPadding:a,onChange:m,onRef:u,...d}){let p=(0,At.useRef)(null);(0,At.useLayoutEffect)(()=>{n&&p.current?.focus?.()},[]);let g=b("wallet_extension_transaction_placeholder_input_address");return At.default.createElement(nt.Row,{noMargin:r,noPadding:a},At.default.createElement(lo.TextArea,{placeholder:g,errorType:lo.TIP_TYPE.always,size:lo.SIZE.xl,autoResize:!0,...d,onRef:f=>{p.current=f,u&&u(f)},onChange:f=>{m&&m(f.target.value)},customRender:({inputComponent:f})=>{let C=At.default.createElement(nt.InputCustomRender,{inputComponent:f,loading:e,tag:o});return t?t({inputComponent:f,customInputComponent:C}):C}}))}var wa=xI;s();i();var Te=c(h()),Ln=c(k()),Vs=c(R()),lf=c(vo());Ve();V();s();i();s();i();var hI=()=>84,uf=hI;var df=uf;s();i();var ff={selected:"_selected_lvccx_1"};function TI({value:e,network:o}){let t=(0,Ln.useDispatch)(),[n,r]=(0,Te.useState)(!1),[a,m]=(0,Te.useState)({}),[u,d]=(0,Te.useState)(""),p=Nd(()=>{d(Ms.TYPE.ADD),m({address:e,network:o}),r(!0)}),g=(C={name:""})=>{r(!1),m({}),d(""),C.name&&t(tr({name:C.name,type:pa.ADDRESS_BOOK}))},f=C=>{r(!1),setTimeout(()=>{d(Ms.TYPE.EDIT),m({...C,network:o}),r(!0)})};return Te.default.createElement(Te.default.Fragment,null,Te.default.createElement(nt.InputBottomBar,{title:b("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:b("wallet_extension_send_anchor_add_now"),buttonClick:p}),Te.default.createElement(Ms,{visible:n,type:u,data:a,onClose:g,onChangeToEdit:f}))}function yI({visible:e,options:o,onSelect:t,onChange:n}){let r=(0,Ln.useDispatch)();if(!e)return null;let a=({walletId:m,address:u,name:d,type:p,group:g,addressType:f})=>{if(t(),n(u),d){let C=g?`${g} - ${d}`:d;r(tr({name:C,type:p,extra:{walletId:m,group:g,name:d,addressType:f}}))}};return Te.default.createElement(nt.SelectAddress,{options:o,onSelect:a})}function PI(e,o,t){let n=t?.matchAddress||((r,a)=>Zn(a.address).includes(Zn(r))||a.name&&Zn(a.name).includes(Zn(r)));return(0,Te.useMemo)(()=>{if(!e?.length)return[];if(!o)return e;let r=[];return e.forEach(({group:a,list:m})=>{let u=[];m.forEach(d=>{n(o,d)&&u.push(d)}),u.length&&r.push({group:a,list:u})}),r},[e,o])}function bI({value:e,error:o,onChange:t,isCheckingError:n,extraProps:r,onBlur:a,onFocus:m,...u}){let d=(0,Ln.useDispatch)(),p=Ne(),{coin:g}=_(),{localType:f}=g,C=(0,Ln.useSelector)(ps),S=y(),{filterAddress:A,disableRequestDomain:I}=r||{},x=!e,T=!!e&&!o&&!C?.name&&!n,P=wd(f,S),F=(0,Te.useMemo)(()=>A?A(P):P,[P,A]),[v,E]=(0,Te.useState)((!e||!!o)&&!T&&F?.length>0),N=PI(F,e,r),D=Ed(f),U=M=>{t(M);let re=D(M),de=Boolean(M&&re);d(tr(de?re:null))},{loading:$,abort:H}=nd({domainInputValue:e,coinId:p},({address:M,domain:re})=>{d(gs({key:"",args:{}})),t(M),d(tr({name:re,type:pa.ENS}))},I),O=(0,Vs.useDebounce)(!!$||!!u.loading||!!n,{wait:200});(0,Vs.useThrottleEffect)(()=>{n||(!!e&&!o&&N.length===0?E(!1):!!o&&N?.length>0&&E(!0))},[e,o,n,N?.length],{wait:100});let j=df();return Te.default.createElement("div",{className:(0,lf.default)({[ff.selected]:v}),style:{bottom:j}},Te.default.createElement(nt.Row,{noMargin:v},Te.default.createElement(wa,{...u,noMargin:!0,noPadding:!0,loading:O,tag:C?.name,focus:x,value:e,error:!O&&o,onChange:U,onBlur:M=>{e&&!o&&setTimeout(()=>{E(!1)},100),a&&a(M)},onFocus:M=>{N?.length>0&&E(!0),m&&m(M)}}),T&&Te.default.createElement(TI,{network:f,value:e})),Te.default.createElement(yI,{visible:v,options:N,onSelect:()=>{H(),E(!1)},onChange:t}))}var Na=bI;s();i();var ir=c(h()),ar=c(k());V();function kI({Component:e=Na,loading:o=!1,extraProps:t,errorFns:n={fns:[],override:!1}}){let r=(0,ar.useDispatch)(),m=no().get("address"),u=(0,ar.useSelector)(ee),d=(0,ar.useSelector)(ls),p=md(),{isCheckingError:g,runErrorFns:f}=Tn(p,n),C=A=>{f(A,I=>{r(gs(I))})},S=A=>{C(A),r(Pa(A))};return(0,ir.useEffect)(()=>{m&&r(Pa(m))},[]),(0,ir.useEffect)(()=>{r(du(g))},[g]),ir.default.createElement(e,{value:u,onChange:S,loading:o,isCheckingError:g,error:d?.key?b(d?.key,d?.args):null,extraProps:t||{}})}var va=kI;s();i();var pf={content:"_content_12kl2_1"};var FI=({headerProps:e={},addressProps:o={},confirmButtonProps:t={}})=>{let n=Ne(),r=Ps(),a=sd(),m=hn(),[u,d]=cf(),p=(0,Mt.useMemo)(()=>{let{disabled:g,loading:f,onClick:C,...S}=t||{},A=g||r,I=async()=>{let x=C||m;await u(n)&&await x()};return[{disabled:A,size:ge.SIZE.lg,type:ge.TYPE.highlight,category:ge.CATEGORY.fill,btnText:b("wallet_extension_send_btn_next_step"),loading:!A&&(f||a||d),onClick:I,...S}]},[t,r,a,m,u,d,n]);return Mt.default.createElement(Ds,{footerActions:p,slot:{header:Mt.default.createElement(Hd,{...e,title:b("wallet_extension_send_title_recipient_address"),pageIndex:1})}},Mt.default.createElement("div",{className:pf.content},Mt.default.createElement(va,{...o})))},Y=FI;var EI=()=>gf.default.createElement(Y,null),Cf=EI;s();i();var hf=c(h());s();i();var Af=c(h()),qs=c(k()),If=c(R());ot();le();s();i();var _f=c(h()),Sf=c(k());Re();function wI({transferType:e,fungibleAssetTransferType:o,tokenTransferType:t}){let{coin:n}=_(),r=(0,Sf.useSelector)(ee),a=me(),{baseCoinId:m,protocolType:u,address:d}=n||{};return(0,_f.useCallback)(p=>{let{sequenceNumber:g,chainId:f,expirationTimestampSecs:C,tyArg:S,maxGasAmount:A,gasUnitPrice:I}=p||{},x={recipientAddress:r,amount:a},T={base:{sequenceNumber:g,chainId:f,maxGasAmount:A,gasUnitPrice:I,expirationTimestampSecs:C}};return m===0&&(T.type=e,T.data={...x}),m!==0&&u===jn.APTOS_FUNGIBLE_TOKEN&&(T.type=o,T.data={...x,fungibleAssetMetadataAddress:d}),m!==0&&u===jn.APTOS_TOKEN&&(T.type=t,T.data={...x,tyArg:S}),T},[r,a,m,u,d])}var Hs=wI;var NI=()=>{let[e,{setFalse:o}]=(0,If.useBoolean)(!0),t=(0,qs.useSelector)(ee),{coin:n}=_(),r=y(),a=(0,qs.useDispatch)(),m=Hs({transferType:mt.SIMULATE_TRANSFER,fungibleAssetTransferType:mt.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:mt.SIMULATE_TOKEN_TRANSFER_V2}),{chainId:u,coinId:d}=n,p=Io();return(0,Af.useEffect)(()=>{u&&r&&t&&(async()=>{try{let{data:f={}}=await nn({coinId:d,fromAddr:r,scenario:Vr.SCENARIO_SEND_COIN}),C=await Pe().getPublicKey(r,Mm,p),S=m(f.info),{gasFee:{fee:A,gasLimit:I,gasPrice:x},popupInfoList:T,preExeStatus:P}=await ct({dappData:JSON.stringify({transaction:{...S.data,...S.base,to:t,publicKey:C},data:{}}),dappInfo:{},to:t,method:"wallet_inner_transfer",from:r,chainIndex:u});a(q(A)),a(Vc({maxGasAmount:I,gasUnitPrice:x})),T?.length&&a(lt(T)),a(B(P===!1))}catch{a(B(!0))}finally{o()}})()},[u,r,t]),e},xf=NI;function vI(){let e=xf();return Q(),hf.default.createElement(X,{confirmButtonProps:{loading:e},totalAmountProps:{type:"amount"}})}var Tf=vI;s();i();var Mf=c(h());s();i();var Je=c(h()),mr=c(k());Ve();V();s();i();var yf=c(h()),Pf=c(k());function bf(){let e=(0,Pf.useDispatch)(),o=Wo(),t=Ke();(0,yf.useEffect)(()=>{if(o){let n=t;Le(n,0)&&(n="0"),e(fu(n))}},[o,t])}s();i();s();i();var Ba=c(h()),kf=c(we());var Ff=c(R());var BI=({disabled:e,onSubmit:o,feeLoading:t,loading:n,onClick:r,networkFee:a,renderActions:m,...u},d)=>{let p=(0,kf.useHistory)(),g=Oo(),{coin:f}=_(),C=y(),{loading:S,onClick:A}=Sd(o),I=_d(),x=(0,Ff.useCreation)(()=>{if(m&&typeof m=="function"){let T=m(d);if(T)return T}return[{actionType:hs.ACTION_TYPE.CANCEL,onClick:()=>{p.goBack()}},{loading:n||S,disabled:e||I||t,actionType:hs.ACTION_TYPE.CONFIRM,onClick:r||A,"data-testid":Tu.SEND_PAGE.SEND_CONFIRM_BUTTON,...u}]},[t,n,f?.coinId,I,A,e,d,g?.coinId,C,S,r,u]);return Ba.default.createElement(Ss,{usePortal:!0,offsetBottom:0,placeholder:!0},Ba.default.createElement(hs,{buttonGroup:x}))},Ef=BI;var wf=Ef;s();i();var Nf=c(h());var LI=({loading:e,chainName:o,feeLevel:t,onClick:n,...r},a)=>{let m=J(),u=pt(),d=Ue(),p=od(),g=Ts(),f=_t(),C=n?()=>{n(),a({trade:"send",network:o,all_confirmation:"network_fee"})}:void 0,S=(0,Nf.useMemo)(()=>t!==void 0?t:Qe?.STANDARD,[t]);return{gasReturn:f,currencyId:d,networkFee:p&&m==="0"?void 0:m,loading:e||p,level:S,coinId:u,estimateFailed:!!g,onClick:C,...r}},vf=LI;s();i();var La=c(k()),Bf=c(R());V();var RI=()=>{let e=Wo(),o=_(),t=(0,La.useSelector)(mu),n=Ue(),r=o?.coin?.coinId,a=K(),m=wu(r,a,{currencyId:n}),u=(0,La.useSelector)(su);return(0,Bf.useCreation)(()=>{let d=0,p=0;return t===Wu?e?(p=L.mul(m,-1),d=L.mul(a,-1)):(d=void 0,p=L.mul(u,-1)):(d=L.mul(a,-1),p=void 0),{currencyId:n,coinId:r,assetChange:d,useMinPrecision:!0,currencyAssetChange:p}},[t,n,r,e,m,u,a])},Lf=RI;s();i();var Rf={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function DI({loading:e,networkFeeProps:o={},confirmButtonProps:t={},containerProps:n={},tipMessageProps:r={},slot:a={},checkEmpty:m=!0,addressType:u,renderMessage:d,renderTipActions:p,defaultMessage:g,canTransferAmount:f,tipActions:C=[]}){let S=(0,mr.useSelector)(ee),A=(0,mr.useSelector)(ps),I=Io(),x=Rd(I),T=(0,mr.useSelector)(cu),P=(0,mr.useSelector)(Fc),F=y(),v=Lf(),{coin:E,baseCoin:N}=_(),D=vf({...o,chainName:E?.chainName},x),{loading:U,estimateFailed:$}=D,O=D?.gasReturn?.activity?.errorCode,{bottom:j,networkFee:M,footer:re}=a,de=Je.default.createElement(ko,{bordered:!1,verticalPadding:!1},Je.default.createElement(Bs,{...D}));M&&ma(M)&&(de=M(D)),M&&!ma(M)&&(de=M),qd(m),bf(),(0,Je.useEffect)(()=>{O===0&&gc({wallet_address:F,chain_id:N.chainId,transaction_type:"transfer"})},[O]);let se=wf({...t,feeLoading:U},T?.type||P);return Je.default.createElement(Ds,{...n,loading:e,className:Rf.root,slot:{header:Je.default.createElement(bd,{...r,address:F,coinId:E?.coinId,actions:C,renderActions:p,renderMessage:d,type:T?.type||P||($?vd.TIP_TYPE.FEE_ERROR:void 0),message:T?.text||!!T?.key&&b(T.key,T?.args)||!$&&g}),footer:re||se}},Je.default.createElement(W.Space,{space:24,direction:W.DIRECTION.vertical},Je.default.createElement(kd,{txType:Ee.TRANS_OUT},Je.default.createElement(W.FlexBox,{justify:"center"},Je.default.createElement(Pd,{...v}))),de,Je.default.createElement(ko,{bordered:!1,verticalPadding:!1},Je.default.createElement(Fa,{address:F,addressType:u,title:b("extension_send_mid_text_from"),walletId:I,onCopyCallback:()=>{x({trade:"send",network:E?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Je.default.createElement(Od,{coinBalance:f,coinId:N.coinId})),Je.default.createElement(Fa,{tags:A?.name?[A?.name]:null,address:S,title:b("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address",network:E?.chainName})}})),j))}var z=DI;s();i();var Ra=c(k());en();var Df=()=>{let{coin:e}=_(),o=y(),t=me(),n=(0,Ra.useSelector)(ee),r=(0,Ra.useSelector)(kc),a=ne(),{gasUnitPrice:m,maxGasAmount:u}=r,d=Hs({transferType:mt.TRANSFER,fungibleAssetTransferType:mt.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:mt.TOKEN_TRANSFER_V2}),p=_e(),g=xe({fromAddr:o,walletId:a,localType:fa}),f=he({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:n,networkFee:He(m,u),localType:fa});return pe(async()=>await p({coinId:e.coinId,address:o,fromAddr:o,toAddr:n}),async(T={})=>{let P=d({...T,gasUnitPrice:m,maxGasAmount:u}),F=await g({params:P});return{signInfo:T,signedTx:F}},async({signInfo:T,signedTx:P})=>{let{sequenceNumber:F}=T,v={nonce:F},E={extJson:JSON.stringify(v)};return await f(P,E)},T=>(ae({tx_id:T}),T))};function MI(){let e=Df(),o=async()=>{await e()};return oe(),Mf.default.createElement(z,{confirmButtonProps:{onSubmit:o}})}var Uf=MI;s();i();s();i();var Of=c(h()),Gf=c(k());var UI=()=>{let e=(0,Gf.useDispatch)(),{coin:o,baseCoin:t}=_(),{baseCoinId:n}=o,r=J(),a=ne(),m=Jd({accountId:a,chainIndex:t?.chainId}),u=Me(o.coinId,a),d=m?.coinAmountInt,p=u?.coinAmountInt;(0,Of.useEffect)(()=>{if(!!d){if(n===0){let g=Yt([0,qe(d,r)]);e(Ce(g))}else e(Ce(p));e(oo(d))}},[e,n,d,p,r])},Wf=UI;var OI=({children:e})=>(Wf(),e),Vf=OI;var GI={match:e=>hc(e),SubContainer:Vf,pages:{AddressPage:Cf,AmountPage:Tf,ConfirmPage:Uf}},Hf=GI;s();i();Re();s();i();var Yf=c(h());s();i();var cr=c(h()),qf=c(we());Re();le();var WI=()=>{let{coinId:e}=(0,qf.useParams)(),t=to(e)?.protocolId,n=Object.values(G),r=Au(),a=r.filter(({keyringIdentityType:f})=>_c(f)),m=r.filter(({keyringIdentityType:f})=>f===tc.MPC),u=(f,C)=>!f.some(({walletIdentities:S})=>S.some(({addressType:A={}})=>{let I=A[vr];return I?I.some(({address:x})=>C.address===x):!1})),d=(0,cr.useCallback)(f=>n.includes(t)?u(a,f):!0,[a,t,n]),p=(0,cr.useCallback)(f=>[G.BRC_20,G.FRACTAL_BRC20].includes(t)?!0:n.includes(t)?u(m,f):!0,[m,t,n]),g=(0,cr.useCallback)((f=[])=>f.filter(C=>d(C)&&p(C)),[d,p]);return(0,cr.useCallback)(f=>f.map(C=>({...C,list:g(C?.list)})).filter(C=>C?.list?.length),[g])},Rn=WI;s();i();function VI(){let e=Vo(),o=ad();return[e,o]}var Kf=VI;s();i();var Ks=c(we()),Jf=c(R());s();i();function qo(){return no().get("type")||Ho.SEND}var HI=()=>{let[e,{setTrue:o,setFalse:t}]=(0,Jf.useBoolean)(!1),n=y(),r=w(),{coin:a,baseCoin:m}=_(),u=vn(),{coinId:d}=(0,Ks.useParams)(),p=(0,Ks.useHistory)(),g=qo();return{onClick:async()=>{try{o(),await u({from:n,to:r,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId}),p.push(`${De}/${d}${un}?type=${g}&from=${n}`)}catch{}finally{t()}},loading:e}},Xf=HI;function qI(){let e=Kf(),o=Rn(),{onClick:t,loading:n}=Xf();return Yf.default.createElement(Y,{confirmButtonProps:{onClick:t,loading:n},addressProps:{errorFns:{fns:e,override:!0},extraProps:{filterAddress:o}}})}var zf=qI;s();i();var kl=c(h());s();i();var ao=c(h()),Ys=c(k()),hl=c(we()),Tl=c(vo());V();s();i();var ue=c(h()),Ut=c(vo());V();s();i();var xo={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var KI=({lockedAmount:e,lockedAmountDisplay:o,catTotalAmount:t,catTotalAmountDisplay:n,pendingXrc:r,pendingXrcDisplay:a,availableWithoutSpending:m,availableWithoutSpendingDisplay:u,availableReceiving:d,availableReceivingDisplay:p,goToInscribe:g,addressType:f,coinId:C})=>{let{handleClick:S}=Xd(f,C);return ue.default.createElement(ue.default.Fragment,null,ue.default.createElement(W.Box,{className:(0,Ut.default)(xo.container)},Number(e)>0&&ue.default.createElement(W.FlexBox,{justify:"space-between"},ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{type:Z.TYPE.secondary,size:Z.SIZE.xs},b("extension_wallet_btc_in_use"))),ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{className:xo.amount},o),ue.default.createElement(Z.Text,{size:Z.SIZE.xs,className:(0,Ut.default)(xo.link),onClick:S},b("extension_wallet_btc_btn_unlock_use")))),Number(r)>0&&ue.default.createElement(W.FlexBox,{justify:"space-between",className:(0,Ut.default)(xo.pendingAssets)},ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{type:Z.TYPE.secondary,size:Z.SIZE.xs},b("extension_wallet_btc_select_receiving"))),ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{className:xo.amount},a))),Number(m)>0&&ue.default.createElement(W.FlexBox,{justify:"space-between"},ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{className:xo.amount},b("extension_wallet_btc_to_be_inscribed"))),ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{type:Z.TYPE.secondary,size:Z.SIZE.xs},u),ue.default.createElement(Z.Text,{size:Z.SIZE.xs,className:(0,Ut.default)(xo.link),onClick:g},b("extension_wallet_btc_btn_inscribe")))),Number(d)>0&&ue.default.createElement(W.FlexBox,{justify:"space-between",className:(0,Ut.default)(xo.pendingAssets)},ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{type:Z.TYPE.secondary,size:Z.SIZE.xs},b("extension_wallet_btc_select_receiving"))),ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{className:xo.amount},p))),Number(t)>0&&ue.default.createElement(W.FlexBox,{justify:"space-between",className:(0,Ut.default)(xo.pendingAssets)},ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{type:Z.TYPE.secondary,size:Z.SIZE.xs},b("wallet_extension_cat_desc_total_amount"))),ue.default.createElement(W.Box,null,ue.default.createElement(Z.Text,{className:xo.amount},n)))))},Dn=KI;s();i();function JI(){let e=y(),{coin:o}=_();return Yd(o,e)}var It=JI;s();i();var Ie=c(h()),Qf=c(k()),el=c(vo());V();s();i();var Fo=c(h()),Da=c(vo());V();s();i();var XI="md",YI="lg",Zf=e=>{let{className:o,size:t,disabled:n,checked:r,coinImage:a,coinAmountText:m,inscriptionId:u,onChange:d}=e,p=`inscription-select-container-${t}`,g=n?"inscription-select-disabled":null;return Fo.default.createElement("div",{className:(0,Da.default)("inscription-select-container",p),onClick:d},n?Fo.default.createElement("div",{className:"inscription-select-confirm"},b("extension_wallet_send_tag_confirming")):null,Fo.default.createElement("div",{className:(0,Da.default)("inscription-select",g,o)},n?null:Fo.default.createElement("div",{className:"inscription-select-radio-container"},Fo.default.createElement(wm.Circle,{checked:r})),Fo.default.createElement("div",{className:"inscription-select-coin"},Fo.default.createElement(Nr,{className:"inscription-select-coin-image",src:a,errorImg:Jr,width:14,height:14}),Fo.default.createElement(ka,{text:m,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),Fo.default.createElement("div",{className:"inscription-select-id"},Fo.default.createElement(ka,{text:u,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Zf.size={md:XI,lg:YI};var Mn=Zf;s();i();var Be=c(h()),$f=c(R());V();s();i();var xt={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function zI(){let{coin:e}=_(),o=It();return Be.default.createElement("div",{className:xt.header},Be.default.createElement("div",{className:xt.amount},Be.default.createElement(Nr,{className:xt.logo,src:e.image,errorImg:Jr,width:20,height:20}),o?.transferableWithoutSpendingDisplay))}function ZI({loading:e,list:o,visible:t,onClose:n,value:r,onSelected:a,request:m}){let{coin:u}=_(),[d,p]=(0,Be.useState)({}),{run:g}=(0,$f.useThrottleFn)(f=>{e||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&m&&m()},{wait:300});return(0,Be.useEffect)(()=>{t&&p(r)},[t]),Be.default.createElement(fo,{isFull:!0,topContent:Be.default.createElement(zI,{list:o,value:d,onMax:f=>{p(o.reduce((C,S)=>({...C,[S.inscriptionId]:!f}),{}))}}),footer:Be.default.createElement(nt.ConfirmButton,{onClick:()=>{a(d)}},b("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:t,onClose:n,renderContent:()=>Be.default.createElement("div",{className:xt.scrollContent,onScroll:g},Be.default.createElement("div",{className:xt.content},o.map((f,C)=>Be.default.createElement("div",{className:xt.cell},Be.default.createElement(Mn,{key:C,size:Mn.size.lg,coinImage:u.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{p(S=>({...S,[f.inscriptionId]:!S[f.inscriptionId]}))}})))),e&&Be.default.createElement("div",{className:xt.loading},Be.default.createElement(Zt.Circle,{size:Zt.SIZE.sm})))})}var jf=ZI;s();i();var Un={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function $I({loading:e,list:o,request:t,onSelected:n},r){let{coin:a}=_(),[m,u]=(0,Ie.useState)(!1),d=(0,Qf.useSelector)(_o),[p,g]=(0,Ie.useState)(d.reduce((S,A)=>({...S,[A.inscriptionId]:!0}),{})),{selected:f,showed:C}=(0,Ie.useMemo)(()=>{let S=o.filter(I=>!!p[I.inscriptionId]),A=o.filter(I=>!p[I.inscriptionId]);return{selected:S,unselected:A,showed:o.map(I=>S.includes(I)?{...I,checked:!0}:I)}},[o,p]);return(0,Ie.useEffect)(()=>{n(f)},[f]),(0,Ie.useImperativeHandle)(r,()=>({onMax:()=>{g(o.reduce((S,A)=>({...S,[A.inscriptionId]:!0}),{}))}})),Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement("div",{className:Un.root},Ie.default.createElement("div",{className:Un.title,onClick:()=>{u(!0)}},b("extension_wallet_send_text_select_transferable"),Ie.default.createElement(zt,{className:(0,el.default)(Un.arrow,"okx-wallet-plugin-right")})),Ie.default.createElement("div",{className:Un.content},C.map((S,A)=>Ie.default.createElement("div",{className:Un.cell},Ie.default.createElement(Mn,{key:A,coinImage:a.image,size:Mn.size.md,coinAmountText:`${S.tokenAmount} ${S.tick}`,inscriptionId:S.inscriptionId,checked:S.checked,onChange:I=>{I.stopPropagation(),g(x=>({...x,[S.inscriptionId]:!x[S.inscriptionId]}))}}))))),Ie.default.createElement(jf,{visible:m,value:p,loading:e,list:o,request:t,onSelected:S=>{g(S),u(!1)},onClose:()=>{u(!1)}}))}var ol=(0,Ie.forwardRef)($I);s();i();var ht=c(h()),tl=c(k());V();function jI(e){let{coin:o}=_();return(0,ht.useCallback)(()=>e.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:o.symbol},type:"inscribe"}:null,[e])}function nl(){let e=Oo();return o=>{let t="";return o.key&&(t=b(o?.key,o?.args)),o?.type===te.FEE_BALANCE_INSUFFICIENT?ht.default.createElement(ht.default.Fragment,null,t," ",ht.default.createElement(St,{coin:e})):o?.type==="inscribe"?ht.default.createElement(ht.default.Fragment,null,t):t}}function QI(e,o){let t=(0,tl.useDispatch)(),n=Fs(),r=jI(o),a=[n,r],{runErrorFns:m}=Tn(a);bs(m,u=>{t(lu(u))},e)}var rl=QI;s();i();var sl=c(we());var il=c(k());function ex(){let e=(0,il.useDispatch)(),o=(0,sl.useHistory)(),{coin:t}=_(),n=y();return()=>{e(ds()),e(Cs()),o.push(`${De}/${t.coinId}${mn}?type=${Ho.INSCRIBE}&from=${n}`)}}var al=ex;s();i();var ul=c(h()),dl=c(k());s();i();var ur=c(h()),ml=c(k());function Ma(){let{baseCoin:e}=_(),o=y(),[,t]=bo({coinId:e.coinId,address:o,chainId:e.chainId},{pollingInterval:20*1e3});return t||{}}function ox(e,o){let r=(()=>255)(),a=e||o?.normal||"0",[m,u]=(0,ur.useState)("0");return(0,ur.useEffect)(()=>{if(r&&a){let d=He(r,a);u(d)}},[r,a]),{fee:m,satBytes:a,bytes:r}}function tx(e){let o=(0,ml.useDispatch)(),t=Ma(),n=ox(e,t);return(0,ur.useEffect)(()=>{o(Po({name:"signInfo",value:t}))},[t]),{...n,signInfo:t}}var cl=tx;function nx(){let e=(0,dl.useDispatch)(),{fee:o}=cl();(0,ul.useEffect)(()=>{e(q(o))},[o])}var fl=nx;s();i();var Cl=c(h()),_l=c(k());s();i();var Js=c(h()),pl=c(k());s();i();var ll=c(k());function rx(){let{selectedSat:e,signInfo:o}=(0,ll.useSelector)(os),t;return e.type===Qe.CUSTOM?t=e.satBytes:t=o?.[ac[e.type]],t||0}var Ko=rx;function sx({coinId:e}){let[o,t]=(0,Js.useState)(!0),n=(0,pl.useDispatch)(),r=y(),a=Us({coinId:e}),m=Ko();return(0,Js.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:r,coinAmount:0,serviceCharge:0,feeRate:m})).canTransferAmount||"0"}catch{d="0"}t(!1),n(oo(d))})()},[r,m]),o}var gl=sx;function ix({coinId:e}={}){let o=(0,_l.useDispatch)(),t=It(),n=gl({coinId:e});return(0,Cl.useEffect)(()=>{o(Ce(t?.transferableWithoutSpending))},[t?.transferableWithoutSpending]),n}var Sl=ix;s();i();var On=c(h()),Al=c(k()),Il=c(R());Re();jt();Qt();function ax(){let{coin:e,baseCoin:o}=_(),t=y(),n=(0,Al.useSelector)(Ro),[r,a]=(0,On.useState)({from:1,size:10});return async()=>{let m={utxoType:io.BRC20_CONVERTIBLE,address:t,tick:e.symbol,protocolId:Or(e.chainId)},u={coinId:o.coinId,utxoRequests:[{...m,...r}]},{data:d}=await Bo(po.getBTCUTXO,u,{walletSignParams:{needWalletSign:!0,walletId:n}}),p=(d?.[0]?.utxoList||[]).map(f=>({...f,tokenAmountInt:f.tokenAmount,tokenAmount:$e(f.tokenAmount,10**e.decimals)})),g=p.length===r.size;return g&&a(f=>({...f,from:f.from+1})),{list:p,more:g}}}function mx(){let e=(0,On.useRef)(!0),[o,t]=(0,On.useState)(!0),[n,r]=(0,On.useState)([]),a=ax(),m=async()=>{if(!!e.current){t(!0);try{let{more:u,list:d}=await a();r(p=>[...p,...d]),e.current=u}finally{t(!1)}}};return(0,Il.useMount)(()=>{m()}),{list:n,loading:o,request:m}}var xl=mx;s();i();var Xs={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function cx(){let e=(0,hl.useHistory)(),o=(0,Ys.useDispatch)(),{coin:t,baseCoin:n}=_(),r=(0,Ys.useSelector)(_o),a=al(),m=nl(),u=qo(),d=y(),p=(0,ao.useMemo)(()=>r.reduce((E,{tokenAmount:N})=>fe(E,N),0),[r]),{loading:g,list:f,request:C}=xl(),S=Sl({coinId:n.coinId}),A=f.length>0,I=g||S;fl(),rl(I,f);let{availableWithoutSpending:x,availableWithoutSpendingDisplay:T,availableReceiving:P,availableReceivingDisplay:F}=It();if(f.length===0&&I)return ao.default.createElement("div",{className:Xs.loading},ao.default.createElement(Zt.Circle,{size:Zt.SIZE.xl}));let v=ao.default.createElement(Ss.FooterActions,{usePortal:!0,className:(0,Tl.default)(Xs.inscribeFooter)},ao.default.createElement(ge,{block:!0,type:ge.TYPE.highlight,size:ge.SIZE.lg,onClick:a},b("extension_wallet_btc_btn_inscribe")),ao.default.createElement(ge,{block:!0,type:ge.TYPE.highlight,size:ge.SIZE.lg,disabled:!0},b("wallet_extension_send_btn_continue")));return ao.default.createElement(X,{checkEmpty:!1,inputAmount:p,renderError:m,classes:{content:A?Xs.content:""},slot:{bottom:A?ao.default.createElement(ol,{loading:I,list:f,request:C,onSelected:E=>{o(Po({name:"brc20UtxoList",value:E}))}}):null,footer:f.length===0&&Number(x)>0?v:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{e.push(`${De}/${t.coinId}${cn}?type=${u}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:b("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:ao.default.createElement(ao.default.Fragment,null,(Number(x)>0||Number(P)>0)&&ao.default.createElement(Dn,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:x,availableWithoutSpendingDisplay:T,availableReceiving:P,availableReceivingDisplay:F,goToInscribe:a}))}}})}var yl=cx;s();i();var Pl=c(h()),zs=c(we());function ux(){let{coinId:e}=(0,zs.useParams)(),o=(0,zs.useHistory)(),t=qo(),n=y();return Pl.default.createElement($d,{onConfirm:()=>{o.push(`${De}/${e}${un}?type=${t}&from=${n}`)}})}var bl=ux;var dx={[Ho.SEND]:yl,[Ho.INSCRIBE]:bl};function fx(){let e=qo(),o=dx[e];return o?kl.default.createElement(o,null):null}var Fl=fx;s();i();var Kl=c(h());s();i();var Ge=c(h()),Gt=c(k()),Wl=c(we());V();s();i();var dr=c(h());s();i();var Jo=c(h()),El=c(vo());V();s();i();var Ot={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var lx=(e={})=>{let{address:o,isNeedToSign:t,coinAmount:n,symbol:r}=e;return Jo.default.createElement(W.FlexBox,{justify:"space-between",align:W.ALIGN.center,className:Ot.utxoTextWrap},Jo.default.createElement(W.FlexBox,{align:W.ALIGN.center},Jo.default.createElement(Z.Text,{className:Ot.utxoText,ellipsis:{tooltip:!0}},o),t&&Jo.default.createElement(wr,{className:Ot.badge,color:wr.COLOR.green,type:wr.TYPE.rect},b("extension_wallet_transaction_label_signature"))),Jo.default.createElement(W.FlexBox,{align:W.ALIGN.center,className:(0,El.default)(Ot.utxoText,Ot.utxoTextAmount)},Jo.default.createElement(Z.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),Jo.default.createElement(Z.Text,{inherit:!0,strong:!0,className:Ot.utxoTextSymbol},r)))},wl=(0,Jo.memo)(lx);s();i();var Nl={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var px=({utxos:e})=>dr.default.createElement(W.Box,{className:Nl.utxosBlock},e.map((o={},t)=>{let{address:n,coinAmount:r,isNeedToSign:a,symbol:m}=o;return dr.default.createElement(wl,{key:t,address:n,coinAmount:r,isNeedToSign:a,symbol:m})})),Ua=(0,dr.memo)(px);s();i();var fr=c(k());Ve();Re();s();i();var vl=c(h()),Oa=c(k());le();function gx(e){let o=(0,Oa.useSelector)(Ro),t=y(),n=(0,Oa.useSelector)(_o),r=Ko(),a=w(),m=_s(o);return(0,vl.useCallback)(async u=>{if(!u.length)return null;let d={address:t,feePerB:r,inputs:[...n.map(({txHash:g,vout:f,coinAmount:C})=>({vOut:f,txId:g,amount:C})),...u.map(({txHash:g,vout:f,coinAmount:C})=>({vOut:f,txId:g,amount:C}))],outputs:[...n.map(({coinAmount:g})=>({amount:g,address:a}))]};return await hu(d,t,vr,o,{fake:e===ws.CAL_FEE&&m})},[n,r])}var Bl=gx;function Cx(){let e=(0,fr.useDispatch)(),{coin:o,baseCoin:t}=_(),n=(0,fr.useSelector)(_o),r=y(),a=w(),m=J(),u=K(),d=(0,fr.useSelector)(Ro),p=Pu(d),g=Ue(),C=nc(o)?Ee.BRC20_SEND:Ee.BRC30_SEND,S=Bl(ws.CONFIRM),A=Us({coinId:t?.coinId}),I=Ko(),x=En({address:r,coinId:o.coinId,currencyId:g,txType:C,protocolId:Or(o.chainId)}),T=he({}),P=Yu(d),F=async E=>{try{await P();let N=await S(E.utxoList||[]),D=await Ae(o.localType,N),U=p?.serverWalletType,$={txSource:Lo.NORMAL,toAdr:a,coinId:o.coinId,txHash:D,signedTx:N,walletId:d,serviceCharge:m,fromAdr:r,coinAmount:u,walletType:U,txType:C,extJson:JSON.stringify({nftIds:n.reduce((O,j)=>[...O,...(j.nftLocaltionVOs||[]).map(({nftId:M})=>M)],[])})},H=await T(N,$);ae({tx_id:H})}catch(N){N?.error_message&&je.error(N?.error_message)}};return async()=>{let E=await A({from:r,coinAmount:0,serviceCharge:m,feeRate:I}),N=E.utxoList||[];return e(Po({name:"feeUtxoList",value:N||[]})),await x([...n||[],...N||[]],Fr),await F(E)}}var Ll=Cx;s();i();var Rl=c(k());function _x(){let e=(0,Rl.useDispatch)(),t=[ud()],{runErrorFns:n}=Tn(t);bs(n,r=>{e(gu(r))})}var Dl=_x;s();i();var Ml=c(h()),lr=c(k());function Ul(){let e=(0,lr.useDispatch)(),o=Ma();(0,Ml.useEffect)(()=>{e(Po({name:"signInfo",value:o}))},[o])}function Ol(){let e=Ne(),o=(0,lr.useDispatch)(),t=y(),n=w(),r=ne(),a=Ko(),m=(0,lr.useSelector)(_o),[u,d,p]=vs({coinId:e,toAddr:n,walletId:r,fromAddr:t,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:m},{onSuccess:(g,f)=>{o(q(g)),o(Po({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:u,fee:d,feeError:p}}s();i();var Gl={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function Sx(){let e=y(),o=w(),t=J(),n=(0,Gt.useSelector)(_o),r=(0,Gt.useSelector)(Rc),{baseCoin:a}=_(),m=(p,g)=>p.map(({coinAmount:f})=>({address:la(g),coinAmount:ie(f,{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol})),u=(0,Ge.useMemo)(()=>m([...n,...r],e),[n,r]),d=(0,Ge.useMemo)(()=>{let p=m(n,o),g=r.reduce((f,{coinAmount:C})=>fe(f,C),"0");return Fe(g,t)&&p.push({address:la(e),coinAmount:ie(qe(g,t),{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol}),p},[n,r,t]);return Ge.default.createElement(ko,{space:32},Ge.default.createElement(Dt,{title:b("extension_wallet_transaction_text_input")},Ge.default.createElement(Ua,{utxos:u})),Ge.default.createElement(Dt,{title:b("extension_wallet_transaction_text_output")},Ge.default.createElement(Ua,{utxos:d})))}function Ax(){let e=(0,Gt.useDispatch)(),[o,t]=(0,Ge.useState)(!1),{coinId:n}=(0,Wl.useParams)(),r=Ue(),a=(0,Gt.useSelector)(Dc),m=Ll(),{signInfo:u}=(0,Gt.useSelector)(os),d=xn(),p=Ko(),{feeLoading:g,fee:f,feeError:C}=Ol(),S=$e(f,p),A=x=>{e(Po({name:"selectedSat",value:x}))};Ul(),Dl();let I=u?.transferReminder;return Ge.default.createElement(Ge.default.Fragment,null,Ge.default.createElement(z,{classes:{network:Gl.network},slot:{bottom:Ge.default.createElement(Sx,null)},defaultMessage:I,networkFeeProps:{loading:g,estimateFailed:C,feeLevel:a.type,onClick:()=>{t(!0)}},confirmButtonProps:{onSubmit:m},canTransferAmount:d}),Ge.default.createElement(Zd,{currencyId:r,bytes:S,value:a,coinId:n,signInfo:u,onChange:A,visible:o,onClose:()=>{t(!1)},supportDecimal:!0}))}var Vl=Ax;s();i();var Zs=c(h()),Hl=c(we());function Ix(){let e=(0,Hl.useHistory)(),o=Go();return(0,Zs.useEffect)(()=>{Er(o,"0")&&e.go(-1)},[o]),Zs.default.createElement(jd,{onConfirm:()=>{e.replace(Xr)}})}var ql=Ix;var xx={[Ho.SEND]:Vl,[Ho.INSCRIBE]:ql};function hx(){let e=qo(),o=xx[e];return o?Kl.default.createElement(o,null):null}var Jl=hx;s();i();var Xl=c(h());function Tx({children:e}){let t=no().get("from");return Xl.default.createElement(be,{fromAddress:t},e)}var Yl=Tx;var yx={match:(e,o,t)=>go({coinId:e})&&[G.BRC_20,G.FRACTAL_BRC20].includes(t),Container:Yl,pages:{AddressPage:Fl,AmountPage:zf,ConfirmPage:Jl}},zl=yx;s();i();s();i();var jl=c(h());s();i();var Px=()=>{let{initialType:e}=yu();return async o=>{let{isValid:t}=await ks(o);return t&&Cc(e)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},bx=()=>[Px()],$s=bx;s();i();var Zl=c(R());var kx=()=>{let[e,{setTrue:o,setFalse:t}]=(0,Zl.useBoolean)(!1),n=y(),r=w(),{coin:a,baseCoin:m}=_(),u=hn(),d=vn();return{onClick:async()=>{try{o(),await d({from:n,to:r,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId}),u()}catch{}finally{t()}},loading:e}},$l=kx;var Fx=()=>{let e=$s(),o=Rn(),{onClick:t,loading:n}=$l();return jl.default.createElement(Y,{confirmButtonProps:{onClick:t,loading:n},addressProps:{errorFns:e,extraProps:{filterAddress:o}}})},Ql=Fx;s();i();var yt=c(h());V();Re();s();i();var Xe=c(h()),Tt=c(k());Ve();V();Re();le();s();i();s();i();var ep=(e,o)=>!e||!e.length?"0":e.reduce((n,r)=>{let m=(r.nftLocaltionVOs||[]).reduce((u,d)=>d.nftId===o?fe(u,d.value):u,"0");return fe(n,m)},"0"),Ga=({address:e,amount:o="0",satAmount:t="0",tokenType:n="FT",atomicalId:r},a=546)=>{let m=Fe(t,0)?t:o;return{address:e,amount:vt(m,a)?a:Number(m),data:[{atomicalId:r,type:n,amount:Number(o)}]}},op=(e,o=546)=>!e||e.length===0?!1:e.some(t=>{let n=t?.data?.[0]?.amount;return n===void 0?!1:Le(n,o)}),tp=(e,o=546)=>!e||e.length===0?!1:e.every(t=>{let n=t?.data?.[0]?.amount;return n===void 0?!1:Le(n,o)});var wx=()=>{let e=(0,Tt.useDispatch)(),o=(0,Tt.useSelector)(dn),t=(0,Xe.useCallback)(n=>{e(ss({selectedNetworkFeeLevel:n}))},[]);return[o?.selectedNetworkFeeLevel,t]},Nx=({fromAddr:e,toAddr:o,protocolId:t,minOutput:n,sendAmountInt:r,transferInputs:a})=>{let m=(0,Tt.useDispatch)();return(0,Xe.useMemo)(()=>{if(G.ARC_20!==t)return null;if(!a||a.length===0||L.eq(r,0))return m(_a([])),null;let u=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,p=Ga({address:o,amount:r,tokenType:u,atomicalId:d},n),g=ep(a,d),f=L.sub(g,r),C=Ga({address:e,amount:f,tokenType:u,atomicalId:d},n),S=[];return L.lte(f,0)?S.push(p):L.lt(f,n)?S.push(p,C):L.gte(f,n)&&S.push(C,p),m(_a(S)),S},[t,a,r,o,n,e,m])},vx=({fromAddr:e,toAddr:o,coinTick:t,transferInputs:n,minOutput:r,isXrc20Token:a,protocolId:m,sendAmountInt:u})=>{let d=Nx({fromAddr:e,minOutput:r,protocolId:m,sendAmountInt:u,toAddr:o,transferInputs:n});return(0,Xe.useMemo)(()=>!a||G.SRC_20===m||!n?.length?null:G.ARC_20===m&&d?d:G.RUNES===m?[{address:o,amount:r,data:{id:t,amount:u}}]:G.RUNEMAIN===m||G.FRACTAL_RUNES?[{address:o,amount:r,data:{id:t,amount:u}}]:[{address:o,amount:Number(u),...Id(n[0],m)}],[t,a,r,m,u,o,n,d])},Bx=({coin:e,coinId:o,walletId:t,protocolId:n,tick:r,address:a,coinAmount:m,isXrc20Token:u})=>{let[,d]=Ns({coinId:o,walletId:t,protocolId:n,tick:r,address:a,coinAmount:m,utxoType:io.BRC20_CONVERTIBLE},{ready:e&&u&&n!==G.SRC_20});return[null,d]},Lx=({coinId:e,isXrc20Token:o,sendAmountInt:t,protocolId:n,inscriptionOutput:r})=>(0,Xe.useMemo)(()=>e===22?546:o?n===G.SRC_20?r||790:"0":t,[e,o,t,n,r]),Rx=({coin:e,isXrc20Token:o,protocolId:t,satBytes:n,transferInputs:r})=>(0,Xe.useMemo)(()=>!e||!n?!1:!(t&&o&&t!==G.SRC_20&&!r?.length),[e,o,t,n,r?.length]),Dx=({coin:e,protocolId:o})=>(0,Xe.useMemo)(()=>{if(e?.address&&[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(o))return Im(e?.address?.split("-"))},[e?.address,o]),Mx=({coin:e,isXrc20Token:o,protocolId:t,sendAmount:n})=>(0,Xe.useMemo)(()=>{if(o&&t===G.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:e?.name,amt:n})}},[e?.name,o,t,n]),Ux=({coinId:e,walletId:o,satBytes:t,address:n,isXrc20Token:r,coinBalance:a})=>{let m=(0,Tt.useDispatch)(),[u,d]=rr({coinId:e,walletId:o,satBytes:t,address:n},{onSuccess:p=>{m(e!==22&&!r?Ce(p):Ce(a?.coinAmountInt)),m(oo(p))}});return[u,d]},Ox=({coinId:e,walletId:o,protocolId:t,tick:n,address:r})=>{let a=(0,Tt.useDispatch)(),[m,u]=rr({coinId:e,walletId:o,protocolId:t,tick:n,address:r,coinAmount:"0",utxoType:io.BRC20_CONVERTIBLE},{ready:[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(t),onSuccess:d=>{a(Ce(d))}});return[m,u]},Gx=({coinId:e,toAddr:o,walletId:t,fromAddr:n,satBytes:r,inputs:a,outputs:m,networkFee:u,revealOutValue:d,coinAmount:p,utxoParams:g,inscriptionData:f,isXrc20Token:C,availableFeeCoinAmountInt:S,availableSendCoinAmountInt:A,sendAmountInt:I},{ready:x,networkFeeInt:T})=>{let P=(0,Tt.useDispatch)(),[F,v,E]=vs({coinId:e,toAddr:o,walletId:t,fromAddr:n,satBytes:r,inputs:a,outputs:m,networkFee:u,revealOutValue:d,coinAmount:p,utxoParams:g,inscriptionData:f,canTransferAmount:e===22||C?S:A,...e===22?{omni:{coinType:31,amount:I}}:{}},{ready:x,onSuccess:N=>{Math.abs(Number(L.sub(N,T)))!==parseInt(r,10)&&(P(q(N)),P(B(!1)))},onError:N=>{P(B(N))}});return[F,v,E]},Wx=()=>{let e=Ne(),o=y(),t=w(),n=ne(),r=to(e),a=r?.protocolId,m=xd(a),u=r?.baseCoinId||e,d=tt(o,n,r?.localType),p=Go(),g=J(),f=K(),C=xn(),S=Ke(),A=ys(),[,I]=bo({protocolId:a,coinId:e,address:o,chainId:r?.chainId}),{inscriptionOutput:x,minOutput:T}=I||{},[P,F]=wx(),v=P?.satBytes;(0,Xe.useEffect)(()=>{if(!v&&I?.normal&&F({level:Qe.STANDARD,satBytes:I?.normal}),v&&P?.level!==Qe.CUSTOM){let Nt=I[sr[P?.level]?.satBytes];F({...P,satBytes:Nt})}},[I]);let E=Me(e,void 0,{addressType:d}),N=Lx({coinId:e,isXrc20Token:m,sendAmountInt:f,protocolId:a,inscriptionOutput:x}),D=Dx({coin:r,protocolId:a}),[,U]=Bx({coin:r,coinId:e,walletId:n,protocolId:a,tick:D,address:o,coinAmount:f,isXrc20Token:m}),$=vx({fromAddr:o,toAddr:t,coinTick:D,transferInputs:U,minOutput:T,isXrc20Token:m,protocolId:a,sendAmountInt:f}),H=(0,Xe.useMemo)(()=>{if(U?.length)return U.map(({txHash:Nt,vout:zn})=>`${Nt}-${zn}`)},[U]),O=Rx({coin:r,isXrc20Token:m,protocolId:a,satBytes:v,transferInputs:U}),j=Mx({coin:r,isXrc20Token:m,protocolId:a,sendAmount:p}),M=(0,Xe.useMemo)(()=>a===G.SRC_20?{protocolId:a,utxoType:io.BRC20_CONVERTIBLE}:{utxoType:io.TRANSFER,needFilteredUtxo:[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(a)?H:void 0},[H,a]),[re,de]=Ux({coinId:e,walletId:n,satBytes:v,address:o,isXrc20Token:m,coinBalance:E}),[se,We]=Ox({coinId:e,walletId:n,protocolId:a,tick:D,address:o}),[co,,uo]=Gx({coinId:e,toAddr:t,walletId:n,fromAddr:o,satBytes:v,inputs:U,outputs:$,networkFee:g,revealOutValue:x,coinAmount:N,utxoParams:M,inscriptionData:j,isXrc20Token:m,availableFeeCoinAmountInt:C,availableSendCoinAmountInt:A,sendAmountInt:f},{ready:O,networkFeeInt:g}),Et=(0,Xe.useMemo)(()=>[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(a)?de===void 0||We===void 0:de===void 0,[de,a,We]),wt=(0,Xe.useMemo)(()=>r?.chainId!==$m&&r?.chainId!==jm||e===22?!1:r&&!a?!0:G.RUNEMAIN===a,[r,e,a]);return{coin:r,toAddr:t,coinId:e,walletId:n,signInfo:I,feeError:uo,fromAddr:o,protocolId:a,baseCoinId:u,feeLoading:co,addressType:d,sendAmountInt:f,networkFeeInt:g,transferInputs:U,transferOutputs:$,isXrc20Token:m,utxoParams:M,initLoading:Et,mergedCoinAmount:N,src20InscriptionData:j,sendCoinAvailableAmount:S,availableSendCoinAmountInt:A,availableFeeCoinAmountInt:C,selectedNetworkFeeLevel:P,setSelectedNetworkFeeLevel:F,loading:re||co||se,supportDecimal:wt}},js=Wx;s();i();var ap=c(h());V();Re();s();i();var sp=c(h());V();s();i();s();i();var np=c(k());var rp=()=>(0,np.useSelector)(dn).transferOutputs;var ip=({isArc20Token:e,sendCoinBalance:o,doubleMinOutput:t,minOutput:n,coin:r})=>{let a=rp();return(0,sp.useCallback)(m=>e?L.lte(o,t)&&m!==o?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:o,token:r?.symbol},type:te.COMMON_ERROR}:tp(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:te.COMMON_ERROR}:op(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:te.COMMON_TIP}:null:null,[e,o,t,n,r,a])};var mp=e=>{let o=Ne(),t=to(o),n=t?.baseCoinId===0,a=t?.protocolId===G.ARC_20,m=L.div(e,10**t?.decimals),u=Ke(),d=L.mul(m,2),p=ip({isArc20Token:a,sendCoinBalance:u,doubleMinOutput:d,minOutputFloat:m,minOutput:e,coin:t});return(0,ap.useCallback)(g=>{if(!e)return null;let f=p(g);return f||(n&&L.lt(g,m)?{key:"wallet_extension_send_transfer_at_least",args:{amount:ie(m,{precision:t.displayPrecision,useLargeNumberPrecision:!0,isStableCoin:t.stableCoin,roundingMode:"CEIL",symbol:t?.symbol}).value},type:te.COMMON_ERROR}:null)},[e,p,n,m,t?.symbol])},cp=e=>{let o=mp(e);Q([o])},up=e=>{let o=mp(e);oe([o])};s();i();var mo=c(h());V();var Vx=()=>{let e=Oo(),{coin:o}=_();return(0,mo.useCallback)(n=>{let r="";return n.key&&(r=b(n?.key,n?.args)),n?.type===te.BALANCE_INSUFFICIENT?mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(W.Box,{className:ve.wrap},r),mo.default.createElement(W.Box,{className:ve.wrap},mo.default.createElement(St,{coin:o,receiveOnly:!0}))):n?.type===te.FEE_BALANCE_INSUFFICIENT?mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(W.Box,{className:ve.wrap},r),mo.default.createElement(W.Box,{className:ve.wrap},mo.default.createElement(St,{coin:e}))):r},[o,e])},dp=Vx;s();i();var fp={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function Hx(){let{coin:e,coinId:o,signInfo:t,initLoading:n,addressType:r,fromAddr:a}=js(),{receivedPendingBalance:m,receivedPendingBalanceDisplay:u}=It(),{lockedAmount:d}=zd(a,e),p=ie(d,{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},useLargeNumberPrecision:!0,precision:e.displayPrecision,isStableCoin:e.stableCoin}).value;cp(t?.minOutput);let g=dp(),f=(0,yt.useMemo)(()=>go({coinId:o})?b("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:e?.symbol}):e?.protocolId===G.SRC_20?b("extension_defi_tooltip_text_balance_udpate"):e?.protocolId===G.ARC_20?b("extension_defi_tooltip_text_utxo_exclude"):e?.protocolId===G.RUNEMAIN||e?.protocolId===G.FRACTAL_RUNES?b("extension_defi_hover_text_avail_balance"):null,[e?.protocolId,e?.symbol,o]);return yt.default.createElement(X,{isGlobalLoading:n,renderError:g,totalAmountProps:{type:"amount",title:yt.default.createElement(yt.default.Fragment,null,b("extension_defi_text_available_balance"),!!f&&yt.default.createElement(Ao,{size:Ao.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:fp["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(m)>0?yt.default.createElement(Dn,{lockedAmount:d,lockedAmountDisplay:p,pendingXrc:m,pendingXrcDisplay:u,addressType:r,coinId:o}):void 0}}})}var lp=Hx;s();i();var ho=c(h()),ei=c(k()),pp=c(we()),oi=c(R()),gp=c(Cu());V();Re();oc();var qx=546;function Kx(){let e=(0,pp.useHistory)(),o=(0,ei.useDispatch)(),[t,{toggle:n}]=(0,oi.useBoolean)(!1),{coin:r,coinId:a,toAddr:m,loading:u,walletId:d,fromAddr:p,signInfo:g,utxoParams:f,protocolId:C,baseCoinId:S,feeLoading:A,addressType:I,isXrc20Token:x,networkFeeInt:T,sendAmountInt:P,transferInputs:F,transferOutputs:v,mergedCoinAmount:E,availableFeeCoinAmountInt:N,selectedNetworkFeeLevel:D,setSelectedNetworkFeeLevel:U,src20InscriptionData:$,supportDecimal:H}=js(),O=Ue(),j=(0,ei.useSelector)(fs),M=Ur[r?.localType]?.[I],{showManageUTXO:re}=Os(r,M,!0);up(g?.minOutput,a);let de=_s(d),[se,We]=(0,ho.useState)(!1),co=(0,oi.useMemoizedFn)(jo=>re&&[wn.BALANCE_INSUFFICIENT,wn.FEE_BALANCE_INSUFFICIENT].includes(jo)?[{onClick:async()=>{await o(An(!1));let Kt=gp.default.stringify({addressType:I,coinId:S},{skipEmptyString:!0,skipNull:!0}),ia=Kt?`?${Kt}`:"";e.push(Yr+ia)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),uo=nr({coinId:a,walletId:d,address:p,utxoType:io.TRANSFER,satBytes:D?.satBytes,...f}),Et=yd({coinId:a,toAddr:m,walletId:d,fromAddr:p,protocolId:C,networkFee:T,localType:r?.localType,outputs:v,inscriptionData:$,dustSize:x?void 0:g?.minOutput,satBytes:D?.satBytes,coinAmount:a===22?qx:P,...a===22?{omni:{coinType:31,amount:P}}:{},extraPublishParams:{coinAmount:P,txType:x?Ee.BRC20_SEND:Ee.TRANS_OUT}}),wt=En({coinId:a,currencyId:O,txType:x?Ee.BRC20_SEND:Ee.TRANS_OUT,protocolId:C,address:p}),Nt=(0,ho.useCallback)(async()=>{let jo=[];jo=await uo(E,T),jo=[...F||[],...jo],await wt(jo,()=>{e.goBack()}),We(!0);let Kt=await Et({utxoList:jo});return ae({tx_id:Kt}),Kt},[uo,E,T,F,wt,Et,e,j]),zn=(0,ho.useMemo)(()=>[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(C)&&!F?.length?!0:u,[u,C,F?.length]);return ho.default.createElement(ho.default.Fragment,null,ho.default.createElement(z,{addressType:I,confirmButtonProps:{disabled:zn,onSubmit:Nt},networkFeeProps:{onClick:n,loading:A,feeLevel:D?.level},renderTipActions:co,defaultMessage:go({coinId:S})&&g?.transferReminder,canTransferAmount:go({coinId:S})&&N}),ho.default.createElement(Rs,{visible:t,coinId:S,signInfo:g,currencyId:O,estimatedFee:T,value:D,onChange:U,onToggleVisible:n,supportDecimal:H}),ho.default.createElement(Gd,{visible:de&&se}))}var Cp=Kx;s();i();var _p=c(h());function Jx({children:e}){let t=no().get("from");return _p.default.createElement(be,{fromAddress:t},e)}var Sp=Jx;var Xx={match:e=>Ic(e),Container:Sp,pages:{AddressPage:Ql,AmountPage:lp,ConfirmPage:Cp}},Ap=Xx;s();i();Re();s();i();var yp=c(h());s();i();var Ip=c(h());var Yx=()=>{let e=Rn(),o=t=>t.filter(r=>/^(bc1p)/.test(r.address));return(0,Ip.useCallback)(t=>e(t).map(a=>({...a,list:o(a?.list)})).filter(a=>a?.list?.length),[e])},xp=Yx;s();i();var ti=c(we()),hp=c(R());V();var zx=()=>{let[e,{setTrue:o,setFalse:t}]=(0,hp.useBoolean)(!1),n=y(),r=w(),{coin:a,baseCoin:m}=_(),u=vn(),{coinId:d}=(0,ti.useParams)(),p=(0,ti.useHistory)();return{onClick:async()=>{try{o(),await u({from:n,to:r,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId});let{isValid:f}=await ks(r);if(f)p.push(`${De}/${d}${cn}?from=${n}`);else{let C=fo.warn({alignBottom:!1,title:b("wallet_extension_cat_dialog_title_risk_non_taproot"),text:b("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:b("wallet_extension_cat_icu_taproot")}),confirmText:b("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{C.destroy()}})}}catch{}finally{t()}},loading:e}},Tp=zx;var Zx=()=>{let{onClick:e,loading:o}=Tp(),t=xp(),n=$s();return yp.default.createElement(Y,{addressProps:{errorFns:n,extraProps:{filterAddress:t}},confirmButtonProps:{onClick:e,loading:o}})},Pp=Zx;s();i();var Eo=c(h()),Op=c(k()),Va=c(vo());V();s();i();var bp=c(h());V();var $x=e=>{let o=Ne(),t=to(o),n=Go();return(0,bp.useCallback)(()=>L.gt(n,e)?{key:"wallet_extension_cat_max_send_utxo",args:{num:ie(e,{useLargeNumberPrecision:!0,precision:t.displayPrecision,isStableCoin:t.stableCoin}).value,token:t?.symbol},type:te.COMMON_ERROR}:null,[t?.symbol,e,n])},kp=e=>{let o=$x(e);Q([o])},Fp=()=>{oe()};s();i();var ro=c(h()),Pt=c(k()),Wa=c(R());V();Re();jt();Qt();var Ep=()=>{let e=(0,Pt.useDispatch)(),o=(0,Pt.useSelector)(dn),t=(0,ro.useCallback)(n=>{e(ss({selectedNetworkFeeLevel:n}))},[]);return[o?.selectedNetworkFeeLevel,t]},wp=({coin:e,coinId:o,walletId:t,protocolId:n,tick:r,address:a})=>{let[,m]=Ns({coinId:o,walletId:t,protocolId:n,tick:r,address:a,coinAmount:"0",utxoType:io.BRC20_CONVERTIBLE},{ready:e?.coinId});return[null,m]},Np=({coin:e})=>(0,ro.useMemo)(()=>{if(!e?.address)return;let o=e.address.indexOf("_"),t=e.address.indexOf("_",o+1);return e.address.slice(t+1)},[e?.address]),vp=({coinId:e,walletId:o,satBytes:t,address:n,coinBalance:r})=>{let a=(0,Pt.useDispatch)(),[m,u]=rr({coinId:e,walletId:o,satBytes:t,address:n},{onSuccess:d=>{a(Ce(r?.coinAmountInt)),a(oo(d))}});return[m,u]},Bp=({UTXOList:e,coin:o})=>{if(!e||e.length===0)return"0";let t=e.slice(0,4).reduce((n,r)=>{let a=r?.tokenAmount;return L.add(n,a)},"0");return L.div(t,10**o?.decimals)},jx=({sendAmountInt:e,UTXOList:o})=>(0,ro.useMemo)(()=>{if(!o||!Number(e))return[];let t=[],n="0";for(let r=0;r<o.length;r++){let a=o[r],m=a?.tokenAmount;if(n=L.add(n,m),t.push(a),L.gte(n,e))break}return t},[o,e]),Qx=({selectedUtxo:e,signInfo:o,chainIndex:t,walletId:n})=>{let r=o?.extInfo?.tokenAddr,a=o?.extInfo?.minterAddr,m=(0,Pt.useDispatch)(),{error:u,loading:d,data:p}=(0,Wa.useRequest)(async()=>{if(!e||e.length===0)return[];if(!r||!a)return[];let g=e.map(S=>({txHash:S.txHash,tokenAddress:r,minterAddress:a,chainIndex:t})),C=(await Bo(po.getCat20GrandFatherRawTx,{rawTxRequestList:g},{walletSignParams:{needWalletSign:!0,walletId:n}}))?.data;if(C&&!C.find(S=>S.txStatus!==0))return C;throw m(B(!0)),vm.error({title:b("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[e]});return[u,d,p]},eh=({signInfo:e,selectedUtxo:o,grandFatherRawTxs:t,address:n})=>(0,ro.useMemo)(()=>{if(!e||!t||!t.length)return null;let r=e?.extInfo,a={minterAddr:r?.minterAddr,tokenAddr:r?.tokenAddr,info:{max:r?.max,name:r?.name,limit:r?.limit,symbol:r?.symbol,premine:"0",decimals:r?.decimals,minterMd5:r?.minterMd5},tokenId:r?.tokenId,revealTxid:r?.revealTxid,revealHeight:r?.revealHeight,genesisTxid:r?.genesisTxid,name:r?.name,symbol:r?.symbol,decimals:r?.decimals,minterPubKey:r?.minterPubKey,tokenPubKey:r?.tokenPubKey},m=o.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:r?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:n,amount:d.tokenAmount}})),u=t.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:m,tokenPrevTxs:u}},[e,t,o,n]),oh=({coinId:e,fromAddr:o,toAddr:t,satBytes:n,coinAmount:r,protocolId:a,CAT20TxParam:m,networkFeeInt:u,walletId:d,...p})=>{let g=(0,Pt.useDispatch)(),f=hd({coinId:e,fromAddr:o,toAddr:t,satBytes:n,coinAmount:r,protocolId:a,...p}),C=nr({coinId:e,address:o,walletId:d,utxoType:io.TRANSFER}),S=async()=>{g(ce(!0));let x=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],T=JSON.stringify(m?.tokenMetadata),P=JSON.stringify(m?.tokens),F=m?.tokenPrevTxs,{commitTx:v,revealTx:E}=await f({feeInputs:x,tokenMetadata:T,tokens:P,tokenPrevTxs:F}),N=L.add(v,E);if(x=await C(N),x=x.map(O=>({txId:O.txHash,vOut:O.vout,amount:O.coinAmount})),x.length===1)return g(ce(!1)),{mergeTx:"0",commitTx:v,revealTx:E};let D=await f({feeInputs:x,tokenMetadata:T,tokens:P,tokenPrevTxs:F}),U=D.mergeTx,$=L.add(U,N),H=x.reduce((O,j)=>{let M=j?.amount;return L.add(O,M)},"0");for(;L.lt(H,$);)x=await C($),x=x.map(O=>({txId:O.txHash,vOut:O.vout,amount:O.coinAmount})),H=x.reduce((O,j)=>{let M=j?.amount;return L.add(O,M)},"0"),D=await f({feeInputs:x,tokenMetadata:T,tokens:P,tokenPrevTxs:F}),U=D.mergeTx,$=L.add(U,N);return g(ce(!1)),{mergeTx:U,commitTx:v,revealTx:E}},{error:A,data:I}=(0,Wa.useRequest)(async()=>await S(),{debounceWait:500,ready:!!n&&!!m,refreshDeps:[n],onSuccess:x=>{let T=L.add(L.add(x.mergeTx,x.commitTx),x.revealTx);Math.abs(Number(L.sub(T,u)))!==parseInt(n,10)&&(g(q(T)),g(B(!1)))},onError:x=>{g(B(x))}});return[A,I]},Lp=()=>{let e=Ne(),o=y(),t=ne(),n=to(e),r=n?.protocolId,a=tt(o,t,n?.localType),m=K(),u=Ke(),d=(0,ro.useMemo)(()=>ie(u,{precision:n?.decimals}).value,[u,n?.decimals]),[,p]=bo({protocolId:r,coinId:e,address:o,chainId:n?.chainId}),[g,f]=Ep(),C=g?.satBytes;(0,ro.useEffect)(()=>{if(!C&&p?.normal&&f({level:Qe.STANDARD,satBytes:p?.normal}),C&&g?.level!==Qe.CUSTOM){let v=p[sr[g?.level]?.satBytes];f({...g,satBytes:v})}},[p]);let S=Me(e,void 0,{addressType:a}),A=Np({coin:n}),[,I]=wp({coin:n,coinId:e,walletId:t,protocolId:r,tick:A,address:o,coinAmount:m}),x=Bp({coin:n,UTXOList:I}),[T,P]=vp({coinId:e,walletId:t,satBytes:C,address:o,coinBalance:S}),F=(0,ro.useMemo)(()=>P===void 0,[P]);return{initLoading:F,loading:T||F,sendCoinAvailableAmount:u,CAT20CanTransferAmount:x,displaySendCoinAvailableAmount:d}},Rp=()=>{let e=Ne(),o=y(),t=w(),n=ne(),r=to(e),a=r?.protocolId,m=r?.baseCoinId||e,u=tt(o,n,r?.localType),d=Go(),p=J(),g=K(),f=xn(),C=Ke(),S=ys(),[,A]=bo({protocolId:a,coinId:e,address:o,chainId:r?.chainId}),[I,x]=Ep(),T=I?.satBytes,P=(0,Pt.useDispatch)();(0,ro.useEffect)(()=>{P(ce(!0))},[P]),(0,ro.useEffect)(()=>{if(!T&&A?.normal&&x({level:Qe.STANDARD,satBytes:A?.normal}),T&&I?.level!==Qe.CUSTOM){let se=A[sr[I?.level]?.satBytes];x({...I,satBytes:se})}},[A]);let F=Me(e,void 0,{addressType:u}),v=Np({coin:r}),[,E]=wp({coin:r,coinId:e,walletId:n,protocolId:a,tick:v,address:o,coinAmount:g}),N=Bp({coin:r,UTXOList:E}),D=jx({sendAmountInt:g,UTXOList:E}),[U,$,H]=Qx({selectedUtxo:D,signInfo:A,chainIndex:r?.chainId,walletId:n}),O=eh({signInfo:A,selectedUtxo:D,grandFatherRawTxs:H,address:o}),[,j]=oh({coinId:e,fromAddr:o,toAddr:t,satBytes:T,coinAmount:g,protocolId:a,CAT20TxParam:O,networkFeeInt:p,walletId:n}),[M,re]=vp({coinId:e,walletId:n,satBytes:T,address:o,coinBalance:F}),de=(0,ro.useMemo)(()=>re===void 0,[re]);return{coin:r,toAddr:t,coinId:e,walletId:n,signInfo:A,satBytes:T,fromAddr:o,protocolId:a,baseCoinId:m,addressType:u,sendAmount:d,sendAmountInt:g,networkFeeInt:p,feeData:j,selectedUtxo:D,initLoading:de,rawTxError:U,sendCoinAvailableAmount:C,availableSendCoinAmountInt:S,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:I,setSelectedNetworkFeeLevel:x,CAT20CanTransferAmount:N,CAT20GrandFatherRawTxs:H,CAT20TxParam:O,loading:M||$}},Dp=({coinId:e,toAddr:o,fromAddr:t,satBytes:n,walletId:r,localType:a,networkFee:m,coinAmount:u,coinAmountInt:d,protocolId:p,dustSize:g=Ad,feeData:f,CAT20TxParam:C,history:S,...A})=>{let I=to(e),x=Ue(),T=ne(),P=r||T,F=Sc(a),v=nr({coinId:e,address:t,utxoType:io.TRANSFER,walletId:P}),E=En({coinId:e,currencyId:x,txType:Ee.BRC20_SEND,protocolId:p,address:t}),N=Td({coinId:e,toAddr:o,walletId:r,fromAddr:t,satBytes:n,localType:F,coinAmount:d,networkFee:m,dustSize:g,protocolId:p,...A}),D=Xu({walletId:P});return(0,ro.useCallback)(async()=>{let U=await v(m),$=U.map(aa=>({txId:aa.txHash,vOut:aa.vout,amount:aa.coinAmount}));await E(U,()=>{S.goBack()});let H=JSON.stringify(C?.tokenMetadata),O=JSON.stringify(C?.tokens),j=C?.tokenPrevTxs,M=await N({feeInputs:$,tokenMetadata:H,tokens:O,tokenPrevTxs:j}),{mergeTx:re,commitTx:de,revealTx:se}=M,We=[],co=JSON.stringify({protocolId:G.CAT20,broadcastType:1,nftIds:[]}),uo,Et=await Ae(a,de),wt=await Ae(a,se);re&&(uo=await Ae(a,re));let Nt={signedTx:re,fromAdr:t,toAdr:t,serviceCharge:f.mergeTx,coinAmount:"0",coinId:I?.baseCoinId,txHash:uo,txType:Ee.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:co},zn={signedTx:de,fromAdr:t,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:I?.baseCoinId,txHash:Et,txType:Ee.CAT20_NOT_SHOWN,dependTx:uo?[uo]:[],itemId:"commitTx",extJson:co},jo={signedTx:se,fromAdr:t,toAdr:o,serviceCharge:f.revealTx,coinAmount:d,coinId:e,txHash:wt,txType:Ee.BRC20_SEND,dependTx:[Et],itemId:"revealTx0",extJson:co};re&&We.push(Nt),We.push(zn,jo);let ia=(await D(We))[wt];ae({tx_id:ia})},[v,m,E,C?.tokenMetadata,C?.tokens,C?.tokenPrevTxs,N,a,t,f,I?.baseCoinId,o,d,e,D,S])};s();i();var Se=c(h()),Mp=c(vo());V();var th=()=>{let e=Oo(),{coin:o}=_();return(0,Se.useCallback)(n=>{let r="";if(n.key&&(r=b(n?.key,n?.args)),n?.type===te.BALANCE_INSUFFICIENT)return Se.default.createElement(Se.default.Fragment,null,Se.default.createElement(W.Box,{className:ve.wrap},r),Se.default.createElement(W.Box,{className:ve.wrap},Se.default.createElement(St,{coin:o,receiveOnly:!0})));if(n?.type===te.FEE_BALANCE_INSUFFICIENT)return Se.default.createElement(Se.default.Fragment,null,Se.default.createElement(W.Box,{className:ve.wrap},r),Se.default.createElement(W.Box,{className:ve.wrap},Se.default.createElement(St,{coin:e})));let a=()=>{fo.action({title:" ",children:Se.default.createElement("div",{className:ve.dlgContainer},Se.default.createElement("div",{className:ve.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Se.default.createElement("div",{className:ve.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Se.default.createElement("div",{className:(0,Mp.default)(ve.dlgTitle,ve.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Se.default.createElement("div",{className:ve.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:m=>{m.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?Se.default.createElement(Se.default.Fragment,null,Se.default.createElement(W.Box,{className:ve.wrap},r,Se.default.createElement(zt,{className:"okx-wallet-plugin-information-circle",onClick:a}))):r},[o,e])},Up=th;s();i();var Xo={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function nh(){let{initLoading:e,loading:o,sendCoinAvailableAmount:t,CAT20CanTransferAmount:n,displaySendCoinAvailableAmount:r}=Lp();kp(n);let a=Up(),m=(0,Op.useDispatch)(),u=bn(),d=()=>{m(pu(!1)),u()},p=()=>{fo.action({title:" ",children:Eo.default.createElement("div",{className:Xo.dlgContainer},Eo.default.createElement("div",{className:Xo.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Eo.default.createElement("div",{className:Xo.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Eo.default.createElement("div",{className:(0,Va.default)(Xo.dlgTitle,Xo.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Eo.default.createElement("div",{className:Xo.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return Eo.default.createElement(X,{isGlobalLoading:e,renderError:a,customMaxAmount:n,confirmButtonProps:{loading:o,onClick:d},totalAmountProps:{maxAmount:n,type:"amount",title:Eo.default.createElement("div",{className:Xo.canTransferContainer},Eo.default.createElement("div",{className:Xo.canTransferText},b("wallet_extension_cat_desc_available_utxo")),Eo.default.createElement(zt,{className:(0,Va.default)(Xo.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:p})),slot:{bottom:Eo.default.createElement(Dn,{catTotalAmount:t,catTotalAmountDisplay:r})}}})}var Gp=nh;s();i();var rt=c(h()),Wp=c(k()),Vp=c(we()),ni=c(R()),Hp=c(Cu());V();oc();function rh(){let e=(0,Vp.useHistory)(),o=(0,Wp.useDispatch)(),[t,{toggle:n}]=(0,ni.useBoolean)(!1),{coin:r,coinId:a,toAddr:m,loading:u,walletId:d,fromAddr:p,signInfo:g,satBytes:f,sendAmount:C,sendAmountInt:S,protocolId:A,baseCoinId:I,addressType:x,networkFeeInt:T,feeData:P,selectedUtxo:F,availableFeeCoinAmountInt:v,selectedNetworkFeeLevel:E,setSelectedNetworkFeeLevel:N,CAT20TxParam:D}=Rp(),U=Dp({coinId:a,toAddr:m,fromAddr:p,satBytes:f,walletId:d,feeData:P,localType:r?.localType,networkFee:T,coinAmount:C,coinAmountInt:S,protocolId:A,CAT20TxParam:D,history:e}),$=Ue(),H=Ur[r?.localType]?.[x],{showManageUTXO:O}=Os(r,H,!0);Fp();let j=(0,ni.useMemoizedFn)(de=>O&&[wn.BALANCE_INSUFFICIENT,wn.FEE_BALANCE_INSUFFICIENT].includes(de)?[{onClick:async()=>{await o(An(!1));let se=Hp.default.stringify({addressType:x,coinId:I},{skipEmptyString:!0,skipNull:!0}),We=se?`?${se}`:"";e.push(Yr+We)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),M=(0,rt.useCallback)(async()=>{await U()},[U]),re=(0,rt.useMemo)(()=>!F?.length||u,[u,F?.length]);return rt.default.createElement(rt.default.Fragment,null,rt.default.createElement(z,{addressType:x,confirmButtonProps:{disabled:re,onSubmit:M},networkFeeProps:{onClick:n,feeLevel:E?.level},renderTipActions:j,defaultMessage:go({coinId:I})&&g?.transferReminder,canTransferAmount:go({coinId:I})&&v}),rt.default.createElement(Rs,{visible:t,coinId:I,signInfo:g,currencyId:$,estimatedFee:T,value:E,onChange:N,onToggleVisible:n}))}var qp=rh;s();i();var Kp=c(h());function sh({children:e}){let t=no().get("from");return Kp.default.createElement(be,{fromAddress:t},e)}var Jp=sh;var ih={match:(e,o,t)=>go({coinId:e})&&[G.CAT_20].includes(t),Container:Jp,pages:{AddressPage:Pp,AmountPage:Gp,ConfirmPage:qp}},Xp=ih;s();i();le();s();i();var ig=c(h()),ii=c(k()),qa=c(R());V();s();i();Ve();V();ca();var Yp=(e,o)=>{let[t,n]=e?.split("-");return[{policyId:t,assets:[{amount:o,assetName:n}]}]},ah=(e,o)=>ym(hm([...e,...o],"assetName")).map(n=>{let r=e.find(m=>m?.assetName===n),a=o.find(m=>m?.assetName===n);return{assetName:n,amount:L.add(r?.amount||0,a?.amount||0)}}),mh=e=>{let o=e.reduce((n,r)=>{let{multiAsset:a}=r;return a?.length?[...n,...a]:n},[]),t=[];return o.forEach(n=>{let{policyId:r,assets:a}=n,m=xm(t,{policyId:r});if(m!==-1){let{assets:u}=t[m];t[m]={policyId:r,assets:ah(a,u)}}else t=[...t,n]}),t},zp=async({toAddr:e,utxoList:o,baseCoinId:t,sendAmountInt:n,contractAddress:r})=>{let a=await $n(),{AdaWallet:m}=a,u;return t===0&&o?.some(({multiAsset:d})=>!!d?.length)?u=mh(o):t!==0&&(u=Yp(r,n)),m.minAda(e,u)},Zp=async e=>{let o=await $n(),{AdaWallet:t}=o;return t.minFee(e)},ch="999999999",uh="transfer",ri=({toAddr:e,utxoList:o,fromAddr:t,sendAmount:n,baseCoinId:r,contractAddress:a,minTransferAmountInt:m})=>{let u={address:e,inputs:o,ttl:ch,type:uh,changeAddress:t};return r===0?u={...u,amount:n}:u={...u,amount:m,multiAsset:Yp(a,n)},u};s();i();var $p=c(h()),jp=c(R());var dh=({utxoList:e,toAddr:o,fromAddr:t,coinId:n,sendAmount:r,minTransferAmountInt:a},m)=>{let u=to(n),[d,p]=(0,$p.useState)("0");return(0,jp.useDeepCompareEffect)(()=>{(async()=>{if(!e?.length)return;let g=ri({toAddr:o,fromAddr:t,utxoList:e,contractAddress:u?.address,baseCoinId:u?.baseCoinId,sendAmount:r,minTransferAmountInt:a});try{let f=await Zp({data:g});m?.(f),p(f)}catch{m?.("0",!0),p("0")}})()},[u,o,t,r,a,e]),d},Qp=dh;s();i();var eg=c(we());var fh=()=>{let{coinId:e}=(0,eg.useParams)(),o=y(),t=ne(),[n,r]=Eu(e);return{address:o,walletId:t,coin:n||{},coinId:Number(e),baseCoin:r||{},baseCoinId:n?.baseCoinId}},Gn=fh;s();i();var tg=c(h()),ng=c(R());s();i();var og=c(R());V();jt();Qt();var lh=()=>{let e=Ct(),{coin:o,coinId:t,walletId:n,address:r}=Gn(),a=o?.baseCoinId;return(0,og.useMemoizedFn)(async(m,u,d)=>{let p=u,g=m,f=L.add(L.add(a===0?m:d,u),d);a===0&&L.gte(f,e)&&(g=e,p="0"),a!==0&&(p=L.add(u,L.add(d,d)));let C={coinId:t,address:r,fee:p,amount:g},{data:S}=await Bo(po.getSpecialUtxoList,C,{walletSignParams:{needWalletSign:!0,walletId:n}});return S})},si=lh;var ph=(e,o,t)=>{let[n,r]=(0,tg.useState)([]),a=si();return(0,ng.useDeepCompareEffect)(()=>{(async()=>{let m=await a(e,o,t);r(m)})()},[e,o,t,a]),n},rg=ph;s();i();var Ha=c(R());V();var gh=e=>{let o=_(),{coin:{symbol:t,baseCoinId:n,decimals:r,stableCoin:a,displayPrecision:m}}=o,u=L.div(e,10**r);return(0,Ha.useMemoizedFn)(d=>n===0&&L.gt(u,0)&&L.lt(d,u)?{key:"wallet_extension_send_transfer_at_least",args:{amount:ie(u,{useLargeNumberPrecision:!0,precision:m,isStableCoin:a,roundingMode:"CEIL",symbol:t}).value},type:te.COMMON_ERROR}:null)},Ch=e=>{let o=Oo(),{coin:t}=_(),n=J(),r=Ct(),{baseCoinId:a}=t;return(0,Ha.useMemoizedFn)(m=>{let u=L.mul(m,10**t?.decimals),d,p;a===0?(p=L.add(L.add(u,n),e),d=L.add(u,n)):(p=L.add(L.add(n,e),e),d=L.add(n,e));let g=L.sub(r,d);return Number(g)!==0&&L.lt(g,e)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:ie(p,{roundingMode:"CEIL",useLargeNumberPrecision:!0,precision:o?.displayPrecision,isStableCoin:o?.stableCoin,useContractPrecision:!0,contractPrecision:{decimals:o?.decimals}}).value},type:te.COMMON_ERROR}:null})},_h=e=>{let o=gh(e),t=Ch(e);Q([o,t])},sg=_h;function Sh(){let e=(0,ii.useDispatch)(),o=J(),n=(0,ii.useSelector)(zr)?.minTransferInt||"0",r=K(),a=w(),m=Ct(),{coin:u,coinId:d,baseCoinId:p,address:g}=Gn(),f=rg(r,o,n);return(0,qa.useDeepCompareEffect)(()=>{(async()=>{let C=await zp({contractAddress:u?.address,baseCoinId:p,utxoList:f,toAddr:a,sendAmountInt:r});e(Kc({minTransferInt:C}))})()},[f,p,a,r,u?.address]),(0,qa.useDeepCompareEffect)(()=>{p===0&&f?.some(({multiAsset:C})=>!!C?.length)&&e(Ce(L.sub(m,n)))},[f,m,n]),sg(n),Qp({coinId:d,toAddr:a,utxoList:f,fromAddr:g,minTransferAmountInt:n,sendAmount:r},(C,S)=>{e(B(!!S)),e(q(C))}),ig.default.createElement(X,null)}var ag=Sh;s();i();var dg=c(h());s();i();var mg=c(k()),cg=c(R());V();var Ah=()=>{let o=(0,mg.useSelector)(zr)?.minTransferInt,{coin:t,coinId:n,address:r,walletId:a}=Gn(),m=In(a),u=K(),d=w(),p=J(),g=he({}),f=si(),C=xe({fromAddr:r,walletId:a,localType:t?.localType});return(0,cg.useMemoizedFn)(async()=>{try{let A=await f(u,p,o),I=ri({toAddr:d,fromAddr:r,utxoList:A,minTransferAmountInt:o,sendAmount:u,baseCoinId:t?.baseCoinId,contractAddress:t?.address}),x=await C({params:I}),T=await Ae(t?.localType,x),P={coinId:n,txHash:T,signedTx:x,walletId:a,toAdr:d,serviceCharge:p,fromAdr:r,coinAmount:u,walletType:m?.serverWalletType},F=await g(x,P);ae({tx_id:F})}catch(A){let I=A;je.error(I?.error_message||b("wallet_home_toast_network_error"))}})},ug=Ah;function Ih(){let e=ug();return oe(),dg.default.createElement(z,{confirmButtonProps:{onSubmit:e}})}var fg=Ih;var xh={match:e=>e===Jm,pages:{AmountPage:ag,ConfirmPage:fg,AddressPage:Y}},lg=xh;s();i();s();i();var gg=c(h());s();i();Ve();le();var hh=()=>{let e=Vo(),o=Tc(),t=As({factionType:Rr});return[e,async n=>(await Promise.all(o.map(m=>{let u=Gr(t,m);return gt(n,m,u)}))).some(Sm)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},pg=hh;var Th=()=>{let e=pg();return gg.default.createElement(Y,{addressProps:{errorFns:{fns:e,override:!0}}})},Cg=Th;s();i();var Ig=c(h());s();i();var Sg=c(k()),mi=c(R());s();i();ot();var yh=async({memo:e,fromAddress:o,toAddress:t,amountInt:n,isIBCTransfer:r,chain:a,signInfo:m,walletId:u})=>{let{chainId:d,sequence:p,accountNumber:g,feeDemon:f,demon:C,sourceChannel:S,normal:A,gasLimit:I}=m,x={chainId:d,sequence:p,accountNumber:g,feeDemon:f,feeAmount:He(A,I),gasLimit:I,memo:e,fake:!0},T={fromAddress:o,toAddress:t,demon:C,amount:n},P;if(r){let v=fe(Math.round(Date.now()/1e3),300);P={...x,type:on.IBC_TRANSFER,data:{...T,sourcePort:"transfer",sourceChannel:S,ibcTimeoutTimestamp:v}}}else P={...x,type:on.TRANSFER,data:{...T}};return await Pe().signTransaction(P,o,a?.baseChain,u,{chain:a.localType})},_g=yh;s();i();var ai=c(h());le();function Ka(){let{baseCoin:e}=_(),o=w(),[t,n]=(0,ai.useState)(!1),r=As({factionType:Rr});return(0,ai.useEffect)(()=>{(async()=>{let m=Gr(r,e.coinId),u=await gt(o,e?.coinId,m);n(!u)})()},[e,o]),t}var Ph=()=>{let e=(0,Sg.useDispatch)(),[o,{setFalse:t}]=(0,mi.useBoolean)(!0),{coin:n}=_(),{coinId:r}=n,a=y(),m=w(),u=me(),d=Ka(),p=Is({localType:n?.localType}),g=ne(),f=Wo();return(0,mi.useDebounceEffect)(()=>{r&&m&&u!=="0"&&p?.localType&&(async()=>{try{let S=await dc({coinId:r,from:a,to:m}),A=await _g({memo:"",fromAddress:a,toAddress:m,amountInt:f?"0":u,isIBCTransfer:d,chain:p,signInfo:S,walletId:g}),I=await fc({coinId:r,from:a,inputData:A}),x=Math.ceil(He(S.normal,I));e(q(x)),e(us({inputData:A,signInfo:S,gasLimit:I,isIBCTransfer:d})),e(B(!1))}catch{e(B(!0))}finally{t()}})()},[r,a,m,u,d,p?.localType,f]),o},Ag=Ph;function bh(){let e=Ag();return Q(),Ig.default.createElement(X,{confirmButtonProps:{loading:e}})}var xg=bh;s();i();var wo=c(h()),ui=c(k()),yg=c(R());s();i();var bt=c(h()),hg=c(vo());V();s();i();var Wn={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var kh=({value:e,onChange:o,placeholder:t,title:n=b("wallet_extension_title_memo_optional"),dashed:r=!0,error:a,errorType:m,maxLength:u=256})=>{let d=Lu();return bt.default.createElement(ko,{bordered:!1},bt.default.createElement(Dt,{title:bt.default.createElement(xu,{href:d?.sendMemoInput,className:(0,hg.default)(Wn["memo-title__link"],{[Wn["memo-title__link__dashed"]]:r})},bt.default.createElement(Z.Text,{inherit:!0},n))},bt.default.createElement(lo.TextArea,{placeholder:t||b("wallet_extension_input_memoinfro"),size:lo.SIZE.xl,autoResize:!0,value:e,onChange:o,maxLength:u,error:a,errorType:m,className:Wn["memo-input"],inputClassName:Wn["memo-input-core"],innerClassName:Wn["memo-input-box"]})))},Yo=(0,bt.memo)(kh);s();i();var ci=c(k());ot();var Fh=e=>{let{coin:o}=_(),t=y(),n=me(),r=(0,ci.useSelector)(ee),a=(0,ci.useSelector)(eo),{gasLimit:m,signInfo:u,isIBCTransfer:d,gasPrice:p}=(0,ci.useSelector)(ts),g=Is({localType:o.localType}),f=Oe(),C=ne();return pe(async()=>{let{chainId:T,sequence:P,accountNumber:F,feeDemon:v,demon:E,sourceChannel:N}=u,D={chainId:T,sequence:P,accountNumber:F,feeDemon:v,feeAmount:a,gasLimit:m,memo:e},U={fromAddress:t,toAddress:r,demon:E,amount:n},$;if(d){let O=fe(Math.round(Date.now()/1e3),300);$={...D,type:on.IBC_TRANSFER,data:{...U,sourcePort:"transfer",sourceChannel:N,ibcTimeoutTimestamp:O}}}else $={...D,type:on.TRANSFER,data:{...U}};return await Pe().signTransaction($,t,g?.baseChain,C,{chain:g.localType})},async T=>{let P={memo:e,gasPrice:p,gasLimit:m},F=await Ae(o.localType,T),v={signedTx:T,coinAmount:n,coinId:o.coinId,fromAdr:t,toAdr:r,serviceCharge:a,extJson:JSON.stringify(P),txHash:F};return await f(v)},T=>(ae({tx_id:T}),T))},Tg=Fh;s();i();function Ja({feeInfo:e,callback:o}){let t=Ts();return{level:e.gasType,loading:!t&&e.initLoading,networkFee:!t&&e.initLoading?void 0:e.gasFee,estimateFailed:t||e.error,onClick:()=>{o()}}}function Eh(){let e=(0,ui.useDispatch)(),[o,t]=(0,wo.useState)({}),[n,{toggle:r}]=(0,yg.useToggle)(!1),{coin:a}=_(),{coinId:m}=a,u=y(),d=w(),p=me(),g=(0,ui.useSelector)(ts),f=Ja({feeInfo:o,callback:r}),[C,S]=(0,wo.useState)(""),A=Tg(C),I=async()=>{await A()},x=P=>{S(P.target.value)},T=P=>{t(P),e(q(P.gasFee)),e(B(f.estimateFailed)),e(us({...g,gasLimit:P.gasAmount,gasPrice:P.gasPriceStep}))};return oe(),wo.default.createElement(wo.default.Fragment,null,wo.default.createElement(z,{confirmButtonProps:{onSubmit:I},slot:{bottom:wo.default.createElement(wo.default.Fragment,null,wo.default.createElement(Yo,{value:C,onChange:x}),wo.default.createElement(Qd,{visible:n,coinId:String(m),address:u,inputData:g.inputData,to:d,value:p,onBack:r,onClose:r,onChange:T}))},networkFeeProps:f}))}var Pg=Eh;var wh={match:e=>xc(e),pages:{AddressPage:Cg,AmountPage:xg,ConfirmPage:Pg}},bg=wh;s();i();s();i();var Eg=c(h());s();i();var kg=c(R());var Nh=()=>{let{baseCoin:e}=_();return(0,kg.useMemoizedFn)(async o=>{let t=To(o,e.localType);return await gt(t,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},vh=()=>{let e=Vo(),o=Nh();return[e,o]},Fg=vh;var Bh=()=>{let e=Fg();return Eg.default.createElement(Y,{addressProps:{errorFns:{fns:e,override:!0}}})},wg=Bh;s();i();var Hg=c(h());Ve();s();i();var Rg=c(k()),Dg=c(R());Ve();s();i();var so=c(h()),Ng=c(R());Ve();var vg=(0,so.createContext)({requestGasLimitFn:Fr});function Vn(){return(0,so.useContext)(vg)}function Lh({preExecParams:e,extraParams:o}){let t=Bu({preExecParams:e,...o}),n=(0,so.useRef)(0),[r,a]=(0,so.useState)(!1),[m,u]=(0,so.useState)(null),d=(0,Ng.useMemoizedFn)(async(p={})=>{let g=++n.current;a(!0);try{let f=await t(p);return u(f?.gasFee||{}),f}finally{g===n.current&&a(!1)}});return{loadingGasLimit:r,gasLimitInfo:m,requestGasLimitFn:d}}function Bg({children:e,preExecParams:o,initialGasData:t,coinId:n,from:r,to:a,value:m,data:u,typeInt:d,onlyGasLimit:p,method:g,dappInfo:f,authorizationList:C,stateOverrideList:S}){let A=(0,so.useMemo)(()=>({initialGasData:t,coinId:n,from:r,to:a,value:m,data:u,typeInt:d,onlyGasLimit:p,method:g,dappInfo:f,authorizationList:C,stateOverrideList:S}),[t,n,r,a,m,u,d,p,g,C,S]),{isSignInfoInitLoading:I,signInfo:x}=zu({coinId:n,address:r}),{loadingGasLimit:T,gasLimitInfo:P,requestGasLimitFn:F}=Lh({preExecParams:o,extraParams:A}),{finalInitialGasData:v,renderNetworkFee:E}=Zu({coinId:n,initialGasData:t,signInfo:x,gasLimitInfo:P}),N=(0,so.useMemo)(()=>({isSignInfoInitLoading:I,signInfo:x,isGasLimitInfoLoading:T,gasLimitInfo:P,requestGasLimitFn:F,initialGasData:v,renderNetworkFee:E,extraParams:A}),[I,x,T,P,F,v,E,A]);return so.default.createElement(vg,{value:N},e)}s();i();V();function Rh(e,o){let t=e,{defaultMsg:n,force:r}=o||{};if((t?.message===_u||t?.message===Pn)&&!r)return;let m=t?.data?.msg||t?.msg||t?.data?.originalError?.msg||t?.message||n||b("wallet_extension_general_error_extension_code_error");je.error({title:m})}var Lg=Rh;var Dh=10;function Mh(){let e=(0,Rg.useDispatch)(),o=Es(),[t,{setTrue:n,setFalse:r}]=(0,Dg.useBoolean)(!1),{requestGasLimitFn:a}=Vn(),m=bn();return{onClick:async()=>{try{n();let p=(await a())?.popupInfoList||{};p?.length&&await o(p);let g=Am(p,"0.templeteId");e(Yc(g===Dh)),m()}catch(d){Lg(d)}finally{r()}},loading:t}}var Mg=Mh;s();i();var Ug=c(R());s();i();var di="SEND_EVM_REQUEST_GAS_LIMIT";function Uh(){let{coin:e}=_(),{requestGasLimitFn:o}=Vn();(0,Ug.useRequest)(o,{manual:e.baseCoinId!==0,cacheKey:di,cacheTime:-1,staleTime:-1})}var Og=Uh;s();i();var Gg=c(h()),Wg=c(k());function Oh(){let e=(0,Wg.useDispatch)(),{coin:o}=_();(0,Gg.useEffect)(()=>{o.systemToken&&e(ft(o.coinId))},[o.coinId])}var Vg=Oh;var Gh=()=>{let e=Go(),t=!!Qu().key||Qo(e)||e==="",{onClick:n,loading:r}=Mg(),a=Kd({disabled:t,loading:r,onClick:n});return Q(),Vg(),Og(),Hg.default.createElement(X,{footerActions:a})},qg=Gh;s();i();var it=c(h()),Kn=c(k());s();i();var Kg=c(h()),Jg=c(k()),Xg=c(we());function Wh(){let e=(0,Xg.useHistory)(),{baseCoin:o}=_(),t=Io(),n=y(),r=w(),a=K(),m=(0,Jg.useSelector)(yo),u=rd(),d=Wr({from:n,to:r,value:Do(a),data:m}),p=()=>{e.go(-3)};return Kg.default.createElement(Dd,{needMev:!0,chainId:o.chainId,walletId:t,txParams:d,showDappInfo:!1,coinId:o.coinId,onConfirm:u,onCancel:p})}var Yg=Wh;s();i();var st=c(h());V();s();i();var Hn={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function Vh({visible:e,onClose:o,onConfirm:t}){let n=Su({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return st.default.createElement(fo.Confirmation,{visible:e,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:o},st.default.createElement("div",{className:Hn.content},st.default.createElement(Em,{src:n,className:Hn.img}),st.default.createElement("div",{className:Hn.title},b("wallet_extension_transaction_dialog_title_change_type")),st.default.createElement("div",{className:Hn.tip},b("wallet_extension_transaction_dialog_desc_change_type")),st.default.createElement("div",{className:Hn.btns},st.default.createElement(ge,{category:ge.CATEGORY.fill,type:ge.TYPE.highlight,size:ge.SIZE.lg,onClick:o},b("commonall_text_btn_cancel")),st.default.createElement(ge,{category:ge.CATEGORY.outline,type:ge.TYPE.primary,size:ge.SIZE.lg,onClick:t},b("commonall_modal_btn_continue")))))}var zg=Vh;s();i();var Xa=c(k());function Hh(){let{coin:e}=_(),o=(0,Xa.useSelector)(vc),t=(0,Xa.useSelector)(yo);return e.baseCoinId===0&&o&&t}var Zg=Hh;s();i();var $g=c(k());function qh(){let e=(0,$g.useSelector)(ln),{coin:o}=_(),t=me(),n=y(),r=w();return{fetchParams:{coinId:o.coinId,from:n,to:r,amount:t,gasPrice:e.gasPrice},userGasInfo:e,baseCoinAmountUse:o.baseCoinId===0?t:"0"}}var jg=qh;s();i();var Ya=c(k());Re();en();s();i();var Qg=c(h());var Kh=()=>(0,Qg.useCallback)(e=>{try{typeof e=="string"&&!!e&&ae({tx_id:e})}catch(o){console.log(o)}},[]),qn=Kh;s();i();var oC=c(h()),tC=c(k());s();i();var eC=({contractAddress:e,toAddress:o,amount:t})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${e}","function":"transfer","args":{"to":"${o}","amount":"${t}"}}}`;return l.Buffer.from(n).toString("hex")}catch{return""}};var Jh=()=>{let{coin:e}=_(),o=To(w(),e.localType),t=me(),n=(0,tC.useSelector)(fn),{isFacet:r,facetContractAddress:a}=n||{};return(0,oC.useMemo)(()=>!e.address||!id(o)?"":r?eC({contractAddress:a,toAddress:o,amount:t}):Bt(o,t),[e,o,t,r,a])},fi=Jh;var Xh=()=>{let{coin:e}=_(),o=gd(),t=Fn(),n=K(),r=Wo(),a=y(),m=w(),u=To(a,e.localType),d=To(m,e.localType),p=Io(),{activityId:g,activity:f,status:C,tip:S}=_t(),A=fi(),I=(0,Ya.useSelector)(yo),x=(0,Ya.useSelector)(fn),T=qn(),P=Bd({walletId:p,fromAddr:u,coinId:e.coinId}),F=he({coinId:e.coinId,fromAddr:u,toAddr:d,localType:e.localType}),v=(H,O)=>{let{userGasInfo:j}=O,{updateGasInfo:M}=H;return M?{...M,gasLimit:j.gasLimit,supportEip1559:j.supportEip1559,networkFee:j.networkFee}:{...j}},E=H=>{let O=H.supportEip1559?H.maxFeePerGas:H.gasPrice,j=H?.networkFee||He(O,H.gasLimit),M=qe(t,j);if(Le(M,0))return[!1,n];if(e.baseCoinId===0)return r?[Fe(M,0),M]:[vt(n,M),n];let re=o;e.systemToken&&(re=qe(re,j));let de=r?re:n;return[vt(de,re),de]},N=({updateData:H,finallyGasInfo:O,publishAmountInt:j})=>{let{nonce:M}=H,re=j,de=ec(e.localType)?.realChainIdHex,se={from:u,gasLimit:Do(O.gasLimit),nonce:Do(M),chainId:de};return O.supportEip1559?(se.maxFeePerGas=Do(O.maxFeePerGas),se.maxPriorityFeePerGas=Do(O.maxPriorityFeePerGas),se.type=sc.FEE_MARKET):se.gasPrice=Do(O.gasPrice),x?.isFacet?(se.value="0",se.to=x?.facetBlackHoleAddress,se.data=A):e.address?(se.value="0",se.to=To(e.address,e.localType),se.data=A):(se.value=Do(re),se.to=d,I&&(se.data=I)),Wr(se)},D=({txParams:H,publishAmountInt:O,finallyGasInfo:j})=>{let M={...H};return e.systemToken&&(M.value=km(Do(O))),M.walletId=p,M.supportEip1559=j.supportEip1559,M},U=({txParams:H,publishAmountInt:O,dataForCheck:j={}})=>{let{userGasInfo:M={}}=j,re=sn(H.value),de=sn(H.gasLimit),se=sn(M.supportEip1559?H.maxFeePerGas:H.gasPrice),We=He(de,se),co={...H,value:re,sendCoinAmountInt:o,from:a,to:m,gas:de,gasPrice:se,priorityFee:sn(M.supportEip1559?H.maxPriorityFeePerGas:0),nonce:sn(H.nonce),repeatTxType:rc.CONFIRMING,oldTxHash:"",gasType:M?.gasType};return{coinId:e.coinId,coinAmount:O,fromAdr:a,toAdr:m,serviceCharge:We,extJson:JSON.stringify(co),txSource:Lo.NORMAL,inputData:H.data||"",activityId:g||void 0}};return async(H,O={})=>{let j=v(H,O),[M,re]=E(j);if(!M)throw new Error("balance check error");let de=N({updateData:H,finallyGasInfo:j,publishAmountInt:re}),se=D({txParams:de,publishAmountInt:re,finallyGasInfo:j}),We=U({txParams:de,publishAmountInt:re,dataForCheck:O});Fm({activityId:g,activity:f,status:C,tip:S,walletId:p,address:u});let co=await P(se),uo=await F(co,We);T(uo)}},nC=Xh;s();i();var li=c(k());function Yh(){let e=(0,li.useDispatch)(),o=(0,li.useSelector)(ln),{gasLimit:t,gasPrice:n,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:m,extFee:u,gasPriceInfo:d,gasLimitInfo:p,gasType:g}=o,{minGasFee:f}=vu({gasLimit:t,gasPrice:n,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:m,extFee:u,gasPriceInfo:d,gasLimitInfo:p,gasType:g});return{feeLevel:g,networkFee:f,onClick:()=>{e(is(!0))}}}var rC=Yh;var zh=()=>{let e=(0,Kn.useDispatch)(),o=rC(),t=jg(),n=td(),r=Ld(),a=nC(),{clear:m}=_t(),u=(0,Kn.useSelector)(yo),d=Ls(u),p=Zg(),[g,f]=(0,it.useState)(!1),C=async()=>{if(p)return f(!0),{pause:!0};try{let A=await r({...t.fetchParams,userGasInfo:t.userGasInfo,baseCoinAmountUse:t.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(A,t),null}catch(A){if(A?.message===Ou)throw new Error(Pn);{let I=A?.data?.originalError;throw Vd(I?.code)&&m?(m(),I):A}}},S=(0,Kn.useSelector)(dt);return oe(),it.default.createElement(it.default.Fragment,null,it.default.createElement(z,{networkFeeProps:o,confirmButtonProps:{disabled:!!d,onSubmit:C},tipMessageProps:{blockAddressInfo:S}}),it.default.createElement(zg,{visible:g,onClose:()=>{f(!1),Ca({action_after_pop_up:"cancel"})},onConfirm:()=>{e(zc(!0)),f(!1),Ca({action_after_pop_up:"confirm"})}}))};function Zh(e){return(0,Kn.useSelector)(Zr)?it.default.createElement(Yg,null):it.default.createElement(zh,{...e||{}})}var sC=Zh;s();i();var Ye=c(h()),zo=c(k()),cC=c(R());s();i();var pi=c(R());function $h(){(0,pi.useUnmount)(()=>{(0,pi.clearCache)([di])})}var iC=$h;s();i();var aC=c(k());function jh(){let{coin:e}=_(),o=y(),t=ed(),n=(0,aC.useSelector)(ln);return ku({txType:Nu.transfer,coinId:e.coinId,fromAddress:o,unavailable:n.gasType===Qe.CUSTOM,fee:t})}var mC=jh;function Qh(){let{coin:e}=_(),o=(0,zo.useSelector)(yo),t=Ps(),n=(0,zo.useSelector)(Uo);return(0,Ye.useMemo)(()=>{let r=null,a=e.baseCoinId===0&&Ls(o);return n&&(e.baseCoinId!==0||!a)&&(r=+new Date),{disabled:a||t,fetchOnce:r}},[e.baseCoinId,o,t,n])}function eT(){let e=(0,zo.useDispatch)(),o=(0,Ye.useRef)(!1),t=(0,Ye.useRef)(!1),n=()=>{o.current||t.current?e(B(!0)):e(B(!1))};return(0,cC.useMemoizedFn)(a=>{e(Xc(a)),e(ce(a?.isNetworkFeeLoading));let m=a.supportEip1559?a.maxFeePerGas:a.gasPrice,u=a.networkFee;m==="0"?t.current=!0:t.current=!1,a?.gasLimitInfo?.queryGasLimitErrorUseDefault?o.current=!0:o.current=!1,e(q(u)),n()})}var oT=(0,Ye.memo)(()=>{let e=(0,zo.useDispatch)(),o=(0,zo.useSelector)(Nc),{coin:t}=_(),{initialGasData:n,isSignInfoInitLoading:r,signInfo:a,gasLimitInfo:m,isGasLimitLoading:u,renderNetworkFee:d,extraParams:p}=Vn(),{from:g,data:f,to:C,value:S}=p||{},A=Ue(),I=_t(),{disabled:x,fetchOnce:T}=Qh(),P=eT(),F=()=>{e(is(!1))};return(0,Ye.useEffect)(()=>{e(Jc(a||{}))},[a]),d?Ye.default.createElement($u,{currencyId:A,visible:o,coinId:t.coinId,address:g,inputData:f,tokenAddress:C,value:S,estimatedL1FeeOptions:{fetchOnce:T,disabled:x},onBack:F,onGasChange:P,gasReturn:I,initialGasData:n,isSignInfoLoading:r,signInfo:a,initialGasLimitInfo:m,isGasLimitLoading:u}):null}),tT=({children:e})=>{let o=mC(),t=(0,zo.useSelector)(Zr),{coin:n}=_(),r=y(),a=w(),m=To(r,n.localType),u=To(a,n.localType),d=fi(),p=(0,zo.useSelector)(yo),g=n.baseCoinId===0?p:d,f=K(),C=(0,zo.useSelector)(fn),{isFacet:S,facetBlackHoleAddress:A}=C||{},I=(0,Ye.useMemo)(()=>S?A:n.baseCoinId===0?u:n.address,[n.baseCoinId,n.address,u,S,A]),x=n.address?"0":f;return iC(),Ye.default.createElement(Bg,{coinId:n.coinId,from:m,to:I,value:x,data:g,method:Nn},Ye.default.createElement(Wd,{gasReturn:o},e,!t&&Ye.default.createElement(oT,null)))},uC=tT;var nT={match:e=>Ac(e),SubContainer:uC,pages:{AddressPage:wg,AmountPage:qg,ConfirmPage:sC}},dC=nT;s();i();le();s();i();var fC=c(h());var rT=()=>(Q(),fC.default.createElement(X,null)),lC=rT;s();i();var gC=c(h());s();i();jt();Qt();var sT=()=>{let{coin:e}=_(),o=y(),t=me(),n=J(),r=ne(),a=w(),m=xe({fromAddr:o,localType:e.localType,walletId:r}),u=he({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:a,networkFee:n,localType:e.localType});return pe(async()=>{let A={coinId:e.coinId,address:o,amount:t,fee:n,accountId:r},{data:I}=await Bo(po.getSpecialUtxoList,A,{walletSignParams:{needWalletSign:!0,walletId:r}});return I},A=>({inputs:A.map(P=>({txId:P.txId,vOut:P.index,address:P.address,amount:P.amount})),outputs:[{address:a,amount:t}],address:o,fee:n}),async A=>await m({params:A}),async A=>await u(A),A=>(ae({tx_id:A}),A))},pC=sT;var iT=()=>{let e=pC();return oe(),gC.default.createElement(z,{confirmButtonProps:{onSubmit:e}})},CC=iT;s();i();s();i();var gi=c(h()),_C=c(k()),SC=c(R());var aT=()=>{let e=(0,_C.useDispatch)(),{coin:o}=_(),t=y(),n=(0,gi.useCallback)(async()=>{try{let{data:a={}}=await nn({coinId:o.coinId,fromAddr:t});a?.info?.normal?e(q(a.info.normal)):e(B(!0))}catch{e(B(!0))}finally{e(ce(!1))}},[e,t,o.coinId]),{run:r}=(0,SC.useDebounceFn)(n,{wait:500});(0,gi.useEffect)(()=>{e(ce(!0)),r()},[t,o.coinId,r,e])},AC=aT;var mT=({children:e})=>(AC(),e),IC=mT;var cT={match:e=>e===Xm,SubContainer:IC,pages:{AddressPage:Y,AmountPage:lC,ConfirmPage:CC}},xC=cT;s();i();le();s();i();var EC=c(h());s();i();var Ci=c(h()),hC=c(k()),TC=c(R());var uT=()=>{let e=(0,hC.useDispatch)(),{coin:o}=_(),t=y(),n=w(),r=_e(),a=(0,Ci.useCallback)(async()=>{try{let u=await r({coinId:o.coinId,address:t,fromAddr:t,toAddr:n});e(jc({name:"signInfo",value:u}));let d=[],{fee:p,depositMinAmount:g,minTransferTokenValue:f,depositGasFee:C,toAddressCheck:S}=u;o.baseCoinId===0?d.push(p):S===0?d.push(p,f,g,C):d.push(p,f);let A=d.reduce((I,x)=>fe(I,x),0);e(q(A))}catch{e(B(!0))}finally{e(ce(!1))}},[e,r,o.coinId,o.baseCoinId,t,n]),{run:m}=(0,TC.useDebounceFn)(a,{wait:500});(0,Ci.useEffect)(()=>{e(ce(!0)),e(B(!1)),m()},[e,a,m])},yC=uT;s();i();var PC=c(h()),_i=c(k());le();var dT=()=>{let e=(0,_i.useDispatch)(),{coin:o,baseCoin:t}=_(),{baseCoinId:n}=o,r=y(),a=ne(),m=tt(r,a,Gm),d=Me(t.coinId,a,{addressType:m})?.coinAmountInt,f=(0,_i.useSelector)(Cn)?.signInfo?.storageUsedAmount;(0,PC.useEffect)(()=>{if(!d||!f)return;let C=qe(d,f);e(n===0?Ce(C):oo(C))},[e,n,f,d])},bC=dT;s();i();var kC=c(R());jt();Qt();var fT=()=>{let{baseCoin:e}=_();return(0,kC.useMemoizedFn)(async o=>{let t={address:o,coinId:e.coinId};try{let{data:r}=await Bo(po.postCheckAddress,t);if(r?.res)return null}catch{}return await gt(o,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},FC=()=>{let e=Vo(),o=fT();return[e,o]};var lT=()=>{yC(),bC();let e=FC();return EC.default.createElement(Y,{addressProps:{errorFns:{override:!0,fns:e},extraProps:{disableRequestDomain:!0}}})},wC=lT;s();i();var RC=c(h());s();i();var NC=c(k()),za=c(R());var vC=()=>{let e=Ke(),o=Cd(),t=(0,NC.useSelector)(Cn),{coin:n,baseCoin:r}=_(),a=J();return(0,za.useMemoizedFn)(m=>{let u=fe(t?.signInfo?.storageUsedAmount,a);return(n.baseCoinId===0?Le(e,m):Le(o,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:ie(u,{useContractPrecision:!0,contractPrecision:{decimals:r.decimals},useLargeNumberPrecision:!0,precision:r.displayPrecision,isStableCoin:r.stableCoin,roundingMode:"CEIL"}).value},type:te.FEE_BALANCE_INSUFFICIENT}:null})},BC=()=>{let e=yn(),o=vC();Q({fns:[e,o],override:!0})},pT=()=>{let e=vC();return(0,za.useMemoizedFn)(o=>{let t=e(o);return t?{...t,highlight:Rt.AMOUNT}:null})},LC=()=>{let e=dd(),o=pT();oe({fns:[e,o],override:!0})};var gT=()=>(BC(),RC.default.createElement(X,{totalAmountProps:{type:"amount"}})),DC=gT;s();i();var OC=c(h());s();i();var MC=c(k()),Za=c(_I());var CT=()=>{let{coin:e}=_(),o=y(),t=w(),n=me(),r=J(),a=ne(),m=(0,MC.useSelector)(Cn),u=_e(),d=qn(),p=xe({fromAddr:o,localType:e.localType,walletId:a}),g=he({coinId:e.coinId,coinAmount:n,fromAddr:o,toAddr:t,localType:e.localType,networkFee:r,walletId:a}),f=async()=>await u({coinId:e.coinId,address:o,fromAddr:o,toAddr:t}),C=x=>{let{blockHash:T,nonce:P}=x;return{from:o,blockHash:T,type:Za.NearTypes.TransferNear,nonce:P,receiverId:t,amount:n}},S=x=>{let{blockHash:T,nonce:P}=x,{signInfo:F}=m,{toAddressCheck:v,minTransferTokenValue:E,depositGasFee:N,fee:D,depositMinAmount:U}=F;return{from:o,blockHash:T,type:Za.NearTypes.TransferToken,nonce:P,receiverId:t,amount:n,contract:e.address,depositGas:N,transferGas:D,depositValue:U,minTransferTokenValue:E,shouldDeposit:Boolean(v===0)}};return pe(f,x=>e.baseCoinId===0?{params:C(x)}:{params:S(x)},p,g,d)},UC=CT;var _T=()=>{let e=UC();return LC(),OC.default.createElement(z,{confirmButtonProps:{onSubmit:e}})},GC=_T;s();i();var WC=c(h());var ST=({children:e})=>{let t=no().get("from");return WC.default.createElement(be,{fromAddress:t},e)},VC=ST;var AT={match:e=>e===Ym,Container:VC,pages:{AddressPage:wC,AmountPage:DC,ConfirmPage:GC}},HC=AT;s();i();le();s();i();var JC=c(h());s();i();var qC=c(R());var IT=()=>{let{coin:e}=_();return(0,qC.useMemoizedFn)(async o=>{let t={address:o,chainId:e?.chainId},n=!1;try{let{status:r}=await Gu(t);n=r===ic.COMPLETED}catch{n=!1}return n?null:{key:"wallet_extension_transfer_input_error_add_unregistered",args:{}}})};function xT(){return[IT()]}var KC=xT;var hT=()=>{let o={errorFns:{override:!1,fns:KC()},extraProps:{disableRequestDomain:!0}};return JC.default.createElement(Y,{addressProps:o})},XC=hT;s();i();var pr=c(h());V();s();i();var Si=c(h()),$a=c(k()),YC=c(we()),zC=c(R());SI();function TT(e){return t=>{let n=(0,YC.useHistory)(),r=(0,$a.useSelector)(fs),a=Ne(),{coin:m}=_(),u=(0,$a.useSelector)(ee),d=ju(),[p,g]=(0,Si.useState)(!1);return(0,zC.useMount)(()=>{if(Lm(m))n.replace(r||Xr),g(!1);else if(u)g(!0);else{let f={pathname:`${De}/${a}${mn}`};d&&(f.search=`?from=${d}`),n.replace(f),g(!1)}}),p?Si.default.createElement(e,{...t}):null}}var Ai=TT;s();i();var ZC=c(h()),$C=c(k());le();var yT=({coinId:e,address:o})=>{let t=(0,$C.useDispatch)(),[n,r]=bo({coinId:e,address:o});return(0,ZC.useEffect)(()=>{r.normal&&t(q(r.normal)),r.maxTransferAmount&&t(e===Dr?Ce(r.maxTransferAmount):oo(r.maxTransferAmount))},[e,t,r.maxTransferAmount,r.normal]),[n,r]},Ii=yT;s();i();var jC=c(h());var PT=e=>{let{coin:o}=_(),t=Ct(),n=ld(t,o?.decimals),r=Ke();return(0,jC.useCallback)(a=>o?.baseCoinId===0&&Fe(a,r)&&vt(a,n)?{key:"wallet_extension_transfer_input_error_pi_minimum",args:{amount:ie(e,{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin,useLargeNumberPrecision:!0}).value},type:te.BALANCE_INSUFFICIENT}:null,[n,e,r,o])},bT=e=>{let o=Fs(),t=yn(),n=cd(),r=PT(e);Q({fns:[o,r,t,n],override:!0})},QC=bT;function kT(){let{coin:e}=_(),o=y(),[t,n]=Ii({coinId:e?.coinId,address:o});return QC(n?.maxTransferAmount),pr.default.createElement(X,{isGlobalLoading:t,totalAmountProps:{type:"amount",title:pr.default.createElement(pr.default.Fragment,null,b("extension_wallet_send_text_transfer_available"),pr.default.createElement(Ao,{size:Ao.SIZE.xxs,style:{marginLeft:"4px"},tooltip:b("wallet_extension_transfer_input_error_pi_available_balance"),icon:"okx-wallet-plugin-information-circle"}))}})}var e_=Ai(kT);s();i();var gr=c(h());V();s();i();var o_=c(h());var FT="transfer",ET=(e,o)=>{let{coin:t}=_(),n=y(),r=ne(),a=me(),m=J(),u=w(),d=xe({walletId:r,fromAddr:n,localType:t.localType}),p=he({walletId:r,coinId:t.coinId,coinAmount:a,fromAddr:n,toAddr:u,networkFee:m,localType:t.localType});return(0,o_.useCallback)(async()=>{let g={memo:e,amount:a,source:n,fee:o?.normal,sequence:o?.nonce,type:FT,decimals:t?.decimals,toAddress:u,networkPassphrase:o?.networkPassphrase},f=await d({params:g}),C=await Ae(t?.localType,{tx:f,networkPassphrase:o?.networkPassphrase}),S=await p(f,{txHash:C});ae({tx_id:S})},[e,a,n,o?.normal,o?.nonce,o?.networkPassphrase,t?.decimals,t?.localType,u,d,p])},t_=ET;var n_=28;function wT(){let{coin:e}=_(),o=y(),[t,n]=(0,gr.useState)(""),[r,a]=Ii({coinId:e?.coinId,address:o}),m=t_(t,a),u=d=>{let p=d.target.value;new TextEncoder().encode(p).length<=n_&&n(d.target.value)};return oe(),gr.default.createElement(z,{slot:{bottom:gr.default.createElement(Yo,{value:t,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:n_}),onChange:u})},confirmButtonProps:{loading:r,onSubmit:m}})}var r_=wT;var NT={match:e=>e===Dr,pages:{AddressPage:XC,AmountPage:e_,ConfirmPage:r_}},s_=NT;s();i();s();i();var u_=c(h()),ja=c(k());V();s();i();var Cr=c(h()),xi=c(k());var i_=()=>{let{toRent:e}=(0,xi.useSelector)(er),{coin:o,baseCoin:t}=_(),n=Ke();return(0,Cr.useCallback)(r=>{if(o.baseCoinId!==0)return null;let a=$e(e,10**o.decimals);return Le(r,a)?{key:"wallet_extension_toast_minimum_rent_fee",args:{num:ie(a,{useLargeNumberPrecision:!0,precision:t.displayPrecision,isStableCoin:t.stableCoin,roundingMode:"CEIL"}).value,token:t.symbol},type:te.COMMON_ERROR}:null},[n,e,t.symbol])},a_=()=>{let{selfRent:e,toRent:o}=(0,xi.useSelector)(er),{coin:t,baseCoin:n}=_(),r=(0,xi.useSelector)(eo),a=Fn();return(0,Cr.useCallback)(()=>{if(t.baseCoinId===0)return null;let m=fe(r,e);if(Le(a,m)){let u=ie($e(m,10**n.decimals),{useLargeNumberPrecision:!0,precision:n.displayPrecision,isStableCoin:n.stableCoin,roundingMode:"CEIL"}).value;return{key:"wallet_extension_toast_insufficient_balance_initiate_txn",args:{token:n.symbol,num:u},type:te.FEE_BALANCE_INSUFFICIENT}}else if(Le(a,fe(m,o)))return{key:"wallet_extension_loading_text_minimum_reserve_rent",args:{num:ie($e(fe(m,o),10**n.decimals),{useLargeNumberPrecision:!0,precision:n.displayPrecision,isStableCoin:n.stableCoin,roundingMode:"CEIL"}).value,token:n.symbol},type:te.FEE_BALANCE_INSUFFICIENT};return null},[a,r,e])},m_=()=>{let e=i_(),o=a_();Q([e,o])},vT=()=>{let e=i_();return(0,Cr.useCallback)(o=>{let t=e(o);return t?{...t,highlight:Rt.AMOUNT}:null},[e])},BT=()=>{let e=a_();return(0,Cr.useCallback)(()=>{let o=e();return o?{...o,highlight:Rt.AMOUNT}:null},[e])},c_=()=>{let e=vT(),o=BT();oe([e,o])};function LT(){let e=(0,ja.useSelector)($r),o=(0,ja.useSelector)(Bc);return m_(),u_.default.createElement(X,{totalAmountProps:{title:b("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:e||o}})}var d_=LT;s();i();var kt=c(h()),om=c(k()),A_=c(R());s();i();V();en();var ke={JITO:"jito",PRIORITY_FEE:"priorityFee"},Qa="speedUpMode";function f_(e){let o=Xt.get(Qa);return o?typeof o=="string"&&(o={[Qm]:o}):o={},o[e]||ke.PRIORITY_FEE}function l_(e,o){let t=Xt.get(Qa);Xt.set(Qa,{...t||{},[e]:o})}var p_="jitoGuide";function g_(){return!!Xt.get(p_)}function C_(){Xt.set(p_,"1")}s();i();var ye=c(h()),No=c(k());V();s();i();var _r={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var RT=ye.default.memo(({jitoGuide:e})=>{let o=(0,No.useDispatch)(),t=(0,No.useSelector)(Co),n=r=>{o(or(r))};return ye.default.createElement(Nm,{mask:!0,show:!e,title:b("wallet_extension_transfer_tooltips_title_express_mode"),description:b("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},ye.default.createElement($t.Segmented,{className:_r.modeSwitch,color:$t.COLOR.grey,size:$t.SIZE.xs,average:!0,hideContent:!0,activeId:t,onChange:n},ye.default.createElement($t.TabPane,{tab:b("wallet_extension_transfer_tab_standard"),id:ke.PRIORITY_FEE}),ye.default.createElement($t.TabPane,{tab:b("wallet_extension_transfer_tab_express"),id:ke.JITO})))}),DT=()=>{let{baseCoin:e}=_(),o=(0,No.useSelector)(Mo),t=(0,No.useSelector)(jr),{fee:n="0"}=o||{},{priorityFee:r}=t,a=ie(n,{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},precision:e.displayPrecision,isStableCoin:e.stableCoin,useLargeNumberPrecision:!0}).value,m=ie(r||"0",{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},precision:e.displayPrecision,isStableCoin:e.stableCoin,useLargeNumberPrecision:!0}).value;return ye.default.createElement(ye.default.Fragment,null,b("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:m}))},MT=()=>{let{baseCoin:e}=_(),o=(0,No.useSelector)(Mo),t=(0,No.useSelector)(Qr),{fee:n}=o||{},{totalJitoFee:r}=t||{},a=ie(n||"0",{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},precision:e.displayPrecision,isStableCoin:e.stableCoin,useLargeNumberPrecision:!0}).value,m=ie(r||"0",{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},precision:e.displayPrecision,isStableCoin:e.stableCoin,useLargeNumberPrecision:!0}).value;return ye.default.createElement(ye.default.Fragment,null,b("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:m}),ye.default.createElement("div",{className:_r.tipDetail},b("wallet_extension_transfer_tooltips_desc_express_mode")))},UT=ye.default.memo(()=>{let e=(0,No.useSelector)(Co);return ye.default.createElement("div",{className:_r.tip},e===ke.JITO?ye.default.createElement(MT,null):ye.default.createElement(DT,null))});function OT({jitoGuide:e,...o}){let t=(0,No.useSelector)(Co),n=(0,No.useSelector)(Mo),r=t===ke.JITO?b("wallet_extension_transfer_express_mode"):b("wallet_extension_transfer_standard_mode");return ye.default.createElement(ko,{bordered:!1,verticalPadding:!1},ye.default.createElement(Bs,{...o,titleClassName:_r.title,titleAction:n?.supportJito&&ye.default.createElement(RT,{jitoGuide:e}),level:r},ye.default.createElement(UT,null)))}var __=OT;s();i();var Wt=c(k());Re();le();var GT=()=>{let e=Oe(),{coin:o}=_(),t=y(),n=(0,Wt.useSelector)(Ro),r=(0,Wt.useSelector)(ee),a=me(),m=(0,Wt.useSelector)(eo),{computeUnitPrice:u,computeUnitLimit:d}=(0,Wt.useSelector)(jr),p=(0,Wt.useSelector)(Co),g=(0,Wt.useSelector)(Qr),f=xe({fromAddr:t,localType:Br,walletId:n}),C=_e(),{coinId:S}=o,A=async()=>{let E=await C({coinId:S,toAddr:r,address:t,fromAddr:t,scenario:Vr.SCENARIO_SEND_COIN}),{recentBlockhash:N,toAddressLegal:D,tokenAccountToAddress:U}=E||{};return{recentBlockHash:N,haveTokenAccountAddress:D===!0,tokenAccountAddress:U||""}},I=async E=>{let{recentBlockHash:N,haveTokenAccountAddress:D}=E,U={from:t,to:r,amount:a,blockHash:N,payer:t};p===ke.PRIORITY_FEE&&(U={...U,computeUnitPrice:u,computeUnitLimit:d});let $;return o.baseCoinId===0?$={...U,type:Hr.TRANSFER}:$={...U,type:Hr.TOKEN_TRANSFER,createAssociatedAddress:!D,mint:o.address},o.protocolType===jn.SPL_TOKEN_2022&&($.token2022=!0,$.decimal=o.decimals),await f({params:$})},x=async E=>{if(p!==ke.JITO||!g)return null;let{recentBlockHash:N}=E,{tipAccountAddress:D,clientGasPrice:U}=g,$={from:t,to:D,amount:U,blockHash:N,payer:t,type:Hr.TRANSFER};return await f({params:$})};return pe(A,async(E={})=>{let N=await I(E),D=await x(E);return{rawSignedTx:N,jitoSignedTx:D}},async({rawSignedTx:E,jitoSignedTx:N})=>{let D=await Ae(Br,E),U=E,$;p===ke.JITO&&N&&(U=JSON.stringify([E,N]),$=JSON.stringify({mev:"Jito",jitoHash:await Ae(Br,N)}));let H={signedTx:U,coinAmount:a,coinId:o.coinId,fromAdr:t,toAdr:r,serviceCharge:m,txHash:D,extJson:$},O=await e(H);return l_(o.localType,p),O},E=>(ae({tx_id:E}),E))},S_=GT;s();i();var em={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function WT(){let e=(0,om.useSelector)($r),o=(0,A_.useDebounce)(e,{wait:200}),t=(0,om.useSelector)(Mo),[n,r]=(0,kt.useState)(!0),a=S_(),m=async()=>{e||await a()};return c_(),(0,kt.useEffect)(()=>{if(t?.supportJito){let u=g_();r(u),u||C_()}},[t?.supportJito]),kt.default.createElement("div",{className:em.root,onClick:()=>{r(!0)}},kt.default.createElement(z,{tipMessageProps:{hidden:e},containerProps:{contentClassName:n?"":em.contentJitoGuide},slot:{networkFee:u=>kt.default.createElement(__,{...u,jitoGuide:n})},confirmButtonProps:{disabled:o,onSubmit:m}}))}var I_=WT;s();i();s();i();var x_=c(h()),h_=c(R());s();i();var hi="send-solana-priority-gas-limit",Ti="send-solana-pre-check";function VT(){(0,x_.useEffect)(()=>()=>{(0,h_.clearCache)([hi,Ti])},[])}var T_=VT;s();i();var F_=c(h()),E_=c(k());Ve();s();i();var yi=c(h()),y_=c(k());function HT(){let e=(0,y_.useDispatch)(),[o,t]=(0,yi.useState)(!1),{coin:n}=_(),r=y(),a=w(),{coinId:m}=n,[,u,d]=bo({coinId:m,address:r,chainId:n?.chainId,toAddr:a},{ready:!!m&&!!r&&!!a});return(0,yi.useEffect)(()=>{d?(e(B(!0)),e(Aa(null)),t(!0)):(e(B(!u?.fee)),e(Aa(u)),t(!1))},[u,d]),{baseFee:u?.fee||"0",signInfoError:o}}var P_=HT;s();i();var $o=c(h()),Zo=c(k()),b_=c(R());Ve();function qT(){let e=(0,Zo.useDispatch)(),o=y(),{baseCoin:t}=_(),n=(0,$o.useRef)(void 0),r=(0,$o.useRef)(!1),[a,m]=(0,$o.useState)(void 0),u=async g=>{if(!r.current){try{let f=await cc({from:o,chainId:t.chainId}),{clientGasPrice:C}=f||{},S=fe(C||"0",g?.fee||"0");m(S),e(ms({...f,totalJitoFee:S})),e(B(!1))}catch{m("0"),e(ms(null)),e(B(!0))}finally{e(Lt(!1))}n.current=setTimeout(()=>{u(g)},7e3)}};return[a,g=>{r.current=!1,u(g)},()=>{clearTimeout(n.current),r.current=!0,n.current=void 0,m(void 0),e(ms(null))}]}function KT(){let e=(0,Zo.useDispatch)(),o=Md({cacheKey:hi,staleTime:-1}),t=y(),n=w(),{baseCoin:r}=_(),[a,m]=(0,$o.useState)(void 0),u=()=>{m("0"),e(as({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),e(B(!0))};return[a,async g=>{try{let{firstUnitLimit:f,preExecInfo:C}=await o({from:t,to:n,chainId:r.chainId,method:Nn});if(Qo(f)){u();return}let{computeUnitPrice:S,feelimit:A}=g,{priorityFee:I,priorityGasPrice:x,priorityGasLimit:T}=bc(A,S,f);m(I),e(as({priorityFee:I,computeUnitPrice:x||"",computeUnitLimit:T||""})),e(B(!1)),e(lt(C?.popupInfoList))}catch{u()}finally{e(Lt(!1))}},()=>{m(void 0),e(as({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function JT({signInfo:e,signInfoError:o,speedUpMode:t,stopJitoFee:n,startPriorityFee:r}){let a=(0,Zo.useDispatch)(),{computeUnitPrice:m,feelimit:u}=e||{};(0,$o.useEffect)(()=>{if(o){a(Lt(!1));return}Qo(m)||Qo(u)||!t||t===ke.PRIORITY_FEE&&(n(),r({computeUnitPrice:m,feelimit:u}))},[o,t,m,u])}function XT({signInfo:e,signInfoError:o,speedUpMode:t,stopPriorityFee:n,startJitoFee:r}){let a=(0,Zo.useDispatch)(),{fee:m}=e||{};(0,$o.useEffect)(()=>{if(o){a(Lt(!1));return}Qo(m)||!t||t===ke.JITO&&(n(),r({fee:m}))},[o,t,m])}function YT({signInfoError:e}){let o=(0,Zo.useDispatch)(),t=(0,Zo.useSelector)(Co),n=(0,Zo.useSelector)(Mo),r=(0,Zo.useSelector)(au),a=(0,b_.useLatest)(r),[m,u,d]=qT(),[p,g,f]=KT();return JT({signInfo:n,signInfoError:e,speedUpMode:t,stopJitoFee:d,startPriorityFee:g}),XT({signInfo:n,signInfoError:e,speedUpMode:t,stopPriorityFee:f,startJitoFee:u}),(0,$o.useEffect)(()=>{a.current?o(Lt(!1)):o(Lt(!0))},[t]),{speedUpFee:t===ke.PRIORITY_FEE?p:m}}var k_=YT;function zT(){let e=(0,E_.useDispatch)(),{baseFee:o,signInfoError:t}=P_(),{speedUpFee:n}=k_({signInfoError:t});(0,F_.useEffect)(()=>{Qo(n)||e(q(fe(o,n)))},[o,n])}var w_=zT;s();i();var N_=c(h()),Pi=c(k());function ZT(){let e=(0,Pi.useDispatch)(),{coin:o}=_(),{selfRent:t}=(0,Pi.useSelector)(er),n=kn();(0,N_.useEffect)(()=>{(()=>{if(!!o)if(o.baseCoinId===0){let r=qe(n||"0",t||"0");e(Ce(Fe(r,"0")?r:"0"))}else e(Ce(null))})()},[o,t,n])}var v_=ZT;s();i();var B_=c(h()),Sr=c(k()),L_=c(R());function $T(){let e=(0,Sr.useDispatch)(),{coin:o}=_(),t=(0,Sr.useSelector)(Mo),n=(0,L_.useLatest)((0,Sr.useSelector)(Co));(0,B_.useEffect)(()=>{!t||!("supportJito"in t)||!!n.current||(t.supportJito?e(or(f_(o.localType))):e(or(ke.PRIORITY_FEE)))},[t,o.localType])}var R_=$T;s();i();var D_=c(h()),bi=c(k()),M_=c(R());V();function jT(){let e=(0,bi.useDispatch)(),o=(0,bi.useSelector)(Co),{baseCoin:t}=_(),n=y(),r=w(),{runAsync:a}=(0,M_.useRequest)(ct,{manual:!0,cacheKey:Ti,staleTime:-1});(0,D_.useEffect)(()=>{!o||(async()=>{if(o===ke.JITO){e(Sa(!0));try{let m=await a({from:n,to:r,method:Nn,chainIndex:t?.chainId});e(lt(m.popupInfoList))}catch{je.error(b("wallet_extension_transaction_error_general_check_network"))}finally{e(Sa(!1))}}})()},[o,n,r,t?.chainId])}var U_=jT;function QT({children:e}){return R_(),w_(),v_(),U_(),T_(),e}var O_=QT;var ey={match:e=>Pc(e),SubContainer:O_,pages:{AddressPage:Y,AmountPage:d_,ConfirmPage:I_}},G_=ey;s();i();le();s();i();var W_=c(h());var oy=()=>(Q(),W_.default.createElement(X,null)),V_=oy;s();i();var tm=c(h()),Fi=c(k());V();s();i();var ki=c(k());var ty=()=>{let{coin:e,baseCoin:o}=_(),t=y(),n=(0,ki.useSelector)(ee),r=K(),a=(0,ki.useSelector)(eo),{memo:m}=(0,ki.useSelector)(pn),u=_e(),d=xe({fromAddr:t,localType:o.localType}),p=he({coinAmount:r,coinId:e.coinId,fromAddr:t,toAddr:n,networkFee:a}),g=async()=>await u({coinId:e.coinId,address:t,fromAddr:t,toAddr:n,value:r}),f=P=>{let{nonce:F}=P;return{type:tn.TRANSFER,data:{to:n,amount:r,nonce:F,fee:a,memo:m}}},C=P=>{let{nonce:F,contractAddress:v,contractName:E,tokenName:N}=P;return{type:tn.TOKEN_TRANSFER,data:{from:t,to:n,amount:r,nonce:F,fee:a,memo:m,contract:v,contractName:E,functionName:qr.TRANSFER,tokenName:N}}};return pe(g,P=>e.baseCoinId===0?f(P):C(P),async P=>{let{data:F}=P,{nonce:v}=F,{txId:E,txSerializedHexString:N}=await d({params:P,needCapture:!0});return{txId:E,txSerializedHexString:N,nonce:v}},async({txId:P,txSerializedHexString:F,nonce:v})=>{let E={nonce:v},N=JSON.stringify(E);return await p(F,{txHash:P,memo:m,extJson:N})},P=>(ae({tx_id:P}),P))},H_=ty;var q_=34,ny=()=>{let e=(0,Fi.useDispatch)(),{memo:o}=(0,Fi.useSelector)(pn),t=H_(),n=r=>{let a=r.target.value;new TextEncoder().encode(a).length<=q_&&e(cs({name:"memo",value:r.target.value}))};return oe(),tm.default.createElement(z,{confirmButtonProps:{onSubmit:t},slot:{bottom:tm.default.createElement(Yo,{value:o,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:q_}),onChange:n})}})},K_=ny;s();i();s();i();var nm=c(h()),Ar=c(k()),Ei=c(R());Ve();s();i();ca();CI();var ry=async({coin:e,fromAddress:o,toAddress:t,value:n,memo:r="",signInfo:a={}})=>{let{getRawTransaction:m}=await Bm(),u={};if(e.baseCoinId===0)u={data:{type:tn.TRANSFER,data:{to:t,amount:n,memo:r}}};else{let{info:p={}}=a,{contractAddress:g,contractName:f,tokenName:C}=p;u={data:{type:tn.TOKEN_TRANSFER,data:{from:o,to:t,memo:r,contract:g,contractName:f,functionName:qr.TRANSFER,tokenName:C,amount:n}}}}return await m(Pm.Stx,u)},J_=async({coin:e,fromAddress:o,toAddress:t,value:n,memo:r="",signInfo:a={}})=>{let m=await ry({coin:e,fromAddress:o,toAddress:t,value:n,memo:r,signInfo:a});return(await Mu({coinId:e.coinId,fromAddress:o,value:n,inputData:m}))?.gasLimit||"0"};var sy=()=>{let e=(0,Ar.useDispatch)(),o=y(),t=w(),n=(0,Ar.useSelector)(Uo),r=K(),a=(0,Ei.usePrevious)(r),{coin:m,baseCoin:u}=_(),{signInfo:d,memo:p}=(0,Ar.useSelector)(pn),g=async()=>{try{e(B(!1));let C;m.baseCoinId!==0&&Jt(d)?(C=await Uu({coinId:m.coinId,fromAddress:o,toAddress:t,value:r}),e(cs({name:"signInfo",value:C}))):C=d;let S=await J_({coin:m,baseCoin:u,fromAddress:o,toAddress:t,value:r,signInfo:C,memo:p});e(q(S))}catch{e(B(!0))}finally{e(ce(!1))}},{run:f}=(0,Ei.useDebounceFn)(g,{wait:500});(0,nm.useEffect)(()=>{n&&(e(ce(!0)),f())},[n]),(0,nm.useEffect)(()=>{n&&r!==a||(e(ce(!0)),f())},[r,t,n,p])},X_=sy;var iy=({children:e})=>(X_(),e),Y_=iy;var ay={match:e=>e===Hm,SubContainer:Y_,pages:{AddressPage:Y,AmountPage:V_,ConfirmPage:K_}},z_=ay;s();i();le();s();i();var Z_=c(h());var my=()=>(Q(),Z_.default.createElement(X,null)),$_=my;s();i();var eS=c(h()),oS=c(k());s();i();var j_=c(k());ot();var cy=({coin:e,baseCoin:o,fromAddress:t,toAddress:n,amountInt:r,nonce:a,contractAddress:m})=>{let u=Oe(),{gasFee:d}=(0,j_.useSelector)(gn);return pe(async()=>{let S={type:"transfer",nonce:a,transferData:{contractAddress:m,from:t,to:n,amount:r},resourceBounds:d?.resourceBounds},{txId:A,signature:I}=await Pe().signTransaction(S,t,o.localType);return{txId:A,signature:I}},async({txId:S,signature:A})=>{let I={serviceChargeCoinId:o.coinId,nonce:a},x=JSON.stringify(I),T={signedTx:A,coinAmount:r,coinId:e.coinId,fromAdr:t,toAdr:n,serviceCharge:d?.overallFee,txType:Ee.TRANS_OUT,txHash:S,extJson:x};return await u(T)},S=>(ae({tx_id:S}),S))},Q_=cy;var uy=()=>{let e=y(),o=w(),t=me(),{coin:n,baseCoin:r}=_(),{signInfo:a}=(0,oS.useSelector)(gn),m=Q_({coin:n,baseCoin:r,fromAddress:e,toAddress:o,amountInt:t,nonce:a?.info?.nonce,contractAddress:a?.info?.contractAddress});return oe(),eS.default.createElement(z,{confirmButtonProps:{onSubmit:m}})},tS=uy;s();i();s();i();var rm=c(h()),wi=c(k()),Ni=c(R());Ve();ot();var dy=({fromAddress:e,toAddress:o,amountInputValueInt:t,sendCoinBalanceInt:n,coin:r,isMax:a})=>{let m=(0,wi.useDispatch)(),{signInfo:u}=(0,wi.useSelector)(gn),d=(0,Ni.usePrevious)(t),p=async()=>{let A=await rn({coinId:r.coinId,fromAddr:e,toAddr:o});return m(Ia({name:"signInfo",value:A})),A},g=async A=>{let I={type:"transfer",nonce:A?.info?.nonce,transferData:{contractAddress:A?.info?.contractAddress,from:e,to:o,amount:t}};return(await Pe().signTransaction(I,e,r.localType))?.signature},f=async A=>{let{data:I}=await Kr({coinId:r.coinId,address:e,inputData:A});if(I?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return I},C=async()=>{try{let A;Jt(u)?A=await p():A=u;let I=await g(A),x=await f(I);m(q(x?.overallFee)),m(Ia({name:"gasFee",value:{...x,resourceBounds:Fd(x)}})),m(B(!1))}catch{m(B(!0))}finally{m(ce(!1))}},{run:S}=(0,Ni.useDebounceFn)(C,{wait:500});(0,rm.useEffect)(()=>{a&&(m(ce(!0)),S())},[a,n]),(0,rm.useEffect)(()=>{!o||a&&t!==d||(m(ce(!0)),S())},[o,t,a])},nS=dy;var fy=({children:e})=>{let o=y(),t=w(),n=K(),r=kn(),a=J(),{coin:m}=_(),u=Wo();return nS({fromAddress:o,toAddress:t,amountInputValueInt:n,sendCoinBalanceInt:r,feeInt:a,coin:m,isMax:u}),e},rS=fy;var ly={match:e=>e===Km,SubContainer:rS,pages:{AddressPage:Y,AmountPage:$_,ConfirmPage:tS}},sS=ly;s();i();le();s();i();var dS=c(h());s();i();var Vt=c(h()),Bi=c(k()),Li=c(R());s();i();function py(){let{coin:e}=_(),o=y(),t=ef();return async({value:n,to:r,signInfo:a})=>{try{let{gasPrice:m,inputCoins:u=[],tokenInputCoins:d=[],budget:p}=a||{},g=u.map(S=>{let{digest:A,version:I,objectId:x}=S;return{digest:A,version:I,objectId:x}}),f=new Du;if(m&&f.setGasPrice(BigInt(m)),f.setGasPayment(g||[]),f.setSender(o),p&&f.setGasBudget(BigInt(p)),e.baseCoinId===0){let S=f.splitCoins(f.gas,[n]);f.transferObjects([S],f.pure.address(r))}else if(d.length>1){let S=d.slice(1).map(x=>f.object(x.objectId)),A=f.object(d[0].objectId);f.mergeCoins(A,S);let I=f.splitCoins(A,[n]);f.transferObjects([I],f.pure.address(r))}else{let S=f.splitCoins(f.object(d[0].objectId),[n]);f.transferObjects([S],f.pure.address(r))}let C=Ru(await f.build({client:of}));return{tx:f,txBytes:C}}catch(m){throw t({from:o,error:m,to:r,coinId:e?.coinId}),m}}}var vi=py;s();i();function gy(){let{coin:e}=_(),o=y(),t=e.coinId;return async({to:n,value:r})=>(await rn({coinId:t,fromAddr:o,toAddr:n,value:r})).info||{}}var iS=gy;s();i();var aS=c(k()),mS=c(R());V();function Cy(){let e=(0,aS.useDispatch)(),{baseCoin:o}=_(),t=y();return(0,mS.useMemoizedFn)(async n=>{try{let r={dappData:JSON.stringify({to:"",from:t,value:0,data:n}),from:t,dappInfo:{},chainIndex:o?.chainId,method:"sui_normal_transfer"},a=await ct(r);e(lt(a.popupInfoList))}catch{je.error(b("wallet_extension_transaction_error_general_check_network"))}})}var cS=Cy;function uS(){let e=(0,Bi.useDispatch)(),o=(0,Bi.useSelector)(Uo),{coin:t}=_(),n=y(),r=K(),a=w(),{coinId:m}=t,[u,d]=(0,Vt.useState)(!1),p=(0,Vt.useRef)(0),g=iS(),f=vi(),C=(0,Li.usePrevious)(r),S=cS(),{run:A}=(0,Li.useDebounceFn)(async()=>{p.current++;try{e(B(!1));let I={value:String(r),to:a},x=await g(I),T=await f({...I,signInfo:x}),P=T?.tx?.blockData?.gasConfig?.budget||"0";await S(T?.txBytes),e($c(x)),e(q(P))}catch{e(B(!0))}finally{p.current--,p.current===0&&d(!1)}},{wait:300});return(0,Vt.useEffect)(()=>{o&&(d(!0),A())},[o]),(0,Vt.useEffect)(()=>{o&&r!==C||(d(!0),A())},[m,n,a,r,o]),u}function _y(){let e=uS();return Q(),dS.default.createElement(X,{confirmButtonProps:{loading:e}})}var fS=Ai(_y);s();i();var _S=c(h()),im=c(k());s();i();var sm=c(k());le();var lS=()=>{let{coin:e}=_(),o=y(),t=me(),n=(0,sm.useSelector)(ee),r=(0,sm.useSelector)(es),a=J(),m=xe({fromAddr:o,localType:ua}),u=he({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:n,localType:ua}),d=vi();return pe(async()=>await d({value:t,to:n,signInfo:{...r||{},budget:a}}),async({txBytes:A})=>{let x=await m({params:{type:"raw",data:A}});return{txBytes:A,signedTx:x}},async({txBytes:A,signedTx:I})=>{let{signature:x,hash:T}=I||{};return await u({request_type:"WaitForEffectsCert",tx_bytes:A,signatures:[x]},{txHash:T,serviceCharge:String(a||"0")})},A=>(ae({tx_id:A}),A))};s();i();var pS=c(h()),gS=c(k());var Sy=()=>{let e=(0,gS.useSelector)(es),{maxObjectLimit:o=250,inputCoins:t,tokenInputCoins:n}=e||{};return(0,pS.useCallback)(()=>Fe(t?.length||0,o)||Fe(n?.length||0,o)?{key:"wallet_extension_transfer_error_sui_excess_object"}:null,[o,t,n])},CS=()=>{let o=[Sy()];oe(o)};function Ay(){let e=lS(),o=async()=>{await e()};CS();let t=(0,im.useSelector)(dt),n=(0,im.useSelector)(Sn);return _S.default.createElement(z,{tipMessageProps:{hidden:n,blockAddressInfo:t},confirmButtonProps:{onSubmit:o}})}var SS=Ay;var Iy={match:e=>e===Vm,pages:{AddressPage:Y,AmountPage:fS,ConfirmPage:SS}},AS=Iy;s();i();le();s();i();var yS=c(h());s();i();var xS=c(k()),hS=c(R());s();i();le();var xy=()=>{let e=Hu(),o=Ku(),t=qu(),n=Ju();return async({coinId:a,from:m,to:u,amount:d,inputData:p,localType:g,chainId:f})=>{let C=[et.SAFE_ADDRESS,et.CONTRACT_ADDRESS];g===Dm&&(C.push(et.TRON_PERMISSTION),C.push(et.KYS));let S=await e({checkTypes:C,coinId:a,from:m,to:u,amount:d,txType:mc.TRANSFER,inputData:p||"0x",chainId:f}),{result:A,msg:I}=S[et.TRON_PERMISSTION]||{},x=S[et.SAFE_ADDRESS],T=S[et.KYS]?.causeRiskItem||[],P={...x,...S[et.CONTRACT_ADDRESS],causeRiskItem:T,tronPermission:{msg:I,wrongPermission:!A},address:u};return await n(P),await t({...x,...x?.blackAddressWarning}),await o(P),P}},IS=xy;s();i();var Ui=c(h()),Oi=c(k());s();i();var Di=c(h()),Ri=c(k());le();function hy({messageAttachedTons:e,invokeNotificationFee:o}){let{coin:t}=_(),n=w(),r=kn(),a=K(),m=(0,Ri.useSelector)(So),u=y(),d=(0,Ri.useSelector)(_n),p=(0,Ri.useSelector)(Uo),C=(In()?.addressType?.[Lr]||[]).find(T=>T.address===u),S=!!m,{fromJettonAccount:A,nonce:I}=m||{},x=(0,Di.useCallback)((T,P)=>{if(!S)return null;let F={to:n,seqno:I,decimal:t.decimals,amount:T,memo:d,walletVersion:C?.addressType};return t.baseCoinId===0?F={...F,type:Ea.TRANSFER,sendMode:P}:(F={...F,type:Ea.JETTON_TRANSFER,fromJettonAccount:A,messageAttachedTons:e,invokeNotificationFee:o,sendMode:an.PAY_GAS_SEPARATELY+an.IGNORE_ERRORS},m.customPayload&&(F={...F,customPayload:m.customPayload,stateInit:m.stateInit})),F},[n,S,A,d,e,o]);return(0,Di.useMemo)(()=>p?x(r,an.CARRY_ALL_REMAINING_BALANCE):x(a,an.PAY_GAS_SEPARATELY+an.IGNORE_ERRORS),[p,r,a,x])}var Mi=hy;function Ty({messageAttachedTons:e,invokeNotificationFee:o}={}){let t=(0,Oi.useDispatch)(),n=Io(),r=y(),a=(0,Oi.useSelector)(So),{ttl:m}=a||{},u=Mi({messageAttachedTons:e,invokeNotificationFee:o}),[d,p]=(0,Ui.useState)(null);return(0,Ui.useEffect)(()=>{(async()=>{if(!!u)try{u.expireAt=Gs(m);let g=await tf({fromAddress:r,body:u,walletId:n});p(JSON.stringify(g))}catch{p(null),t(B(!0)),t(ce(!1))}})()},[u,m]),d}var Gi=Ty;var yy=()=>{let e=(0,xS.useDispatch)(),[o,{setTrue:t,setFalse:n}]=(0,hS.useBoolean)(!1),{coin:r}=_(),a=y(),m=w(),u=K(),d=Gi(),{coinId:p,localType:g,chainId:f}=r,C=hn(),S=IS();return{onClick:async()=>{try{t();let I=await S({coinId:p,from:a,to:m,amount:u,inputData:d,localType:g,chainId:f}),{isDefraud:x,isSimilar:T,blackAddressWarning:P}=I;x?(e(rs(ga.DEFRAUD)),e(xa(P))):T?(e(rs(ga.SIMILAR)),e(xa(P))):e(rs("")),C()}catch(I){console.log(I)}finally{n()}},loading:o}},TS=yy;var Py=()=>{let{onClick:e,loading:o}=TS();return yS.default.createElement(Y,{confirmButtonProps:{onClick:e,loading:o}})},PS=Py;s();i();var ES=c(h());s();i();var bS=c(h()),kS=c(k());function am(){let{coin:e,baseCoin:o}=_(),t=(0,kS.useSelector)(So),n=J(),r=t?.minTonLimit,a=fe(r||"0",n||"0"),m=Fn();return(0,bS.useCallback)(()=>e.baseCoinId!==0&&Fe(a,m)?{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:ie($e(a,10**o.decimals),{precision:o.decimals,isStableCoin:o.stableCoin,useLargeNumberPrecision:!0,roundingMode:"CEIL"}).value}}:null,[a,m,e.baseCoinId,o.decimals])}function by(){let e=am();Q([e])}var FS=by;function ky(){return FS(),ES.default.createElement(X,{totalAmountProps:{type:"amount"}})}var wS=ky;s();i();var hr=c(h()),xr=c(k());s();i();var vS=c(h());var Ir=c(k());V();var NS=250;function Fy({error:e,onChange:o}){let t=(0,Ir.useDispatch)(),n=(0,Ir.useSelector)(So),r=(0,Ir.useSelector)(_n),m=n?.checkMemo?b("wallet_extension_import_desc_comment_required"):b("wallet_extension_import_desc_comment_optional");return vS.default.createElement(Yo,{value:r,placeholder:b("wallet_extension_ton_placeholder_comment_max_character2",{amount:NS}),dashed:!1,title:m,error:e,errorType:lo.TIP_TYPE.always,maxLength:NS,onChange:u=>{let d=u.target.value;t(Qc(d)),o()}})}var BS=Fy;s();i();var Wi=c(k());ot();Re();function Ey(){let e=ne(),o=In(e),t=_e(),{coin:n,baseCoin:r}=_(),a=y(),m=w(),u=(0,Wi.useSelector)(eo),d=(0,Wi.useSelector)(So),p=(0,Wi.useSelector)(Mc),g=K(),f=Mi({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:p?.invokeNotificationFee}),C=Oe();return pe(async()=>(await t({coinId:n.coinId,address:a,fromAddr:a,toAddr:m,value:"0"}))?.nonce,async P=>(f.seqno=P,f.expireAt=Gs(d?.ttl),(await Pe().signTransaction(f,a,r.localType))?.boc),async P=>{let F=await Ae(r.localType,P),v={signedTx:P,coinId:n.coinId,coinAmount:g,fromAdr:a,toAdr:f.to,serviceCharge:u,txHash:F,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:Lo.NORMAL,accountId:e,walletType:o?.serverWalletType,memo:f.memo};return await C(v)},P=>(ae({tx_id:P}),P))}var LS=Ey;s();i();var Vi=c(h());function wy(e){return(0,Vi.useCallback)(()=>e?{key:"wallet_extension_import_alert_fillin_comment",type:te.COMMON_ERROR}:null,[e])}function Ny(e){return(0,Vi.useCallback)(()=>e?{key:"wallet_extension_multisender_notice_failed_try_again",type:te.COMMON_ERROR}:null,[e])}function vy(){let e=am();return(0,Vi.useCallback)(()=>{let o=e();return o?{...o,highlight:te.FEE_BALANCE_INSUFFICIENT}:null},[e])}function By(e,o){let t=wy(e),n=Ny(o),r=vy();oe([n,t,r])}var RS=By;function Ly(){let e=(0,xr.useSelector)(So),o=e?.checkMemo,t=e?.getCustomPayloadInfoRpcError,n=(0,xr.useSelector)(_n),r=(0,xr.useSelector)(Sn),[a,m]=(0,hr.useState)(!1),u=LS(),d=async()=>o&&(!n||n.trim()==="")?(m(!0),{pause:!0}):(await u(),null);RS(a,t);let p=(0,xr.useSelector)(dt);return hr.default.createElement(z,{tipMessageProps:{hidden:r,blockAddressInfo:p},slot:{bottom:hr.default.createElement(BS,{error:a,onChange:()=>{m(!1)}})},confirmButtonProps:{onSubmit:d}})}var DS=Ly;s();i();var mm=c(h());s();i();var MS=c(h()),US=c(k());le();var Ry=()=>{let e=(0,US.useDispatch)(),{coin:o,baseCoin:t}=_(),{baseCoinId:n}=o,r=y(),a=J(),m=ne(),u=tt(r,m,Lr),d=Me(t.coinId,m,{addressType:u}),p=Me(o.coinId,m,{addressType:u}),g=d?.coinAmountInt,f=p?.coinAmountInt;(0,MS.useEffect)(()=>{if(!!g){if(n===0){let C=Yt([0,qe(g,a)]);e(Ce(C))}else e(Ce(f));e(oo(g))}},[e,n,g,f,a])},OS=Ry;s();i();var Hi=c(h()),GS=c(k()),qi=c(R());function Dy(){let e=(0,GS.useDispatch)(),o=y(),{coin:t,baseCoin:n}=_(),r=(0,Hi.useRef)(null),a=(0,qi.useDebounce)(Gi(),{wait:500});(0,qi.useMount)(()=>{e(ce(!0))}),(0,Hi.useEffect)(()=>{let m=()=>{e(B(!0)),e(Ta(null)),e(q("0"))},u=async()=>{try{let{code:p,data:g}=await Kr({address:o,tokenAddress:t.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(p!==0||!g||g?.queryGasLimitErrorUseDefault)m();else{e(B(!1)),e(Ta(g));let{invokeNotificationFee:f="0",gasLimit:C="0"}=g;e(q(t.baseCoinId===0?C:fe(C,f)))}}catch{m()}finally{e(ce(!1))}};return(()=>{!a||(r.current=setInterval(u,7e3),u())})(),()=>{clearInterval(r.current)}},[a])}var WS=Dy;s();i();var VS=c(h()),HS=c(k()),qS=c(R());function My(){let e=(0,HS.useDispatch)(),o=_e(),t=nf(),{coin:n}=_(),r=y(),a=(0,qS.useDebounce)(w(),{wait:500}),{coinId:m,baseCoinId:u}=n;(0,VS.useEffect)(()=>{m&&r&&a&&(async()=>{try{let p=await o({coinId:m,address:r,fromAddr:r,toAddr:a,value:"0"}),g=await t(p,u);e(B(!g)),e(ha(g))}catch{e(B(!0)),e(ha(null)),e(ce(!1))}})()},[a])}var KS=My;var Uy=({children:e})=>(KS(),WS(),OS(),e);function Oy({children:e}){let t=no().get("from");return mm.default.createElement(be,{fromAddress:t},mm.default.createElement(Uy,null,e))}var JS=Oy;var Gy={match:e=>e===zm,Container:JS,pages:{AddressPage:PS,AmountPage:wS,ConfirmPage:DS}},XS=Gy;s();i();en();s();i();var eA=c(h());s();i();var YS=c(h()),zS=c(k()),ZS=c(R());en();var Wy=()=>{let[e,{setFalse:o}]=(0,ZS.useBoolean)(!0),{coin:t}=_(),n=y(),r=(0,zS.useDispatch)(),{coinId:a}=t;return(0,YS.useEffect)(()=>{(async()=>{if(Number(a)!==Mr){let d=await uc({coinId:a,fromAddr:n});r(Hc(d))}o()})()},[a,n]),e},$S=Wy;s();i();var jS=c(h());function Vy(){let e=y();return(0,jS.useCallback)(o=>o===e?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[e])}function Hy(){return[Vy()]}var QS=Hy;var qy=()=>{let e=$S(),o=QS();return eA.default.createElement(Y,{addressProps:{errorFns:o},confirmButtonProps:{loading:e}})},oA=qy;s();i();var sA=c(h());s();i();var cm=c(k()),tA=c(R());V();s();i();var Ji=c(h()),Ki=c(k());var Ky=()=>{let e=(0,Ki.useSelector)(ut),o=(0,Ki.useSelector)(ee),t=K(),n=(0,Ki.useSelector)(ls),r=!o||!!n.key,[a,m]=(0,Ji.useState)("");return(0,Ji.useEffect)(()=>{(async()=>{if(!r)try{let d=await Qn(o);m(e?Bt(d,t):"")}catch(d){console.log(d)}})()},[e,r,o,t]),a},Xi=Ky;function Jy(){let e=(0,cm.useSelector)(ee),{coin:o}=_(),{chainId:t,address:n}=o,r=y(),a=Es(),m=Xi(),u=(0,cm.useSelector)(ut),d=K(),p=u?"0":d,g=u?n:e,[f,{setTrue:C,setFalse:S}]=(0,tA.useBoolean)(!1),A=bn();return{onClick:async()=>{try{C();let{popupInfoList:x}=await ct({dappInfo:{},to:g,method:"wallet_inner_transfer",from:r,chainIndex:t,inputData:m,amount:p});if(x?.length)try{await a(x),A()}catch{}else A()}catch{je.error(b("wallet_extension_transaction_error_general_check_network"))}finally{S()}},loading:f}}var nA=Jy;s();i();var um=c(h()),Tr=c(k()),Jn=c(R());var Xy=()=>{let[e,{setTrue:o,setFalse:t}]=(0,Jn.useBoolean)(!1),n=(0,Tr.useDispatch)(),r=_e(),a=w(),m=(0,Tr.useSelector)(ut),u=(0,Tr.useSelector)(Uo),d=K(),p=(0,Jn.usePrevious)(d),g=Iu(),{coin:f}=_(),C=Xi(),{coinId:S}=f,A=async()=>{let T={coinId:S,address:g,fromAddr:g,value:m?"0":d,toAddr:a,inputData:C};try{let{fee:P}=await r(T);n(q(P)),n(B(!1))}catch{n(B(!0))}finally{t()}},{run:I}=(0,Jn.useDebounceFn)(A,{wait:500});return(0,um.useEffect)(()=>{u&&(o(),I())},[u]),(0,um.useEffect)(()=>{u&&d!==p||(o(),I())},[d,C,u]),e},rA=Xy;var Yy=()=>{let e=rA(),{loading:o,onClick:t}=nA();return Q(),sA.default.createElement(X,{confirmButtonProps:{loading:e||o,onClick:t}})},iA=Yy;s();i();var dA=c(h()),fA=c(k());s();i();var yr=c(k()),aA=c(gI());en();var zy=()=>{let e=Oe(),{coin:o}=_(),t=y(),n=(0,yr.useSelector)(ee),r=(0,yr.useSelector)(eo),a=(0,yr.useSelector)(ut),m=K(),u=(0,yr.useSelector)(Ro),d=xe({fromAddr:t,localType:da,walletId:u}),p=_e();return pe(async()=>{let I=a?"0":m,x=await Qn(n),T=a?Bt(x,m):"",P={coinId:o.coinId,address:t,fromAddr:t,toAddr:n,value:I,inputData:T};return await p(P)},async I=>{let{timestamp:x,expiration:T,ref_block_bytes:P,ref_block_hash:F,feelimit:v,contractAddress:E,asset:N}=I,D={fromAddress:t,toAddress:n,amount:m,timestamp:x,expiration:T,refBlockBytes:P,refBlockHash:F},U={};return o.baseCoinId===0?U={type:at.TRANSFER,data:D}:a?U={type:at.TOKEN_TRANSFER,data:{...D,feeLimit:v,contractAddress:E}}:U={type:at.ASSET_TRANSFER,data:{...D,assetName:(0,aA.bufferToHex)(l.Buffer.from(N))}},await d({params:U})},async I=>{let x=await Ae(da,I),T=await Qn(n),P=a?Bt(T,m):"",F={signedTx:I,coinAmount:m,coinId:o.coinId,fromAdr:t,toAdr:n,serviceCharge:r,txHash:x,inputData:P};return await e(F)},I=>(ae({tx_id:I}),I))},mA=zy;s();i();var cA=c(h()),uA=c(k());function Zy(e,o){return(0,cA.useCallback)(()=>e?{text:o,type:te.COMMON_ERROR}:null,[e,o])}function dm(){let e=fd(),o=(0,uA.useSelector)(Ec),t=Zy(o.wrongPermission,o.msg);oe({fns:[t,...e],override:!0})}function $y(){let e=mA(),o=async()=>{await e()},t=(0,fA.useSelector)(dt);return dm(),dA.default.createElement(z,{confirmButtonProps:{onSubmit:o},tipMessageProps:{blockAddressInfo:t}})}var lA=$y;var jy={match:e=>e===Mr,pages:{AddressPage:oA,AmountPage:iA,ConfirmPage:lA}},pA=jy;s();i();le();s();i();var _A=c(h());s();i();var gA=c(R());Qt();jt();var Qy=()=>{let{baseCoin:e}=_();return(0,gA.useMemoizedFn)(async o=>{let t={account:o,coinId:e.coinId},n;try{n=await Rm(po.queryAccountExist,t)}catch(r){console.log(r)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function eP(){let e=Vo(),o=Qy();return[e,o]}var CA=eP;var oP=()=>{let e=CA();return _A.default.createElement(Y,{addressProps:{errorFns:{override:!0,fns:e},extraProps:{disableRequestDomain:!0}}})},SA=oP;s();i();var AA=c(h());function tP(){return Q(),AA.default.createElement(X,null)}var IA=tP;s();i();var Pr=c(h());V();s();i();var xA=c(k());ot();var nP=e=>{let{coin:o,baseCoin:t}=_(),n=y(),r=(0,xA.useSelector)(ee),a=me(),m=Oe();return pe(async()=>await rn({coinId:o.coinId,fromAddr:n,toAddr:r}),async C=>{let{info:S}=C,{chainid:A,compression:I,refBlockNumber:x,refBlockId:T,refBlockTimestamp:P,expireSeconds:F,precision:v,symbol:E,contract:N}=S,D={type:0,from:n,to:r,amount:a,memo:e,precision:v,symbol:E,contract:N,common:{chainId:A,compression:I,refBlockNumber:x,refBlockId:T,refBlockTimestamp:P,expireSeconds:F}};return await Pe().signTransaction(D,n,t.localType)},async C=>{let S={memo:e},A=await Ae(o.localType,C),I={signedTx:C,coinAmount:a,coinId:o.coinId,fromAdr:n,toAdr:r,serviceCharge:"0",extJson:JSON.stringify(S),txHash:A};return await m(I)},C=>(ae({tx_id:C}),C))},hA=nP;var TA=256;function rP(){let[e,o]=(0,Pr.useState)(""),t=hA(e),n=async()=>{await t()},r=a=>{let m=a.target.value;new TextEncoder().encode(m).length<=TA&&o(a.target.value)};return oe(),Pr.default.createElement(z,{slot:{bottom:Pr.default.createElement(Yo,{value:e,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:TA}),onChange:r})},confirmButtonProps:{onSubmit:n}})}var yA=rP;var sP={match:e=>e===qm,pages:{AddressPage:SA,AmountPage:IA,ConfirmPage:yA}},PA=sP;s();i();le();s();i();var br=c(h()),pm=c(k());V();s();i();var fm=c(k()),lm=c(R());var iP=1,aP=()=>{let e=(0,fm.useSelector)(Wc);return(0,lm.useMemoizedFn)(()=>e?{key:e}:null)},mP=()=>{let e=(0,fm.useSelector)(Oc),{coin:o}=_();return(0,lm.useMemoizedFn)(t=>o.baseCoinId!==0||e?null:Le(t,iP)?{key:"wallet_extension_transfer_alert_unregistered_ripple_send"}:null)},bA=()=>{let e=aP(),o=yn(),t=mP();Q({fns:[e,o,t],override:!0})};s();i();var Yi={title:"_title_12117_1",text:"_text_12117_5",icon:"_icon_12117_9"};var cP=()=>{bA();let e=(0,pm.useSelector)(Gc),o=(0,pm.useSelector)(Sn);return br.default.createElement(X,{totalAmountProps:{loading:o||e,title:br.default.createElement(W.Box,{className:Yi.title},br.default.createElement("div",{className:Yi.text},b("extension_wallet_send_text_transfer_available")),br.default.createElement(Ao,{size:Ao.SIZE.xxs,tooltip:b("wallet_extension_transfer_tooltips_ripple_balance"),icon:"okx-wallet-plugin-information-circle",className:Yi.icon})),type:"amount"},confirmButtonProps:{loading:o||e}})},kA=cP;s();i();var gm=c(h());s();i();var Ht=c(h()),zi=c(k());V();s();i();var Xn={root:"_root_1cdky_1",input:"_input_1cdky_1",wrapper:"_wrapper_1cdky_1",inner:"_inner_1cdky_4",extra:"_extra_1cdky_7"};var uP=4294967295,dP=()=>{let e=(0,zi.useDispatch)(),o=(0,zi.useSelector)(ns),t=b("wallet_extension_transfer_input_placeholder_optional");return Ht.default.createElement(ko,{className:Xn.root,bordered:!1},Ht.default.createElement(Dt,{title:b("wallet_extension_transfer_input_label_tag")},Ht.default.createElement(lo.Number,{max:uP,min:0,precision:0,placeholder:t,size:lo.SIZE.xl,autoResize:!0,value:o,onChange:n=>{e(eu(n))},className:Xn.input,inputClassName:Xn.wrapper,innerClassName:Xn.inner}),Ht.default.createElement(Z.Text,{className:Xn.extra},b("wallet_extension_transfer_input_tips_ripple_exchange"))))},FA=(0,Ht.memo)(dP);s();i();var EA=c(k());var fP=()=>{let{coin:e}=_(),o=y(),t=w(),n=me(),r=J(),a=ne(),m=_e(),u=(0,EA.useSelector)(ns),d=qn(),p=xe({fromAddr:o,localType:e.localType,walletId:a}),g=he({coinId:e.coinId,coinAmount:n,fromAddr:o,toAddr:t,localType:e.localType,networkFee:r,walletId:a}),f=async()=>await m({coinId:e.coinId,address:o,fromAddr:o,toAddr:t}),C=T=>{let{sequence:P,lastLedgerSequence:F}=T;return{type:"transfer",base:{account:o,flags:0,fee:r,sequence:P,lastLedgerSequence:F},data:{transactionType:"Payment",amount:n,destination:t,...u?{destinationTag:Number(u)}:{}}}};return pe(f,T=>({params:C(T)}),async T=>{let{hash:P,tx_blob:F}=await p(T);return{signedTx:F,txHash:P,extJson:JSON.stringify(T.params)}},async({signedTx:T,txHash:P,extJson:F})=>{await g(T,{extJson:F,txHash:P})},d)},wA=fP;var lP=()=>{let e=wA();return gm.default.createElement(z,{confirmButtonProps:{onSubmit:e},slot:{bottom:gm.default.createElement(FA,null)}})},NA=lP;s();i();s();i();var vA=c(h()),BA=c(k()),LA=c(R());var pP=()=>{let{baseCoin:e}=_(),o=w(),t=(0,BA.useDispatch)(),n=(0,LA.useMemoizedFn)(async r=>{if(!!r)try{t(ya(!0));let{register:a}=await lc({chainId:e?.chainId,address:r});t(tu(a))}catch{t(nu("wallet_extension_transfer_error_address_info_unknown"))}finally{t(ya(!1))}});(0,vA.useEffect)(()=>{n(o)},[o,n])},RA=pP;s();i();var Zi=c(h()),DA=c(k()),MA=c(R());var gP=()=>{let e=(0,DA.useDispatch)(),{coin:o}=_(),t=y(),n=w(),r=_e(),a=(0,Zi.useCallback)(async()=>{try{let u=await r({coinId:o.coinId,address:t,fromAddr:t,toAddr:n});e(ou(u));let{fee:d}=u;e(q(d))}catch{e(B(!0))}finally{e(ce(!1))}},[r,o.coinId,t,n,e]),{run:m}=(0,MA.useDebounceFn)(a,{wait:500});(0,Zi.useEffect)(()=>{e(ce(!0)),e(B(!1)),m()},[e,a,m])},UA=gP;s();i();var OA=c(h()),kr=c(k());var CP=()=>{let e=(0,kr.useDispatch)(),{coin:o,baseCoin:t}=_(),{baseCoinId:n}=o,r=ne(),m=Me(t.coinId,r)?.coinAmountInt,d=(0,kr.useSelector)(Uc)?.needRemainedAmount,p=(0,kr.useSelector)(eo);(0,OA.useEffect)(()=>{if(!m||!d||!p)return;let g=Yt([qe(m,fe(d,p)),0]);e(Ce(g))},[e,n,d,m,p])},GA=CP;var _P=({children:e})=>(UA(),RA(),GA(),e),WA=_P;var SP={match:e=>e===Zm,SubContainer:WA,pages:{AddressPage:Y,AmountPage:kA,ConfirmPage:NA}},VA=SP;s();i();s();i();var ea=c(h());s();i();var JA=c(h()),Qi=c(k()),XA=c(R());Ve();s();i();function AP(){let e=Fu();return(o,t,n)=>{let r=t||0,a=Fe(n,0)?$e(r,n):"0",m=e[o];return bm(He(a,10**(m.decimals||0)),0)}}var $i=AP;s();i();var HA=c(k()),qA=c(we()),KA=c(R());function IP(){let{coinId:e}=(0,qA.useParams)(),o=y(),t=(0,HA.useSelector)(ee);return(0,KA.useMemoizedFn)(async()=>(await nn({coinId:e,fromAddr:o,toAddr:t,value:"0"}))?.data)}var ji=IP;function xP(){let e=(0,Qi.useDispatch)(),[o,t]=(0,JA.useState)(!1),n=(0,Qi.useSelector)(iu),r=ji(),a=pd(),m=$i();return(0,XA.useMount)(()=>{t(!0),(async()=>{try{let p=(await r())?.info||{},g={};if(n!==-1)g=(p?.coinFeeList||[]).find(({coinId:C})=>C===n);else{let C=Tm(p?.coinFeeList||[],S=>a(S.coinId).currencyAmount||0);C&&(g=C.pop())}let f=m(g?.coinId,p?.methodFeeList?.transfer,g?.rate);e(ft(g?.coinId)),e(q(f)),e(qc(p))}finally{t(!1)}})()}),o}var YA=xP;function hP(){let e=YA();return Q(),ea.default.createElement(X,{confirmButtonProps:{loading:e}})}function TP(){let{coin:e}=_();return ea.default.createElement(be,{fixed:!!e.vdecimalNum},ea.default.createElement(hP,null))}var zA=TP;s();i();var qt=c(h());var eI=c(R());s();i();var ZA=c(k());ot();Re();le();function yP(){let e=Oe(),{coin:o}=_(),t=y(),n=(0,ZA.useSelector)(ee),r=J(),a=pt(),m=me(),u=ji(),{coin:d}=xs(a,!1);return pe(u,async(f={})=>{let{info:C={}}=f,{chainId:S,accountId:A,nonce:I,tokenId:x,coinFeeList:T=[]}=C,P=T.find(({coinId:E})=>E===a)||{},F={type:at.TRANSFER,accountId:parseInt(A,10),nonce:I,from:t,chainId:S,to:n,tokenId:parseInt(x,10),tokenSymbol:o.symbol,decimals:o.decimals,feeTokenId:parseInt(P.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:r,amounts:m};return await Pe().signTransaction(F,t,Um)},async f=>{let{signature:C,tx:S}=f||{},{txHash:A,...I}=S||{},x={txSource:Lo.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:C,tx:I}),fromAdr:t,coinAmount:m,coinId:o.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:A,extJson:JSON.stringify({serviceChargeCoinId:a})};return await e(x)})}var $A=yP;s();i();var ze=c(h()),oa=c(k()),ta=c(R()),jA=c(vo());V();s();i();var Yn={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var PP=({coinId:e,feeCoinAmountInt:o,selectedCoinId:t,onSelect:n,setSupplyGas:r,...a})=>{let m=Me(e),u=m?.coinAmountInt,d=L.gte(u,o);return ze.default.createElement(ba.Card,{hovered:d,onClick:()=>{d&&n?.({coinId:e,feeCoinAmountInt:o})},selected:e===t},ze.default.createElement(W.Space,{space:12,className:(0,jA.default)(Yn["select-networkFee-card-content"],{[Yn["select-networkFee-card-content-disable"]]:!d})},ze.default.createElement(Ao,{size:Ao.SIZE.lg,src:m?.image,text:m?.text}),ze.default.createElement(W.Space,{space:2,direction:W.DIRECTION.vertical,...a},ze.default.createElement(Z.Text,{strong:!0},m?.symbol),ze.default.createElement(Z.Text,{size:Z.SIZE.xs,type:Z.TYPE.secondary},d?b("developer_mode_send_text_balanceprice",{balance:ie(u,{useContractPrecision:!0,contractPrecision:{decimals:m?.decimals},precision:m?.decimals,useLargeNumberPrecision:!0}).value}):b("wallet_extension_placeorder_tooltips_insufficient",{token:m?.symbol})))),!d&&ze.default.createElement(ge,{category:ge.CATEGORY.fill,type:ge.TYPE.gray,size:ge.SIZE.xxs,onClick:p=>{p?.stopPropagation(),r({supplyGasVisible:!0,supplyGasCoinId:e})}},b("extension_send_btn_fill_up_token",{token:m?.symbol})))},bP=({visible:e,onToggle:o})=>{let t=pt(),n=(0,oa.useDispatch)(),r=y(),a=Io(),m=$i(),[{supplyGasVisible:u,supplyGasCoinId:d},p]=(0,ta.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),g=(0,oa.useSelector)(wc),f=g?.coinFeeList||[],C=g?.methodFeeList?.transfer,S=(0,ta.useCreation)(()=>f.map(({rate:x,coinId:T})=>{let P=m(T,C,x);return{coinId:T,feeCoinAmountInt:P}}),[f,C]),A=({coinId:x,feeCoinAmountInt:T})=>{o?.(),n(ft(x)),n(q(T))},I=({coinId:x,feeCoinAmountInt:T})=>ze.default.createElement(PP,{coinId:x,selectedCoinId:t,feeCoinAmountInt:T,onSelect:A,setSupplyGas:p});return e?ze.default.createElement(W.Portal,{component:W.Container,className:Yn["select-networkFee"]},ze.default.createElement(bu,{onBack:o,onClose:o,title:b("wallet_transfer_subtitle_network_fee")}),ze.default.createElement(W.Box,{className:Yn["select-networkFee-content"]},ze.default.createElement(Z.Text,{className:Yn["select-networkFee-title"]},b("wallet_extension_send_alert_choose_token")),ze.default.createElement(ba,{space:16,dataSource:S,renderItem:I})),ze.default.createElement(Vu,{walletId:a,address:r,visible:u,closeCallback:()=>{p({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},QA=bP;function kP(){let[e,{toggle:o}]=(0,eI.useBoolean)(!1),t=$A(),n=async()=>{await t()};return oe(),qt.default.createElement(qt.default.Fragment,null,qt.default.createElement(z,{networkFeeProps:{onClick:o,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),qt.default.createElement(QA,{visible:e,onToggle:o}))}function FP(){let{coin:e}=_();return qt.default.createElement(be,{fixed:!!e.vdecimalNum},qt.default.createElement(kP,null))}var oI=FP;var EP={match:e=>yc(e),pages:{AddressPage:Y,AmountPage:zA,ConfirmPage:oI}},tI=EP;s();i();le();s();i();var ra=c(h());s();i();var nI=c(h()),na=c(k()),rI=c(R());function wP(){let e=(0,na.useDispatch)(),{coin:o}=_(),t=y(),n=(0,na.useSelector)(ee),r=Ud(),[a,m]=(0,nI.useState)(!1);return(0,rI.useMount)(()=>{m(!0),(async()=>{let d={coinId:o.coinId,fromAddr:t,toAddr:n,value:"0"};try{let p=await r("Transfer",d);if(p){let{info:g,feeCoin:f,fee:C}=p;e(Zc({info:g,feeCoin:f})),e(ft(f.coinId)),e(q(C)),e(B(!1))}}catch{e(B(!0))}finally{m(!1)}})()}),a}var sI=wP;s();i();var iI=c(h());ca();function Cm(){let{coin:e}=_();return(0,iI.useCallback)(async o=>{let{ZksyncWallet:t}=await $n(),n=He(o,10**e.decimals),r=await t.getCloseAmounts(n);return Er(r,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:ie($e(r,10**e.decimals),{precision:e.displayPrecision,useLargeNumberPrecision:!0,isStableCoin:e.stableCoin}).value,symbol:e.symbol},type:te.COMMON_ERROR}},[])}function NP(){let o=[Cm()];Q(o)}var aI=NP;function vP(){let e=sI();return aI(),ra.default.createElement(X,{confirmButtonProps:{loading:e}})}function BP(){let{coin:e}=_();return ra.default.createElement(be,{fixed:!!e.vdecimalNum},ra.default.createElement(vP,null))}var mI=BP;s();i();var sa=c(h());s();i();var _m=c(k());ot();Re();le();function LP(){let e=Oe(),{coin:o}=_(),t=y(),n=(0,_m.useSelector)(ee),r=J(),a=pt(),m=K(),u=(0,_m.useSelector)(Lc),d=async()=>{let{info:g,feeCoin:f}=u||{},{accountId:C,nonce:S}=g||{},A={type:at.TRANSFER,from:t,to:n,accountId:parseInt(C,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:m,fees:r,decimals:o.decimals,nonce:parseInt(S,10)};return await Pe().signTransaction(A,t,Om)},p=async g=>{if(g?.code)throw new Error(Pn);let{signature:f,tx:C}=g||{},{txHash:S,...A}=C||{},I={txSource:Lo.NORMAL,signedTx:JSON.stringify({signature:f,tx:A}),fromAdr:t,serviceCharge:C?.fee,toAdr:C?.to,coinAmount:m,coinId:o.coinId,txHash:S,extJson:JSON.stringify({serviceChargeCoinId:a})};return await e(I)};return async()=>{let g=await d();return p(g)}}var cI=LP;s();i();var uI=c(h());function RP(){let e=Cm();return(0,uI.useCallback)(async o=>{let t=await e(o);return t?{...t,highlight:Rt.AMOUNT}:null},[e])}function DP(){let o=[RP()];oe(o)}var dI=DP;function MP(){let e=cI(),o=async()=>e();return dI(),sa.default.createElement(z,{confirmButtonProps:{onSubmit:o}})}function UP(){let{coin:e}=_();return sa.default.createElement(be,{fixed:!!e.vdecimalNum},sa.default.createElement(MP,null))}var fI=UP;var OP={match:e=>e===Wm,pages:{AddressPage:Y,AmountPage:mI,ConfirmPage:fI}},lI=OP;var GP=[Xp,zl,Hf,Ap,bg,dC,G_,pA,tI,lI,AS,z_,PA,sS,lg,xC,HC,XS,s_,VA],pI=GP;var WP=({coinId:e,protocolId:o,baseCoinId:t})=>{let n={},r=pI.find(({match:g})=>g(t,e,o))||n,{Container:a=({children:g})=>Ze.default.createElement(Ze.default.Fragment,null,g),SubContainer:m=({children:g})=>Ze.default.createElement(Ze.default.Fragment,null,g)}=r,{AddressPage:u,AmountPage:d,ConfirmPage:p}=r.pages||{};return Jt(r)?null:Ze.default.createElement(a,null,Ze.default.createElement(Ft.Switch,null,Ze.default.createElement(Ft.Route,{exact:!0,path:`${De}/:coinId?${mn}`,component:u}),Ze.default.createElement(m,null,Ze.default.createElement(Ft.Route,{exact:!0,path:`${De}/:coinId?${cn}`,component:d}),Ze.default.createElement(Ft.Route,{exact:!0,path:`${De}/:coinId?${un}`,component:p}))),Ze.default.createElement(sf,null))},VP=(0,Ze.memo)(WP),HP=()=>{let{coinId:e}=(0,Ft.useParams)(),{coin:o,baseCoin:t}=xs(e,!0);return Ze.default.createElement(VP,{coinId:o?.coinId,baseCoinId:t?.coinId,protocolId:o?.protocolId})},Noe=HP;export{Noe as default};
//# sourceMappingURL=SendPageContainer-XTTXSSYF.js.map
