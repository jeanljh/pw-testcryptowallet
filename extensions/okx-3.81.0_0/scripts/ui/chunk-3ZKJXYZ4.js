import{h as Y,i as z}from"./chunk-2QHGKEME.js";import{da as v,i as K,l as w,m as $}from"./chunk-WU2LB6XB.js";import{c as M,e as st}from"./chunk-EN2WHAVL.js";import{E as N,a as X}from"./chunk-EFOY37CC.js";import{b as s,c as h}from"./chunk-GR7YC6C3.js";import{A as k,B as j,C as L,E as a,J as C}from"./chunk-O33H5V3V.js";import{Ia as D,Ib as V,Ja as G,Sb as ot,Tb as A,Vb as O,Wb as U,_b as rt,na as S,qa as F,tb as et}from"./chunk-COF7YKSN.js";import{I as H,U as T,j as W,va as J}from"./chunk-XFTQD4B2.js";import{o as i,q as c}from"./chunk-Y5OH3DDZ.js";i();c();h();C();var y=(t={},n={})=>a(s.getGasSignInfo,t,n),Q=async t=>{let n={scenario:w.SCENARIO_SEND_COIN,...t},{data:e={}}=await y(n);return e},Z=(t={})=>a(s.postGasLimit,t),at=(t={})=>a(s.postTxToastCheckUrl,t),pt=async(t,n)=>{let e=s.postTx,{data:o}=await a(e,t,n);return o},gt=t=>a(s.getDomainAddress,t),xt=async(t={})=>{try{let{data:n}=await a(s.postExtFee,t);return n?.extFee}catch{return"0"}},ht=async(t,n)=>{let e=s.postBatchTx,{data:o}=await a(e,t,n);return o};var kt=async(t,n)=>{let e=s.postUTXOInfoFromTxs;return a(e,t,n)};var Ct=async t=>{let{data:n}=await a(s.preExecTransaction,t),{txInfo:e,...o}=n;return{...o,...e}},yt=async t=>{let{data:n}=await a(s.preExecTransactionV2,t),{txInfo:e,...o}=n;return{...o,...e}},It=async t=>{let{data:n}=await a(s.batchTransferAddressCheck,t);return n},St=async(t,n)=>{let{data:e=[]}=await at({checkTypes:[v.OVERWRITTEN],coinId:t,from:n});return e.find(r=>r.checkType===v.OVERWRITTEN)};i();c();J();h();C();st();var R=async()=>({walletId:await M().getSelectedWallet()}),Nt=async(t={...K},n)=>{let{walletId:e}=await R(),o=s.getAllTxListUrl,r={lastRowId:"",limit:20,accountId:e,...t};try{let{data:d={}}=await k(o,r,T({walletSignParams:{needWalletSign:!0,walletId:e}},n));return d}catch(d){throw new Error(d)}},Lt=async(t={coinId:3,txId:"",txHash:"",address:"",orderId:"",orderType:""},n)=>{let{walletId:e}=await R(),{coinId:o}=t,r=s.postTxDetailInfoUrl,d={accountId:e,...t,coinId:o};try{let{data:m={}}=await a(r,d,T({walletSignParams:{needWalletSign:!0,walletId:e}},n));return m}catch(m){throw new Error(m)}},Dt=async(t={coinId:3,address:""},n)=>{let{walletId:e}=await R(),{coinId:o}=t,r=s.postCoinTxListUrl,d={lastRowId:"",limit:20,accountIds:[e],coinId:o,...t};try{let{data:m={}}=await a(r,d,T({walletSignParams:{needWalletSign:!0,walletId:e}},n));return m}catch(m){throw new Error(m)}},Gt=async(t={coinId:3,txHash:"",address:""},n)=>{let{walletId:e}=await R(),{coinId:o}=t,r=s.postBtcAccelerationFeeInfo,d={...t,coinId:o},{data:m={}}=await a(r,d,T({walletSignParams:{needWalletSign:!0,walletId:e}},n));return m},Bt=async()=>{try{let{data:t={}}=await k(s.getTxTypeOfTxHistory);return t?.content||[]}catch(t){throw new Error(t)}},Ft=async(t={symbolLike:"",pageNo:0},n)=>{let{walletId:e}=await R(),o=await M().getUserUniqueId(),r={...t,aggregation:!1,accountId:e,userUniqueId:o,excludeCoinIds:[]};try{let{data:d={}}=await a(s.postCoinSearchOfTxHistory,r,T({walletSignParams:{needWalletSign:!0,walletId:e}},n));return d}catch(d){throw new Error(d)}};i();c();J();ot();et();rt();h();C();i();c();var E=class{constructor(n=50){this.cache=new Map;this.keysIndex=0;this.keys=Array.from(new Array(n))}delete(n){this.keys=this.keys.map(e=>e===n?void 0:e),this.keysIndex=(this.keysIndex-1)%this.keys.length,this.cache.delete(n)}clear(){this.cache.clear(),this.keys.fill(void 0),this.keysIndex=0}get(n){return this.cache.get(n)}set(n,e){if(!this.keys.includes(n)){let o=this.keys[this.keysIndex];o!==void 0&&this.cache.delete(o),this.keys[this.keysIndex]=n,this.keysIndex=(this.keysIndex+1)%this.keys.length}this.cache.set(n,e)}};i();c();function b(t){return/^\d+$/.test(String(t))}var B=null,tt=[],nn=async t=>{let{data:n={}}=await a(s.postAddressRegisterStatus,t);return n},en=async t=>{let{data:n={}}=await a(s.postCheckTransfer,t);return n},on=async t=>{try{let{data:n=[]}=await a(s.getCoinList,t);return n.length?n.map(e=>z(e)):[]}catch{return[]}},rn=(t={})=>Object.keys(t).some(n=>["coinId","chainId","address","aggregation","coinType","symbol"].includes(n)),sn=async t=>{try{let n={coinIds:[t]},{data:e=[]}=await a(s.postMarketUrl,n,{headers:{currency:"usd"}});return e[0]??null}catch{return null}},an=async t=>{if(!t||H(t))return null;B||(B=new E(50));let{address:n,aggregation:e,symbol:o,coinId:r,chainId:d,coinType:m}=t,f={};if(e)f.aggregationSymbol=o;else if(b(r)){f.coinId=+r;let u=B.get(r);if(u)return u}else(o||n)&&(o&&(f.symbol=o),n&&(f.contractAddress=n),b(d)&&(f.chainId=+d),b(m)&&(f.coinType=+m));try{let{data:u={}}=await a(s.getCoinDetail,f);if(u.length){let x=new Map,p=null;return u.forEach(l=>{let I=Y(l);if(B.set(I.coinId,I),l.aggregation){let P=x.get(l.symbol);P?P.childrenCoin.push(I):(p={...I,childrenCoin:[I]},x.set(l.symbol,p))}else p=I}),p}return null}catch{return null}},it=({account:t,chainList:n})=>{let e={},o={},r={};return{result:n.reduce((m,f)=>{let{localType:u,chainName:x,chainId:p,baseChain:l}=f;return u===S||u===F?(e[u]={chainName:x,baseChain:l,chainId:p,localType:u},m):u===D?(o.chainName=x,o.chainId=p,o.localType=u,o.baseChain=l,m):u===G?(r.chainName=x,r.chainId=p,r.localType=u,r.baseChain=l,m):(t[u]&&m.push({address:t[u],chainName:x,chainId:p,localType:u,baseChain:l}),m)},[]),bitcoin:e,near:o,ton:r}},ct=({accountsMap:t,bitcoin:n,segwitAddressType:e})=>{let o=[F,S],r=[];return o.forEach(d=>{let m=t[S],f=n[d];if(m&&f){let u=e[S]===A.SEGWIT_NESTED?A.SEGWIT_NESTED_49:A.SEGWIT_NESTED,x=O[S].reduce((p,l)=>(u!==l&&m[l]&&p.unshift({...f,address:m[l].address?m[l].address:f.address,addressType:l}),p),[]);r=[...r,...x]}}),r},nt=(t,n,e)=>O[e].reduce((o,r)=>(t[r]&&o.unshift({...n,address:t[r].address,addressType:r}),o),[]),ut=(t,n,e)=>{e&&tt.filter(_=>_.chainId===n.chainId);let{account:o,segwitAddressType:r,accountsMap:d}=t,m=V(),f=it({account:o,chainList:m}),{result:u}=f,{bitcoin:x,near:p,ton:l}=f;u=[...ct({accountsMap:d,bitcoin:x,segwitAddressType:r}),...u];let P=d[D];P&&(u=[...nt(P,p,D),...u]);let q=d[G];return q&&(u=[...nt(q,l,G),...u]),tt=u,u.filter(_=>_.chainId===n.chainId)},cn=async(t,n,e,o)=>{try{let{data:r={}}=await a(s.getCoinDetail,t);if(r.length){let d={coins:r||[],token:{walletId:e,accountId:e,coinAmount:"0",coinAmountOrigin:"0",currencyAmount:"0",default:r[0].isDefault,imageUrl:n?.logo,name:n.name,symbol:n.symbol,rank:r[0]?.rank,subBalanceType:n.subBalanceType,voucherToken:n.voucherToken,coinBalanceDetails:[]}},m=U[S][A.LEGACY];return r.forEach((f,u)=>{let x=ut(o,f,u),p=x.length===1?W(x,"[0]",{}):x[u],l=U?.[p.baseChain]?.[p?.addressType]||m;d.coins[u].addressType=l,d.coins[u].userAddress=p.address,d.token.coinBalanceDetails.push({address:f.address??n.tokenAddress,chainId:f.chainId,coinAmount:"0",coinAmountOrigin:"0",coinId:f.coinId,currencyAmount:"0",pluginCoinType:f.coinType,addressType:l,userAddress:p.address||n.address,voucherToken:Boolean(f.voucherToken??n.voucherToken),displayPrecision:f.displayPrecision,stableCoin:f.stableCoin})}),d}return null}catch{return null}},un=async(t={})=>k(s.getCoinAvailable,t);async function dn(t,n){return a(s.reportMaliciousToken,t,n)}async function mn(t,n){return k(s.reportTokenReasonList,t,n)}i();c();i();c();i();c();h();C();var Cn=async(t={})=>{let{data:n={}}=await y(t),{info:e={}}=n;return e},yn=async(t={})=>{let{data:n={}}=await y(t),{info:e={}}=n,{recentBlockhash:o}=e;return o},In=(t={})=>{let{mint:n,address:e}=t,o=s.getSolanaTokenAccountAddressWithMint.replace("{mint}",n).replace("{address}",e);return k(o)};async function Sn(t,n){let e=await L(s.requestSolanaMethodUrlToFullnode,{jsonrpc:"2.0",id:N(),method:t,params:n});return e.status===200?e.data:Promise.reject(e)}async function wn(t){let{data:n={}}=await a(s.getSolanaJitoSignInfo,t);return n}i();c();var En=async t=>{let n={...t,scenario:w.SCENARIO_SEND_COIN},{data:e={}}=await y(n),{info:o={}}=e,{trc:r}=o;return r===$.TRC20},bn=async(t,n)=>{let o={...{scenario:w.SCENARIO_SEND_COIN,...n},coinId:t?.coinId,fromAddr:t?.address},{data:r={}}=await y(o);return r};i();c();h();C();var vn=async t=>{let{data:n}=await a(s.getAptosGasLimit,{inputData:t}),{gasLimit:e}=n;return e},Mn=async(t,n,e)=>{let o={...t,scenario:w.SCENARIO_SEND_COIN},{data:r={}}=await y(o),{info:d={}}=r,{maxGasAmount:m="0"}=d,{gasUnitPrice:f="0"}=d;if(n)try{typeof n=="function"&&(n=await n(r));let{data:{gasLimit:x}}=await a(s.getAptosGasLimit,{inputData:n,chainIndex:e});m=x}catch{m="8000"}let u=X(f,m);return{gasUnitPrice:f,maxGasAmount:m,fee:u}},qn=async(t={})=>{let{address:n,chainIndex:e=""}=t,o=s.getAptosABI.replace("{moduleAddress}",n).replace("{chainIndex}",e),{data:r}=await j(o);return r},Wn=async t=>{let n=s.postAptosNftClaim,{data:e}=await a(n,{address:t,pageNo:1,pageSize:1e3});return e},Hn=async(t,n,e)=>{let o=s.saveAptosNftSaveOrder,{data:r}=await a(o,{scene:t,chain:637,txHash:n,walletAddress:e,source:4,appVersion:"2.23.9"});return r};i();c();i();c();h();C();async function dt(t){let n=await L(s.requestSuiMethodUrlToFullnode,{jsonrpc:"2.0",id:N(),...t||{}});return n.status===200?n.data:Promise.reject(new Error)}i();c();var re=async(t={})=>{let{coinId:n,from:e,to:o}=t,r={coinId:n,fromAddr:e,value:"0",toAddr:o},{info:d={}}=await Q(r);return d},se=async(t={})=>{let{coinId:n,from:e,inputData:o}=t,r={coinId:n,address:e,value:"0",inputData:o},{data:d={}}=await Z(r);return d.gasLimit};i();c();h();C();var me=async t=>{let n=s.postPendingBalanceDetail;return(await a(n,t)).data||{}},fe=async t=>{let n=s.getBrcJson;return(await k(n,t)).data||{}};i();c();i();c();h();C();i();c();h();C();i();c();C();h();i();c();h();C();i();c();C();h();var Ke=t=>a(s.getGasStationSupportChainListUrl,t),$e=t=>k(s.getGasStationSupportCoinListUrl,t);var oo=t=>a(s.checkAndGetCallDataUrl,t),ro=t=>a(s.orderSaveUrl,t);export{y as a,Q as b,Z as c,at as d,pt as e,gt as f,xt as g,ht as h,kt as i,Ct as j,yt as k,It as l,St as m,Cn as n,yn as o,In as p,Sn as q,wn as r,En as s,bn as t,vn as u,Mn as v,qn as w,Wn as x,Hn as y,dt as z,re as A,se as B,Nt as C,Lt as D,Dt as E,Gt as F,Bt as G,Ft as H,me as I,fe as J,b as K,nn as L,en as M,on as N,rn as O,sn as P,an as Q,cn as R,un as S,dn as T,mn as U,Ke as V,$e as W,oo as X,ro as Y};
//# sourceMappingURL=chunk-3ZKJXYZ4.js.map
