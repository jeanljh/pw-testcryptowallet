import{a as Ye}from"./chunk-JM5K7QT5.js";import{a as Re}from"./chunk-RII4PUL6.js";import{a as we}from"./chunk-NFM2PBST.js";import{a as K}from"./chunk-QVGLEQL5.js";import"./chunk-JQ4B2RAH.js";import{a as Le}from"./chunk-SYP4PRCG.js";import{a as ke,b as Ie,c as Oe,d as ze}from"./chunk-TA357MUD.js";import{b as R}from"./chunk-QL63AAOK.js";import"./chunk-QXEXAETB.js";import{a as he}from"./chunk-BEIWULHW.js";import{d as Ne,e as De,f as Ae}from"./chunk-DOCYQV54.js";import{a as be}from"./chunk-STXPU7A6.js";import{f as i,g as ne}from"./chunk-PFSPFZNW.js";import{I as Ce,J as Ue}from"./chunk-HIVYZXF3.js";import{p as xe}from"./chunk-4Y52FA3V.js";import"./chunk-ZYYACLV7.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import{b as ie,f as I,p as Ee,r as Pe}from"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-YMYQJ726.js";import{a as ve}from"./chunk-FGRS6VIX.js";import{vd as k}from"./chunk-INIQCRIO.js";import"./chunk-ZFBXO46L.js";import{a as z}from"./chunk-6Z5HVUBK.js";import{E as H,m as Fe}from"./chunk-ZBDGRK4Q.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-B624VS3G.js";import{a as ho}from"./chunk-6PA65BO3.js";import"./chunk-QCEQQDCM.js";import"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import{J as f,L as Me,M as _e,U as G,W as ge,j as se,va as Se}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-SEAUBLKM.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{z as M}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as bo}from"./chunk-4QGZDIBD.js";import{b as Te}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RX4V72AK.js";import{f as B,o as L,q as w}from"./chunk-Y5OH3DDZ.js";L();w();var e=B(Te()),We=B(bo());Se();L();w();var T=B(Te()),Be=B(ho());Se();function Ge({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,T.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function He({tradeScene:t,computedQuoteSafemoon:r}){return{safeMoonToken:(0,T.useMemo)(()=>t===0?r:"",[t,r])}}function Ke(){let{getUsd:t}=K(R);return{formatUSD:s=>_e(s)||Me(s)?"--":t(s)}}function qe({priorityFeeState:t,priorityFee:r,tradeScene:s,solSinglePrice:p}){let[a,y]=(0,T.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),u=(0,T.useMemo)(()=>{let l=r||"0";return ve(l)?"0":new z.BigNumber(l).toString(10)},[r]),[F,v]=(0,T.useMemo)(()=>{let l=u;s===0&&(l=z.add(u,a));let x=z.mul(p||0,l);return[z.mul(p||0,u),x]},[u,a,p,s]);return{baseFeeValue:a,baseFeeUsd:y,priorityFeeForShow:u,priorityFeeUSD:F,totalFeeUSD:v}}function je({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:p,setPriorityFeeType:a,setPriorityFeeError:y,slippage:u,setSlippage:F,setSlippageError:v,slippageType:l,setSlippageType:x,feeMap:E,slippageMode:h,setSlippageMode:N,customMax:P,setCustomMax:o,setCustomMaxError:C,priorityMode:_,setPriorityMode:U,setManualType:D}){let n=(0,T.useMemo)(()=>t.find(S=>S.id===r)||null,[t,r]);return{resetDisabled:(0,T.useMemo)(()=>n?f(i(n.slippage.value),u)&&f(n.slippage.type,l)&&f(n.priorityFee.type,p)&&f(n.slippage.mode,h)&&f(i(n.slippage.customMax),P)&&f(n.priorityMode,_):!0,[n,u,l,p,h,P,_]),handleReset:()=>{a(n.priorityFee.type),F(i(n.slippage.value)),x(n.slippage.type),s(E[n.priorityFee.type].amount),N(n.slippage.mode),o(i(n.slippage.customMax)),U(n.priorityMode),D(n.manualType),v(!1),y(!1),C(!1)}}}var Ao=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function Qe({slippageType:t,initState:r,slippage:s,priorityFee:p,priorityFeeType:a,slippageMode:y,customMax:u,currentPreset:F,slippageState:v,presetPriorityFee:l,currentPresetList:x,currentPresetId:E,setCurrentPresetList:h,currentMode:N,onClose:P,priorityMode:o,manualType:C}){let _=(0,Be.useHistory)(),U=Re(xe);return{handleConfirm:()=>{if(U({custom_or_auto:t}),!(f(r.mode,y)&&f(r.slippage,s)&&f(r.slippageType,t)&&f(r.priorityFee,p)&&f(r.priorityFeeType,a)&&f(r.customMax,u)&&Ao({priorityMode:o,manualType:C},r))){let g=G({},F,{slippage:G({},v,{value:s?ne(s):"",type:t,mode:y,customMax:u?ne(u):""}),priorityFee:G({},l,{value:a===I.CUSTOM?p:"",type:a}),priorityMode:o,manualType:C}),A=x.map(S=>S.id===E?g:S);h(A),Ue.info(Ce.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:g,currentMode:N}})}P?P():_.goBack()}}}L();w();var d={root:"_root_y7yz0_1",name:"_name_y7yz0_8",mev:"_mev_y7yz0_9",slippage:"_slippage_y7yz0_10",priority:"_priority_y7yz0_11",btns:"_btns_y7yz0_14",notice:"_notice_y7yz0_23","notice-title":"_notice-title_y7yz0_29",noticeTitle:"_notice-title_y7yz0_29","notice-text":"_notice-text_y7yz0_32",noticeText:"_notice-text_y7yz0_32"};var Lo=Fe(({onClose:t})=>{let{quoteStore:r,configStore:s}=R(),{currentMode:p,tradeScene:a,computedConfig:y}=s,u=se(y,"mevPriceThreshold"),F=se(y,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:v,jitoIsSuccess:l,computedAutoSlippage:x,mevUnstableShowLevel:E}=r,{chainSymbol:h}=we(),{currentPreset:N}=ke(),P=ge(Pe,["name","amountList"]),{slippage:o,priorityFee:C,id:_,priorityMode:U,manualType:D}={...P,...N},n=(0,e.useMemo)(()=>_?.includes(Ee),[_]),[g,A]=(0,e.useState)("auto"),[S,q]=(0,e.useState)(0);(0,e.useEffect)(()=>{A(U),q(D)},[U,D]);let ae=be({priorityMode:g,manualType:S,jitoIsSuccess:l,mevUnstableShowLevel:E}),Xe=he(ae),{formatPriorityFee:m}=Ie({priorityFee:C,isEnableMev:Xe}),[O,j]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{j(o.mode)},[o.mode]);let[Q,W]=(0,e.useState)(i(o.customMax));(0,e.useEffect)(()=>{W(i(o.customMax))},[o.customMax]);let[Ze,me]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(i(o.value)),[Y,J]=(0,e.useState)(o.type),[Je,ue]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Z(i(o.value)),J(o.type)},[o.value,o.type]);let[$,ee]=(0,e.useState)(m.value),[oe,pe]=(0,e.useState)(m.type),le=(0,e.useRef)(m.type),[$e,ce]=(0,e.useState)(!1),[eo,oo]=(0,e.useState)(m.type!==I.CUSTOM?m.type:I.MARKET);(0,e.useEffect)(()=>{let c=le.current;if(c===I.CUSTOM)return;let b=m.config[c]?.amount;ee(b)},[m.config]);let to=O==="fixed"&&Je||O==="dynamic"&&Ze||$e||ae===6,ro={mode:o.mode,customMax:i(o.customMax),slippage:i(o.value),slippageType:o.type,priorityFee:m.value,priorityFeeType:m.type,priorityMode:U,manualType:D},so={low:i(o.config.low),medium:i(o.config.medium),high:i(o.config.high)},fe=i(o.min),de=i(o.max),te=i(x),io=i(o.dynamicMax),no=i(o.dynamicMin),ao=i(o.recommendMax),mo=i(o.recommendMin),{computeBuyDefaultPresetList:uo,computedSellDefaultPresetList:po}=Le(),{defaultPresetList:lo}=Ge({currentMode:p,computeBuyDefaultPresetList:uo,computedSellDefaultPresetList:po}),{setCurrentPresetList:co,currentPresetId:fo,currentPresetList:yo}=ze(),{handleReset:Mo,resetDisabled:_o}=je({defaultPresetList:lo,id:_,setPriorityFee:ee,priorityFeeType:oe,setPriorityFeeType:pe,slippage:X,setSlippage:Z,slippageType:Y,setSlippageType:J,slippageMode:O,setSlippageMode:j,customMax:Q,setCustomMax:W,setPriorityFeeError:ce,setSlippageError:ue,setCustomMaxError:me,feeMap:m.config,priorityMode:g,setPriorityMode:A,setManualType:q}),{handleConfirm:go}=Qe({slippageType:Y,initState:ro,slippage:X,priorityFee:$,priorityFeeType:oe,slippageMode:O,customMax:Q,currentPreset:N,slippageState:o,presetPriorityFee:C,currentPresetList:yo,currentPresetId:fo,setCurrentPresetList:co,currentMode:p,onClose:t,priorityMode:g,manualType:S}),{solSinglePrice:So}=Oe(),{baseFeeValue:To,baseFeeUsd:Fo,totalFeeUSD:vo,priorityFeeUSD:xo,priorityFeeForShow:Eo}=qe({priorityFeeState:m,priorityFee:$,tradeScene:a,solSinglePrice:So}),{formatUSD:re}=Ke(),{safeMoonToken:ye}=He({tradeScene:a,computedQuoteSafemoon:v}),Po=c=>Ye({value:c,min:fe,max:de,level:Y,auto:te,safemoon:ye}),{getTokenAmount:Co,getUsd:Uo}=K(R);return e.default.createElement("div",{className:d.root},a===0&&e.default.createElement(Ae,{className:d.mev,setMode:A,priorityMode:g,setManualType:q,manualType:S,mevUnstableShowLevel:E,jitoIsSuccess:l,mevPriceThreshold:u,chainName:F}),e.default.createElement(De,{className:d.slippage,mode:O,fixedData:{value:X,level:Y,levelMap:so,min:fe,max:de,validator:Po,auto:te},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:te,supportCustomMax:o.supportCustomMax,customMax:Q,dynamicMax:io,dynamicMin:no,recommendMax:ao,recommendMin:mo,safemoon:ye},onChange:({mode:c,fixedData:b,dynamicData:V})=>{j(c),c===ie.FIXED&&(Z(b.value),J(b.level),ue(b.error)),c===ie.DYNAMIC&&(W(V.customMax),me(V.error))}}),e.default.createElement(Ne.DetailMode,{className:d.priority,fee:$,type:oe,latestSelectType:eo,feeMap:m.config,max:m.max,recommendMaxValue:m?.recommendMaxValue,recommendMinValue:m?.recommendMinValue,currency:h,onChange:(c,b,V)=>{ee(b),pe(c),le.current=c,ce(V),c!=="custom"&&oo(c)},getTokenAmount:Co,getUsd:Uo,tradeScene:a}),a===0&&e.default.createElement("div",{className:d.notice},e.default.createElement("div",{className:d.noticeTitle},H(k("swaptrade_trade_label_total_fees",{price:re(vo)}))),e.default.createElement("div",{className:d.noticeText},H(k("swaptrade_trade_label_base_fee_value",{value:To,price:re(Fo)}))),e.default.createElement("div",{className:d.noticeText},H(k("swaptrade_trade_label_priority_fee_value",{value:Eo,price:re(xo)})))),e.default.createElement("div",{className:(0,We.default)("flex justify-between",d.btns)},n&&e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.outline,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,onClick:Mo,disabled:_o},k("swaptrade_general_btn_reset")),e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.fill,type:M.TYPE.primary,disabled:to,size:M.SIZE.lg,block:!0,onClick:go},k("swaptrade_dialog_btn_confirm"))))}),Ct=Lo;export{Ct as default};
//# sourceMappingURL=Configure-XHGKHTUG.js.map
