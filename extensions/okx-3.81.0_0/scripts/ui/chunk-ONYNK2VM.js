import{f as Be,g as be,i as we,k as Fe}from"./chunk-WD3IVQAU.js";import{c as $,e as ee}from"./chunk-KPUXAS7Z.js";import{a as B,b as i}from"./chunk-IN42FW4K.js";import{b as P,d as Ee}from"./chunk-AQO2BBXJ.js";import{s as R}from"./chunk-2VUOGSTW.js";import{a as ye}from"./chunk-S7VT2TWF.js";import{a as Ie,d as Ne}from"./chunk-3ZKJXYZ4.js";import{o as vo}from"./chunk-Z62JX42S.js";import{da as p}from"./chunk-WU2LB6XB.js";import{a as X,d as Ge}from"./chunk-EFOY37CC.js";import{A as e,K as O}from"./chunk-VZKEX7KP.js";import{H as ve,o as v}from"./chunk-BJKBO23H.js";import{d as Q,va as Go}from"./chunk-XFTQD4B2.js";import{z as a}from"./chunk-ZFVABNQN.js";import{b as D}from"./chunk-73B6GL3S.js";import{f as x,o,q as t}from"./chunk-Y5OH3DDZ.js";o();t();var c=x(D()),w=x(vo());Go();O();o();t();o();t();var oe=x(D());O();o();t();var I=x(D());var Io=({title:s,text:m,...l})=>I.default.createElement(v.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:u=>I.default.createElement(u,null,I.default.createElement("div",{className:"tx-check-dialog__content"},I.default.createElement("div",{className:"tx-check-dialog__content-title"},s),I.default.createElement("div",{className:"tx-check-dialog__content-text"},m))),cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},...l}),b=I.default.memo(Io);var No=({visible:s,onConfirm:m,onCancel:l,txCheckData:u})=>{let g=u?.find(d=>d?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:_,primaryButtonName:C,secondaryButtonName:k}=g||{};return oe.default.createElement(b,{visible:s,title:h||e("wallet_extension_transaction_popup_failed_transaction"),text:_||e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:C||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_skip"),onConfirm:m,onCancel:l})},te=oe.default.memo(No);o();t();var r=x(D());O();function yo({visible:s,onConfirm:m,onCancel:l,data:u}){let{userGasInfo:g,updateGasInfo:h,baseCoin:_}=u,{gasPrice:C,maxFeePerGas:k}=h,{supportEip1559:d,gasLimit:N,gasPrice:Y,maxFeePerGas:z}=g,U=d?z:Y,L=$(U,N,_),y=ee(U,N),W=d?k:C,V=$(W,N,_),Z=ee(W,N);return r.default.createElement(v.Prompt,{visible:s,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:m,onClose:l,confirmText:e("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},renderContent:F=>r.default.createElement(F,null,r.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},e("extension_toast_title_transaction_replace")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},e("extension_toast_subtitle_gasincrease")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_current_transaction")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},L),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},y)),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_gasprice")),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},V),r.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},Z)))})}var ne=(0,r.memo)(yo);o();t();var ae=x(D());var Eo=({visible:s,onConfirm:m,onCancel:l,txCheckData:u})=>{let g=u?.find(d=>d?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:_,primaryButtonName:C,secondaryButtonName:k}=g||{};return ae.default.createElement(b,{visible:s,title:h,text:_,confirmText:C,cancelText:k,onConfirm:m,onCancel:l,hideCloseBtn:!0})},ie=ae.default.memo(Eo);o();t();var se=x(D());O();var Bo=({visible:s,onConfirm:m,onCancel:l,txCheckData:u})=>{let g=u?.find(d=>d?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:_,primaryButtonName:C,secondaryButtonName:k}=g||{};return se.default.createElement(b,{visible:s,title:h||e("wallet_extension_transaction_popup_pending_transaction"),text:_||e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:C||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:m,onCancel:l,hideCloseBtn:!0})},re=se.default.memo(Bo);o();t();var le=x(D());O();o();t();var ce=x(D());var bo=({...s})=>ce.default.createElement(v.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:v.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},...s}),Se=ce.default.memo(bo);var wo=({visible:s,onConfirm:m,onCancel:l})=>le.default.createElement(Se,{visible:s,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:l?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:m,onCancel:l||(()=>{})}),me=le.default.memo(wo);var Fo=({children:s=null,btnProps:m={},dataForCheck:l={},whetherCheckRepeat:u=!1,whetherCheckGas:g=!0,onFailedCancel:h=()=>{},onFailedConfirm:_=()=>{},onPendingCancel:C=()=>{},onPendingConfirm:k=()=>{},onRepeatCancel:d=()=>{},onRepeatConfirm:N=()=>{},onPending7702Cancel:Y=()=>{},onPending7702Confirm:z=()=>{},onClick:U=()=>{},beforeClick:L=()=>{},afterClick:y=()=>{},onGasReplaceCancel:W,onGasReplaceConfirm:V})=>{let{fetchParams:Z,userGasInfo:F,baseCoinAmountUse:Ae}=l,E=(0,c.useRef)([]),H=(0,c.useRef)(R.NEW),pe=(0,c.useRef)({}),G=(0,c.useRef)({}),ue=(0,c.useRef)(!1),[Oe,{setTrue:Re,setFalse:_e}]=(0,w.useBoolean)(!1),[Ue,{setTrue:We,setFalse:de}]=(0,w.useBoolean)(!1),[Ye,{setTrue:ze,setFalse:fe}]=(0,w.useBoolean)(!1),[Le,{setTrue:Ve,setFalse:ge}]=(0,w.useBoolean)(!1),[Ze,{setTrue:He,setFalse:he}]=(0,w.useBoolean)(!1),{coinId:M,from:Ce,to:Me,amount:je,gasPrice:qe}=Z,{baseCoin:ke}=ye(M,!0),{coinAmountInt:Je}=Ee(ke.coinId),Ke=async()=>{let n={checkTypes:[p.REPEAT,p.OVERWRITTEN],coinId:M,from:Ce,to:Me,amount:je,gasPrice:qe},[{data:f=[]},{data:A}]=await Promise.all([Ne(n),Ie({coinId:M,fromAddr:Ce})]);E.current=f;let K=A?.info?.gasPrice||{};return pe.current=K,f},S=()=>E.current,Qe=()=>pe.current,xe=()=>G.current,Xe=()=>{let f=S().find(Po=>Po?.checkType===p.OVERWRITTEN)||{},{gasPrice:A,priorityFee:K}=f;return{originGasPrice:X(A,1.1),originPriorityFee:X(K,1.1)}},$e=()=>{H.current=R.ON_CHAIN},eo=()=>{H.current=R.NEW},oo=n=>(G.current={...G.current,...n},G.current),to=()=>{ue.current=!0},no=()=>{ve.error({title:e("extension_toast_text_insufficient_balance")})},j=i(()=>{let n={nonce:0,updateGasInfo:null},f=E.current.find(A=>A?.checkType===p.OVERWRITTEN)||{};return H.current===R.NEW?n.nonce=f.newNonce:n.nonce=f.nonce,ue.current&&(G.current.gasPrice||G.current.maxFeePerGas)&&(n.updateGasInfo=G.current),n},U),ao=B(Re,P),io=B(We,P),so=B(ze,P),ro=n=>be(n,ao,io,so),co=B(oo,He,P),Te=g?n=>we(n,{userGasInfo:F,serverGasInfo:Qe(),originTxGasInfo:Xe()},co):Q,lo=B(no,y,P),mo=n=>{let f=Ge(Je,Ae);return Fe(n,{userGasInfo:F,updateGasInfo:xe(),baseCoinAmountAvailable:f},lo)},De=u?n=>(Be(n,p.REPEAT)&&(Ve(),P()),n):Q,Pe=i(S,De,j),q=i($e,Pe),J=i(eo,Pe),po=i(h,_e,J),uo=i(_,_e,S,Te,q),_o=i(C,de,J),fo=i(k,de,S,Te,q),go=i(Y,fe),ho=i(z,fe,J),Co=i(d,ge,y),ko=i(N,ge,j),xo=i(W,he,y,P),To=i(to,V,he,S,mo,q),Do=i(L,Ke,ro,De,j,y);return c.default.createElement(c.default.Fragment,null,c.default.createElement(a,{category:a.CATEGORY.fill,type:a.TYPE.highlight,size:a.SIZE.lg,block:!0,...m,onClick:Do},s),c.default.createElement(te,{visible:Oe,txCheckData:E.current,onCancel:po,onConfirm:uo}),c.default.createElement(re,{visible:Ue,txCheckData:E.current,onCancel:_o,onConfirm:fo}),c.default.createElement(ie,{visible:Ye,txCheckData:E.current,onCancel:go,onConfirm:ho}),c.default.createElement(me,{visible:Le,onCancel:Co,onConfirm:ko}),c.default.createElement(ne,{visible:Ze,onCancel:xo,onConfirm:To,data:{baseCoin:ke,userGasInfo:F,updateGasInfo:xe()}}))},So=Fo;o();t();export{So as a};
//# sourceMappingURL=chunk-ONYNK2VM.js.map
