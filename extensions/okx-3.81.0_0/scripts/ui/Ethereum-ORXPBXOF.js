import{a as xr}from"./chunk-3HMBEO4H.js";import{b as dr,f as _r,g as Tr,h as gr}from"./chunk-VXCH3ZZK.js";import{a as Cr}from"./chunk-XIUQW5OS.js";import{a as ar}from"./chunk-YVVEDZW4.js";import"./chunk-EHX5MFHL.js";import{a as lr,b as ur,c as xt,d as H,e as fr}from"./chunk-37NOBJJN.js";import{k as mr}from"./chunk-LVDNG6XA.js";import"./chunk-2UMIXQCO.js";import{a as sr}from"./chunk-2FN5XB3U.js";import{a as pr}from"./chunk-34YDQARM.js";import{a as ir}from"./chunk-3YSB4TUI.js";import"./chunk-JQ73YYWR.js";import{a as cr}from"./chunk-RNB6EWQY.js";import{a as nr}from"./chunk-GRCGLJO7.js";import{a as vt}from"./chunk-WEBT7OC4.js";import{a as rr}from"./chunk-7IP3VPVS.js";import{a as or}from"./chunk-6ZYLPGLN.js";import"./chunk-CIE6HRPG.js";import{a as Xo}from"./chunk-ICSA2KYO.js";import{a as tr}from"./chunk-GRN4OI4B.js";import{a as er}from"./chunk-62VQDLH5.js";import{g as Jo}from"./chunk-QNQLOUVT.js";import{a as Me}from"./chunk-ZZ5BEB5E.js";import{a as Be,b as Wo,c as Ho,d as Yo,e as Qo,f as Zo}from"./chunk-GNGB7SWC.js";import"./chunk-ELXRV4IW.js";import{a as Uo}from"./chunk-T4CFY3IH.js";import{h as qo,l as Ae,m as jo,n as Ko}from"./chunk-6PSK4535.js";import{a as zo,b as Vo}from"./chunk-GCPFAJKK.js";import"./chunk-7OWNMKUE.js";import"./chunk-EDJJACNG.js";import{a as ge}from"./chunk-V7XA3BQU.js";import{e as Go}from"./chunk-WD3IVQAU.js";import"./chunk-JVF7GJB3.js";import"./chunk-QKPPTYDW.js";import"./chunk-KPUXAS7Z.js";import"./chunk-IN42FW4K.js";import{a as J,e as Ro}from"./chunk-PQQFVOPL.js";import"./chunk-WST3WRLT.js";import"./chunk-6GOHKXI5.js";import"./chunk-PDSFU775.js";import{a as $o}from"./chunk-PONOZOFT.js";import"./chunk-5QYLVV6H.js";import"./chunk-I4EML244.js";import"./chunk-TJIPZMF7.js";import"./chunk-57D6LCV2.js";import{a as ce,d as Se}from"./chunk-KQ6OPOXD.js";import"./chunk-X7ACMHNF.js";import{a as Ct}from"./chunk-DEJA7CK3.js";import"./chunk-LS6URCUV.js";import{a as me}from"./chunk-XDEC3ZLT.js";import{b as $e}from"./chunk-RGPNT5G7.js";import{N as Oo}from"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import{A as Do,b as Lo,l as b}from"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import"./chunk-AQO2BBXJ.js";import"./chunk-GWMNMJND.js";import{a as bo,b as vo,t as Bo}from"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import"./chunk-S7VT2TWF.js";import{d as Mo}from"./chunk-HBNZZZEG.js";import"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import"./chunk-BNS5ABAB.js";import{a as bt}from"./chunk-UFGJXE4D.js";import"./chunk-7QX2TXNH.js";import"./chunk-LBNBJFSZ.js";import"./chunk-SFA2I2L2.js";import{d as Le}from"./chunk-ZDHJHPQ5.js";import"./chunk-ROS2ENQV.js";import"./chunk-DFPRATON.js";import"./chunk-WY5R5HAR.js";import"./chunk-GTQ5U6DA.js";import"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import{a as Eo}from"./chunk-QFKKFFVA.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import{a as Fo}from"./chunk-5GHXPDUI.js";import"./chunk-BC5LWHDZ.js";import"./chunk-SVG7BWFP.js";import"./chunk-JZBABWUI.js";import"./chunk-UQTI5PPO.js";import{m as co}from"./chunk-P3S4ES3J.js";import"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import{a as wo,b as So}from"./chunk-AP337SRV.js";import"./chunk-TF4QEXO7.js";import{a as Io,b as ko}from"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import"./chunk-QJ36ZOFH.js";import{d as fo,e as ft,g as dt,i as _o,j as To,m as Nt,n as _t,o as go}from"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import"./chunk-JHO7RU36.js";import"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{d as io,j as so}from"./chunk-3ZKJXYZ4.js";import"./chunk-SOSR34AP.js";import{a as Po}from"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-47LIW52M.js";import{U as po,d as lo}from"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{g as xo,v as ho}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import{a as Ao}from"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import{e as pt}from"./chunk-SWUBCABA.js";import"./chunk-DZGSODSZ.js";import{b as No}from"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import{a as gt}from"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import{b as ve}from"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{o as Tt}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{a as Co}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{s as yo,u as Ft}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as se}from"./chunk-Z62JX42S.js";import{Na as ut}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as xn}from"./chunk-6PA65BO3.js";import"./chunk-XSVHDPBS.js";import"./chunk-OIXGC4LI.js";import{a as O,b as we}from"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{A as ro,E as wt,T as St,Y as lt,_ as no,da as At,e as to,fa as ao,n as Qe,z as oo}from"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import{c as uo,f as Ze}from"./chunk-EZS2GR7E.js";import{j as Te,q as Pt}from"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import{q as ct,s as eo}from"./chunk-YIFLUVTR.js";import{c as mo,e as Cn}from"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import{D as Vt,a as Yt,c as ae,d as at,f as qt,h as ie,i as Ve,j as je,p as zt}from"./chunk-EFOY37CC.js";import{c as k}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import{b as Kt,c as dn}from"./chunk-GR7YC6C3.js";import{E as Qt,J as _n}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{E as _e,J as fn,Jb as Et,Q as Zt,Sb as Jt,bc as Xt,ka as Tn,la as Ke,nc as gn,tb as $t,ub as kt}from"./chunk-COF7YKSN.js";import{A as m,K as v,o as ze}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{I as W,d as re,o as st,q as It,r as mt}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import{M as Ee,a as Rt,b as Wt,f as Ut,p as Ht,va as be}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{t as it,z as U}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as jt}from"./chunk-4QGZDIBD.js";import{b as F}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as x,o as i,q as s}from"./chunk-Y5OH3DDZ.js";i();s();var le=x(F());fn();i();s();var Xe=x(F()),Er=x(ut()),wr=x(xn()),Sr=x(se());i();s();be();var hn=e=>{let t=H(e?.chainId),o=e?.image;return Rt(o)?e.image=o[0]:Wt(o)&&(e.image=null),{token:e,baseCoin:t}},hr=hn;i();s();var yr=x(ut()),Lt=x(se());v();Pt();var yn=(e={},t={},o=!0,r=!1)=>{let a=(0,yr.useDispatch)(),p=e.address,f=gt(),c=ur(),l=ge(),n=(0,Lt.useMemoizedFn)(async()=>{l({all_confirmation:"cancel",trade:"add_token"}),await c(p,!1),await Te(a)}),{loading:d,onClick:T}=me(n),u={actionType:b.ACTION_TYPE.CANCEL,btnText:m("wallet_dapp_connection_btn_reject"),onClick:T,loading:d},_=(0,Lt.useMemoizedFn)(async()=>{try{l({all_confirmation:"confirm",trade:"add_token"});let C=await dt(t.localType,f),E={...e,contractAddress:p,blockChain:C.shortName,localType:t.localType,chainId:t.chainId};await So(E),await c(p,!0),await Te(a)}catch(C){W.error(C?.data?.originalError?.msg||m("wallet_extenshion_toast_add_failed"))}}),{loading:g,onClick:h}=me(_),S={actionType:b.ACTION_TYPE.CONFIRM,disabled:!o||r,onClick:h,loading:g};return[u,S]},Ir=yn;i();s();var Je=x(F());v();var In=({contractAddress:e,chainInfo:t})=>{let[o,r]=(0,Je.useState)({}),[a,p]=(0,Je.useState)(!0),f=async()=>{try{p(!0);let c=await wo({contractAddress:e,chainInfo:t});r(c),p(!1)}catch{W.error({title:m("wallet_extension_loading_toast_retrieve_tokeninfo_fail")})}};return(0,Je.useEffect)(()=>{f()},[]),{coinInfo:o,loading:a}},kr=In;var kn=({unapproved:e})=>{let t=(0,Er.useSelector)(ko),{token:o,baseCoin:r}=hr(e),[a,p]=(0,Xe.useState)(!0),f=gt();(0,Sr.useMount)(async()=>{let T=await dt(r.localType,f);p(!!T)});let{coinInfo:c,loading:l}=kr({contractAddress:o?.address,chainInfo:{coinId:r?.coinId}}),n=Ir(o,r,a,l);if(!o||t!==Io.addToken)return Xe.default.createElement(wr.Redirect,{to:Co});let d={...o,symbol:c?.symbol,decimals:c?.decimals};return Xe.default.createElement(pr,{token:d,supported:a,buttonGroup:n,networkName:r.chainName,loading:l})},Ar=kn;i();s();var L=x(F()),Br=x(se());v();i();s();var Pr=x(F());be();var En=({unapproved:e,walletAccount:t,customGasInfo:o={}})=>{let{params:r}=e,{walletId:a}=t,p=H(),{coinId:f}=p,c=Uo(f,a)?.coinAmountInt,{gasType:l,isNetworkFeeLoading:n,networkFee:d,getLimit:T}=o,{minGasFee:u}=bo(o),_=vo(o),g=(0,Pr.useMemo)(()=>{if(Ee(c))return r;let A=c,I=[];return r.forEach(D=>{A=at(A,d),ie(A,0)&&I.push(D)}),I},[c,r,d]),h=n&&je(T,0),S={level:l||no.STANDARD,loading:n,coinId:p?.coinId,networkFee:h?void 0:u,estimateFailed:_},C=n||g.length&&g.length===r.length,E=Ee(c)||Ve(c,d);return{isNetworkFeeLoading:n,estimateFailed:_,networkFeeProps:S,canApproveTxs:g,isSufficientGas:E,canApproveAll:C}},Nr=En;i();s();var br=x(F());v();gn();Jt();dn();_n();var Fr=100,wn=e=>e.msg||m("wallet_home_toast_network_error"),Sn=({txParams:e,gasLimit:t,supportEip1559:o})=>({...e,value:O(e.value),gas:t,gasPrice:O(o?e.maxFeePerGas:e.gasPrice),priorityFee:O(o?e.maxPriorityFeePerGas:0),nonce:O(e.nonce),repeatTxType:to.CONFIRMING,oldTxHash:"",inscriptionType:1}),An=({ext:e,signature:t,coinId:o,txParams:r,fromAdr:a,toAdr:p,networkFee:f,txHash:c,walletId:l,walletAccount:n})=>({extJson:JSON.stringify(e),signedTx:t,coinId:o,coinAmount:O(r.value||0),fromAdr:a,toAdr:p,serviceCharge:f,txHash:c,txSource:Xt.DAPP,inputData:r.data,accountId:l,txType:1,walletType:n?.serverWalletType}),Pn=({unapproved:e,walletAccount:t,isSufficientGas:o,canApproveTxs:r,customGasInfo:a,isNetworkFeeLoading:p})=>{let{id:f}=e,{walletId:c,address:l}=t,n=Tt(c),d=ge(c),{coinId:T}=H(),u=sr(),_=ir(),g=(0,br.useCallback)(async()=>{d({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await u({id:f})},[u,d,f]),{loading:h,onClick:S}=me(g),C={loading:h,onClick:S,actionType:b.ACTION_TYPE.CANCEL,btnText:m("wallet_dapp_connection_btn_reject")},E=n||p,{gasPrice:A,supportEip1559:I,gasLimitInfo:D={},gasLimit:G,maxFeePerGas:Q,maxPriorityFeePerGas:R,networkFee:Y}=a,q=Do({fromAddr:r[0]?.txParams?.from,walletId:c,localType:kt}),Z=async()=>{try{let V=r.length,We=r[0],{from:he,to:Ue,value:He}=We.txParams;d({trade:"sendEvmInscriptions",all_confirmation:"confirm"});let{data:pe}=await io({checkTypes:[At.OVERWRITTEN],coinId:T,from:he,to:Ue,amount:O(He||0),gasPrice:A}),ye=pe.find(({checkType:oe})=>oe===At.OVERWRITTEN)||{},{newNonce:Ne,toastType:Fe,pendingNum:Ye}=ye;if(Fe===ao.FAILED){W.error(m("wallet_extension_function_toast_failed_single")),await bt(1500),await u({id:f});return}let ue=ae(Ye,V);if(ie(ue,Fr)){W.error(m("wallet_extension_function_toast_pending",{TotalNum:ue,ExceededNum:Fr}));return}let $=[],fe=[];for(let oe=0;oe<r.length;oe++){let de=r[oe],{txParams:P}=de,{from:Ie,to:yt}=P;P.nonce=Vt(we(ae(Ne,oe))),I?(delete de.gasPrice,P.maxFeePerGas=we(Q),P.maxPriorityFeePerGas=we(R),P.type=Qe.FEE_MARKET):(delete P.maxFeePerGas,delete P.maxPriorityFeePerGas,delete P.type,P.gasPrice=we(A)),P.gas=we(G),P.gasLimit=we(G),P.gasLimitInfo=D,P.gasType=a.gasType;let rt=Eo(de.txParams),ke=await q({params:rt}),nt=await Lo(kt,ke),qe=Sn({txParams:P,gasLimit:G,supportEip1559:I}),un=An({ext:qe,signature:ke,coinId:T,txParams:P,fromAdr:Ie,toAdr:yt,networkFee:Y,txHash:nt,walletId:c,walletAccount:t});fe.push(un),$.push({id:de.id,txHash:nt})}await Qt(Kt.postSendEvmInscriptions,{txList:fe}),await _({id:f,result:$})}catch(V){W.error(wn(V)),await bt(1500),await _({id:f,error:"Failed"})}},{loading:X,onClick:ee}=me(Z),te={loading:X,disabled:E,actionType:b.ACTION_TYPE.CONFIRM,onClick:ee};return E?[C,te]:(o||(te={actionType:b.ACTION_TYPE.FILL_UP,txId:f,coinId:T,walletId:c,address:l,receiveOnly:o}),[C,te])},vr=Pn;i();s();v();var Nn=e=>{for(let t=0;t<e.length;t++){let o=e[t],r=o();if(r)return r}return null},Fn=({walletAccount:e,canApproveTxs:t,canApproveAll:o,isSufficientGas:r})=>{let a=Tt(e.walletId),p=()=>a?{type:re.TYPE.error,message:m("wallet_extension_function_alert_wallet_unsupported")}:null,f=H(),c=Jo({baseCoin:f,isSufficientGas:r});return Nn([p,c,()=>o?null:{type:re.TYPE.warn,message:m("wallet_extension_function_alert_available_balance",{gasToken:f.symbol,num:t.length})}])},Lr=Fn;var bn=({unapproved:e})=>{let{coinId:t}=H(),{txParams:o={}}=e?.params?.[0],{from:r,to:a,data:p,value:f}=o,{walletId:c}=e,l=$o(e),n=ge(c),d=Me(e),[T,u]=(0,L.useState)({}),_=(0,L.useCallback)(R=>{u(R)},[]),{networkFeeProps:g,canApproveTxs:h,canApproveAll:S,isSufficientGas:C,isNetworkFeeLoading:E}=Nr({unapproved:e,walletAccount:l,customGasInfo:T}),A=vr({unapproved:e,walletAccount:l,canApproveTxs:h,customGasInfo:T,isSufficientGas:C,isNetworkFeeLoading:E}),I=Lr({walletAccount:l,canApproveTxs:h,canApproveAll:S,isSufficientGas:C}),[D,{setTrue:G,setFalse:Q}]=(0,Br.useBoolean)(!1);return L.default.createElement(k.Container,null,L.default.createElement(Le,{title:m("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),L.default.createElement(ce,null,L.default.createElement(cr,{...d})),L.default.createElement(ce,null,L.default.createElement(Ct,{onClick:G,...g})),L.default.createElement(ce,{bordered:!1},L.default.createElement($e,{title:m("wallet_extension_network_address_title_walletused"),address:l.address,walletId:l.walletId,onCopyCallback:()=>{n({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),L.default.createElement(ve,{placeholder:!0,offsetBottom:0,borderTop:!0},L.default.createElement(Se,{...I}),L.default.createElement(b,{buttonGroup:A})),L.default.createElement(Go,{visible:D,coinId:t,address:r,inputData:p,tokenAddress:a,value:O(f),onBack:Q,onClose:null,onGasChange:_}))},Mr=bn;i();s();var K=x(F());be();$t();Tn();eo();i();s();var qr=x(F());i();s();var Yr=x(F()),tt=x(ut()),et=x(se());v();Pt();eo();i();s();var j=x(F());i();s();Cn();var De=()=>(0,j.useCallback)(async(t,o)=>{await mo().updateReportTimestamp(t,o)},[]);var vn=()=>{let e=De();return(0,j.useCallback)(async o=>{await e(o,"CAN_CONFIRM")},[e])},Dr=(e,t)=>{let o=vn(),r=(0,j.useRef)(!1);(0,j.useEffect)(()=>{!t&&!r.current&&(r.current=!0,o(e))},[e,t,o])},Gr=()=>{let e=De();return(0,j.useCallback)(async o=>{await e(o,"CLICK_CONFIRM")},[e])},Or=()=>{let e=De();return(0,j.useCallback)(async t=>{await e(t,"SIGN")},[e])},Rr=()=>{let e=De();return(0,j.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},Wr=()=>{let e=De();return(0,j.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},Ur=()=>{let e=De();return(0,j.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};i();s();be();var Hr=({isMev:e,mevInfo:t,unapproved:o,modifiedData:r,customGasInfo:a,updateData:p,gasReturnActivity:f})=>{let{nonce:c,updateGasInfo:l}=p,n=Ht(o),{method:d}=n;n.txParams=n.params,delete n.params;let{supportEip1559:T,gasLimitInfo:u={},gasLimit:_,maxFeePerGas:g,gasPrice:h,maxPriorityFeePerGas:S}=a,{authorizationList:C}=n.txParams,E=C&&C.length>0;if(r&&n.txParams&&(n.txParams.data=r),n.txParams.supportEip1559=T,T?(delete n?.txParams.gasPrice,n.txParams.maxFeePerGas=J(g),n.txParams.maxPriorityFeePerGas=J(S),n.txParams.type=Qe.FEE_MARKET):(delete n?.txParams.maxFeePerGas,delete n?.txParams.maxPriorityFeePerGas,delete n?.txParams.type,n.txParams.gasPrice=J(h)),E&&(n.txParams.type=Qe.AUTH_7702,n.txParams.authorizationList=C),l){let A=Object.entries(l).reduce((I,[D,G])=>(I[D]=J(G),I),{});n.txParams={...n.txParams,...A}}return n.txParams.gas=J(_),n.txParams.gasLimit=J(_),n.txParams.nonce=J(c),n.txParams.chainId=J(n.chainId),n.gasLimitInfo=u||{},n.mevSuppliers=e?t?.mevSuppliers:[],n.activityId=f?.activityId,n.gasType=a.gasType,n?.txParams?.data||(n.isBaseCoinTransfer=!0),d===wt.KAIA_SIGN_TRANSACTION&&(n.txParams.signFn=wt.KAIA_SIGN_TRANSACTION,n.txParams.kaiaTxType=n.txParams.typeInt),n};var Ln=(e,t)=>{let o=(0,tt.useSelector)(a=>To(a,e)),r=(0,tt.useSelector)(a=>_o(a,e)??t);return{mevInfo:o,isMev:r}},Bn=({walletId:e,from:t,to:o})=>(0,et.useMemoizedFn)(r=>{let a=r;r===oo&&(a="sdk-error"),ct(`evm_tx_failed-${a}`,{to:o},{tags:{walletId:e,from:t}})}),Mn=({unapproved:e,needMev:t=!0,gasLimitParams:o,onBeforeSign:r,txToastCheckParams:a,preExecParams:p,extraParams:f,confirmBtnText:c="",cancelBtnText:l="",showApproveAddressAtPopup:n,onDataChange:d,reserveValue:T="0"})=>{let{id:u,params:_={},extParams:g={},chainId:h,method:S}=e,C=(0,tt.useDispatch)(),E=H(h),A=Me(e),{from:I,to:D,value:G,authorizationList:Q}=_,{coinId:R,chainName:Y}=E,{walletId:q}=xt(e.origin,I)||{},{isMev:Z,mevInfo:X}=Ln(u,g?.isMev),ee=Gr(),te=Or(),V=Rr(),We=Wr(),he=Ur(),Ue=(0,et.useMemoizedFn)((ue,$)=>{C(Nt.setIsMev({isMev:ue,id:u})),C(Nt.setMevInfo({mevInfo:$,id:u}))});Dr();let He=ge(q),pe=Ro({walletId:q,fromAddr:I,coinId:R}),ye=(0,et.useMemoizedFn)(async()=>{He({trade:"contract_interaction",all_confirmation:"cancel",network:Y,dapp_url:e.origin}),po(),await C(_t(u)),await Te(C)}),Ne=Wo(),Fe=Bn({extParams:g,walletId:q,from:I,to:D}),Ye=(0,et.useMemoizedFn)(async({modifiedData:ue,customGasInfo:$,gasReturnActivity:fe,preExecInfo:oe,reportGasReturnActivityDataInConfirm:de})=>{try{let{gasPrice:P}=$;ee(u);let Ie=O(G||0),yt=await Ne({to:D,from:I,coinId:R,gasPrice:P,userGasInfo:$,amount:Ie,baseCoinAmountUse:Ie,authorizationList:Q,...a||{}});de();let rt=Hr({isMev:Z,mevInfo:X,unapproved:e,updateData:yt,modifiedData:ue,customGasInfo:$,gasReturnActivity:fe}),ke=rt.txParams;r&&(ke=r(ke)),te(u);let nt=await pe(ke);V(u);let qe=await C(go(u,{...rt,txParams:ke,signedTx:nt,walletId:q,coinId:R,preExecInfo:oe,...f||{}},{failTxWhenError:!1}));We(u),vt(qe?.code)?(fe?.clear(),W.error({title:qe?.msg||m("wallet_home_toast_network_error"),duration:3})):(co({tx_id:qe?.serverTxId}),he(u))}catch(P){let Ie=P?.data?.originalError;vt(Ie?.code)?(fe?.clear(),W.error({title:Ie?.msg||m("wallet_home_toast_network_error"),duration:3})):P?.message===ro?W.error(m("wallet_extension_tg_error_network")):P?.message!==Oo&&P?.message!==Bo&&W.error(P?.message||m("wallet_home_toast_network_error")),Fe(P?.message)}await Te(C)});return Yr.default.createElement(Zo,{showApproveAddressAtPopup:n,confirmBtnText:c,cancelBtnText:l,preExecParams:p,txToastCheckParams:a,needMev:t,coinId:R,openMev:Z,onConfirmReplace:!0,dappInfo:A,gasLimitParams:o||{},txParams:_,txType:e?.type,walletId:q,isShowBlockSwapMevTooltip:g?.isShowBlockSwapMevTooltip,onMevChange:Ue,onCancel:ye,onConfirm:Ye,onDataChange:d,reserveValue:T,method:S})},ht=Mn;function Dn({unapproved:e}){return qr.default.createElement(ht,{unapproved:e})}var Bt=Dn;i();s();var N=x(F());v();i();s();var Pe=x(F()),Mt=x(jt());be();v();i();s();var Ge={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Gn({nonce:e,suggestedNonce:t,setNonce:o}){let r=p=>{o(p)},a;return e&&(ie(e,t)?a=m("developer_mode_send_tooltip_higher",{num:t}):qt(e,t)&&(a=m("developer_mode_send_tooltip_lower",{num:t}))),Pe.default.createElement(nr.Row,{className:Ge.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},Pe.default.createElement("div",{className:Ge.content},Pe.default.createElement("div",{className:Ge.inner},Pe.default.createElement(It.Number,{innerClassName:(0,Mt.default)({"rpc-evm-send-edit-nonce__warning-input":!!a}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:m("developer_mode_send_maintitle_nonce"),placeholder:`${Ee(t)?"":ze.thousandFormat(t)}`,size:It.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(r(ae(t,1)),!1):!0,onSub:()=>!e&&ie(t,0)?(r(at(t-1)),!1):!0,onChange:r})),a&&Pe.default.createElement("div",{className:Ge.warningText},Pe.default.createElement(it,{className:(0,Mt.default)(Ge.icon,"okx-wallet-plugin-warning-circle")}),a)))}var zr=Gn;i();s();var Ce=x(F());v();i();s();var w=x(F()),ot=x(se()),Vr=x(jt());v();i();s();var B={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var On=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Rn=({txTypeInfo:e,approve:t,onUpdateAuthAmount:o})=>{let{tokenInfo:r,amount:a}=t||{},{decimals:p,symbol:f}=r,c=Ae(f,12),[l,n]=(0,w.useState)(!1),[d,{toggle:T,setFalse:u,setTrue:_}]=(0,ot.useBoolean)(!1),[g,h]=(0,w.useState)(0),S=(0,w.useMemo)(()=>d?{type:B.danger,text:m("wallet_extension_approve_alert_high_risk_unlimited")}:!d&&ze.eq(g||0,0)?{type:B.info,text:m("wallet_extension_approve_cannot_zero")}:null,[d,g]),C=(0,ot.useMemoizedFn)((I=a)=>{ft(I)?(h(0),_()):(h(zo(I,p)),u()),n(!0)}),E=(0,w.useMemo)(()=>d?!1:!ze.gt(`${g||0}`,0),[d,g]),A=(0,ot.useMemoizedFn)(()=>{n(!1);let I=d?fo:Vo(g,p);o(I)});return w.default.createElement(k.Box,{className:B.root},w.default.createElement(k.Box,{className:B.icon,onClick:()=>{C()}},w.default.createElement(it,{className:"okx-wallet-plugin-draw-20"})),w.default.createElement(st.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:l},w.default.createElement(k.Box,{className:B.editApproveAmountModal},w.default.createElement(k.Box,{className:B.content},w.default.createElement(Be,{txTypeInfo:e,bordered:!1}),w.default.createElement(k.Box,{className:B.editArea},d?w.default.createElement(Ft.Text,{className:B.unlimitedText},m("wallet_extension_transfer_title_unlimited_amount",{token:w.default.createElement(Ft.Text,{className:B.unlimitedSymbol},c)})):w.default.createElement(Mo,{symbol:c,autoSize:On,placeholder:"0",decimals:p,value:g,onChange:h,style:{fontWeight:700,height:"42px"},symbolClassName:B.symbolClassName})),w.default.createElement(k.Box,{className:B.quickHandler},w.default.createElement(k.Box,{onClick:T,className:B.unlimited},w.default.createElement(k.Box,{className:B.text},m("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),w.default.createElement(mt,{checked:d}))),!!S&&w.default.createElement(k.Box,{className:(0,Vr.default)(B.authQuantityWarnTip,S.type)},S.text)),w.default.createElement(k.Box,{className:B.approveTip},m("wallet_extension_approve_desc_dapp_right")),w.default.createElement(ve,{affixStyle:{position:"none"},placeholder:!1,className:B.footerActions},w.default.createElement(U,{block:!0,disabled:E,category:U.CATEGORY.fill,type:U.TYPE.primary,size:U.SIZE.lg,onClick:A},m("wallet_extension_approve_btn_amount_confirmation"))))))},jr=Rn;var Wn=({onUpdateAuthAmount:e,dappInfo:t,loading:o,approveToken:r,title:a})=>{let{isApprove:p,isRevoke:f,address:c,customApproveAmount:l=0,symbol:n=Ze,decimals:d=0,icon:T=uo}=r,u=Ae(n,12);if(o)return Ce.default.createElement(Cr,null);if(p){let _={title:{text:a},subTitle:t.host};if(f){let h={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},..._};return Ce.default.createElement(Be,{txTypeInfo:{baseInfo:h}},Ce.default.createElement(jo,{imageUrl:T,text:u}))}let g={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},..._};return Ce.default.createElement(Be,{txTypeInfo:{baseInfo:g}},Ce.default.createElement(Ko,{approveInfoList:[{amount:l,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:c,decimals:d,symbol:n}}],renderEditApproveAmount:h=>Ce.default.createElement(jr,{txTypeInfo:{baseInfo:g},approve:h,onUpdateAuthAmount:e})}))}return Ce.default.createElement(Be,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:m("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},Kr=Wn;i();s();v();var Un=({chainGasLoadFailed:e,isSufficientBalance:t,isSufficientGas:o,transaction:r,actions:a,modifiedDataError:p,walletInfo:f,params:c,rpcInfo:l,addressCheckRet:n})=>{let{addressCheckLoading:d,addressCheckError:T}=n,u=t&&o,{chain:_,nonce:g,loading:h,gas:S}=r,{sign:C,cancel:E}=a,{chainGasLoading:A}=S,{loading:I,onClick:D}=me(E),G={actionType:b.ACTION_TYPE.CANCEL,onClick:D,loading:I},Q=async()=>{let ee=te=>{let V=xo[f?.keyringIdentityType];lo({tx_source:"dapp",from_addr:c.from,to_addr:c.to,main_token_symbol:l?.symbol,token_symbol:te?.extraParams?.coinSymbol||"",contract_address:c?.to,volume_token:c?.value,volume_usdt:"",tx_hash_unique:te?.txHash,wallet_type:V,chain_id:parseInt(_.chainId,16)})};C(f?.walletId,ee,l)},R=()=>{globalThis.open(l.faucetUrl)},Y=A||e||!u&&!l?.faucetUrl||g.pending||h.sign||h.token||p||T||d,{loading:q,onClick:Z}=me(Q),X={disabled:Y,actionType:b.ACTION_TYPE.CONFIRM,onClick:Z,loading:q};return!u&&l?.faucetUrl&&(X.actionType=b.ACTION_TYPE.FILL_UP,X.onClick=R,X.btnText=m("wallet_extension_transfer_btn_via_faucet")),[G,X]},Qr=Un;i();s();v();var Hn=({customGasInfo:e})=>()=>e?.isSupportEip1559&&e?.baseFeePerGas==="0"?{type:re.TYPE.warn,message:m("wallet_extension_transaction_error_base_zero")}:null,Yn=({modifiedDataError:e})=>()=>e?{}:null,qn=({isSufficientBalance:e})=>()=>e?null:{type:re.TYPE.warn,message:m("wallet_extension_popup_dapp_insufficient_balance")},zn=({isSufficientGas:e,chain:t})=>()=>e?null:{type:re.TYPE.warn,message:m("wallet_extension_popup_insufficient_network_fee",{token:t.symbol})},Vn=({chainGasLoadFailed:e,chainGasError:t})=>()=>e?{type:Se.TIP_TYPE.FEE_ERROR_WITH_MESSAGE,errorMsg:t}:null,jn=({auth:e,contract:t,asset:o})=>()=>ft(e.customApproveAmount)?{type:re.TYPE.warn,message:m("wallet_extension_popup_unlimited_transfer",{contract:t,asset:o})}:ie(e.customApproveAmount,0)?{type:re.TYPE.warn,message:m("extension_approve_alert_authorized_tips",{contract:t,asset:o})}:null,Kn=e=>()=>e?{type:Se.TIP_TYPE.COMMON_ERROR,message:e}:null,Qn=({customGasInfo:e,chainGasError:t,chainGasLoadFailed:o,modifiedDataError:r,isSufficientBalance:a,isSufficientGas:p,isRevokeTx:f,transaction:c,loading:l,addressCheckRet:n})=>{let{auth:d,chain:T}=c,{addressCheckLoading:u,addressCheckError:_}=n,g=Ae(d.name||Ze),h=Ae(d.symbol||Ze),S=Hn({customGasInfo:e}),C=Yn({modifiedDataError:r}),E=qn({isSufficientBalance:a,chain:T}),A=zn({isSufficientGas:p,chain:T}),I=Vn({chainGasLoadFailed:o,chainGasError:t}),D=()=>f?{type:re.TYPE.info,message:m("extension_revoke_approval_alert_evoke_authorization",{contract:g,asset:h})}:null,G=Kn(_),Q=jn({auth:d,contract:g,asset:h});if(l||u)return null;let R=[C,G,A,E,D,Q,I,S];for(let Y=0;Y<R.length;Y++){let q=R[Y],Z=q();if(Z)return Z}return null},Zr=Qn;var Dt=({unapproved:e,rpcInfo:t})=>{let{origin:o,params:r,method:a,chainId:p}=e,{from:f,value:c,to:l,typeInt:n}=r,[d,T]=(0,N.useState)(""),[u,_]=(0,N.useState)(!1),g=Yo(d),h=xt(o,f),[S,C]=mr({...r,...e,walletId:h?.walletId},t),E=(0,N.useMemo)(()=>[lt.FeeDelegatedValueTransfer,lt.FeeDelegatedValueTransferMemo,lt.FeeDelegatedSmartContractExecution].includes(n),[n]),{title:A,auth:I,meta:D,nonce:G,gas:Q,loading:R,data:Y}=S,{setNonce:q,setAuthAmount:Z}=C,{setGasType:X,currentGasInfo:ee,chainGasLevels:te,chainGasLoading:V,chainGasError:We,chainGasLoadFailed:he,setCustomGasOption:Ue,chainGasLimitLoadFailed:He}=Q,pe=ho(void 0,void 0,t),ye=dr(ee);or(t),_r(f,t),gr();let Ne=Ve(pe?.balance,ae(ye,zt(c||0))),Fe=Ve(pe?.balance,ye),{cancel:Ye}=C,ue=Me(e),$=rr({from:f,to:l,method:a,dappData:JSON.stringify({from:f,to:l,data:Y,value:c}),dappInfo:ue,chainIndex:O(p),isRpcChain:!0,handleCancel:Ye},so),fe=Zr({customGasInfo:ee,chainGasError:We,chainGasLoadFailed:he,isSufficientGas:Fe,isSufficientBalance:Ne,isRevokeTx:I.isRevoke,modifiedDataError:g,transaction:S,loading:V,addressCheckRet:$}),oe=Qr({chainGasLoadFailed:he,isSufficientBalance:Ne,isSufficientGas:Fe,transaction:S,actions:C,modifiedDataError:g,walletInfo:h,params:r,rpcInfo:t,addressCheckRet:$});return N.default.createElement(k.Container,null,N.default.createElement(Kr,{title:A,confirmBuryPointFn:()=>{},onUpdateAuthAmount:de=>{Z(de)},dappInfo:D.originInfo,loading:R.token,approveToken:I}),N.default.createElement(ce,null,N.default.createElement(Ct,{isFree:E,onClick:()=>{_(!0)},level:ee?.typeKey,injectCoin:pe,loading:V,estimateFailed:he,networkFee:V?void 0:Yt(ye,10**pe?.decimals)})),N.default.createElement(ce,null,N.default.createElement($e,{title:m("wallet_extension_network_address_title_walletused"),address:h.address,walletId:h.walletId}),!!l&&N.default.createElement($e,{title:m("wallet_extension_popup_text_interact_with"),address:l})),N.default.createElement(zr,{nonce:G.custom,suggestedNonce:G.suggested,setNonce:q}),Y?N.default.createElement(ce,{bordered:!1},N.default.createElement(Xo,{data:Y,copyable:{hideDesc:!0}})):N.default.createElement(ce,{bordered:!1},N.default.createElement(Ho,{value:d,error:g,onChange:T})),N.default.createElement(ve,{placeholder:!0,offsetBottom:0,borderTop:!0,style:{zIndex:10}},!g&&N.default.createElement(Se,{...fe}),N.default.createElement(b,{buttonGroup:oe})),V?null:N.default.createElement(Tr,{onBack:()=>{_(!1)},visible:u,rpcInfo:t,setGasType:X,chainGasLevels:te,setCustomGasOption:Ue,currentGasInfo:ee,chainGasLimitLoadFailed:He}))};i();s();var M=x(F()),Jr=x(se());v();$t();i();s();var xe={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var $r={uniqueId:Ke,rpcUrl:m("wallet_extension_rpc_title_official")},Zn=({targetRpcChain:e,targetMainChain:t,handleSelect:o})=>{let[r,a]=(0,M.useState)({}),p=[...e],f=!!t.length;f&&p.unshift($r);let[c,l]=(0,M.useState)(!1),{updateRpcNetwork:n}=pt(),d=(0,M.useCallback)(async()=>{try{l(!0);let u=e.find(_=>!!_.isDefaultRpc);if(r.isDefaultRpc||r.uniqueId===Ke&&!u)return;u&&await n({...u,isDefaultRpc:!1}),await n({...r,isDefaultRpc:!0})}catch(u){console.log(u)}finally{l(!1)}},[r,e,n]),T=(0,M.useCallback)(async()=>{await d(),o(r)},[r,o,d]);return(0,Jr.useMount)(()=>{let u=e.find(_=>_.isDefaultRpc);u?a(u):f&&a($r)}),M.default.createElement(k.FlexBox,{className:xe.root,direction:k.DIRECTION.vertical},M.default.createElement(Le,{backable:!1,closeable:!1,title:m("wallet_extension_rpc_title_select_rpc")}),M.default.createElement(k.Box,{className:xe.main},M.default.createElement(k.Box,{className:xe.tips},m("wallet_extension_rpc_desc_select_rpc_current")),M.default.createElement(k.Box,{className:xe.list},p.map(u=>M.default.createElement(k.Box,{className:xe.item,onClick:()=>{a(u)}},M.default.createElement(yo,{ellipsis:!0,className:xe.title},u.rpcUrl),M.default.createElement(mt.Circle,{checked:u.uniqueId===r.uniqueId}))))),M.default.createElement(k.Box,{className:xe.footer},M.default.createElement(b,{buttonGroup:[{loading:c,disabled:!r.uniqueId,actionType:b.ACTION_TYPE.CONFIRM,onClick:T,"data-testid":Ao.DAPP_ENTRY_PAGE.RPC_SELECTOR_CONFIRM_BUTTON}]})))},Xr=Zn;var Gt=(e,t)=>{(0,K.useEffect)(()=>{if(!t)return Ut;let o=setTimeout(()=>{ct(`evm-dapp-loading-exceeds-5s-${e}`)},5e3);return()=>{clearTimeout(o)}},[e,t])},$n=({status:e,evmMainNetworks:t,chainNotifyModalLoading:o})=>(Gt("status",e==="loading"),Gt("evmMainNetworks",!t?.length),Gt("chainNotifyModalLoading",o),K.default.createElement(er,null)),Jn=e=>{let{unapproved:t}=e,{rpcNetworks:o,status:r}=pt(),a=Po({appBaseChain:"ethereum"})||[],p=a.filter(T=>je(T.realChainIdHex,t.chainId)),f=o.filter(T=>je(T.chainId,t.chainId)),[c,l]=(0,K.useState)(null),n=p?.[0]?.chainName||f?.[0]?.name,{loading:d}=tr({unapproved:t,network:n,providerType:Zt});return r==="loading"||!a?.length||d?K.default.createElement($n,{status:r,evmMainNetworks:a,chainNotifyModalLoading:d}):p.length+f.length>1?c?c.uniqueId===Ke?K.default.createElement(Bt,{...e}):K.default.createElement(Dt,{...e,rpcInfo:c}):K.default.createElement(Xr,{networkType:t.networkType,targetRpcChain:f,targetMainChain:p,handleSelect:l}):p.length?K.default.createElement(Bt,{...e}):K.default.createElement(Dt,{...e,rpcInfo:f[0]})},en=Jn;i();s();var Re=x(F()),cn=x(ut()),ln=x(se());Pt();i();s();var ne=x(F()),nn=x(se());v();i();s();v();function tn(e){let t=e,o=t.msg||t.message||t.originalError?.message||m("wallet_extension_general_error_extension_code_error");W.error({title:o})}Jt();i();s();var Ot=x(F());v();i();s();var on={root:"_root_1r48s_1"};function Xn({onCancel:e}){return Ot.default.createElement(k.Container,{className:on.root},Ot.default.createElement(qo,{confirmBtnText:m("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:m("wallet_extension_transfer_btn_reject_all"),handleCancel:e}))}var rn=Xn;function ea({txParams:e,unapproved:t,onCancel:o,modifiedCalls:r}){let{chainId:a,extParams:{chain7702Data:{contractAddress:p}},walletId:f}=t,{from:c,authorizationList:l}=e||{},n=l&&l.length>0,d=H(a),[T,u]=(0,ne.useState)(""),{gasLimitParams:_}=ar({isUpgrade7702:!0,fromAddress:c,disabled:!e||!n,localType:d.localType,inputData:T||e?.data,upgradeAddress:p}),g=(0,ne.useMemo)(()=>_?.stateOverrideList?{stateOverrideList:_.stateOverrideList}:{},[_]),h=C=>{if(!n)return C;let{nonce:E,...A}=C,I=Et({localType:d.localType});return{...A,nonce:E,authorizationList:[{chainId:I?.realChainIdHex,address:p,nonce:J(Number(O(E))+1),fromAddress:c,walletId:f,localType:d.localType}]}};if(!e||n&&!_)return ne.default.createElement(rn,{onCancel:o});let S=(r||[]).reduce((C,E)=>{let A=E.value?O(E.value).toString():"0";return`${ae(C,A)}`},"0");return ne.default.createElement(ht,{reserveValue:S,showApproveAddressAtPopup:!0,needMev:!0,confirmBtnText:m("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:m("wallet_extension_transfer_btn_reject_all"),txToastCheckParams:g,preExecParams:g,gasLimitParams:_,unapproved:{...t,params:e},onBeforeSign:h,extraParams:{eip7702UpgradeAddress:n?p:void 0,modifiedCalls:r},onDataChange:u})}function ta({unapproved:e,shouldUpgrade7702:t,onCancel:o}){let{chainId:r}=e,[a,p]=(0,ne.useState)(null),[f,c]=(0,ne.useState)(null);return(0,nn.useMount)(()=>{(async()=>{try{let{params:{from:l,calls:n},extParams:{chain7702Data:{contractAddress:d,contractData:T}}}=e,u={from:l,to:l,value:"0x0"},_=[...n];if(t){let g=Et({chainId:r});_.unshift({to:l,value:"0x0",data:T}),u.authorizationList=[{chainId:g.realChainIdHex,address:d}]}u.data=await Qo({type:1,chainIndex:r,calls:_}),c(_),p(u)}catch(l){tn(l)}})()}),ne.default.createElement(ea,{unapproved:e,txParams:a,modifiedCalls:f,onCancel:o})}var an=ta;i();s();var z=x(F()),sn=x(se());be();v();i();s();var Oe={content:"_content_1qv1a_1",title:"_title_1qv1a_5",subTitle:"_subTitle_1qv1a_12",footerWrapper:"_footerWrapper_1qv1a_19",footer:"_footer_1qv1a_19"};function ra({status:e,walletId:t,chainIndex:o,onCancel:r,onClose:a}){let[p,f]=(0,z.useState)(e),c,l=async()=>{let u=((await Fo(t))?.chainList||[]).find(_=>_.chainIndex===o)?.status;Ee(u)||(u===3?a(!1):f(u))};return p===1||p===4?c={loading:!1,btnText:m("wallet_extension_transfer_bttmsheet_btn_apply_continue"),onClick:()=>{a(!0)}}:c={loading:!0,btnText:m("wallet_extension_transfer_bttmsheet_btn_processing")},No("wallet-tx-status-toast",{onSuccess:l}),(0,sn.useMount)(()=>{l()}),z.default.createElement(k.Container,null,z.default.createElement(Le,{closeable:!1,backable:!1}),z.default.createElement(st.Action,{isFull:!0,visible:!0,hideCloseBtn:!0,escToClose:!1,maskClosable:!1,renderContent:()=>z.default.createElement("div",{className:Oe.content},z.default.createElement("div",{className:Oe.title},m("wallet_extension_transfer_bttmsheet_title_okx7702")),z.default.createElement("div",{className:Oe.subTitle},m("wallet_extension_transfer_bttmsheet_desc_okx7702")),z.default.createElement(xr,null)),footerClassName:Oe.footerWrapper,renderFooter:()=>z.default.createElement("div",{className:Oe.footer},z.default.createElement(U,{category:U.CATEGORY.outline,type:U.TYPE.primary,size:U.SIZE.lg,onClick:r},m("wallet_extension_btn_general_cancel")),z.default.createElement(U,{category:U.CATEGORY.fill,type:U.TYPE.primary,size:U.SIZE.lg,...c},c.btnText))}))}var mn=ra;function na({unapproved:e}){let{id:t,extParams:o,chainId:r}=e,{chain7702Data:{status:a}}=o,p=(0,cn.useDispatch)(),[f,c]=(0,Re.useState)(a!==3),[l,n]=(0,Re.useState)(!1),d=(0,ln.useMemoizedFn)(async()=>{await p(_t(t)),await Te(p)});return f?Re.default.createElement(mn,{status:a,walletId:e.walletId,chainIndex:r,onCancel:d,onClose:T=>{c(!1),n(T)}}):Re.default.createElement(an,{unapproved:e,shouldUpgrade7702:l,onCancel:d})}var pn=na;var kp=(0,le.memo)(({unapproved:e})=>{switch(e.method){case St.SEND_EVM_INSCRIPTIONS:return le.default.createElement(Mr,{unapproved:e});case St.WALLET_SEND_CALLS:return le.default.createElement(pn,{unapproved:e});default:break}switch(e.type){case _e.ETH_SIGN:case _e.PERSONAL_SIGN:case _e.ETH_SIGN_TYPED_DATA:case _e.ETH_GET_ENCRYPTION_PUBLIC_KEY:case _e.ETH_DECRYPT:return le.default.createElement(fr,{unapproved:e});case _e.WATCH_ASSET:return le.default.createElement(Ar,{unapproved:e});case _e.ADD_ETHEREUM_CHAIN:return le.default.createElement(lr,{unapproved:e});default:return le.default.createElement(en,{unapproved:e})}});export{kp as default};
//# sourceMappingURL=Ethereum-ORXPBXOF.js.map
