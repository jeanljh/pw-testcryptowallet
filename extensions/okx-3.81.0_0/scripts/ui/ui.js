;
window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";


import{e as $f}from"./chunk-GNW7QJWA.js";import{h as Jf,i as Jd}from"./chunk-GH52PC35.js";import"./chunk-3DJSYHH7.js";import{a as ZS,b as jd,g as Hd}from"./chunk-EL32QQI5.js";import{N as Xf}from"./chunk-ZRLUOHGM.js";import{c as Zf}from"./chunk-DYVA6G7B.js";import{j as Kf}from"./chunk-IAN2CB2T.js";import{a as Gd,v as Kd}from"./chunk-76H3GJ3E.js";import{a as Vd}from"./chunk-A4VJP6UE.js";import{a as io}from"./chunk-A35AJWZM.js";import"./chunk-5GHXPDUI.js";import{a as Ud,y as qd}from"./chunk-BC5LWHDZ.js";import{a as Ip}from"./chunk-SVG7BWFP.js";import"./chunk-JZBABWUI.js";import{a as Oi}from"./chunk-GLRDVHLR.js";import{a as vp}from"./chunk-PUPWLGRU.js";import{a as Ld,d as Wd}from"./chunk-UQTI5PPO.js";import{d as tc}from"./chunk-GR44ZN4M.js";import{a as cf,b as df,c as pf,d as hf,e as mf,f as gf,g as _f,h as wf,i as kp}from"./chunk-AI7TDHPE.js";import{a as Ap}from"./chunk-YINA5CY5.js";import{a as Vf}from"./chunk-SQUA6K5B.js";import{a as Sp}from"./chunk-EVEVDELV.js";import{a as bp}from"./chunk-6Z5COCHC.js";import{a as Cp,b as xp,c as Ep,d as Tp,e as Pp,f as Op,h as Np,i as Lp}from"./chunk-TS6QJPGP.js";import{b as Gf}from"./chunk-EDWL2MSA.js";import{c as Xd}from"./chunk-6D46L7TU.js";import"./chunk-HGC2KGIM.js";import"./chunk-K4U5WZQU.js";import{a as zu,b as Xu,h as Ju,i as Un}from"./chunk-P3S4ES3J.js";import{a as pv}from"./chunk-Z6EEIDRL.js";import{c as dp}from"./chunk-ITLEVVXJ.js";import"./chunk-NZX52M3S.js";import"./chunk-K35GFLBJ.js";import{a as Pd}from"./chunk-7R6RXU4S.js";import{i as Hf}from"./chunk-V3ZL5FH4.js";import{a as op,b as ip,c as ap,d as sp,e as lp,f as up,g as fp}from"./chunk-QRGSOGHH.js";import{c as Ml,d as Dp}from"./chunk-MM4URJBQ.js";import{c as so}from"./chunk-EZ2ONRBI.js";import"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import{e as wp}from"./chunk-AP337SRV.js";import"./chunk-TF4QEXO7.js";import{b as mp,c as gp}from"./chunk-CHMHYYPI.js";import{h as Bf}from"./chunk-JBNHZ7EW.js";import{f as pp,g as hp}from"./chunk-GDQAWT2G.js";import{U as Mp,a as Mi}from"./chunk-QJ36ZOFH.js";import{l as ec}from"./chunk-7HYQ2DGP.js";import{a as kd,b as Ad,c as Rd}from"./chunk-G7XOYBNH.js";import{a as _p}from"./chunk-JHO7RU36.js";import"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import{e as Cr}from"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import{b as Qf}from"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import{b as Hu,d as Gu,h as Ht,i as Yu}from"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-3ZKJXYZ4.js";import{b as cp}from"./chunk-PMO2NS5Q.js";import"./chunk-4ZSKRAEE.js";import{a as he}from"./chunk-IIJNHSKZ.js";import{a as to}from"./chunk-AYPA3NBZ.js";import"./chunk-SOSR34AP.js";import"./chunk-GEL5KEYP.js";import"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import{b as $d,c as Yd,d as zd}from"./chunk-47LIW52M.js";import{Aa as of,Ja as af,Ma as sf,P as ef,Pa as lf,Ta as uf,V as tf,Ya as ff,a as Zu,fa as rf,ha as nf,o as Qu}from"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{G as np,a as Ff,b as jf,h as Bd,l as Fd}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import{c as me}from"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import{a as Nd}from"./chunk-DK5VLY7L.js";import{n as Dd}from"./chunk-FVCINJIW.js";import"./chunk-VUHYFIVA.js";import"./chunk-DZGSODSZ.js";import{a as ao,b as ge}from"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import{a as jt,c as Vu,d as $u}from"./chunk-ITDLKQAF.js";import{a as yp}from"./chunk-J6XCA7RV.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import{a as ve}from"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import{b as Rp}from"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{j as oo}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{$ as Lc,$a as Xn,A as Vt,Aa as td,Ab as Td,B as mc,Ba as rd,C as gc,Ca as nd,D as _c,Da as od,E as jn,Ea as id,F as Hn,Fa as ad,G as Gn,H as wc,I as yc,J as bc,K as Sc,L as vc,M as Cc,N as xc,O as Ec,P as Tc,Q as Kn,R as Vn,Ra as sd,S as Pc,T as kc,U as Ac,V as Rc,W as Ic,Wa as ld,X as Oc,Y as Mc,Z as Dc,_ as Nc,a as Se,aa as Wc,ab as Jn,b as ct,ba as Uc,bb as ud,c as Kt,ca as qc,d as rc,da as Bc,e as Bn,ea as Fc,eb as Zn,f as nc,fa as jc,g as oc,ga as $n,gb as fd,h as ic,ha as Hc,hb as cd,i as ac,ia as Gc,ib as dd,j as sc,ja as Kc,jb as pd,ka as Vc,kb as hd,l as lc,la as $c,lb as md,m as uc,ma as Yc,mb as gd,n as fc,na as zc,nb as _d,oa as Yn,ob as wd,pa as zn,pb as Qn,qa as vr,ra as Xc,sa as Jc,ta as Zc,tb as yd,ub as bd,v as cc,vb as Sd,w as dc,wb as vd,x as pc,xa as Qc,xb as Cd,y as hc,yb as xd,z as Fn,za as ed,zb as Ed}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import{b as zf}from"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as Gt,g as dv}from"./chunk-FGAB46RQ.js";import{b as Id,c as Od,d as Md,e as eo}from"./chunk-47ZMUKCZ.js";import{o as qn}from"./chunk-Z62JX42S.js";import{$ as Ft,N as Bt,Na as ce,R as Ou,T as Mu,U as Du,V as Nu,Y as Lu,aa as Ln,ba as Wu,da as ft,la as Uu,qa as qu,sa as Bu,va as Fu,wa as ju}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as Te}from"./chunk-6PA65BO3.js";import"./chunk-XSVHDPBS.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import{a as Df,b as fv,c as Sr,d as Nf,e as cv,h as Lf,i as Ri,j as Wf,l as Uf,n as qf,q as Ii}from"./chunk-NUN72MDU.js";import{d as Mf,f as uv}from"./chunk-BFWVIVOY.js";import{F as Af,G as Rf,R as If,S as Of,U as lv,b as yf,d as bf,e as Sf,f as vf,g as Cf,h as xf,i as Ef,j as Tf,m as Pf,n as kf}from"./chunk-S3FOFXM7.js";import{a as Oe,g as ku,i as Au,j as iv,k as Nn,l as Ru}from"./chunk-YIFLUVTR.js";import{a as Kl,b as Ku,c as xt,e as Wn}from"./chunk-EN2WHAVL.js";import{b as no,d as Zd,e as Qd,g as ep,h as tp,j as rp}from"./chunk-CP2RIMI2.js";import{b as Yf}from"./chunk-3QLLFUC4.js";import{B as qt,C as be,G as zl,H as Xl}from"./chunk-EFOY37CC.js";import{c as Di}from"./chunk-HMTT52FG.js";import{a as ro}from"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import{b as Mn,c as ou}from"./chunk-GR7YC6C3.js";import{A as Dn,B as bu,C as Su,D as vu,E as Cu,F as xu,G as Eu,H as Tu,I as Pu,J as Ai,a as Jl,b as ev,l as uu,m as ov,n as br,o as fu,p as cu,q as du,r as pu,s as hu,t as mu,u as gu,v as _u,x as wu,y as yu}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import{a as nv}from"./chunk-35ANKHOJ.js";import{a as Al,b as Rl,d as Il,e as Ol,f as Ct,h as kn}from"./chunk-BI4OEIFC.js";import{A as Yl,Gb as Iu,J as _r,L as iu,M as au,N as su,Sb as av,a as U,b as Wt,c as ut,d as Ee,f as vt,g as bi,h as je,k as Si,nc as sv,p as An,q as Rn,r as Vl,s as Ei,t as In,x as $l}from"./chunk-COF7YKSN.js";import{A as M,C as ql,D as Z,K as ye,c as vi,h as Ll,o as Wl,s as Ul,y as Ci}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{H as De,I as nu,J as yr,a as tv,b as Ti,c as tu,d as ru,g as Pi,k as On,o as He,r as ki,y as Me}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import{a as Bl,b as Fl,c as jl,d as Hl,e as Gl,g as JS}from"./chunk-K336SGW3.js";import{f as Ut,j as mr,o as Dl,s as Nl,va as gr}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{z as fe}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import{K as wr,c as rv,h as Ql,i as eu}from"./chunk-LBWWOQL4.js";import{a as Zl}from"./chunk-4QGZDIBD.js";import{b as k}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import{b as xi}from"./chunk-EHLPF3A6.js";import{b as lu}from"./chunk-Z7PBP7IJ.js";import{a as QS}from"./chunk-CPCEFWI2.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import{b as XS}from"./chunk-C5XO4JMZ.js";import{a as G,b as lt,c as K,p as Fe,q as Pn}from"./chunk-HI3LE734.js";import{d as Tn}from"./chunk-RX4V72AK.js";import{c as x,f as p,h as st,n as process,o as a,p as f,q as s}from"./chunk-Y5OH3DDZ.js";var xr=x((g0,Ni)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Ni.exports={nextTick:hv}:Ni.exports=process;function hv(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Up=x((y0,Wp)=>{a();s();var mv={}.toString;Wp.exports=Array.isArray||function(e){return mv.call(e)=="[object Array]"}});var Li=x((v0,qp)=>{a();s();qp.exports=lt().EventEmitter});var Er=x((Wi,Fp)=>{a();s();var lo=Tn(),Ge=lo.Buffer;function Bp(e,t){for(var r in e)t[r]=e[r]}Ge.from&&Ge.alloc&&Ge.allocUnsafe&&Ge.allocUnsafeSlow?Fp.exports=lo:(Bp(lo,Wi),Wi.Buffer=$t);function $t(e,t,r){return Ge(e,t,r)}Bp(Ge,$t);$t.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ge(e,t,r)};$t.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Ge(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};$t.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ge(e)};$t.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return lo.SlowBuffer(e)}});var Hp=x((P0,Ui)=>{a();s();function gv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jp=Er().Buffer,Tr=Fe();function _v(e,t,r){e.copy(t,r)}Ui.exports=function(){function e(){gv(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return jp.alloc(0);if(this.length===1)return this.head.data;for(var n=jp.allocUnsafe(r>>>0),o=this.head,i=0;o;)_v(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();Tr&&Tr.inspect&&Tr.inspect.custom&&(Ui.exports.prototype[Tr.inspect.custom]=function(){var e=Tr.inspect({length:this.length});return this.constructor.name+" "+e})});var qi=x((R0,Vp)=>{a();s();var Gp=xr();function wv(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Gp.nextTick(Kp,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Gp.nextTick(Kp,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function yv(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Kp(e,t){e.emit("error",t)}Vp.exports={destroy:wv,undestroy:yv}});var Fi=x((M0,eh)=>{a();s();var Et=xr();eh.exports=V;function Yp(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Wv(t,e)}}var bv=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Et.nextTick,Yt;V.WritableState=kr;var zp=Object.create(K());zp.inherits=G();var Sv={deprecate:Pn()},Xp=Li(),fo=Er().Buffer,vv=globalThis.Uint8Array||function(){};function Cv(e){return fo.from(e)}function xv(e){return fo.isBuffer(e)||e instanceof vv}var Jp=qi();zp.inherits(V,Xp);function Ev(){}function kr(e,t){Yt=Yt||Tt(),e=e||{};var r=t instanceof Yt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){Ov(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Yp(this)}kr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(kr.prototype,"buffer",{get:Sv.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var uo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(uo=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(e){return uo.call(this,e)?!0:this!==V?!1:e&&e._writableState instanceof kr}})):uo=function(e){return e instanceof this};function V(e){if(Yt=Yt||Tt(),!uo.call(V,this)&&!(this instanceof Yt))return new V(e);this._writableState=new kr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Xp.call(this)}V.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Tv(e,t){var r=new Error("write after end");e.emit("error",r),Et.nextTick(t,r)}function Pv(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),Et.nextTick(n,i),o=!1),o}V.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&xv(e);return i&&!fo.isBuffer(e)&&(e=Cv(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Ev),n.ended?Tv(this,r):(i||Pv(this,n,e,r))&&(n.pendingcb++,o=Av(this,n,i,e,t,r)),o};V.prototype.cork=function(){var e=this._writableState;e.corked++};V.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Zp(this,e))};V.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function kv(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=fo.from(t,r)),t}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Av(e,t,r,n,o,i){if(!r){var l=kv(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Bi(e,t,!1,u,n,o,i);return c}function Bi(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function Rv(e,t,r,n,o){--t.pendingcb,r?(Et.nextTick(o,n),Et.nextTick(Pr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Pr(e,t))}function Iv(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Ov(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(Iv(r),t)Rv(e,r,n,t,o);else{var i=Qp(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Zp(e,r),n?bv($p,e,r,i,o):$p(e,r,i,o)}}function $p(e,t,r,n){r||Mv(e,t),t.pendingcb--,n(),Pr(e,t)}function Mv(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Zp(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,u=!0;r;)o[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;o.allBuffers=u,Bi(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Yp(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,b=r.callback,C=t.objectMode?1:c.length;if(Bi(e,t,!1,C,c,d,b),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}V.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};V.prototype._writev=null;V.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Lv(this,n,r)};function Qp(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Dv(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Pr(e,t)})}function Nv(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Et.nextTick(Dv,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Pr(e,t){var r=Qp(t);return r&&(Nv(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function Lv(e,t,r){t.ending=!0,Pr(e,t),r&&(t.finished?Et.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Wv(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(V.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});V.prototype.destroy=Jp.destroy;V.prototype._undestroy=Jp.undestroy;V.prototype._destroy=function(e,t){this.end(),t(e)}});var Tt=x((L0,oh)=>{a();s();var th=xr(),Uv=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};oh.exports=Ke;var rh=Object.create(K());rh.inherits=G();var nh=Gi(),Hi=Fi();rh.inherits(Ke,nh);for(ji=Uv(Hi.prototype),co=0;co<ji.length;co++)po=ji[co],Ke.prototype[po]||(Ke.prototype[po]=Hi.prototype[po]);var ji,po,co;function Ke(e){if(!(this instanceof Ke))return new Ke(e);nh.call(this,e),Hi.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",qv)}Object.defineProperty(Ke.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function qv(){this.allowHalfOpen||this._writableState.ended||th.nextTick(Bv,this)}function Bv(e){e.end()}Object.defineProperty(Ke.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Ke.prototype._destroy=function(e,t){this.push(null),this.end(),th.nextTick(t,e)}});var $i=x(ah=>{a();s();var Vi=Er().Buffer,ih=Vi.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Fv(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function jv(e){var t=Fv(e);if(typeof t!="string"&&(Vi.isEncoding===ih||!ih(e)))throw new Error("Unknown encoding: "+e);return t||e}ah.StringDecoder=Ar;function Ar(e){this.encoding=jv(e);var t;switch(this.encoding){case"utf16le":this.text=Yv,this.end=zv,t=4;break;case"utf8":this.fillLast=Kv,t=4;break;case"base64":this.text=Xv,this.end=Jv,t=3;break;default:this.write=Zv,this.end=Qv;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Vi.allocUnsafe(t)}Ar.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Ar.prototype.end=$v;Ar.prototype.text=Vv;Ar.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Ki(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Hv(e,t,r){var n=t.length-1;if(n<r)return 0;var o=Ki(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=Ki(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=Ki(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function Gv(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Kv(e){var t=this.lastTotal-this.lastNeed,r=Gv(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Vv(e,t){var r=Hv(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function $v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Yv(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function zv(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Xv(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Jv(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Zv(e){return e.toString(this.encoding)}function Qv(e){return e&&e.length?this.write(e):""}});var Gi=x((H0,wh)=>{a();s();var Xt=xr();wh.exports=N;var eC=Up(),Rr;N.ReadableState=ph;var j0=lt().EventEmitter,fh=function(e,t){return e.listeners(t).length},Zi=Li(),Ir=Er().Buffer,tC=globalThis.Uint8Array||function(){};function rC(e){return Ir.from(e)}function nC(e){return Ir.isBuffer(e)||e instanceof tC}var ch=Object.create(K());ch.inherits=G();var Yi=Fe(),A=void 0;Yi&&Yi.debuglog?A=Yi.debuglog("stream"):A=function(){};var oC=Hp(),dh=qi(),zt;ch.inherits(N,Zi);var zi=["error","close","destroy","pause","resume"];function iC(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):eC(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function ph(e,t){Rr=Rr||Tt(),e=e||{};var r=t instanceof Rr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new oC,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(zt||(zt=$i().StringDecoder),this.decoder=new zt(e.encoding),this.encoding=e.encoding)}function N(e){if(Rr=Rr||Tt(),!(this instanceof N))return new N(e);this._readableState=new ph(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Zi.call(this)}Object.defineProperty(N.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});N.prototype.destroy=dh.destroy;N.prototype._undestroy=dh.undestroy;N.prototype._destroy=function(e,t){this.push(null),t(e)};N.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Ir.from(e,t),t=""),n=!0),hh(this,e,t,!1,n)};N.prototype.unshift=function(e){return hh(this,e,null,!0,!1)};function hh(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,uC(e,i);else{var l;o||(l=aC(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==Ir.prototype&&(t=rC(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Xi(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?Xi(e,i,t,!1):mh(e,i)):Xi(e,i,t,!1))):n||(i.reading=!1)}return sC(i)}function Xi(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&ho(e)),mh(e,t)}function aC(e,t){var r;return!nC(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function sC(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}N.prototype.isPaused=function(){return this._readableState.flowing===!1};N.prototype.setEncoding=function(e){return zt||(zt=$i().StringDecoder),this._readableState.decoder=new zt(e),this._readableState.encoding=e,this};var sh=8388608;function lC(e){return e>=sh?e=sh:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function lh(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=lC(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}N.prototype.read=function(e){A("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return A("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ji(this):ho(this),null;if(e=lh(e,t),e===0&&t.ended)return t.length===0&&Ji(this),null;var n=t.needReadable;A("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,A("length less than watermark",n)),t.ended||t.reading?(n=!1,A("reading or ended",n)):n&&(A("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=lh(r,t)));var o;return e>0?o=gh(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ji(this)),o!==null&&this.emit("data",o),o};function uC(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,ho(e)}}function ho(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Xt.nextTick(uh,e):uh(e))}function uh(e){A("emit readable"),e.emit("readable"),Qi(e)}function mh(e,t){t.readingMore||(t.readingMore=!0,Xt.nextTick(fC,e,t))}function fC(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(A("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}N.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};N.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,A("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?u:_;n.endEmitted?Xt.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(w,E){A("onunpipe"),w===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,b())}function u(){A("onend"),e.end()}var c=cC(r);e.on("drain",c);var d=!1;function b(){A("cleanup"),e.removeListener("close",T),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",_),r.removeListener("data",S),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var C=!1;r.on("data",S);function S(w){A("ondata"),C=!1;var E=e.write(w);E===!1&&!C&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&_h(n.pipes,e)!==-1)&&!d&&(A("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,C=!0),r.pause())}function v(w){A("onerror",w),_(),e.removeListener("error",v),fh(e,"error")===0&&e.emit("error",w)}iC(e,"error",v);function T(){e.removeListener("finish",m),_()}e.once("close",T);function m(){A("onfinish"),e.removeListener("close",T),_()}e.once("finish",m);function _(){A("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(A("pipe resume"),r.resume()),e};function cC(e){return function(){var t=e._readableState;A("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&fh(e,"data")&&(t.flowing=!0,Qi(e))}}N.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=_h(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};N.prototype.on=function(e,t){var r=Zi.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ho(this):Xt.nextTick(dC,this))}return r};N.prototype.addListener=N.prototype.on;function dC(e){A("readable nexttick read 0"),e.read(0)}N.prototype.resume=function(){var e=this._readableState;return e.flowing||(A("resume"),e.flowing=!0,pC(this,e)),this};function pC(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Xt.nextTick(hC,e,t))}function hC(e,t){t.reading||(A("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Qi(e),t.flowing&&!t.reading&&e.read(0)}N.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Qi(e){var t=e._readableState;for(A("flow",t.flowing);t.flowing&&e.read()!==null;);}N.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(A("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(A("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var u=t.push(l);u||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<zi.length;i++)e.on(zi[i],this.emit.bind(this,zi[i]));return this._read=function(l){A("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});N._fromList=gh;function gh(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=mC(e,t.buffer,t.decoder),r}function mC(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?gC(e,t):_C(e,t),n}function gC(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function _C(e,t){var r=Ir.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function Ji(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Xt.nextTick(wC,t,e))}function wC(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function _h(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var ea=x((V0,Sh)=>{a();s();Sh.exports=Ve;var mo=Tt(),bh=Object.create(K());bh.inherits=G();bh.inherits(Ve,mo);function yC(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Ve(e){if(!(this instanceof Ve))return new Ve(e);mo.call(this,e),this._transformState={afterTransform:yC.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",bC)}function bC(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){yh(e,t,r)}):yh(this,null,null)}Ve.prototype.push=function(e,t){return this._transformState.needTransform=!1,mo.prototype.push.call(this,e,t)};Ve.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Ve.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Ve.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ve.prototype._destroy=function(e,t){var r=this;mo.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function yh(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Eh=x((z0,xh)=>{a();s();xh.exports=Or;var vh=ea(),Ch=Object.create(K());Ch.inherits=G();Ch.inherits(Or,vh);function Or(e){if(!(this instanceof Or))return new Or(e);vh.call(this,e)}Or.prototype._transform=function(e,t,r){r(null,e)}});var Ph=x((Ne,Th)=>{a();s();Ne=Th.exports=Gi();Ne.Stream=Ne;Ne.Readable=Ne;Ne.Writable=Fi();Ne.Duplex=Tt();Ne.Transform=ea();Ne.PassThrough=Eh()});var ta=x((eA,Ah)=>{a();s();var kh=Ph().Duplex,SC=Fe().inherits;Ah.exports=Mr;SC(Mr,kh);function Mr(e){kh.call(this,{objectMode:!0}),this._name=e.name,this._target=e.target,this._targetWindow=e.targetWindow||window,this._origin=e.targetWindow?"*":location.origin,this._init=!1,this._haveSyn=!1,window.addEventListener("message",this._onMessage.bind(this),!1),this._write("SYN",null,go),this.cork()}Mr.prototype._onMessage=function(e){var t=e.data;if(!(this._origin!=="*"&&e.origin!==this._origin)&&e.source===this._targetWindow&&typeof t=="object"&&t.target===this._name&&!!t.data)if(!this._init)t.data==="SYN"?(this._haveSyn=!0,this._write("ACK",null,go)):t.data==="ACK"&&(this._init=!0,this._haveSyn||this._write("ACK",null,go),this.uncork());else try{this.push(t.data)}catch(r){this.emit("error",r)}};Mr.prototype._read=go;Mr.prototype._write=function(e,t,r){var n={target:this._target,data:e};this._targetWindow.postMessage(n,this._origin),r()};function go(){}});var Dr=x((nA,ra)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ra.exports={nextTick:vC}:ra.exports=process;function vC(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Ih=x((aA,Rh)=>{a();s();var CC={}.toString;Rh.exports=Array.isArray||function(e){return CC.call(e)=="[object Array]"}});var na=x((uA,Oh)=>{a();s();Oh.exports=lt().EventEmitter});var Nr=x((oa,Dh)=>{a();s();var _o=Tn(),$e=_o.Buffer;function Mh(e,t){for(var r in e)t[r]=e[r]}$e.from&&$e.alloc&&$e.allocUnsafe&&$e.allocUnsafeSlow?Dh.exports=_o:(Mh(_o,oa),oa.Buffer=Jt);function Jt(e,t,r){return $e(e,t,r)}Mh($e,Jt);Jt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return $e(e,t,r)};Jt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=$e(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Jt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return $e(e)};Jt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return _o.SlowBuffer(e)}});var Lh=x((hA,ia)=>{a();s();function xC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Nh=Nr().Buffer,Lr=Fe();function EC(e,t,r){e.copy(t,r)}ia.exports=function(){function e(){xC(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Nh.alloc(0);if(this.length===1)return this.head.data;for(var n=Nh.allocUnsafe(r>>>0),o=this.head,i=0;o;)EC(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();Lr&&Lr.inspect&&Lr.inspect.custom&&(ia.exports.prototype[Lr.inspect.custom]=function(){var e=Lr.inspect({length:this.length});return this.constructor.name+" "+e})});var aa=x((_A,qh)=>{a();s();var Wh=Dr();function TC(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Wh.nextTick(Uh,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Wh.nextTick(Uh,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function PC(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Uh(e,t){e.emit("error",t)}qh.exports={destroy:TC,undestroy:PC}});var la=x((bA,$h)=>{a();s();var Pt=Dr();$h.exports=$;function Fh(e){var t=this;this.next=null,this.entry=null,this.finish=function(){KC(t,e)}}var kC=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Pt.nextTick,Zt;$.WritableState=Ur;var jh=Object.create(K());jh.inherits=G();var AC={deprecate:Pn()},Hh=na(),yo=Nr().Buffer,RC=globalThis.Uint8Array||function(){};function IC(e){return yo.from(e)}function OC(e){return yo.isBuffer(e)||e instanceof RC}var Gh=aa();jh.inherits($,Hh);function MC(){}function Ur(e,t){Zt=Zt||kt(),e=e||{};var r=t instanceof Zt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){BC(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Fh(this)}Ur.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Ur.prototype,"buffer",{get:AC.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var wo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(wo=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(e){return wo.call(this,e)?!0:this!==$?!1:e&&e._writableState instanceof Ur}})):wo=function(e){return e instanceof this};function $(e){if(Zt=Zt||kt(),!wo.call($,this)&&!(this instanceof Zt))return new $(e);this._writableState=new Ur(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Hh.call(this)}$.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function DC(e,t){var r=new Error("write after end");e.emit("error",r),Pt.nextTick(t,r)}function NC(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),Pt.nextTick(n,i),o=!1),o}$.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&OC(e);return i&&!yo.isBuffer(e)&&(e=IC(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=MC),n.ended?DC(this,r):(i||NC(this,n,e,r))&&(n.pendingcb++,o=WC(this,n,i,e,t,r)),o};$.prototype.cork=function(){var e=this._writableState;e.corked++};$.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Kh(this,e))};$.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function LC(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=yo.from(t,r)),t}Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function WC(e,t,r,n,o,i){if(!r){var l=LC(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else sa(e,t,!1,u,n,o,i);return c}function sa(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function UC(e,t,r,n,o){--t.pendingcb,r?(Pt.nextTick(o,n),Pt.nextTick(Wr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Wr(e,t))}function qC(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function BC(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(qC(r),t)UC(e,r,n,t,o);else{var i=Vh(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Kh(e,r),n?kC(Bh,e,r,i,o):Bh(e,r,i,o)}}function Bh(e,t,r,n){r||FC(e,t),t.pendingcb--,n(),Wr(e,t)}function FC(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Kh(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,u=!0;r;)o[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;o.allBuffers=u,sa(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Fh(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,b=r.callback,C=t.objectMode?1:c.length;if(sa(e,t,!1,C,c,d,b),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}$.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};$.prototype._writev=null;$.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&GC(this,n,r)};function Vh(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function jC(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Wr(e,t)})}function HC(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Pt.nextTick(jC,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Wr(e,t){var r=Vh(t);return r&&(HC(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function GC(e,t,r){t.ending=!0,Wr(e,t),r&&(t.finished?Pt.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function KC(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty($.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});$.prototype.destroy=Gh.destroy;$.prototype._undestroy=Gh.undestroy;$.prototype._destroy=function(e,t){this.end(),t(e)}});var kt=x((CA,Jh)=>{a();s();var Yh=Dr(),VC=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Jh.exports=Ye;var zh=Object.create(K());zh.inherits=G();var Xh=ca(),fa=la();zh.inherits(Ye,Xh);for(ua=VC(fa.prototype),bo=0;bo<ua.length;bo++)So=ua[bo],Ye.prototype[So]||(Ye.prototype[So]=fa.prototype[So]);var ua,So,bo;function Ye(e){if(!(this instanceof Ye))return new Ye(e);Xh.call(this,e),fa.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",$C)}Object.defineProperty(Ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function $C(){this.allowHalfOpen||this._writableState.ended||Yh.nextTick(YC,this)}function YC(e){e.end()}Object.defineProperty(Ye.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Ye.prototype._destroy=function(e,t){this.push(null),this.end(),Yh.nextTick(t,e)}});var ha=x(Qh=>{a();s();var pa=Nr().Buffer,Zh=pa.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function zC(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function XC(e){var t=zC(e);if(typeof t!="string"&&(pa.isEncoding===Zh||!Zh(e)))throw new Error("Unknown encoding: "+e);return t||e}Qh.StringDecoder=qr;function qr(e){this.encoding=XC(e);var t;switch(this.encoding){case"utf16le":this.text=rx,this.end=nx,t=4;break;case"utf8":this.fillLast=QC,t=4;break;case"base64":this.text=ox,this.end=ix,t=3;break;default:this.write=ax,this.end=sx;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=pa.allocUnsafe(t)}qr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};qr.prototype.end=tx;qr.prototype.text=ex;qr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function da(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function JC(e,t,r){var n=t.length-1;if(n<r)return 0;var o=da(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=da(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=da(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function ZC(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function QC(e){var t=this.lastTotal-this.lastNeed,r=ZC(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function ex(e,t){var r=JC(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function tx(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function rx(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function nx(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function ox(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function ix(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function ax(e){return e.toString(this.encoding)}function sx(e){return e&&e.length?this.write(e):""}});var ca=x((RA,cm)=>{a();s();var er=Dr();cm.exports=L;var lx=Ih(),Br;L.ReadableState=am;var AA=lt().EventEmitter,nm=function(e,t){return e.listeners(t).length},ya=na(),Fr=Nr().Buffer,ux=globalThis.Uint8Array||function(){};function fx(e){return Fr.from(e)}function cx(e){return Fr.isBuffer(e)||e instanceof ux}var om=Object.create(K());om.inherits=G();var ma=Fe(),R=void 0;ma&&ma.debuglog?R=ma.debuglog("stream"):R=function(){};var dx=Lh(),im=aa(),Qt;om.inherits(L,ya);var ga=["error","close","destroy","pause","resume"];function px(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):lx(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function am(e,t){Br=Br||kt(),e=e||{};var r=t instanceof Br;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new dx,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Qt||(Qt=ha().StringDecoder),this.decoder=new Qt(e.encoding),this.encoding=e.encoding)}function L(e){if(Br=Br||kt(),!(this instanceof L))return new L(e);this._readableState=new am(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),ya.call(this)}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});L.prototype.destroy=im.destroy;L.prototype._undestroy=im.undestroy;L.prototype._destroy=function(e,t){this.push(null),t(e)};L.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Fr.from(e,t),t=""),n=!0),sm(this,e,t,!1,n)};L.prototype.unshift=function(e){return sm(this,e,null,!0,!1)};function sm(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,_x(e,i);else{var l;o||(l=hx(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==Fr.prototype&&(t=fx(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_a(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?_a(e,i,t,!1):lm(e,i)):_a(e,i,t,!1))):n||(i.reading=!1)}return mx(i)}function _a(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&vo(e)),lm(e,t)}function hx(e,t){var r;return!cx(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function mx(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}L.prototype.isPaused=function(){return this._readableState.flowing===!1};L.prototype.setEncoding=function(e){return Qt||(Qt=ha().StringDecoder),this._readableState.decoder=new Qt(e),this._readableState.encoding=e,this};var em=8388608;function gx(e){return e>=em?e=em:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function tm(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=gx(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}L.prototype.read=function(e){R("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?wa(this):vo(this),null;if(e=tm(e,t),e===0&&t.ended)return t.length===0&&wa(this),null;var n=t.needReadable;R("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,R("length less than watermark",n)),t.ended||t.reading?(n=!1,R("reading or ended",n)):n&&(R("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=tm(r,t)));var o;return e>0?o=um(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&wa(this)),o!==null&&this.emit("data",o),o};function _x(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,vo(e)}}function vo(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?er.nextTick(rm,e):rm(e))}function rm(e){R("emit readable"),e.emit("readable"),ba(e)}function lm(e,t){t.readingMore||(t.readingMore=!0,er.nextTick(wx,e,t))}function wx(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}L.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};L.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,R("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?u:_;n.endEmitted?er.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(w,E){R("onunpipe"),w===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,b())}function u(){R("onend"),e.end()}var c=yx(r);e.on("drain",c);var d=!1;function b(){R("cleanup"),e.removeListener("close",T),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",_),r.removeListener("data",S),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var C=!1;r.on("data",S);function S(w){R("ondata"),C=!1;var E=e.write(w);E===!1&&!C&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&fm(n.pipes,e)!==-1)&&!d&&(R("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,C=!0),r.pause())}function v(w){R("onerror",w),_(),e.removeListener("error",v),nm(e,"error")===0&&e.emit("error",w)}px(e,"error",v);function T(){e.removeListener("finish",m),_()}e.once("close",T);function m(){R("onfinish"),e.removeListener("close",T),_()}e.once("finish",m);function _(){R("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(R("pipe resume"),r.resume()),e};function yx(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&nm(e,"data")&&(t.flowing=!0,ba(e))}}L.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=fm(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};L.prototype.on=function(e,t){var r=ya.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&vo(this):er.nextTick(bx,this))}return r};L.prototype.addListener=L.prototype.on;function bx(e){R("readable nexttick read 0"),e.read(0)}L.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,Sx(this,e)),this};function Sx(e,t){t.resumeScheduled||(t.resumeScheduled=!0,er.nextTick(vx,e,t))}function vx(e,t){t.reading||(R("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ba(e),t.flowing&&!t.reading&&e.read(0)}L.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ba(e){var t=e._readableState;for(R("flow",t.flowing);t.flowing&&e.read()!==null;);}L.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(R("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(R("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var u=t.push(l);u||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<ga.length;i++)e.on(ga[i],this.emit.bind(this,ga[i]));return this._read=function(l){R("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});L._fromList=um;function um(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=Cx(e,t.buffer,t.decoder),r}function Cx(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?xx(e,t):Ex(e,t),n}function xx(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function Ex(e,t){var r=Fr.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function wa(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,er.nextTick(Tx,t,e))}function Tx(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function fm(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Sa=x((MA,hm)=>{a();s();hm.exports=ze;var Co=kt(),pm=Object.create(K());pm.inherits=G();pm.inherits(ze,Co);function Px(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function ze(e){if(!(this instanceof ze))return new ze(e);Co.call(this,e),this._transformState={afterTransform:Px.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",kx)}function kx(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){dm(e,t,r)}):dm(this,null,null)}ze.prototype.push=function(e,t){return this._transformState.needTransform=!1,Co.prototype.push.call(this,e,t)};ze.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};ze.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ze.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ze.prototype._destroy=function(e,t){var r=this;Co.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function dm(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var wm=x((LA,_m)=>{a();s();_m.exports=jr;var mm=Sa(),gm=Object.create(K());gm.inherits=G();gm.inherits(jr,mm);function jr(e){if(!(this instanceof jr))return new jr(e);mm.call(this,e)}jr.prototype._transform=function(e,t,r){r(null,e)}});var bm=x((Le,ym)=>{a();s();Le=ym.exports=ca();Le.Stream=Le;Le.Readable=Le;Le.Writable=la();Le.Duplex=kt();Le.Transform=Sa();Le.PassThrough=wm()});var vm=x((FA,xa)=>{a();s();var Sm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);Sm?(va=new Uint8Array(16),xa.exports=function(){return Sm(va),va}):(Ca=new Array(16),xa.exports=function(){for(var t=0,r;t<16;t++)(t&3)===0&&(r=Math.random()*4294967296),Ca[t]=r>>>((t&3)<<3)&255;return Ca});var va,Ca});var Em=x((GA,xm)=>{a();s();var Cm=[];for(Hr=0;Hr<256;++Hr)Cm[Hr]=(Hr+256).toString(16).substr(1);var Hr;function Ax(e,t){var r=t||0,n=Cm;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}xm.exports=Ax});var Pm=x(($A,Tm)=>{a();s();var Rx=vm(),Ix=Em();function Ox(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||Rx)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||Ix(o)}Tm.exports=Ox});var Rm=x((XA,Am)=>{a();s();var km=bm().Duplex,Mx=Fe().inherits,Dx=Pm();Am.exports=dt;Mx(dt,km);function dt(){km.call(this,{objectMode:!0}),this._payloads={}}dt.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};dt.prototype.sendAsync=function(e,t){let r=e.id,n=Dx();if(e.id=n,Array.isArray(e)&&e.length===0)return t(null,[]);this._payloads[n]=[t,r],this.push(e)};dt.prototype.isConnected=function(){return!0};dt.prototype._onResponse=function(e){let t=e.id,r=this._payloads[t];if(!r)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[t];let n=r[0];e.id=r[1],setTimeout(function(){n(null,e)})};dt.prototype._read=Nx;dt.prototype._write=function(e,t,r){this._onResponse(e),r()};function Nx(){}});var Gr=x((QA,Ea)=>{a();s();!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Ea.exports=Lx:Ea.exports=process.nextTick;function Lx(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Om=x((rR,Im)=>{a();s();var Wx={}.toString;Im.exports=Array.isArray||function(e){return Wx.call(e)=="[object Array]"}});var Ta=x((iR,Mm)=>{a();s();Mm.exports=lt().EventEmitter});var Kr=x((Pa,Nm)=>{a();s();var xo=Tn(),Xe=xo.Buffer;function Dm(e,t){for(var r in e)t[r]=e[r]}Xe.from&&Xe.alloc&&Xe.allocUnsafe&&Xe.allocUnsafeSlow?Nm.exports=xo:(Dm(xo,Pa),Pa.Buffer=tr);function tr(e,t,r){return Xe(e,t,r)}Dm(Xe,tr);tr.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Xe(e,t,r)};tr.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Xe(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};tr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Xe(e)};tr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return xo.SlowBuffer(e)}});var Um=x((fR,Wm)=>{a();s();function Ux(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Lm=Kr().Buffer;function qx(e,t,r){e.copy(t,r)}Wm.exports=function(){function e(){Ux(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Lm.alloc(0);if(this.length===1)return this.head.data;for(var n=Lm.allocUnsafe(r>>>0),o=this.head,i=0;o;)qx(o.data,n,i),i+=o.data.length,o=o.next;return n},e}()});var ka=x((pR,Fm)=>{a();s();var qm=Gr();function Bx(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;if(n||o){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&qm(Bm,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(qm(Bm,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)})}function Fx(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Bm(e,t){e.emit("error",t)}Fm.exports={destroy:Bx,undestroy:Fx}});var Ra=x((gR,zm)=>{a();s();var At=Gr();zm.exports=Q;function Hm(e){var t=this;this.next=null,this.entry=null,this.finish=function(){iE(t,e)}}var jx=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:At,rr;Q.WritableState=$r;var Gm=K();Gm.inherits=G();var Hx={deprecate:Pn()},Km=Ta(),To=Kr().Buffer,Gx=globalThis.Uint8Array||function(){};function Kx(e){return To.from(e)}function Vx(e){return To.isBuffer(e)||e instanceof Gx}var Vm=ka();Gm.inherits(Q,Km);function $x(){}function $r(e,t){rr=rr||Rt(),e=e||{},this.objectMode=!!e.objectMode,t instanceof rr&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){eE(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Hm(this)}$r.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty($r.prototype,"buffer",{get:Hx.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Eo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Eo=Function.prototype[Symbol.hasInstance],Object.defineProperty(Q,Symbol.hasInstance,{value:function(e){return Eo.call(this,e)?!0:e&&e._writableState instanceof $r}})):Eo=function(e){return e instanceof this};function Q(e){if(rr=rr||Rt(),!Eo.call(Q,this)&&!(this instanceof rr))return new Q(e);this._writableState=new $r(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Km.call(this)}Q.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Yx(e,t){var r=new Error("write after end");e.emit("error",r),At(t,r)}function zx(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),At(n,i),o=!1),o}Q.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=Vx(e)&&!n.objectMode;return i&&!To.isBuffer(e)&&(e=Kx(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=$x),n.ended?Yx(this,r):(i||zx(this,n,e,r))&&(n.pendingcb++,o=Jx(this,n,i,e,t,r)),o};Q.prototype.cork=function(){var e=this._writableState;e.corked++};Q.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&$m(this,e))};Q.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Xx(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=To.from(t,r)),t}function Jx(e,t,r,n,o,i){if(!r){var l=Xx(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Aa(e,t,!1,u,n,o,i);return c}function Aa(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function Zx(e,t,r,n,o){--t.pendingcb,r?(At(o,n),At(Vr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Vr(e,t))}function Qx(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function eE(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(Qx(r),t)Zx(e,r,n,t,o);else{var i=Ym(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&$m(e,r),n?jx(jm,e,r,i,o):jm(e,r,i,o)}}function jm(e,t,r,n){r||tE(e,t),t.pendingcb--,n(),Vr(e,t)}function tE(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function $m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,u=!0;r;)o[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;o.allBuffers=u,Aa(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Hm(t)}else{for(;r;){var c=r.chunk,d=r.encoding,b=r.callback,C=t.objectMode?1:c.length;if(Aa(e,t,!1,C,c,d,b),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}Q.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};Q.prototype._writev=null;Q.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&oE(this,n,r)};function Ym(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function rE(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Vr(e,t)})}function nE(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,At(rE,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Vr(e,t){var r=Ym(t);return r&&(nE(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function oE(e,t,r){t.ending=!0,Vr(e,t),r&&(t.finished?At(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function iE(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(Q.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});Q.prototype.destroy=Vm.destroy;Q.prototype._undestroy=Vm.undestroy;Q.prototype._destroy=function(e,t){this.end(),t(e)}});var Rt=x((yR,eg)=>{a();s();var Jm=Gr(),aE=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};eg.exports=pt;var Zm=K();Zm.inherits=G();var Qm=Oa(),Ia=Ra();Zm.inherits(pt,Qm);var Xm=aE(Ia.prototype);for(Po=0;Po<Xm.length;Po++)ko=Xm[Po],pt.prototype[ko]||(pt.prototype[ko]=Ia.prototype[ko]);var ko,Po;function pt(e){if(!(this instanceof pt))return new pt(e);Qm.call(this,e),Ia.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",sE)}function sE(){this.allowHalfOpen||this._writableState.ended||Jm(lE,this)}function lE(e){e.end()}Object.defineProperty(pt.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});pt.prototype._destroy=function(e,t){this.push(null),this.end(),Jm(t,e)}});var Na=x(rg=>{a();s();var Da=Kr().Buffer,tg=Da.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function uE(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function fE(e){var t=uE(e);if(typeof t!="string"&&(Da.isEncoding===tg||!tg(e)))throw new Error("Unknown encoding: "+e);return t||e}rg.StringDecoder=Yr;function Yr(e){this.encoding=fE(e);var t;switch(this.encoding){case"utf16le":this.text=gE,this.end=_E,t=4;break;case"utf8":this.fillLast=pE,t=4;break;case"base64":this.text=wE,this.end=yE,t=3;break;default:this.write=bE,this.end=SE;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Da.allocUnsafe(t)}Yr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Yr.prototype.end=mE;Yr.prototype.text=hE;Yr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Ma(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function cE(e,t,r){var n=t.length-1;if(n<r)return 0;var o=Ma(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r?0:(o=Ma(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r?0:(o=Ma(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function dE(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD".repeat(r);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD".repeat(r+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD".repeat(r+2)}}function pE(e){var t=this.lastTotal-this.lastNeed,r=dE(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function hE(e,t){var r=cE(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function mE(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD".repeat(this.lastTotal-this.lastNeed):t}function gE(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function _E(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function wE(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function yE(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function bE(e){return e.toString(this.encoding)}function SE(e){return e&&e.length?this.write(e):""}});var Oa=x((TR,hg)=>{a();s();var or=Gr();hg.exports=q;var vE=Om(),zr;q.ReadableState=ug;var ER=lt().EventEmitter,ag=function(e,t){return e.listeners(t).length},Ba=Ta(),Xr=Kr().Buffer,CE=globalThis.Uint8Array||function(){};function xE(e){return Xr.from(e)}function EE(e){return Xr.isBuffer(e)||e instanceof CE}var sg=K();sg.inherits=G();var La=Fe(),I=void 0;La&&La.debuglog?I=La.debuglog("stream"):I=function(){};var TE=Um(),lg=ka(),nr;sg.inherits(q,Ba);var Wa=["error","close","destroy","pause","resume"];function PE(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):vE(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function ug(e,t){zr=zr||Rt(),e=e||{},this.objectMode=!!e.objectMode,t instanceof zr&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new TE,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(nr||(nr=Na().StringDecoder),this.decoder=new nr(e.encoding),this.encoding=e.encoding)}function q(e){if(zr=zr||Rt(),!(this instanceof q))return new q(e);this._readableState=new ug(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ba.call(this)}Object.defineProperty(q.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});q.prototype.destroy=lg.destroy;q.prototype._undestroy=lg.undestroy;q.prototype._destroy=function(e,t){this.push(null),t(e)};q.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Xr.from(e,t),t=""),n=!0),fg(this,e,t,!1,n)};q.prototype.unshift=function(e){return fg(this,e,null,!0,!1)};function fg(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,IE(e,i);else{var l;o||(l=kE(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==Xr.prototype&&(t=xE(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Ua(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?Ua(e,i,t,!1):cg(e,i)):Ua(e,i,t,!1))):n||(i.reading=!1)}return AE(i)}function Ua(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Ao(e)),cg(e,t)}function kE(e,t){var r;return!EE(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function AE(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}q.prototype.isPaused=function(){return this._readableState.flowing===!1};q.prototype.setEncoding=function(e){return nr||(nr=Na().StringDecoder),this._readableState.decoder=new nr(e),this._readableState.encoding=e,this};var ng=8388608;function RE(e){return e>=ng?e=ng:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function og(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=RE(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}q.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?qa(this):Ao(this),null;if(e=og(e,t),e===0&&t.ended)return t.length===0&&qa(this),null;var n=t.needReadable;I("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,I("length less than watermark",n)),t.ended||t.reading?(n=!1,I("reading or ended",n)):n&&(I("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=og(r,t)));var o;return e>0?o=dg(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&qa(this)),o!==null&&this.emit("data",o),o};function IE(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Ao(e)}}function Ao(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?or(ig,e):ig(e))}function ig(e){I("emit readable"),e.emit("readable"),Fa(e)}function cg(e,t){t.readingMore||(t.readingMore=!0,or(OE,e,t))}function OE(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}q.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};q.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,I("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?u:_;n.endEmitted?or(i):r.once("end",i),e.on("unpipe",l);function l(w,E){I("onunpipe"),w===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,b())}function u(){I("onend"),e.end()}var c=ME(r);e.on("drain",c);var d=!1;function b(){I("cleanup"),e.removeListener("close",T),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",_),r.removeListener("data",S),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var C=!1;r.on("data",S);function S(w){I("ondata"),C=!1;var E=e.write(w);E===!1&&!C&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&pg(n.pipes,e)!==-1)&&!d&&(I("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,C=!0),r.pause())}function v(w){I("onerror",w),_(),e.removeListener("error",v),ag(e,"error")===0&&e.emit("error",w)}PE(e,"error",v);function T(){e.removeListener("finish",m),_()}e.once("close",T);function m(){I("onfinish"),e.removeListener("close",T),_()}e.once("finish",m);function _(){I("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(I("pipe resume"),r.resume()),e};function ME(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&ag(e,"data")&&(t.flowing=!0,Fa(e))}}q.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=pg(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};q.prototype.on=function(e,t){var r=Ba.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Ao(this):or(DE,this))}return r};q.prototype.addListener=q.prototype.on;function DE(e){I("readable nexttick read 0"),e.read(0)}q.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,NE(this,e)),this};function NE(e,t){t.resumeScheduled||(t.resumeScheduled=!0,or(LE,e,t))}function LE(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Fa(e),t.flowing&&!t.reading&&e.read(0)}q.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Fa(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&e.read()!==null;);}q.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(I("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&n.push(l)}n.push(null)}),e.on("data",function(l){if(I("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var u=n.push(l);u||(r=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<Wa.length;i++)e.on(Wa[i],n.emit.bind(n,Wa[i]));return n._read=function(l){I("wrapped _read",l),r&&(r=!1,e.resume())},n};q._fromList=dg;function dg(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=WE(e,t.buffer,t.decoder),r}function WE(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?UE(e,t):qE(e,t),n}function UE(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function qE(e,t){var r=Xr.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function qa(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,or(BE,t,e))}function BE(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function pg(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var ja=x((AR,_g)=>{a();s();_g.exports=Je;var Ro=Rt(),gg=K();gg.inherits=G();gg.inherits(Je,Ro);function FE(e){this.afterTransform=function(t,r){return jE(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function jE(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function Je(e){if(!(this instanceof Je))return new Je(e);Ro.call(this,e),this._transformState=new FE(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r,n){mg(t,r,n)}):mg(t)})}Je.prototype.push=function(e,t){return this._transformState.needTransform=!1,Ro.prototype.push.call(this,e,t)};Je.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Je.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Je.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Je.prototype._destroy=function(e,t){var r=this;Ro.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function mg(e,t,r){if(t)return e.emit("error",t);r!=null&&e.push(r);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Sg=x((OR,bg)=>{a();s();bg.exports=Jr;var wg=ja(),yg=K();yg.inherits=G();yg.inherits(Jr,wg);function Jr(e){if(!(this instanceof Jr))return new Jr(e);wg.call(this,e)}Jr.prototype._transform=function(e,t,r){r(null,e)}});var Cg=x((We,vg)=>{a();s();We=vg.exports=Oa();We.Stream=We;We.Readable=We;We.Writable=Ra();We.Duplex=Rt();We.Transform=ja();We.PassThrough=Sg()});var Ag=x((FR,kg)=>{a();s();kg.exports=Qr;Qr.default=Qr;Qr.stable=Tg;Qr.stableStringify=Tg;var Ze=[],ht=[];function Qr(e,t,r){Ha(e,"",[],void 0);var n;for(ht.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,Pg(t),r);Ze.length!==0;){var o=Ze.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return n}function Ha(e,t,r,n){var o;if(typeof e=="object"&&e!==null){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Ze.push([n,t,e,i])):ht.push([e,t]):(n[t]="[Circular]",Ze.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Ha(e[o],o,r,e);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var u=l[o];Ha(e[u],u,r,e)}}r.pop()}}function HE(e,t){return e<t?-1:e>t?1:0}function Tg(e,t,r){var n=Ga(e,"",[],void 0)||e,o;for(ht.length===0?o=JSON.stringify(n,t,r):o=JSON.stringify(n,Pg(t),r);Ze.length!==0;){var i=Ze.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return o}function Ga(e,t,r,n){var o;if(typeof e=="object"&&e!==null){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Ze.push([n,t,e,i])):ht.push([e,t]):(n[t]="[Circular]",Ze.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Ga(e[o],o,r,e);else{var l={},u=Object.keys(e).sort(HE);for(o=0;o<u.length;o++){var c=u[o];Ga(e[c],c,r,e),l[c]=e[c]}if(n!==void 0)Ze.push([n,t,e]),n[t]=l;else return l}r.pop()}}function Pg(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(ht.length>0)for(var n=0;n<ht.length;n++){var o=ht[n];if(o[1]===t&&o[0]===r){r="[Circular]",ht.splice(n,1);break}}return e.call(this,t,r)}}});var Oo=x(ir=>{a();s();Object.defineProperty(ir,"__esModule",{value:!0});ir.EthereumProviderError=ir.EthereumRpcError=void 0;var GE=Ag(),Io=class extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return GE.default(this.serialize(),VE,2)}};ir.EthereumRpcError=Io;var Ka=class extends Io{constructor(t,r,n){if(!KE(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}};ir.EthereumProviderError=Ka;function KE(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function VE(e,t){if(t!=="[Circular]")return t}});var Mo=x(ar=>{a();s();Object.defineProperty(ar,"__esModule",{value:!0});ar.errorValues=ar.errorCodes=void 0;ar.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};ar.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Ya=x(Pe=>{a();s();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.serializeError=Pe.isValidCode=Pe.getMessageFromCode=Pe.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var Do=Mo(),$E=Oo(),Rg=Do.errorCodes.rpc.internal,YE="Unspecified error message. This is a bug, please report it.",zE={code:Rg,message:$a(Rg)};Pe.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function $a(e,t=YE){if(Number.isInteger(e)){let r=e.toString();if(Va(Do.errorValues,r))return Do.errorValues[r].message;if(Mg(e))return Pe.JSON_RPC_SERVER_ERROR_MESSAGE}return t}Pe.getMessageFromCode=$a;function Og(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(Do.errorValues[t]||Mg(e))}Pe.isValidCode=Og;function XE(e,{fallbackError:t=zE,shouldIncludeStack:r=!1}={}){var n,o;if(!t||!Number.isInteger(t.code)||typeof t.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof $E.EthereumRpcError)return e.serialize();let i={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Va(e,"code")&&Og(e.code)){let u=e;i.code=u.code,u.message&&typeof u.message=="string"?(i.message=u.message,Va(u,"data")&&(i.data=u.data)):(i.message=$a(i.code),i.data={originalError:Ig(e)})}else{i.code=t.code;let u=(n=e)===null||n===void 0?void 0:n.message;i.message=u&&typeof u=="string"?u:t.message,i.data={originalError:Ig(e)}}let l=(o=e)===null||o===void 0?void 0:o.stack;return r&&e&&l&&typeof l=="string"&&(i.stack=l),i}Pe.serializeError=XE;function Mg(e){return e>=-32099&&e<=-32e3}function Ig(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Va(e,t){return Object.prototype.hasOwnProperty.call(e,t)}});var Lg=x(No=>{a();s();Object.defineProperty(No,"__esModule",{value:!0});No.ethErrors=void 0;var za=Oo(),Dg=Ya(),oe=Mo();No.ethErrors={rpc:{parse:e=>Ce(oe.errorCodes.rpc.parse,e),invalidRequest:e=>Ce(oe.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Ce(oe.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Ce(oe.errorCodes.rpc.methodNotFound,e),internal:e=>Ce(oe.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ce(t,e)},invalidInput:e=>Ce(oe.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Ce(oe.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Ce(oe.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Ce(oe.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Ce(oe.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Ce(oe.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>en(oe.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>en(oe.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>en(oe.errorCodes.provider.unsupportedMethod,e),disconnected:e=>en(oe.errorCodes.provider.disconnected,e),chainDisconnected:e=>en(oe.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new za.EthereumProviderError(t,r,n)}}};function Ce(e,t){let[r,n]=Ng(t);return new za.EthereumRpcError(e,r||Dg.getMessageFromCode(e),n)}function en(e,t){let[r,n]=Ng(t);return new za.EthereumProviderError(e,r||Dg.getMessageFromCode(e),n)}function Ng(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}});var Xa=x(de=>{a();s();Object.defineProperty(de,"__esModule",{value:!0});de.getMessageFromCode=de.serializeError=de.EthereumProviderError=de.EthereumRpcError=de.ethErrors=de.errorCodes=void 0;var Wg=Oo();Object.defineProperty(de,"EthereumRpcError",{enumerable:!0,get:function(){return Wg.EthereumRpcError}});Object.defineProperty(de,"EthereumProviderError",{enumerable:!0,get:function(){return Wg.EthereumProviderError}});var Ug=Ya();Object.defineProperty(de,"serializeError",{enumerable:!0,get:function(){return Ug.serializeError}});Object.defineProperty(de,"getMessageFromCode",{enumerable:!0,get:function(){return Ug.getMessageFromCode}});var JE=Lg();Object.defineProperty(de,"ethErrors",{enumerable:!0,get:function(){return JE.ethErrors}});var ZE=Mo();Object.defineProperty(de,"errorCodes",{enumerable:!0,get:function(){return ZE.errorCodes}})});var tn=x((hI,ts)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ts.exports={nextTick:nT}:ts.exports=process;function nT(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Gg=x((_I,Hg)=>{a();s();var oT={}.toString;Hg.exports=Array.isArray||function(e){return oT.call(e)=="[object Array]"}});var rs=x((bI,Kg)=>{a();s();Kg.exports=lt().EventEmitter});var rn=x((ns,$g)=>{a();s();var Fo=Tn(),Qe=Fo.Buffer;function Vg(e,t){for(var r in e)t[r]=e[r]}Qe.from&&Qe.alloc&&Qe.allocUnsafe&&Qe.allocUnsafeSlow?$g.exports=Fo:(Vg(Fo,ns),ns.Buffer=sr);function sr(e,t,r){return Qe(e,t,r)}Vg(Qe,sr);sr.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Qe(e,t,r)};sr.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Qe(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};sr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Qe(e)};sr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Fo.SlowBuffer(e)}});var zg=x((EI,os)=>{a();s();function iT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Yg=rn().Buffer,nn=Fe();function aT(e,t,r){e.copy(t,r)}os.exports=function(){function e(){iT(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Yg.alloc(0);if(this.length===1)return this.head.data;for(var n=Yg.allocUnsafe(r>>>0),o=this.head,i=0;o;)aT(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();nn&&nn.inspect&&nn.inspect.custom&&(os.exports.prototype[nn.inspect.custom]=function(){var e=nn.inspect({length:this.length});return this.constructor.name+" "+e})});var is=x((kI,Zg)=>{a();s();var Xg=tn();function sT(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Xg.nextTick(Jg,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Xg.nextTick(Jg,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function lT(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Jg(e,t){e.emit("error",t)}Zg.exports={destroy:sT,undestroy:lT}});var ss=x((II,a_)=>{a();s();var It=tn();a_.exports=Y;function e_(e){var t=this;this.next=null,this.entry=null,this.finish=function(){TT(t,e)}}var uT=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:It.nextTick,lr;Y.WritableState=an;var t_=Object.create(K());t_.inherits=G();var fT={deprecate:Pn()},r_=rs(),Ho=rn().Buffer,cT=globalThis.Uint8Array||function(){};function dT(e){return Ho.from(e)}function pT(e){return Ho.isBuffer(e)||e instanceof cT}var n_=is();t_.inherits(Y,r_);function hT(){}function an(e,t){lr=lr||Ot(),e=e||{};var r=t instanceof lr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){ST(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e_(this)}an.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(an.prototype,"buffer",{get:fT.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var jo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(jo=Function.prototype[Symbol.hasInstance],Object.defineProperty(Y,Symbol.hasInstance,{value:function(e){return jo.call(this,e)?!0:this!==Y?!1:e&&e._writableState instanceof an}})):jo=function(e){return e instanceof this};function Y(e){if(lr=lr||Ot(),!jo.call(Y,this)&&!(this instanceof lr))return new Y(e);this._writableState=new an(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),r_.call(this)}Y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function mT(e,t){var r=new Error("write after end");e.emit("error",r),It.nextTick(t,r)}function gT(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),It.nextTick(n,i),o=!1),o}Y.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&pT(e);return i&&!Ho.isBuffer(e)&&(e=dT(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=hT),n.ended?mT(this,r):(i||gT(this,n,e,r))&&(n.pendingcb++,o=wT(this,n,i,e,t,r)),o};Y.prototype.cork=function(){var e=this._writableState;e.corked++};Y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&o_(this,e))};Y.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function _T(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Ho.from(t,r)),t}Object.defineProperty(Y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function wT(e,t,r,n,o,i){if(!r){var l=_T(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else as(e,t,!1,u,n,o,i);return c}function as(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function yT(e,t,r,n,o){--t.pendingcb,r?(It.nextTick(o,n),It.nextTick(on,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),on(e,t))}function bT(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function ST(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(bT(r),t)yT(e,r,n,t,o);else{var i=i_(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&o_(e,r),n?uT(Qg,e,r,i,o):Qg(e,r,i,o)}}function Qg(e,t,r,n){r||vT(e,t),t.pendingcb--,n(),on(e,t)}function vT(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function o_(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,u=!0;r;)o[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;o.allBuffers=u,as(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new e_(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,b=r.callback,C=t.objectMode?1:c.length;if(as(e,t,!1,C,c,d,b),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}Y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};Y.prototype._writev=null;Y.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&ET(this,n,r)};function i_(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function CT(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),on(e,t)})}function xT(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,It.nextTick(CT,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function on(e,t){var r=i_(t);return r&&(xT(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function ET(e,t,r){t.ending=!0,on(e,t),r&&(t.finished?It.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function TT(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(Y.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});Y.prototype.destroy=n_.destroy;Y.prototype._undestroy=n_.undestroy;Y.prototype._destroy=function(e,t){this.end(),t(e)}});var Ot=x((DI,f_)=>{a();s();var s_=tn(),PT=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};f_.exports=et;var l_=Object.create(K());l_.inherits=G();var u_=fs(),us=ss();l_.inherits(et,u_);for(ls=PT(us.prototype),Go=0;Go<ls.length;Go++)Ko=ls[Go],et.prototype[Ko]||(et.prototype[Ko]=us.prototype[Ko]);var ls,Ko,Go;function et(e){if(!(this instanceof et))return new et(e);u_.call(this,e),us.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",kT)}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function kT(){this.allowHalfOpen||this._writableState.ended||s_.nextTick(AT,this)}function AT(e){e.end()}Object.defineProperty(et.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});et.prototype._destroy=function(e,t){this.push(null),this.end(),s_.nextTick(t,e)}});var ps=x(d_=>{a();s();var ds=rn().Buffer,c_=ds.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function RT(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function IT(e){var t=RT(e);if(typeof t!="string"&&(ds.isEncoding===c_||!c_(e)))throw new Error("Unknown encoding: "+e);return t||e}d_.StringDecoder=sn;function sn(e){this.encoding=IT(e);var t;switch(this.encoding){case"utf16le":this.text=WT,this.end=UT,t=4;break;case"utf8":this.fillLast=DT,t=4;break;case"base64":this.text=qT,this.end=BT,t=3;break;default:this.write=FT,this.end=jT;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ds.allocUnsafe(t)}sn.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};sn.prototype.end=LT;sn.prototype.text=NT;sn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function cs(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function OT(e,t,r){var n=t.length-1;if(n<r)return 0;var o=cs(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=cs(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=cs(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function MT(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function DT(e){var t=this.lastTotal-this.lastNeed,r=MT(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function NT(e,t){var r=OT(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function LT(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function WT(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function UT(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function qT(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function BT(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function FT(e){return e.toString(this.encoding)}function jT(e){return e&&e.length?this.write(e):""}});var fs=x((FI,x_)=>{a();s();var fr=tn();x_.exports=W;var HT=Gg(),ln;W.ReadableState=y_;var BI=lt().EventEmitter,g_=function(e,t){return e.listeners(t).length},ws=rs(),un=rn().Buffer,GT=globalThis.Uint8Array||function(){};function KT(e){return un.from(e)}function VT(e){return un.isBuffer(e)||e instanceof GT}var __=Object.create(K());__.inherits=G();var hs=Fe(),O=void 0;hs&&hs.debuglog?O=hs.debuglog("stream"):O=function(){};var $T=zg(),w_=is(),ur;__.inherits(W,ws);var ms=["error","close","destroy","pause","resume"];function YT(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):HT(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function y_(e,t){ln=ln||Ot(),e=e||{};var r=t instanceof ln;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $T,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ur||(ur=ps().StringDecoder),this.decoder=new ur(e.encoding),this.encoding=e.encoding)}function W(e){if(ln=ln||Ot(),!(this instanceof W))return new W(e);this._readableState=new y_(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),ws.call(this)}Object.defineProperty(W.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});W.prototype.destroy=w_.destroy;W.prototype._undestroy=w_.undestroy;W.prototype._destroy=function(e,t){this.push(null),t(e)};W.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=un.from(e,t),t=""),n=!0),b_(this,e,t,!1,n)};W.prototype.unshift=function(e){return b_(this,e,null,!0,!1)};function b_(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,ZT(e,i);else{var l;o||(l=zT(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==un.prototype&&(t=KT(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):gs(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?gs(e,i,t,!1):S_(e,i)):gs(e,i,t,!1))):n||(i.reading=!1)}return XT(i)}function gs(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Vo(e)),S_(e,t)}function zT(e,t){var r;return!VT(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function XT(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}W.prototype.isPaused=function(){return this._readableState.flowing===!1};W.prototype.setEncoding=function(e){return ur||(ur=ps().StringDecoder),this._readableState.decoder=new ur(e),this._readableState.encoding=e,this};var p_=8388608;function JT(e){return e>=p_?e=p_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h_(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=JT(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}W.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?_s(this):Vo(this),null;if(e=h_(e,t),e===0&&t.ended)return t.length===0&&_s(this),null;var n=t.needReadable;O("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,O("length less than watermark",n)),t.ended||t.reading?(n=!1,O("reading or ended",n)):n&&(O("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=h_(r,t)));var o;return e>0?o=v_(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&_s(this)),o!==null&&this.emit("data",o),o};function ZT(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Vo(e)}}function Vo(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?fr.nextTick(m_,e):m_(e))}function m_(e){O("emit readable"),e.emit("readable"),ys(e)}function S_(e,t){t.readingMore||(t.readingMore=!0,fr.nextTick(QT,e,t))}function QT(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}W.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};W.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,O("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?u:_;n.endEmitted?fr.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(w,E){O("onunpipe"),w===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,b())}function u(){O("onend"),e.end()}var c=eP(r);e.on("drain",c);var d=!1;function b(){O("cleanup"),e.removeListener("close",T),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",_),r.removeListener("data",S),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var C=!1;r.on("data",S);function S(w){O("ondata"),C=!1;var E=e.write(w);E===!1&&!C&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&C_(n.pipes,e)!==-1)&&!d&&(O("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,C=!0),r.pause())}function v(w){O("onerror",w),_(),e.removeListener("error",v),g_(e,"error")===0&&e.emit("error",w)}YT(e,"error",v);function T(){e.removeListener("finish",m),_()}e.once("close",T);function m(){O("onfinish"),e.removeListener("close",T),_()}e.once("finish",m);function _(){O("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(O("pipe resume"),r.resume()),e};function eP(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&g_(e,"data")&&(t.flowing=!0,ys(e))}}W.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=C_(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};W.prototype.on=function(e,t){var r=ws.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Vo(this):fr.nextTick(tP,this))}return r};W.prototype.addListener=W.prototype.on;function tP(e){O("readable nexttick read 0"),e.read(0)}W.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,rP(this,e)),this};function rP(e,t){t.resumeScheduled||(t.resumeScheduled=!0,fr.nextTick(nP,e,t))}function nP(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ys(e),t.flowing&&!t.reading&&e.read(0)}W.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ys(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&e.read()!==null;);}W.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(O("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(O("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var u=t.push(l);u||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<ms.length;i++)e.on(ms[i],this.emit.bind(this,ms[i]));return this._read=function(l){O("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});W._fromList=v_;function v_(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=oP(e,t.buffer,t.decoder),r}function oP(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?iP(e,t):aP(e,t),n}function iP(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function aP(e,t){var r=un.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function _s(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,fr.nextTick(sP,t,e))}function sP(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C_(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var bs=x((GI,P_)=>{a();s();P_.exports=tt;var $o=Ot(),T_=Object.create(K());T_.inherits=G();T_.inherits(tt,$o);function lP(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function tt(e){if(!(this instanceof tt))return new tt(e);$o.call(this,e),this._transformState={afterTransform:lP.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",uP)}function uP(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){E_(e,t,r)}):E_(this,null,null)}tt.prototype.push=function(e,t){return this._transformState.needTransform=!1,$o.prototype.push.call(this,e,t)};tt.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};tt.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};tt.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};tt.prototype._destroy=function(e,t){var r=this;$o.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function E_(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var I_=x(($I,R_)=>{a();s();R_.exports=fn;var k_=bs(),A_=Object.create(K());A_.inherits=G();A_.inherits(fn,k_);function fn(e){if(!(this instanceof fn))return new fn(e);k_.call(this,e)}fn.prototype._transform=function(e,t,r){r(null,e)}});var M_=x((Ue,O_)=>{a();s();Ue=O_.exports=fs();Ue.Stream=Ue;Ue.Readable=Ue;Ue.Writable=ss();Ue.Duplex=Ot();Ue.Transform=bs();Ue.PassThrough=I_()});var Ss=x((ZI,N_)=>{a();s();var fP=xi(),cP=function(){},dP=function(e){return e.setHeader&&typeof e.abort=="function"},pP=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},D_=function(e,t,r){if(typeof t=="function")return D_(e,null,t);t||(t={}),r=fP(r||cP);var n=e._writableState,o=e._readableState,i=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,u=!1,c=function(){e.writable||d()},d=function(){l=!1,i||r.call(e)},b=function(){i=!1,l||r.call(e)},C=function(_){r.call(e,_?new Error("exited with error code: "+_):null)},S=function(_){r.call(e,_)},v=function(){process.nextTick(T)},T=function(){if(!u){if(i&&!(o&&o.ended&&!o.destroyed))return r.call(e,new Error("premature close"));if(l&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},m=function(){e.req.on("finish",d)};return dP(e)?(e.on("complete",d),e.on("abort",v),e.req?m():e.on("request",m)):l&&!n&&(e.on("end",c),e.on("close",c)),pP(e)&&e.on("exit",C),e.on("end",b),e.on("finish",d),t.error!==!1&&e.on("error",S),e.on("close",v),function(){u=!0,e.removeListener("complete",d),e.removeListener("abort",v),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("exit",C),e.removeListener("end",b),e.removeListener("error",S),e.removeListener("close",v)}};N_.exports=D_});var B_=x((tO,q_)=>{a();s();var{Duplex:U_}=M_(),L_=Ss(),hP=xi(),W_={},vs=class extends U_{constructor(t={}){let r=Object.assign({},t,{objectMode:!0});super(r),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let r=new Cs({parent:this,name:t});return this._substreams[t]=r,mP(this,n=>{r.destroy(n)}),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[t]=W_}_read(){}_write(t,r,n){let o=t.name,i=t.data;if(!o)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();let l=this._substreams[o];if(!l)return console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n();l!==W_&&l.push(i),n()}},Cs=class extends U_{constructor({parent:t,name:r}){super({objectMode:!0}),this._parent=t,this._name=r}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}};q_.exports=vs;function mP(e,t){let r=hP(t);L_(e,{readable:!1},r),L_(e,{writable:!1},r)}});var Es=x((oO,j_)=>{a();s();var gP=xi(),_P=Ss(),xs=QS(),cn=function(){},wP=/^v?\.0/.test(process.version),Yo=function(e){return typeof e=="function"},yP=function(e){return!wP||!xs?!1:(e instanceof(xs.ReadStream||cn)||e instanceof(xs.WriteStream||cn))&&Yo(e.close)},bP=function(e){return e.setHeader&&Yo(e.abort)},SP=function(e,t,r,n){n=gP(n);var o=!1;e.on("close",function(){o=!0}),_P(e,{readable:t,writable:r},function(l){if(l)return n(l);o=!0,n()});var i=!1;return function(l){if(!o&&!i){if(i=!0,yP(e))return e.close(cn);if(bP(e))return e.abort();if(Yo(e.destroy))return e.destroy();n(l||new Error("stream was destroyed"))}}},F_=function(e){e()},vP=function(e,t){return e.pipe(t)},CP=function(){var e=Array.prototype.slice.call(arguments),t=Yo(e[e.length-1]||cn)&&e.pop()||cn;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(o,i){var l=i<e.length-1,u=i>0;return SP(o,l,u,function(c){r||(r=c),c&&n.forEach(F_),!l&&(n.forEach(F_),t(r))})});return e.reduce(vP)};j_.exports=CP});var pw=x((WD,dw)=>{a();s();var VP=Object.prototype.toString;dw.exports=function(e){return VP.call(e)==="[object Function]"}});var mw=x((BD,hw)=>{a();s();hw.exports=typeof setImmediate=="function"?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}});var ww=x((HD,_w)=>{a();s();var $P=pw(),gw=mw();_w.exports=function(e){if(!$P(e.then))throw new TypeError("Expected a promise");return function(t){e.then(function(r){gw(t,null,r)},function(r){gw(t,r)})}}});a();s();a();s();Wt();globalThis.setupSentry=async()=>await Ml();globalThis.setupSentry();globalThis.sentry=U;globalThis.Sentry=U;a();s();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function t(m,_){for(var w=0;w<_.length;w++){var E=_[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function r(m,_,w){return _&&t(m.prototype,_),w&&t(m,w),m}function n(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),_&&i(m,_)}function o(m){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},o(m)}function i(m,_){return i=Object.setPrototypeOf||function(E,J){return E.__proto__=J,E},i(m,_)}function l(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function u(m,_){return _&&(typeof _=="object"||typeof _=="function")?_:l(m)}function c(m,_){for(;!Object.prototype.hasOwnProperty.call(m,_)&&(m=o(m),m!==null););return m}function d(m,_,w){return typeof Reflect<"u"&&Reflect.get?d=Reflect.get:d=function(J,z,we){var Ae=c(J,z);if(!!Ae){var re=Object.getOwnPropertyDescriptor(Ae,z);return re.get?re.get.call(we):re.value}},d(m,_,w||m)}var b=function(){function m(){e(this,m),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(m,[{key:"addEventListener",value:function(w,E){w in this.listeners||(this.listeners[w]=[]),this.listeners[w].push(E)}},{key:"removeEventListener",value:function(w,E){if(w in this.listeners){for(var J=this.listeners[w],z=0,we=J.length;z<we;z++)if(J[z]===E){J.splice(z,1);return}}}},{key:"dispatchEvent",value:function(w){var E=this;if(w.type in this.listeners){for(var J=function(it){setTimeout(function(){return it.call(E,w)})},z=this.listeners[w.type],we=0,Ae=z.length;we<Ae;we++)J(z[we]);return!w.defaultPrevented}}}]),m}(),C=function(m){n(_,m);function _(){var w;return e(this,_),w=u(this,o(_).call(this)),w.listeners||b.call(l(w)),Object.defineProperty(l(w),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(w),"onabort",{value:null,writable:!0,configurable:!0}),w}return r(_,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(E){E.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,E)),d(o(_.prototype),"dispatchEvent",this).call(this,E)}}]),_}(b),S=function(){function m(){e(this,m),Object.defineProperty(this,"signal",{value:new C,writable:!0,configurable:!0})}return r(m,[{key:"abort",value:function(){var w;try{w=new Event("abort")}catch{typeof document<"u"?document.createEvent?(w=document.createEvent("Event"),w.initEvent("abort",!1,!1)):(w=document.createEventObject(),w.type="abort"):w={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(w)}},{key:"toString",value:function(){return"[object AbortController]"}}]),m}();typeof Symbol<"u"&&Symbol.toStringTag&&(S.prototype[Symbol.toStringTag]="AbortController",C.prototype[Symbol.toStringTag]="AbortSignal");function v(m){return m.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof m.Request=="function"&&!m.Request.prototype.hasOwnProperty("signal")||!m.AbortController}function T(m){typeof m=="function"&&(m={fetch:m});var _=m,w=_.fetch,E=_.Request,J=E===void 0?w.Request:E,z=_.AbortController,we=_.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,Ae=we===void 0?!1:we;if(!v({fetch:w,Request:J,AbortController:z,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:Ae}))return{fetch:w,Request:re};var re=J;(re&&!re.prototype.hasOwnProperty("signal")||Ae)&&(re=function(at,ne){var Be;ne&&ne.signal&&(Be=ne.signal,delete ne.signal);var Re=new J(at,ne);return Be&&Object.defineProperty(Re,"signal",{writable:!1,enumerable:!1,configurable:!0,value:Be}),Re},re.prototype=J.prototype);var it=w,St=function(at,ne){var Be=re&&re.prototype.isPrototypeOf(at)?at.signal:ne?ne.signal:void 0;if(Be){var Re;try{Re=new DOMException("Aborted","AbortError")}catch{Re=new Error("Aborted"),Re.name="AbortError"}if(Be.aborted)return Promise.reject(Re);var X=new Promise(function(pe,Ie){Be.addEventListener("abort",function(){return Ie(Re)},{once:!0})});return ne&&ne.signal&&delete ne.signal,Promise.race([X,it(at,ne)])}return it(at,ne)};return{fetch:St,Request:re}}(function(m){if(!!v(m)){if(!m.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var _=T(m),w=_.fetch,E=_.Request;m.fetch=w,m.Request=E,Object.defineProperty(m,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:S}),Object.defineProperty(m,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:C})}})(typeof self<"u"?self:globalThis)});gr();a();s();var bt=p(Oe()),$S=p(ta()),YS=p(Rm()),xl=p(ut());Wt();a();s();var xg=p(ut()),Eg=p(Cg());var Zr=class extends Eg.Duplex{constructor(r){super({objectMode:!0});st(this,"onMessage",r=>{if(f.Buffer.isBuffer(r)){let n=f.Buffer.from(r);this.push(n)}else this.push(r)});st(this,"onDisconnect",()=>{let{lastError:r}=xg.default.runtime;r&&typeof this.opts.port=="function"?this.init():this.destroy()});this.opts={port:r},this.init()}init(){this.removePortListener(),this.port=typeof this.opts.port=="function"?this.opts.port():this.opts.port,this.port.onMessage.addListener(this.onMessage),this.port.onDisconnect.addListener(this.onDisconnect)}removePortListener(){this.port&&(this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.onDisconnect))}_read(){}_write(r,n,o){try{if(f.Buffer.isBuffer(r)){let i=r.toJSON();i._isBuffer=!0,this.port.postMessage(i)}else this.port.postMessage(r)}catch{return o(new Error("PortDuplexStream - disconnected"))}return o()}};a();s();JS();var Bg=p(Xa()),Fg=p(Kl()),jg=p(ZS());a();s();var QE=p(XS());ye();var qg=Number.MAX_SAFE_INTEGER,Lo=null;function Wo(){return Lo===null&&(Lo=Math.round(Ll.mathRandom()*qg)),Lo%=qg,Lo++}var Za,Uo,qo=!1,es,Ja,Qa=class{constructor(t){this.connectionStream=t,this.notificationChannel=new jg.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(t){this.notificationChannel.removeAllListeners();let r=t instanceof Error?t:new Error(t||"Connection closed");this.requests.forEach(n=>{try{n(r)}catch{}}),this.requests.clear()}async handleResponse(t){let{id:r,result:n,error:o,method:i,params:l}=t,{callback:u}=this.requests.get(r)??{};if(!(i&&l&&r)){if(i&&l&&!r){this.notificationChannel.emit("notification",t);return}if(!!u){if(o){let c=new Bg.EthereumRpcError(o.code,o.message,o.data);c.stack=o.stack,this.requests.delete(r),u(c);return}if(this.requests.delete(r),typeof u=="function")if(typeof n=="object"&&n?.__encryptedData__&&qo){let{__encryptedData__:c,...d}=n,b=await Gl(n.__encryptedData__.text,Uo.privateKey,es);u(null,{...d,...JSON.parse(b)})}else u(null,n)}}}};async function eT(e){Za=Wo(),Uo=await Bl();let t=(0,Fg.default)(e),r=await t.syncPubKey({msg:"SYN"});es=await Fl(r),await t.syncPubKey({msg:"ACK",sourceId:Za,pubKey:await jl(Uo.publicKey)}),qo=!0}async function tT(e){qo||(Ja||(Ja=eT(e)),await Ja)}var rT=e=>{let t=new Qa(e),r=new Proxy(t,{get:(n,o)=>{if(o!=="then")return n[o]?n[o]:async(...i)=>{i[0]&&typeof i[0]=="object"&&i[0].__secretData__&&(qo||await tT(r),i[0].__encryptedData__={sourceId:Za,text:await Hl(JSON.stringify(i[0].__secretData__),Uo.privateKey,es)},delete i[0].__secretData__);let l=i[i.length-1],u=i.slice(0,-1),c=Wo();n.requests.set(c,{callback:l}),n.connectionStream.write({jsonrpc:"2.0",method:o,params:u,id:c})}}});return r},Bo=rT;a();s();var H_=p(B_()),G_=p(Es());var xP=()=>{};function zo(e){let t=new H_.default;return(0,G_.default)(e,t,e,r=>{r&&xP(r)}),t}a();s();a();s();a();s();var K_=360;_r();gr();var F=p(ut());a();s();var Ts=p(ut());async function V_(e){return"getContexts"in Ts.default.runtime?(await Ts.default.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"],documentUrls:[e]})).length>0:(await clients.matchAll()).some(r=>r.url.includes(chrome.runtime.id))}var pn=class{reload(){F.default.runtime.reload()}openTab(t){return new Promise((r,n)=>{F.default.tabs.create(t).then(o=>{let i=Ee();return i?n(i):r(o)}).catch(o=>{n(o)})})}openWindow(t){return new Promise((r,n)=>{F.default.windows.create(t).then(o=>{let i=Ee();return i?n(i):(this.lastOkPopupId=o.id,r(o))}).catch(o=>{n(o)})})}closeWindow(t){return new Promise((r,n)=>{F.default.windows.remove(t).then(()=>{let o=Ee();return o?n(o):r()}).catch(o=>{n(o)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(t=>{t.some(r=>r.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(()=>{})}async focusCurrentWindow(){let r=(await this.currentTab())?.windowId;await this.focusWindow(r)}focusWindow(t){return new Promise((r,n)=>{F.default.windows.update(t,{focused:!0}).then(()=>{let o=Ee();return o?n(o):r()}).catch(o=>{n(o)})})}updateWindowPosition(t,r,n){return new Promise((o,i)=>{F.default.windows.update(t,{left:r,top:n}).then(()=>{let l=Ee();return l?i(l):o()}).catch(l=>{i(l)})})}getLastFocusedWindow(t){return new Promise((r,n)=>{F.default.windows.getLastFocused(t).then(o=>{let i=Ee();return i?n(i):r(o)}).catch(o=>{n(o)})})}closeCurrentWindow(){return F.default?.windows?.getCurrent?F.default.windows.getCurrent().then(t=>F.default.windows.remove(t.id)):Promise.resolve()}getVersion(){return F.default.runtime.getManifest().version}openExtensionInBrowser(t=null,r=null){let n=F.default.runtime.getURL("/home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`),this.openTab({url:n}),be()!==Ei&&window.close()}async openExtensionInPopup(t=null,r=null,n=!0){let o=F.default.runtime.getURL("/notification.html");r&&(o+=`?${r}`),t&&(o+=`#${t}`);let i=0,l=0,c=(await Xl())?.width||K_,d=120;try{let b=await this.getLastFocusedWindow();l=b.top,i=Math.max(b.left+(b.width-c)-d,0)}catch{let{screenX:C,screenY:S,outerWidth:v}=window;l=Math.max(S,0),i=Math.max(C+(v-c)-d,0)}this.openWindow({url:o,type:"popup",width:c,height:700,top:l,left:i}),be()!==Ei&&n&&window.close()}getPlatformInfo(){return new Promise((t,r)=>{try{F.default.runtime.getPlatformInfo().then(n=>{t(n)}).catch(n=>{r(n)})}catch(n){r(n)}})}getAllWindows(){return new Promise((t,r)=>{F.default.windows.getAll().then(n=>{let o=Ee();return o?r(o):t(n)}).catch(n=>{r(n)})})}getActiveTabs(){return new Promise((t,r)=>{F.default.tabs.query({active:!0}).then(n=>{let o=Ee();return o?r(o):t(n)}).catch(n=>{r(n)})})}currentTab(){return new Promise((t,r)=>{F.default.tabs.getCurrent().then(n=>{let o=Ee();o?r(o):t(n)}).catch(n=>{r(n)})})}closeTab(t){return new Promise((r,n)=>{F.default.tabs.remove(t).then(()=>{let o=Ee();o?n(o):r()}).catch(o=>{n(o)})})}getCpuInfoName(){return new Promise((t,r)=>{try{F.default.system.cpu.getInfo(n=>{t(n.modelName)})}catch(n){r(n)}})}setPanelBehavior(t){return new Promise((r,n)=>{try{chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:t}),r()}catch(o){n(o)}})}setSidepanelPath(t){return new Promise((r,n)=>{t?chrome.sidePanel.setOptions({path:t},()=>{r()}):n()})}openSidepanelWithWindowId(t){return new Promise((r,n)=>{t?chrome.sidePanel.open({windowId:t},()=>{r()}):n()})}async openSidepanel(t){let n=(await this.getLastFocusedWindow())?.id;t&&await this.setSidepanelPath(`sidepanel.html#${t}`),await this.openSidepanelWithWindowId(n),t&&await this.setSidepanelPath("sidepanel-init.html")}async createOffscreen(t=!1){let r="offscreen.html",n=chrome.runtime.getURL(r);if(!(await V_(n)&&!t))if(this.creatingOffscreen)await this.creatingOffscreen;else{try{await F.default.offscreen.closeDocument()}catch{Ut()}this.creatingOffscreen=F.default.offscreen.createDocument({url:r,reasons:["DOM_SCRAPING"],justification:""}),await this.creatingOffscreen,this.creatingOffscreen=null}}};var dn=pn;_r();ev();a();s();a();s();var GS=p(k());gr();var KS=p(tv()),ot=p(ut());ye();a();s();var $_="SET_ACTIVE_TAB";function Ps(e,t){let r={...e??{}};return t.type===$_?t.value:r}function Y_(e){return{type:$_,value:e}}a();s();gr();bi();var z_=async()=>{try{let{authMap:e,data:t,devid:r,"web-deviceId":n}=await vt.get(["authMap","data","devid","web-deviceId"]),o=mr(t,"TransactionController.transactions");return{authMap:e,evmTransactions:o,devid:r,"web-deviceId":n,firstTimeInfo:t.firstTimeInfo}}catch{return{}}};Ii();a();s();var Xo=p(ku());iv();a();s();Ru();Wt();Wn();su();a();s();function X_(e){return typeof e=="string"?e:typeof e>"u"?"Undefined error":e instanceof DOMException?`Error Name: ${e.name}, Message: ${e.message}, Code: ${e.code}`:`Error Object: ${JSON.stringify(e,["message","arguments","type","name"])}`}var EP=Nn({name:"coins",initialState:{coinsMap:{},ready:!1},reducers:{updateCoinsMap(e,t){e.coinsMap=t.payload,e.ready=!0}}}),{actions:TP,reducer:PP}=EP,{updateCoinsMap:kP}=TP;var J_=()=>async e=>{(await au.common_coins).liveQuery().subscribe(async(r,n)=>{if(n)U.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:`subscribe coins error, ${X_(n)}`}]},level:"error"}),xt().fallbackToAllCoinsMap();else{r.sort((i,l)=>i.rank-l.rank);let o=r.reduce((i,l)=>(i[String(l.coinId)]=l,i),{});e(kP(o))}})},Z_=PP;a();s();var iw=p(ku());a();s();lv();function ks(e={},t){let r={shouldClose:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{transitionName:"",type:"",props:{}},accountDetail:{subview:"transactions"},isLoading:!1,warning:null,requestAccountTabs:{},currentWindowTab:{},...e};switch(t.type){case yf:return{...r,forgottenPassword:t.value};case vf:return{...r,warning:null};case Ef:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case Tf:return{...r,txId:t.id,warning:null,isLoading:!1};case Pf:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case kf:return{...r};case bf:return{...r,warning:t.value||"Incorrect password. Try again."};case Sf:return{...r,warning:""};case Af:return{...r,isLoading:!0,loadingMessage:t.value};case Rf:return{...r,isLoading:!1};case Cf:return{...r,warning:t.value,isLoading:!1};case xf:return{...r,warning:void 0};case If:return{...r,requestAccountTabs:t.value};case Of:return{...r,currentWindowTab:t.value};default:return r}}a();s();Ru();var AP={mostRecentOverviewPage:Se},RP="history",IP=Nn({name:RP,initialState:AP,reducers:{pageChanged:(e,t)=>{let r=t.payload;(r===Se||r.startsWith(Bn))&&(e.mostRecentOverviewPage=r)}}}),{actions:OP,reducer:MP}=IP,Q_=MP;var{pageChanged:ew}=OP;fv();a();s();a();s();var tw={[Ld]:Wd,[Bd]:Fd,[Ud]:qd,[jd]:Hd};a();s();var rw={[Gd]:Kd};var nw={...rw,...tw};a();s();var DP="metamask/send/OPEN_TO_DROPDOWN",NP="metamask/send/CLOSE_TO_DROPDOWN",LP="metamask/send/UPDATE_SEND_ERRORS",WP="metamask/send/RESET_SEND_STATE",UP="metamask/send/SHOW_GAS_BUTTON_GROUP",qP="metamask/send/HIDE_GAS_BUTTON_GROUP",ow={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function As(e=ow,t){switch(t.type){case DP:return{...e,toDropdownOpen:!0};case NP:return{...e,toDropdownOpen:!1};case LP:return{...e,errors:{...e.errors,...t.value}};case UP:return{...e,gasButtonGroupShown:!0};case qP:return{...e,gasButtonGroupShown:!1};case WP:return{...ow};default:return e}}a();s();var aw=(0,iw.combineReducers)({activeTab:Ps,metamask:Md,appState:ks,history:Q_,send:As,nftSend:Nd,newDapp:ec,localeMessages:kd,importAccount:Pd,coinDetail:Zf,txHistory:Xd,approve:Vf,txConfirm:Vd,balanceSlice:Gu,currencySlice:Qf,providerSlice:Du,coins:Z_,assetsSlice:jf,Nft:Dd,addressBookState:Kf,batchTransfer:Xf,batchAddAccount:$f,batchImportPrivateKey:Hf,bulkRename:Jf,commonSend:Mi,walletConfig:zf,businessSend:Oi,...nw,activityBanners:Gf,keyring:Df,dialog:tc});function Rs(e){return(0,Xo.createStore)(aw,e,(0,Xo.applyMiddleware)(Au))}var sw=()=>e=>{e(Mu()),e(J_()),e(Hu()),e(Ff())};a();s();if((process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"||process.env.ASSETS_BUILD_TYPE==="prepub")&&localStorage.getItem("speedUp")){let t=window.setInterval;window.setInterval=function(r,n,...o){let i=n>=1e3?n/100:n;return t(r,i,...o)}}a();s();_r();wu();a();s();var cr=window.history,BP=cr.pushState,FP=cr.replaceState,Is=new Event("locationChange");cr.pushState=(...e)=>{let t=BP.apply(cr,e);return window.dispatchEvent(Is),t};cr.replaceState=(...e)=>{let t=FP.apply(cr,e);return window.dispatchEvent(Is),t};window.addEventListener("popstate",()=>{window.dispatchEvent(Is)});function Os(e=""){return e.replace(/^#/,"")}function lw(e){window.addEventListener("locationChange",()=>{e(Os(window.location.hash))})}a();s();var jP=[/^(\/wallet-add\/import-with-seed-phrase-and-private-key)/,/^(\/batch-import-private-key\/edit)/,/^(\/wallet\/mnemonic\/backup)/,/^(\/wallet\/mnemonic-privateKey)/,/^(\/wallet\/account\/privateKey)/,/^(\/reset-password)/];function Jo(e,t=jP){for(let n=0;n<t.length;n++){let o=t[n];if(typeof o=="string"&&e.endsWith(o)||typeof o!="string"&&o.test(e))return!0}return!1}function HP(){let e=be();return e===Rn?1:e===Vl?2:e===In?3:0}var fw=HP(),Ms="lastPageDetentionTimeParams",cw=Jd(),mt,rt,Ds="";async function GP(){let e=window.localStorage.getItem(Ms);if(window.localStorage.removeItem(Ms),e)try{await br(JSON.parse(e))}catch{console.log("Failed to report last page detention time")}let t=window.location.hash;t&&t!==Se&&(mt=new Date,rt=Os(t))}function uw(){if(!mt||!rt||!Jo(rt))return;let e=new Date,t={s:cw,u:rt,r:Ds,d:e.getTime()-mt.getTime(),p:fw,e:mt.toLocaleString(),l:e.toLocaleString()};window.localStorage.setItem(Ms,JSON.stringify(t))}function KP(e){if(e===Se)return;let t=new Date;rt&&mt&&Jo(rt)&&br({s:cw,u:rt,r:Ds,d:t.getTime()-mt.getTime(),p:fw,e:mt.toLocaleString(),l:t.toLocaleString()}),mt=t,Ds=rt||"",rt=e}lw(KP),GP(),window.addEventListener("beforeunload",uw),window.onblur=uw;a();s();var ae=p(k()),yl=p(ce()),qS=p(Te());ye();Wt();a();s();var se=p(k()),jw=p(ce()),Hw=p(Te()),Gw=p(Oe());a();s();a();s();var yw=p(ww());var YP=e=>{if(e)throw e};function Ns(e,t){return(...r)=>{let n=r[r.length-1],o=typeof n=="function",i;o?(i=n,r.pop()):i=YP;let l;try{l=Promise.resolve(e.apply(t,r))}catch(u){l=Promise.reject(u)}(0,yw.default)(l)(i)}}a();s();a();s();var ee=p(Oe());Ai();function Ls(){return{FetchSimpleGet:async(e,t={},r={})=>{try{let n=await Dn(e,t,r);return ee.default.debug("[Fetch API] simpleGet success:",{url:e,params:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] simpleGet failed:",{url:e,params:t,config:r,error:n}),n}},FetchSimplePost:async(e,t={},r={})=>{try{let n=await Cu(e,t,r);return ee.default.debug("[Fetch API] simplePost success:",{url:e,data:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] simplePost failed:",{url:e,data:t,config:r,error:n}),n}},FetchSimpleDelete:async(e,t={},r={})=>{try{let n=await vu(e,t,r);return ee.default.debug("[Fetch API] simpleDelete success:",{url:e,params:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] simpleDelete failed:",{url:e,params:t,config:r,error:n}),n}},FetchGet:async(e,t={},r={})=>{try{let n=await bu(e,t,r);return ee.default.debug("[Fetch API] get success:",{url:e,params:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] get failed:",{url:e,params:t,config:r,error:n}),n}},FetchPost:async(e,t={},r={})=>{try{let n=await Su(e,t,r);return ee.default.debug("[Fetch API] post success:",{url:e,data:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] post failed:",{url:e,data:t,config:r,error:n}),n}},FetchUniqGet:async(e,t={},r={})=>{try{let n=await Eu(e,t,r);return ee.default.debug("[Fetch API] uniqGet success:",{url:e,params:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] uniqGet failed:",{url:e,params:t,config:r,error:n}),n}},FetchUniqPost:async(e,t={},r={})=>{try{let n=await Tu(e,t,r);return ee.default.debug("[Fetch API] uniqPost success:",{url:e,data:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] uniqPost failed:",{url:e,data:t,config:r,error:n}),n}},FetchGetWithCache:async(e,t={},r={})=>{try{let n=await Pu(e,t,r);return ee.default.debug("[Fetch API] getWithCache success:",{url:e,params:t,config:r}),n}catch(n){throw ee.default.error("[Fetch API] getWithCache failed:",{url:e,params:t,config:r,error:n}),n}}}}a();s();var B=new dn;function Ws(){return{platformReload:async()=>B.reload(),platformOpenTab:async e=>B.openTab(e),platformOpenWindow:async e=>B.openWindow(e),platformCloseWindow:async e=>B.closeWindow(e),platformFocusLastOkPopup:async()=>B.focusLastOkPopup(),platformFocusCurrentWindow:async()=>B.focusCurrentWindow(),platformFocusWindow:async e=>B.focusWindow(e),platformUpdateWindowPosition:async(e,t,r)=>B.updateWindowPosition(e,t,r),platformGetLastFocusedWindow:async e=>B.getLastFocusedWindow(e),platformCloseCurrentWindow:async()=>B.closeCurrentWindow(),platformGetVersion:async()=>B.getVersion(),platformOpenExtensionInBrowser:async(e=null,t=null)=>B.openExtensionInBrowser(e,t),platformOpenExtensionInPopup:async(e=null,t=null,r=!0)=>B.openExtensionInPopup(e,t,r),platformGetPlatformInfo:async()=>B.getPlatformInfo(),platformGetAllWindows:async()=>B.getAllWindows(),platformGetActiveTabs:async()=>B.getActiveTabs(),platformCurrentTab:async()=>B.currentTab(),platformCloseTab:async e=>B.closeTab(e),platformGetCpuInfoName:async()=>B.getCpuInfoName(),platformSetPanelBehavior:async e=>B.setPanelBehavior(e),platformSetSidepanelPath:async e=>B.setSidepanelPath(e),platformOpenSidepanelWithWindowId:async e=>B.openSidepanelWithWindowId(e),platformOpenSidepanel:async e=>B.openSidepanel(e),platformCreateOffscreen:async()=>B.createOffscreen()}}a();s();function Us(){return{windowOpen:async(e,t,r)=>{window.open(e,t,r)},windowClose:async()=>{window.close()}}}a();s();function qs(){return{passkeyIsSupportPasskey:async()=>ip(),passkeyIsSupportModernAuth:async()=>ap(),passkeyCreatePasskey:async()=>sp(),passkeyVerifyPasskey:async({credential:e,password:t})=>lp({credential:e,password:t}),passkeyGetPassword:async e=>up(e),passkeyGetAuthToken:async()=>fp(),passkeyRandomBytes:async(e=64)=>op(e)}}a();s();function Bs({history:e}){if(!e)throw new Error("history is required for router API");return{routerPush:t=>(e.push(t),!0),routerReplace:t=>(e.replace(t),!0),routerBack:()=>(e.goBack(),!0),routerForward:()=>(e.goForward(),!0)}}a();s();var hn=p(lu());a();s();var bw=["metamask","appState","localeMessages","importAccount","assetsSlice","keyring","dialog"],Sw=["currencies","domainMetadata","createdMap"];uv();Ii();function Fs({store:e}){if(!e)throw new Error("store is required for store API");return{getStoreState:()=>e.getState(),getStoreSlice:t=>e.getState()[t],forceUpdateMetamaskState:()=>Wf(e.dispatch),ActionCompleteOnboarding:()=>e.dispatch(Mf())}}function Zo(e){let t=e.getState(),r=(0,hn.pick)(t,bw);return r.metamask&&(r.metamask=(0,hn.omit)(r.metamask,Sw)),r.localeMessages=(0,hn.omit)(r.localeMessages,["dexCurrent"]),r}a();s();var kw=p(Oe());a();s();ye();kn();var js=class{constructor(){this.callbacks=new Map,this.iframe=null,this.interval=null,this.isConnected=!1,this.initConnection()}initConnection(){let t=document.getElementById("sandbox");!t||(this.setupConnectionListener(),this.startConnectionPolling(t))}setupConnectionListener(){let t=r=>{r.data.status===201&&(window.removeEventListener("message",t),this.interval&&(clearInterval(this.interval),this.interval=null),this.iframe=document.getElementById("sandbox"),this.isConnected=!0)};window.addEventListener("message",t)}startConnectionPolling(t){if(this.interval||this.isConnected||process.env.PLATFORM_SES)return;let r=qt();this.interval=setInterval(()=>{t.contentWindow&&t.contentWindow.postMessage({status:200,buildType:process.env.ASSETS_BUILD_TYPE,cdn:Ct(),browser:r},"*")},1e3)}async requestData(t,r={}){return new Promise((n,o)=>{if(!this.isConnected||!this.iframe){o(new Error("[HotCode] Connection not established"));return}let i=l=>{l.data.chanel===t&&(window.removeEventListener("message",i),this.callbacks.delete(t),n(l.data))};this.callbacks.set(t,i),setTimeout(()=>{this.callbacks.has(t)&&(window.removeEventListener("message",i),this.callbacks.delete(t),o(new Error(`[HotCode] Request timeout for channel: ${t}`)))},1e4),window.addEventListener("message",i),this.iframe.contentWindow?.postMessage({chanel:t,data:r},"*")})}destroy(){this.interval&&(clearInterval(this.interval),this.interval=null),this.callbacks.forEach(t=>{window.removeEventListener("message",t)}),this.callbacks.clear(),this.isConnected=!1,this.iframe=null}},dr=new js;async function Cw(){try{return(await dr.requestData("passwordSecurity",{...he,location:window.location.href}))?.data}catch{return}}async function xw(e={}){try{let t=await dr.requestData("link",e);if(!t){let r=window.localStorage.getItem("okxWebLink");return r?JSON.parse(r):{}}return window.localStorage.setItem("okxWebLink",JSON.stringify(t.data)),t.data}catch{let r=window.localStorage.getItem("okxWebLink");return r?JSON.parse(r):{}}}async function Ew(e={}){try{return(await dr.requestData("host",e))?.data??M("wallet_common_okx_link")}catch{return M("wallet_common_okx_link")}}async function Tw(e={}){try{return(await dr.requestData("staticDomain",e))?.data??null}catch{return null}}async function Pw(e,t={}){try{return await dr.requestData(e,t)}catch{return null}}window.addEventListener("beforeunload",()=>{dr.destroy()});function Hs(){return{requestHotCodeData:async(e,t={})=>{try{switch(e){case"passwordSecurity":return await Cw();case"link":return await xw(t);case"host":return await Ew(t);case"staticDomain":return await Tw(t);default:return await Pw(e,t)}}catch(r){return kw.default.error(`Failed to request hotcode data for channel ${e}:`,r),null}}}}a();s();var j=p(Oe());function Gs(){return{webMetaxExtensionOpenShow:e=>{try{return Un(e),!0}catch(t){return j.default.error("Failed to call webMetaxExtensionOpenShow:",t),!1}},BiometricsVerificationSecondFailurePopupView:e=>{try{return mf(e),!0}catch(t){return j.default.error("Failed to call BiometricsVerificationSecondFailurePopupView:",t),!1}},BiometricsVerificationSecondFailurePopupButtonClick:e=>{try{return _f(e),!0}catch(t){return j.default.error("Failed to call BiometricsVerificationSecondFailurePopupButtonClick:",t),!1}},webMetaxSettingsWalletSecurityResetPasswordClick:()=>{try{return Xu(),!0}catch(e){return j.default.error("Failed to call webMetaxSettingsWalletSecurityResetPasswordClick:",e),!1}},UnlockWalletTopBiometricsClick:()=>{try{return of(),!0}catch(e){return j.default.error("Failed to call UnlockWalletTopBiometricsClick:",e),!1}},UnlockWalletTopPasswordClick:()=>{try{return ef(),!0}catch(e){return j.default.error("Failed to call UnlockWalletTopPasswordClick:",e),!1}},WalletBiometricsExtensionButtonClick:e=>{try{return Qu(e),!0}catch(t){return j.default.error("Failed to call WalletBiometricsExtensionButtonClick:",t),!1}},PrivateKeyPageMidCompleteCopyClick:()=>{try{return tf(),!0}catch(e){return j.default.error("Failed to call PrivateKeyPageMidCompleteCopyClick:",e),!1}},PrivateKeyPageMidSecureCopyClick:()=>{try{return nf(),!0}catch(e){return j.default.error("Failed to call PrivateKeyPageMidSecureCopyClick:",e),!1}},PrivateKeyPageMidCompleteCopyCancelClick:()=>{try{return sf(),!0}catch(e){return j.default.error("Failed to call PrivateKeyPageMidCompleteCopyCancelClick:",e),!1}},Web3ExtensionPasswordBtmConfirmClick:()=>{try{return ff(),!0}catch(e){return j.default.error("Failed to call Web3ExtensionPasswordBtmConfirmClick:",e),!1}},webMetaxSettingsWalletSecurityResetWalletClick:()=>{try{return Ju(),!0}catch(e){return j.default.error("Failed to call webMetaxSettingsWalletSecurityResetWalletClick:",e),!1}},Web3NewOnboardingSetupPasswordConfirmButtonClick:e=>{try{return gf(e),!0}catch(t){return j.default.error("Failed to call Web3NewOnboardingSetupPasswordConfirmButtonClick:",t),!1}},Web3NewOnboardingSetupPasswordFullPageView:e=>{try{return wf(e),!0}catch(t){return j.default.error("Failed to call Web3NewOnboardingSetupPasswordFullPageView:",t),!1}},Web3SettingsBiometricsToggleSwipe:e=>{try{return hf(e),!0}catch(t){return j.default.error("Failed to call Web3SettingsBiometricsToggleSwipe:",t),!1}},Web3ExtensionOnboardBtmButtonClick:e=>{try{return lf(e),!0}catch(t){return j.default.error("Failed to call Web3ExtensionOnboardBtmButtonClick:",t),!1}},Web3OnboardingFullPageView:e=>{try{return uf(e),!0}catch(t){return j.default.error("Failed to call Web3OnboardingFullPageView:",t),!1}},ExtensionSafetySettingFullButtonClick:e=>{try{return rf(e),!0}catch(t){return j.default.error("Failed to call ExtensionSafetySettingFullButtonClick:",t),!1}},Web3NewOnboardingFirstLandingPageView:e=>{try{return df(e),!0}catch(t){return j.default.error("Failed to call Web3NewOnboardingFirstLandingPageView:",t),!1}},Web3NewOnboardingFirstLandingPageButtonClick:e=>{try{return pf(e),!0}catch(t){return j.default.error("Failed to call Web3NewOnboardingFirstLandingPageButtonClick:",t),!1}}}}a();s();function Ks({hooksData:e={}}={}){return{getWalletAsset:()=>e.walletAsset||0,getMoonCatData:()=>({loadingMoonCatData:e.moonCat?.loadingMoonCatData||!1,isMoonCat:e.moonCat?.isMoonCat||!1}),getMoonCatLoading:()=>e.moonCat?.loadingMoonCatData||!1,getIsMoonCat:()=>e.moonCat?.isMoonCat||!1,enableMoonCat:async t=>{if(e.moonCat?.enableMoonCat)return e.moonCat.enableMoonCat(t);throw new Error("enableMoonCat function not available")},disableMoonCat:async t=>{if(e.moonCat?.disableMoonCat)return e.moonCat.disableMoonCat(t);throw new Error("disableMoonCat function not available")},getHooksData:()=>e}}a();s();var Vs=p(Oe());var Aw=new Proxy(globalThis.chrome||globalThis.browser,{get(e,t,r){return t==="storage"?typeof __okxCustomChromeStorage__>"u"?void 0:__okxCustomChromeStorage__:e[t]}});function $s(){let e={};for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);r&&(e[r]=localStorage.getItem(r))}return e}function zP(){let e={};for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(e[r]=sessionStorage.getItem(r))}return e}function Ys({store:e,history:t}){if(!e)throw new Error("store is required for sync API");return{getInitialSyncData:async()=>{Vs.default.info("getInitialSyncData");let r={};try{Aw?.storage?.local&&(r=await Aw.storage.local.get(["defaultAppDomains","referralCode"]))}catch(o){Vs.default.warn("Failed to get chrome.storage.local data:",o),r={}}return{location:t.location,storeState:Zo(e),localStorage:$s(),sessionStorage:zP(),chromeStorage:r,cookies:document.cookie,environmentInfo:{userAgent:navigator.userAgent,language:navigator.language,cookieEnabled:navigator.cookieEnabled,url:window.location.href,origin:window.location.origin},timestamp:Date.now()}}}}a();s();var qe=p(Oe());wu();function zs(){return{logPageView:async e=>{try{return await br(e),!0}catch(t){return qe.default.error("Failed to call logPageView:",t),!1}},logPrivateKeyOrMnemonicShow:async e=>{try{return await fu(e),!0}catch(t){return qe.default.error("Failed to call logPrivateKeyOrMnemonicShow:",t),!1}},logPrivateKeyCopy:async e=>{try{return await cu(e),!0}catch(t){return qe.default.error("Failed to call logPrivateKeyCopy:",t),!1}},logDappConnectedHistory:async e=>{try{return await du(e),!0}catch(t){return qe.default.error("Failed to call logDappConnectedHistory:",t),!1}},logInstalledWalletExtensions:async e=>{try{return await pu(e),!0}catch(t){return qe.default.error("Failed to call logInstalledWalletExtensions:",t),!1}},logPostRate:async e=>{try{return await hu(e),!0}catch(t){return qe.default.error("Failed to call logPostRate:",t),!1}},logDappTxHistory:async e=>{try{return await mu(e),!0}catch(t){return qe.default.error("Failed to call logDappTxHistory:",t),!1}},logDappGetChain:async e=>{try{return await gu(e),!0}catch(t){return qe.default.error("Failed to call logDappGetChain:",t),!1}},logDappSwitchChain:async e=>{try{return await _u(e),!0}catch(t){return qe.default.error("Failed to call logDappSwitchChain:",t),!1}}}}a();s();var te=p(Oe());Wt();function Xs(){return{async captureException(e,t){try{let r=U.captureException(e,t);te.default.debug("[SentryAPI] captureException called:",{exception:e,captureContext:t,eventId:r})}catch(r){te.default.error("[SentryAPI] captureException failed:",r)}},async captureEvent(e,t,r){try{let n=U.captureEvent(e,t,r);te.default.debug("[SentryAPI] captureEvent called:",{event:e,eventHint:t,config:r,eventId:n})}catch(n){te.default.error("[SentryAPI] captureEvent failed:",n)}},async captureMessage(e,t){try{let r=U.captureMessage(e,t);return te.default.debug("[SentryAPI] captureMessage called:",{message:e,captureContext:t,eventId:r}),r}catch(r){return te.default.error("[SentryAPI] captureMessage failed:",r),null}},async setUser(e){try{return U.setUser(e),te.default.debug("[SentryAPI] setUser called:",e),!0}catch(t){return te.default.error("[SentryAPI] setUser failed:",t),!1}},async setTag(e,t){try{return U.setTag(e,t),te.default.debug("[SentryAPI] setTag called:",{key:e,value:t}),!0}catch(r){return te.default.error("[SentryAPI] setTag failed:",r),!1}},async setTags(e){try{return U.setTags(e),te.default.debug("[SentryAPI] setTags called:",e),!0}catch(t){return te.default.error("[SentryAPI] setTags failed:",t),!1}},async setExtra(e,t){try{return U.setExtra(e,t),te.default.debug("[SentryAPI] setExtra called:",{key:e,extra:t}),!0}catch(r){return te.default.error("[SentryAPI] setExtra failed:",r),!1}},async init(e,t){try{return U.init(e,t||{}),te.default.debug("[SentryAPI] init called:",{config:e,configOptions:t}),!0}catch(r){return te.default.error("[SentryAPI] init failed:",r),!1}}}}a();s();function Js(){return{getLocalStorage:e=>Yd(e),setLocalStorage:(e,t)=>($d(e,t),!0),removeLocalStorage:e=>(zd(e),!0),getLocalStorageKeys:()=>Object.keys(localStorage),getAllLocalStorageData:()=>{let e={};for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);r&&(e[r]=localStorage.getItem(r))}return e},syncLocalStorage:e=>(Object.entries(e).forEach(([t,r])=>{r===null?localStorage.removeItem(t):localStorage.setItem(t,r)}),!0),getSessionStorage:e=>sessionStorage.getItem(e),setSessionStorage:(e,t)=>(sessionStorage.setItem(e,t),!0),removeSessionStorage:e=>(sessionStorage.removeItem(e),!0),clearSessionStorage:()=>(sessionStorage.clear(),!0),getSessionStorageKeys:()=>Object.keys(sessionStorage),getAllSessionStorageData:()=>{let e={};for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(e[r]=sessionStorage.getItem(r))}return e},syncSessionStorage:e=>(Object.entries(e).forEach(([t,r])=>{r===null?sessionStorage.removeItem(t):sessionStorage.setItem(t,r)}),!0),getChromeStorageLocal:async e=>window.chrome?.storage?.local?window.chrome.storage.local.get(e):{},setChromeStorageLocal:async e=>window.chrome?.storage?.local?(await window.chrome.storage.local.set(e),!0):!1,removeChromeStorageLocal:async e=>window.chrome?.storage?.local?(await window.chrome.storage.local.remove(e),!0):!1,clearChromeStorageLocal:async()=>window.chrome?.storage?.local?(await window.chrome.storage.local.clear(),!0):!1,getAllChromeStorageLocalData:async()=>window.chrome?.storage?.local?window.chrome.storage.local.get(null):{},getCookies:()=>document.cookie,setCookie:e=>(document.cookie=e,!0),syncCookies:e=>Array.isArray(e)?(e.forEach(t=>{t&&typeof t=="string"&&(document.cookie=t)}),!0):!1}}a();s();a();s();var Rw=p(dv());async function Iw(e=""){try{await(0,Rw.default)(e)}catch{}}function Zs(){return{clipboardCopyText:async e=>{await Iw(e||"")}}}function Ow({history:e,store:t,hooksData:r={}}){if(!e)throw new Error("history is required for SES API");if(!t)throw new Error("store is required for SES API");let n=Bs({history:e}),o=Fs({store:t}),i=Hs(),l=Gs(),u=Ks({hooksData:r}),c=Ys({store:t,history:e}),d=zs(),b=Xs(),C=Ws(),S=Us(),v=qs(),T=Ls(),m=Js(),_=Zs(),w={...n,...o,...i,...l,...u,...c,...d,...b,...C,...S,...v,...T,...m,..._};return Object.entries(w).reduce((E,[J,z])=>({...E,[J]:Ns(z,null)}),{})}a();s();var Uw=p(Oe());a();s();var Qs=p(Oe()),Dw=p(Kl()),el=p(ta()),Nw=p(Es());a();s();var mn=p(Xa());var XP=(e,t)=>r=>{if(!t._writableState.ended&&!!r?.method){if(!e[r.method]){t.write({jsonrpc:"2.0",error:(0,mn.serializeError)(mn.ethErrors.rpc.methodNotFound({message:`${r.method} not found`}),{shouldIncludeStack:!0}),id:r.id});return}e[r.method](...r.params,(n,o)=>{t._writableState.ended||(n?t.write({jsonrpc:"2.0",error:(0,mn.serializeError)(n,{shouldIncludeStack:!0}),id:r.id}):t.write({jsonrpc:"2.0",result:o,id:r.id}))})}},Mw=XP;var tl=null;function Lw(){return tl}function Ww(e,t){let r=new el.default({name:"ui-ses-iframe",target:"ui-ses",targetWindow:e.contentWindow}),n=zo(r),o=n.createStream("uiSes-iframe-to-parent"),i=n.createStream("parent-to-uiSes-iframe"),l=n.createStream("controller"),u=Bo(i);tl=(0,Dw.default)(u),o.on("data",Mw(t,o));let c=new el.default({name:"ui-ses-iframe-component",target:"ui-entry",targetWindow:window});return(0,Nw.default)(c,l,c,b=>{b&&Qs.default.error("Error in iframe postMessage stream",b)}),()=>{try{r.destroy(),c.destroy(),l.destroy(),o.removeAllListeners(),o.destroy(),i.removeAllListeners(),i.destroy(),tl=null}catch(b){Qs.default.error("Error in cleanup",b)}}}var qw=async(e,t)=>{let r=Lw();if(!r){Uw.default.warn("uiConnection not available");return}await r.routeUpdated({location:e.location,store:Zo(t),localStorage:{...$s(),theme:Qd()}})};a();s();var Bw=e=>{let t=e.hash||"",r=e.pathname||"",n=e.search||"";return`#${r}${n}${t}`};a();s();var JP=[Vn,Kn,Kt,Qn,jn,zn,Hn,vr,Fn,Yn,Gn,$n,Xn,Jn],Fw=JP;var Kw=()=>{let e=(0,se.useRef)(null),t=(0,se.useRef)(!1),[r,n]=(0,se.useState)(!1),o=(0,se.useRef)({}),i=(0,jw.useStore)(),l=(0,Hw.useHistory)();(0,se.useEffect)(()=>{Gw.default.debug("Update iframe src: ",Bw(l.location)," ===> update SES route and data"),qw(l,i)},[l.location.pathname]);let[{walletAsset:u=0}]=np(),{loadingMoonCatData:c,isMoonCat:d,enableMoonCat:b,disableMoonCat:C}=to();(0,se.useEffect)(()=>{o.current.walletAsset=u,o.current.moonCat={loadingMoonCatData:c,isMoonCat:d,enableMoonCat:b,disableMoonCat:C}},[u,c,d,b,C]);let S=(0,se.useMemo)(()=>{let{pathname:v}=l.location;return Fw.includes(v)},[l.location.pathname]);return(0,se.useEffect)(()=>{if(S&&!r)return;let v=document.querySelectorAll(".app-loading");v.length>0&&document.getElementById("app").removeChild(v[0]);let T=document.getElementById("ui-ses-iframe-container");T&&(T.style.zIndex=S?"2000":"-2000",T.style.opacity=S?"1":"0")},[S,r]),(0,se.useEffect)(()=>{let v=document.getElementById("ui-ses-iframe");if(!v)return;let T=()=>{n(!0);let _=Ow({history:l,store:i,hooksData:o.current}),w=Ww(v,_);e.current=w,t.current=!0;let E=()=>{v.contentWindow.postMessage({type:"backgroundReady"},"*")};window.addEventListener("backgroundReady",E)},m=_=>{_?.data?.type==="uiSesDOMLoaded"&&T()};return window.SESIframeLoaded?T():window.addEventListener("message",m),()=>{e.current?.(),window.removeEventListener("message",m)}},[]),null};Kw.displayName="IframeRoute";var Vw=(0,se.memo)(Kw);a();s();var gn=p(k());ye();a();s();var rl={"error-page":"_error-page_1qj8r_1",errorPage:"_error-page_1qj8r_1","error-page-details":"_error-page-details_1qj8r_13",errorPageDetails:"_error-page-details_1qj8r_13"};var ZP=()=>{let e=On(),t=Me.State.getImgMap(e),r=`${ro()}${t[Me.State.TYPE.noNetwork]}`;return gn.default.createElement("div",{className:rl.errorPage},gn.default.createElement("div",{className:rl.errorPageDetails},gn.default.createElement(Me.State,{type:Me.State.TYPE.noNetwork,title:M("wallet_extension_tg_empty_title_load_failed"),description:M("wallet_extension_tg_empty_desc_load_failed"),imgSrc:r,renderButton:()=>gn.default.createElement(fe,{category:fe.CATEGORY.fill,type:fe.TYPE.primary,size:fe.SIZE.s,onClick:()=>{window.location.href=window.location.pathname}},M("wallet_extension_tg_empty_btn_load_failed"))})))},$w=ZP;su();a();s();var ke=p(k()),Qo=p(ce());ye();Si();var nl={fetchConfig:{project:"okx_extension_wallet",site:"okx"}};var ol=0,ek=1,il=null;function zw(){return e=>(nl.fetchConfig.locale=e.locale,ke.default.createElement(ql,{localeData:e.localeData,isDev:!0,noRemoteData:!0,fetchConfig:nl.fetchConfig},e.children))}var tk=zw(),rk=zw(),nk=process.env.ASSETS_BUILD_TYPE===je.DEV||process.env.ASSETS_BUILD_TYPE===je.DAILY,Yw=(0,ke.createContext)(e=>`[${e}]`),al=e=>{let t=window.localStorage.getItem("languageKeyMode"),r=nk&&t==="multilingualMode",n=(0,Qo.useSelector)(eo),o=Id(n),i=(0,Qo.useSelector)(Ad),l=(0,Qo.useSelector)(Rd),u=(0,ke.useMemo)(()=>(Od(n,window),il=il===ol?ek:ol,Object.keys(i).reduce((c,d)=>{let b=i[d].message;return c[d]=r?`${b}${b}${b}`:b,c},{})),[o,i,r]);return(0,ke.useMemo)(()=>{wr.setConfig({frozenScroll:!1,localeProviderProps:{fetchConfig:{noFetch:!0},isDev:!0,localeData:l}})},[n]),il===ol?ke.default.createElement(tk,{localeData:u,locale:o},ke.default.createElement(Yw.Provider,{value:Z},e.children)):ke.default.createElement(rk,{localeData:u,locale:o},ke.default.createElement(Yw.Provider,{value:Z},e.children))};a();s();a();s();var Xw=p(k());kn();var Jw=()=>{let e=ve("staticDomain");(0,Xw.useLayoutEffect)(()=>{window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${Ct()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${Ct()}`,window.okGlobal.cdnDomainMap={default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"})},[e])};function ok(){Jw()}var Zw=ok;a();s();a();s();var H=p(k());var Qw=p(Zl()),ey=p(ut());ye();_r();ou();Ai();Wn();var sl=class extends H.PureComponent{constructor(){super(...arguments);st(this,"state",{downloadUrl:!1})}renderErrorDetail(r){return H.default.createElement("li",null,H.default.createElement("p",null,r))}renderErrorStack(r,n){return H.default.createElement("li",null,H.default.createElement("span",null,r),H.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){Dn(Mn.getExtensionVersion).then(({data:r})=>{let n=qt(),o=ey.default.runtime.getManifest().version;if(n===$l&&r.edge!==o){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}r.chrome!==o&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(()=>{})}render(){let{error:r}=this.props,{downloadUrl:n}=this.state,i=be()===An?M("wallet_home_subtitle_errortip_error_popup_message"):M("wallet_home_subtitle_errortip_errorpage_message"),l=On(),u=Me.State.getImgMap(l),c=`${ro()}${u[Me.State.TYPE.systemError]}`;return H.default.createElement("div",{className:"error-page"},H.default.createElement("div",{className:"error-page__header"},M("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&H.default.createElement(me,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await xt().clearDappData(),window.location.href=window.location.pathname}})),H.default.createElement("div",{className:"error-page__details"},H.default.createElement(Me.State,{type:Me.State.TYPE.systemError,title:n?M("extension_wallet_mid_text_update_latest_version"):i,imgSrc:c,renderButton:()=>H.default.createElement(H.default.Fragment,null,H.default.createElement("div",null,H.default.createElement(fe,{category:fe.CATEGORY.fill,type:fe.TYPE.primary,size:fe.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:n})}},M("extension_wallet_mid_btn_goto_store")," "),H.default.createElement(fe,{className:"error-page_button_left",category:fe.CATEGORY.fill,type:fe.TYPE.primary,size:fe.SIZE.s,onClick:()=>{chrome.runtime.reload()}},M("wallet_extension_settings_item_clear_cache")," ")))}),H.default.createElement(tu,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:d=>H.default.createElement(me,{icon:"okx-wallet-plugin-arrow-small-down",size:me.SIZE.xs,className:(0,Qw.default)("error-page__icon",{"okui-accordion-header-icon-expanded":d})}),title:M("wallet_home_subtitle_errortip_errordetail"),onToggle:d=>{this.setState({expand:d})}}),this.state.expand?H.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(M("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(M("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(M("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(M("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}},ll=sl;a();s();var hr=p(k()),wt=p(ce()),NS=p(Te()),LS=p(qn()),WS=p(Zl());a();s();var ik=document.documentElement,ak={en:"en",zh_CN:"zh-hans",zh_TW:"zh-hant",fr:"fr",ru:"ru",vi:"vi",id:"id",tr:"tr",de:"de",it:"it",pl:"pl",en_IN:"en-in",pt_BR:"pt",pt_PT:"pt-pt",es:"es-es",es_419:"es",cs:"cs",ro:"ro",uk:"uk",ar_EH:"ar"},sk=e=>{ik.setAttribute("lang",ak[e])},ty=sk;a();s();a();s();function ei(){}Si();a();s();var D=p(k()),ri=p(qn());a();s();var ul=p(k());a();s();var ry=e=>ve("allowShowComponent",{...he,componentName:e,location:window.location.href})?.data;var ti=({children:e,componentName:t})=>ry(t)?ul.default.createElement(ul.default.Fragment,null,e):null;bi();var _e=p(pv());a();s();var fl={"wallet-helper":"_wallet-helper_4h5lm_1",walletHelper:"_wallet-helper_4h5lm_1","wallet-helper-enter":"_wallet-helper-enter_4h5lm_11",walletHelperEnter:"_wallet-helper-enter_4h5lm_11"};var lk=[{label:_e.default.development_environment,value:"http://forked-test2-cat20.defi.swim.env"},{label:_e.default.pre_environment,value:"https://beta.okex.org"},{label:_e.default.prod_environment,value:"https://wallet.okex.org"}],uk=[{label:_e.default.normalMode,value:"normalMode"},{label:_e.default.keyMode,value:"keyMode"},{label:_e.default.multilingualMode,value:"multilingualMode"}],fk=()=>{let{width:e}=(0,ri.useSize)(document.querySelector("body")),[t,r]=(0,D.useState)("https://beta.okex.org");(0,D.useEffect)(()=>{(async()=>{let{envApiDomain:v}=await vt.get("envApiDomain");v&&r(v)})()},[]);let n=()=>{window.location.reload()},o=window.localStorage,i=o.getItem("languageKeyMode")||"normalMode",l=(0,D.useCallback)(v=>{v==="normalMode"?(o.removeItem("languageKeyMode"),Bt(!1)):v==="keyMode"?(o.setItem("languageKeyMode",v),Bt(!0)):(o.setItem("languageKeyMode",v),Bt(!1)),n()},[i]),u=(0,ri.useUpdate)(),c=()=>{let v=Zd()===no.LIGHT?no.DARK:no.LIGHT;ep(v),u()},d=o.getItem("speedUp")||!1,[b,C]=(0,D.useState)(d);(0,D.useEffect)(()=>{C(d)},[d]);let S=(0,D.useCallback)(()=>{d?(o.removeItem("speedUp"),C(!1)):(o.setItem("speedUp",!0),C(!0)),chrome.runtime.reload()},[d]);return D.default.createElement(ti,{componentName:"walletHelper"},D.default.createElement(Di.Box,{className:fl["wallet-helper"]},D.default.createElement(yr,{description:D.default.createElement(Di.Space,{space:"8px"},D.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-slow",tooltip:_e.default.select_language_mode,onClick:()=>{He.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:D.default.createElement(Cr,{dataSource:uk,renderItem:({label:v,value:T})=>D.default.createElement(Cr.Cell,{title:v,onClick:()=>{l(T)}},i===T&&D.default.createElement(ki.Circle,{checked:!0}))})})}}),D.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-fast",tooltip:`${_e.default.current_api_environment}${t}`,onClick:()=>{He.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:D.default.createElement(Cr,{dataSource:lk,renderItem:({label:v,value:T})=>D.default.createElement(Cr.Cell,{title:v,onClick:async()=>{await vt.set({envApiDomain:T}),n()}},t===T&&D.default.createElement(ki.Circle,{checked:!0}))})})}}),D.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-swap",tooltip:_e.default.switchRtl,onClick:()=>{let T=document.documentElement.getAttribute("dir");io(T==="rtl"?void 0:"rtl")}}),e>360&&D.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-switch",tooltip:_e.default.fullscreenMode,onClick:()=>{let v=document.querySelector("#app");["notification","popup"].includes(v.className)?v.className="fullscreen":v.className="popup"}}),D.default.createElement(me.IconButton,{style:{color:b?"orange":"unset"},icon:"okx-wallet-plugin-coin-quick-withdraw",tooltip:_e.default.accelerateSetInterval,onClick:S}),D.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-swap-1",tooltip:_e.default.theme,onClick:()=>{c()}})),trigger:yr.TRIGGER.click,placement:document.documentElement.getAttribute("dir")==="rtl"?yr.DIRECTION.topLeft:yr.DIRECTION.topRight,autoHeight:{marginBottom:50},smartMode:!1},D.default.createElement(me,{bordered:!0,size:me.SIZE.lg,className:fl["wallet-helper-enter"],icon:"okx-wallet-plugin-wrenches"}))))},ny=fk;a();s();a();s();var _t=p(k()),di=p(ce());a();s();var _n=p(k());a();s();var cl={url:"https://beta.okex.org/pisces",name:"pisces>>"};kn();a();s();var dl={noRadius:"_noRadius_e5d59_1",scale:"_scale_e5d59_15"};var oy=()=>_n.default.createElement(ti,{componentName:"EnvAlert"},_n.default.createElement(ru,{className:dl.noRadius,type:"warn",showIcon:!1,title:_n.default.createElement("div",{className:dl.scale},`${process.env.ASSETS_BUILD_TYPE}-${process.env.COMMIT_HASH}, API: ${Rl()} WSS: ${Ol()} STATIC: ${Ct()}`,_n.default.createElement("a",{href:cl.url},cl.name)),closable:!1}));Ii();a();s();var ni=p(k()),wn=p(ce()),oi=p(Te()),iy=p(qn());function ck(e){return e}var ay=()=>{let e=(0,wn.useSelector)(ck),t=(0,iy.useLatest)(e),r=(0,oi.useHistory)(),n=(0,wn.useSelector)(Ft),o=(0,wn.useSelector)(ft),i=(0,wn.useSelector)(gp),l=(0,ni.useRef)(i),c=(0,oi.useLocation)()?.pathname,d=bp(),b=Sp();return(0,ni.useEffect)(()=>{if(i!==l.current){if(n&&o&&![Se,ct].includes(c)){let C=t.current,S={permissionsRequestId:hp(C),isNotBackup:yp(ju(C)).isNotBackupWallet,lastOptType:mp(C),unapprovedRequests:d},v=b(S);v&&r.replace(v)}l.current=i}},[c,i,n,o,b]),null};a();s();a();s();var h=p(k());a();s();var uy=p(k()),ie=p(rv());var dk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pk=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},hk=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),mk=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},gk=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},pl=(typeof window>"u"||typeof window>"u"?"undefined":dk(window))==="object",_k=pl?document:{},wk=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],hl=function(e){function t(r){pk(this,t);var n=gk(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));if(n.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},n.tId=null,n._handleEvent=function(o){var i=n.state,l=i.remaining,u=i.pageX,c=i.pageY,d=i.idle,b=n.props,C=b.timeout,S=b.onAction,v=b.debounce,T=b.throttle,m=b.stopOnIdle;if(v>0?n.debouncedAction(o):T>0?n.throttledAction(o):S(o),!l){if(o.type==="mousemove"&&(o.pageX===u&&o.pageY===c||o.pageX===void 0&&o.pageY===void 0||n.getElapsedTime()<200))return;clearTimeout(n.tId),n.tId=null,d&&!m&&n.toggleIdleState(o),n.setState({lastActive:+new Date,pageX:o.pageX,pageY:o.pageY}),d&&m||(n.tId=setTimeout(n.toggleIdleState,C))}},r.debounce>0&&r.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return r.debounce>0&&(n.debouncedAction=sy(r.onAction,r.debounce)),r.throttle>0&&(n.throttledAction=ly(r.onAction,r.throttle)),r.startOnMount||(n.state.idle=!0),n.toggleIdleState=n._toggleIdleState.bind(n),n.reset=n._reset.bind(n),n.pause=n._pause.bind(n),n.resume=n._resume.bind(n),n.getRemainingTime=n._getRemainingTime.bind(n),n.getElapsedTime=n._getElapsedTime.bind(n),n.getLastActiveTime=n._getLastActiveTime.bind(n),n.isIdle=n._isIdle.bind(n),n}return mk(t,uy.Component),hk(t,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(r){r.debounce!==this.props.debounce&&(this.debouncedAction=sy(this.props.onAction,this.props.debounce)),r.throttle!==this.props.throttle&&(this.throttledAction=ly(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var r=this;if(pl){var n=this.state.eventsBound,o=this.props,i=o.element,l=o.events,u=o.passive,c=o.capture;n||(l.forEach(function(d){i.addEventListener(d,r._handleEvent,{capture:c,passive:u})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var r=this;if(pl){var n=this.props,o=n.element,i=n.events,l=n.passive,u=n.capture;this.state.eventsBound&&(i.forEach(function(c){o.removeEventListener(c,r._handleEvent,{capture:u,passive:l})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(r){var n=this,o=this.state.idle,i=this.props,l=i.onActive,u=i.onIdle,c=i.stopOnIdle;this.setState({idle:!o},function(){o?c||(n._bindEvents(),l(r)):(c&&(clearTimeout(n.tId),n.tId=null,n._unbindEvents()),u(r))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var r=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,r)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var r=this.state,n=r.remaining,o=r.idle;n!==null&&(this._bindEvents(),o||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,n)))}},{key:"_getRemainingTime",value:function(){var r=this.state,n=r.remaining,o=r.idle,i=r.lastActive;if(o)return 0;if(n!==null)return n;var l=this.props.timeout-(+new Date-i);return l<0&&(l=0),l}},{key:"_getElapsedTime",value:function(){var r=this.state.oldDate;return+new Date-r}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),t}();function sy(e,t){var r=void 0;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,o),r=null},t)}}function ly(e,t){var r=0;return function(){var n=new Date().getTime();if(!(n-r<t))return r=n,e.apply(void 0,arguments)}}hl.propTypes={timeout:ie.default.number,events:ie.default.arrayOf(ie.default.string),onIdle:ie.default.func,onActive:ie.default.func,onAction:ie.default.func,debounce:ie.default.number,throttle:ie.default.number,element:ie.default.oneOfType([ie.default.object,ie.default.element]),startOnMount:ie.default.bool,stopOnIdle:ie.default.bool,passive:ie.default.bool,capture:ie.default.bool},hl.defaultProps={timeout:12e5,element:_k,events:wk,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var fy=hl;var ue=p(Te());a();s();var P=p(k()),bn=p(ce()),gt=p(Te()),ml=p(ut());ye();Wt();a();s();var cy=()=>{let e=ve("lockPage",{...he,location:window.location.href});return e?e.data:null};a();s();var dy=p(k());bi();var py=()=>{let e=ve("changeLocalStorage",{...he,location:window.location.href});(0,dy.useEffect)(()=>{e&&(e?.data?.windowLocalStorage&&Object.keys(e?.data.windowLocalStorage).forEach(t=>{window.localStorage.setItem(t,e?.data?.windowLocalStorage[t])}),e?.data?.localStorage&&Object.keys(e?.data.localStorage).forEach(t=>{t==="data"||t==="apiDomain"||t==="envApiDomain"||t==="staticDomain"||vt.set({[t]:e?.data?.localStorage[t]})}))},[e])};a();s();var hy=p(k());var my=()=>{let e=ve("resetExtension",{...he,location:window.location.href});return(0,hy.useMemo)(()=>{if(e){if(!e.data?.needReload)return!1;let r=window.localStorage.getItem("extensionReload");return!r||r!=e?.data.time?e.data.time:!1}return!1},[e])};a();s();var gy=p(k());var _y=()=>{let e=ve("versionExtensionUpdate",{...he,location:window.location.href});return(0,gy.useMemo)(()=>{if(e){if(!e.data?.needUpdate)return!1;let r=window.localStorage.getItem("versionExtensionUpdate");if(r&&r===e?.data.version&&!e.data?.repeat)return!1;if(he.version!==e.data.version)return{version:e?.data.version,repeat:e.data?.repeat}}return!1},[e])};a();s();var wy=p(k()),ii=p(Te()),Mt=p(ut());var yk=()=>{let e=(0,ii.useHistory)(),{search:t}=(0,ii.useLocation)(),r=Pp();(0,wy.useEffect)(()=>{let n=(o,i,l)=>{if(!(o.type===Cp&&o.method===xp.notifyRedirect))return;let{redirectSearchParams:c}=o.params,{redirectPathname:d,redirectSearchParams:b}=Tp(c);d&&r(d,{overrideCurrentPath:ct,removeExistingSearchKeys:["redirect_pathname","redirect_search_params"],preserveState:!0,newSearchParams:Ep(b)}),l({success:!0,redirected:!0})};return typeof Mt.default<"u"&&Mt.default.runtime?.onMessage?Mt.default.runtime.onMessage.addListener(n):typeof chrome<"u"&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.addListener(n),()=>{typeof Mt.default<"u"&&Mt.default.runtime?.onMessage?Mt.default.runtime.onMessage.removeListener(n):typeof chrome<"u"&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.removeListener(n)}},[e,r,t])},yy=yk;a();s();var by=[];a();s();var yn=p(lu());Wn();sv();a();s();var bk=e=>{if(!Array.isArray(e))return 1;for(let t=0;t<e.length;t++){let r=e[t];if(r.status===3)return 3;if(r.status===2)return 2}return 1},Sk=({supportChainList:e=[],account:t})=>{let r=!1,n={...t?.status7702?.chains||{}},o={},i=Object.keys(n).length,l=e?.length||0;return i!==l&&(r=!0),e?.forEach(({chainIndex:d,status:b})=>{o[d]=b,!r&&n?.[d]!==b&&(r=!0)}),{chainStatusChanged:r,chains:r?o:n}};var vk=(e,t)=>{if((0,yn.isEmpty)(t)||!Array.isArray(e))return{needUpdate:!1};let{chainStatusChanged:r,chains:n}=Sk({supportChainList:e,account:t}),o=t?.status7702?.status||1;return r&&(o=bk(e)),{needUpdate:r,status7702:{status:o,chains:n}}},Sy=async e=>{let{address:t,data:r}=e,{chainIndex:n,status:o}=r||{};if(!t||(0,yn.isNil)(n)||(0,yn.isNil)(o))return;let i=await xt().getAccountsByAddressAndChainIndex(t,n);if(Array.isArray(i)&&!i.length)return;let l=i.map(async u=>{let c={...u?.status7702?.chains||{}};c[n]=o;let d=[];Object.keys(c).forEach(S=>{d.push({chainIndex:Number(S),status:c[S],address:t})});let{needUpdate:b,status7702:C}=vk(d,u);if(b){let S=u.walletId;S&&await xt().updateAccountIdentityData(S,{status7702:C})}});await Promise.allSettled(l)};a();s();var Cy=p(k()),xy=p(ce());a();s();var ai=p(k()),vy=p(Te());var si=({preload:e=[],...t})=>((0,ai.useEffect)(()=>{e.forEach(r=>{typeof r=="function"&&r()})},[e]),ai.default.createElement(vy.Route,{...t}));function Ey(){return!(0,xy.useSelector)(Ft)}var Ty=e=>Cy.default.createElement(si,{...e});a();s();var Py=p(k()),ky=p(ce());gr();function li(e,t){let r=ge(t),n=(0,ky.useDispatch)();(0,Py.useEffect)(()=>{!r||e.includes(r.data.address||mr(r.data,"data.address")||mr(r.data,"data.content.address"))&&n(Ht({data:r.data,channel:t}))},[r,n,e,t])}a();s();var nt=p(k()),Ry=p(Te());ye();a();s();var Ck=20,ui=[];var xk=(e,t)=>{let r=`${e}_${t}`;ui.unshift(r),ui=ui.slice(0,Ck)},Ek=(e,t)=>{let r=`${e}_${t}`;return ui.includes(r)};function Tk(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toTokenSymbol:i,toAmount:l,isMemeTimeOut:u,chainId:c,fromTokenAddress:d,toTokenAddress:b,exploreUrl:C}=e,S=`/dex-swap/meme/${o==="SOL"?"buy":"sell"}?inputChain=${c}&inputCurrency=${d}&outputChain=${c}&outputCurrency=${b}`;if(u)return{result:{type:"warn",titleKey:"wallet_extension_toast_likely_fail",titleParams:{num:n,token1:o,token2:i},id:`toast-${r}-${t}`,url:S,urlText:"wallet_extension_cta_trade_again"},needHistory:!0};let T={["0"]:{type:"success",titleKey:"wallet_extension_toast_swap_submitted",id:`toast-${r}-${t}`,orderId:r},["1"]:{type:"success",titleKey:"wallet_extension_toast_swap_success",titleParams:{fromCount:n,fromToken:o,toCount:i,toToken:l},id:`toast-${r}-${t}`,url:C,urlText:"wallet_extension_cta_check_details",orderId:r},["-1"]:{type:"error",titleKey:"wallet_extension_toast_swap_failed",titleParams:{num:n,token1:o,token2:i},id:`toast-${r}-${t}`,url:S,urlText:"wallet_extension_cta_trade_again",orderId:r}}[t];return T?{result:T,needHistory:t!=="1"}:null}function Pk(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toAmount:i,toTokenSymbol:l}=e,u={["0"]:{type:"success",titleKey:"swaptrade_extension_feedback_toast_transaction_submitted",id:`toast-${r}-${t}`},["-1"]:{type:"error",titleKey:"swaptrade_extension_feedback_toast_fillup_gas_failed",titleParams:{nativeToken:l},id:`toast-${r}-${t}`},["1"]:{type:"success",titleKey:"swaptrade_extension_feedback_toast_swapped_successfully",titleParams:{payValue:n,paySymbol:o,receiveValue:Mp(i,{fixed:6,wipeTailZero:!0}),receiveSymbol:l},id:`toast-${r}-${t}`}},c=t in u?u[t]:null;return c?{result:c,needHistory:!1}:null}function kk(e){let{status:t,orderId:r,fromTokenSymbol:n,exploreUrl:o,solanaToast:i}=e,l={["1"]:{type:"success",titleKey:"swaptrade_extension_notif_desc_token_approved",titleParams:{tokenSymbol:n},url:o,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`},["-1"]:{type:"error",titleKey:"swaptrade_extension_notif_desc_token_not_approved",titleParams:{tokenSymbol:n},url:o,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`}},u=t in l?l[t]:null;return u?{result:u,needHistory:!1}:i==="1"?{result:{type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${i}`},needHistory:!1}:null}function Ak(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toAmount:i,toTokenSymbol:l,exploreUrl:u,fromChildOrder:c={},toChainName:d,willNeedManualClaim:b}=e;if(Ek(r,t))return null;let C=c?.receiveTokenStatus!=="3",S=null;return t==="0"&&c?.status=="0"?S={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${t}-${r}`,orderId:r}:t==="200"?S={type:"success",titleKey:"wallet_extension_bridge_alert_title_ready_to_claim",id:`toast-${t}-${r}`,orderId:r,hasClaimButton:!0,chainName:d,tokenSymbol:l,buttonText:"commonall_modal_btn_claim",buttonAction:"claim"}:t==="202"?S={type:"error",titleKey:"wallet_extension_bridge_alert_failed_to_claim_please",id:`toast-${t}-${r}`,orderId:r}:t==="1"&&C?b==="1"?S={type:"success",titleKey:"wallet_extension_bridge_alert_youve_successfully_claimed_amt",titleParams:{amt:i,token:l},id:`toast-${t}-${r}`,orderId:r}:S={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_info",titleParams:{fromTokenAmount:n,fromTokenSymbol:o,toTokenAmount:i,toTokenSymbol:l},url:u,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}:t==="-1"&&C?S={type:"error",titleKey:"swaptrade_extension_notif_desc_swap_fail",url:u,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}:t==="-2"&&C&&(S={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_canceled",url:u,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}),S?(xk(r,t),{result:S,needHistory:!1}):null}var Ay=e=>{let{dexData:t,type:r}=e;if(!t)return null;let n=null,{type:o,swapTradeType:i,solanaToast:l}=t;return i==="7"?n=Tk(t):o==="gasStation"&&l==="1"?n=Pk(t):o==="approve"&&r==="1"?n=kk(t):!["approve","register","gasStation"].includes(o)&&(r==="1"||r==="3")&&(n=Ak(t)),n};var Rk=(e,t)=>{let r={...e?.result};return r.desc=null,r.hasClaimButton&&r.chainName&&r.tokenSymbol&&(r.desc=nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("p",{style:{color:"var(--okd-color-content-secondary)"}},M("swaptrade_bridge_alert_desc_successfully_bridged_to_chainname",{chainName:r.chainName,tokenSymbol:r.tokenSymbol})),nt.default.createElement(Ti,{style:{marginTop:"8px",fontSize:"12px",lineHeight:"16px",color:"var(--okd-color-content-primary)"},onClick:()=>{t.push(`${fd}?orderId=${r.orderId}`)}},M("commonall_modal_btn_claim")))),r.url&&r.urlText&&(r.desc=nt.default.createElement(Ti,{style:{cursor:"pointer",color:"var(--okd-color-content-primary)",textDecoration:"none",border:"none",background:"none",padding:0},onClick:()=>{if(e?.needHistory){t.push(r.url);return}r.url&&globalThis.platform.openTab({url:r.url})}},nt.default.createElement("span",null,M(r.urlText)))),r},Ik=e=>{let t=e.type;De[t]({title:M(e.titleKey,e.titleParams),key:e.id,desc:e.desc})};function Iy(){let e=ge("dex-across-order-info"),t=(0,Ry.useHistory)();(0,nt.useEffect)(()=>{if(!e?.data)return;let r=e.data,n=Ay(r);if(n){let o=Rk(n,t);Ik(o)}},[e,t])}a();s();var Oy=p(k());ye();function My(){let e=ge("wallet-nft");(0,Oy.useEffect)(()=>{!e||De.success({title:M("wallet_transfer_notif_nft_transaction_success"),key:"toast8"})},[e])}a();s();var Dy=p(k()),Ny=p(ce());function Ly(){let e=ge("wallet-coin"),t=(0,Ny.useDispatch)();(0,Dy.useEffect)(()=>{!e||t(Ht())},[e,t])}a();s();var pr={link:"_link_ywwad_1",updateCotainer:"_updateCotainer_ywwad_11",centerImage:"_centerImage_ywwad_14",titleUpdate:"_titleUpdate_ywwad_23",textUpdate:"_textUpdate_ywwad_27",updateMb32:"_updateMb32_ywwad_32"};a();s();ye();a();s();var Wy=(e,t)=>{if(t&&t.includes("{")&&!t.includes("first")){let n=/\{(.+?)\}/gi,o={},i=t.match(n);return i&&i.forEach((l,u)=>{let c=l.replace("{","").replace("}","");o[`${c}`]=e[u]}),o}let r=["first","second","third","fourth"];return e.filter((n,o)=>o in r).reduce((n,o,i)=>(n[r[i]]=o,n),{})};a();s();var xe={first:"first",second:"second",third:"third",fourth:"fourth"},Uy={paramNames:[xe.first,xe.second],transform:([e,t])=>({[xe.first]:Gt(e).value,[xe.second]:t})},qy={paramNames:["amount","crypto"],transform:([e,t])=>({amount:Gt(e).value,crypto:t})},Ok={paramNames:["num","symbol"],transform:([e,t])=>({num:Gt(e).value,symbol:t})},By={paramNames:[xe.first,xe.second,xe.third,xe.fourth],transform:([e,t,r,n])=>({[xe.first]:Gt(e).value,[xe.second]:t,[xe.third]:Gt(r).value,[xe.fourth]:n})},Dt={SEND_SUCCESS:3,SEND_FAILED:9,INSCRIBE_SUCCESS:20,INSCRIBE_FAILED:21,GAS_RETURN:23,SWAP_SUCCESS:7,SWAP_FAILED:11},Fy={[Dt.SEND_SUCCESS]:Uy,[Dt.SEND_FAILED]:Uy,[Dt.INSCRIBE_SUCCESS]:qy,[Dt.INSCRIBE_FAILED]:qy,[Dt.GAS_RETURN]:Ok,[Dt.SWAP_SUCCESS]:By,[Dt.SWAP_FAILED]:By};var Mk=(e,t,r)=>{let n=Fy[e];return n?n.transform?n.transform(t):n.paramNames.reduce((i,l,u)=>(i[l]=t[u]||"",i),{}):Wy(t,r)},jy=(e,t)=>{if(!e)return null;let{pushToastCode:r,pushToastParams:n=[]}=e,o=$u[r];if(!o)return null;let i=Mk(r,n,o);return{title:(t?.translate??Z)(o,i),args:i,messageKey:o}};function Dk({walletId:e,keyringIdentities:t}){let r;if(t.find(l=>(r=l.walletIdentities.find(u=>u.walletId===e),r)),!r)return[];let n=Object.values(r.account),o=r.accountsMap,i=[];return o&&Object.keys(o).forEach(l=>{let u=o[l];Object.keys(u).forEach(c=>{let d=u[c];d.address&&i.push(d.address)})}),[...new Set([...n,...i])]}var Nk=1;function y(e){let{openMoonCat:t=!1}=e,r=(0,bn.useSelector)(Ft),n=(0,bn.useSelector)(ft),o=(0,bn.useSelector)(Ln),i=(0,bn.useSelector)(Wu),l=ge("login"),u=ge("wallet-tx-status-toast"),c=ge("nft-operate"),d=ge("wallet-inform"),b=(0,gt.useHistory)(),C=(0,gt.useLocation)(),[S,v]=(0,P.useState)(null),T=Rp(),m=Ey(),{isCloudChecked:_,onCloudUpdatedCallBack:w,onCloudResetLocalCallBack:E,isRestingFromCloud:J}=kp();yy();let z=(0,P.useMemo)(()=>Dk({walletId:o,keyringIdentities:i}),[o,i]),{isMoonCat:we,loadingMoonCatData:Ae}=to();(0,P.useEffect)(()=>{if(T){let{initialType:X}=T,{path:pe}=e;if(_p()&&Yf(X)&&!by.includes(pe)){let{location:Ie}=e||{},{pathname:Lt,search:wi=""}=Ie||{};setTimeout(()=>{globalThis.platform.openExtensionInPopup(Lt+wi||"")},200)}}},[T?.initialType]);let re=cy(),it=my(),St=_y();py(),(0,P.useEffect)(()=>{it&&He.warn({alignBottom:!1,title:Z("wallet_extension_home_popup_title_update_now"),text:Z("wallet_extension_home_popup_text_update_now"),confirmText:Z("wallet_extension_home_popup_btn_update"),maskClosable:!1,onConfirm:()=>{window.localStorage.setItem("extensionReload",it),ml.default.runtime.reload()}})},[it]);let[En,at]=(0,P.useState)(!1),[ne]=(0,P.useState)(ml.default.runtime.getManifest().version),Be=Ap(),Re=tp({dark:"/cdn/assets/imgs/246/F624BDAD9E2C018D.png",light:"/cdn/assets/imgs/246/234578340DAE2A80.png"});return(0,P.useEffect)(()=>{ne!==St.version&&!En&&St&&He.action({mobileWidth:"77.777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,children:P.default.createElement("div",{className:pr.updateMb32},P.default.createElement("div",{className:pr.centerImage},P.default.createElement("img",{src:Re,alt:""})),P.default.createElement("div",{className:pr.titleUpdate},Z("wallet_extension_home_popup_title_update_available")),P.default.createElement("div",{className:pr.textUpdate},Z("wallet_extension_home_popup_text_update_available")),P.default.createElement(Pi,{size:Pi.SIZE.sm,className:pr.link,onClick:()=>{globalThis.platform.openTab({url:`https://${Be}/help/how-do-i-update-my-okx-wallet-extension-on-google-chrome`})}},Z("wallet_extension_home_popup_link_update_available"))),confirmText:Z("wallet_extension_home_popup_text_ok"),maskClosable:!1,onConfirm:X=>{St.repeat?at(!0):window.localStorage.setItem("versionExtensionUpdate",St.version),X.destroy()}})},[En,St,ne]),(0,P.useEffect)(()=>{re&&He.warn({alignBottom:!1,maskClosable:!1,title:Z("wallet_extension_clearcache_modaltitle_step_locked"),text:Z("wallet_extension_clearcache_modaldesc_step_locked"),confirmText:Z("wallet_extension_btn_general_gotit"),onConfirm:X=>{X.destroy(),b.go(-1)}})},[re]),(0,P.useEffect)(()=>{if(r&&n){S&&Array.isArray(S)&&ao.sendChannel({op:"logout",args:S});let X=z.map(pe=>({token:pe}));ao.sendChannel({op:"login",args:X}),v(X)}},[r,n,o]),(0,P.useEffect)(()=>{if(c){let{scene:X,status:pe}=c.data;X===21&&pe===2&&De.success({title:Z("extension_home_toast_receivecompleted")})}},[c]),(0,P.useEffect)(()=>{(async()=>{d&&d?.data&&d?.data?.type===Nk&&await Sy(d.data)})()},[d]),(0,P.useEffect)(()=>{if(l){let X=Object.keys(jt).map(pe=>({channel:jt[pe]}));ao.sendChannel({op:"subscribe",args:X})}},[l]),(0,P.useEffect)(()=>{let pe=b.location.pathname.match(Zn);if(u&&!pe){let{data:Ie}=u,{pushToastCode:Lt,pushToastParams:wi=[],txStatus:Pl,url:yi}=Ie,kl=jy({pushToastCode:Lt,pushToastParams:wi,txStatus:Pl,url:yi});if(!kl)return;De[Vu[Pl]]({title:kl?.title||"",desc:yi?P.default.createElement(Ip,{url:yi,urlText:Z("wallet_transfer_notif_view_on_explorer")}):null})}},[u]),(0,P.useEffect)(()=>{let X=new PerformanceObserver(pe=>{let Ie={};pe.getEntries().forEach(Lt=>{Ie[Lt.name]=Lt.startTime}),performance.memory&&(Ie.memory={totalJSHeapSize:performance.memory?.totalJSHeapSize,usedJSHeapSize:performance.memory?.usedJSHeapSize,jsHeapSizeLimit:performance.memory?.jsHeapSizeLimit}),Ie["first-contentful-paint"]>1e3&&U.captureEvent({message:`PERFORMANCE_WARN_1s ${b.location.pathname}`,contexts:{report:{info:JSON.stringify(Ie)}},exception:{values:[{type:`PERFORMANCE_WARN_1s ${b.location.pathname}`,value:"Performance Data"}]},level:"info"})});return X.observe({type:"paint",buffered:!0}),()=>{X.disconnect()}},[b.location.pathname]),(0,P.useEffect)(()=>{E?.()},[E]),Iy(),li(z,"wallet-asset"),li(z,"invest-DeFi"),li(z,"wallet-nft"),My(),Ly(),Op(),t&&Ae?P.default.createElement(P.default.Fragment,null):t&&!Ae&&we?P.default.createElement(gt.Redirect,{to:{pathname:ct}}):!_||J?P.default.createElement(P.default.Fragment,null):n?m?P.default.createElement(gt.Redirect,{to:{pathname:Kt,search:vi(C.search)}}):w?w():P.default.createElement(Ty,{...e}):P.default.createElement(gt.Redirect,{to:{pathname:Vt,search:vi(C.search)}})}a();s();var gl=p(k()),Ky=p(Te());a();s();var Hy=p(ce());function Gy(){return!(0,Hy.useSelector)(ft)}function fi(e){return Gy()?gl.default.createElement(Ky.Redirect,{to:{pathname:Vt}}):gl.default.createElement(si,{...e})}a();s();var _l=p(k()),Vy=p(ce()),ci=p(Te());function Sn(e){return(0,Vy.useSelector)(ft)?_l.default.createElement(ci.Redirect,{to:{pathname:Se}}):_l.default.createElement(ci.Route,{...e})}a();s();var vn=p(k());a();s();var g=p(k());var $y=(0,g.lazy)(()=>import("./dex-6UH2G5AB.js")),Lk=()=>import("./new-home-page-L73EGUHY.js"),LF=(0,g.lazy)(()=>import("./common-ISUFL2NK.js")),Yy=(0,g.lazy)(Lk),zy=(0,g.lazy)(()=>import("./wallet-aggregate-4JWT47T2.js")),Xy=(0,g.lazy)(()=>import("./ConnectHardware-2G7NT3IT.js")),Jy=(0,g.lazy)(()=>import("./WalletMnemonicBackupLandingPage-EJ2OA35D.js")),Zy=(0,g.lazy)(()=>import("./WalletList-U426BRS2.js")),Qy=(0,g.lazy)(()=>import("./WalletEdit-AAFN7LUT.js")),eb=(0,g.lazy)(()=>import("./WalletBackUp-H4HBME7S.js")),tb=(0,g.lazy)(()=>import("./WalletAccountAddress-6KTXERYB.js")),rb=(0,g.lazy)(()=>import("./LedgerNetworkManage-53X6VPUL.js")),nb=(0,g.lazy)(()=>import("./WalletDetail-T7O6TSWE.js")),ob=(0,g.lazy)(()=>import("./WalletAccountDetail-XQXT6ZQZ.js")),ib=(0,g.lazy)(()=>import("./Onboard-VUGU6RZB.js")),ab=(0,g.lazy)(()=>import("./InitialCreate-AKH23EPZ.js")),sb=(0,g.lazy)(()=>import("./InitialImport-2F6F624J.js")),lb=(0,g.lazy)(()=>import("./wallet-add-page-PDC2X5QC.js")),ub=(0,g.lazy)(()=>import("./walletAddImport-ZX5VAW72.js")),fb=(0,g.lazy)(()=>import("./Login-FLXKUSND.js")),cb=(0,g.lazy)(()=>import("./Import-PY3JBFKP.js")),db=(0,g.lazy)(()=>import("./show-supported-chains-PWIL4IDE.js")),pb=(0,g.lazy)(()=>import("./Receive-PPWKNML5.js")),hb=(0,g.lazy)(()=>import("./Lock-6FZMBOHO.js")),mb=(0,g.lazy)(()=>import("./ForgetPassword-MYHS7EKP.js")),gb=(0,g.lazy)(()=>import("./select-network-7FQIS4MQ.js")),_b=(0,g.lazy)(()=>import("./select-coin-4Q7HETEH.js")),wb=(0,g.lazy)(()=>import("./SelectNetwork-ZONRP2FI.js")),yb=(0,g.lazy)(()=>import("./SelectProtocol-Z5DH4AT2.js")),bb=(0,g.lazy)(()=>import("./SendNft-4GXLFZU5.js")),Sb=(0,g.lazy)(()=>import("./SendPageContainer-XTTXSSYF.js")),vb=(0,g.lazy)(()=>import("./CoinManage-6BREHVU3.js")),Cb=(0,g.lazy)(()=>import("./CustomCrypto-SJP5PGHC.js")),xb=(0,g.lazy)(()=>import("./Setting-GPCTNQ5D.js")),Eb=(0,g.lazy)(()=>import("./Preference-UDQ3TL7J.js")),Tb=(0,g.lazy)(()=>import("./WalletSafely-HBX5RNCT.js")),Pb=(0,g.lazy)(()=>import("./DefaultWallet-NYLNPKIO.js")),kb=(0,g.lazy)(()=>import("./SwitchRandomPassword-EX36GQZB.js")),Ab=(0,g.lazy)(()=>import("./AboutWallet-QM6TRLW5.js")),Rb=(0,g.lazy)(()=>import("./WalletHistory-RNLBL553.js")),WF=(0,g.lazy)(()=>import("./coinSearch-WCJ7ZYYJ.js")),Ib=(0,g.lazy)(()=>import("./TxConfirmEntry-JZ4Q74GK.js")),Ob=(0,g.lazy)(()=>import("./Selector-MU7LAVJY.js")),Mb=(0,g.lazy)(()=>import("./WalletLock-Z5CMKQYY.js")),Db=(0,g.lazy)(()=>import("./RpcMode-2WPLJOTI.js")),Nb=(0,g.lazy)(()=>import("./DappEntry-3ATAKW3O.js")),Lb=(0,g.lazy)(()=>import("./DappReady-LKFDXNFG.js")),Wb=(0,g.lazy)(()=>import("./NetworkManagement-HEEEQS3G.js")),Ub=(0,g.lazy)(()=>import("./Form-MAKTSDBP.js")),qb=(0,g.lazy)(()=>import("./PermissionsConnect-MIEENTOH.js")),Bb=(0,g.lazy)(()=>import("./Detail-NEFOXQJS.js")),Fb=(0,g.lazy)(()=>import("./NftFilter-B23FIXIY.js")),jb=(0,g.lazy)(()=>import("./DAppNetworkManage-7YGB5MNU.js")),Hb=(0,g.lazy)(()=>import("./CoinDetail-ZMBHH2AE.js")),Gb=(0,g.lazy)(()=>import("./SelectApyCoin-C5LV2JG3.js")),Kb=(0,g.lazy)(()=>import("./address-6TZDOO3U.js")),Vb=(0,g.lazy)(()=>import("./ZKSpace-LDWCJ42E.js")),$b=(0,g.lazy)(()=>import("./Pi-WUVKLBAN.js")),Yb=(0,g.lazy)(()=>import("./ZKSyncLite-VBQXC4SH.js")),zb=(0,g.lazy)(()=>import("./Starknet-FVQBSU2P.js")),Xb=(0,g.lazy)(()=>import("./CreateAccount-4TDPWXSA.js")),Jb=(0,g.lazy)(()=>import("./ConfirmPay-AVSCOEIW.js")),Zb=(0,g.lazy)(()=>import("./rpc-mode-IR6H4D7I.js")),Qb=(0,g.lazy)(()=>import("./RiskApprovePage-UZDUSMJE.js")),eS=(0,g.lazy)(()=>import("./ApproveDetailPage-CFNYTVRM.js")),tS=(0,g.lazy)(()=>import("./BatchTransfer-YXJ7O7SV.js")),rS=(0,g.lazy)(()=>import("./Bitcoin-5WAVWH52.js")),nS=(0,g.lazy)(()=>import("./BatchAddAccount-G5DV2RU3.js")),oS=(0,g.lazy)(()=>import("./BulkRename-GLFMF7VB.js")),UF=(0,g.lazy)(()=>import("./FractalBTCInscribe-Y3XDDDGC.js")),iS=(0,g.lazy)(()=>import("./ManageUtxo-756RIXN2.js")),aS=(0,g.lazy)(()=>import("./CoinInfo-HFADY5I2.js")),sS=(0,g.lazy)(()=>import("./DownloadAddresses-PQYYFZ7A.js")),lS=(0,g.lazy)(()=>import("./GasTracker-NRFDQSP5.js")),uS=(0,g.lazy)(()=>import("./Advanced-JGYWC7G6.js")),fS=(0,g.lazy)(()=>import("./WebWidget-PU4KNMSG.js")),cS=(0,g.lazy)(()=>import("./FeaturePanel-NZOU2ZM3.js")),dS=(0,g.lazy)(()=>import("./RiskExtension-BCAP3XBO.js")),pS=(0,g.lazy)(()=>import("./Upgrade7702Entry-T7JPFYJ6.js")),hS=(0,g.lazy)(()=>import("./Upgrade7702SelectWallet-N3VBII5G.js")),mS=(0,g.lazy)(()=>import("./7702Revoke-G7XH5ZXI.js")),gS=(0,g.lazy)(()=>import("./route-MML2DFBH.js")),_S=(0,g.lazy)(()=>import("./selectWallet-BSJMSRXB.js")),wS=(0,g.lazy)(()=>import("./ReportPage-5PTWZDDP.js")),yS=(0,g.lazy)(()=>import("./GeneralDapp-IA4D22IZ.js"));var bS=(0,vn.lazy)(()=>import("./MoonCat-IQM7PRBB.js")),le=()=>vn.default.createElement(vn.default.Fragment,null);var SS=({autoLockTimeLimit:e,setLastActiveTime:t})=>{let n=(0,ue.useHistory)().location?.state?.noGuard||{},o=h.default.createElement(h.Suspense,null,h.default.createElement(ue.Switch,null,h.default.createElement(ue.Route,{path:fc,component:Xy}),h.default.createElement(y,{path:$n,component:le,exact:!0}),h.default.createElement(ue.Route,{path:Xn,component:le,exact:!0}),h.default.createElement(ue.Route,{path:Jn,component:le,exact:!0}),h.default.createElement(y,{path:vr,guard:!n[vr],component:le,openMoonCat:!0,exact:!0}),h.default.createElement(y,{path:Xc,component:Jy,exact:!0}),h.default.createElement(y,{path:Kc,component:Zy,exact:!0}),h.default.createElement(y,{path:Vc,component:Qy,exact:!0}),h.default.createElement(y,{path:vc,component:eb,exact:!0,openMoonCat:!0}),h.default.createElement(y,{path:vd,component:Ib,exact:!0}),h.default.createElement(y,{path:zn,guard:!0,component:le,exact:!0,openMoonCat:!0}),h.default.createElement(ue.Route,{path:Qn,component:le,exact:!0}),h.default.createElement(ue.Route,{path:jn,component:le,exact:!0}),h.default.createElement(y,{path:Hn,component:le}),h.default.createElement(Sn,{path:Gn,component:le,exact:!0}),h.default.createElement(ue.Route,{path:`${wc}/:type`,component:db}),h.default.createElement(y,{path:$c,component:nb}),h.default.createElement(y,{path:Jc,component:rb}),h.default.createElement(y,{path:Yc,component:ob}),h.default.createElement(y,{path:zc,component:tb}),h.default.createElement(y,{path:Yn,guard:!0,component:le,openMoonCat:!0}),h.default.createElement(ue.Route,{path:cd,component:zy}),h.default.createElement(y,{path:pc,component:pb,exact:!0}),h.default.createElement(ue.Route,{path:rc,component:hb,exact:!0}),h.default.createElement(Sn,{path:Vt,component:ib}),h.default.createElement(Sn,{path:gc,component:ab,exact:!0}),h.default.createElement(Sn,{path:mc,component:sb,exact:!0}),h.default.createElement(y,{path:Hc,component:lb,exact:!0}),h.default.createElement(y,{path:Gc,component:ub,exact:!0}),h.default.createElement(ue.Route,{path:pd,component:fb,exact:!0}),h.default.createElement(ue.Route,{path:hd,component:cb,exact:!0}),h.default.createElement(fi,{path:Kt,exact:!0,component:le}),h.default.createElement(fi,{path:hc,component:mb}),h.default.createElement(y,{path:Fn,component:le}),h.default.createElement(y,{path:ad,component:Zb}),h.default.createElement(y,{path:sd,component:tS}),h.default.createElement(y,{path:_c,component:hS}),h.default.createElement(y,{path:ld,component:nS}),h.default.createElement(y,{path:ud,component:oS}),h.default.createElement(y,{path:uc,component:yb}),h.default.createElement(y,{path:lc,component:wb}),h.default.createElement(y,{path:Fc,component:gb}),h.default.createElement(y,{path:Bc,component:_b}),h.default.createElement(y,{path:`${ic}/:nftPath`,component:bb,exact:!0}),h.default.createElement(y,{path:`${oc}/:coinId?`,component:Sb}),h.default.createElement(y,{path:yc,component:vb}),h.default.createElement(y,{path:bc,component:Cb}),h.default.createElement(y,{path:Sc,component:xb}),h.default.createElement(y,{path:Cc,component:Eb}),h.default.createElement(y,{path:xc,component:Tb}),h.default.createElement(y,{path:Ec,component:Pb}),h.default.createElement(y,{path:Rc,component:kb}),h.default.createElement(y,{path:Pc,component:Ab}),h.default.createElement(y,{path:Tc,component:bS}),h.default.createElement(y,{path:Vn,component:le}),h.default.createElement(y,{path:Kn,component:le}),h.default.createElement(y,{path:Ic,component:fS}),h.default.createElement(y,{path:Oc,component:cS}),h.default.createElement(y,{path:Zc,component:Rb,exact:!0}),h.default.createElement(y,{path:kc,component:Ob}),h.default.createElement(y,{path:Ac,component:Mb}),h.default.createElement(y,{path:Mc,component:Db}),h.default.createElement(y,{path:Uc,component:Lb}),h.default.createElement(y,{path:Lc,component:Nb}),h.default.createElement(y,{path:Wc,component:yS}),h.default.createElement(y,{path:Dc,component:Wb}),h.default.createElement(y,{path:Nc,component:Ub}),h.default.createElement(y,{path:`${ac}/:id`,component:qb}),h.default.createElement(y,{path:`${cc}`,component:Bb,exact:!0}),h.default.createElement(y,{path:dc,component:Fb,exact:!0}),h.default.createElement(y,{path:`${sc}`,component:jb}),h.default.createElement(y,{path:Bn,component:Hb,exact:!0}),h.default.createElement(y,{path:jc,component:Gb,exact:!0}),h.default.createElement(y,{path:md,component:aS}),h.default.createElement(y,{path:gd,component:sS}),h.default.createElement(y,{path:Qc,component:Kb}),h.default.createElement(y,{path:ed,component:Vb}),h.default.createElement(y,{path:td,component:$b}),h.default.createElement(y,{path:rd,component:Yb}),h.default.createElement(y,{path:nd,component:zb}),h.default.createElement(y,{path:od,component:Xb}),h.default.createElement(y,{path:id,component:Jb}),h.default.createElement(y,{path:qc,component:rS}),h.default.createElement(y,{path:Zn,component:$y}),h.default.createElement(y,{path:dd,component:iS}),h.default.createElement(y,{path:_d,component:lS}),h.default.createElement(y,{path:wd,component:uS}),h.default.createElement(y,{path:yd,component:pS}),h.default.createElement(y,{path:bd,component:Qb}),h.default.createElement(y,{path:Sd,component:eS}),h.default.createElement(y,{path:Cd,component:dS}),h.default.createElement(y,{path:xd,component:mS}),h.default.createElement(y,{path:Ed,component:gS}),h.default.createElement(y,{path:Td,component:_S}),h.default.createElement(y,{path:nc,component:wS}),h.default.createElement(y,{path:[Se,ct],component:Yy})));return e>0?h.default.createElement(fy,{onAction:t,throttle:1e3},o):o};var vS=SS;var CS=({isLoading:e})=>{let{autoLockTimeLimit:t=0}=(0,di.useSelector)(Bu),r=(0,di.useDispatch)();return _t.default.createElement(_t.default.Fragment,null,_t.default.createElement(oy,null),_t.default.createElement(ay,null),_t.default.createElement("div",{className:"main-container-wrapper"},e&&_t.default.createElement(vp,null),_t.default.createElement(vS,{autoLockTimeLimit:t,setLastActiveTime:()=>{r(qf())}})))};var xS=({isLoading:e})=>React.createElement(CS,{isLoading:e});a();s();var ES=p(k());ye();ou();var TS=()=>{cp(Mn.getCheckCountryLimit,{},{onSuccess(e){if(!e?.data)return;let{limit:t,displayCountryName:r}=e.data.web3??{};t&&He.warn({maskClosable:!1,renderFooter:()=>ES.default.createElement("div",null),alignBottom:!1,title:M("wallet_extension_login_title_access_restricted"),text:M("wallet_extension_login_toast_unavailable_inyourregion",{area:r})})}})};a();s();var pi=p(k()),PS=p(ce()),kS=p(qn());var Wk=()=>{let e=(0,pi.useRef)(!1),{walletId:t,platformAssetUSD:r,nftBalanceUSD:n,defiBalanceUSD:o,tokenBalanceUSD:i}=(0,PS.useSelector)(Lp),l=(0,kS.usePrevious)(t,()=>!0),u=oo(t);(0,pi.useEffect)(()=>{(async()=>{if(l!==t&&(e.current=!1),r!==Np&&e.current===!1){let c="";try{c=(await so({keyringIdentityType:u?.keyringIdentityType,account:u?.account,serverWalletType:u?.serverWalletType}))?.refCode||""}catch{}af({wallet_id:t,coin_balance:i,nft_balance:n,defi_balance:o,platform_coin_balance:r,web3_c_ref:c}),e.current=!0}})()},[t,l,r,n,i,o])},AS=Wk;a();s();var IS=p(k()),wl=p(ce());a();s();var RS=e=>{let t="";try{let r=Lu(e),n=Nu(e),o=qu(e);t=pp(e)?.metadata?.origin||n[n.length-1]?.origin||n[n.length-1]?.msgParams?.origin||o[o.length-1]?.origin||r[r.length-1]?.origin}catch{}return t};_r();var Uk=()=>{let e=(0,wl.useSelector)(Ln),t=(0,wl.useSelector)(RS),n=be()===Rn,o=oo(e);(0,IS.useEffect)(()=>{(async()=>{if(e){let i="";try{i=(await so({keyringIdentityType:o?.keyringIdentityType,account:o?.account,serverWalletType:o?.serverWalletType}))?.refCode||""}catch{}Un({islogin:"yes",isbydapp:n?"yes":"no",dapp_url:zl?"web3.okx.com/pc":t,wallet_id:e,web3_c_ref:i,smart_account_status:null,web3_ref:await Dp("web_extension_storage_refCode")})}})()},[e])},OS=Uk;a();s();a();s();var qk=()=>{},MS=qk;var DS=MS;De.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:De.DIRECTION.top,isInline:!0});var US=()=>{let e=DS(),t=(0,NS.useHistory)(),r=(0,wt.useDispatch)();TS(),ei(),OS(),AS(),dp();let n=(0,wt.useSelector)(S=>S.appState.isLoading),{os:o,browser:i}=(0,wt.useSelector)(S=>S.metamask.browserEnvironment)||{},l=(0,wt.useSelector)(Fu),u=(0,wt.useSelector)(Uu)?.isoCode||"usd",c=(0,wt.useSelector)(eo),d=process.env.ASSETS_BUILD_TYPE===je.DEV||process.env.ASSETS_BUILD_TYPE===je.DAILY,b=()=>{t.listen((S,v)=>{v==="PUSH"&&ew(S.pathname)})},C=()=>{u||r(wp("usd"))};return(0,LS.useMount)(()=>{b(),rp(),io(l),C(),ty(c)}),hr.default.createElement(hr.default.Fragment,null,hr.default.createElement("div",{className:(0,WS.default)("app-content",{[`os-${o}`]:o,[`browser-${i}`]:i}),style:{height:e}},hr.default.createElement(xS,{isLoading:n})),!!d&&hr.default.createElement(ny,null))};a();s();var bl=class extends ae.PureComponent{constructor(){super(...arguments);st(this,"state",{});st(this,"isNetworkError",()=>{let{error:r}=this.state;return r instanceof TypeError&&r.message?.toLocaleLowerCase().match(/failed to fetch/)})}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){U.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;if(r){let o=r&&this.isNetworkError();return ae.default.createElement(yl.Provider,{store:n},ae.default.createElement(al,null,o?ae.default.createElement($w,null):ae.default.createElement(ll,{error:r})))}return ae.default.createElement(yl.Provider,{store:n},ae.default.createElement(Zw,null),ae.default.createElement(qS.HashRouter,null,ae.default.createElement(Ci,null,ae.default.createElement(Vw,null)),ae.default.createElement(al,null,ae.default.createElement(Ul,{options:iu},ae.default.createElement(Ci,null,ae.default.createElement(US,null))))))}},BS=bl;var mi=p(nv());av();Si();ov();Ai();cv();kn();Wn();a();s();function FS(e){let t={accountIdentities:e.accountIdentities,keyringIdentities:e.keyringIdentities,selectedWallet:e.selectedWallet,multiAddressBaseChainsMap:e.multiAddressBaseChainsMap};return delete e.accountIdentities,delete e.keyringIdentities,delete e.selectedWallet,delete e.multiAddressBaseChainsMap,t}a();s();a();s();function Bk(){try{document.body.classList.add(Ql.WEB3,eu.CLASSIC)}catch{}}var jS=Bk;var hi=null,gi=null,HS=!1,Cn=null,Sl={current:{},okdCurrent:{},dexCurrent:{},defiCurrent:{}};function Fk(){if(!HS){if(nu.config({top:16}),Wl.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]}),wr.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[wr.componentNames.Select]:{bottomSafeSpace:0}}),process.env.ASSETS_BUILD_TYPE===je.DEV||process.env.ASSETS_BUILD_TYPE===je.DAILY){let e=window.localStorage.getItem("languageKeyMode");Bt(e==="keyMode")}HS=!0}}function jk(e){window.getCleanAppState=function(){let t=Dl(e.getState());return t.version=globalThis.platform.getVersion(),t.browser=window.navigator.userAgent,t}}async function Hk(){return await Il.setUrlFromLocalAsync(),await Al.setUrlFromLocalAsync(),Promise.allSettled([zu(),Zu(),cf()])}async function Gk(e){async function t(r){let n=await ot.default.tabs.get(r),{active:o,id:i,title:l,url:u}=n;if(o===!1)return;let{origin:c,protocol:d}=u?new URL(u):{};!c||c==="null"||e.dispatch(Y_({id:i,title:l,origin:c,protocol:d,url:u}))}ot.default.tabs.onActivated.addListener(async({tabId:r})=>{await t(r)}),ot.default.tabs.onUpdated.addListener(async(r,n,o)=>{o.windowId===Cn&&await t(r)}),ot.default.windows.onFocusChanged.addListener(async r=>{if(r!==ot.default.windows.WINDOW_ID_NONE){Cn=r;let n=await ot.default.tabs.query({active:!0,windowId:Cn});n?.[0]&&t(n[0].id)}}),ot.default.windows.onCreated.addListener(r=>{Cn=r.id}),Cn=(await ot.default.windows.getCurrent()).id}async function Kk(e){return new Promise((t,r)=>{e.getStateByDomain((n,o)=>{if(n){r(n);return}t(o)})})}async function Vk({metamaskState:e,backgroundConnection:t,opts:r,isFirstRun:n}){let o;if(n){xu(e.currentLocale);let S=await Promise.allSettled([Sr(e.currentLocale),Sr(e.currentLocale,mi.LOCALE_TYPE.okd),Sr(e.currentLocale,mi.LOCALE_TYPE.dex),Sr(e.currentLocale,mi.LOCALE_TYPE.defi)]);Sl={current:S[0].value,okdCurrent:S[1].value,dexCurrent:S[2].value,defiCurrent:S[3].value},Nf(e.currentLocale),o=Sl}else o=Sl;let i=FS(e),u={...{activeTab:r.activeTab,metamask:e,appState:{},localeMessages:o}},c;n?(c=Rs(u),gi=c,Gk(c),c.dispatch(sw())):(c=gi,c.dispatch(Ri(e)));let d=Ou(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);d.length>0&&c.dispatch(Bf({id:d[0].id})),t.onNotification(S=>{switch(S.method){case"sendUpdate":{let v=S.params[0];c.dispatch(Ri(v))}break;case"sendPartialUpdate":{let v=S.params[0];c.dispatch(Uf(v))}break;case"sendUpdateBalance":{let v=S.params[0];c.dispatch(v?Yu(v):Ht())}break;default:throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(S)}`)}}),Lf(i,c.dispatch.bind(c),!1);let C;return hi||(C=document.createElement("div"),C.style.height="100%",C.style.width="100%",C.style.display="flex",C.style.justifyContent="center",C.style.alignItems="center",C.style.overflow="hidden",C.style.position="absolute",r.container.prepend(C)),jS(),hi=hi||(0,KS.createRoot)(C),hi.render(GS.default.createElement(BS,{store:c})),c}async function vl(e,t){try{Fk();let{backgroundConnection:r}=e;Ku(r),yu(r.refreshHttpDNS);let n=await Kk(r);Iu(n.chainList);let o=!gi;o&&await Hk();let i=await Vk({metamaskState:n,backgroundConnection:r,opts:e,isFirstRun:o});o&&jk(i),window.dispatchEvent(new CustomEvent("backgroundReady")),t(null,i)}catch(r){gi=null,t(r)}}window.logStateString=async function(e){let t=window.getCleanAppState();try{let r=await globalThis.platform.getPlatformInfo();t.platform=r,delete t.localeMessages;try{t.log=await uu()}catch{t.log=[]}let n=await z_();Object.keys(n).forEach(i=>{t[i]=n[i]});let o=JSON.stringify(t,null,2);e(null,o)}catch(r){e(r)}};a();s();var $k=["popup.html","notification.html","home.html"];navigator.userAgent.includes("Android")&&$k.forEach(e=>{location.href.includes(e)&&(location.href=location.href.replace(e,"fullscreen.html"))});var _i=null,yt=null,Nt=null,zS=!1,VS=0,xn=null,Yk=Nl(e=>{U.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!1}}),bt.default.error("initializeUiWithTab error",e)},500);function zk(e,t){if(t){U.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!0}}),bt.default.error("initializeUiWithTab error",e);return}Yk(e)}function Xk(e){let t=new YS.default;t.pipe(e).pipe(t),e.on("error",Ut),t.on("error",Ut)}function Jk(e,t){let r=Bo(e);t(null,r)}function Cl(){Nt&&yt&&(Nt.removeAllListeners("data"),yt.removeAllListeners("data"),Nt=null)}function Zk(e){Cl(),yt||(yt=new $S.default({name:"ui-entry",target:"ui-ses-iframe-component",targetWindow:window})),Nt=e;let t=n=>{Nt&&!Nt.destroyed&&Nt.write(n)},r=n=>{yt&&!yt.destroyed&&yt.write(n)};yt.on("data",t),e.on("data",r),e.on("error",Ut),e.on("end",()=>{Cl()}),e.on("close",()=>{Cl()})}function Qk(e,t){let r=zo(e),n=r.createStream("controller");Jk(n,t),Xk(r.createStream("provider")),Zk(n)}function e0(e,t,r,n){Qk(r,(o,i)=>{if(o){n(o);return}vl({activeTab:e,container:t,backgroundConnection:i},n)})}async function t0(e){return new Promise(t=>{if(e!==An&&e!==In){t({});return}xl.default.tabs.query({active:!0,currentWindow:!0}).then(r=>{let[n]=r,{id:o,title:i,url:l}=n,{origin:u,protocol:c}=l?new URL(l):{};if(!u||u==="null"){t({});return}t({id:o,title:i,origin:u,protocol:c,url:l})}).catch(r=>{U.captureException(r,{extra:{PERFORMANCE_ERROR_INIT_UI_QUERY_CURRENT_ACTIVE_TAB:!0}}),bt.default.error("queryCurrentActiveTab error",r),t({})})})}async function El(e,t,r=!1){let n=await t0(e);qt()===Yl&&(n.origin="https://web3.okx.com");let o=document.getElementById("app");e0(n,o,t,i=>{if(i){zk(i,r);return}r&&(bt.default.error("PERFORMANCE_ERROR_INIT_UI_RETRY Retry"),U.captureException("PERFORMANCE_ERROR_INIT_UI_RETRY",{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!0}})),zS=!0})}function r0(){try{globalThis.platform=new dn,_i=be(),Jl()}catch(e){U.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI_INITIALIZE_GLOBAL:!0}}),bt.default.error("initializeGlobal error",e)}}function Tl(){try{let e=xl.default.runtime.connect({name:be()}),t=new Zr(e);return t.once("end",()=>{let r=Tl();El(_i,r)}),t}catch(e){throw bt.default.error("setupConnection error",e),e}}function n0(){xn&&clearInterval(xn),xn=setInterval(()=>{if(zS){clearInterval(xn);return}if(VS++,VS>3){clearInterval(xn);return}let e=Tl();El(_i,e,!0)},30*1e3)}async function o0(){r0();let e=Tl();El(_i,e),n0()}o0().catch(bt.default.error);
//# sourceMappingURL=ui.js.map


