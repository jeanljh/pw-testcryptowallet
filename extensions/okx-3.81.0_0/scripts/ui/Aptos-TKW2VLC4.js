import{a as bn}from"./chunk-QD5HLRSI.js";import"./chunk-WRGSQF3V.js";import"./chunk-ELHHHA5F.js";import{a as Tn}from"./chunk-SUQDM3DA.js";import"./chunk-XRMLFEEQ.js";import{a as An}from"./chunk-GRN4OI4B.js";import{a as xn}from"./chunk-62VQDLH5.js";import{a as V,b as X,c as z}from"./chunk-32IFYA56.js";import{a as J}from"./chunk-ZZ5BEB5E.js";import{a as q}from"./chunk-ELXRV4IW.js";import{p as kn,q as Y}from"./chunk-6PSK4535.js";import"./chunk-GCPFAJKK.js";import"./chunk-7OWNMKUE.js";import"./chunk-EDJJACNG.js";import"./chunk-V7XA3BQU.js";import"./chunk-WST3WRLT.js";import"./chunk-6GOHKXI5.js";import"./chunk-PDSFU775.js";import"./chunk-NTAM5KQ5.js";import"./chunk-57D6LCV2.js";import"./chunk-DEJA7CK3.js";import"./chunk-LS6URCUV.js";import"./chunk-XDEC3ZLT.js";import"./chunk-RGPNT5G7.js";import"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import{x as wn}from"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import"./chunk-AQO2BBXJ.js";import"./chunk-GWMNMJND.js";import"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import"./chunk-S7VT2TWF.js";import"./chunk-HBNZZZEG.js";import"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import{d as H}from"./chunk-BNS5ABAB.js";import"./chunk-UFGJXE4D.js";import"./chunk-7QX2TXNH.js";import"./chunk-LBNBJFSZ.js";import"./chunk-SFA2I2L2.js";import"./chunk-ZDHJHPQ5.js";import"./chunk-ROS2ENQV.js";import"./chunk-DFPRATON.js";import"./chunk-WY5R5HAR.js";import"./chunk-GTQ5U6DA.js";import"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import"./chunk-TF4QEXO7.js";import"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import"./chunk-QJ36ZOFH.js";import"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import"./chunk-JHO7RU36.js";import"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import"./chunk-3ZKJXYZ4.js";import{b as Pn}from"./chunk-GEL5KEYP.js";import{c as Sn}from"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-47LIW52M.js";import"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import{m as L}from"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import{j as U}from"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as Qn}from"./chunk-Z62JX42S.js";import"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{C as N,J as w}from"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import{c as E,e as In}from"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import{i as gn}from"./chunk-EFOY37CC.js";import"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{T as K,Xa as yn,ka as $n,mc as Cn,nc as jn,tb as on,wa as _}from"./chunk-COF7YKSN.js";import"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import{a as Zn}from"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import{M as fn,W as B,f as en,va as tn}from"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import"./chunk-4QGZDIBD.js";import{b as M}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as S,o as i,p as d,q as s}from"./chunk-Y5OH3DDZ.js";i();s();var On=S(M());i();s();var rn=S(M());i();s();var F=S(M());on();i();s();In();on();function ne({walletId:n,method:e,params:o,onConfirm:t}){return async()=>{let r=await E().handleTxBySigner({walletId:n,localType:_,method:e,params:o});return t(r.result)}}var hn=ne;var ee=n=>{let{id:e,walletId:o,method:t,params:r,source:u,origin:k,onConfirm:f,onCancel:g}=n,y=u==="dapp",x=J(n),C=H(yn)||{},A=C?.localType,G=U(o),R=L(A,o),I=r?.message,m=r?.isSilentSign,$=V({id:e,walletId:o,origin:k,localType:A}),c=X({id:e}),O=hn({walletId:o,method:t,params:r,onConfirm:f}),T,p;y?(T=$,p=c):(T=g,p=O);let j=(0,F.useMemo)(()=>({method:t,dappData:JSON.stringify({message:I}),dappInfo:y?x:{},from:R,message:I,chainIndex:C?.chainId}),[R]),{buttonGroup:Q}=z({onCancel:T,onConfirm:p});return F.default.createElement(Y,{needPreExecFn:()=>!1,preExecParams:j,buttonGroup:Q,txType:kn.signMessage,walletAccount:G,localType:A,slot:{bottom:!!m&&F.default.createElement(q,{walletAccount:G})}})},_n=ee;i();s();var a=S(M()),D=S(Qn());tn();In();jn();on();$n();i();s();var Nn=S(Zn());tn();var te=n=>{let e=n?.extParams?.dataType,o=n?.transaction;if(N.SCRIPT_PAYLOAD===e){let t=o;return{argTypes:t.typeArguments,args:t.functionArguments,code:t.bytecode}}if(N.HEX_STRING===e){let t=o;return{hex:`0x${d.Buffer.from(Nn.default.decode(t)).toString("hex")}`}}return B(o,["extParams"])},En=te;i();s();var oe=n=>{let e={};return n?.secondarySignerAddresses&&(e.additionalSigners=n.secondarySignerAddresses),n?.feePayerAddress&&(e.feePayer=n.feePayerAddress,e.withFeePayer=!!n.feePayerAddress,e.feePayerPublicKey=n.feePayerAddress),e},Fn=oe;i();s();tn();var re=({walletId:n,baseCoin:e,preExecInfo:o,finalCoinId:t})=>{let r=o?.gasFee||{},u=r.fee,k=Sn({coinId:e?.coinId}),f=bn({accountId:n,chainIndex:e?.chainId}),{coinAmountInt:g}=f,y=fn(g)||gn(g,u||""),x=o?.preExeStatus===!1,C={coinId:t,estimateFailed:x,networkFee:u,network:k};return{networkFee:{fee:u,gasUnitPrice:r.gasPrice,maxGasAmount:r.gasLimit},networkFeeProps:C,isSufficientGas:y,coinWithBalance:f}},Dn=re;var ae=({unapprovedCoinId:n,baseCoin:e,currentNetwork:o,outCoinId:t})=>{let r=n||e?.coinId||o?.coinId;return t||r},ie=async({from:n,walletId:e})=>n?await E().getPublicKey(n,_,e):null,se=({signInfo:n,signInfoFailed:e})=>!n&&!e,ce=({signInfo:n,publicKey:e,baseCoin:o})=>!n||!e?null:o?.chainId||null,ue=n=>n?.extParams?.showSwitchNetwork??!0,me=(0,a.memo)(n=>{let{id:e,method:o,params:t,walletId:r,origin:u,providerType:k=K,source:f,coinId:g,onCancel:y=en,onConfirm:x=en}=n,C=f==="dapp",{providerType:A=k,isSilentSign:G}=t,R=ue(t),I=Pn(K),m=H(I?.coinId)||{},$=t?.extParams?.coinId,c=ae({unapprovedCoinId:$,baseCoin:m,currentNetwork:I,outCoinId:g}),O=U(r),T=J(n),[p,j]=(0,a.useState)({}),Q=m.localType,b=L(_,r),[Z,vn]=(0,a.useState)();(0,D.useAsyncEffect)(async()=>{let l=await ie({from:b,walletId:r});vn(l)},[b]);let Wn=wn(),[an,Bn]=(0,a.useState)({}),[sn,Mn]=(0,a.useState)({});(0,D.useAsyncEffect)(async()=>{let l=P=>{Mn(h=>({...h,[c]:P}))};if(c)try{let P=await Wn({coinId:c,address:b,fromAddr:b});Bn(h=>({...h,[c]:P})),l(!1)}catch{l(!0)}},[c]);let v=(0,a.useMemo)(()=>an[c],[c,an]),W=(0,a.useMemo)(()=>sn[c],[c,sn]),cn=se({signInfo:v,signInfoFailed:W}),{networkFee:nn,networkFeeProps:Kn,isSufficientGas:un,coinWithBalance:mn}=Dn({walletId:r,baseCoin:m,preExecInfo:p,finalCoinId:c}),Un=V({id:e,walletId:r,origin:u,localType:Q}),Ln=X({id:e,extraParams:{serviceCharge:nn.fee,maxGasAmount:nn.maxGasAmount,gasUnitPrice:nn.gasUnitPrice,contractAddress:p?.analysisData?.interactiveAddress}}),dn=x,pn=y;C&&(dn=Ln,pn=Un);let{buttonGroup:Hn,handleCancel:qn}=z({feeLoading:cn,estimateFailed:W,isSufficientGas:un,onCancel:pn,onConfirm:dn,coinWithBalance:mn,preExecInfo:p}),Yn={txId:e,baseCoin:m,isSufficientGas:un,coinWithBalance:mn},ln=(0,a.useMemo)(()=>En(t),[t]),Jn=(0,a.useMemo)(()=>{let l=t?.options,P=t?.extParams?.dataType,h=t?.extParams?.isRawType,zn=Fn(l);return{dappData:JSON.stringify({transaction:{...B(v,["maxGasAmount"]),publicKey:Z,...zn},data:{payload:P===N.HEX_STRING?ln.hex:ln,options:l,isRawType:h}}),from:b,dappInfo:T,chainIndex:ce({signInfo:v,publicKey:Z,baseCoin:m}),method:o,forceLoading:!0,preStepFailed:W}},[v,Z,m?.chainId,W]),Vn=(0,D.useMemoizedFn)(async()=>{await E().recordChainIdHandler({method:w.CHANGE_NETWORK,origin:u,isFocusWindowActiveTab:!0},Cn.AVM)}),{loading:Xn}=An({unapproved:{origin:u,id:e},network:I?.chainName,providerType:A});return Xn?a.default.createElement(xn,null):a.default.createElement(Y,{loading:!!cn,txType:"signTransaction",preExecParams:Jn,slot:{top:R&&a.default.createElement(Tn,{origin:u,providerType:K,chainName:m?.chainName,onNetworkChange:Vn}),bottom:!!G&&a.default.createElement(q,{walletAccount:O})},handleCancel:qn,buttonGroup:Hn,txState:Yn,localType:m?.localType,networkFeeProps:Kn,walletAccount:O,onUpdatePreExecInfo:j})}),Gn=me;function de(n){switch(n.method){case w.SIGN_TRANSACTION:case w.SIGN_AND_SUBMIT_TRANSACTION:return rn.default.createElement(Gn,{...n});case w.SIGN_MESSAGE:return rn.default.createElement(_n,{...n});default:return""}}var Rn=de;var At=({unapproved:n})=>On.default.createElement(Rn,{...n,source:"dapp"});export{At as default};
//# sourceMappingURL=Aptos-TKW2VLC4.js.map
