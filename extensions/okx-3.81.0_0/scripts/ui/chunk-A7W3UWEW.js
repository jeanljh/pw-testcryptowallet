import{a as Sr}from"./chunk-ESUENDB2.js";import{a as Y}from"./chunk-IJ7JX7CH.js";import{a as yr}from"./chunk-SLISBEZF.js";import{a as Tr}from"./chunk-7IP3VPVS.js";import{b as pr,c as lt,m as lr,n as fr,o as dr}from"./chunk-WRGSQF3V.js";import{a as gr}from"./chunk-V7XA3BQU.js";import{a as Xo}from"./chunk-JVF7GJB3.js";import{a as Zo}from"./chunk-QKPPTYDW.js";import{a as Vo}from"./chunk-IN42FW4K.js";import{a as or}from"./chunk-WST3WRLT.js";import{a as he,b as xr,d as _e}from"./chunk-KQ6OPOXD.js";import{a as ft}from"./chunk-X7ACMHNF.js";import{a as Cr}from"./chunk-DEJA7CK3.js";import{a as We}from"./chunk-XDEC3ZLT.js";import{a as de,b as _r}from"./chunk-RGPNT5G7.js";import{A as at,E as ir,I as ar,J as mr,N as mt,P as ut,Q as ur,S as cr,U as ct,V as pt,a as rr,b as nr,c as we,d as U,e as rt,g as ve,i as nt,j as sr,o as st,u as Le,z as it}from"./chunk-OQUE64GQ.js";import{D as tr,b as Jo,c as qo,k as er,l as W}from"./chunk-Q7DF5H6O.js";import{a as jo}from"./chunk-S7VT2TWF.js";import{f as Qo}from"./chunk-HBNZZZEG.js";import{d as te,g as Ko,k as ke}from"./chunk-BNS5ABAB.js";import{d as ot}from"./chunk-ZDHJHPQ5.js";import{B as To,ia as So}from"./chunk-GLRDVHLR.js";import{E as Lt,F as Bo,G as Oo,H as ko,J as wo,K as vo,M as Lo,N as Mo,O as Do,P as Ro,Q as Uo,R as Ho,b as Io,f as ho,j as Ao,k as bo,n as Eo,q as Fo,t as No,y as Po}from"./chunk-QJ36ZOFH.js";import{k as zo}from"./chunk-V7ZNWTMX.js";import{J as fo,h as lo}from"./chunk-3ZKJXYZ4.js";import{c as Mt}from"./chunk-OOYDFTEF.js";import{a as Yo}from"./chunk-JNIP4OYT.js";import{a as tt,h as Go}from"./chunk-U7IWD6UB.js";import{b as fe}from"./chunk-7MCLPJAH.js";import{a as jn,n as $o,o as Wo}from"./chunk-YGMRSF47.js";import{a as Co,g as xo,ib as yo,ua as go}from"./chunk-GCS2RK7E.js";import{a as Qe,f as _o,u as I}from"./chunk-FGAB46RQ.js";import{o as le}from"./chunk-Z62JX42S.js";import{Na as $,la as Je}from"./chunk-2QHGKEME.js";import{a as et}from"./chunk-6PA65BO3.js";import{I as co,W as qe,_ as E,aa as je,ba as po,c as k,ia as ee,k as uo}from"./chunk-WU2LB6XB.js";import{a as Q,b as wt,c as ce,f as Ge,g as jt,h as vt,q as Qt,v as ze,y as Se}from"./chunk-EFOY37CC.js";import{c as F}from"./chunk-HMTT52FG.js";import{b as Xe,c as no}from"./chunk-GR7YC6C3.js";import{E as Ve,J as io,h as so,k as Jn}from"./chunk-O33H5V3V.js";import{Sa as pe,bc as mo,jb as ao,na as He,nc as qn,tb as $e}from"./chunk-COF7YKSN.js";import{A as d,K as M,o as Te}from"./chunk-VZKEX7KP.js";import{B as oo,I as ro,d as eo,e as to,o as Ze,q as Ie}from"./chunk-BJKBO23H.js";import{M as Ue,u as qt,va as kt}from"./chunk-XFTQD4B2.js";import{z as R}from"./chunk-ZFVABNQN.js";import{a as Ke}from"./chunk-4QGZDIBD.js";import{b as C}from"./chunk-73B6GL3S.js";import{f as c,o as r,q as n}from"./chunk-Y5OH3DDZ.js";r();n();var xt=c(C()),Er=c($()),Fr=c(le());r();n();var dt=c(C());var Dt=(0,dt.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:qe.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function oe(){return(0,dt.useContext)(Dt)}function Me(){let{signInfo:e}=oe();return e}function _t(){let{currencyId:e}=oe();return e}function se(){let{params:e}=oe();return e}function Rt(){let{feeData:e}=oe();return e}function Ct(){let{onFeeDataChange:e}=oe();return e}function re(){let e=Me(),{inscriptions:t}=se(),{inscriptionOutput:o}=Rt(),i=o||e?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:t.length,total:Q(i,t.length)}}function Ae(){let{feeData:e}=oe();return{fees:e.revealTxFees,totalFee:(e.revealTxFees||[]).reduce((t,o)=>ce(t,o),"0")}}function be(){let{feeData:e}=oe();return e.commitTxFee}function J(){let{feeData:{feeSelectedSat:e={}}}=oe(),{type:t}=e,o=Me(),i;return t===E.CUSTOM?i=e.satBytes:i=o?.[po[t]],{...e,satBytes:i||o?.normal||0}}function Ir(){let{feeData:e}=oe();return e.canTransferAmount}function hr(){let{lifecycle:e}=oe();return e}r();n();var Ar=c(C());function Qn(e,t){let o=te(t),[,i]=or({coinId:t,address:e,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Ar.useMemo)(()=>i||{},[i])}var br=Qn;function es({defaultFeeData:e,currencyId:t,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:u,...p}=o,l=(0,Er.useSelector)(Je),_=br(m,u),[x,g]=(0,xt.useState)(e||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:E.STANDARD},canTransferAmount:"0"}),N=(0,Fr.useMemoizedFn)((y,S)=>{g(A=>({...A,[y]:S}))});return xt.default.createElement(Dt.Provider,{value:{signInfo:_,currencyId:t??l.currencyId,params:{...p,netWorkCoinId:u,from:m,to:a||m},lifecycle:i,feeData:x,onFeeDataChange:N}},s)}var Ut=es;r();n();r();n();var v=c(C()),Qr=c(et()),bt=c(le());M();r();n();var Ee=c(C()),Ht=c(Ke());r();n();var De={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};var ts=({className:e,loading:t,slot:o={},children:i,footerActions:s,contentClassName:m})=>{let{header:a,footer:u,top:p}=o;return Ee.default.createElement(F.Container,{loading:t,className:(0,Ht.default)(De.root,e)},Ee.default.createElement(F.Box,{className:De["send-page-base-container__header"]},a),Ee.default.createElement(F.Box,{className:De["send-page-base-container__wrapper"]},p,Ee.default.createElement(F.Box,{className:De["send-page-base-container__inner-wrapper"]},Ee.default.createElement(F.Box,{className:(0,Ht.default)(De["send-page-base-container__content"],m)},i),!!s?.length&&Ee.default.createElement(fe.FooterActions,{usePortal:!0,placeholder:!0,renderNative:!0,buttonGroup:s}),u)))},gt=ts;r();n();var Wt=c(C());kt();r();n();var G=c(C());M();r();n();var Nr=c(C()),$t=c($());var Pr=(e,t)=>{let o=e.coinId,i=zo(o),s=(0,$t.useSelector)(Je),m=(0,$t.useSelector)(({metamask:p})=>p.currencies),a=(0,Nr.useMemo)(()=>t&&m?.find(p=>p.currencyId===t)||s,[t]),u=Q(i,a?.usdToThisRate);return Vo(Qt,p=>{let l=Qe(p,{symbol:e.symbol,precision:e.displayPrecision,isStableCoin:e.stableCoin}).value,_=_o(Q(p,u),{currencySign:a.symbol}).value;return`${l}(${_})`})};$e();var Br=({bytes:e,value:t,signInfo:o={},coinId:i,currencyId:s,onChange:m,supportDecimal:a})=>{let u=Xo(),{coin:p,baseCoin:l}=jo(i,!0),[_,x]=(0,G.useState)(t?.customSatBytes),g=Pr(l,s),N=d("extension_wallet_transaction_text_minute");(0,G.useEffect)(()=>{!_&&o?.normal&&x(o?.normal)},[o]);let y=(0,G.useCallback)(O=>{x(O)},[]),S=(0,G.useCallback)(()=>{m?.({customSatBytes:_,type:E.CUSTOM,satBytes:_})},[_]),A=p.localType===He?d("wallet_extension_transfer_unit_sat_b"):"",B=(0,G.useMemo)(()=>{let{min:O,mempoolMin:w}=o,P=w||O||0;return Ge(_,P)?d("extension_btc_minmum_alert_fee_lowerthan",{feerate:P}):""},[_,o]);return(0,G.useMemo)(()=>[E.SLOW,E.STANDARD,E.FAST,E.CUSTOM].map(O=>{switch(O){case E.SLOW:return{data:{type:E.SLOW,satBytes:o.min,estimatedTime:`${Se(o.maxCost)} ${N}`},unitPrice:`${o.min} ${A}`,totalPrice:g(Q(o.min,e),s),type:d(je[E.SLOW]),typeKey:E.SLOW,estimatedTime:`${Se(o.maxCost)} ${N}`};case E.STANDARD:return{data:{type:E.STANDARD,satBytes:o.normal,estimatedTime:`${Se(o.normalCost)} ${N}`},unitPrice:`${o.normal} ${A}`,totalPrice:g(Q(o.normal,e),s),type:d(je[E.STANDARD]),typeKey:E.STANDARD,estimatedTime:`${Se(o.normalCost)} ${N}`};case E.FAST:return{data:{type:E.FAST,satBytes:o.max,estimatedTime:`${Se(o.minCost)} ${N}`},unitPrice:`${o.max} ${A}`,totalPrice:g(Q(o.max,e),s),type:d(je[E.FAST]),typeKey:E.FAST,estimatedTime:`${Se(o.minCost)} ${N}`};default:return{unitPrice:`${o.max} ${A}`,totalPrice:g(Q(_,e),s),estimatedTime:u(o,_),canConfirm:!B,onConfirm:S,components:()=>G.default.createElement(Ie.Number,{enableMinus:!1,precision:a?1:0,error:B,errorType:Ie.TIP_TYPE.always,onChange:y,value:_,size:Ie.SIZE.sm,title:A,className:"custom-network-fee__satb"})}}}),[e,o,_,a])};var os=({value:e,coinId:t,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:u,supportDecimal:p})=>{let l=Br({bytes:o,value:e,coinId:t,onChange:s,signInfo:i,currencyId:m,supportDecimal:p});return Wt.default.createElement(Zo,{feeType:e?.type,feeDataList:l?.slice(0,3),onBack:a,visible:u,custom:qt(l),onChange:({data:_})=>{s?.(_)}})},Or=Wt.default.memo(os);$e();r();n();var ie=c(C());$e();M();var wr=c(le());r();n();var L=c(C());M();r();n();var Fe={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var yt=330,Tt=1e4,rs=({coinId:e,visible:t,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,u]=(0,L.useState)(String(o));(0,L.useEffect)(()=>{u(String(o))},[o]),(0,L.useEffect)(()=>{t&&u(String(o))},[o,t]);let p=ke(e,a,{currencyId:i,useApproximate:!1});return L.default.createElement(Ze.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:t,onClose:s,title:d("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},L.default.createElement(F.Box,{className:Fe["output-panel__content"]},L.default.createElement(Ie.Number,{precision:0,value:a,max:Tt,min:yt,size:Ie.SIZE.xl,onChange:l=>{u(l)},suffix:L.default.createElement(I.Text,{size:I.SIZE.sm},"sats")}),L.default.createElement(I.Text,{className:Fe["output-panel__compare"],type:I.TYPE.secondary,size:I.SIZE.sm},p),L.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},L.default.createElement(oo,{value:a,min:yt,max:Tt,contentClassName:Fe["output-panel-slider__content"],onChange:l=>{u(String(l))}}),L.default.createElement(F.FlexBox,{justify:"space-between"},L.default.createElement(I.Text,{type:I.TYPE.secondary,size:I.SIZE.xs},`${yt} sats`),L.default.createElement(I.Text,{type:I.TYPE.secondary,size:I.SIZE.xs},`${Tt} sats`)))),L.default.createElement(F.Box,{className:Fe["output-panel__button"]},L.default.createElement(R,{disabled:!a||!a?.trim(),category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,yt),Tt)),s?.()}},d("extension_transactions_btn_confirm"))))},kr=rs;var ns=({txType:e,currencyId:t,inscriptionsCount:o,inscriptionOutput:i,coinId:s=pe,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[u,{toggle:p}]=(0,wr.useBoolean)(!1),l=Te.gt(m,0)?m:"0",_=ke(s,l,{currencyId:t,useApproximate:!0}),x=(0,ie.useMemo)(()=>uo(e),[e]);return ie.default.createElement(ie.default.Fragment,null,ie.default.createElement(de,{clickable:e===k.RUNES_ETCH?!1:void 0,onClick:()=>{Te.gt(i,0)&&p()},title:d(x)},ie.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&ie.default.createElement(I.Text,{className:Fe["output-tag"]},"x",o),_)),ie.default.createElement(kr,{coinId:s,visible:u,currencyId:t,outputValue:i,onClose:p,onChange:a}))},vr=ns;r();n();var St=c(C());M();var ss=({coinId:e,currencyId:t,totalCoinAmount:o})=>{let i=te(e),s=ke(e,o,{currencyId:t,useApproximate:!0});return St.default.createElement(de,{title:d("extension_wallet_transaction_item_inscribe_totalfee")},St.default.createElement(I.Text,{inherit:!0,strong:700},St.default.createElement(I.DisplayAmount,{noStyle:!0,mode:I.CRYPTO,symbol:i?.symbol,decimals:i?.decimals,precision:i?.displayPrecision,isStableCoin:i?.stableCoin},o),s))},Lr=ss;r();n();var Ur=c(C()),Hr=c(et()),$r=c(le()),Wr=c(jn());M();r();n();M();r();n();var Mr=c(C());kt();$e();no();io();function is({walletId:e,utxoType:t=1,coinId:o=pe}={}){let i=tt();return(0,Mr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:u})=>{let p={address:s,coinAmount:m,serviceCharge:a,utxoType:t};Ue(u);let l={coinId:o,utxoRequests:[p]};try{let{data:_}=await Ve(Xe.getBTCUTXO,l,{walletSignParams:{needWalletSign:!0,walletId:e||i}});return _?.[0]||{}}catch(_){return{error:!0,errorResp:_}}},[o,i,t,e])}var It=is;$e();r();n();var Dr=c(C());function as(e){let{inscriptionOutput:t}=re(),{satBytes:o}=J(),{walletId:i,from:s,to:m,inscriptions:a,txType:u,mintType:p}=se(),l=fr(e),_=dr();return(0,Dr.useCallback)(async x=>{let g={};return u===k.RUNES_ETCH?(g={input:x.map(({txHash:S,vout:A,coinAmount:B})=>({vOut:A,txId:S,amount:B})),address:s,feePerB:o,outValue:t,inscriptions:(a||[]).map(({body:S})=>JSON.parse(S))},await _({walletId:i,address:s,tx:g,txType:u,mintType:p})):(g={commitTxPrevOutputList:x.map(({txHash:y,vout:S,coinAmount:A})=>({vOut:S,txId:y,amount:A})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:y,body:S})=>({contentType:y,body:S})),revealOutValue:t,changeAddress:s,toAddr:m},await l({walletId:i,address:s,tx:g,txType:u}))},[s,m,a,t,o])}var ht=as;function ms(e=pe){let{walletId:t,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:u,mintType:p}=se(),l=Me(),_=_t(),x=lr({address:o,coinId:e,currencyId:_,txType:a,protocolId:u}),g=ht(lt.CONFIRM),N=It({walletId:t,utxoType:s,coinId:e}),{beforePostTx:y}=hr(),{inscriptionOutput:S,total:A}=re(),{totalFee:B}=Ae(),O=be(),{satBytes:w}=J(),P=async T=>{let{commitTx:h,revealTxs:b,commitAddrs:D,commitTxFee:K,revealTxFees:ne}=await g(T.utxoList||[]),Z=await Jo(He,h),me=await qo(He,b),xe=[Z,...me],ge={signedTx:h,fromAdr:o,serviceCharge:K,toAdr:i||o,itemId:"commitTx",txHash:Z,txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:t},ue=b.map((Oe,V)=>({signedTx:Oe,fromAdr:D?.[V]||o,serviceCharge:ne?.[V],toAdr:i||o,itemId:`revealTx${V}`,txHash:me[V],dependTx:p===qe.serial?[xe[V]]:[Z],txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:t})),ye=!1;return y&&(ye=y(ge,ue)),ye?{commitParams:ge,revealParams:ue,commitTx:h,revealTxs:b,commitAddrs:D,commitTxFee:K,revealTxFees:ne,feeRate:parseInt(w,10),size:parseInt(S,10)}:{txIds:await lo({txList:[ge,...ue]},{walletSignParams:{needWalletSign:!0,walletId:t}}),commitTx:h,revealTxs:b,commitAddrs:D,commitTxFee:K,revealTxFees:ne,feeRate:parseInt(w,10),size:parseInt(S,10)}},j=async()=>{let T=await N({from:o,coinAmount:ce(A,B),serviceCharge:O,feeRate:w}),h=T.utxoList||[];return await x(h,()=>{}),await P(T)};return()=>new Promise((T,h)=>{if(typeof l?.txSizeLimit=="number"&&m.length>l.txSizeLimit){let b=Ze.warn({alignBottom:!1,maskClosable:!1,title:d("wallet_header_dialog_header_reminder"),text:d("wallet_info_dialog_too_much_inscription"),confirmText:d("wallet_btn_dialog_btn_cancel"),cancelText:d("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let D=await j();T(D)}catch(D){h(D)}b.destroy()},onConfirm:()=>{h(new Error(mt)),b.destroy()}})}else(async()=>{try{let b=await j();T(b)}catch(b){h(b)}})()})}var Rr=ms;var us=e=>e?.data?.msg||e?.msg||e?.data?.originalError?.msg||d("wallet_home_toast_network_error"),cs=(e,t)=>!t&&[ee.BALANCE_INSUFFICIENT,ee.FEE_BALANCE_INSUFFICIENT].includes(e),ps=({txId:e,coinId:t,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:u,addressType:p,useTipMessageFillUp:l,onFillUp:_,netWorkCoinId:x,addressCheckLoading:g=!1},N)=>{let y=(0,Hr.useHistory)(),S=Rr(x),A=tr(o,a),B=(0,$r.useMemoizedFn)(async()=>{try{await A();let T=await S();m&&await m(T)}catch(T){if(!(T?.message===mt)){let b=us(T);ro.error({title:b})}}},[m]),{loading:O,onClick:w}=We(B),{loading:P,onClick:j}=We(a);return(0,Ur.useMemo)(()=>{let T=a?{loading:P,actionType:W.ACTION_TYPE.CANCEL,onClick:j}:null,h={loading:O||g,disabled:u,actionType:W.ACTION_TYPE.CONFIRM,onClick:w};return cs(N,i)&&(T=T||{actionType:W.ACTION_TYPE.CANCEL,onClick:()=>{y.goBack()}},l?h={actionType:W.ACTION_TYPE.CONFIRM,btnText:d("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let b=Wr.default.stringify({addressType:p,coinId:t},{skipEmptyString:!0,skipNull:!0}),D=b?`?${b}`:"";y.push(yo+D)}}:h={txId:e,coinId:t,address:s,walletId:o,actionType:W.ACTION_TYPE.FILL_UP}),[T,h]},[a,P,j,O,u,w,i,N,l,y,_,p,t,e,s,o])},Yr=ps;r();n();M();r();n();var Gr=c(C());function zr(){let{totalFee:e}=Ae(),{satBytes:t}=J();return ze(wt(e,t),0)}function Kr(){let e=be(),{satBytes:t}=J();return ze(wt(e,t),0)}function Zr(){let{totalFee:e}=Ae(),t=be();return(0,Gr.useMemo)(()=>ce(e,t),[e,t])}r();n();r();n();var Ne=c(C());function ls(e){let{disabled:t=!1}=e||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=se(),[a,u]=(0,Ne.useState)(!0),[p,l]=(0,Ne.useState)(!0),[_,x]=(0,Ne.useState)(null),[g,N]=(0,Ne.useState)([]),y=It({walletId:o,utxoType:s,coinId:m}),S=ht(lt.CAL_FEE),{satBytes:A}=J(),{total:B}=re(),O=Ct(),{totalFee:w}=Ae(),P=be();return(0,Ne.useEffect)(()=>{!t&&(async()=>{if(!jt(B,0))try{l(!0);let T=await y({from:i,coinAmount:ce(B,w),serviceCharge:P,feeRate:A});if(!T?.utxoList?.length){x(Y.BALANCE_NOT_ENOUGH);return}if(T.error){let D=T.errorResp.code,K=Y.COMMON_ERROR;[Y.BALANCE_NOT_ENOUGH,Y.PURE_UTXO_NOT_ENOUGH].includes(D)&&(K=D),x(K);return}O("canTransferAmount",T.canTransferAmount||"0"),x(null);let{commitTxFee:h,revealTxFees:b}=await S(T.utxoList);N(T.utxoList),O("commitTxFee",h),O("revealTxFees",b)}catch{x(Y.COMMON_ERROR),O("commitTxFee","0"),O("revealTxFees",[])}finally{u(!1),l(!1)}})()},[i,A,B,w,P,S,t]),{isInitLoading:a,isLoading:p,error:_,utxoList:g}}var Xr=ls;function fs(e){let{disabled:t=!1}=e||{},o=Zr(),{total:i}=re(),s=Ir(),m=Rt(),{isInitLoading:a,isLoading:u,error:p,utxoList:l}=Xr({disabled:t});return{isInitLoading:a,isLoading:u,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:l}}var At=fs;var ds=()=>{let{utxoList:e,fee:t,error:o,canTransferAmount:i,isLoading:s}=At(),m=Me(),a=Kr(),u=zr(),p=Te.add(a,u),l=J(),_=Ct();return{bytes:p,signInfo:m,feeError:o,selectedSat:l,feeLoading:s,networkFee:t,canTransferAmount:i,utxoListCount:e?.length||0,onFeeDataChange:_}},Vr=ds;r();n();var qr=c(C());M();r();n();var _s=[k.BRC20_DEPLOY,k.BRC20_MINT,k.BRC20_INSCRIBE,k.ORDINAL_NFT,k.ORDINAL_TEXT,k.EARN_BRC30_DEPLOY,k.EARN_BRC30_APPLY,k.EARN_BRC30_REDEEM,k.EARN_BRC30_CLAIM,k.BRC30_INSCRIBE,k.RUNES_ETCH];function Jr(e){return _s.indexOf(e)>-1}var Cs=({txType:e,feeError:t,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a,addressCheckError:u=""})=>(0,qr.useMemo)(()=>Jr(e)?i&&e===k.RUNES_ETCH?{type:_e.TIP_TYPE.COMMON_ERROR,message:d("extension_defi_bot_alert_mpc_not_support")}:o?{type:_e.TIP_TYPE.COMMON_ERROR,message:d("wallet_extension_top_toast_dapp_comingsoon")}:t===Y.COMMON_ERROR?{type:_e.TIP_TYPE.FEE_ERROR}:t===Y.BALANCE_NOT_ENOUGH?{type:ft.FEE_BALANCE_INSUFFICIENT,message:d("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:t===Y.PURE_UTXO_NOT_ENOUGH?{type:ft.BALANCE_INSUFFICIENT,message:d("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:ft.BALANCE_INSUFFICIENT}:u?{type:_e.TIP_TYPE.COMMON_ERROR,message:u}:{message:m}:{type:_e.TIP_TYPE.COMMON_ERROR,message:d("extension_defi_bot_alert_wallet_upgrade")},[e,t,o,i,s,m,u]),jr=Cs;r();n();var Yt={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function xs({txId:e,headerProps:t={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=pe}){let{from:m,walletId:a,txType:u}=se(),p=Wo(a),l=$o(a),[_,{toggle:x}]=(0,bt.useBoolean)(!1),g=_t(),y=Go()[m],{bytes:S,signInfo:A,feeError:B,selectedSat:O,feeLoading:w,networkFee:P,canTransferAmount:j,utxoListCount:T,onFeeDataChange:h}=Vr(),{title:b,...D}=t,{inscriptionOutput:K,inscriptionsCount:ne,total:Z}=re(),me=(0,v.useMemo)(()=>Te.add(P,Z),[P,Z]),xe=te(s),{showManageUTXO:ge}=Sr(xe||{},y,!0),ue=ge&&B!==Y.PURE_UTXO_NOT_ENOUGH,ye=(0,Qr.useHistory)(),{addressCheckLoading:X,addressCheckError:Oe}=Tr({from:m,chainIndex:xe?.chainId||ao,handleCancel:i?.onCancel||(()=>{ye.goBack()}),method:co.INSCRIBE}),{type:V,message:zn}=jr({txType:u,feeError:B,feeLoading:w,utxoListCount:T,isHardware:p,isMpcWallet:l,canTransferAmount:j,networkFee:P,totalUsedCoinAmount:me,coin:xe,addressCheckError:Oe}),Kn=Yr({txId:e,walletId:a,coinId:s,addressType:y,disabled:!!V||!!B||!!w||p||T>100||!!Oe,useTipMessageFillUp:ue,netWorkCoinId:s,addressCheckLoading:X,...i},V),Jt=gr(a),Zn=(0,bt.useMemoizedFn)(Ot=>{h("commitTxFee","0"),h("revealTxFees",[]),h("inscriptionOutput",Ot)},[]),{top:Xn,footer:Vn}=o;return v.default.createElement(gt,{slot:{header:v.default.createElement(ot,{title:b||d("extension_wallet_header_maintitle_inscribe"),...D}),footer:Vn||v.default.createElement(fe,{placeholder:!0,offsetBottom:0},v.default.createElement("div",{className:Yt.actions},v.default.createElement(_e,{type:V||eo.TYPE.warn,address:m,message:zn,coinId:s,walletId:a,fillUpAble:ue}),v.default.createElement(W,{buttonGroup:Kn})))}},Xn,v.default.createElement(he,null,v.default.createElement(de,{title:d("wallet_info_title_inscribe_service_fee")},v.default.createElement(I.Text,{className:Yt["free-tag"]},d("wallet_info_tag_inscribe_free_tag"))),v.default.createElement(Cr,{coinId:s,loading:w,currencyId:g,networkFee:w&&P==="0"?void 0:P,estimateFailed:!w&&!Number(P),onClick:()=>{x?.(),Jt({trade:"brc20",all_confirmation:"network_fee"})}}),v.default.createElement(vr,{txType:u,currencyId:g,inscriptionsCount:ne,inscriptionOutput:K,totalInscriptionCoinAmount:Z,onInscriptionOutputChange:Zn,coinId:s})),v.default.createElement(he,null,v.default.createElement(Lr,{coinId:s,currencyId:g,totalCoinAmount:me})),v.default.createElement(he,{bordered:!1},v.default.createElement(_r,{address:m,walletId:a,title:d("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Jt({trade:"brc20",all_confirmation:"wallet_used_address"})}})),v.default.createElement(Or,{bytes:S,currencyId:g,value:O,coinId:s,onClose:x,signInfo:A,visible:_,onChange:Ot=>{h("commitTxFee","0"),h("revealTxFees",[]),h("feeSelectedSat",Ot)},supportDecimal:!0}))}var Gt=xs;r();n();var Ce=c(C());M();r();n();var H=c(C()),Re=c($()),Fn=c(Ke());kt();M();r();n();var tn=c(C()),on=c(et()),rn=c(Ke());r();n();var en={root:"_root_ryl3e_1"};function gs({onBack:e,onClose:t,pageIndex:o,...i}){let s=(0,on.useHistory)(),m=()=>{e&&e(),s.goBack()},a=()=>{t&&t(),s.go(-o)};return tn.default.createElement(ot,{className:(0,rn.default)(en.root,i.className),onClose:a,onBack:m,...i})}var nn=gs;r();n();var zt=c($()),sn=c(et()),an=c(le());Jn();function ys(e){let t=(0,sn.useHistory)(),o=(0,zt.useSelector)(Io),i=we(),{coin:s}=U(),m=(0,zt.useSelector)(ho),a=nr();(0,an.useMount)(()=>{if(!!e){if(so(s))t.replace(o||Co);else if(!m){let u={pathname:`${xo}/${i}${go}`};a&&(u.search=`?from=${a}`),t.replace(u)}}})}var mn=ys;r();n();var xn=c(C()),gn=c($());r();n();var Pe=c(C());M();r();n();var fn=c(C()),dn=c($());r();n();var ae=c(C()),cn=c(le()),pn=c(Ke());M();r();n();var un={root:"_root_26a1b_1"};var Ts=({coin:e={},onVisible:t,receiveOnly:o,address:i,style:s,className:m})=>{let[a,{setTrue:u,setFalse:p}]=(0,cn.useBoolean)();(0,ae.useEffect)(()=>{t&&t(a)},[a]);let l=e?.symbol??"",_=l.length>12?`${l.slice(0,12)}...`:l;return ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:(0,pn.default)(un.root,m),onClick:u,style:s},d("wallet_extension_placeorder_textbtn_replenish",{token:_})),ae.default.createElement(er,{address:i,visible:a,closeCallback:p,coinId:e.coinId,receiveOnly:o}))},ln=(0,ae.memo)(Ts);function Ss(e){let t=(0,dn.useDispatch)(),o=Le();return fn.default.createElement(ln,{address:o,...e,onVisible:s=>{t(Ro(s))}})}var Kt=Ss;var Is=()=>{let{coin:e}=U(),t=rt();return i=>{let s="";return i.text?s=i.text:i.key&&(s=d(i?.key,i?.args)),i?.type===ee.BALANCE_INSUFFICIENT?Pe.default.createElement(Pe.default.Fragment,null,s," ",Pe.default.createElement(Kt,{coin:e,receiveOnly:!0})):i?.type===ee.FEE_BALANCE_INSUFFICIENT?Pe.default.createElement(Pe.default.Fragment,null,s," ",Pe.default.createElement(Kt,{coin:t})):s}},_n=Is;r();n();var Cn={root:"_root_g697e_1"};function hs({renderError:e}){let t=(0,gn.useSelector)(Ao),o=_n(),i=e||o;if(!t.key)return null;let s=i(t);return xn.default.createElement("div",{className:Cn.root},s)}var yn=hs;r();n();var q=c(C());M();r();n();var As=(e,t)=>{let{coin:o}=U(),i=cr(),s=ct(),m=pt(),u={total:i,amount:s,available:m}[e];return`${Qe(t||u,{precision:o?.displayPrecision,isStableCoin:o?.stableCoin,useLargeNumberPrecision:!0}).value} ${o.symbol}`},Tn=As;r();n();var Be={container:"_container_1l0en_1",skeleton:"_skeleton_1l0en_5",totalAmount:"_totalAmount_1l0en_9","totalAmount-content":"_totalAmount-content_1l0en_13",totalAmountContent:"_totalAmount-content_1l0en_13","totalAmount-title":"_totalAmount-title_1l0en_22",totalAmountTitle:"_totalAmount-title_1l0en_22","totalAmount-amount":"_totalAmount-amount_1l0en_29",totalAmountAmount:"_totalAmount-amount_1l0en_29"};function bs(e){let t=e;t||(t="");let o=t?.length;return o<=20?"15px":o<=22?"14px":o<=24?"13px":"12px"}function Es({type:e="total",title:t,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},loading:u=!1,...p}){let{coin:l}=U(),_=Tn(e,i),{bottom:x}=a;return q.default.createElement(F.Box,{className:Be.container},u?q.default.createElement(to.Input,{active:!0,className:Be.skeleton}):q.default.createElement(q.default.Fragment,null,q.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Be.totalAmount,...p},q.default.createElement(Mt,{size:Mt.SIZE.lg,src:l?.image,text:l?.symbol}),q.default.createElement(F.Box,{className:Be["totalAmount-content"]},q.default.createElement(I.Text,{type:I.TYPE.secondary,size:I.SIZE.xs,className:Be["totalAmount-title"]},t||d("wallet_extension_send_item_total_amount")),q.default.createElement(I.Text,{ellipsis:{tooltip:!0},className:Be["totalAmount-amount"],style:{fontSize:bs(_)}},_)),!s&&q.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.gray,size:R.SIZE.xs,onClick:m},o||d("wallet_extension_send_text_max"))),x))}var Sn=Es;r();n();var Fs=()=>{let e=pt();return Ge(e,0)&&(e="0"),e},In=Fs;r();n();r();n();var Ns=()=>0,hn=Ns;var An=hn;r();n();var bn=c(le());M();var Ps=({loading:e,disabled:t,onClick:o,...i})=>(0,bn.useCreation)(()=>{let s=!t&&e;return[{onClick:o,disabled:t,size:R.SIZE.lg,loading:s,type:R.TYPE.highlight,category:R.CATEGORY.fill,"data-testid":Yo.SEND_PAGE.SEND_AMOUNT_CONFIRM_BUTTON,btnText:d("wallet_extension_send_btn_continue"),...i}]},[t,e,o,i]),Bs=({disabled:e,onClick:t,...o})=>{let i=ur(),s=ut();return Ps({...o,disabled:e||s,onClick:t||i})},En=Bs;r();n();var Zt={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function Os({isGlobalLoading:e,renderError:t,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:u={},checkEmpty:p=!0,inputAmount:l,customMaxAmount:_,footerActions:x}){let g=(0,Re.useDispatch)(),{content:N}=u,{header:y,bottom:S,footer:A}=a,B=(0,H.useRef)(null),O=(0,Re.useSelector)(No),w=we(),P=ve(),j=(0,Re.useSelector)(bo),T=(0,Re.useSelector)(Fo),h=st(),b=sr(),D=In(),K=_||D,{amount:ne}=yr(),Z=(0,H.useRef)(!!P),me=X=>{g(Lo(X))},xe=()=>{g(Lt(K)),me(!0)},ge=m.onMax||xe;mn(p),(0,H.useEffect)(()=>{Ue(l)||B.current?.setInputAmount(l.toString()),Ue(ne)||B.current?.setInputAmount(ne)},[l,ne]);let ue=En(i),ye=An();return H.default.createElement(gt,{loading:e,footerActions:!e&&!A?x||ue:void 0,slot:{header:y||H.default.createElement(nn,{title:d("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:!e&&A}},H.default.createElement("div",{className:(0,Fn.default)(N,Zt.content)},H.default.createElement(Qo,{ref:B,...s,autoFocus:!O,coinId:w,maximumMode:b,maximumAmount:b?K:null,initialValue:{value:[P||"0",j||"0"],mode:T,flatCurrencyId:h},onAmountChange:([X,Oe],V)=>{g(Oo(Oe)),g(Lt(X)),V&&(me(!1),Z.current=!0)},onModeChnage:X=>{g(ko(X))},onFlatChange:X=>{X&&g(Mo(X.currencyId))}}),Z.current&&H.default.createElement(yn,{renderError:t}),H.default.createElement(fe,{usePortal:!0,offsetBottom:m?.fixBottom?80-ye:104-ye,className:Zt.totalAmountWrap},H.default.createElement(Sn,{...m,onMax:()=>{ge(),Z.current=!0}})),S))}var Nn=Os;r();n();var On=c(C()),kn=c($());qn();r();n();var Pn=c(C());function ks(){let{coin:e}=U(),t=ve();return(0,Pn.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:e.symbol,amt:t})}],[e.symbol,t])}var Bn=ks;function ws({walletId:e,txSource:t,children:o}){let i=Bn(),s=st(),m=nt(),{coin:a}=U(),u=rt(),p=Le(),l=tt(),_=k.BRC20_INSCRIBE,x=(0,kn.useSelector)(To),g=(y,S)=>{y.coinAmount=m,y.coinId=S?u.coinId:a.coinId,y.txSource=t||mo.NORMAL},N=(y,S)=>{y&&g(y,!0),Array.isArray(S)&&S.forEach(A=>{g(A,!1)})};return On.default.createElement(Ut,{defaultFeeData:x,currencyId:s,params:{walletId:e||l,from:p,inscriptions:i,utxoType:pr.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:N}},o)}var Et=ws;r();n();var Ye=c(C());var wn=c($());function vs(){let e=(0,wn.useDispatch)(),{isInitLoading:t,error:o,fee:i,feeData:s,canTransferAmount:m}=At();return(0,Ye.useEffect)(()=>{e(Ho(m))},[m]),(0,Ye.useEffect)(()=>{e(wo(i))},[i]),(0,Ye.useEffect)(()=>{e(So(s))},[s]),(0,Ye.useEffect)(()=>{e(vo(!!o))},[o]),t}var Ft=vs;r();n();var vn=c(C());var Ln=c($());function Xt(){let e=ct();return(0,vn.useCallback)(t=>vt(t,e)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:ee.COMMON_ERROR}:null,[e])}function Ls(){let e=(0,Ln.useDispatch)(),t=ir(),o=Xt(),i=[t,o],{runErrorFns:s}=at(i);it(s,m=>{e(Bo(m))})}var Mn=Ls;r();n();var Dn=c($()),Nt=c(C());io();no();function Ms(){let e=(0,Dn.useDispatch)(),t=Le(),{coin:o}=U(),[i,s]=(0,Nt.useState)(!0);return(0,Nt.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Ve(Xe.postPendingBalanceDetail,{address:t,coinId:o.coinId});a?.data&&e(Uo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[t,o.coinId]),i}var Rn=Ms;function Ds({amount:e,onCancel:t,onConfirm:o,slot:i,...s}){let m=ut(),a=Ft(),u=Rn(),{loading:p,onClick:l}=We(t),_=(0,Ce.useMemo)(()=>{let x=null;return typeof t=="function"&&(x={loading:p,actionType:W.ACTION_TYPE.CANCEL,onClick:l}),[x,{actionType:W.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:d("wallet_extension_send_btn_continue")}]},[t,o,m,a,p,l]);return Mn(),Ce.default.createElement(Nn,{...s,inputAmount:e,isGlobalLoading:u,slot:{...i||{},footer:Ce.default.createElement(fe,{usePortal:!0,placeholder:!0,offsetBottom:0},Ce.default.createElement(W,{buttonGroup:_}))},checkEmpty:!1,headerProps:{title:d("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:d("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Rs({walletId:e,...t}){return Ce.default.createElement(Et,{walletId:e},Ce.default.createElement(Ds,{...t}))}var sf=Rs;r();n();var z=c(C()),Yn=c($());M();r();n();var Pt=c(C()),Hn=c(le());M();r();n();var Un={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Us=({coinId:e,amount:t})=>{let o=te(e),{loading:i,data:s}=(0,Hn.useRequest)(async()=>{let m={op:"transfer",amount:t,tick:o.symbol};return(await fo(m))?.brcJson||""});return Pt.default.createElement(de,{title:d("extension_wallet_transaction_item_inscribe_preview")},Pt.default.createElement(F.Spin,{loading:i},Pt.default.createElement(I.Text,{className:Un["preview-json"]},s)))},$n=Us;r();n();var Vt=c(C()),Bt=c($());function Hs(e){let t=(0,Bt.useSelector)(Eo);return(0,Vt.useCallback)(()=>t?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:e?.chainName},type:ee.FEE_BALANCE_INSUFFICIENT}:null,[t,e])}function $s(){let e=Xt();return(0,Vt.useCallback)(t=>{let o=e(t);return o?{...o,highlight:ar.AMOUNT}:null},[e])}function Ws(e,t){let o=(0,Bt.useDispatch)(),i=te(t),s=Hs(i),m=mr(),a=$s(),u=[s,m,a],{runErrorFns:p}=at(u);it(p,l=>{o(Do(l))},e)}var Wn=Ws;function Ys({headerProps:e={},onCancel:t,onConfirm:o,walletId:i,addressCheckRet:s={}}){let m=(0,Yn.useDispatch)(),a=ve(),u=we(),[,p]=Ko(u),l=nt(),_=Ft(),x=(0,z.useCallback)(async()=>{await m(Po(!1))},[m]);return Wn(_,u),z.default.createElement(Gt,{addressCheckRet:s,walletId:i,slot:{top:z.default.createElement(z.default.Fragment,null,z.default.createElement(he,null,z.default.createElement(xr,{summaryList:[{coinId:u,coinAmount:l}],title:d("extension_wallet_transaction_item_inscribe")})),z.default.createElement(he,null,z.default.createElement($n,{coinId:u,amount:a})))},headerProps:e,confirmButtonProps:{onCancel:t,onConfirm:o,onFillUp:x},netWorkCoinId:p?.coinId})}function Gs({txSource:e,walletId:t,...o}){return z.default.createElement(Et,{txSource:e,walletId:t},z.default.createElement(Ys,{walletId:t,...o}))}var Zf=Gs;r();n();var Gn=c(C());function zs({children:e,...t}){return Gn.default.createElement(rr.Provider,{value:t},e)}var jf=zs;export{gt as a,nn as b,mn as c,Kt as d,Ps as e,Nn as f,It as g,Or as h,se as i,Gt as j,Ut as k,sf as l,Zf as m,jf as n};
//# sourceMappingURL=chunk-A7W3UWEW.js.map
