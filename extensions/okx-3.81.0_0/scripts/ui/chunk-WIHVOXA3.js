import{a as re}from"./chunk-QNQLOUVT.js";import{a as se,b as ie,c as ce}from"./chunk-32IFYA56.js";import{a as ae}from"./chunk-ZZ5BEB5E.js";import{a as ee}from"./chunk-T4CFY3IH.js";import{p as ne,q as te}from"./chunk-6PSK4535.js";import{a as oe}from"./chunk-PONOZOFT.js";import{r as $}from"./chunk-2VUOGSTW.js";import{d as Z}from"./chunk-BNS5ABAB.js";import{d as Y}from"./chunk-ZDHJHPQ5.js";import{a as Pe}from"./chunk-GOYCZBSH.js";import{c as X}from"./chunk-EBRJSEEJ.js";import{K}from"./chunk-WU2LB6XB.js";import{e as Q}from"./chunk-3QLLFUC4.js";import{d as J,i as A,j as z}from"./chunk-EFOY37CC.js";import{Pb as P,Sb as Fe}from"./chunk-COF7YKSN.js";import{A as j,K as Ae}from"./chunk-VZKEX7KP.js";import{M as h,f as _,va as L}from"./chunk-XFTQD4B2.js";import{b as he}from"./chunk-73B6GL3S.js";import{f as q,o as l,q as u}from"./chunk-Y5OH3DDZ.js";l();u();var n=q(he());L();Ae();Fe();l();u();L();l();u();l();u();var v=q(Pe());var ve=e=>{let o=e.transaction.raw_data||{contract:[{parameter:{value:{contract_address:""}}}]},a=e?.transaction?.raw_data_hex||"",{data:t="",amount:d=0,to_address:g,contract_address:T,call_value:m=0}=o.contract[0].parameter.value,b=o.contract[0].type,f=e?.transaction?.functionSelector,s=e?.transaction?.visible,x=m||d,p=T,r=T||g;try{p=v.default.address.fromHex(p),r=v.default.address.fromHex(r)}catch{}return{data:t,callValue:m,finalAmount:x,contractAddress:p,finalAddress:r,tronHexData:a,txType:b,functionSelector:f,visible:s}},I=ve;var ye=({coinId:e,params:o,walletAccount:a})=>{let{data:t,callValue:d,finalAmount:g,contractAddress:T,functionSelector:m,visible:b}=I(o),{loading:f,trxFee:s=0,error:x}=$({coinId:e,address:a.address,inputData:t,toAddr:T,value:g,functionSelector:m,visible:b},!0),{isOffline:p=!1}=o,r=ee(e,a.walletId)||{},{coinAmountInt:i}=r,w=X({coinId:e}),S=p||h(i)||A(i,s),c=!0;return z(d,0)||(c=h(i)||A(J(i,s),d)),{loading:f,networkFee:s,networkFeeProps:{coinId:e,loading:f,estimateFailed:x,networkFee:f?void 0:s,network:w},isSufficientGas:S,estimateFailed:x,isSufficientBalance:c,coinWithBalance:r}},le=ye;var De=({isInvalidTriggerSmartContract:e})=>()=>e?{message:j("wallet_extension_confirmation_toast_not_compatible"),level:950}:null,Be=({isOffline:e,extraData:o,shouldSend:a,networkFee:t})=>e?{...o,serviceCharge:t}:a?{serviceCharge:t}:{},ue=(0,n.memo)(e=>{let{source:o,id:a,params:t,localType:d,walletId:g,method:T=K.SIGN_TRANSACTION,origin:m,onCancel:b=_,onConfirm:f=_,backable:s=!1,onBack:x,asPage:p}=e,r=o==="dapp",{extraData:i,isOffline:w=!1,extParams:S}=t||{},c=Z(P)||{},y=c?.coinId||P,{contractAddress:de,txType:me}=I(t),C=oe({walletId:g,localType:d}),{initialType:D}=C,[fe,pe]=(0,n.useState)({}),ge=ae({origin:m}),B=S?.shouldSend,{networkFee:k,networkFeeProps:Te,isSufficientGas:W,estimateFailed:O,isSufficientBalance:U,loading:N,coinWithBalance:E}=le({coinId:y,params:t,walletAccount:C}),H=me==="TriggerSmartContract"&&!de,xe=se({id:a,walletId:g,origin:m,localType:d}),be=(0,n.useMemo)(()=>Be({isOffline:w,extraData:i,shouldSend:B,networkFee:k}),[i,w,B,k]),Ce=ie({id:a,extraParams:be}),G=async()=>{await f({networkFee:k})},R=b;r&&(G=Ce,R=xe);let{buttonGroup:we,handleCancel:Ie}=ce({feeLoading:N,isSufficientGas:W,isSufficientBalance:U,estimateFailed:O,onCancel:R,onConfirm:G,coinWithBalance:E,preExecInfo:fe,chainConfirmDisabled:H||Q(D)}),M=re({initialType:D}),V=De({isInvalidTriggerSmartContract:H}),Se=(0,n.useMemo)(()=>[M(),V()].filter(Boolean),[M,V]),ke=(0,n.useMemo)(()=>({dappData:JSON.stringify(t?.transaction||{}),from:C.address,dappInfo:r?ge:{},chainIndex:c?.chainId,method:T}),[c?.chainId,C.address]),_e={txId:a,baseCoin:c,estimateFailed:O,isSufficientGas:W,isSufficientBalance:U,coinWithBalance:E};return n.default.createElement(n.default.Fragment,null,n.default.createElement(Y,{title:"",noContent:!0,onBack:x,asPage:p,closeable:!1,backable:s}),n.default.createElement(te,{loading:N,txType:ne.signTransaction,chainHeaderTips:Se,preExecParams:ke,handleCancel:Ie,buttonGroup:we,txState:_e,localType:c?.localType,networkFeeProps:Te,walletAccount:C,onUpdatePreExecInfo:pe}))});ue.displayName="SignTransaction";var mn=ue;export{mn as a};
//# sourceMappingURL=chunk-WIHVOXA3.js.map
