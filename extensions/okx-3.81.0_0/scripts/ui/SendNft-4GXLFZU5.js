import{a as en}from"./chunk-ONYNK2VM.js";import{a as Xo}from"./chunk-LFKA2PUG.js";import{a as qo}from"./chunk-7Y4QHWXE.js";import{a as Pt,b as Qo}from"./chunk-X43IZLHQ.js";import"./chunk-OJWYRJWY.js";import{a as tn}from"./chunk-WEBT7OC4.js";import"./chunk-7IP3VPVS.js";import"./chunk-M3OTLMUB.js";import"./chunk-WRGSQF3V.js";import"./chunk-ELHHHA5F.js";import{a as Jo}from"./chunk-MK5QRIIU.js";import{e as $o}from"./chunk-WD3IVQAU.js";import"./chunk-JVF7GJB3.js";import"./chunk-QKPPTYDW.js";import"./chunk-KPUXAS7Z.js";import{a as Uo,d as it}from"./chunk-IN42FW4K.js";import{e as jo}from"./chunk-PQQFVOPL.js";import"./chunk-WST3WRLT.js";import{a as Ho}from"./chunk-I4EML244.js";import"./chunk-TJIPZMF7.js";import"./chunk-57D6LCV2.js";import"./chunk-KQ6OPOXD.js";import"./chunk-X7ACMHNF.js";import"./chunk-DEJA7CK3.js";import{a as Oo,b as Oe,d as Yo}from"./chunk-LS6URCUV.js";import"./chunk-XDEC3ZLT.js";import"./chunk-RGPNT5G7.js";import"./chunk-OQUE64GQ.js";import"./chunk-AQ4KTATJ.js";import{B as ft,b as mt}from"./chunk-Q7DF5H6O.js";import"./chunk-G23O242T.js";import"./chunk-AQO2BBXJ.js";import{b as Ko,c as zo,d as Ro,f as Zo}from"./chunk-GWMNMJND.js";import{q as Vo}from"./chunk-2VUOGSTW.js";import"./chunk-P4PGYDTS.js";import{a as _t}from"./chunk-S7VT2TWF.js";import"./chunk-HBNZZZEG.js";import"./chunk-3W4MTHFJ.js";import"./chunk-L2MGED7F.js";import{d as Wo,f as st,g as Mo}from"./chunk-BNS5ABAB.js";import"./chunk-UFGJXE4D.js";import"./chunk-7QX2TXNH.js";import{d as Bo}from"./chunk-ZDHJHPQ5.js";import"./chunk-DFPRATON.js";import"./chunk-WY5R5HAR.js";import{a as ke}from"./chunk-2L6CHWW2.js";import"./chunk-GTQ5U6DA.js";import"./chunk-TE6AOABI.js";import"./chunk-63UDTGAT.js";import"./chunk-AZ2KZKVQ.js";import"./chunk-VCDDTW7H.js";import"./chunk-UULU72LG.js";import"./chunk-3MTWCI34.js";import"./chunk-E6XUX33V.js";import"./chunk-VTMJYROY.js";import"./chunk-ARK47WR5.js";import"./chunk-BEIWULHW.js";import"./chunk-DOCYQV54.js";import"./chunk-6T3CLU73.js";import"./chunk-STXPU7A6.js";import"./chunk-PFSPFZNW.js";import"./chunk-2JC6L37N.js";import"./chunk-BF6TFHGA.js";import"./chunk-57F7LIJM.js";import"./chunk-7OXXN2FT.js";import"./chunk-RK7WST36.js";import"./chunk-7Q4IDC7V.js";import"./chunk-F57QKCZQ.js";import"./chunk-HIVYZXF3.js";import"./chunk-JALTSNOZ.js";import"./chunk-4Y52FA3V.js";import"./chunk-B6WLGAPL.js";import"./chunk-ZYYACLV7.js";import"./chunk-TQMC5UQS.js";import"./chunk-ANWN6BF6.js";import"./chunk-XNP3OGQC.js";import"./chunk-A2QIZMPL.js";import"./chunk-HKU7TMFJ.js";import"./chunk-YTR7GLCK.js";import"./chunk-7I4OPLNV.js";import"./chunk-J3UBL564.js";import"./chunk-YMYQJ726.js";import"./chunk-FGRS6VIX.js";import"./chunk-INIQCRIO.js";import"./chunk-2P6PTKAN.js";import"./chunk-ZFBXO46L.js";import"./chunk-6Z5HVUBK.js";import"./chunk-ZBDGRK4Q.js";import"./chunk-XIYYKWE3.js";import"./chunk-GN2NRAOV.js";import"./chunk-SFFRTMXL.js";import"./chunk-RLY3NWVP.js";import"./chunk-U3KULTRT.js";import"./chunk-55T2IW2N.js";import"./chunk-WVUOJIBP.js";import"./chunk-JBROAQ6E.js";import"./chunk-LBCITKCK.js";import"./chunk-O4O5AL3V.js";import"./chunk-I56NHY6E.js";import{l as Se}from"./chunk-P3S4ES3J.js";import"./chunk-VEPTXEII.js";import"./chunk-A5U7X3LN.js";import"./chunk-TF4QEXO7.js";import"./chunk-CHMHYYPI.js";import"./chunk-GDQAWT2G.js";import"./chunk-QJ36ZOFH.js";import"./chunk-7HYQ2DGP.js";import"./chunk-G7XOYBNH.js";import{e as Go}from"./chunk-JHO7RU36.js";import{p as Io}from"./chunk-UOWKDFTX.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import{j as at}from"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{b as Co,n as ho,o as No,p as To,u as vo,y as kt}from"./chunk-3ZKJXYZ4.js";import"./chunk-SOSR34AP.js";import"./chunk-EBRJSEEJ.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import{Ha as Ao}from"./chunk-MSFAPAHB.js";import"./chunk-33XRMYWN.js";import"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import{b as Be,c as ko,d as Fo,e as Ft,f as W,g as k,h as ne,i as re,j as ot,k as Po,l as Ie,m as nt,n as Eo}from"./chunk-DK5VLY7L.js";import{a as xe,c as bo}from"./chunk-VUHYFIVA.js";import"./chunk-DZGSODSZ.js";import"./chunk-QRAFULYC.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-4W7LQOP5.js";import"./chunk-CIVR4FUI.js";import"./chunk-H7WHTGUY.js";import"./chunk-44SDMU5C.js";import{a as Lo}from"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import{b as se}from"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{a as U,o as et,p as tt}from"./chunk-GCS2RK7E.js";import"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as Qe,g as br}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as oe}from"./chunk-Z62JX42S.js";import{C as q,F as co,H as qe,Na as E,aa as Te,ga as po,ja as ve,la as Xe}from"./chunk-2QHGKEME.js";import"./chunk-HAHRUU64.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as ae}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import{a as Ae,b as X}from"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import{$ as yo,_ as wo,e as uo,n as xo,s as go,u as ue}from"./chunk-WU2LB6XB.js";import"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import{c as So,e as Ir}from"./chunk-EN2WHAVL.js";import{h as be}from"./chunk-CP2RIMI2.js";import"./chunk-3QLLFUC4.js";import{a as de,b as ze,c as St,g as At,h as Rt,i as Zt,l as jt,p as Ge,r as Jt,z as qt}from"./chunk-EFOY37CC.js";import{c as Do}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import{a as rt}from"./chunk-E4OV5WXB.js";import{b as Le,c as eo}from"./chunk-GR7YC6C3.js";import{B as oo,C as no,E as ro,J as ao}from"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import{k as to,n as Ar}from"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Db as Ze,Jb as _o,Lb as fo,Nb as lo,Ob as Ne,Qb as J,Sb as je,Ta as io,bc as te,kb as mo,nc as Je,ra as so,tb as bt}from"./chunk-COF7YKSN.js";import{A as i,K as Y,o as zt}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{A as It,H as O,d as Re,q as pe}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-Q3GADXEN.js";import"./chunk-AHVVUOFF.js";import"./chunk-JLNZTUPO.js";import"./chunk-MSZOM4GC.js";import"./chunk-BYVN72KS.js";import"./chunk-ZUJLXC72.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-DIZF7D6Q.js";import"./chunk-JHCCLVAB.js";import"./chunk-W7AONC6R.js";import"./chunk-FOOC6LB7.js";import"./chunk-SEAUBLKM.js";import"./chunk-UP4BZFYG.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{t as Xt,u as Qt,z as T}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as j}from"./chunk-4QGZDIBD.js";import{b as A}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-FYJQM2AY.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-PDRHBICP.js";import"./chunk-Z2AIGJGI.js";import"./chunk-SLQQVCPY.js";import"./chunk-ZRVP4J67.js";import"./chunk-YSKQ76UN.js";import"./chunk-A3W4ZDEQ.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as m,o as a,q as s}from"./chunk-Y5OH3DDZ.js";a();s();var Ct=m(A()),ye=m(ae()),cr=m(oe());var dr=m(E());a();s();var Ue=m(A()),un=m(E()),xn=m(ae()),gn=m(oe());Y();a();s();var Me=m(A()),on=m(E());a();s();var We={"metax-send-nft-page":"_metax-send-nft-page_1fw24_1",metaxSendNftPage:"_metax-send-nft-page_1fw24_1","metax-send-nft-page-content":"_metax-send-nft-page-content_1fw24_9",metaxSendNftPageContent:"_metax-send-nft-page-content_1fw24_9","metax-send-nft-page-content-main":"_metax-send-nft-page-content-main_1fw24_17",metaxSendNftPageContentMain:"_metax-send-nft-page-content-main_1fw24_17"};var kr=({title:e="",children:t,onBack:o=null,onClose:n=null,nav:r=null,loading:_,pageName:l})=>{let f=(0,on.useSelector)(k);return Me.default.createElement(Do.Container,{loading:_,className:`${We.metaxSendNftPage} main-container ${l==="confirmDetail"&&f?.chain==0?"metax-send-btc-page":""}`},!r&&Me.default.createElement(Bo,{title:e,onClose:n,onBack:o,closeable:!!n,className:l==="confirmDetail"&&f?.chain==0?"metax-send-btc-page-nav":""}),r,Me.default.createElement("div",{className:`${We.metaxSendNftPageContent} ${l==="confirmDetail"&&f?.chain==0?We.metaxSendBtcContent:""}`},f&&Me.default.createElement("div",{className:We.metaxSendNftPageContentMain},t)))},lt=kr;a();s();var V=m(A()),ct=m(E()),Dt=m(oe());Y();a();s();je();var nn=async(e,t,o)=>{let n="",{coinId:r,baseCoinId:_}=o;return e?((r===Ne||_===Ne)&&!await zo(e)||(qe({coinId:r})||qe({coinId:_}))&&!(await Ro(e)).isValid||(r===J||_===J)&&!await Ko(e)||o.coinId!==Ne&&o.coinId!==J&&!qe(o)&&!Zo(e,{allowNonPrefixed:!1}))&&(n="wallet_manage_crypto_errortip_invalid_address_tips"):n="wallet_transfer_errortip_receive_address_empty",n},rn=({amount:e,balance:t,t:o})=>e==="0"?o("wallet_extension_nft_toast_input_amount_no0"):e?e>t?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:t}):"":o("wallet_extension_nft_toast_input_transfer_amount");a();s();var B=m(A()),ln=m(ae()),cn=m(j());Y();a();s();var Et=m(A());var Fr=({disabled:e=!1,buttonText:t,nextJump:o=()=>{}})=>{let n=()=>{e||o&&o()};return Et.default.createElement(se.FooterActions,{usePortal:!0},Et.default.createElement(T,{block:!0,category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,onClick:n,disabled:e},t))},an=Fr;a();s();var M={"metax-send-nft-form--hidden":"_metax-send-nft-form--hidden_od7wm_1",metaxSendNftFormHidden:"_metax-send-nft-form--hidden_od7wm_1","metax-send-nft-form__alert":"_metax-send-nft-form__alert_od7wm_4",metaxSendNftFormAlert:"_metax-send-nft-form__alert_od7wm_4","metax-send-nft-form__row":"_metax-send-nft-form__row_od7wm_7",metaxSendNftFormRow:"_metax-send-nft-form__row_od7wm_7","metax-send-nft-form__row__max":"_metax-send-nft-form__row__max_od7wm_10",metaxSendNftFormRowMax:"_metax-send-nft-form__row__max_od7wm_10","metax-send-nft-form__row__tip":"_metax-send-nft-form__row__tip_od7wm_16",metaxSendNftFormRowTip:"_metax-send-nft-form__row__tip_od7wm_16","metax-send-nft-form__row__max-amount":"_metax-send-nft-form__row__max-amount_od7wm_23",metaxSendNftFormRowMaxAmount:"_metax-send-nft-form__row__max-amount_od7wm_23","metax-send-nft-form__row__btn-max":"_metax-send-nft-form__row__btn-max_od7wm_29",metaxSendNftFormRowBtnMax:"_metax-send-nft-form__row__btn-max_od7wm_29","metax-send-nft-form__row__content":"_metax-send-nft-form__row__content_od7wm_42",metaxSendNftFormRowContent:"_metax-send-nft-form__row__content_od7wm_42","metax-send-nft-form__row__content--pointer":"_metax-send-nft-form__row__content--pointer_od7wm_51",metaxSendNftFormRowContentPointer:"_metax-send-nft-form__row__content--pointer_od7wm_51","metax-send-nft-form__row__content__title":"_metax-send-nft-form__row__content__title_od7wm_55",metaxSendNftFormRowContentTitle:"_metax-send-nft-form__row__content__title_od7wm_55","metax-send-nft-form__row__content__center":"_metax-send-nft-form__row__content__center_od7wm_60",metaxSendNftFormRowContentCenter:"_metax-send-nft-form__row__content__center_od7wm_60","metax-send-nft-form__row__content__narrow":"_metax-send-nft-form__row__content__narrow_od7wm_70",metaxSendNftFormRowContentNarrow:"_metax-send-nft-form__row__content__narrow_od7wm_70","metax-send-nft-form__waring__tips":"_metax-send-nft-form__waring__tips_od7wm_75",metaxSendNftFormWaringTips:"_metax-send-nft-form__waring__tips_od7wm_75"};a();s();var sn=m(A()),mn=m(E()),_n=m(oe());bt();eo();ao();var Pr=0,Er=()=>{let{chain:e,tokenId:t,accountAddress:o,tokenStandard:n}=(0,mn.useSelector)(k),{loading:r,data:_,error:l}=(0,_n.useRequest)(async()=>{let c={chain:e,walletAddress:o,inscriptionIds:[t],tokenStandard:bo[n]},{data:d}=await ro(Le.postBtcNftStatus,c);return d?.assetStatusList||[]},{ready:e===Pr&&[xe.Ordinals,xe.ATOMICAL].includes(n)||e===mo&&[xe.FractalOrdinals].includes(n)}),f=(0,sn.useMemo)(()=>[xe.ATOMICAL,xe.Ordinals,xe.FractalOrdinals].includes(n)&&_?.some(({unavailable:c})=>Number(c)===1)?1:0,[_,n]);return[r,f,l]},fn=Er;var Dr=({nftBalance:e,nftInfo:t,amount:o,toAddress:n="",toError:r,amountError:_,onAmountChange:l,onToAddressChange:f,showAmount:c,onLoadingChange:d,tipMessage:y})=>{let[p,h,N]=fn(),C=(0,ln.useHistory)(),P=()=>{C.replace(tt)};(0,B.useEffect)(()=>{d?.(p)},[p]);let I=(0,B.useMemo)(()=>N?i("extension_wallet_header_alert_nft_check_error"):h===1?i("extension_wallet_header_alert_utxo_limit_arc"):null,[N,h]);return B.default.createElement("div",{className:(0,cn.default)(M["metax-send-nft-form"])},(h||N)&&B.default.createElement(Re,{closable:!1,type:N?Re.TYPE.error:Re.TYPE.warn,className:M["metax-send-nft-form__alert"],title:I}),B.default.createElement("div",{className:M["metax-send-nft-form__row"]},B.default.createElement(pe.TextArea,{className:M["metax-send-nft-form__address"],inputClassName:M["metax-send-nft-form__address-input"],placeholder:i("wallet_extension_transaction_placeholder_input_address",{},{useBr:!1}),label:i("wallet_transfer_subtitle_receive_address"),value:n,error:r?i(r):"",disabled:!!h||p,size:pe.SIZE.xl,errorType:pe.TIP_TYPE.always,onChange:f,tips:y||i("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),c&&B.default.createElement("div",{className:M["metax-send-nft-form__row"]},B.default.createElement(pe.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:i("wallet_contract_interactiom_subtitle_amount"),size:pe.SIZE.xl,precision:0,enableMinus:!1,value:o,error:_||"",errorType:pe.TIP_TYPE.always,onChange:l}),B.default.createElement("div",{className:M["metax-send-nft-form__row__max"]},B.default.createElement("span",{className:M["metax-send-nft-form__row__max-amount"]},i("wallet_extension_nft_toast_owned"),":",e),B.default.createElement("span",{onClick:()=>{l(`${t.totalBalance||0}`)},className:M["metax-send-nft-form__row__btn-max"]},i("wallet_transfer_btn_max_balance_amount")))),B.default.createElement(an,{nextJump:P,buttonText:i("wallet_transfer_btn_next"),disabled:!n||r||h||c&&(!o||_)}))},dn=Dr;function Gr(e){let t=Wo(void 0,void 0,{key:e.nftInfo.baseCoinKey}),o=(0,ct.useSelector)(nt),[n,r]=(0,V.useState)(null),[_,l]=(0,V.useState)(null),{run:f}=(0,Dt.useDebounceFn)(async(N,C)=>{!t||(N.toLowerCase()===C.toLowerCase()&&l(V.default.createElement("div",{className:M["metax-send-nft-form__waring"]},V.default.createElement("span",{className:M["metax-send-nft-form__waring__tips"]},i("wallet_extension_mid_textarea_same_address")))),r(await nn(N,C,t)))},{wait:200}),[c,d]=(0,V.useState)(null),{run:y}=(0,Dt.useDebounceFn)((N,C)=>{d(rn({amount:N,balance:C,t:i}))},{wait:200}),p=(0,V.useCallback)(N=>{e.setToAddress(N.target.value),f(N.target.value,e.fromAddress)},[e.fromAddress,f]),h=(0,V.useCallback)(N=>{let C=N.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");e.setAmount(C),y(C,e.nftBalance)},[e.nftBalance,y]);return V.default.createElement(dn,{...e,toError:n,tipMessage:_,amountError:c,showAmount:o,onToAddressChange:p,onAmountChange:h})}function Lr(e){return{amount:e.nftSend.amount,toAddress:e.nftSend.toAddress,fromAddress:e.nftSend.nftInfo?.accountAddress,nftInfo:e.nftSend.nftInfo,nftBalance:e.nftSend.nftInfo?.totalBalance}}function Br(e){return{setToAddress:t=>e(Be.setToAddress(t)),setAmount:t=>e(Be.setAmount(t))}}var pn=(0,ct.connect)(Lr,Br)(Gr);var Or=()=>{let e=(0,un.useDispatch)(),t=(0,xn.useHistory)(),[o,{set:n}]=(0,gn.useBoolean)(!1),r=(0,Ue.useCallback)(()=>{e(Be.resetSend()),t.goBack()},[t]);return Ue.default.createElement(lt,{onBack:r,loading:o,title:i("wallet_home_btn_send")},Ue.default.createElement(pn,{onLoadingChange:n}))},wn=Or;a();s();var $e=m(A()),_r=m(E()),fr=m(ae());Y();a();s();var Ve=m(A()),ir=m(E());je();bt();a();s();var S=m(A()),Fe=m(E()),Dn=m(ae()),Lt=m(j());Y();a();s();Je();je();eo();ao();Ir();var Wr=e=>{let t=Te(e),r=(po(e)?.account||{})[Ze]||"";return{walletId:t,address:r}},Mr=async e=>{let t={coinId:J,fromAddr:e.fromAddress,toAddr:e.toAddress},{info:o={}}=await Co(t),{sequenceNumber:n,chainId:r,expirationTimestampSecs:_,gasUnitPrice:l}=o;return{sequenceNumber:n,chainId:r,expirationTimestampSecs:_,gasUnitPrice:l,maxGasAmount:8e3}},Ur=e=>async t=>{let{signedTx:o,sequenceNumber:n,fromAddress:r,toAddress:_,gasUnitPrice:l,maxGasAmount:f,amount:c}=e,d={nonce:n},y=de(l,f),p={signedTx:o,coinId:J,fromAdr:r,toAdr:_,serviceCharge:y,extJson:JSON.stringify(d),coinAmount:jt(c),txSource:te.NFT};return await t(qo(p))},Gt=e=>async(t,o)=>{let n=o(),{address:r}=Wr(n),{type:_,maxGasAmount:l,gasUnitPrice:f,fromAddress:c,toAddress:d,receiver:y,sender:p,creator:h,collectionName:N,tokenName:C,version:P,amount:I}=e,x=await Mr({fromAddress:c,toAddress:d,address:r});l&&(x.maxGasAmount=l),f&&(x.gasUnitPrice=f);let D={};_===ue.OFFER_NFT||_===ue.OFFER_NFT_SIMULATE?(D.receiver=y,D.amount=I):D.sender=p;let b={type:_,base:x,data:{...D,creator:h,collectionName:N,tokenName:C,version:P}},G=await So().signTransaction(b,r,Ze);return{base:x,signedTx:G}},yn=e=>async t=>{let{fromAddress:o,toAddress:n,amount:r}=e,{base:_,signedTx:l}=await t(Gt(e)),f=await mt(Ze,l);return{txId:await t(Ur({..._,signedTx:l,fromAddress:o,toAddress:n,amount:r})),txHash:f}},Cn=async(e={},t)=>{let o;try{o=await vo(t)}catch{o=e.maxGasAmount||2e3}let{gasUnitPrice:n}=e,r=de(n,o);return{gasUnitPrice:n,maxGasAmount:o,fee:r}},hn=e=>async t=>{let{base:o,signedTx:n}=await t(Gt({...e,type:ue.OFFER_NFT_SIMULATE}));return Cn(o,n)},Nn=e=>async t=>{let{base:o,signedTx:n}=await t(Gt({...e,type:ue.CLAIM_NFT_SIMULATE}));return Cn(o,n)},Tn=e=>async t=>t(yn({...e,type:ue.OFFER_NFT})),vn=e=>async t=>t(yn({...e,type:ue.CLAIM_NFT})),Sn=async(e,t,o,n)=>{let r=_o({coinId:n})||{},_=Le.getAptosResourceType.replace("{rpcUrl}",r.rpcUrl),l=Le.getAptosTable.replace("{rpcUrl}",r.rpcUrl),{data:{data:{token_data:{handle:f}}}}=await oo(_.replace("{creator}",e)),{data:c}=await no(l.replace("{handle}",f),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:e,collection:t,name:o}});return c.largest_property_version};a();s();var An=m(E());var Hr=(e,t)=>Uo((r,_)=>ze(r,10**_?.decimals),qt)(e,t),dt=(e,t={})=>Qe(e,{symbol:t?.symbol,useContractPrecision:!0,contractPrecision:{decimals:t?.decimals},precision:t?.displayPrecision}).value,pt=(e,t={})=>{let o=(0,An.useSelector)(Xe),n=at(t?.coinId),r=Hr(e,t);return it({amount:r,rate:n,symbol:o.symbol},{useApproximate:!0})};a();s();var ie=m(A()),In=m(j()),bn=m(br());Y();a();s();var He={"metax-send-nft-confirm":"_metax-send-nft-confirm_1ihik_1",metaxSendNftConfirm:"_metax-send-nft-confirm_1ihik_1","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_1ihik_10",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_1ihik_10","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_1ihik_14",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_1ihik_14","confirm-transaction--copy":"_confirm-transaction--copy_1ihik_19",confirmTransactionCopy:"_confirm-transaction--copy_1ihik_19"};var L=({label:e,value:t,valueDisplay:o,canCopy:n})=>{let r=(0,ie.useCallback)(()=>{(0,bn.default)(t),O.success({title:i("wallet_transaction_history_toast_address_copied"),desc:t,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:O.DIRECTION.top})},[t]);return ie.default.createElement("div",{className:He["metax-send-nft-confirm"]},ie.default.createElement("div",{className:He["metax-send-nft-confirm__label"]},e),ie.default.createElement("div",{className:He["metax-send-nft-confirm__value"],onClick:n?r:void 0},ie.default.createElement(Ho,{text:o,maxWidth:"215px"}),n&&ie.default.createElement("span",{className:(0,In.default)("okx-wallet-plugin-copy",He["confirm-transaction--copy"])})))};a();s();var u={"retina-border-basic":"_retina-border-basic_xpies_1",retinaBorderBasic:"_retina-border-basic_xpies_1","metax-send-nft-detail__base--container":"_metax-send-nft-detail__base--container_xpies_29",metaxSendNftDetailBaseContainer:"_metax-send-nft-detail__base--container_xpies_29","metax-send-nft-detail__name-container":"_metax-send-nft-detail__name-container_xpies_35",metaxSendNftDetailNameContainer:"_metax-send-nft-detail__name-container_xpies_35","metax-send-nft-detail__name":"_metax-send-nft-detail__name_xpies_35",metaxSendNftDetailName:"_metax-send-nft-detail__name_xpies_35","metax-send-nft-detail__hr":"_metax-send-nft-detail__hr_xpies_54",metaxSendNftDetailHr:"_metax-send-nft-detail__hr_xpies_54","metax-send-nft-detail__error":"_metax-send-nft-detail__error_xpies_89",metaxSendNftDetailError:"_metax-send-nft-detail__error_xpies_89","add-weight":"_add-weight_xpies_102",addWeight:"_add-weight_xpies_102","metax-send-nft-detail__icon":"_metax-send-nft-detail__icon_xpies_102",metaxSendNftDetailIcon:"_metax-send-nft-detail__icon_xpies_102","metax-send-nft-confirm":"_metax-send-nft-confirm_xpies_109",metaxSendNftConfirm:"_metax-send-nft-confirm_xpies_109","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_xpies_118",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_xpies_118","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_xpies_122",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_xpies_122","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_xpies_127",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_xpies_127","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_xpies_132",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_xpies_132","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_xpies_127",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_xpies_127"};a();s();var kn=m(A()),Fn=m(E()),Pn=m(oe());var En=(e,t)=>{let o=(0,Fn.useDispatch)(),[n,r]=(0,kn.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return(0,Pn.useMount)(()=>{(async()=>{r({...n,loading:!0}),e.version=await Sn(e.creator,e.collectionName,e.tokenName,e.coinId);let{gasUnitPrice:l,maxGasAmount:f,fee:c}=t?await o(Nn(e)):await o(hn(e));r({aptosFee:c,gasUnitPrice:l,maxGasAmount:f,loading:!1,version:e.version})})()}),n};var Yr=()=>{let e=(0,Fe.useDispatch)(),{creatorAddress:t,name:o,projectName:n,accountAddress:r,baseCoinId:_,image:l,chainName:f,claim:c}=(0,Fe.useSelector)(k),d=(0,Dn.useHistory)(),{name:y,keyringName:p}=(0,Fe.useSelector)(ve),{toAddress:h,amount:N=1}=(0,Fe.useSelector)(ne),{baseCoin:C,coin:P}=_t(_,!0),I=c?{fromAddress:r,toAddress:h,sender:r,creator:t,collectionName:n,tokenName:o,amount:N,coinId:P?.coinId}:{fromAddress:r,toAddress:h,receiver:h,creator:t,collectionName:n,tokenName:o,amount:N,coinId:P?.coinId},{aptosFee:x,gasUnitPrice:D,maxGasAmount:b,loading:G,version:K}=En(I,c),[_e,R]=(0,S.useState)(!1),Q=Vo(),Pe=dt(x,C),fe=Rt(Q,Jt(x)),Ee=pt(x,C),H=be({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:u["metax-send-nft-detail"]},S.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},S.default.createElement(ke,{src:l,startStatus:!0,alt:"nft",backupImage:H,classnames:(0,Lt.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),S.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},S.default.createElement("div",{className:u["metax-send-nft-detail__name"]},o))),S.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${p} - ${y}`}),S.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:q(r),canCopy:!0}),S.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:q(h),canCopy:!0}),S.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),S.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:f}),S.default.createElement("div",{className:(0,Lt.default)(u["metax-send-nft-confirm"])},S.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),S.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},G?S.default.createElement(Qt,null):S.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},S.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",Pe),S.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},Ee)))),!fe&&!G&&S.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip"))),S.default.createElement(se.FooterActions,null,S.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:()=>{e(W()),fe?d.goBack():d.replace(U)}},i("wallet_dapp_connection_btn_reject")),S.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,width:160,loading:_e,disabled:!fe||G,onClick:async()=>{try{R(!0),I.gasUnitPrice=D,I.maxGasAmount=b,I.version=K;let{txId:Z,txHash:Ce}=c?await e(vn(I)):await e(Tn(I));c?await kt(21,Ce,h):await kt(20,Ce,r),Se({tx_id:Z}),e(W()),O.success({title:i("wallet_transfer_notif_transaction_submit")}),d.replace(U)}catch{O.error({title:i("wallet_home_toast_network_error")})}finally{R(!1)}}},i("wallet_set_password_btn_confirm"))))},Gn=Yr;a();s();var Ln=m(A()),ut=m(E());var Bn=()=>{let{accountAddress:e,inscriptionIdProtocol:t,localType:o}=(0,ut.useSelector)(k),{toAddress:n}=(0,ut.useSelector)(ne),r=(0,ut.useSelector)(Te);return Ln.default.createElement(Xo,{unapproved:{walletId:r,params:{transfer:{from:e,to:n,data:t}},localType:o}})};a();s();var v=m(A()),z=m(E()),qn=m(ae()),Xn=m(j());Y();a();s();var Bt=m(E());function On(){let{baseCoinKey:e}=(0,Bt.useSelector)(k),o=st(void 0,void 0,{key:e})?.coinAmountInt,n=(0,Bt.useSelector)(re),{gasLimit:r,gasPrice:_,supportEip1559:l,maxFeePerGas:f,maxPriorityFeePerGas:c}=n;if(r==="0"||l&&(f==="0"||c==="0")||!l&&_==="0")return!1;let y=de(`${(l?f:_)||0}`,`${r||0}`);return Zt(`${o||0}`,y)}a();s();var xt=m(E());Je();je();function Wn(){let{contractAddress:e,accountAddress:t,baseCoinId:o,localType:n}=(0,xt.useSelector)(k),{gasLimit:r,gasPrice:_,maxFeePerGas:l,maxPriorityFeePerGas:f,supportEip1559:c}=(0,xt.useSelector)(Po),d=(0,xt.useSelector)(ot),y=Lo(),p=jo({walletId:y,fromAddr:t,coinId:o}),h=ft({coinId:o,fromAddr:t,toAddr:e,localType:n});return{send:async({nonce:N,updateGasInfo:C,activityId:P})=>{let I=fo(n)?.realChainIdHex,x={from:t,to:e,nonce:X(N),data:d,chainId:I,value:"0",gasLimit:X(r)};c?(x.type=xo.FEE_MARKET,x.maxFeePerGas=X(l),x.maxPriorityFeePerGas=X(f)):x.gasPrice=X(_),C&&(x.maxFeePerGas?(x.maxFeePerGas=X(C.maxFeePerGas),x.maxPriorityFeePerGas=X(C.maxPriorityFeePerGas)):x.gasPrice=X(C.gasPrice));let b={...co(x)};b.walletId=y,b.supportEip1559=c;let G=Ae(c?x.maxFeePerGas:x.gasPrice),K=Ae(x.gasLimit),_e={...x,value:Ae(x.value),from:x.from,to:x.to,gas:K,gasPrice:G,priorityFee:Ae(c?x.maxPriorityFeePerGas:0),nonce:Ae(x.nonce),repeatTxType:uo.CONFIRMING,oldTxHash:""},R={coinId:o,coinAmount:"0",fromAdr:x.from,toAdr:x.to,serviceCharge:de(K,G),extJson:JSON.stringify(_e),txSource:te.NFT,inputData:x.data?x.data:"",activityId:P},Q=await p(b);return{serverTxId:await h(Q,R)}}}}a();s();var F=m(A()),ge=m(E()),Zn=m(ae()),wt=m(oe()),jn=m(j());Y();a();s();a();s();var Un=m(A()),Hn=m(j());Y();a();s();var Mn={root:"_root_1leh0_1"};function Vr({className:e,style:t}){return Un.default.createElement("div",{className:(0,Hn.default)(Mn.root,e),style:t},i("wallet_extension_freegas_notif_networkfee_rebate"))}var Ot=Vr;a();s();var $n=m(A());a();s();var Yn={text:"_text_1qgtl_1"};function $r({status:e}){return e!==4?null:$n.default.createElement(Ot,{className:Yn.text})}var Wt=$r;a();s();var Kn=m(A()),zn=m(j());a();s();var me={"retina-border-basic":"_retina-border-basic_tetol_1",retinaBorderBasic:"_retina-border-basic_tetol_1",root:"_root_tetol_29",render:"_render_tetol_67",iconWrapper:"_iconWrapper_tetol_71",icon:"_icon_tetol_71",error:"_error_tetol_81"};function Kr({className:e,children:t,error:o}){return Kn.default.createElement("div",{className:(0,zn.default)(me.root,e,{[me.error]:o})},t)}var Mt=Kr;a();s();var Ye=m(A()),Ut=m(j());Y();function zr({className:e,status:t,tip:o,activity:n}){if(t!==3&&t!==4||!o)return null;let{gas:r,totalTimes:_}=n,{text:l,key:f,args:c,error:d}=o,y=l||i(f,c||{}),p;return f===Oe.availableTimesLimit?p=i("wallet_extension_freegas_tooltip_5refund_day",{num:_}):f===Oe.exceedGasLimit?p=i("wallet_extension_freegas_tooltip_under_10u",{num:r}):f===Oe.exceedTodayGasLimit?p=i("wallet_extension_freegas_tooltip_paused_rules"):f===Oe.walletAssetNotEnough&&(p=i("wallet_extension_freegas_notif_greater_than10",{num:_})),p&&(y=Ye.default.createElement("div",{className:me.iconWrapper},y,Ye.default.createElement(It,{title:p,trigger:It.TRIGGER.hover},Ye.default.createElement(Xt,{className:(0,Ut.default)("okx-wallet-plugin-information-circle",me.icon,{[me.error]:d})})))),Ye.default.createElement(Mt,{className:(0,Ut.default)(me.render,e),error:d},y)}var Ht=zr;a();s();var gt=m(E());var Rn=()=>{let e=(0,gt.useSelector)(Ie),t=(0,gt.useSelector)(re),{baseCoin:o}=_t(e,!0),{networkFee:n}=t,r=(0,gt.useSelector)(Xe),_=Qe(Ge(n),{symbol:o.symbol,isStableCoin:o.stableCoin,precision:o.displayPrecision}).value,l=at(o.coinId),f=it({amount:Ge(n),rate:l,symbol:r.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:_,gasFeeToCurrencyDisplay:f}};a();s();var $={arrow:"_arrow_166pr_1",gasReturnTip:"_gasReturnTip_166pr_6","metax-send-nft-confirm":"_metax-send-nft-confirm_166pr_9",metaxSendNftConfirm:"_metax-send-nft-confirm_166pr_9","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_166pr_18",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_166pr_18","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_166pr_22",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_166pr_22","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_166pr_27",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_166pr_27","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_166pr_32",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_166pr_32","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_166pr_27",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_166pr_27","metax-send-nft-confirm__value__narrow":"_metax-send-nft-confirm__value__narrow_166pr_41",metaxSendNftConfirmValueNarrow:"_metax-send-nft-confirm__value__narrow_166pr_41"};function Rr(){let e=(0,ge.useSelector)(re),t=Pt(),{status:o}=t,{gasType:n}=e,r=yo[n],_=r?i(r):"",{gasFeeToETHDisplay:l,gasFeeToCurrencyDisplay:f}=Rn();return o===4?F.default.createElement(F.default.Fragment,null,F.default.createElement(Wt,{status:o}),F.default.createElement("div",{className:$["metax-send-nft-confirm__value__content"]},_,"\xA0",l)):F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:$["metax-send-nft-confirm__value__title"]},_,"\xA0",l),F.default.createElement("div",{className:$["metax-send-nft-confirm__value__content"]},f))}var Jn=()=>{let e=(0,ge.useDispatch)(),t=(0,Zn.useHistory)(),{accountAddress:o,contractAddress:n}=(0,ge.useSelector)(k),r=(0,ge.useSelector)(Ie),_=(0,ge.useSelector)(ot),[l,{setTrue:f,setFalse:c}]=(0,wt.useBoolean)(!1),d=Pt(),y=(0,wt.useMemoizedFn)(h=>{e(ko(h))}),p=()=>{e(W()),t.push(U)};return F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:$["metax-send-nft-confirm"]},F.default.createElement("div",{className:$["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),F.default.createElement("div",{className:$["metax-send-nft-confirm__value"],onClick:f},F.default.createElement("div",{className:$["metax-send-nft-confirm__value__content-wrapper"]},F.default.createElement(Rr,null)),F.default.createElement("div",{className:$["metax-send-nft-confirm__value__narrow"]},F.default.createElement("span",{className:(0,jn.default)("okx-wallet-plugin-right",$.arrow)}))),F.default.createElement($o,{visible:l,coinId:r,address:o,inputData:_,tokenAddress:n,value:"0",onBack:c,onClose:p,onGasChange:y,gasReturn:d})),F.default.createElement(Ht,{className:$.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var Zr=()=>{let e=(0,z.useDispatch)(),t=(0,z.useSelector)(Eo),{accountAddress:o,baseCoinId:n,image:r,name:_,chainName:l}=(0,z.useSelector)(k),f=On(),c=(0,qn.useHistory)(),{name:d,keyringName:y}=(0,z.useSelector)(ve),p=(0,z.useSelector)(re),h=(0,z.useSelector)(Ie),[,N]=Mo(h),{toAddress:C,amount:P}=(0,z.useSelector)(ne),I=(0,z.useSelector)(nt),[x,D]=(0,v.useState)(!1),{send:b}=Wn(),G=Oo({coinId:h,txType:Yo.nft,fromAddress:o,toAddress:C,unavailable:p.gasType===wo.CUSTOM,fee:Ge(p.networkFee)}),K=G?.errorCode,_e=()=>{D(!0)},R=()=>{D(!1)},{gasPrice:Q}=p,fe={fetchParams:{coinId:h,from:o,to:C,amount:P,gasPrice:Q},userGasInfo:p,baseCoinAmountUse:"0"},Ee=(0,v.useMemo)(()=>I?zt.thousandFormat(P):"",[P,I]),H=(0,v.useCallback)(()=>{e(W()),f?c.goBack():c.replace(U)},[f]),Z=(0,v.useCallback)(async ht=>{let{nonce:Nt,updateGasInfo:Tt}=ht;try{let le=await b({nonce:Nt,updateGasInfo:Tt,activityId:G.activityId}),{serverTxId:De}=le||{};Se({tx_id:De}),O.success({title:i("wallet_transfer_notif_transaction_submit")}),e(W()),c.replace("/")}catch(le){let De=le?.data?.originalError?.code;tn(De)?(O.error({title:le?.data?.originalError.msg||i("wallet_home_toast_network_error")}),G.clear()):le.message!==rt&&O.error({title:i("wallet_home_toast_network_error")})}},[n,o,b]);(0,v.useEffect)(()=>{K===0&&typeof N?.chainId<"u"&&Ao({wallet_address:o,interactive_address:C,chain_id:N?.chainId,transaction_type:"send_nft"})},[K,N?.chainId]);let Ce=be({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return v.default.createElement(Qo,{gasReturn:G},v.default.createElement("div",{className:u["metax-send-nft-detail"]},v.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},v.default.createElement(ke,{src:r,alt:"nft",startStatus:!0,backupImage:Ce,classnames:(0,Xn.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),v.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},v.default.createElement("div",{className:u["metax-send-nft-detail__name"]},_))),v.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${y} - ${d}`}),v.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:q(o),canCopy:!0}),v.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:C,valueDisplay:q(C),canCopy:!0}),v.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),v.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:l}),v.default.createElement(Jn,null),!t&&!f&&v.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip")),I&&v.default.createElement(L,{label:i("wallet_extension_transaction_module_input_label_amount"),valueDisplay:Ee})),v.default.createElement(se.FooterActions,null,v.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:H},i("wallet_dapp_connection_btn_reject")),v.default.createElement(en,{dataForCheck:fe,onClick:Z,beforeClick:_e,afterClick:R,btnProps:{loading:x,width:160,disabled:t||!f}},i("wallet_set_password_btn_confirm"))))},Qn=Zr;a();s();var w=m(A()),we=m(E()),rr=m(ae()),ar=m(oe()),Vt=m(j());Y();a();s();var yt=m(A()),er=m(oe());var tr=(e={},t=!1,o=!1)=>{let[n,r]=(0,yt.useState)({}),[_,l]=(0,yt.useState)(!0),[f,c]=(0,yt.useState)(!1),d=n.fee;return(0,er.useMount)(()=>{(async()=>{try{let p=await ho(e);p?.fee&&r(p),l(!1)}catch{o&&(c(!0),l(!1))}})()}),t?{solanaFee:d,solanaFeeInfo:n,loading:_,error:f}:d};Ar();Je();a();s();var or=m(A());Je();bt();var Yt=({type:e,from:t,to:o,blockHash:n,coinAmount:r,mint:_,createAssociatedAddress:l,computeUnitPrice:f,computeUnitLimit:c,tokenStandard:d})=>{let y={type:e,payer:t,blockHash:n,from:t,to:o,amount:r,computeUnitPrice:f,computeUnitLimit:c},p;return e===go.TRANSFER?p={...y}:p={...y,mint:_,createAssociatedAddress:l},d&&(p.tokenStandard=d),p},nr=()=>{let e=ft({});return(0,or.useCallback)(async(t,{type:o,from:n,to:r,coinId:_,blockHash:l,coinAmount:f,mint:c=null,createAssociatedAddress:d,serviceCharge:y,computeUnitPrice:p,computeUnitLimit:h,txSource:N=te.NORMAL,extJson:C=JSON.stringify({}),walletId:P,tokenStandard:I})=>{let x=Yt({type:o,from:n,to:r,blockHash:l,coinAmount:f,mint:c,createAssociatedAddress:d,computeUnitPrice:p,computeUnitLimit:h,tokenStandard:I}),D=await t(Go(x,n,P)),b=await mt(so,D);return await e(D,{signedTx:D,coinAmount:f,coinId:_,fromAdr:n,toAdr:r,serviceCharge:y,txSource:N,extJson:C,txHash:b})},[e])};var jr={solNft:0,solCompressNft:1,solToken2022Nft:2,solCoreNft:3},Jr=()=>{let e=(0,we.useDispatch)(),t=(0,we.useSelector)(k),{tokenId:o,accountAddress:n,baseCoinId:r,image:_,name:l,chainName:f,extendProperty:c}=t,d=st(r),{chainId:y}=d,{solNftType:p,tokenStandard:h}=c||{},N=Jo(),C=(0,rr.useHistory)(),P=(0,w.useRef)(!1),I=(0,w.useRef)(),{name:x,keyringName:D}=(0,we.useSelector)(ve),{toAddress:b}=(0,we.useSelector)(ne),[G,{setTrue:K,setFalse:_e}]=(0,ar.useBoolean)(!0),[R,Q]=(0,w.useState)(""),[Pe,fe]=(0,w.useState)("0"),{loading:Ee,solanaFeeInfo:H}=tr({coinId:r,fromAddr:n},!0),Z=Ee||G,{fee:Ce,computeUnitPrice:ht,feelimit:Nt}=H,{priorityFee:Tt,priorityGasPrice:le,priorityGasLimit:De}=Io(Nt,ht,Pe),he=St(Ce,Tt),pr=pt(he,d),ur=dt(he,d),xr=(0,we.useSelector)(Te),[gr,$t]=(0,w.useState)(!1),wr=be({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Ke=(0,w.useMemo)(()=>p!==jr.solNft?{msg:i("wallet_extension_transfer_error_unsupported_nft_transfer"),isEnough:!0}:Z?{msg:"",isEnough:!1}:R?{msg:R,isEnough:!0}:At(d.coinAmountInt,he)?{msg:i("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:At(d.coinAmountInt,St(he,H.selfRent))?{msg:i("walletextension_toast_text_reserve_rent_exempt",{number:ze(H.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[Z,d.coinAmountInt,d.decimals,he,H.selfRent]),Kt=()=>{let ee={from:n,to:b,coinId:r,serviceCharge:he,computeUnitPrice:le,computeUnitLimit:De,txSource:te.NFT,coinAmount:1,mint:o,createAssociatedAddress:!I.current,walletId:xr,type:"tokenTransfer"};return h===4&&(ee.type="mplTransfer",ee.tokenStandard=4),ee},yr=nr();return(0,w.useEffect)(()=>{o&&b&&y&&H.recentBlockhash&&(K(),Q(""),(async()=>{try{let ce=Kt();ce.blockHash=H.recentBlockhash;let vt=Yt(ce),Cr=To({mint:o,address:b}),{SolWallet:hr}=await to(),Nr=await new hr().getSerializedTransaction({privateKey:"",data:vt}),Tr=N({from:n,chainId:y,transactions:[Nr],method:"signTransaction",dappInfo:{}}),[vr,Sr]=await Promise.all([Cr,Tr]);I.current=vr?.data?.legal,fe(Sr.firstUnitLimit)}catch(ce){Q(ce?.message||i("wallet_extension_alert_estimate_unavailable"))}finally{_e()}})())},[o,n,b,y,H.recentBlockhash]),w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:u["metax-send-nft-detail"]},w.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},w.default.createElement(ke,{src:_,startStatus:!0,alt:"",backupImage:wr,classnames:(0,Vt.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),w.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},w.default.createElement("div",{className:u["metax-send-nft-detail__name"]},l))),w.default.createElement(L,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${D} - ${x}`}),w.default.createElement(L,{label:i("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:q(n),canCopy:!0}),w.default.createElement(L,{label:i("wallet_transfer_subtitle_receive_address"),value:b,valueDisplay:q(b),canCopy:!0}),w.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),w.default.createElement(L,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:f}),w.default.createElement("div",{className:(0,Vt.default)(u["metax-send-nft-confirm"])},w.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),w.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},w.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},w.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",ur),w.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},pr)))),!Z&&Ke.msg&&w.default.createElement("div",{className:u["metax-send-nft-detail__error"]},Ke.msg)),w.default.createElement(se.FooterActions,null,w.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.secondary,size:T.SIZE.lg,width:160,onClick:()=>{e(W()),Ke.isEnough?C.goBack():C.replace(U)}},i("wallet_dapp_connection_btn_reject")),w.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.lg,width:160,loading:Z||gr,disabled:Ke.msg,onClick:async()=>{if(!P.current){P.current=!0,$t(!0);try{let ee=await No({coinId:r,fromAddr:n,toAddr:b}),ce=Kt();ce.blockHash=ee;let vt=await yr(e,ce);Se({tx_id:vt}),e(W()),O.success({title:i("wallet_transfer_notif_transaction_submit")}),C.replace(U)}catch(ee){ee.message!==rt&&O.error({title:i("wallet_home_toast_network_error")})}P.current=!1,$t(!1)}}},i("wallet_set_password_btn_confirm"))))},sr=Jr;var qr=()=>{let{baseCoinId:e}=(0,ir.useSelector)(k);switch(e){case lo:case io:return Ve.default.createElement(Bn,null);case Ne:return Ve.default.createElement(sr,null);case J:return Ve.default.createElement(Gn,null);default:return Ve.default.createElement(Qn,null)}},mr=qr;var Xr=()=>{let e=(0,fr.useHistory)(),t=(0,_r.useDispatch)(),o=(0,$e.useCallback)(()=>{t(Ft()),e.replace(et)},[]);return $e.default.createElement(lt,{pageName:"confirmDetail",title:e.location.state?.nftInfo.claim?i("extension_aptos_nft_title_receiveconfirm"):i("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(e.location.state?.nftInfo.claim){t(W()),t(Ft()),e.goBack();return}o()}},$e.default.createElement(mr,null))},lr=Xr;var Qr=()=>{let e=(0,ye.useHistory)(),t=(0,dr.useDispatch)();return(0,cr.useMount)(()=>{e.location.state?t(Fo(e.location.state?.nftInfo)):e.replace(U)}),Ct.default.createElement(ye.Switch,null,Ct.default.createElement(ye.Route,{exact:!0,path:et,component:wn}),Ct.default.createElement(ye.Route,{exact:!0,path:tt,component:lr}))},tl=Qr;export{tl as default};
//# sourceMappingURL=SendNft-4GXLFZU5.js.map
