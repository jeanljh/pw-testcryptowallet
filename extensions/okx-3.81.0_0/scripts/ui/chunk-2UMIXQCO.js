import{b as N}from"./chunk-A5U7X3LN.js";import{a as C}from"./chunk-WRVJM3F3.js";import{b as U}from"./chunk-XRCQOGA2.js";import{o as y}from"./chunk-Z62JX42S.js";import{Ga as R,Na as F}from"./chunk-2QHGKEME.js";import{a as I}from"./chunk-MAAUVUWY.js";import{g as h,h as E,i as O}from"./chunk-EFOY37CC.js";import{K as $,q as x}from"./chunk-VZKEX7KP.js";import{ia as D,ka as l,va as v}from"./chunk-XFTQD4B2.js";import{b as w}from"./chunk-73B6GL3S.js";import{f as _,o as T,q as p}from"./chunk-Y5OH3DDZ.js";T();p();var c={UNAPPROVED:"unapproved",APPROVED:"approved",REJECTED:"rejected",SIGNED:"signed",SUBMITTED:"submitted",FAILED:"failed",DROPPED:"dropped",SUCCEED:"succeed",PENDING:"pending"},u={TRANS_OUT:1,AUTHORIZATION:2,CONTRACT_CALL:3,CANCEL_AUTHORIZATION:4,CONTRACT_DEPLOY:5},B={[u.TRANS_OUT]:"wallet_extension_history_list_send",[u.CONTRACT_CALL]:"wallet_extension_history_list_contract_interaction",[u.AUTHORIZATION]:"wallet_extension_history_list_approval",[u.CANCEL_AUTHORIZATION]:"wallet_extension_history_list_revoke_approval",[u.CONTRACT_DEPLOY]:"developer_mode_history_title_contract_eployment"};T();p();var a=_(w()),d=_(F()),P=_(y());v();$();function Z(){return(0,d.useSelector)(R,d.shallowEqual)}function A(t,r){let o=Z(),s=U(),n=C(),e=r||n;return(0,a.useMemo)(()=>Object.values(o).filter(i=>{if(!i.txParams)return!1;let{from:m,chainId:f}=i.txParams;return s===m&&f===e.chainId&&t(i)}),[o,s,e.chainId])}function et(t){return A(r=>r.status===c.FAILED||r.status===c.SUCCEED,t)}function L(t){let[r,o]=t,s=+r,n=+x.add(1,"d",new Date(o));return e=>O(e,s)&&h(e,n)}function S(t={},r=null){let{dates:o}=t,s=A(n=>n.status===c.FAILED||n.status===c.SUCCEED||n.status===c.DROPPED,r);return(0,a.useMemo)(()=>{let n=s;if(o){let e=L(o);n=n.filter(({finishTime:i})=>e(i))}return n.sort((e,i)=>i.finishTime-e.finishTime).map(e=>({...e,isShowPending:!1}))},[s,o])}function g(t={},r=null){let o=A(n=>n.status===c.PENDING,r),{dates:s}=t;return(0,a.useMemo)(()=>{let n=D(o,[e=>N(e.txParams.nonce)]).map((e,i)=>({...e,isShowPending:i===0}));if(s){let e=L(s);n=n.filter(({sendTime:i})=>e(i))}return n},[o,s])}function M(){let t=g(),r=S();return(0,a.useMemo)(()=>[...t,...r],[t,r])}function rt(t){let r=M();return(0,a.useMemo)(()=>t?r.find(({id:o})=>t===o):null,[t,r])}function nt({tokenAddress:t}){let r=g(),o=S();return(0,a.useMemo)(()=>[...r,...o].filter(({type:s,txParams:n,extraParams:e})=>{if(s===u.TRANS_OUT)return!t&&!e?.tokenAddress||l(t)===l(e?.tokenAddress);if(s===u.AUTHORIZATION||s===u.CANCEL_AUTHORIZATION)return l(t)===l(e?.tokenAddress);if(s===u.CONTRACT_CALL){let{value:i}=n||{};return!t&&E(I(i),0)}return!1}),[r,o,t])}var k=(t,r,o)=>{let{protocol:s,host:n,pathname:e,search:i,hash:m}=new URL(t),f=e.endsWith("/")?`${e}${r}/${o}`:`${e}/${r}/${o}`;return new URL(`${s}//${n}${f}${i}${m}`).toString()};function ot(){let t=C();return(0,P.useMemoizedFn)(r=>t?.explorerUrl?k(t?.explorerUrl,"tx",r):null)}export{c as a,u as b,B as c,et as d,S as e,g as f,M as g,rt as h,nt as i,k as j,ot as k};
//# sourceMappingURL=chunk-2UMIXQCO.js.map
