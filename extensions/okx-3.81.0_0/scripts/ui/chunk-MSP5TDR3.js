import{a as w,b as Z}from"./chunk-VWGNVM37.js";import{a as V,b as v}from"./chunk-XFPD3Q2E.js";import{a as X}from"./chunk-CZBL7QEK.js";import{a as L,aa as A,b as H,d as k,ea as q,f as z,k as J,l as Q,la as G,ya as O}from"./chunk-2QHGKEME.js";import{k as N,l as ge}from"./chunk-YIFLUVTR.js";import{a as I,c as b,h as W,j as D}from"./chunk-EFOY37CC.js";import{ac as Y,nc as fe}from"./chunk-COF7YKSN.js";import{K as Ce,o as B}from"./chunk-VZKEX7KP.js";import{oa as _,va as P}from"./chunk-XFTQD4B2.js";import{f as x,o as c,q as u}from"./chunk-Y5OH3DDZ.js";c();u();function $(e){return Object.keys(e).sort().reduce((n,t)=>(n[t]=e[t]instanceof Object?$(e[t]):e[t],n),{})}function je(e){let n=$(e);return JSON.stringify(n)}function Fe(e){if(!e||typeof e!="object")return null;let n={...e};for(let t in n)(n[t]===null||n[t]===void 0)&&delete n[t];return n}function ee({coins:e,walletId:n,walletIdentityMap:t,createdMap:r}){let o=r[n]||[],i=new Set(o);return e.reduce((l,s)=>{let{coinId:a,baseCoinId:g}=s;return(typeof a>"u"&&typeof g>"u"||(i.has(g)||i.has(a))&&w({coin:s,walletIdentity:t[n]}))&&l.push(s),l},[])}c();u();P();var y=x(k());c();u();c();u();function M(e,n,t){let r=null,o=n[e.coinId];e.coinAmount==="0"||o=="0"?r="0":typeof o<"u"&&(r=I(e.coinAmount,o)),e.currencyAmountUSD=r??e.currencyAmountUSD,e.currencyAmount=I(e.currencyAmountUSD,t?.usdToThisRate??"1")}c();u();function R(e,n,{sort:t=!0,ignoreChildren:r=!1}={}){let o=[],i=[];e.forEach(s=>{let a={...s};if(a.childrenCoin&&!r){if(a.childrenCoin.filter(m=>n(m,a.default)).length===0){i.push(a);return}o.push(a)}else{if(!n(a,a.default)){i.push(a);return}o.push(a)}});let l=(s,a)=>D(a.currencyAmount,s.currencyAmount)?D(a.coinAmount,s.coinAmount)?W(s.rank,a.rank)?1:-1:W(a.coinAmount,s.coinAmount)?1:-1:W(a.currencyAmount,s.currencyAmount)?1:-1;return t?(o.sort(l),i.sort(l),{results:o,uselessResults:i}):{results:o,uselessResults:i}}c();u();P();c();u();var ne=e=>({...e,currencyAmount:"0",currencyAmountUSD:"0",coinAmount:"0",coinAmountInt:"0"});var pe=[];function U(e,n,t,{walletIdentityMap:r,createdMap:o,walletId:i}){if(!e[n])return pe;let l=e[n]??{},s=l.coins?[...l.coins]:[],a=s.reduce((d,C)=>(d.set(C.aggregation?C.symbol:C.coinId,C),d),new Map),g=ee({coins:t,walletId:i,walletIdentityMap:r,createdMap:o}),m=new Map,f=[];return g.forEach(d=>{let C=ne(d);if(d.aggregation){if(!m.get(d.symbol)){let K={...C,childrenCoin:[]};m.set(d.symbol,K),f.push(K)}m.get(d.symbol).childrenCoin.push(C)}else f.push(C)}),f.forEach(d=>{let C=a.get(d.aggregation?d.symbol:d.coinId);C?C.aggregation&&(C.childrenCoin=_(C.childrenCoin,d.childrenCoin,"coinId")):s.push(d)}),s}c();u();Ce();var ye=e=>e.showOnHomepage?!0:e.childrenCoin?e.childrenCoin.some(n=>n?.showOnHomepage):!1,te=(e,n,t)=>{e.maxApy&&(n.push(e.maxApy),e.currencyAmount&&B.gt(e.currencyAmount,"0")&&t.push(e.maxApy))},he=e=>e.reduce((n,t)=>n?B.gt(t,n)?t:n:t,"");function Ae(e){let n={};if(!e)return n;let t=[],r=[];n.showOnHomepage=ye(e),te(e,t,r),e.childrenCoin&&e.childrenCoin.forEach(i=>{te(i,t,r)});let o=r.length>0?r:t;return o.length>0&&(n.maxApy=he(o)),n}function Se(e){let n=[];return e.forEach(t=>{t.maxApy&&n.push(t)}),n}function an(e){let n=Se(e);if(n.length===0)return;let t=n.filter(o=>{let i=o.currencyAmount;return i&&B.gt(i,"0")});return(t.length>0?t:n).reduce((o,i)=>i.maxApy?o?B.gt(i.maxApy,o)?i.maxApy:o:i.maxApy:o,"")}c();u();ge();var Be=N({name:"currencySlice",initialState:{coinToUSDRate:{}},reducers:{updateCoinToUSDRate(e,n){e.coinToUSDRate=n.payload}}}),Ie={},re=e=>e.currencySlice.coinToUSDRate||Ie,{actions:xe,reducer:_e}=Be,{updateCoinToUSDRate:hn}=xe,An=_e;fe();var h=(e,n)=>n??A(e),be=(0,y.createSelector)(e=>e.keyring.keyringIdentities,h,(e,n)=>{let t;for(let r=0;r<e.length;r++){let o=e[r];if(o.walletIdentities.find(i=>i.walletId===n)){t=o.keyringIdentityType;break}}return t===Y.PRIVATE_KEY}),We=(0,y.createSelector)(e=>{let{createdMap:n={}}=e.metamask;return n},h,be,O,(e,n,t)=>{if(!t)return new Set([]);let r=e[n]||[];return new Set(r)}),E=(0,y.createSelector)(We,O,(e,n)=>n.filter(t=>e.has(t.coinId))),j=X(e=>({keyringIdentities:e.keyring.keyringIdentities,createdMap:e.metamask.createdMap}),h,(e,n)=>{let{keyringIdentities:t,createdMap:r}=e;return{walletIdentityMap:q({keyring:{keyringIdentities:t}}),createdMap:r,walletId:n}}),ke=(0,y.createSelector)(h,L,(e,n)=>n?.[e]??[]),ie=(0,y.createSelector)(h,H,(e,n)=>n?.[e]??[]),ae=(0,y.createSelector)(ke,E,(e,n)=>_(n,e,"coinId")),we=(e,n,t,r,o)=>{let i=[];return e.forEach(l=>{let s=l.childrenCoin?.length||0,a={...t[l.coinId]??{},...l};if(a.childrenCoin){let g=a.childrenCoin.filter(f=>n.has(f.chainId)).map(f=>({...f,...t[f.coinId]??{}})),m=Z({coins:g,walletIdentity:o[r]});if(m.length===0)return;m.length!==s&&Object.assign(a,m[0]),a.childrenCoin=m}else if(!w({coin:a,walletIdentity:o[r]})||!n.has(a.chainId))return;i.push(a)}),i};function Me(e,n,t){e.forEach(r=>{r.childrenCoin?(r.childrenCoin.forEach(o=>{M(o,n,t)}),r.currencyAmountUSD=r.childrenCoin.reduce((o,i)=>i.currencyAmountUSD?b(o,i.currencyAmountUSD):o,"0"),r.currencyAmount=I(r.currencyAmountUSD,t?.usdToThisRate??"1"),r.coinAmount=r.childrenCoin.reduce((o,i)=>b(o,i.coinAmount),"0"),r.coinAmountInt=r.childrenCoin.reduce((o,i)=>b(o,i.coinAmountInt),"0")):M(r,n,t)})}var Re=(e,n,t,r,o,i,l)=>{let{coins:s,...a}=e,m=we(s??[],n,t,r,o);return Me(m,i,l),{...a,coins:m,loading:!s}},oe={},T=(0,y.createSelector)((e,n,t)=>t?{[t.balanceData.walletId]:t.balanceData}:e.metamask.balancesMap??e.balanceSlice.balanceMap,z,Q,J,j,G,re,h,(e,n,t,r,o,i,l,s)=>{if(!t||!Object.keys(e).length||!n?.length||Object.values(e)?.[0]?.v!==2)return oe;let{walletIdentityMap:a}=o,g=new Set(n);return Object.entries(e).reduce((m,[f,d])=>(s&&f!==s||d?.v!==2||(m[f]=Re(d,g,r,f,a,l,i)),m),{})});c();u();var S=x(k());c();u();var Te=e=>se(e,A(e)),F=Te;c();u();var ce=x(k());var De=(0,ce.createSelector)(E,e=>new Set(e.map(n=>n.coinId))),ue=De;c();u();var le=x(k());var Oe=(0,le.createSelector)(ie,e=>new Set(e?.map(n=>n.coinId)??[])),me=Oe;var ot=(0,S.createSelector)(T,e=>Object.entries(e).reduce((n,[t,r])=>{let i=(r?.coins??[]).reduce((l,s)=>s.childrenCoin?l.concat(s.childrenCoin):l.concat([s]),[]);return n[t]={...r,coins:i},n},{})),it=(0,S.createSelector)(T,A,(e,n)=>!Array.isArray(e[n]?.coins)),se=(0,S.createSelector)(T,h,ae,j,U),de=[],at=(0,S.createSelector)(F,me,ue,V,(e,n,t,r)=>{if(!e.length)return de;let o=r.open,i=r.amount;return R(e,(s,a)=>{let{isFiltered:g}=v({defaultBaseCoinsCoinIdsSet:t,reducedCoinIdsSet:n,balanceCoin:s,isDefault:a,hiddenSmallAssets:o,smallAssetsAmount:i});return!g}).results}),st=(0,S.createSelector)(F,e=>e.length?R(e,()=>!0).results:de);export{hn as a,An as b,R as c,je as d,Fe as e,ee as f,ne as g,Ae as h,Se as i,an as j,We as k,ie as l,T as m,F as n,ue as o,me as p,ot as q,it as r,se as s,at as t,st as u};
//# sourceMappingURL=chunk-MSP5TDR3.js.map
