import{A as Xt,B as Re,C as Oe,D as ds,E as ps,G as wn,a as Le,l as mn,m as ls,n as P,o as fs,p as T,q as he,r as cr,s as ht,t as C,u as v,v as D,w as bn,x as R,y as hr,z as B}from"./chunk-MSZOM4GC.js";import{t as wi,u as lr}from"./chunk-BYVN72KS.js";import{a as bi}from"./chunk-SEAUBLKM.js";import{a as F,c as gi,d as hs,e as mi}from"./chunk-RX4V72AK.js";import{c as Ye,f as Ae,o as ae,p as le,q as ue}from"./chunk-Y5OH3DDZ.js";var gs=Ye((ys,kn)=>{ae();ue();(function(c,t){"use strict";function e(m,s){if(!m)throw new Error(s||"Assertion failed")}function r(m,s){m.super_=s;var a=function(){};a.prototype=s.prototype,m.prototype=new a,m.prototype.constructor=m}function n(m,s,a){if(n.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((s==="le"||s==="be")&&(a=s,s=10),this._init(m||0,s||10,a||"be"))}typeof c=="object"?c.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var i;try{typeof window<"u"&&typeof window.Buffer<"u"?i=window.Buffer:i=hs().Buffer}catch{}n.isBN=function(s){return s instanceof n?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===n.wordSize&&Array.isArray(s.words)},n.max=function(s,a){return s.cmp(a)>0?s:a},n.min=function(s,a){return s.cmp(a)<0?s:a},n.prototype._init=function(s,a,h){if(typeof s=="number")return this._initNumber(s,a,h);if(typeof s=="object")return this._initArray(s,a,h);a==="hex"&&(a=16),e(a===(a|0)&&a>=2&&a<=36),s=s.toString().replace(/\s+/g,"");var l=0;s[0]==="-"&&(l++,this.negative=1),l<s.length&&(a===16?this._parseHex(s,l,h):(this._parseBase(s,a,l),h==="le"&&this._initArray(this.toArray(),a,h)))},n.prototype._initNumber=function(s,a,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(e(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),a,h)},n.prototype._initArray=function(s,a,h){if(e(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var p,w,k=0;if(h==="be")for(l=s.length-1,p=0;l>=0;l-=3)w=s[l]|s[l-1]<<8|s[l-2]<<16,this.words[p]|=w<<k&67108863,this.words[p+1]=w>>>26-k&67108863,k+=24,k>=26&&(k-=26,p++);else if(h==="le")for(l=0,p=0;l<s.length;l+=3)w=s[l]|s[l+1]<<8|s[l+2]<<16,this.words[p]|=w<<k&67108863,this.words[p+1]=w>>>26-k&67108863,k+=24,k>=26&&(k-=26,p++);return this._strip()};function u(m,s){var a=m.charCodeAt(s);if(a>=48&&a<=57)return a-48;if(a>=65&&a<=70)return a-55;if(a>=97&&a<=102)return a-87;e(!1,"Invalid character in "+m)}function f(m,s,a){var h=u(m,a);return a-1>=s&&(h|=u(m,a-1)<<4),h}n.prototype._parseHex=function(s,a,h){this.length=Math.ceil((s.length-a)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var p=0,w=0,k;if(h==="be")for(l=s.length-1;l>=a;l-=2)k=f(s,a,l)<<p,this.words[w]|=k&67108863,p>=18?(p-=18,w+=1,this.words[w]|=k>>>26):p+=8;else{var d=s.length-a;for(l=d%2===0?a+1:a;l<s.length;l+=2)k=f(s,a,l)<<p,this.words[w]|=k&67108863,p>=18?(p-=18,w+=1,this.words[w]|=k>>>26):p+=8}this._strip()};function b(m,s,a,h){for(var l=0,p=0,w=Math.min(m.length,a),k=s;k<w;k++){var d=m.charCodeAt(k)-48;l*=h,d>=49?p=d-49+10:d>=17?p=d-17+10:p=d,e(d>=0&&p<h,"Invalid character"),l+=p}return l}n.prototype._parseBase=function(s,a,h){this.words=[0],this.length=1;for(var l=0,p=1;p<=67108863;p*=a)l++;l--,p=p/a|0;for(var w=s.length-h,k=w%l,d=Math.min(w,w-k)+h,o=0,g=h;g<d;g+=l)o=b(s,g,g+l,a),this.imuln(p),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(k!==0){var O=1;for(o=b(s,g,s.length,a),g=0;g<k;g++)O*=a;this.imuln(O),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},n.prototype.copy=function(s){s.words=new Array(this.length);for(var a=0;a<this.length;a++)s.words[a]=this.words[a];s.length=this.length,s.negative=this.negative,s.red=this.red};function I(m,s){m.words=s.words,m.length=s.length,m.negative=s.negative,m.red=s.red}if(n.prototype._move=function(s){I(s,this)},n.prototype.clone=function(){var s=new n(null);return this.copy(s),s},n.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=M}catch{n.prototype.inspect=M}else n.prototype.inspect=M;function M(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(s,a){s=s||10,a=a|0||1;var h;if(s===16||s==="hex"){h="";for(var l=0,p=0,w=0;w<this.length;w++){var k=this.words[w],d=((k<<l|p)&16777215).toString(16);p=k>>>24-l&16777215,l+=2,l>=26&&(l-=26,w--),p!==0||w!==this.length-1?h=x[6-d.length]+d+h:h=d+h}for(p!==0&&(h=p.toString(16)+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var o=N[s],g=_[s];h="";var O=this.clone();for(O.negative=0;!O.isZero();){var U=O.modrn(g).toString(s);O=O.idivn(g),O.isZero()?h=U+h:h=x[o-U.length]+U+h}for(this.isZero()&&(h="0"+h);h.length%a!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}e(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},n.prototype.toJSON=function(){return this.toString(16,2)},i&&(n.prototype.toBuffer=function(s,a){return this.toArrayLike(i,s,a)}),n.prototype.toArray=function(s,a){return this.toArrayLike(Array,s,a)};var L=function(s,a){return s.allocUnsafe?s.allocUnsafe(a):new s(a)};n.prototype.toArrayLike=function(s,a,h){this._strip();var l=this.byteLength(),p=h||Math.max(1,l);e(l<=p,"byte array longer than desired length"),e(p>0,"Requested array length <= 0");var w=L(s,p),k=a==="le"?"LE":"BE";return this["_toArrayLike"+k](w,l),w},n.prototype._toArrayLikeLE=function(s,a){for(var h=0,l=0,p=0,w=0;p<this.length;p++){var k=this.words[p]<<w|l;s[h++]=k&255,h<s.length&&(s[h++]=k>>8&255),h<s.length&&(s[h++]=k>>16&255),w===6?(h<s.length&&(s[h++]=k>>24&255),l=0,w=0):(l=k>>>24,w+=2)}if(h<s.length)for(s[h++]=l;h<s.length;)s[h++]=0},n.prototype._toArrayLikeBE=function(s,a){for(var h=s.length-1,l=0,p=0,w=0;p<this.length;p++){var k=this.words[p]<<w|l;s[h--]=k&255,h>=0&&(s[h--]=k>>8&255),h>=0&&(s[h--]=k>>16&255),w===6?(h>=0&&(s[h--]=k>>24&255),l=0,w=0):(l=k>>>24,w+=2)}if(h>=0)for(s[h--]=l;h>=0;)s[h--]=0},Math.clz32?n.prototype._countBits=function(s){return 32-Math.clz32(s)}:n.prototype._countBits=function(s){var a=s,h=0;return a>=4096&&(h+=13,a>>>=13),a>=64&&(h+=7,a>>>=7),a>=8&&(h+=4,a>>>=4),a>=2&&(h+=2,a>>>=2),h+a},n.prototype._zeroBits=function(s){if(s===0)return 26;var a=s,h=0;return(a&8191)===0&&(h+=13,a>>>=13),(a&127)===0&&(h+=7,a>>>=7),(a&15)===0&&(h+=4,a>>>=4),(a&3)===0&&(h+=2,a>>>=2),(a&1)===0&&h++,h},n.prototype.bitLength=function(){var s=this.words[this.length-1],a=this._countBits(s);return(this.length-1)*26+a};function A(m){for(var s=new Array(m.bitLength()),a=0;a<s.length;a++){var h=a/26|0,l=a%26;s[a]=m.words[h]>>>l&1}return s}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,a=0;a<this.length;a++){var h=this._zeroBits(this.words[a]);if(s+=h,h!==26)break}return s},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},n.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var a=0;a<s.length;a++)this.words[a]=this.words[a]|s.words[a];return this._strip()},n.prototype.ior=function(s){return e((this.negative|s.negative)===0),this.iuor(s)},n.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},n.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},n.prototype.iuand=function(s){var a;this.length>s.length?a=s:a=this;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=a.length,this._strip()},n.prototype.iand=function(s){return e((this.negative|s.negative)===0),this.iuand(s)},n.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},n.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},n.prototype.iuxor=function(s){var a,h;this.length>s.length?(a=this,h=s):(a=s,h=this);for(var l=0;l<h.length;l++)this.words[l]=a.words[l]^h.words[l];if(this!==a)for(;l<a.length;l++)this.words[l]=a.words[l];return this.length=a.length,this._strip()},n.prototype.ixor=function(s){return e((this.negative|s.negative)===0),this.iuxor(s)},n.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},n.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},n.prototype.inotn=function(s){e(typeof s=="number"&&s>=0);var a=Math.ceil(s/26)|0,h=s%26;this._expand(a),h>0&&a--;for(var l=0;l<a;l++)this.words[l]=~this.words[l]&67108863;return h>0&&(this.words[l]=~this.words[l]&67108863>>26-h),this._strip()},n.prototype.notn=function(s){return this.clone().inotn(s)},n.prototype.setn=function(s,a){e(typeof s=="number"&&s>=0);var h=s/26|0,l=s%26;return this._expand(h+1),a?this.words[h]=this.words[h]|1<<l:this.words[h]=this.words[h]&~(1<<l),this._strip()},n.prototype.iadd=function(s){var a;if(this.negative!==0&&s.negative===0)return this.negative=0,a=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,a=this.isub(s),s.negative=1,a._normSign();var h,l;this.length>s.length?(h=this,l=s):(h=s,l=this);for(var p=0,w=0;w<l.length;w++)a=(h.words[w]|0)+(l.words[w]|0)+p,this.words[w]=a&67108863,p=a>>>26;for(;p!==0&&w<h.length;w++)a=(h.words[w]|0)+p,this.words[w]=a&67108863,p=a>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this},n.prototype.add=function(s){var a;return s.negative!==0&&this.negative===0?(s.negative=0,a=this.sub(s),s.negative^=1,a):s.negative===0&&this.negative!==0?(this.negative=0,a=s.sub(this),this.negative=1,a):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},n.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var a=this.iadd(s);return s.negative=1,a._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,p;h>0?(l=this,p=s):(l=s,p=this);for(var w=0,k=0;k<p.length;k++)a=(l.words[k]|0)-(p.words[k]|0)+w,w=a>>26,this.words[k]=a&67108863;for(;w!==0&&k<l.length;k++)a=(l.words[k]|0)+w,w=a>>26,this.words[k]=a&67108863;if(w===0&&k<l.length&&l!==this)for(;k<l.length;k++)this.words[k]=l.words[k];return this.length=Math.max(this.length,k),l!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(s){return this.clone().isub(s)};function z(m,s,a){a.negative=s.negative^m.negative;var h=m.length+s.length|0;a.length=h,h=h-1|0;var l=m.words[0]|0,p=s.words[0]|0,w=l*p,k=w&67108863,d=w/67108864|0;a.words[0]=k;for(var o=1;o<h;o++){for(var g=d>>>26,O=d&67108863,U=Math.min(o,s.length-1),q=Math.max(0,o-m.length+1);q<=U;q++){var V=o-q|0;l=m.words[V]|0,p=s.words[q]|0,w=l*p+O,g+=w/67108864|0,O=w&67108863}a.words[o]=O|0,d=g|0}return d!==0?a.words[o]=d|0:a.length--,a._strip()}var W=function(s,a,h){var l=s.words,p=a.words,w=h.words,k=0,d,o,g,O=l[0]|0,U=O&8191,q=O>>>13,V=l[1]|0,et=V&8191,st=V>>>13,be=l[2]|0,it=be&8191,ct=be>>>13,Gn=l[3]|0,yt=Gn&8191,gt=Gn>>>13,jn=l[4]|0,mt=jn&8191,bt=jn>>>13,Jn=l[5]|0,wt=Jn&8191,kt=Jn>>>13,Yn=l[6]|0,vt=Yn&8191,St=Yn>>>13,Zn=l[7]|0,It=Zn&8191,_t=Zn>>>13,Xn=l[8]|0,Bt=Xn&8191,At=Xn>>>13,Qn=l[9]|0,Lt=Qn&8191,Rt=Qn>>>13,ts=p[0]|0,xt=ts&8191,Mt=ts>>>13,es=p[1]|0,Et=es&8191,Pt=es>>>13,rs=p[2]|0,Tt=rs&8191,Ct=rs>>>13,ns=p[3]|0,zt=ns&8191,Kt=ns>>>13,ss=p[4]|0,Nt=ss&8191,Ot=ss>>>13,is=p[5]|0,Wt=is&8191,Ut=is>>>13,os=p[6]|0,qt=os&8191,Dt=os>>>13,as=p[7]|0,Ft=as&8191,Vt=as>>>13,us=p[8]|0,Ht=us&8191,$t=us>>>13,cs=p[9]|0,Gt=cs&8191,jt=cs>>>13;h.negative=s.negative^a.negative,h.length=19,d=Math.imul(U,xt),o=Math.imul(U,Mt),o=o+Math.imul(q,xt)|0,g=Math.imul(q,Mt);var Zr=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,d=Math.imul(et,xt),o=Math.imul(et,Mt),o=o+Math.imul(st,xt)|0,g=Math.imul(st,Mt),d=d+Math.imul(U,Et)|0,o=o+Math.imul(U,Pt)|0,o=o+Math.imul(q,Et)|0,g=g+Math.imul(q,Pt)|0;var Xr=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,d=Math.imul(it,xt),o=Math.imul(it,Mt),o=o+Math.imul(ct,xt)|0,g=Math.imul(ct,Mt),d=d+Math.imul(et,Et)|0,o=o+Math.imul(et,Pt)|0,o=o+Math.imul(st,Et)|0,g=g+Math.imul(st,Pt)|0,d=d+Math.imul(U,Tt)|0,o=o+Math.imul(U,Ct)|0,o=o+Math.imul(q,Tt)|0,g=g+Math.imul(q,Ct)|0;var Qr=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,d=Math.imul(yt,xt),o=Math.imul(yt,Mt),o=o+Math.imul(gt,xt)|0,g=Math.imul(gt,Mt),d=d+Math.imul(it,Et)|0,o=o+Math.imul(it,Pt)|0,o=o+Math.imul(ct,Et)|0,g=g+Math.imul(ct,Pt)|0,d=d+Math.imul(et,Tt)|0,o=o+Math.imul(et,Ct)|0,o=o+Math.imul(st,Tt)|0,g=g+Math.imul(st,Ct)|0,d=d+Math.imul(U,zt)|0,o=o+Math.imul(U,Kt)|0,o=o+Math.imul(q,zt)|0,g=g+Math.imul(q,Kt)|0;var tn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,d=Math.imul(mt,xt),o=Math.imul(mt,Mt),o=o+Math.imul(bt,xt)|0,g=Math.imul(bt,Mt),d=d+Math.imul(yt,Et)|0,o=o+Math.imul(yt,Pt)|0,o=o+Math.imul(gt,Et)|0,g=g+Math.imul(gt,Pt)|0,d=d+Math.imul(it,Tt)|0,o=o+Math.imul(it,Ct)|0,o=o+Math.imul(ct,Tt)|0,g=g+Math.imul(ct,Ct)|0,d=d+Math.imul(et,zt)|0,o=o+Math.imul(et,Kt)|0,o=o+Math.imul(st,zt)|0,g=g+Math.imul(st,Kt)|0,d=d+Math.imul(U,Nt)|0,o=o+Math.imul(U,Ot)|0,o=o+Math.imul(q,Nt)|0,g=g+Math.imul(q,Ot)|0;var en=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(en>>>26)|0,en&=67108863,d=Math.imul(wt,xt),o=Math.imul(wt,Mt),o=o+Math.imul(kt,xt)|0,g=Math.imul(kt,Mt),d=d+Math.imul(mt,Et)|0,o=o+Math.imul(mt,Pt)|0,o=o+Math.imul(bt,Et)|0,g=g+Math.imul(bt,Pt)|0,d=d+Math.imul(yt,Tt)|0,o=o+Math.imul(yt,Ct)|0,o=o+Math.imul(gt,Tt)|0,g=g+Math.imul(gt,Ct)|0,d=d+Math.imul(it,zt)|0,o=o+Math.imul(it,Kt)|0,o=o+Math.imul(ct,zt)|0,g=g+Math.imul(ct,Kt)|0,d=d+Math.imul(et,Nt)|0,o=o+Math.imul(et,Ot)|0,o=o+Math.imul(st,Nt)|0,g=g+Math.imul(st,Ot)|0,d=d+Math.imul(U,Wt)|0,o=o+Math.imul(U,Ut)|0,o=o+Math.imul(q,Wt)|0,g=g+Math.imul(q,Ut)|0;var rn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(vt,xt),o=Math.imul(vt,Mt),o=o+Math.imul(St,xt)|0,g=Math.imul(St,Mt),d=d+Math.imul(wt,Et)|0,o=o+Math.imul(wt,Pt)|0,o=o+Math.imul(kt,Et)|0,g=g+Math.imul(kt,Pt)|0,d=d+Math.imul(mt,Tt)|0,o=o+Math.imul(mt,Ct)|0,o=o+Math.imul(bt,Tt)|0,g=g+Math.imul(bt,Ct)|0,d=d+Math.imul(yt,zt)|0,o=o+Math.imul(yt,Kt)|0,o=o+Math.imul(gt,zt)|0,g=g+Math.imul(gt,Kt)|0,d=d+Math.imul(it,Nt)|0,o=o+Math.imul(it,Ot)|0,o=o+Math.imul(ct,Nt)|0,g=g+Math.imul(ct,Ot)|0,d=d+Math.imul(et,Wt)|0,o=o+Math.imul(et,Ut)|0,o=o+Math.imul(st,Wt)|0,g=g+Math.imul(st,Ut)|0,d=d+Math.imul(U,qt)|0,o=o+Math.imul(U,Dt)|0,o=o+Math.imul(q,qt)|0,g=g+Math.imul(q,Dt)|0;var nn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(nn>>>26)|0,nn&=67108863,d=Math.imul(It,xt),o=Math.imul(It,Mt),o=o+Math.imul(_t,xt)|0,g=Math.imul(_t,Mt),d=d+Math.imul(vt,Et)|0,o=o+Math.imul(vt,Pt)|0,o=o+Math.imul(St,Et)|0,g=g+Math.imul(St,Pt)|0,d=d+Math.imul(wt,Tt)|0,o=o+Math.imul(wt,Ct)|0,o=o+Math.imul(kt,Tt)|0,g=g+Math.imul(kt,Ct)|0,d=d+Math.imul(mt,zt)|0,o=o+Math.imul(mt,Kt)|0,o=o+Math.imul(bt,zt)|0,g=g+Math.imul(bt,Kt)|0,d=d+Math.imul(yt,Nt)|0,o=o+Math.imul(yt,Ot)|0,o=o+Math.imul(gt,Nt)|0,g=g+Math.imul(gt,Ot)|0,d=d+Math.imul(it,Wt)|0,o=o+Math.imul(it,Ut)|0,o=o+Math.imul(ct,Wt)|0,g=g+Math.imul(ct,Ut)|0,d=d+Math.imul(et,qt)|0,o=o+Math.imul(et,Dt)|0,o=o+Math.imul(st,qt)|0,g=g+Math.imul(st,Dt)|0,d=d+Math.imul(U,Ft)|0,o=o+Math.imul(U,Vt)|0,o=o+Math.imul(q,Ft)|0,g=g+Math.imul(q,Vt)|0;var sn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(sn>>>26)|0,sn&=67108863,d=Math.imul(Bt,xt),o=Math.imul(Bt,Mt),o=o+Math.imul(At,xt)|0,g=Math.imul(At,Mt),d=d+Math.imul(It,Et)|0,o=o+Math.imul(It,Pt)|0,o=o+Math.imul(_t,Et)|0,g=g+Math.imul(_t,Pt)|0,d=d+Math.imul(vt,Tt)|0,o=o+Math.imul(vt,Ct)|0,o=o+Math.imul(St,Tt)|0,g=g+Math.imul(St,Ct)|0,d=d+Math.imul(wt,zt)|0,o=o+Math.imul(wt,Kt)|0,o=o+Math.imul(kt,zt)|0,g=g+Math.imul(kt,Kt)|0,d=d+Math.imul(mt,Nt)|0,o=o+Math.imul(mt,Ot)|0,o=o+Math.imul(bt,Nt)|0,g=g+Math.imul(bt,Ot)|0,d=d+Math.imul(yt,Wt)|0,o=o+Math.imul(yt,Ut)|0,o=o+Math.imul(gt,Wt)|0,g=g+Math.imul(gt,Ut)|0,d=d+Math.imul(it,qt)|0,o=o+Math.imul(it,Dt)|0,o=o+Math.imul(ct,qt)|0,g=g+Math.imul(ct,Dt)|0,d=d+Math.imul(et,Ft)|0,o=o+Math.imul(et,Vt)|0,o=o+Math.imul(st,Ft)|0,g=g+Math.imul(st,Vt)|0,d=d+Math.imul(U,Ht)|0,o=o+Math.imul(U,$t)|0,o=o+Math.imul(q,Ht)|0,g=g+Math.imul(q,$t)|0;var on=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(Lt,xt),o=Math.imul(Lt,Mt),o=o+Math.imul(Rt,xt)|0,g=Math.imul(Rt,Mt),d=d+Math.imul(Bt,Et)|0,o=o+Math.imul(Bt,Pt)|0,o=o+Math.imul(At,Et)|0,g=g+Math.imul(At,Pt)|0,d=d+Math.imul(It,Tt)|0,o=o+Math.imul(It,Ct)|0,o=o+Math.imul(_t,Tt)|0,g=g+Math.imul(_t,Ct)|0,d=d+Math.imul(vt,zt)|0,o=o+Math.imul(vt,Kt)|0,o=o+Math.imul(St,zt)|0,g=g+Math.imul(St,Kt)|0,d=d+Math.imul(wt,Nt)|0,o=o+Math.imul(wt,Ot)|0,o=o+Math.imul(kt,Nt)|0,g=g+Math.imul(kt,Ot)|0,d=d+Math.imul(mt,Wt)|0,o=o+Math.imul(mt,Ut)|0,o=o+Math.imul(bt,Wt)|0,g=g+Math.imul(bt,Ut)|0,d=d+Math.imul(yt,qt)|0,o=o+Math.imul(yt,Dt)|0,o=o+Math.imul(gt,qt)|0,g=g+Math.imul(gt,Dt)|0,d=d+Math.imul(it,Ft)|0,o=o+Math.imul(it,Vt)|0,o=o+Math.imul(ct,Ft)|0,g=g+Math.imul(ct,Vt)|0,d=d+Math.imul(et,Ht)|0,o=o+Math.imul(et,$t)|0,o=o+Math.imul(st,Ht)|0,g=g+Math.imul(st,$t)|0,d=d+Math.imul(U,Gt)|0,o=o+Math.imul(U,jt)|0,o=o+Math.imul(q,Gt)|0,g=g+Math.imul(q,jt)|0;var an=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(an>>>26)|0,an&=67108863,d=Math.imul(Lt,Et),o=Math.imul(Lt,Pt),o=o+Math.imul(Rt,Et)|0,g=Math.imul(Rt,Pt),d=d+Math.imul(Bt,Tt)|0,o=o+Math.imul(Bt,Ct)|0,o=o+Math.imul(At,Tt)|0,g=g+Math.imul(At,Ct)|0,d=d+Math.imul(It,zt)|0,o=o+Math.imul(It,Kt)|0,o=o+Math.imul(_t,zt)|0,g=g+Math.imul(_t,Kt)|0,d=d+Math.imul(vt,Nt)|0,o=o+Math.imul(vt,Ot)|0,o=o+Math.imul(St,Nt)|0,g=g+Math.imul(St,Ot)|0,d=d+Math.imul(wt,Wt)|0,o=o+Math.imul(wt,Ut)|0,o=o+Math.imul(kt,Wt)|0,g=g+Math.imul(kt,Ut)|0,d=d+Math.imul(mt,qt)|0,o=o+Math.imul(mt,Dt)|0,o=o+Math.imul(bt,qt)|0,g=g+Math.imul(bt,Dt)|0,d=d+Math.imul(yt,Ft)|0,o=o+Math.imul(yt,Vt)|0,o=o+Math.imul(gt,Ft)|0,g=g+Math.imul(gt,Vt)|0,d=d+Math.imul(it,Ht)|0,o=o+Math.imul(it,$t)|0,o=o+Math.imul(ct,Ht)|0,g=g+Math.imul(ct,$t)|0,d=d+Math.imul(et,Gt)|0,o=o+Math.imul(et,jt)|0,o=o+Math.imul(st,Gt)|0,g=g+Math.imul(st,jt)|0;var un=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(Lt,Tt),o=Math.imul(Lt,Ct),o=o+Math.imul(Rt,Tt)|0,g=Math.imul(Rt,Ct),d=d+Math.imul(Bt,zt)|0,o=o+Math.imul(Bt,Kt)|0,o=o+Math.imul(At,zt)|0,g=g+Math.imul(At,Kt)|0,d=d+Math.imul(It,Nt)|0,o=o+Math.imul(It,Ot)|0,o=o+Math.imul(_t,Nt)|0,g=g+Math.imul(_t,Ot)|0,d=d+Math.imul(vt,Wt)|0,o=o+Math.imul(vt,Ut)|0,o=o+Math.imul(St,Wt)|0,g=g+Math.imul(St,Ut)|0,d=d+Math.imul(wt,qt)|0,o=o+Math.imul(wt,Dt)|0,o=o+Math.imul(kt,qt)|0,g=g+Math.imul(kt,Dt)|0,d=d+Math.imul(mt,Ft)|0,o=o+Math.imul(mt,Vt)|0,o=o+Math.imul(bt,Ft)|0,g=g+Math.imul(bt,Vt)|0,d=d+Math.imul(yt,Ht)|0,o=o+Math.imul(yt,$t)|0,o=o+Math.imul(gt,Ht)|0,g=g+Math.imul(gt,$t)|0,d=d+Math.imul(it,Gt)|0,o=o+Math.imul(it,jt)|0,o=o+Math.imul(ct,Gt)|0,g=g+Math.imul(ct,jt)|0;var cn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(cn>>>26)|0,cn&=67108863,d=Math.imul(Lt,zt),o=Math.imul(Lt,Kt),o=o+Math.imul(Rt,zt)|0,g=Math.imul(Rt,Kt),d=d+Math.imul(Bt,Nt)|0,o=o+Math.imul(Bt,Ot)|0,o=o+Math.imul(At,Nt)|0,g=g+Math.imul(At,Ot)|0,d=d+Math.imul(It,Wt)|0,o=o+Math.imul(It,Ut)|0,o=o+Math.imul(_t,Wt)|0,g=g+Math.imul(_t,Ut)|0,d=d+Math.imul(vt,qt)|0,o=o+Math.imul(vt,Dt)|0,o=o+Math.imul(St,qt)|0,g=g+Math.imul(St,Dt)|0,d=d+Math.imul(wt,Ft)|0,o=o+Math.imul(wt,Vt)|0,o=o+Math.imul(kt,Ft)|0,g=g+Math.imul(kt,Vt)|0,d=d+Math.imul(mt,Ht)|0,o=o+Math.imul(mt,$t)|0,o=o+Math.imul(bt,Ht)|0,g=g+Math.imul(bt,$t)|0,d=d+Math.imul(yt,Gt)|0,o=o+Math.imul(yt,jt)|0,o=o+Math.imul(gt,Gt)|0,g=g+Math.imul(gt,jt)|0;var hn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(Lt,Nt),o=Math.imul(Lt,Ot),o=o+Math.imul(Rt,Nt)|0,g=Math.imul(Rt,Ot),d=d+Math.imul(Bt,Wt)|0,o=o+Math.imul(Bt,Ut)|0,o=o+Math.imul(At,Wt)|0,g=g+Math.imul(At,Ut)|0,d=d+Math.imul(It,qt)|0,o=o+Math.imul(It,Dt)|0,o=o+Math.imul(_t,qt)|0,g=g+Math.imul(_t,Dt)|0,d=d+Math.imul(vt,Ft)|0,o=o+Math.imul(vt,Vt)|0,o=o+Math.imul(St,Ft)|0,g=g+Math.imul(St,Vt)|0,d=d+Math.imul(wt,Ht)|0,o=o+Math.imul(wt,$t)|0,o=o+Math.imul(kt,Ht)|0,g=g+Math.imul(kt,$t)|0,d=d+Math.imul(mt,Gt)|0,o=o+Math.imul(mt,jt)|0,o=o+Math.imul(bt,Gt)|0,g=g+Math.imul(bt,jt)|0;var ln=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(Lt,Wt),o=Math.imul(Lt,Ut),o=o+Math.imul(Rt,Wt)|0,g=Math.imul(Rt,Ut),d=d+Math.imul(Bt,qt)|0,o=o+Math.imul(Bt,Dt)|0,o=o+Math.imul(At,qt)|0,g=g+Math.imul(At,Dt)|0,d=d+Math.imul(It,Ft)|0,o=o+Math.imul(It,Vt)|0,o=o+Math.imul(_t,Ft)|0,g=g+Math.imul(_t,Vt)|0,d=d+Math.imul(vt,Ht)|0,o=o+Math.imul(vt,$t)|0,o=o+Math.imul(St,Ht)|0,g=g+Math.imul(St,$t)|0,d=d+Math.imul(wt,Gt)|0,o=o+Math.imul(wt,jt)|0,o=o+Math.imul(kt,Gt)|0,g=g+Math.imul(kt,jt)|0;var fn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(fn>>>26)|0,fn&=67108863,d=Math.imul(Lt,qt),o=Math.imul(Lt,Dt),o=o+Math.imul(Rt,qt)|0,g=Math.imul(Rt,Dt),d=d+Math.imul(Bt,Ft)|0,o=o+Math.imul(Bt,Vt)|0,o=o+Math.imul(At,Ft)|0,g=g+Math.imul(At,Vt)|0,d=d+Math.imul(It,Ht)|0,o=o+Math.imul(It,$t)|0,o=o+Math.imul(_t,Ht)|0,g=g+Math.imul(_t,$t)|0,d=d+Math.imul(vt,Gt)|0,o=o+Math.imul(vt,jt)|0,o=o+Math.imul(St,Gt)|0,g=g+Math.imul(St,jt)|0;var dn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Lt,Ft),o=Math.imul(Lt,Vt),o=o+Math.imul(Rt,Ft)|0,g=Math.imul(Rt,Vt),d=d+Math.imul(Bt,Ht)|0,o=o+Math.imul(Bt,$t)|0,o=o+Math.imul(At,Ht)|0,g=g+Math.imul(At,$t)|0,d=d+Math.imul(It,Gt)|0,o=o+Math.imul(It,jt)|0,o=o+Math.imul(_t,Gt)|0,g=g+Math.imul(_t,jt)|0;var pn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Lt,Ht),o=Math.imul(Lt,$t),o=o+Math.imul(Rt,Ht)|0,g=Math.imul(Rt,$t),d=d+Math.imul(Bt,Gt)|0,o=o+Math.imul(Bt,jt)|0,o=o+Math.imul(At,Gt)|0,g=g+Math.imul(At,jt)|0;var yn=(k+d|0)+((o&8191)<<13)|0;k=(g+(o>>>13)|0)+(yn>>>26)|0,yn&=67108863,d=Math.imul(Lt,Gt),o=Math.imul(Lt,jt),o=o+Math.imul(Rt,Gt)|0,g=Math.imul(Rt,jt);var gn=(k+d|0)+((o&8191)<<13)|0;return k=(g+(o>>>13)|0)+(gn>>>26)|0,gn&=67108863,w[0]=Zr,w[1]=Xr,w[2]=Qr,w[3]=tn,w[4]=en,w[5]=rn,w[6]=nn,w[7]=sn,w[8]=on,w[9]=an,w[10]=un,w[11]=cn,w[12]=hn,w[13]=ln,w[14]=fn,w[15]=dn,w[16]=pn,w[17]=yn,w[18]=gn,k!==0&&(w[19]=k,h.length++),h};Math.imul||(W=z);function J(m,s,a){a.negative=s.negative^m.negative,a.length=m.length+s.length;for(var h=0,l=0,p=0;p<a.length-1;p++){var w=l;l=0;for(var k=h&67108863,d=Math.min(p,s.length-1),o=Math.max(0,p-m.length+1);o<=d;o++){var g=p-o,O=m.words[g]|0,U=s.words[o]|0,q=O*U,V=q&67108863;w=w+(q/67108864|0)|0,V=V+k|0,k=V&67108863,w=w+(V>>>26)|0,l+=w>>>26,w&=67108863}a.words[p]=k,h=w,w=l}return h!==0?a.words[p]=h:a.length--,a._strip()}function lt(m,s,a){return J(m,s,a)}n.prototype.mulTo=function(s,a){var h,l=this.length+s.length;return this.length===10&&s.length===10?h=W(this,s,a):l<63?h=z(this,s,a):l<1024?h=J(this,s,a):h=lt(this,s,a),h};function tt(m,s){this.x=m,this.y=s}tt.prototype.makeRBT=function(s){for(var a=new Array(s),h=n.prototype._countBits(s)-1,l=0;l<s;l++)a[l]=this.revBin(l,h,s);return a},tt.prototype.revBin=function(s,a,h){if(s===0||s===h-1)return s;for(var l=0,p=0;p<a;p++)l|=(s&1)<<a-p-1,s>>=1;return l},tt.prototype.permute=function(s,a,h,l,p,w){for(var k=0;k<w;k++)l[k]=a[s[k]],p[k]=h[s[k]]},tt.prototype.transform=function(s,a,h,l,p,w){this.permute(w,s,a,h,l,p);for(var k=1;k<p;k<<=1)for(var d=k<<1,o=Math.cos(2*Math.PI/d),g=Math.sin(2*Math.PI/d),O=0;O<p;O+=d)for(var U=o,q=g,V=0;V<k;V++){var et=h[O+V],st=l[O+V],be=h[O+V+k],it=l[O+V+k],ct=U*be-q*it;it=U*it+q*be,be=ct,h[O+V]=et+be,l[O+V]=st+it,h[O+V+k]=et-be,l[O+V+k]=st-it,V!==d&&(ct=o*U-g*q,q=o*q+g*U,U=ct)}},tt.prototype.guessLen13b=function(s,a){var h=Math.max(a,s)|1,l=h&1,p=0;for(h=h/2|0;h;h=h>>>1)p++;return 1<<p+1+l},tt.prototype.conjugate=function(s,a,h){if(!(h<=1))for(var l=0;l<h/2;l++){var p=s[l];s[l]=s[h-l-1],s[h-l-1]=p,p=a[l],a[l]=-a[h-l-1],a[h-l-1]=-p}},tt.prototype.normalize13b=function(s,a){for(var h=0,l=0;l<a/2;l++){var p=Math.round(s[2*l+1]/a)*8192+Math.round(s[2*l]/a)+h;s[l]=p&67108863,p<67108864?h=0:h=p/67108864|0}return s},tt.prototype.convert13b=function(s,a,h,l){for(var p=0,w=0;w<a;w++)p=p+(s[w]|0),h[2*w]=p&8191,p=p>>>13,h[2*w+1]=p&8191,p=p>>>13;for(w=2*a;w<l;++w)h[w]=0;e(p===0),e((p&-8192)===0)},tt.prototype.stub=function(s){for(var a=new Array(s),h=0;h<s;h++)a[h]=0;return a},tt.prototype.mulp=function(s,a,h){var l=2*this.guessLen13b(s.length,a.length),p=this.makeRBT(l),w=this.stub(l),k=new Array(l),d=new Array(l),o=new Array(l),g=new Array(l),O=new Array(l),U=new Array(l),q=h.words;q.length=l,this.convert13b(s.words,s.length,k,l),this.convert13b(a.words,a.length,g,l),this.transform(k,w,d,o,l,p),this.transform(g,w,O,U,l,p);for(var V=0;V<l;V++){var et=d[V]*O[V]-o[V]*U[V];o[V]=d[V]*U[V]+o[V]*O[V],d[V]=et}return this.conjugate(d,o,l),this.transform(d,o,q,w,l,p),this.conjugate(q,w,l),this.normalize13b(q,l),h.negative=s.negative^a.negative,h.length=s.length+a.length,h._strip()},n.prototype.mul=function(s){var a=new n(null);return a.words=new Array(this.length+s.length),this.mulTo(s,a)},n.prototype.mulf=function(s){var a=new n(null);return a.words=new Array(this.length+s.length),lt(this,s,a)},n.prototype.imul=function(s){return this.clone().mulTo(s,this)},n.prototype.imuln=function(s){var a=s<0;a&&(s=-s),e(typeof s=="number"),e(s<67108864);for(var h=0,l=0;l<this.length;l++){var p=(this.words[l]|0)*s,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[l]=w&67108863}return h!==0&&(this.words[l]=h,this.length++),a?this.ineg():this},n.prototype.muln=function(s){return this.clone().imuln(s)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(s){var a=A(s);if(a.length===0)return new n(1);for(var h=this,l=0;l<a.length&&a[l]===0;l++,h=h.sqr());if(++l<a.length)for(var p=h.sqr();l<a.length;l++,p=p.sqr())a[l]!==0&&(h=h.mul(p));return h},n.prototype.iushln=function(s){e(typeof s=="number"&&s>=0);var a=s%26,h=(s-a)/26,l=67108863>>>26-a<<26-a,p;if(a!==0){var w=0;for(p=0;p<this.length;p++){var k=this.words[p]&l,d=(this.words[p]|0)-k<<a;this.words[p]=d|w,w=k>>>26-a}w&&(this.words[p]=w,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},n.prototype.ishln=function(s){return e(this.negative===0),this.iushln(s)},n.prototype.iushrn=function(s,a,h){e(typeof s=="number"&&s>=0);var l;a?l=(a-a%26)/26:l=0;var p=s%26,w=Math.min((s-p)/26,this.length),k=67108863^67108863>>>p<<p,d=h;if(l-=w,l=Math.max(0,l),d){for(var o=0;o<w;o++)d.words[o]=this.words[o];d.length=w}if(w!==0)if(this.length>w)for(this.length-=w,o=0;o<this.length;o++)this.words[o]=this.words[o+w];else this.words[0]=0,this.length=1;var g=0;for(o=this.length-1;o>=0&&(g!==0||o>=l);o--){var O=this.words[o]|0;this.words[o]=g<<26-p|O>>>p,g=O&k}return d&&g!==0&&(d.words[d.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(s,a,h){return e(this.negative===0),this.iushrn(s,a,h)},n.prototype.shln=function(s){return this.clone().ishln(s)},n.prototype.ushln=function(s){return this.clone().iushln(s)},n.prototype.shrn=function(s){return this.clone().ishrn(s)},n.prototype.ushrn=function(s){return this.clone().iushrn(s)},n.prototype.testn=function(s){e(typeof s=="number"&&s>=0);var a=s%26,h=(s-a)/26,l=1<<a;if(this.length<=h)return!1;var p=this.words[h];return!!(p&l)},n.prototype.imaskn=function(s){e(typeof s=="number"&&s>=0);var a=s%26,h=(s-a)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(a!==0&&h++,this.length=Math.min(h,this.length),a!==0){var l=67108863^67108863>>>a<<a;this.words[this.length-1]&=l}return this._strip()},n.prototype.maskn=function(s){return this.clone().imaskn(s)},n.prototype.iaddn=function(s){return e(typeof s=="number"),e(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},n.prototype._iaddn=function(s){this.words[0]+=s;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},n.prototype.isubn=function(s){if(e(typeof s=="number"),e(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this._strip()},n.prototype.addn=function(s){return this.clone().iaddn(s)},n.prototype.subn=function(s){return this.clone().isubn(s)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(s,a,h){var l=s.length+h,p;this._expand(l);var w,k=0;for(p=0;p<s.length;p++){w=(this.words[p+h]|0)+k;var d=(s.words[p]|0)*a;w-=d&67108863,k=(w>>26)-(d/67108864|0),this.words[p+h]=w&67108863}for(;p<this.length-h;p++)w=(this.words[p+h]|0)+k,k=w>>26,this.words[p+h]=w&67108863;if(k===0)return this._strip();for(e(k===-1),k=0,p=0;p<this.length;p++)w=-(this.words[p]|0)+k,k=w>>26,this.words[p]=w&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(s,a){var h=this.length-s.length,l=this.clone(),p=s,w=p.words[p.length-1]|0,k=this._countBits(w);h=26-k,h!==0&&(p=p.ushln(h),l.iushln(h),w=p.words[p.length-1]|0);var d=l.length-p.length,o;if(a!=="mod"){o=new n(null),o.length=d+1,o.words=new Array(o.length);for(var g=0;g<o.length;g++)o.words[g]=0}var O=l.clone()._ishlnsubmul(p,1,d);O.negative===0&&(l=O,o&&(o.words[d]=1));for(var U=d-1;U>=0;U--){var q=(l.words[p.length+U]|0)*67108864+(l.words[p.length+U-1]|0);for(q=Math.min(q/w|0,67108863),l._ishlnsubmul(p,q,U);l.negative!==0;)q--,l.negative=0,l._ishlnsubmul(p,1,U),l.isZero()||(l.negative^=1);o&&(o.words[U]=q)}return o&&o._strip(),l._strip(),a!=="div"&&h!==0&&l.iushrn(h),{div:o||null,mod:l}},n.prototype.divmod=function(s,a,h){if(e(!s.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var l,p,w;return this.negative!==0&&s.negative===0?(w=this.neg().divmod(s,a),a!=="mod"&&(l=w.div.neg()),a!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.iadd(s)),{div:l,mod:p}):this.negative===0&&s.negative!==0?(w=this.divmod(s.neg(),a),a!=="mod"&&(l=w.div.neg()),{div:l,mod:w.mod}):(this.negative&s.negative)!==0?(w=this.neg().divmod(s.neg(),a),a!=="div"&&(p=w.mod.neg(),h&&p.negative!==0&&p.isub(s)),{div:w.div,mod:p}):s.length>this.length||this.cmp(s)<0?{div:new n(0),mod:this}:s.length===1?a==="div"?{div:this.divn(s.words[0]),mod:null}:a==="mod"?{div:null,mod:new n(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new n(this.modrn(s.words[0]))}:this._wordDiv(s,a)},n.prototype.div=function(s){return this.divmod(s,"div",!1).div},n.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},n.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},n.prototype.divRound=function(s){var a=this.divmod(s);if(a.mod.isZero())return a.div;var h=a.div.negative!==0?a.mod.isub(s):a.mod,l=s.ushrn(1),p=s.andln(1),w=h.cmp(l);return w<0||p===1&&w===0?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)},n.prototype.modrn=function(s){var a=s<0;a&&(s=-s),e(s<=67108863);for(var h=(1<<26)%s,l=0,p=this.length-1;p>=0;p--)l=(h*l+(this.words[p]|0))%s;return a?-l:l},n.prototype.modn=function(s){return this.modrn(s)},n.prototype.idivn=function(s){var a=s<0;a&&(s=-s),e(s<=67108863);for(var h=0,l=this.length-1;l>=0;l--){var p=(this.words[l]|0)+h*67108864;this.words[l]=p/s|0,h=p%s}return this._strip(),a?this.ineg():this},n.prototype.divn=function(s){return this.clone().idivn(s)},n.prototype.egcd=function(s){e(s.negative===0),e(!s.isZero());var a=this,h=s.clone();a.negative!==0?a=a.umod(s):a=a.clone();for(var l=new n(1),p=new n(0),w=new n(0),k=new n(1),d=0;a.isEven()&&h.isEven();)a.iushrn(1),h.iushrn(1),++d;for(var o=h.clone(),g=a.clone();!a.isZero();){for(var O=0,U=1;(a.words[0]&U)===0&&O<26;++O,U<<=1);if(O>0)for(a.iushrn(O);O-- >0;)(l.isOdd()||p.isOdd())&&(l.iadd(o),p.isub(g)),l.iushrn(1),p.iushrn(1);for(var q=0,V=1;(h.words[0]&V)===0&&q<26;++q,V<<=1);if(q>0)for(h.iushrn(q);q-- >0;)(w.isOdd()||k.isOdd())&&(w.iadd(o),k.isub(g)),w.iushrn(1),k.iushrn(1);a.cmp(h)>=0?(a.isub(h),l.isub(w),p.isub(k)):(h.isub(a),w.isub(l),k.isub(p))}return{a:w,b:k,gcd:h.iushln(d)}},n.prototype._invmp=function(s){e(s.negative===0),e(!s.isZero());var a=this,h=s.clone();a.negative!==0?a=a.umod(s):a=a.clone();for(var l=new n(1),p=new n(0),w=h.clone();a.cmpn(1)>0&&h.cmpn(1)>0;){for(var k=0,d=1;(a.words[0]&d)===0&&k<26;++k,d<<=1);if(k>0)for(a.iushrn(k);k-- >0;)l.isOdd()&&l.iadd(w),l.iushrn(1);for(var o=0,g=1;(h.words[0]&g)===0&&o<26;++o,g<<=1);if(o>0)for(h.iushrn(o);o-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);a.cmp(h)>=0?(a.isub(h),l.isub(p)):(h.isub(a),p.isub(l))}var O;return a.cmpn(1)===0?O=l:O=p,O.cmpn(0)<0&&O.iadd(s),O},n.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var a=this.clone(),h=s.clone();a.negative=0,h.negative=0;for(var l=0;a.isEven()&&h.isEven();l++)a.iushrn(1),h.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=a.cmp(h);if(p<0){var w=a;a=h,h=w}else if(p===0||h.cmpn(1)===0)break;a.isub(h)}while(!0);return h.iushln(l)},n.prototype.invm=function(s){return this.egcd(s).a.umod(s)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(s){return this.words[0]&s},n.prototype.bincn=function(s){e(typeof s=="number");var a=s%26,h=(s-a)/26,l=1<<a;if(this.length<=h)return this._expand(h+1),this.words[h]|=l,this;for(var p=l,w=h;p!==0&&w<this.length;w++){var k=this.words[w]|0;k+=p,p=k>>>26,k&=67108863,this.words[w]=k}return p!==0&&(this.words[w]=p,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(s){var a=s<0;if(this.negative!==0&&!a)return-1;if(this.negative===0&&a)return 1;this._strip();var h;if(this.length>1)h=1;else{a&&(s=-s),e(s<=67108863,"Number is too big");var l=this.words[0]|0;h=l===s?0:l<s?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var a=this.ucmp(s);return this.negative!==0?-a|0:a},n.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var a=0,h=this.length-1;h>=0;h--){var l=this.words[h]|0,p=s.words[h]|0;if(l!==p){l<p?a=-1:l>p&&(a=1);break}}return a},n.prototype.gtn=function(s){return this.cmpn(s)===1},n.prototype.gt=function(s){return this.cmp(s)===1},n.prototype.gten=function(s){return this.cmpn(s)>=0},n.prototype.gte=function(s){return this.cmp(s)>=0},n.prototype.ltn=function(s){return this.cmpn(s)===-1},n.prototype.lt=function(s){return this.cmp(s)===-1},n.prototype.lten=function(s){return this.cmpn(s)<=0},n.prototype.lte=function(s){return this.cmp(s)<=0},n.prototype.eqn=function(s){return this.cmpn(s)===0},n.prototype.eq=function(s){return this.cmp(s)===0},n.red=function(s){return new pt(s)},n.prototype.toRed=function(s){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},n.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(s){return this.red=s,this},n.prototype.forceRed=function(s){return e(!this.red,"Already a number in reduction context"),this._forceRed(s)},n.prototype.redAdd=function(s){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},n.prototype.redIAdd=function(s){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},n.prototype.redSub=function(s){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},n.prototype.redISub=function(s){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},n.prototype.redShl=function(s){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},n.prototype.redMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},n.prototype.redIMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},n.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(s){return e(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var oe={k256:null,p224:null,p192:null,p25519:null};function ut(m,s){this.name=m,this.p=new n(s,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ut.prototype._tmp=function(){var s=new n(null);return s.words=new Array(Math.ceil(this.n/13)),s},ut.prototype.ireduce=function(s){var a=s,h;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),h=a.bitLength();while(h>this.n);var l=h<this.n?-1:a.ucmp(this.p);return l===0?(a.words[0]=0,a.length=1):l>0?a.isub(this.p):a.strip!==void 0?a.strip():a._strip(),a},ut.prototype.split=function(s,a){s.iushrn(this.n,0,a)},ut.prototype.imulK=function(s){return s.imul(this.k)};function te(){ut.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(te,ut),te.prototype.split=function(s,a){for(var h=4194303,l=Math.min(s.length,9),p=0;p<l;p++)a.words[p]=s.words[p];if(a.length=l,s.length<=9){s.words[0]=0,s.length=1;return}var w=s.words[9];for(a.words[a.length++]=w&h,p=10;p<s.length;p++){var k=s.words[p]|0;s.words[p-10]=(k&h)<<4|w>>>22,w=k}w>>>=22,s.words[p-10]=w,w===0&&s.length>10?s.length-=10:s.length-=9},te.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var a=0,h=0;h<s.length;h++){var l=s.words[h]|0;a+=l*977,s.words[h]=a&67108863,a=l*64+(a/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _e(){ut.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(_e,ut);function $n(){ut.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r($n,ut);function Yr(){ut.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(Yr,ut),Yr.prototype.imulK=function(s){for(var a=0,h=0;h<s.length;h++){var l=(s.words[h]|0)*19+a,p=l&67108863;l>>>=26,s.words[h]=p,a=l}return a!==0&&(s.words[s.length++]=a),s},n._prime=function(s){if(oe[s])return oe[s];var a;if(s==="k256")a=new te;else if(s==="p224")a=new _e;else if(s==="p192")a=new $n;else if(s==="p25519")a=new Yr;else throw new Error("Unknown prime "+s);return oe[s]=a,a};function pt(m){if(typeof m=="string"){var s=n._prime(m);this.m=s.p,this.prime=s}else e(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}pt.prototype._verify1=function(s){e(s.negative===0,"red works only with positives"),e(s.red,"red works only with red numbers")},pt.prototype._verify2=function(s,a){e((s.negative|a.negative)===0,"red works only with positives"),e(s.red&&s.red===a.red,"red works only with red numbers")},pt.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(I(s,s.umod(this.m)._forceRed(this)),s)},pt.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},pt.prototype.add=function(s,a){this._verify2(s,a);var h=s.add(a);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},pt.prototype.iadd=function(s,a){this._verify2(s,a);var h=s.iadd(a);return h.cmp(this.m)>=0&&h.isub(this.m),h},pt.prototype.sub=function(s,a){this._verify2(s,a);var h=s.sub(a);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},pt.prototype.isub=function(s,a){this._verify2(s,a);var h=s.isub(a);return h.cmpn(0)<0&&h.iadd(this.m),h},pt.prototype.shl=function(s,a){return this._verify1(s),this.imod(s.ushln(a))},pt.prototype.imul=function(s,a){return this._verify2(s,a),this.imod(s.imul(a))},pt.prototype.mul=function(s,a){return this._verify2(s,a),this.imod(s.mul(a))},pt.prototype.isqr=function(s){return this.imul(s,s.clone())},pt.prototype.sqr=function(s){return this.mul(s,s)},pt.prototype.sqrt=function(s){if(s.isZero())return s.clone();var a=this.m.andln(3);if(e(a%2===1),a===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(s,h)}for(var l=this.m.subn(1),p=0;!l.isZero()&&l.andln(1)===0;)p++,l.iushrn(1);e(!l.isZero());var w=new n(1).toRed(this),k=w.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,d).cmp(k)!==0;)o.redIAdd(k);for(var g=this.pow(o,l),O=this.pow(s,l.addn(1).iushrn(1)),U=this.pow(s,l),q=p;U.cmp(w)!==0;){for(var V=U,et=0;V.cmp(w)!==0;et++)V=V.redSqr();e(et<q);var st=this.pow(g,new n(1).iushln(q-et-1));O=O.redMul(st),g=st.redSqr(),U=U.redMul(g),q=et}return O},pt.prototype.invm=function(s){var a=s._invmp(this.m);return a.negative!==0?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},pt.prototype.pow=function(s,a){if(a.isZero())return new n(1).toRed(this);if(a.cmpn(1)===0)return s.clone();var h=4,l=new Array(1<<h);l[0]=new n(1).toRed(this),l[1]=s;for(var p=2;p<l.length;p++)l[p]=this.mul(l[p-1],s);var w=l[0],k=0,d=0,o=a.bitLength()%26;for(o===0&&(o=26),p=a.length-1;p>=0;p--){for(var g=a.words[p],O=o-1;O>=0;O--){var U=g>>O&1;if(w!==l[0]&&(w=this.sqr(w)),U===0&&k===0){d=0;continue}k<<=1,k|=U,d++,!(d!==h&&(p!==0||O!==0))&&(w=this.mul(w,l[k]),d=0,k=0)}o=26}return w},pt.prototype.convertTo=function(s){var a=s.umod(this.m);return a===s?a.clone():a},pt.prototype.convertFrom=function(s){var a=s.clone();return a.red=null,a},n.mont=function(s){return new Be(s)};function Be(m){pt.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(Be,pt),Be.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},Be.prototype.convertFrom=function(s){var a=this.imod(s.mul(this.rinv));return a.red=null,a},Be.prototype.imul=function(s,a){if(s.isZero()||a.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(a),l=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(l).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Be.prototype.mul=function(s,a){if(s.isZero()||a.isZero())return new n(0)._forceRed(this);var h=s.mul(a),l=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(l).iushrn(this.shift),w=p;return p.cmp(this.m)>=0?w=p.isub(this.m):p.cmpn(0)<0&&(w=p.iadd(this.m)),w._forceRed(this)},Be.prototype.invm=function(s){var a=this.imod(s._invmp(this.m).mul(this.r2));return a._forceRed(this)}})(typeof kn>"u"||kn,ys)});var bs=Ye((Ma,ms)=>{ae();ue();var fr=mi().Buffer;function ki(c){if(c.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<c.length;r++){var n=c.charAt(r),i=n.charCodeAt(0);if(t[i]!==255)throw new TypeError(n+" is ambiguous");t[i]=r}var u=c.length,f=c.charAt(0),b=Math.log(u)/Math.log(256),I=Math.log(256)/Math.log(u);function M(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=fr.from(_)),!fr.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var L=0,A=0,z=0,W=_.length;z!==W&&_[z]===0;)z++,L++;for(var J=(W-z)*I+1>>>0,lt=new Uint8Array(J);z!==W;){for(var tt=_[z],oe=0,ut=J-1;(tt!==0||oe<A)&&ut!==-1;ut--,oe++)tt+=256*lt[ut]>>>0,lt[ut]=tt%u>>>0,tt=tt/u>>>0;if(tt!==0)throw new Error("Non-zero carry");A=oe,z++}for(var te=J-A;te!==J&&lt[te]===0;)te++;for(var _e=f.repeat(L);te<J;++te)_e+=c.charAt(lt[te]);return _e}function x(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return fr.alloc(0);var L=0;if(_[L]!==" "){for(var A=0,z=0;_[L]===f;)A++,L++;for(var W=(_.length-L)*b+1>>>0,J=new Uint8Array(W);_[L];){var lt=t[_.charCodeAt(L)];if(lt===255)return;for(var tt=0,oe=W-1;(lt!==0||tt<z)&&oe!==-1;oe--,tt++)lt+=u*J[oe]>>>0,J[oe]=lt%256>>>0,lt=lt/256>>>0;if(lt!==0)throw new Error("Non-zero carry");z=tt,L++}if(_[L]!==" "){for(var ut=W-z;ut!==W&&J[ut]===0;)ut++;var te=fr.allocUnsafe(A+(W-ut));te.fill(0,0,A);for(var _e=A;ut!==W;)te[_e++]=J[ut++];return te}}}function N(_){var L=x(_);if(L)return L;throw new Error("Non-base"+u+" character")}return{encode:M,decodeUnsafe:x,decode:N}}ms.exports=ki});var ks=Ye((Ta,ws)=>{ae();ue();var vi=bs(),Si="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";ws.exports=vi(Si)});var _n=Ye(S=>{ae();ue();Object.defineProperty(S,"__esModule",{value:!0});S.s16=S.s8=S.nu64be=S.u48be=S.u40be=S.u32be=S.u24be=S.u16be=S.nu64=S.u48=S.u40=S.u32=S.u24=S.u16=S.u8=S.offset=S.greedy=S.Constant=S.UTF8=S.CString=S.Blob=S.Boolean=S.BitField=S.BitStructure=S.VariantLayout=S.Union=S.UnionLayoutDiscriminator=S.UnionDiscriminator=S.Structure=S.Sequence=S.DoubleBE=S.Double=S.FloatBE=S.Float=S.NearInt64BE=S.NearInt64=S.NearUInt64BE=S.NearUInt64=S.IntBE=S.Int=S.UIntBE=S.UInt=S.OffsetLayout=S.GreedyCount=S.ExternalLayout=S.bindConstructorLayout=S.nameWithProperty=S.Layout=S.uint8ArrayToBuffer=S.checkUint8Array=void 0;S.constant=S.utf8=S.cstr=S.blob=S.unionLayoutDiscriminator=S.union=S.seq=S.bits=S.struct=S.f64be=S.f64=S.f32be=S.f32=S.ns64be=S.s48be=S.s40be=S.s32be=S.s24be=S.s16be=S.ns64=S.s48=S.s40=S.s32=S.s24=void 0;var Sn=hs();function qe(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}S.checkUint8Array=qe;function Y(c){return qe(c),Sn.Buffer.from(c.buffer,c.byteOffset,c.length)}S.uint8ArrayToBuffer=Y;var Q=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};S.Layout=Q;function In(c,t){return t.property?c+"["+t.property+"]":c}S.nameWithProperty=In;function Ii(c,t){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Q))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=t,t.boundConstructor_=c,t.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(c,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}S.bindConstructorLayout=Ii;var Qt=class extends Q{isCount(){throw new Error("ExternalLayout is abstract")}};S.ExternalLayout=Qt;var dr=class extends Qt{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){qe(t);let r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};S.GreedyCount=dr;var Ze=class extends Qt{constructor(t,e=0,r){if(!(t instanceof Q))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof ee||this.layout instanceof se}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};S.OffsetLayout=Ze;var ee=class extends Q{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Y(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Y(e).writeUIntLE(t,r,this.span),this.span}};S.UInt=ee;var se=class extends Q{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Y(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Y(e).writeUIntBE(t,r,this.span),this.span}};S.UIntBE=se;var pe=class extends Q{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Y(t).readIntLE(e,this.span)}encode(t,e,r=0){return Y(e).writeIntLE(t,r,this.span),this.span}};S.Int=pe;var we=class extends Q{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Y(t).readIntBE(e,this.span)}encode(t,e,r=0){return Y(e).writeIntBE(t,r,this.span),this.span}};S.IntBE=we;var vn=Math.pow(2,32);function Mr(c){let t=Math.floor(c/vn),e=c-t*vn;return{hi32:t,lo32:e}}function Er(c,t){return c*vn+t}var pr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){let r=Y(t),n=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Er(i,n)}encode(t,e,r=0){let n=Mr(t),i=Y(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}};S.NearUInt64=pr;var yr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){let r=Y(t),n=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Er(n,i)}encode(t,e,r=0){let n=Mr(t),i=Y(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}};S.NearUInt64BE=yr;var gr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){let r=Y(t),n=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Er(i,n)}encode(t,e,r=0){let n=Mr(t),i=Y(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}};S.NearInt64=gr;var mr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){let r=Y(t),n=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Er(n,i)}encode(t,e,r=0){let n=Mr(t),i=Y(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}};S.NearInt64BE=mr;var br=class extends Q{constructor(t){super(4,t)}decode(t,e=0){return Y(t).readFloatLE(e)}encode(t,e,r=0){return Y(e).writeFloatLE(t,r),4}};S.Float=br;var wr=class extends Q{constructor(t){super(4,t)}decode(t,e=0){return Y(t).readFloatBE(e)}encode(t,e,r=0){return Y(e).writeFloatBE(t,r),4}};S.FloatBE=wr;var kr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){return Y(t).readDoubleLE(e)}encode(t,e,r=0){return Y(e).writeDoubleLE(t,r),8}};S.Double=kr;var vr=class extends Q{constructor(t){super(8,t)}decode(t,e=0){return Y(t).readDoubleBE(e)}encode(t,e,r=0){return Y(e).writeDoubleBE(t,r),8}};S.DoubleBE=vr;var Sr=class extends Q{constructor(t,e,r){if(!(t instanceof Q))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Qt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof Qt)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof Qt&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){let r=[],n=0,i=this.count;for(i instanceof Qt&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){let n=this.elementLayout,i=t.reduce((u,f)=>u+n.encode(f,e,r+u),0);return this.count instanceof Qt&&this.count.encode(t.length,e,r),i}};S.Sequence=Sr;var Ir=class extends Q{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof Q,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(let i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((n,i)=>{let u=i.getSpan(t,e);return e+=u,n+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){qe(t);let r=this.makeDestinationObject();for(let n of this.fields)if(n.property!==void 0&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let n=r,i=0,u=0;for(let f of this.fields){let b=f.span;if(u=0<b?b:0,f.property!==void 0){let I=t[f.property];I!==void 0&&(u=f.encode(I,e,r),0>b&&(b=f.getSpan(e,r)))}i=r,r+=b}return i+u-n}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};S.Structure=Ir;var Xe=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};S.UnionDiscriminator=Xe;var Ue=class extends Xe{constructor(t,e){if(!(t instanceof Qt&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};S.UnionLayoutDiscriminator=Ue;var Qe=class extends Q{constructor(t,e,r){let n;if(t instanceof ee||t instanceof se)n=new Ue(new Ze(t));else if(t instanceof Qt&&t.isCount())n=new Ue(t);else if(t instanceof Xe)n=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Q))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof ee||t instanceof se)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof ee||t instanceof se,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return u(f)},this.configGetSourceVariant=function(f){u=f.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r,n=this.discriminator,i=n.decode(t,e),u=this.registry[i];if(u===void 0){let f=this.defaultLayout,b=0;this.usesPrefixDiscriminator&&(b=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[f.property]=f.decode(t,e+b)}else r=u.decode(t,e);return r}encode(t,e,r=0){let n=this.getSourceVariant(t);if(n===void 0){let i=this.discriminator,u=this.defaultLayout,f=0;return this.usesPrefixDiscriminator&&(f=i.layout.span),i.encode(t[i.property],e,r),f+u.encode(t[u.property],e,r+f)}return n.encode(t,e,r)}addVariant(t,e,r){let n=new _r(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};S.Union=Qe;var _r=class extends Q{constructor(t,e,r,n){if(!(t instanceof Qe))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&n===void 0&&(n=r,r=null),r){if(!(r instanceof Q))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof n!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};S.VariantLayout=_r;function We(c){return 0>c&&(c+=4294967296),c}var tr=class extends Q{constructor(t,e,r){if(!(t instanceof ee||t instanceof se))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(i){return n=We(i),this},this._packedGetValue=function(){return n}}decode(t,e=0){let r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(let i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){let n=this.word.decode(e,r);this._packedSetValue(n);for(let i of this.fields)if(i.property!==void 0){let u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new er(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new Br(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};S.BitStructure=tr;var er=class{constructor(t,e,r){if(!(t instanceof tr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let n=8*t.span,i=t.fields.reduce((u,f)=>u+f.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=We(this.valueMask<<this.start),this.property=r}decode(t,e){let r=this.container._packedGetValue();return We(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==We(t&this.valueMask))throw new TypeError(In("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=We(t<<this.start);this.container._packedSetValue(We(e&~this.wordMask)|r)}};S.BitField=er;var Br=class extends er{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};S.Boolean=Br;var Ar=class extends Q{constructor(t,e){if(!(t instanceof Qt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Qt||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Y(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof Qt&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(In("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");let i=Y(t);return Y(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof Qt&&this.length.encode(n,e,r),n}};S.Blob=Ar;var Lr=class extends Q{constructor(t){super(-1,t)}getSpan(t,e=0){qe(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){let r=this.getSpan(t,e);return Y(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Sn.Buffer.from(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");let u=Y(e);return n.copy(u,r),u[r+i]=0,i+1}};S.CString=Lr;var Rr=class extends Q{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return qe(t),t.length-e}decode(t,e=0){let r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Y(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));let n=Sn.Buffer.from(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(Y(e),r),i}};S.UTF8=Rr;var xr=class extends Q{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};S.Constant=xr;S.greedy=(c,t)=>new dr(c,t);S.offset=(c,t,e)=>new Ze(c,t,e);S.u8=c=>new ee(1,c);S.u16=c=>new ee(2,c);S.u24=c=>new ee(3,c);S.u32=c=>new ee(4,c);S.u40=c=>new ee(5,c);S.u48=c=>new ee(6,c);S.nu64=c=>new pr(c);S.u16be=c=>new se(2,c);S.u24be=c=>new se(3,c);S.u32be=c=>new se(4,c);S.u40be=c=>new se(5,c);S.u48be=c=>new se(6,c);S.nu64be=c=>new yr(c);S.s8=c=>new pe(1,c);S.s16=c=>new pe(2,c);S.s24=c=>new pe(3,c);S.s32=c=>new pe(4,c);S.s40=c=>new pe(5,c);S.s48=c=>new pe(6,c);S.ns64=c=>new gr(c);S.s16be=c=>new we(2,c);S.s24be=c=>new we(3,c);S.s32be=c=>new we(4,c);S.s40be=c=>new we(5,c);S.s48be=c=>new we(6,c);S.ns64be=c=>new mr(c);S.f32=c=>new br(c);S.f32be=c=>new wr(c);S.f64=c=>new kr(c);S.f64be=c=>new vr(c);S.struct=(c,t,e)=>new Ir(c,t,e);S.bits=(c,t,e)=>new tr(c,t,e);S.seq=(c,t,e)=>new Sr(c,t,e);S.union=(c,t,e)=>new Qe(c,t,e);S.unionLayoutDiscriminator=(c,t)=>new Ue(c,t);S.blob=(c,t)=>new Ar(c,t);S.cstr=c=>new Lr(c);S.utf8=(c,t)=>new Rr(c,t);S.constant=(c,t)=>new xr(c,t)});var vs=Ye(De=>{ae();ue();Object.defineProperty(De,"__esModule",{value:!0});var Pr;function _i(c){{let t=le.Buffer.from(c);t.reverse();let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return Pr.toBigInt(c,!1)}De.toBigIntLE=_i;function Bi(c){{let t=c.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return Pr.toBigInt(c,!0)}De.toBigIntBE=Bi;function Ai(c,t){{let e=c.toString(16),r=le.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}return Pr.fromBigInt(c,le.Buffer.allocUnsafe(t),!1)}De.toBufferLE=Ai;function Li(c,t){{let e=c.toString(16);return le.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}return Pr.fromBigInt(c,le.Buffer.allocUnsafe(t),!0)}De.toBufferBE=Li});ae();ue();gi();var Tn=Ae(gs()),Yt=Ae(ks());var je=Ae(bi()),y=Ae(_n()),Zs=Ae(_n()),ur=Ae(vs());var Xs=Ae(wi());var Ri=Le.utils.randomPrivateKey,Ss=()=>{let c=Le.utils.randomPrivateKey(),t=zr(c),e=new Uint8Array(64);return e.set(c),e.set(t,32),{publicKey:t,secretKey:e}},zr=Le.getPublicKey;function Is(c){try{return Le.ExtendedPoint.fromHex(c),!0}catch{return!1}}var qn=(c,t)=>Le.sign(c,t.slice(0,32)),xi=Le.verify,$=c=>F.isBuffer(c)?c:c instanceof Uint8Array?F.from(c.buffer,c.byteOffset,c.byteLength):F.from(c),Kr=class{constructor(t){Object.assign(this,t)}encode(){return F.from((0,je.serialize)(Cr,this))}static decode(t){return(0,je.deserialize)(Cr,this,t)}static decodeUnchecked(t){return(0,je.deserializeUnchecked)(Cr,this,t)}},_s=class extends Kr{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}},Cr=new Map,Qs,Mi=32,me=32;function Ei(c){return c._bn!==void 0}var Bs=1,E=class extends Kr{constructor(t){if(super({}),this._bn=void 0,Ei(t))this._bn=t._bn;else{if(typeof t=="string"){let e=Yt.default.decode(t);if(e.length!=me)throw new Error("Invalid public key input");this._bn=new Tn.default(e)}else this._bn=new Tn.default(t);if(this._bn.byteLength()>me)throw new Error("Invalid public key input")}}static unique(){let t=new E(Bs);return Bs+=1,new E(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Yt.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(F);if(t.length===me)return t;let e=F.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){let n=F.concat([t.toBuffer(),F.from(e),r.toBuffer()]),i=mn(n);return new E(i)}static createProgramAddressSync(t,e){let r=F.alloc(0);t.forEach(function(i){if(i.length>Mi)throw new TypeError("Max seed length exceeded");r=F.concat([r,$(i)])}),r=F.concat([r,e.toBuffer(),F.from("ProgramDerivedAddress")]);let n=mn(r);if(Is(n))throw new Error("Invalid seeds, address must fall off the curve");return new E(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,n;for(;r!=0;){try{let i=t.concat(F.from([r]));n=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new E(t);return Is(e.toBytes())}};Qs=E;E.default=new Qs("11111111111111111111111111111111");Cr.set(E,{kind:"struct",fields:[["_bn","u256"]]});var As=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let e=$(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=$(Ri()),this._publicKey=$(zr(this._secretKey))}get publicKey(){return new E(this._publicKey)}get secretKey(){return F.concat([this._secretKey,this._publicKey],64)}},Ja=new E("BPFLoader1111111111111111111111111111111111"),Pe=1280-40-8,Dn=127,Nr=64,Or=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Or.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Wr=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Wr.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Me=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Me.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Fe=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});let n=i=>{let u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:n(i.programId),accountKeyIndexes:i.keys.map(u=>n(u.pubkey)),data:i.data}))}},G=(c="publicKey")=>y.blob(32,c),Pi=(c="signature")=>y.blob(64,c),Ee=(c="string")=>{let t=y.struct([y.u32("length"),y.u32("lengthPadding"),y.blob(y.offset(y.u32(),-8),"chars")],c),e=t.decode.bind(t),r=t.encode.bind(t),n=t;return n.decode=(i,u)=>e(i,u).chars.toString(),n.encode=(i,u,f)=>{let b={chars:F.from(i,"utf8")};return r(b,u,f)},n.alloc=i=>y.u32().span+y.u32().span+F.from(i,"utf8").length,n},Ti=(c="authorized")=>y.struct([G("staker"),G("withdrawer")],c),Ci=(c="lockup")=>y.struct([y.ns64("unixTimestamp"),y.ns64("epoch"),G("custodian")],c),zi=(c="voteInit")=>y.struct([G("nodePubkey"),G("authorizedVoter"),G("authorizedWithdrawer"),y.u8("commission")],c),Ki=(c="voteAuthorizeWithSeedArgs")=>y.struct([y.u32("voteAuthorizationType"),G("currentAuthorityDerivedKeyOwnerPubkey"),Ee("currentAuthorityDerivedKeySeed"),G("newAuthorized")],c);function ti(c,t){let e=n=>{if(n.span>=0)return n.span;if(typeof n.alloc=="function")return n.alloc(t[n.property]);if("count"in n&&"elementLayout"in n){let i=t[n.property];if(Array.isArray(i))return i.length*e(n.elementLayout)}else if("fields"in n)return ti({layout:n},t[n.property]);return 0},r=0;return c.layout.fields.forEach(n=>{r+=e(n)}),r}function re(c){let t=0,e=0;for(;;){let r=c.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function ie(c,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){c.push(r);break}else r|=128,c.push(r)}}function X(c,t){if(!c)throw new Error(t||"Assertion failed")}var Ve=class{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let r=new Map,n=u=>{let f=u.toBase58(),b=r.get(f);return b===void 0&&(b={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,b)),b},i=n(e);i.isSigner=!0,i.isWritable=!0;for(let u of t){n(u.programId).isInvoked=!0;for(let f of u.keys){let b=n(f.pubkey);b.isSigner||=f.isSigner,b.isWritable||=f.isWritable}}return new Ve(e,r)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];X(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,b])=>b.isSigner&&b.isWritable),r=t.filter(([,b])=>b.isSigner&&!b.isWritable),n=t.filter(([,b])=>!b.isSigner&&b.isWritable),i=t.filter(([,b])=>!b.isSigner&&!b.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{X(e.length>0,"Expected at least one writable signer key");let[b]=e[0];X(b===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let f=[...e.map(([b])=>new E(b)),...r.map(([b])=>new E(b)),...n.map(([b])=>new E(b)),...i.map(([b])=>new E(b))];return[u,f]}extractTableLookup(t){let[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&n.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){let r=new Array,n=new Array;for(let[i,u]of this.keyMetaMap.entries())if(e(u)){let f=new E(i),b=t.findIndex(I=>I.equals(f));b>=0&&(X(b<256,"Max lookup table index exceeded"),r.push(b),n.push(f),this.keyMetaMap.delete(i))}return[r,n]}},ei="Reached end of buffer unexpectedly";function fe(c){if(c.length===0)throw new Error(ei);return c.shift()}function ne(c,...t){let[e]=t;if(t.length===2?e+(t[1]??0)>c.length:e>=c.length)throw new Error(ei);return c.splice(...t)}var ce=class{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new E(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Yt.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fe(this.staticAccountKeys)}static compile(t){let e=Ve.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),u=new Fe(n).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:Yt.default.encode(f.data)}));return new ce({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{let r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];ie(e,t);let r=this.instructions.map(x=>{let{accounts:N,programIdIndex:_}=x,L=Array.from(Yt.default.decode(x.data)),A=[];ie(A,N.length);let z=[];return ie(z,L.length),{programIdIndex:_,keyIndicesCount:F.from(A),keyIndices:N,dataLength:F.from(z),data:L}}),n=[];ie(n,r.length);let i=F.alloc(Pe);F.from(n).copy(i);let u=n.length;r.forEach(x=>{let _=y.struct([y.u8("programIdIndex"),y.blob(x.keyIndicesCount.length,"keyIndicesCount"),y.seq(y.u8("keyIndex"),x.keyIndices.length,"keyIndices"),y.blob(x.dataLength.length,"dataLength"),y.seq(y.u8("userdatum"),x.data.length,"data")]).encode(x,i,u);u+=_}),i=i.slice(0,u);let f=y.struct([y.blob(1,"numRequiredSignatures"),y.blob(1,"numReadonlySignedAccounts"),y.blob(1,"numReadonlyUnsignedAccounts"),y.blob(e.length,"keyCount"),y.seq(G("key"),t,"keys"),G("recentBlockhash")]),b={numRequiredSignatures:F.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:F.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:F.from([this.header.numReadonlyUnsignedAccounts]),keyCount:F.from(e),keys:this.accountKeys.map(x=>$(x.toBytes())),recentBlockhash:Yt.default.decode(this.recentBlockhash)},I=F.alloc(2048),M=f.encode(b,I);return i.copy(I,M),I.slice(0,M+i.length)}static from(t){let e=[...t],r=fe(e);if(r!==(r&Dn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=fe(e),i=fe(e),u=re(e),f=[];for(let N=0;N<u;N++){let _=ne(e,0,me);f.push(new E(F.from(_)))}let b=ne(e,0,me),I=re(e),M=[];for(let N=0;N<I;N++){let _=fe(e),L=re(e),A=ne(e,0,L),z=re(e),W=ne(e,0,z),J=Yt.default.encode(F.from(W));M.push({programIdIndex:_,accounts:A,data:J})}let x={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:Yt.default.encode(F.from(b)),accountKeys:f,instructions:M};return new ce(x)}},Se=class{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fe(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){let n=t-r,i=this.addressTableLookups.reduce((u,f)=>u+f.writableIndexes.length,0);return n<i}else if(t>=this.header.numRequiredSignatures){let n=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return n<u}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=t.find(i=>i.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let i of r.writableIndexes)if(i<n.state.addresses.length)e.writable.push(n.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(let i of r.readonlyIndexes)if(i<n.state.addresses.length)e.readonly.push(n.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){let e=Ve.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(let M of i){let x=e.extractTableLookup(M);if(x!==void 0){let[N,{writable:_,readonly:L}]=x;r.push(N),n.writable.push(..._),n.readonly.push(...L)}}let[u,f]=e.getMessageComponents(),I=new Fe(f,n).compileInstructions(t.instructions);return new Se({header:u,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:I,addressTableLookups:r})}serialize(){let t=Array();ie(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),r=Array();ie(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),i=Array();ie(i,this.addressTableLookups.length);let u=y.struct([y.u8("prefix"),y.struct([y.u8("numRequiredSignatures"),y.u8("numReadonlySignedAccounts"),y.u8("numReadonlyUnsignedAccounts")],"header"),y.blob(t.length,"staticAccountKeysLength"),y.seq(G(),this.staticAccountKeys.length,"staticAccountKeys"),G("recentBlockhash"),y.blob(r.length,"instructionsLength"),y.blob(e.length,"serializedInstructions"),y.blob(i.length,"addressTableLookupsLength"),y.blob(n.length,"serializedAddressTableLookups")]),f=new Uint8Array(Pe),b=1<<7,I=u.encode({prefix:b,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(M=>M.toBytes()),recentBlockhash:Yt.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},f);return f.slice(0,I)}serializeInstructions(){let t=0,e=new Uint8Array(Pe);for(let r of this.compiledInstructions){let n=Array();ie(n,r.accountKeyIndexes.length);let i=Array();ie(i,r.data.length);let u=y.struct([y.u8("programIdIndex"),y.blob(n.length,"encodedAccountKeyIndexesLength"),y.seq(y.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),y.blob(i.length,"encodedDataLength"),y.blob(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Pe);for(let r of this.addressTableLookups){let n=Array();ie(n,r.writableIndexes.length);let i=Array();ie(i,r.readonlyIndexes.length);let u=y.struct([G("accountKey"),y.blob(n.length,"encodedWritableIndexesLength"),y.seq(y.u8(),r.writableIndexes.length,"writableIndexes"),y.blob(i.length,"encodedReadonlyIndexesLength"),y.seq(y.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],r=fe(e),n=r&Dn;X(r!==n,"Expected versioned message but received legacy message");let i=n;X(i===0,`Expected versioned message with version 0 but found version ${i}`);let u={numRequiredSignatures:fe(e),numReadonlySignedAccounts:fe(e),numReadonlyUnsignedAccounts:fe(e)},f=[],b=re(e);for(let L=0;L<b;L++)f.push(new E(ne(e,0,me)));let I=Yt.default.encode(ne(e,0,me)),M=re(e),x=[];for(let L=0;L<M;L++){let A=fe(e),z=re(e),W=ne(e,0,z),J=re(e),lt=new Uint8Array(ne(e,0,J));x.push({programIdIndex:A,accountKeyIndexes:W,data:lt})}let N=re(e),_=[];for(let L=0;L<N;L++){let A=new E(ne(e,0,me)),z=re(e),W=ne(e,0,z),J=re(e),lt=ne(e,0,J);_.push({accountKey:A,writableIndexes:W,readonlyIndexes:lt})}return new Se({header:u,staticAccountKeys:f,recentBlockhash:I,compiledInstructions:x,addressTableLookups:_})}},ri={deserializeMessageVersion(c){let t=c[0],e=t&Dn;return e===t?"legacy":e},deserialize:c=>{let t=ri.deserializeMessageVersion(c);if(t==="legacy")return ce.from(c);if(t===0)return Se.deserialize(c);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},ke=function(c){return c[c.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",c[c.PROCESSED=1]="PROCESSED",c[c.TIMED_OUT=2]="TIMED_OUT",c[c.NONCE_INVALID=3]="NONCE_INVALID",c}({}),Ni=F.alloc(Nr).fill(0),nt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=F.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},Z=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{let{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new nt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<e.length;A++)if(e[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);let n=[],i=[];e.forEach(A=>{A.keys.forEach(W=>{i.push({...W})});let z=A.programId.toString();n.includes(z)||n.push(z)}),n.forEach(A=>{i.push({pubkey:new E(A),isSigner:!1,isWritable:!1})});let u=[];i.forEach(A=>{let z=A.pubkey.toString(),W=u.findIndex(J=>J.pubkey.toString()===z);W>-1?(u[W].isWritable=u[W].isWritable||A.isWritable,u[W].isSigner=u[W].isSigner||A.isSigner):u.push(A)}),u.sort(function(A,z){if(A.isSigner!==z.isSigner)return A.isSigner?-1:1;if(A.isWritable!==z.isWritable)return A.isWritable?-1:1;let W={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(z.pubkey.toBase58(),"en",W)});let f=u.findIndex(A=>A.pubkey.equals(r));if(f>-1){let[A]=u.splice(f,1);A.isSigner=!0,A.isWritable=!0,u.unshift(A)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let A of this.signatures){let z=u.findIndex(W=>W.pubkey.equals(A.publicKey));if(z>-1)u[z].isSigner||(u[z].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let b=0,I=0,M=0,x=[],N=[];u.forEach(({pubkey:A,isSigner:z,isWritable:W})=>{z?(x.push(A.toString()),b+=1,W||(I+=1)):(N.push(A.toString()),W||(M+=1))});let _=x.concat(N),L=e.map(A=>{let{data:z,programId:W}=A;return{programIdIndex:_.indexOf(W.toString()),accounts:A.keys.map(J=>_.indexOf(J.pubkey.toString())),data:Yt.default.encode(z)}});return L.forEach(A=>{X(A.programIdIndex>=0),A.accounts.forEach(z=>X(z>=0))}),new ce({header:{numRequiredSignatures:b,numReadonlySignedAccounts:I,numReadonlyUnsignedAccounts:M},accountKeys:_,recentBlockhash:t,instructions:L})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((n,i)=>e[i].equals(n.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(r=>{let n=r.toString();return e.has(n)?!1:(e.add(n),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let i of t){let u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,r=[];for(let i of t){let u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}let n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){let r=t.serialize();e.forEach(n=>{let i=qn(r,n.secretKey);this._addSignature(n.publicKey,$(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){X(e.length===64);let r=this.signatures.findIndex(n=>t.equals(n.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=F.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let r={};for(let{signature:n,publicKey:i}of this.signatures)n===null?e&&(r.missing||=[]).push(i):xi(n,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){let i=this._getMessageSignednessErrors(n,e);if(i){let u="Signature verification failed.";throw i.invalid&&(u+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),i.missing&&(u+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(n)}_serialize(t){let{signatures:e}=this,r=[];ie(r,e.length);let n=r.length+e.length*64+t.length,i=F.alloc(n);return X(e.length<256),F.from(r).copy(i,0),e.forEach(({signature:u},f)=>{u!==null&&(X(u.length===64,"signature has invalid length"),F.from(u).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),X(i.length<=Pe,`Transaction too large: ${i.length} > ${Pe}`),i}get keys(){return X(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return X(this.instructions.length===1),this.instructions[0].programId}get data(){return X(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],r=re(e),n=[];for(let i=0;i<r;i++){let u=ne(e,0,Nr);n.push(Yt.default.encode(F.from(u)))}return Z.populate(ce.from(e),n)}static populate(t,e=[]){let r=new Z;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((n,i)=>{let u={signature:n==Yt.default.encode(Ni)?null:Yt.default.decode(n),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(n=>{let i=n.accounts.map(u=>{let f=t.accountKeys[u];return{pubkey:f,isSigner:r.signatures.some(b=>b.publicKey.toString()===f.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new nt({keys:i,programId:t.accountKeys[n.programIdIndex],data:Yt.default.decode(n.data)}))}),r._message=t,r._json=r.toJSON(),r}},Ur=class{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){let{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:u,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:b}=r,I=u-f;X(I>0,"Message header is invalid");let M=t.staticAccountKeys.length-u-b;X(M>=0,"Message header is invalid");let x=t.getAccountKeys(e),N=x.get(0);if(N===void 0)throw new Error("Failed to decompile message because no account keys were found");let _=[];for(let L of n){let A=[];for(let W of L.accountKeyIndexes){let J=x.get(W);if(J===void 0)throw new Error(`Failed to find key for account key index ${W}`);let lt=W<u,tt;lt?tt=W<I:W<x.staticAccountKeys.length?tt=W-u<M:tt=W-x.staticAccountKeys.length<x.accountKeysFromLookups.writable.length,A.push({pubkey:J,isSigner:W<r.numRequiredSignatures,isWritable:tt})}let z=x.get(L.programIdIndex);if(z===void 0)throw new Error(`Failed to find program id for program id index ${L.programIdIndex}`);_.push(new nt({programId:z,data:$(L.data),keys:A}))}return new Ur({payerKey:N,instructions:_,recentBlockhash:i})}compileToLegacyMessage(){return ce.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Se.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},qr=class{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)X(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let r=[];for(let n=0;n<t.header.numRequiredSignatures;n++)r.push(new Uint8Array(Nr));this.signatures=r}this.message=t}serialize(){let t=this.message.serialize(),e=Array();ie(e,this.signatures.length);let r=y.struct([y.blob(e.length,"encodedSignaturesLength"),y.seq(Pi(),this.signatures.length,"signatures"),y.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t],r=[],n=re(e);for(let u=0;u<n;u++)r.push(new Uint8Array(ne(e,0,Nr)));let i=ri.deserialize(new Uint8Array(e));return new qr(i,r)}sign(t){let e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of t){let i=r.findIndex(u=>u.equals(n.publicKey));X(i>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[i]=qn(e,n.secretKey)}}addSignature(t,e){X(e.byteLength===64,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));X(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}},Oi=160,Wi=64,Ui=Oi/Wi,ni=1e3/Ui,ye=new E("SysvarC1ock11111111111111111111111111111111"),Ya=new E("SysvarEpochSchedu1e111111111111111111111111"),Za=new E("Sysvar1nstructions1111111111111111111111111"),Bn=new E("SysvarRecentB1ockHashes11111111111111111111"),nr=new E("SysvarRent111111111111111111111111111111111"),Xa=new E("SysvarRewards111111111111111111111111111111"),Qa=new E("SysvarS1otHashes111111111111111111111111111"),tu=new E("SysvarS1otHistory11111111111111111111111111"),An=new E("SysvarStakeHistory1111111111111111111111111"),He=class extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:n}){let i=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",u="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",f;switch(t){case"send":f=`Transaction ${e} resulted in an error. 
${r}. `+i+u;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+i+u;break;default:f=`Unknown action '${(b=>b)(t)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(n=>{if(n&&n.meta&&n.meta.logMessages){let i=n.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}},eu={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},K=class extends Error{constructor({code:t,message:e,data:r},n){super(n!=null?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}};async function Ls(c,t,e,r){let n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await c.sendTransaction(t,e,n),u;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)u=(await c.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:f}=t.nonceInfo,b=f.keys[0].pubkey;u=(await c.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:b,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),u=(await c.confirmTransaction(i,r&&r.commitment)).value;if(u.err)throw i!=null?new He({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(u)})`);return i}function xe(c){return new Promise(t=>setTimeout(t,c))}function j(c,t){let e=c.layout.span>=0?c.layout.span:ti(c,t),r=F.alloc(e),n=Object.assign({instruction:c.index},t);return c.layout.encode(n,r),r}function rt(c,t){let e;try{e=c.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==c.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${c.index}`);return e}var qi=y.nu64("lamportsPerSignature"),si=y.struct([y.u32("version"),y.u32("state"),G("authorizedPubkey"),G("nonce"),y.struct([qi],"feeCalculator")]),Rs=si.span,sr=class{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=si.decode($(t),0);return new sr({authorizedPubkey:new E(e.authorizedPubkey),nonce:new E(e.nonce).toString(),feeCalculator:e.feeCalculator})}},Di=c=>{let t=c.decode.bind(c),e=c.encode.bind(c);return{decode:t,encode:e}},Fi=c=>t=>{let e=(0,Zs.blob)(c,t),{encode:r,decode:n}=Di(e),i=e;return i.decode=(u,f)=>{let b=n(u,f);return(0,ur.toBigIntLE)(F.from(b))},i.encode=(u,f,b)=>{let I=(0,ur.toBufferLE)(u,c);return r(I,f,b)},i},$e=Fi(8),xs=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=y.u32("instruction").decode(t.data),n;for(let[i,u]of Object.entries(at))if(u.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e,space:r,programId:n}=rt(at.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new E(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e}=rt(at.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e,seed:r,programId:n}=rt(at.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new E(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:e}=rt(at.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,space:n,programId:i}=rt(at.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new E(e),seed:r,space:n,programId:new E(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:e}=rt(at.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new E(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:r,programId:n}=rt(at.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new E(e),seed:r,programId:new E(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:e,seed:r,lamports:n,space:i,programId:u}=rt(at.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new E(e),seed:r,lamports:n,space:i,programId:new E(u)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:e}=rt(at.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new E(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),rt(at.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=rt(at.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e}=rt(at.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new E(e)}}static checkProgramId(t){if(!t.equals(Jt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},at=Object.freeze({Create:{index:0,layout:y.struct([y.u32("instruction"),y.ns64("lamports"),y.ns64("space"),G("programId")])},Assign:{index:1,layout:y.struct([y.u32("instruction"),G("programId")])},Transfer:{index:2,layout:y.struct([y.u32("instruction"),$e("lamports")])},CreateWithSeed:{index:3,layout:y.struct([y.u32("instruction"),G("base"),Ee("seed"),y.ns64("lamports"),y.ns64("space"),G("programId")])},AdvanceNonceAccount:{index:4,layout:y.struct([y.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:y.struct([y.u32("instruction"),G("authorized")])},AuthorizeNonceAccount:{index:7,layout:y.struct([y.u32("instruction"),G("authorized")])},Allocate:{index:8,layout:y.struct([y.u32("instruction"),y.ns64("space")])},AllocateWithSeed:{index:9,layout:y.struct([y.u32("instruction"),G("base"),Ee("seed"),y.ns64("space"),G("programId")])},AssignWithSeed:{index:10,layout:y.struct([y.u32("instruction"),G("base"),Ee("seed"),G("programId")])},TransferWithSeed:{index:11,layout:y.struct([y.u32("instruction"),$e("lamports"),Ee("seed"),G("programId")])},UpgradeNonceAccount:{index:12,layout:y.struct([y.u32("instruction")])}}),Jt=class{constructor(){}static createAccount(t){let e=at.Create,r=j(e,{lamports:t.lamports,space:t.space,programId:$(t.programId.toBuffer())});return new nt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){let n=at.TransferWithSeed;e=j(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:$(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let n=at.Transfer;e=j(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new nt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){let n=at.AssignWithSeed;e=j(n,{base:$(t.basePubkey.toBuffer()),seed:t.seed,programId:$(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=at.Assign;e=j(n,{programId:$(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new nt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=at.CreateWithSeed,r=j(e,{base:$(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:$(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new nt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){let e=new Z;"basePubkey"in t&&"seed"in t?e.add(Jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Rs,programId:this.programId})):e.add(Jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Rs,programId:this.programId}));let r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){let e=at.InitializeNonceAccount,r=j(e,{authorized:$(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bn,isSigner:!1,isWritable:!1},{pubkey:nr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new nt(n)}static nonceAdvance(t){let e=at.AdvanceNonceAccount,r=j(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Bn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new nt(n)}static nonceWithdraw(t){let e=at.WithdrawNonceAccount,r=j(e,{lamports:t.lamports});return new nt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Bn,isSigner:!1,isWritable:!1},{pubkey:nr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){let e=at.AuthorizeNonceAccount,r=j(e,{authorized:$(t.newAuthorizedPubkey.toBuffer())});return new nt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){let n=at.AllocateWithSeed;e=j(n,{base:$(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:$(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=at.Allocate;e=j(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new nt({keys:r,programId:this.programId,data:e})}};Jt.programId=new E("11111111111111111111111111111111");var Vi=Pe-300,Ie=class{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Ie.chunkSize)+1+1)}static async load(t,e,r,n,i){{let x=await t.getMinimumBalanceForRentExemption(i.length),N=await t.getAccountInfo(r.publicKey,"confirmed"),_=null;if(N!==null){if(N.executable)return console.error("Program load failed, account is already executable"),!1;N.data.length!==i.length&&(_=_||new Z,_.add(Jt.allocate({accountPubkey:r.publicKey,space:i.length}))),N.owner.equals(n)||(_=_||new Z,_.add(Jt.assign({accountPubkey:r.publicKey,programId:n}))),N.lamports<x&&(_=_||new Z,_.add(Jt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:x-N.lamports})))}else _=new Z().add(Jt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:x>0?x:1,space:i.length,programId:n}));_!==null&&await Ls(t,_,[e,r],{commitment:"confirmed"})}let u=y.struct([y.u32("instruction"),y.u32("offset"),y.u32("bytesLength"),y.u32("bytesLengthPadding"),y.seq(y.u8("byte"),y.offset(y.u32(),-8),"bytes")]),f=Ie.chunkSize,b=0,I=i,M=[];for(;I.length>0;){let x=I.slice(0,f),N=F.alloc(f+16);u.encode({instruction:0,offset:b,bytes:x,bytesLength:0,bytesLengthPadding:0},N);let _=new Z().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:N});M.push(Ls(t,_,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await xe(1e3/4),b+=f,I=I.slice(f)}await Promise.all(M);{let x=y.struct([y.u32("instruction")]),N=F.alloc(x.span);x.encode({instruction:1},N);let _=new Z().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:nr,isSigner:!1,isWritable:!1}],programId:n,data:N}),L="processed",A=await t.sendTransaction(_,[e,r],{preflightCommitment:L}),{context:z,value:W}=await t.confirmTransaction({signature:A,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},L);if(W.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(W)})`);for(;;){try{if(await t.getSlot({commitment:L})>z.slot)break}catch{}await new Promise(J=>setTimeout(J,Math.round(ni/2)))}}return!0}};Ie.chunkSize=Vi;var ru=new E("BPFLoader2111111111111111111111111111111111"),Ms=class{static getMinNumSignatures(t){return Ie.getMinNumSignatures(t)}static load(t,e,r,n,i){return Ie.load(t,e,r,i,n)}};function Hi(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ln,Es;function $i(){if(Es)return Ln;Es=1;var c=Object.prototype.toString,t=Object.keys||function(r){var n=[];for(var i in r)n.push(i);return n};function e(r,n){var i,u,f,b,I,M,x;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),n);if(x=c.call(r),x==="[object Array]"){for(f="[",u=r.length-1,i=0;i<u;i++)f+=e(r[i],!0)+",";return u>-1&&(f+=e(r[i],!0)),f+"]"}else if(x==="[object Object]"){for(b=t(r).sort(),u=b.length,f="",i=0;i<u;)I=b[i],M=e(r[I],!1),M!==void 0&&(f&&(f+=","),f+=JSON.stringify(I)+":"+M),i++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return n?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Ln=function(r){var n=e(r,!1);if(n!==void 0)return""+n},Ln}var Gi=$i(),Ps=Hi(Gi),rr=32;function Rn(c){let t=0;for(;c>1;)c/=2,t++;return t}function ji(c){return c===0?1:(c--,c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,c|=c>>16,c|=c>>32,c+1)}var Cn=class{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let e=Rn(ji(t+rr+1))-Rn(rr)-1,r=this.getSlotsInEpoch(e),n=t-(r-rr);return[e,n]}else{let e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*rr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Rn(rr)):this.slotsPerEpoch}},Ji=globalThis.fetch,zn=class extends ps{constructor(t,e,r){let n=i=>{let u=ds(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){let e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){let e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}};function Yi(c,t){let e;try{e=c.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==c.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${c.index}`);return e}var Ts=56,Dr=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=Yi(Zi,t),r=t.length-Ts;X(r>=0,"lookup table is invalid"),X(r%32===0,"lookup table is invalid");let n=r/32,{addresses:i}=y.struct([y.seq(G(),n,"addresses")]).decode(t.slice(Ts));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new E(e.authority[0]):void 0,addresses:i.map(u=>new E(u))}}},Zi={index:1,layout:y.struct([y.u32("typeIndex"),$e("deactivationSlot"),y.nu64("lastExtendedSlot"),y.u8("lastExtendedStartIndex"),y.u8(),y.seq(G(),y.offset(y.u8(),-1),"authority")])},Xi=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Qi(c){let t=c.match(Xi);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${c}\``);let[e,r,n,i]=t,u=c.startsWith("https:")?"wss:":"ws:",f=n==null?null:parseInt(n.slice(1),10),b=f==null?"":`:${f+1}`;return`${u}//${r}${b}${i}`}var ft=Oe(cr(E),R(),c=>new E(c)),ii=hr([R(),ht("base64")]),Fn=Oe(cr(F),ii,c=>F.from(c[0],"base64")),to=30*1e3;function eo(c){if(/^https?:/.test(c)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return c}function ot(c){let t,e;if(typeof c=="string")t=c;else if(c){let{commitment:r,...n}=c;t=r,e=n}return{commitment:t,config:e}}function Cs(c){return c.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function oi(c){return Xt([B({jsonrpc:ht("2.0"),id:R(),result:c}),B({jsonrpc:ht("2.0"),id:R(),error:B({code:Re(),message:R(),data:D(fs())})})])}var ro=oi(Re());function H(c){return Oe(oi(c),ro,t=>"error"in t?t:{...t,result:P(t.result,c)})}function dt(c){return H(B({context:B({slot:v()}),value:c}))}function jr(c){return B({context:B({slot:v()}),value:c})}function xn(c,t){return c===0?new Se({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new E(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Yt.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ce(t)}var no=B({foundation:v(),foundationTerm:v(),initial:v(),taper:v(),terminal:v()}),so=H(T(C(B({epoch:v(),effectiveSlot:v(),amount:v(),postBalance:v(),commission:D(C(v()))})))),io=T(B({slot:v(),prioritizationFee:v()})),oo=B({total:v(),validator:v(),foundation:v(),epoch:v()}),ao=B({epoch:v(),slotIndex:v(),slotsInEpoch:v(),absoluteSlot:v(),blockHeight:D(v()),transactionCount:D(v())}),uo=B({slotsPerEpoch:v(),leaderScheduleSlotOffset:v(),warmup:he(),firstNormalEpoch:v(),firstNormalSlot:v()}),co=bn(R(),T(v())),Ke=C(Xt([B({}),R()])),ho=B({err:Ke}),lo=ht("receivedSignature"),fo=B({"solana-core":R(),"feature-set":D(v())}),po=B({program:R(),programId:ft,parsed:Re()}),yo=B({programId:ft,accounts:T(ft),data:R()}),zs=dt(B({err:C(Xt([B({}),R()])),logs:C(T(R())),accounts:D(C(T(C(B({executable:he(),owner:R(),lamports:v(),data:T(R()),rentEpoch:D(v())}))))),unitsConsumed:D(v()),returnData:D(C(B({programId:R(),data:hr([R(),ht("base64")])}))),innerInstructions:D(C(T(B({index:v(),instructions:T(Xt([po,yo]))}))))})),go=dt(B({byIdentity:bn(R(),T(v())),range:B({firstSlot:v(),lastSlot:v()})}));function mo(c,t,e,r,n,i){let u=e||Ji,f;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let b;return r&&(b=async(M,x)=>{let N=await new Promise((_,L)=>{try{r(M,x,(A,z)=>_([A,z]))}catch(A){L(A)}});return await u(...N)}),new Xs.default(async(M,x)=>{let N={method:"POST",body:M,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},ba)};try{let _=5,L,A=500;for(;b?L=await b(c,N):L=await u(c,N),!(L.status!==429||n===!0||(_-=1,_===0));)console.error(`Server responded with ${L.status} ${L.statusText}.  Retrying after ${A}ms delay...`),await xe(A),A*=2;let z=await L.text();L.ok?x(null,z):x(new Error(`${L.status} ${L.statusText}: ${z}`))}catch(_){_ instanceof Error&&x(_)}},{})}function bo(c){return(t,e)=>new Promise((r,n)=>{c.request(t,e,(i,u)=>{if(i){n(i);return}r(u)})})}function wo(c){return t=>new Promise((e,r)=>{t.length===0&&e([]);let n=t.map(i=>c.request(i.methodName,i.args));c.request(n,(i,u)=>{if(i){r(i);return}e(u)})})}var ko=H(no),vo=H(oo),So=H(io),Io=H(ao),_o=H(uo),Bo=H(co),Ao=H(v()),Lo=dt(B({total:v(),circulating:v(),nonCirculating:v(),nonCirculatingAccounts:T(ft)})),Kn=B({amount:R(),uiAmount:C(v()),decimals:v(),uiAmountString:D(R())}),Ro=dt(T(B({address:ft,amount:R(),uiAmount:C(v()),decimals:v(),uiAmountString:D(R())}))),xo=dt(T(B({pubkey:ft,account:B({executable:he(),owner:ft,lamports:v(),data:Fn,rentEpoch:v()})}))),Nn=B({program:R(),parsed:Re(),space:v()}),Mo=dt(T(B({pubkey:ft,account:B({executable:he(),owner:ft,lamports:v(),data:Nn,rentEpoch:v()})}))),Eo=dt(T(B({lamports:v(),address:ft}))),ir=B({executable:he(),owner:ft,lamports:v(),data:Fn,rentEpoch:v()}),Po=B({pubkey:ft,account:ir}),To=Oe(Xt([cr(F),Nn]),Xt([ii,Nn]),c=>Array.isArray(c)?P(c,Fn):c),On=B({executable:he(),owner:ft,lamports:v(),data:To,rentEpoch:v()}),Co=B({pubkey:ft,account:On}),zo=B({state:Xt([ht("active"),ht("inactive"),ht("activating"),ht("deactivating")]),active:v(),inactive:v()}),Ko=H(T(B({signature:R(),slot:v(),err:Ke,memo:C(R()),blockTime:D(C(v()))}))),No=H(T(B({signature:R(),slot:v(),err:Ke,memo:C(R()),blockTime:D(C(v()))}))),Oo=B({subscription:v(),result:jr(ir)}),Wo=B({pubkey:ft,account:ir}),Uo=B({subscription:v(),result:jr(Wo)}),qo=B({parent:v(),slot:v(),root:v()}),Do=B({subscription:v(),result:qo}),Fo=Xt([B({type:Xt([ht("firstShredReceived"),ht("completed"),ht("optimisticConfirmation"),ht("root")]),slot:v(),timestamp:v()}),B({type:ht("createdBank"),parent:v(),slot:v(),timestamp:v()}),B({type:ht("frozen"),slot:v(),timestamp:v(),stats:B({numTransactionEntries:v(),numSuccessfulTransactions:v(),numFailedTransactions:v(),maxTransactionsPerEntry:v()})}),B({type:ht("dead"),slot:v(),timestamp:v(),err:R()})]),Vo=B({subscription:v(),result:Fo}),Ho=B({subscription:v(),result:jr(Xt([ho,lo]))}),$o=B({subscription:v(),result:v()}),Go=B({pubkey:R(),gossip:C(R()),tpu:C(R()),rpc:C(R()),version:C(R())}),Ks=B({votePubkey:R(),nodePubkey:R(),activatedStake:v(),epochVoteAccount:he(),epochCredits:T(hr([v(),v(),v()])),commission:v(),lastVote:v(),rootSlot:C(v())}),jo=H(B({current:T(Ks),delinquent:T(Ks)})),Jo=Xt([ht("processed"),ht("confirmed"),ht("finalized")]),Yo=B({slot:v(),confirmations:C(v()),err:Ke,confirmationStatus:D(Jo)}),Zo=dt(T(C(Yo))),Xo=H(v()),ai=B({accountKey:ft,writableIndexes:T(v()),readonlyIndexes:T(v())}),Vn=B({signatures:T(R()),message:B({accountKeys:T(R()),header:B({numRequiredSignatures:v(),numReadonlySignedAccounts:v(),numReadonlyUnsignedAccounts:v()}),instructions:T(B({accounts:T(v()),data:R(),programIdIndex:v()})),recentBlockhash:R(),addressTableLookups:D(T(ai))})}),ui=B({pubkey:ft,signer:he(),writable:he(),source:D(Xt([ht("transaction"),ht("lookupTable")]))}),ci=B({accountKeys:T(ui),signatures:T(R())}),hi=B({parsed:Re(),program:R(),programId:ft}),li=B({accounts:T(ft),data:R(),programId:ft}),Qo=Xt([li,hi]),ta=Xt([B({parsed:Re(),program:R(),programId:R()}),B({accounts:T(R()),data:R(),programId:R()})]),fi=Oe(Qo,ta,c=>"accounts"in c?P(c,li):P(c,hi)),di=B({signatures:T(R()),message:B({accountKeys:T(ui),instructions:T(fi),recentBlockhash:R(),addressTableLookups:D(C(T(ai)))})}),Fr=B({accountIndex:v(),mint:R(),owner:D(R()),uiTokenAmount:Kn}),pi=B({writable:T(ft),readonly:T(ft)}),Jr=B({err:Ke,fee:v(),innerInstructions:D(C(T(B({index:v(),instructions:T(B({accounts:T(v()),data:R(),programIdIndex:v()}))})))),preBalances:T(v()),postBalances:T(v()),logMessages:D(C(T(R()))),preTokenBalances:D(C(T(Fr))),postTokenBalances:D(C(T(Fr))),loadedAddresses:D(pi),computeUnitsConsumed:D(v())}),Hn=B({err:Ke,fee:v(),innerInstructions:D(C(T(B({index:v(),instructions:T(fi)})))),preBalances:T(v()),postBalances:T(v()),logMessages:D(C(T(R()))),preTokenBalances:D(C(T(Fr))),postTokenBalances:D(C(T(Fr))),loadedAddresses:D(pi),computeUnitsConsumed:D(v())}),Je=Xt([ht(0),ht("legacy")]),Ne=B({pubkey:R(),lamports:v(),postBalance:C(v()),rewardType:C(R()),commission:D(C(v()))}),ea=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:T(B({transaction:Vn,meta:C(Jr),version:D(Je)})),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),ra=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),na=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:T(B({transaction:ci,meta:C(Jr),version:D(Je)})),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),sa=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:T(B({transaction:di,meta:C(Hn),version:D(Je)})),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),ia=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:T(B({transaction:ci,meta:C(Hn),version:D(Je)})),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),oa=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),rewards:D(T(Ne)),blockTime:C(v()),blockHeight:C(v())}))),aa=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:T(B({transaction:Vn,meta:C(Jr)})),rewards:D(T(Ne)),blockTime:C(v())}))),Ns=H(C(B({blockhash:R(),previousBlockhash:R(),parentSlot:v(),signatures:T(R()),blockTime:C(v())}))),Mn=H(C(B({slot:v(),meta:C(Jr),blockTime:D(C(v())),transaction:Vn,version:D(Je)}))),Tr=H(C(B({slot:v(),transaction:di,meta:C(Hn),blockTime:D(C(v())),version:D(Je)}))),ua=dt(B({blockhash:R(),feeCalculator:B({lamportsPerSignature:v()})})),ca=dt(B({blockhash:R(),lastValidBlockHeight:v()})),ha=dt(he()),la=B({slot:v(),numTransactions:v(),numSlots:v(),samplePeriodSecs:v()}),fa=H(T(la)),da=dt(C(B({feeCalculator:B({lamportsPerSignature:v()})}))),pa=H(R()),ya=H(R()),ga=B({err:Ke,logs:T(R()),signature:R()}),ma=B({result:jr(ga),subscription:v()}),ba={"solana-client":"js/1.0.0-maintenance"},Os=class{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let I={};return async M=>{let{commitment:x,config:N}=ot(M),_=this._buildArgs([],x,void 0,N),L=Ps(_);return I[L]=I[L]??(async()=>{try{let A=await this._rpcRequest("getBlockHeight",_),z=P(A,H(v()));if("error"in z)throw new K(z.error,"failed to get block height information");return z.result}finally{delete I[L]}})(),await I[L]}})();let r,n,i,u,f,b;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,f=e.disableRetryOnRateLimit,b=e.httpAgent),this._rpcEndpoint=eo(t),this._rpcWsEndpoint=r||Qi(t),this._rpcClient=mo(t,n,i,u,f,b),this._rpcRequest=bo(this._rpcClient),this._rpcBatchRequest=wo(this._rpcClient),this._rpcWebSocket=new zn(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgs([t.toBase58()],r,void 0,n),u=await this._rpcRequest("getBalance",i),f=P(u,dt(v()));if("error"in f)throw new K(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){let e=await this._rpcRequest("getBlockTime",[t]),r=P(e,H(C(v())));if("error"in r)throw new K(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),e=P(t,H(v()));if("error"in e)throw new K(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),e=P(t,Ao);if("error"in e)throw new K(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};let r=await this._rpcRequest("getSupply",[e]),n=P(r,Lo);if("error"in n)throw new K(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=P(n,dt(Kn));if("error"in i)throw new K(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=P(n,dt(Kn));if("error"in i)throw new K(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){let{commitment:n,config:i}=ot(r),u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});let f=this._buildArgs(u,n,"base64",i),b=await this._rpcRequest("getTokenAccountsByOwner",f),I=P(b,xo);if("error"in I)throw new K(I.error,`failed to get token accounts owned by account ${t.toBase58()}`);return I.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});let i=this._buildArgs(n,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),f=P(u,Mo);if("error"in f)throw new K(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=P(n,Eo);if("error"in i)throw new K(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){let r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=P(n,Ro);if("error"in i)throw new K(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgs([t.toBase58()],r,"base64",n),u=await this._rpcRequest("getAccountInfo",i),f=P(u,dt(C(ir)));if("error"in f)throw new K(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),u=await this._rpcRequest("getAccountInfo",i),f=P(u,dt(C(On)));if("error"in f)throw new K(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){let{commitment:r,config:n}=ot(e),i=t.map(I=>I.toBase58()),u=this._buildArgs([i],r,"jsonParsed",n),f=await this._rpcRequest("getMultipleAccounts",u),b=P(f,dt(T(C(On))));if("error"in b)throw new K(b.error,`failed to get info for accounts ${i}`);return b.result}async getMultipleAccountsInfoAndContext(t,e){let{commitment:r,config:n}=ot(e),i=t.map(I=>I.toBase58()),u=this._buildArgs([i],r,"base64",n),f=await this._rpcRequest("getMultipleAccounts",u),b=P(f,dt(T(C(ir))));if("error"in b)throw new K(b.error,`failed to get info for accounts ${i}`);return b.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){let{commitment:n,config:i}=ot(e),u=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:r??i?.epoch}),f=await this._rpcRequest("getStakeActivation",u),b=P(f,H(zo));if("error"in b)throw new K(b.error,`failed to get Stake Activation ${t.toBase58()}`);return b.result}async getProgramAccounts(t,e){let{commitment:r,config:n}=ot(e),{encoding:i,...u}=n||{},f=this._buildArgs([t.toBase58()],r,i||"base64",{...u,...u.filters?{filters:Cs(u.filters)}:null}),b=await this._rpcRequest("getProgramAccounts",f),I=T(Po),M=u.withContext===!0?P(b,dt(I)):P(b,H(I));if("error"in M)throw new K(M.error,`failed to get accounts owned by program ${t.toBase58()}`);return M.result}async getParsedProgramAccounts(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),u=await this._rpcRequest("getProgramAccounts",i),f=P(u,H(T(Co)));if("error"in f)throw new K(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{let i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let n;try{n=Yt.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return X(n.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1,u=new Promise((b,I)=>{try{r=this.onSignature(e,(x,N)=>{r=void 0;let _={context:N,value:x};b({__type:ke.PROCESSED,response:_})},t);let M=new Promise(x=>{r==null?x():n=this._onSubscriptionStateChange(r,N=>{N==="subscribed"&&x()})});(async()=>{if(await M,i)return;let x=await this.getSignatureStatus(e);if(i||x==null)return;let{context:N,value:_}=x;if(_!=null)if(_?.err)I(_.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,b({__type:ke.PROCESSED,response:{context:N,value:_}})}})()}catch(M){I(M)}});return{abortConfirmation:()=>{n&&(n(),n=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1,u=new Promise(x=>{let N=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let _=await N();if(!i){for(;_<=r;)if(await xe(1e3),i||(_=await N(),i))return;x({__type:ke.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),I=this.getCancellationPromise(e),M;try{let x=await Promise.race([I,b,u]);if(x.__type===ke.PROCESSED)M=x.response;else throw new Or(n)}finally{i=!0,f()}return M}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:u}}){let f=!1,b=new Promise(_=>{let L=i,A=null,z=async()=>{try{let{context:W,value:J}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return A=W.slot,J?.nonce}catch{return L}};(async()=>{if(L=await z(),!f)for(;;){if(i!==L){_({__type:ke.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await xe(2e3),f||(L=await z(),f))return}})()}),{abortConfirmation:I,confirmationPromise:M}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),x=this.getCancellationPromise(e),N;try{let _=await Promise.race([x,M,b]);if(_.__type===ke.PROCESSED)N=_.response;else{let L;for(;;){let A=await this.getSignatureStatus(u);if(A==null)break;if(A.context.slot<(_.slotInWhichNonceDidAdvance??r)){await xe(400);continue}L=A;break}if(L?.value){let A=t||"finalized",{confirmationStatus:z}=L.value;switch(A){case"processed":case"recent":if(z!=="processed"&&z!=="confirmed"&&z!=="finalized")throw new Me(u);break;case"confirmed":case"single":case"singleGossip":if(z!=="confirmed"&&z!=="finalized")throw new Me(u);break;case"finalized":case"max":case"root":if(z!=="finalized")throw new Me(u);break;default:(W=>{})(A)}N={context:L.context,value:{err:L.value.err}}}else throw new Me(u)}}finally{f=!0,I()}return N}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r,n=new Promise(b=>{let I=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{I=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>b({__type:ke.TIMED_OUT,timeoutMs:I}),I)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e}),f;try{let b=await Promise.race([u,n]);if(b.__type===ke.PROCESSED)f=b.response;else throw new Wr(e,b.timeoutMs/1e3)}finally{clearTimeout(r),i()}return f}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),e=P(t,H(T(Go)));if("error"in e)throw new K(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=P(r,jo);if("error"in n)throw new K(n.error,"failed to get vote accounts");return n.result}async getSlot(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),u=P(i,H(v()));if("error"in u)throw new K(u.error,"failed to get slot");return u.result}async getSlotLeader(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),u=P(i,H(R()));if("error"in u)throw new K(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){let r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=P(n,H(T(ft)));if("error"in i)throw new K(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){let{context:r,value:n}=await this.getSignatureStatuses([t],e);X(n.length===1);let i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){let r=[t];e&&r.push(e);let n=await this._rpcRequest("getSignatureStatuses",r),i=P(n,Zo);if("error"in i)throw new K(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),u=P(i,H(v()));if("error"in u)throw new K(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=P(r,ko);if("error"in n)throw new K(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){let{commitment:n,config:i}=ot(r),u=this._buildArgs([t.map(I=>I.toBase58())],n,void 0,{...i,epoch:e??i?.epoch}),f=await this._rpcRequest("getInflationReward",u),b=P(f,so);if("error"in b)throw new K(b.error,"failed to get inflation reward");return b.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),e=P(t,vo);if("error"in e)throw new K(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),u=P(i,Io);if("error"in u)throw new K(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),e=P(t,_o);if("error"in e)throw new K(e.error,"failed to get epoch schedule");let r=e.result;return new Cn(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),e=P(t,Bo);if("error"in e)throw new K(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=P(n,Xo);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){let e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=P(r,ua);if("error"in n)throw new K(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){let e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=P(e,fa);if("error"in r)throw new K(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){let r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=P(n,da);if("error"in i)throw new K(i.error,"failed to get fee calculator");let{context:u,value:f}=i.result;return{context:u,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){let r=$(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),u=P(i,dt(C(v())));if("error"in u)throw new K(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){let e=t?.lockedWritableAccounts?.map(u=>u.toBase58()),r=e?.length?[e]:[],n=await this._rpcRequest("getRecentPrioritizationFees",r),i=P(n,So);if("error"in i)throw new K(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),u=P(i,ca);if("error"in u)throw new K(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgs([t],r,void 0,n),u=await this._rpcRequest("isBlockhashValid",i),f=P(u,ha);if("error"in f)throw new K(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),e=P(t,H(fo));if("error"in e)throw new K(e.error,"failed to get version");return e.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),e=P(t,H(R()));if("error"in e)throw new K(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),u=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let f=P(u,na);if("error"in f)throw f.error;return f.result}case"none":{let f=P(u,ra);if("error"in f)throw f.error;return f.result}default:{let f=P(u,ea);if("error"in f)throw f.error;let{result:b}=f;return b?{...b,transactions:b.transactions.map(({transaction:I,meta:M,version:x})=>({meta:M,transaction:{...I,message:xn(x,I.message)},version:x}))}:null}}}catch(f){throw new K(f,"failed to get confirmed block")}}async getParsedBlock(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),u=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let f=P(u,ia);if("error"in f)throw f.error;return f.result}case"none":{let f=P(u,oa);if("error"in f)throw f.error;return f.result}default:{let f=P(u,sa);if("error"in f)throw f.error;return f.result}}}catch(f){throw new K(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){let{commitment:f,...b}=t;r=f,e=b}let n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),u=P(i,go);if("error"in u)throw new K(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),u=await this._rpcRequest("getTransaction",i),f=P(u,Mn);if("error"in f)throw new K(f.error,"failed to get transaction");let b=f.result;return b&&{...b,transaction:{...b.transaction,message:xn(b.version,b.transaction.message)}}}async getParsedTransaction(t,e){let{commitment:r,config:n}=ot(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),u=await this._rpcRequest("getTransaction",i),f=P(u,Tr);if("error"in f)throw new K(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){let{commitment:r,config:n}=ot(e),i=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(b=>{let I=P(b,Tr);if("error"in I)throw new K(I.error,"failed to get transactions");return I.result})}async getTransactions(t,e){let{commitment:r,config:n}=ot(e),i=t.map(b=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([b],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(b=>{let I=P(b,Mn);if("error"in I)throw new K(I.error,"failed to get transactions");let M=I.result;return M&&{...M,transaction:{...M.transaction,message:xn(M.version,M.transaction.message)}}})}async getConfirmedBlock(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=P(n,aa);if("error"in i)throw new K(i.error,"failed to get confirmed block");let u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");let f={...u,transactions:u.transactions.map(({transaction:b,meta:I})=>{let M=new ce(b.message);return{meta:I,transaction:{...b,message:M}}})};return{...f,transactions:f.transactions.map(({transaction:b,meta:I})=>({meta:I,transaction:Z.populate(b.message,b.signatures)}))}}async getBlocks(t,e,r){let n=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),u=P(i,H(T(v())));if("error"in u)throw new K(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=P(n,Ns);if("error"in i)throw new K(i.error,"failed to get block");let u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=P(n,Ns);if("error"in i)throw new K(i.error,"failed to get confirmed block");let u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=P(n,Mn);if("error"in i)throw new K(i.error,"failed to get transaction");let u=i.result;if(!u)return u;let f=new ce(u.transaction.message),b=u.transaction.signatures;return{...u,transaction:Z.populate(f,b)}}async getParsedConfirmedTransaction(t,e){let r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=P(n,Tr);if("error"in i)throw new K(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){let r=t.map(u=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{let f=P(u,Tr);if("error"in f)throw new K(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&(e--,!(e<=0||e<i));)try{let b=await this.getConfirmedBlockSignatures(e,"finalized");b.signatures.length>0&&(n.until=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}let u=await this.getSlot("finalized");for(;!("before"in n)&&(r++,!(r>u));)try{let b=await this.getConfirmedBlockSignatures(r);b.signatures.length>0&&(n.before=b.signatures[b.signatures.length-1].toString())}catch(b){if(b instanceof Error&&b.message.includes("skipped"))continue;throw b}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(b=>b.signature)}async getConfirmedSignaturesForAddress2(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),u=P(i,Ko);if("error"in u)throw new K(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){let n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),u=P(i,No);if("error"in u)throw new K(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),i=null;return n!==null&&(i=new Dr({key:t,state:Dr.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){let{context:r,value:n}=await this.getAccountInfoAndContext(t,e),i=null;return n!==null&&(i=sr.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){let r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=P(r,pa);if("error"in n)throw new K(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await xe(100);let r=Date.now()-this._blockhashInfo.lastFetch>=to;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){let i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await xe(ni/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:r}=ot(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),u=P(i,dt(v()));if("error"in u)throw new K(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){let A=t.serialize(),z=F.from(A).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");let W=e||{};W.encoding="base64","commitment"in W||(W.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(W.innerInstructions=e.innerInstructions);let J=[z,W],lt=await this._rpcRequest("simulateTransaction",J),tt=P(lt,zs);if("error"in tt)throw new Error("failed to simulate transaction: "+tt.error.message);return tt.result}let n;if(t instanceof Z){let L=t;n=new Z,n.feePayer=L.feePayer,n.instructions=t.instructions,n.nonceInfo=L.nonceInfo,n.signatures=L.signatures}else n=Z.populate(t),n._message=n._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");let i=e;if(n.nonceInfo&&i)n.sign(...i);else{let L=this._disableBlockhashCaching;for(;;){let A=await this._blockhashWithExpiryBlockHeight(L);if(n.lastValidBlockHeight=A.lastValidBlockHeight,n.recentBlockhash=A.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");let z=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(z)&&!this._blockhashInfo.transactionSignatures.includes(z)){this._blockhashInfo.simulatedSignatures.push(z);break}else L=!0}}let u=n._compile(),f=u.serialize(),I=n._serialize(f).toString("base64"),M={encoding:"base64",commitment:this.commitment};if(r){let L=(Array.isArray(r)?r:u.nonProgramIds()).map(A=>A.toBase58());M.accounts={encoding:"base64",addresses:L}}i&&(M.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(M.innerInstructions=e.innerInstructions);let x=[I,M],N=await this._rpcRequest("simulateTransaction",x),_=P(N,zs);if("error"in _){let L;if("data"in _.error&&(L=_.error.data.logs,L&&Array.isArray(L))){let A=`
    `,z=A+L.join(A);console.error(_.error.message,z)}throw new He({action:"simulate",signature:"",transactionMessage:_.error.message,logs:L})}return _.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");let u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");let n=e;if(t.nonceInfo)t.sign(...n);else{let u=this._disableBlockhashCaching;for(;;){let f=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");let b=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(b))u=!0;else{this._blockhashInfo.transactionSignatures.push(b);break}}}let i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){let r=$(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){let r={encoding:"base64"},n=e&&e.skipPreflight,i=n===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);let u=[t,r],f=await this._rpcRequest("sendTransaction",u),b=P(f,ya);if("error"in b){let I;throw"data"in b.error&&(I=b.error.data.logs),new He({action:n?"send":"simulate",signature:"",transactionMessage:b.error.message,logs:I})}return b.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){let r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){let n=this._subscriptionStateChangeCallbacksByHash[t];n&&n.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){let r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(e),()=>{n.delete(e),n.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{let n=this._subscriptionsByHash[r];if(n!==void 0)switch(n.state){case"pending":case"unsubscribed":if(n.callbacks.size===0){delete this._subscriptionsByHash[r],n.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:i,method:u}=n;try{this._setSubscription(r,{...n,state:"subscribing"});let f=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...n,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=n.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${u}\``,{args:i,error:f}),!e())return;this._setSubscription(r,{...n,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":n.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:i,unsubscribeMethod:u}=n;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...n,state:"unsubscribing"}),this._setSubscription(r,{...n,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(f){if(f instanceof Error&&console.error(`${u} error:`,f.message),!e())return;this._setSubscription(r,{...n,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...n,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){let r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(n=>{try{n(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){let{result:e,subscription:r}=P(t,Oo);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){let r=this._nextClientSubscriptionId++,n=Ps([t.method,e]),i=this._subscriptionsByHash[n];return i===void 0?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let u=this._subscriptionsByHash[n];X(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){let{commitment:n,config:i}=ot(r),u=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},u)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:r}=P(t,Uo);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){let{commitment:i,config:u}=ot(r),f=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",u||(n?{filters:Cs(n)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){let n=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:r}=P(t,ma);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:r}=P(t,Do);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:r}=P(t,Vo);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){let i=e||this._commitment;if(i||r||n){let u={};r&&(u.encoding=r),i&&(u.commitment=i),n&&(u=Object.assign(u,n)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){let i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){let{result:e,subscription:r}=P(t,Ho);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){let n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,f)=>{if(u.type==="status"){e(u.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){let{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],n,void 0,i),f=this._makeSubscription({callback:(b,I)=>{e(b,I);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:r}=P(t,$o);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Te=class{constructor(t){this._keypair=void 0,this._keypair=t??Ss()}static generate(){return new Te(Ss())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let r=t.slice(32,64);if(!e||!e.skipValidation){let n=t.slice(0,32),i=zr(n);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new Te({publicKey:r,secretKey:t})}static fromSeed(t){let e=zr(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Te({publicKey:e,secretKey:r})}get publicKey(){return new E(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},ve=Object.freeze({CreateLookupTable:{index:0,layout:y.struct([y.u32("instruction"),$e("recentSlot"),y.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:y.struct([y.u32("instruction")])},ExtendLookupTable:{index:2,layout:y.struct([y.u32("instruction"),$e(),y.seq(G(),y.offset(y.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:y.struct([y.u32("instruction")])},CloseLookupTable:{index:4,layout:y.struct([y.u32("instruction")])}}),Ws=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=y.u32("instruction").decode(t.data),n;for(let[i,u]of Object.entries(ve))if(u.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:e}=rt(ve.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:e}=rt(ve.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new E(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Vr.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},Vr=class{constructor(){}static createLookupTable(t){let[e,r]=E.findProgramAddressSync([t.authority.toBuffer(),(0,ur.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),n=ve.CreateLookupTable,i=j(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Jt.programId,isSigner:!1,isWritable:!1}];return[new nt({programId:this.programId,keys:u,data:i}),e]}static freezeLookupTable(t){let e=ve.FreezeLookupTable,r=j(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new nt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){let e=ve.ExtendLookupTable,r=j(e,{addresses:t.addresses.map(i=>i.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Jt.programId,isSigner:!1,isWritable:!1}),new nt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){let e=ve.DeactivateLookupTable,r=j(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new nt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){let e=ve.CloseLookupTable,r=j(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new nt({programId:this.programId,keys:n,data:r})}};Vr.programId=new E("AddressLookupTab1e1111111111111111111111111");var Us=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=y.u8("instruction").decode(t.data),n;for(let[i,u]of Object.entries(ge))if(u.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:e,additionalFee:r}=rt(ge.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:e}=rt(ge.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:e}=rt(ge.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:e}=rt(ge.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Hr.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},ge=Object.freeze({RequestUnits:{index:0,layout:y.struct([y.u8("instruction"),y.u32("units"),y.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:y.struct([y.u8("instruction"),y.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:y.struct([y.u8("instruction"),y.u32("units")])},SetComputeUnitPrice:{index:3,layout:y.struct([y.u8("instruction"),$e("microLamports")])}}),Hr=class{constructor(){}static requestUnits(t){let e=ge.RequestUnits,r=j(e,t);return new nt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){let e=ge.RequestHeapFrame,r=j(e,t);return new nt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){let e=ge.SetComputeUnitLimit,r=j(e,t);return new nt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){let e=ge.SetComputeUnitPrice,r=j(e,{microLamports:BigInt(t.microLamports)});return new nt({keys:[],programId:this.programId,data:r})}};Hr.programId=new E("ComputeBudget111111111111111111111111111111");var qs=64,Ds=32,Fs=64,Vs=y.struct([y.u8("numSignatures"),y.u8("padding"),y.u16("signatureOffset"),y.u16("signatureInstructionIndex"),y.u16("publicKeyOffset"),y.u16("publicKeyInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u16("messageInstructionIndex")]),or=class{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,instructionIndex:i}=t;X(e.length===Ds,`Public Key must be ${Ds} bytes but received ${e.length} bytes`),X(n.length===Fs,`Signature must be ${Fs} bytes but received ${n.length} bytes`);let u=Vs.span,f=u+e.length,b=f+n.length,I=1,M=F.alloc(b+r.length),x=i??65535;return Vs.encode({numSignatures:I,padding:0,signatureOffset:f,signatureInstructionIndex:x,publicKeyOffset:u,publicKeyInstructionIndex:x,messageDataOffset:b,messageDataSize:r.length,messageInstructionIndex:x},M),M.fill(e,u),M.fill(n,f),M.fill(r,b),new nt({keys:[],programId:or.programId,data:M})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;X(e.length===qs,`Private key must be ${qs} bytes but received ${e.length} bytes`);try{let i=Te.fromSecretKey(e),u=i.publicKey.toBytes(),f=qn(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:f,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};or.programId=new E("Ed25519SigVerify111111111111111111111111111");var wa=(c,t)=>{let e=lr.sign(c,t);return[e.toCompactRawBytes(),e.recovery]};lr.utils.isValidPrivateKey;var ka=lr.getPublicKey,Hs=32,En=20,$s=64,va=11,Pn=y.struct([y.u8("numSignatures"),y.u16("signatureOffset"),y.u8("signatureInstructionIndex"),y.u16("ethAddressOffset"),y.u8("ethAddressInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u8("messageInstructionIndex"),y.blob(20,"ethAddress"),y.blob(64,"signature"),y.u8("recoveryId")]),Ce=class{constructor(){}static publicKeyToEthAddress(t){X(t.length===$s,`Public key must be ${$s} bytes but received ${t.length} bytes`);try{return F.from(wn($(t))).slice(-En)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:u}=t;return Ce.createInstructionWithEthAddress({ethAddress:Ce.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:u})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:r,signature:n,recoveryId:i,instructionIndex:u=0}=t,f;typeof e=="string"?e.startsWith("0x")?f=F.from(e.substr(2),"hex"):f=F.from(e,"hex"):f=e,X(f.length===En,`Address must be ${En} bytes but received ${f.length} bytes`);let b=1+va,I=b,M=b+f.length,x=M+n.length+1,N=1,_=F.alloc(Pn.span+r.length);return Pn.encode({numSignatures:N,signatureOffset:M,signatureInstructionIndex:u,ethAddressOffset:I,ethAddressInstructionIndex:u,messageDataOffset:x,messageDataSize:r.length,messageInstructionIndex:u,signature:$(n),ethAddress:$(f),recoveryId:i},_),_.fill($(r),Pn.span),new nt({keys:[],programId:Ce.programId,data:_})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:r,instructionIndex:n}=t;X(e.length===Hs,`Private key must be ${Hs} bytes but received ${e.length} bytes`);try{let i=$(e),u=ka(i,!1).slice(1),f=F.from(wn($(r))),[b,I]=wa(f,i);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:b,recoveryId:I,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ce.programId=new E("KeccakSecp256k11111111111111111111111111111");var yi,Sa=new E("StakeConfig11111111111111111111111111111111"),Wn=class{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}},Ge=class{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}};yi=Ge;Ge.default=new yi(0,0,E.default);var Gs=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=y.u32("instruction").decode(t.data),n;for(let[i,u]of Object.entries(Zt))if(u.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e,lockup:r}=rt(Zt.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Wn(new E(e.staker),new E(e.withdrawer)),lockup:new Ge(r.unixTimestamp,r.epoch,new E(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),rt(Zt.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,stakeAuthorizationType:r}=rt(Zt.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new E(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=rt(Zt.AuthorizeWithSeed,t.data),u={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new E(i),newAuthorizedPubkey:new E(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(u.custodianPubkey=t.keys[3].pubkey),u}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=rt(Zt.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),rt(Zt.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=rt(Zt.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),rt(Zt.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(ar.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},Zt=Object.freeze({Initialize:{index:0,layout:y.struct([y.u32("instruction"),Ti(),Ci()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),G("newAuthorized"),y.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:y.struct([y.u32("instruction")])},Split:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Withdraw:{index:4,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Deactivate:{index:5,layout:y.struct([y.u32("instruction")])},Merge:{index:7,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:y.struct([y.u32("instruction"),G("newAuthorized"),y.u32("stakeAuthorizationType"),Ee("authoritySeed"),G("authorityOwner")])}}),nu=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),ar=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Ge.default,u=Zt.Initialize,f=j(u,{authorized:{staker:$(r.staker.toBuffer()),withdrawer:$(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:$(i.custodian.toBuffer())}}),b={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nr,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new nt(b)}static createAccountWithSeed(t){let e=new Z;e.add(Jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){let e=new Z;e.add(Jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=Zt.Delegate,u=j(i);return new Z().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:Sa,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static authorize(t){let{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:u}=t,f=Zt.Authorize,b=j(f,{newAuthorized:$(n.toBuffer()),stakeAuthorizationType:i.index}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&I.push({pubkey:u,isSigner:!0,isWritable:!1}),new Z().add({keys:I,programId:this.programId,data:b})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:u,stakeAuthorizationType:f,custodianPubkey:b}=t,I=Zt.AuthorizeWithSeed,M=j(I,{newAuthorized:$(u.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:n,authorityOwner:$(i.toBuffer())}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1}];return b&&x.push({pubkey:b,isSigner:!0,isWritable:!1}),new Z().add({keys:x,programId:this.programId,data:M})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,u=Zt.Split,f=j(u,{lamports:i});return new nt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(t,e){let r=new Z;return r.add(Jt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:u,seed:f,lamports:b}=t,I=new Z;return I.add(Jt.allocate({accountPubkey:i,basePubkey:u,seed:f,space:this.space,programId:this.programId})),e&&e>0&&I.add(Jt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),I.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:b}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=Zt.Merge,u=j(i);return new Z().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:u}=t,f=Zt.Withdraw,b=j(f,{lamports:i}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&I.push({pubkey:u,isSigner:!0,isWritable:!1}),new Z().add({keys:I,programId:this.programId,data:b})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:r}=t,n=Zt.Deactivate,i=j(n);return new Z().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}};ar.programId=new E("Stake11111111111111111111111111111111111111");ar.space=200;var Un=class{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}},js=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let r=y.u32("instruction").decode(t.data),n;for(let[i,u]of Object.entries(de))if(u.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:e}=rt(de.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Un(new E(e.nodePubkey),new E(e.authorizedVoter),new E(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,voteAuthorizationType:r}=rt(de.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new E(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=rt(de.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new E(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new E(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=rt(de.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(ze.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},de=Object.freeze({InitializeAccount:{index:0,layout:y.struct([y.u32("instruction"),zi()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),G("newAuthorized"),y.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:y.struct([y.u32("instruction"),Ki()])}}),su=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),ze=class{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=de.InitializeAccount,u=j(i,{voteInit:{nodePubkey:$(n.nodePubkey.toBuffer()),authorizedVoter:$(n.authorizedVoter.toBuffer()),authorizedWithdrawer:$(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:nr,isSigner:!1,isWritable:!1},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u};return new nt(f)}static createAccount(t){let e=new Z;return e.add(Jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,u=de.Authorize,f=j(u,{newAuthorized:$(n.toBuffer()),voteAuthorizationType:i.index}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Z().add({keys:b,programId:this.programId,data:f})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:u,votePubkey:f}=t,b=de.AuthorizeWithSeed,I=j(b,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:$(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:$(i.toBuffer()),voteAuthorizationType:u.index}}),M=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:ye,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Z().add({keys:M,programId:this.programId,data:I})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,u=de.Withdraw,f=j(u,{lamports:n}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Z().add({keys:b,programId:this.programId,data:f})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return ze.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=de.UpdateValidatorIdentity,u=j(i),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Z().add({keys:f,programId:this.programId,data:u})}};ze.programId=new E("Vote111111111111111111111111111111111111111");ze.space=3762;var Ia=new E("Va1idator1nfo111111111111111111111111111111"),_a=B({name:R(),website:D(R()),details:D(R()),iconUrl:D(R()),keybaseUsername:D(R())}),$r=class{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(re(e)!==2)return null;let n=[];for(let i=0;i<2;i++){let u=new E(ne(e,0,me)),f=fe(e)===1;n.push({publicKey:u,isSigner:f})}if(n[0].publicKey.equals(Ia)&&n[1].isSigner){let i=Ee().decode(F.from(e)),u=JSON.parse(i);return ls(u,_a),new $r(n[1].publicKey,u)}return null}},iu=new E("Vote111111111111111111111111111111111111111"),Ba=y.struct([G("nodePubkey"),G("authorizedWithdrawer"),y.u8("commission"),y.nu64(),y.seq(y.struct([y.nu64("slot"),y.u32("confirmationCount")]),y.offset(y.u32(),-8),"votes"),y.u8("rootSlotValid"),y.nu64("rootSlot"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),G("authorizedVoter")]),y.offset(y.u32(),-8),"authorizedVoters"),y.struct([y.seq(y.struct([G("authorizedPubkey"),y.nu64("epochOfLastAuthorizedSwitch"),y.nu64("targetEpoch")]),32,"buf"),y.nu64("idx"),y.u8("isEmpty")],"priorVoters"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),y.nu64("credits"),y.nu64("prevCredits")]),y.offset(y.u32(),-8),"epochCredits"),y.struct([y.nu64("slot"),y.nu64("timestamp")],"lastTimestamp")]),Gr=class{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let r=Ba.decode($(t),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new Gr({nodePubkey:new E(r.nodePubkey),authorizedWithdrawer:new E(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Aa),priorVoters:La(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};function Aa({authorizedVoter:c,epoch:t}){return{epoch:t,authorizedVoter:new E(c)}}function Js({authorizedPubkey:c,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new E(c),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function La({buf:c,idx:t,isEmpty:e}){return e?[]:[...c.slice(t+1).map(Js),...c.slice(0,t).map(Js)]}var Ys={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ou(c,t){let e=t===!1?"http":"https";if(!c)return Ys[e].devnet;let r=Ys[e][c];if(!r)throw new Error(`Unknown ${e} cluster: ${c}`);return r}async function au(c,t,e,r){let n,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(n=e,i=r):i=e;let u=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},f=await c.sendRawTransaction(t,u),b=i&&i.commitment,M=(await(n?c.confirmTransaction(n,b):c.confirmTransaction(f,b))).value;if(M.err)throw f!=null?new He({action:u?.skipPreflight?"send":"simulate",signature:f,transactionMessage:`Status: (${JSON.stringify(M)})`}):new Error(`Raw transaction ${f} failed (${JSON.stringify(M)})`);return f}var uu=1e9;export{Kr as a,_s as b,Cr as c,Mi as d,me as e,E as f,As as g,Ja as h,Pe as i,Dn as j,Nr as k,Or as l,Wr as m,Me as n,Fe as o,ce as p,Se as q,ri as r,ke as s,nt as t,Z as u,Ur as v,qr as w,ye as x,Ya as y,Za as z,Bn as A,nr as B,Xa as C,Qa as D,tu as E,An as F,He as G,eu as H,K as I,Ls as J,qi as K,Rs as L,sr as M,xs as N,at as O,Jt as P,Ie as Q,ru as R,Ms as S,Cn as T,Dr as U,to as V,Os as W,Te as X,ve as Y,Ws as Z,Vr as _,Us as $,ge as aa,Hr as ba,or as ca,Ce as da,Sa as ea,Wn as fa,Ge as ga,Gs as ha,Zt as ia,nu as ja,ar as ka,Un as la,js as ma,su as na,ze as oa,Ia as pa,$r as qa,iu as ra,Gr as sa,ou as ta,au as ua,uu as va};
//# sourceMappingURL=chunk-OPZCJFCU.js.map
