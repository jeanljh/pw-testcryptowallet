import{g as K,q as V,s as L}from"./chunk-MSP5TDR3.js";import{g as E,h as O,j as U}from"./chunk-QKBWJPY2.js";import{a as W}from"./chunk-MC7IOE6A.js";import{a as b}from"./chunk-33XRMYWN.js";import{a as w}from"./chunk-U7IWD6UB.js";import{o as j}from"./chunk-Z62JX42S.js";import{Na as G,a as A,la as x,na as P}from"./chunk-2QHGKEME.js";import{a as k}from"./chunk-EFOY37CC.js";import{qa as F,va as I}from"./chunk-XFTQD4B2.js";import{b as _}from"./chunk-73B6GL3S.js";import{f as C,o as B,q as T}from"./chunk-Y5OH3DDZ.js";B();T();var f=C(_()),h=C(G()),y=C(j());I();B();T();function J(e,r){return async n=>(await n(E({walletIds:e,chainId:r}))).map(o=>({walletId:o?.walletId,balanceData:o?.balanceData,coinsMap:o?.coins.reduce((a,s)=>(a[s.coinId]=s,a),{})}))}async function z(e,r){return(await r(J([e]))).find(t=>t.walletId===e)}function Y({walletIds:e,chainId:r,coinId:n,flatten:t=!1}){return async o=>{let a=await o(U({walletIds:e,chainId:r,coinId:n})),s={};return a.forEach(u=>{let i=u.coins.reduce((c,p)=>(c[p.coinId]=p,c),{}),M=u.balanceCoins,l=[],d=["walletId","default"];M.forEach(c=>{if(c.childrenCoin){let p=c.childrenCoin.map(m=>({...m,...i[m.coinId]}));t?(p.forEach(m=>{d.forEach(g=>{m[g]=c[g]})}),l.push(...p)):l.push({...c,...i[c.coinId],childrenCoin:p})}else l.push({...c,...i[c.coinId]})}),s[u.walletId]=l}),s}}function v(e,r,{defaultValue:n,forceRequest:t}={}){let o=(0,h.useDispatch)(),a=w(),{data:s,error:u,loading:i,run:M}=(0,y.useRequest)(z,{manual:!0,cacheKey:r}),l=!!u,d=r!==a||t;(0,f.useEffect)(()=>{r&&d&&M(r,o)},[r,d,o]);let c=(0,y.useMemoizedFn)(async()=>{r&&d?M(r,o):await o(O())});return(0,f.useMemo)(()=>m=>{if(r&&d)return{data:s?e(m,r,s):n,loading:i,error:l,request:c};let g=e(m,a);return{data:g??n,loading:!g?.[a],error:!!g?.[a]?.error,request:c}},[e,r,a,s,n,l,i,d])}var H=(e,r={})=>{let n=(0,f.useRef)({}),t=r.withBalanceStatus,o=v(V,e,{defaultValue:n.current,forceRequest:t}),{data:a,loading:s,error:u,request:i}=(0,h.useSelector)(o);return(0,y.useCreation)(()=>t?{loading:s,error:u,request:i,balance:a[e]}:a[e],[a,e,t,s,u,i])},ue=e=>{let r=H(e),t=((0,h.useSelector)(A)[e]??[]).map(o=>K(o));return F([...r?.coins??[],...t],o=>`${o.coinId}_${"addressType"in o?o.addressType:0}`)},N=()=>{let e=w();return H(e)},le=()=>N()?.coins??[];function de(e){let r=(0,f.useRef)([]),n=v(L,e,{defaultValue:r.current});return(0,h.useSelector)(n).data}B();T();var D=C(_()),R=C(G()),q=C(j());var he=e=>(0,R.useSelector)(P).find(({currencyId:t})=>t===e)||{},Q={},S=()=>{let{data:e}=W(b.coinTickers);return(0,D.useMemo)(()=>e||Q,[e])},ye=()=>{let e=S(),r=(0,R.useSelector)(x);return(0,q.useCreation)(()=>Object.keys(e).reduce((n,t)=>({...n,[t]:k(e?.[t]?.coinToUSDRate,r?.usdToThisRate)}),{}),[e,r?.usdToThisRate])},Me=()=>{let e=S();return(0,q.useCreation)(()=>Object.keys(e).reduce((r,n)=>({...r,[n]:e?.[n]?.coinToUSDRate}),{}),[e])},Re=e=>{let r=S(),n=(0,R.useSelector)(x),t=r?.[e]?.coinToUSDRate;return(0,D.useMemo)(()=>k(t,n?.usdToThisRate),[t,n?.usdToThisRate])},Se=e=>S()?.[e]?.coinToUSDRate,ke=e=>{let{data:r}=W(b.coinTickers);return r?.[e]?.coinPriceChangePercent24h};export{Y as a,H as b,ue as c,le as d,de as e,he as f,S as g,ye as h,Me as i,Re as j,Se as k,ke as l};
//# sourceMappingURL=chunk-V7ZNWTMX.js.map
