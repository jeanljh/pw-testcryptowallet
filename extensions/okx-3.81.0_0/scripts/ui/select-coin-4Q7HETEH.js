import{a as We}from"./chunk-WXMYRJ2J.js";import{a as He}from"./chunk-SJ7KCWUL.js";import{a as Je,b as K}from"./chunk-PVQUEHTJ.js";import"./chunk-7Y4QHWXE.js";import"./chunk-J2DVEIJ3.js";import"./chunk-TWQ73ZDV.js";import{a as Me}from"./chunk-SLISBEZF.js";import{a as Ge}from"./chunk-SBTBASYY.js";import{c as Ze}from"./chunk-LY5BPYXI.js";import{a as Ve}from"./chunk-T4MGJ7E6.js";import{a as Ke}from"./chunk-WEPJKKBH.js";import{a as te}from"./chunk-QXMLTUW3.js";import{a as oe,b as Fe}from"./chunk-5QYLVV6H.js";import{a as Ue}from"./chunk-CNHSAVIB.js";import"./chunk-P6XPPG3V.js";import"./chunk-4TVSOYI7.js";import"./chunk-S7VT2TWF.js";import"./chunk-3W4MTHFJ.js";import"./chunk-BNS5ABAB.js";import"./chunk-7QX2TXNH.js";import{d as ee}from"./chunk-ZDHJHPQ5.js";import"./chunk-WY5R5HAR.js";import{a as Oe,b as Z}from"./chunk-GTQ5U6DA.js";import"./chunk-JHO7RU36.js";import"./chunk-5A7EFNRM.js";import"./chunk-NA6P5YCH.js";import"./chunk-F2SPBGOT.js";import"./chunk-SYOIP55B.js";import"./chunk-V7ZNWTMX.js";import"./chunk-MSP5TDR3.js";import"./chunk-VWGNVM37.js";import"./chunk-QKBWJPY2.js";import"./chunk-XFPD3Q2E.js";import"./chunk-AFJBSSNA.js";import{Q as Ae}from"./chunk-3ZKJXYZ4.js";import"./chunk-PA7QUJH7.js";import"./chunk-MC7IOE6A.js";import"./chunk-N4IVZOUG.js";import"./chunk-JWVIZID6.js";import"./chunk-33XRMYWN.js";import"./chunk-ZOKF3EKQ.js";import"./chunk-MDBKHBHQ.js";import"./chunk-WRVJM3F3.js";import"./chunk-NYBKFEEM.js";import"./chunk-XVSXMJ3S.js";import"./chunk-KQ66JTF7.js";import"./chunk-OOYDFTEF.js";import"./chunk-JNIP4OYT.js";import"./chunk-XRCQOGA2.js";import"./chunk-SWUBCABA.js";import"./chunk-EEIYH3NC.js";import"./chunk-ITDLKQAF.js";import"./chunk-44SDMU5C.js";import{i as $e,j as Pe}from"./chunk-U7IWD6UB.js";import"./chunk-CZBL7QEK.js";import"./chunk-PAJAZXOA.js";import"./chunk-7MCLPJAH.js";import"./chunk-WAIJPY5X.js";import"./chunk-YGMRSF47.js";import"./chunk-6XGS36TZ.js";import"./chunk-M2YY6A5T.js";import"./chunk-XLG73W5Q.js";import{ea as X,g as F,ua as V,x as G}from"./chunk-GCS2RK7E.js";import{a as Q}from"./chunk-OIPQWTNV.js";import"./chunk-VJI6MZK4.js";import"./chunk-5PRURJ2O.js";import{a as Ee,f as ke}from"./chunk-FGAB46RQ.js";import"./chunk-47ZMUKCZ.js";import{o as dt}from"./chunk-Z62JX42S.js";import{C as Ne,I as q,J as R,K as z,Na as Le,O as Ie,ja as be,la as xe}from"./chunk-2QHGKEME.js";import"./chunk-B624VS3G.js";import"./chunk-W4SQ6335.js";import"./chunk-YDSDBRIT.js";import{a as ge}from"./chunk-6PA65BO3.js";import"./chunk-OIXGC4LI.js";import"./chunk-MAAUVUWY.js";import"./chunk-4X64L7DZ.js";import"./chunk-WU2LB6XB.js";import{m as we}from"./chunk-GLL4BXR6.js";import"./chunk-4L5HWMAA.js";import{c as Y,j as fe}from"./chunk-EZS2GR7E.js";import"./chunk-NUN72MDU.js";import"./chunk-BFWVIVOY.js";import"./chunk-S3FOFXM7.js";import"./chunk-YIFLUVTR.js";import"./chunk-EN2WHAVL.js";import"./chunk-CP2RIMI2.js";import{f as De}from"./chunk-3QLLFUC4.js";import{h as _e}from"./chunk-EFOY37CC.js";import{c as Be}from"./chunk-HMTT52FG.js";import"./chunk-45NMMWRA.js";import"./chunk-E4OV5WXB.js";import"./chunk-GR7YC6C3.js";import"./chunk-O33H5V3V.js";import"./chunk-DJN2J7J5.js";import"./chunk-35ANKHOJ.js";import"./chunk-BI4OEIFC.js";import{Sa as he,Ub as ve,Xb as Te,_b as ct,mb as Se,na as W,tb as ue}from"./chunk-COF7YKSN.js";import{A as d,K as U}from"./chunk-VZKEX7KP.js";import"./chunk-QCEQQDCM.js";import{A as pe,E as j,o as J,y as H}from"./chunk-BJKBO23H.js";import"./chunk-IO3ALUOJ.js";import"./chunk-AHVVUOFF.js";import"./chunk-DJSNVDZI.js";import"./chunk-K336SGW3.js";import"./chunk-XFTQD4B2.js";import"./chunk-FOOC6LB7.js";import"./chunk-DHKS44RQ.js";import"./chunk-4DBVFCYR.js";import"./chunk-2IGQWLAB.js";import"./chunk-GVV6OTQP.js";import{t as ye,z as Ce}from"./chunk-ZFVABNQN.js";import"./chunk-VYWNZTTM.js";import"./chunk-LBWWOQL4.js";import{a as at}from"./chunk-4QGZDIBD.js";import{b as $}from"./chunk-73B6GL3S.js";import"./chunk-LVJGLJNA.js";import"./chunk-Z7PBP7IJ.js";import"./chunk-5F7M5EJ4.js";import"./chunk-RQWEJ5N6.js";import"./chunk-RNWGOGLT.js";import"./chunk-UGJ3FMEQ.js";import"./chunk-OPJRP6YV.js";import"./chunk-H6JAOQCX.js";import"./chunk-OJXBW2YQ.js";import"./chunk-Z2AIGJGI.js";import"./chunk-VBZ4JSJ6.js";import"./chunk-LBYXY63E.js";import"./chunk-M4ANCDMF.js";import"./chunk-J6KTJ3IN.js";import"./chunk-5CQODPK7.js";import"./chunk-C5XO4JMZ.js";import"./chunk-HI3LE734.js";import"./chunk-RX4V72AK.js";import{f as E,o as r,q as s}from"./chunk-Y5OH3DDZ.js";r();s();var st=E($());r();s();var S=E($()),Ye=E(ge());U();r();s();function _t(){let o=He(),a=We(),e=Ue();return async i=>{let n=await o(i),c=await a({coinId:i.coinId}),C=await e({coinId:i.coinId});return!n||!c||!C?Promise.reject():Promise.resolve()}}var ie=_t;r();s();var h=E($());U();r();s();var je=E(ge());var pt=(o,a)=>{let e=(0,je.useHistory)(),{address:i}=Me();return n=>{let c={from:o[n.addressType]};i&&(c.address=i);let C=Z(c),N=Z({coinId:n.coinId,addressType:n.addressType}),f=a==="send"?`${F}/${n.coinId}${V}${C}`:`${G}${N}`;e.push(f)}},re=pt;r();s();var qe=E(Le());U();ct();var ut=(o,a,e)=>{let i=(0,qe.useSelector)(xe);return n=>{let c=Te?.[a]?.[n.addressType],C=Ne(o[c]),N=d(ve[c]),f=Ee(n.coinAmount,{precision:e?.displayPrecision,isStableCoin:e?.stableCoin}).value,u=ke(n.currencyAmount,{currencySign:i.symbol}).value;return{addressDisplay:C,addressTypeDisplay:N,amountDisplay:f,currencyAmountDisplay:u}}},se=ut;r();s();var k={container:"_container_onsr7_1",body:"_body_onsr7_6",item:"_item_onsr7_9","item-left":"_item-left_onsr7_20",itemLeft:"_item-left_onsr7_20","item-right":"_item-right_onsr7_23",itemRight:"_item-right_onsr7_23","item-right-top":"_item-right-top_onsr7_26",itemRightTop:"_item-right-top_onsr7_26","item-right-bottom":"_item-right-bottom_onsr7_31",itemRightBottom:"_item-right-bottom_onsr7_31","item-icon":"_item-icon_onsr7_36",itemIcon:"_item-icon_onsr7_36","item-address":"_item-address_onsr7_40",itemAddress:"_item-address_onsr7_40","item-address-type":"_item-address-type_onsr7_47",itemAddressType:"_item-address-type_onsr7_47","item-currency-amount":"_item-currency-amount_onsr7_59",itemCurrencyAmount:"_item-currency-amount_onsr7_59","item-amount":"_item-amount_onsr7_70",itemAmount:"_item-amount_onsr7_70"};var ft=({visible:o,onClose:a,coin:e,type:i})=>{let n=Pe(e?.localType),c=te(e),C=i==="send"?c.filter(u=>u.coinAmount>0):c,N=se(n,e?.localType,e),f=re(n,i);return h.default.createElement("div",null,h.default.createElement(J.Action,{isFull:!0,noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:a,visible:o},h.default.createElement("div",{className:k.container},h.default.createElement(ee,{className:"setting-nav",title:d("extension_defi_top_header_title_select_address_type"),onBack:a,closeable:!1}),h.default.createElement("div",{className:k.body},h.default.createElement("div",{className:k.list},C.map(u=>{let{addressDisplay:v,addressTypeDisplay:I,amountDisplay:b,currencyAmountDisplay:T}=N(u);return h.default.createElement("div",{key:u.userAddress,className:k.item,onClick:()=>{f(u)}},h.default.createElement("div",{className:k.itemLeft},h.default.createElement(j,{width:32,height:32,alt:I,src:u.image,errorImg:Y,className:k.itemIcon})),h.default.createElement("div",{className:k.itemRight},h.default.createElement("div",{className:k.itemRightBottom},h.default.createElement("div",{className:k.itemAddressType},I),h.default.createElement("div",{className:k.itemAmount},b)),h.default.createElement("div",{className:k.itemRightTop},h.default.createElement("div",{className:k.itemAddress},v),h.default.createElement("div",{className:k.itemCurrencyAmount},T))))}))))))},ne=ft;r();s();var m=E($()),ze=E(at());U();ue();r();s();var y={container:"_container_dxmc1_1","setting-nav":"_setting-nav_dxmc1_6",settingNav:"_setting-nav_dxmc1_6",body:"_body_dxmc1_9",item:"_item_dxmc1_12","item-left":"_item-left_dxmc1_23",itemLeft:"_item-left_dxmc1_23","item-right":"_item-right_dxmc1_26",itemRight:"_item-right_dxmc1_26","item-right-top":"_item-right-top_dxmc1_29",itemRightTop:"_item-right-top_dxmc1_29","item-right-bottom":"_item-right-bottom_dxmc1_34",itemRightBottom:"_item-right-bottom_dxmc1_34","item-icon":"_item-icon_dxmc1_39",itemIcon:"_item-icon_dxmc1_39","item-address":"_item-address_dxmc1_43",itemAddress:"_item-address_dxmc1_43","item-address-type":"_item-address-type_dxmc1_50",itemAddressType:"_item-address-type_dxmc1_50","item-currency-amount":"_item-currency-amount_dxmc1_62",itemCurrencyAmount:"_item-currency-amount_dxmc1_62","item-amount":"_item-amount_dxmc1_73",itemAmount:"_item-amount_dxmc1_73",infoIcon:"_infoIcon_dxmc1_84",title:"_title_dxmc1_89",tip:"_tip_dxmc1_97",subTitle:"_subTitle_dxmc1_98"};var Re="SelectBTCAddress_has_opened_tip_on_dlg",gt=({visible:o,onClose:a,coin:e,type:i})=>{let n=localStorage.getItem(Re),c=$e(W),[C,N]=(0,m.useState)(!n),f=te(e),u=i==="send"?f.filter(p=>p.coinAmount>0):f,v=se(c,W,e),I=re(c,i),b=()=>{N(!1),localStorage.setItem(Re,!0)},T=()=>i==="send"?d("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:e?.chainName}):d("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:e?.chainName}),D=m.default.createElement(m.default.Fragment,null,d("extension_defi_top_header_title_select_address_type"),m.default.createElement(pe,{width:310,placement:pe.DIRECTION.bottomRight,title:T()},m.default.createElement(ye,{"data-testid":"top-header-info-icon",className:(0,ze.default)("okx-wallet-plugin-information-circle",y.infoIcon)})));return m.default.createElement(m.default.Fragment,null,m.default.createElement(J.Action,{isFull:!0,title:D,onClose:a,visible:o,noContentPadding:!0},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.body},m.default.createElement("div",{className:y.list},u.map(p=>{let{addressDisplay:t,addressTypeDisplay:g,amountDisplay:l,currencyAmountDisplay:x}=v(p);return m.default.createElement("div",{"data-testid":"select-btc-address-item",className:y.item,onClick:()=>{I(p)}},m.default.createElement("div",{className:y.itemLeft},m.default.createElement(j,{width:32,height:32,alt:g,src:p.image,errorImg:Y,className:y.itemIcon})),m.default.createElement("div",{className:y.itemRight},m.default.createElement("div",{className:y.itemRightBottom},m.default.createElement("div",{className:y.itemAddressType},g),m.default.createElement("div",{className:y.itemAmount},l)),m.default.createElement("div",{className:y.itemRightTop},m.default.createElement("div",{className:y.itemAddress},t),m.default.createElement("div",{className:y.itemCurrencyAmount},x))))}))))),m.default.createElement(J.Confirmation,{visible:o&&C,confirmText:d("wallet_extension_btn_general_gotit"),onConfirm:b,onClose:b,confirmBtnProps:{size:Ce.SIZE.lg}},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.title},d("extension_defi_popup_title_btc_address_type_icu",{chainName:e?.chainName})),m.default.createElement("div",{className:y.tip},d("extension_defi_popup_desc_btc_address_type_icu",{chainName:e?.chainName})))))},me=gt;r();s();var M=E($());U();function yt({list:o,pageType:a,isVirtualList:e,onSearch:i,renderEmpty:n,getItemProps:c,loading:C,loadingMore:N,...f},u){let{currentNetworkUniqueId:v}=Q(),I=(0,M.useMemo)(()=>{let T=o.map(p=>({...p,symbolName:p.symbol}));return we(T,v,a==="send")},[v,o]),b=T=>{let D,{baseCoinId:p,childrenCoin:t,tokenType:g,aggregation:l}=T;if(a==="send"){let B=(t||[]).filter(A=>A.currencyAmount>0);l&&B.length>1?D=d("wallet_manage_crypto_labels_crypto_multichain"):D=p===0?"":g}else D=l?d("wallet_manage_crypto_labels_crypto_multichain"):g;let x=c?c(T):{};return{name:T.name,tag:D,...x}};return M.default.createElement(Je,{headerProps:{closeable:!1,title:d("wallet_transfer_send_select_coin_maintitle_select_coin")},...f,searchPlaceholder:d("wallet_transfer_send_select_coin_placeholder_input_name"),list:I,onSearch:i,getItemProps:b,renderEmpty:n,isVirtualList:e,loadingMore:N,loading:C,ref:u})}var le=(0,M.forwardRef)(yt);r();s();var ae={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function Ct(){let o=(0,Ye.useHistory)(),a=K(),{address:e,coinIds:i}=Oe(o&&o.location.search.slice(1)),n=oe(),c=(0,S.useMemo)(()=>(n||[]).filter(t=>{let g=l=>{if(i){let x=i.split(",").map(B=>Number(B));return x.includes(l.coinId)||x.includes(l.baseCoinId)}return!0};return _e(t.coinAmount,0)&&g(t)}),[n,i]),C=ie(),[N,f]=(0,S.useState)(!1),[u,v]=(0,S.useState)(!1),[I,b]=(0,S.useState)(null),T=t=>{let g=t.childrenCoin.filter(l=>l.coinId===t.coinId&&_e(l.coinAmount,0));if(g.length===1){let l=g[0].userAddress;if(l){let x=`?from=${l}`;e&&(x+=`&address=${e}`),o.push({pathname:`${F}/${t.coinId}${V}`,search:x})}}return null},D=async t=>{if(q(t)){T(t),b(t),f(!0);return}if(R(t)||z(t)){T(t),b(t),v(!0);return}await C(t);let g,l,B=(t.childrenCoin||[]).filter(A=>A.currencyAmount>0);B.length>1&&t.aggregation?(g=X,l=`coinKey=${encodeURIComponent(t.key)}&aggregationSymbol=${t.symbol}&type=${a}&stableCoin=${Boolean(t.stableCoin)}`):B.length===1&&t.aggregation?g=`${F}/${B[0].coinId}${V}`:g=`${F}/${t.coinId}${V}`,e&&(l?l+=`&address=${e}`:l=`address=${e}`),o.push({pathname:g,search:l})};return c.length===0?S.default.createElement(Be.Container,null,S.default.createElement(ee,{closeable:!1,title:d("wallet_transfer_send_select_coin_maintitle_select_coin")}),S.default.createElement(H.State,{className:ae.empty,title:d("wallet_transfer_maintitle_not_any_token")})):S.default.createElement(S.default.Fragment,null,S.default.createElement(le,{list:c,renderEmpty:t=>S.default.createElement(H.State,{className:ae.emptyResult,title:d("wallet_extension_send_toast_unfoundcrypto",{crypto:S.default.createElement("span",{className:ae.emptyText},t)})}),onClick:D,pageType:"send",isVirtualList:!1}),S.default.createElement(me,{visible:N,onClose:()=>{f(!1)},coin:I,type:"send"}),S.default.createElement(ne,{visible:u,onClose:()=>{v(!1)},coin:I,type:"send"}))}var Qe=Ct;r();s();var w=E($()),ot=E(Le()),it=E(ge());U();r();s();var Xe=E($()),P=E(dt());ue();function et(){let[o,a]=(0,Xe.useState)(""),e=!!o,i=oe(),n=Fe(),c=(0,P.useCreation)(()=>Array.from(new Set(Ge(e?n:i).map(p=>p.coinId))),[i,n,e]),C=Ve(),N=(0,P.useMemoizedFn)(p=>{a(p)}),f=(0,P.useDebounce)(o,{wait:500}),u=Ke(),{data:v,loading:I,loadingMore:b,listRef:T}=Ze({aggregation:!0,symbolLike:f,chainIds:u!==""?[Number(u)]:void 0,excludeCoinIds:c},{reloadDeps:[f],enable:!C});return{list:(0,P.useCreation)(()=>{let p=v?.list??[];return[...o?n.filter(l=>l.symbol?.toLowerCase().includes(o.toLowerCase())):i,...p].filter(({coinId:l,baseCoinId:x})=>!Se(l,x))},[i,n,v?.list]),listRef:T,search:o,onSearch:N,loading:I,loadingMore:b,isSearching:I&&!!o}}ue();r();s();var tt={empty:"_empty_1umri_1"};function ht(){let o=(0,it.useHistory)(),{keyringIdentityType:a}=(0,ot.useSelector)(be),{currentNetworkUniqueId:e}=Q(),i=K(),n=ie(),{list:c,listRef:C,onSearch:N,loading:f,loadingMore:u,isSearching:v}=et(),[I,b]=(0,w.useState)(!1),[T,D]=(0,w.useState)(!1),[p,t]=(0,w.useState)(null),g=A=>{if(A?.childrenCoin?.length===1){let{addressType:O}=A.childrenCoin[0]||{},_=Z({coinId:A.coinId,addressType:O});o.push(`${G}${_}`)}},l=async A=>{let O=Ie(A),_;if(O){if(_=await Ae(A),e!==""&&_?.aggregation&&(_=_.childrenCoin?.find(lt=>lt.chainId===Number(e))??null),!_)return}else _=A;if(q(_)){t(_),b(!0);return}if(R(_)||z(_)){g(_),t(_),D(!0);return}await n(_);let ce,de,nt=_.aggregation,mt=_.childrenCoin??[];nt&&mt.length>0?(ce=X,de=`coinKey=${encodeURIComponent(_.key)}&aggregationSymbol=${_.symbol}&type=${i}&stableCoin=${Boolean(_.stableCoin)}`):(ce=G,de=`coinId=${_.coinId}`),o.push({pathname:ce,search:de})},x=(0,w.useCallback)(A=>{let O={};return A.localType===W&&A.coinId===he&&De(a)&&(O.tag=d("extension_wallet_footer_alert_asset_notsupported")),O},[a]);return w.default.createElement(w.default.Fragment,null,w.default.createElement(le,{list:v?[]:c,onClick:l,getItemProps:x,isVirtualList:!1,onSearch:N,ref:C,renderEmpty:()=>w.default.createElement(H.State,{className:tt.empty,title:d("commonall_emptystate_text_no_results")}),loadingMore:u||f&&!v,loading:v}),w.default.createElement(me,{visible:I,onClose:()=>{b(!1)},coin:p,type:"receive"}),w.default.createElement(ne,{visible:T,onClose:()=>{D(!1)},coin:p,type:"receive"}))}var rt=ht;var St={[fe.SEND]:Qe,[fe.RECEIVE]:rt};function vt(){let o=K(),a=St[o];return a?st.default.createElement(a,null):null}var Ji=vt;export{Ji as default};
//# sourceMappingURL=select-coin-4Q7HETEH.js.map
