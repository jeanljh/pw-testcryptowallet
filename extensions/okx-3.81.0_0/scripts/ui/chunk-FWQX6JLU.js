import{a as Nn}from"./chunk-NCWD27TW.js";import{a as Yr,b as zr,c as en,d as on,e as fn,f as gn,g as hn,h as wn,i as In}from"./chunk-MLHXJD6C.js";import{a as Kr}from"./chunk-APWPXM2W.js";import{a as Ur}from"./chunk-PRXCTTVN.js";import{a as ln,b as cn,c as An,d as Tn}from"./chunk-LH7K2JNC.js";import{a as yt}from"./chunk-7X2CMAJK.js";import{a as Gr,b as we,c as $r}from"./chunk-HW7PF3XP.js";import{a as kn}from"./chunk-I2FUSMYI.js";import{b as Qt,c as Re,d as Cn,e as Xt,f as yn}from"./chunk-MJKLSIQL.js";import{a as an,b as En}from"./chunk-XBPG5JPC.js";import{a as un,b as pn}from"./chunk-YRSRYUIR.js";import{a as sn}from"./chunk-QGIEUVEJ.js";import{a as _n}from"./chunk-7P6PQ2A4.js";import{a as Zr}from"./chunk-3C2GFLAI.js";import{f as Vr,g as Zt,h as qr}from"./chunk-G42BVB67.js";import{c as Qr,f as Xr,g as Jr}from"./chunk-SNS3QUAD.js";import{b as jr}from"./chunk-LBF75ZOB.js";import{a as Sn}from"./chunk-BNAJU2TX.js";import{a as Ct}from"./chunk-6C2G522Z.js";import{a as Wr}from"./chunk-5QYLVV6H.js";import{a as Or}from"./chunk-GWMNMJND.js";import{H as Pr}from"./chunk-2VUOGSTW.js";import{a as Dr}from"./chunk-P4PGYDTS.js";import{a as Lr}from"./chunk-S7VT2TWF.js";import{c as Br}from"./chunk-BNS5ABAB.js";import{a as ht,b as Fr}from"./chunk-L6EQYGXX.js";import{a as dn}from"./chunk-OW45SNHL.js";import{a as rn,b as nn}from"./chunk-UYJBEFNU.js";import{a as Rr,b as mn}from"./chunk-YX2POTUH.js";import{a as Mr,b as _t}from"./chunk-GTQ5U6DA.js";import{a as tn}from"./chunk-MYXJSJEA.js";import{a as gt}from"./chunk-SMB23TMJ.js";import{a as ft}from"./chunk-TE6AOABI.js";import{c as vr}from"./chunk-YTR7GLCK.js";import{c as Ar,d as Tr,e as Sr,i as Hr}from"./chunk-TS6QJPGP.js";import{n as cr}from"./chunk-6D46L7TU.js";import{c as _r}from"./chunk-ITLEVVXJ.js";import{g as gr}from"./chunk-GDQAWT2G.js";import{b as hr}from"./chunk-5A7EFNRM.js";import{e as Vt}from"./chunk-SYOIP55B.js";import{g as dt,h as br}from"./chunk-V7ZNWTMX.js";import{c as qt,h as wr,l as Ir,n as Er,o as Nr,p as xr}from"./chunk-MSP5TDR3.js";import{a as Bo}from"./chunk-XFPD3Q2E.js";import{x as jo}from"./chunk-3ZKJXYZ4.js";import{b as fr}from"./chunk-PMO2NS5Q.js";import{a as Cr,c as yr}from"./chunk-EBRJSEEJ.js";import{b as Do}from"./chunk-PA7QUJH7.js";import{Da as nt,ea as Vo,wa as qo}from"./chunk-MSFAPAHB.js";import{m as pr}from"./chunk-ZOKF3EKQ.js";import{a as ut}from"./chunk-NYBKFEEM.js";import{c as jt}from"./chunk-OOYDFTEF.js";import{a as W}from"./chunk-JNIP4OYT.js";import{m as lt,o as mr,v as lr}from"./chunk-FVCINJIW.js";import{b as pt}from"./chunk-QRAFULYC.js";import{a as kr}from"./chunk-U7IWD6UB.js";import{h as X,j as ke}from"./chunk-YGMRSF47.js";import{a as ur}from"./chunk-6XGS36TZ.js";import{I as at,da as Fe,e as it,g as tr,j as or,ja as mt,jb as sr,ta as rr,ua as nr,ub as ir,zb as ar}from"./chunk-GCS2RK7E.js";import{a as ie}from"./chunk-OIPQWTNV.js";import{f as st}from"./chunk-VJI6MZK4.js";import{i as dr,p as Kt,u as me}from"./chunk-FGAB46RQ.js";import{o as Q}from"./chunk-Z62JX42S.js";import{C as Ho,Ha as zo,I as Fo,J as Ro,K as Go,Ma as Ko,Na as G,P as Yt,d as pi,fa as rt,ga as $o,ja as Uo,la as Yo}from"./chunk-2QHGKEME.js";import{a as ae}from"./chunk-6PA65BO3.js";import{c as Qo,j as He,k as Xo,l as Jo}from"./chunk-EZS2GR7E.js";import{f as Zo,q as _i}from"./chunk-NUN72MDU.js";import{c as zt,e as fi}from"./chunk-EN2WHAVL.js";import{h as ct}from"./chunk-CP2RIMI2.js";import{a as er}from"./chunk-3QLLFUC4.js";import{B as Xe,a as xo,c as Ze,i as Qe}from"./chunk-EFOY37CC.js";import{c as w}from"./chunk-HMTT52FG.js";import{b as se,c as tt}from"./chunk-GR7YC6C3.js";import{E as Se,J as $t}from"./chunk-O33H5V3V.js";import{C as qe,Ha as Po,Ia as Mo,Ib as Ut,J as No,Ja as Oo,Sb as di,ac as ot,la as Oe,na as _e,nc as Wo,tb as We,va as Lo}from"./chunk-COF7YKSN.js";import{A as y,D as Ve,H as Io,J as Eo,K as O,l as ko,o as Z,z as wo}from"./chunk-VZKEX7KP.js";import{H as Gt,I as vo,O as Me,d as et,e as fe,o as H,w as Pe,y as Te}from"./chunk-BJKBO23H.js";import{M as Ao,T as To,pa as So,va as Rt}from"./chunk-XFTQD4B2.js";import{a as bo}from"./chunk-GVV6OTQP.js";import{t as Je,z as E}from"./chunk-ZFVABNQN.js";import{a as Le}from"./chunk-4QGZDIBD.js";import{b as I}from"./chunk-73B6GL3S.js";import{f as l,n as process,o,q as r}from"./chunk-Y5OH3DDZ.js";o();r();var h=l(I()),Qs=l(G()),Wt=l(ae()),Ht=l(Q());O();_i();o();r();o();r();var $=l(I()),vn=l(ae());O();o();r();var Jt=l(I());fi();var xn=({walletIds:e})=>{let t=(0,Jt.useCallback)(async()=>{try{return await zt().fetchApprovalRisk({accountIds:e})}catch{return{}}},[e]),n=(0,Jt.useCallback)(async()=>{await zt().setApprovalRiskRemindLater()},[]);return{fetchApprovalRisk:t,remindLater:n}};o();r();var bn={btn:"_btn_l5kiz_1"};var Bn=({walletId:e,onFetchApprovalRisk:t})=>{let[n,s]=$.default.useState(!1),i=(0,$.useMemo)(()=>({walletIds:[e]}),[e]),{fetchApprovalRisk:a,remindLater:m}=xn(i);(0,$.useEffect)(()=>{(async()=>{let{approvalProjectList:g}=await a();g?.length>0&&(s(!0),t(!0)),t(!1)})()},[a,t]);let u=(0,$.useCallback)(()=>{s(!1),qo({go_to_website:!1}),m()},[m]),p=(0,vn.useHistory)(),f=()=>{p.push(ir)};return $.default.createElement(H.Prompt,{visible:n,title:y("wallet_extension_risk_modaltitle_risk_warning"),text:y("wallet_extension_risk_modalsubtitle_risk_warning"),infoType:H.Prompt.INFO_TYPE.warn,hideCloseBtn:!0,alignBottom:!1,footer:$.default.createElement($.default.Fragment,null,$.default.createElement(E,{category:E.CATEGORY.fill,type:E.TYPE.highlight,size:E.SIZE.lg,block:!0,onClick:f},y("wallet_extension_approval_btn_revoke")),$.default.createElement(E,{category:E.CATEGORY.outline,type:E.TYPE.default,size:E.SIZE.lg,className:bn.btn,block:!0,onClick:u},y("wallet_extension_risk_btn_remind_later")))})};o();r();var Dn=l(G());var Ie=()=>{let e=X(),t=(0,Dn.useSelector)(rt)||{};return{isWalletCreated:Boolean(t[e])}};o();r();var N=l(I()),cs=l(G());o();r();var to=l(I());O();o();r();var eo={content:"_content_1mi10_1",wrapper:"_wrapper_1mi10_5"};var Ln=({tryAgain:e})=>to.default.createElement(w.FlexBox,{align:w.ALIGN.center,justify:w.ALIGN.center,direction:w.DIRECTION.vertical,className:eo.content},to.default.createElement(Te.State,{title:y("wallet_extension_home_title_network_unavailable"),type:Te.State.TYPE.noNetwork,description:y("wallet_extension_home_text_check_network_error"),buttonText:y("wallet_extension_home_btn_try_again"),onButtonClick:()=>{e&&e()},className:eo.wrapper}));o();r();var z=l(I());o();r();var Y={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var gi=()=>z.default.createElement(w.FlexBox,{direction:w.DIRECTION.vertical,align:w.ALIGN.unset,className:Y.skeletonWrapper},z.default.createElement(fe.Input,{active:!0,className:Y.tab}),z.default.createElement(w.FlexBox,{direction:w.DIRECTION.vertical,justify:"space-around",className:Y.tokenList},Array(5).fill("").map((e,t)=>z.default.createElement(w.FlexBox,{className:Y.token,align:w.ALIGN.center,key:t},z.default.createElement(fe.Avatar,{active:!0,className:Y.logo}),z.default.createElement(w.FlexBox,{direction:w.DIRECTION.vertical,className:Y.middle},z.default.createElement(fe.Input,{active:!0,className:Y.symbol}),z.default.createElement(fe.Input,{active:!0,className:Y.chain})),z.default.createElement(w.FlexBox,{direction:w.DIRECTION.vertical,align:w.ALIGN.end,className:Y.right},z.default.createElement(fe.Input,{active:!0,className:Y.number}),z.default.createElement(fe.Input,{active:!0,className:Y.currency})))))),Pn=gi;o();r();var At=l(I());var Mn=l(G());var On=()=>{let[e,t]=(0,At.useState)([]),n=pt("nft-operate"),i=(0,Mn.useSelector)($o)?.account?.aptos||"",a=rn();return nn(),(0,At.useEffect)(()=>{(!n||n.data.status===2)&&i&&jo(i).then(m=>{t(m.list)}),n?.data?.status===2&&setTimeout(()=>{a()},3e3)},[n,a]),{aptosNftOffers:e,aptosAddress:i,fetchNftListData:a}};o();r();o();r();var x=l(I()),is=l(G()),as=l(ae());o();r();var Rn=l(pi());o();r();var Ci=e=>{let t=e;return typeof t!="string"?"":(t?.[0]==="$"&&(t=e?.slice(1)),t?.toLowerCase()||"")},Wn=e=>e.isHighQuality!==Jo.NORMAL&&e.riskType===Xo.NORMAL,yi=e=>{let t=[];return e.forEach(n=>{n?.aggregation?t.push(...n?.childrenCoin||[]):t.push(n)}),t};function Hn(e){let t=new Map;return yi(e).forEach(s=>{let i=s,m=`${Ci(i.symbol)}-${i.chainId}`;if(t.has(m)){let u=t.get(m);Wn(u)&&!u.sameNameCoin&&(u.sameNameCoin=!0),Wn(i)&&(i.sameNameCoin=!0)}else t.set(m,i)}),e}o();r();var Fn=({defaultBaseCoinsCoinIdsSet:e,balanceCoin:t,isDefault:n,smallAssetsAmount:s,hiddenSmallAssets:i})=>{let m=e.has(t.coinId)||n||t.isDefault,u=!i||Qe(t.currencyAmountUSD,s);return m||u};var Ai={showCoins:[],hiddenCoins:[]},Gn=(0,Rn.createSelector)(Er,xr,Nr,Bo,(e,t,n,s)=>{if(!e.length)return Ai;let i=qt(e,p=>!t.has(p.coinId),{sort:!1}).results,a=Hn(i),{results:m,uselessResults:u}=qt(a,(p,f)=>Fn({defaultBaseCoinsCoinIdsSet:n,balanceCoin:p,isDefault:f,smallAssetsAmount:s.amount,hiddenSmallAssets:s.open}),{ignoreChildren:!0});return{showCoins:m,hiddenCoins:u}});var xe=l(Q());O();o();r();var Un=l(I()),oo=l(G());O();var Ti=e=>e.map(t=>({...t,coinAmount:null})),Si=e=>e===null?"--":e,$n=e=>e.map(t=>{try{let n=new Eo(t.image),{query:s}=n;if(!s.get("x-oss-process"))return s.set("x-oss-process","image/resize,m_lfit,w_100,h_100/ignore-error,1"),{...t,image:n.get()}}catch{}return t}),ki=(e,t)=>e.filter(s=>(s?.childrenCoin||[]).find(i=>i.chainId===Number(t))||s.chainId===Number(t)),ro=e=>{let t=kr(),{currentNetworkUniqueId:n}=ie(),s=(0,oo.useSelector)(rt),i=(0,oo.useSelector)(Ko),a=Boolean(s[t]),m=Boolean(i[t]);return(!a||m)&&(e=Ti(e)),(0,Un.useMemo)(()=>{if(n==="")return $n(e);let p=ki(e,n),f=[];return p.forEach(g=>{if(g?.aggregation){let _=(g?.childrenCoin||[]).filter(T=>T.chainId===Number(n)),d=_.reduce((T,S)=>Ze(T,S.coinAmount),"0"),C=_.reduce((T,S)=>Ze(T,S.currencyAmount),"0"),A=_.reduce((T,S)=>Ze(T,S.currencyAmountUSD),"0");f.push({...g,childrenCoin:_,coinAmount:d,currencyAmount:C,currencyAmountUSD:A})}else f.push(g)}),f=f.map(g=>({...g,coinAmount:Si(g?.coinAmount)})).sort((g,_)=>Qe(_.currencyAmount,g.currencyAmount)?1:-1),$n(f)},[e,n])};o();r();o();r();var St=l(I()),Yn=l(ae());var zn=l(Le());O();o();r();var Tt={button:"_button_170vr_1","button--has-dapp-state":"_button--has-dapp-state_170vr_13",buttonHasDappState:"_button--has-dapp-state_170vr_13",icon:"_icon_170vr_16",empty:"_empty_170vr_20"};function wi({hasDappState:e}){let t=(0,Yn.useHistory)();return St.default.createElement("div",{className:(0,zn.default)(Tt.button,{[Tt["button--has-dapp-state"]]:e}),"data-testid":W.HOME_PAGE.COIN_MANAGE_BUTTON_BOTTOM},St.default.createElement(E,{circle:!0,category:E.CATEGORY.outline,type:E.TYPE.secondary,size:E.SIZE.md,onClick:()=>{t.push(at)}},St.default.createElement(Je,{className:`okx-wallet-plugin-edit-wallet ${Tt.icon}`}),y("wallet_home_btn_manage_crypto")))}var Kn=wi;var jn=Kn;o();r();var Ee=l(I()),es=l(G()),ts=l(Q());o();r();var Vn=l(Q());var qn=()=>{let e=dt();return(0,Vn.useCreation)(()=>Object.keys(e).reduce((t,n)=>{let s=e?.[n]?.priceCoinId;return t[n]=s,t},{}),[e])};o();r();var Qn=l(G()),Xn=l(ae());We();var Zn={[_e]:"btcAggregation",[Mo]:"nearAggregation",[Oo]:"tonAggregation"},Jn=()=>{let{currentNetworkUniqueId:e}=(0,Qn.useSelector)(st),t=br(),n=(0,Xn.useHistory)(),s=m=>{let u=Zn[m.localType]||Zn[_e],p=_t({[u]:!0,coinSymbol:m.symbol,coinId:m.coinId,addressType:"",sameNameCoin:Boolean(m.sameNameCoin)});return`${it}${p}`},i=async m=>{let p=(e!==""?m.childrenCoin.find(g=>g.chainId===Number(e)):null)?.coinId||"",f=_t({aggregation:!0,coinSymbol:m.symbol,coinId:p,sameNameCoin:Boolean(m.sameNameCoin)});return`${it}${f}`};return{jumpCoinDetailPage:async m=>{let u="";if(m.aggregation)u=await i(m);else if(Fo(m)||Ro(m)||Go(m))u=s(m);else{let p=_t({coinId:m.coinId,sameNameCoin:Boolean(m.sameNameCoin)});u=`${it}${p}`}u&&n.push(u)},coinToCurrencyRate:t}};function os({dataSource:e,hiddenAssets:t,onMount:n,virtualable:s,height:i,getContainer:a,listRef:m,onScrollEnd:u}){let{jumpCoinDetailPage:p,coinToCurrencyRate:f}=Jn(),g=qn(),_=pn(),d=dt(),{currentNetworkUniqueId:C}=(0,es.useSelector)(st),A=(0,ts.useMemoizedFn)(()=>{n?.()});(0,Ee.useLayoutEffect)(()=>{A()},[A]);let T=S=>{let{aggregation:B,coinId:k,coinAmount:L,currencyAmount:b}=S,P=k;B&&!C&&(P=g?.[k]||k);let F=f?.[P]||"0",v=B&&!C?xo(L,F):b,D=d?.[P],U=D?.coinPriceChangePercent24h??void 0,M=D?.anchorStatus===1;return{price:F,currencyAmount:v,pricePercent:U,isAnchorOff:M}};return Ee.default.createElement(Vt,{listRef:m,"data-testid":W.HOME_PAGE.COMMON_COIN_LIST,renderEmpty:!1,dataSource:e,onScrollEnd:u,renderItem:S=>{let{image:B,symbol:k,coinAmount:L,riskType:b,chainName:P,sameNameCoin:F,voucherToken:v,stableCoin:D,displayPrecision:U,childrenCoin:M=[]}=S,R=_(S),{price:de,currencyAmount:ve,pricePercent:ye,isAnchorOff:Ke}=T(S),{showOnHomepage:q,maxApy:oe}=wr(S);return Ee.default.createElement(Vt.Coin,{icon:{lazyload:!0,src:B,type:dr.image,defaultIcon:Qo},price:de,pricePercent:ye,symbol:k,hidden:t,balance:R?L:void 0,market:R?ve:void 0,onClick:async()=>{R&&await p(S)},riskType:b,chainName:P,isAnchorOff:Ke,isVoucherToken:v,sameNameCoin:F,stableCoin:D??M[0]?.stableCoin,displayPrecision:U??M[0]?.displayPrecision,layoutType:"homePage",showApyOnHomepage:q,maxApy:oe},!R&&Ee.default.createElement(un,{coinId:S?.coinId}))},virtualable:s,height:i,getContainer:a})}os.displayName="CommonList";var no=os;o();r();var J=l(I());O();We();tt();$t();o();r();var rs={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function Ii(){let[e,t]=(0,J.useState)(!1),[n,s]=(0,J.useState)({}),i=pr(Oe),a=pt("dex-across-order-info"),{currentNetworkUniqueId:m}=ie(),u=Cr({localType:Oe})||[],p=Number(m)===u?.[0]?.realChainId||m==="";(0,J.useEffect)(()=>{(()=>{Se(se.postPendingFacetOrder,{userWalletAddresses:i,chainId:u?.[0]?.realChainId||1}).then(_=>{if(_.data?.length>0){if(p)t(!0);else{t(!1);return}let d=_.data.filter(C=>Number(C.status)===11&&Number(C.specialOrderType)===3);d?.length>0?(s({orderId:d[0].orderId,toAmount:d[0].toAmount,toTokenSymbol:d[0].toTokenSymbol}),t(!0)):(s(""),t(!1))}else s({}),t(!1)}).catch(()=>{s({}),t(!1)})})()},[a,m,p]);let{openDexTxDetailDialog:f}=Pr();return e?J.default.createElement(w.Box,{className:rs.root},J.default.createElement(et,{desc:J.default.createElement("div",null,y("swaptrade_extension_reminder_desc_pending_withdrawal",{token:n?.toTokenSymbol,amount:n?.toAmount}),J.default.createElement(et.Link,{onClick:g=>{g.preventDefault(),f(n?.orderId)}},y("wallet_extension_details_textbtn_check_details"))),type:et.TYPE.info,onClose:()=>{t(!1)}})):null}var ns=Ii;o();r();var wt=l(I()),so=l(Le());O();No();o();r();var kt={root:"_root_15d68_1","root--sticky":"_root--sticky_15d68_12",rootSticky:"_root--sticky_15d68_12",icon:"_icon_15d68_19"};function Ei({length:e,toggle:t,value:n}){let s=n?"okx-wallet-plugin-arrow-small-down":"okx-wallet-plugin-arrow-small-up",i=y("wallet_extension_main_toggle_hide",{num:ko.formatNumber(e)});return wt.default.createElement("div",{onClick:t,className:(0,so.default)(kt.root,{[kt.rootSticky]:Xe()!==qe}),"data-testid":W.HOME_PAGE.HIDDEN_COIN_LIST},wt.default.createElement("div",null,i),wt.default.createElement(Je,{className:(0,so.default)(s,kt.icon)}))}var ss=Ei;o();r();var Ne={button:"_button_1jv2b_1",coinListInnerContainer:"_coinListInnerContainer_1jv2b_5",showButton:"_showButton_1jv2b_10",coinList:"_coinList_1jv2b_5",icon:"_icon_1jv2b_22",hiddenCoinList:"_hiddenCoinList_1jv2b_26","hidden-coin-list-with-dapp":"_hidden-coin-list-with-dapp_1jv2b_30",hiddenCoinListWithDapp:"_hidden-coin-list-with-dapp_1jv2b_30",empty:"_empty_1jv2b_34",emptyImg:"_emptyImg_1jv2b_37"};var Ni=190,xi="smallAssetsHidden",bi=({scrollTop:e,hiddenAssets:t,backupHeight:n,changeScrollTop:s,showDappConnectAffix:i})=>{let{showCoins:a,hiddenCoins:m}=(0,is.useSelector)(Gn),u=ro(a),p=ro(m),[f,g]=an(xi,{defaultValue:!0}),_=()=>{g(!f)},d=(0,x.useRef)(null),C=(0,x.useRef)(null),[A,T]=(0,x.useState)(!1),[S]=(0,xe.useInViewport)(d),B=(0,xe.useScroll)(document.getElementById("home-page-root-element-id")),L=(0,xe.useSize)(()=>document.documentElement)?.height??window.innerHeight,b=(B?.top??0)>0||S,P=(0,x.useRef)(e),F=()=>{P.current=e,_()},v=()=>{requestAnimationFrame(()=>{s(P.current)})},{fetch:D}=cn();sn(D,{cacheKey:ln,staleTime:1e3*60*10});let U=(0,as.useHistory)(),M=u.length,R=p.length,de=(0,x.useMemo)(()=>e<=Ni?!1:M+(f?0:R)>8,[f,R,M,e]),{paddingBottom:ve}=mn({isButtonAbsolute:de,backupHeight:n});(0,x.useEffect)(()=>{if(f)return;let q=C.current?.getListRef?C.current?.getListRef():null,oe=document.getElementById("home-page-root-element-id");if(!q||!oe)return;let Be=re=>{let Ae=q.getBoundingClientRect(),Ft=Ae.top<=0,{scrollTop:je}=q,De=()=>{re.preventDefault(),re.stopPropagation(),oe.scrollBy({top:re.deltaY,behavior:"auto"})};if(!Ft&&je===0){De();return}if(je===0&&re.deltaY<0){De();return}A&&De(),Ae.bottom>=L&&re.deltaY<0&&A&&T(!1)};return q.addEventListener("wheel",Be,{passive:!1,capture:!0}),function(){q.removeEventListener("wheel",Be,{capture:!0})}},[f,A,L,i]);let ye=()=>{T(!0)};return M===0&&R===0?x.default.createElement("div",{style:{paddingBottom:ve+n}},x.default.createElement(Te.State,{imgClassName:Ne.emptyImg,className:Ne.empty,type:Te.State.TYPE.noRecord,title:y("extension_wallet_home_text_no_added_currencies"),buttonText:y("extension_wallet_home_btn_add_now"),onButtonClick:()=>{U.push(at)}})):x.default.createElement(x.default.Fragment,null,x.default.createElement("div",{className:Ne.coinList},x.default.createElement(ns,null),x.default.createElement(no,{dataSource:u,hiddenAssets:t,virtualable:M>=100,height:M>=100?L:void 0,getContainer:()=>document.getElementById("home-page-root-element-id")})),x.default.createElement("div",{className:i?Ne.hiddenCoinListWithDapp:Ne.hiddenCoinList},R>0&&x.default.createElement(x.default.Fragment,null,x.default.createElement(ss,{length:R,toggle:F,value:f}),!f&&x.default.createElement(no,{listRef:C,onMount:v,dataSource:p,hiddenAssets:t,virtualable:p.length>=100,height:p.length>=100?L:void 0,onScrollEnd:ye})),x.default.createElement("div",{ref:d})),b&&x.default.createElement(jn,{hasDappState:i}))},io=bi;o();r();var K=l(I()),It=l(G()),ms=l(Le());O();No();o();r();var Ge={homeTabs:"_homeTabs_1yjzb_1","homeTabs--sticky":"_homeTabs--sticky_1yjzb_4",homeTabsSticky:"_homeTabs--sticky_1yjzb_4",homeTab:"_homeTab_1yjzb_1",active:"_active_1yjzb_18"};var Et=72,ls=K.default.forwardRef(({aptosNftOffers:e,handleResetScrollTop:t},n)=>{let s=(0,It.useSelector)(lt),i=(0,It.useDispatch)(),a=Ct(nt),m=(0,K.useMemo)(()=>[K.default.createElement("div",{key:"coins","data-testid":`${W.HOME_PAGE.MAIN_TABS}-wallet_extension_nft_tab_coins`},y("wallet_extension_nft_tab_coins")),K.default.createElement("div",{key:"defi","data-testid":`${W.HOME_PAGE.MAIN_TABS}-wallet_extension_tab_defi`},y("wallet_extension_tab_defi")),K.default.createElement("div",{key:"nfts","data-testid":`${W.HOME_PAGE.MAIN_TABS}-wallet_extension_nft_tab_nfts`},y("wallet_extension_nft_tab_nfts"),e.length>0&&K.default.createElement("span",{className:"new-home-nft-aptos-notify"})),K.default.createElement("div",{key:"approve","data-testid":`${W.HOME_PAGE.MAIN_TABS}-wallet_extension_home_tab_approvals`},y("wallet_extension_home_tab_approvals"))],[e]);return K.default.createElement("div",{ref:n,className:(0,ms.default)(Ge.homeTabs,{[Ge.homeTabsSticky]:Xe()!==qe}),style:{top:Et},"data-testid":W.HOME_PAGE.MAIN_TABS},K.default.createElement(Me,{noLine:!0,activeId:s,size:Me.SIZE.lg,color:Me.COLOR.grey,paneSpacing:0,noPadding:!0,onChange:u=>{let p;switch(u){case ne.CRYPTO:p="crypto";break;case ne.DEFI:p="defi";break;case ne.NFT:p="nfts";break;case ne.APPROVE:p="approve";break;default:break}a({homepage:p}),t(),i(mr.setActiveId({id:u}))}},m.map((u,p)=>K.default.createElement(Me.TabPane,{className:`${Ge.homeTab} ${+s===p+1?Ge.active:""}`,tab:u,key:u.key,id:p+1}))))});var vi=(0,N.lazy)(()=>import("./Nft-7S2PNNUX.js")),Bi=(0,N.lazy)(()=>import("./DefiList-CLE5U2TD.js")),Di=(0,N.lazy)(()=>import("./Approve-3I5VPK3C.js")),ne={CRYPTO:1,DEFI:2,NFT:3,APPROVE:4},us=({scrollTop:e,hiddenAssets:t,backupHeight:n,isWalletCreated:s,changeScrollTop:i,errorType:a,tryAgain:m,showDappConnectAffix:u,handleResetScrollTop:p,topBarHeight:f,tabRef:g})=>{let _=(0,cs.useSelector)(lt),{aptosNftOffers:d,aptosAddress:C}=On(),A=(0,N.useMemo)(()=>{switch(_){case ne.NFT:return N.default.createElement(N.Suspense,{fallback:null},N.default.createElement(vi,{scrollTop:e,aptosNftOffers:d,aptosAddress:C,backupHeight:n}));case ne.DEFI:return N.default.createElement(N.Suspense,{fallback:null},N.default.createElement(Bi,{scrollTop:e,hiddenAssets:t,backupHeight:n,isWalletCreated:s}));case ne.APPROVE:return N.default.createElement(N.Suspense,{fallback:null},N.default.createElement(Di,null));default:return N.default.createElement(io,{scrollTop:e,hiddenAssets:t,backupHeight:n,changeScrollTop:i,showDappConnectAffix:u})}},[_,e,t,n,i,d,C,s]),T=(0,N.useMemo)(()=>a===we.PENDING,[a]),S=(0,N.useMemo)(()=>[we.CREATE_FAIL_FROM_NETWORK_ERROR,we.CREATE_FAIL_FROM_SERVER_ERROR].includes(a),[a]),B=()=>S?N.default.createElement(Ln,{tryAgain:m}):T&&(_===ne.CRYPTO||!_)?N.default.createElement(Pn,null):A,k=g.current?.clientHeight||0;return N.default.createElement(N.default.Fragment,null,N.default.createElement(ls,{ref:g,aptosNftOffers:d,handleResetScrollTop:p}),N.default.createElement("div",{style:{minHeight:`calc(100vh - ${f+k}px)`}},B()))};o();r();var le=l(I());O();o();r();var ge={iconAniWrapper:"_iconAniWrapper_piy3e_20",iconItem:"_iconItem_piy3e_29",text:"_text_piy3e_35",moveOutAnimation:"_moveOutAnimation_piy3e_38",moveOut:"_moveOut_piy3e_38",moveInAnimation:"_moveInAnimation_piy3e_42",moveIn:"_moveIn_piy3e_42",iconTitle:"_iconTitle_piy3e_54"};var ps=({width:e})=>le.default.createElement(w.FlexBox,{align:w.ALIGN.center,direction:w.DIRECTION.vertical,style:{width:e}},le.default.createElement(w.Box,{className:ge.iconAniWrapper},le.default.createElement(w.FlexBox,{align:w.ALIGN.center,justify:w.ALIGN.center,className:`${ge.iconItem} ${ge.moveInAnimation}`},le.default.createElement(jt,{className:"okx-wallet-plugin-overview-20"})),le.default.createElement(w.FlexBox,{align:w.ALIGN.center,justify:w.ALIGN.center,direction:w.DIRECTION.vertical,className:`${ge.iconItem} ${ge.moveOutAnimation}`},le.default.createElement(jt,{className:"okx-wallet-plugin-swap-for-gas"}))),le.default.createElement(me.Text,{className:ge.iconTitle,ellipsis:!0,size:me.SIZE.xs},y("wallet_extension_home_text_toolkit")));o();r();var te=l(I()),vt=l(G()),mo=l(ae());o();r();var Cs=l(ae());o();r();var xt=l(I());O();o();r();o();r();var Nt="";var ds=()=>{let[e,t]=(0,xt.useState)(!1);return[(0,xt.useCallback)(async s=>{if(!!Nt)try{t(!0),await Nt.pair({uri:s})}catch(i){i&&i?.message&&i?.message?.includes("URI has expired")&&vo.error(y("wallet_extension_tg_error_qr_code_expired"))}finally{t(!1)}},[]),e]};We();o();r();var fs=e=>{let n=`http://t.me/OKX_WALLET_BOT/dapp?startapp=${encodeURIComponent(e).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%/g,"__")}`;yn(n)};o();r();function Li(){let e=(t,n)=>{if(Array.isArray(n))return n.find(s=>s?.coinId===t.coinId||e(t,s?.childrenCoin))};return{checkCoinAdded:e}}var _s=Li;o();r();di();var Pi=async(e,t)=>{let n=await Promise.all(e.map(t));return e.filter((s,i)=>n[i])};function Mi(){return{findChainsByAddress:async n=>{let s=Ut();return await Pi(s,async a=>await Or(n,a.coinId))||[]},findChainByChainName:n=>Ut().find(i=>Yt(n)===Yt(i.chainName))||{}}}var gs=Mi;o();r();var ee=l(I());O();function Oi(){let e=(0,ee.useCallback)(()=>{let a=H.tip({infoType:H.Tip.INFO_TYPE.default,children:ee.default.createElement(ee.default.Fragment,null,y("wallet_extension_tg_alert_address_not_recognize")),confirmText:y("commonall_text_btn_ok_active"),onConfirm:()=>{a.destroy()}})},[]),t=(0,ee.useCallback)(()=>{Qt({message:y("wallet_extension_tg_alert_address_not_recognize")})},[]),n=(0,ee.useCallback)(a=>{let m=H.tip({infoType:H.Tip.INFO_TYPE.default,children:ee.default.createElement(ee.default.Fragment,null,y("wallet_extension_tg_alert_token_not_add",{token:a})),confirmText:y("commonall_text_btn_ok_active"),onConfirm:()=>{m.destroy()}})},[]),s=(0,ee.useCallback)(a=>{Qt({message:y("wallet_extension_tg_alert_token_not_add",{token:a})})},[]);return{getMessageFns:a=>a==="link"?{showCoinNotFindMessage:e,showCoinNotAddedMessage:n}:{showCoinNotFindMessage:t,showCoinNotAddedMessage:s}}}var hs=Oi;var bt=[Po,Lo],ao=(e,t)=>e.indexOf(t)>0,Wi=e=>{let t=ao(e,"?")?e.split("?")[0]:e;if(ao(t,":")){let[n,s]=t.split(":");return{address:s,chainName:n}}return{address:t}},Hi=e=>{if(!ao(e,"?"))return{};let[,t]=e.split("?");return Mr(t)};function Fi(){let e=(0,Cs.useHistory)(),t=Br(),[n]=ds(),s=Wr(),{findChainsByAddress:i,findChainByChainName:a}=gs(),{checkCoinAdded:m}=_s(),{getMessageFns:u}=hs(),p=d=>{if(!d)return{};let C=Hi(d);return{...Wi(d),...C}},f=async({chainName:d="",address:C="",token:A="",amount:T="",source:S="scan",finishedAction:B=()=>{}})=>{let{showCoinNotFindMessage:k,showCoinNotAddedMessage:L}=u(S),b=C;C&&bt.includes(d)&&(b=`${d}:${C}`);let P=A;if(A&&bt.includes(d)&&!A.startsWith(d)&&(P=`${d}:${A}`),b&&!T&&!bt.includes(d)){let v=(await i(b)).map(D=>D.coinId);v.length?(e.push(`${Fe}?type=${He.SEND}&address=${b}&coinIds=${v.join(",")}`),B()):k()}else if(b&&d&&(T||bt.includes(d))){let{chainId:F}=a(d);if(typeof F<"u"){let v={chainId:F};P&&(v.address=P);let D=await t(void 0,v);D&&D.coinId&&(m(D,s)?(e.push(`${tr}/${D.coinId}${nr}?address=${b}&amount=${T}`),B()):L(D.symbol))}else k()}else k()};return{openScanner:async()=>{try{await Xt({onCaptured:async d=>{if(d.startsWith("http://")||d.startsWith("https://")){fs(d),Re();return}if(d.startsWith("wc:")){n(d),Re();return}let{chainName:C,address:A,token:T,amount:S}=p(d);f({chainName:C,address:A,token:T,amount:S,finishedAction:()=>{Re()}})}})}catch{Re()}},linkToSend:f,scanToGetText:async()=>{let d;try{d=await Xt({capture:()=>!0})}catch{d=""}return d}}}var ys=Fi;We();o();r();var Gi=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"wallet_extension_homepage_feature_name_swap",icon:"okx-wallet-plugin-swap-2",type:"DEX",disabledText:""},{text:"wallet_extension_header_text_history",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-overview-20",type:"MORE"}],As=Gi;var $i=e=>yr({networkId:e?.id?String(e?.id):void 0})?.coinId,Ui=e=>(0,te.useMemo)(()=>{let{initialType:n,accountMap:s}=e;if(er(n)){let i=Object.keys(s);return![_e,Oe].some(a=>i.includes(a))}return!1},[e]),Yi=e=>{let t=ht(),n=(0,mo.useHistory)(),s=(0,te.useCallback)(()=>{n.push(`${Fe}?type=${He.RECEIVE}`)},[n]);return(0,te.useCallback)(()=>{(e?t:s)()},[s,e,t])},Ts=()=>{let{isNotBackupWallet:e}=gt(),t=(0,mo.useHistory)(),n=(0,vt.useDispatch)(),s=_n(),i=$i(s),{baseCoin:a={}}=Lr(i,!0),m=Tn(a,"",An.home),u=(0,vt.useSelector)(Uo),p=Ui(u),f=Yi(e),g=(0,te.useCallback)(()=>{!(typeof a?.chainId>"u")&&n(cr({chainId:a?.chainId})),t.push(rr)},[a?.chainId,n,t]),_=(0,te.useCallback)(()=>{t.push(or)},[t]),d=(0,te.useCallback)(()=>{t.push(`${Fe}?type=${He.SEND}`)},[t]),C=Ct(nt),{impactHaptic:A}=ur(),{openScanner:T}=ys(),S=(0,te.useCallback)(k=>{switch(A(),k.type){case"SEND":{C({homepage:"send"}),d();break}case"RECEIVE":{C({homepage:"receive"}),f();break}case"SCANNER":{T();break}case"DEX":{C({homepage:"trade"}),m();break}case"HISTORY":{C({homepage:"history"}),g();break}case"DAPP_CONNECT":{_();break}default:break}},[f,m,g,_,d,t,A,C]),B=(0,te.useMemo)(()=>As.map(k=>k.type==="DEX"?{...k,disabled:p}:k).filter(k=>k.type==="SCANNER"?Cn():!0),[p]);return{clickHandle:S,iconOptions:B}};o();r();var ks=l(I()),ws=l(G());o();r();var Ss=l(I());Rt();Wo();We();function lo(){let e=ke();return(0,Ss.useMemo)(()=>{let t=Sn.find(n=>{let s=e?.account?.[n],i=So(Object.values(e?.account??{}));return n===_e?!1:s&&e.keyringIdentityType===ot.PRIVATE_KEY&&i.length===1&&i[0]===s});return t?{isFactionPKAccount:!0,chain:t}:{isFactionPKAccount:!1}},[e])}var Is=()=>{let e=ke(),{isFactionPKAccount:t,chain:n}=lo(),{currentNetworkUniqueId:s}=ie(),i=(0,ks.useMemo)(()=>({isFactionPKAccount:t,chain:n,currentNetworkUniqueId:s}),[t,n,s]),{addresses:a=[],hotAddresses:m=[]}=(0,ws.useSelector)(p=>hr(p,i)),u=a.length===1;return{filterAddress:a,filterHotAddress:m,address:u?a[0]?.address:"",chainName:u?a[0]?.chainName:"",titleLeft:e?.keyringName,titleRight:u?e?.walletName:"",subTitle:u?Ho(a[0]?.address):e?.walletName,isFactionPKAccount:t}};o();r();var Es=l(I()),Ns=l(ae());O();Wo();var xs=({address:e})=>{let t=(0,Ns.useHistory)(),n=ke(),s=()=>{t.push(`${mt}?fromHome=1`)};return n?.keyringIdentityType===ot.PRIVATE_KEY&&e==="UQCiCTSKMQTIF8VSGc3F7DxWxJrV09SAbJzc1YvWZ5pgiQAP"?Es.default.createElement(H.Prompt,{visible:!0,infoType:H.Prompt.INFO_TYPE.warn,title:y("wallet_extension_errormsg_unavailable_address"),confirmText:y("wallet_extension_connect_btn_switch_wallet"),onConfirm:s,hideCloseBtn:!0,alignBottom:!1,maskClosable:!1,confirmBtnProps:{type:E.TYPE.highlight,size:E.SIZE.lg}}):null};o();r();o();r();var bs=()=>null;var vs=bs;o();r();var ce=l(I());o();r();o();r();var co={version:"3.33.51",web:!0,extension:!1,title:"wallet_extension_main_popup_shortcut",description:"wallet_extension_main_toast_shortcut",imgLight:"/cdn/assets/imgs/2412/EEC46FC3302CEC12.svg",imgDark:"/cdn/assets/imgs/2412/026A26E3C0C3D875.svg",mainButtonText:"commonall_text_btn_ok_passive"};o();r();var $e=l(I());O();var Bs=(e,t,n)=>{let{version:s,imgLight:i,imgDark:a,title:m,description:u,mainButtonText:p}=e,f=ct({dark:a,light:i}),[g,_]=(0,$e.useState)(!1),d=wo.init({project:"whatsNew"});return(0,$e.useEffect)(()=>{if(!t){_(!1);return}if(s!==process.env.APP_VERSION){_(!1);return}if(d.get("whatsNewVersion")===s){_(!1);return}if(typeof n=="boolean"&&!n){_(!1);return}_(!0)},[d,n,s,t]),(0,$e.useEffect)(()=>{g&&d.set("whatsNewVersion",s)},[g,d,s]),{visible:g,title:Ve(m),description:Ve(u),img:f,mainButtonText:Ve(p),onMainButtonClick:()=>{_(!1)}}};function uo(){let{extension:e}=co;return Bs(co,e)}o();r();var he={"whats-new-img":"_whats-new-img_fow6p_1",whatsNewImg:"_whats-new-img_fow6p_1","whats-new-box":"_whats-new-box_fow6p_5",whatsNewBox:"_whats-new-box_fow6p_5","whats-new-title":"_whats-new-title_fow6p_10",whatsNewTitle:"_whats-new-title_fow6p_10","whats-new-desc":"_whats-new-desc_fow6p_15",whatsNewDesc:"_whats-new-desc_fow6p_15","whats-new-footer":"_whats-new-footer_fow6p_20",whatsNewFooter:"_whats-new-footer_fow6p_20","whats-new-dialog":"_whats-new-dialog_fow6p_23",whatsNewDialog:"_whats-new-dialog_fow6p_23"};var zi=({shouldWhatsNewShow:e})=>{let{visible:t,title:n,description:s,img:i,mainButtonText:a,onMainButtonClick:m}=uo();return ce.default.createElement(H,{whiteboard:!0,visible:e&&t,hideCloseBtn:!0,noMargin:!1,alignBottom:!1,windowClass:he.whatsNewDialog},ce.default.createElement("img",{className:he.whatsNewImg,src:i,alt:""}),ce.default.createElement("div",{className:he.whatsNewBox},ce.default.createElement("h2",{className:he.whatsNewTitle},n),ce.default.createElement("p",{className:he.whatsNewDesc},s),ce.default.createElement("div",{className:he.whatsNewFooter},ce.default.createElement(E,{category:E.CATEGORY.fill,type:E.TYPE.highlight,size:E.SIZE.md,onClick:m,block:!0},a))))},Ds=zi;o();r();var ze=l(I()),$s=l(G()),Us=l(Le());o();r();var ue=l(I()),Bt=l(Le());O();o();r();var V={root:"_root_1yqai_1",asset:"_asset_1yqai_13",change:"_change_1yqai_20",up:"_up_1yqai_23",down:"_down_1yqai_26",hidden:"_hidden_1yqai_29",empty:"_empty_1yqai_32",select:"_select_1yqai_35",amount:"_amount_1yqai_38"};function Ki(e){let{hiddenAssets:t,data:n}=e,{hasTypes:s,types:i,typeId:a,onChangeType:m,balanceAdd:u,balanceAddPercent:p}=n,f=u!==void 0,g=p!==void 0,_="--",d="****",C=(0,Bt.default)(V.change,{[V.up]:f&&Z.gt(u,0),[V.down]:f&&Z.lt(u,0)});return ue.default.createElement("div",{className:V.root},ue.default.createElement("div",{className:V.asset,"data-testid":W.HOME_PAGE.ASSET_CHANGE_DISPLAY},!t&&!f&&ue.default.createElement("div",{className:V.empty},_),t&&ue.default.createElement("div",{className:V.hidden},d),!t&&f&&ue.default.createElement(me.DisplayAmount,{autoColor:!0,useApproximate:!1,mode:me.LEGAL,amount:u,ellipsis:{tooltip:!0},size:Kt.sm,className:(0,Bt.default)(V.amount,C),signDisplay:Z.gt(u,0)}),!t&&f&&g&&ue.default.createElement(me.DisplayAmount,{autoColor:!0,useApproximate:!1,ellipsis:{tooltip:!0},mode:me.PERCENT,signDisplay:!0,size:Kt.sm,zeroSign:"",needZero:!0,className:(0,Bt.default)(V.amount,C),amount:p,format:A=>A&&`(${A})`})),s&&ue.default.createElement(Pe,{dropMode:!0,type:Pe.TYPE.text,value:a,align:Pe.DIRECTION.left,options:i.map(A=>({value:A.chartTypeId,label:A.chartTypeMsg})),size:Pe.SIZE.md,onChange:A=>{let T=A;m({chartTypeId:T.value,chartTypeMsg:T.label})},searchable:!1,className:V.select}))}var Ls=Ki;o();r();var Ye=l(I()),Fs=l(G()),Rs=l(Q());Rt();O();o();r();var Ms=l(I()),Lt=l(G()),Ue=l(Q());o();r();var ji=()=>{let{showErrorAlert:e}=yt();return n=>{try{Do(n,!0)}catch(s){let{type:i,msg:a}=Gr(s);e(i,a)}}},Dt=ji;o();r();tt();$t();var Vi=e=>Se(se.getAssetChangeData,e),Ps=Vi;var qi=e=>e!=null,Zi=e=>{let t=(0,Lt.useSelector)(lr),n=Dt(),{smallAssetsAmount:s,hideSmallAssets:i}=En(),{isWalletCreated:a}=Ie(),m=X(),u=(0,Lt.useSelector)(Ir),{currentNetworkUniqueId:p}=ie(),f=(0,Lt.useSelector)(zo),g=p===""?void 0:+p,_=t?1:0,d=qi(e),C=a&&!!m&&d,A=(0,Ue.useMemoizedFn)(()=>u?.map(k=>k.coinId)??[]),T=(0,Ms.useMemo)(()=>i?Number(s):null,[s,i]),S=(0,Ue.useRequest)(()=>Ps({accountIds:[m],chainId:g,userUniqueId:f,chartTypeId:e,hasNft:_,tinyThreshold:T,hideCoinList:A()}),{ready:C,refreshDeps:[m,g,f,e,_,T,A],onError:n}),B=(0,Ue.useMemoizedFn)(()=>{C&&S.run()});return{data:S,refresh:B}},Os=Zi;o();r();var Pt=l(Q());o();r();tt();$t();var Qi=()=>Se(se.getAssetChangeType),Ws=Qi;var Xi=()=>{let{isWalletCreated:e}=Ie(),t=X(),n=Dt(),s=(0,Pt.useRequest)(Ws,{ready:e&&!!t,onError:n,cacheKey:"assetChangeType"}),i=(0,Pt.useMemoizedFn)(()=>{s.run()});return{data:s,refresh:i}},Hs=Xi;var Ji="current_asset_change_type",ea=e=>{let t=!Ao(e)&&e!=="--",n=Hs(),{data:s,loading:i,error:a}=n.data,[m,u]=(0,Rs.useLocalStorageState)(Ji),{usdToThisRate:p}=(0,Fs.useSelector)(Yo),f=(0,Ye.useMemo)(()=>s?.data??[],[s?.data]),g=f.length>0,_=(0,Ye.useMemo)(()=>f.find(U=>U.chartTypeId===m)??f?.[0],[m,f]),d=_?.chartTypeId,C=Os(_?.chartTypeId),{loading:A,data:T,error:S}=C.data,B=U=>{u(U.chartTypeId)},k=T?.data?.[0]?.assetAmount,L=!S&&k!==void 0,b=L&&t?Z.sub(e,k):void 0,P=L&&t&&b!==void 0&&k!==void 0,F=(0,Ye.useMemo)(()=>{if(!!P)return Z.eq(k,0)?0:Z.mul(Z.div(b,k),100)},[b,k,P]),v=(0,Ye.useMemo)(()=>{if(b!==void 0)return Z.mul(b,p)},[b,p]);return{hasTypes:g,types:f,typeLoading:i,typeError:a,typeId:d,onChangeType:B,loading:A,data:T,error:S,hasData:L,balanceAdd:v,balanceAddPercent:F,refresh:()=>{n.refresh(),C.refresh()}}},Gs=ea;o();r();var po={addWeight:"_addWeight_17jnv_1",balance:"_balance_17jnv_1"};function ta(e){let{walletAsset:t,walletAssetUSD:n}=(0,$s.useSelector)(Hr),s=Gs(n),[i,a]=ut();return ze.default.createElement(ze.default.Fragment,null,ze.default.createElement(In,{balance:t,hiddenAssets:i,onRefresh:()=>{s.refresh(),e.onRefresh?.()},onToggleHiddenAssets:a,className:(0,Us.default)(po.addWeight,po.balance)}),ze.default.createElement(Ls,{hiddenAssets:i,data:s}))}var Ys=ta;o();r();var Mt=l(I()),Ks=l(Q());O();tt();o();r();var be=l(I());o();r();var pe={riskDialog:"_riskDialog_19ki3_1",riskDialogImage:"_riskDialogImage_19ki3_18",riskDialogImageWrapper:"_riskDialogImageWrapper_19ki3_23",riskDialogTitle:"_riskDialogTitle_19ki3_27",riskDialogMessage:"_riskDialogMessage_19ki3_35",confirmButton:"_confirmButton_19ki3_43"};function oa(e){let{alertTitle:t,alertMessage:n,alertLightIcon:s,alertDarkIcon:i}=e,a=ct({light:s,dark:i});return be.default.createElement("div",{className:pe.riskDialog},be.default.createElement("div",{className:pe.riskDialogImageWrapper},be.default.createElement(bo,{src:a,alt:t,height:100,className:pe.riskDialogImage})),be.default.createElement("div",{className:pe.riskDialogTitle},t),be.default.createElement("div",{className:pe.riskDialogMessage},n))}var zs=oa;var ra=({isWalletCreated:e})=>{let t=X(),{isSm:n}=vr(),s=ft(),i=(0,Mt.useRef)(!1),a=(0,Ks.useMemoizedFn)(m=>{if(i.current)return;i.current=!0;let{alertButtonMsg:u,alertButtonUrl:p}=m,f=H.show({width:n?void 0:360,isFull:!0,noMargin:n,alignBottom:!0,children:Mt.default.createElement(zs,{...m}),confirmText:u,confirmBtnProps:{category:E.CATEGORY.fill,type:E.TYPE.highlight,size:E.SIZE.lg,block:!0,className:pe.confirmButton},onConfirm:()=>{p&&Io(`${s.origin}${p}`,"_blank")},onCancel:()=>{f.destroy()}})});fr(se.getRiskAlert,{params:{accountId:t},config:{walletSignParams:{needWalletSign:!0,walletId:t}}},{ready:!!t&&e,refreshDeps:[t,e],onSuccess:m=>{let u=m?.data;u?.needToast&&a(u)},onError:()=>{}})},js=ra;o();r();var Ot=l(I()),Vs=l(Q());var qs=()=>{let e=(0,Ot.useRef)(null),t=(0,Ot.useRef)(0),n=(0,Ot.useRef)(!1),s=(0,Vs.useMemoizedFn)(i=>{if(!i)return;let a=e?.current?.offsetTop??0;n.current=i+Et>=a,n.current||(t.current=a-Et)});return{tabRef:e,tabStickyScrollTop:t,isTabStickyRef:n,onPageScroll:s}};o();r();var Ce=l(I()),fo=l(Q());Rt();var Zs=()=>{let{metadataResponse:e}=_r(),{runAsync:t}=Jr(),n=e?.data?.maintenanceEventList,{displayMaintenanceNotificationList:s,markDisplayed:i}=Qr(),a=(0,Ce.useMemo)(()=>n?.length?To(n.filter(_=>{let d=Zt(_);return Vr(_.eventTimestamp)&&!s.includes(d)}),"eventTimestamp")??null:null,[n]),m=(0,Ce.useMemo)(()=>a?Zt(a):"",[a]),u=(0,fo.useMemoizedFn)(async()=>{let _=await t();return qr(_)}),p=ft(),f=(0,fo.useMemoizedFn)(async()=>{if(!a)return;let{eventType:_}=a;Nn(_,p.smartAccountWhatAreServiceUpgradesMaintenance),i(m)}),g=(0,Ce.useRef)(!1);(0,Ce.useEffect)(()=>{a&&!g.current&&u().then(_=>{_&&(f(),g.current=!0)}).catch(()=>{})},[a])};var na="54px",sa=({hasBar:e=!1})=>{let t=(0,Qs.useSelector)(gr),{isWalletCreated:n}=Ie(),{showErrorAlert:s}=yt(),i=X(),a=ht(),[{errorType:m,errorMsg:u},{createWalletToServer:p}]=$r(),f=Yr(),[g]=ut(),_=(0,h.useRef)(null),[d,C]=(0,h.useState)(0),[A,T]=(0,h.useState)(!1),[S,B]=(0,h.useState)(0),k=(0,h.useRef)(null),L=(0,h.useRef)(null),{isNeedShowDisconnectUpgrade:b,setDisconnectUpgrade:P}=Ur(),F=(0,h.useCallback)(()=>{b&&(Gt.success({title:y("wallet_extension_card_subtitle_disconnect_update")}),P())},[b,P]),{isNotBackupWallet:v}=gt(),D=tn(),U=(0,h.useMemo)(()=>D?.originNoPrefix&&!v,[D,v]),M=(0,h.useRef)(null),R=(0,Wt.useHistory)(),{search:de}=(0,Wt.useLocation)(),[ve,ye]=(0,h.useState)(0);wn();let{clickHandle:Ke,iconOptions:q}=Ts();(0,h.useEffect)(()=>{s(m,u)},[u,m,s]);let{data:oe,canUseSA:Be,refetch:re}=Xr(void 0,{refreshOnWindowFocus:!1}),Ae=(0,h.useMemo)(()=>jr(oe?.teeStatus),[oe]);(0,Ht.useMount)(()=>{Zo()});let Ft=Sr();(0,h.useEffect)(()=>{if(!de)return;let{redirectPathname:j,redirectSearchParams:ui}=Tr(de);j&&Ft(j,{removeExistingSearchKeys:["redirect_pathname","redirect_search_params"],preserveState:!0,newSearchParams:Ar(ui)})},[de]);let{tabRef:je,tabStickyScrollTop:De,isTabStickyRef:_o,onPageScroll:Xs}=qs(),{run:Js}=(0,Ht.useDebounceFn)(()=>{let j=M.current?.scrollTop||0;Xs(j),ye(j)},{wait:50,maxWait:50});kn();let{titleLeft:go,titleRight:ho,subTitle:Co,address:yo,chainName:ei,filterAddress:ti,filterHotAddress:oi,isFactionPKAccount:ri}=Is(),ni=async()=>{m!==we.PENDING&&(Gt.destroyAll(),await p())};(0,h.useLayoutEffect)(()=>{_.current&&v&&n&&C(_.current?.clientHeight||0)},[v,n]),(0,h.useLayoutEffect)(()=>{L.current&&B(L.current.clientHeight)},[go,ho,Co]);let si=j=>{M.current&&(M.current.scrollTop=j)},ii=(0,h.useCallback)(j=>{T(!j)},[]),ai=(0,h.useCallback)(()=>{_o.current&&(M.current.scrollTop=De.current,ye(M.current.scrollTop))},[]),{prefetchSAStatus:mi}=Zr(),li=()=>{Vo(),Be&&(mi(),R.push(ar))},ci=(0,h.useCallback)(()=>{re()},[re]);return Zs(),js({isWalletCreated:n}),h.default.createElement("div",{id:dn,"data-testid":W.HOME_PAGE.HOME_ROOT_ELEMENT_ID,className:"ok-home-page main-container",ref:M,onScroll:()=>{Js()},style:{height:e?`calc(100% - ${na})`:"100%"}},Be&&Ae!=="not_enabled"&&oe&&h.default.createElement(fn,{status:Ae,data:oe,onClick:li,onExpired:ci}),h.default.createElement(gn,{ref:L,titleLeft:go,titleRight:ho,subTitle:Co,address:yo,chainName:ei,filterAddress:ti,filterHotAddress:oi,isNotBackupWallet:v,isFactionPKAccount:ri,saStatus:Ae}),h.default.createElement("div",{ref:k},h.default.createElement(Ys,null),h.default.createElement(on,{clickHandle:Ke,iconOptions:q,customMore:j=>h.default.createElement(ps,{width:j})}),h.default.createElement(en,null)),h.default.createElement(us,{scrollTop:ve,hiddenAssets:g,backupHeight:v?d+24:0,isWalletCreated:n,changeScrollTop:si,errorType:m,tryAgain:ni,showDappConnectAffix:U,handleResetScrollTop:ai,topBarHeight:S,tabRef:je}),n&&h.default.createElement("div",{ref:_},h.default.createElement(Fr,{offsetBottom:24+Rr})),h.default.createElement(zr,{info:D,isNotBackupWallet:v,disconnectCallback:F}),n&&h.default.createElement(hn,{showBackup:()=>{a({text:y("wallet_dapp_conncetion_alert_backup_wallet")},t)}}),f&&h.default.createElement(Kr,{actionMap:{["RECOVER"]:()=>{R.push(`${sr}?action=${Dr.RECOVER}&walletId=${i}`)},["SWITCH_WALLET"]:()=>{R.push(`${mt}?fromHome=1`)}}}),h.default.createElement(Bn,{walletId:i,onFetchApprovalRisk:ii}),h.default.createElement(xs,{address:yo}),h.default.createElement(vs,null),h.default.createElement(Ds,{shouldWhatsNewShow:A}))},uh=sa;export{uh as a};
//# sourceMappingURL=chunk-FWQX6JLU.js.map
