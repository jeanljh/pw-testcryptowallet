import{a as ue}from"./chunk-QKPPTYDW.js";import{a as le}from"./chunk-I4EML244.js";import{a as I}from"./chunk-S7VT2TWF.js";import{k as ce}from"./chunk-BNS5ABAB.js";import{A as ie,B as me}from"./chunk-3ZKJXYZ4.js";import{a as w}from"./chunk-FGAB46RQ.js";import{o as pe}from"./chunk-Z62JX42S.js";import{Na as be,la as ne}from"./chunk-2QHGKEME.js";import{_ as l}from"./chunk-WU2LB6XB.js";import{a as se,f as oe,g as re,i as ae}from"./chunk-EFOY37CC.js";import{A as _,K as te,o as ee}from"./chunk-VZKEX7KP.js";import{q as P}from"./chunk-BJKBO23H.js";import{M as H,Q,f as q,va as R}from"./chunk-XFTQD4B2.js";import{b}from"./chunk-73B6GL3S.js";import{f as F,o as m,q as p}from"./chunk-Y5OH3DDZ.js";m();p();var c=F(b()),v=F(pe());R();te();m();p();var h=F(b());m();p();R();te();var M=e=>H(e)||Q(e,0),T=(e,t)=>String(Math.ceil(se(e,t))),d=(e,t)=>ae(e,1)?`${ee.ceilShort(e||0,0,!1,0,!1)} ${t}`:w(e||0,{symbol:t}).value;function U({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:a,customGasFee:n,canConfirm:u,onClick:r,onConfirm:i}){return(0,h.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:h.default.createElement(le,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:u,onConfirm:()=>{i({gasType:l.CUSTOM,gasPriceStep:o,gasAmount:a,gasFee:n})}}),[o,a])}m();p();var ge=F(b());function O({feeInfo:e,feeDisplay:t,onClick:o}){return(0,ge.useMemo)(()=>[{typeKey:l.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:l.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:l.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:l.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:l.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:l.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}m();p();var fe=F(be());function L({coinId:e,symbol:t,decimals:o,currencyId:a,fee:n,displayPrecision:u}){let r=w(n,{symbol:t,useContractPrecision:!0,contractPrecision:{decimals:o},precision:u,useLargeNumberPrecision:!0}).value,i=ce(e,n,{currencyId:a,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${r} ${i}`}function V({coinId:e,fee:t}){let{baseCoin:o}=I(Number(e),!0),a=(0,fe.useSelector)(ne),{currencyId:n}=a,{symbol:u,decimals:r,displayPrecision:i}=o,f=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.slow,displayPrecision:i}),g=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.fast,displayPrecision:i}),C=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.standard,displayPrecision:i}),y=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.custom,displayPrecision:i});return{slow:f,fast:g,standard:C,custom:y}}m();p();var de=F(b()),ye=F(pe());var we={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},$=0,Ie=7e3;function z({coinId:e,address:t,value:o="0",inputData:a="",to:n=""}){let[u,r]=(0,de.useState)(we);async function i(){try{if(!e||!t||!a)return;r(x=>({...x,loading:!0,error:!1}));let[f,g]=await Promise.all([ie({coinId:e,from:t,value:o??"0",to:n??""}),me({coinId:e,from:t,value:o??"0",inputData:a})]),{min:C,normal:y,max:G,feeDemon:s}=f,N={denom:s,gasAmount:g,gasPriceStep:{slow:C,fast:G,standard:y},gasFee:{slow:T(C,g),fast:T(G,g),standard:T(y,g)},error:!1,initLoading:!1,loading:!1};r(N)}catch{r(g=>({...g,error:!0,initLoading:!1,loading:!1}))}}return(0,ye.useDeepCompareEffect)(()=>(clearInterval($),i(),$=setInterval(i,Ie),()=>{clearInterval($)}),[n,o,a]),u}m();p();var B={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function he({coinId:e,address:t,to:o,inputData:a,visible:n,gasType:u=l.STANDARD,gasPriceStep:r,gasAmount:i,onConfirm:f,onBack:g,onClose:C,onChange:y}){let{baseCoin:G}=I(Number(e),!0),s=z({coinId:e,address:t,to:o,inputData:a}),[N,x]=(0,c.useState)(u),[D,Fe]=(0,c.useState)(u),[K,Pe]=(0,c.useState)(),Ce=(M(r)?void 0:r)||s.gasPriceStep.standard,A=typeof K=="string"?K:Ce,[W,Se]=(0,c.useState)(),Te=(M(i)?void 0:i)||s.gasAmount,k=typeof W=="string"?W:Te,J=oe(A,s.gasPriceStep.slow)?_("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",X=re(k,0)?_("wallet_extension_cosmos_alert_limitmorethan"):"",De=!J&&!X,Y=T(A,k),Z=V({coinId:e,fee:{...s.gasFee,custom:Y}}),j=(0,v.useMemoizedFn)(({gasType:E,gasAmount:xe,gasPriceStep:Ae,gasFee:ke})=>{x(E),Fe(E),y({gasType:E,gasPriceStep:Ae,gasAmount:xe,gasFee:ke,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),_e=O({feeInfo:s,feeDisplay:Z,onClick:j}),Ge=U({feeInfo:s,feeDisplay:Z,customGasPriceStep:A,customGasAmount:k,customGasFee:Y,canConfirm:De,onClick:()=>{x(l.CUSTOM)},onConfirm:j});return(0,v.useDeepCompareEffect)(()=>{D!==l.CUSTOM&&y({gasType:D,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[D],gasFee:s.gasFee[D],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[D,s,o,a]),c.default.createElement(ue,{feeType:N,feeDataList:_e,onBack:g,onClose:C,onChange:q,visible:n,custom:{...Ge,components:()=>c.default.createElement(c.default.Fragment,null,c.default.createElement(P.Number,{className:B.customGasPriceStep,size:P.SIZE.sm,title:c.default.createElement(c.default.Fragment,null,_("wallet_extension_cosmos_title_gasfee")),value:A,onChange:Pe,errorType:P.TIP_TYPE.always,error:J,enableMinus:!1,min:0,precision:G?.decimals??6,suffix:c.default.createElement("span",{className:B.customGasPriceStepDenom},s.denom)}),c.default.createElement(P.Number,{size:P.SIZE.sm,title:_("wallet_extension_cosmos_title_gasamount",{},{useBr:!1}),value:k,onChange:Se,errorType:P.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:0}))}})}export{he as a};
//# sourceMappingURL=chunk-5PUQMP3R.js.map
