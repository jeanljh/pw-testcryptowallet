/*! For license information please see 4969.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4969],{45578:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animateProgressBaseSpec=void 0;t.animateProgressBaseSpec={easing:"global",duration:"slow3"}},2625:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useProgressSize=void 0;var n=r(2784),a=r(33524);t.useProgressSize=e=>{const t=(0,a.useScaleConditional)({dense:10,normal:12});return(0,n.useMemo)((()=>"heavy"===e?t:4),[t,e])}},94151:(e,t,r)=>{t.u=void 0;var n,a=(n=r(2784))&&n.__esModule?n:{default:n},o=r(3975),s=r(84681),i=r(94087),c=r(4573),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(84745));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}t.u=({children:e,content:t,disabled:r,placement:n="top"})=>{const u=(0,s.useSpacingStyles)({spacing:1}),p=(0,o.useTooltipState)({placement:n,unstable_fixed:!1,unstable_offset:[0,8],unstable_preventOverflow:!0});return r?a.default.createElement(a.default.Fragment,null,e({})):a.default.createElement(a.default.Fragment,null,a.default.createElement(o.TooltipReference,p,e),a.default.createElement(o.Tooltip,d({},p,{className:(0,c.cx)(l.container,u),unstable_portal:!1}),a.default.createElement(i.TextLabel2,{as:"span",color:"primaryForeground"},t)))}},89937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBar=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(2784)),a=r(53316),o=r(45578),s=r(21572),i=r(2625),c=r(56582),l=r(48972),u=r(48104),d=r(2408);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}const f=(0,a.m)(l.Box),m=(0,n.memo)((0,n.forwardRef)((({weight:e="normal",progress:t,color:r="primary",disabled:a=!1,testID:p},m)=>{var g;const v=(0,i.useProgressSize)(e),h=(0,c.usePalette)(),y=(0,s.usePreviousValues)([0]),w=y.getPreviousValue;(0,y.addPreviousValue)(t);const b=null!==(g=w())&&void 0!==g?g:0,S=(0,d.isRtl)()?100-100*b:100*b-100,x=(0,d.isRtl)()?100-100*t:100*t-100,k=(0,u.useMotionProps)({style:{originX:(0,d.isRtl)()?"right":"left"},animate:{x:[`${S}%`,`${x}%`],opacity:1},transition:o.animateProgressBaseSpec});return n.default.createElement(l.VStack,{flexGrow:1,flexShrink:0,testID:p,ref:m},n.default.createElement(l.HStack,{alignItems:"center"},n.default.createElement(l.Box,{testID:"cds-progress-bar-inner-bar-container",justifyContent:(0,d.isRtl)()?"flex-end":"flex-start",alignItems:"center",flexGrow:1,flexShrink:1,height:v,dangerouslySetBackground:h.line,borderRadius:"standard",overflow:"hidden"},n.default.createElement(f,{testID:"cds-progress-bar-inner-bar",alignItems:"center",justifyContent:"flex-start",height:v,flexShrink:0,flexGrow:0,width:"100%",opacity:0,borderRadius:"standard",dangerouslySetBackground:a?h.lineHeavy:h[r],animate:k.animate,transition:k.transition,style:k.style}))))})));t.ProgressBar=m},55736:(e,t,r)=>{r.d(t,{l:()=>S});var n,a=r(2784),o=r(63470),s=r(83112),i=r(68018),c=r(59554),l=r(39542),u=r(86421),d=r(48972),p=r(94151),f=r(52163),m=r(61641),g=r(52322);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=(0,o.vU)({chainDisplayName:{id:"GzartR",defaultMessage:[{type:0,value:"On "},{type:1,value:"name"}]},chainTitleWithSuffix:{id:"iNKvVW",defaultMessage:[{type:1,value:"name"},{type:0,value:" "},{type:1,value:"suffix"}]},chainTitle:{id:"Nust95",defaultMessage:[{type:1,value:"name"}]},tooltipText:{id:"v9mnGS",defaultMessage:[{type:0,value:"Switch networks"}]},mainnet:{id:"+cFBPN",defaultMessage:[{type:0,value:"Mainnet"}]},testnet:{id:"uSA5bo",defaultMessage:[{type:0,value:"Testnet"}]}});function S(e){var t=e.network,r=e.onPress,n=(0,s.Z)().formatMessage,o=(0,c.L)(),i=(0,l.Wj)({chainDetails:o});(0,l.il)({chainDetails:o});var v=(0,a.useCallback)((function(){i(),r()}),[r,i]);if(!t)return null;var y=t.asChain(),w=n(b.chainDisplayName,{name:null==y?void 0:y.displayName}),S=null!=y&&y.isTestnet?n(b.chainTitleWithSuffix,{name:w,suffix:n(b.testnet)}):n(b.chainTitle,{name:w});return(0,g.jsx)(p.u,{content:n(b.tooltipText),placement:"bottom",children:function(e){return(0,g.jsx)(f.Pressable,h(h({width:"100%"},e),{},{backgroundColor:"transparent",onPress:v,testID:"network-selection-sub-header",children:(0,g.jsxs)(d.HStack,{alignItems:"center",justifyContent:"center",children:[null!=y&&y.chainImageUrl?(0,g.jsx)(T,{src:null==y?void 0:y.chainImageUrl,alt:"".concat(null==y?void 0:y.displayName," icon")}):null,(0,g.jsxs)(d.HStack,{alignItems:"center",children:[(0,g.jsx)(m.TextLabel2,{testID:"network-selection-current-network",as:"p",color:"foregroundMuted",children:S}),(0,g.jsx)(u.Icon,{name:"caretRight",size:"xs",color:"foregroundMuted",spacingStart:.5})]})]})}))}})}w(S,"useIntl{{\n    formatMessage\n  }}\nuseChainDetails{chainDetails}\nuseNetworkSwitcherOpen{triggerNetworkSwitcherOpen}\nuseNetworkSwitcherViewed{}\nuseCallback{onOpenNetworkSelection}",(function(){return[s.Z,c.L,l.Wj,l.il]}));var x,k,T=(0,i.Z)("img")({name:"Image",class:"i1y1mzp3"});r(79995),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(b,"messages","/workspaces/apps/extension/src/components/NetworkSelectionSubHeader/NetworkSelectionSubHeader.tsx"),x.register(S,"NetworkSelectionSubHeader","/workspaces/apps/extension/src/components/NetworkSelectionSubHeader/NetworkSelectionSubHeader.tsx"),x.register(T,"Image","/workspaces/apps/extension/src/components/NetworkSelectionSubHeader/NetworkSelectionSubHeader.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},79779:(e,t,r)=>{r.d(t,{Y:()=>u});var n,a=r(86421),o=r(48972),s=r(61641),i=r(52322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,l;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function u(e){var t=e.showInfoIcon,r=void 0===t||t,n=e.message,c=e.testID;return(0,i.jsxs)(o.VStack,{testID:"warning-banner",children:[(0,i.jsx)(o.Divider,{direction:"horizontal",width:"100%"}),(0,i.jsx)(o.HStack,{alignItems:"center",spacingTop:.5,spacingHorizontal:3,children:(0,i.jsxs)(o.HStack,{alignItems:"center",spacingTop:1,children:[r&&(0,i.jsx)(a.Icon,{name:"info",size:"s",spacingEnd:2,testID:"info-icon"}),(0,i.jsx)(s.TextLabel2,{testID:c,as:"p",children:n})]})})]})}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(u,"TransactionDetailInfo","/workspaces/apps/extension/src/components/TransactionDetails/TransactionDetailInfo.tsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},64969:(e,t,r)=>{r.r(t),r.d(t,{Trade:()=>Y});var n=r(2784),a=r(4517),o=r(58406),s=r(82048),i=r(79517);function c(e){return e}function l(...e){const t=(0,n.useRef)(!1),r=[];const a=e.map((e=>function(e){try{return e?.(c)}catch(e){if(!t.current&&e instanceof Promise)return void r.push(e);throw e}}(e)));if(r.length>0)throw Promise.all(r);return t.current=!0,a}var u=r(95652);function d(){return(0,n.useMemo)((()=>!localStorage.getItem("hasViewedSwapNUX")),[])}var p=r(11071),f=r(42282),m=r(62197),g=r.n(m),v=r(48517),h=r(86855),y=r(52087),w=r(78292),b=r(53476),S=r(18398);const x=(0,b.cn)({key:"mostPopularSwapAsset",default:void 0,effects:[({setSelf:e})=>{e(async function(){return(await(0,S.WM)()??[])[0]}())}]});function k(){return(0,b.sJ)(x)}var T=r(95622),C=r(34291),A=r.n(C),L=r(95898),E=r(48972),I=r(95545),M=r(60818),P=r(91494);function G(){const{search:e}=(0,a.TH)();return(0,n.useMemo)((()=>{const t=new URLSearchParams(e);return{targetAssetId:t.get("targetAssetId"),chainId:t.get("chainId")}}),[e])}var j,F=r(21218),O=r(58511),D=r(82955),N=r(34041),H=r(52322);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&j(e);var Z,W,q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function Q(e){var t,r=e.defaultStep,n=null===(t=(0,L.Z)(D.cr).selectedNetwork.value.asChain())||void 0===t?void 0:t.chainId,a=null==n?void 0:n.toString();if(!a)throw new Error("Invalid network. No associated EthereumChain found");var o=l((function(e){return e(w.X)(a)}),(function(e){return e(u.k)((0,f.f)())}),(function(e){return e(k)()})),s=_(o,3),i=s[0],c=s[1],d=s[2],p=(0,T.G)(i);return(0,H.jsx)(O.tU,{convertibleAssets:p,supportedChains:c,children:(0,H.jsx)(D.Ex.Provider,{defaultStep:r,children:(0,H.jsx)(N.O,{mostPopularSwapAssetId:null==d?void 0:d.id})})})}function z(){return null}function Y(){var e,t;(0,M.c)();var r=(0,P.T)()(),c=(0,a.UO)(),l=_((0,n.useState)(c),1)[0],u=G(),f=(0,v.l)(),m=new(g())(null!==(e=null!==(t=l.chainId)&&void 0!==t?t:u.chainId)&&void 0!==e?e:1),w=d(),b=h.Zc.fromChainId({chainPrefix:(0,y.Gn)(m),chainId:m}),S=(0,n.useMemo)((function(){return c.walletId?decodeURIComponent(c.walletId):""}),[c.walletId]),x=(0,n.useMemo)((function(){return w&&f?"swapNux":r&&null!=r&&r.swapTradeResponse&&null!=r&&r.unsignedSwapTxResult&&null!=r&&r.unsignedSwapTxResult.transaction&&null!=r&&r.unsignedSwapTxResult.wallet&&"confirmationPreview"===(null==r?void 0:r.stepperPosition)?"confirmationPreview":"entry"}),[f,w,r]),k=(0,n.useMemo)((function(){return"entry"===x?(0,H.jsx)(F.T,{}):(0,H.jsx)(z,{})}),[x]),T=(0,n.useMemo)((function(){var e;return r?(delete r.stepperPosition,R(R({},D.Sc),{},{selectedNetwork:b},r)):R(R({},D.Sc),{},{sourceWalletId:S,selectedNetwork:b,targetAssetId:null!==(e=u.targetAssetId)&&void 0!==e?e:D.Sc.targetAssetId})}),[b,r,u.targetAssetId,S]),C=(0,n.useCallback)((function(e){var t=e.error,r=e.errorHash;(0,I.Kz)("trade.full_screen_error.viewed",{errorHash:r,errorMessage:t.message,loggingId:"998926da-7e83-46b6-afa8-6e1185c85456",action:I.Us.view,componentType:I.re.page})}),[]),L=(0,n.useCallback)((function(e){var t=e.error;return(0,H.jsx)(s.G,{error:t})}),[]);return(0,H.jsx)(E.VStack,{height:p.IR,children:(0,H.jsx)(o.S,{onError:C,renderFallback:L,children:(0,H.jsx)(i.J,{fallback:k,children:(0,H.jsx)(D.cr.Provider,{onSubmit:A(),initialValues:T,children:(0,H.jsx)(Q,{defaultStep:x})})})})})}q(Q,"useFields{{ selectedNetwork }}\nuseConcurrentSuspense{[swapAssets, supportedChains, mostPopularAsset]}\nuseSwapAssetsMap{swapAssetMap}",(function(){return[L.Z,l,T.G]})),q(Y,"usePersistTradeContextTimestamp{}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseParams{routeParams}\nuseState{[params](routeParams)}\nuseTradeQueryParams{queryParams}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseIsFirstSwap{isFirstSwap}\nuseMemo{sourceWalletId}\nuseMemo{defaultStep}\nuseMemo{fallbackComponent}\nuseMemo{initialFormValues}\nuseCallback{logGlobalError}\nuseCallback{renderFallback}",(function(){return[M.c,P.T,a.UO,G,v.l,d]})),(Z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(Z.register(Q,"TradeContent","/workspaces/apps/extension/src/screens/Trade/Trade.tsx"),Z.register(z,"EmptyFallback","/workspaces/apps/extension/src/screens/Trade/Trade.tsx"),Z.register(Y,"Trade","/workspaces/apps/extension/src/screens/Trade/Trade.tsx")),(W="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&W(e)},34041:(e,t,r)=>{r.d(t,{O:()=>G});var n=r(64927),a=r(62783),o=r(48517),s=r(2784),i=r(78292),c=r(95622),l=r(75277),u=r(40620);function d(e){const t=function(e){const t=e?.asChain()?.chainId;if(!t)throw new Error("Invalid chainId passed into useSwappableWallets");const r=(0,i.X)(t.toString()),n=(0,c.G)(r),a=(0,u.r)(e),o=(0,l.Rt)({wallets:a});return(0,s.useMemo)((()=>o?.filter((e=>Boolean(n.get(e.swapId))))??[]),[o,n])}(e);return(0,l.Rt)({wallets:Array.from(t.values())})}function p({walletId:e,swapId:t,network:r}){const n=d(r);return(0,s.useMemo)((()=>{if(!n?.length)return;let r;return e?r=n.find((t=>t.id===e)):t&&(r=n.find((e=>e.swapId===t))),r??n[0]}),[e,t,n])}var f,m=r(95898),g=r(21176),v=r(49919),h=r(52659),y=r(61914),w=r(32260),b=r(23997),S=r(56335),x=r(71105),k=r(64749),T=r(55414),C=r(82955),A=r(52322);e=r.hmd(e),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var L,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};!function(e){e.ENTRY="entry",e.SELECT_ASSET="selectAsset",e.SELECT_WALLET="selectWallet",e.SELECT_NETWORK="selectNetwork",e.LOADING_BEST_QUOTE="loadingBestQuote",e.CONFIRMATION_PREVIEW="confirmationPreview",e.PHONE_CONFIRMATION="phoneConfirmation",e.DEPOSIT_GAS="depositGas",e.STATUS="status",e.SWAP_NUX="swapNux"}(L||(L={}));var I,M,P=[L.ENTRY,L.SELECT_WALLET,L.SELECT_ASSET,L.SELECT_NETWORK,L.SWAP_NUX];function G(e){var t=e.mostPopularSwapAssetId,r=(0,m.Z)(C.cr),s=r.sourceWalletId,i=r.selectedNetwork,c=(0,a.t)(C.Ex).currentStep,l=(0,o.l)(),u=p({swapId:t,walletId:s.value,network:i.value});if(!u&&!P.includes(c))throw new Error("Failed to find a valid default wallet for the DEX flow");return(0,A.jsxs)(C.Ex.Steps,{children:[(0,A.jsx)(n.U,{component:(0,A.jsx)(T.Y,{})},L.SWAP_NUX),(0,A.jsx)(n.U,{component:(0,A.jsx)(h.y,{wallet:u})},L.ENTRY),(0,A.jsx)(n.U,{component:(0,A.jsx)(b.E,{selectedWallet:u})},L.SELECT_ASSET),(0,A.jsx)(n.U,{component:(0,A.jsx)(x.o,{})},L.SELECT_WALLET),(0,A.jsx)(n.U,{component:(0,A.jsx)(S.M,{})},L.SELECT_NETWORK),u&&l?(0,A.jsx)(n.U,{component:(0,A.jsx)(y.I,{wallet:u})},L.LOADING_BEST_QUOTE):null,u?(0,A.jsx)(n.U,{hideNavigation:!0,component:(0,A.jsx)(g.m,{wallet:u})},L.CONFIRMATION_PREVIEW):null,(0,A.jsx)(n.U,{hideNavigation:!0,component:(0,A.jsx)(w.F,{})},L.PHONE_CONFIRMATION),(0,A.jsx)(n.U,{hideNavigation:!0,component:(0,A.jsx)(k._,{})},L.STATUS),u?(0,A.jsx)(n.U,{hideNavigation:!0,component:(0,A.jsx)(v.e,{wallet:u})},L.DEPOSIT_GAS):null]})}E(G,"useFields{{ sourceWalletId, selectedNetwork }}\nuseStepper{{ currentStep }}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseSelectSwapWallet{wallet}",(function(){return[m.Z,a.t,o.l,p]})),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(P,"stepsWithoutRequiredWallet","/workspaces/apps/extension/src/screens/Trade/TradeStepper.tsx"),I.register(G,"TradeStepper","/workspaces/apps/extension/src/screens/Trade/TradeStepper.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},80081:(e,t,r)=>{r.d(t,{N:()=>te,g:()=>ie});var n=r(2784),a=r(83112),o=r(62783),s=r(39542),i=r(48517),c=r(69321),l=r(63470),u=r(62197),d=r.n(u),p=r(46101),f=r(53610),m=r(1620),g=r(78857),v=r(37184),h=r(57455),y=r(86855),w=r(3184),b=r(86296),S=r(32832),x=r(2330),k=r(81737),T=r(88767);const C=new Map([[p.Zg,"dex"],[p.nC,(0,T.Z)()],[k.VD,!1]]);var A=r(38977),L=r(81399),E=r(4871),I=r(45070),M=r(66854),P=r(78012),G=r(48834).Buffer;async function j({wallet:e,feeWallet:t,network:r,address:n,sourceAsset:a,targetAsset:o,cryptoAmount:s,is1559Enabled:i,source:c="extension",isReducedGasEstimationEligible:l=!1}){const u={fromAddress:n,from:a.address?.rawValue??a.currencyCode.rawValue,to:o.address?.rawValue??o.currencyCode.rawValue,amount:s.toString(),amountReference:L.d.Source,chainId:a.chainId.toString(),source:c},{result:p}=await(0,S.xA)("swap/trade",u),f=new A.T(p,new(d())(u.chainId)),m=await(0,w.cn)(n,r);let g,v=m;f.approveTx&&(g=await(0,x.U)(t,f.approveTx,m,i,C,l),v=m.add(new(d())(1)));const h=await async function(e,t,r,n,a){if(n){const n=t.tx,o=n.value?new(d())(n.value):new(d())(0),s=t.approveTx?new(d())(n.gas):void 0,i=await(0,M.B6)(Number(t.chainId));return(0,E.$)({wallet:e,recipientAddress:n.to,transactionAmount:{kind:"Amount",value:o},blockchainConfig:{txType:"1559",nonce:r,dataBuffer:G.from((0,P.Is)(n.data),"hex"),selectedMaxFeePerGas:new(d())(i.normalMaxFeePerGas),selectedMaxPriorityFeePerGas:new(d())(i.normalPriorityFee),selectedGasLimit:s,selectedBaseFeePerGas:new(d())(i.baseFee)},metadata:C,isReducedGasEstimationEligible:a})}return(0,I.q)({wallet:e,recipientAddress:t.tx.to,metadata:C,transactionAmount:{kind:"Amount",value:new(d())(t.tx.value)},blockchainConfig:{txType:"Legacy",nonce:r,dataBuffer:t.swapHexEncodedTxData,selectedGasPrice:new(d())(t.tx.gasPrice),selectedGasLimit:new(d())(t.tx.gas)},isReducedGasEstimationEligible:a})}(e,f,v,i,l);return"Failure"===g?.kind&&((0,b.eK)({error:new Error(`error building approveTx: ${g.err}`)}),Object.assign(g.transaction,{gasLimit:f.approveTx?.gas?new(d())(f.approveTx?.gas):void 0})),"Failure"===h?.kind&&((0,b.eK)({error:new Error(`error building swapTx: ${h.err}`)}),Object.assign(h.transaction,{gasLimit:new(d())(f.tx.gas)})),{swapTrade:f,approveTx:g,swapTx:h,swapTxs:[]}}var F=r(40620),O=r(90656),D=r(95545),N=r(47881),H=r(26273),B=r(45289),R=r(9539),V=r(48834).Buffer;const _=new Map;async function U({wallet:e,address:t,sourceAsset:r,targetAsset:n,cryptoAmount:a,source:o="extension"}){const s={fromAddress:t,from:r.address?.rawValue??r.currencyCode.rawValue,to:n.address?.rawValue??n.currencyCode.rawValue,amount:a.toString(),amountReference:L.d.Source,chainId:r.chainId.toString(),source:o,directRoute:"false"},{result:i}=await(0,S.xA)("swap/trade",s),c=new R.j(i,new(d())(s.chainId)),{tx:l,cleanupTransaction:u,setupTransaction:p}=i,{swapTransaction:f}=l;let m,g,v;const h=[];p.transaction&&(g=N.mv.from(V.from(p.transaction,"base64")),m=await(0,H.$)({wallet:e,nativeDappTransaction:g,metadata:_,recipientAddress:"",transactionAmount:{kind:"Amount",value:new(d())(0)}}),h.push(m));const y=N.mv.from(V.from(f,"base64")),w=Z(y)||Z(g),b=await(0,H.$)({wallet:e,nativeDappTransaction:y,metadata:_,recipientAddress:w,transactionAmount:{kind:"Amount",value:a},shouldSavePendingTransaction:!0});if(h.push(b),u.transaction){const t=N.mv.from(V.from(u.transaction,"base64"));v=await(0,H.$)({wallet:e,nativeDappTransaction:t,metadata:_,recipientAddress:"",transactionAmount:{kind:"Amount",value:new(d())(0)}}),h.push(v)}return{swapTrade:c,approveTx:void 0,swapTx:b,swapTxs:h}}function Z(e){if(!e)return"";const t=(0,B.j)(e.instructions).filter((e=>"Transfer"===e.instructionType));if(0===t.length)return"";const{instructionParams:r}=t[0];return r.filter((e=>"to"===e.paramKey))[0].paramValue}const W=(0,l.vU)({cbPayNotEnoughBalanceForMinerFeeMessage:{id:"3H/9Kr",defaultMessage:"You need an additional ~{cryptoAmountNeeded} ({fiatAmountNeeded}) to cover the network fee."},cbPayZeroBalanceForMinerFeeMessage:{id:"cjf4F1",defaultMessage:"You need {cryptoSymbol} before you can make a transaction on the {networkName} network."},notEnoughBalanceForMinerFeeMessage:{id:"8YvB19",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol}, but you need {fiatTotalTransactionValue} due to gas fees"},depositMinerFeeMessage:{id:"mLulYH",defaultMessage:"You must deposit {fiatDifferenceValue} in {cryptoSymbol} to complete this transaction."}});function q({formatMessage:e,onSuccess:t,sourceAsset:r,targetAsset:a,cryptoAmount:o,updateFormData:s,onNotEnoughData:i,onRefreshFail:l,shouldIgnoreSuccessRedirect:u,onNotEnoughBalanceForMinerFee:w,onGenerateTransactionsError:b}){const S=(0,m.$)(),x=(0,F.r)(),[k,T]=(0,n.useState)(!1),[C,A]=(0,n.useState)(),[L,E]=(0,n.useState)(),I=(0,h.h)(),M=(0,O.y8)(),P=(0,c.F)(),G=(0,v.f)();(0,n.useEffect)((function(){A(void 0)}),[o,r,a]);const N=(0,n.useMemo)((()=>x.find((e=>e.swapId===r?.swapId))),[x,r?.swapId]),H=(0,n.useMemo)((()=>{const e=r?.network;if(e)return x.find((t=>{const r=y.Zc.isEqual(e,t.network),n=t.currencyCode.rawValue===e.asChain()?.baseAssetCurrencyCode;return r&&n}))}),[r,x]),B=(0,n.useCallback)((({swapTrade:r,approveTx:n,swapTx:a,swapTxs:i})=>{s?.({swapTrade:r,approveTx:n,swapTx:a,swapTxs:i});const c=r.quote.fromAsset.currencyCode.rawValue===f.yC,l=r.quote.fromAsset.address===H?.contractAddress||c?new(d())(`${r.tx.value}`):new(d())(0),{hasEnoughBalance:p,totalFeeAssetRequired:m}=(0,g.iR)({feeWallet:H,transactionAmount:l,unsignedTx:a?.transaction,unsignedApproveEthTx:n?.transaction,isReducedGasEstimationEligible:G});if(!u&&p)t?.({swapTrade:r,approveTx:n,swapTx:a,swapTxs:i});else if(!p){const t=void 0!==H?.balance&&H?.currencyCode?S.formatToCrypto({currencyCode:H.currencyCode,decimals:H.decimals,value:m.sub(H.balance),network:H.network}):"",r=void 0!==H?.balance&&H?.currencyCode?S.formatToFiat(H.currencyCode,H.decimals,m.sub(H.balance),!1,H.contractAddress,H.network,!0,!0):"",n=H?.balance?.isZero(),a=n?e(W.cbPayZeroBalanceForMinerFeeMessage,{cryptoSymbol:H?.currencyCode.code,networkName:H?.displayName}):e(W.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:t,fiatAmountNeeded:r}),s=P?a:e(W.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:H?.currencyCode.code,fiatTotalAvailableBalance:void 0!==H?.balance&&H?.currencyCode?S.formatToFiat(H.currencyCode,H.decimals,H.balance,!1,H.contractAddress,H.network,!0,!0):"",fiatTotalTransactionValue:H?S.formatToFiat(H.currencyCode,H.decimals,m,!1,H.contractAddress,H.network):""}),i=n?"zeroBalanceForMinerFee":"notEnoughBalanceForMinerFee",c=P?e(W.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:t,fiatAmountNeeded:r}):e(W.depositMinerFeeMessage,{cryptoSymbol:H?.currencyCode.code,fiatDifferenceValue:r});w?.({errorMessage:s,depositAmountMessage:c,walletCurrencyCode:N?.currencyCode.code,feeCurrencyCode:H?.currencyCode.code,balance:N?.balance?.toString(),amount:o.toString(),feeWalletBalance:H?.balance?.toString(),totalRequired:m.toString()}),E(new Error(c)),A({message:s,code:i}),b?.({message:s,code:i},c)}}),[s,H,u,t,S,P,e,w,N?.currencyCode.code,N?.balance,o,b,G]),R=N?.primaryAddress,V=(0,n.useMemo)((()=>Boolean(N?.network&&(0,p.FM)(N?.network))),[N]),_=(0,n.useMemo)((()=>M===D.if.web?"extension":"mobile"),[M]);return{generateTransactions:(0,n.useCallback)((async(e=!1)=>{const t=N?.network,n={network:Boolean(t),wallet:Boolean(N),address:Boolean(R),sourceAsset:Boolean(r),targetAsset:Boolean(a)};if(!(t&&N&&R&&r&&a&&H))return e?void l?.(n):(i?.(n),I(new Error("Not enough data provided to generate transactions")));try{T(!0);const e=N.isSolanaNetwork()?U:j,n=await e({wallet:N,feeWallet:H,network:t,address:R,sourceAsset:r,targetAsset:a,cryptoAmount:o,is1559Enabled:V,source:_,isReducedGasEstimationEligible:G});B(n)}catch(e){I(e)}finally{T(!1)}}),[N,H,R,r,a,i,I,l,o,V,B,_,G]),generateTransactionsError:C,generateDepositAmount:L,isGenerateTransactionsLoading:k}}var Q,z=r(95898),Y=r(82955),$=r(11547),K=r(98483),X=r(59554),J=r(99320),ee=r(84696);e=r.hmd(e),(Q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&Q(e);var te,re,ne,ae="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},oe="swapTradeResponse",se=1500;function ie(e,t){var r=(0,a.Z)().formatMessage,l=(0,o.t)(Y.Ex).goToStep,u=(0,X.L)(),d=(0,s.XM)({chainDetails:u}),p=(0,s.Zt)({chainDetails:u}),f=(0,s.iB)({chainDetails:u}),m=(0,$.Q)(e),g=(0,K.a)(),v=(0,J.n)(),h=(0,ee.t)(),y=(0,i.l)(),w=(0,c.F)(),b=(0,z.Z)(Y.cr),S=b.cryptoAmount,x=b.swapTradeResponse,k=b.unsignedApproveTxResult,T=b.unsignedSwapTxResult,C=b.unsignedSwapTxResults,A=b.formGenerateDepositAmount,L=(0,n.useCallback)((function(){if(y&&(null==t?void 0:t.context)===te.Swap&&null!=t&&t.animationStartTime){var e,r=(new Date).getTime()-t.animationStartTime;return r<se?void setTimeout((function(){var e;null==t||null===(e=t.handleSuccess)||void 0===e||e.call(t),setTimeout((function(){l("confirmationPreview")}),500)}),se-r):(null==t||null===(e=t.handleSuccess)||void 0===e||e.call(t),void setTimeout((function(){l("confirmationPreview")}),500))}l("confirmationPreview")}),[y,t,l]),E=(0,n.useCallback)((function(e){e&&v({key:oe,value:e})}),[v]),I=(0,n.useCallback)((function(e){var t=e.swapTrade,r=e.approveTx,n=e.swapTx,a=e.swapTxs;x.onChange(t),k.onChange(r),T.onChange(n),C.onChange(a),E(h({swapTrade:t,swapTx:n,approveTx:r,swapTxs:a}))}),[x,k,T,C,E,h]),M=(0,n.useCallback)((function(e,r){var n;y&&(null==t||null===(n=t.onGenerateTransactionsError)||void 0===n||n.call(t,e));w&&r&&A.onChange(r)}),[A,y,w,t]),P=q({formatMessage:r,onSuccess:L,updateFormData:I,cryptoAmount:S.value,sourceAsset:m.swapAsset,targetAsset:g.swapAsset,onNotEnoughBalanceForMinerFee:f,onNotEnoughData:p,shouldIgnoreSuccessRedirect:null==t?void 0:t.shouldIgnoreSuccessRedirect,onGenerateTransactionsError:M,onRefreshFail:d}),G=P.generateTransactions,j=P.generateTransactionsError,F=P.generateDepositAmount,O=P.isGenerateTransactionsLoading;return(0,n.useMemo)((function(){return{generateTransactions:G,generateTransactionsError:j,generateDepositAmount:F,isGenerateTransactionsLoading:O}}),[G,j,F,O])}!function(e){e.Swap="swap"}(te||(te={})),ae(ie,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep }}\nuseChainDetails{chainDetails}\nuseTradeConfirmationRefreshFail{triggerAnalyticsRefreshFail}\nuseEntryStepGetTradeNotEnoughDataError{triggerAnalyticsNotEnoughDataError}\nuseEntryStepNotEnoughBalanceForMinerFee{triggerAnalyticsNotEnoughBalanceForMinerFee}\nuseSourceSelector{sourceSelector}\nuseTargetSelector{targetSelector}\nusePersistTradeContext{persistTradeContext}\nuseSerializeSwapTradeResult{serializeSwapTradeResult}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseIsDexDepositGasEnabled{isDepositGasEnabled}\nuseFields{{\n    cryptoAmount,\n    swapTradeResponse,\n    unsignedApproveTxResult: unsignedApproveTx,\n    unsignedSwapTxResult: unsignedSwapTx,\n    unsignedSwapTxResults: unsignedSwapTxs,\n    formGenerateDepositAmount,\n  }}\nuseCallback{onSuccess}\nuseCallback{updateLocalStorageData}\nuseCallback{updateFormData}\nuseCallback{handleGenerateTransactionsError}\nuseGenerateTransactions{{\n    generateTransactions,\n    generateTransactionsError,\n    generateDepositAmount,\n    isGenerateTransactionsLoading,\n  }}\nuseMemo{}",(function(){return[a.Z,o.t,X.L,s.XM,s.Zt,s.iB,$.Q,K.a,J.n,ee.t,i.l,c.F,z.Z,q]})),(re="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(re.register(oe,"swapTradeResponseKey","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx"),re.register(500,"delayBeforeRedirect","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx"),re.register(se,"minAnimationDisplayTime","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx"),re.register(ie,"useConvertGenerateTransactions","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx")),(ne="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&ne(e)},99320:(e,t,r)=>{r.d(t,{n:()=>m});var n,a=r(2784),o=r(3995),s=r(39542),i=r(86296);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var u,d,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},f="tradeContext";function m(){var e=(0,o.O)();return(0,a.useCallback)((function(t){var r=t.key,n=t.value,a=t.itemsToRemove,o=t.clearPreviousContext,u=void 0!==o&&o;if(e)try{var d,p=localStorage.getItem(f);if(p&&!u){var m=JSON.parse(p);d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},m),null==a||a.forEach((function(e){d[e]&&delete d[e]})),d[r]=n}else d=l({},r,n);localStorage.setItem(f,JSON.stringify(d))}catch(e){(0,i.eK)(e),(0,s.J$)(e.message),localStorage.removeItem(f)}}),[e])}p(m,"useIsPreserveDEXEnabled{isEnabled}\nuseCallback{}",(function(){return[o.O]})),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(f,"tradeContextKey","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContext.tsx"),u.register(m,"usePersistTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContext.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},60818:(e,t,r)=>{r.d(t,{c:()=>d});var n,a=r(2784),o=r(3995);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var s,i,c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},l="timeExtClosed",u="unload",d=function(){var e=(0,o.O)();(0,a.useEffect)((function(){function t(){var e=(new Date).getTime();localStorage.setItem(l,JSON.stringify(e))}if(e)return window.addEventListener(u,t),function(){window.removeEventListener(u,t)}}),[e])};c(d,"useIsPreserveDEXEnabled{isEnabled}\nuseEffect{}",(function(){return[o.O]})),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(l,"timeExtClosedKey","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContextTimestamp.tsx"),s.register(u,"eventName","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContextTimestamp.tsx"),s.register(d,"usePersistTradeContextTimestamp","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContextTimestamp.tsx")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},91494:(e,t,r)=>{r.d(t,{T:()=>E});var n,a=r(2784),o=r(3995),s=r(62197),i=r.n(s),c=r(39542),l=r(86296),u=r(6915),d=r(59301),p=r(26273),f=r(86855),m=r(57356),g=r(73881),v=r(58515);function h(e){const t=e.split(":"),r=t[0],n=new(i())(t[1]);return f.Zc.fromChainId({chainPrefix:r,chainId:n})}function y(e){const{name:t,currencyCode:r,address:n,imageURL:a,swappable:o,aggregators:s,blockchain:i,chainId:c,decimals:l}=e;return new m.U({name:t,currencyCode:r.rawValue,address:n?.rawValue,decimals:Number(l),imageURL:a,swappable:o,aggregators:s,chainId:Number(c),blockchain:i.rawValue})}function w(e){const{transaction:{feeCurrencyDecimal:t,gasLimit:r,nonce:n,transferValue:a,walletIndex:o,weiValue:s,network:c,metadata:l},wallet:f}=e,m=Object.assign(e),y=function(e){const t=e.addresses.map((e=>{const t={...e};return t.index=new(i())((0,v.Q)(e.index)),t})),r=new(i())(e.balance),n=new(i())(e.decimals),a=new(i())(e.selectedIndex),o=h(e.network),s=e.minimumBalance?new(i())(e.minimumBalance):void 0;return new g.w5({primaryAddress:e.primaryAddress,addresses:t,displayName:e.displayName,currencyCode:e.currencyCode,imageURL:e.imageURL,balance:r,decimals:n,blockchain:e.blockchain,minimumBalance:s,network:o,contractAddress:e.contractAddress,selectedIndex:a})}(f),w=Object.assign(e.transaction);let b;if(w.metadata=new Map(l),w.feeCurrencyDecimal=new(i())(t),w.gasLimit=void 0!==r?new(i())(r):void 0,w.nonce=void 0!==n?new(i())(n):void 0,w.transferValue=new(i())(a),w.walletIndex=void 0!==o?new(i())(o):void 0,w.weiValue=void 0!==s?new(i())(s):void 0,y.isSolanaNetwork())b=(0,p.$)({wallet:y,nativeDappTransaction:w.swapTransaction,metadata:new Map,recipientAddress:"",transactionAmount:{kind:"Amount",value:w.transferValue}});else if(e.transaction.isEthereumUnsigned1559Tx){const{maxFeePerGas:t,maxPriorityFeePerGas:r,baseFeePerGas:n}=e.transaction;void 0!==t&&(w.maxFeePerGas=new(i())(t)),void 0!==r&&(w.maxPriorityFeePerGas=new(i())(r)),void 0!==n&&(w.baseFeePerGas=new(i())(n)),b=new u.H(w.toAddress,w.fromAddress,w.walletIndex,w.nonce,w.weiValue,w.erc20V,w.data,w.maxFeePerGas,w.maxPriorityFeePerGas,w.gasLimit,w.network,w.currencyCode,w.blockchain,w.transferValue,w.feeCurrencyCode,w.feeCurrencyDecimal,w.recipientAddress,w.metadata,w.baseFeePerGas)}else{const{estimatedFee:t,gasPrice:r}=e.transaction;void 0!==t&&(w.estimatedFee=new(i())(t)),void 0!==r&&(w.gasPrice=new(i())(r)),b=new d.L(w.toAddress,w.fromAddress,w.walletIndex,w.nonce,w.weiValue,w.erc20Value,w.data,w.l1GasFee,w.gasPrice,w.gasLimit,w.network,w.currencyCode,w.blockchain,w.transferValue,w.feeCurrencyCode,w.feeCurrencyDecimal,w.recipientAddress,w.metadata)}return m.transaction=b,m.transaction.network=h(c),m.wallet=y,m}function b(e){const{swapTrade:t,swapTx:r,approveTx:n}=JSON.parse(e);return{swapTrade:function(e){const t=Object.assign(e),{chainId:r,fee:{amount:n,baseAsset:a},quote:{chainId:o,fromAmount:s,toAmount:c,fromAsset:l,toAsset:u}}=e;t.chainId=new(i())(r);const d=Object.assign(e.fee);d.amount=new(i())(n),d.baseAsset=y(a),t.fee=d;const p=Object.assign(e.quote);return p.chainId=new(i())(o),p.fromAmount=new(i())(s),p.toAmount=new(i())(c),p.fromAsset=y(l),p.toAsset=y(u),t.quote=p,t}(t),swapTx:w(r),approveTx:n}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var S,x,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T="timeExtClosed",C="tradeContext";function A(){var e=(new Date).getTime(),t=localStorage.getItem(T);return localStorage.removeItem(T),!!t&&(e-Number(t))/60/1e3>=5}function L(e){var t=e.stepperPosition,r=e.cryptoAmount,n=e.selectedNetwork,a=e.targetAssetId,o=e.sourceWalletId,s=e.swapTradeResponse;if(A())return localStorage.removeItem("tradeContext"),null;var c={};if(a&&(c.targetAssetId=a),o&&(c.sourceWalletId=o),n){var l=h(n);c.selectedNetwork=l}if(r&&(c.cryptoAmount=new(i())(r)),t&&(c.stepperPosition=t),s){var u=b(s),d=u.swapTrade,p=u.approveTx,f=u.swapTx;c.swapTradeResponse=d,c.unsignedSwapTxResult=f,c.unsignedApproveTxResult=p}return c}function E(){var e=(0,o.O)();return(0,a.useCallback)((function(){if(!e)return null;try{var t=localStorage.getItem(C);return t?L(JSON.parse(t)):null}catch(e){return(0,l.eK)({error:e}),(0,c.J$)(e.message),localStorage.removeItem(C),null}}),[e])}k(E,"useIsPreserveDEXEnabled{isEnabled}\nuseCallback{}",(function(){return[o.O]})),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(T,"timeExtClosedKey","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),S.register(C,"tradeContextKey","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),S.register(A,"hasFiveMinsElapsed","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),S.register(L,"parseTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),S.register(E,"useRetrieveTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},84696:(e,t,r)=>{r.d(t,{t:()=>S});var n,a,o,s=r(2784),i=r(62197),c=r.n(i),l=r(6915),u=r(59301),d=r(9539);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return e?e.rawValue.split("/")[0]:""}function v(e){var t=e.chainId.toString(),r=e.decimals.toString(),n=g(e.network),a=f(f({},e),{chainId:t,network:n,decimals:r});return e.swapId&&(a.swapId=e.swapId),a}function h(e){if(e){var t=e.chainId.toString(),r=e.fee.amount.toString(),n=v(e.fee.baseAsset),a=f(f({},e.fee),{},{amount:r,baseAsset:n}),o=e.quote.chainId.toString(),s=e.quote.fromAmount.toString(),i=e.quote.toAmount.toString(),c=v(e.quote.fromAsset),l=v(e.quote.toAsset),u=f(f({},e.quote),{},{chainId:o,fromAmount:s,toAmount:i,fromAsset:c,toAsset:l});return f(f({},e),{},{chainId:t,fee:a,quote:u})}}function y(e){var t,r,n,a,o,s=e.addresses.map((function(e){return{type:e.type,address:e.address,index:new(c())(e.index).toString()}})),i=null!==(t=null===(r=e.balance)||void 0===r?void 0:r.toString())&&void 0!==t?t:"0",l=e.decimals.toString(),u=null!==(n=null===(a=e.selectedIndex)||void 0===a?void 0:a.toString())&&void 0!==n?n:"0",d=g(e.network),p=null===(o=e.minimumBalance)||void 0===o?void 0:o.toString(),m=f(f({},e),{addresses:s,balance:i,decimals:l,selectedIndex:u,network:d,minimumBalance:p});return p||delete m.minimumBalance,m}function w(e){var t,r,n,a,o,s,i={metadata:Array.from(e.metadata),feeCurrencyDecimal:null===(t=e.feeCurrencyDecimal)||void 0===t?void 0:t.toString(),gasLimit:null===(r=e.gasLimit)||void 0===r?void 0:r.toString(),nonce:null===(n=e.nonce)||void 0===n?void 0:n.toString(),transferValue:null===(a=e.transferValue)||void 0===a?void 0:a.toString(),walletIndex:null===(o=e.walletIndex)||void 0===o?void 0:o.toString(),weiValue:null===(s=e.weiValue)||void 0===s?void 0:s.toString(),network:g(e.network)};if(e instanceof l.H){var c=e.maxFeePerGas.toString(),d=e.maxPriorityFeePerGas.toString(),p=e.baseFeePerGas.toString(),m=f(f({},e),i);return void 0!==e.maxFeePerGas&&(m.maxFeePerGas=c.toString()),void 0!==e.maxPriorityFeePerGas&&(m.maxPriorityFeePerGas=d.toString()),void 0!==e.baseFeePerGas&&(m.baseFeePerGas=p.toString()),m.isEthereumUnsigned1559Tx=!0,m}if(e instanceof u.L){var v=e.estimatedFee.toString(),h=e.gasPrice.toString(),y=f(f({},e),i);return void 0!==e.estimatedFee&&(y.estimatedFee=v.toString()),void 0!==e.gasPrice&&(y.gasPrice=h.toString()),y.isEthereumUnsigned1559Tx=!1,y}}function b(e){if(e&&e.transaction&&e.wallet){var t=w(e.transaction),r=y(e.wallet);return f(f({},e),{transaction:t,wallet:r})}}function S(){return(0,s.useCallback)((function(e){if(!e)return null;var t=e.swapTrade,r=e.swapTx,n=e.approveTx;if(t instanceof d.j)return null;var a=h(t),o=b(r);if(!a||!o)return null;var s={swapTrade:a,swapTx:o,approveTx:b(n)};return JSON.stringify(s)}),[])}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(S,"useCallback{}"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(g,"serializeNetwork","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(v,"serializeAsset","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(h,"serializeSwapTrade","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(y,"serializeWallet","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(w,"serializeTransaction","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(b,"serializeSwapTx","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(S,"useSerializeSwapTradeResult","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx")),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},21176:(e,t,r)=>{r.d(t,{m:()=>ne});var n=r(2784),a=r(63470),o=r(83112),s=r(4517),i=r(71962),c=r(79779),l=r(90652),u=r(62783),d=r(25165),p=r(3995),f=r(47022),m=r(27178),g=r(82955),v=r(80081),h=r(99320),y=r(91494),w=r(59554),b=r(29343),S=r(39542),x=r(23933),k=r(86296),T=r(15363),C=r(90656),A=r(23868);function L(){const e=(0,C.y8)(),t="treatment"===(0,A.c1)(T.V.aug_2022_dex_fee_structure)&&"web"===e,r="treatment"===(0,A.c1)(T.V.aug_2022_dex_fee_structure_rn)&&"web"!==e;return(0,n.useMemo)((()=>t||r),[t,r])}var E=r(91964),I=r(72987),M=r(27494),P=r(41857),G=r(60933);function j(e){const{sourceFiatAmount:t,sourceCryptoAmount:r,targetFiatAmount:n,targetCryptoAmount:a}=(0,G.H)(e),{quote:o}=e;return{primaryItem:{title:o.fromAsset.name,iconSourceOrName:{iconUrl:o.fromAsset.imageURL,currencyCode:o.fromAsset.currencyCode?.code,network:o.fromAsset.network,showNetworkIcon:o.fromAsset.network.asChain()?.isLayer2},detail:t,subDetail:r,isAsset:!0,testID:"primary"},secondaryItem:{title:o.toAsset.name,iconSourceOrName:{iconUrl:o.toAsset.imageURL,currencyCode:o.toAsset.currencyCode?.code,network:o.toAsset.network,showNetworkIcon:o.toAsset.network.asChain()?.isLayer2},detail:n,subDetail:a,isAsset:!0,testID:"secondary"}}}var F,O=r(56695),D=r(23132),N=r(54971),H=r(29217),B=r(5890),R=r(53476),V=r(95898),_=r(52322);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(){Q=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new k(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return C()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function p(){}function f(){}var m={};i(m,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==t&&r.call(v,a)&&(m=v);var h=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,s,i){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==U(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,i(h,"constructor",f),i(f,"constructor",p),p.displayName=i(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},y(w.prototype),i(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(h),i(h,s,"Generator"),i(h,a,(function(){return this})),i(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function z(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){z(o,n,a,s,i,"next",e)}function i(e){z(o,n,a,s,i,"throw",e)}s(void 0)}))}}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&F(e);var X,J,ee="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},te=(0,a.vU)({title:{id:"wWq8+G",defaultMessage:[{type:0,value:"Confirm swap"}]},subTitle:{id:"uERyyA",defaultMessage:[{type:0,value:"Best price out of "},{type:1,value:"numSources"},{type:0,value:" sources"}]},cancel:{id:"kz3JfK",defaultMessage:[{type:0,value:"Cancel"}]},trade:{id:"UkNNA2",defaultMessage:[{type:0,value:"Trade"}]},cbFee:{id:"B4/zfC",defaultMessage:[{type:0,value:"Includes a 1% Coinbase fee"}]},cbFeeTooltip:{id:"23diCd",defaultMessage:[{type:0,value:"Coinbase charges a service fee of 1% on token conversions"}]},longSolanaTxMessage:{id:"YIocEF",defaultMessage:[{type:0,value:"Solana swaps can take longer. Please stay on this screen until your swap completes."}]}}),re="swapTradeResponse";function ne(e){var t,r=e.wallet,a=(0,p.O)(),T=(0,h.n)(),C=(0,y.T)(),A=(0,o.Z)(),G=(0,s.k6)(),F=A.formatMessage,U=(0,u.t)(g.Ex),Z=U.goToStep,q=U.hasPreviousStep,z=U.setContextHistory,K=U.history,X=$((0,R.FV)(H.IW),1)[0],J=$((0,n.useState)(new Date),2),ee=J[0],ne=J[1],ae=$((0,n.useState)(!1),2),oe=ae[0],se=ae[1],ie=(0,f.G)("Swap","trigger_swap",{logMetric:!0}).start,ce=L(),le=(0,V.Z)(g.cr),ue=le.swapTradeResponse.value,de=le.unsignedSwapTxResult.value,pe=le.unsignedSwapTxResults.value,fe=le.unsignedApproveTxResult.value,me=le.ledgerSwapError;if(!(ue&&de&&de.transaction&&de.wallet))throw new Error("Transaction data was missing in ConfirmationPreviewStep");var ge=(0,n.useMemo)((function(){return null==pe?void 0:pe.map((function(e){return e.transaction}))}),[pe]),ve=(0,v.g)(r,{shouldIgnoreSuccessRedirect:!0}),he=ve.generateTransactions,ye=ve.isGenerateTransactionsLoading,we=(0,n.useCallback)(Y(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(new Date),e.next=3,he();case 3:case"end":return e.stop()}}),e)}))),[he]),be=(0,n.useRef)(we);(0,n.useEffect)((function(){var e;function t(){return r.apply(this,arguments)}function r(){return(r=Y(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(t){e=window.setTimeout(t,3e4)}));case 2:be.current(),t();case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return t(),function(){return clearInterval(e)}}),[]),(0,n.useEffect)((function(){a&&!K.includes("entry")&&(z(["entry","confirmationPreview"]),we())}),[z,K,a,we,C,T]),(0,O.F)((function(){if(a){var e=C();"confirmationPreview"!==(null==e?void 0:e.stepperPosition)&&T({key:"stepperPosition",value:"confirmationPreview"})}}));var Se=j(ue),xe=Se.primaryItem,ke=Se.secondaryItem,Te=(0,M.w)({swapTrade:ue,unsignedApproveTx:null==fe?void 0:fe.transaction,unsignedSwapTx:de.transaction,intlFormatters:A}),Ce=(0,w.L)(),Ae=(0,S.eZ)({chainDetails:Ce}),Le=(0,S.qT)({chainDetails:Ce}),Ee=(0,S.NS)({chainDetails:Ce}),Ie=(0,S.kN)({chainDetails:Ce}),Me=(0,S.HA)({chainDetails:Ce}),Pe=(0,S.Sg)({chainDetails:Ce}),Ge=(0,S.eK)({chainDetails:Ce}),je=(0,S.VZ)({chainDetails:Ce}),Fe=(0,S.b7)({chainDetails:Ce}),Oe=(0,S.B0)({chainDetails:Ce}),De=(0,S.p2)({chainDetails:Ce}),Ne=(0,n.useCallback)((function(){De(),Z("status")}),[Z,De]),He=(0,n.useCallback)((function(e){Oe(),(0,k.eK)({error:new Error(e.message),context:"ledger-error"}),me.onChange(e),Z("status")}),[Z,me,Oe]),Be=(0,n.useCallback)((function(){Fe(),Z("status")}),[Z,Fe]),Re=(0,n.useCallback)((function(){je(),se(!0)}),[je]),Ve=(0,n.useCallback)((function(e){Le({userCancelledAfterError:e}),T({key:"stepperPosition",value:"entry",itemsToRemove:[re]}),q?Z("entry"):G.goBack()}),[Z,q,G,T,Le]),_e=(0,b.S)(),Ue=(0,n.useMemo)((function(){var e="string"==typeof xe.iconSourceOrName?void 0:xe.iconSourceOrName.network,t="string"==typeof ke.iconSourceOrName?void 0:ke.iconSourceOrName.network;return{primaryItemProps:W(W({},xe),{},{network:e}),secondaryItemProps:W(W({},ke),{},{network:t})}}),[xe,ke]),Ze=Ue.primaryItemProps,We=Ue.secondaryItemProps,qe=(0,n.useCallback)((function(){Z("phoneConfirmation")}),[Z]),Qe=(0,m.T)({unsignedTx:de.transaction,unsignedApproveTx:null==fe?void 0:fe.transaction,signSuccess:Ne,signError:He,flow:m.Z.Trade}),ze=Qe.signAndSubmitLedger,Ye=Qe.isSignAndSubmitLedgerLoading,$e=(0,d.b)(),Ke=(0,D.Q)({wallet:de.wallet,unsignedTx:de.transaction,unsignedApproveTx:null==fe?void 0:fe.transaction,signSuccess:Be,signError:Re,unlockSuccess:Ee,unlockError:Ie,handleUnlock:$e}),Xe=Ke.signAndSubmitStandalone,Je=Ke.isSignAndSubmitStandaloneLoading,et=(0,N.Y)({wallet:de.wallet,unsignedTxs:ge,signSuccess:Be,signError:Re,unlockSuccess:Ee,unlockError:Ie,handleUnlock:$e,skipSubmit:!1}),tt=et.signMultipleTransactionsStandalone,rt=et.isSignMultipleTransactionsStandaloneLoading,nt=Ye||Je||ye||rt,at=(0,I.e)({signingMethodType:_e,transactionDetailError:Te,isLoading:nt,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmClick:Me,triggerAnalyticsConfirmAnyway:Pe,triggerAnalyticsConfirm:Ge},isMultipleTxs:Boolean((null!==(t=null==pe?void 0:pe.length)&&void 0!==t?t:0)>1)&&r.isSolanaNetwork(),onCancelButtonPressed:Ve,signAndSubmitStandalone:Xe,signMultipleTransactionsStandalone:tt,signAndSubmitWalletlink:qe,signAndSubmitLedger:ze,markStartPerf:ie}),ot=(0,B.i)(de.transaction,de.wallet),st=(0,S.IV)({chainDetails:Ce}),it=(0,S.v9)({chainDetails:Ce}),ct=(0,S.vC)({chainDetails:Ce}),lt=(0,S.NU)({chainDetails:Ce}),ut=(0,n.useCallback)((function(e){var t=e.networkEstimatedFee,r=e.networkBaseFee,n=e.networkMaxFee;st({networkEstimatedFee:t,networkMaxFee:n,networkBaseFee:r});try{if((0,x.A)(de.transaction)){var a=ot,o=a.lowerBoundFee,s=a.upperBoundFee;if(!o||!s)throw new Error("No valid lower and upper bound fees for swap 1559 transaction");ct(ot)}else{if(!ot.estimatedFee)throw new Error("No valid estimated fee for swap transaction");it(ot)}}catch(e){lt(ot)}}),[ot,st,lt,ct,it,de.transaction]),dt=(0,P.D)({swapTrade:ue,unsignedApproveTx:null==fe?void 0:fe.transaction,unsignedSwapTx:de.transaction,lastUpdateTime:ee,isPageLoading:nt,rowItemsAnalytics:ut,intlFormatters:A}),pt=me.onChange,ft=(0,n.useCallback)((function(e){pt(e),Z("status")}),[pt,Z]),mt=(0,n.useCallback)((function(){T({key:"stepperPosition",value:"entry",itemsToRemove:[re]}),Z("entry")}),[Z,T]),gt=(0,m.T)({unsignedTx:de.transaction,signSuccess:function(){},signError:ft,flow:m.Z.Trade}).hardwareWalletScreen,vt=(0,E.f)(Ce.chainId),ht=(0,n.useMemo)((function(){return vt&&ce?F(te.subTitle,{numSources:vt}):""}),[F,ce,vt]),yt=(0,n.useMemo)((function(){return r.isSolanaNetwork()?(0,_.jsx)(c.Y,{message:F(te.longSolanaTxMessage)}):null}),[F,r]);if(X)return gt;var wt={message:F(te.cbFee),tooltipMessage:F(te.cbFeeTooltip)};return(0,_.jsx)(l.q,{headerText:F(te.title),subHeaderText:ht,detailRowItems:dt,error:Te,infoBanner:yt,buttonProps:at,onPrimaryButtonDisabled:Ae,handleBackButton:mt,hasGenericError:oe,topSection:(0,_.jsx)(i.v,{primaryItem:Ze,secondaryItem:We,error:Te}),cbFeeDisclaimer:wt})}ee(ne,"useIsPreserveDEXEnabled{isPreserveDEXEnabled}\nusePersistTradeContext{persistTradeContext}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseIntl{intl}\nuseHistory{history}\nuseStepper{{\n    goToStep,\n    hasPreviousStep,\n    setContextHistory,\n    history: stepperHistory,\n  }}\nuseRecoilState{[hardwareWalletSigning]}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseState{[signAndSubmitError, setSignAndSubmitError](false)}\nusePerfMark{{ start: markStartSwapwPerf }}\nuseIsBestQuoteFeesEnabled{isBestQuoteFeesEnabled}\nuseFields{{\n    swapTradeResponse: { value: swapTradeResponse },\n    unsignedSwapTxResult: { value: unsignedSwapTxResult },\n    unsignedSwapTxResults: { value: unsignedSwapTxResults },\n    unsignedApproveTxResult: { value: unsignedApproveTxResult },\n    ledgerSwapError,\n  }}\nuseMemo{unsignedTxs}\nuseConvertGenerateTransactions{{ generateTransactions, isGenerateTransactionsLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseRef{savedCallbackRef}\nuseEffect{}\nuseEffect{}\nuseOnMount{}\nuseTransactionOverviewItems{{ primaryItem, secondaryItem }}\nuseTransactionDetailErrors{transactionDetailError}\nuseChainDetails{chainDetails}\nuseTradeConfirmationStepTradeButtonDisabled{triggerAnalyticsTradeButtonDisabled}\nuseTradeConfirmationStepTradeCancel{triggerAnalyticsTradeCancel}\nuseTradeConfirmationStepUnlockSuccess{triggerAnalyticsUnlockSuccess}\nuseTradeConfirmationStepUnlockError{triggerAnalyticsUnlockError}\nuseTradeConfirmationStepTradeConfirmClick{triggerAnalyticsConfirmClick}\nuseTradeConfirmationStepTradeAnyway{triggerAnalyticsConfirmAnyway}\nuseTradeConfirmationStepTradeConfirm{triggerAnalyticsConfirm}\nuseTradeConfirmationStepStandaloneError{triggerAnalyticsStandaloneError}\nuseTradeConfirmationStepStandaloneConfirm{triggerAnalyticsStandaloneConfirm}\nuseTradeConfirmationStepLedgerError{triggerAnalyticsLedgerError}\nuseTradeConfirmationStepLedgerConfirm{triggerAnalyticsLedgerConfirm}\nuseCallback{onLedgerSigningSuccess}\nuseCallback{onLedgerSigningError}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onStandaloneSigningError}\nuseCallback{onCancelButtonPressed}\nuseSigningMethodType{signingMethodType}\nuseMemo{{ primaryItemProps, secondaryItemProps }}\nuseCallback{signAndSubmitWalletlink}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isSignAndSubmitLedgerLoading }}\nuseHandleUnlock{handleUnlock}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseSignMultipleTransactionsStandalone{{ signMultipleTransactionsStandalone, isSignMultipleTransactionsStandaloneLoading }}\nuseTransactionDetailButtons{buttonOptions}\nuseAnalyticsFeeData{analyticsFeeData}\nuseTradeConfirmationStepViewed{triggerAnalyticsConfirmationStep}\nuseTradeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseTradeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseTradeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nuseCallback{transationRowItemsAnalytics}\nuseTransactionDetailRowItems{detailRows}\nuseCallback{signError}\nuseCallback{handleGoBack}\nuseSignAndSubmitLedger{{ hardwareWalletScreen }}\nuseNumSourcesByChain{numSourcesByChain}\nuseMemo{numSourcesLabel}\nuseMemo{infoBanner}",(function(){return[p.O,h.n,y.T,o.Z,s.k6,u.t,R.FV,f.G,L,V.Z,v.g,O.F,j,M.w,w.L,S.eZ,S.qT,S.NS,S.kN,S.HA,S.Sg,S.eK,S.VZ,S.b7,S.B0,S.p2,b.S,m.T,d.b,D.Q,N.Y,I.e,B.i,S.IV,S.v9,S.vC,S.NU,P.D,m.T,E.f]})),(X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(X.register(te,"messages","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),X.register(re,"swapTradeResponseKey","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),X.register(ne,"ConfirmationPreviewStep","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx")),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&J(e)},49919:(e,t,r)=>{r.d(t,{e:()=>G});var n,a=r(2784),o=r(63470),s=r(83112),i=r(4517),c=r(17726),l=r(62783),u=r(3534),d=r(82955),p=r(80081),f=r(64699),m=r(11071),g=r(13003),v=r(74017),h=r(95898),y=r(60723),w=r(70986),b=r(48972),S=r(61641),x=r(71345),k=r(52322);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function C(){C=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new k(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function p(){}function f(){}var m={};i(m,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(A([])));v&&v!==t&&r.call(v,a)&&(m=v);var h=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,s,i){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==T(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,i(h,"constructor",f),i(f,"constructor",p),p.displayName=i(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},y(w.prototype),i(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(h),i(h,s,"Generator"),i(h,a,(function(){return this})),i(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;x(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function A(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){A(o,n,a,s,i,"next",e)}function i(e){A(o,n,a,s,i,"throw",e)}s(void 0)}))}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var E,I,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=(0,o.vU)({title:{id:"/OJF46",defaultMessage:[{type:0,value:"Let's top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},main:{id:"GJmTtm",defaultMessage:[{type:0,value:"Buy or transfer from Coinbase"}]},finePrint:{id:"NtJETL",defaultMessage:[{type:0,value:"Coinbase.com\u2019s account link feature is subject to coinbase.com "},{type:1,value:"userAgreement"},{type:0,value:" and "},{type:1,value:"privacyPolicy"},{type:0,value:"."}]},userAgreement:{id:"V6jvi1",defaultMessage:[{type:0,value:"User Agreement"}]},privacyPolicy:{id:"0ROee6",defaultMessage:[{type:0,value:"Privacy Policy"}]},buttonCta:{id:"rV4uVX",defaultMessage:[{type:0,value:"Buy with Coinbase Pay"}]},otherButton:{id:"IykAaN",defaultMessage:[{type:0,value:"Transfer from another wallet"}]},defaultError:{id:"fnBlFk",defaultMessage:[{type:0,value:"Buy or transfer funds from Coinbase or another wallet."}]}});function G(e){var t,r,n,o=e.wallet,T=(0,s.Z)().formatMessage,A=(0,i.k6)(),E=(0,l.t)(d.Ex).goBack,I=(0,g.y)({include:{shared:"ETH",blockchains:["AVAX"]}}),M=(0,h.Z)(d.cr),G=M.selectedNetwork,j=M.formGenerateDepositAmount,F=(0,p.g)(o,{shouldIgnoreSuccessRedirect:!0}),O=F.generateTransactions,D=F.isGenerateTransactionsLoading,N=(0,v.c)(null===(t=o.network.asChain())||void 0===t?void 0:t.chainId.toString()),H=(0,a.useCallback)(L(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||null!=N&&null!==(t=N.balance)&&void 0!==t&&t.isZero()){e.next=3;break}return e.next=3,O();case 3:case"end":return e.stop()}}),e)}))),[O,N]),B=(0,a.useRef)(H);(0,a.useEffect)((function(){var e;function t(){return r.apply(this,arguments)}function r(){return(r=L(C().mark((function r(){return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(t){e=window.setTimeout(t,3e4)}));case 2:B.current(),t();case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return t(),function(){return clearInterval(e)}}),[]);var R=(0,a.useCallback)((function(){x.ZP.open({appId:"wallet",destinationWallets:I})}),[I]),V=(0,a.useCallback)((function(){A.push(u.Xv.RECEIVE)}),[A]),_=(0,a.useCallback)((function(){E()}),[E]),U=(0,a.useCallback)(L(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:f.w6,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]),Z=(0,a.useCallback)(L(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:f.NW,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]);return(0,k.jsxs)(b.VStack,{height:m.UV,children:[(0,k.jsx)(c.w,{onBack:_,spacingBottom:0}),(0,k.jsxs)(b.VStack,{alignItems:"center",width:"100%",spacingHorizontal:2,children:[(0,k.jsx)(S.TextTitle3,{as:"h1",spacingBottom:1,children:T(P.title,{cryptoSymbol:null===(r=G.value)||void 0===r||null===(n=r.asChain())||void 0===n?void 0:n.baseAssetCurrencyCode})}),(0,k.jsx)(S.TextBody,{as:"p",color:"foregroundMuted",align:"center",testID:"deposit-gas-message",children:j.value}),(0,k.jsx)(b.HStack,{alignItems:"center",justifyContent:"center",spacingVertical:6,children:(0,k.jsx)(w.SpotRectangle,{name:"primeEarnRectangle"})})]}),(0,k.jsxs)(b.VStack,{alignItems:"center",width:"100%",children:[(0,k.jsxs)(y.ButtonGroup,{accessibilityLabel:"Transfer Funds",block:!0,vertical:!0,children:[(0,k.jsx)(y.Button,{onPress:R,loading:D,children:(0,k.jsx)(b.HStack,{alignItems:"center",gap:1,children:T(P.buttonCta)})}),(0,k.jsx)(y.Button,{onPress:V,variant:"secondary",children:T(P.otherButton)})]}),(0,k.jsx)(S.TextLegal,{as:"p",color:"foregroundMuted",align:"center",spacingTop:2,children:T(P.finePrint,{userAgreement:(0,k.jsx)(S.Link,{variant:"legal",color:"primary",onPress:U,children:T(P.userAgreement)}),privacyPolicy:(0,k.jsx)(S.Link,{variant:"legal",color:"primary",onPress:Z,children:T(P.privacyPolicy)})})})]})]})}M(G,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseStepper{{ goBack }}\nuseDestinationWallets{destinationWallets}\nuseFields{{ selectedNetwork, formGenerateDepositAmount }}\nuseConvertGenerateTransactions{{ generateTransactions, isGenerateTransactionsLoading }}\nuseGetFeeWallet{feeWallet}\nuseCallback{refreshNetworkFeeCallback}\nuseRef{savedCallbackRef}\nuseEffect{}\nuseCallback{handleConnectCoinbaseClick}\nuseCallback{handleOtherClick}\nuseCallback{handleBackClick}\nuseCallback{handleClickUserAgreement}\nuseCallback{handleClickPrivacyPolicy}",(function(){return[s.Z,i.k6,l.t,g.y,h.Z,p.g,v.c]})),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(P,"messages","/workspaces/apps/extension/src/screens/Trade/steps/DepositGasStep/DepositGasStep.tsx"),E.register(G,"DepositGasStep","/workspaces/apps/extension/src/screens/Trade/steps/DepositGasStep/DepositGasStep.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},52659:(e,t,r)=>{r.d(t,{y:()=>le,s:()=>ce});var n=r(2784),a=r(63470),o=r(83112),s=r(4517),i=r(63043),c=r(12728),l=r(17726),u=r(55736),d=r(62783),p=r(47022),f=r(68708),m=r(37330),g=r(82955),v=r(80081),h=r(99320),y=r(91494),w=r(59554),b=r(11071),S=r(62197),x=r.n(S),k=r(39542),T=r(1620),C=r(48517),A=r(69321),L=r(56695),E=r(5738),I=r(74017);const M=(0,a.vU)({error:{id:"3OMCSc",defaultMessage:"You need {currencyCode} before you can make a transaction on the {networkName} network."}});function P(e,t){const{formatMessage:r}=(0,o.Z)(),a=(0,I.c)(e);return(0,n.useMemo)((()=>{if(t&&a&&a?.balance?.isZero()){return{message:r(M.error,{currencyCode:a.currencyCode.code,networkName:a.displayName}),code:"zeroBalanceForMinerFee"}}}),[a,r,t])}var G=r(82066),j=r(63258),F=r(32832),O=r(65879);const D="swap/quote";function N(e,t=300){const r=(0,j.N)(e,t),{data:a,isLoading:o,error:s}=(0,G.useQuery)([D,r],(async()=>{if(r)return async function(e){const{result:t}=await(0,F.xA)(D,e,{apiVersion:1});return t.quote}(r)}),{enabled:!!r,staleTime:3e4});return{quote:(0,n.useMemo)((()=>a?new O.O(a):void 0),[a]),isLoading:o,error:s}}var H=r(81399);const B=({source:e,target:t,includeCode:r=!0,cryptoAmount:a=new(x())(0),analyticsError:o,handleEntrySelectorError:s})=>{const i=(0,T.$)(),c=(0,n.useMemo)((()=>{if(e&&t&&!a.lte(new(x())(0)))return{from:e.address?.rawValue??e.currencyCode.rawValue,to:t.address?.rawValue??t.currencyCode.rawValue,amount:String(a),mode:"fast",amountReference:H.d.Source,chainId:String(e.chainId),directRoute:String(!1)}}),[e,t,a]),{quote:l,isLoading:u,error:d}=N(c);(0,n.useEffect)((function(){d&&(o?.({error:d}),s?.(d))}),[o,d,s]);const p=(0,n.useMemo)((()=>l?i.formatToCrypto({currencyCode:l.fromAsset.currencyCode,decimals:l.fromAsset.decimals,value:new(x())(l.fromAmount),includeCode:r,maxDisplayDecimals:new(x())(8)}):""),[i,r,l]),f=(0,n.useMemo)((()=>l?i.formatToCrypto({currencyCode:l.toAsset.currencyCode,decimals:l.toAsset.decimals,value:new(x())(l.toAmount),includeCode:r,maxDisplayDecimals:new(x())(8)}):""),[i,r,l]),m=(0,n.useMemo)((()=>!u&&d?d?.data?.error:void 0),[d,u]);return{quote:l,fromCryptoAmount:p,toCryptoAmount:f,isLoading:u,error:m}};var R=r(54073),V=r.n(R),_=r(95898),U=r(60723),Z=r(48972),W=r(29904),q=r(61641),Q=r(22731),z=r(40620);function Y(e){const{sourceWalletId:t,targetAssetId:r}=(0,_.Z)(g.cr),a=(0,z.r)(),o=(0,Q.Y)(),s=(0,h.n)(),i=(0,y.T)(),c=(0,w.L)(),l=(0,k.vD)({chainDetails:c});return{toggleAssets:(0,n.useCallback)((()=>{if(!e)return;const n=(a.find((e=>e.swapId===r.value))??e).id,o=a.find((t=>t.id===e.id))?.swapId;if(!n||!o)return;l({sourceWalletId:n,targetAssetId:o}),t.onChange(n),r.onChange(o);const c=i();c&&(c?.sourceWalletId!==n&&s({key:"sourceWalletId",value:n}),c?.targetAssetId!==o&&s({key:"targetAssetId",value:o}))}),[e,a,l,t,r,i,s]),isDisabled:(0,n.useMemo)((()=>!r.value||void 0===o||!o.find((e=>e.swapId===r.value))),[r.value,o])}}var $,K=r(11547),X=r(98483),J=r(52322);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),($="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&$(e);var oe,se,ie="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ce=(0,a.vU)({title:{id:"wFzAcF",defaultMessage:[{type:0,value:"Swap"}]},availableAmount:{id:"oQMg3g",defaultMessage:[{type:1,value:"amount"},{type:0,value:" available"}]},nextCTALabel:{id:"LQ4Vhd",defaultMessage:[{type:0,value:"Preview"}]},noAmountError:{id:"8xcZm0",defaultMessage:[{type:0,value:"Please enter an amount."}]},transactionCanceled:{id:"hcNb7U",defaultMessage:[{type:0,value:"Transaction canceled"}]},tryAgain:{id:"oKQtsu",defaultMessage:[{type:0,value:"Try again"}]},goBackHome:{id:"pHyRag",defaultMessage:[{type:0,value:"Go back home"}]},fillGas:{id:"C4PoVL",defaultMessage:[{type:0,value:"Fill Gas"}]},bestPriceText:{id:"9han78",defaultMessage:[{type:0,value:"Find the best price"}]},priceEstimateLabel:{id:"mqpZxy",defaultMessage:[{type:0,value:"Price estimate"}]},topUpButtonText:{id:"Qariaz",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]}});function le(e){var t,r,a,S,I,M,G=e.wallet,j=(0,h.n)(),F=(0,y.T)(),O=ne((0,n.useState)(!1),2),D=O[0],N=O[1],H=(0,s.k6)().goBack,R=(0,d.t)(g.Ex).goToStep,Q=(0,o.Z)().formatMessage,z=(0,_.Z)(g.cr),$=z.cryptoAmount,ee=z.enteredAmount,re=z.isFiat,ae=z.selectedNetwork,oe=z.targetAssetId,se=z.sourceWalletId,ie=z.formGenerateTransactionsError,le=(0,T.$)(),ue=ne((0,n.useState)(),2),de=ue[0],pe=ue[1],fe=(0,C.l)(),me=(0,A.F)(),ge=P(null===(t=ae.value.asChain())||void 0===t||null===(r=t.chainId)||void 0===r?void 0:r.toString(),me),ve=(0,K.Q)(G),he=(0,X.a)(),ye=Y(G),we=ye.toggleAssets,be=ye.isDisabled,Se=(0,w.L)(),xe=(0,k.tM)({chainDetails:Se}),ke=(0,k.iJ)({chainDetails:Se}),Te=(0,k.nD)({chainDetails:Se}),Ce=(0,k.hu)({chainDetails:Se,walletCurrencyCode:null==G?void 0:G.currencyCode.code}),Ae=(0,k.h4)({chainDetails:Se}),Le=(0,k.lf)({chainDetails:Se}),Ee=(0,k.F_)({chainDetails:Se,source:k.Hw.EXTENSION}),Ie=(0,p.G)("Swap","load_preview",{logMetric:!0}).start;(0,f.V)("Swap","launch_swap",{type:"end"});var Me=(0,n.useCallback)((function(e){$.value.gt(new(x())(0))&&e&&pe(e)}),[$]);(0,L.F)((function(){var e=F();"entry"!==(null==e?void 0:e.stepperPosition)&&j({key:"stepperPosition",value:"entry"})}));var Pe=B({source:ve.swapAsset,target:he.swapAsset,cryptoAmount:$.value,analyticsError:Le,handleEntrySelectorError:Me}),Ge=Pe.isLoading,je=Pe.fromCryptoAmount,Fe=Pe.toCryptoAmount,Oe=(0,v.g)(G),De=Oe.generateTransactions,Ne=Oe.generateTransactionsError,He=Oe.isGenerateTransactionsLoading,Be=(0,n.useMemo)((function(){return fe?ie.value:Ne}),[ie.value,Ne,fe]),Re=(0,n.useCallback)((function(){var e,t,r,n,a,o,s,i,c,l=F();xe({cryptoAmount:$.value.toString(),currentBalance:null==G||null===(e=G.balance)||void 0===e?void 0:e.toString(),sourceCurrencyCode:null==ve||null===(t=ve.swapAsset)||void 0===t?void 0:t.currencyCode.code,sourceChainId:null==ve||null===(r=ve.swapAsset)||void 0===r?void 0:r.chainId.toString(),sourceChainDisplayName:null==ve||null===(n=ve.swapAsset)||void 0===n||null===(a=n.network.asChain())||void 0===a?void 0:a.displayName,targetCurrencyCode:null==he||null===(o=he.swapAsset)||void 0===o?void 0:o.currencyCode.code,targetChainId:null==he||null===(s=he.swapAsset)||void 0===s?void 0:s.chainId.toString(),targetChainDisplayName:null==he||null===(i=he.swapAsset)||void 0===i||null===(c=i.network.asChain())||void 0===c?void 0:c.displayName}),Ie(),fe||De(),l&&!l.sourceWalletId&&G&&j({key:"sourceWalletId",value:G.id}),l&&!l.selectedNetwork&&j({key:"selectedNetwork",value:ae.value.rawValue.split("/")[0]}),fe&&(j({key:"stepperPosition",value:"loadingBestQuote"}),R("loadingBestQuote"))}),[fe,$,ve,he,xe,De,R,Ie,j,F,G,ae]),Ve=(0,E.iR)();(0,n.useEffect)((function(){var e;he.swapAsset&&Ve(he.swapAsset.currencyCode,he.swapAsset.chainId,null===(e=he.swapAsset.address)||void 0===e?void 0:e.rawValue)}),[Ve,he.swapAsset]),(0,k.Bu)({chainDetails:Se,walletCurrencyCode:null==G?void 0:G.currencyCode.code});var _e=void 0!==(null==G?void 0:G.balance)?le.formatToFiat(G.currencyCode,G.decimals,G.balance,!1,G.contractAddress,G.network):"",Ue=(0,n.useMemo)((function(){return te(te({},ve),{},{dataElementHandle:"dex-from-selector",isLoading:Ge,secondaryLabel:$.value&&je?je:ve.secondaryLabel,onPress:function(){R("selectWallet")}})}),[$.value,je,R,Ge,ve]),Ze=(0,n.useMemo)((function(){return te(te({},he),{},{dataElementHandle:"dex-to-selector",isLoading:Ge,secondaryLabel:$.value&&Fe?Fe:he.secondaryLabel,onPress:function(){R("selectAsset")}})}),[$.value,R,Ge,he,Fe]),We=(0,n.useMemo)((function(){var e,t,r;return void 0!==Be||D||$.value.isZero()||Boolean(de)||!he.swapAsset||!ve.swapAsset||(null===(e=ve.swapAsset)||void 0===e?void 0:e.swapId)===(null===(t=he.swapAsset)||void 0===t?void 0:t.swapId)||He&&!fe||!(null!==(r=Ze.swapAsset)&&void 0!==r&&r.swappable)||Ge}),[$.value,de,D,He,null===(a=Ze.swapAsset)||void 0===a?void 0:a.swappable,ve.swapAsset,he.swapAsset,Be,fe,Ge]);(0,n.useEffect)((function(){var e,t;We||Ee({cryptoAmount:$.value.toString(),sourceChainId:null==ve||null===(e=ve.swapAsset)||void 0===e?void 0:e.chainId.toString(),targetChainId:null==he||null===(t=he.swapAsset)||void 0===t?void 0:t.chainId.toString()})}),[We]);var qe=(0,n.useMemo)((function(){var e;return me&&((null==Be||null===(e=Be.code)||void 0===e?void 0:e.includes("MinerFee"))||ge)}),[me,null==Be?void 0:Be.code,ge]),Qe=(0,n.useCallback)((function(){Ce(),H()}),[H,Ce]),ze=(0,n.useCallback)((function(){R("selectNetwork")}),[R]),Ye=(0,n.useCallback)((function(){R("depositGas")}),[R]);(0,n.useEffect)((function(){D&&V()((function(){var e,t,r;Ae({amount:$.value.toString(),currentBalance:null==G||null===(e=G.balance)||void 0===e?void 0:e.toString(),sourceSwapId:null===(t=ve.swapAsset)||void 0===t?void 0:t.swapId,targetSwapId:null===(r=he.swapAsset)||void 0===r?void 0:r.swapId})}),500)()}),[D]);var $e=(0,n.useCallback)((function(e){var t,r=F();null!=r&&r.sourceWalletId||!G||j({key:"sourceWalletId",value:G.id}),null!=r&&r.selectedNetwork||j({key:"selectedNetwork",value:ae.value.rawValue.split("/")[0]}),j({key:"cryptoAmount",value:e.toString()}),!fe||null!=r&&null!==(t=r.cryptoAmount)&&void 0!==t&&t.eq(e)||ie.onChange(void 0)}),[F,ae.value.rawValue,j,G,ie,fe]),Ke=(0,n.useMemo)((function(){return!($.value.isZero()||!se.value.length||!oe.value)}),[$.value,se.value,oe.value]);return(0,J.jsxs)(W.VStack,{height:b.UV,justifyContent:"space-between",children:[(0,J.jsx)(l.w,{onBack:Qe,title:Q(ce.title),subTitle:(0,J.jsx)(u.l,{network:ae.value,onPress:ze})}),(0,J.jsxs)(W.VStack,{alignContent:"center",spacingHorizontal:3,children:[G?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(i._Z,{context:"trade",wallet:G,onInsufficientFund:N,cryptoAmount:$,enteredAmount:ee,isFiat:re,analyticsGetMaxValue:ke,analyticsSwitchDisplay:Te,onChange:$e}),_e?(0,J.jsx)(q.TextLabel2,{as:"p",color:"foregroundMuted",align:"center",spacingTop:1,children:Q(ce.availableAmount,{amount:_e})}):null]}):(0,J.jsx)(c.BF,{}),(0,J.jsx)(Z.Spacer,{})]}),(0,J.jsxs)(W.VStack,{spacing:3,children:[Ke&&fe?(0,J.jsx)(q.TextLabel2,{as:"p",spacingBottom:.5,children:Q(ce.priceEstimateLabel)}):(0,J.jsx)(Z.Spacer,{vertical:3}),(0,J.jsx)(m.rb,{onClickSwitcher:we,isSwitchDisabled:be,error:null!==(S=null!=ge?ge:Be)&&void 0!==S?S:de,row1:Ue,row2:Ze}),qe?(0,J.jsx)(U.Button,{block:!0,onPress:Ye,variant:"secondary",testID:"dex-entry-top-up-balance-button",children:Q(ce.topUpButtonText,{cryptoSymbol:null===(I=ae.value)||void 0===I||null===(M=I.asChain())||void 0===M?void 0:M.baseAssetCurrencyCode})}):(0,J.jsx)(U.Button,{block:!0,disabled:We,loading:He&&!fe,onPress:Re,testID:"dex-entry-preview-button",children:Q(fe?ce.bestPriceText:ce.nextCTALabel)})]})]})}ie(le,"usePersistTradeContext{persistTradeContext}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseState{[hasInsufficientFund, setHasInsufficientFund](false)}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseIntl{{ formatMessage }}\nuseFields{{\n    cryptoAmount,\n    enteredAmount,\n    isFiat,\n    selectedNetwork,\n    targetAssetId,\n    sourceWalletId,\n    formGenerateTransactionsError,\n  }}\nuseCurrencyFormatter{currencyFormatter}\nuseState{[entrySelectorError, setEntrySelectorError]}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseIsDexDepositGasEnabled{isDepositGasEnabled}\nuseNativeAssetZeroBalanceError{zeroNativeAssetError}\nuseSourceSelector{sourceSelector}\nuseTargetSelector{targetSelector}\nuseAssetsToggler{{ toggleAssets, isDisabled }}\nuseChainDetails{chainDetails}\nuseEntryStepPreviewButtonClicked{triggerAnalyticsPreviewButtonClicked}\nuseGetMaxValueButton{triggerAnalyticsGetMaxValue}\nuseSwitchDisplayButton{triggerAnalyticsSwitchDisplay}\nuseEntryStepBackButton{triggerAnalyticsBackButton}\nuseEntryStepNotEnoughBalance{triggerAnalyticsNotEnoughBalance}\nuseEntryStepQuoteError{triggerAnalyticsQuoteError}\nuseEntryStepPreviewButtonEnabled{triggerAnalyticsPreviewEnabled}\nusePerfMark{{ start: markStartLoadPreviewPerf }}\nusePerfMarkOnMount{}\nuseCallback{handleEntrySelectorError}\nuseOnMount{}\nuseQuote{{\n    isLoading: isQuoteLoading,\n    fromCryptoAmount,\n    toCryptoAmount,\n  }}\nuseConvertGenerateTransactions{{ generateTransactions, generateTransactionsError, isGenerateTransactionsLoading }}\nuseMemo{generateTransactionsErrorValue}\nuseCallback{handlePreviewClick}\nuseAddTrackedExchangeRate{addTrackedRate}\nuseEffect{}\nuseEntryStepViewed{}\nuseMemo{row1Props}\nuseMemo{row2Props}\nuseMemo{isTradeButtonDisabled}\nuseEffect{}\nuseMemo{isDepositGasButtonVisible}\nuseCallback{handleGoBack}\nuseCallback{onNetworkSelectionSubheaderPress}\nuseCallback{handleDepositGasPress}\nuseEffect{}\nuseCallback{handleAmountChange}\nuseMemo{hasPriceEstimate}",(function(){return[h.n,y.T,s.k6,d.t,o.Z,_.Z,T.$,C.l,A.F,P,K.Q,X.a,Y,w.L,k.tM,k.iJ,k.nD,k.hu,k.h4,k.lf,k.F_,p.G,f.V,L.F,B,v.g,E.iR,k.Bu]})),(oe="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(oe.register(ce,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStep.tsx"),oe.register(le,"EntryStep","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStep.tsx")),(se="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&se(e)},21218:(e,t,r)=>{r.d(t,{T:()=>v});var n,a,o,s=r(83112),i=r(11374),c=r(84948),l=r(56044),u=r(23214),d=r(11071),p=r(60723),f=r(48972),m=r(52659),g=r(52322);function v(){var e=(0,s.Z)().formatMessage;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(f.VStack,{height:d.UV,justifyContent:"space-between",children:[(0,g.jsx)(c.Z,{}),(0,g.jsxs)(f.VStack,{alignContent:"center",spacingHorizontal:3,children:[(0,g.jsx)(i.O,{}),(0,g.jsx)(f.Spacer,{})]}),(0,g.jsxs)(f.VStack,{spacing:3,children:[(0,g.jsx)(u.m,{}),(0,g.jsx)(p.Button,{block:!0,disabled:!0,children:e(m.s.nextCTALabel)})]})]}),(0,g.jsx)(l.W,{})]})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(v,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(v,"EntryStepFallback","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStepFallback.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},11547:(e,t,r)=>{r.d(t,{Q:()=>h});var n=r(2784),a=r(63470),o=r(83112),s=r(34291),i=r.n(s),c=r(61641),l=r(58511);function u(e){const{convertibleAssets:t}=(0,l.EP)();if(e)return t.get(e.swapId)??t.values().next().value}var d,p=r(52322);e=r.hmd(e),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var f,m,g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=(0,a.vU)({from:{id:"bHEvFB",defaultMessage:[{type:0,value:"From"}]},chooseCoin:{id:"NZ/xyu",defaultMessage:[{type:0,value:"Choose coin"}]}}),h=function(e){var t=(0,o.Z)().formatMessage,r=u(e),a=(0,n.useMemo)((function(){return(0,p.jsx)(c.Link,{variant:"label1",onClick:i(),testID:"default-from-selector",children:t(v.chooseCoin)})}),[t]);return(0,n.useMemo)((function(){var e;return{secondaryLabel:null!==(e=null==r?void 0:r.currencyCode.code)&&void 0!==e?e:a,primaryLabel:t(v.from),image:null==r?void 0:r.imageURL,onPress:i(),dataElementHandle:"convert-from-selector",swapAsset:r}}),[t,r,a])};g(h,"useIntl{{ formatMessage }}\nuseSourceAsset{sourceAsset}\nuseMemo{ChooseCoinLink}\nuseMemo{}",(function(){return[o.Z,u]})),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(v,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useSourceSelector.tsx"),f.register(h,"useSourceSelector","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useSourceSelector.tsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},98483:(e,t,r)=>{r.d(t,{a:()=>w});var n=r(2784),a=r(63470),o=r(83112),s=r(34291),i=r.n(s),c=r(61641),l=r(58511),u=r(82955),d=r(95898);function p(){const{targetAssetId:e}=(0,d.Z)(u.cr),{convertibleAssets:t}=(0,l.EP)();return t.get(e.value)}var f,m=r(52322);e=r.hmd(e),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var g,v,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=(0,a.vU)({to:{id:"tMX/lG",defaultMessage:[{type:0,value:"To"}]},chooseCoin:{id:"nXtafB",defaultMessage:[{type:0,value:"Choose coin"}]}}),w=function(){var e=(0,o.Z)().formatMessage,t=p(),r=(0,n.useMemo)((function(){return(0,m.jsx)(c.Link,{variant:"label1",onClick:i(),children:e(y.chooseCoin)})}),[e]);return(0,n.useMemo)((function(){var n;return{secondaryLabel:null!==(n=null==t?void 0:t.currencyCode.code)&&void 0!==n?n:r,primaryLabel:e(y.to),image:null==t?void 0:t.imageURL,onPress:i(),dataElementHandle:"convert-to-selector",swapAsset:t}}),[t,r,e])};h(w,"useIntl{{ formatMessage }}\nuseTargetAsset{targetAsset}\nuseMemo{ChooseCoinLink}\nuseMemo{}",(function(){return[o.Z,p]})),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(y,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useTargetSelector.tsx"),g.register(w,"useTargetSelector","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useTargetSelector.tsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},61914:(e,t,r)=>{r.d(t,{I:()=>A});var n,a=r(2784),o=r(63470),s=r(83112),i=r(62783),c=r(82955),l=r(80081),u=r(99320),d=r(11071),p=r(91964),f=r(56695),m=r(95898),g=r(70986),v=r(29904),h=r(61641),y=r(89937),w=r(52322);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var x,k,T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=(0,o.vU)({bestPriceLabel:{id:"W9jR3K",defaultMessage:[{type:0,value:"Finding the best price..."}]},numSourcesLabel:{id:"14sEZn",defaultMessage:[{type:1,value:"numSourcesChecked"},{type:0,value:" of "},{type:1,value:"numSources"}]}});function A(e){var t,r=e.wallet,n=(0,s.Z)().formatMessage,o=(0,i.t)(c.Ex).goToStep,S=(0,u.n)(),x=null===(t=r.network.asChain())||void 0===t?void 0:t.chainId,k=(0,p.f)(x),T=b((0,a.useState)(0),2),A=T[0],L=T[1],E=(0,a.useMemo)((function(){return(new Date).getTime()}),[]),I=(0,m.Z)(c.cr).formGenerateTransactionsError,M=(0,a.useMemo)((function(){return k?Number(k):20}),[k]),P=A/M,G=(0,a.useCallback)((function(e){I.onChange(e)}),[I]),j=(0,a.useCallback)((function(){L(M)}),[M]),F=(0,l.g)(r,{onGenerateTransactionsError:G,context:l.N.Swap,animationStartTime:E,handleSuccess:j}).generateTransactions;return(0,f.F)((function(){F()})),(0,a.useEffect)((function(){I.value&&(S({key:"stepperPosition",value:"entry"}),o("entry"))}),[I.value,o,S]),(0,a.useEffect)((function(){var e=setTimeout((function(){L(Math.floor(.6*M))}),500);return function(){return clearTimeout(e)}}),[M]),(0,w.jsx)(v.VStack,{height:d.UV,children:(0,w.jsxs)(v.VStack,{alignItems:"center",justifyContent:"center",width:"100%",flexGrow:1,children:[(0,w.jsx)(g.SpotRectangle,{name:"transferCoins",scaleMultiplier:.8}),k?(0,w.jsx)(h.TextLabel2,{as:"p",spacingTop:3,children:n(C.numSourcesLabel,{numSourcesChecked:A,numSources:k})}):null,(0,w.jsx)(h.TextLabel2,{as:"p",spacingBottom:3,spacingTop:k?0:3,children:n(C.bestPriceLabel)}),(0,w.jsx)(v.VStack,{width:"180",children:(0,w.jsx)(y.ProgressBar,{progress:P,color:"primary"})})]})})}T(A,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep }}\nusePersistTradeContext{persistTradeContext}\nuseNumSourcesByChain{numSourcesByChain}\nuseState{[numSourcesChecked, setNumSourcesChecked](0)}\nuseMemo{animationStartTime}\nuseFields{{ formGenerateTransactionsError }}\nuseMemo{totalNumSources}\nuseCallback{handleGenerateTransactionsError}\nuseCallback{handleGenerateTransactionsSuccess}\nuseConvertGenerateTransactions{{ generateTransactions }}\nuseOnMount{}\nuseEffect{}\nuseEffect{}",(function(){return[s.Z,i.t,u.n,p.f,m.Z,l.g,f.F]})),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(C,"messages","/workspaces/apps/extension/src/screens/Trade/steps/FindingBestPriceStep/FindingBestPriceStep.tsx"),x.register(500,"delayBeforeProgressIncrease","/workspaces/apps/extension/src/screens/Trade/steps/FindingBestPriceStep/FindingBestPriceStep.tsx"),x.register(A,"FindingBestPriceStep","/workspaces/apps/extension/src/screens/Trade/steps/FindingBestPriceStep/FindingBestPriceStep.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},32260:(e,t,r)=>{r.d(t,{F:()=>M});var n=r(2784),a=r(63470),o=r(83112),s=r(4517),i=r(79958),c=r(36526),l=r(62783),u=r(82955),d=r(59554),p=r(39542),f=r(56695),m=r(88581),g=r(30830),v=r(95898);function h(){const e=(0,s.k6)(),[t,r]=(0,n.useState)(null),{goBack:a,goToStep:o}=(0,l.t)(u.Ex),i=(0,m.u)(),{unsignedSwapTxResult:{value:c},unsignedApproveTxResult:{value:f}}=(0,v.Z)(u.cr),h=f?.transaction,y=c?.transaction,w=(0,d.L)(),b=(0,p.Vm)({chainDetails:w}),S=(0,p.t0)({chainDetails:w}),x=(0,p.CJ)({chainDetails:w}),k=(0,g.D)(y),T=(0,n.useCallback)((()=>{b(),o("status"),r(null)}),[o,b]),C=(0,n.useCallback)((t=>{"UserRejectedWalletLinkRequest"===t.name?S():x(),r({errorMessage:t.message,onPrimaryButtonPress:()=>{r(null),a()},onSecondaryButtonPress:()=>e.replace("/portfolio"),secondaryButtonText:"Go Back Home",primaryButtonText:"Try Again"})}),[a,e,S,x]),A=(0,n.useCallback)((async()=>{if(!k||!y)return null;if(h)try{await i({unsignedTx:h,wallet:k})}catch(e){C(e)}try{await i({unsignedTx:y,wallet:k}),T()}catch(e){C(e)}}),[C,T,i,h,y,k]);return(0,n.useMemo)((()=>({signAndSubmitViaWalletlink:A,errorStateProps:t})),[t,A])}var y,w=r(52322);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){k=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=S(s,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function p(){}function f(){}var m={};i(m,a,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(A([])));v&&v!==t&&r.call(v,a)&&(m=v);var h=f.prototype=d.prototype=Object.create(m);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,s,i){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==b(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,i(h,"constructor",f),i(f,"constructor",p),p.displayName=i(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},y(w.prototype),i(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new w(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(h),i(h,s,"Generator"),i(h,a,(function(){return this})),i(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function T(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){T(o,n,a,s,i,"next",e)}function i(e){T(o,n,a,s,i,"throw",e)}s(void 0)}))}}e=r.hmd(e),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&y(e);var A,L,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},I=(0,a.vU)({title:{id:"VwWGjG",defaultMessage:[{type:0,value:"Confirm on phone"}]},description:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},retry:{id:"jvhzSF",defaultMessage:[{type:0,value:"Resend notification"}]},dontSeeNotification:{id:"epKk4O",defaultMessage:[{type:0,value:"Don't see the notification?"}]}});function M(){var e=(0,s.k6)(),t=(0,o.Z)().formatMessage,r=(0,l.t)(u.Ex),a=r.goBack,m=r.hasPreviousStep,g=(0,d.L)(),v=(0,p.D$)({chainDetails:g}),y=(0,p.xQ)({chainDetails:g}),b=(0,n.useRef)(!1);(0,p.a7)({chainDetails:g});var T=(0,n.useCallback)((function(){v(),m?a():e.goBack()}),[v,m,a,e]),A=h(),L=A.signAndSubmitViaWalletlink,E=A.errorStateProps,M=(0,n.useCallback)(C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(),e.next=3,L();case 3:case"end":return e.stop()}}),e)}))),[L,y]);(0,f.F)((function(){E||L()}));var P=(0,n.useMemo)((function(){return{label:t(I.retry),onClick:(e=C(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.current=!0,e.next=3,M();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e}),[t,M]);return E&&!b.current?(0,w.jsx)(i.ErrorState,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},E)):(0,w.jsx)(c.n,{title:t(I.title),description:t(I.description),onDismiss:T,secondaryActionLabel:t(I.dontSeeNotification),retryAction:P})}E(M,"useHistory{history}\nuseIntl{{ formatMessage }}\nuseStepper{{ goBack, hasPreviousStep }}\nuseChainDetails{chainDetails}\nusePhoneConfirmationStepBackButton{triggerAnalyticsBackButton}\nusePhoneConfirmationStepRetry{triggerAnalyticsRetry}\nuseRef{isUserCancelled}\nusePhoneConfirmationStepViewed{}\nuseCallback{onDismiss}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, errorStateProps }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}",(function(){return[s.k6,o.Z,l.t,d.L,p.D$,p.xQ,p.a7,h,f.F]})),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(A.register(I,"messages","/workspaces/apps/extension/src/screens/Trade/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx"),A.register(M,"PhoneConfirmationStep","/workspaces/apps/extension/src/screens/Trade/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},23997:(e,t,r)=>{r.d(t,{E:()=>j});var n,a=r(2784),o=r(63470),s=r(83112),i=r(20672),c=r(41916),l=r(17726),u=r(20230),d=r(77722),p=r(62783),f=r(94697),m=r(58511),g=r(82955),v=r(99320),h=r(59554),y=r(11071),w=r(39542),b=r(48517),S=r(83747),x=r(54073),k=r.n(x),T=r(95898),C=r(48972),A=r(52322);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var I,M,P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},G=(0,o.vU)({title:{id:"L5dgpZ",defaultMessage:[{type:0,value:"Swap to"}]}});function j(e){var t=e.selectedWallet,r=(0,v.n)(),n=(0,m.EP)().convertibleAssets,o=(0,p.t)(g.Ex),x=o.goBack,E=o.goToStep,I=(0,s.Z)().formatMessage,M=(0,T.Z)(g.cr),P=M.targetAssetId,j=M.selectedNetwork,F=M.formGenerateTransactionsError,O=L((0,a.useState)(""),2),D=O[0],N=O[1],H=L((0,a.useState)(""),2),B=H[0],R=H[1],V=(0,b.l)(),_=(0,h.L)(),U=(0,w.hz)({chainDetails:_}),Z=(0,w.ub)({chainDetails:_}),W=(0,a.useCallback)(k()((function(e){return R(e)}),300),[]),q=(0,a.useCallback)((function(e){N(e.target.value),W(e.target.value)}),[W]),Q=(0,S.C)(n),z=(0,f.f)({assets:n,query:B}),Y=(0,a.useCallback)((function(e){return function(){e.swappable?U({selectedAssetId:e.swapId}):Z({selectedAssetId:e.swapId}),r({key:"targetAssetId",value:e.swapId}),P.onChange(e.swapId),Q(e),V&&F.onChange(void 0),E("entry")}}),[F,E,Q,r,P,U,Z,V]),$=(0,a.useCallback)((function(e){var r=e.key,n=e.index,a=e.style;return(0,A.jsx)("div",{style:a,children:(0,A.jsx)(c.p,{onSelect:Y(z[n]),asset:z[n],disabled:(null==t?void 0:t.swapId)===z[n].swapId||!z[n].swappable,testID:"dex-to-asset-item-".concat(z[n].network.rawValue,"-").concat(z[n].currencyCode.rawValue)})},r)}),[z,Y,null==t?void 0:t.swapId]);return(0,A.jsxs)(C.VStack,{height:y.UV,children:[(0,A.jsx)(l.w,{onBack:x,title:I(G.title)}),(0,A.jsx)(u.Q,{network:j.value,disableNetworkChange:!0}),(0,A.jsx)(C.Spacer,{vertical:2}),(0,A.jsx)(d.G,{query:D,onChange:q}),(0,A.jsx)(i.aV,{rowCount:z.length,width:370,height:425,rowHeight:80,rowRenderer:$,overscanRowCount:20})]})}P(j,"usePersistTradeContext{persistTradeContext}\nuseConvertContext{{ convertibleAssets }}\nuseStepper{{ goBack, goToStep }}\nuseIntl{{ formatMessage }}\nuseFields{{ targetAssetId, selectedNetwork, formGenerateTransactionsError }}\nuseState{[searchBarText, setSearchBarText]('')}\nuseState{[debouncedQuery, setDebouncedQuery]('')}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseChainDetails{chainDetails}\nuseTradeSelectAsset{triggerAnalyticsSelectAsset}\nuseTradeSelectUnsupportedAsset{triggerAnalyticsSelectUnsupportedAsset}\nuseCallback{debounceQuery}\nuseCallback{handleSearchChange}\nusePersistAssetSelection{persistSelection}\nuseAssetSearch{filteredAssets}\nuseCallback{getHandleSelect}\nuseCallback{rowRenderer}",(function(){return[v.n,m.EP,p.t,s.Z,T.Z,b.l,h.L,w.hz,w.ub,S.C,f.f]})),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(G,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectAssetStep/SelectAssetStep.tsx"),I.register(j,"SelectAssetStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectAssetStep/SelectAssetStep.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},56335:(e,t,r)=>{r.d(t,{M:()=>O});var n,a=r(2784),o=r(63470),s=r(83112),i=r(20672),c=r(17726),l=r(221),u=r(62783),d=r(58511),p=r(82955),f=r(99320),m=r(59554),g=r(62197),v=r.n(g),h=r(39542),y=r(48517),w=r(51950),b=r(86855),S=r(46767),x=r(40620),k=r(52180),T=r(95898),C=r(48972),A=r(61641),L=r(52322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var E,I,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=(0,o.vU)({title:{id:"yGY9eN",defaultMessage:[{type:0,value:"Select network"}]},learnMoreMessage:{id:"zClqkq",defaultMessage:[{type:0,value:"Not sure? Learn the difference between Ethereum, Polygon, and other networks in our help center."}]},learnMore:{id:"o0ymWu",defaultMessage:[{type:0,value:"Learn more"}]}}),G="https://www.coinbase.com/wallet/getting-started-extension";function j(){var e=(0,s.Z)().formatMessage,t=(0,m.L)(),r=(0,h.wg)({chainDetails:t}),n=(0,a.useCallback)((function(){r(),chrome.tabs.create({url:G,active:!1})}),[r]);return(0,L.jsx)(C.VStack,{borderedTop:!0,children:(0,L.jsxs)(A.TextLabel2,{as:"span",spacing:2,children:[e(P.learnMoreMessage)," ",(0,L.jsx)(A.Link,{testID:"trade-select-network-learn-more",to:G,onPress:n,children:e(P.learnMore)})]})})}function F(){var e=(0,f.n)(),t=(0,s.Z)().formatMessage,r=(0,x.r)(),n=(0,d.EP)().supportedChains,o=(0,T.Z)(p.cr),g=o.selectedNetwork,A=o.targetAssetId,E=o.cryptoAmount,I=o.formGenerateTransactionsError,M=(0,w.z)(r),G=(0,y.l)(),F=(0,m.L)(),O=(0,h.fy)({chainDetails:F}),D=(0,h.ts)({chainDetails:F}),N=(0,h.D6)({chainDetails:F}),H=(0,u.t)(p.Ex).goBack,B=(0,a.useRef)(null),R=(0,a.useCallback)((function(){O(),H()}),[H,O]),V=(0,a.useCallback)((function(t){var r=g.value.asChain(),n=null==t?void 0:t.asChain(),a={previousChainId:null==r?void 0:r.chainId,nextChainId:null==n?void 0:n.chainId};t?(e({key:"selectedNetwork",value:t.rawValue.split("/")[0],clearPreviousContext:!0}),D(a),g.onChange(t),A.onChange(""),E.onChange(new(v())(0)),G&&I.onChange(void 0),H()):N(a)}),[g,e,D,A,E,G,H,N,I]),_=(0,a.useCallback)((function(e){var t,r,a=e.key,o=e.index,s=e.style,i=null!==(t=n[o])&&void 0!==t?t:void 0;if(i){var c=b.Zc.fromSupportedChain(i),u=null!==(r=M.get(c.rawValue))&&void 0!==r?r:new k.Decimal(0),d=S.i.fromSupportedChainWithBalance(i,u);return(0,L.jsx)("div",{style:s,children:(0,L.jsx)(l.h,{network:d,selected:b.Zc.isEqual(g.value,c),onPress:V,disabled:null==d?void 0:d.balance.equals(new k.Decimal(0))})},a)}}),[M,V,g.value,n]);return(0,L.jsxs)(C.VStack,{justifyContent:"space-between",height:"100%",children:[(0,L.jsx)(c.w,{onBack:R,title:t(P.title)}),(0,L.jsx)(C.VStack,{ref:B,spacingHorizontal:1,height:"100%",children:(0,L.jsx)(i._K,{scrollElement:B.current,children:function(e){var t=e.height,r=e.scrollTop;return(0,L.jsx)(i.qj,{disableHeight:!0,defaultHeight:t,children:function(e){var t=e.width,a=e.height;return(0,L.jsx)(i.aV,{autoHeight:!0,height:a||300,width:t||345,scrollTop:r,rowHeight:60,rowRenderer:_,rowCount:n.length,overscanRowCount:5})}})}})}),(0,L.jsx)(j,{})]})}function O(){return(0,L.jsx)(a.Suspense,{fallback:null,children:(0,L.jsx)(F,{})})}M(j,"useIntl{{ formatMessage }}\nuseChainDetails{chainDetails}\nuseNetworkSwitcherLearnMore{triggerAnalyticsLearnMore}\nuseCallback{onLearnMorePress}",(function(){return[s.Z,m.L,h.wg]})),M(F,"usePersistTradeContext{persistTradeContext}\nuseIntl{{ formatMessage }}\nuseWallets{wallets}\nuseConvertContext{{ supportedChains }}\nuseFields{{ selectedNetwork, targetAssetId, cryptoAmount, formGenerateTransactionsError }}\nuseNetworkBalances{networkBalanceMap}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseChainDetails{chainDetails}\nuseNetworkSwitcherClose{triggetAnalyticsClose}\nuseNetworkSwitcherToggleNetwork{triggerAnalyticsToggle}\nuseNetworkSwitcherToggleNetworkError{triggerAnalyticsToggleError}\nuseStepper{{ goBack }}\nuseRef{container}\nuseCallback{onGoBack}\nuseCallback{onItemSelected}\nuseCallback{renderRow}",(function(){return[f.n,s.Z,x.r,d.EP,T.Z,w.z,y.l,m.L,h.fy,h.ts,h.D6,u.t]})),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(60,"LIST_ITEM_SIZE","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),E.register(P,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),E.register(G,"LEARN_MORE_LINK","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),E.register(j,"LearnMoreSection","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),E.register(F,"SelectNetworkStepContent","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),E.register(O,"SelectNetworkStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},71105:(e,t,r)=>{r.d(t,{o:()=>k});var n,a=r(2784),o=r(63470),s=r(83112),i=r(59956),c=r(62783),l=r(58511),u=r(82955),d=r(22731),p=r(99320),f=r(59554),m=r(39542),g=r(48517),v=r(83747),h=r(95898),y=r(52322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var w,b,S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},x=(0,o.vU)({title:{id:"KfNndp",defaultMessage:[{type:0,value:"Swap from"}]}});function k(){var e=(0,p.n)(),t=(0,s.Z)().formatMessage,r=(0,l.EP)().convertibleAssets,n=(0,c.t)(u.Ex),o=n.goBack,w=n.goToStep,b=(0,h.Z)(u.cr),S=b.sourceWalletId,k=b.targetAssetId,T=b.cryptoAmount,C=b.selectedNetwork,A=b.formGenerateTransactionsError,L=(0,d.Y)({network:C.value}),E=(0,g.l)(),I=(0,f.L)(),M=(0,m.kV)({chainDetails:I}),P=(0,v.C)(r),G=(0,a.useCallback)((function(t){M({selectedWallet:t.id}),S.onChange(t.id),e({key:"sourceWalletId",value:t.id}),e({key:"cryptoAmount",value:Number(T.value)}),P(t),E&&A.onChange(void 0),w("entry")}),[M,S,e,T,P,E,w,A]);return(0,y.jsx)(i.i,{testIdPrefix:"dex-from",showNetworkSelection:!0,wallets:L,onBack:o,onSelect:G,network:C.value,customNavTitle:t(x.title),targetAssetId:k.value,context:i.g.Swap})}S(k,"usePersistTradeContext{persistTradeContext}\nuseIntl{{ formatMessage }}\nuseConvertContext{{ convertibleAssets }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{\n    sourceWalletId,\n    targetAssetId,\n    cryptoAmount,\n    selectedNetwork,\n    formGenerateTransactionsError,\n  }}\nuseConvertiblePortfolioWallets{wallets}\nuseIsBestQuoteAnimationEnabled{isBestQuoteAnimationEnabled}\nuseChainDetails{chainDetails}\nuseTradeSelectWallet{triggerAnalyticsSelectWallet}\nusePersistAssetSelection{persistSelection}\nuseCallback{handleSelect}",(function(){return[p.n,s.Z,l.EP,c.t,h.Z,d.Y,g.l,f.L,m.kV,v.C]})),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(x,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectSourceStep/SelectSourceStep.tsx"),w.register(k,"SelectSourceStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectSourceStep/SelectSourceStep.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},64749:(e,t,r)=>{r.d(t,{_:()=>M});var n,a=r(2784),o=r(63470),s=r(83112),i=r(4517),c=r(48925),l=r(85324),u=r(88869),d=r(62783),p=r(3995),f=r(47022),m=r(6271),g=r(82955),v=r(59554),h=r(52844),y=r(39542),w=r(60933),b=r(56695),S=r(95898),x=r(52322);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var A,L,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},I=(0,o.vU)({title:{id:"mjtgmK",defaultMessage:[{type:0,value:"You're swapping "},{type:1,value:"formattedTitleAmounts"},{type:0,value:" to"}]},done:{id:"r5qei9",defaultMessage:[{type:0,value:"Done"}]},viewTransactions:{id:"7gEbQd",defaultMessage:[{type:0,value:"View transactions"}]}});function M(){var e=(0,s.Z)().formatMessage,t=(0,p.O)(),r=(0,S.Z)(g.cr),n=r.cryptoAmount,o=r.targetAssetId,k=r.sourceWalletId,C=r.ledgerSwapError,A=r.swapTradeResponse.value,L=(0,v.L)(),E=(0,y._E)({chainDetails:L}),M=(0,d.t)(g.Ex).goBack,P=(0,i.k6)(),G=(0,u.O)(),j=(0,f.G)("Swap","trigger_swap",{logMetric:!0}).end;if((0,a.useEffect)((function(){!C.value&&A&&j()}),[C,j,A]),!A)throw new Error("swapTradeResponse was missing in StatusStep");var F=(0,w.H)(A),O=F.sourceFiatAmount,D=F.sourceCryptoAmount,N=F.targetFiatAmount,H=F.targetCryptoAmount;(0,b.F)((function(){return E({cryptoAmount:Number(n.value),sourceWalletId:k.value,targetAssetId:o.value,sourceFiatAmount:O,sourceCryptoAmount:D,targetFiatAmount:N,targetCryptoAmount:H}),t&&(0,y.bJ)(),function(){C.value&&(null==C||C.onChange(void 0))}}));var B=(0,a.useCallback)((function(){G("makeDEXTrade"),P.replace("/portfolio")}),[P,G]),R=(0,a.useCallback)((function(){G("makeDEXTrade"),P.replace("/transactions")}),[P,G]),V=(0,a.useMemo)((function(){return{key:"done-button",name:"doneButton",onPress:B,loading:!1,variant:"primary",block:!0,children:e(I.done)}}),[e,B]),_=(0,a.useMemo)((function(){return{key:"view-transactions-button",name:"viewTransactionsButton",onPress:R,loading:!1,testID:"status-view-transactions-button",variant:"secondary",block:!0,children:e(I.viewTransactions)}}),[e,R]),U=(0,a.useMemo)((function(){var e=O?"(".concat(O,")"):"";return"".concat(D," ").concat(e)}),[D,O]),Z=(0,a.useMemo)((function(){var e=N?"(".concat(N,")"):"";return"".concat(H," ").concat(e)}),[H,N]);if(C.value){var W,q,Q,z=C.value;return(0,x.jsx)(c.n,T(T({spacing:2,elevation:1},h.ng),{},{children:(0,x.jsx)(m.N,{handleBack:M,statusCode:null!==(W=z.statusCode)&&void 0!==W?W:void 0,errorId:null!==(q=z.id)&&void 0!==q?q:void 0,errorMessage:null!==(Q=z.message)&&void 0!==Q?Q:void 0})}))}return(0,x.jsx)(l.L,{status:l.q.SUCCESS,title:e(I.title,{formattedTitleAmounts:U}),subtitle:Z,primaryButtonProps:V,secondaryButtonProps:_})}E(M,"useIntl{{ formatMessage }}\nuseIsPreserveDEXEnabled{isPreserveStateEnabled}\nuseFields{{\n    cryptoAmount,\n    targetAssetId,\n    sourceWalletId,\n    ledgerSwapError,\n    swapTradeResponse: { value: swapTradeResponse },\n  }}\nuseChainDetails{chainDetails}\nuseStatusStepViewed{triggerAnalyticsStatusViewed}\nuseStepper{{ goBack: goBackOneStep }}\nuseHistory{history}\nuseLaunchSprig{launchSprig}\nusePerfMark{{ end: markEndSwapwPerf }}\nuseEffect{}\nuseFormatTradeAmounts{{ sourceFiatAmount, sourceCryptoAmount, targetFiatAmount, targetCryptoAmount }}\nuseOnMount{}\nuseCallback{goToPortfolio}\nuseCallback{goToTransactions}\nuseMemo{primaryButtonProps: ButtonProps}\nuseMemo{secondaryButtonProps: ButtonProps}\nuseMemo{formattedTitleAmounts}\nuseMemo{descriptionFormatted}",(function(){return[s.Z,p.O,S.Z,v.L,y._E,d.t,i.k6,u.O,f.G,w.H,b.F]})),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(A.register(I,"messages","/workspaces/apps/extension/src/screens/Trade/steps/StatusStep/StatusStep.tsx"),A.register(M,"StatusStep","/workspaces/apps/extension/src/screens/Trade/steps/StatusStep/StatusStep.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},55414:(e,t,r)=>{r.d(t,{Y:()=>k});var n,a=r(2784),o=r(63470),s=r(83112),i=r(4517),c=r(17726),l=r(62783),u=r(82955),d=r(11071),p=r(60723),f=r(70986),m=r(29904),g=r(61641),v=r(52322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var h,y,w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=(0,o.vU)({title:{id:"vw3qM7",defaultMessage:[{type:0,value:"Get the best price on swaps"}]},label:{id:"0mbUyO",defaultMessage:[{type:0,value:"We check multiple sources to save you time and get you the lowest price."}]},buttonText:{id:"+7dmqo",defaultMessage:[{type:0,value:"Continue"}]}}),S="hasViewedSwapNUX",x="true";function k(){var e=(0,s.Z)().formatMessage,t=(0,i.k6)().goBack,r=(0,l.t)(u.Ex).goToStep,n=(0,a.useCallback)((function(){localStorage.setItem(S,x)}),[]),o=(0,a.useCallback)((function(){n(),r("entry")}),[r,n]),h=(0,a.useCallback)((function(){n(),t()}),[t,n]);return(0,v.jsxs)(m.VStack,{height:d.UV,justifyContent:"space-between",children:[(0,v.jsx)(c.w,{onBack:h}),(0,v.jsxs)(m.VStack,{alignItems:"center",spacingHorizontal:3,children:[(0,v.jsx)(f.SpotRectangle,{name:"transferCoins"}),(0,v.jsx)(g.TextTitle3,{as:"h1",spacingTop:3,spacingBottom:1,children:e(b.title)}),(0,v.jsx)(g.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:e(b.label)})]}),(0,v.jsx)(m.VStack,{spacing:3,children:(0,v.jsx)(p.Button,{block:!0,onPress:o,testID:"swap-nux-continue-button",children:e(b.buttonText)})})]})}w(k,"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseCallback{updateLocalStorage}\nuseCallback{handlePress}\nuseCallback{handleGoBack}",(function(){return[s.Z,i.k6,l.t]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(b,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),h.register(S,"localStorageKey","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),h.register(x,"localStorageValue","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),h.register(k,"SwapNux","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},91964:(e,t,r)=>{r.d(t,{f:()=>l});var n,a=r(2784);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var o,s,i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},c={1:"28",137:"21",56:"23",43114:"11"};function l(e){return(0,a.useMemo)((function(){return e?c[Number(e)]:""}),[e])}i(l,"useMemo{}"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(o.register(c,"SOURCES_BY_CHAIN_ID","/workspaces/libs/data/hooks/Swap/useNumSourcesByChain.tsx"),o.register(l,"useNumSourcesByChain","/workspaces/libs/data/hooks/Swap/useNumSourcesByChain.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},27494:(e,t,r)=>{r.d(t,{w:()=>E});var n,a=r(2784),o=r(63470),s=r(62197),i=r.n(s),c=r(45992),l=r(6915),u=r(59301),d=r(53610),p=r(6087),f=r(1620),m=r(78857),g=r(87203),v=r(39668),h=r(24801),y=r(86855),w=r(43819),b=r(40620),S=r(99059),x=r(91100),k=r(95545);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var T,C,A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},L=(0,o.vU)({highPriceImpactTitle:{id:"8Mrpml",defaultMessage:[{type:0,value:"High price impact"}]},highPriceImpactMessage:{id:"sRrvwd",defaultMessage:[{type:0,value:"Price is significantly worse than the market rate. Try a smaller amount."}]},notEnoughBalanceForMinerFeeMessage:{id:"IZUdH3",defaultMessage:[{type:0,value:"You have "},{type:1,value:"fiatTotalAvailableBalance"},{type:0,value:" in "},{type:1,value:"cryptoSymbol"},{type:0,value:", but you need a total of "},{type:1,value:"fiatTotalTransactionValue"},{type:0,value:" to proceed."}]},highNetworkFeesMessage:{id:"fYS2GP",defaultMessage:[{type:0,value:"Network fees are high right now. Not paid to Coinbase."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]}});function E(e){var t=e.swapTrade,r=e.unsignedApproveTx,n=e.unsignedSwapTx,o=e.intlFormatters.formatMessage,s=(0,f.$)(),T=(0,g.l)({unsignedTx:n,unsignedApproveTx:r}),C=(0,m.aB)({unsignedEthTx:n,unsignedApproveTx:r}),A=C.networkMaxFee,E=C.networkEstimatedFee,I=(0,a.useRef)(!1),M=(0,w.n)(),P=(0,a.useMemo)((function(){return M.length<5}),[M.length]),G=(0,b.r)().find((function(e){return h.N.isEqual(e.currencyCode,n.feeCurrencyCode)&&v.$.isEqual(e.blockchain,n.blockchain)&&y.Zc.isEqual(e.network,n.network)})),j=(0,a.useMemo)((function(){var e,r,a;null!=G&&G.isSolanaNetwork()?e=t.quote.fromAsset.currencyCode.rawValue===d.yC?new(i())(null!==(r=t.tx.value)&&void 0!==r?r:0):new(i())(0):e=t.tx.from===(null==G?void 0:G.primaryAddress)?new(i())(null!==(a=t.tx.value)&&void 0!==a?a:0):new(i())(0);return(n instanceof u.L?E:A).add(e)}),[t.quote.fromAsset.currencyCode.rawValue,t.tx.from,t.tx.value,G,n,E,A]),F=(0,a.useMemo)((function(){return void 0!==(null==G?void 0:G.balance)&&G.balance.gte(j)}),[G,j]),O=(0,a.useMemo)((function(){return{highPriceImpact:{type:"highPriceImpact",title:o(L.highPriceImpactTitle),isDismissible:!1,showErrorIcon:!0,message:o(L.highPriceImpactMessage),analytics:{eventName:"trade.confirmation_preview_step.high_price_impact",eventProperties:{componentType:k.re.text,action:k.Us.render,loggingId:"b3692ee6-284c-45fd-806b-d56d74444642"}}},notEnoughBalanceForMinerFee:{type:"notEnoughBalanceForMinerFee",isDismissible:!1,showErrorIcon:!0,message:o(L.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:n.feeCurrencyCode.code,fiatTotalAvailableBalance:void 0!==(null==G?void 0:G.balance)&&null!=G&&G.currencyCode?s.formatToFiat(G.currencyCode,G.decimals,G.balance,!1,G.contractAddress,G.network,!0,!0):"",fiatTotalTransactionValue:G?s.formatToFiat(n.feeCurrencyCode,n.feeCurrencyDecimal,j,!1,void 0,G.network):""}),analytics:{eventName:"trade.confirmation_preview_step.not_enough_eth_balance",eventProperties:{componentType:k.re.text,action:k.Us.render,loggingId:"62afea2c-959b-47d4-b53d-957dc79fd101",totalEthereumRequired:Number(j)}}},highNetworkFees:{type:"highNetworkFees",isDismissible:!0,showErrorIcon:!1,message:o(L.highNetworkFeesMessage),learnMore:{label:o(L.learnMore),url:x.lI},analytics:{eventName:"trade.confirmation_preview_step.high_miner_fee",eventProperties:{componentType:k.re.text,action:k.Us.render,loggingId:"17ef6de0-759c-4b89-b0d5-56704f9779df",networkFee:Number(A)}}}}}),[o,n.feeCurrencyCode,n.feeCurrencyDecimal,G,s,j,A]);return(0,a.useMemo)((function(){var e=n.network.asChain(),r=new(i())(0),a=new(i())(0),o=new(i())(0);return n instanceof l.H?(r=n.maxFeePerGas.div(new(i())(Math.pow(10,9))),a=new(i())(n.gasLimit)):(n instanceof u.L&&(r=n.gasPrice.div(new(i())(Math.pow(10,9))),a=n.gasLimit),n instanceof p.D&&(o=n.estimatedFee)),F?t.quote.highPriceImpact?O.highPriceImpact:T.gt(S.NM)&&P?O.highNetworkFees:void 0:(I.current||(I.current=!0,(0,c.LS)({blockchain:n.blockchain.rawValue,chainName:e.displayName,chainId:e.chainId.toString(10),errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:"dex".toLocaleString(),gasPriceInGwei:r.toString(),gasLimit:a.toString(),solanaGasPrice:o.toString()})),O.notEnoughBalanceForMinerFee)}),[P,O.highNetworkFees,O.highPriceImpact,O.notEnoughBalanceForMinerFee,F,T,t.quote.highPriceImpact,n])}A(E,"useCurrencyFormatter{currencyFormatter}\nuseHighestMinerFee{highestMinerFee}\nuseCalculateNetworkFees{{ networkMaxFee, networkEstimatedFee }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseTransactions{transactions}\nuseMemo{canSeeHighNetworkFeeWarning}\nuseWallets{wallets}\nuseMemo{totalNativeTokenRequired}\nuseMemo{hasEnoughBalance}\nuseMemo{errors: ErrorMap}\nuseMemo{}",(function(){return[f.$,g.l,m.aB,w.n,b.r]})),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(L,"messages","/workspaces/libs/data/hooks/Swap/useTransactionDetailErrors/useTransactionDetailErrors.tsx"),T.register(E,"useTransactionDetailErrors","/workspaces/libs/data/hooks/Swap/useTransactionDetailErrors/useTransactionDetailErrors.tsx")),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)},41857:(e,t,r)=>{r.d(t,{D:()=>G});var n=r(2784),a=r(63470),o=r(62197),s=r.n(o),i=r(27242),c=r(59301),l=r(75561),u=r(1620),d=r(78857),p=r(86855),f=r(52087);function m({swapQuote:e,networkEstimateFee:t,networkBaseFee:r,networkMaxFee:a,unsignedSwapTx:o,extraFeeInFiat:s}){const i=(0,u.$)(),l=o instanceof c.L,d=(0,f.Gn)(e.chainId),m=p.Zc.fromChainId({chainPrefix:d,chainId:e.chainId}),g=(0,n.useCallback)(((e,t)=>{let r;return e&&t?(r=e.add(t),s&&(r=r.add(s)),r):null}),[s]);return(0,n.useMemo)((()=>{const n=i.fiatValue(e.fromAsset.currencyCode,e.fromAsset.decimals,e.fromAmount,e.fromAsset.address?.rawValue,m,2),c=i.fiatValue(o.feeCurrencyCode,o.feeCurrencyDecimal,r,void 0,m,2),u=i.fiatValue(o.feeCurrencyCode,o.feeCurrencyDecimal,t,void 0,m,2),d=i.fiatValue(o.feeCurrencyCode,o.feeCurrencyDecimal,a,void 0,m,2),p=g(n,c),f=g(n,d),v=g(n,u),h=function({isLegacyTransaction:e,networkEstimateFeeFiat:t,networkBaseFeeFiat:r,extraFeeInFiat:n}){const a=e?t:r;return n?a?.add(n):a}({isLegacyTransaction:l,networkEstimateFeeFiat:u,networkBaseFeeFiat:c,extraFeeInFiat:s});let y=d;return s&&(y=y?.add(s)),{totalAmountLowerBound:p,totalAmountUpperBound:f,totalAmountEstimated:v,totalEstimatedFees:h,totalMaxEstimatedFees:y}}),[i,s,g,l,m,r,t,a,e.fromAmount,e.fromAsset.address?.rawValue,e.fromAsset.currencyCode,e.fromAsset.decimals,o.feeCurrencyCode,o.feeCurrencyDecimal])}var g=r(56695),v=r(24801),h=r(38977),y=r(60417),w=r.n(y),b=r(66992),S=r(52180),x=r.n(S);const k="Could not calculate estimated fee range";function T({currencyCode:e,currencyDecimal:t,chainId:r,minAmount:a,maxAmount:o,estimatedAmount:i,isLegacyTransaction:c}){if(!r)throw new Error(`${k} - invalid chainId`);const l=(0,u.$)(),d=(0,b.g)().decimals.toNumber(),m=new(s())(r),g=(0,f.Gn)(m),v=p.Zc.fromChainId({chainPrefix:g,chainId:m}),h=10**-d,y=new(x())(h),w=l.fiatValue(e,t,o,void 0,v),S=l.formatToFiat(e,t,o,!1,void 0,v),T=l.cryptoValue(e,t,y,void 0,v),C=l.formatToFiat(e,t,a,!1,void 0,v,!0,!0),A=l.formatToFiat(e,t,i,!1,void 0,v,!0,!0);return(0,n.useMemo)((()=>{if(c){if(!A)throw new Error(k);return A}if(!w){const r=l.formatToCrypto({currencyCode:e,decimals:t,value:a,network:v,includeCode:!0}),n=l.formatToCrypto({currencyCode:e,decimals:t,value:o,network:v,includeCode:!0});if(!r||!n)throw new Error(k);return`${r} - ${n}`}if(w.toNumber()<h&&T){const r=T.mul(10**t.toNumber()),n=new(s())(r.toNumber()),a=l.formatToFiat(e,t,n,!1,void 0,v);if(!a)throw new Error("Could not calculate minimum fee");return`< ${a}`}if(!C||!S)throw new Error(k);return`${C} - ${S}`}),[e,t,l,A,S,C,c,o,a,T,h,v,w])}var C;e=r.hmd(e),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&C(e);var A,L,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},I=new(s())(l.c.whitelisted.SOLANA_MAINNET.baseAssetDecimal),M=new(s())(l.c.whitelisted.SOLANA_MAINNET.chainId),P=(0,a.vU)({walletUsedLabel:{id:"o99uP8",defaultMessage:[{type:0,value:"Wallet used"}]},slippageTolerenceLabel:{id:"YZ7Xo1",defaultMessage:[{type:0,value:"Slippage tolerance"}]},slippageTolerenceTooltip:{id:"gV/8l2",defaultMessage:[{type:0,value:"We convert crypto using a 3rd party decentralized exchange. Your trade will execute at a price within 3% of the trade, or it will be canceled and your funds will be returned."}]},networkFeeLabel:{id:"1TgfUs",defaultMessage:[{type:0,value:"Network fee"}]},networkFeeTooltip:{id:"MnkMuK",defaultMessage:[{type:0,value:"Applies to all transactions. Not paid to Coinbase."}]},networkAndApprovalFeeTooltip:{id:"pmYfiH",defaultMessage:[{type:0,value:"For approval & conversion. Applies to all transactions. Not paid to Coinbase."}]},transactionSpeedLabel:{id:"sSDDvu",defaultMessage:[{type:0,value:"Transaction speed"}]},totalCostLabel:{id:"j9RrnG",defaultMessage:[{type:0,value:"Total cost"}]},maxFeeLabel:{id:"zoMLPL",defaultMessage:[{type:0,value:"Max: "},{type:1,value:"maxFeeEstimate"}]},contractAddressLabel:{id:"55yK3k",defaultMessage:[{type:1,value:"currencyCode"},{type:0,value:" contract"}]},contractAddressTooltip:{id:"vXyOJS",defaultMessage:[{type:0,value:"This is the smart contract address for "},{type:1,value:"currencyCode"},{type:0,value:". Please open the contract in a block explorer and verify it is the correct asset."}]},priceImpactLabel:{id:"lKuhuw",defaultMessage:[{type:0,value:"Price impact"}]},priceImpactTooltip:{id:"w41VIe",defaultMessage:[{type:0,value:"The difference between your asset's market value and what you'll receive after this swap"}]},feesEstimateLabel:{id:"XmysE9",defaultMessage:[{type:0,value:"Fees (estimate)"}]},feesEstimateTooltip:{id:"XyC2a5",defaultMessage:[{type:0,value:"The network fee doesn\u2019t go to Coinbase and it may be less than our estimate."}]}});function G(e){var t,r,a=e.swapTrade,o=e.unsignedApproveTx,y=e.unsignedSwapTx,b=e.lastUpdateTime,S=e.rowItemsAnalytics,x=e.intlFormatters,k=e.isPageLoading,C=a.quote.toAsset,A=x.formatMessage,L=x.formatNumber,E=(0,u.$)(),G=(0,d.aB)({unsignedApproveTx:o,unsignedEthTx:y}),j=G.networkBaseFee,F=G.networkMaxFee,O=G.networkEstimatedFee,D=y instanceof c.L;(0,g.F)((function(){null==S||S({networkEstimatedFee:Number(O),networkMaxFee:Number(F),networkBaseFee:Number(j)})}));var N=L(.03,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),H=(0,n.useCallback)((function(e){var t=e.currencyCode,r=e.currencyDecimal,n=e.chainId,a=e.amount,o=e.error;if(!n)throw new Error("".concat(o," - invalid chainId"));var i=new(s())(n),c=(0,f.Gn)(i),l=E.formatToFiat(t,r,a,!1,void 0,p.Zc.fromChainId({chainPrefix:c,chainId:i}));if(l)return l;var u=E.formatToCrypto({currencyCode:t,decimals:r,value:a,network:p.Zc.fromChainId({chainPrefix:c,chainId:new(s())(n)}),includeCode:!0});if(!u)throw new Error(o);return u}),[E]),B=(0,n.useMemo)((function(){var e,t;return H(D?{currencyCode:y.feeCurrencyCode,currencyDecimal:y.feeCurrencyDecimal,chainId:null===(t=y.network.asChain())||void 0===t?void 0:t.chainId,amount:O,error:"Could not calculate estimated fee"}:{currencyCode:y.feeCurrencyCode,currencyDecimal:y.feeCurrencyDecimal,chainId:null===(e=y.network.asChain())||void 0===e?void 0:e.chainId,amount:j,error:"Could not calculate base fee"})}),[D,H,y.feeCurrencyCode,y.feeCurrencyDecimal,y.network,j,O]),R=T({currencyCode:y.feeCurrencyCode,currencyDecimal:y.feeCurrencyDecimal,chainId:null===(t=y.network.asChain())||void 0===t?void 0:t.chainId,minAmount:j,maxAmount:F,estimatedAmount:O,isLegacyTransaction:D}),V=H({currencyCode:y.feeCurrencyCode,currencyDecimal:y.feeCurrencyDecimal,chainId:null===(r=y.network.asChain())||void 0===r?void 0:r.chainId,amount:F,error:"Could not calculate max fee"}),_=(0,n.useMemo)((function(){var e;if(a.chainId.eq(M)){var t=null!==(e=a.fee.extraFee)&&void 0!==e?e:new(s())(0);return E.fiatValue(v.N.SOL,I,t,void 0,p.Zc.fromChainId({chainPrefix:(0,f.Gn)(a.chainId),chainId:a.chainId}))}}),[E,a.chainId,a.fee.extraFee]),U=(0,n.useMemo)((function(){var e,t=a.fee.extraFee;return t?H({currencyCode:v.N.SOL,amount:t,chainId:null===(e=y.network.asChain())||void 0===e?void 0:e.chainId,currencyDecimal:I,error:"Unable to calcualte extra fee"}):null}),[H,a.fee.extraFee,y.network]),Z=m({swapQuote:a.quote,networkEstimateFee:O,networkBaseFee:j,networkMaxFee:F,unsignedSwapTx:y,extraFeeInFiat:_}),W=Z.totalEstimatedFees,q=Z.totalMaxEstimatedFees,Q=(0,n.useMemo)((function(){var e,t,r=null===(e=(a instanceof h.T?i.m:l.c).fromChainId(C.chainId))||void 0===e?void 0:e.blockExplorerUrl;if(C.address)return{label:A(P.contractAddressLabel,{currencyCode:C.currencyCode.code}),detailText:{text:null===(t=C.address)||void 0===t?void 0:t.rawValue,blockExplorerUrl:"".concat(r,"/address/").concat(C.address.rawValue)},tooltipText:A(P.contractAddressTooltip,{currencyCode:C.currencyCode.code})}}),[A,a,C.address,C.chainId,C.currencyCode.code]),z=(0,n.useMemo)((function(){if(a.quote.highPriceImpact)return{label:A(P.priceImpactLabel),detailText:L((a.quote.priceImpact-1)/100,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),tooltipText:A(P.priceImpactTooltip)}}),[A,L,a.quote]),Y=(0,n.useMemo)((function(){var e=W?E.fiatValueString(W):B,t=q?E.fiatValueString(q):V,r="Max: ".concat(t);return{label:A(P.feesEstimateLabel),detailText:e,lastUpdateTime:b,isPageLoading:k,subDetailText:D?null:r,tooltipObject:{message:A(P.feesEstimateTooltip),minNetworkFee:B,maxNetworkFee:D?null:V,networkFeeRange:R,extraFee:U,rowType:"estimatedFees"}}}),[E,A,U,B,V,D,k,b,R,W,q]);return(0,n.useMemo)((function(){return w()([Q,{label:A(P.slippageTolerenceLabel),detailText:N,tooltipText:A(P.slippageTolerenceTooltip)},z,Y])}),[Q,A,N,z,Y])}function j(e){var t=e.formatMessage;return w()([t(P.walletUsedLabel),t(P.slippageTolerenceLabel),t(P.networkFeeLabel),t(P.totalCostLabel)])}E(G,"useCurrencyFormatter{currencyFormatter}\nuseCalculateNetworkFees{{ networkBaseFee, networkMaxFee, networkEstimatedFee }}\nuseOnMount{}\nuseCallback{getFiatValueOrCryptoFallback}\nuseMemo{formattedNetworkFeeDetailText}\nuseNetworkFeeRange{networkFeeRange}\nuseMemo{extraFeeInFiat}\nuseMemo{formattedExtraFee}\nuseCalculateTransactionTotal{{ totalEstimatedFees, totalMaxEstimatedFees }}\nuseMemo{formattedContractAddress}\nuseMemo{formattedPriceImpact}\nuseMemo{formattedEstimatedFees}\nuseMemo{}",(function(){return[u.$,d.aB,g.F,T,m]})),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(A.register(I,"SOLANA_DECIMAL","/workspaces/libs/data/hooks/Swap/useTransactionDetailRowItems/useTransactionDetailRowItems.tsx"),A.register(M,"SOLANA_CHAINID","/workspaces/libs/data/hooks/Swap/useTransactionDetailRowItems/useTransactionDetailRowItems.tsx"),A.register(P,"messages","/workspaces/libs/data/hooks/Swap/useTransactionDetailRowItems/useTransactionDetailRowItems.tsx"),A.register(G,"useTransactionDetailRowItems","/workspaces/libs/data/hooks/Swap/useTransactionDetailRowItems/useTransactionDetailRowItems.tsx"),A.register(j,"useTransactionDetailRowLabels","/workspaces/libs/data/hooks/Swap/useTransactionDetailRowItems/useTransactionDetailRowItems.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},79995:(e,t,r)=>{r.r(t)},22731:(e,t,r)=>{r.d(t,{Y:()=>o});r(2784);var n=r(75277),a=r(40620);r(58511);function o(e={}){const{network:t}=e,r=(0,a.r)(t);return(0,n.Rt)({wallets:r})}},60933:(e,t,r)=>{r.d(t,{H:()=>l});var n=r(2784),a=r(62197),o=r.n(a),s=r(1620),i=r(86855),c=r(52087);function l(e){const t=(0,s.$)(),r=e.quote,a="SOL"===r.fromAsset.currencyCode.rawValue?void 0:r.fromAsset.address?.rawValue,l=(0,n.useMemo)((()=>{const e=t.fiatValue(r.fromAsset.currencyCode,r.fromAsset.decimals,r.fromAmount,a,i.Zc.fromChainId({chainPrefix:(0,c.Gn)(r.chainId),chainId:r.chainId}),2);if(e)return t.fiatValueString(e)}),[t,a,r.chainId,r.fromAmount,r.fromAsset.currencyCode,r.fromAsset.decimals]),u=(0,n.useMemo)((()=>t.formatToCrypto({currencyCode:r.fromAsset.currencyCode,decimals:r.fromAsset.decimals,value:r.fromAmount,includeCode:!0,maxDisplayDecimals:new(o())(8),minDisplayDecimals:new(o())(0)})),[t,r.fromAmount,r.fromAsset.currencyCode,r.fromAsset.decimals]),d=(0,n.useMemo)((()=>{const e=t.fiatValue(r.toAsset.currencyCode,r.toAsset.decimals,r.toAmount,r.toAsset.address?.rawValue,i.Zc.fromChainId({chainPrefix:(0,c.Gn)(r.chainId),chainId:r.chainId}),2);if(e)return t.fiatValueString(e)}),[t,r.chainId,r.toAmount,r.toAsset.address?.rawValue,r.toAsset.currencyCode,r.toAsset.decimals]),p=(0,n.useMemo)((()=>t.formatToCrypto({currencyCode:r.toAsset.currencyCode,decimals:r.toAsset.decimals,value:r.toAmount,includeCode:!0,maxDisplayDecimals:new(o())(8),minDisplayDecimals:new(o())(0)})),[t,r.toAmount,r.toAsset.currencyCode,r.toAsset.decimals]);return(0,n.useMemo)((()=>({sourceFiatAmount:l,sourceCryptoAmount:u,targetFiatAmount:d,targetCryptoAmount:p})),[u,l,p,d])}},48517:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(2784),a=r(15363),o=r(90656),s=r(23868);function i(){const e=(0,o.y8)(),t="treatment"===(0,s.c1)(a.V.aug_2022_dex_best_quote_animation)&&"web"===e,r="treatment"===(0,s.c1)(a.V.aug_2022_dex_best_quote_animation_rn)&&"web"!==e;return(0,n.useMemo)((()=>t||r),[t,r])}},54971:(e,t,r)=>{r.d(t,{Y:()=>d});var n=r(2784),a=r(43817),o=r(3930),s=r(51728),i=r(63854),c=r(34291),l=r.n(c);const u={sendOptions:{skipPreflight:!0}};function d({wallet:e,unsignedTxs:t,signSuccess:r,signError:c,handleUnlock:d,unlockSuccess:p,unlockError:f,source:m="extension",txSubmissionType:g="original",skipSubmit:v=!0}){const[h,y]=(0,n.useState)(!1),w=(0,s.V)(),b=(0,n.useCallback)((t=>r=>{t&&w([t.asTransaction(r.txHash,r.nonce,e,t.metadata,g)])}),[w,g,e]),S=(0,n.useCallback)((e=>e.transferValue.isZero()?l():b(e)),[b]),x=(0,n.useCallback)((async n=>{try{if(!t||t.length<1)return null;const s=[];for(const r of t){const t=await(0,i.Y)({unsignedTx:r,mnemonic:n,wallet:e,txSubmissionType:"original",skipSubmit:v,onSubmit:S(r),source:m,additionalParams:v?void 0:u});v||await(0,a.fo)(t.txHash,t.fromAddress,!0,o.Q.CONFIRMED),s.push(t)}r(s)}catch(e){c(e)}finally{y(!1)}}),[t,r,e,v,S,m,c]),k=(0,n.useCallback)((()=>(y(!0),d((e=>{p?.(),x(e)}),(e=>{e&&f?.(e),y(!1)})))),[d,x,f,p]);return(0,n.useMemo)((()=>({signMultipleTransactionsStandalone:k,isSignMultipleTransactionsStandaloneLoading:h})),[h,k])}},18398:(e,t,r)=>{r.d(t,{WM:()=>o,oO:()=>s,q3:()=>i});var n=r(70279),a=r(15234);const{getSortedSwapAssetStats:o,getSwapAssetStat:s,saveSwapAssetStat:i}={getSortedSwapAssetStats:async function(e){return(await n.YI.toCollection().reverse().filter((t=>!e||t.chainIdStr===e)).sortBy("selectedCountStr")).map((e=>a.V6.fromDMO(e)))},getSwapAssetStat:async function(e){const t=await n.YI.where("[id]").equals([a.V6.generateID(e.blockchain,e.chainId,e.currencyCode,e.address)]).first();return t?a.V6.fromDMO(t):void 0},saveSwapAssetStat:async function(e){await n.YI.put(e.asDMO)}}},74017:(e,t,r)=>{r.d(t,{c:()=>c});var n=r(2784),a=r(62197),o=r.n(a),s=r(86855),i=r(40620);function c(e){const t=(0,i.r)();return(0,n.useMemo)((()=>{if(!e)return;const r=s.Zc.fromChainId({chainId:new(o())(e)});return t.find((e=>{const t=s.Zc.isEqual(r,e.network),n=e.currencyCode.rawValue===r.asChain()?.baseAssetCurrencyCode;return t&&n}))}),[e,t])}},83747:(e,t,r)=>{r.d(t,{C:()=>l});var n=r(2784),a=r(62197),o=r.n(a),s=r(18398),i=r(15234),c=r(73881);function l(e){return(0,n.useCallback)((async t=>{const r=t instanceof c.w5?e.get(t.swapId):t;if(!r)return;const n=await(0,s.oO)(r);let a;if(n){const e=n.selectedCount.add(new(o())(1));a=n,a.selectedCount=e}else a=new i.V6(r.blockchain,r.chainId,r.currencyCode,r.address,new(o())(1));await(0,s.q3)(a)}),[e])}},95622:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(354);function a(e){return(0,n.j)(e,(()=>new Map([...e.supported,...e.unsupported].map((e=>[e.swapId,e])))))}},38977:(e,t,r)=>{r.d(t,{T:()=>u});var n=r(62197),a=r.n(n),o=r(78012),s=r(57356),i=r(65879),c=r(51624),l=r(48834).Buffer;class u extends c.V{approveTx;tx;quote;fee;chainId;constructor(e,t){super(e,t),this.approveTx=e.approveTx,this.tx=e.tx,this.quote=new i.O(e.quote),this.fee={amount:new(a())(e.fee.amount),percentage:e.fee.percentage,baseAsset:new s.U(e.fee.baseAsset)},this.chainId=t}get approveHexEncodedTxData(){return this.approveTx?l.from(this.approveTx.data):void 0}get swapHexEncodedTxData(){return l.from((0,o.Is)(this.tx.data),"hex")}get estimatedSwapTxMinerFee(){if(!this.tx.gas||!this.tx.gasPrice)return;return new(a())(this.tx.gasPrice).mul(new(a())(this.tx.gas))}get estimatedApproveTxMinerFee(){if(!this.approveTx||!this.approveTx.gas||!this.approveTx.gasPrice)return;return new(a())(this.approveTx.gasPrice).mul(new(a())(this.approveTx.gas))}get gasPrice(){return this.tx.gasPrice?new(a())(this.tx.gasPrice):void 0}get gas(){return this.tx.gas}}},9539:(e,t,r)=>{r.d(t,{j:()=>c});var n=r(62197),a=r.n(n),o=r(57356),s=r(65879),i=r(51624);class c extends i.V{tx;quote;fee;chainId;constructor(e,t){super(e,t),this.tx=e.tx,this.quote=new s.O(e.quote),this.fee={amount:new(a())(e.fee.amount),percentage:e.fee.percentage,baseAsset:new o.U(e.fee.baseAsset),extraFee:e.ata.rent?new(a())(e.ata.rent):void 0},this.chainId=t}}},65879:(e,t,r)=>{r.d(t,{O:()=>l});var n=r(62197),a=r.n(n),o=r(57356),s=r(18705),i=r(52180),c=r(81399);class l{amountReference;aggregator;fromAsset;toAsset;fromAmount;toAmount;priceImpact;_highPriceImpact;chainId=new(a())(1);constructor(e){this.amountReference=e.amountReference&&"to"===e.amountReference?c.d.Target:c.d.Source,this.aggregator=e.aggregatorID,this.fromAsset=new o.U(e.fromAsset),this.toAsset=new o.U(e.toAsset),this.fromAmount=new(a())(e.fromAmount),this.toAmount=new(a())(e.toAmount),this.priceImpact=Number(e.priceImpact),this._highPriceImpact=Boolean(e.highPriceImpact),this.chainId=new(a())(e.chainId)}get exchangeRate(){return this.fromAmount?(0,s.x)(this.toAmount.div(this.fromAmount)):new i.Decimal(0)}get highPriceImpact(){return Boolean(this._highPriceImpact)}}},51624:(e,t,r)=>{r.d(t,{V:()=>s});var n=r(62197),a=r.n(n),o=r(65879);class s{approveTx;tx;quote;chainId;constructor(e,t){this.approveTx=e.approveTx,this.tx=e.tx,this.quote=new o.O(e.quote),this.chainId=t}get chainPrimaryAssetValue(){return this.tx.value?new(a())(this.tx.value):new(a())(0)}get highPriceImpact(){return Boolean(this.quote._highPriceImpact)}}}}]);
//# sourceMappingURL=4969.js.map