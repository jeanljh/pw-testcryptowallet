"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4123],{81335:(e,n,r)=>{r.r(n),r.d(n,{default:()=>v});var t=r(2784),o=r(83112),s=r(56695),d=r(20652),c=r(24264),u=r(10666),a=r(95545);var i=r(40567),l=r(7777),f=r(23868);const p=[],m=chrome.runtime.getURL("js/sprig-web-controller-sdk.js"),w=chrome.runtime.getURL("js/sprig-web-view-sdk.js");function g(e){const n=e?.userId??"",r=function(e){return(0,a.ld)("sprig_script_error_occurred",{action:a.Us.unknown,componentType:a.re.modal,loggingId:"cf8547dd-a0c1-4d94-bf92-a5e26a2c44d5",userId:e})}(n),o=function(e){return(0,a.ld)("sprig_survey_presented",{action:a.Us.unknown,componentType:a.re.modal,loggingId:"78df5eab-2563-4a06-be0f-1672dee976c2",userId:e})}(n);(0,t.useEffect)((function(){if("undefined"!=typeof window&&e&&e.userId){window.UserLeap=function(...e){n._queue&&n._queue.push(e)};const n=window.UserLeap;n._queue=[],n.config={envId:e.envId,controllerSDKURL:m,viewSDKURL:w,fontFamily:"'Graphik', -apple-system, BlinkMacSystemFont, sans-serif;"},n("setUserId",e.userId),n("setAttributes",{...e.attributes})}}),[e]);const s="treatment"===(0,f.c1)(l.V.march_2022_wallet_sprig)&&!(0,i.aT)()||!!(0,i.lE)(),[d,c]=((e,n="async",r)=>{const[o,s]=(0,t.useState)({loaded:!1,error:!1}),d=(0,t.useCallback)((()=>{s({loaded:!0,error:!1})}),[]),c=(0,t.useCallback)((n=>{const r=n.currentTarget,t=p.indexOf(e);t>=0&&p.splice(t,1),r.remove(),s({loaded:!0,error:!0})}),[e]);return(0,t.useEffect)((function(){if("undefined"!=typeof document&&e&&r){if(!p.includes(e)){p.push(e);const r=document.createElement("script");return r.src=e,r.async="async"===n,r.defer="defer"===n,r.addEventListener("load",d),r.addEventListener("error",c),document.body&&document.body.appendChild(r),()=>{r.removeEventListener("load",d),r.removeEventListener("error",c)}}s({loaded:!0,error:!1})}}),[c,d,r,e,n]),[o.loaded,o.error]})(e?.userId&&s?m:null,"async",e?.userId);(0,t.useEffect)((function(){d&&c?((0,u.c)("sprig script couldnt load"),r()):d&&window.UserLeap.UPDATES&&window.UserLeap("addListener",window.UserLeap.UPDATES.SURVEY_PRESENTED,o)}),[d,c,r,o])}const v=(0,t.memo)((function(){const{locale:e}=(0,o.Z)(),[n,r]=(0,t.useState)(void 0);return(0,s.F)((()=>{chrome.storage?.local.get([d.Y.amplitudeDeviceId],(e=>{const n=e[d.Y.amplitudeDeviceId];r(n)}))})),g((0,t.useMemo)((()=>({userId:n,envId:c.o6,attributes:{locale:e}})),[e,n])),null}))}}]);
//# sourceMappingURL=init-user-leap.js.map