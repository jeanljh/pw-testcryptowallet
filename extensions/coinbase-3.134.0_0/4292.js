/*! For license information please see 4292.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="e55fa216-1896-4682-921b-72490f2ba55e",e._sentryDebugIdIdentifier="sentry-dbid-e55fa216-1896-4682-921b-72490f2ba55e")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4292],{78751:(e,r,n)=>{n.d(r,{nq:()=>F});var t=n(14041),a=n(41783),o=n(79637),s=n(18711),i=n(13394),l=n(65063);class c extends Error{}function u({fn:e,validate:r,interval:n,maxAttempts:t}){let a,o=0;const s=async(i,l)=>{const u=await e();return o++,r(u)?i(u):t&&o===t?l(new c("Max attempts reached")):void(a=setTimeout(s,n,i,l))};return{promise:new Promise(s),cancel:()=>a&&clearTimeout(a)}}var d=n(87432);var f=n(54343),m=n(72707);function p(){const e=function(){const e=(0,t.useRef)(void 0),r=(0,t.useRef)(!1);return(0,d.y)((function(){return()=>{e.current&&e.current()}})),(0,t.useCallback)((async n=>{if(r.current)return null;const{promise:t,cancel:a}=u(n);return e.current=a,r.current=!0,t}),[])}();return(0,t.useCallback)((async function({userOpHash:r,client:n}){return e({fn:async function(){return(0,m.b)(n,{hash:r})},validate:e=>!!e,interval:f.d7})}),[e])}var y=n(99172),b=n(98837),g=n(31860),v=n(86146);class h extends Error{constructor(e){super(e.message),this.code=e.code??"UnknownError",this.stack=e.stack,this.name="PasskeyError",Object.setPrototypeOf(this,h.prototype)}}function E(e){return e instanceof h&&("UserCancelled"===e.code||e.message.includes("Cancelled by user")||e.message.includes("Unable to get sync account"))}function w(e){return e instanceof h&&(!!e.message.includes("NotAllowedError")||!!e.message.includes("Unable to create key during registration"))}var S;!function(e){e.PASSKEY_USER_CANCELLED="passkey_user_cancelled",e.PASSKEY_FAILED_AUTH="passkey_failed_auth",e.PASSKEY_NO_CREDENTIALS="passkey_no_credentials",e.PASSKEY_NO_ACCOUNT="passkey_no_account",e.PASSKEY_MISMATCH="passkey_mismatch",e.PASSKEY_NOT_SUPPORTED_DUE_TO_OS_VERSION="passkey_not_supported_due_to_os_version",e.PASSKEY_NOT_SUPPORTED="passkey_not_supported",e.UNEXPECTED="passkey_unexpected"}(S||(S={}));var k,O=n(16308);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function T(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?C(Object(n),!0).forEach((function(r){A(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function A(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=P(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==P(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function I(){var e,r,n="function"==typeof Symbol?Symbol:{},t=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,t,a,o){var l=t&&t.prototype instanceof i?t:i,c=Object.create(l.prototype);return M(c,"_invoke",function(n,t,a){var o,i,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(r,n){return o=r,i=0,l=e,f.n=n,s}};function m(n,t){for(i=n,l=t,r=0;!d&&c&&!a&&r<u.length;r++){var a,o=u[r],m=f.p,p=o[2];n>3?(a=p===t)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,f.v=t,f.n=o[1]):m<p&&(a=n<3||o[0]>t||t>p)&&(o[4]=n,o[5]=t,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,t}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),i=u,l=p;(r=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(a="next"),r=o[a]){if(!(r=r.call(o,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((r=(d=f.n<0)?l:n.call(t,f))!==s)break}catch(r){o=e,i=1,l=r}finally{c=1}}return{value:r,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}r=Object.getPrototypeOf;var u=[][t]?r(r([][t]())):(M(r={},t,(function(){return this})),r),d=c.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,M(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,M(d,"constructor",c),M(c,"constructor",l),l.displayName="GeneratorFunction",M(c,a,"GeneratorFunction"),M(d),M(d,a,"Generator"),M(d,t,(function(){return this})),M(d,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:o,m:f}})()}function M(e,r,n,t){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}M=function(e,r,n,t){function o(r,n){M(e,r,(function(e){return this._invoke(r,n,e)}))}r?a?a(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},M(e,r,n,t)}function _(e,r,n,t,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?r(l):Promise.resolve(l).then(t,a)}function D(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function s(e){_(o,t,a,s,i,"next",e)}function i(e){_(o,t,a,s,i,"throw",e)}s(void 0)}))}}function G(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=o.call(n)).done)&&(i.push(t.value),i.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return x(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}e=n.hmd(e),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&k(e);var U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function F(e){return e.message.includes("replacement underpriced")}var j,B,L="You have a previous transaction that got stuck, please try going through the send flow to drop the previous transaction.";function N(e){var r,n=e.wallet,c=e.unsignedTxOrUserOp,u=e.signSuccess,d=e.signError,f=e.handleUnlock,m=e.unlockSuccess,h=e.unlockError,S=e.onRetryableError,k=e.skipSubmit,P=void 0!==k&&k,C=e.txSubmissionType,A=void 0===C?"original":C,M=e.source,_=void 0===M?"rn":M,x=e.onSubmit,U=e.waitForTxHash,j=e.chainId,B=e.walletSendCallsVersion,N=e.shouldUseUserOpService,H=G((0,t.useState)(!1),2),R=H[0],K=H[1],V=(0,b.O)(),Y=(0,l.t)(),q=p(),W=n.network.asChain();j&&(W=y.lg.fromChainId({chainId:BigInt(j)}).asChain());var Z=(0,t.useCallback)(function(){var e=D(I().m((function e(r){return I().w((function(e){for(;;)switch(e.n){case 0:c&&V([c.asTransaction(r.txHash,r.nonce,n,c.metadata,A)]);case 1:return e.a(2)}}),e)})));return function(r){return e.apply(this,arguments)}}(),[V,A,c,n]),J=(0,t.useCallback)((function(){Y(n.blockchain.rawValue,W)&&(0,o.L)({wallet:n})}),[n,Y,W]),$=(0,t.useCallback)((function(e){x&&x(e),Z(e),J()}),[x,Z,J]),z=(0,t.useCallback)(function(){var e=D(I().m((function e(){var r,t,o,l,f,m,p,y,b,h,k,C,M,D;return I().w((function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,c){e.n=1;break}return e.a(2,null);case 1:return e.n=2,(0,g.Z)({unsignedTxOrUserOp:c,wallet:n,txSubmissionType:A,skipSubmit:P,onSubmit:$,source:_,walletSendCallsVersion:B,shouldUseUserOpService:N});case 2:if(r=e.v,!U){e.n=4;break}return m=(0,v.x)(null!==(t=null===(o=W)||void 0===o?void 0:o.chainId)&&void 0!==t?t:-1),e.n=3,q({userOpHash:r.txHash,client:m});case 3:p=e.v,u(T(T({},r),{},{txHash:null!==(l=null==p||null===(f=p.receipt)||void 0===f?void 0:f.transactionHash)&&void 0!==l?l:r.txHash})),e.n=5;break;case 4:u(r);case 5:e.n=9;break;case 6:if(e.p=6,D=e.v,(0,i.gf)({error:D,context:"sign_and_submit_transaction_error",isHandled:!1,severity:"error"}),!E(D)&&!w(D)){e.n=7;break}return e.a(2);case 7:if(!F(D)||!(0,s.a)(c)){e.n=8;break}return b=D instanceof O.C?D.details:D.message,h=c.maxFeePerGas.toString(),k=c.maxPriorityFeePerGas.toString(),C=D instanceof O.C?JSON.parse(JSON.stringify(D.walk())):void 0,(0,a.fZ)({errorMessage:b,chainId:null===(y=W)||void 0===y?void 0:y.chainId,source:_,maxFeePerGas:h,maxPriorityFeePerGas:k,errorDetails:C}),S?null==S||S({unsignedTxOrUserOp:c,error:D}):((0,i.gf)({error:D,context:"sign_and_submit_transaction_unhandled_retryable_error",isHandled:!1,severity:"error"}),d(new Error(L))),e.a(2);case 8:M=D instanceof O.C?new Error(D.details):D,d(M);case 9:return e.p=9,K(!1),e.f(9);case 10:return e.a(2)}}),e,null,[[0,6,9,10]])})));return function(){return e.apply(this,arguments)}}(),[c,n,A,P,$,_,U,null===(r=W)||void 0===r?void 0:r.chainId,q,u,d,S,B,N]),Q=(0,t.useCallback)((function(){return K(!0),f({unlockSuccess:function(){null==m||m(),z()},unlockError:function(e){e&&(null==h||h(e)),K(!1)}})}),[f,z,h,m]);return(0,t.useMemo)((function(){return{signAndSubmitScw:Q,isSignAndSubmitScwLoading:R}}),[R,Q])}U(N,"useState{[isLoading, setIsLoading](false)}\nuseSaveTransactions{saveTransactions}\nuseShouldRefreshBalancesAfterTxSubmit{shouldRefreshBalancesAfterTxSubmit}\nusePollForUserOpReceiptByUserOpHash{pollForUserOpReceiptByUserOpHash}\nuseCallback{saveTransaction}\nuseCallback{refreshBalancesForWallet}\nuseCallback{submitSuccess}\nuseCallback{signAndSubmit}\nuseCallback{signAndSubmitScw}\nuseMemo{}",(function(){return[b.O,l.t,p]})),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(F,"isStuckUserOpError","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),j.register(L,"stuckUserOpMessageUnhandled","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),j.register(N,"useSignAndSubmitScw","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx")),(B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&B(e)},81838:(e,r,n)=>{n.d(r,{G:()=>l});n(34767),n(55452);var t=n(21455);var a,o=n(6939);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var s,i;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function l(e){var r=e.error,n=e.type;if(r)try{switch(!0){case"gasPriceError"===n:case"paymasterError"===n:case"insufficientFundsError"===n:case"paymasterStubError"===n:case"walletPrepareCallsError"===n:return{message:r.message,name:r.name};case"magicSpendQuoteSignatureError"===n:var a=r;return{code:a.code,name:a.name,message:a.message};case"magicSpendSignatureCommitError"===n:var s=r;return{code:s.code,name:s.name,message:s.message};case"userOpGasError"===n:var i=function(e){let r,n,t,a;const s=e.walk((e=>"UnknownNodeError"===e.name));s&&(r=s.name,n=s.shortMessage,t=s.docsPath);const i=e.walk((e=>"RpcRequestError"===e.name));i&&(r=i.name,n=i.details,t=i.docsPath,a=i.code);const l=e.walk((e=>"SmartAccountInsufficientFundsError"===e.name));l instanceof o.Cc&&(r=l.name,n=l.shortMessage,t=l.docsPath);const c=e.walk((e=>"InitCodeDidNotDeploySenderError"===e.name));c&&(r=c.name,n=c.shortMessage,t=c.docsPath);const u=e.walk((e=>"InvalidSmartAccountNonceError"===e.name));u&&(r=u.name,n=u.shortMessage,t=u.docsPath);const d=e.walk((e=>"PaymasterDataRejectedError"===e.name));d&&(r=d.name,n=d.shortMessage,t=d.docsPath);const f=e.walk((e=>"PaymasterDepositTooLowError"===e.name));f&&(r=f.name,n=f.shortMessage,t=f.docsPath);const m=e.walk((e=>"PaymasterNotDeployedError"===e.name));m&&(r=m.name,n=m.shortMessage,t=m.docsPath);const p=e.walk((e=>"PaymasterValidationRevertedError"===e.name));p&&(r=p.name,n=p.shortMessage,t=p.docsPath);const y=e.walk((e=>"PaymasterValidityPeriodError"===e.name));y&&(r=y.name,n=y.shortMessage,t=y.docsPath);const b=e.walk((e=>"SenderAddressMismatchError"===e.name));b&&(r=b.name,n=b.shortMessage,t=b.docsPath);const g=e.walk((e=>"SenderAlreadyDeployedError"===e.name));g&&(r=g.name,n=g.shortMessage,t=g.docsPath);const v=e.walk((e=>"SenderNotDeployedError"===e.name));v&&(r=v.name,n=v.shortMessage,t=v.docsPath);const h=e.walk((e=>"SmartAccountSignatureValidityPeriodError"===e.name));h&&(r=h.name,n=h.shortMessage,t=h.docsPath);const E=e.walk((e=>"SmartAccountValidationRevertedError"===e.name));E&&(r=E.name,n=E.shortMessage,t=E.docsPath);const w=e.walk((e=>"InitCodeRevertedError"===e.name));return w&&(r=w.name,n=w.shortMessage,t=w.docsPath),{name:r,details:n,docsPath:t,code:a}}(r);return{message:i.details,name:i.name,docsPath:i.docsPath};case"nonceError"===n:var l=r;return{message:l.shortMessage,name:l.name,docsPath:l.docsPath};case"byteCodeError"===n:var c=r;return{name:c.name,message:c.message};default:return void(0,t.K1)(r)}}catch(e){return void(0,t.K1)(r)}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(l,"handleUseUnsignedUserOpErrors","/workspaces/libs/data/scw/features/sign/transaction/utils/handleUseUnsignedUserOpErrors.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},76825:(e,r,n)=>{n.d(r,{r:()=>Y});var t=n(14041),a=n(32183),o=n(8867),s=n(84213),i=n(46122),l=n(26182),c=n(77547),u=n(13620),d=n(91635),f=n(35333);var m=n(4244),p=n(68228),y=n(68197),b=n(78751),g=n(81838);const v=(0,a.YK)({genericError:{id:"PR2F1h",defaultMessage:"{message}"},rpcError:{id:"3bL3yP",defaultMessage:'Reverted with message: "{message}"'}});function h(){const{formatMessage:e}=(0,o.A)();return(0,t.useCallback)((function({userOpError:r}){if(r?.gasPriceError){const n=(0,g.G)({error:r?.gasPriceError,type:"gasPriceError"});return e(v.genericError,{message:n?.name||"get4337GasPricesError"})}if(r?.userOpGasError){const n=(0,g.G)({error:r?.userOpGasError,type:"userOpGasError"});return"RpcRequestError"===n?.name?e(v.rpcError,{message:n?.message||"estimateUserOperationGasError"}):e(v.genericError,{message:n?.name||"estimateUserOperationGasError"})}if(r?.walletPrepareCallsError)return e(v.genericError,{message:r?.walletPrepareCallsError?.message||"walletPrepareCallsError"})}),[e])}var E=n(7077),w=n(52689),S=n(72137),k=n(5104),O=n(84632),P=n(24117),C=n(99172);const T=(0,a.YK)({notEnoughBalanceForTransaction:{id:"wtowzI",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need at least {fiatTotalTransactionCost} for this transaction. Please deposit more {cryptoSymbol} on {chainName}."},notEnoughBalanceForGas:{id:"hIdzKF",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need {fiatTotalGasCost} due to gas fees. Please deposit more {cryptoSymbol} on {chainName}."}});function A(){const{formatMessage:e,formatters:r}=(0,o.A)(),n=(0,P.gs)(),a=(0,O.n)();return(0,t.useCallback)((function({userOp:t,chainId:o,balance:s}){const i=C.lg.fromChainId({chainId:BigInt(o)}),l=i.asChain(),c=l?.baseAssetCurrencyCode??"",u=BigInt(l?.baseAssetDecimal??18),d=(0,k.W)(t),f=t.calls.reduce(((e,r)=>e+r.value),0n),p=f?d+f:d,y={fromCurrencyCode:new w.j(c),decimals:u,network:i,exchangeRatesMap:n??{},formatters:r,fiatCurrency:a,formatZeroBalance:!0};return f&&p>s?new S.vU(e(T.notEnoughBalanceForTransaction,{cryptoSymbol:c,chainName:l?.displayName??"",fiatTotalAvailableBalance:(0,E.c)({...y,value:s,round:m.e1.Down}),fiatTotalTransactionCost:(0,E.c)({...y,value:p,round:m.e1.Up})})):t&&d>s?new S.IJ(e(T.notEnoughBalanceForGas,{cryptoSymbol:c,chainName:l?.displayName??"",fiatTotalAvailableBalance:(0,E.c)({...y,value:s,round:m.e1.Down}),fiatTotalGasCost:(0,E.c)({...y,value:d,round:m.e1.Up})})):void 0}),[n,e,r,a])}var I=n(86072),M=n(23804),_=n(52303);var D,G=n(89029),x=n.n(G);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function F(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?F(Object(n),!0).forEach((function(r){B(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function B(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=U(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==U(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function L(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=o.call(n)).done)&&(i.push(t.value),i.length!==r);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return N(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}e=n.hmd(e),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&D(e);var H,R,K="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},V=(0,a.YK)({errorCancel:{id:"8gdsKY",defaultMessage:[{type:0,value:"Cancel"}]},errorConfirm:{id:"c7nwmM",defaultMessage:[{type:0,value:"Confirm"}]},getMoreCurrencyError:{id:"BB36LS",defaultMessage:[{type:0,value:"may be required for the transaction. Please deposit more"}]},sendKilledError:{id:"R6qUvO",defaultMessage:[{type:0,value:"This feature is currently unavailable. Try again later."}]},unableToEstimateGasError:{id:"iAStha",defaultMessage:[{type:0,value:"Unable to estimate network fee."}]},genericError:{id:"OlEpDj",defaultMessage:[{type:0,value:"Something went wrong."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]},stuckUserOpMessage:{id:"Uy3etL",defaultMessage:[{type:0,value:"You have a previous transaction that got stuck. Retry to cancel that previous transaction and submit this one in its place."}]}});function Y(){var e=(0,m.J9)(),r=(0,o.A)().formatMessage,n=(0,t.useRef)(!1),a=(0,y.s)("kill_send"),g=(0,p.F)("kill_send"),v=(0,y.s)("kill_dapp_tx"),E=(0,p.F)("kill_dapp_tx"),w=h(),S=A();return(0,t.useCallback)((function(t){var o,m,p,y,h,k,O,P,C=t.wallet,T=t.unsignedTxOrUserOp,A=t.error,D=t.primeError,G=t.feeWallet,U=t.flow,F=t.isTxSponsored,B=void 0!==F&&F,N=t.isAuxiliaryFundsEnabled,H=void 0!==N&&N,R=T,K=T;if(T&&G){var Y=function(e){const r=(0,f.D)(e);let n,t;(0,_._)(e)&&e.lowerBoundFee?(n=e.lowerBoundFee<e.upperBoundFee?e.lowerBoundFee:e.upperBoundFee,t=e.upperBoundFee):(n=e.estimatedFee,t=e.estimatedFee),r&&(t+=e.extraFee??0n);return{minFee:n,maxFee:t}}(T),q=Y.minFee,W=Y.maxFee,Z={getMoreCurrencyError:{type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(r(V.getMoreCurrencyError)," ").concat(null!==(o=null===(m=C.network)||void 0===m||null===(m=m.asChain())||void 0===m?void 0:m.baseAssetCurrencyCode)&&void 0!==o?o:C.blockchain.rawValue,".")},sendKilledError:{type:"sendKilledError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.sendKilledError)},unableToEstimateGasError:{type:"unableToEstimateGasError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.unableToEstimateGasError)},stuckUserOpError:{type:"stuckUserOpError",isDismissible:!1,showErrorIcon:!0,isDisabled:!1,message:r(V.stuckUserOpMessage)},genericError:{type:"genericError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat((null==A?void 0:A.message)||r(V.genericError))},genericPrimeError:{type:"genericPrimeError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(null==D?void 0:D.message)}};if(D)return Z.genericPrimeError;if(e.fiatValue({currencyCode:null==T?void 0:T.feeCurrencyCode,decimals:null==T?void 0:T.feeCurrencyDecimal,value:q,contractAddress:void 0,network:C.network,blockchain:C.blockchain})||"sync"===U){var J=null==C||null===(p=C.network.asChain())||void 0===p?void 0:p.chainId,$=J?BigInt(J):void 0,z=null==C?void 0:C.blockchain.rawValue,Q=null==G||null===(y=G.network.asChain())||void 0===y?void 0:y.chainId,X=Q?BigInt(Q):void 0,ee=null==G?void 0:G.blockchain.rawValue,re="dappTx"===U&&(E(z)||E(ee)||v($)||v(X)),ne="send"===U&&(g(z)||g(ee)||a($)||a(X)),te=e.formatToCrypto({currencyCode:T.feeCurrencyCode,decimals:T.feeCurrencyDecimal,value:BigInt(W),includeCode:!0,maxDisplayDecimals:8n}),ae=function({feeCurrencyCode:e,feeDecimal:r,feeValue:n,currencyFormatter:t,wallet:a}){const o=t.fiatValue({currencyCode:e,decimals:r,value:BigInt(n),contractAddress:void 0,network:a.network,blockchain:a.blockchain});return o?.lessThan(new(x())(.01))&&o?.greaterThan(new(x())(0))?`<${t.fiatValueString(new(x())(.01),!0)}`:t.formatToFiat({fromCurrencyCode:e,decimals:r,value:BigInt(n),isAbbreviated:!1,contractAddress:void 0,network:a.network,blockchain:a.blockchain})}({feeCurrencyCode:T.feeCurrencyCode,feeDecimal:T.feeCurrencyDecimal,feeValue:BigInt(W),currencyFormatter:e,wallet:C});if(Z.getMoreCurrencyError={type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(te,"  (").concat(null!=ae?ae:"",") ").concat(r(V.getMoreCurrencyError)," ").concat(null!==(h=null===(k=C.network)||void 0===k||null===(k=k.asChain())||void 0===k?void 0:k.baseAssetCurrencyCode)&&void 0!==h?h:C.blockchain.rawValue,".")},re||ne)return Z.sendKilledError;var oe=R.network.asChain(),se=null!==(O=null===(P=Array.from(T.metadata,(function(e){var r=L(e,2);return{name:r[0],value:r[1]}})).find((function(e){return"txSource"===e.name.keyName})))||void 0===P?void 0:P.value)&&void 0!==O?O:"",ie=0n,le=0n;if(T instanceof c.D?(ie=R.maxFeePerGas/BigInt(Math.pow(10,9)),le=R.gasLimit):T instanceof u.U&&(ie=K.gasPrice/BigInt(Math.pow(10,9)),le=K.gasLimit),"sync"===U&&T instanceof d.f){var ce,ue=S({userOp:T,chainId:null!=Q?Q:0,balance:null!==(ce=G.balance)&&void 0!==ce?ce:0n});if(ue)return j(j({},Z.getMoreCurrencyError),{},{message:ue.message})}if(A){var de,fe,me,pe,ye;if(!n.current)n.current=!0,(0,s.NZ)({blockchain:i.AA.rawValue,chainName:null!==(de=null==oe?void 0:oe.displayName)&&void 0!==de?de:"",chainId:null!==(fe=null==oe||null===(me=oe.chainId)||void 0===me?void 0:me.toString(10))&&void 0!==fe?fe:"",errorType:"Error",errorMessage:"".concat(A.name," -- ").concat(null==A?void 0:A.message),txSource:se.toLocaleString(),gasPriceInGwei:null===(pe=ie)||void 0===pe?void 0:pe.toString(),gasLimit:null===(ye=R.gasLimit)||void 0===ye?void 0:ye.toString()});if(T instanceof d.f&&(0,b.nq)(A))return Z.stuckUserOpError;if(T instanceof d.f&&A instanceof I.T){var be,ge,ve,he=S({userOp:T,chainId:null!==(be=null==oe?void 0:oe.chainId)&&void 0!==be?be:0,balance:null!==(ge=G.balance)&&void 0!==ge?ge:0n});if(he)return j(j({},Z.getMoreCurrencyError),{},{message:he.message});var Ee=w({userOpError:A.errorData});return Ee&&null!==(ve=A.errorData)&&void 0!==ve&&ve.userOpGasError?j(j({},Z.unableToEstimateGasError),{},{message:null!=Ee?Ee:Z.unableToEstimateGasError.message}):j(j({},Z.genericError),{},Ee?{message:Ee}:{message:r(V.genericError)})}return A===l.c.unableToEstimateGas?Z.unableToEstimateGasError:Z.genericError}var we,Se,ke,Oe=M.u.isEqual(C,G)?W+T.transferValue:W,Pe=void 0===G.balance||G.balance<Oe,Ce=function(e,r){return!!(0,f.D)(e)&&!!e.feePayerAddress&&e.feePayerAddress!==r.primaryAddress}(T,C);if(!(Ce||B||H)&&(Pe||T.transferValue<0n)){var Te,Ae,Ie,Me,_e;if(!n.current)n.current=!0,(0,s.NZ)({blockchain:i.AA.rawValue,chainName:null!==(Te=null==oe?void 0:oe.displayName)&&void 0!==Te?Te:"",chainId:null!==(Ae=null==oe||null===(Ie=oe.chainId)||void 0===Ie?void 0:Ie.toString(10))&&void 0!==Ae?Ae:"",errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:se.toLocaleString(),gasPriceInGwei:null===(Me=ie)||void 0===Me?void 0:Me.toString(),gasLimit:null===(_e=le)||void 0===_e?void 0:_e.toString(),balanceUndefined:void 0===G.balance});return Z.getMoreCurrencyError}if(n.current)n.current=!0,(0,s.WV)({blockchain:i.AA.rawValue,chainName:null!==(we=null==oe?void 0:oe.displayName)&&void 0!==we?we:"",chainId:null!==(Se=null==oe||null===(ke=oe.chainId)||void 0===ke?void 0:ke.toString(10))&&void 0!==Se?Se:""})}}}),[e,E,v,g,a,r,w,S])}K(Y,"useCurrencyFormatter{currencyFormatter}\nuseIntl{{ formatMessage }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseKillSwitchByEthNetwork{isSendKilledByEthNetwork}\nuseKillSwitchByBlockchain{isSendKilledByBlockchain}\nuseKillSwitchByEthNetwork{isDappTxKilledByEthNetwork}\nuseKillSwitchByBlockchain{isDappTxKilledByBlockchain}\nuseErrorMessageForUnsignedUserOpError{getErrorMessageForUnsignedUserOpError}\nuseGetInsufficientFundsErrorForUserOp{getInsufficientFundsErrorForUserOp}\nuseCallback{}",(function(){return[m.J9,o.A,y.s,p.F,y.s,p.F,h,A]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(V,"messages","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx"),H.register(Y,"useGetTransactionDetailsErrors","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx")),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&R(e)},35333:(e,r,n)=>{n.d(r,{D:()=>a});var t=n(16191);function a(e){return e instanceof t.K}},64292:(e,r,n)=>{n.d(r,{Z:()=>a});var t=n(76825);function a({wallet:e,unsignedTxOrUserOp:r,error:n,primeError:a,feeWallet:o,flow:s,isTxSponsored:i=!1,isAuxiliaryFundsEnabled:l=!1}){return(0,t.r)()({wallet:e,unsignedTxOrUserOp:r,error:n,primeError:a,feeWallet:o,flow:s,isTxSponsored:i,isAuxiliaryFundsEnabled:l})}}}]);
//# sourceMappingURL=4292.js.map