/*! For license information please see 2672.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b21a4cbc-fcfc-46dd-b993-063115989cba",e._sentryDebugIdIdentifier="sentry-dbid-b21a4cbc-fcfc-46dd-b993-063115989cba")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[2672],{87755:(e,t,n)=>{n.d(t,{D:()=>D});var r,a=n(14041),o=n(32183),s=n(8867),i=n(33874),c=n(86768),u=n(50259),l=n(26958),d=n(24905),f=n(59706),g=n(91965),p=n(85581),m=n(34107),y=n(15654),b=n(55799),v=n(60149),h=n(97541),S=n(94330),w=n(98055),E=n(52331),M=n(95974),_=n(70660),x=n(81475),j=n(31085);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var T,C,A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},O="hw-trouble-connecting",k=(0,o.YK)({tryAgainCTA:{id:"FazwRl",defaultMessage:[{type:0,value:"Try again"}]},backButtonAriaLabel:{id:"p72mKW",defaultMessage:[{type:0,value:"Go back"}]},errorMessage:{id:"29gmtd",defaultMessage:[{type:0,value:"Error: "},{type:1,value:"error"}]},havingTrouble:{id:"sPl3k8",defaultMessage:[{type:0,value:"Having trouble?"}]},gotIt:{id:"NYTGIb",defaultMessage:[{type:0,value:"Got it"}]}});function D(e){var t=e.statusCode,n=e.errorMessage,r=e.errorId,o=e.handleBack,T=(0,s.A)().formatMessage,C=(0,M.A)().goBack,A=(0,i.f)();(0,x.R)("errorMessage:",n,"statusCode:",t,"errorId:",r);var D=(0,c.bV)(t,r),I=(0,a.useCallback)((function(){o?o():C()}),[C,o]),L=(0,a.useCallback)((function(){(0,_.p4)(u.CO.LEDGER)}),[]);return(0,j.jsxs)(y.T,{height:d.pA,justifyContent:"space-between",testID:"".concat(O,"-container"),children:[(0,j.jsxs)(y.T,{children:[(0,j.jsx)(b.a,{marginStart:-1,children:(0,j.jsx)(g.K,{testID:"".concat(O,"-back-btn"),name:"backArrow",onClick:I,transparent:!0,accessibilityLabel:T(k.backButtonAriaLabel)})}),(0,j.jsx)(y.T,{alignItems:"center",justifyContent:"flex-start",paddingTop:3,children:t===c.UB?(0,j.jsx)(m.g,{name:"ledgerSignatureRejected",scaleMultiplier:1}):(0,j.jsx)(f.t,{illustration:"LedgerErrorMiami",children:(0,j.jsx)(m.g,{name:"ledgerFailed",scaleMultiplier:1})})})]}),(0,j.jsxs)(y.T,{gap:2,children:[(0,j.jsx)(v.f,{as:"p",children:T(D[0])}),(0,j.jsx)(h.K,{as:"p",color:A?"fg":"fgMuted",children:T(D[1])}),void 0!==t&&!(0,c.ux)(t)&&(0,j.jsx)(S.C,{as:"p",children:T(k.errorMessage,{error:t})}),n&&(null==n?void 0:n.length)>0&&(0,j.jsx)(w.v,{as:"p",children:T(k.errorMessage,{error:n})})]}),(0,j.jsxs)(y.T,{alignItems:"center",gap:2,children:[(0,j.jsx)(p.$n,{testID:"".concat(O,"-try-again-btn"),block:!0,onClick:I,children:t===c._c?T(k.gotIt):T(k.tryAgainCTA)}),(0,j.jsx)(l.V,{unset:!0,children:(0,j.jsx)(j.Fragment,{children:t!==c._c&&(0,j.jsx)(E.N,{testID:"".concat(O,"-having-trouble"),font:"body",color:"fgPrimary",onClick:L,as:"button",children:T(k.havingTrouble)})})})]})]})}A(D,"useIntl{{ formatMessage }}\nuseOnboardingStepper{{ goBack }}\nuseMiamiIllustrationsEnabled{isMiamiIllustrationsEnabled}\nuseCallback{handleOnBackOrTryAgainPress}\nuseCallback{handleHavingTroublePress}",(function(){return[s.A,M.A,i.f]})),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(O,"testIDPrefix","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),T.register(k,"messages","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),T.register(D,"HWTroubleConnecting","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx")),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)},71989:(e,t,n)=>{n.d(t,{h:()=>w});var r,a,o,s=n(14041),i=n(9623),c=n(88751),u=n(86768),l=n(5961),d=n(2775),f=n(62207),g=n(42007),p=n(60156),m=n(63302),y=n(31085);function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return v(u,"_invoke",function(n,r,a){var o,i,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,s}};function g(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,o=l[t],g=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=g&&((a=n<2&&g<o[1])?(i=0,f.v=r,f.n=o[1]):g<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,p),i=l,c=p;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),g(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==s)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var s={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(v(t={},r,(function(){return this})),t),d=u.prototype=i.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,v(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,v(d,"constructor",u),v(u,"constructor",c),c.displayName="GeneratorFunction",v(u,a,"GeneratorFunction"),v(d),v(d,a,"Generator"),v(d,r,(function(){return this})),v(d,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:o,m:f}})()}function v(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}v=function(e,t,n,r){function o(t,n){v(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},v(e,t,n,r)}function h(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){h(o,r,a,s,i,"next",e)}function i(e){h(o,r,a,s,i,"throw",e)}s(void 0)}))}}function w(e){var t=e.message,n=e.typedDataJson,r=e.signSuccess,a=e.signError,o=e.derivationPath,v=(0,l.G)(),h=(0,l.n)(),w=(0,s.useCallback)(S(b().m((function e(){var s,l,g,y,v,S,w,E,M,_,x,j,T;return b().w((function(e){for(;;)switch(e.p=e.n){case 0:if(o){e.n=1;break}return e.a(2,a(new Error("No derivation path was provided for ledger message.")));case 1:return e.p=1,h(!0),e.n=2,navigator.hid.getDevices();case 2:if(0!==e.v.filter((function(e){return e.vendorId===p.zL})).length){e.n=3;break}throw new c.o("TransportError",u.Ub,void 0);case 3:return e.n=4,(0,m.bv)({derivationPath:o});case 4:if(s=e.v,l=s.address,!n){e.n=6;break}return g=JSON.parse(n),!0,y=i.TypedDataUtils.sanitizeData(g),v=y.domain,S=y.types,w=y.primaryType,E=y.message,M=i.TypedDataUtils.hashStruct("EIP712Domain",v,S,true).toString("hex"),_=i.TypedDataUtils.hashStruct(w,E,S,true).toString("hex"),e.n=5,(0,m.pH)({address:l,derivationPath:o,domainSeparatorHex:M,hashStructMessageHex:_});case 5:x=e.v,h(!1),r((0,f.im)(x.signature));case 6:return e.n=7,(0,m.lT)({address:l,derivationPath:o,message:(0,d.LL)(t)});case 7:j=e.v,h(!1),r((0,f.im)(j.signature)),e.n=9;break;case 8:e.p=8,T=e.v,h(!1),a(T);case 9:return e.a(2)}}),e,null,[[1,8]])}))),[n,o,t,h,a,r]),E=(0,s.useMemo)((function(){return v?(0,y.jsx)(g.t,{onResend:w,requestType:"message"}):null}),[v,w]);return(0,s.useMemo)((function(){return{signMessageLedger:w,isSignMessageLedgerLoading:v,hardwareWalletScreen:E}}),[v,E,w])}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(w,"useIsHardwareWalletSigning{isHardwareWalletSigning}\nuseSetIsHardwareWalletSigning{setIsHardwareWalletSigning}\nuseCallback{signMessageLedger}\nuseMemo{hardwareWalletScreen}\nuseMemo{}",(function(){return[l.G,l.n]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(w,"useSignMessageLedger","/workspaces/apps/extension/src/hooks/useSignMessageLedger/useSignMessageLedger.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},57091:(e,t,n)=>{n.r(t),n.d(t,{SignMessage:()=>yt});var r=n(14041),a=n(32183),o=n(8867),s=n(2719),i=n(39249),c=n(84141),u=n(96295),l=n(58910),d=n(71847),f=n(48087),g=n(86768),p=n(46122),m=n(27301),y=n(99633),b=n(45843);function v(e){const t=(0,y.useRecoilValue)(b.H);return(0,r.useMemo)((()=>{const n=t.filter((t=>m.J.isEqual(t.blockchain,e)&&!t.isCustomNetwork()));return n.filter(((e,t)=>n.findIndex((t=>e.primaryAddress===t.primaryAddress))===t)).sort(((e,t)=>void 0!==e.selectedIndex&&void 0!==t.selectedIndex&&e.selectedIndex>t.selectedIndex?1:-1))}),[t,e])}function h(){return v(p.AA)}var S=n(54065);function w(){return v(S.lf)}var E=n(56979),M=n(48390),_=n(22698),x=n(22715);function j(e){const t=(0,x.yS)(e),n=t?M.L:_.j,r=E.b[t?M.L:_.j],a=h(),o=w(),{address:s}=e.params,i=t?a:o;if(!i)throw new Error("No wallets founds");const c=i?.find((e=>e.primaryAddress.toLowerCase()===s.toLowerCase()));if(!c)throw new Error(`Could not find a valid "${r}" wallet index when searching for the "${s}" address for the "${n}" dapp provider`);return c.accountId}var T=n(7427),C=n(84632),A=n(24117),O=n(5961),k=n(74745),D=n(85194),I=n(16835),L=n(52800),R=n(52978),P=n(71748),G=n(52689),H=n(99172),N=n(52493);function U({accountId:e,address:t,blockchainSymbol:n,contractAddress:a}){const o=P.sp[n],s=(0,N.H)();return(0,r.useMemo)((()=>{if(s)return s.find((n=>e===n.accountId&&t.toLowerCase()===n.primaryAddress.toLowerCase()&&H.lg.isEqual(n.network,o.networkSetting.defaultMainnet.network)&&m.J.isEqual(n.blockchain,o.blockchain)&&G.j.isEqual(n.currencyCode,o.currencyCode)&&(!a||n.contractAddress===a)))}),[e,t,a,o.blockchain,o.currencyCode,o.networkSetting.defaultMainnet.network,s])}var q=n(95068);const W=66;var B=n(2775);function F(e){const t=(0,B.m2)(e);return!t||!t.match(/^[ -~]+$/)&&((n=e).length===W&&/^0x[0-9a-f]+$/.test(n)||(0,q.P)(e))?e:t;var n}var Q=n(53926),K=n(16277),J=n(62396),z=n(62207),V=n(1048).Buffer;function $({activeAddress:e,activeWalletIndex:t,request:n,accountId:a,chainId:o}){const s=h(),i=w();return(0,r.useCallback)((async function(){const{address:r}=n.params,c=(0,x.yS)(n);let u;const l=c?s:i;let d=t;if(r.toLowerCase()!==e?.toLowerCase()){const e=l?.find((e=>e.primaryAddress.toLowerCase()===r.toLowerCase()));if(void 0===e)throw new Error("Could not find a valid wallet when searching for the address");d=e.selectedIndex}if(null==d)throw new Error("Active index is undefined");if(c){const{message:e,typedDataJson:t,addPrefix:r}=n.params;if(t&&e.length>W)throw new Error(`Refusing to sign a typed data message of length ${e.length}`);const s=(0,p.s8)(BigInt(d));if(J.g.isSCWAccount(a)){if(!o)throw new Error("Chain ID is required for SCW accounts");const n=(0,K.$)(a,"signEthereumMessageScw");u=await n({message:t||e,accountId:a,chainId:BigInt(o)})}else{const t=(0,K.$)(a,"signEthereumMessage");u=await t({message:(0,z.im)(e),derivationPath:s,accountId:a,addPrefix:r})}}else{const{message:e}=n.params,t=(0,S.jD)(BigInt(d)),r=(0,K.$)(a,"signSolanaMessage");u=await r({message:V.from(e),derivationPath:t,accountId:a})}return u}),[n,s,i,t,e,a,o])}var X=n(10058),Y=n(4767),Z=n(4681),ee=n(44585),te=n(17010),ne=n(61513),re=n(24745),ae=n(59020),oe=n(31503),se=n(31085);const ie=(0,r.createContext)({activeKey:null,setActiveKey:()=>{}}),ce=()=>(0,r.useContext)(ie),ue=e=>{let{activeKey:t,children:n,defaultActiveKey:a,setActiveKey:o,onChange:s}=e;const[i,c]=(0,r.useState)(null!=a?a:null);if((0,oe.yz)()&&(void 0!==t&&void 0===o||void 0===t&&void 0!==o))throw Error("A controlled Accordion must have both activeKey and setActiveKey props");const[u=null,l]=o?[t,o]:[i,c],d=(0,r.useCallback)((e=>{const t="function"==typeof e?e(u):e;t!==u&&(null==s||s(t),l(t))}),[s,u,l]),f=(0,r.useMemo)((()=>({activeKey:u,setActiveKey:d})),[u,d]);return(0,se.jsx)(ie.Provider,{value:f,children:n})};var le=n(63346),de=n(15654),fe=n(49410);const ge=e=>{let{activeKey:t,children:n,defaultActiveKey:a,onChange:o,setActiveKey:s,testID:i,style:c}=e;const{activeColorScheme:u}=(0,le.D)(),l="light"===u?"bgLine":"bgLineHeavy";return(0,se.jsx)(ue,{activeKey:t,defaultActiveKey:a,onChange:o,setActiveKey:s,children:(0,se.jsx)(de.T,{style:c,testID:i,width:"100%",children:(d=r.Children.toArray(n),f=(0,se.jsx)(fe.c,{color:l}),d.map(((e,t)=>(0,se.jsx)(r.Fragment,{children:(0,se.jsxs)(se.Fragment,{children:[e,t!==d.length-1&&f]})},t))))})});var d,f},pe={paddingTop:2,paddingX:3,paddingBottom:3};var me=n(27953),ye=n(85538),be=n(55799),ve=n(84492),he=n(32077),Se=n(28118),we=n(25314);const Ee=e=>"accordion-item-".concat(e,"-header"),Me=e=>"accordion-item-".concat(e,"-panel");function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Te=(0,r.memo)((e=>{let{media:t}=e;return(0,se.jsx)(be.a,{flexGrow:0,flexShrink:0,children:t})})),Ce=(0,r.memo)((e=>{let{title:t,subtitle:n}=e;return(0,se.jsx)(be.a,{className:"titleStyle-t166a7nm",flexGrow:1,flexShrink:1,justifyContent:"flex-start",children:(0,se.jsxs)(de.T,{children:[(0,se.jsx)(we.E,{as:"div",display:"block",font:"headline",overflow:"wrap",children:t}),!!n&&(0,se.jsx)(we.E,{as:"div",className:"subtitleStyle-sve89pn",color:"fgMuted",display:"block",font:"body",overflow:"wrap",children:n})]})})})),Ae=(0,r.memo)((e=>{let{collapsed:t}=e;return(0,se.jsx)(be.a,{justifyContent:"flex-end",children:(0,se.jsx)(he.X,{rotate:t?-180:0})})})),Oe=(0,r.memo)((0,r.forwardRef)(((e,t)=>{let{itemKey:n,title:a,subtitle:o,onClick:s,media:i,collapsed:c=!1,testID:u}=e;const{setActiveKey:l,activeKey:d}=ce(),f=(0,ye.vH)(),g=(0,r.useCallback)((()=>{null==s||s(n),l(n===d?null:n)}),[s,l,n,d]);return(0,se.jsx)("h2",{className:"baseStyle-bt1rln1",children:(0,se.jsx)(Se.o,{ref:t,noScaleOnPress:!0,transparentWhileInactive:!0,"aria-controls":Me(n),"aria-expanded":!c,background:"bg",id:Ee(n),onClick:g,testID:u,width:"100%",children:(0,se.jsxs)(ve.z,xe(xe({alignItems:"center",gap:2,minHeight:me.W7,width:"100%"},f.outer),{},{children:[!!i&&(0,se.jsx)(Te,{media:i}),(0,se.jsx)(Ce,{subtitle:o,title:a}),(0,se.jsx)(Ae,{collapsed:c})]}))})})})));var ke=n(82154);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Re=(0,r.memo)((0,r.forwardRef)(((e,t)=>{let{children:n,collapsed:r=!0,itemKey:a,testID:o,maxHeight:s}=e;return(0,se.jsx)(ke.N,Ie(Ie({ref:t,collapsed:r,maxHeight:null!=s?s:400,testID:o},pe),{},{accessibilityLabelledBy:Ee(a),id:Me(a),role:"region",children:n}))}))),Pe=(0,r.memo)((e=>{let{itemKey:t,title:n,subtitle:r,children:a,onClick:o,media:s,testID:i,headerRef:c,panelRef:u,maxHeight:l,style:d}=e;const{activeKey:f}=ce(),g=f!==t;return(0,se.jsxs)(de.T,{minWidth:300,style:d,testID:i,children:[(0,se.jsx)(Oe,{ref:c,collapsed:g,itemKey:t,media:s,onClick:o,subtitle:r,testID:i&&"".concat(i,"-header"),title:n}),(0,se.jsx)(Re,{ref:u,collapsed:g,itemKey:t,maxHeight:l,testID:i&&"".concat(i,"-panel"),children:a})]})}));var Ge=n(22115),He=n(85581),Ne=n(94330),Ue=n(39262),qe=n(67209),We=n(87755),Be=n(26825),Fe=n(36913),Qe=n(71989),Ke=n(74994),Je=n(29740),ze=n(67662);async function Ve(e,t,n,r){n({request:ze.l.signEthereumMessageSuccess,dappURL:e.dappURL,blockchain:u.fz}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:ze.l.signEthereumMessageSuccess,signature:(0,Je.ensureHexString)((0,z.Ex)(t),!0),blockchain:u.fz,chainId:r}})}var $e=n(69434);async function Xe(e,t,n){n({request:$e.J.signMessageSuccess,dappURL:e.dappURL,blockchain:l.KN}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:$e.J.signMessageSuccess,signature:[...new Uint8Array(t)],blockchain:l.KN}})}var Ye,Ze=n(23426),et=n(79669),tt=n(92229),nt=n(81475),rt=n(19529);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function ot(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return st(u,"_invoke",function(n,r,a){var o,i,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,s}};function g(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,o=l[t],g=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=g&&((a=n<2&&g<o[1])?(i=0,f.v=r,f.n=o[1]):g<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,p),i=l,c=p;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),g(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==s)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var s={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(st(t={},r,(function(){return this})),t),d=u.prototype=i.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,st(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,st(d,"constructor",u),st(u,"constructor",c),c.displayName="GeneratorFunction",st(u,a,"GeneratorFunction"),st(d),st(d,a,"Generator"),st(d,r,(function(){return this})),st(d,"toString",(function(){return"[object Generator]"})),(ot=function(){return{w:o,m:f}})()}function st(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}st=function(e,t,n,r){function o(t,n){st(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},st(e,t,n,r)}function it(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){it(o,r,a,s,i,"next",e)}function i(e){it(o,r,a,s,i,"throw",e)}s(void 0)}))}}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==at(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(Ye="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&Ye(e);var pt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},mt=(0,a.YK)({message:{id:"nV7wyx",defaultMessage:[{type:0,value:"Message"}]},viewMessage:{id:"PtJZK+",defaultMessage:[{type:0,value:"Message data"}]},sign:{id:"rhTc67",defaultMessage:[{type:0,value:"Sign"}]},cancel:{id:"ISJVjg",defaultMessage:[{type:0,value:"Cancel"}]},title:{id:"9aVHbX",defaultMessage:[{type:0,value:"Confirm signature request"}]}});function yt(e){var t,n=e.data,a=n.request,p=n.kind,m=n.dappURL,y=n.eventId,b=n.kind,v=n.dappLogoURLAlt,h=n.dappLogoURL,S=(0,A.gs)(),w=(0,C.n)(),E=(0,Q.yC)(m).hostname,M=(0,D.U2)(n.request,E),_=(0,x.yS)(M),P=(0,d.x)("message_scanner"),G=_?u.fz:l.KN,H=j(n.request),N=U({accountId:H,address:a.params.address,blockchainSymbol:G}),q=(0,R.S)(),W=N?q(N):void 0,B=null==W?void 0:W.hardwareDerivationPath,K=(0,o.A)().formatMessage,J=(0,T.vQ)(H),z=J.isLedgerAccount,V=J.hasLocallyStoredKey,oe=(0,Fe.t)(),ie=(0,r.useContext)(Be.L).disableConfirmButton,ce=ft((0,r.useState)(void 0),2),ue=ce[0],le=ce[1],fe=(0,et.X)(),pe=(0,tt.X)(),me=(0,Ze.U)(),ye=(0,O.G)(),ve=(0,O.n)(),he=(0,f.S)(I.I.MESSAGE_SCANNER).messagePreviewDisclaimer,Se=(0,r.useMemo)((function(){var e=M.params.message,t=M.params,n=t.addPrefix,r=t.typedDataJson;return{addPrefix:n,sanitizedTypedDataJson:_?r:null,readableMessage:n?F(e):e,sanitizedMessage:e,isSpecialMessage:!n&&!r&&_}}),[M,_]),we=Se.sanitizedTypedDataJson,Ee=Se.readableMessage,Me=Se.sanitizedMessage,_e=Se.isSpecialMessage,xe=Se.addPrefix,je=(0,r.useMemo)((function(){return{dappLogoURL:h,dappLogoURLAlt:v,dappURL:m}}),[h,v,m]),Te=(0,r.useMemo)((function(){var e;return null==N||null===(e=N.network.asChain())||void 0===e?void 0:e.chainId}),[N]),Ce=(0,r.useMemo)((function(){var e,t,n,r,o,s,i,c=we?JSON.parse(we):null;return{request:a.method,dappURL:E,blockchain:G,isMessageScannerEnabled:P,eip712DomainName:null!==(e=null==c||null===(t=c.domain)||void 0===t?void 0:t.name)&&void 0!==e?e:"",eip712DomainVersion:null!==(n=null==c||null===(r=c.domain)||void 0===r?void 0:r.version)&&void 0!==n?n:"",contractAddress:null!==(o=null==c||null===(s=c.domain)||void 0===s?void 0:s.verifyingContract)&&void 0!==o?o:"",chainId:null!==(i=null==Te?void 0:Te.toString())&&void 0!==i?i:"",eip712OfferType:c?(0,L.HW)(c):""}}),[G,Te,E,P,a.method,we]);(0,i.yB)(Ce);var Ae=$({request:M,accountId:H,activeAddress:null==N?void 0:N.primaryAddress,activeWalletIndex:null==N?void 0:N.selectedIndex});(0,r.useEffect)((function(){ie||(0,Ke.gd)({dappURL:m,request:p,blockchain:G})}),[G,m,ie,p]);var Oe=(0,r.useCallback)((function(e){me({eventId:y,error:e,dappURL:m,blockchain:G,request:b,chainId:Te}),pe()?fe():(0,rt.f)(50)}),[me,y,m,G,b,Te,pe,fe]),ke=(0,r.useCallback)((function(e){(0,i.Y4)(lt(lt({},Ce),{},{errorName:e.name,errorMessage:e.message})),(0,nt.R)(e),Oe(e)}),[Oe,Ce]),De=(0,r.useCallback)((function(){(0,i.sg)(Ce),Oe(s.standardErrors.provider.userRejectedRequest({}))}),[Oe,Ce]),Ie=(0,c.oM)(Ce),Le=(0,r.useCallback)(function(){var e=ct(ot().m((function e(t){return ot().w((function(e){for(;;)switch(e.n){case 0:if(!_){e.n=2;break}return e.n=1,Ve(n,t,Ie,Te);case 1:e.n=3;break;case 2:return e.n=3,Xe(n,t,Ie);case 3:pe()?fe():(0,rt.f)(50);case 4:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te,n,fe,pe,_,Ie]),Re=(0,r.useCallback)((function(e){e.name.startsWith("Transport")?((0,nt.R)(e),le(e)):ke(e)}),[ke]),Je=(0,Qe.h)({message:Me,typedDataJson:we,signSuccess:Le,signError:Re,derivationPath:B}),ze=Je.signMessageLedger,$e=Je.isSignMessageLedgerLoading,Ye=Je.hardwareWalletScreen,at=(0,r.useCallback)(ct(ot().m((function e(){var t;return ot().w((function(e){for(;;)switch(e.n){case 0:if((0,i.R)(Ce),t=function(){Ae().then((function(e){Le(e)})).catch((function(e){ke(e)}))},!V){e.n=1;break}oe({accountId:H,unlockSuccess:t,unlockError:function(e){ke(new Error("Unknown please try again"))}}),e.n=3;break;case 1:if(!z){e.n=3;break}if(!_){e.n=2;break}return e.a(2,ze());case 2:ke(new Error("Cannot sign request for Ledger: Unsupported blockchain"));case 3:return e.a(2)}}),e)}))),[Ce,V,z,Ae,Le,ke,oe,H,_,ze]),st=(0,r.useCallback)((function(){le(void 0),ve(!1)}),[ve]),it=(0,r.useCallback)((function(e){return(0,se.jsx)(Ne.C,{as:"span",color:"fgPrimary",children:e})}),[]),ut=(0,k.$)({signerAddress:null==N?void 0:N.primaryAddress,request:n.request,dappHostname:E,typedDataJson:we,addPrefix:xe,analyticsData:Ce,wrapInnerWarningText:it,chainId:Te}),dt=ut.messageScannerLoadStartTime,gt=ut.resetLoadTimer,pt=ut.messageScannerData,yt=ut.warningMessage,bt=ut.isMessageScannerLoading,vt=ut.isMessageScannerError,St=!!pt&&(pt.preAuthorizeOperations.length>0||pt.assetChangeOperations.length>0),wt=(0,r.useMemo)((function(){return yt||St?"180px":"220px"}),[St,yt]),Et=(0,r.useMemo)((function(){return(0,se.jsx)(be.a,{bordered:!0,borderRadius:100,borderColor:"bgLine",paddingX:1,paddingTop:1,flexGrow:1,overflow:"scroll",children:(0,se.jsx)(Ne.C,{as:"div",color:"fgMuted",testID:"message-content",children:(0,se.jsx)("pre",{style:{whiteSpace:we?"pre-wrap":"normal",maxHeight:wt},className:ht,children:we||Ee})})})}),[wt,Ee,we]);if((_e||ue||!_)&&z){var Mt=g._c;return null!=ue&&ue.statusCode&&(Mt=ue.statusCode),(0,se.jsx)(de.T,{paddingX:3,paddingTop:3,children:(0,se.jsx)(We.D,{statusCode:Mt,handleBack:st})})}if(ye)return Ye;var _t=P&&!bt&&St&&!vt,xt=P&&vt,jt=P&&bt;return(0,se.jsx)(Z.ff,{height:"100%",header:(0,se.jsx)(X.jq,{variant:"secondary",title:K(mt.title)}),footer:(0,se.jsxs)(de.T,{background:"bg",width:"100%",paddingBottom:2,paddingTop:2,children:[yt?(0,se.jsx)(ae.$,{paddingBottom:.5,message:yt,isDismissible:!1,showErrorIcon:!0,testID:"sign-message-warning"}):null,(0,se.jsx)(de.T,{gap:2,testID:"button-area",paddingX:3,children:(0,se.jsxs)(Ge.e,{accessibilityLabel:"Group",block:!0,children:[(0,se.jsx)(He.$n,{testID:"cancel-message",onClick:De,block:!0,variant:"secondary",children:K(mt.cancel)}),(0,se.jsx)(He.$n,{testID:"sign-message",onClick:at,block:!0,loading:$e,disabled:ie,children:K(mt.sign)})]})})]}),children:(0,se.jsxs)(de.T,{height:"100%",testID:"signature-request-component",overflow:"auto",children:[W&&(0,se.jsx)(ee.H,{walletGroup:W,signingAddress:M.params.address}),(0,se.jsx)(te.g,{dappInfo:je}),(0,se.jsxs)(de.T,{paddingX:P?void 0:3,paddingBottom:1,height:"100%",children:[xt&&(0,se.jsx)(Y.G,{analyticsData:Ce}),jt&&(0,se.jsx)(re.l,{operationSource:I.I.MESSAGE_SCANNER}),_t&&(0,se.jsx)(ne.B,{parsedOperations:pt,userWalletAddress:null!==(t=null==N?void 0:N.primaryAddress)&&void 0!==t?t:"",analyticsData:Ce,resetLoadTimer:gt,operationSource:I.I.MESSAGE_SCANNER,txScannerLoadStartTime:null==dt?void 0:dt.current,exchangeRatesMap:S,activeFiatCurrency:w}),_t?(0,se.jsx)(ge,{testID:"message-container-accordion",children:(0,se.jsx)(Pe,{itemKey:"1",title:K(mt.viewMessage),children:Et})}):(0,se.jsxs)(de.T,{paddingX:3,children:[(0,se.jsxs)(Ue.w,{as:"p",paddingTop:1,paddingBottom:1,paddingEnd:1,children:[K(mt.message),":"]}),Et]}),_t&&(0,se.jsx)(qe.V,{as:"p",color:"fgMuted",paddingTop:2,paddingBottom:1,paddingX:2,testID:"message-scanner-disclaimer",children:he}),(0,se.jsx)(de.T,{})]})]})})}pt(yt,"useExchangeRatesMap{exchangeRatesMap}\nuseActiveFiatCurrency{activeFiatCurrency}\nuseSanitizeMessageSigningRequest{sanitizedRequest}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseAccountIdFromWeb3Request{accountIdFromWeb3Request}\nuseSpecificWalletForAccountId{walletFromWeb3Request}\nuseGetWalletGroupForWallet{getWalletGroupForWallet}\nuseIntl{{\n    formatMessage\n  }}\nuseAccountById{{\n    isLedgerAccount,\n    hasLocallyStoredKey\n  }}\nuseHandleUnlockForTransaction{handleUnlockForTransaction}\nuseContext{{\n    disableConfirmButton\n  }}\nuseState{[ledgerError, setLedgerError](undefined)}\nuseHandleNextQueuedRequest{handleNextQueuedRequest}\nuseHasNextQueuedRequest{hasNextQueuedRequest}\nuseCancel{web3Cancel}\nuseIsHardwareWalletSigning{isHardwareWalletSigning}\nuseSetIsHardwareWalletSigning{setIsHardwareWalletSigning}\nuseTxPreviewMessages{{\n    messagePreviewDisclaimer\n  }}\nuseMemo{{\n    sanitizedTypedDataJson,\n    readableMessage,\n    sanitizedMessage,\n    isSpecialMessage,\n    addPrefix\n  }}\nuseMemo{dappInfo}\nuseMemo{chainId}\nuseMemo{analyticsData}\nuseTriggerWeb3SignMessageRequestViewed{}\nuseBuildDappMessageSignature{signMessage}\nuseEffect{}\nuseCallback{onCancel}\nuseCallback{onError}\nuseCallback{onReject}\nuseTriggerWeb3RequestSendingSuccessResponse{triggerWeb3RequestSendingSuccessResponse}\nuseCallback{onSignSuccess}\nuseCallback{signLedgerError}\nuseSignMessageLedger{{\n    signMessageLedger,\n    isSignMessageLedgerLoading,\n    hardwareWalletScreen\n  }}\nuseCallback{onSignMessage}\nuseCallback{handleLedgerErrorOnBack}\nuseCallback{wrapInnerWarningText}\nuseMessageScanner{{\n    messageScannerLoadStartTime,\n    resetLoadTimer,\n    messageScannerData,\n    warningMessage,\n    isMessageScannerLoading,\n    isMessageScannerError\n  }}\nuseMemo{messageContentHeight}\nuseMemo{messageContent}",(function(){return[A.gs,C.n,D.U2,d.x,j,U,R.S,o.A,T.vQ,Fe.t,et.X,tt.X,Ze.U,O.G,O.n,f.S,i.yB,$,c.oM,Qe.h,k.$]}));var bt,vt,ht="pmv46nh";n(9126),(bt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(bt.register(mt,"messages","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx"),bt.register(yt,"SignMessage","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx"),bt.register(ht,"preSpacing","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx")),(vt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&vt(e)},39249:(e,t,n)=>{n.d(t,{R:()=>p,Y4:()=>y,sg:()=>m,yB:()=>f});var r,a,o,s=n(34767),i=n(55452);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){(0,i.cp)("web3_request.sign_message.request_viewed",l({componentType:s.I5.page,action:s.X2.view},e))}function g(e){(0,i.N8)({metricType:s.vj.count,metricName:"web3_request.sign_message.pre_sign_message_clicked",value:1,tags:{web3_method:e.request,blockchain:e.blockchain,chain_id:e.chainId}}),(0,i.$s)("web3_request.sign_message.pre_sign_message_clicked",l({componentType:s.I5.button,action:s.X2.click},e),s.$c.high)}function p(e){(0,i.N8)({metricType:s.vj.count,metricName:"web3_request.sign_message.sign_message_clicked",value:1,tags:{web3_method:e.request,blockchain:e.blockchain,chain_id:e.chainId}}),(0,i.$s)("web3_request.sign_message.sign_message_clicked",l({componentType:s.I5.button,action:s.X2.click},e),s.$c.high)}function m(e){(0,i.$s)("web3_request.sign_message.cancel_message_clicked",l({componentType:s.I5.button,action:s.X2.click},e),s.$c.high)}function y(e){(0,i.$s)("web3_request.sign_message.error",l({componentType:s.I5.unknown,action:s.X2.measurement},e),s.$c.high)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useLogEventOnMount{}",(function(){return[i.cp]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(f,"useTriggerWeb3SignMessageRequestViewed","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(g,"triggerPreSignWeb3SignMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(p,"triggerWeb3SignMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(m,"triggerWeb3CancelMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(y,"triggerWeb3SignMessageError","/workspaces/libs/analytics/sign-message/SignMessage.tsx")),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},74745:(e,t,n)=>{n.d(t,{$:()=>F});var r=n(14041),a=n(32183),o=n(8867),s=n(32550),i=n(56491),c=n(4244),u=n(71847),l=n(66181),d=n(98053),f=n(66430),g=n(30818),p=n(93606);var m,y=n(88),b=n(7853),v=n(28556),h=n(22715),S=n(10328),w=n(16238),E=n.n(w),M=n(52042),_=n(16835),x=n(59484),j=n(52800),T=n(28889),C=n(28992),A=n(85194),O=n(62759);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function D(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,u=Object.create(c.prototype);return I(u,"_invoke",function(n,r,a){var o,i,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,s}};function g(n,r){for(i=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,o=l[t],g=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=g&&((a=n<2&&g<o[1])?(i=0,f.v=r,f.n=o[1]):g<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&g(l,p),i=l,c=p;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),g(i,c)):f.n=c:f.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==s)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,o),!0),u}var s={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(I(t={},r,(function(){return this})),t),d=u.prototype=i.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,I(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,I(d,"constructor",u),I(u,"constructor",c),c.displayName="GeneratorFunction",I(u,a,"GeneratorFunction"),I(d),I(d,a,"Generator"),I(d,r,(function(){return this})),I(d,"toString",(function(){return"[object Generator]"})),(D=function(){return{w:o,m:f}})()}function I(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}I=function(e,t,n,r){function o(t,n){I(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},I(e,t,n,r)}function L(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function R(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&m(e);var U,q,W="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},B=(0,a.YK)({specialSignatureDisclaimer:{id:"iQc2re",defaultMessage:[{type:0,value:"This type of request is sometimes used for malicious purposes. Only sign if you fully trust this site with access to your account"}]},seaportDisclaimer:{id:"RjXE/h",defaultMessage:[{type:0,value:"Warning: this dapp will remove crypto and NFTs from your wallet. Be sure you trust it."}]},forkWarningDisclaimer:{id:"m5H7GR",defaultMessage:[{type:0,value:"This request could possibly be replayed on a fork of Ethereum. Please verify the dapp."}]},variableAmountSendWarning:{id:"/7heCM",defaultMessage:[{type:0,value:"This order has a variable amount of "},{type:1,value:"variableAmount"},{type:0,value:". If the order is not immediately filled you may send less than the estimate above."}]},variableAmountReceiveWarning:{id:"bAd/Ws",defaultMessage:[{type:0,value:"This order has a variable amount of "},{type:1,value:"variableAmount"},{type:0,value:". If the order is not immediately filled you may receive less than the estimate above."}]},variableQuantitySendWarning:{id:"yDVVNn",defaultMessage:[{type:0,value:"This order has a variable quantity of "},{type:1,value:"variableAmount"},{type:0,value:" items. If the order is not immediately filled you may send less than the estimate above."}]},variableQuantityReceiveWarning:{id:"y0HD9o",defaultMessage:[{type:0,value:"This order has a variable quantity of "},{type:1,value:"variableAmount"},{type:0,value:" items. If the order is not immediately filled you may receive less than the estimate above."}]},permissionsManagerNotAllowed:{id:"2PgyQb",defaultMessage:[{type:0,value:"Spend permission request is not available."}]}});function F(e){var t=e.signerAddress,n=e.request,a=e.dappHostname,o=e.typedDataJson,s=e.addPrefix,i=e.analyticsData,c=e.wrapInnerWarningText,u=e.chainId,l=(0,y.lM)(),d=(0,r.useMemo)((function(){return u?(0,b.z)(u):void 0}),[u]);return Q({signerAddress:t,request:n,dappHostname:a,typedDataJson:o,addPrefix:s,analyticsData:i,wrapInnerWarningText:c,onDataSelect:(0,r.useCallback)((function(e){var t=e.operations,n=(0,v.Q)(t.assetChangeOperations,u,null!=d?d:"");n&&l(n)}),[u,d,l])})}function Q(e){var t=e.signerAddress,n=e.request,a=e.dappHostname,m=e.typedDataJson,y=e.addPrefix,b=e.analyticsData,v=e.wrapInnerWarningText,w=e.onDataSelect,k=(0,s.jE)(),I=(0,o.A)().formatMessage,P=(0,u.x)("message_scanner"),G=!(0,l.l)("kill_switch_eth_pow_fork_warning"),N=(0,u.x)("seaport_warning"),U=(0,c.J9)().formatToCrypto,q=(0,r.useRef)(void 0),W=(0,r.useCallback)((function(){q.current=void 0}),[q]),F=(0,h.yS)(n),Q=(0,r.useMemo)((function(){if(m&&""!==m&&n){var e=JSON.parse(m);return{typedDataJsonParsed:e,encodedJsonMessage:JSON.stringify(e,null,0),signTypedDataVersion:(0,A.yJ)(e,n.params.message)}}return{typedDataJsonParsed:void 0,encodedJsonMessage:void 0,messageType:void 0}}),[m,n]),K=Q.typedDataJsonParsed,J=Q.encodedJsonMessage,z=Q.signTypedDataVersion,V=(0,r.useMemo)((function(){return P&&F&&!!J&&!!t&&!!z}),[P,J,F,t,z]),$=(0,r.useMemo)((function(){return["MESSAGE_SCANNER_API_RESULT",S.createHash("md5").update(null!=J?J:"").digest("hex")]}),[J]),X=(0,O.s)({queryClient:k,queryKey:$,logTimeout:i.yk,scannerService:_.I.MESSAGE_SCANNER}),Y=X.startRequestTimeout,Z=X.clearRequestTimeout,ee=X.hasRequestTimedOut,te=(0,r.useCallback)((function(e){var t,n,r=H(H({},b),{},{errorMessage:null==e||null===(t=e.message)||void 0===t?void 0:t.toString(),errorCode:null==e?void 0:e.code.toString(),errorStatus:null==e||null===(n=e.status)||void 0===n?void 0:n.toString()});(0,i.n7)(r)}),[b]),ne=(0,r.useCallback)((function(e){var n,r=(0,C.ou)(e.decodedMessage.operations||[],b),a=(0,x.$)(r,t),o=(0,T.y)(a);return null==w||w({operations:a,notices:null!==(n=null==e?void 0:e.notices)&&void 0!==n?n:[]}),(0,i.D6)(H(H({},b),{},{numberOfOperations:o.numberOfOperations,operationType:o.operationType})),{operations:a,notices:null==e?void 0:e.notices}}),[b,t,w]),re=(0,r.useCallback)((function(e){var t=(null==e?void 0:e.operations)||{},n=t.preAuthorizeOperations,r=t.assetChangeOperations;if(null!=n&&n.length||null!=r&&r.length){var a=E()([].concat(R(n),R(r))).map((function(e){return e.operationType})),o=H(H({},b),{},{operationTypes:a.join(",")});a.length?(0,i.eS)(o):(0,i.I9)(o)}}),[b]),ae=(0,d.I)($,function(){var e,n=(e=D().m((function e(){return D().w((function(e){for(;;)if(0===e.n)return q.current=Date.now(),(0,i.zY)(b),Y(b),e.a(2,(0,M.LU)(null!=t?t:"",null!=J?J:"",null!=z?z:"v1",a))}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){L(o,r,a,s,i,"next",e)}function i(e){L(o,r,a,s,i,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}(),{staleTime:6e4,enabled:V,retry:!1,refetchOnWindowFocus:!1,onError:te,onSuccess:re,select:ne,onSettled:Z}),oe=ae.data,se=ae.isInitialLoading,ie=ae.isError,ce=(0,r.useMemo)((function(){if(F){if(function({message:e,strictVerifyContractCheck:t}){let n;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){return!1}else{if("object"!=typeof e||null===e)return!1;n=e}return n.domain?.verifyingContract&&"Spend Permission Manager"===n.domain?.name&&n.message?.period&&n.message?.period!==Number(g.tm)&&(!t||(0,p.h)(n.domain.verifyingContract,f.b7))}({message:K,strictVerifyContractCheck:!1}))return{warningMessage:I(B.permissionsManagerNotAllowed),canContinue:!1};if(!y&&!K)return{warningMessage:I(B.specialSignatureDisclaimer),canContinue:!0};if(!K)return{warningMessage:void 0,canContinue:!0};var e=(0,j.V9)(K)&&(0,j.O0)(K)&&N,n=(0,j.Vy)(K)&&G;if((0,i.w_)(H(H({},b),{},{forkWarningShown:n})),e&&"opensea.io"!==a)return{warningMessage:I(B.seaportDisclaimer),canContinue:!0};if(n)return{warningMessage:I(B.forkWarningDisclaimer),canContinue:!0};if(!P)return{warningMessage:void 0,canContinue:!0};if(null!=oe&&oe.operations.assetChangeOperations){var r=oe.operations.assetChangeOperations.find((function(e){return e.operationType===_.S.BALANCE_TRANSFER_RANGE&&e.startAmountValue!==e.endAmountValue})),o=oe.operations.assetChangeOperations.find((function(e){return e.operationType===_.S.ITEM_TRANSFER&&"undefined"!==e.startQuantity&&"undefined"!==e.endQuantity&&e.startQuantity!==e.endQuantity}));if(r){var s=r.fromAddress.toLowerCase()===(null==t?void 0:t.toLowerCase()),c=Number(r.startAmountValue),u=Number(r.endAmountValue),l=BigInt(Math.min(c,u)),d=BigInt(Math.max(c,u)),m=U({currencyCode:r.currencyCode,decimals:r.decimals,value:l,includeCode:!1}),h=U({currencyCode:r.currencyCode,decimals:r.decimals,value:d,includeCode:!1}),S="".concat(m," - ").concat(h," ").concat(r.currencyCode.code),w=null==v?void 0:v(S),E=s?B.variableAmountSendWarning:B.variableAmountReceiveWarning;return{warningMessage:I(E,{variableAmount:w}),canContinue:!0}}if(o){var M=o.fromAddress.toLowerCase()===(null==t?void 0:t.toLowerCase()),x=Number(o.startQuantity),T=Number(o.endQuantity),C=BigInt(Math.min(x,T)),A=BigInt(Math.max(x,T)),O="".concat(C," - ").concat(A),k=null==v?void 0:v(O),D=M?B.variableQuantitySendWarning:B.variableQuantityReceiveWarning;return{warningMessage:I(D,{variableAmount:k}),canContinue:!0}}}}return{warningMessage:void 0,canContinue:!0}}),[F,y,K,N,G,b,P,null==oe?void 0:oe.operations.assetChangeOperations,I,a,t,U,v]),ue=ce.warningMessage,le=ce.canContinue;return{messageScannerLoadStartTime:q,resetLoadTimer:W,messageScannerData:null==oe?void 0:oe.operations,messageScannerNotices:null==oe?void 0:oe.notices,warningMessage:ue,canContinue:le,isMessageScannerLoading:se,isMessageScannerError:ie||ee}}W(F,"useAddTrackedExchangeRates{addTrackedExchangeRates}\nuseMemo{networkId}\nuseCallback{handleDataSelect}\nuseMessageScannerBase{}",(function(){return[y.lM,Q]})),W(Q,"useQueryClient{queryClient}\nuseIntl{{ formatMessage }}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseKillSwitch{}\nuseIsFeatureEnabled{isSeaportWarningEnabled}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseRef{messageScannerLoadStartTime}\nuseCallback{resetLoadTimer}\nuseMemo{{ typedDataJsonParsed, encodedJsonMessage, signTypedDataVersion }}\nuseMemo{shouldRunMessageScanner}\nuseMemo{queryKey}\nuseStartRequestTimeout{{ startRequestTimeout, clearRequestTimeout, hasRequestTimedOut }}\nuseCallback{onMessageScanError}\nuseCallback{onMessageScanSelect}\nuseCallback{onMessageScanSuccess}\nuseQuery{{ data, isInitialLoading, isError }}\nuseMemo{{ warningMessage, canContinue }}",(function(){return[s.jE,o.A,u.x,l.l,u.x,c.J9,O.s,d.I]})),(U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(U.register(B,"messages","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx"),U.register(F,"useMessageScanner","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx"),U.register(Q,"useMessageScannerBase","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx")),(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&q(e)},4767:(e,t,n)=>{n.d(t,{G:()=>S});var r=n(14041),a=n(56491),o=n(32183),s=n(8867);const i=(0,o.YK)({mainTitle:{id:"hXAvR/",defaultMessage:"Message preview unavailable"},fallbackTextBody:{id:"qQVXHY",defaultMessage:"Unable to estimate asset changes. Please make sure you trust this app."}});function c(){const{formatMessage:e}=(0,s.A)();return(0,r.useMemo)((()=>({mainTitle:e(i.mainTitle),textBody:e(i.fallbackTextBody)})),[e])}var u,l=n(2673),d=n(55799),f=n(15654),g=n(84492),p=n(39262),m=n(97541),y=n(31085);e=n.hmd(e),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var b,v,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S=(0,r.memo)(h((function(e){(0,a.oD)(e.analyticsData);var t=c(),n=t.mainTitle,r=t.textBody;return(0,y.jsx)(d.a,{flexDirection:"column",background:"bgAlternate",paddingX:2,paddingY:2,testID:"message-scanner-error",children:(0,y.jsx)(f.T,{children:(0,y.jsxs)(g.z,{justifyContent:"space-between",children:[(0,y.jsx)(l.In,{testID:"dapp-message-safety-tooltip-icon",name:"visibleActive",size:"s",color:"fgMuted",paddingEnd:2,paddingTop:.5}),(0,y.jsxs)(f.T,{children:[(0,y.jsx)(p.w,{as:"h4",children:n}),(0,y.jsx)(m.K,{as:"p",color:"fgMuted",paddingTop:1,children:r})]})]})})})}),"useLogMessageScannerErrorLoaded{}\nuseMessageScannerErrorCopy{{ mainTitle, textBody }}",(function(){return[a.oD,c]})));(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&b.register(S,"MessageScannerError","/workspaces/libs/wallet-cds-extension/components/MessageScannerError/MessageScannerError.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},17010:(e,t,n)=>{n.d(t,{g:()=>_});var r,a=n(14041),o=n(32183),s=n(8867),i=n(52135),c=n(2673),u=n(55799),l=n(84492),d=n(15654),f=n(59600),g=n(86382),p=n(39262),m=n(67209),y=n(31085);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S=(0,o.YK)({title:{id:"h9N6xV",defaultMessage:[{type:0,value:"Review"}]},dappUrlRequestText:{id:"5yfU74",defaultMessage:[{type:0,value:"Request from "},{type:1,value:"dappURL"}]},dappUrlRevokeText:{id:"jKO2jb",defaultMessage:[{type:0,value:"Revoke allowance to "},{type:1,value:"dappURL"}]},headerTootltip:{id:"JaBWDp",defaultMessage:[{type:0,value:"Only sign if you fully trust this site with access to your account"}]}});function w(e){var t=e.dappInfo,n=e.icon,r=e.headerDappName,o=e.isRevokeOperation,v=(0,s.A)().formatMessage,h=t.dappLogoURL,w=t.dappLogoURLAlt,E=t.networkBadgeURL,M=t.networkBadgeAlt,_=t.dappURL,j=b((0,a.useState)(h),2),T=j[0],C=j[1],A=(0,a.useCallback)((function(){C(w)}),[w]),O=(0,a.useMemo)((function(){return r||(0,i.m)(_)}),[_,r]),k=(0,a.useMemo)((function(){return n?(0,y.jsx)(c.In,{name:n,size:"m",color:"fgMuted"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.W,{source:T,resizeMode:"contain",width:32,height:32,shape:"squircle",alt:w,onError:A}),E?(0,y.jsx)("img",{className:x,src:E,alt:M}):null]})}),[w,n,M,E,A,T]);return(0,y.jsxs)(u.a,{alignItems:"flex-start",paddingX:3,paddingY:2,children:[(0,y.jsx)(l.z,{paddingEnd:2,height:"100%",alignSelf:"center",position:"relative",testID:"dapp-transaction-request-header",alignItems:"center",children:(0,y.jsx)(u.a,{position:"relative",children:k})}),(0,y.jsx)(l.z,{children:(0,y.jsxs)(d.T,{children:[(0,y.jsx)(p.w,{as:"h1",tabIndex:0,paddingBottom:.5,children:v(S.title)}),(0,y.jsxs)(u.a,{alignItems:"center",children:[(0,y.jsx)(m.V,{as:"span",color:"fgMuted",children:v(o?S.dappUrlRevokeText:S.dappUrlRequestText,{dappURL:(0,y.jsx)(m.V,{as:"span",color:"fg",testID:"dapp-transaction-request-header-dapp-name",overflow:"break",children:O},"domain-name-style")})}),(0,y.jsx)(g.m,{content:v(S.headerTootltip),placement:"bottom",children:(0,y.jsx)(c.In,{name:"info",size:"xs",color:"fgMuted",paddingStart:1})})]})]})})]})}h(w,"useIntl{{\n    formatMessage\n  }}\nuseState{[sourceUrl, setSourceUrl](dappLogoURL)}\nuseCallback{setAlternativeDappLogoURL}\nuseMemo{dappName: string}\nuseMemo{image}",(function(){return[s.A]}));var E,M,_=(0,a.memo)(w),x="n1wo4ekf";n(85552),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(S,"messages","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(w,"DappTxHeaderDetail","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(_,"DappTxRequestHeader","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(x,"networkBadge","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},9126:(e,t,n)=>{n.r(t)},85552:(e,t,n)=>{n.r(t)},67662:(e,t,n)=>{var r;n.d(t,{l:()=>r}),function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(r||(r={}))},36913:(e,t,n)=>{n.d(t,{t:()=>u});var r=n(83815),a=n(79071),o=n.n(a),s=n(58341),i=n(42894),c=n(22535);function u(){const e=(0,r.Mf)();return(0,i.O)(((t,{accountId:n,unlockSuccess:r,unlockError:a=o()})=>{t&&t.unsubscribe();const i=n||e;return c.T.unlock({...s.uM.TransactionAccess,accountId:i}).subscribe((({status:e})=>{"SUCCESS"===e?r?.():a(new Error("Unlock Failed"))}),(e=>{a(e)}))}),[e])}},56328:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(33396);const a=["loading","entry","username","backup","verify","password","success","import","importOrLink","link","scanQr","select-device","select-account","ledger-signing","ledger-connect-device","trezor-connect-device","ledger-success","hwTroubleConnecting","subdomain-cta","subdomain-education","subdomain-claim-success","subdomain-avatar","subdomain-basic-profile"],o=new URLSearchParams(window.location.search).get("step"),s=a.find((e=>e===o)),i=(0,r.KT)({steps:a,defaultStep:s??"loading"})},95974:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(33396),a=n(56328);function o(){return(0,r.lE)(a.j)}},19529:(e,t,n)=>{n.d(t,{f:()=>a});var r=n(34767);function a(e){(0,r.yu)().finally((()=>{setTimeout((()=>{window.close()}),e||0)}))}},23426:(e,t,n)=>{n.d(t,{U:()=>i});var r,a=n(14041),o=n(2719);!function(e){e.web3RequestCanceled="web3RequestCanceled",e.parentDisconnected="parentDisconnect"}(r||(r={}));var s=n(74994);function i(){return(0,a.useCallback)((async function({eventId:e,error:t,dappURL:n,blockchain:a,request:i,chainId:c}){return new Promise((u=>{(0,s.j)({request:i,dappURL:n,errorMessage:t.message,errorName:t.name,blockchain:a}),chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e,action:r.web3RequestCanceled,error:(0,o.serializeError)(t,i),blockchain:a,chainId:c}},(()=>u()))}))}),[])}},92229:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(14041),a=n(99633),o=n(40441),s=n(79669);function i(){const e=(0,a.useRecoilValue)(s.P);return(0,r.useCallback)((()=>{const t=(0,o.$)().get("originTabId");return null!==t&&(e[t]??[]).length>0}),[e])}},56491:(e,t,n)=>{n.d(t,{n7:()=>g,I9:()=>m,zY:()=>l,eS:()=>d,D6:()=>f,yk:()=>p,w_:()=>y,Yt:()=>c,$e:()=>u,oD:()=>b});var r=n(34767),a=n(52135),o=n(55452);const s={WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_MESSAGE_FOR_TYPED_DATA:"scan_message.web3_request.mismatched_message_for_type_data",WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_SANITIZED_DATA_FOR_TYPED_DATA:"scan_message.web3_request.mismatched_sanitized_data_for_type_data",WEB_3_REQUEST_SCAN_MESSAGE_MESSAGE_INFO:"scan_message.web3_request.scanned_message_info",WEB_3_REQUEST_SCAN_MESSAGE_ERROR_COMPONENT_LOADED:"scan_message.web3_request.scan_message_error_component_loaded",WEB_3_REQUEST_SCAN_MESSAGE_INVOKED:"scan_message.web3_request.scan_message_invoked",WEB_3_REQUEST_SCAN_MESSAGE_SUCCESS:"scan_message.web3_request.scan_message_success",WEB_3_REQUEST_SCAN_MESSAGE_SUCCESSFULLY_PARSED_OPERATIONS:"scan_message.web3_request.scan_message_successfully_parsed_operations",WEB_3_REQUEST_SCAN_MESSAGE_TIMEOUT:"scan_message.web3_request.scan_message_timeout",WEB_3_REQUEST_SCAN_MESSAGE_INVALID_QUERY:"scan_message.web3_request.scan_message_invalid_query",WEB_3_REQUEST_SCAN_MESSAGE_ERROR:"scan_message.web3_request.scan_message_error"};function i(e,t){return(0,o.N8)({metricName:e,metricType:r.vj.count,value:1,tags:{blockchain:t.blockchain,is_message_scanner_enabled:t.isMessageScannerEnabled,chain_id:t.chainId}}),(0,o.Np)(e,t)}function c(e){(0,o.Np)(s.WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_MESSAGE_FOR_TYPED_DATA,{dappURL:(0,a.m)(e)})}function u(e){(0,o.Np)(s.WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_SANITIZED_DATA_FOR_TYPED_DATA,{dappURL:(0,a.m)(e)})}function l(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_INVOKED,e)}function d(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_SUCCESS,e)}function f(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_SUCCESSFULLY_PARSED_OPERATIONS,e)}function g(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_ERROR,e)}function p(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_TIMEOUT,e)}function m(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_INVALID_QUERY,e)}function y(e){i(s.WEB_3_REQUEST_SCAN_MESSAGE_MESSAGE_INFO,e)}function b(e){(0,o.cp)(s.WEB_3_REQUEST_SCAN_MESSAGE_ERROR_COMPONENT_LOADED,{action:r.X2.render,componentType:r.I5.unknown,...e})}},22715:(e,t,n)=>{n.d(t,{Hs:()=>s,w$:()=>a,yS:()=>o});var r=n(69434);function a(e){return"wallet_sendCalls"===e.method}function o(e){return!!e&&["addEthereumChain","ethereumAddressFromSignedMessage","requestEthereumAccounts","signEthereumMessage","signEthereumTransaction","switchEthereumChain","watchAsset","wallet_sendCalls","wallet_showCallsStatus"].includes(e?.method)}function s(e){return[r.l.signMessage,r.l.sendTransaction,r.l.signTransaction,r.l.signAllTransactions].includes(e.method)}},66430:(e,t,n)=>{n.d(t,{a_:()=>r,b7:()=>a});const r=3,a="0xf85210B21cC50302F477BA56686d2019dC9b67Ad"},5961:(e,t,n)=>{n.d(t,{G:()=>o,n:()=>s});var r=n(99633),a=n(44944);function o(){return(0,r.useRecoilValue)(a.Y0)}function s(){return(0,r.useSetRecoilState)(a.Y0)}},44944:(e,t,n)=>{n.d(t,{Wi:()=>c,Y0:()=>s,an:()=>u,dO:()=>d,g_:()=>g,lr:()=>i,x0:()=>l});var r=n(96351),a=n(98226),o=n(99633);const s=(0,o.atom)({key:"isHardwareWalletSigning",default:!1}),i=(0,o.atom)({key:"hasCreatedSessionWithLedger",default:!1}),c=(0,o.atom)({key:"hardwareWalletEthAddressMapAtom",default:new Map}),u=(0,o.atom)({key:"selectedAddressesByAddress",default:{}}),l=(0,o.selector)({key:"selectedAddresses",get:function({get:e}){const t=e(u);return Object.values(t)}}),d=(0,o.selector)({key:"numberOfSelectedAddressesSelector",get:({get:e})=>e(l).length}),f=new a.J("hasSeenLedgerAddAddressNUX"),g=(0,o.atom)({key:"hasSeenLedgerAddAddressNUX",default:!1,effects:[(0,r.D)(f)]})},7853:(e,t,n)=>{n.d(t,{z:()=>i});var r=n(11554),a=n(71434),o=n(54065),s=n(10611);function i(e){let t;if(101===e)t=function(e){if(!e)throw new Error("No chainId provided");const t=s.D.fromChainId(BigInt(e));if(!t)return;return(0,o.uB)(t).network}(e);else t=(0,a.Q)(e);return(0,r.S)({network:t,blockchain:void 0})}},85194:(e,t,n)=>{n.d(t,{U2:()=>d,yJ:()=>l});var r=n(14041),a=n(9623),o=n.n(a),s=n(56491),i=n(46343),c=n.n(i),u=n(62207);function l(e,t){const n=(0,u.im)(t);try{if(o().hashForSignTypedDataLegacy({data:e}).equals(n))return"v1"}catch(e){}try{if(o().hashForSignTypedData_v3({data:e}).equals(n))return"v3"}catch(e){}try{if(o().hashForSignTypedData_v4({data:e}).equals(n))return"v4"}catch(e){}}function d(e,t){const n=(0,r.useCallback)((function(e,t){if("signEthereumMessage"!==e.method)return e;const{message:n,typedDataJson:r}=e.params;if(!r)return e;let o=JSON.parse(r);if("string"==typeof o&&(o=JSON.parse(o)),!l(o,n))throw(0,s.Yt)(t),new Error("Illegal typed data for messsage");const i=a.TypedDataUtils.sanitizeData(o);return c()(i,o)||(0,s.$e)(t),{...e,params:{...e.params,typedDataJson:JSON.stringify(i,null,1)}}}),[]);return(0,r.useMemo)((()=>n(e,t)),[n,e,t])}},81415:(e,t,n)=>{n.d(t,{Gy:()=>o,RU:()=>u,X3:()=>d,cP:()=>c,er:()=>l,qw:()=>f,yW:()=>s});var r=n(34565),a=n(89029);a.Decimal.set({precision:100});const o="0x0000000000000000000000000000000000000000";function s(e,t){const n=new a.Decimal(e),r=new a.Decimal(10).pow(Number(t));return n.mul(r)}function i(e,t){const n=new a.Decimal(e||0),r=new a.Decimal(10).pow(Number(t));return n.div(r)}function c(e,t){const n=(0,r.eH)(e),a=(0,r.eH)(t);return n.greaterThan(a)}function u(e){return"ETH"}function l(e){const t=s(e.toString(),BigInt(-9));return t.greaterThan(10)?t.toFixed(0,a.Decimal.ROUND_HALF_UP):t.greaterThan(1)?t.toDecimalPlaces(1,a.Decimal.ROUND_HALF_UP).toString():t.toSignificantDigits(2,a.Decimal.ROUND_HALF_UP).toFixed(9,a.Decimal.ROUND_HALF_UP).toString().replace(/0+$/,"").replace(/\.$/,"")}function d(e){if(""===e)return 0n;const t=Number(e).toFixed(18);return BigInt(s(t,18n).toFixed(0))}function f(e){return i(e.toString(),18n).toFixed(18)}},32077:(e,t,n)=>{n.d(t,{X:()=>w});var r=n(14041),a=n(31085),o=n(95989),s=n(84137),i=n(29164);function c({children:e,isValidProp:t,...n}){t&&(0,s.D)(t),(n={...(0,r.useContext)(o.Q),...n}).isStatic=(0,i.M)((()=>n.isStatic));const c=(0,r.useMemo)((()=>n),[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return(0,a.jsx)(o.Q.Provider,{value:c,children:e})}var u=n(39970),l=n(2631);const d={property:"rotate",easing:l.cz,duration:l.Cp};var f=n(51101),g=n(2673),p=n(84492),m=n(29593);const y=["rotate","size","color","testID","padding","paddingBottom","paddingEnd","paddingX","paddingStart","paddingTop","paddingY"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S={primary:"fgPrimary",positive:"fgPositive",negative:"fgNegative",foreground:"fg",foregroundMuted:"fgMuted",secondary:"bgSecondary"},w=(0,r.memo)((function(e){let{rotate:t,size:n="s",color:r="fgMuted",testID:o,padding:s,paddingBottom:i,paddingEnd:l,paddingX:b,paddingStart:h,paddingTop:w,paddingY:E}=e,M=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,y);const _=(0,m.q)({enterConfigs:[v(v({},d),{},{toValue:t})],initial:!1}),x=(0,f.d)(),j=x?S[x]:r;return(0,a.jsx)(p.z,{padding:s,paddingBottom:i,paddingEnd:l,paddingStart:h,paddingTop:w,paddingX:b,paddingY:E,children:(0,a.jsx)(c,{reducedMotion:"user",children:(0,a.jsx)(u.m.div,v(v({},_),{},{"data-testid":"".concat(o,"-motion"),children:(0,a.jsx)(g.In,v({color:j,name:"caretUp",size:n},M))}))})})}))},93606:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(66077),a=n(95068);function o(e,t){if(!(0,a.P)(e,{strict:!1}))throw new r.M({address:e});if(!(0,a.P)(t,{strict:!1}))throw new r.M({address:t});return e.toLowerCase()===t.toLowerCase()}}}]);
//# sourceMappingURL=2672.js.map