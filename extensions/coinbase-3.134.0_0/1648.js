/*! For license information please see 1648.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c3cafaba-4861-4dc0-b2a4-2338762f4bf9",e._sentryDebugIdIdentifier="sentry-dbid-c3cafaba-4861-4dc0-b2a4-2338762f4bf9")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1648],{8609:(e,t,r)=>{r.d(t,{SH:()=>A,_6:()=>_,cY:()=>E});var n,a=r(14041),o=r(13394),s=r(69446),i=r(89771),c=r(66656),u=r(47075);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,d,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},f=new s.j("lastTxScannerRequest",void 0,i.q.LocalStorage),m=new s.j("lastTxScannerResult",void 0,i.q.LocalStorage);function A(e,t){try{c.i.set(f,(0,u.A)({transaction:e,dappURL:t}))}catch(e){(0,o.gf)({error:e,context:"data_layer",severity:"error",isHandled:!0})}}function _(e){try{c.i.set(m,(0,u.A)(e))}catch(e){(0,o.gf)({error:e,context:"data_layer",severity:"error",isHandled:!0})}}function T(){var e,t,r=c.i.get(f),n=c.i.get(m);return"string"==typeof r&&(e=(0,u.q)(r)),"string"==typeof n&&(t=(0,u.q)(n)),{request:e,result:t}}function E(e){var t=e.clipboard,r=(0,a.useRef)(1);return(0,a.useCallback)((function(){if(r.current>=5&&r.current%5==0)try{var e=T(),n=e.request,a=e.result;t((0,u.A)({request:n,result:a}))}catch(e){(0,o.gf)({error:e,context:"data_layer",severity:"error",isHandled:!0})}r.current+=1}),[t])}p(E,"useRef{numClicks}\nuseCallback{}"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(f,"StoreKeys_lastTxScannerRequest","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx"),l.register(m,"StoreKeys_lastTxScannerResult","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx"),l.register(A,"cacheTxScannerRequest","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx"),l.register(_,"cacheTxScannerResult","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx"),l.register(T,"getCachedTxScannerData","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx"),l.register(E,"useCopyTxScannerResultsToClipboard","/workspaces/libs/data/stores/TxScanner/hooks/useCopyTxScannerResultsToClipboard.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},69148:(e,t,r)=>{r.d(t,{f:()=>u});var n,a,o,s=r(66181),i=r(14928),c=r(58524);function u(){var e=(0,s.l)((0,i.T)("kill_switch_transaction_preview"));return!c.$9&&!e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(u,"useKillSwitch{isKillSwitched}",(function(){return[s.l]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(u,"useIsTxPreviewEnabled","/workspaces/libs/data/stores/TxScanner/hooks/useIsTxPreviewEnabled.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},62759:(e,t,r)=>{r.d(t,{s:()=>C});var n,a=r(14041),o=r(71847),s=r(98053),i=r(52042),c=r(53769),u=r(16835),l=r(69148);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof i?n:i,u=Object.create(c.prototype);return f(u,"_invoke",function(r,n,a){var o,i,c,u=0,l=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,i=0,c=e,p.n=r,s}};function f(r,n){for(i=r,c=n,t=0;!d&&u&&!a&&t<l.length;t++){var a,o=l[t],f=p.p,m=o[2];r>3?(a=m===n)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(i=0,p.v=n,p.n=o[1]):f<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,p.n=m,i=0))}if(a||r>1)return s;throw d=!0,n}return function(a,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,m),i=l,c=m;(t=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(p.n=-1),f(i,c)):p.n=c:p.v=c);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=p.n<0)?c:r.call(n,p))!==s)break}catch(t){o=e,i=1,c=t}finally{u=1}}return{value:t,done:d}}}(r,a,o),!0),u}var s={};function i(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(f(t={},n,(function(){return this})),t),d=u.prototype=i.prototype=Object.create(l);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,f(d,"constructor",u),f(u,"constructor",c),c.displayName="GeneratorFunction",f(u,a,"GeneratorFunction"),f(d),f(d,a,"Generator"),f(d,n,(function(){return this})),f(d,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:o,m}})()}function f(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}f=function(e,t,r,n){function o(t,r){f(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},f(e,t,r,n)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){T(o,n,a,s,i,"next",e)}function i(e){T(o,n,a,s,i,"throw",e)}s(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var S,y,R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},N="".concat(c.wh,"_cache_key1"),h="".concat(i.xW,"_cache_key1");function C(e){var t=e.queryClient,n=e.queryKey,o=e.logTimeout,s=e.scannerService,i=(0,a.useRef)(void 0),c=b((0,a.useState)(!1),2),u=c[0],l=c[1],d=v(s),f=(0,a.useCallback)((function(e){l(!1);var a=null!=d?d:5e3;i.current={timeout:r.g.setTimeout(E(p().m((function r(){return p().w((function(r){for(;;)switch(r.n){case 0:return i.current=void 0,r.n=1,t.cancelQueries(n);case 1:o(A(A({},e),{},{timeoutLength:a})),l(!0);case 2:return r.a(2)}}),r)}))),a),startTime:Date.now(),timeoutLength:a,props:e}}),[t,n,d,o]),m=(0,a.useCallback)((function(){var e;i.current&&(clearTimeout(null===(e=i.current)||void 0===e?void 0:e.timeout),i.current=void 0)}),[]);return(0,a.useEffect)((function(){if(i.current&&d){var e=Date.now()-i.current.startTime;if(!(e>i.current.timeoutLength)){clearTimeout(i.current.timeout);var a=A(A({},i.current.props),{},{timeoutLength:d});i.current=A(A({},i.current),{},{timeout:r.g.setTimeout(function(){var e=E(p().m((function e(){return p().w((function(e){for(;;)switch(e.n){case 0:return i.current=void 0,e.n=1,t.cancelQueries(n);case 1:o(a),l(!0);case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),d-e)})}}}),[d,o,t,n]),{startRequestTimeout:f,clearRequestTimeout:m,hasRequestTimedOut:u}}function v(e){var t=(0,l.f)(),r=(0,o.x)("message_scanner"),n=e===u.I.TX_SCANNER,a=n?t:r,d=n?N:h,p=n?c.d6:i.eA,f=(0,s.I)([d],p,{staleTime:6e4,retry:!1,enabled:a});return null==f?void 0:f.data}R(C,"useRef{timeoutRef}\nuseState{[hasRequestTimedOut, setRequestTimedOut](false)}\nuseConfiguredTimeout{configuredTimeout}\nuseCallback{startRequestTimeout}\nuseCallback{clearRequestTimeout}\nuseEffect{}",(function(){return[v]})),R(v,"useIsTxPreviewEnabled{isTxPreviewEnabled}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseQuery{timeout}",(function(){return[l.f,o.x,s.I]})),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(N,"TX_SCANNER_TIMEOUT_CACHE_KEY","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx"),S.register(h,"MESSAGE_SCANNER_TIMEOUT_CACHE_KEY","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx"),S.register(C,"useStartRequestTimeout","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx"),S.register(v,"useConfiguredTimeout","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},28556:(e,t,r)=>{r.d(t,{Q:()=>c});var n,a=r(10611),o=r(16835);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var s,i;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function c(e,t,r){var n=t===a.D.whitelisted.SOLANA_MAINNET.chainId;if(t){var s=e.filter((function(e){return e.operationType===o.S.BALANCE_TRANSFER||e.operationType===o.S.BALANCE_TRANSFER_RANGE})).map((function(e){var a;return{code:e.currencyCode,chainId:t.toString(),networkId:r,contractAddress:n?e.contractAddress:null===(a=e.contractAddress)||void 0===a?void 0:a.toLowerCase()}}));if(null!=s&&s.length)return s}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(c,"getAssetsFromOperations","/workspaces/libs/data/stores/TxScanner/utils/getAssetsFromOperations.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},61513:(e,t,r)=>{r.d(t,{B:()=>K});var n=r(14041),a=r(41513),o=r(84141),s=r(48087),i=r(99172),c=r(8609),u=r(32183),l=r(8867),d=r(10611),p=r(4244),f=r(7077),m=r(2775),A=r(16835),_=r(52800);const T=19,E=22;function b(e,t){return t?"+":0n!==e?"\u2212":""}const g=(0,u.YK)({unlimitedTokens:{id:"kNNL7s",defaultMessage:"Unlimited {currencyCode}"},unknownCollection:{id:"oM/YKG",defaultMessage:"Unknown collection"},itemApproval:{id:"TY5zEf",defaultMessage:"{collectionName} {nftName}"},itemTransfer:{id:"aJ49yB",defaultMessage:"{symbol}{quantity}{collectionName} {nftName}"},balanceTransfer:{id:"yYDXiS",defaultMessage:"{symbol}{cryptoAmount}"}});function S({operations:e,userWalletAddress:t,network:r,largeTextCharLimit:a=T,smallTextCharLimit:o=E,exchangeRatesMap:s,activeFiatCurrency:i}){const c=r?.asChain()?.chainId===d.D.whitelisted.SOLANA_MAINNET.chainId,{formatters:u}=(0,l.A)(),{formatToCrypto:S}=(0,p.J9)(),{formatMessage:y}=(0,l.A)(),R=(0,n.useCallback)((function(e){return S({value:e.amountValue,currencyCode:e.currencyCode,decimals:BigInt(e.decimals),includeCode:!0,maxDisplayDecimals:8n,shouldDisplayDustAmount:!1})}),[S]),N=(0,n.useCallback)((function(e){return(0,f.c)({fromCurrencyCode:e.currencyCode,decimals:BigInt(e.decimals),value:e.amountValue,contractAddress:c?e.contractAddress:e.contractAddress?.toLowerCase(),network:r,exchangeRatesMap:s,fiatCurrency:i,formatters:u})}),[i,s,u,c,r]),h=(0,n.useCallback)((e=>{let n,l,d="";switch(e.operationType){case A.S.ITEM_APPROVAL:d=y(g.itemApproval,{collectionName:e.collectionName,nftName:e.NFTName});break;case A.S.ITEM_APPROVAL_ALL:d=e.collectionName||y(g.unknownCollection);break;case A.S.ITEM_TRANSFER:{l=e.toAddress.toLowerCase()===t.toLowerCase();const r=(0,_.Ee)(e,l),n=r>1n?`${r} `:"";d=y(g.itemTransfer,{symbol:l?"+":"\u2212",collectionName:e.collectionName,nftName:e.NFTName,quantity:n});break}case A.S.BALANCE_APPROVAL:if(0n===e.amountValue){d=e.currencyCode.rawValue;break}if(e.currentBalanceValue&&e.currentBalanceValue<e.amountValue){d=y(g.unlimitedTokens,{currencyCode:e.currencyCode.rawValue});break}d=R(e)||"";break;case A.S.BALANCE_TRANSFER:{l=e.toAddress.toLowerCase()===t.toLowerCase();const r=R(e),a=N(e),o=b(e.amountValue,l);d=y(g.balanceTransfer,{symbol:o,cryptoAmount:r||""}),a&&(n=a.toString());break}case A.S.BALANCE_TRANSFER_RANGE:{l=e.toAddress.toLowerCase()===t.toLowerCase();const a=(0,_.DH)(e,l),o=S({value:a,currencyCode:e.currencyCode,decimals:BigInt(e.decimals),includeCode:!0,maxDisplayDecimals:8n,shouldDisplayDustAmount:!1}),p=(0,f.c)({fromCurrencyCode:e.currencyCode,decimals:BigInt(e.decimals),value:a,contractAddress:c?e.contractAddress:e.contractAddress?.toLowerCase(),network:r,exchangeRatesMap:s,formatters:u,fiatCurrency:i}),m=b(a,l);d=y(g.balanceTransfer,{symbol:m,cryptoAmount:o||""}),p&&(n=p.toString());break}}return{fullString:d,subscriptString:n,shortenedStringLargeFont:(0,m.Eu)(d,a),shortenedStringSmallFont:(0,m.Eu)(d,o),isTokenBeingDepositedIntoWallet:l}}),[a,o,y,t,R,N,S,c,r,s,u,i]);return(0,n.useMemo)((()=>{let t=!1;return{content:e.map((function(e){const r=h(e);return r.fullString.length>a&&(t=!0),r})),contentExceedsCharLimit:t}}),[e,h,a])}var y,R=r(72127),N=r(31013),h=r(2673),C=r(15654),v=r(55799),w=r(59600),I=r(79683),O=r(86382),L=r(67209),x=r(39262),k=r(60149),P=r(94330),M=r(31085);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&y(e);var j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H="vlzlpab",W=(0,n.memo)((function(e){var t=e.isPreAuthorizedOperation,r=e.content,n=r.fullString,a=r.subscriptString,o=r.shortenedStringSmallFont,s=r.shortenedStringLargeFont,i=r.isTokenBeingDepositedIntoWallet,c=e.showSmallerFontSizes,u=c?o:s,l=n!==u,d=!t&&i?"fgPositive":void 0,p=a&&(0,M.jsx)(L.V,{as:"span",paddingX:1,color:"fgMuted",testID:"subscript-text",paddingBottom:1,children:a}),f=c?(0,M.jsxs)(C.T,{children:[(0,M.jsx)(x.w,{as:"span",color:d,testID:"headline-text",children:u}),p]}):(0,M.jsxs)(C.T,{children:[(0,M.jsx)(k.f,{as:"span",color:d,children:u}),p]});return l?(0,M.jsx)(O.m,{testID:"cb-tooltip",content:n,placement:"bottom",children:f}):f})),Q=(0,n.memo)(j((function(e){var t=e.operations,r=e.networkChainId,o=e.testIdPrefix,s=void 0===o?"icon-list":o,i=t.length>4,c=t.map((function(e){switch(e.operationType){case A.S.ITEM_TRANSFER:case A.S.ITEM_APPROVAL:case A.S.ITEM_APPROVAL_ALL:return e.shouldUseRemoteImage?(0,M.jsx)(w.W,{source:e.imageUrl,testID:"remote-image-item",height:"45px",width:"45px",size:"xl",borderColor:"bgLine"},"".concat(e.operationType,"-").concat(Math.random())):(0,M.jsx)(R.Vz,{imageUrl:e.imageUrl,borderColor:"bgLine",chainId:r||"",width:"40px",height:"40px"},"".concat(e.operationType,"-").concat(Math.random()));case A.S.BALANCE_TRANSFER:case A.S.BALANCE_TRANSFER_RANGE:case A.S.BALANCE_APPROVAL:return(0,M.jsx)(w.W,{source:e.imageUrl,shape:"circle",size:"xl",borderColor:"bgLine"},"".concat(e.operationType,"-").concat(Math.random()));default:return null}})),u=(0,n.useMemo)((function(){return c.reduce((function(e,t,r){return t?(r%8==0&&e.push([]),e[e.length-1].push(t),e):e}),[]).map((function(e,t){var r;return(0,M.jsx)(I.r,{size:"xl",max:Number.POSITIVE_INFINITY,testID:"".concat(s,"-group-").concat(t),children:e.map((function(e){return(0,M.jsx)(n.Fragment,{children:e},Math.random())}))},"icon-group-".concat(null===(r=e[0])||void 0===r?void 0:r.key))}))}),[c,s]);return(0,M.jsx)("div",{className:i?(0,a.cx)(H):void 0,style:{isolation:"isolate"},children:u})}),"useMemo{remoteImageGroupElements}")),q=(0,n.memo)(j((function(e){var t=e.operations,r=e.addTopSpacing,a=void 0!==r&&r,o=e.isPreAuthorizedOperations,i=e.operationsContent,c=e.showSmallerFontSizes,u=e.isRevokeOperation,l=e.networkChainId,d=e.operationSource,p=void 0===d?A.I.TX_SCANNER:d,f=(0,s.S)(p),m=V((0,n.useMemo)((function(){var e="",t="";return u?(e=f.revokeAllowanceHeader,t=f.revokeAllowanceTooltipContent):o?(e=f.preauthorizeHeader,t=f.preauthorizeTooltipContent):(e=f.assetChangeHeader,t=f.assetChangeTooltipContent),[e,t]}),[f,o,u]),2),_=m[0],T=m[1];return t.length?(0,M.jsxs)(v.a,{flexDirection:"column",paddingTop:a?2:0,children:[(0,M.jsxs)(v.a,{paddingBottom:2,alignItems:"center",children:[(0,M.jsx)(P.C,{as:"div",children:_}),(0,M.jsx)(O.m,{content:T,placement:"bottom",children:(0,M.jsx)(h.In,{testID:o?"cb-preauthorize-warning":"cb-asset-changes-warning",name:"info",size:"xs",color:"fgMuted",paddingStart:1})})]}),(0,M.jsxs)(v.a,{justifyContent:"space-between",alignItems:"center",children:[(0,M.jsx)(v.a,{flexDirection:"column",children:i.map((function(e){return(0,M.jsx)(W,{content:e,isPreAuthorizedOperation:o,showSmallerFontSizes:c},Math.random())}))}),(0,M.jsx)(Q,{operations:t,networkChainId:l,testIdPrefix:o?"preauth-icon-list":"asset-change-icon-list"})]})]}):null}),"useTxPreviewMessages{txPreviewMessages}\nuseMemo{[headerMessage, headerTooltipContent]}",(function(){return[s.S]})));function X(e){var t=e.userWalletAddress,r=e.parsedOperations,a=r.assetChangeOperations,s=r.preAuthorizeOperations,u=e.analyticsData,l=e.txScannerLoadStartTime,d=e.resetLoadTimer,p=e.isRevokeOperation,f=e.networkChainId,m=e.network,A=e.operationSource,_=e.exchangeRatesMap,T=e.activeFiatCurrency,E=(0,N.i)(),b=(0,n.useMemo)((function(){if(l){var e=Date.now()-l;return d(),e}}),[d,l]),g=(0,n.useMemo)((function(){return null!=m?m:i.lg.fromChainId({chainId:BigInt(null!=f?f:1)})}),[m,f]),y=S({operations:a,userWalletAddress:t,network:g,exchangeRatesMap:_,activeFiatCurrency:T}),R=y.content,h=y.contentExceedsCharLimit,C=S({operations:s,userWalletAddress:t,network:g,exchangeRatesMap:_,activeFiatCurrency:T}),w=C.content,I=C.contentExceedsCharLimit;(0,o.$d)(G(G({},u),{},{elapsedTimeToRenderTxPreviewComponent:b}));var O=(0,c.cY)({clipboard:E});return(0,M.jsxs)(v.a,{background:"bgAlternate",paddingX:3,paddingY:2,flexDirection:"column",onClick:O,testID:"tx-preview-component",children:[(0,M.jsx)(q,{operations:s,isPreAuthorizedOperations:!0,operationsContent:w,showSmallerFontSizes:h||I,isRevokeOperation:p,networkChainId:f,operationSource:A}),(0,M.jsx)(q,{operations:a,isPreAuthorizedOperations:!1,addTopSpacing:s.length>0,operationsContent:R,showSmallerFontSizes:h||I,networkChainId:f,operationSource:A})]})}j(X,"useClipboard{clipboard}\nuseMemo{elapsedTimeToRenderTxPreviewComponent}\nuseMemo{resolvedNetwork}\nuseTextDetailsForOperations{{\n    content: assetChangeOperationsContent,\n    contentExceedsCharLimit: assetChangeShowSmallFontSize\n  }}\nuseTextDetailsForOperations{{\n    content: preAuthorizeOperationsContent,\n    contentExceedsCharLimit: preAuthShowSmallFontSize\n  }}\nuseTriggerTxPreviewLoaded{}\nuseCopyTxScannerResultsToClipboard{txPreviewClicked}",(function(){return[N.i,S,S,o.$d,c.cY]}));var z,Y,K=(0,n.memo)(X);r(24770),(z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(z.register(H,"verticalIconGroupContainer","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx"),z.register(W,"TokenContent","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx"),z.register(Q,"IconGroup","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx"),z.register(q,"OperationGroup","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx"),z.register(X,"TxPreviewComponent","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx"),z.register(K,"TxPreview","/workspaces/libs/wallet-cds-web/components/TxPreview/TxPreview.tsx")),(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Y(e)},44080:(e,t,r)=>{r.d(t,{l:()=>g});var n,a=r(14041),o=r(48087),s=r(16835),i=r(2673),c=r(55799),u=r(84492),l=r(86382),d=r(14787),p=r(66809),f=r(525),m=r(5295),A=r(67209),_=r(31085);function T(e){var t=e.operationSource,r=void 0===t?s.I.TX_SCANNER:t,n=(0,o.S)(r);return(0,_.jsxs)(c.a,{flexDirection:"column",dangerouslySetBackground:"rgb(var(--gray15))",paddingX:3,paddingY:2,testID:"tx-scanner-fallback",children:[(0,_.jsxs)(u.z,{children:[(0,_.jsx)(A.V,{as:"p",color:"fgMuted",children:n.fallbackTitle}),(0,_.jsx)(l.m,{content:n.assetChangeTooltipContent,placement:"bottom",children:(0,_.jsx)(i.In,{testID:"dapp-transaction-safety-tooltip-icon",name:"info",size:"xs",color:"fgMuted",paddingStart:.5})})]}),(0,_.jsx)(d.X,{children:(0,_.jsx)(p.B,{children:(0,_.jsx)(f.H,{className:S,children:(0,_.jsx)(m.v,{title:!0,end:"pictogram",innerSpacing:{paddingX:0,paddingTop:0}})})})})]})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(T,"useTxPreviewMessages{txPreviewMessages}",(function(){return[o.S]}));var E,b,g=(0,a.memo)(T),S="s4pjp9p";r(44830),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(T,"TxScannerFallback","/workspaces/libs/wallet-cds-web/components/TxPreviewFallback/TxPreviewFallback.tsx"),E.register(g,"TransactionScannerFallback","/workspaces/libs/wallet-cds-web/components/TxPreviewFallback/TxPreviewFallback.tsx"),E.register(S,"style","/workspaces/libs/wallet-cds-web/components/TxPreviewFallback/TxPreviewFallback.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},24770:(e,t,r)=>{r.r(t)},44830:(e,t,r)=>{r.r(t)},44002:(e,t,r)=>{r.d(t,{xs:()=>_,mM:()=>f,R5:()=>u,hQ:()=>l,PK:()=>i,bG:()=>c,Ru:()=>d,HO:()=>p,h_:()=>A,UD:()=>m});var n=r(34767),a=r(55452);const o={WEB_3_REQUEST_SCAN_TX_INVOKED:"scan_tx.web3_request.scan_tx_invoked",WEB_3_REQUEST_SCAN_TX_SUCCESS:"scan_tx.web3_request.scan_tx_success",WEB_3_REQUEST_SCAN_TX_TIMEOUT:"scan_tx.web3_request.scan_tx_timeout",WEB_3_REQUEST_SCAN_TX_UNHANDLED_OPERATION_TYPE:"scan_tx.web3_request.scan_tx_unhandled_operation_type",WEB_3_REQUEST_SCAN_TX_ERROR:"scan_tx.web3_request.scan_tx_error",WEB_3_REQUEST_SCAN_TX_INVALID_QUERY:"scan_tx.web3_request.scan_tx_invalid_query",WEB_3_REQUEST_GET_CRYPTO_CURRENCIES_SUCCESS:"scan_tx.web3_request.get_crypto_currencies_success",WEB_3_REQUEST_GET_CRYPTO_CURRENCIES_IMAGE_NOT_FOUND:"scan_tx.web3_request.get_crypto_currencies_image_not_found",WEB_3_REQUEST_GET_CRYPTO_CURRENCIES_ERROR:"scan_tx.web3_request.get_crypto_currencies_error",WEB_3_REQUEST_PARSING_ERROR:"scan_tx.web3_request.parsing_error",WEB_3_REQUEST_TOKEN_IMAGE_NOT_RETURNED:"scan_tx.web3_request.token_image_not_returned",WEB_3_REQUEST_SUCCESSFULLY_PARSED_WITH_OPERATION_DETAILS:"scan_tx.web3_request.SUCCESSFULLY_PARSED_WITH_OPERATION_DETAILS",SCAN_TX_NATIVE_SEND_ANOMALY:"scan_tx.native_send_anomaly"};function s(e,t){const r={blockchain:t.blockchain,walletType:t.walletType,simulationEnabled:t.simulationEnabled,operationType:t.operationType,isInvokedFromNativeSend:t.isInvokedFromNativeSend};return(0,a.N8)({metricName:e,metricType:n.vj.count,value:1,tags:{...r}}),(0,a.Np)(e,t)}function i(e){s(o.WEB_3_REQUEST_SCAN_TX_SUCCESS,e)}function c(e){s(o.WEB_3_REQUEST_SCAN_TX_TIMEOUT,e)}function u(e){s(o.WEB_3_REQUEST_SCAN_TX_UNHANDLED_OPERATION_TYPE,e)}function l(e){s(o.WEB_3_REQUEST_SCAN_TX_INVALID_QUERY,e)}function d(e){s(o.WEB_3_REQUEST_SCAN_TX_ERROR,e)}function p(e){s(o.WEB_3_REQUEST_SCAN_TX_INVOKED,e)}function f(e,t){const r={operationType:e,errorMessage:t?.message,errorName:t?.name};var n,s;n=o.WEB_3_REQUEST_PARSING_ERROR,s=r,(0,a.Np)(n,s)}function m(e){s(o.WEB_3_REQUEST_TOKEN_IMAGE_NOT_RETURNED,{dappURL:"",request:"",...e})}function A(e){s(o.WEB_3_REQUEST_SUCCESSFULLY_PARSED_WITH_OPERATION_DETAILS,e)}function _(e){s(o.SCAN_TX_NATIVE_SEND_ANOMALY,e)}},84141:(e,t,r)=>{r.d(t,{zE:()=>i,NN:()=>s,RQ:()=>c,Dw:()=>l,$d:()=>u,wl:()=>m,uE:()=>d,x6:()=>p,oM:()=>f,wZ:()=>A});var n=r(34767),a=r(55452);const o={WEB3_REQUEST_TX_GENERATION_START:"sign_transaction.web3_request.tx_generation_start",WEB3_REQUEST_TX_GENERATION_ERROR:"sign_transaction.web3_request.tx_generation_error",SIGN_TRANSACTION_WEB3_REQUEST_SENDING_SUCCESS_RESPONSE:"sign_transaction.web3_request.sending_success",WEB3_REQUEST_SENDING_CANCELED_RESPONSE:"sign_transaction.web3_request.sending_canceled",SIGN_TRANSACTION_WEB3_REQUEST_TRANSACTION_REQUEST_VIEWED:"sign_transaction.web3_request.transaction_request_viewed",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_POPUP_REQUEST_VIEWED:"sign_transaction.web3_request.fraud_warning_confirmation_popup_request_viewed",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_BACK_BUTTON_CLICKED:"sign_transaction.web3_request.fraud_warning_confirmation_back_button_clicked",TX_APPROVAL_COMPONENT_LOADED:"tx_approval_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_TX_PREVIEW_COMPONENT_LOADED:"sign_transaction_web3_request.tx_preview_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_TX_ERROR_COMPONENT_LOADED:"sign_transaction_web3_request.tx_error_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_CONFIRM_TRANSACTION_CLICKED:"sign_transaction.web3_request.confirm_transaction_clicked",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_CLICKED:"sign_transaction.web3_request.fraud_warning_confirmation_clicked",SIGN_TRANSACTION_WEB3_REQUEST_SIGN_TRANSACTION_ERROR:"sign_transaction.web3_request.sign_transaction_error",SIGN_TRANSACTION_REQUEST_CONFIRM_BUTTON_ENABLED:"sign_transaction.web3_request.confirm_button_enabled"};function s(e){(0,a.cp)(o.SIGN_TRANSACTION_WEB3_REQUEST_TRANSACTION_REQUEST_VIEWED,{loggingId:"396c898f-c5ab-4f7a-ba3e-43fd9f3858d6",componentType:n.I5.page,action:n.X2.view,dapp:e?.dappURL,...e})}function i(e){(0,a.cp)(o.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_POPUP_REQUEST_VIEWED,{loggingId:"92cd7a0a-6f1c-49af-a386-3184464d8634",action:n.X2.view,componentType:n.I5.page,dapp:e.dappURL,...e})}function c(e){return(0,a.gd)(o.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_BACK_BUTTON_CLICKED,{action:n.X2.click,componentType:n.I5.button,dapp:e.dappURL,...e})}function u(e){(0,a.cp)(o.SIGN_TRANSACTION_WEB3_REQUEST_TX_PREVIEW_COMPONENT_LOADED,{loggingId:"21817d96-e697-4b8d-bba3-48fed57a6b1c",action:n.X2.render,componentType:n.I5.unknown,dapp:e.dappURL,...e})}function l(e){(0,a.cp)(o.SIGN_TRANSACTION_WEB3_REQUEST_TX_ERROR_COMPONENT_LOADED,{loggingId:"68c3b689-4c11-427f-a034-b310700f77a1",action:n.X2.render,componentType:n.I5.unknown,dapp:e.dappURL,...e})}function d(e){const t=(0,a.gd)(o.SIGN_TRANSACTION_WEB3_REQUEST_CONFIRM_TRANSACTION_CLICKED,{loggingId:"1529a00c-267c-48af-b931-2a82e93ba27c",action:n.X2.click,componentType:n.I5.button,dapp:e.dappURL,...e},n.$c.high);return()=>{(0,a.N8)({metricType:n.vj.count,metricName:o.SIGN_TRANSACTION_WEB3_REQUEST_CONFIRM_TRANSACTION_CLICKED,value:1,tags:{web3_method:e.request,blockchain:e.blockchain,chain_id:e.chainId}}),t()}}function p(e){return(0,a.gd)(o.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_CLICKED,{loggingId:"b3e5390f-ebf7-4759-846c-34432edc8da2",action:n.X2.click,componentType:n.I5.button,dapp:e.dappURL,...e},n.$c.high)}function f(e){return(0,a.gd)(o.SIGN_TRANSACTION_WEB3_REQUEST_SENDING_SUCCESS_RESPONSE,{loggingId:"8723cd14-81d1-4c6d-9c6f-5ee9c94e63d7",action:n.X2.measurement,componentType:n.I5.unknown,dapp:e.dappURL,...e},n.$c.high)}function m(e){return(0,a.gd)("sign_transaction.web3_request.cancel_transaction_clicked",{loggingId:"18c2d6a6-0b8f-4af1-b5e0-f0c1496bbd26",action:n.X2.click,componentType:n.I5.button,dapp:e.dappURL,...e},n.$c.high)}function A(e){return(0,a.gd)(o.SIGN_TRANSACTION_WEB3_REQUEST_SIGN_TRANSACTION_ERROR,{...e.eventData,loggingId:"ad70b8de-b408-4ef6-9204-ee580c4d1025",action:n.X2.measurement,componentType:n.I5.unknown,dapp:e.dappURL,...e},n.$c.high)}},48087:(e,t,r)=>{r.d(t,{S:()=>c});var n=r(14041),a=r(32183),o=r(8867),s=r(16835);const i=(0,a.YK)({revokeAllowanceHeader:{id:"V8k0KX",defaultMessage:"Revoke allowance"},preauthorizeHeader:{id:"EJUMuc",defaultMessage:"Pre-authorize withdrawal"},assetChangeHeader:{id:"jmBafj",defaultMessage:"Asset changes (estimate)"},preauthorizeTooltipContentForTransaction:{id:"At6Faa",defaultMessage:"This preview is based on a simulation of the transaction."},preauthorizeTooltipContentForMessage:{id:"I1e1X5",defaultMessage:"This preview is based on a simulation of the message."},assetChangeTooltipContentForTransaction:{id:"AVv4Nz",defaultMessage:"For your safety, we simulate the transaction in advance. This estimate may not be accurate."},assetChangeTooltipContentForMessage:{id:"GKBpfP",defaultMessage:"For your safety, we simulate the message in advance. This estimate may not be accurate."},revokeAllowanceTooltipContent:{id:"9a1h4g",defaultMessage:"This removes a dapp's ability to withdraw a particular token or NFT from your wallet."},fallbackTitleForTransaction:{id:"OnGi2E",defaultMessage:"Previewing your transaction...."},fallbackTitleForMessage:{id:"mQXajY",defaultMessage:"Previewing your message...."},messagePreviewDisclaimer:{id:"hQZ6nd",defaultMessage:"By signing this request, you will allow the dapp to create a transaction for the above asset changes in the future. Those changes may not occur immediately."}});function c(e){const{formatMessage:t}=(0,o.A)();return(0,n.useMemo)((()=>({revokeAllowanceHeader:t(i.revokeAllowanceHeader),preauthorizeHeader:t(i.preauthorizeHeader),assetChangeHeader:t(i.assetChangeHeader),preauthorizeTooltipContent:e===s.I.TX_SCANNER?t(i.preauthorizeTooltipContentForTransaction):t(i.preauthorizeTooltipContentForMessage),assetChangeTooltipContent:e===s.I.TX_SCANNER?t(i.assetChangeTooltipContentForTransaction):t(i.assetChangeTooltipContentForMessage),revokeAllowanceTooltipContent:t(i.revokeAllowanceTooltipContent),fallbackTitle:e===s.I.TX_SCANNER?t(i.fallbackTitleForTransaction):t(i.fallbackTitleForMessage),messagePreviewDisclaimer:t(i.messagePreviewDisclaimer)})),[e,t])}},52042:(e,t,r)=>{r.d(t,{LU:()=>i,eA:()=>c,xW:()=>o});var n=r(16835),a=r(74146);const o="scanMessageTimeout",s="scanMessage";async function i(e,t,r,o){const i=`eth_sign_typed_data_${r}_params`,{result:c}=await(0,a.TB)(s,{[i]:{signer:e,data:t,domain:o}});return function(e){return e.decodedMessage.operations?.forEach((function(e){e.operationType===n.S.BALANCE_TRANSFER&&(e.balanceTransfer.amountRange?.startAmount.currency&&void 0===e.balanceTransfer.amountRange?.startAmount.currency.decimals&&(e.balanceTransfer.amountRange.startAmount.currency.decimals=0),e.balanceTransfer.amountRange?.endAmount.currency&&void 0===e.balanceTransfer.amountRange?.endAmount.currency.decimals&&(e.balanceTransfer.amountRange.endAmount.currency.decimals=0),e.balanceTransfer.currentBalance&&void 0===e.balanceTransfer.currentBalance.currency.decimals&&(e.balanceTransfer.currentBalance.currency.decimals=0)),e.operationType===n.S.BALANCE_APPROVAL&&(e.balanceApproval?.amount?.currency&&void 0===e.balanceApproval.amount.currency.decimals&&(e.balanceApproval.amount.currency.decimals=0),e.balanceApproval.currentBalance&&void 0===e.balanceApproval.currentBalance.currency.decimals&&(e.balanceApproval.currentBalance.currency.decimals=0),e.balanceApproval.allowance?.currency&&void 0===e.balanceApproval.allowance.currency.decimals&&(e.balanceApproval.allowance.currency.decimals=0))})),e}(c)}async function c(){const{result:e}=await(0,a.hm)(o,{}),t=e.timeout;if("number"!=typeof t)throw new Error("Invalid timeout");return t}},53769:(e,t,r)=>{r.d(t,{Zg:()=>i,d6:()=>c,wh:()=>s});var n=r(16835),a=r(74146);const o="scanTxV2",s="scanTxTimeout";async function i({txData:e,networkName:t,from:r,shouldSimulate:s,dappURL:i,entryPointAddress:c}){const u=`${o}${s?"?simulate=true":""}`,{result:l}=await(0,a.TB)(u,{txData:e,networkName:t,from:r,clientName:"walletMobile",domain:i,entrypoint:c});return function(e){return e.decodedTx.operations?.forEach((function(e){e.operationType===n.S.BALANCE_TRANSFER&&(e.balanceTransfer.amount.currency&&void 0===e.balanceTransfer.amount.currency.decimals&&(e.balanceTransfer.amount.currency.decimals=0),e.balanceTransfer.currentBalance&&void 0===e.balanceTransfer.currentBalance.currency.decimals&&(e.balanceTransfer.currentBalance.currency.decimals=0)),e.operationType===n.S.BALANCE_APPROVAL&&(e.balanceApproval?.amount?.currency&&void 0===e.balanceApproval.amount.currency.decimals&&(e.balanceApproval.amount.currency.decimals=0),e.balanceApproval.currentBalance&&void 0===e.balanceApproval.currentBalance.currency.decimals&&(e.balanceApproval.currentBalance.currency.decimals=0),e.balanceApproval.allowance?.currency&&void 0===e.balanceApproval.allowance.currency.decimals&&(e.balanceApproval.allowance.currency.decimals=0))})),e}(l)}async function c(){const{result:e}=await(0,a.hm)(s,{}),t=e.timeout;if("number"!=typeof t)throw new Error("Invalid timeout");return t}},16835:(e,t,r)=>{var n,a;r.d(t,{I:()=>a,S:()=>n}),function(e){e.BALANCE_APPROVAL="BALANCE_APPROVAL",e.ITEM_APPROVAL_ALL="ITEM_APPROVAL_ALL",e.ITEM_APPROVAL="ITEM_APPROVAL",e.ITEM_TRANSFER="ITEM_TRANSFER",e.CONTRACT_OWNERSHIP_TRANSFER="CONTRACT_OWNERSHIP_TRANSFER",e.BALANCE_TRANSFER="BALANCE_TRANSFER",e.BALANCE_TRANSFER_RANGE="BALANCE_TRANSFER_RANGE"}(n||(n={})),function(e){e.TX_SCANNER="TX_SCANNER",e.MESSAGE_SCANNER="MESSAGE_SCANNER"}(a||(a={}))},59484:(e,t,r)=>{r.d(t,{$:()=>s});var n=r(81415),a=r(16835),o=r(28992);function s(e,t){return e.reduce((function(r,s){switch(s.operationType){case a.S.ITEM_APPROVAL:if(s.spenderAddress.toLowerCase()===n.Gy)break;if(s.fromAddress.toLowerCase()!==t?.toLowerCase())break;s.isApprovedAddressEoa&&e.some((e=>e.operationType===a.S.ITEM_TRANSFER&&e.toAddress===s.spenderAddress))?r.preAuthorizeOperations.push({...s,isApprovedAddressEoa:!1}):r.preAuthorizeOperations.push(s);break;case a.S.ITEM_APPROVAL_ALL:if(s.fromAddress.toLowerCase()!==t?.toLowerCase())break;r.preAuthorizeOperations.push(s);break;case a.S.BALANCE_APPROVAL:e.find((e=>e.operationType===a.S.BALANCE_TRANSFER&&e.fromAddress.toLowerCase()===t?.toLowerCase()&&e.contractAddress?.toLowerCase()===s.contractAddress?.toLowerCase()&&s.allowanceValue-e.amountValue===s.amountValue&&0n!==e.amountValue))||r.preAuthorizeOperations.push(s);break;case a.S.ITEM_TRANSFER:case a.S.BALANCE_TRANSFER:if(s.operationType===a.S.BALANCE_TRANSFER&&(s.fromAddress===t||s.toAddress===t)){const e=(0,o.MH)(s,r,t);if(e)return e}(0,o.P2)(s,t,(()=>r.assetChangeOperations.unshift(s)),(()=>r.assetChangeOperations.push(s)));break;case a.S.BALANCE_TRANSFER_RANGE:if(s.fromAddress===t||s.toAddress===t){const e=(0,o.Bn)(s,r,t);if(e)return e}(0,o.P2)(s,t,(()=>r.assetChangeOperations.unshift(s)),(()=>r.assetChangeOperations.push(s)))}return r}),{preAuthorizeOperations:[],assetChangeOperations:[],hasAggregatedTransfers:!1})}},52800:(e,t,r)=>{function n(e){return a(e)?"seaport":function(e){return!0===e.types?.PermitSingle?.some((e=>"details"===e.name&&"PermitDetails"===e.type||"sigDeadline"===e.name&&"uint256"===e.type))}(e)?"permit2":function(e){return!0===e.types?.Order?.some((e=>"makeAsset"===e.name&&"Asset"===e.type||"takeAsset"===e.name&&"Asset"===e.type))}(e)?"rarible":""}function a(e){return!0===e.types?.OrderComponents?.some((e=>"offer"===e.name&&"OfferItem[]"===e.type||"consideration"===e.name&&"Consideration[]"===e.type))}function o(e){return"number"==typeof e.domain?.chainId}function s(e){return void 0!==e.message&&(e.message.offer?.length??0)>0||(e.message?.consideration?.length??0)>0}function i(e,t){return t?BigInt(Math.min(Number(e.startAmountValue),Number(e.endAmountValue))):BigInt(Math.max(Number(e.startAmountValue),Number(e.endAmountValue)))}function c(e,t){return e.startQuantity&&e.endQuantity?t?BigInt(Math.min(Number(e.startQuantity),Number(e.endQuantity))):BigInt(Math.max(Number(e.startQuantity),Number(e.endQuantity))):0n}r.d(t,{DH:()=>i,Ee:()=>c,HW:()=>n,O0:()=>s,V9:()=>a,Vy:()=>o})},28889:(e,t,r)=>{function n(e){const t=e.preAuthorizeOperations.some((e=>e.isSpenderAddressEoa||e.isOperatorAddressEoa||e.isApprovedAddressEoa)),r=e.preAuthorizeOperations.length,n=e.assetChangeOperations.length,a=r+n;if(r>0&&n>0)return{operationType:"MIXED_OPERATIONS",numberOfOperations:a,isPreAuthorizeOperationToAnEOA:t};if(r>1)return{operationType:"PRE_AUTHORIZE",numberOfOperations:a,isPreAuthorizeOperationToAnEOA:t};if(n>1)return{operationType:"ASSET_CHANGE",numberOfOperations:a};if(0===r&&0===n)return{operationType:"NO_VALID_OPERATIONS",numberOfOperations:0};return{operationType:(r?e.preAuthorizeOperations[0]:e.assetChangeOperations[0]).operationType,numberOfOperations:a}}r.d(t,{y:()=>n})},28992:(e,t,r)=>{r.d(t,{Bn:()=>l,MH:()=>u,P2:()=>c,ou:()=>i});var n=r(44002),a=r(52689),o=r(16835);function s(e,t){let r=0;if(t?.length){const e=t.find((e=>{try{r=Number(e.size.split("x")[0])}catch(e){return!1}return r>40&&r<250}));return e?e.url:t[0].url}(0,n.UD)(e)}function i(e,t){return e.reduce(((e,r)=>{try{switch(r.operationType){case o.S.BALANCE_APPROVAL:e.push(function(e){const{operationType:t,balanceApproval:{amount:{currency:{decimals:r,symbol:n,images:o,contractAddress:i},value:c},allowance:{value:u},currentBalance:l,spenderAddress:d,fromAddress:p,isSpenderAddressEoa:f}}=e,m={operationType:t,contractAddress:i};return{amountValue:BigInt(c),decimals:BigInt(r),spenderAddress:d,operationType:t,currencyCode:new a.j(n),currentBalanceValue:l?BigInt(l.value):void 0,imageUrl:s(m,o),fromAddress:p,isSpenderAddressEoa:Boolean(f),contractAddress:i,allowanceValue:BigInt(u)}}(r));break;case o.S.ITEM_TRANSFER:e.push(function({operationType:e,itemTransfer:{toAddress:t,collection:r,item:n,fromAddress:a,quantity:o,quantityRange:s,contractAddress:i}}){return{collectionName:r?.name,NFTName:n?.name||n?.tokenId&&`#${n.tokenId}`||"",tokenId:n?.tokenId,imageUrl:n?.imageUrl||r?.imageUrl,operationType:e,spenderAddress:t,fromAddress:a,toAddress:t,startQuantity:s?.startQuantity??o,endQuantity:s?.endQuantity??o,contractAddress:i}}(r));break;case o.S.ITEM_APPROVAL:e.push(function({operationType:e,itemApproval:{approvedAddress:t,fromAddress:r,item:n,collection:a,isApprovedAddressEoa:o}}){return{collectionName:a?.name,NFTName:n?.name||n?.tokenId,imageUrl:n?.imageUrl,operationType:e,spenderAddress:t,fromAddress:r,isApprovedAddressEoa:Boolean(o)}}(r));break;case o.S.ITEM_APPROVAL_ALL:e.push(function({itemApprovalAll:{operatorAddress:e,collection:t,ownerAddress:r,isRevoke:n,isOperatorAddressEoa:a},operationType:o}){return{operationType:o,collectionName:t?.name,spenderAddress:e,imageUrl:t?.imageUrl,fromAddress:r,isRevoke:n,isOperatorAddressEoa:Boolean(a)}}(r));break;case o.S.BALANCE_TRANSFER:e.push(function(e){if(e.balanceTransfer.amountRange){const{operationType:t,balanceTransfer:{amountRange:{startAmount:{currency:{decimals:r,symbol:n,contractAddress:i,images:c},value:u},endAmount:{value:l}},currentBalance:d,toAddress:p,fromAddress:f},validity:m}=e,A={operationType:t,contractAddress:i};return{operationType:o.S.BALANCE_TRANSFER_RANGE,startAmountValue:BigInt(u),endAmountValue:BigInt(l),currencyCode:new a.j(n),decimals:BigInt(r),spenderAddress:p,contractAddress:i,currentBalanceValue:d?BigInt(d.value):void 0,imageUrl:s(A,c),fromAddress:f,toAddress:p,validity:m}}const{operationType:t,balanceTransfer:{amount:{currency:{decimals:r,symbol:n,images:i,contractAddress:c},value:u},currentBalance:l,toAddress:d,fromAddress:p}}=e,f={operationType:t,contractAddress:c};return{amountValue:BigInt(u),decimals:BigInt(r),spenderAddress:d,operationType:t,contractAddress:c,currencyCode:new a.j(n),currentBalanceValue:l?BigInt(l.value):void 0,imageUrl:s(f,i),fromAddress:p,toAddress:d}}(r));break;default:{const e={request:t.request,dappURL:t.dappURL,blockchain:t.blockchain,isTxPreviewEnabled:t.isTxPreviewEnabled,isMessageScannerEnabled:t.isMessageScannerEnabled,operationType:r?.operationType,isInvokedFromNativeSend:t.isInvokedFromNativeSend};(0,n.R5)(e);break}}return e}catch(t){const a=r.operationType;return(0,n.mM)(a,t),e}}),[])}function c(e,t,r,n){e.fromAddress.toLowerCase()===t?.toLowerCase()?r():e.toAddress.toLowerCase()===t?.toLowerCase()&&n()}function u(e,t,r){const n=t.assetChangeOperations.find((t=>t.operationType===o.S.BALANCE_TRANSFER&&t.currencyCode.rawValue===e.currencyCode.rawValue&&t.contractAddress===e.contractAddress));if(!n)return;t.hasAggregatedTransfers=!0;const a=n.toAddress.toLowerCase()===r?.toLowerCase();return c(e,r,(()=>{if(a){const t=n.amountValue-e.amountValue;if(BigInt(t)>0n)n.amountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.amountValue=-t}}else n.amountValue+=e.amountValue}),(()=>{if(a)n.amountValue+=e.amountValue;else{const t=n.amountValue-e.amountValue;if(BigInt(t)>0n)n.amountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.amountValue=-t}}})),t}function l(e,t,r){const n=t.assetChangeOperations.find((t=>t.operationType===o.S.BALANCE_TRANSFER_RANGE&&t.currencyCode.rawValue===e.currencyCode.rawValue&&t.contractAddress===e.contractAddress));if(!n)return;t.hasAggregatedTransfers=!0;const a=n.toAddress.toLowerCase()===r.toLowerCase();return c(e,r,(()=>{if(a){const t=n.startAmountValue-e.startAmountValue,r=n.endAmountValue-e.endAmountValue;if(BigInt(t)>0n)n.startAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.startAmountValue=-t}if(BigInt(r)>0n)n.endAmountValue=r;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.endAmountValue=-r}}else n.startAmountValue+=e.startAmountValue,n.endAmountValue+=e.endAmountValue}),(()=>{if(a)n.startAmountValue+=e.startAmountValue,n.endAmountValue+=e.endAmountValue;else{const t=n.startAmountValue-e.startAmountValue,r=n.endAmountValue-e.endAmountValue;if(BigInt(t)>0n)n.startAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.startAmountValue=-t}if(BigInt(r)>0n)n.endAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.endAmountValue=-t}}})),t}},24745:(e,t,r)=>{r.d(t,{l:()=>n.l});var n=r(44080)},31013:(e,t,r)=>{r.d(t,{i:()=>c});var n=r(14041),a=r(32183),o=r(8867),s=r(89525);const i=(0,a.YK)({successMessage:{id:"t/EkeX",defaultMessage:"Copied to clipboard"},failureMessage:{id:"EO/xSA",defaultMessage:"Could not be copied"}});function c({bottomOffset:e}={}){const t=(0,s.d)(),{formatMessage:r}=(0,o.A)();return(0,n.useCallback)((async(n,a=!0,o=r(i.successMessage),s=r(i.failureMessage))=>{a&&t.clearQueue();let c=o;try{await navigator.clipboard.writeText(n)}catch{c=s}a&&t.show(c,{bottomOffset:e})}),[r,t,e])}}}]);
//# sourceMappingURL=1648.js.map