/*! For license information please see 1840.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8711d409-0949-4f0c-ae00-e7e327856c8e",e._sentryDebugIdIdentifier="sentry-dbid-8711d409-0949-4f0c-ae00-e7e327856c8e")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1840],{41840:(e,t,n)=>{n.r(t),n.d(t,{Stake:()=>P});var r,a=n(14041),o=n(86090),s=n(55452),i=n(13394),l=n(99172),c=n(79071),u=n.n(c),d=n(24905),f=n(92271),p=n(7610),g=n(15654),y=n(34767),m=n(53363),v=n(39289),b=n(66491),k=n(46171),h=n(13041),C=n(31085);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var x,M,I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function L(){var e=(0,m.X)();return(0,C.jsx)(k.Im.Provider,{defaultStep:e,children:(0,C.jsx)(h.A,{})})}function P(){var e=(0,o.g)(),t=e.stakeType,n=e.currencyCode,r=e.targetCurrencyCode,c=e.chainId,m=e.tokenId,h=(0,a.useMemo)((function(){return A(A({},k.LX),{},{stakeType:t,currencyCode:n,targetCurrencyCode:r,network:l.lg.fromChainId({chainId:BigInt(null!=c?c:"1")}),tokenId:null!=m?m:""})}),[c,n,t,r,m]),S=(0,a.useCallback)((function(e){var r=e.error,a=e.errorHash;(0,s.$s)("stake.full_screen_error.viewed",{errorHash:a,errorMessage:r.message,action:y.X2.view,componentType:y.I5.page,currencyCode:n,chainId:c,context:t});var o=(0,i.Gp)(r,"stake log global error");(0,i.gf)({error:o,metadata:{error:null==r?void 0:r.message},context:"bridge-error",severity:"error",isHandled:!1})}),[c,n,t]),w=(0,a.useCallback)((function(e){var t=e.error;return(0,C.jsx)(b.U,{error:t})}),[]);return(0,C.jsx)(g.T,{height:d.fG,children:(0,C.jsx)(f.t,{onError:S,renderFallback:w,children:(0,C.jsx)(p.e,{fallback:(0,C.jsx)(v.$,{}),children:(0,C.jsx)(k.Zd.Provider,{onSubmit:u(),initialValues:h,children:(0,C.jsx)(L,{})})})})})}I(L,"useDefaultStep{defaultStep}",(function(){return[m.X]})),I(P,"useParams{{ stakeType, currencyCode, targetCurrencyCode, chainId, tokenId }}\nuseMemo{initialFormValues}\nuseCallback{logGlobalError}\nuseCallback{renderFallback}",(function(){return[o.g]})),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(L,"StakeContent","/workspaces/apps/extension/src/screens/Stake/Stake.tsx"),x.register(P,"Stake","/workspaces/apps/extension/src/screens/Stake/Stake.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},13041:(e,t,n)=>{n.d(t,{A:()=>b});var r,a=n(33396),o=n(25071),s=n(34627),i=n(20495),l=n(94955),c=n(59311),u=n(57691),d=n(57571),f=n(60527),p=n(74989),g=n(46171),y=n(31085);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var m,v;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function b(){return(0,y.jsxs)(g.Im.Steps,{children:[(0,y.jsx)(a.yQ,{component:(0,y.jsx)(c.J,{})},"learn"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(l.b,{})},"entry"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(s.U,{})},"confirmationPreview"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(u.A,{})},"phoneConfirmation"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(p.f,{})},"status"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(i.Y,{})},"depositGas"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(d.V,{})},"selectAsset"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(f.I,{})},"selectProvider"),(0,y.jsx)(a.yQ,{component:(0,y.jsx)(o.q,{})},"claimConfirmation")]})}(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&m.register(b,"StakeStepper","/workspaces/apps/extension/src/screens/Stake/StakeStepper.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},25071:(e,t,n)=>{n.d(t,{q:()=>te});var r,a=n(14041),o=n(32183),s=n(8867),i=n(86090),l=n(65393),c=n(52303),u=n(13394),d=n(63164),f=n(2688),p=n(39060),g=n(62872),y=n(53404),m=n(34575),v=n(7427),b=n(70359),k=n(396),h=n(24475),C=n(3093),S=n(79119),w=n(94975),A=n(78154),T=n(70918),x=n(32451),M=n(78392),I=n(17065),L=n(4118),P=n(33396),E=n(37121),j=n(1974),D=n(15654),F=n(55799),G=n(28672),O=n(5950),B=n(86700),H=n(46171),W=n(72502),R=n(54),V=n(31085);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return K(c,"_invoke",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,l=e,f.n=n,s}};function p(n,r){for(i=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],p=f.p,g=o[2];n>3?(a=g===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,f.n=g,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,g){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,g),i=u,l=g;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==s)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(K(t={},r,(function(){return this})),t),d=c.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,K(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,K(d,"constructor",c),K(c,"constructor",l),l.displayName="GeneratorFunction",K(c,a,"GeneratorFunction"),K(d),K(d,a,"Generator"),K(d,r,(function(){return this})),K(d,"toString",(function(){return"[object Generator]"})),(q=function(){return{w:o,m:f}})()}function K(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}K=function(e,t,n,r){function o(t,n){K(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},K(e,t,n,r)}function Y(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var X,J,$="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ee=(0,o.YK)({claimTitle:{id:"ISNPhP",defaultMessage:[{type:0,value:"Claim"}]},unstakeTitle:{id:"dy9tzc",defaultMessage:[{type:0,value:"Unstake"}]},aprLabel:{id:"e4Bven",defaultMessage:[{type:1,value:"rate"},{type:0,value:" APR"}]},questionsLabel:{id:"nZnLXA",defaultMessage:[{type:0,value:"Questions about staking?"}]},readFAQsLabel:{id:"VidkL6",defaultMessage:[{type:0,value:"Read FAQs"}]}});function te(){var e=Q((0,a.useState)(!1),2),t=e[0],n=e[1],r=(0,E.A)(H.Zd),o=r.stakeType,s=r.network,i=r.tokenId,l=(0,T.h)(),c=(0,k.u)(l,{network:s.value,stakeType:h.V.STAKE,currencyCodes:[b.mv]}),u=(0,A.F)(l,s.value);if(!u)throw new Error("Transaction data was missing in StakeClaimConfirmation");var d=(0,a.useCallback)((function(){n(!0)}),[]),f=(0,W.v)({sourceWallet:c[0],feeWallet:u,stakeType:o.value,tokenId:i.value,handleSuccess:d}),p=f.generateTransactions,g=f.isGenerateTransactionsLoading;return(0,a.useEffect)((function(){p()}),[]),!t||g?(0,V.jsx)(D.T,{alignItems:"center",justifyContent:"center",height:"100%",children:(0,V.jsx)(I.y,{color:"fgPrimary"})}):(0,V.jsx)(ne,{wallet:c[0]})}function ne(e){var t,n,r,o=e.wallet,b=(0,s.A)().formatMessage,k=(0,i.W6)().goBack,h=(0,P.lE)(H.Im).goToStep,I=(0,E.A)(H.Zd),D=I.unsignedStakeTxResult,U=I.stakeTxData,N=I.currencyCode,z=I.stakeType,K=I.network,Z=I.tokenId,X=I.ledgerStakeError,J=(0,T.h)(),$=(0,A.F)(J,K.value),te=Q((0,a.useState)(null),2),ne=te[0],re=te[1],ae=(0,a.useMemo)((function(){var e;return{currencyCode:N.value,chainId:null===(e=K.value.asChain())||void 0===e?void 0:e.chainId}}),[N,K.value]),oe=(0,l.Dw)(ae),se=(0,l.Ve)(ae),ie=(0,l.Nv)(ae),le=(0,l.ES)(ae),ce=(0,O.s)();if(!(U.value&&null!=D&&null!==(t=D.value)&&void 0!==t&&t.transaction&&null!=D&&null!==(n=D.value)&&void 0!==n&&n.wallet&&$))throw new Error("Transaction data was missing in StakeClaimConfirmation");(0,B.c)((0,x.y9)(x.fO.stake),x.yW.load_claim_preview,{type:"end"});var ue=(0,L.z)((0,x.y9)(x.fO.stake),x.yW.trigger_claim,{logMetric:!0}).start,de=(0,v.vQ)(D.value.wallet.accountId),fe=(0,W.v)({sourceWallet:o,feeWallet:$,shouldIgnoreSuccessRedirect:!0,stakeType:z.value,tokenId:Z.value}),pe=fe.generateTransactions,ge=fe.isGenerateTransactionsLoading,ye=Q((0,a.useState)(new Date),2),me=ye[0],ve=ye[1],be=(0,a.useCallback)(function(){var e,t=(e=q().m((function e(){return q().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,pe();case 1:ve(new Date);case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){Y(o,r,a,s,i,"next",e)}function i(e){Y(o,r,a,s,i,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),[pe]);(0,g.G)(be,{interval:R.u});var ke=(0,a.useCallback)((function(e){(0,l.U9)(_(_({},ae),{},{canceledFromError:e})),k()}),[k,ae]),he=(0,a.useCallback)((function(){h("status")}),[h]),Ce=(0,a.useCallback)((function(e){re(e)}),[]),Se=(0,a.useCallback)((function(){(0,l.V7)(ae)}),[ae]),we=(0,a.useCallback)((function(e){(0,l.GF)(ae),re(e)}),[ae]),Ae=(0,m.D)({wallet:D.value.wallet,unsignedTxOrUserOp:D.value.transaction,unlockSuccess:Se,unlockError:we,signSuccess:he,signError:Ce,handleUnlock:ce(de.id)}),Te=Ae.signAndSubmitStandalone,xe=Ae.isSignAndSubmitStandaloneLoading,Me=(0,a.useCallback)((function(){(0,l.FD)(ae),h("status")}),[h,ae]),Ie=(0,a.useCallback)((function(){(0,l.IO)(ae)}),[ae]),Le=(0,a.useCallback)((function(e){(0,l.V_)(ae),(0,u.gf)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),X.onChange(e),h("status")}),[h,X,ae]),Pe=(0,y.LK)({unsignedTxOrUserOp:D.value.transaction,onSignSuccess:Me,onSignError:Le,flow:y.nl.Stake}),Ee=Pe.signAndSubmitLedger,je=Pe.isHardwareWalletSigning,De=Pe.hardwareWalletScreen,Fe=(0,a.useCallback)((function(){h("phoneConfirmation")}),[h]),Ge=ge||xe||je,Oe=(0,S.f)(U.value),Be=(0,w.A)(null==D?void 0:D.value.transaction,null==D?void 0:D.value.wallet),He=(0,a.useCallback)((function(e){var t=e.networkEstimatedFee,n=e.networkBaseFee,r=e.networkMaxFee;oe({networkEstimatedFee:t,networkBaseFee:n,networkMaxFee:r});try{var a;if((0,c._)(null==D||null===(a=D.value)||void 0===a?void 0:a.transaction)){var o=Be,s=o.lowerBoundFee,i=o.upperBoundFee;if(!s||!i)throw new Error("No valid lower and upper bound fees for bridge 1559 transaction");se(Be)}else{if(!Be.estimatedFee)throw new Error("No valid estimated fee for claim transaction");ie(Be)}}catch(e){le(Be)}}),[oe,null==D||null===(r=D.value)||void 0===r?void 0:r.transaction,Be,se,ie,le]),We=(0,C.l)({stakeType:z.value,stakeTxData:U.value,unsignedStakeTx:D.value.transaction,isPageLoading:Ge,lastUpdateTime:me,rowItemsAnalytics:He}),Re=(0,d.m)(J,{stakeTxData:U.value,unsignedStakeTx:D.value.transaction}),Ve=(0,a.useCallback)((function(){(0,l.AG)(ae)}),[ae]),Ue=(0,f.O)({account:de,buttonAnalyticsCallbacks:{triggerAnalyticsConfirm:Ve},signAndSubmitStandalone:Te,signAndSubmitLedger:Ee,signAndSubmitWalletlink:Fe,markStartPerf:ue}),Ne=(0,p.i)({isLoading:Ge,transactionDetailError:Re,buttonAnalyticsCallbacks:{triggerAnalyticsConfirm:Ve},onCancelButtonPressed:ke,context:p.k.CLAIM,getHandleSubmitPressed:Ue}),_e=Oe.secondaryItem.iconSourceOrName,ze=(0,a.useMemo)((function(){return{currencyCode:_e.currencyCode,iconUrl:_e.iconUrl,showNetworkIcon:!0,network:null==_e?void 0:_e.network}}),[_e.currencyCode,_e.iconUrl,null==_e?void 0:_e.network]);return je?De:(0,V.jsx)(G.Z,{headerText:b(ee.claimTitle),detailRowItems:We,error:Re,buttonProps:Ne,onPrimaryButtonDisabled:Ie,handleBackButton:k,signAndSubmitError:ne,height:"100%",topSection:(0,V.jsx)(F.a,{bordered:!0,children:(0,V.jsx)(j.l,{title:Oe.secondaryItem.title,detail:Oe.secondaryItem.detail,subdetail:Oe.secondaryItem.subDetail,media:(0,V.jsx)(M.E,{asset:ze})})})})}$(te,"useState{[isInitialized, setIsInitialized](false)}\nuseFields{{ stakeType, network, tokenId }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseEarnableWallets{earnableWallets}\nuseGetFeeWallet{feeWallet}\nuseCallback{handleSuccess}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseEffect{}",(function(){return[E.A,T.h,k.u,A.F,W.v]})),$(ne,"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseFields{{\n    unsignedStakeTxResult,\n    stakeTxData,\n    currencyCode,\n    stakeType,\n    network,\n    tokenId,\n    ledgerStakeError,\n  }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGetFeeWallet{feeWallet}\nuseState{[signAndSubmitError, setSignAndSubmitError](null)}\nuseMemo{analyticsMetadata}\nuseClaimConfirmationStepViewed{triggerAnalyticsConfirmationStepViewed}\nuseStakeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseStakeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseStakeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nuseHandleUnlockForSigning{handleUnlock}\nusePerfMarkOnMount{}\nuseExtensionPerfMark{{ start: markStartClaimPerf }}\nuseAccountById{account}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseCallback{handleCancel}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onSigningError}\nuseCallback{handleUnlockSuccess}\nuseCallback{handleUnlockError}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseCallback{handleLedgerSigningSuccess}\nuseCallback{handlePrimaryButtonDisabled}\nuseCallback{handleLedgerSigningError}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning, hardwareWalletScreen }}\nuseCallback{signAndSubmitWalletlink}\nuseTransactionOverviewItems{overViewItems}\nuseAnalyticsFeeData{analyticsFeeData}\nuseCallback{rowItemsAnalytics}\nuseTransactionDetailRowItems{transactionDetailRowItems}\nuseTransactionDetailErrors{transactionDetailError}\nuseCallback{triggerAnalyticsConfirm}\nuseGetHandleSubmitPressed{getHandleSubmitPressed}\nuseTransactionDetailButtons{buttonProps}\nuseMemo{assetLike}",(function(){return[s.A,i.W6,P.lE,E.A,T.h,A.F,l.Dw,l.Ve,l.Nv,l.ES,O.s,B.c,L.z,v.vQ,W.v,g.G,m.D,y.LK,S.f,w.A,C.l,d.m,f.O,p.i]})),(X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(X.register(ee,"messages","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx"),X.register(te,"ClaimConfirmationStep","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx"),X.register(ne,"ClaimConfirmationInitialized","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx")),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&J(e)},34627:(e,t,n)=>{n.d(t,{U:()=>te});var r,a=n(14041),o=n(32183),s=n(8867),i=n(65393),l=n(52303),c=n(4244),u=n(13394),d=n(63164),f=n(2688),p=n(39060),g=n(62872),y=n(53404),m=n(34575),v=n(7427),b=n(70359),k=n(7548),h=n(24475),C=n(3093),S=n(79119),w=n(94975),A=n(78154),T=n(70918),x=n(32451),M=n(4118),I=n(33396),L=n(37121),P=n(98055),E=n(52331),j=n(26893),D=n(28672),F=n(5950),G=n(86700),O=n(64654),B=n(46171),H=n(72502),W=n(54),R=n(31085);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return q(c,"_invoke",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,l=e,f.n=n,s}};function p(n,r){for(i=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],p=f.p,g=o[2];n>3?(a=g===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,f.n=g,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,g){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,g),i=u,l=g;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==s)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(q(t={},r,(function(){return this})),t),d=c.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,q(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,q(d,"constructor",c),q(c,"constructor",l),l.displayName="GeneratorFunction",q(c,a,"GeneratorFunction"),q(d),q(d,a,"Generator"),q(d,r,(function(){return this})),q(d,"toString",(function(){return"[object Generator]"})),(z=function(){return{w:o,m:f}})()}function q(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}q=function(e,t,n,r){function o(t,n){q(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},q(e,t,n,r)}function K(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){K(o,r,a,s,i,"next",e)}function i(e){K(o,r,a,s,i,"throw",e)}s(void 0)}))}}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var X,J,$="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ee=(0,o.YK)({earnTitle:{id:"K79kK4",defaultMessage:[{type:0,value:"Earn yield"}]},unstakeTitle:{id:"dy9tzc",defaultMessage:[{type:0,value:"Unstake"}]},questionsLabel:{id:"nZnLXA",defaultMessage:[{type:0,value:"Questions about staking?"}]},seeFAQButton:{id:"1zZBMs",defaultMessage:[{type:0,value:"See FAQ"}]},readFAQsLabel:{id:"wVpK/U",defaultMessage:[{type:0,value:"Read FAQs"}]}});function te(){var e,t,n,r,o,V,U,_,q,K,Z,X=(0,s.A)().formatMessage,J=(0,I.lE)(B.Im),$=J.goBack,te=J.goToStep,ne=Q((0,a.useState)(null),2),re=ne[0],ae=ne[1],oe=(0,c.J9)().formatToCrypto,se=(0,L.A)(B.Zd),ie=se.unsignedApproveTxResult,le=se.unsignedStakeTxResult,ce=se.stakeTxData,ue=se.cryptoAmount,de=se.currencyCode,fe=se.stakeType,pe=se.ledgerStakeError,ge=se.targetCurrencyCode,ye=Q((0,a.useState)(new Date),2),me=ye[0],ve=ye[1],be=(0,T.h)(),ke=(0,h.X)(be,{currencyCode:de.value,targetCurrencyCode:ge.value,stakeType:fe.value}),he=ke.sourceWallet,Ce=ke.targetWallet,Se=(0,A.F)(be,null!==(e=null==he?void 0:he.network)&&void 0!==e?e:O.t0),we=(0,k.a)({targetCurrencyCode:fe.value===h.V.STAKE?ge.value:de.value}).earnRate;if(!(ce.value&&null!=le&&null!==(t=le.value)&&void 0!==t&&t.transaction&&null!=le&&null!==(n=le.value)&&void 0!==n&&n.wallet&&he&&Se))throw new Error("Transaction data was missing in ConfirmationPreviewStep");var Ae=(0,v.vQ)(he.accountId),Te=(0,a.useMemo)((function(){var e;return{currencyCode:he.currencyCode.code,chainId:null===(e=he.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:he.contractAddress,cryptoAmount:oe({currencyCode:he.currencyCode,decimals:he.decimals,value:ue.value,includeCode:!1}),targetCurrencyCode:ge.value}}),[he.currencyCode,he.network,he.contractAddress,he.decimals,oe,ue.value,ge]),xe=(0,i.fO)(Te),Me=(0,i.Ve)(Te),Ie=(0,i.Nv)(Te),Le=(0,i.ES)(Te);(0,G.c)((0,x.y9)(x.fO.stake),x.yW.load_preview,{type:"end"});var Pe=(0,M.z)((0,x.y9)(x.fO.stake),x.yW.trigger_stake,{logMetric:!0}).start,Ee=(0,H.v)({sourceWallet:he,feeWallet:Se,targetWallet:Ce,shouldIgnoreSuccessRedirect:!0,amount:ue.value,stakeType:fe.value}),je=Ee.generateTransactions,De=Ee.isGenerateTransactionsLoading,Fe=(0,F.s)(),Ge=(0,a.useCallback)((function(){(0,i.XC)(Te),te("status")}),[te,Te]),Oe=(0,a.useCallback)((function(e){(0,i.L$)(Te),ae(e)}),[Te]),Be=(0,a.useCallback)((function(){(0,i.pM)(Te),te("status")}),[Te,te]),He=(0,a.useCallback)((function(e){(0,i.Az)(Te),ae(e)}),[Te]),We=(0,m.D)({wallet:le.value.wallet,unsignedTxOrUserOp:le.value.transaction,unsignedApproveTxOrUserOp:null==ie||null===(r=ie.value)||void 0===r?void 0:r.transaction,unlockSuccess:Be,unlockError:He,signSuccess:Ge,signError:Oe,handleUnlock:Fe(null===(o=le.value)||void 0===o||null===(o=o.wallet)||void 0===o?void 0:o.accountId)}),Re=We.signAndSubmitStandalone,Ve=We.isSignAndSubmitStandaloneLoading,Ue=(0,a.useCallback)(Y(z().m((function e(){return z().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,je();case 1:ve(new Date);case 2:return e.a(2)}}),e)}))),[je]);(0,g.G)(Ue,{interval:W.u});var Ne=(0,d.m)(be,{stakeTxData:ce.value,unsignedApproveTx:null===(V=ie.value)||void 0===V?void 0:V.transaction,unsignedStakeTx:le.value.transaction}),_e=(0,w.A)(null===(U=le.value)||void 0===U?void 0:U.transaction,null===(_=le.value)||void 0===_?void 0:_.wallet),ze=(0,a.useCallback)((function(e){var t=e.networkEstimatedFee,n=e.networkBaseFee,r=e.networkMaxFee;xe({networkEstimatedFee:t,networkBaseFee:n,networkMaxFee:r});try{var a;if((0,l._)(null===(a=le.value)||void 0===a?void 0:a.transaction)){var o=_e,s=o.lowerBoundFee,i=o.upperBoundFee;if(!s||!i)throw new Error("No valid lower and upper bound fees for bridge 1559 transaction");Me(_e)}else{if(!_e.estimatedFee)throw new Error("No valid estimated fee for bridge transaction");Ie(_e)}}catch(e){Le(_e)}}),[xe,null===(q=le.value)||void 0===q?void 0:q.transaction,_e,Me,Ie,Le]),qe=(0,a.useCallback)((function(e){(0,i.AQ)(N(N({},Te),{},{canceledFromError:e})),$()}),[$,Te]),Ke=(0,a.useCallback)((function(){(0,i.re)(Te),chrome.tabs.create({url:b.xg[null==he?void 0:he.currencyCode.code]})}),[Te,he]),Ye=(0,a.useCallback)((function(){(0,i.YX)(Te)}),[Te]),Qe=(0,a.useCallback)((function(){(0,i.Bi)(Te)}),[Te]),Ze=(0,a.useCallback)((function(){(0,i.Tp)(Te),te("status")}),[te,Te]),Xe=(0,a.useCallback)((function(){(0,i.gH)(Te)}),[Te]),Je=(0,a.useCallback)((function(e){(0,i.X8)(Te),(0,u.gf)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),pe.onChange(e),te("status")}),[te,pe,Te]),$e=(0,y.LK)({unsignedTxOrUserOp:le.value.transaction,unsignedApproveTxOrUserOp:null===(K=ie.value)||void 0===K?void 0:K.transaction,onSignSuccess:Ze,onSignError:Je,flow:y.nl.Stake}),et=$e.signAndSubmitLedger,tt=$e.isHardwareWalletSigning,nt=$e.hardwareWalletScreen,rt=(0,a.useCallback)((function(){te("phoneConfirmation")}),[te]),at=De||Ve||tt,ot=(0,f.O)({account:Ae,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmAnyway:Qe,triggerAnalyticsConfirm:Ye},signAndSubmitStandalone:Re,signAndSubmitWalletlink:rt,signAndSubmitLedger:et,markStartPerf:Pe}),st=(0,p.i)({isLoading:at,transactionDetailError:Ne,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmAnyway:Qe,triggerAnalyticsConfirm:Ye},onCancelButtonPressed:qe,context:fe.value===h.V.STAKE?p.k.STAKE:p.k.UNSTAKE,getHandleSubmitPressed:ot}),it=(0,C.l)({stakeType:fe.value,stakeTxData:ce.value,unsignedApproveTx:null===(Z=ie.value)||void 0===Z?void 0:Z.transaction,unsignedStakeTx:le.value.transaction,isPageLoading:at,lastUpdateTime:me,rowItemsAnalytics:ze}),lt=(0,S.f)(ce.value),ct=(0,a.useMemo)((function(){return N(N({},lt.primaryItem),fe.value===h.V.UNSTAKE?{description:(0,R.jsx)(P.v,{as:"p",color:"fgPositive",children:we})}:{})}),[lt.primaryItem,fe.value,we]),ut=(0,a.useMemo)((function(){return N(N({},lt.secondaryItem),fe.value===h.V.STAKE?{description:(0,R.jsx)(P.v,{as:"p",color:"fgPositive",children:we})}:{})}),[lt.secondaryItem,fe.value,we]);return tt?nt:(0,R.jsx)(D.Z,{headerText:X(fe.value===h.V.STAKE?ee.earnTitle:ee.unstakeTitle),headerAction:(0,R.jsx)(E.N,{testID:"stake-confirmation-faq-link",onClick:Ke,as:"button",children:X(ee.readFAQsLabel)}),detailRowItems:it,error:Ne,buttonProps:st,onPrimaryButtonDisabled:Xe,handleBackButton:$,signAndSubmitError:re,height:"100%",topSection:(0,R.jsx)(j.w,{primaryItem:ct,secondaryItem:ut,error:Ne})})}$(te,"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseState{[signAndSubmitError, setSignAndSubmitError](null)}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseFields{{\n    unsignedApproveTxResult,\n    unsignedStakeTxResult,\n    stakeTxData,\n    cryptoAmount,\n    currencyCode,\n    stakeType,\n    ledgerStakeError,\n    targetCurrencyCode,\n  }}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{ sourceWallet, targetWallet }}\nuseGetFeeWallet{feeWallet}\nuseGetEarnRate{{ earnRate }}\nuseAccountById{account}\nuseMemo{analyticsMetadata}\nuseConfirmationStepViewed{triggerAnalyticsConfirmationStepViewed}\nuseStakeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseStakeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseStakeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nusePerfMarkOnMount{}\nuseExtensionPerfMark{{ start: markStartStakePerf }}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseHandleUnlockForSigning{handleUnlock}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onStandaloneSigningError}\nuseCallback{handleUnlockSuccess}\nuseCallback{handleUnlockError}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseTransactionDetailErrors{transactionDetailError}\nuseAnalyticsFeeData{analyticsFeeData}\nuseCallback{rowItemsAnalytics}\nuseCallback{handleCancel}\nuseCallback{handleFAQPress}\nuseCallback{triggerAnalyticsConfirm}\nuseCallback{triggerAnalyticsConfirmAnyway}\nuseCallback{handleLedgerSigningSuccess}\nuseCallback{handlePrimaryButtonDisabled}\nuseCallback{handleLedgerSigningError}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning, hardwareWalletScreen }}\nuseCallback{signAndSubmitWalletlink}\nuseGetHandleSubmitPressed{getHandleSubmitPressed}\nuseTransactionDetailButtons{buttonProps}\nuseTransactionDetailRowItems{transactionDetailRowItems}\nuseTransactionOverviewItems{overViewItems}\nuseMemo{detailOverviewPrimaryItem}\nuseMemo{detailOverviewSectionItem}",(function(){return[s.A,I.lE,c.J9,L.A,T.h,h.X,A.F,k.a,v.vQ,i.fO,i.Ve,i.Nv,i.ES,G.c,M.z,H.v,F.s,m.D,g.G,d.m,w.A,y.LK,f.O,p.i,C.l,S.f]})),(X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(X.register(ee,"messages","/workspaces/apps/extension/src/screens/Stake/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),X.register(te,"ConfirmationPreviewStep","/workspaces/apps/extension/src/screens/Stake/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx")),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&J(e)},20495:(e,t,n)=>{n.d(t,{Y:()=>U});var r,a=n(14041),o=n(32183),s=n(8867),i=n(86090),l=n(8239),c=n(4244),u=n(86431),d=n(62872),f=n(81732),p=n(24475),g=n(78154),y=n(70918),m=n(79734),v=n(21983),b=n(24905),k=n(33396),h=n(37121),C=n(22115),S=n(85581),w=n(34107),A=n(15654),T=n(84492),x=n(60149),M=n(97541),I=n(67209),L=n(52331),P=n(41690),E=n(46171),j=n(72502),D=n(31085);function F(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return G(c,"_invoke",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,l=e,f.n=n,s}};function p(n,r){for(i=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],p=f.p,g=o[2];n>3?(a=g===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,f.n=g,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,g){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,g),i=u,l=g;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==s)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(G(t={},r,(function(){return this})),t),d=c.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,G(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,G(d,"constructor",c),G(c,"constructor",l),l.displayName="GeneratorFunction",G(c,a,"GeneratorFunction"),G(d),G(d,a,"Generator"),G(d,r,(function(){return this})),G(d,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:o,m:f}})()}function G(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}G=function(e,t,n,r){function o(t,n){G(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},G(e,t,n,r)}function O(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){O(o,r,a,s,i,"next",e)}function i(e){O(o,r,a,s,i,"throw",e)}s(void 0)}))}}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var H,W,R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},V=(0,o.YK)({title:{id:"/OJF46",defaultMessage:[{type:0,value:"Let's top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},main:{id:"GJmTtm",defaultMessage:[{type:0,value:"Buy or transfer from Coinbase"}]},finePrint:{id:"NtJETL",defaultMessage:[{type:0,value:"Coinbase.com\u2019s account link feature is subject to coinbase.com "},{type:1,value:"userAgreement"},{type:0,value:" and "},{type:1,value:"privacyPolicy"},{type:0,value:"."}]},userAgreement:{id:"V6jvi1",defaultMessage:[{type:0,value:"User Agreement"}]},privacyPolicy:{id:"0ROee6",defaultMessage:[{type:0,value:"Privacy Policy"}]},cbPayButton:{id:"kR8Mqy",defaultMessage:[{type:0,value:"Buy with Coinbase Onramp"}]},transferButton:{id:"IykAaN",defaultMessage:[{type:0,value:"Transfer from another wallet"}]},defaultError:{id:"fnBlFk",defaultMessage:[{type:0,value:"Buy or transfer funds from Coinbase or another wallet."}]},zeroBalanceSubtitle:{id:"ZZAIvI",defaultMessage:[{type:0,value:"You need "},{type:1,value:"cryptoSymbol"},{type:0,value:" before you can make a transaction on the "},{type:1,value:"networkName"},{type:0,value:" network."}]},notEnoughBalanceSubtitle:{id:"R6shrI",defaultMessage:[{type:0,value:"You need an additional ~"},{type:1,value:"cryptoAmountNeeded"},{type:0,value:" ("},{type:1,value:"fiatAmountNeeded"},{type:0,value:") to cover the network fee."}]}});function U(){var e,t,n,r=(0,s.A)().formatMessage,o=(0,i.W6)(),G=(0,k.lE)(E.Im).goBack,O=(0,c.J9)(),H=(0,h.A)(E.Zd),W=H.currencyCode,R=H.targetCurrencyCode,U=H.stakeType,N=H.formDepositAmount,_=H.cryptoAmount,z=H.network,q=(0,y.h)(),K=(0,p.X)(q,{currencyCode:W.value,targetCurrencyCode:R.value,chainId:null===(e=z.value.asChain())||void 0===e?void 0:e.chainId.toString(),stakeType:U.value}),Y=K.sourceWallet,Q=K.targetWallet;if(!Y||!Q)throw new Error("Wallet is required");var Z=(0,a.useMemo)((function(){var e;return{currencyCode:Y.currencyCode.code,chainId:null===(e=Y.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:Y.contractAddress,targetCurrencyCode:R.value}}),[Y.contractAddress,Y.currencyCode.code,Y.network,R.value]),X=(0,g.F)(q,z.value);if(!X)throw new Error("Could not find a valid fee wallet for the select source chain");(0,l.pO)(Z);var J=(0,j.v)({sourceWallet:Y,feeWallet:X,targetWallet:Q,amount:_.value,stakeType:U.value,shouldIgnoreSuccessRedirect:!0}),$=J.generateTransactions,ee=J.isGenerateTransactionsLoading,te=(0,a.useCallback)(B(F().m((function e(){return F().w((function(e){for(;;)switch(e.n){case 0:if(!(null!=X&&X.balance&&X.balance>0n)){e.n=1;break}return e.n=1,$();case 1:return e.a(2)}}),e)}))),[$,X]);(0,d.G)(te,{interval:3e4});var ne=(0,f.aR)({asset:null==X?void 0:X.currencyCode.rawValue,chainId:null==X||null===(t=X.network.asChain())||void 0===t?void 0:t.chainId,walletGroupId:q}),re=(0,a.useMemo)((function(){if(null==X||!X.currencyCode||!N.value)return 0;var e=O.fiatValue({currencyCode:null==X?void 0:X.currencyCode,decimals:null==X?void 0:X.decimals,value:N.value,contractAddress:null==X?void 0:X.contractAddress,network:null==X?void 0:X.network,blockchain:null==X?void 0:X.blockchain}),t=null==e?void 0:e.toNumber();return t?t+(25-t%25)%25:0}),[O,X,N.value]),ae=(0,u.Gj)({widgetParameters:{destinationWallets:ne,presetFiatAmount:re}}),oe=ae.cbPayInstance,se=ae.isCBPayInstanceReady,ie=(0,a.useCallback)(B(F().m((function e(){var t;return F().w((function(e){for(;;)if(0===e.n)return(0,l.ON)(Z),e.a(2,null===(t=oe.current)||void 0===t?void 0:t.open())}),e)}))),[Z,oe]),le=(0,a.useCallback)((function(){(0,l.m2)(Z),o.push(P.Q.RECEIVE)}),[Z,o]),ce=(0,a.useCallback)((function(){G()}),[G]),ue=(0,a.useCallback)(B(F().m((function e(){return F().w((function(e){for(;;)if(0===e.n)return e.a(2,chrome.tabs.create({url:m.i1,active:!1}))}),e)}))),[]),de=(0,a.useCallback)(B(F().m((function e(){return F().w((function(e){for(;;)if(0===e.n)return e.a(2,chrome.tabs.create({url:m.WO,active:!1}))}),e)}))),[]),fe=(0,a.useMemo)((function(){var e,t;if(void 0!==N.value){var n=void 0!==(null==X?void 0:X.balance)&&null!=X&&X.currencyCode?O.formatToCrypto({currencyCode:X.currencyCode,decimals:X.decimals,value:N.value,network:X.network}):"",a=void 0!==(null==X?void 0:X.balance)&&null!=X&&X.currencyCode?O.formatToFiat({fromCurrencyCode:X.currencyCode,decimals:X.decimals,value:N.value,isAbbreviated:!1,contractAddress:X.contractAddress,network:X.network,blockchain:X.blockchain,includeCode:!0,formatZeroBalance:!0}):"";return r(V.notEnoughBalanceSubtitle,{cryptoAmountNeeded:n,fiatAmountNeeded:a})}return r(V.zeroBalanceSubtitle,{cryptoSymbol:null===(e=X.network.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode,networkName:null===(t=X.network.asChain())||void 0===t?void 0:t.displayName})}),[O,X,N.value,r]);return(0,D.jsxs)(A.T,{height:b.pA,children:[(0,D.jsx)(v.u,{onBack:ce,paddingBottom:0}),(0,D.jsxs)(A.T,{alignItems:"center",width:"100%",paddingX:2,children:[(0,D.jsx)(x.f,{as:"h1",paddingBottom:1,textAlign:"center",children:r(V.title,{cryptoSymbol:null===(n=X.network.asChain())||void 0===n?void 0:n.baseAssetCurrencyCode})}),(0,D.jsx)(M.K,{as:"p",color:"fgMuted",textAlign:"center",testID:"deposit-gas-message",children:fe}),(0,D.jsx)(T.z,{alignItems:"center",justifyContent:"center",paddingY:6,children:(0,D.jsx)(w.g,{name:"primeEarn"})})]}),(0,D.jsxs)(A.T,{alignItems:"center",width:"100%",children:[(0,D.jsxs)(C.e,{accessibilityLabel:"Transfer Funds",block:!0,direction:"vertical",children:[(0,D.jsx)(S.$n,{onClick:ie,loading:ee||!se,testID:"deposit-gas-cb-pay-button",children:(0,D.jsx)(T.z,{alignItems:"center",gap:1,children:r(V.cbPayButton)})}),(0,D.jsx)(S.$n,{onClick:le,variant:"secondary",testID:"deposit-gas-transfer-button",children:r(V.transferButton)})]}),(0,D.jsx)(I.V,{as:"p",color:"fgMuted",textAlign:"center",paddingTop:2,children:r(V.finePrint,{userAgreement:(0,D.jsx)(L.N,{font:"legal",color:"fgPrimary",onClick:ue,as:"button",children:r(V.userAgreement)}),privacyPolicy:(0,D.jsx)(L.N,{font:"legal",color:"fgPrimary",onClick:de,as:"button",children:r(V.privacyPolicy)})})})]})]})}R(U,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseStepper{{ goBack }}\nuseCurrencyFormatter{currencyFormatter}\nuseFields{{ currencyCode, targetCurrencyCode, stakeType, formDepositAmount, cryptoAmount, network }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{ sourceWallet, targetWallet }}\nuseMemo{analyticsMetadata}\nuseGetFeeWallet{feeWallet}\nuseDepositGasStepViewed{}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseDestinationWallets{destinationWallets}\nuseMemo{nextMultipleOf25}\nuseCoinbasePay{{ cbPayInstance, isCBPayInstanceReady }}\nuseCallback{handleConnectCoinbaseClick}\nuseCallback{handleTransferClick}\nuseCallback{handleBackClick}\nuseCallback{handleClickUserAgreement}\nuseCallback{handleClickPrivacyPolicy}\nuseMemo{subtitle}",(function(){return[s.A,i.W6,k.lE,c.J9,h.A,y.h,p.X,g.F,l.pO,j.v,d.G,f.aR,u.Gj]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(V,"messages","/workspaces/apps/extension/src/screens/Stake/steps/DepositGasStep/DepositGasStep.tsx"),H.register(U,"DepositGasStep","/workspaces/apps/extension/src/screens/Stake/steps/DepositGasStep/DepositGasStep.tsx")),(W="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&W(e)},94955:(e,t,n)=>{n.d(t,{b:()=>ie});var r=n(14041),a=n(32183),o=n(8867),s=n(86090),i=n(65393),l=n(96295),c=n(4244),u=n(61516),d=n(97416),f=n(66181),p=n(14928),g=n(81894);function y(){const e=(0,f.l)((0,p.T)("kill_staking_top_up")),t=(0,g.s)(d.r.feb_2023_stake_top_up);return!e&&t}var m=n(61096),v=n(88),b=n(11554),k=n(70359),h=n(7548);function C(){const e=(0,f.l)((0,p.T)("kill_stake_multi_provider"));return(0,r.useMemo)((()=>!e),[e])}var S,w=n(41015),A=n(24475),T=n(8612),x=n(78154),M=n(70918),I=n(32451),L=n(89703),P=n(78392),E=n(10058),j=n(50215),D=n(4681),F=n(88589),G=n(20027),O=n(4118),B=n(33396),H=n(37121),W=n(85581),R=n(1974),V=n(2673),U=n(55799),N=n(15654),_=n(84492),z=n(86382),q=n(52331),K=n(94330),Y=n(39262),Q=n(86700),Z=n(64654),X=n(46171),J=n(72502),$=n(31085);function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&S(e);var ne,re,ae="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},oe=(0,a.YK)({earnTitle:{id:"RAYgXb",defaultMessage:[{type:0,value:"Earn yield"}]},stakeLabel:{id:"IcRvLD",defaultMessage:[{type:0,value:"Stake"}]},unstakingTitle:{id:"QSnExS",defaultMessage:[{type:0,value:"Unstake"}]},availableAmount:{id:"O4zzOB",defaultMessage:[{type:0,value:"Available"}]},maxButton:{id:"Pm9NLv",defaultMessage:[{type:0,value:"Max"}]},previewButton:{id:"dhicuL",defaultMessage:[{type:0,value:"Preview"}]},topUpButtonText:{id:"nuMeii",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},learnMoreLabel:{id:"wVpK/U",defaultMessage:[{type:0,value:"Read FAQs"}]},arrowDownAccessibilityLabel:{id:"JtMmZ+",defaultMessage:[{type:0,value:"To"}]},toLabel:{id:"JPdzL+",defaultMessage:[{type:0,value:"To"}]}}),se={paddingY:0},ie=(0,r.memo)(ae((function(){var e,t,n,a=(0,o.A)().formatMessage,d=(0,s.W6)().goBack,f=ee((0,r.useState)(!1),2),p=f[0],g=f[1],S=(0,B.lE)(X.Im).goToStep,te=(0,H.A)(X.Zd),ne=te.currencyCode,re=te.stakeType,ae=te.isFiat,ie=te.cryptoAmount,le=te.enteredAmount,ce=te.shouldUpdateCryptoAmount,ue=te.targetCurrencyCode,de=te.network,fe=(0,c.J9)(),pe=y(),ge=(0,w.$)(),ye=C(),me=(0,M.h)(),ve=(0,A.X)(me,{currencyCode:ne.value,targetCurrencyCode:ue.value,stakeType:re.value,chainId:null===(e=de.value.asChain())||void 0===e?void 0:e.chainId.toString()}),be=ve.sourceWallet,ke=ve.targetWallet,he=ve.isLoading,Ce=(0,h.a)({targetCurrencyCode:re.value===A.V.STAKE?ue.value:ne.value,chainId:null===(t=de.value.asChain())||void 0===t?void 0:t.chainId.toString()}).earnRate,Se=(0,m.Dy)({txType:m.Ir.STAKE,wallet:be}),we=Se.gasEstimate,Ae=Se.refetch,Te=Se.isFetched,xe=(0,v.oD)(),Me=(0,T.X)(me,{network:de.value}),Ie=(0,x.F)(me,de.value);if(!Ie)throw new Error("Could not find a valid fee wallet for the select source chain");var Le=(0,O.z)((0,I.y9)(I.fO.stake),I.yW.load_preview,{logMetric:!0}).start;(0,Q.c)((0,I.y9)(I.fO.stake),I.yW.launch_stake,{type:"end"});var Pe=(0,r.useMemo)((function(){return re.value===A.V.STAKE}),[re]),Ee=(0,r.useMemo)((function(){var e;return{currencyCode:null==be?void 0:be.currencyCode.code,chainId:null==be||null===(e=be.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:null==be?void 0:be.contractAddress,targetCurrencyCode:ue.value}}),[null==be?void 0:be.contractAddress,null==be?void 0:be.currencyCode.code,null==be?void 0:be.network,ue.value]);(0,i.iD)(Ee),(0,r.useEffect)((function(){if(Pe&&ke){var e,t=null===(e=ke.network.asChain())||void 0===e?void 0:e.chainId;xe({code:ke.currencyCode,chainId:t?BigInt(t):1n,networkId:(0,b.S)({network:ke.network,blockchain:ke.blockchain})||l.Fd,contractAddress:ke.contractAddress})}}),[xe,ke,Pe]);var je=(0,r.useCallback)((function(e){g(e),(0,i.Eo)(Ee)}),[Ee]),De=(0,r.useCallback)((function(){(0,i.TN)(Ee)}),[Ee]),Fe=(0,r.useCallback)((function(){(0,i.qP)(Ee),d()}),[d,Ee]),Ge=(0,r.useMemo)((function(){var e;return{currencyCode:null==be?void 0:be.currencyCode.code,network:null==be?void 0:be.network,iconUrl:null==be||null===(e=be.imageURL)||void 0===e?void 0:e.toString(),showNetworkIconOverride:!(null==be||!be.contractAddress)}}),[null==be?void 0:be.contractAddress,null==be?void 0:be.currencyCode.code,null==be?void 0:be.imageURL,null==be?void 0:be.network]),Oe=(0,r.useMemo)((function(){var e;return{currencyCode:null==ke?void 0:ke.currencyCode.code,network:null==ke?void 0:ke.network,iconUrl:null==ke||null===(e=ke.imageURL)||void 0===e?void 0:e.toString(),showNetworkIconOverride:!(null==ke||!ke.contractAddress)}}),[null==ke?void 0:ke.contractAddress,null==ke?void 0:ke.currencyCode.code,null==ke?void 0:ke.imageURL,null==ke?void 0:ke.network]),Be=void 0!==(null==be?void 0:be.balance)?fe.formatToFiat({fromCurrencyCode:be.currencyCode,decimals:be.decimals,value:be.balance,isAbbreviated:!1,contractAddress:be.contractAddress,network:be.network,blockchain:be.blockchain}):"",He=(0,J.v)({sourceWallet:be,feeWallet:Ie,targetWallet:ke,amount:ie.value,stakeType:re.value,shouldIgnoreSuccessRedirect:!1}),We=He.generateTransactions,Re=He.generateTransactionsError,Ve=He.isGenerateTransactionsLoading,Ue=(0,r.useMemo)((function(){return(!pe||ne.value!==l.fz)&&p||0n===ie.value||Ve||Boolean(Me)||he}),[pe,ne,p,ie.value,Ve,Me,he]);(0,r.useEffect)((function(){Ue||(0,i.uK)(Ee)}),[Ue,Ee]);var Ne=Me||(null==Re||null===(n=Re.code)||void 0===n?void 0:n.includes("MinerFee")),_e=(0,r.useCallback)((function(){if(null==be||!be.balance)throw new Error("Could not find a balance for source wallet");!Te||null!=be&&be.contractAddress||Ae();var e=be.balance-we<=0n?be.balance:be.balance-we,t=be.contractAddress?be.balance:e;(0,i.RM)(Ee),ie.onChange(t),le.onChange((0,u.ej)({currencyFormatter:fe,wallet:be,newAmount:t,isCrypto:!ae.value,includeCode:!1,preserveEndingZeros:!0}))}),[ie,fe,le,ae.value,be,Ee,Te,Ae,we]),ze=(0,r.useCallback)((function(){Le(),We(),(0,i.Wu)(Ee)}),[Le,We,Ee]),qe=(0,r.useMemo)((function(){return null!=Me?Me:Re}),[Re,Me]),Ke=(0,r.useMemo)((function(){return qe?(Ne||(U.a,G.r),(0,$.jsx)(z.m,{content:(0,$.jsx)(F.e,{network:null==be?void 0:be.network,zeroBaseAssetError:Me}),children:(0,$.jsx)(U.a,{children:(0,$.jsx)(G.r,{error:qe,hasTooltip:!0})})})):null}),[qe,null==be?void 0:be.network,Me,Ne]),Ye=(0,r.useMemo)((function(){var e;return pe&&p&&ne.value===l.fz||(null==Re||null===(e=Re.code)||void 0===e?void 0:e.includes("MinerFee"))||Me}),[ne.value,null==Re?void 0:Re.code,p,pe,Me]),Qe=(0,r.useCallback)((function(){(0,i.$g)(Ee),S("depositGas")}),[S,Ee]),Ze=(0,r.useMemo)((function(){var e;return Ye?a(oe.topUpButtonText,{cryptoSymbol:null==be||null===(e=be.network.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode}):a(oe.previewButton)}),[Ye,a,null==be?void 0:be.network]),Xe=(0,r.useMemo)((function(){return Ye?Qe:ze}),[Ye,ze,Qe]),Je=(0,r.useCallback)((function(){var e;(0,i.ci)(Ee),chrome.tabs.create({url:k.xg[null!==(e=null==be?void 0:be.currencyCode.code)&&void 0!==e?e:""]})}),[Ee,null==be?void 0:be.currencyCode.code]),$e=(0,r.useCallback)((function(e){var t;if(null==be||!be.balance)throw new Error("Could not find a balance for source wallet");var n=(null!==(t=be.balance)&&void 0!==t?t:0n)*BigInt(e*Z.c$)/BigInt(Z.c$);ie.onChange(n),le.onChange((0,u.ej)({currencyFormatter:fe,wallet:be,newAmount:n,isCrypto:!ae.value,includeCode:!1,preserveEndingZeros:!0}))}),[be,ie,le,fe,ae.value]),et=(0,r.useCallback)((function(){S("selectAsset")}),[S]),tt=(0,r.useCallback)((function(){S("selectProvider")}),[S]),nt=(0,r.useMemo)((function(){return ne.value!==k.mv}),[ne]);return(0,$.jsx)(D.ff,{height:"100%",header:(0,$.jsx)(E.jq,{variant:"secondary",title:a(re.value===A.V.STAKE?oe.earnTitle:oe.unstakingTitle),actions:(0,$.jsx)(q.N,{onClick:Je,as:"button",children:a(oe.learnMoreLabel)}),handleBack:Fe}),children:(0,$.jsxs)(N.T,{justifyContent:"space-between",height:"100%",children:[(0,$.jsxs)(N.T,{height:"50%",justifyContent:"center",children:[be?(0,$.jsx)(L.J$,{context:"stake",wallet:be,isFiat:ae,cryptoAmount:ie,enteredAmount:le,shouldUpdateCryptoAmount:ce,onInsufficientFund:je,analyticsSwitchDisplay:De,txType:m.Ir.STAKE,isTopUpEnabled:pe&&ne.value===l.fz,fiatValueDisplay:Be}):null,(0,$.jsx)(U.a,{justifyContent:"center",height:Z.VZ,paddingX:3,paddingTop:1,children:Ke})]}),(0,$.jsxs)(N.T,{height:"50%",justifyContent:"flex-end",gap:1,paddingBottom:3,children:[(0,$.jsx)(R.l,{compact:ye,outerSpacing:se,testID:"stake-entry-selector",accessory:Pe&&ge?"arrow":void 0,title:a(Pe?oe.stakeLabel:oe.unstakingTitle),description:ye?(0,$.jsx)(K.C,{as:"p",color:"fgMuted",children:null==be?void 0:be.currencyCode.code}):(0,$.jsxs)(_.z,{gap:.5,children:[(0,$.jsx)(K.C,{as:"p",color:"fgMuted",children:"".concat(null==be?void 0:be.currencyCode.code," \xb7")}),(0,$.jsx)(K.C,{as:"p",color:"fgPositive",children:Ce})]}),detail:(0,$.jsx)(N.T,{alignItems:"flex-end",children:(0,$.jsx)(Y.w,{as:"p",children:Be})}),subdetail:(0,$.jsx)(N.T,{alignItems:"flex-end",children:(0,$.jsx)(K.C,{as:"p",color:"fgMuted",children:a(oe.availableAmount)})}),onClick:Pe&&ge?et:void 0,media:(0,$.jsx)(P.E,{asset:Ge})}),Pe&&ye?(0,$.jsx)(U.a,{alignItems:"center",children:(0,$.jsx)(V.In,{name:"verticalLine",size:"s",paddingStart:4,color:"fgMuted"})}):null,Pe&&ye?(0,$.jsx)(R.l,{compact:!0,outerSpacing:se,testID:"stake-entry-provider-selector",accessory:nt?"arrow":void 0,title:a(oe.toLabel),description:(0,$.jsxs)(_.z,{gap:.5,children:[(0,$.jsx)(K.C,{as:"p",color:"fgMuted",children:"".concat(null==ke?void 0:ke.currencyCode.code," \xb7")}),(0,$.jsx)(K.C,{as:"p",color:"fgPositive",children:Ce})]}),onClick:nt?tt:void 0,media:(0,$.jsx)(P.E,{asset:Oe})}):null,(0,$.jsxs)(N.T,{paddingX:3,gap:2,paddingTop:ye?2:0,children:[(0,$.jsx)(j.G,{onPressMaxButton:_e,onPressPercentageButton:$e}),(0,$.jsx)(W.$n,{block:!0,disabled:!Ye&&Ue,onClick:Xe,loading:Ve,variant:Ye?"secondary":"primary",testID:"entry-step-cta-button",children:Ze})]})]})]})})}),"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseState{[hasInsufficientFund, setHasInsufficientFund](false)}\nuseStepper{{ goToStep }}\nuseFields{{\n    currencyCode,\n    stakeType,\n    isFiat,\n    cryptoAmount,\n    enteredAmount,\n    shouldUpdateCryptoAmount,\n    targetCurrencyCode,\n    network,\n  }}\nuseCurrencyFormatter{currencyFormatter}\nuseIsStakingTopUpEnabled{isStakeTopUpEnabled}\nuseIsWETHStakeEligible{isWETHSTakeEligible}\nuseIsStakeMultiProviderEligible{isStakeMultiProviderEligible}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{\n    sourceWallet,\n    targetWallet,\n    isLoading: isStakeWalletsLoading,\n  }}\nuseGetEarnRate{{ earnRate }}\nuseGetGasEstimate{{ gasEstimate, refetch, isFetched }}\nuseAddTrackedExchangeRate{addTrackedRate}\nuseBaseAssetZeroBalanceError{zeroBaseAssetError}\nuseGetFeeWallet{feeWallet}\nuseExtensionPerfMark{{ start: markStartLoadPreviewPerf }}\nusePerfMarkOnMount{}\nuseMemo{isStake}\nuseMemo{analyticsMetadata}\nuseEntryStepViewed{}\nuseEffect{}\nuseCallback{handleInsufficientFund}\nuseCallback{triggerAnalyticsSwitchDisplay}\nuseCallback{handleGoBack}\nuseMemo{sourceAssetLike}\nuseMemo{targetAssetLike}\nuseGenerateStakeTransaction{{ generateTransactions, generateTransactionsError, isGenerateTransactionsLoading }}\nuseMemo{isPreviewButtonDisabled}\nuseEffect{}\nuseCallback{handlePressMaxButton}\nuseCallback{handlePressPreview}\nuseMemo{errorToDisplay}\nuseMemo{errorComponent}\nuseMemo{isDepositGasButtonVisible}\nuseCallback{handleDepositGasPress}\nuseMemo{buttonText}\nuseMemo{handleCTAPress}\nuseCallback{handleLearnMorePress}\nuseCallback{handlePressPercentageButton}\nuseCallback{handlePressSelectAsset}\nuseCallback{handlePressSelectProvider}\nuseMemo{hasMultiProvider}",(function(){return[o.A,s.W6,B.lE,H.A,c.J9,y,w.$,C,M.h,A.X,h.a,m.Dy,v.oD,T.X,x.F,O.z,Q.c,i.iD,J.v]})));(ne="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(ne.register(oe,"messages","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx"),ne.register(se,"listCellOuterSpacing","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx"),ne.register(ie,"EntryStep","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx")),(re="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&re(e)},59311:(e,t,n)=>{n.d(t,{J:()=>O});var r=n(14041),a=n(32183),o=n(8867),s=n(86090),i=n(65393),l=n(70359),c=n(96295),u=n(7548),d=n(72019);const f=(0,a.YK)({stakingTitle:{id:"t3wAw/",defaultMessage:"Earn {rate} on your {currencyCode}"},earnRewardsLabel:{id:"yUuhDt",defaultMessage:"Earn on {currencyCode} with staking"},ethEarnRewardsDescription:{id:"cmddz2",defaultMessage:"Stake your ETH with Coinbase to start earning."},maticEarnRewardsDescription:{id:"+tAMoP",defaultMessage:"Stake with Lido, a popular staking service."},unstakeLabel:{id:"XuNNLd",defaultMessage:"Unstake at anytime"},ethUnstakeDescription:{id:"cr2lqN",defaultMessage:"Staked ETH is held as cbETH, which you can unstake, sell, or deposit in DeFi."},maticUnstakeDescription:{id:"kb19It",defaultMessage:"After you unstake, your MATIC will be claimable in 3\u20134 days."},safeAndSecureLabel:{id:"P4xgkB",defaultMessage:"Safe and secure"},safeAndSecureDescription:{id:"kmvB/Q",defaultMessage:"Coinbase\u2019s best-in-class security has kept funds safe for 10+ years."},noHiddenFeesLabel:{id:"46t5Ym",defaultMessage:"No hidden fees"},noHiddenFeesDescription:{id:"9MyzK6",defaultMessage:"You get the same yield here as you do on Lido. There\u2019s no Coinbase fee."},stakeButton:{id:"kIyFYU",defaultMessage:"Start earning"},faqButton:{id:"UoeLR6",defaultMessage:"Read FAQs"},multiProviderStakeLabel:{id:"/gY5Zv",defaultMessage:"Stake with Coinbase or Rocket Pool"},multiProviderStakeDescription:{id:"LVF3fq",defaultMessage:"Stake your ETH with Coinbase or Rocket Pool to start earning."},multiProviderRewardsLabel:{id:"pdkEA5",defaultMessage:"Earn staking rewards"},multiProviderRewardsDescription:{id:"l01HV1",defaultMessage:"Earn staking rewards simply by holding cbETH or rETH."},multiProviderLockupLabel:{id:"Cq9pd0",defaultMessage:"Flexible with no lockup"},multiProviderLockupDescription:{id:"1T46IR",defaultMessage:"Swap back to ETH or use your tokens in DeFi any time."},delegatorStakingLabel:{id:"1/37zJ",defaultMessage:"Get rewarded for staking"},delegatorStakingDescription:{id:"D0ap0Q",defaultMessage:"Earn staking rewards while helping secure the Ethereum network. Rate updates daily."},delegatorStakingOptionsLabel:{id:"dpxRrW",defaultMessage:"Multiple options to choose from"},delegatorStakingOptionsDescription:{id:"Gh95X4",defaultMessage:"Select from high rewards, flexible, or decentralized on the confirmation step."},delegatorStakingUnstakeLabel:{id:"nB3eP9",defaultMessage:"Unstake with ease"},delegatorStakingUnstakeDescription:{id:"d2ZuWy",defaultMessage:"Unstaking takes up to 1 day to process; liquid staking offers instant liquidity."}});function p({currencyCode:e,chainId:t,targetCurrencyCode:n}){const{formatMessage:a}=(0,o.A)(),{earnRate:s}=(0,u.a)({targetCurrencyCode:n??l.bk[e],chainId:t}),i=(0,d.P)();return(0,r.useMemo)((()=>{switch(e){case l.R1:case c.fz:return{earnRate:s,illustrationName:"ethStakeOrWrap",listItems:[{label:a(i?f.delegatorStakingLabel:f.multiProviderStakeLabel,{currencyCode:e}),description:a(i?f.delegatorStakingDescription:f.multiProviderStakeDescription),testID:"learn-step-earn-rewards"},{label:a(i?f.delegatorStakingOptionsLabel:f.multiProviderRewardsLabel),description:a(i?f.delegatorStakingOptionsDescription:f.multiProviderRewardsDescription),testID:"learn-step-unstake"},{label:a(i?f.delegatorStakingUnstakeLabel:f.multiProviderLockupLabel),description:a(i?f.delegatorStakingUnstakeDescription:f.multiProviderLockupDescription),testID:"learn-step-fees"}]};case l.mv:return{earnRate:s,illustrationName:"transferCoins",listItems:[{label:a(f.earnRewardsLabel,{currencyCode:e}),description:a(f.maticEarnRewardsDescription),testID:"learn-step-earn-rewards"},{label:a(f.unstakeLabel),description:a(f.maticUnstakeDescription),testID:"learn-step-unstake"},{label:a(f.noHiddenFeesLabel),description:a(f.noHiddenFeesDescription),testID:"learn-step-fees"}]};default:throw new Error("Invalid currency code for staking nux")}}),[e,s,a,i])}var g,y=n(32451),m=n(66656),v=n(21983),b=n(4118),k=n(24905),h=n(59706),C=n(33396),S=n(85581),w=n(9197),A=n(2673),T=n(34107),x=n(55799),M=n(15654),I=n(51190),L=n(46171),P=n(53363),E=n(31085);e=n.hmd(e),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&g(e);var j,D,F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},G=(0,a.YK)({stakingTitle:{id:"t3wAw/",defaultMessage:[{type:0,value:"Earn "},{type:1,value:"rate"},{type:0,value:" on your "},{type:1,value:"currencyCode"}]},stakeButton:{id:"kIyFYU",defaultMessage:[{type:0,value:"Start earning"}]},faqButton:{id:"UoeLR6",defaultMessage:[{type:0,value:"Read FAQs"}]}}),O=(0,r.memo)(F((function(){var e=(0,o.A)().formatMessage,t=(0,s.W6)().goBack,n=(0,s.g)(),a=n.currencyCode,c=n.chainId,u=(0,C.lE)(L.Im).goToStep,d=p({currencyCode:a,chainId:c}),f=d.earnRate,g=d.listItems,j=d.illustrationName;if(!a)throw new Error("Asset is required");(0,i._s)({currencyCode:a});var D=(0,b.z)((0,y.y9)(y.fO.stake),y.yW.launch_stake,{logMetric:!0}).start,F=(0,r.useCallback)((function(){(0,i.Yd)({currencyCode:a}),t()}),[t,a]),O=(0,r.useCallback)((function(){(0,i.Lg)({currencyCode:a}),m.i.set(P.B[a],(new Date).toISOString()),D(),u("entry")}),[a,D,u]),B=(0,r.useCallback)((function(){(0,i.K0)({currencyCode:a}),chrome.tabs.create({url:l.xg[a]})}),[a]),H=(0,r.useMemo)((function(){return(0,E.jsx)(x.a,{justifyContent:"flex-start",height:"100%",children:(0,E.jsx)(A.In,{name:"checkmark",size:"s",color:"fg"})})}),[]);return(0,E.jsxs)(M.T,{height:k.fG,justifyContent:"space-between",children:[(0,E.jsx)(v.u,{onBack:F}),(0,E.jsxs)(M.T,{overflow:"scroll",children:[(0,E.jsxs)(M.T,{alignItems:"center",gap:2,paddingX:2,children:["ethStakeOrWrap"===j?(0,E.jsx)(T.g,{name:j,dimension:"240x120"}):(0,E.jsx)(h.t,{illustration:"TransferCoinsMiami",children:(0,E.jsx)(T.g,{name:j,dimension:"240x120"})}),(0,E.jsx)(x.a,{children:(0,E.jsx)(I._,{as:"span",textAlign:"center",testID:"stake-nux-title",children:e(G.stakingTitle,{currencyCode:a,rate:(0,E.jsx)(I._,{as:"span",color:"fgPositive",children:f})})})})]}),g.map((function(e){var t=e.label,n=e.description,r=e.testID;return(0,E.jsx)(w.g,{title:t,description:n,media:H,testID:r},r)}))]}),(0,E.jsxs)(M.T,{flexShrink:0,gap:2,paddingX:2,paddingBottom:2,children:[(0,E.jsx)(S.$n,{onClick:O,testID:"learn-step-stake-button",children:e(G.stakeButton)}),(0,E.jsx)(S.$n,{variant:"secondary",onClick:B,testID:"learn-step-faq-button",children:e(G.faqButton)})]})]})}),"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseParams{{ currencyCode, chainId }}\nuseStepper{{ goToStep }}\nuseGetStakeNux{{ earnRate, listItems, illustrationName }}\nuseLearnStepViewed{}\nuseExtensionPerfMark{{ start: markStartPerf }}\nuseCallback{handleGoBack}\nuseCallback{handleStakePress}\nuseCallback{handleFAQPress}\nuseMemo{checkMarkIcon}",(function(){return[o.A,s.W6,s.g,C.lE,p,i._s,b.z]})));(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(G,"messages","/workspaces/apps/extension/src/screens/Stake/steps/LearnStep/LearnStep.tsx"),j.register(O,"LearnStep","/workspaces/apps/extension/src/screens/Stake/steps/LearnStep/LearnStep.tsx")),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&D(e)},57691:(e,t,n)=>{n.d(t,{A:()=>j});var r=n(14041),a=n(32183),o=n(8867),s=n(86090),i=n(65393),l=n(87432),c=n(18647),u=n(21413),d=n(33396),f=n(37121),p=n(46171),g=n(4244),y=n(22202),m=n(70918),v=n(46845);function b(){const e=(0,s.W6)(),{formatToCrypto:t}=(0,g.J9)(),[n,a]=(0,r.useState)(null),{goBack:o,goToStep:l}=(0,d.lE)(p.Im),c=(0,y.b)(),{cryptoAmount:u,stakeTxData:{value:b},unsignedStakeTxResult:{value:k},unsignedApproveTxResult:{value:h}}=(0,f.A)(p.Zd),C=h?.transaction,S=k?.transaction,w=(0,m.h)(),A=(0,v.J)(w,S),T=(0,r.useMemo)((()=>({currencyCode:b?.quote.fromAsset?.currencyCode.code??b?.quote.toAsset.currencyCode.code,chainId:Number(b?.chainId),contractAddress:b?.quote.fromAsset?.address?.rawValue??b?.quote.toAsset.address?.rawValue,cryptoAmount:b&&t({currencyCode:b.quote.fromAsset?.currencyCode??b.quote.toAsset.currencyCode,decimals:b?.quote.fromAsset?.decimals??b?.quote.toAsset.decimals,value:u.value,includeCode:!1}),targetCurrencyCode:b?.quote.toAsset.currencyCode.code})),[b,u,t]),x=(0,r.useCallback)((()=>{(0,i.mC)(T),l("status"),a(null)}),[l,T]),M=(0,r.useCallback)((t=>{"UserRejectedWalletLinkRequest"===t.name?(0,i.K1)(T):(0,i.jF)(T),a({errorMessage:t.message,onPrimaryButtonPress:()=>{a(null),o()},onSecondaryButtonPress:()=>e.replace("/portfolio"),secondaryButtonText:"Go Back Home",primaryButtonText:"Try Again"})}),[o,e,T]),I=(0,r.useCallback)((async()=>{if(!A||!S)return null;if(C)try{await c({unsignedTxOrUserOp:C,wallet:A})}catch(e){M(e)}try{await c({unsignedTxOrUserOp:S,wallet:A}),x()}catch(e){M(e)}}),[M,x,c,C,S,A]);return(0,r.useMemo)((()=>({signAndSubmitViaWalletlink:I,errorStateProps:n})),[n,I])}var k,h=n(31085);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,c=Object.create(l.prototype);return T(c,"_invoke",function(n,r,a){var o,i,l,c=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,l=e,f.n=n,s}};function p(n,r){for(i=n,l=r,t=0;!d&&c&&!a&&t<u.length;t++){var a,o=u[t],p=f.p,g=o[2];n>3?(a=g===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,f.n=g,i=0))}if(a||n>1)return s;throw d=!0,r}return function(a,u,g){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,g),i=u,l=g;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(c=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==s)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,a,o),!0),c}var s={};function i(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(T(t={},r,(function(){return this})),t),d=c.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,T(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,T(d,"constructor",c),T(c,"constructor",l),l.displayName="GeneratorFunction",T(c,a,"GeneratorFunction"),T(d),T(d,a,"Generator"),T(d,r,(function(){return this})),T(d,"toString",(function(){return"[object Generator]"})),(A=function(){return{w:o,m:f}})()}function T(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}T=function(e,t,n,r){function o(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},T(e,t,n,r)}function x(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){x(o,r,a,s,i,"next",e)}function i(e){x(o,r,a,s,i,"throw",e)}s(void 0)}))}}e=n.hmd(e),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&k(e);var I,L,P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},E=(0,a.YK)({title:{id:"VwWGjG",defaultMessage:[{type:0,value:"Confirm on phone"}]},description:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},retry:{id:"jvhzSF",defaultMessage:[{type:0,value:"Resend notification"}]},dontSeeNotification:{id:"epKk4O",defaultMessage:[{type:0,value:"Don't see the notification?"}]}});function j(){var e,t,n,a=(0,s.W6)(),g=(0,o.A)().formatMessage,y=(0,d.lE)(p.Im),m=y.goBack,v=y.hasPreviousStep,k=(0,f.A)(p.Zd),C=k.stakeTxData.value,T=k.stakeType.value,x=k.targetCurrencyCode.value,I=(0,r.useMemo)((function(){var e,t,n,r,a;return{currencyCode:null!==(e=null==C||null===(t=C.quote.fromAsset)||void 0===t?void 0:t.currencyCode.code)&&void 0!==e?e:null==C?void 0:C.quote.toAsset.currencyCode.code,chainId:Number(null==C?void 0:C.chainId),contractAddress:null!==(n=null==C||null===(r=C.quote.fromAsset)||void 0===r||null===(r=r.address)||void 0===r?void 0:r.rawValue)&&void 0!==n?n:null==C||null===(a=C.quote.toAsset.address)||void 0===a?void 0:a.rawValue,context:T,targetCurrencyCode:x}}),[null==C?void 0:C.chainId,null==C||null===(e=C.quote.fromAsset)||void 0===e||null===(e=e.address)||void 0===e?void 0:e.rawValue,null==C||null===(t=C.quote.fromAsset)||void 0===t?void 0:t.currencyCode.code,null==C||null===(n=C.quote.toAsset.address)||void 0===n?void 0:n.rawValue,null==C?void 0:C.quote.toAsset.currencyCode.code,T,x]);(0,i.jW)(I);var L=(0,r.useRef)(!1),P=(0,r.useCallback)((function(){(0,i.nO)(I),v?m():a.goBack()}),[v,m,a,I]),j=b(),D=j.signAndSubmitViaWalletlink,F=j.errorStateProps,G=(0,r.useCallback)(M(A().m((function e(){return A().w((function(e){for(;;)switch(e.n){case 0:return(0,i.SD)(I),e.n=1,D();case 1:return e.a(2)}}),e)}))),[D,I]);(0,l.y)((function(){F||D()}));var O=(0,r.useMemo)((function(){return{label:g(E.retry),onClick:(e=M(A().m((function e(){return A().w((function(e){for(;;)switch(e.n){case 0:return L.current=!0,e.n=1,G();case 1:return e.a(2)}}),e)}))),function(){return e.apply(this,arguments)})};var e}),[g,G]);return F&&!L.current?(0,h.jsx)(c.W,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F)):(0,h.jsx)(u._,{title:g(E.title),description:g(E.description),onDismiss:P,secondaryActionLabel:g(E.dontSeeNotification),retryAction:O})}P(j,"useHistory{history}\nuseIntl{{ formatMessage }}\nuseStepper{{ goBack, hasPreviousStep }}\nuseFields{{\n    stakeTxData: { value: stakeTxData },\n    stakeType: { value: stakeType },\n    targetCurrencyCode: { value: targetCurrencyCode },\n  }}\nuseMemo{analyticsMetadata}\nusePhoneConfirmationStepViewed{}\nuseRef{isUserCancelled}\nuseCallback{onDismiss}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, errorStateProps }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}",(function(){return[s.W6,o.A,d.lE,f.A,i.jW,b,l.y]})),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(E,"messages","/workspaces/apps/extension/src/screens/Stake/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx"),I.register(j,"PhoneConfirmationStep","/workspaces/apps/extension/src/screens/Stake/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},57571:(e,t,n)=>{n.d(t,{V:()=>b});var r,a,o,s=n(14041),i=n(65393),l=n(99172),c=n(70359),u=n(396),d=n(70918),f=n(23804),p=n(33396),g=n(37121),y=n(58570),m=n(46171),v=n(31085);function b(){var e=(0,p.lE)(m.Im),t=e.goBack,n=e.goToStep,r=(0,g.A)(m.Zd),a=r.currencyCode,o=r.stakeType,b=r.network,k=r.targetCurrencyCode,h=(0,d.h)(),C=(0,u.u)(h,{network:b.value,stakeType:o.value}),S=(0,s.useMemo)((function(){return C.find((function(e){return e.currencyCode.code===a.value&&l.lg.isEqual(b.value,e.network)}))}),[a,C,b]),w=(0,s.useCallback)((function(e){var t;e instanceof f.u&&void 0!==e.balance&&e.balance>0n&&(c.bk[e.currencyCode.code]!==c.bk[a.value]&&k.onChange(c.bk[e.currencyCode.code]),a.onChange(e.currencyCode.code),(0,i.nY)({currencyCode:e.currencyCode.code,chainId:null===(t=b.value.asChain())||void 0===t?void 0:t.chainId}),n("entry"))}),[a,n,b.value,k]);return(0,v.jsx)(y.j,{testIdPrefix:"stake",wallets:C,onBack:t,onSelect:w,network:b.value,targetAssetId:null==S?void 0:S.id,context:y.P.Stake})}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(b,"useStepper{{ goBack, goToStep }}\nuseFields{{ currencyCode, stakeType, network, targetCurrencyCode }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseEarnableWallets{earnWallets}\nuseMemo{selectedWallet}\nuseCallback{handleSelect}",(function(){return[p.lE,g.A,d.h,u.u]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(b,"SelectAssetStep","/workspaces/apps/extension/src/screens/Stake/steps/SelectAssetStep/SelectAssetStep.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},60527:(e,t,n)=>{n.d(t,{I:()=>U});var r,a=n(14041),o=n(32183),s=n(8867),i=n(65393),l=n(96295),c=n(42716),u=n(70359),d=n(74827),f=n(99633),p=n(78392),g=n(21983),y=n(24905),m=n(33396),v=n(37121),b=n(85581),k=n(1974),h=n(2673),C=n(15654),S=n(84492),w=n(55799),A=n(10297),T=n(41250),x=n(94330),M=n(67209),I=n(60149),L=n(46171),P=n(31085);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var G,O,B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H=(0,o.YK)({fromTitle:{id:"e7Q6b/",defaultMessage:[{type:0,value:"Choose asset"}]},earnTitle:{id:"RAYgXb",defaultMessage:[{type:0,value:"Earn yield"}]},stakingProviderTitle:{id:"TytYpN",defaultMessage:[{type:0,value:"Choose a staking provider"}]},recommendedLabel:{id:"u4eBaC",defaultMessage:[{type:0,value:"Recommended"}]},decentralizedLabel:{id:"rwBEaL",defaultMessage:[{type:0,value:"Decentralized"}]},coinbaseLabel:{id:"lLZS3w",defaultMessage:[{type:0,value:"Coinbase"}]},rocketPoolLabel:{id:"bOyHek",defaultMessage:[{type:0,value:"Rocket Pool"}]},learnMoreLabel:{id:"1Smmc+",defaultMessage:[{type:0,value:"Learn more"}]},coinbaseDescriptionOne:{id:"UiPRkQ",defaultMessage:[{type:0,value:"The cbETH token represents ETH staked through Coinbase, a trusted, public company."}]},coinbaseDescriptionTwo:{id:"L9BS5g",defaultMessage:[{type:0,value:"cbETH automatically accrues staking rewards, with no lock up."}]},rocketPoolDescriptionOne:{id:"hR58GC",defaultMessage:[{type:0,value:"The rETH token represents ETH staked through Rocket Pool, a decentralized staking service."}]},rocketPoolDescriptionTwo:{id:"Qj9RdF",defaultMessage:[{type:0,value:"rETH automatically accrues staking rewards, with no lock up."}]},continueButton:{id:"PFVlTT",defaultMessage:[{type:0,value:"Continue"}]}}),W=F(F({},u.Td,H.recommendedLabel),u.zJ,H.decentralizedLabel),R=F(F({},u.Td,H.coinbaseLabel),u.zJ,H.rocketPoolLabel);function V(e){var t,n=e.chainId,r=e.currencyCode,o=e.onPressProvider,i=e.isSelected,l=e.imageURL,c=e.network,g=(0,s.A)().formatMessage,y=j((0,f.useRecoilState)(d.y4),1)[0],m=(0,a.useMemo)((function(){return r===u.Td}),[r]),v=(0,a.useMemo)((function(){return{currencyCode:r,network:c,iconUrl:l,showNetworkIconOverride:!0}}),[r,l,c]);return(0,P.jsx)(A.t,{onClick:o,testID:"pressable-provider-".concat(r,"-").concat(n),children:(0,P.jsxs)(C.T,{borderColor:i?"bgLinePrimary":"bgLine",bordered:!0,borderRadius:400,children:[(0,P.jsxs)(S.z,{justifyContent:"space-between",paddingTop:2,paddingX:2,children:[(0,P.jsx)(w.a,{background:i?"bgPrimary":"bgSecondary",paddingY:.5,paddingX:1,borderRadius:1e3,children:(0,P.jsx)(T.a,{as:"p",color:"fg",children:g(W[r])})}),i?(0,P.jsx)(w.a,{justifyContent:"center",children:(0,P.jsx)(h.In,{name:"checkmark",size:"s"})}):null]}),(0,P.jsx)(k.l,{compact:!0,title:g(R[r]),description:(0,P.jsxs)(S.z,{gap:.5,children:[(0,P.jsx)(x.C,{as:"p",color:"fgMuted",children:"".concat(r," \xb7")}),(0,P.jsx)(x.C,{as:"p",color:"fgPositive",children:null===(t=y[r])||void 0===t?void 0:t[n]})]}),media:(0,P.jsx)(p.E,{asset:v})}),(0,P.jsxs)(C.T,{gap:1,paddingX:2,paddingBottom:2,children:[(0,P.jsxs)(S.z,{gap:1,children:[(0,P.jsx)(w.a,{children:(0,P.jsx)(M.V,{as:"p",children:"\u2022"})}),(0,P.jsx)(M.V,{as:"p",children:g(m?H.coinbaseDescriptionOne:H.rocketPoolDescriptionOne)})]}),(0,P.jsxs)(S.z,{gap:1,children:[(0,P.jsx)(w.a,{children:(0,P.jsx)(M.V,{as:"p",children:"\u2022"})}),(0,P.jsx)(M.V,{as:"p",children:g(m?H.coinbaseDescriptionTwo:H.rocketPoolDescriptionTwo)})]})]})]})})}function U(){var e,t,n=(0,s.A)().formatMessage,r=(0,m.lE)(L.Im),o=r.goBack,d=r.goToStep,f=(0,v.A)(L.Zd),p=f.currencyCode,k=f.network,h=f.targetCurrencyCode,S=null!==(e=null===(t=k.value.asChain())||void 0===t?void 0:t.chainId.toString())&&void 0!==e?e:"1",w=(0,c.Uq)({chainId:S,type:c.f3.WITHDRAW}),A=w.earnSourceAssets,T=w.isLoading,x=j((0,a.useState)(h.value),2),M=x[0],E=x[1],D=(0,a.useCallback)((function(e){return M===e}),[M]),F=(0,a.useCallback)((function(e){return function(){E(e)}}),[]),G=(0,a.useCallback)((function(){(0,i.$G)({currencyCode:p.value,chainId:S}),h.onChange(M),d("entry")}),[S,p.value,d,M,h]),O=(0,a.useMemo)((function(){return A.filter((function(e){return u.KS[e.currencyCode.code]===l.fz})).map((function(e){return(0,P.jsx)(V,{chainId:S,currencyCode:e.currencyCode.code,onPressProvider:F(e.currencyCode.code),isSelected:D(e.currencyCode.code),imageURL:e.imageURL,network:k.value},"".concat(S,"-").concat(e.currencyCode.code))}))}),[S,A,F,D,k]);return(0,P.jsxs)(C.T,{height:y.fG,justifyContent:"space-between",children:[(0,P.jsx)(g.u,{onBack:o}),(0,P.jsx)(C.T,{overflow:"scroll",children:(0,P.jsxs)(C.T,{paddingX:3,gap:2,children:[(0,P.jsx)(I.f,{as:"p",children:n(H.stakingProviderTitle)}),O]})}),(0,P.jsx)(C.T,{flexShrink:0,gap:2,paddingX:2,paddingBottom:2,children:(0,P.jsx)(b.$n,{onClick:G,testID:"stake-select-provider-continue-button",disabled:T,children:n(H.continueButton)})})]})}B(V,"useIntl{{ formatMessage }}\nuseRecoilState{[earnAssetsRatesMap]}\nuseMemo{isCBETH}\nuseMemo{assetLike}",(function(){return[s.A,f.useRecoilState]})),B(U,"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ currencyCode, network, targetCurrencyCode }}\nuseEarnSourceAssets{{ earnSourceAssets: earnProviders, isLoading }}\nuseState{[selectedCurrencyCode, setSelectedCurrencyCode](targetCurrencyCode.value)}\nuseCallback{isSelectedCurrencyCode}\nuseCallback{handleSelectProvider}\nuseCallback{handleContinue}\nuseMemo{providers}",(function(){return[s.A,m.lE,v.A,c.Uq]})),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(H,"messages","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(W,"CURRENCY_CODE_MESSAGE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(R,"CURRENCY_CODE_TITLE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(V,"Provider","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(U,"SelectProviderStep","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},74989:(e,t,n)=>{n.d(t,{f:()=>D});var r,a=n(14041),o=n(32183),s=n(8867),i=n(86090),l=n(65393),c=n(11649),u=n(70359),d=n(19994),f=n(7548),p=n(24475),g=n(32451),y=n(66446),m=n(52617),v=n(4118),b=n(33396),k=n(37121),h=n(87755),C=n(46171),S=n(58773),w=n(31085);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var I,L,P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},E=(0,o.YK)({stakingTitle:{id:"GmtrvI",defaultMessage:[{type:0,value:"You're staking"}]},unstakingTitle:{id:"aAZva+",defaultMessage:[{type:0,value:"You're unstaking"}]},disclaimer:{id:"VKV79V",defaultMessage:[{type:0,value:"Staked "},{type:1,value:"currencyCode"},{type:0,value:" will appear in the DeFi tab. You can unstake at any time."}]},failureTitle:{id:"r2aIcy",defaultMessage:[{type:0,value:"Stake failed"}]},failureDescriptionUnknownError:{id:"KlxoqU",defaultMessage:[{type:0,value:"Unknown error while sending transaction"}]},tryAgain:{id:"thF7qm",defaultMessage:[{type:0,value:"Try again"}]},goBackHome:{id:"fwpfJu",defaultMessage:[{type:0,value:"Go back home"}]},done:{id:"Nv+PvS",defaultMessage:[{type:0,value:"Done"}]},viewTransaction:{id:"LkAmOx",defaultMessage:[{type:0,value:"View transaction"}]},aprDescription:{id:"Cv/yjD",defaultMessage:[{type:0,value:"Earns "},{type:1,value:"rate"}]},claimMatic:{id:"DC4wPQ",defaultMessage:[{type:0,value:"Claim your MATIC in 3-4 days"}]},claimTitle:{id:"JHtf8u",defaultMessage:[{type:0,value:"You're claiming"}]}}),j=M(M(M({},p.V.CLAIM,E.claimTitle),p.V.STAKE,E.stakingTitle),p.V.UNSTAKE,E.unstakingTitle);function D(){var e,t,n,r,o,A,T=(0,s.A)().formatMessage,M=(0,i.W6)(),I=(0,k.A)(C.Zd),L=I.stakeType.value,P=I.ledgerStakeError,D=P.value,F=P.onChange,G=I.stakeTxData.value,O=I.network.value,B=(0,b.lE)(C.Im).goBack,H=(0,f.a)({targetCurrencyCode:null!==(e=null==G?void 0:G.quote.toAsset.currencyCode.code)&&void 0!==e?e:"",chainId:null===(t=O.asChain())||void 0===t?void 0:t.chainId.toString()}).earnRate;if(!G)throw new Error("stakeTxData was missing in StatusStep");(0,l.or)({currencyCode:null===(n=G.quote.fromAsset)||void 0===n?void 0:n.currencyCode.code,chainId:Number(null===(r=G.quote.fromAsset)||void 0===r?void 0:r.chainId),contractAddress:null===(o=G.quote.fromAsset)||void 0===o||null===(o=o.address)||void 0===o?void 0:o.rawValue});var W=(0,v.z)((0,g.y9)(g.fO.stake),g.yW.trigger_stake,{logMetric:!0}).end,R=(0,v.z)((0,g.y9)(g.fO.stake),g.yW.trigger_claim,{logMetric:!0}).end;(0,c.X)((function(){D?F(void 0):(W(),R())}));var V=(0,d.g)(G),U=V.sourceFiatAmount,N=V.sourceCryptoAmount,_=V.targetCryptoAmount,z=V.targetFiatAmount,q=(0,a.useMemo)((function(){var e="(".concat(U||z,")");return"".concat(null!=N?N:_," ").concat(e)}),[N,U,_,z]),K=(0,a.useCallback)((function(){M.replace("/portfolio")}),[M]),Y=(0,a.useCallback)((function(){M.replace("/transactions")}),[M]),Q=(0,a.useMemo)((function(){return{key:"done-button",name:"doneButton",onClick:K,loading:!1,variant:"primary",block:!0,children:T(E.done)}}),[T,K]),Z=(0,a.useMemo)((function(){return{key:"view-transactions-button",name:"viewTransactionsButton",onClick:Y,loading:!1,testID:"stake-status-view-transactions-button",variant:"secondary",block:!0,children:T(E.viewTransaction)}}),[T,Y]);if(D){var X,J,$,ee=D;return(0,w.jsx)(y.v,x(x({padding:2,elevation:1},S.V6),{},{children:(0,w.jsx)(h.D,{handleBack:B,statusCode:null!==(X=ee.statusCode)&&void 0!==X?X:void 0,errorId:null!==(J=ee.id)&&void 0!==J?J:void 0,errorMessage:null!==($=ee.message)&&void 0!==$?$:void 0})}))}return(0,w.jsx)(m.x,{status:m.n.SUCCESS,title:T(j[L]),subtitle:q,description:H&&L===p.V.STAKE?T(E.aprDescription,{rate:H}):void 0,descriptionColor:L===p.V.STAKE?"fgPositive":void 0,disclaimer:L===p.V.STAKE?T(E.disclaimer,{currencyCode:null===(A=G.quote.fromAsset)||void 0===A?void 0:A.currencyCode.code}):void 0,timeEstimation:G.quote.toAsset.currencyCode.code===u.mv&&L===p.V.STAKE?T(E.claimMatic):void 0,primaryButtonProps:Q,secondaryButtonProps:Z})}P(D,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseFields{{\n    stakeType: { value: stakeType },\n    ledgerStakeError: { value: ledgerStakeError, onChange: ledgerStakeOnChange },\n    stakeTxData: { value: stakeTxData },\n    network: { value: network },\n  }}\nuseStepper{{ goBack }}\nuseGetEarnRate{{ earnRate }}\nuseStatusStepViewed{}\nuseExtensionPerfMark{{ end: markEndStakePerf }}\nuseExtensionPerfMark{{ end: markEndClaimPerf }}\nuseOnUnmount{}\nuseFormatStakeAmounts{{ sourceFiatAmount, sourceCryptoAmount, targetCryptoAmount, targetFiatAmount }}\nuseMemo{formattedAmount}\nuseCallback{goToPortfolio}\nuseCallback{goToTransactions}\nuseMemo{primaryButtonProps: ButtonProps<ButtonDefaultElement>}\nuseMemo{secondaryButtonProps: ButtonProps<ButtonDefaultElement>}",(function(){return[s.A,i.W6,k.A,b.lE,f.a,l.or,v.z,v.z,c.X,d.g]})),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(E,"messages","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx"),I.register(j,"TITLE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx"),I.register(D,"StatusStep","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},63164:(e,t,n)=>{n.d(t,{m:()=>S});var r,a=n(14041),o=n(32183),s=n(8867),i=n(84213),l=n(77547),c=n(13620),u=n(16191),d=n(4244),f=n(72940),p=n(27301),g=n(52689),y=n(99172),m=n(57822),v=n(34767);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var b,k,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=(0,o.YK)({notEnoughBalanceForMinerFeeMessage:{id:"IZUdH3",defaultMessage:[{type:0,value:"You have "},{type:1,value:"fiatTotalAvailableBalance"},{type:0,value:" in "},{type:1,value:"cryptoSymbol"},{type:0,value:", but you need a total of "},{type:1,value:"fiatTotalTransactionValue"},{type:0,value:" to proceed."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]}});function S(e,t){var n=t.stakeTxData,r=t.unsignedStakeTx,o=t.unsignedApproveTx,b=(0,s.A)().formatMessage,k=(0,d.J9)(),h=(0,f.VL)({unsignedEthTx:r,unsignedApproveTx:o}),S=h.networkMaxFee,w=h.networkEstimatedFee,A=(0,a.useRef)(!1),T=(0,m.e)(e).find((function(e){return g.j.isEqual(e.currencyCode,r.feeCurrencyCode)&&p.J.isEqual(e.blockchain,r.blockchain)&&y.lg.isEqual(e.network,r.network)})),x=(0,a.useMemo)((function(){var e,t=n.tx.from===(null==T?void 0:T.primaryAddress)?BigInt(null!==(e=n.tx.value)&&void 0!==e?e:0):0n;return(r instanceof c.U?w:S)+t}),[n.tx.from,n.tx.value,T,r,w,S]),M=(0,a.useMemo)((function(){return void 0!==(null==T?void 0:T.balance)&&T.balance>=x}),[T,x]),I=(0,a.useMemo)((function(){return{notEnoughBalanceForMinerFee:{type:"notEnoughBalanceForMinerFee",isDismissible:!1,showErrorIcon:!0,message:b(C.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:r.feeCurrencyCode.code,fiatTotalAvailableBalance:void 0!==(null==T?void 0:T.balance)&&null!=T&&T.currencyCode?k.formatToFiat({fromCurrencyCode:T.currencyCode,decimals:T.decimals,value:T.balance,isAbbreviated:!1,contractAddress:T.contractAddress,network:T.network,blockchain:T.blockchain,includeCode:!0,formatZeroBalance:!0}):"",fiatTotalTransactionValue:T?k.formatToFiat({fromCurrencyCode:r.feeCurrencyCode,decimals:r.feeCurrencyDecimal,value:x,isAbbreviated:!1,contractAddress:void 0,network:T.network,blockchain:T.blockchain}):""}),analytics:{eventName:"stake.confirmation_preview_step.not_enough_eth_balance",eventProperties:{componentType:v.I5.text,action:v.X2.render,totalEthereumRequired:Number(x)}}}}}),[b,r.feeCurrencyCode,r.feeCurrencyDecimal,T,k,x]);return(0,a.useMemo)((function(){var e=r.network.asChain(),t=BigInt(0),n=BigInt(0),a=BigInt(0);if(r instanceof l.D?(t=r.maxFeePerGas/BigInt(Math.pow(10,9)),n=BigInt(r.gasLimit)):(r instanceof c.U&&(t=r.gasPrice/BigInt(Math.pow(10,9)),n=r.gasLimit),r instanceof u.K&&(a=r.estimatedFee)),!M)return A.current||(A.current=!0,(0,i.NZ)({blockchain:r.blockchain.rawValue,chainName:e.displayName,chainId:e.chainId.toString(10),errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:"stake".toLocaleString(),gasPriceInGwei:t.toString(),gasLimit:n.toString(),solanaGasPrice:a.toString()})),I.notEnoughBalanceForMinerFee}),[I.notEnoughBalanceForMinerFee,M,r])}h(S,"useIntl{{ formatMessage }}\nuseCurrencyFormatter{currencyFormatter}\nuseCalculateNetworkFees{{ networkMaxFee, networkEstimatedFee }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{totalBaseAssetRequired}\nuseMemo{hasEnoughBalance}\nuseMemo{errors: ErrorMap}\nuseMemo{}",(function(){return[s.A,d.J9,f.VL,m.e]})),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(C,"messages","/workspaces/libs/data/hooks/Stake/useTransactionDetailErrors.tsx"),b.register(S,"useTransactionDetailErrors","/workspaces/libs/data/hooks/Stake/useTransactionDetailErrors.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},50215:(e,t,n)=>{n.d(t,{G:()=>m});var r,a=n(14041),o=n(32183),s=n(8867),i=n(22115),l=n(85581),c=n(31085);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u,d,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p=(0,o.YK)({maxButton:{id:"Pm9NLv",defaultMessage:[{type:0,value:"Max"}]}}),g="25%",y="50%";function m(e){var t=e.onPressMaxButton,n=e.onPressPercentageButton,r=(0,s.A)().formatMessage,o=(0,a.useCallback)((function(e){return function(){n(e)}}),[n]);return(0,c.jsxs)(i.e,{accessibilityLabel:"Percentage buttons",block:!0,children:[(0,c.jsx)(l.$n,{compact:!0,variant:"secondary",onClick:o(.25),testID:"percentage-button-twenty-five-percent",children:g}),(0,c.jsx)(l.$n,{compact:!0,variant:"secondary",onClick:o(.5),testID:"percentage-button-fifty-percent",children:y}),(0,c.jsx)(l.$n,{compact:!0,variant:"secondary",onClick:t,testID:"percentage-button-max",children:r(p.maxButton)})]})}f(m,"useIntl{{ formatMessage }}\nuseCallback{handlePressPercentageButton}",(function(){return[s.A]})),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(p,"messages","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(g,"TWENTY_FIVE_PERCENT","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(y,"FIFTY_PERCENT","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(m,"PercentageButtons","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},17065:(e,t,n)=>{n.d(t,{y:()=>o});var r,a=n(31085);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function o(e){var t=e.color;return(0,a.jsx)("div",{className:l,style:{color:t}})}var s,i,l="sromg8e";n(53627),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(o,"Spinner","/workspaces/libs/wallet-cds-extension/components/Spinner.tsx"),s.register(l,"spinnerStyle","/workspaces/libs/wallet-cds-extension/components/Spinner.tsx")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},57641:(e,t,n)=>{function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{A:()=>r})},81092:(e,t,n)=>{function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>r})},95286:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(81092);function a(e){(0,r.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},53627:(e,t,n)=>{n.r(t)},64654:(e,t,n)=>{n.d(t,{VZ:()=>o,c$:()=>i,t0:()=>s});var r=n(96295),a=n(99172);const o=40,s=a.lg.fromChainId({chainPrefix:r.RC,chainId:1n}),i=10**18},46171:(e,t,n)=>{n.d(t,{Im:()=>i,LX:()=>l,Zd:()=>c});var r=n(99172),a=n(24475),o=n(33396),s=n(40019);const i=(0,o.KT)({steps:["learn","entry","confirmationPreview","status","phoneConfirmation","depositGas","selectAsset","selectProvider","claimConfirmation"],defaultStep:"learn"}),l={network:new r.lg("ETHEREUM_CHAIN:1",!1),cryptoAmount:0n,enteredAmount:"",stakeTxData:void 0,ledgerStakeError:void 0,unsignedApproveTxResult:void 0,unsignedStakeTxResult:void 0,signedApproveTx:void 0,signedStakeTx:void 0,nonce:void 0,quote:void 0,stakeType:a.V.STAKE,currencyCode:"",isFiat:!0,shouldUpdateCryptoAmount:!1,formDepositAmount:0n,targetCurrencyCode:"",tokenId:""},c=(0,s.A)({initialValues:l})},53363:(e,t,n)=>{n.d(t,{B:()=>C,X:()=>S});var r=n(14041),a=n(86090),o=n(96295),s=n(70359),i=n(24475),l=n(32451),c=n(98226),u=n(66656),d=n(95286),f=n(57641),p=n(81092);function g(e){(0,p.A)(1,arguments);var t=(0,d.A)(e);return t.setHours(0,0,0,0),t}var y=864e5;function m(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function v(e,t){(0,p.A)(2,arguments);var n=(0,d.A)(e),r=(0,d.A)(t),a=m(n,r),o=Math.abs(function(e,t){(0,p.A)(2,arguments);var n=g(e),r=g(t),a=n.getTime()-(0,f.A)(n),o=r.getTime()-(0,f.A)(r);return Math.round((a-o)/y)}(n,r));n.setDate(n.getDate()-a*o);var s=a*(o-Number(m(n,r)===-a));return 0===s?0:s}var b=n(4118);const k=new c.J("learnStepViewed"),h=new c.J("learnStepMaticViewed"),C={[o.fz]:k,[s.R1]:k,[s.mv]:h};function S(){const{tokenId:e,stakeType:t,currencyCode:n}=(0,a.g)(),o=u.i.get(C[n]??k),s=(0,r.useMemo)((()=>!!o&&v(new Date,new Date(o))<=30),[o]),{start:c}=(0,b.z)(l.fO.stake,l.yW.launch_stake,{logMetric:!0}),{start:d}=(0,b.z)(l.fO.stake,l.yW.load_claim_preview,{logMetric:!0});return t===i.V.CLAIM&&e?(d(),"claimConfirmation"):s||t===i.V.UNSTAKE?(c(),"entry"):"learn"}},72502:(e,t,n)=>{n.d(t,{v:()=>_});var r=n(14041),a=n(65393),o=n(59659),s=n(32183),i=n(8867),l=n(96295),c=n(4244),u=n(72940),d=n(62396),f=n(26746),p=n(13394),g=n(99172),y=n(70359),m=n(24475),v=n(2775),b=n(23349);class k{constructor(e){this.fromAmount=e.fromAmount?BigInt(e.fromAmount):0n,this.toAmount=e.toAmount?BigInt(e.toAmount):0n,this.fromAsset=e.fromAsset?.currencyCode?new b.V(e.fromAsset.name,e.fromAsset.currencyCode,e.fromAsset.address,e.fromAsset.decimals,e.fromAsset.imageURL,e.fromAsset.chainId,e.fromAsset.blockchain):void 0,this.toAsset=new b.V(e.toAsset.name,e.toAsset.currencyCode,e.toAsset.address,e.toAsset.decimals,e.toAsset.imageURL,e.toAsset.chainId,e.toAsset.blockchain),this.slippage=e.slippage}}var h=n(1048).Buffer;class C{constructor(e){this.tx=e.tx,this.approveTx=e.approveTx,this.quote=new k(e.quote),this.chainId=BigInt(e.chainId),this.workflowName=e.workflowName}get stakeHexEncodedTxData(){return h.from((0,v.LL)(this.tx.data),"hex")}get chainPrimaryAssetValue(){return this.tx.value?BigInt(this.tx.value):0n}}var S=n(83257),w=n(74146),A=n(46122),T=n(13129),x=n(76116),M=n(8387),I=n(1048).Buffer;async function L(e,t,n,r,a){const{tx:o}=t,s=o.value?BigInt(o.value):0n,i=o.gas?BigInt(o.gas):void 0,l=await(0,T.F_)(Number(t.chainId));if(l.error)throw l.error;y.yQ.set(A.kV,a);const c=(0,M.X)({baseMetadata:y.yQ,imageURL:t.quote.toAsset.imageURL,name:t.quote.toAsset.name,currencyCode:t.quote.toAsset.currencyCode.rawValue,decimals:BigInt(t.quote.toAsset.decimals),amount:t.quote.toAmount});return r?(0,x.Z)({wallet:e,recipientAddress:o.to,metadata:c,transactionAmount:{kind:"Amount",value:s},txOrUserOpConfig:{txType:"1559",nonce:n,dataBuffer:I.from((0,v.LL)(o.data),"hex"),selectedMaxFeePerGas:BigInt(l.normalMaxFeePerGas),selectedMaxPriorityFeePerGas:BigInt(l.normalPriorityFee),selectedGasLimit:i,selectedBaseFeePerGas:BigInt(l.baseFee)}}):(0,x.Z)({wallet:e,recipientAddress:t.tx.to,metadata:c,transactionAmount:{kind:"Amount",value:BigInt(t.tx.value)},txOrUserOpConfig:{txType:"Legacy",nonce:n,dataBuffer:t.stakeHexEncodedTxData,selectedGasPrice:BigInt(t.tx.gasPrice),selectedGasLimit:BigInt(t.tx.gas)}})}const P={[m.V.STAKE]:"earn/ethereum_kiln/stake",[m.V.UNSTAKE]:"earn/ethereum_kiln/unstake",[m.V.CLAIM]:"earn/ethereum_kiln/claim"};async function E({sourceWallet:e,feeWallet:t,amount:n,userAddress:r,chainId:a,is1559Enabled:o,stakeType:s,stakeTxDataOverride:i}){let l=i;if(!l){const e={amount:n.toString(),userAddress:r},{result:t}=await(0,w.hm)(P[s],e);l=new C(t)}const c=await(0,f.Wp)(r,g.lg.fromChainId({chainId:a}));let u,d=c;l.approveTx&&(u=await(0,S.e)(t,l.approveTx,c,o,y.yQ),d=c+1n);const m=await L(e,l,d,o,s);return"Failure"===u?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building approveTx: ${u.err}`),severity:"error",isHandled:!1}),Object.assign(u.transaction,{gasLimit:l.approveTx?.gas?BigInt(l.approveTx?.gas):void 0})),"Failure"===m?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building swapTx: ${m.err}`),severity:"error",isHandled:!1}),Object.assign(m.transaction,{gasLimit:BigInt(l.tx.gas)})),{stakeTxData:l,unsignedStakeTx:m,unsignedApproveTx:u}}const j={[y.R1]:{[y.Td]:!0,[y.zJ]:!0},[y.Td]:{[l.fz]:!0},[y.zJ]:{[l.fz]:!0},[l.fz]:{[y.Td]:!0,[y.zJ]:!0,[l.fz]:!1},[y.mv]:{[y.Sg]:!1},[y.Sg]:{[y.mv]:!1}};const D="earn/trade",F="earn/claim",G="5",O={[l.fz]:D,[y.R1]:D,[y.zJ]:D,[y.Td]:D,[y.mv]:"earn/deposit",[y.Sg]:"earn/withdraw"};async function B({sourceWallet:e,targetWallet:t,feeWallet:n,amount:r,userAddress:a,chainId:o,currencyCode:s,is1559Enabled:i,source:l,stakeType:c,tokenId:u}){const d=c===m.V.CLAIM,v=(b=e.currencyCode.code,k=t?.currencyCode.code??"",!!j[b]?.[k]);var b,k;const h=d?{userAddress:a,chainId:o.toString(),tokenId:u}:{fromAddress:a,from:e.contractAddress??e.currencyCode.code,to:t?.contractAddress??t?.currencyCode.code,amount:r.toString(),chainId:o.toString(),currencyCode:s,amountReference:"from",source:l,userAddress:a,...v?{slippagePercentage:G}:void 0},A=d?F:O[e.currencyCode.code],{result:T}=await(0,w.hm)(A??D,h),x=new C(T),M=await(0,f.Wp)(a,g.lg.fromChainId({chainId:o}));let I,P=M;x.approveTx&&(I=await(0,S.e)(n,x.approveTx,M,i,y.yQ),P=M+1n);const E=await L(e,x,P,i,c);return"Failure"===I?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building approveTx: ${I.err}`),severity:"error",isHandled:!1}),Object.assign(I.transaction,{gasLimit:x.approveTx?.gas?BigInt(x.approveTx?.gas):void 0})),"Failure"===E?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building swapTx: ${E.err}`),isHandled:!1,severity:"error"}),Object.assign(E.transaction,{gasLimit:BigInt(x.tx.gas)})),{stakeTxData:x,unsignedStakeTx:E,unsignedApproveTx:I}}var H=n(36760),W=n(21599);const R=(0,s.YK)({cbPayNotEnoughBalanceForMinerFeeMessage:{id:"z6rH3y",defaultMessage:"You need an additional ~{cryptoAmountNeeded} ({fiatAmountNeeded}) on the {networkName} network to cover the network fee."},cbPayZeroBalanceForMinerFeeMessage:{id:"cjf4F1",defaultMessage:"You need {cryptoSymbol} before you can make a transaction on the {networkName} network."},notEnoughBalanceForMinerFeeMessage:{id:"8YvB19",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol}, but you need {fiatTotalTransactionValue} due to gas fees"},depositMinerFeeMessage:{id:"mLulYH",defaultMessage:"You must deposit {fiatDifferenceValue} in {cryptoSymbol} to complete this transaction."},minStakeAmountMessage:{id:"+ZZsYn",defaultMessage:"You must stake at least {cryptoAmount} ETH (~ {fiatAmount})"}});var V=n(33396),U=n(37121),N=n(46171);function _({sourceWallet:e,targetWallet:t,feeWallet:n,shouldIgnoreSuccessRedirect:s,amount:f,stakeType:p,tokenId:g,handleSuccess:y}){const{goToStep:v}=(0,V.lE)(N.Im),b=(0,o.f)(),{unsignedApproveTxResult:k,unsignedStakeTxResult:h,stakeTxData:C,quote:S,formDepositAmount:w}=(0,U.A)(N.Zd),A=(0,r.useMemo)((()=>({currencyCode:e?.currencyCode.code,chainId:e?.network.asChain()?.chainId,contractAddress:e?.contractAddress,targetCurrencyCode:t?.currencyCode.code})),[e?.contractAddress,e?.currencyCode.code,e?.network,t?.currencyCode.code]),T=(0,r.useCallback)((e=>{C.onChange(e.stakeTxData),k.onChange(e.unsignedApproveTx),h.onChange(e.unsignedStakeTx),S.onChange(e.stakeTxData.quote)}),[S,C,k,h]),x=(0,r.useCallback)((function(){y?y():s||v("confirmationPreview")}),[y,s,v]),M=(0,r.useCallback)((e=>{(0,a.dz)(A),b(e)}),[b,A]),I=(0,r.useCallback)((e=>{w.onChange(e)}),[w]),L=(0,r.useCallback)((()=>{(0,a.Lu)(A)}),[A]),P=(0,r.useCallback)((()=>{(0,a.MB)(A)}),[A]),j=(0,r.useCallback)((()=>{(0,a.id)(A)}),[A]),{generateTransactions:D,generateTransactionsError:F,generateDepositAmount:G,isGenerateTransactionsLoading:O}=function({targetWallet:e,amount:t,stakeType:n,sourceWallet:a,feeWallet:s,onSuccess:f,updateFormData:p,onNotEnoughData:g,onRefreshFail:y,shouldIgnoreSuccessRedirect:v,onNotEnoughBalanceForMinerFee:b,onError:k,handleSetDepositAmount:h,tokenId:C,stakeTxDataOverride:S}){const w=(0,c.J9)(),[A,T]=(0,r.useState)(!1),[x,M]=(0,r.useState)(),[I,L]=(0,r.useState)(),P=(0,o.f)(),{formatMessage:j}=(0,i.A)();(0,r.useEffect)((function(){M(void 0)}),[t]);const D=(0,r.useCallback)((function({stakeTxData:e,unsignedStakeTx:r,unsignedApproveTx:o}){p?.({stakeTxData:e,unsignedStakeTx:r,unsignedApproveTx:o});const i=s?.contractAddress===a?.contractAddress&&n===m.V.STAKE?t:0n,{hasEnoughBalance:l,totalFeeAssetRequired:c}=(0,u.qw)({feeWallet:s,transactionAmount:i,unsignedTxOrUserOp:r.transaction,unsignedApproveEthTxOrUserOp:o?.transaction});if(!v&&l||n===m.V.CLAIM)return void f?.({stakeTxData:e,unsignedStakeTx:r,unsignedApproveTx:o});const d=void 0!==s?.balance&&s?.currencyCode?w.formatToCrypto({currencyCode:s.currencyCode,decimals:s.decimals,value:c-s.balance,network:s.network}):"",g=void 0!==s?.balance&&s?.currencyCode?w.formatToFiat({fromCurrencyCode:s.currencyCode,decimals:s.decimals,value:BigInt(c)-(s.balance??0n),isAbbreviated:!1,contractAddress:s.contractAddress,network:s.network,blockchain:s.blockchain,includeCode:!0,formatZeroBalance:!0}):"",y=0n===s?.balance,k=y?j(R.cbPayZeroBalanceForMinerFeeMessage,{cryptoSymbol:s?.currencyCode.code,networkName:s?.displayName}):j(R.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:d,fiatAmountNeeded:g,networkName:s?.network?.asChain()?.displayName}),C=j(R.depositMinerFeeMessage,{cryptoSymbol:s?.currencyCode.code,fiatDifferenceValue:w.formatToFiat({fromCurrencyCode:s.currencyCode,decimals:s.decimals,value:BigInt(c)-(s.balance??0n),isAbbreviated:!1,contractAddress:s.contractAddress,network:s.network,blockchain:s.blockchain,includeCode:!0,formatZeroBalance:!0})}),S=y?"zeroBalanceForMinerFee":"notEnoughBalanceForMinerFee";b?.({errorMessage:k,balance:Number(a?.balance??0),totalRequired:c-(s.balance??0n)}),h?.(BigInt(c)-(s.balance??0n)),L(new Error(C)),M({message:k,code:S})}),[p,s,a?.contractAddress,a?.balance,n,t,v,w,j,b,h,f]),F=(0,H.j)(a);return{generateTransactions:(0,r.useCallback)((async function(r=!1){const o=a?.primaryAddress,i=a?.network,c=a?.accountId,u=c?d.g.parseAccountTypeFromId(c):void 0,f=(0,W.e)(u),p={network:Boolean(i),sourceWallet:Boolean(a),address:Boolean(o),targetWallet:Boolean(e)};if(!i||!a||!o||!s||!e&&n!==m.V.CLAIM)return r?void y?.(p):(g?.(p),P(new Error("Not enough data provided to generate transactions")));const b=a.id===e?.id||n===m.V.CLAIM&&a.currencyCode.code===l.fz,h=b?E:B;try{T(!0);const r=await h({feeWallet:s,sourceWallet:a,targetWallet:e,amount:t??0n,stakeType:n,userAddress:o,chainId:BigInt(a.network.asChain()?.chainId??1),currencyCode:a.currencyCode.code,is1559Enabled:F,source:f,tokenId:C,stakeTxDataOverride:v&&b?S:void 0});D(r)}catch(e){k?(M(e),k(e)):P(e)}finally{T(!1)}}),[a,e,s,n,g,P,y,t,F,C,v,S,D,k]),generateTransactionsError:x,generateDepositAmount:I,isGenerateTransactionsLoading:A}}({amount:f,sourceWallet:e,targetWallet:t,feeWallet:n,stakeType:p,updateFormData:T,onSuccess:x,onNotEnoughBalanceForMinerFee:P,onNotEnoughData:j,shouldIgnoreSuccessRedirect:s,onError:M,handleSetDepositAmount:I,onRefreshFail:L,tokenId:g});return(0,r.useMemo)((()=>({generateTransactions:D,generateTransactionsError:F,generateDepositAmount:G,isGenerateTransactionsLoading:O})),[D,F,G,O])}},54:(e,t,n)=>{n.d(t,{u:()=>r});const r=31e3},19994:(e,t,n)=>{n.d(t,{g:()=>o});var r=n(14041),a=n(4244);function o(e){const t=(0,a.J9)(),{quote:n}=e,o=(0,r.useMemo)((()=>{if(!n.fromAsset)return;const e=t.fiatValue({currencyCode:n.fromAsset.currencyCode,decimals:n.fromAsset.decimals,value:n.fromAmount,contractAddress:n.fromAsset.address?.rawValue,network:n.fromAsset.network,blockchain:n.fromAsset.blockchain,digitsToFixed:2});return e?t.fiatValueString(e):void 0}),[n.fromAsset,n.fromAmount,t]),s=(0,r.useMemo)((()=>{if(n.fromAsset)return t.formatToCrypto({currencyCode:n.fromAsset.currencyCode,decimals:n.fromAsset.decimals,value:n.fromAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})}),[t,n.fromAmount,n.fromAsset]),i=(0,r.useMemo)((()=>{const e=t.fiatValue({currencyCode:n.toAsset.currencyCode,decimals:n.toAsset.decimals,value:n.toAmount,contractAddress:n.toAsset.address?.rawValue,network:n.toAsset.network,blockchain:n.toAsset.blockchain,digitsToFixed:2});if(e)return t.fiatValueString(e)}),[t,n.toAsset,n.toAmount]),l=(0,r.useMemo)((()=>t.formatToCrypto({currencyCode:n.toAsset.currencyCode,decimals:n.toAsset.decimals,value:n.toAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})),[t,n.toAmount,n.toAsset.currencyCode,n.toAsset.decimals]);return(0,r.useMemo)((()=>({sourceFiatAmount:o,sourceCryptoAmount:s,targetFiatAmount:i,targetCryptoAmount:l})),[s,o,l,i])}},41015:(e,t,n)=>{n.d(t,{$:()=>i});var r=n(14041),a=n(97416),o=n(81894),s=n(4419);function i(){const e=(0,s.R)(),t=(0,o.s)(a.r.feb_2023_weth_stake);return(0,r.useMemo)((()=>e&&t),[e,t])}},3093:(e,t,n)=>{n.d(t,{l:()=>A});var r=n(14041),a=n(32183),o=n(8867),s=n(96295),i=n(51676),l=n(13620),c=n(4244),u=n(72940),d=n(87432),f=n(24475),p=n(70918),g=n(52197),y=n(34565),m=n(81454),v=n(16238),b=n.n(v),k=n(70359);const h=(0,a.YK)({networkFeeLabel:{id:"9wby6m",defaultMessage:"Network fee (est.)"},networkFeeTooltip:{id:"iDAUkN",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions, not Coinbase. It may be less than our estimate."},coinbaseFeeLabel:{id:"69w8Iv",defaultMessage:"Coinbase fee"},coinbaseFeeTooltip:{id:"gCadXc",defaultMessage:'Coinbase doesn\u2019t charge a transaction fee for staking assets. Information about commission charges can be found by clicking "Read FAQs" on the upper right hand corner of the screen. Stated APR is net of commissions.'},transactionSpeedLabel:{id:"b+2ECB",defaultMessage:"Time (est.)"},maxFeeLabel:{id:"zoMLPL",defaultMessage:"Max: {maxFeeEstimate}"},contractAddressLabel:{id:"55yK3k",defaultMessage:"{currencyCode} contract"},contractAddressTooltip:{id:"vXyOJS",defaultMessage:"This is the smart contract address for {currencyCode}. Please open the contract in a block explorer and verify it is the correct asset."},timeLabel:{id:"8eOBTQ",defaultMessage:"Time (est.)"},minutesText:{id:"c1upgx",defaultMessage:"> {minutes} minutes"},exchangeRateLabel:{id:"+GA3RT",defaultMessage:"Exchange rate"},exchangeRateTooltip:{id:"5zdmMv",defaultMessage:"The exchange rate shows how much staked {fromAsset} you\u2019ll get for 1 {toAsset}. Right now, 1 {toAsset} is worth {rate} {fromAsset}. This means if you decide to unstake 1 {toAsset}, you\u2019ll get {rate} {fromAsset} back."},freeLabel:{id:"gL7LCA",defaultMessage:"Free"},slippageToleranceLabel:{id:"vFrVSa",defaultMessage:"Slippage tolerance"},slippageToleranceTooltip:{id:"1cvIa7",defaultMessage:"We swap crypto using a 3rd party decentralized exchange (DEX). Your swap will execute within {slippagePercentage} of the quoted price or will be canceled and your funds returned."},lockupPeriodLabel:{id:"vrjdJP",defaultMessage:"Lockup period"},noneText:{id:"uSCSrR",defaultMessage:"None"},walletLabel:{id:"iOErts",defaultMessage:"Wallet"},unstakePeriodLabel:{id:"Tuzdjv",defaultMessage:"Unstaking period"},unstakePeriod:{id:"sJ81jA",defaultMessage:"3-4 days"},instantLabel:{id:"KLD1od",defaultMessage:"Instant"},delegatorUnstakePeriodLabel:{id:"+4V8wv",defaultMessage:"Up to 4 days"},instantToolTip:{id:"BvckiD",defaultMessage:"You can unstake at any time with no wait."},delegatorUnstakePeriodToolTip:{id:"2U/mVi",defaultMessage:"You can unstake at any time but it takes up to 4 days for your request to be processed. After that waiting period, you can claim your ETH."},maticUnstakePeriodToolTip:{id:"hojZyH",defaultMessage:"You can unstake at any time but it takes 3\u20134 days (80 checkpoints) for your request to be processed. After that waiting period, you can claim your MATIC."},methodLabel:{id:"D5cU0d",defaultMessage:"Staking method"},earnLabel:{id:"PyjbkQ",defaultMessage:"Earn"},rewardsLabel:{id:"cmUNGL",defaultMessage:"Rewards"},paidInLabel:{id:"CaFFtk",defaultMessage:"Paid in {currencyCode} after unstake"},accruesDailyLabel:{id:"fAilsx",defaultMessage:"Accrues daily"},rewardsTooltipETH:{id:"Doj9h1",defaultMessage:"You'll realize your rewards in ETH after unstaking."},rewardsTooltipMatic:{id:"SH6O87",defaultMessage:"You'll realize your rewards in MATIC after unstaking. You must claim your MATIC in 3-4 days to get the reward."},receiveLabel:{id:"nqy/8Q",defaultMessage:"Receive"}}),C={[k.mv]:h.unstakePeriod,[s.fz]:h.delegatorUnstakePeriodLabel},S={[k.R1]:{[k.Td]:!0,[k.zJ]:!0},[k.Td]:{[s.fz]:!0},[k.zJ]:{[s.fz]:!0},[s.fz]:{[k.Td]:!0,[k.zJ]:!0,[s.fz]:!1},[k.mv]:{[k.Sg]:!1},[k.Sg]:{[k.mv]:!1}},w={[k.mv]:h.maticUnstakePeriodToolTip,[s.fz]:h.delegatorUnstakePeriodToolTip};function A({stakeTxData:e,unsignedApproveTx:t,unsignedStakeTx:n,lastUpdateTime:a,rowItemsAnalytics:v,isPageLoading:A,feeWalletSubdetail:T,earnDetail:x,stakeType:M=f.V.STAKE,getPrimeNetworkFeeDetailTextPreFormatted:I}){const{formatMessage:L,formatNumber:P}=(0,o.A)(),E=(0,p.h)(),j=(0,g.j)(E).get(s.fz)?.address,D=(0,m.V)(),{formatToCrypto:F}=(0,c.J9)(),{networkBaseFee:G,networkMaxFee:O,networkEstimatedFee:B}=(0,u.VL)({unsignedApproveTx:t,unsignedEthTx:n}),H=n instanceof l.U;(0,d.y)((()=>{v?.({networkEstimatedFee:B.toString(),networkMaxFee:O.toString(),networkBaseFee:G.toString()})}));const W=(0,r.useMemo)((()=>{if(H){return D({currencyCode:n.feeCurrencyCode,currencyDecimal:n.feeCurrencyDecimal,network:n.network,blockchain:n.blockchain,amount:B,error:"Could not calculate estimated fee"})}return`${D({currencyCode:n.feeCurrencyCode,currencyDecimal:n.feeCurrencyDecimal,network:n.network,blockchain:n.blockchain,amount:G,error:"Could not calculate base fee"})}-${D({currencyCode:n.feeCurrencyCode,currencyDecimal:n.feeCurrencyDecimal,network:n.network,blockchain:n.blockchain,amount:O,error:"Could not calculate max fee"})}`}),[H,D,n,G,O,B]),R=(0,r.useMemo)((()=>I?.(W)),[W,I]),V=(0,r.useMemo)((()=>H?null:T),[H,T]),{toAsset:U,fromAsset:N,fromAmount:_,toAmount:z}=e.quote,q=N?.currencyCode.code??"",K=(0,r.useMemo)((()=>{const e=_??0n,t=(0,y.eH)(M===f.V.STAKE?z:e);return(0,y.eH)(M===f.V.STAKE?e:z).div(t).toNumber().toFixed(3)}),[z,_,M]),Y=(0,r.useMemo)((()=>{const e=M===f.V.STAKE?N?.currencyCode.code:U.currencyCode.code;return`1 ${M===f.V.STAKE?U.currencyCode.code:N?.currencyCode.code} = ${K} ${e}`}),[U.currencyCode.code,N?.currencyCode.code,K,M]),Q=(0,r.useMemo)((()=>{const e=M===f.V.STAKE?N?.currencyCode.code:U.currencyCode.code,t=M===f.V.STAKE?U.currencyCode.code:N?.currencyCode.code;return L(h.exchangeRateTooltip,{fromAsset:e,toAsset:t,rate:K})}),[M,U,N,K,L]),Z=P(.01*Number(e.quote.slippage??"0.5"),{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),X=(0,r.useMemo)((()=>!!S[q]?.[U?.currencyCode.code??""]),[q,U?.currencyCode.code]),J=(0,r.useMemo)((()=>{const e=i.ay.fromChainId(U.chainId)?.blockExplorerUrl;return{text:j??"",blockExplorerUrl:`${e}/address/${j}`}}),[j,U.chainId]),$=(0,r.useMemo)((()=>C[q]),[q]),ee=(0,r.useMemo)((()=>w[q]),[q]),te=(0,r.useMemo)((()=>U?.currencyCode.code===s.fz?L(h.accruesDailyLabel):L(h.paidInLabel,{currencyCode:k.KS[U.currencyCode.code]})),[L,U.currencyCode.code]),ne=(0,r.useMemo)((()=>L(N?.currencyCode.code===k.mv?h.rewardsTooltipMatic:h.rewardsTooltipETH)),[L,N?.currencyCode.code]),re=(0,r.useMemo)((()=>F({currencyCode:U.currencyCode,decimals:U.decimals,value:z,includeCode:!0,maxDisplayDecimals:4n})),[F,z,U.currencyCode,U.decimals]);return(0,r.useMemo)((()=>b()([M===f.V.STAKE?{label:L(h.earnLabel),detailTextComponent:x}:null,M===f.V.STAKE?{label:L(h.unstakePeriodLabel),detailText:L($),tooltipText:ee&&L(ee)}:null,M===f.V.STAKE?{label:L(h.rewardsLabel),detailText:te,tooltipText:ne}:null,M!==f.V.CLAIM&&X?{label:L(h.exchangeRateLabel),detailText:Y,isPageLoading:A,tooltipText:Q}:null,M===f.V.CLAIM?{label:L(h.walletLabel),detailText:J,isPageLoading:A}:null,X?{label:L(h.receiveLabel),detailText:re,isPageLoading:A}:null,X?{label:L(h.slippageToleranceLabel),detailText:Z,isPageLoading:A,tooltipText:L(h.slippageToleranceTooltip,{slippagePercentage:Z})}:null,{label:L(h.coinbaseFeeLabel),detailText:L(h.freeLabel),isPageLoading:A,tooltipText:L(h.coinbaseFeeTooltip)},{label:L(h.networkFeeLabel),detailTextPreFormatted:R,detailText:R?void 0:W,lastUpdateTime:a,isPageLoading:A,subDetailText:V,tooltipText:L(h.networkFeeTooltip)}])),[M,L,x,$,ee,te,ne,X,Y,A,Q,J,re,Z,R,W,a,V])}},79119:(e,t,n)=>{n.d(t,{f:()=>s});var r=n(14041),a=n(70359),o=n(19994);function s(e){const{sourceFiatAmount:t,sourceCryptoAmount:n,targetFiatAmount:s,targetCryptoAmount:i}=(0,o.g)(e),{quote:l}=e;if(!i)throw new Error("Could not display overview items on stake confirmation page, missing crypto amounts");const c=(0,r.useCallback)((function(e){if(e)return e.currencyCode.code===a.Td?a.zd:e.name}),[]);return{primaryItem:{title:c(l.fromAsset)??c(l.toAsset),iconSourceOrName:{iconUrl:l.fromAsset?.imageURL??l.toAsset?.imageURL,currencyCode:l.fromAsset?.currencyCode?.code??l.toAsset?.currencyCode?.code,network:l.fromAsset?.network??l.toAsset?.network,showNetworkIcon:l.fromAsset?!!l.fromAsset.address:!!l.toAsset?.address},detail:t??s,subDetail:n??i,isAsset:!0,testID:"primary"},secondaryItem:{title:c(l.toAsset),iconSourceOrName:{iconUrl:l.toAsset.imageURL,currencyCode:l.toAsset.currencyCode?.code,network:l.toAsset.network,showNetworkIcon:!!l.toAsset?.address},detail:s,subDetail:i,isAsset:!0,testID:"secondary"}}}}}]);
//# sourceMappingURL=1840.js.map