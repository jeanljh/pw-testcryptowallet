/*! For license information please see 6288.js.LICENSE.txt */
try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e5b0a8f0-23fb-4e4f-91b3-c7a4ce2ace67",e._sentryDebugIdIdentifier="sentry-dbid-e5b0a8f0-23fb-4e4f-91b3-c7a4ce2ace67")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[6288],{96288:(e,t,n)=>{n.r(t),n.d(t,{WatchAssetRequest:()=>B});var r,a=n(14041),o=n(32183),s=n(8867),i=n(41513),c=n(54736),d=n(96295),u=n(52689),l=n(80872),f=n(99172),h=n(70918),p=n(47435),b=n(63162),y=n(31415),g=n(85581),m=n(22115),v=n(15654),w=n(84492),A=n(55799),k=n(59600),x=n(60149),C=n(97541),j=n(67662),I=n(36897),E=n(31085);function M(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,d=Object.create(c.prototype);return T(d,"_invoke",function(n,r,a){var o,i,c,d=0,u=a||[],l=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,s}};function h(n,r){for(i=n,c=r,t=0;!l&&d&&!a&&t<u.length;t++){var a,o=u[t],h=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=h&&((a=n<2&&h<o[1])?(i=0,f.v=r,f.n=o[1]):h<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,i=0))}if(a||n>1)return s;throw l=!0,r}return function(a,u,p){if(d>1)throw TypeError("Generator is already running");for(l&&1===u&&h(u,p),i=u,c=p;(t=i<2?e:c)||!l;){o||(i?i<3?(i>1&&(f.n=-1),h(i,c)):f.n=c:f.v=c);try{if(d=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?c:n.call(r,f))!==s)break}catch(t){o=e,i=1,c=t}finally{d=1}}return{value:t,done:l}}}(n,a,o),!0),d}var s={};function i(){}function c(){}function d(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(T(t={},r,(function(){return this})),t),l=d.prototype=i.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,T(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=d,T(l,"constructor",d),T(d,"constructor",c),c.displayName="GeneratorFunction",T(d,a,"GeneratorFunction"),T(l),T(l,a,"Generator"),T(l,r,(function(){return this})),T(l,"toString",(function(){return"[object Generator]"})),(M=function(){return{w:o,m:f}})()}function T(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}T=function(e,t,n,r){function o(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},T(e,t,n,r)}function S(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){S(o,r,a,s,i,"next",e)}function i(e){S(o,r,a,s,i,"throw",e)}s(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,s,i=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){d=!0,a=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},N=(0,o.YK)({dappLogoAlt:{id:"MRnPfe",defaultMessage:[{type:0,value:"DApp logo"}]},addToken:{id:"92Fo7Q",defaultMessage:[{type:0,value:"Add Suggested Token?"}]},addTokenQuestion:{id:"hU3w4L",defaultMessage:[{type:0,value:"Would you like to import this token?"}]},addTokenRequestDescription:{id:"dV/l+A",defaultMessage:[{type:0,value:"This website is requesting to add:"}]},tokenSymbol:{id:"ObUMFr",defaultMessage:[{type:0,value:"Symbol"}]},tokenAddress:{id:"8jwoaQ",defaultMessage:[{type:0,value:"Address"}]},authorizationButtonGroup:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]},addCustomTokenButton:{id:"37e/BJ",defaultMessage:[{type:0,value:"Add Token"}]},denyActionButton:{id:"OPQ+In",defaultMessage:[{type:0,value:"Deny"}]},closeButton:{id:"+0yL9q",defaultMessage:[{type:0,value:"Close"}]},allowlistedMessage:{id:"v8N+yM",defaultMessage:[{type:0,value:"Coinbase Wallet automatically tracks token ownerships on the "},{type:1,value:"network"},{type:0,value:" network. There is no need to import "},{type:1,value:"token"},{type:0,value:"."}]}});function W(e){var t=e.symbol,n=e.chainName,r=(0,s.A)().formatMessage,o=(0,a.useCallback)((function(){window.close()}),[]);return(0,E.jsx)("div",{"data-testid":"allowlist-prompt",children:(0,E.jsxs)(v.T,{padding:4,justifyContent:"space-between",height:"100%",width:"100%",children:[(0,E.jsxs)(v.T,{gap:2,children:[(0,E.jsx)(x.f,{as:"h1",textAlign:"center",children:r(N.addToken)}),(0,E.jsx)(C.K,{as:"p",color:"fgMuted",textAlign:"center",children:r(N.allowlistedMessage,{network:n,token:t||"this token"})})]}),(0,E.jsx)(g.$n,{type:"button",variant:"primary","data-testid":"close-watch-asset-button",transparent:!0,onClick:o,children:r(N.closeButton)})]})})}function B(e){var t=e.options,n=_((0,a.useState)(!1),2),r=n[0],o=n[1],T=_((0,a.useState)(!1),2),S=T[0],L=T[1],H=_((0,a.useState)(null),2),B=H[0],z=H[1],D=(0,a.useCallback)((function(){return z(null)}),[z]),O=(0,s.A)().formatMessage,R=(0,h.h)(),q=(0,p.g)({walletGroupId:R,source:c.GU.WatchAsset}),F=(0,l.a)();(0,c.hH)({source:c.GU.WatchAsset});var Q=(0,a.useMemo)((function(){return F.find((function(e){var n,r=e.network;return r&&(null===(n=r.asChain())||void 0===n?void 0:n.chainId)===parseInt(t.chainId,10)}))}),[F,t.chainId]),U=(0,a.useMemo)((function(){return!Q&&f.lg.fromChainId({chainId:BigInt(t.chainId)})}),[Q,t.chainId]),K=(0,a.useCallback)(G(M().m((function e(){var n,r,a,o;return M().w((function(e){for(;;)switch(e.p=e.n){case 0:if(Q){e.n=1;break}return e.a(2,null);case 1:return e.p=1,a=new u.j(null!==(n=t.symbol)&&void 0!==n?n:""),e.n=2,q(a,t.address,Q,BigInt(null!==(r=t.decimals)&&void 0!==r?r:18));case 2:z(null),L(!1),e.n=4;break;case 3:e.p=3,o=e.v,z(o.message),L(!1);case 4:return e.a(2)}}),e,null,[[1,3]])}))),[q,Q,t.address,t.decimals,t.symbol]);(0,a.useEffect)((function(){var e=I.Q0.subscribe((function(e){e.constructor===I.kT&&o(!1)}));return function(){return e.unsubscribe()}}),[]);var V,Y=(0,a.useCallback)((function(){chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:t.eventId,action:j.l.watchAssetDeny,blockchain:d.fz}}),window.close()}),[t.eventId]),J=(0,a.useCallback)((function(){L(!0),chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:t.eventId,action:j.l.watchAssetApprove,chainId:t.chainId,blockchain:d.fz}}),K().then((function(){return window.close()}))}),[t.eventId,t.chainId,K]);return B?(0,E.jsx)(y.y,{resetError:D}):U?(0,E.jsx)(W,{symbol:t.symbol,chainName:null===(V=U.asChain())||void 0===V?void 0:V.displayName}):(0,E.jsxs)(v.T,{position:"absolute",bottom:0,right:0,width:"100%",children:[(0,E.jsx)(w.z,{justifyContent:"center",alignItems:"center",children:t.image?(0,E.jsx)(k.W,{alt:O(N.dappLogoAlt),width:80,height:80,source:t.image}):(0,E.jsx)(E.Fragment,{})}),(0,E.jsx)("div",{className:(0,i.cx)(P,r&&$),"data-testid":"add-token-prompt",children:(0,E.jsxs)(v.T,{gap:2,children:[(0,E.jsx)(x.f,{as:"h1",textAlign:"center",children:O(N.addToken)}),(0,E.jsx)(C.K,{as:"p",color:"fgMuted",textAlign:"center",children:O(N.addTokenQuestion)}),(0,E.jsx)(A.a,{paddingY:2,children:(0,E.jsxs)(v.T,{gap:2,children:[(0,E.jsx)(C.K,{as:"p",color:"fgMuted",textAlign:"start",children:O(N.addTokenRequestDescription)}),(0,E.jsxs)(C.K,{as:"p",color:"fgMuted",textAlign:"start",children:[O(N.tokenSymbol),": ",t.symbol]}),(0,E.jsxs)(C.K,{as:"p",color:"fgMuted",textAlign:"start",children:[O(N.tokenAddress),": ",(0,b.$)(t.address)]})]})})]})}),(0,E.jsx)(A.a,{padding:3,flexDirection:"column",children:(0,E.jsxs)(m.e,{block:!0,accessibilityLabel:O(N.authorizationButtonGroup),direction:"vertical",children:[(0,E.jsx)(g.$n,{type:"button",variant:"primary",onClick:J,loading:S,"data-testid":"allow-watch-asset-button",children:O(N.addCustomTokenButton)}),(0,E.jsx)(g.$n,{type:"button",variant:"secondary",onClick:Y,"data-testid":"deny-watch-asset-button",transparent:!0,children:O(N.denyActionButton)})]})})]})}H(W,"useIntl{{\n    formatMessage\n  }}\nuseCallback{closeWindow}",(function(){return[s.A]})),H(B,"useState{[authed, setAuthed](false)}\nuseState{[authorizing, setAuthorizing](false)}\nuseState{[error, setError](null)}\nuseCallback{resetError}\nuseIntl{{\n    formatMessage\n  }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseAddCustomEthToken{addCustomEthToken}\nuseCustomNetworkArgs{customNetworks}\nuseLogAddCustomTokenViewed{}\nuseMemo{customNetwork}\nuseMemo{ethereumChain}\nuseCallback{addCustomToken}\nuseEffect{}\nuseCallback{denyAuthorize}\nuseCallback{allowAuthorize}",(function(){return[s.A,h.h,p.g,l.a,c.hH]}));var z,D,P="b1kpd7hv",$="b1fu1pg";n(23918),(z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(z.register(N,"messages","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),z.register(W,"AllowlistedNetworkView","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),z.register(B,"WatchAssetRequest","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),z.register(P,"body","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),z.register($,"bodyExit","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx")),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&D(e)},31415:(e,t,n)=>{n.d(t,{y:()=>p});var r,a=n(32183),o=n(8867),s=n(50866),i=n(22115),c=n(85581),d=n(2673),u=n(44659),l=n(31085);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h=(0,a.YK)({connectionFailedMessage:{id:"5RXePS",defaultMessage:[{type:0,value:"Connection failed"}]},tryAgainButtonGroup:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]},tryAgainButton:{id:"88moQ1",defaultMessage:[{type:0,value:"Try again"}]}});function p(e){var t=e.resetError,n=(0,o.A)().formatMessage;return(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)(m,{children:(0,l.jsx)(d.In,{name:"error",size:"l",color:"currentColor"})}),(0,l.jsxs)("div",{className:v,children:[(0,l.jsx)("div",{className:A,children:(0,l.jsx)(u.f,{as:"h3",children:n(h.connectionFailedMessage)})}),(0,l.jsx)("div",{className:w,children:(0,l.jsx)(i.e,{block:!0,accessibilityLabel:n(h.tryAgainButtonGroup),children:(0,l.jsx)(c.$n,{type:"button",variant:"primary",onClick:t,"data-testid":"try-again",children:n(h.tryAgainButton)})})})]})]})}f(p,"useIntl{{\n    formatMessage\n  }}",(function(){return[o.A]}));var b,y,g="b9dlpow",m=(0,s.I)("div")({name:"IconContainer",class:"iu69ejy",propsAsIs:!1}),v="b1hvuwxf",w="bcmu8fm",A="e1y5zb73";n(95689),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(h,"messages","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(p,"AuthorizationError","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(g,"baseContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(m,"IconContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(v,"buttonContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(w,"buttonPosition","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),b.register(A,"errorText","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},23918:(e,t,n)=>{n.r(t)},95689:(e,t,n)=>{n.r(t)},67662:(e,t,n)=>{var r;n.d(t,{l:()=>r}),function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(r||(r={}))},54261:(e,t,n)=>{n.d(t,{Fu:()=>p,Io:()=>f,OM:()=>l,Q$:()=>h});n(31208);var r=n(58524),a=n(74146),o=n(78370);const s=`${r.V2}/v3/coinbase.asset_metadata_service.v2.public.AssetMetadataPublicService`,i=`${r.V2}/api/v3/coinbase.asset_stats_service.AssetStatsService`,c="getQuote",d="assets/getAssetsDetails",u="quote/getQuote";async function l(e){const t={q:e};try{return await(0,a.hm)(`${s}/GetAssetV2`,t,{isThirdParty:!0})}catch(e){if(e instanceof o.H&&404===e.status)return;throw e}}async function f(e){const t={q:e};try{return await(0,a.hm)(`${i}/ListAssetStats`,t,{isThirdParty:!0})}catch(e){if(e instanceof o.H&&404===e.status)return;throw e}}async function h(e){try{return await(0,a.TB)(d,e)}catch(e){if(e instanceof o.H&&404===e.status)return;throw e}}async function p({params:e,isQuoteV3Enabled:t}){let n;try{return n=t?await(0,a.TB)(c,e,{apiVersion:3}):await(0,a.TB)(u,e),n}catch(e){if(e instanceof o.H&&404===e.status)return;throw e}}},31208:(e,t,n)=>{n.d(t,{o_:()=>s,mA:()=>o,dC:()=>i});var r,a=n(55452);function o(e,t,n){(0,a.Np)("price_chart.asset_stats_v3.load_failed",{loggingId:"2f4f42b8-c663-4e20-9192-5e1590a4be7a",tokenSymbol:e,uuid:t,error:String(n)})}function s(e,t,n){(0,a.Np)("price_chart.asset_metadata_v3.load_failed",{loggingId:"9f213d12-3dff-4b34-8404-1ea214674b88",tokenSymbol:e,uuid:t,error:String(n)})}function i(e,t){(0,a.N8)({metricName:"price_chart.prices.load_failed",metricType:r.count,value:1,tags:{baseAssetSymbol:e,currencyCode:t}})}!function(e){e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram"}(r||(r={}))},47435:(e,t,n)=>{n.d(t,{g:()=>w});var r=n(14041),a=n(98580),o=n(66593),s=n(46122),i=n(51676),c=n(37634),d=n(60179),u=n(54261),l=n(23804),f=n(99002),h=n(16238),p=n.n(h),b=n(43752);var y=n(83815),g=n(99172),m=n(44737),v=n(57822);function w({walletGroupId:e,source:t}){const n=(0,v.e)(e),h=(0,y.Mf)();return(0,r.useCallback)((async(e,r,y,v)=>{const w={chainName:y.name,chainId:y.id,tokenSymbol:e.code,contractAddress:r,decimals:v.toString()};(0,a.An)({properties:w,source:t});const A=g.lg.create(y.id);if(!A)throw(0,a.kB)({properties:w,source:t,errorMessage:"Network not found for custom token"}),new Error(`Failed to create Network from custom network id ${y.id}`);if(n.find((e=>g.lg.isEqual(A,e.network)&&r?.toLowerCase()===e.contractAddress?.toLowerCase())))throw(0,a.kB)({properties:w,source:t,errorMessage:"Custom token already exists"}),new Error(`Custom token with contract address ${r} already exists`);const k=await async function(e,t,n,r,a){const o=(0,s.zL)(i.ay.whitelisted.ETHEREUM_MAINNET),h=await(0,b.t)(o,a),y={contractAddresses:e?[e]:[],chainId:n.asChain()?.chainId?n.asChain()?.chainId.toString():void 0},g=await(0,u.Q$)(y),m=g?.result?.assets?.[0],v=m?.imageUrl,w=m?.decimals?BigInt(m.decimals):r,A=m?.contractAddress??e,k=h.map((e=>new d.p({index:e.index,address:e.address,balance:void 0,currencyCode:t,isChangeAddress:!1,network:n,type:s.vj.defaultReceiveType,derivationPath:(0,s.s8)(e.index),isUsed:!0,blockchain:s.vj.blockchain,contractAddress:A,accountId:e.accountId})));return await(0,c.G2)(k),p()(k).map((e=>new l.u({primaryAddress:e.address,addresses:[new f.g(s.vj.defaultReceiveType,e.address,e.index)],displayName:e.currencyCode.code,currencyCode:e.currencyCode,imageURL:v,balance:e.balance,decimals:w,blockchain:s.vj.blockchain,minimumBalance:void 0,network:e.network,contractAddress:e.contractAddress,selectedIndex:e.index,accountId:e.accountId})))}(r,e,A,v,h);(0,m.Yk)(k);const x={network:A,index:0n,mode:{kind:"Full"},isForced:!0,accountId:h};await(0,o.L)(x),(0,a.z4)({properties:w,source:t})}),[h,n,t])}},63162:(e,t,n)=>{function r(e){const t=e.length;return t<20?e:`${e.substring(0,6)}...${e.substring(t-4,t)}`}n.d(t,{$:()=>r})}}]);
//# sourceMappingURL=6288.js.map