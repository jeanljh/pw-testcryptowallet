try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bcc528ee-d25c-42a7-a917-56a139fbed89",e._sentryDebugIdIdentifier="sentry-dbid-bcc528ee-d25c-42a7-a917-56a139fbed89")}()}catch(e){}!function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"3.134.0-bffc4d"}}catch(e){}}(),(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4507],{51773:(e,t,n)=>{n.d(t,{r:()=>c});var s=n(14041),i=n(27953),r=n(2673),o=n(55799),a=n(59600),d=n(31085);const c=(0,s.memo)((function(e){let t=i.wG,n=null;var c,p;"icon"===e.type&&(n=(0,d.jsx)(r.In,{accessibilityLabel:e.accessibilityLabel,color:null!==(c=e.color)&&void 0!==c?c:"fg",name:e.name,size:"s"}));if("asset"===e.type||"avatar"===e.type||"image"===e.type){const s="image"===e.type;s&&(t=i.R9),n=(0,d.jsx)(o.a,{alt:e.accessibilityLabel,as:a.W,height:t,shape:s?"squircle":"circle",source:String(e.source),width:t})}"pictogram"===e.type&&(t=i.R9,n=(0,s.cloneElement)(e.illustration,{dimension:"48x48",scaleMultiplier:i.o6,alt:null!==(p=e.accessibilityLabel)&&void 0!==p?p:e.illustration.props.alt}));return n?(0,d.jsx)(o.a,{alignItems:"center",height:t,justifyContent:"center",testID:e.testID,width:t,children:n}):null}))},86415:(e,t,n)=>{n.d(t,{B:()=>c});var s=n(14041),i=n(25314),r=n(31085);const o=["as","font"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=(0,s.forwardRef)(((e,t)=>{let{as:n,font:s="display1"}=e,c=function(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,o);const p=null!=n?n:"span";return(0,r.jsx)(i.E,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,as:p,font:s},c))}));c.displayName="TextDisplay1"},28345:(e,t,n)=>{n.d(t,{aw:()=>c,mp:()=>P});var s,i,r=Object.defineProperty,o=(e,t)=>r(e,"name",{value:t,configurable:!0}),a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),d="https://pay.coinbase.com",c=o((({host:e=d,destinationWallets:t,...n})=>{const s=new URL(e);return s.pathname="/buy/select-asset",void 0!==t&&s.searchParams.append("destinationWallets",JSON.stringify(t)),Object.keys(n).forEach((e=>{const t=n[e];void 0!==t&&s.searchParams.append(e,t.toString())})),s.searchParams.sort(),s.toString()}),"generateOnRampURL"),p="cbpay-embedded-onramp",l=o((({url:e,width:t="100%",height:n="100%",position:s="fixed",top:i="0px"})=>{const r=document.createElement("iframe");return r.style.border="unset",r.style.borderWidth="0",r.style.width=t.toString(),r.style.height=n.toString(),r.style.position=s,r.style.top=i,r.id=p,r.src=e,r}),"createEmbeddedContent");(i=s||(s={})).LaunchEmbedded="launch_embedded",i.AppReady="app_ready",i.AppParams="app_params",i.SigninSuccess="signin_success",i.Success="success",i.Exit="exit",i.Event="event",i.Error="error",i.PixelReady="pixel_ready",i.OnAppParamsNonce="on_app_params_nonce";var h=o(((e,{onMessage:t,shouldUnsubscribe:n=!0,allowedOrigin:s,onValidateOrigin:i=o((()=>Promise.resolve(!0)),"onValidateOrigin")})=>{const r=o((o=>{const{eventName:a,data:d}=g(o.data),c=!s||o.origin===s;a===e&&(async()=>{c&&await i(o.origin)&&(t(d),n&&window.removeEventListener("message",r))})()}),"onMessage");return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}}),"onBroadcastedPostMessage"),u=o(((e,t,{allowedOrigin:n="*",data:s}={})=>{const i=m(t,s);e.postMessage(i,n)}),"broadcastPostMessage"),g=o((e=>{try{return JSON.parse(e)}catch{return{eventName:e}}}),"parsePostMessage"),m=o(((e,t)=>t?JSON.stringify({eventName:e,data:t}):e),"formatPostMessage"),b="coinbase-sdk-connect",y={width:460,height:730},f={width:430,height:600},w=class{constructor({host:e=d,appId:t,appParams:n,onReady:s,onFallbackOpen:i,debug:r,theme:c}){a(this,"state","loading"),a(this,"nonce",""),a(this,"eventStreamListeners",{}),a(this,"unsubs",[]),a(this,"isLoggedIn",!1),a(this,"openExperience",o((e=>{if(this.log("Attempting to open experience",{state:this.state}),"waiting_for_response"===this.state)return;if("loading"===this.state)return;if("failed"===this.state)return void this.onFallbackOpen?.();if(!this.nonce)throw new Error("Attempted to open CB Pay experience without nonce");const t=this.nonce;this.nonce="",this.setupExperienceListeners(e);const{path:n,experienceLoggedIn:s,experienceLoggedOut:i,embeddedContentStyles:r}=e,a=new URL(`${this.host}${n}`);a.searchParams.append("appId",this.appId),a.searchParams.append("type","secure_standalone"),this.theme&&a.searchParams.append("theme",this.theme);const d=this.isLoggedIn?s:i||s;a.searchParams.append("nonce",t);const c=a.toString();if(this.log("Opening experience",{experience:d,isLoggedIn:this.isLoggedIn}),"embedded"===d){const e=o((()=>{const e=l({url:c,...r});r?.target?document.querySelector(r?.target)?.replaceChildren(e):document.body.appendChild(e)}),"openEmbeddedExperience");this.isLoggedIn?e():this.startDirectSignin(e)}else"popup"===d&&window.chrome?.windows?.create?window.chrome.windows.create({url:c,setSelfAsOpener:!0,type:"popup",focused:!0,width:y.width,height:y.height,left:window.screenLeft-y.width-10,top:window.screenTop},(e=>{this.addEventStreamListener("open",(()=>{e?.id&&chrome.windows.update(e.id,{width:f.width,height:f.height,left:window.screenLeft-f.width-10,top:window.screenTop})}))})):"new_tab"===d&&window.chrome?.tabs?.create?window.chrome.tabs.create({url:c}):x(c,d);const p=o((()=>{this.sendAppParams(),this.removeEventStreamListener("open",p)}),"onOpen");this.addEventStreamListener("open",p)}),"openExperience")),a(this,"endExperience",o((()=>{document.getElementById(p)?.remove()}),"endExperience")),a(this,"destroy",o((()=>{document.getElementById(b)?.remove(),this.unsubs.forEach((e=>e()))}),"destroy")),a(this,"addPixelReadyListener",o((()=>{this.onMessage("pixel_ready",{shouldUnsubscribe:!1,onMessage:e=>{this.log("Received message: pixel_ready"),this.isLoggedIn=!!e?.isLoggedIn,this.removeErrorListener?.(),this.sendAppParams((()=>{this.onReadyCallback?.()}))}})}),"addPixelReadyListener")),a(this,"addErrorListener",o((()=>{this.removeErrorListener=this.onMessage("error",{shouldUnsubscribe:!0,onMessage:e=>{if(this.log("Received message: error"),e){const t="string"==typeof e?e:JSON.stringify(e);this.onReadyCallback?.(new Error(t))}}})}),"addErrorListener")),a(this,"embedPixel",o((()=>{document.getElementById(b)?.remove();const e=v({host:this.host,appId:this.appId});e.onerror=this.onFailedToLoad,this.pixelIframe=e,document.body.appendChild(e)}),"embedPixel")),a(this,"onFailedToLoad",o((()=>{if(this.state="failed",this.onFallbackOpen)this.debug&&console.warn("Failed to load CB Pay pixel. Falling back to opening in new tab."),this.onReadyCallback?.();else{const e=new Error("Failed to load CB Pay pixel");this.debug&&console.error(e),this.onReadyCallback?.(e)}}),"onFailedToLoad")),a(this,"sendAppParams",o((e=>{this.pixelIframe?.contentWindow?(this.log("Sending message: app_params"),this.onMessage("on_app_params_nonce",{onMessage:t=>{this.state="ready",this.nonce=t?.nonce||"",e?.()}}),this.state="waiting_for_response",u(this.pixelIframe.contentWindow,"app_params",{data:this.appParams})):(console.error("Failed to find pixel content window"),this.state="failed",this.onFallbackOpen?.())}),"sendAppParams")),a(this,"setupExperienceListeners",o((({onSuccess:e,onExit:t,onEvent:n,onRequestedUrl:s})=>{this.onMessage("event",{shouldUnsubscribe:!1,onMessage:i=>{const r=i;this.eventStreamListeners[r.eventName]?.forEach((e=>e?.())),"success"===r.eventName&&e?.(),"exit"===r.eventName&&t?.(r.error),"request_open_url"===r.eventName&&s?.(r.url),n?.(i)}})}),"setupExperienceListeners")),a(this,"startDirectSignin",o((e=>{const t=new URLSearchParams;t.set("appId",this.appId),t.set("type","direct");const n=x(`${this.host}/signin?${t.toString()}`,"popup");this.onMessage("signin_success",{onMessage:()=>{n?.close(),e()}})}),"startDirectSignin")),a(this,"addEventStreamListener",o(((e,t)=>{this.eventStreamListeners[e]?this.eventStreamListeners[e]?.push(t):this.eventStreamListeners[e]=[t]}),"addEventStreamListener")),a(this,"removeEventStreamListener",o(((e,t)=>{if(this.eventStreamListeners[e]){const n=this.eventStreamListeners[e]?.filter((e=>e!==t));this.eventStreamListeners[e]=n}}),"removeEventStreamListener")),a(this,"onMessage",o(((...e)=>{const t=h(e[0],{allowedOrigin:this.host,...e[1]});return this.unsubs.push(t),t}),"onMessage")),a(this,"log",o(((...e)=>{this.debug&&console.log("[CBPAY]",...e)}),"log")),this.host=e,this.appId=t,this.appParams=n,this.onReadyCallback=s,this.onFallbackOpen=i,this.debug=r||!1,this.theme=c,this.addPixelReadyListener(),this.addErrorListener(),this.embedPixel(),setTimeout((()=>{"ready"!==this.state&&this.onFailedToLoad()}),5e3)}};function v({host:e,appId:t}){const n=document.createElement("iframe");n.style.border="unset",n.style.borderWidth="0",n.style.width="0",n.style.height="0",n.style.height="0",n.id=b;const s=new URL(`${e}/embed`);return s.searchParams.append("appId",t),n.src=s.toString(),n}function x(e,t){return window.open(e,"Coinbase","popup"===t?`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=${y.height},width=${y.width}`:void 0)}o(w,"CoinbasePixel"),o(v,"createPixel"),o(x,"openWindow");var E={buy:"/buy",checkout:"/checkout"},L=class{constructor(e){if(a(this,"open",o((()=>{const{widget:e,experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:s,onExit:i,onSuccess:r,onEvent:o,onRequestedUrl:a,closeOnSuccess:d,closeOnExit:c}=this.options;this.pixel.openExperience({path:E[e],experienceLoggedIn:t,experienceLoggedOut:n,embeddedContentStyles:s,onExit:()=>{i?.(),c&&this.pixel.endExperience()},onSuccess:()=>{r?.(),d&&this.pixel.endExperience()},onRequestedUrl:a,onEvent:o})}),"open")),a(this,"destroy",o((()=>{this.pixel.destroy()}),"destroy")),this.options=e,this.pixel=new w({...e,appParams:{widget:e.widget,...e.appParams}}),e.target){const t=document.querySelector(e.target);t&&t.addEventListener("click",this.open)}}};o(L,"CBPayInstance");var P=o((({experienceLoggedIn:e="embedded",widgetParameters:t,...n},s)=>{const i=new L({...n,widget:"buy",experienceLoggedIn:e,appParams:t,onReady:e=>{e?s(e,null):s(null,i)},onFallbackOpen:()=>{const e=c({appId:n.appId,host:n.host,theme:n.theme,...t});window.open(e)}})}),"initOnRamp");o((function(e,t){u(e,"event",{data:t})}),"broadcastEvent")}}]);
//# sourceMappingURL=4507.js.map