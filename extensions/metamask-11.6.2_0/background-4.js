LavaPack.loadBundle([[3357,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function s(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}s.prototype.__isLong__,Object.defineProperty(s.prototype,"__isLong__",{value:!0}),s.isLong=i;var o={},a={};function c(e,t){var r,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=a[e])?n:(r=u(e,(0|e)<0?-1:0,!0),s&&(a[e]=r),r):(s=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=u(e,e<0?-1:0,!1),s&&(o[e]=r),r)}function l(e,t){if(isNaN(e))return t?k:b;if(t){if(e<0)return k;if(e>=g)return S}else{if(e<=-m)return T;if(e+1>=m)return _}return e<0?l(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new s(e,t,r)}s.fromInt=c,s.fromNumber=l,s.fromBits=u;var d=Math.pow;function h(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return h(e.substring(1),t,r).neg();for(var s=l(d(r,8)),i=b,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),r);if(a<8){var u=l(d(r,a));i=i.mul(u).add(l(c))}else i=(i=i.mul(s)).add(l(c))}return i.unsigned=t,i}function p(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}s.fromString=h,s.fromValue=p;var f=4294967296,g=f*f,m=g/2,y=c(1<<24),b=c(0);s.ZERO=b;var k=c(0,!0);s.UZERO=k;var w=c(1);s.ONE=w;var v=c(1,!0);s.UONE=v;var C=c(-1);s.NEG_ONE=C;var _=u(-1,2147483647,!1);s.MAX_VALUE=_;var S=u(-1,-1,!0);s.MAX_UNSIGNED_VALUE=S;var T=u(0,-2147483648,!1);s.MIN_VALUE=T;var A=s.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=l(d(e,6),this.unsigned),i=this,o="";;){var a=i.div(s),c=(i.sub(a.mul(s)).toInt()>>>0).toString(e);if((i=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return i(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(i(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(w)},A.neg=A.negate,A.add=function(e){i(e)||(e=p(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,d=0,h=0,f=0;return h+=(f+=s+(65535&e.low))>>>16,d+=(h+=n+c)>>>16,l+=(d+=r+a)>>>16,l+=t+o,u((h&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},A.subtract=function(e){return i(e)||(e=p(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return b;if(i(e)||(e=p(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return b;if(this.eq(T))return e.isOdd()?T:b;if(e.eq(T))return this.isOdd()?T:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,a=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,g=0,m=0,k=0;return m+=(k+=o*h)>>>16,g+=(m+=s*h)>>>16,m&=65535,g+=(m+=o*d)>>>16,f+=(g+=r*h)>>>16,g&=65535,f+=(g+=s*d)>>>16,g&=65535,f+=(g+=o*c)>>>16,f+=t*h+r*d+s*c+o*a,u((m&=65535)<<16|(k&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(i(e)||(e=p(e)),e.isZero())throw Error("division by zero");var t,r,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?k:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return k;if(e.gt(this.shru(1)))return v;s=k}else{if(this.eq(T))return e.eq(w)||e.eq(C)?T:e.eq(T)?w:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?w:C:(r=this.sub(e.mul(t)),s=t.add(r.div(e)));if(e.eq(T))return this.unsigned?k:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=b}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:d(2,o-48),c=l(t),h=c.mul(e);h.isNegative()||h.gt(r);)h=(c=l(t-=a,this.unsigned)).mul(e);c.isZero()&&(c=w),s=s.add(c),r=r.sub(h)}return s},A.div=A.divide,A.modulo=function(e){return i(e)||(e=p(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return u(~this.low,~this.high,this.unsigned)},A.and=function(e){return i(e)||(e=p(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return i(e)||(e=p(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return i(e)||(e=p(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},s.fromBytes=function(e,t,r){return r?s.fromBytesLE(e,t):s.fromBytesBE(e,t)},s.fromBytesLE=function(e,t){return new s(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},s.fromBytesBE=function(e,t){return new s(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>long",file:"node_modules/long/src/long.js"}],[3398,{"./util":3402},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encodeText:n}=e("./util");t.exports=class{constructor(e,t,r,s){this.name=e,this.code=t,this.codeBuf=n(this.code),this.alphabet=s,this.codec=r(s)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/base.js"}],[3399,{"./base.js":3398,"./rfc4648":3401,"./util":3402,"@multiformats/base-x":1762},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("@multiformats/base-x"),s=e("./base.js"),{rfc4648:i}=e("./rfc4648"),{decodeText:o,encodeText:a}=e("./util"),c=[["identity","\0",()=>({encode:o,decode:a}),""],["base2","0",i(1),"01"],["base8","7",i(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",i(4),"0123456789abcdef"],["base16upper","F",i(4),"0123456789ABCDEF"],["base32hex","v",i(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",i(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",i(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",i(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",i(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",i(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",i(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",i(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],l=c.reduce(((e,t)=>(e[t[0]]=new s(t[0],t[1],t[2],t[3]),e)),{}),u=c.reduce(((e,t)=>(e[t[1]]=l[t[0]],e)),{});t.exports={names:l,codes:u}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/constants.js"}],[34,{"../../../../shared/modules/conversion.utils":4016,"../../lib/util":92,"@metamask/ethjs-query":1278,"ethereumjs-util":2767,lodash:3346,loglevel:3356},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("@metamask/ethjs-query")),s=l(e("loglevel")),i=e("ethereumjs-util"),o=e("lodash"),a=e("../../lib/util"),c=e("../../../../shared/modules/conversion.utils");function l(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e){this.query=new n.default(e)}async analyzeGasUsage(e){const t=await this.query.getBlockByNumber("latest",!1),r=(0,a.hexToBn)(t.gasLimit),n=(0,a.BnMultiplyByFraction)(r,19,20);let i,o=(0,c.bnToHex)(n);try{o=await this.estimateTxGas(e)}catch(e){s.default.warn(e),i={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:t.number,blockGasLimit:t.gasLimit}}}return{blockGasLimit:t.gasLimit,estimatedGasHex:o,simulationFails:i}}async estimateTxGas(e){const t=(0,o.cloneDeep)(e.txParams);return delete t.gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,await this.query.estimateGas(t)}addGasBuffer(e,t,r=1.5){const n=(0,a.hexToBn)(e),s=(0,a.hexToBn)(t).muln(.9),i=n.muln(r);return n.gt(s)?(0,c.bnToHex)(n):i.lt(s)?(0,c.bnToHex)(i):(0,c.bnToHex)(s)}async getBufferedGasLimit(e,t){const{blockGasLimit:r,estimatedGasHex:n,simulationFails:s}=await this.analyzeGasUsage(e);return{gasLimit:this.addGasBuffer((0,i.addHexPrefix)(n),r,t),simulationFails:s}}}}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-gas-utils.js"}],[3400,{"./constants":3399,"./util":3402},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("./constants"),{encodeText:s,decodeText:i,concat:o}=e("./util");function a(e){if(Object.prototype.hasOwnProperty.call(n.names,e))return n.names[e];if(Object.prototype.hasOwnProperty.call(n.codes,e))return n.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(r=t.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=a(e);return function(e,t){const r=a(e);r.decode(i(t))}(r,t),o([n,t],n.length+t.length)}).encode=function(e,t){const r=a(e),n=s(r.encode(t));return o([r.codeBuf,n],r.codeBuf.length+n.length)},r.decode=function(e){e instanceof Uint8Array&&(e=i(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},r.isEncoded=function(e){if(e instanceof Uint8Array&&(e=i(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(e){return!1}},r.encoding=a,r.encodingFromData=function(e){return e instanceof Uint8Array&&(e=i(e)),a(e[0])};const c=Object.freeze(n.names),l=Object.freeze(n.codes);r.names=c,r.codes=l}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/index.js"}],[3401,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={rfc4648:e=>t=>({encode:r=>((e,t,r)=>{const n="="===t[t.length-1],s=(1<<r)-1;let i="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,i+=t[s&a>>o];if(o&&(i+=t[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i})(r,t,e),decode:r=>((e,t,r)=>{const n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*r/8|0);let o=0,a=0,c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined)throw new SyntaxError("Invalid character "+e[t]);a=a<<r|s,o+=r,o>=8&&(o-=8,i[c++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i})(r,t,e)})}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/rfc4648.js"}],[3402,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=new TextDecoder,s=new TextEncoder;t.exports={decodeText:e=>n.decode(e),encodeText:e=>s.encode(e),concat:function(e,t){const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}}},{package:"@ensdomains/content-hash>cids>multibase",file:"node_modules/multibase/src/util.js"}],[3403,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});t.exports={baseTable:n}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/generated-table.js"}],[3404,{"./maps":3405,"./util":3406,"uint8arrays/concat":3890,varint:3951},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/concat"),i=e("./util"),{nameToVarint:o,constantToCode:a,nameToCode:c,codeToName:l}=e("./maps");function u(e){const t=n.decode(e),r=l[t];if(r===undefined)throw new Error(`Code "${t}" not found`);return r}function d(e){return l[e]}function h(e){const t=c[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function p(e){return n.decode(e)}function f(e){const t=o[e];if(t===undefined)throw new Error(`Codec "${e}" not found`);return t}function g(e){return i.varintEncode(e)}t.exports={addPrefix:function(e,t){let r;if(e instanceof Uint8Array)r=i.varintUint8ArrayEncode(e);else{if(!o[e])throw new Error("multicodec not recognized");r=o[e]}return s([r,t],r.length+t.length)},rmPrefix:function(e){return n.decode(e),e.slice(n.decode.bytes)},getNameFromData:u,getNameFromCode:d,getCodeFromName:h,getCodeFromData:p,getVarintFromName:f,getVarintFromCode:g,getCodec:function(e){return u(e)},getName:function(e){return d(e)},getNumber:function(e){return h(e)},getCode:function(e){return p(e)},getCodeVarint:function(e){return f(e)},getVarint:function(e){return Array.from(g(e))},...a,nameToVarint:o,nameToCode:c,codeToName:l}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/index.js"}],[3405,{"./generated-table":3403,"./util":3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{baseTable:n}=e("./generated-table"),s=e("./util").varintEncode,i={},o={},a={};for(const e in n){const t=e,r=n[t];i[t]=s(r);o[t.toUpperCase().replace(/-/g,"_")]=r,a[r]||(a[r]=t)}Object.freeze(i),Object.freeze(o),Object.freeze(a);const c=Object.freeze(n);t.exports={nameToVarint:i,constantToCode:o,nameToCode:c,codeToName:a}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/maps.js"}],[3406,{"uint8arrays/from-string":3892,"uint8arrays/to-string":3893,varint:3951},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("varint"),s=e("uint8arrays/to-string"),i=e("uint8arrays/from-string");function o(e){return parseInt(s(e,"base16"),16)}t.exports={numberToUint8Array:function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);return i(t,"base16")},uint8ArrayToNumber:o,varintUint8ArrayEncode:function(e){return Uint8Array.from(n.encode(o(e)))},varintEncode:function(e){return Uint8Array.from(n.encode(e))}}}}},{package:"@ensdomains/content-hash>cids>multicodec",file:"node_modules/multicodec/src/util.js"}],[3416,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var i,o=0,a=0,c=r=r||0,l=t.length;do{if(c>=l)throw e.bytes=0,new RangeError("Could not decode varint");i=t[c++],o+=a<28?(i&s)<<a:(i&s)*Math.pow(2,a),a+=7}while(i>=n);return e.bytes=c-r,o};var n=128,s=127}}},{package:"@ensdomains/content-hash>cids>multihashes>varint",file:"node_modules/multihashes/node_modules/varint/decode.js"}],[3417,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,o){r=r||[];var a=o=o||0;for(;t>=i;)r[o++]=255&t|n,t/=128;for(;t&s;)r[o++]=255&t|n,t>>>=7;return r[o]=0|t,e.bytes=o-a+1,r};var n=128,s=-128,i=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>cids>multihashes>varint",file:"node_modules/multihashes/node_modules/varint/encode.js"}],[3418,{"./decode.js":3416,"./encode.js":3417,"./length.js":3419},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>cids>multihashes>varint",file:"node_modules/multihashes/node_modules/varint/index.js"}],[3419,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),c=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<n?1:e<s?2:e<i?3:e<o?4:e<a?5:e<c?6:e<l?7:e<u?8:e<d?9:10}}}},{package:"@ensdomains/content-hash>cids>multihashes>varint",file:"node_modules/multihashes/node_modules/varint/length.js"}],[3420,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});t.exports={names:n}}}},{package:"@ensdomains/content-hash>cids>multihashes",file:"node_modules/multihashes/src/constants.js"}],[3421,{"./constants":3420,multibase:3400,"uint8arrays/concat":3890,"uint8arrays/from-string":3892,"uint8arrays/to-string":3893,varint:3418},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("multibase"),s=e("varint"),{names:i}=e("./constants"),o=e("uint8arrays/to-string"),a=e("uint8arrays/from-string"),c=e("uint8arrays/concat"),l={};for(const e in i){const t=e;l[i[t]]=t}function u(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(e.length<2)throw new Error("multihash too short. must be > 2 bytes.");const t=s.decode(e);if(!p(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);e=e.slice(s.decode.bytes);const r=s.decode(e);if(r<0)throw new Error(`multihash invalid length: ${r}`);if((e=e.slice(s.decode.bytes)).length!==r)throw new Error(`multihash length inconsistent: 0x${o(e,"base16")}`);return{code:t,name:l[t],length:r,digest:e}}function d(e){let t=e;if("string"==typeof e){if(i[e]===undefined)throw new Error(`Unrecognized hash function named: ${e}`);t=i[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(l[t]===undefined&&!h(t))throw new Error(`Unrecognized function code: ${t}`);return t}function h(e){return e>0&&e<16}function p(e){return!!h(e)||!!l[e]}function f(e){u(e)}Object.freeze(l),t.exports={names:i,codes:l,toHexString:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return o(e,"base16")},fromHexString:function(e){return a(e,"base16")},toB58String:function(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return o(n.encode("base58btc",e)).slice(1)},fromB58String:function(e){const t=e instanceof Uint8Array?o(e):e;return n.decode("z"+t)},decode:u,encode:function(e,t,r){if(!e||t===undefined)throw new Error("multihash encode requires at least two args: digest, code");const n=d(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==r&&(r=e.length),r&&e.length!==r)throw new Error("digest length should be equal to specified length.");const i=s.encode(n),o=s.encode(r);return c([i,o,e],i.length+o.length+e.length)},coerceCode:d,isAppCode:h,validate:f,prefix:function(e){return f(e),e.subarray(0,2)},isValidCode:p}}}},{package:"@ensdomains/content-hash>cids>multihashes",file:"node_modules/multihashes/src/index.js"}],[3422,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){for(var n=self.crypto||self.msCrypto,s="-_",i=36;i--;)s+=i.toString(36);for(i=36;i---10;)s+=i.toString(36).toUpperCase();t.exports=function(e){var t="",r=n.getRandomValues(new Uint8Array(e||21));for(i=e||21;i--;)t+=s[63&r[i]];return t}}}},{package:"nanoid",file:"node_modules/nanoid/index.browser.js"}],[3423,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();t.exports=r=n.fetch,n.fetch&&(r.default=n.fetch.bind(n)),r.Headers=n.Headers,r.Request=n.Request,r.Response=n.Response}}},{package:"node-fetch",file:"node_modules/node-fetch/browser.js"}],[3424,{assert:2460,"await-semaphore":2339,"ethjs-query":2810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const n=e("ethjs-query"),s=e("assert"),i=e("await-semaphore").Mutex;t.exports=class{constructor({provider:e,blockTracker:t,getPendingTransactions:r,getConfirmedTransactions:s}){this.provider=e,this.blockTracker=t,this.ethQuery=new n(e),this.getPendingTransactions=r,this.getConfirmedTransactions=s,this.lockMap={}}async getGlobalLock(){const e=this._lookupMutex("global");return{releaseLock:await e.acquire()}}async getNonceLock(e){await this._globalMutexFree();const t=await this._takeMutex(e);try{const r={},n=await this._getNetworkNextNonce(e),i=this._getHighestLocallyConfirmed(e),o=n.nonce,a=Math.max(o,i),c=this.getPendingTransactions(e),l=this._getHighestContinuousFrom(c,a)||0;r.params={highestLocallyConfirmed:i,highestSuggested:a,nextNetworkNonce:o},r.local=l,r.network=n;const u=Math.max(n.nonce,l.nonce);return s(Number.isInteger(u),`nonce-tracker - nextNonce is not an integer - got: (${typeof u}) "${u}"`),{nextNonce:u,nonceDetails:r,releaseLock:t}}catch(e){throw t(),e}}async _globalMutexFree(){const e=this._lookupMutex("global");(await e.acquire())()}async _takeMutex(e){const t=this._lookupMutex(e);return await t.acquire()}_lookupMutex(e){let t=this.lockMap[e];return t||(t=new i,this.lockMap[e]=t),t}async _getNetworkNextNonce(e){const t=await this.blockTracker.getLatestBlock(),r=(await this.ethQuery.getTransactionCount(e,t)).toNumber();s(Number.isInteger(r),`nonce-tracker - baseCount is not an integer - got: (${typeof r}) "${r}"`);return{name:"network",nonce:r,details:{blockNumber:t,baseCount:r}}}_getHighestLocallyConfirmed(e){const t=this.getConfirmedTransactions(e),r=this._getHighestNonce(t);return Number.isInteger(r)?r+1:0}_getHighestNonce(e){const t=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));return Math.max.apply(null,t)}_getHighestContinuousFrom(e,t){const r=e.map((e=>{const t=e.txParams.nonce;return s(typeof t,"string","nonces should be hex strings"),parseInt(t,16)}));let n=t;for(;r.includes(n);)n++;return{name:"local",nonce:n,details:{startPoint:t,highest:n}}}}}}},{package:"nonce-tracker",file:"node_modules/nonce-tracker/index.js"}],[3499,{"./src/index-light":3505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./src/index-light")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/light.js"}],[35,{"../../../../shared/constants/app":3981,"../../../../shared/constants/network":3991,"../../../../shared/constants/transaction":4002,"../../metamask-controller":93,"./lib/tx-state-history-helpers":31,"./lib/util":32,"@metamask/obs-store":1486,"@metamask/safe-event-emitter":1585,lodash:3346,loglevel:3356,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ERROR_SUBMITTING=void 0;var n=f(e("@metamask/safe-event-emitter")),s=e("@metamask/obs-store"),i=f(e("loglevel")),o=e("lodash"),a=e("uuid"),c=e("../../../../shared/constants/transaction"),l=e("../../metamask-controller"),u=e("../../../../shared/constants/app"),d=e("../../../../shared/constants/network"),h=e("./lib/tx-state-history-helpers"),p=e("./lib/util");function f(e){return e&&e.__esModule?e:{default:e}}const g=r.ERROR_SUBMITTING="There was an error when resubmitting this transaction.";class m extends n.default{constructor({initState:e,txHistoryLimit:t,getNetworkStatus:r,getCurrentChainId:n}){super(),this.store=new s.ObservableStore({transactions:{},...e}),this.txHistoryLimit=t,this.getNetworkStatus=r,this.getCurrentChainId=n}generateTxMeta(e={}){var t;const r=this.getNetworkStatus(),n=this.getCurrentChainId();if(r!==d.NetworkStatus.Available)throw new Error("MetaMask is having trouble connecting to the network");let s=null;return e.txParams&&"string"==typeof e.origin&&e.origin!==u.ORIGIN_METAMASK&&(void 0!==e.txParams.gasPrice?s={gasPrice:e.txParams.gasPrice}:void 0===e.txParams.maxFeePerGas&&void 0===e.txParams.maxPriorityFeePerGas||(s={maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas,maxFeePerGas:e.txParams.maxFeePerGas}),void 0!==e.txParams.gas&&(s={...s,gas:e.txParams.gas})),{id:(0,a.v1)(),time:(new Date).getTime(),status:c.TransactionStatus.unapproved,originalGasEstimate:null===(t=e.txParams)||void 0===t?void 0:t.gas,userEditedGasLimit:!1,chainId:n,loadingDefaults:!0,dappSuggestedGasFees:s,sendFlowHistory:[],verifiedOnBlockchain:!1,...e}}getUnapprovedTxList(){const e=this.getCurrentChainId();return(0,o.pickBy)(this.store.getState().transactions,(t=>t.status===c.TransactionStatus.unapproved&&t.chainId===e))}getApprovedTransactions(e){const t={status:c.TransactionStatus.approved};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getPendingTransactions(e){const t={status:c.TransactionStatus.submitted};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getConfirmedTransactions(e){const t={status:c.TransactionStatus.confirmed};return e&&(t.from=e),this.getTransactions({searchCriteria:t})}getTransactionWithActionId(e){return(0,o.values)((0,o.pickBy)(this.store.getState().transactions,(t=>t.actionId===e)))[0]}addTransaction(e){e.txParams&&(e.txParams=(0,p.normalizeAndValidateTxParams)(e.txParams,!1)),this.once(`${e.id}:signed`,(()=>{this.removeAllListeners(`${e.id}:rejected`)})),this.once(`${e.id}:rejected`,(()=>{this.removeAllListeners(`${e.id}:signed`)})),e.history=[];const t=(0,h.snapshotFromTxMeta)(e);e.history.push(t);const r=this.getTransactions({filterToCurrentNetwork:!1}),{txHistoryLimit:n}=this,s=new Set,i=r.reverse().filter((e=>{const{chainId:t,status:r,txParams:i}=e,o=`${i.nonce}-${t}-${i.from}`;return!s.has(o)&&(!(s.size<n-1||!1===(0,p.getFinalStates)().includes(r))||(s.add(o),!1))})).map((e=>e.id));return this._deleteTransactions(i),this._addTransactionsToState([e]),e}addExternalTransaction(e){var t;const r=null==e||null===(t=e.txParams)||void 0===t?void 0:t.from,n=this.getConfirmedTransactions(r),s=this.getPendingTransactions(r);return(0,p.validateConfirmedExternalTransaction)({txMeta:e,pendingTransactions:s,confirmedTransactions:n}),this._addTransactionsToState([e]),e}getTransaction(e){const{transactions:t}=this.store.getState();return t[e]}updateTransaction(e,t){if(e.txParams)try{e.txParams=(0,p.normalizeAndValidateTxParams)(e.txParams,!1)}catch(t){if(e.warning.message!==g)throw t;return void this.setTxStatusFailed(e.id,t)}this._updateTransactionHistory(e,t)}_updateTransactionHistory(e,t){const r=(0,h.snapshotFromTxMeta)(e),n=(0,h.replayHistory)(e.history),s=(0,h.generateHistoryEntry)(n,r,t);s.length&&e.history.push(s);const i=e.id;this.store.updateState({transactions:{...this.store.getState().transactions,[i]:e}})}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:r=!0,limit:n}={}){const s=this.getCurrentChainId(),i=(0,o.mapValues)(e,(e=>"function"==typeof e?e:t=>t===e)),a=t?(0,o.keyBy)(t,"id"):this.store.getState().transactions,c=(0,o.sortBy)((0,o.pickBy)(a,(e=>{if(r&&e.chainId!==s)return!1;for(const[t,r]of Object.entries(i))if(t in e.txParams){if(!1===r(e.txParams[t]))return!1}else if(!1===r(e[t]))return!1;return!0})),"time");if(n!==undefined){const e=new Set,t=[];for(let r=c.length-1;r>-1;r--){const s=c[r],{nonce:i}=s.txParams;if(!e.has(i)){if(!(e.size<n))continue;e.add(i)}t.unshift(s)}return t}return c}setTxStatusRejected(e){this._setTransactionStatus(e,c.TransactionStatus.rejected),this._deleteTransaction(e)}setTxStatusUnapproved(e){this._setTransactionStatus(e,c.TransactionStatus.unapproved)}setTxStatusApproved(e){this._setTransactionStatus(e,c.TransactionStatus.approved)}setTxStatusSigned(e){this._setTransactionStatus(e,c.TransactionStatus.signed)}setTxStatusSubmitted(e){const t=this.getTransaction(e);t.submittedTime=(new Date).getTime(),this.updateTransaction(t,"txStateManager - add submitted time stamp"),this._setTransactionStatus(e,c.TransactionStatus.submitted)}setTxStatusConfirmed(e){this._setTransactionStatus(e,c.TransactionStatus.confirmed)}setTxStatusDropped(e){this._setTransactionStatus(e,c.TransactionStatus.dropped)}setTxStatusFailed(e,t){var r;const n=t||new Error("Internal metamask failure"),s=this.getTransaction(e);s.error={message:(null===(r=n.message)||void 0===r?void 0:r.toString())||n.toString(),rpc:n.value,stack:n.stack},this._updateTransactionHistory(s,"transactions:tx-state-manager#fail - add error"),this._setTransactionStatus(e,c.TransactionStatus.failed)}wipeTransactions(e){const{transactions:t}=this.store.getState(),r=this.getCurrentChainId();this.store.updateState({transactions:(0,o.omitBy)(t,(t=>t.txParams.from===e&&t.chainId===r))})}clearUnapprovedTxs(){this.store.updateState({transactions:(0,o.omitBy)(this.store.getState().transactions,(e=>e.status===c.TransactionStatus.unapproved))})}_setTransactionStatus(e,t){const r=this.getTransaction(e);if(r){r.status=t;try{this._updateTransactionHistory(r,`txStateManager: setting status to ${t}`),this.emit(`${r.id}:${t}`,e),this.emit("tx:status-update",e,t),[c.TransactionStatus.submitted,c.TransactionStatus.rejected,c.TransactionStatus.failed].includes(t)&&this.emit(`${r.id}:finished`,r),this.emit(l.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}catch(e){i.default.error(e)}}}_addTransactionsToState(e){this.store.updateState({transactions:e.reduce(((e,t)=>(e[t.id]=t,e)),this.store.getState().transactions)})}_deleteTransaction(e){const{transactions:t}=this.store.getState();delete t[e],this.store.updateState({transactions:t})}_deleteTransactions(e){const{transactions:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({transactions:t})}}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/transactions/tx-state-manager.js"}],[3500,{"./enum":3503,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./enum"),i=e("./util");function o(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",n);for(var i=t.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)t.repeated&&i[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",n,i[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=i.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=i.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof s||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof s||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(i.compareFieldsById);if(!t.length)return i.codegen()("return {}");for(var r=i.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?o:c).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",i.safeProp(n[l].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),l=0;l<o.length;++l)r("d%s={}",i.safeProp(o[l].name));r("}")}if(c.length){for(r("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],d=i.safeProp(u.name);if(u.resolvedType instanceof s)r("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var h="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,u.typeDefault)}r("}")}var p=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);d=i.safeProp(u.name);u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,u,f,d+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,u,f,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),a(r,u,f,d),u.partOf&&r("if(o.oneofs)")("d%s=%j",i.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/converter.js"}],[3501,{"./enum":3503,"./types":3521,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,l="m"+i.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),s.defaults[a.keyType]!==undefined?t("k=%j",s.defaults[a.keyType]):t("k=null"),s.defaults[c]!==undefined?t("value=%j",s.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),s.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),s.long[a.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),s.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),s.basic[c]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,c)):s.basic[c]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",o(u))}return t("return m")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e){return"missing required '"+e.name+"'"}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/decoder.js"}],[3502,{"./enum":3503,"./types":3521,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t,r=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof n?"int32":l.type,h=s.basic[d];t="m"+i.safeProp(l.name),l.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|s.mapKey[l.keyType],l.keyType),h===undefined?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,t),r("}")("}")):l.repeated?(r("if(%s!=null&&%s.length){",t,t),l.packed&&s.packed[d]!==undefined?r("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),h===undefined?o(r,l,u,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,d,t)),r("}")):(l.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),h===undefined?o(r,l,u,t):r("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,d,t))}return r("return w")};var n=e("./enum"),s=e("./types"),i=e("./util");function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/encoder.js"}],[3503,{"./namespace":3510,"./object":3511,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var s=e("./namespace"),i=e("./util");function o(e,t,r,s,i){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=i||{},this.reserved=undefined,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},o.prototype.add=function(e,t,r){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/enum.js"}],[3504,{"./enum":3503,"./object":3511,"./types":3521,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("./object");((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var s,i=e("./enum"),o=e("./types"),a=e("./util"),c=/^required|optional|repeated$/;function l(e,t,r,s,i,l,u){if(a.isObject(s)?(u=i,l=s,s=i=undefined):a.isObject(i)&&(u=l,l=i,i=undefined),n.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(s!==undefined&&!c.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==undefined&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:undefined,this.type=r,this.id=t,this.extend=i||undefined,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&o.long[r]!==undefined,this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},l.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=o.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,i){a.decorateType(s.constructor).add(new l(i,e,t,r,{default:n}))}},l._configure=function(e){s=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/field.js"}],[3505,{"./converter":3500,"./decoder":3501,"./encoder":3502,"./enum":3503,"./field":3504,"./index-minimal":3506,"./mapfield":3507,"./message":3508,"./method":3509,"./namespace":3510,"./object":3511,"./oneof":3512,"./root":3515,"./service":3519,"./type":3520,"./types":3521,"./util":3522,"./verifier":3525,"./wrappers":3526},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports=e("./index-minimal");n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e("./encoder"),n.decoder=e("./decoder"),n.verifier=e("./verifier"),n.converter=e("./converter"),n.ReflectionObject=e("./object"),n.Namespace=e("./namespace"),n.Root=e("./root"),n.Enum=e("./enum"),n.Type=e("./type"),n.Field=e("./field"),n.OneOf=e("./oneof"),n.MapField=e("./mapfield"),n.Service=e("./service"),n.Method=e("./method"),n.Message=e("./message"),n.wrappers=e("./wrappers"),n.types=e("./types"),n.util=e("./util"),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-light.js"}],[3506,{"./reader":3513,"./reader_buffer":3514,"./roots":3516,"./rpc":3517,"./util/minimal":3524,"./writer":3527,"./writer_buffer":3528},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=s,s()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/index-minimal.js"}],[3507,{"./field":3504,"./types":3521,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./field");((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var s=e("./types"),i=e("./util");function o(e,t,r,s,o,a){if(n.call(this,e,t,s,undefined,undefined,o,a),!i.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){if(this.resolved)return this;if(s.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=i.decorateType(r).name:r&&"object"==typeof r&&(r=i.decorateEnum(r).name),function(n,s){i.decorateType(n.constructor).add(new o(s,e,t,r))}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/mapfield.js"}],[3508,{"./util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("./util/minimal");function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/message.js"}],[3509,{"./object":3511,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./object");((i.prototype=Object.create(n.prototype)).constructor=i).className="Method";var s=e("./util");function i(e,t,r,i,o,a,c,l,u){if(s.isObject(o)?(c=o,o=a=undefined):s.isObject(a)&&(c=a,a=undefined),t!==undefined&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(r))throw TypeError("requestType must be a string");if(!s.isString(i))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||undefined,this.responseType=i,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/method.js"}],[3510,{"./field":3504,"./object":3511,"./oneof":3512,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n=e("./object");((d.prototype=Object.create(n.prototype)).constructor=d).className="Namespace";var s,i,o,a=e("./field"),c=e("./oneof"),l=e("./util");function u(e,t){if(!e||!e.length)return undefined;for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}function d(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=u,d.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((t.fields!==undefined?s.fromJSON:t.values!==undefined?o.fromJSON:t.methods!==undefined?i.fromJSON:t.id!==undefined?a.fromJSON:d.fromJSON)(r[n],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof s||e instanceof o||e instanceof i||e instanceof d||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof s||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof d&&(n=this._nestedArray[s].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/namespace.js"}],[3511,{"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i,i.className="ReflectionObject";var n,s=e("./util");function i(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},i.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},i.prototype.getOption=function(e){return this.options?this.options[e]:undefined},i.prototype.setOption=function(e,t,r){return r&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var i=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(i){var o=i[e];s.setProperty(o,r,t)}else(i={})[e]=s.setProperty({},r,t),n.push(i)}else{var a={};a[e]=t,n.push(a)}return this},i.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){n=e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/object.js"}],[3512,{"./field":3504,"./object":3511,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=o;var n=e("./object");((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var s=e("./field"),i=e("./util");function o(e,t,r,s){if(Array.isArray(t)||(r=t,t=undefined),n.call(this,e,r),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){i.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/oneof.js"}],[3513,{"./util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=c;var n,s=e("./util/minimal"),i=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=d(),n._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader.js"}],[3514,{"./reader":3513,"./util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./reader");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(e){n.call(this,e)}i._configure=function(){s.Buffer&&(i.prototype._slice=s.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/reader_buffer.js"}],[3515,{"./enum":3503,"./field":3504,"./namespace":3510,"./oneof":3512,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n=e("./namespace");((d.prototype=Object.create(n.prototype)).constructor=d).className="Root";var s,i,o,a=e("./field"),c=e("./enum"),l=e("./oneof"),u=e("./util");function d(e){n.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=undefined);var s=this;if(!n)return u.asPromise(e,s,t,r);var a=n===h;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){i.filename=e;var n,o=i(t,s,r),d=0;if(o.imports)for(;d<o.imports.length;++d)(n=l(o.imports[d])||s.resolvePath(e,o.imports[d]))&&p(n);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)(n=l(o.weakImports[d])||s.resolvePath(e,o.weakImports[d]))&&p(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,s)}function p(e,t){if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?d(e,o[e]):(++f,setTimeout((function(){--f,d(e,o[e])})));else if(a){var r;try{r=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,r)}else++f,s.fetch(e,(function(r,i){--f,n&&(r?t?f||c(null,s):c(r):d(e,i))}))}var f=0;u.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=s.resolvePath("",t[m]))&&p(g);return a?s:(f||c(null,s),undefined)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){s=e,i=t,o=r}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/root.js"}],[3516,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/roots.js"}],[3517,{"./rpc/service":3518},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.Service=e("./rpc/service")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc.js"}],[3518,{"../util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(s.prototype=Object.create(n.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,r,s,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,s,i);if(!a.rpcImpl)return setTimeout((function(){o(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null===r)return a.end(!0),undefined;if(!(r instanceof s))try{r=s[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){o(e)}),0),undefined}},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/rpc/service.js"}],[3519,{"./method":3509,"./namespace":3510,"./rpc":3517,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=a;var n=e("./namespace");((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var s=e("./method"),i=e("./util"),o=e("./rpc");function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),i=0;i<n.length;++i)r.add(s.fromJSON(n[i],t.methods[n[i]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,s=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return s}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/service.js"}],[3520,{"./converter":3500,"./decoder":3501,"./encoder":3502,"./enum":3503,"./field":3504,"./mapfield":3507,"./message":3508,"./namespace":3510,"./oneof":3512,"./reader":3513,"./service":3519,"./util":3522,"./verifier":3525,"./wrappers":3526,"./writer":3527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=b;var n=e("./namespace");((b.prototype=Object.create(n.prototype)).constructor=b).className="Type";var s=e("./enum"),i=e("./oneof"),o=e("./field"),a=e("./mapfield"),c=e("./service"),l=e("./message"),u=e("./reader"),d=e("./writer"),h=e("./util"),p=e("./encoder"),f=e("./decoder"),g=e("./verifier"),m=e("./converter"),y=e("./wrappers");function b(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function k(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),b.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var r=new b(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)r.add((void 0!==t.fields[l[u]].keyType?a.fromJSON:o.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)r.add(i.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var d=t.nested[l[u]];r.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?b.fromJSON:d.values!==undefined?s.fromJSON:d.methods!==undefined?c.fromJSON:n.fromJSON)(l[u],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},b.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),k(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),k(this)):n.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),k(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),k(this)}return n.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:d,types:t,util:h}),this.decode=f(this)({Reader:u,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var n=y[e];if(n){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(s),s.toObject=this.toObject,this.toObject=n.toObject.bind(s)}return this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){h.decorateType(t,e)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/type.js"}],[3521,{"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./util"),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[i[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/types.js"}],[3522,{"./enum":3503,"./root":3515,"./roots":3516,"./type":3520,"./util/minimal":3524,"@protobufjs/codegen":1804,"@protobufjs/fetch":1806,"@protobufjs/path":1809},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,s,i=t.exports=e("./util/minimal"),o=e("./roots");i.codegen=e("@protobufjs/codegen"),i.fetch=e("@protobufjs/fetch"),i.path=e("@protobufjs/path"),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},i.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],s=e[r++];s!==undefined&&(t[n]=s)}return t};var a=/\\/g,c=/"/g;i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(t,r){if(t.$type)return r&&t.$type.name!==r&&(i.decorateRoot.remove(t.$type),t.$type.name=r,i.decorateRoot.add(t.$type)),t.$type;n||(n=e("./type"));var s=new n(r||t.name);return i.decorateRoot.add(s),s.ctor=t,Object.defineProperty(t,"$type",{value:s,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:s,enumerable:!1}),s};var u=0;i.decorateEnum=function(t){if(t.$type)return t.$type;s||(s=e("./enum"));var r=new s("Enum"+u++,t);return i.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r},i.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var s=r.shift();if("__proto__"===s||"prototype"===s)return t;if(r.length>0)t[s]=e(t[s]||{},r,n);else{var i=t[s];i&&(n=[].concat(i).concat(n)),t[s]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e("./root")))}})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util.js"}],[3523,{"../util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("../util/minimal");function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=s.zero=new s(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new s(r,n)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(n.isString(e)){if(!n.Long)return s.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):i},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?i:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/longbits.js"}],[3524,{"./longbits":3523,"@protobufjs/aspromise":1802,"@protobufjs/base64":1803,"@protobufjs/eventemitter":1805,"@protobufjs/float":1807,"@protobufjs/inquire":1808,"@protobufjs/pool":1810,"@protobufjs/utf8":1811},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;function s(e,t,r){for(var n=Object.keys(t),s=0;s<n.length;++s)e[n[s]]!==undefined&&r||(e[n[s]]=t[n[s]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&s(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e("@protobufjs/aspromise"),n.base64=e("@protobufjs/base64"),n.EventEmitter=e("@protobufjs/eventemitter"),n.float=e("@protobufjs/float"),n.inquire=e("@protobufjs/inquire"),n.utf8=e("@protobufjs/utf8"),n.pool=e("@protobufjs/pool"),n.LongBits=e("./longbits"),n.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=s,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&this[e[r]]!==undefined&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/util/minimal.js"}],[3525,{"./enum":3503,"./util":3522},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var l=e._fieldsArray[c].resolve(),u="m"+s.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,l.name),l.map)t("if(!util.isObject(%s))",u)("return%j",i(l,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(t,l,"k[i]"),o(t,l,c,u+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",u)("return%j",i(l,"array"))("for(var i=0;i<%s.length;++i){",u),o(t,l,c,u+"[i]")("}");else{if(l.partOf){var d=s.safeProp(l.partOf.name);1===n[l.partOf.name]&&t("if(p%s===1)",d)("return%j",l.partOf.name+": multiple values"),n[l.partOf.name]=1,t("p%s=1",d)}o(t,l,c,u)}l.optional&&t("}")}return t("return null")};var n=e("./enum"),s=e("./util");function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,s){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",s)("default:")("return%j",i(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",i(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",i(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",i(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",i(t,"boolean key"))}return e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/verifier.js"}],[3526,{"./message":3508},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,s=e("./message");n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var i=this.lookup(n);i&&(e=i.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/wrappers.js"}],[3527,{"./util/minimal":3524},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=d;var n,s=e("./util/minimal"),i=s.LongBits,o=s.base64,a=s.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=undefined,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return s.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(d.alloc=s.pool(d.alloc,s.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var y=s.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var r=d.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer.js"}],[3528,{"./util/minimal":3524,"./writer":3527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./writer");(i.prototype=Object.create(n.prototype)).constructor=i;var s=e("./util/minimal");function i(){n.call(this)}function o(e,t,r){e.length<40?s.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs",file:"node_modules/protobufjs/src/writer_buffer.js"}],[36,{"../../shared/constants/app":3981,"./lib/util":92,"webextension-polyfill":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.onMessageReceived=r.checkForMultipleVersionsRunning=void 0;var n,s=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},i=e("../../shared/constants/app"),o=e("./lib/util");const a="isRunning";r.onMessageReceived=e=>{e===a&&console.warn("Warning! You have multiple instances of MetaMask running!")};r.checkForMultipleVersionsRunning=async()=>{if((0,o.getPlatform)()!==i.PLATFORM_CHROME&&(0,o.getPlatform)()!==i.PLATFORM_FIREFOX)return;const e=(0,o.getPlatform)()===i.PLATFORM_CHROME?i.CHROME_BUILD_IDS:i.FIREFOX_BUILD_IDS,t=s.default.runtime.id;for(const r of e)if(r!==t)try{await s.default.runtime.sendMessage(r,a)}catch(e){}}}}},{package:"$root$",file:"app/scripts/detect-multiple-instances.js"}],[37,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={config:{}}}}},{package:"$root$",file:"app/scripts/first-time-state.js"}],[3754,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"node_modules/remove-trailing-slash/index.js"}],[3765,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{hasOwnProperty:n}=Object.prototype,s=f();s.configure=f,s.stringify=s,s.default=s,r.stringify=s,r.configure=f,t.exports=s;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function o(e){return e.length<5e3&&!i.test(e)?`"${e}"`:JSON.stringify(e)}function a(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){const r=e[t];let n=t;for(;0!==n&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function l(e){return c.call(e)!==undefined&&0!==e.length}function u(e,t,r){e.length<r&&(r=e.length);const n=","===t?"":" ";let s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function d(e,t){let r;if(n.call(e,t)&&(r=e[t],"boolean"!=typeof r))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===undefined||r}function h(e,t){let r;if(n.call(e,t)){if(r=e[t],"number"!=typeof r)throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===undefined?Infinity:r}function p(e){return 1===e?"1 item":`${e} items`}function f(e){const t=function(e){if(n.call(e,"strict")){const t=e.strict;if("boolean"!=typeof t)throw new TypeError('The "strict" argument must be of type boolean');if(t)return e=>{let t="Object can not safely be stringified. Received type "+typeof e;throw"function"!=typeof e&&(t+=` (${e.toString()})`),new Error(t)}}}(e={...e});t&&(e.bigint===undefined&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));const r=function(e){if(n.call(e,"circularValue")){const t=e.circularValue;if("string"==typeof t)return`"${t}"`;if(null==t)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(e),s=d(e,"bigint"),i=d(e,"deterministic"),c=h(e,"maximumDepth"),f=h(e,"maximumBreadth");function g(e,n,u,d,h,m){let y=n[e];switch("object"==typeof y&&null!==y&&"function"==typeof y.toJSON&&(y=y.toJSON(e)),y=d.call(n,e,y),typeof y){case"string":return o(y);case"object":{if(null===y)return"null";if(-1!==u.indexOf(y))return r;let e="",t=",";const n=m;if(Array.isArray(y)){if(0===y.length)return"[]";if(c<u.length+1)return'"[Array]"';u.push(y),""!==h&&(e+=`\n${m+=h}`,t=`,\n${m}`);const r=Math.min(y.length,f);let s=0;for(;s<r-1;s++){const r=g(String(s),y,u,d,h,m);e+=r!==undefined?r:"null",e+=t}const i=g(String(s),y,u,d,h,m);if(e+=i!==undefined?i:"null",y.length-1>f){e+=`${t}"... ${p(y.length-f-1)} not stringified"`}return""!==h&&(e+=`\n${n}`),u.pop(),`[${e}]`}let s=Object.keys(y);const b=s.length;if(0===b)return"{}";if(c<u.length+1)return'"[Object]"';let k="",w="";""!==h&&(t=`,\n${m+=h}`,k=" ");const v=Math.min(b,f);i&&!l(y)&&(s=a(s)),u.push(y);for(let r=0;r<v;r++){const n=s[r],i=g(n,y,u,d,h,m);i!==undefined&&(e+=`${w}${o(n)}:${k}${i}`,w=t)}if(b>f){e+=`${w}"...":${k}"${p(b-f)} not stringified"`,w=t}return""!==h&&w.length>1&&(e=`\n${m}${e}\n${n}`),u.pop(),`{${e}}`}case"number":return isFinite(y)?String(y):t?t(y):"null";case"boolean":return!0===y?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(y);default:return t?t(y):undefined}}function m(e,n,i,a,l,u){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if(-1!==i.indexOf(n))return r;const e=u;let t="",s=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<i.length+1)return'"[Array]"';i.push(n),""!==l&&(t+=`\n${u+=l}`,s=`,\n${u}`);const r=Math.min(n.length,f);let o=0;for(;o<r-1;o++){const e=m(String(o),n[o],i,a,l,u);t+=e!==undefined?e:"null",t+=s}const d=m(String(o),n[o],i,a,l,u);if(t+=d!==undefined?d:"null",n.length-1>f){t+=`${s}"... ${p(n.length-f-1)} not stringified"`}return""!==l&&(t+=`\n${e}`),i.pop(),`[${t}]`}i.push(n);let d="";""!==l&&(s=`,\n${u+=l}`,d=" ");let h="";for(const e of a){const r=m(e,n[e],i,a,l,u);r!==undefined&&(t+=`${h}${o(e)}:${d}${r}`,h=s)}return""!==l&&h.length>1&&(t=`\n${u}${t}\n${e}`),i.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function y(e,n,d,h,g){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return y(e,n,d,h,g);if(null===n)return"null"}if(-1!==d.indexOf(n))return r;const t=g;if(Array.isArray(n)){if(0===n.length)return"[]";if(c<d.length+1)return'"[Array]"';d.push(n);let e=`\n${g+=h}`;const r=`,\n${g}`,s=Math.min(n.length,f);let i=0;for(;i<s-1;i++){const t=y(String(i),n[i],d,h,g);e+=t!==undefined?t:"null",e+=r}const o=y(String(i),n[i],d,h,g);if(e+=o!==undefined?o:"null",n.length-1>f){e+=`${r}"... ${p(n.length-f-1)} not stringified"`}return e+=`\n${t}`,d.pop(),`[${e}]`}let s=Object.keys(n);const m=s.length;if(0===m)return"{}";if(c<d.length+1)return'"[Object]"';const b=`,\n${g+=h}`;let k="",w="",v=Math.min(m,f);l(n)&&(k+=u(n,b,f),s=s.slice(n.length),v-=n.length,w=b),i&&(s=a(s)),d.push(n);for(let e=0;e<v;e++){const t=s[e],r=y(t,n[t],d,h,g);r!==undefined&&(k+=`${w}${o(t)}: ${r}`,w=b)}if(m>f){k+=`${w}"...": "${p(m-f)} not stringified"`,w=b}return""!==w&&(k=`\n${g}${k}\n${t}`),d.pop(),`{${k}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}function b(e,n,d){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(e)))return b(e,n,d);if(null===n)return"null"}if(-1!==d.indexOf(n))return r;let t="";if(Array.isArray(n)){if(0===n.length)return"[]";if(c<d.length+1)return'"[Array]"';d.push(n);const e=Math.min(n.length,f);let r=0;for(;r<e-1;r++){const e=b(String(r),n[r],d);t+=e!==undefined?e:"null",t+=","}const s=b(String(r),n[r],d);if(t+=s!==undefined?s:"null",n.length-1>f){t+=`,"... ${p(n.length-f-1)} not stringified"`}return d.pop(),`[${t}]`}let s=Object.keys(n);const h=s.length;if(0===h)return"{}";if(c<d.length+1)return'"[Object]"';let g="",m=Math.min(h,f);l(n)&&(t+=u(n,",",f),s=s.slice(n.length),m-=n.length,g=","),i&&(s=a(s)),d.push(n);for(let e=0;e<m;e++){const r=s[e],i=b(r,n[r],d);i!==undefined&&(t+=`${g}${o(r)}:${i}`,g=",")}if(h>f){t+=`${g}"...":"${p(h-f)} not stringified"`}return d.pop(),`{${t}}`}case"number":return isFinite(n)?String(n):t?t(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return undefined;case"bigint":if(s)return String(n);default:return t?t(n):undefined}}return function(e,t,r){if(arguments.length>1){let n="";if("number"==typeof r?n=" ".repeat(Math.min(r,10)):"string"==typeof r&&(n=r.slice(0,10)),null!=t){if("function"==typeof t)return g("",{"":e},[],t,n,"");if(Array.isArray(t))return m("",e,[],function(e){const t=new Set;for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(String(r));return t}(t),n,"")}if(0!==n.length)return y("",e,[],n,"")}return b("",e,[])}}}}},{package:"@metamask/eth-json-rpc-middleware>safe-stable-stringify",file:"node_modules/safe-stable-stringify/index.js"}],[3772,{timers:3880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){!function(n){const s=2147483647;function i(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,s=1013904242,i=2773480762,o=1359893119,a=2600822924,c=528734635,l=1541459225;const u=new Uint32Array(64);function d(e){let d=0,h=e.length;for(;h>=64;){let p,f,g,m,y,b=r,k=n,w=s,v=i,C=o,_=a,S=c,T=l;for(f=0;f<16;f++)g=d+4*f,u[f]=(255&e[g])<<24|(255&e[g+1])<<16|(255&e[g+2])<<8|255&e[g+3];for(f=16;f<64;f++)p=u[f-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=u[f-15],y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,u[f]=(m+u[f-7]|0)+(y+u[f-16]|0)|0;for(f=0;f<64;f++)m=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&_^~C&S)|0)+(T+(t[f]+u[f]|0)|0)|0,y=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&k^b&w^k&w)|0,T=S,S=_,_=C,C=v+m|0,v=w,w=k,k=b,b=m+y|0;r=r+b|0,n=n+k|0,s=s+w|0,i=i+v|0,o=o+C|0,a=a+_|0,c=c+S|0,l=l+T|0,d+=64,h-=64}}d(e);let h,p=e.length%64,f=e.length/536870912|0,g=e.length<<3,m=p<56?56:120,y=e.slice(e.length-p,e.length);for(y.push(128),h=p+1;h<m;h++)y.push(0);return y.push(f>>>24&255),y.push(f>>>16&255),y.push(f>>>8&255),y.push(f>>>0&255),y.push(g>>>24&255),y.push(g>>>16&255),y.push(g>>>8&255),y.push(g>>>0&255),d(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255]}function o(e,t,r){e=e.length<=64?e:i(e);const n=64+t.length+4,s=new Array(n),o=new Array(64);let a,c=[];for(a=0;a<64;a++)s[a]=54;for(a=0;a<e.length;a++)s[a]^=e[a];for(a=0;a<t.length;a++)s[64+a]=t[a];for(a=n-4;a<n;a++)s[a]=0;for(a=0;a<64;a++)o[a]=92;for(a=0;a<e.length;a++)o[a]^=e[a];function l(){for(let e=n-1;e>=n-4;e--){if(s[e]++,s[e]<=255)return;s[e]=0}}for(;r>=32;)l(),c=c.concat(i(o.concat(i(s)))),r-=32;return r>0&&(l(),c=c.concat(i(o.concat(i(s))).slice(0,r))),c}function a(e,t,r,n,s){let i;for(d(e,16*(2*r-1),s,0,16),i=0;i<2*r;i++)u(e,16*i,s,16),l(s,n),d(s,0,e,t+16*i,16);for(i=0;i<r;i++)d(e,t+2*i*16,e,16*i,16);for(i=0;i<r;i++)d(e,t+16*(2*i+1),e,16*(i+r),16)}function c(e,t){return e<<t|e>>>32-t}function l(e,t){d(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=c(t[0]+t[12],7),t[8]^=c(t[4]+t[0],9),t[12]^=c(t[8]+t[4],13),t[0]^=c(t[12]+t[8],18),t[9]^=c(t[5]+t[1],7),t[13]^=c(t[9]+t[5],9),t[1]^=c(t[13]+t[9],13),t[5]^=c(t[1]+t[13],18),t[14]^=c(t[10]+t[6],7),t[2]^=c(t[14]+t[10],9),t[6]^=c(t[2]+t[14],13),t[10]^=c(t[6]+t[2],18),t[3]^=c(t[15]+t[11],7),t[7]^=c(t[3]+t[15],9),t[11]^=c(t[7]+t[3],13),t[15]^=c(t[11]+t[7],18),t[1]^=c(t[0]+t[3],7),t[2]^=c(t[1]+t[0],9),t[3]^=c(t[2]+t[1],13),t[0]^=c(t[3]+t[2],18),t[6]^=c(t[5]+t[4],7),t[7]^=c(t[6]+t[5],9),t[4]^=c(t[7]+t[6],13),t[5]^=c(t[4]+t[7],18),t[11]^=c(t[10]+t[9],7),t[8]^=c(t[11]+t[10],9),t[9]^=c(t[8]+t[11],13),t[10]^=c(t[9]+t[8],18),t[12]^=c(t[15]+t[14],7),t[13]^=c(t[12]+t[15],9),t[14]^=c(t[13]+t[12],13),t[15]^=c(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function u(e,t,r,n){for(let s=0;s<n;s++)r[s]^=e[t+s]}function d(e,t,r,n,s){for(;s--;)r[n++]=e[t++]}function h(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function p(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function f(t,r,n,i,c,l,f){if(n=p(n,"N"),i=p(i,"r"),c=p(c,"p"),l=p(l,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>s/128/i)throw new Error("N too large");if(i>s/128/c)throw new Error("r too large");if(!h(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!h(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let g=o(t,r,128*c*i);const m=new Uint32Array(32*c*i);for(let e=0;e<m.length;e++){const t=4*e;m[e]=(255&g[t+3])<<24|(255&g[t+2])<<16|(255&g[t+1])<<8|(255&g[t+0])<<0}const y=new Uint32Array(64*i),b=new Uint32Array(32*i*n),k=32*i,w=new Uint32Array(16),v=new Uint32Array(16),C=c*n*2;let _,S,T=0,A=null,E=!1,M=0,P=0;const N=f?parseInt(1e3/i):4294967295,x=void 0!==e?e:setTimeout,R=function(){if(E)return f(new Error("cancelled"),T/C);let e;switch(M){case 0:S=32*P*i,d(m,S,y,0,k),M=1,_=0;case 1:e=n-_,e>N&&(e=N);for(let t=0;t<e;t++)d(y,0,b,(_+t)*k,k),a(y,k,i,w,v);if(_+=e,T+=e,f){const e=parseInt(1e3*T/C);if(e!==A){if(E=f(null,T/C),E)break;A=e}}if(_<n)break;_=0,M=2;case 2:e=n-_,e>N&&(e=N);for(let t=0;t<e;t++){const e=y[16*(2*i-1)]&n-1;u(b,e*k,y,k),a(y,k,i,w,v)}if(_+=e,T+=e,f){const e=parseInt(1e3*T/C);if(e!==A){if(E=f(null,T/C),E)break;A=e}}if(_<n)break;if(d(y,0,m,S,k),P++,P<c){M=0;break}g=[];for(let e=0;e<m.length;e++)g.push(m[e]>>0&255),g.push(m[e]>>8&255),g.push(m[e]>>16&255),g.push(m[e]>>24&255);const r=o(t,g,l);return f&&f(null,1,r),r}f&&x(R)};if(!f)for(;;){const e=R();if(e!=undefined)return e}R()}const g={scrypt:function(e,t,r,n,s,i,o){return new Promise((function(a,c){let l=0;o&&o(0),f(e,t,r,n,s,i,(function(e,t,r){if(e)c(e);else if(r)o&&1!==l&&o(1),a(new Uint8Array(r));else if(o&&t!==l)return l=t,o(t)}))}))},syncScrypt:function(e,t,r,n,s,i){return new Uint8Array(f(e,t,r,n,s,i))}};void 0!==r?t.exports=g:"function"==typeof define&&define.amd?define(g):n&&(n.scrypt&&(n._scrypt=n.scrypt),n.scrypt=g)}(this)}).call(this)}).call(this,e("timers").setImmediate)}}},{package:"ethereumjs-util>ethereum-cryptography>scrypt-js",file:"node_modules/scrypt-js/scrypt.js"}],[38,{"@metamask/base-controller":1061,"@metamask/obs-store":1486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("@metamask/base-controller");function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.ObservableStore{constructor({config:e,controllerMessenger:t,state:r,persist:n}){super(r),i(this,"config",{}),this.persist=n,this.controllerMessenger=t,e&&this.updateStructure(e)}updateStructure(e){this.config=e,this.removeAllListeners();const t={};for(const n of Object.keys(e)){var r;if(!e[n])throw new Error(`Undefined '${n}'`);const i=e[n];i.subscribe?e[n].subscribe((e=>{this.updateState({[n]:e})})):this.controllerMessenger.subscribe(`${i.name}:stateChange`,(t=>{let r=t;this.persist&&(r=(0,s.getPersistentState)(t,e[n].metadata)),this.updateState({[n]:r})})),t[n]=i.state??(null===(r=i.getState)||void 0===r?void 0:r.call(i))}this.updateState(t)}getFlatState(){if(!this.config)return{};let e={};for(const t of Object.keys(this.config)){const r=this.config[t],n=r.getState?r.getState():r.state;e={...e,...n}}return e}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/ComposableObservableStore.js"}],[3879,{_process:3472,stream:3833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("stream");function s(e,t,s){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,a=[],c=!1,l=new n;function u(){for(;a.length&&!l.paused;){var e=a.shift();if(null===e)return l.emit("end");l.emit("data",e)}}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(s&&!1===s.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return c||(null===e&&(c=!0),a.push(e),u()),l},l.on("end",(function(){l.readable=!1,!l.writable&&l.autoDestroy&&r.nextTick((function(){l.destroy()}))})),l.end=function(e){if(!i)return i=!0,arguments.length&&l.write(e),l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy(),l},l.destroy=function(){if(!o)return o=!0,i=!0,a.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),u(),l.paused||l.emit("drain"),l},l}t.exports=s,s.through=s}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[3883,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[3887,{buffer:2418},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){var r,n;r=this,n=function(){var t={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},t.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==e.from?(t.encodeBase64=function(t){return e.from(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(e.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new e(t).toString("base64")},t.decodeBase64=function(t){return r(t),new Uint8Array(Array.prototype.slice.call(new e(t,"base64"),0))}):(t.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},t.decodeBase64=function(e){r(e);var t,n=atob(e),s=new Uint8Array(n.length);for(t=0;t<n.length;t++)s[t]=n.charCodeAt(t);return s}),t},void 0!==t&&t.exports?t.exports=n():(r.nacl||(r.nacl={}),r.nacl.util=n())}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"eth-sig-util>tweetnacl-util",file:"node_modules/tweetnacl-util/nacl-util.js"}],[3888,{crypto:2418},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(t){var r=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=r(),a=r([1]),c=r([56129,1]),l=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,s){var i,o=0;for(i=0;i<s;i++)o|=e[t+i]^r[n+i];return(1&o-1>>>8)-1}function m(e,t,r,n){return g(e,t,r,n,16)}function y(e,t,r,n){return g(e,t,r,n,32)}function b(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,k=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=i,C=o,_=a,S=c,T=l,A=u,E=d,M=h,P=p,N=f,x=g,R=m,I=y,j=b,O=k,L=w,U=0;U<20;U+=2)v^=(s=(I^=(s=(P^=(s=(T^=(s=v+I|0)<<7|s>>>25)+v|0)<<9|s>>>23)+T|0)<<13|s>>>19)+P|0)<<18|s>>>14,A^=(s=(C^=(s=(j^=(s=(N^=(s=A+C|0)<<7|s>>>25)+A|0)<<9|s>>>23)+N|0)<<13|s>>>19)+j|0)<<18|s>>>14,x^=(s=(E^=(s=(_^=(s=(O^=(s=x+E|0)<<7|s>>>25)+x|0)<<9|s>>>23)+O|0)<<13|s>>>19)+_|0)<<18|s>>>14,L^=(s=(R^=(s=(M^=(s=(S^=(s=L+R|0)<<7|s>>>25)+L|0)<<9|s>>>23)+S|0)<<13|s>>>19)+M|0)<<18|s>>>14,v^=(s=(S^=(s=(_^=(s=(C^=(s=v+S|0)<<7|s>>>25)+v|0)<<9|s>>>23)+C|0)<<13|s>>>19)+_|0)<<18|s>>>14,A^=(s=(T^=(s=(M^=(s=(E^=(s=A+T|0)<<7|s>>>25)+A|0)<<9|s>>>23)+E|0)<<13|s>>>19)+M|0)<<18|s>>>14,x^=(s=(N^=(s=(P^=(s=(R^=(s=x+N|0)<<7|s>>>25)+x|0)<<9|s>>>23)+R|0)<<13|s>>>19)+P|0)<<18|s>>>14,L^=(s=(O^=(s=(j^=(s=(I^=(s=L+O|0)<<7|s>>>25)+L|0)<<9|s>>>23)+I|0)<<13|s>>>19)+j|0)<<18|s>>>14;v=v+i|0,C=C+o|0,_=_+a|0,S=S+c|0,T=T+l|0,A=A+u|0,E=E+d|0,M=M+h|0,P=P+p|0,N=N+f|0,x=x+g|0,R=R+m|0,I=I+y|0,j=j+b|0,O=O+k|0,L=L+w|0,e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=C>>>0&255,e[5]=C>>>8&255,e[6]=C>>>16&255,e[7]=C>>>24&255,e[8]=_>>>0&255,e[9]=_>>>8&255,e[10]=_>>>16&255,e[11]=_>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=T>>>0&255,e[17]=T>>>8&255,e[18]=T>>>16&255,e[19]=T>>>24&255,e[20]=A>>>0&255,e[21]=A>>>8&255,e[22]=A>>>16&255,e[23]=A>>>24&255,e[24]=E>>>0&255,e[25]=E>>>8&255,e[26]=E>>>16&255,e[27]=E>>>24&255,e[28]=M>>>0&255,e[29]=M>>>8&255,e[30]=M>>>16&255,e[31]=M>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=N>>>0&255,e[37]=N>>>8&255,e[38]=N>>>16&255,e[39]=N>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=R>>>0&255,e[45]=R>>>8&255,e[46]=R>>>16&255,e[47]=R>>>24&255,e[48]=I>>>0&255,e[49]=I>>>8&255,e[50]=I>>>16&255,e[51]=I>>>24&255,e[52]=j>>>0&255,e[53]=j>>>8&255,e[54]=j>>>16&255,e[55]=j>>>24&255,e[56]=O>>>0&255,e[57]=O>>>8&255,e[58]=O>>>16&255,e[59]=O>>>24&255,e[60]=L>>>0&255,e[61]=L>>>8&255,e[62]=L>>>16&255,e[63]=L>>>24&255}(e,t,r,n)}function k(e,t,r,n){!function(e,t,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,k=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=0;v<20;v+=2)i^=(s=(y^=(s=(p^=(s=(l^=(s=i+y|0)<<7|s>>>25)+i|0)<<9|s>>>23)+l|0)<<13|s>>>19)+p|0)<<18|s>>>14,u^=(s=(o^=(s=(b^=(s=(f^=(s=u+o|0)<<7|s>>>25)+u|0)<<9|s>>>23)+f|0)<<13|s>>>19)+b|0)<<18|s>>>14,g^=(s=(d^=(s=(a^=(s=(k^=(s=g+d|0)<<7|s>>>25)+g|0)<<9|s>>>23)+k|0)<<13|s>>>19)+a|0)<<18|s>>>14,w^=(s=(m^=(s=(h^=(s=(c^=(s=w+m|0)<<7|s>>>25)+w|0)<<9|s>>>23)+c|0)<<13|s>>>19)+h|0)<<18|s>>>14,i^=(s=(c^=(s=(a^=(s=(o^=(s=i+c|0)<<7|s>>>25)+i|0)<<9|s>>>23)+o|0)<<13|s>>>19)+a|0)<<18|s>>>14,u^=(s=(l^=(s=(h^=(s=(d^=(s=u+l|0)<<7|s>>>25)+u|0)<<9|s>>>23)+d|0)<<13|s>>>19)+h|0)<<18|s>>>14,g^=(s=(f^=(s=(p^=(s=(m^=(s=g+f|0)<<7|s>>>25)+g|0)<<9|s>>>23)+m|0)<<13|s>>>19)+p|0)<<18|s>>>14,w^=(s=(k^=(s=(b^=(s=(y^=(s=w+k|0)<<7|s>>>25)+w|0)<<9|s>>>23)+y|0)<<13|s>>>19)+b|0)<<18|s>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,n,s,i,o){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;s>=64;){for(b(u,l,o,w),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;s-=64,t+=64,n+=64}if(s>0)for(b(u,l,o,w),c=0;c<s;c++)e[t+c]=r[n+c]^u[c];return 0}function C(e,t,r,n,s){var i,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(b(c,a,s,w),o=0;o<64;o++)e[t+o]=c[o];for(i=1,o=8;o<16;o++)i=i+(255&a[o])|0,a[o]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(b(c,a,s,w),o=0;o<r;o++)e[t+o]=c[o];return 0}function _(e,t,r,n,s){var i=new Uint8Array(32);k(i,n,s,w);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return C(e,t,r,o,i)}function S(e,t,r,n,s,i,o){var a=new Uint8Array(32);k(a,i,o,w);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=i[l+16];return v(e,t,r,n,s,c,a)}var T=function(e){var t,r,n,s,i,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),s=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|s<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(s>>>4|i<<12),this.r[5]=i>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|o<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,n,s,i){var o=new T(i);return o.update(r,n,s),o.finish(e,t),0}function E(e,t,r,n,s,i){var o=new Uint8Array(16);return A(o,0,r,n,s,i),m(e,t,o,0)}function M(e,t,r,n,s){var i;if(r<32)return-1;for(S(e,0,t,0,r,n,s),A(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function P(e,t,r,n,s){var i,o=new Uint8Array(32);if(r<32)return-1;if(_(o,0,32,n,s),0!==E(t,16,t,32,r-32,o))return-1;for(S(e,0,t,0,r,n,s),i=0;i<32;i++)e[i]=0;return 0}function N(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function x(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function R(e,t,r){for(var n,s=~(r-1),i=0;i<16;i++)n=s&(e[i]^t[i]),e[i]^=n,t[i]^=n}function I(e,t){var n,s,i,o=r(),a=r();for(n=0;n<16;n++)a[n]=t[n];for(x(a),x(a),x(a),s=0;s<2;s++){for(o[0]=a[0]-65517,n=1;n<15;n++)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,R(a,o,1-i)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function j(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return I(r,e),I(n,t),y(r,0,n,0)}function O(e){var t=new Uint8Array(32);return I(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function B(e,t,r){var n,s,i=0,o=0,a=0,c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0,m=0,y=0,b=0,k=0,w=0,v=0,C=0,_=0,S=0,T=0,A=0,E=0,M=0,P=0,N=0,x=0,R=0,I=0,j=0,O=0,L=r[0],U=r[1],D=r[2],B=r[3],$=r[4],q=r[5],F=r[6],K=r[7],z=r[8],G=r[9],H=r[10],V=r[11],W=r[12],Y=r[13],J=r[14],Q=r[15];i+=(n=t[0])*L,o+=n*U,a+=n*D,c+=n*B,l+=n*$,u+=n*q,d+=n*F,h+=n*K,p+=n*z,f+=n*G,g+=n*H,m+=n*V,y+=n*W,b+=n*Y,k+=n*J,w+=n*Q,o+=(n=t[1])*L,a+=n*U,c+=n*D,l+=n*B,u+=n*$,d+=n*q,h+=n*F,p+=n*K,f+=n*z,g+=n*G,m+=n*H,y+=n*V,b+=n*W,k+=n*Y,w+=n*J,v+=n*Q,a+=(n=t[2])*L,c+=n*U,l+=n*D,u+=n*B,d+=n*$,h+=n*q,p+=n*F,f+=n*K,g+=n*z,m+=n*G,y+=n*H,b+=n*V,k+=n*W,w+=n*Y,v+=n*J,C+=n*Q,c+=(n=t[3])*L,l+=n*U,u+=n*D,d+=n*B,h+=n*$,p+=n*q,f+=n*F,g+=n*K,m+=n*z,y+=n*G,b+=n*H,k+=n*V,w+=n*W,v+=n*Y,C+=n*J,_+=n*Q,l+=(n=t[4])*L,u+=n*U,d+=n*D,h+=n*B,p+=n*$,f+=n*q,g+=n*F,m+=n*K,y+=n*z,b+=n*G,k+=n*H,w+=n*V,v+=n*W,C+=n*Y,_+=n*J,S+=n*Q,u+=(n=t[5])*L,d+=n*U,h+=n*D,p+=n*B,f+=n*$,g+=n*q,m+=n*F,y+=n*K,b+=n*z,k+=n*G,w+=n*H,v+=n*V,C+=n*W,_+=n*Y,S+=n*J,T+=n*Q,d+=(n=t[6])*L,h+=n*U,p+=n*D,f+=n*B,g+=n*$,m+=n*q,y+=n*F,b+=n*K,k+=n*z,w+=n*G,v+=n*H,C+=n*V,_+=n*W,S+=n*Y,T+=n*J,A+=n*Q,h+=(n=t[7])*L,p+=n*U,f+=n*D,g+=n*B,m+=n*$,y+=n*q,b+=n*F,k+=n*K,w+=n*z,v+=n*G,C+=n*H,_+=n*V,S+=n*W,T+=n*Y,A+=n*J,E+=n*Q,p+=(n=t[8])*L,f+=n*U,g+=n*D,m+=n*B,y+=n*$,b+=n*q,k+=n*F,w+=n*K,v+=n*z,C+=n*G,_+=n*H,S+=n*V,T+=n*W,A+=n*Y,E+=n*J,M+=n*Q,f+=(n=t[9])*L,g+=n*U,m+=n*D,y+=n*B,b+=n*$,k+=n*q,w+=n*F,v+=n*K,C+=n*z,_+=n*G,S+=n*H,T+=n*V,A+=n*W,E+=n*Y,M+=n*J,P+=n*Q,g+=(n=t[10])*L,m+=n*U,y+=n*D,b+=n*B,k+=n*$,w+=n*q,v+=n*F,C+=n*K,_+=n*z,S+=n*G,T+=n*H,A+=n*V,E+=n*W,M+=n*Y,P+=n*J,N+=n*Q,m+=(n=t[11])*L,y+=n*U,b+=n*D,k+=n*B,w+=n*$,v+=n*q,C+=n*F,_+=n*K,S+=n*z,T+=n*G,A+=n*H,E+=n*V,M+=n*W,P+=n*Y,N+=n*J,x+=n*Q,y+=(n=t[12])*L,b+=n*U,k+=n*D,w+=n*B,v+=n*$,C+=n*q,_+=n*F,S+=n*K,T+=n*z,A+=n*G,E+=n*H,M+=n*V,P+=n*W,N+=n*Y,x+=n*J,R+=n*Q,b+=(n=t[13])*L,k+=n*U,w+=n*D,v+=n*B,C+=n*$,_+=n*q,S+=n*F,T+=n*K,A+=n*z,E+=n*G,M+=n*H,P+=n*V,N+=n*W,x+=n*Y,R+=n*J,I+=n*Q,k+=(n=t[14])*L,w+=n*U,v+=n*D,C+=n*B,_+=n*$,S+=n*q,T+=n*F,A+=n*K,E+=n*z,M+=n*G,P+=n*H,N+=n*V,x+=n*W,R+=n*Y,I+=n*J,j+=n*Q,w+=(n=t[15])*L,o+=38*(C+=n*D),a+=38*(_+=n*B),c+=38*(S+=n*$),l+=38*(T+=n*q),u+=38*(A+=n*F),d+=38*(E+=n*K),h+=38*(M+=n*z),p+=38*(P+=n*G),f+=38*(N+=n*H),g+=38*(x+=n*V),m+=38*(R+=n*W),y+=38*(I+=n*Y),b+=38*(j+=n*J),k+=38*(O+=n*Q),i=(n=(i+=38*(v+=n*U))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),k=(n=k+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),i=(n=(i+=s-1+37*(s-1))+(s=1)+65535)-65536*(s=Math.floor(n/65536)),o=(n=o+s+65535)-65536*(s=Math.floor(n/65536)),a=(n=a+s+65535)-65536*(s=Math.floor(n/65536)),c=(n=c+s+65535)-65536*(s=Math.floor(n/65536)),l=(n=l+s+65535)-65536*(s=Math.floor(n/65536)),u=(n=u+s+65535)-65536*(s=Math.floor(n/65536)),d=(n=d+s+65535)-65536*(s=Math.floor(n/65536)),h=(n=h+s+65535)-65536*(s=Math.floor(n/65536)),p=(n=p+s+65535)-65536*(s=Math.floor(n/65536)),f=(n=f+s+65535)-65536*(s=Math.floor(n/65536)),g=(n=g+s+65535)-65536*(s=Math.floor(n/65536)),m=(n=m+s+65535)-65536*(s=Math.floor(n/65536)),y=(n=y+s+65535)-65536*(s=Math.floor(n/65536)),b=(n=b+s+65535)-65536*(s=Math.floor(n/65536)),k=(n=k+s+65535)-65536*(s=Math.floor(n/65536)),w=(n=w+s+65535)-65536*(s=Math.floor(n/65536)),i+=s-1+37*(s-1),e[0]=i,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=h,e[8]=p,e[9]=f,e[10]=g,e[11]=m,e[12]=y,e[13]=b,e[14]=k,e[15]=w}function $(e,t){B(e,t,t)}function q(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=253;n>=0;n--)$(s,s),2!==n&&4!==n&&B(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function F(e,t){var n,s=r();for(n=0;n<16;n++)s[n]=t[n];for(n=250;n>=0;n--)$(s,s),1!==n&&B(s,s,t);for(n=0;n<16;n++)e[n]=s[n]}function K(e,t,n){var s,i,o=new Uint8Array(32),a=new Float64Array(80),l=r(),u=r(),d=r(),h=r(),p=r(),f=r();for(i=0;i<31;i++)o[i]=t[i];for(o[31]=127&t[31]|64,o[0]&=248,L(a,n),i=0;i<16;i++)u[i]=a[i],h[i]=l[i]=d[i]=0;for(l[0]=h[0]=1,i=254;i>=0;--i)R(l,u,s=o[i>>>3]>>>(7&i)&1),R(d,h,s),U(p,l,d),D(l,l,d),U(d,u,h),D(u,u,h),$(h,p),$(f,l),B(l,d,l),B(d,u,p),U(p,l,d),D(l,l,d),$(u,l),D(d,h,f),B(l,d,c),U(l,l,h),B(d,d,l),B(l,h,f),B(h,u,a),$(u,p),R(l,u,s),R(d,h,s);for(i=0;i<16;i++)a[i+16]=l[i],a[i+32]=d[i],a[i+48]=u[i],a[i+64]=h[i];var g=a.subarray(32),m=a.subarray(16);return q(g,g),B(m,m,g),I(e,m),0}function z(e,t){return K(e,t,i)}function G(e,t){return n(t,32),z(e,t)}function H(e,t,r){var n=new Uint8Array(32);return K(n,r,t),k(e,s,n,w)}T.prototype.blocks=function(e,t,r){for(var n,s,i,o,a,c,l,u,d,h,p,f,g,m,y,b,k,w,v,C=this.fin?0:2048,_=this.h[0],S=this.h[1],T=this.h[2],A=this.h[3],E=this.h[4],M=this.h[5],P=this.h[6],N=this.h[7],x=this.h[8],R=this.h[9],I=this.r[0],j=this.r[1],O=this.r[2],L=this.r[3],U=this.r[4],D=this.r[5],B=this.r[6],$=this.r[7],q=this.r[8],F=this.r[9];r>=16;)h=d=0,h+=(_+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*I,h+=(S+=8191&(n>>>13|(s=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*F),h+=(T+=8191&(s>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*q),h+=(A+=8191&(i>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*$),d=(h+=(E+=8191&(o>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*B))>>>13,h&=8191,h+=(M+=a>>>1&8191)*(5*D),h+=(P+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*U),h+=(N+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*L),h+=(x+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*O),p=d+=(h+=(R+=u>>>5|C)*(5*j))>>>13,p+=_*j,p+=S*I,p+=T*(5*F),p+=A*(5*q),d=(p+=E*(5*$))>>>13,p&=8191,p+=M*(5*B),p+=P*(5*D),p+=N*(5*U),p+=x*(5*L),d+=(p+=R*(5*O))>>>13,p&=8191,f=d,f+=_*O,f+=S*j,f+=T*I,f+=A*(5*F),d=(f+=E*(5*q))>>>13,f&=8191,f+=M*(5*$),f+=P*(5*B),f+=N*(5*D),f+=x*(5*U),g=d+=(f+=R*(5*L))>>>13,g+=_*L,g+=S*O,g+=T*j,g+=A*I,d=(g+=E*(5*F))>>>13,g&=8191,g+=M*(5*q),g+=P*(5*$),g+=N*(5*B),g+=x*(5*D),m=d+=(g+=R*(5*U))>>>13,m+=_*U,m+=S*L,m+=T*O,m+=A*j,d=(m+=E*I)>>>13,m&=8191,m+=M*(5*F),m+=P*(5*q),m+=N*(5*$),m+=x*(5*B),y=d+=(m+=R*(5*D))>>>13,y+=_*D,y+=S*U,y+=T*L,y+=A*O,d=(y+=E*j)>>>13,y&=8191,y+=M*I,y+=P*(5*F),y+=N*(5*q),y+=x*(5*$),b=d+=(y+=R*(5*B))>>>13,b+=_*B,b+=S*D,b+=T*U,b+=A*L,d=(b+=E*O)>>>13,b&=8191,b+=M*j,b+=P*I,b+=N*(5*F),b+=x*(5*q),k=d+=(b+=R*(5*$))>>>13,k+=_*$,k+=S*B,k+=T*D,k+=A*U,d=(k+=E*L)>>>13,k&=8191,k+=M*O,k+=P*j,k+=N*I,k+=x*(5*F),w=d+=(k+=R*(5*q))>>>13,w+=_*q,w+=S*$,w+=T*B,w+=A*D,d=(w+=E*U)>>>13,w&=8191,w+=M*L,w+=P*O,w+=N*j,w+=x*I,v=d+=(w+=R*(5*F))>>>13,v+=_*F,v+=S*q,v+=T*$,v+=A*B,d=(v+=E*D)>>>13,v&=8191,v+=M*U,v+=P*L,v+=N*O,v+=x*j,_=h=8191&(d=(d=((d+=(v+=R*I)>>>13)<<2)+d|0)+(h&=8191)|0),S=p+=d>>>=13,T=f&=8191,A=g&=8191,E=m&=8191,M=y&=8191,P=b&=8191,N=k&=8191,x=w&=8191,R=v&=8191,t+=16,r-=16;this.h[0]=_,this.h[1]=S,this.h[2]=T,this.h[3]=A,this.h[4]=E,this.h[5]=M,this.h[6]=P,this.h[7]=N,this.h[8]=x,this.h[9]=R},T.prototype.finish=function(e,t){var r,n,s,i,o=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this.h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|o[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),s=this.h[0]+this.pad[0],this.h[0]=65535&s,i=1;i<8;i++)s=(this.h[i]+this.pad[i]|0)+(s>>>16)|0,this.h[i]=65535&s;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},T.prototype.update=function(e,t,r){var n,s;if(this.leftover){for((s=16-this.leftover)>r&&(s=r),n=0;n<s;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=s,t+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(s=r-r%16,this.blocks(e,t,s),t+=s,r-=s),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=M,W=P;var Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function J(e,t,r,n){for(var s,i,o,a,c,l,u,d,h,p,f,g,m,y,b,k,w,v,C,_,S,T,A,E,M,P,N=new Int32Array(16),x=new Int32Array(16),R=e[0],I=e[1],j=e[2],O=e[3],L=e[4],U=e[5],D=e[6],B=e[7],$=t[0],q=t[1],F=t[2],K=t[3],z=t[4],G=t[5],H=t[6],V=t[7],W=0;n>=128;){for(C=0;C<16;C++)_=8*C+W,N[C]=r[_+0]<<24|r[_+1]<<16|r[_+2]<<8|r[_+3],x[C]=r[_+4]<<24|r[_+5]<<16|r[_+6]<<8|r[_+7];for(C=0;C<80;C++)if(s=R,i=I,o=j,a=O,c=L,l=U,u=D,B,h=$,p=q,f=F,g=K,m=z,y=G,b=H,V,A=65535&(T=V),E=T>>>16,M=65535&(S=B),P=S>>>16,A+=65535&(T=(z>>>14|L<<18)^(z>>>18|L<<14)^(L>>>9|z<<23)),E+=T>>>16,M+=65535&(S=(L>>>14|z<<18)^(L>>>18|z<<14)^(z>>>9|L<<23)),P+=S>>>16,A+=65535&(T=z&G^~z&H),E+=T>>>16,M+=65535&(S=L&U^~L&D),P+=S>>>16,S=Y[2*C],A+=65535&(T=Y[2*C+1]),E+=T>>>16,M+=65535&S,P+=S>>>16,S=N[C%16],E+=(T=x[C%16])>>>16,M+=65535&S,P+=S>>>16,M+=(E+=(A+=65535&T)>>>16)>>>16,A=65535&(T=v=65535&A|E<<16),E=T>>>16,M=65535&(S=w=65535&M|(P+=M>>>16)<<16),P=S>>>16,A+=65535&(T=($>>>28|R<<4)^(R>>>2|$<<30)^(R>>>7|$<<25)),E+=T>>>16,M+=65535&(S=(R>>>28|$<<4)^($>>>2|R<<30)^($>>>7|R<<25)),P+=S>>>16,E+=(T=$&q^$&F^q&F)>>>16,M+=65535&(S=R&I^R&j^I&j),P+=S>>>16,d=65535&(M+=(E+=(A+=65535&T)>>>16)>>>16)|(P+=M>>>16)<<16,k=65535&A|E<<16,A=65535&(T=g),E=T>>>16,M=65535&(S=a),P=S>>>16,E+=(T=v)>>>16,M+=65535&(S=w),P+=S>>>16,I=s,j=i,O=o,L=a=65535&(M+=(E+=(A+=65535&T)>>>16)>>>16)|(P+=M>>>16)<<16,U=c,D=l,B=u,R=d,q=h,F=p,K=f,z=g=65535&A|E<<16,G=m,H=y,V=b,$=k,C%16==15)for(_=0;_<16;_++)S=N[_],A=65535&(T=x[_]),E=T>>>16,M=65535&S,P=S>>>16,S=N[(_+9)%16],A+=65535&(T=x[(_+9)%16]),E+=T>>>16,M+=65535&S,P+=S>>>16,w=N[(_+1)%16],A+=65535&(T=((v=x[(_+1)%16])>>>1|w<<31)^(v>>>8|w<<24)^(v>>>7|w<<25)),E+=T>>>16,M+=65535&(S=(w>>>1|v<<31)^(w>>>8|v<<24)^w>>>7),P+=S>>>16,w=N[(_+14)%16],E+=(T=((v=x[(_+14)%16])>>>19|w<<13)^(w>>>29|v<<3)^(v>>>6|w<<26))>>>16,M+=65535&(S=(w>>>19|v<<13)^(v>>>29|w<<3)^w>>>6),P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,N[_]=65535&M|P<<16,x[_]=65535&A|E<<16;A=65535&(T=$),E=T>>>16,M=65535&(S=R),P=S>>>16,S=e[0],E+=(T=t[0])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[0]=R=65535&M|P<<16,t[0]=$=65535&A|E<<16,A=65535&(T=q),E=T>>>16,M=65535&(S=I),P=S>>>16,S=e[1],E+=(T=t[1])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[1]=I=65535&M|P<<16,t[1]=q=65535&A|E<<16,A=65535&(T=F),E=T>>>16,M=65535&(S=j),P=S>>>16,S=e[2],E+=(T=t[2])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[2]=j=65535&M|P<<16,t[2]=F=65535&A|E<<16,A=65535&(T=K),E=T>>>16,M=65535&(S=O),P=S>>>16,S=e[3],E+=(T=t[3])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[3]=O=65535&M|P<<16,t[3]=K=65535&A|E<<16,A=65535&(T=z),E=T>>>16,M=65535&(S=L),P=S>>>16,S=e[4],E+=(T=t[4])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[4]=L=65535&M|P<<16,t[4]=z=65535&A|E<<16,A=65535&(T=G),E=T>>>16,M=65535&(S=U),P=S>>>16,S=e[5],E+=(T=t[5])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[5]=U=65535&M|P<<16,t[5]=G=65535&A|E<<16,A=65535&(T=H),E=T>>>16,M=65535&(S=D),P=S>>>16,S=e[6],E+=(T=t[6])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[6]=D=65535&M|P<<16,t[6]=H=65535&A|E<<16,A=65535&(T=V),E=T>>>16,M=65535&(S=B),P=S>>>16,S=e[7],E+=(T=t[7])>>>16,M+=65535&S,P+=S>>>16,P+=(M+=(E+=(A+=65535&T)>>>16)>>>16)>>>16,e[7]=B=65535&M|P<<16,t[7]=V=65535&A|E<<16,W+=128,n-=128}return n}function Q(e,t,r){var n,s=new Int32Array(8),i=new Int32Array(8),o=new Uint8Array(256),a=r;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,J(s,i,t,r),r%=128,n=0;n<r;n++)o[n]=t[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,f(o,r-8,a/536870912|0,a<<3),J(s,i,o,r),n=0;n<8;n++)f(e,8*n,s[n],i[n]);return 0}function Z(e,t){var n=r(),s=r(),i=r(),o=r(),a=r(),c=r(),l=r(),d=r(),h=r();D(n,e[1],e[0]),D(h,t[1],t[0]),B(n,n,h),U(s,e[0],e[1]),U(h,t[0],t[1]),B(s,s,h),B(i,e[3],t[3]),B(i,i,u),B(o,e[2],t[2]),U(o,o,o),D(a,s,n),D(c,o,i),U(l,o,i),U(d,s,n),B(e[0],a,c),B(e[1],d,l),B(e[2],l,c),B(e[3],a,d)}function X(e,t,r){var n;for(n=0;n<4;n++)R(e[n],t[n],r)}function ee(e,t){var n=r(),s=r(),i=r();q(i,t[2]),B(n,t[0],i),B(s,t[1],i),I(e,s),e[31]^=O(n)<<7}function te(e,t,r){var n,s;for(N(e[0],o),N(e[1],a),N(e[2],a),N(e[3],o),s=255;s>=0;--s)X(e,t,n=r[s/8|0]>>(7&s)&1),Z(t,e),Z(e,e),X(e,t,n)}function re(e,t){var n=[r(),r(),r(),r()];N(n[0],d),N(n[1],h),N(n[2],a),B(n[3],d,h),te(e,n,t)}function ne(e,t,s){var i,o=new Uint8Array(64),a=[r(),r(),r(),r()];for(s||n(t,32),Q(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,re(a,o),ee(e,a),i=0;i<32;i++)t[i+32]=e[i];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)t[s]+=r-16*t[n]*se[s-(n-32)],r=Math.floor((t[s]+128)/256),t[s]-=256*r;t[s]+=r,t[n]=0}for(r=0,s=0;s<32;s++)t[s]+=r-(t[31]>>4)*se[s],r=t[s]>>8,t[s]&=255;for(s=0;s<32;s++)t[s]-=r*se[s];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function ae(e,t,n,s){var i,o,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),d=[r(),r(),r(),r()];Q(a,s,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=n+64;for(i=0;i<n;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(Q(l,e.subarray(32),n+32),oe(l),re(d,l),ee(e,d),i=32;i<64;i++)e[i]=s[i];for(Q(c,e,n+64),oe(c),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=l[i];for(i=0;i<32;i++)for(o=0;o<32;o++)u[i+o]+=c[i]*a[o];return ie(e.subarray(32),u),h}function ce(e,t,n,s){var i,c=new Uint8Array(32),u=new Uint8Array(64),d=[r(),r(),r(),r()],h=[r(),r(),r(),r()];if(n<64)return-1;if(function(e,t){var n=r(),s=r(),i=r(),c=r(),u=r(),d=r(),h=r();return N(e[2],a),L(e[1],t),$(i,e[1]),B(c,i,l),D(i,i,e[2]),U(c,e[2],c),$(u,c),$(d,u),B(h,d,u),B(n,h,i),B(n,n,c),F(n,n),B(n,n,i),B(n,n,c),B(n,n,c),B(e[0],n,c),$(s,e[0]),B(s,s,c),j(s,i)&&B(e[0],e[0],p),$(s,e[0]),B(s,s,c),j(s,i)?-1:(O(e[0])===t[31]>>7&&D(e[0],o,e[0]),B(e[3],e[0],e[1]),0)}(h,s))return-1;for(i=0;i<n;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=s[i];if(Q(u,e,n),oe(u),te(d,h,u),re(h,t.subarray(32)),Z(d,h),ee(c,d),n-=64,y(t,0,c,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=t[i+64];return n}var le=16,ue=64,de=32,he=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function fe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}t.lowlevel={crypto_core_hsalsa20:k,crypto_stream_xor:S,crypto_stream:_,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:C,crypto_onetimeauth:A,crypto_onetimeauth_verify:E,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:M,crypto_secretbox_open:P,crypto_scalarmult:K,crypto_scalarmult_base:z,crypto_box_beforenm:H,crypto_box_afternm:V,crypto_box:function(e,t,r,n,s,i){var o=new Uint8Array(32);return H(o,s,i),V(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,s,i){var o=new Uint8Array(32);return H(o,s,i),W(e,t,r,n,o)},crypto_box_keypair:G,crypto_hash:Q,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:r,D:l,L:se,pack25519:I,unpack25519:L,M:B,A:U,S:$,Z:D,pow2523:F,add:Z,set25519:N,modL:ie,scalarmult:te,scalarbase:re},t.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},t.secretbox=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(32+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return M(s,n,n.length,t,r),s.subarray(le)},t.secretbox.open=function(e,t,r){fe(e,t,r),pe(r,t);for(var n=new Uint8Array(le+e.length),s=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+le]=e[i];return n.length<32||0!==P(s,n,n.length,t,r)?null:s.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=le,t.scalarMult=function(e,t){if(fe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return K(r,e,t),r},t.scalarMult.base=function(e){if(fe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return z(t,e),t},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox(e,r,i)},t.box.before=function(e,t){fe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return H(r,e,t),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return G(e,t),{publicKey:e,secretKey:t}},t.box.keyPair.fromSecretKey=function(e){if(fe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return z(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(e,t){if(fe(e,t),t.length!==he)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return ae(r,e,e.length,t),r},t.sign.open=function(e,t){if(fe(e,t),t.length!==de)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var s=new Uint8Array(n),i=0;i<s.length;i++)s[i]=r[i];return s},t.sign.detached=function(e,r){for(var n=t.sign(e,r),s=new Uint8Array(ue),i=0;i<s.length;i++)s[i]=n[i];return s},t.sign.detached.verify=function(e,t,r){if(fe(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==de)throw new Error("bad public key size");var n,s=new Uint8Array(ue+e.length),i=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)s[n]=t[n];for(n=0;n<e.length;n++)s[n+ue]=e[n];return ce(i,s,s.length,r)>=0},t.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(he);return ne(e,t),{publicKey:e,secretKey:t}},t.sign.keyPair.fromSecretKey=function(e){if(fe(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(de),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},t.sign.keyPair.fromSeed=function(e){if(fe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),r=new Uint8Array(he),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},t.sign.publicKeyLength=de,t.sign.secretKeyLength=he,t.sign.seedLength=32,t.sign.signatureLength=ue,t.hash=function(e){fe(e);var t=new Uint8Array(64);return Q(t,e,e.length),t},t.hash.hashLength=64,t.verify=function(e,t){return fe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},t.setPRNG=function(e){n=e},function(){var r="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(r&&r.getRandomValues){t.setPRNG((function(e,t){var n,s=new Uint8Array(t);for(n=0;n<t;n+=65536)r.getRandomValues(s.subarray(n,n+Math.min(t-n,65536)));for(n=0;n<t;n++)e[n]=s[n];ge(s)}))}else void 0!==e&&(r=e("crypto"))&&r.randomBytes&&t.setPRNG((function(e,t){var n,s=r.randomBytes(t);for(n=0;n<t;n++)e[n]=s[n];ge(s)}))}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})}}},{package:"eth-sig-util>tweetnacl",file:"node_modules/tweetnacl/nacl-fast.js"}],[3890,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[3891,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[3892,{multibase:3400},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e):n(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[3893,{multibase:3400},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{encoding:n}=e("multibase"),s=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?s.decode(e):"ascii"===t?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):n(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[39,{"../../../shared/constants/network":3991,"../constants/contracts":5,"./util":92,"@ethersproject/contracts":445,"@ethersproject/providers":477,"@metamask/eth-query":1200,"@metamask/obs-store":1486,loglevel:3356,pify:3466,"single-call-balance-checker-abi":3831},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(e("@metamask/eth-query")),s=e("@metamask/obs-store"),i=p(e("loglevel")),o=p(e("pify")),a=e("@ethersproject/providers"),c=e("@ethersproject/contracts"),l=p(e("single-call-balance-checker-abi")),u=e("../../../shared/constants/network"),d=e("../constants/contracts"),h=e("./util");function p(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(e={}){const t={accounts:{},currentBlockGasLimit:""};this.store=new s.ObservableStore({...t,...e.initState}),this.resetState=()=>{this.store.updateState(t)},this._provider=e.provider,this._query=(0,o.default)(new n.default(this._provider)),this._blockTracker=e.blockTracker,this._currentBlockNumber=this._blockTracker.getCurrentBlock(),this._blockTracker.once("latest",(e=>{this._currentBlockNumber=e})),this._updateForBlock=this._updateForBlock.bind(this),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,e.onAccountRemoved((e=>this.removeAccount([e]))),this.onboardingController.store.subscribe((0,h.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this._updateAccounts()}),this.onboardingController.store.getState())),this.preferencesController.store.subscribe((0,h.previousValueComparator)((async(e,t)=>{const{selectedAddress:r}=e,{selectedAddress:n,useMultiAccountBalanceChecker:s}=t;r===n||s||this._updateAccounts()}),this.onboardingController.store.getState())),this.ethersProvider=new a.Web3Provider(this._provider)}start(){this._blockTracker.removeListener("latest",this._updateForBlock),this._blockTracker.addListener("latest",this._updateForBlock),this._updateAccounts()}stop(){this._blockTracker.removeListener("latest",this._updateForBlock)}syncWithAddresses(e){const{accounts:t}=this.store.getState(),r=Object.keys(t),n=[];e.forEach((e=>{r.includes(e)||n.push(e)}));const s=[];r.forEach((t=>{e.includes(t)||s.push(t)})),this.addAccounts(n),this.removeAccount(s)}addAccounts(e){const{accounts:t}=this.store.getState();e.forEach((e=>{t[e]={}})),this.store.updateState({accounts:t}),this._currentBlockNumber&&this._updateAccounts()}removeAccount(e){const{accounts:t}=this.store.getState();e.forEach((e=>{delete t[e]})),this.store.updateState({accounts:t})}clearAccounts(){this.store.updateState({accounts:{}})}async _updateForBlock(e){this._currentBlockNumber=e;const t=await this._query.getBlockByNumber(e,!1);if(!t)return;const r=t.gasLimit;this.store.updateState({currentBlockGasLimit:r});try{await this._updateAccounts()}catch(e){i.default.error(e)}}async _updateAccounts(){const{completedOnboarding:e}=this.onboardingController.store.getState();if(!e)return;const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r=[];if(t){const{accounts:e}=this.store.getState();r=Object.keys(e)}else{r=[this.preferencesController.getSelectedAddress()]}const n=this.getCurrentChainId(),s=this.getNetworkIdentifier();if(s===u.LOCALHOST_RPC_URL||"http://127.0.0.1:8545"===s)await Promise.all(r.map(this._updateAccount.bind(this)));else switch(n){case u.CHAIN_IDS.MAINNET:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS);break;case u.CHAIN_IDS.GOERLI:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_GOERLI);break;case u.CHAIN_IDS.SEPOLIA:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA);break;case u.CHAIN_IDS.BSC:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_BSC);break;case u.CHAIN_IDS.OPTIMISM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM);break;case u.CHAIN_IDS.POLYGON:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_POLYGON);break;case u.CHAIN_IDS.AVALANCHE:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE);break;case u.CHAIN_IDS.FANTOM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_FANTOM);break;case u.CHAIN_IDS.ARBITRUM:await this._updateAccountsViaBalanceChecker(r,d.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM);break;default:await Promise.all(r.map(this._updateAccount.bind(this)))}}async _updateAccount(e){const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();let r="0x0";try{r=await this._query.getBalance(e)}catch(e){var n;if("eth_getBalance"!==(null===(n=e.data)||void 0===n||null===(n=n.request)||void 0===n?void 0:n.method))throw e}const s={address:e,balance:r},{accounts:i}=this.store.getState();if(!i[e])return;let o=i;t||(o={},Object.keys(i).forEach((t=>{e!==t&&(o[t]={address:t,balance:null})}))),o[e]=s,this.store.updateState({accounts:o})}async _updateAccountsViaBalanceChecker(e,t){const{accounts:r}=this.store.getState(),n={};Object.keys(r).forEach((t=>{e.includes(t)||(n[t]={address:t,balance:null})})),this.ethersProvider=new a.Web3Provider(this._provider);const s=await new c.Contract(t,l.default,this.ethersProvider),o=["0x0000000000000000000000000000000000000000"];try{const t=await s.balances(e,o);e.forEach(((e,r)=>{const s=t[r]?t[r].toHexString():"0x0";n[e]={address:e,balance:s}})),this.store.updateState({accounts:n})}catch(t){i.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.all(e.map(this._updateAccount.bind(this)))}}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[3925,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){!function(e){var t,r,n,s=String.fromCharCode;function i(e){for(var t,r,n=[],s=0,i=e.length;s<i;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<i?56320==(64512&(r=e.charCodeAt(s++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--):n.push(t);return n}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function a(e,t){return s(e>>t&63|128)}function c(e){if(0==(4294967168&e))return s(e);var t="";return 0==(4294965248&e)?t=s(e>>6&31|192):0==(4294901760&e)?(o(e),t=s(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=s(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=s(63&e|128)}function l(){if(n>=r)throw Error("Invalid byte index");var e=255&t[n];if(n++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,s;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(e=255&t[n],n++,0==(128&e))return e;if(192==(224&e)){if((s=(31&e)<<6|l())>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&e)){if((s=(15&e)<<12|l()<<6|l())>=2048)return o(s),s;throw Error("Invalid continuation byte")}if(240==(248&e)&&(s=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&s<=1114111)return s;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=i(e),r=t.length,n=-1,s="";++n<r;)s+=c(t[n]);return s},e.decode=function(e){t=i(e),r=t.length,n=0;for(var o,a=[];!1!==(o=u());)a.push(o);return function(e){for(var t,r=e.length,n=-1,i="";++n<r;)(t=e[n])>65535&&(i+=s((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=s(t);return i}(a)}}(void 0===r?this.utf8={}:r)}}},{package:"@metamask/keyring-controller>ethereumjs-wallet>utf8",file:"node_modules/utf8/utf8.js"}],[3949,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var i,o=0,a=0,c=r=r||0,l=t.length;do{if(c>=l||a>49)throw e.bytes=0,new RangeError("Could not decode varint");i=t[c++],o+=a<28?(i&s)<<a:(i&s)*Math.pow(2,a),a+=7}while(i>=n);return e.bytes=c-r,o};var n=128,s=127}}},{package:"@ensdomains/content-hash>multicodec>varint",file:"node_modules/varint/decode.js"}],[3950,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,o){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];var a=o=o||0;for(;t>=i;)r[o++]=255&t|n,t/=128;for(;t&s;)r[o++]=255&t|n,t>>>=7;return r[o]=0|t,e.bytes=o-a+1,r};var n=128,s=-128,i=Math.pow(2,31)}}},{package:"@ensdomains/content-hash>multicodec>varint",file:"node_modules/varint/encode.js"}],[3951,{"./decode.js":3949,"./encode.js":3950,"./length.js":3952},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"@ensdomains/content-hash>multicodec>varint",file:"node_modules/varint/index.js"}],[3952,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),c=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<n?1:e<s?2:e<i?3:e<o?4:e<a?5:e<c?6:e<l?7:e<u?8:e<d?9:10}}}},{package:"@ensdomains/content-hash>multicodec>varint",file:"node_modules/varint/length.js"}],[3960,{util:3929},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[3979,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=r.AUTO_LOCK_TIMEOUT_ALARM=void 0;r.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM",r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[3989,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LOG_EVENT=void 0;r.LOG_EVENT={VERSION_UPDATE:"Extension version update"}}}},{package:"$root$",file:"shared/constants/logs.ts"}],[3995,{"./time":4e3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;var n=e("./time");r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=10*n.SECOND,r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180,r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$",file:"shared/constants/smartTransactions.js"}],[40,{"../../../shared/modules/string-utils":4029},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../../../shared/modules/string-utils");r.default=class{constructor(e={}){const{preferencesController:t,addressBookController:r,networkController:n,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.addressBookController=r,this.networkController=n,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:r,addressBook:n,network:s}=JSON.parse(e);r&&(r.identities=t.identities,r.lostIdentities=t.lostIdentities,r.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(r)),n&&this.addressBookController.update(n,!0),s&&this.networkController.loadBackup(s),(r||n||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.state.networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),r=new Date,s=e=>(0,n.prependZero)(e,2);return{fileName:`MetaMaskUserData.${r.getFullYear()}_${s(r.getMonth()+1)}_${s(r.getDay())}_${s(r.getHours())}_${s(r.getMinutes())}_${s(r.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[41,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let{name:t}=e;t=t===undefined?"Error":String(t);let r=e.message;r=r===undefined?"":String(r),""===t?e.stack=e.message:""===r?e.stack=e.name:e.stack||(e.stack=`${e.name}: ${e.message}`);return e}}}},{package:"$root$",file:"app/scripts/lib/cleanErrorStack.js"}],[42,{loglevel:3356},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){const e=[];return function(t,r,n,i){return e.indexOf(t.id)>=0?(s.default.info(`RPC request with id ${t.id} already seen.`),i()):(e.push(t.id),n())}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterMiddleware.js"}],[43,{loglevel:3356},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&s.default.debug("Error in RPC response:\n",r),t.isMetamaskInternal||(s.default.info(`RPC (${e.origin}): ${t.method} -> ${r.error?"error":"success"}`),n())}))}};var n,s=(n=e("loglevel"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[44,{"../../../shared/modules/mv3.utils":4022,"eth-rpc-errors":2722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../shared/modules/mv3.utils");r.default=(e,t,r,i)=>async o=>{if(t._writableState.ended)return;if(!e[o.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${o.method} not found`}),id:o.id});let a,c;try{a=await e[o.method](...o.params)}catch(e){c=e}finally{s.isManifestV3&&r&&"getState"!==o.method&&i.set(r.getState())}t._writableState.ended?c&&console.error(c):c?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(c,{shouldIncludeStack:!0}),id:o.id}):t.write({jsonrpc:"2.0",result:a,id:o.id})}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[45,{"./middleware/pending":62,"@metamask/eth-json-rpc-middleware":1101,"json-rpc-engine":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({version:e,getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:l,processPersonalMessage:u,processDecryptMessage:d,processEncryptionPublicKey:h,getPendingNonce:p,getPendingTransactionByHash:f}){return(0,n.mergeMiddleware)([(0,n.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,s.createWalletMiddleware)({getAccounts:t,processTransaction:r,processEthSignMessage:o,processTypedMessage:a,processTypedMessageV3:c,processTypedMessageV4:l,processPersonalMessage:u,processDecryptMessage:d,processEncryptionPublicKey:h}),(0,i.createPendingNonceMiddleware)({getPendingNonce:p}),(0,i.createPendingTxMiddleware)({getPendingTransactionByHash:f})])};var n=e("json-rpc-engine"),s=e("@metamask/eth-json-rpc-middleware"),i=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[46,{loglevel:3356,"webextension-polyfill":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,i,o,a){try{if("wallet_registerOnboarding"!==r.method)return void o();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):n.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),i.result=!0,a()}catch(e){a(e)}}};var n=i(e("loglevel")),s=i(e("webextension-polyfill"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[47,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[48,{"../../../shared/constants/app":3981,"../../../shared/constants/metametrics":3990,"../../../shared/constants/security-provider":3994,"../../../shared/constants/time":4e3,"../../../shared/constants/transaction":4002,"./snap-keyring/metrics":87,"@metamask/controller-utils":1066,"eth-rpc-errors":2722,"ethereumjs-util":2767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({trackEvent:e,getMetricsState:t,rateLimitSeconds:r=300,securityProviderRequest:m,getSelectedAddress:y,getAccountType:b,getDeviceModel:k,snapAndHardwareMessenger:w}){return async function(v,C,_){const{origin:S,method:T}=v,A=p[T]??h.RATE_LIMITED,E=A===h.RATE_LIMITED&&void 0!==g[T],M=!0===t().participateInMetaMetrics,P=f[T],N={},x=S!==o.ORIGIN_METAMASK&&A!==h.BLOCKED&&!1===E&&!0===M;if(x){const t=P?P.REQUESTED:a.MetaMetricsEventName.ProviderMethodCalled;if(t===a.MetaMetricsEventName.SignatureRequested){var R,I,j,O,L;let e,t;var U,D,B,$;if(N.signature_type=T,(0,i.isValidAddress)(null==v||null===(R=v.params)||void 0===R?void 0:R[1]))e=null==v||null===(U=v.params)||void 0===U?void 0:U[0],t=null==v||null===(D=v.params)||void 0===D?void 0:D[1];else e=null==v||null===(B=v.params)||void 0===B?void 0:B[1],t=null==v||null===($=v.params)||void 0===$?void 0:$[0];const r=null==v||null===(I=v.params)||void 0===I?void 0:I[2];null!==(j=v.securityAlertResponse)&&void 0!==j&&j.providerRequestsCount&&Object.keys(v.securityAlertResponse.providerRequestsCount).forEach((e=>{N[`ppom_${e}_count`]=v.securityAlertResponse.providerRequestsCount[e]})),N.security_alert_response=(null===(O=v.securityAlertResponse)||void 0===O?void 0:O.result_type)??u.BlockaidResultType.NotApplicable,N.security_alert_reason=(null===(L=v.securityAlertResponse)||void 0===L?void 0:L.reason)??u.BlockaidReason.notApplicable;const s=await(0,d.getSnapAndHardwareInfoForMetrics)(y,b,k,w);Object.assign(N,s);const c={msgParams:{...r,from:t,data:e,origin:S},status:l.TransactionStatus.unapproved,type:v.method};try{const t=await m(c,v.method);if(1===(null==t?void 0:t.flagAsDangerous)?N.ui_customizations=[a.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:2===(null==t?void 0:t.flagAsDangerous)&&(N.ui_customizations=[a.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown]),T===o.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,n.detectSIWE)({data:e});t&&(N.ui_customizations=(N.ui_customizations||[]).concat(a.MetaMetricsEventUiCustomization.Siwe))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Error calling securityProviderRequest - ${e}`)}}else N.method=T;e({event:t,category:a.MetaMetricsEventCategory.InpageProvider,referrer:{url:S},properties:N}),g[T]=setTimeout((()=>{delete g[T]}),c.SECOND*r)}_((async t=>{var r,n,i,c;if(!1===x||void 0===P)return t();let l;return T===o.MESSAGE_TYPE.ETH_SIGN&&(null===(r=C.error)||void 0===r?void 0:r.code)===s.errorCodes.rpc.methodNotFound?(l=P.FAILED,N.error=C.error):(null===(n=C.error)||void 0===n?void 0:n.code)===s.errorCodes.provider.userRejectedRequest?l=P.REJECTED:(null===(i=C.error)||void 0===i?void 0:i.code)===s.errorCodes.rpc.internal&&"Request rejected by user or snap."===(null===(c=C.error)||void 0===c?void 0:c.message)?(l=P.REJECTED,N.status=C.error.message):l=P.APPROVED,e({event:l,category:a.MetaMetricsEventCategory.InpageProvider,referrer:{url:S},properties:N}),t()}))}};var n=e("@metamask/controller-utils"),s=e("eth-rpc-errors"),i=e("ethereumjs-util"),o=e("../../../shared/constants/app"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/time"),l=e("../../../shared/constants/transaction"),u=e("../../../shared/constants/security-provider"),d=e("./snap-keyring/metrics");const h={RATE_LIMITED:"rate_limited",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited"},p={[o.MESSAGE_TYPE.ETH_SIGN]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.PERSONAL_SIGN]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_DECRYPT]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:h.NON_RATE_LIMITED,[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:h.RATE_LIMITED,[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:h.RATE_LIMITED,[o.MESSAGE_TYPE.SEND_METADATA]:h.BLOCKED,[o.MESSAGE_TYPE.GET_PROVIDER_STATE]:h.BLOCKED},f={[o.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,FAILED:a.MetaMetricsEventName.SignatureFailed,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:a.MetaMetricsEventName.SignatureApproved,REJECTED:a.MetaMetricsEventName.SignatureRejected,REQUESTED:a.MetaMetricsEventName.SignatureRequested},[o.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:a.MetaMetricsEventName.DecryptionApproved,REJECTED:a.MetaMetricsEventName.DecryptionRejected,REQUESTED:a.MetaMetricsEventName.DecryptionRequested},[o.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:a.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:a.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:a.MetaMetricsEventName.EncryptionPublicKeyRequested},[o.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:a.MetaMetricsEventName.PermissionsApproved,REJECTED:a.MetaMetricsEventName.PermissionsRejected,REQUESTED:a.MetaMetricsEventName.PermissionsRequested},[o.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:a.MetaMetricsEventName.PermissionsApproved,REJECTED:a.MetaMetricsEventName.PermissionsRejected,REQUESTED:a.MetaMetricsEventName.PermissionsRequested}},g={}}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[49,{"promise-to-callback":3473,"readable-stream":3728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return new o(e,t)};var n,s=e("readable-stream"),i=(n=e("promise-to-callback"))&&n.__esModule?n:{default:n};class o extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,r){(0,i.default)(this._asyncWriteFn(e,t))(r)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[5,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA=r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON=r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM=r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI=r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM=r.SINGLE_CALL_BALANCES_ADDRESS_BSC=r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE=r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM=r.SINGLE_CALL_BALANCES_ADDRESS=void 0;r.SINGLE_CALL_BALANCES_ADDRESS="0xb1f8e55c7f64d203c1400b9d8555d050f94adf39",r.SINGLE_CALL_BALANCES_ADDRESS_GOERLI="0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b",r.SINGLE_CALL_BALANCES_ADDRESS_SEPOLIA="",r.SINGLE_CALL_BALANCES_ADDRESS_BSC="0x2352c63A83f9Fd126af8676146721Fa00924d7e4",r.SINGLE_CALL_BALANCES_ADDRESS_OPTIMISM="0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC",r.SINGLE_CALL_BALANCES_ADDRESS_POLYGON="0x2352c63A83f9Fd126af8676146721Fa00924d7e4",r.SINGLE_CALL_BALANCES_ADDRESS_AVALANCHE="0xD023D153a0DFa485130ECFdE2FAA7e612EF94818",r.SINGLE_CALL_BALANCES_ADDRESS_FANTOM="0x07f697424ABe762bB808c109860c04eA488ff92B",r.SINGLE_CALL_BALANCES_ADDRESS_ARBITRUM="0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c"}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[50,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.tabId=e.tabId,n()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[51,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[52,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[522,{"@ethereumjs/tx":388,"@ethereumjs/util":400,"@keystonehq/bc-ur-registry-eth":528,buffer:2466,hdkey:3110,rlp:525,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("hdkey")),i=e("@ethereumjs/util"),o=n(e("rlp")),a=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),l=e("uuid");const u="QR Hardware Wallet Device",d="m",h="0/*";var p,f;!function(e){e.hd="hd",e.pubkey="pubkey"}(p||(p={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(f||(f={}));class g{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=u,this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i){if(l.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),i=(null==(r=e.getChildren())?void 0:r.getPath())||h,o=e.getName();if(e.getNote()===f.standard?this.keyringAccount=f.standard:e.getNote()===f.ledger_legacy&&(this.keyringAccount=f.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const a=e.getBip32Key();this.xfp=s,this.xpub=a,this.hdPath=n,this.childrenPath=i,o!==undefined&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+i.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===f.ledger_live&&(this.keyringAccount=f.ledger_live),this.paths[i.toChecksumAddress(n)]===undefined&&(s=!0),this.paths[i.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push({address:t,balance:null,index:e}),this.indexes[i.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===p.hd){this.checkKeyring(),this.hdk||(this.hdk=s.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),o="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(o)}{const e=Object.keys(this.paths)[t];if(e)return i.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=p.hd,this.keyringAccount=f.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=h,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=p.hd,this.__readCryptoHDKey(e)):(this.keyringMode=p.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||p.hd,this.keyringAccount=e.keyringAccount||f.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||h)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(d,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===p.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?c.DataType.transaction:c.DataType.typedTransaction;let s;s=0===r.type?t.from(o.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),u=Number(r.common.chainId()),d=l.v4(),h=c.EthSignRequest.constructETHRequest(s,n,i,this.xfp,d,u),{r:p,s:f,v:g}=await this.requestSignature(d,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return a.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=i.stripHexPrefix(r),s=await this._pathFromAddress(e),o=l.v4(),a=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,s,this.xfp,o,undefined,e),{r:u,s:d,v:h}=await this.requestSignature(o,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([u,d,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=l.v4(),i=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,s,undefined,e),{r:o,s:a,v:u}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,u]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===p.hd){const t=i.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(d,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=i.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}g.type=u,r.BaseKeyring=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[523,{"@ethereumjs/tx":388,"@ethereumjs/util":400,"@keystonehq/bc-ur-registry-eth":528,buffer:2466,hdkey:3110,rlp:525,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(r,"__esModule",{value:!0});var s,i,o=n(e("hdkey")),a=e("@ethereumjs/util"),c=n(e("rlp")),l=e("@ethereumjs/tx"),u=e("@keystonehq/bc-ur-registry-eth"),d=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(s||(s={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(i||(i={}));class h{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const s=await this.getInteraction().requestSignature(t,r,n),i=s.getRequestId(),o=s.getSignature();if(i&&d.stringify(i)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:o.slice(0,32),s:o.slice(32,64),v:o.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),s=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),o=(null==(r=e.getChildren())?void 0:r.getPath())||"0/*",a=e.getName();if(e.getNote()===i.standard?this.keyringAccount=i.standard:e.getNote()===i.ledger_legacy&&(this.keyringAccount=i.ledger_legacy),!s)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=s,this.xpub=c,this.hdPath=n,this.childrenPath=o,void 0!==a&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let s=!1;const o=e.getOutputDescriptors();if(!o||0===o.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(o.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(r=e.getOutputDescriptors())||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+a.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===i.ledger_live&&(this.keyringAccount=i.ledger_live),void 0===this.paths[a.toChecksumAddress(n)]&&(s=!0),this.paths[a.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),s},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[a.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===s.hd){this.checkKeyring(),this.hdk||(this.hdk=o.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),s="0x"+a.publicToAddress(n.publicKey,!0).toString("hex");return a.toChecksumAddress(s)}{const e=Object.keys(this.paths)[t];if(e)return a.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=s.hd,this.keyringAccount=i.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===u.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=s.hd,this.__readCryptoHDKey(e)):(this.keyringMode=s.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||s.hd,this.keyringAccount=e.keyringAccount||i.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===s.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?u.DataType.transaction:u.DataType.typedTransaction;let s;s=0===r.type?t.from(c.encode(r.getMessageToSign(!1))):r.getMessageToSign(!1);const i=await this._pathFromAddress(e),o=Number(r.common.chainId()),a=d.v4(),h=u.EthSignRequest.constructETHRequest(s,n,i,this.xfp,a,o),{r:p,s:f,v:g}=await this.requestSignature(a,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return l.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:p,s:f,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=a.stripHexPrefix(r),s=await this._pathFromAddress(e),i=d.v4(),o=u.EthSignRequest.constructETHRequest(t.from(n,"hex"),u.DataType.personalMessage,s,this.xfp,i,void 0,e),{r:c,s:l,v:h}=await this.requestSignature(i,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([c,l,h]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),s=d.v4(),i=u.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),u.DataType.typedData,n,this.xfp,s,void 0,e),{r:o,s:a,v:c}=await this.requestSignature(s,i,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([o,a,c]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===s.hd){const t=a.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=a.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}h.type="QR Hardware Wallet Device",r.BaseKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[524,{"./base-eth-keyring.cjs.development.js":522,"./base-eth-keyring.cjs.production.min.js":523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[525,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(n(e[r]));const r=p(...t);return p(o(r.length,192),r)}const t=y(e);return 1===t.length&&t[0]<128?t:p(o(t.length,128),t)}function s(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(u(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=g(e),n=g(t+55+r.length/2);return Uint8Array.from(h(n+r))}function a(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const r=c(y(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function c(e){let t,r,n,o,a;const l=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,n=128===u?Uint8Array.from([]):s(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(s(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=s(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(u<=247){for(t=u-191,o=s(e,1,t);o.length;)a=c(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}{if(r=u-246,t=i(s(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=s(e,r,n);o.length;)a=c(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(n)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.decode=r.encode=void 0,r.encode=n,r.decode=a;const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=d(e.slice(n,n+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}function f(e){return(new TextEncoder).encode(e)}function g(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function m(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return m(e)?h((t="string"!=typeof(r=e)?r:m(r)?r.slice(2):r).length%2?`0${t}`:t):f(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?h(g(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}r.utils={bytesToHex:u,concatBytes:p,hexToBytes:h,utf8ToBytes:f};const b={encode:n,decode:a};r.default=b}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>rlp",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/rlp/dist/index.js"}],[53,{"./contracts/registry":51,"./contracts/resolver":52,"@ensdomains/content-hash":326,"@metamask/ethjs-query":1278,"eth-ens-namehash":2678,"ethjs-contract":2806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=async function({provider:e,name:t}){const r=new s.default(e),l=n.default.hash(t),d=new i.default(r),h=Number.parseInt(await r.net_version(),10),p=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(h);if(!p)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${h}"`);const f=d(a.default).at(p),g=(await f.resolver(l))[0];if(u(g))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const m=d(c.default).at(g),y=await m.supportsInterface("0xbc1c58d1"),b=await m.supportsInterface("0xd8389dc5");if(y[0]){const e=(await m.contenthash(l))[0];let t=o.default.decode(e);const r=o.default.getCodec(e);return"ipfs-ns"!==r&&"ipns-ns"!==r||(t=o.default.helpers.cidV0ToV1Base32(t)),{type:r,hash:t}}if(b[0]){const e=(await m.content(l))[0];if(u(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var n=l(e("eth-ens-namehash")),s=l(e("@metamask/ethjs-query")),i=l(e("ethjs-contract")),o=l(e("@ensdomains/content-hash")),a=l(e("./contracts/registry")),c=l(e("./contracts/resolver"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[54,{"../../../../shared/modules/fetch-with-timeout":4018,"./resolver":53,"base32-encode":2354,"base64-js":2355,"webextension-polyfill":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:r,getUseAddressBarEnsResolution:o}){const c=u.map((e=>`*://*.${e}/*`));return i.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){i.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:h}=c;if(-1===d||"0x1"!==t())return;const{hostname:p,pathname:f,search:g,hash:m}=new URL(h),y=p.split("."),b=y[y.length-1];u.includes(b)&&async function({tabId:t,name:c,pathname:u,search:d,fragment:h}){const p=r(),f=o(),g=`https://app.ens.domains/name/${c}`;f&&p&&i.default.tabs.update(t,{url:"loading.html"});let m=g;0;try{const{type:t,hash:r}=await(0,a.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===p)return void(m=null);const e=`https://${r}.${t.slice(0,4)}.${p}${u}${d||""}${h||""}`;try{200===(await l(e,{method:"HEAD"})).status&&(m=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)m=`https://swarm-gateways.net/bzz:/${r}${u}${d||""}${h||""}`;else if("onion"===t||"onion3"===t)m=`http://${r}.onion${u}${d||""}${h||""}`;else if("zeronet"===t)m=`http://127.0.0.1:43110/${r}${u}${d||""}${h||""}`;else if("skynet-ns"===t){const e=r.padEnd(r.length+4-r.length%4,"="),t=s.default.toByteArray(e),i={padding:!1};m=`https://${(0,n.default)(t,"RFC4648-HEX",i).toLowerCase()}.siasky.net${u}${d||""}${h||""}`}}catch(e){console.warn(e)}finally{m&&(f||!f&&m!==g)&&i.default.tabs.update(t,{url:m})}}({tabId:d,name:p,pathname:f,search:g,fragment:m})}};var n=c(e("base32-encode")),s=c(e("base64-js")),i=c(e("webextension-polyfill")),o=c(e("../../../../shared/modules/fetch-with-timeout")),a=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const l=(0,o.default)(),u=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[552,{"./metamask-airgapped-keyring.cjs.development.js":553,"./metamask-airgapped-keyring.cjs.production.min.js":554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[553,{"@ethereumjs/tx":388,"@keystonehq/base-eth-keyring":524,"@keystonehq/bc-ur-registry-eth":528,"@metamask/obs-store":559,buffer:2466,events:2819,rlp:3762,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),l=e("@ethereumjs/tx"),u=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class d extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),l=e.getRequestId(),u=c.stringify(l),d={requestId:u,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:d}}),this.once(`${u}-signed`,(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(`${u}-canceled`,(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class h extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?u.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),d=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:h,s:p,v:f}=await this.requestSignature(o,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();g.v=f,g.s=p,g.r=h,g.type=t.type;return l.TransactionFactory.fromTxData(g,{common:t.common})}}h.type=s.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[554,{"@ethereumjs/tx":388,"@keystonehq/base-eth-keyring":524,"@keystonehq/bc-ur-registry-eth":528,"@metamask/obs-store":559,buffer:2466,events:2819,rlp:3762,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,s=e("@keystonehq/base-eth-keyring"),i=e("events"),o=e("@metamask/obs-store"),a=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),l=e("@ethereumjs/tx"),u=(n=e("rlp"))&&"object"==typeof n&&"default"in n?n.default:n;class d extends i.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,r)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(r=>{const n=a.CryptoHDKey.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_success-account",(r=>{const n=a.CryptoAccount.fromCBOR(t.from(r,"hex"));this.resetState(),e(n)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),r(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,r,n)=>new Promise(((s,i)=>{const o=e.toUR(),l=e.getRequestId(),u=c.stringify(l),d={requestId:u,payload:{type:o.type,cbor:o.cbor.toString("hex")},title:r,description:n};this.memStore.updateState({sign:{request:d}}),this.once(u+"-signed",(e=>{const r=a.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),s(r)})),this.once(u+"-canceled",(()=>{this.resetState(),i(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new o.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class h extends s.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const r=0===t.type?a.DataType.transaction:a.DataType.typedTransaction;let n;n=0===t.type?u.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const s=await this._pathFromAddress(e),i=t.common.chainId(),o=c.v4(),d=a.EthSignRequest.constructETHRequest(n,r,s,this.xfp,o,i,e),{r:h,s:p,v:f}=await this.requestSignature(o,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),g=t.toJSON();return g.v=f,g.s=p,g.r=h,g.type=t.type,l.TransactionFactory.fromTxData(g,{common:t.common})}}h.type=s.BaseKeyring.type,r.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[555,{"./ObservableStore":557},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[556,{"./ObservableStore":557},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class s extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[557,{"@metamask/safe-event-emitter":1585},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const s=n(e("@metamask/safe-event-emitter"));class i extends s.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[558,{stream:3833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class s extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new s(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[559,{"./ComposedStore":555,"./MergedStore":556,"./ObservableStore":557,"./asStream":558,"./transform":560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),s(e("./asStream"),r),s(e("./ComposedStore"),r),s(e("./MergedStore"),r),s(e("./ObservableStore"),r),s(e("./transform"),r)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[560,{through2:561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[561,{_process:3472,"readable-stream":3728,util:3929,xtend:3969},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,s=e("util").inherits,i=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}s(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=i(e,t),o.call(this,this.options)}return s(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(i({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[57,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return s((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function s(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?s(n,t):t(n)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[58,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hardwareKeyringBuilderFactory=function(e,t){const r=()=>new e({bridge:new t});return r.type=e.type,r}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[59,{"@metamask/keyring-api":1364,"@metamask/permission-controller":1494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isProtocolAllowed=c,r.keyringSnapPermissionsBuilder=function(e){return t=>{if("metamask"===t)return i;const r=e.getSubjectMetadata(t);return(null==r?void 0:r.subjectType)===n.SubjectType.Website&&c(t)?o:[]}};var n=e("@metamask/permission-controller"),s=e("@metamask/keyring-api");const i=[s.KeyringRpcMethod.ListAccounts,s.KeyringRpcMethod.GetAccount,s.KeyringRpcMethod.FilterAccountChains,s.KeyringRpcMethod.DeleteAccount,s.KeyringRpcMethod.ListRequests,s.KeyringRpcMethod.GetRequest,s.KeyringRpcMethod.SubmitRequest,s.KeyringRpcMethod.RejectRequest],o=[s.KeyringRpcMethod.ListAccounts,s.KeyringRpcMethod.GetAccount,s.KeyringRpcMethod.CreateAccount,s.KeyringRpcMethod.FilterAccountChains,s.KeyringRpcMethod.UpdateAccount,s.KeyringRpcMethod.DeleteAccount,s.KeyringRpcMethod.ExportAccount,s.KeyringRpcMethod.ListRequests,s.KeyringRpcMethod.GetRequest,s.KeyringRpcMethod.ApproveRequest,s.KeyringRpcMethod.RejectRequest],a=["https:"];function c(e){try{const t=new URL(e);return a.includes(t.protocol)}catch(e){return!1}}}}},{package:"$root$",file:"app/scripts/lib/keyring-snaps-permissions.ts"}],[6,{"../../../shared/constants/alerts":3980,"@metamask/obs-store":1486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");const i={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};r.default=class{constructor(e={}){const{initState:t={},preferencesStore:r}=e,s={...i,alertEnabledness:{...i.alertEnabledness,...t.alertEnabledness}};this.store=new n.ObservableStore(s),this.selectedAddress=r.getState().selectedAddress,r.subscribe((({selectedAddress:e})=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e&&(this.selectedAddress=e,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({alertEnabledness:r})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:r}=this.store.getState();r={...r},r[e]=t,this.store.updateState({web3ShimUsageOrigins:r})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[62,{"../util":92,"json-rpc-engine":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:s,params:i}=t;if("eth_getTransactionCount"!==s)return void n();const[o,a]=i;"pending"===a?r.result=await e(o):n()}))},r.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const{method:i,params:o}=t;if("eth_getTransactionByHash"!==i)return void n();const[a]=o,c=e(a);c?r.result=(0,s.formatTxMetaForRpcResult)(c):n()}))};var n=e("json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[63,{events:2819,loglevel:3356},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("events")),s=i(e("loglevel"));function i(e){return e&&e.__esModule?e:{default:e}}class o extends n.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{s.default.info(`Running migration ${r.version}...`);const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,s.default.info(`Migration ${r.version} complete`)}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=o}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[65,{"../platforms/extension":204,"@metamask/safe-event-emitter":1585},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=i(e("@metamask/safe-event-emitter")),s=i(e("../platforms/extension"));function i(e){return e&&e.__esModule?e:{default:e}}const o=r.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class a extends n.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const r=await this._getPopup(t);if(r)await this.platform.focusWindow(r.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=Math.max(r.left+(r.width-360),0)}catch(r){const{screenX:n,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(n+(i-360),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._setCurrentPopupId(r.id),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=a}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[66,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.IndexedDBPPOMStorage=void 0;const i=async(e,t,r)=>{const n=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==r)throw new Error(`Checksum mismatch for key ${e}`)};var o=new WeakSet;function a(e){return new Promise(((t,r)=>{const n=indexedDB.open(this.storeName,this.dbVersion);n.onerror=e=>{var t;r(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},n.onsuccess=r=>{const n=r.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(n)}}))}r.IndexedDBPPOMStorage=class{constructor(e,t){n(this,o),s(this,"storeName",void 0),s(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,r="readonly"){return new Promise(((n,s)=>{(function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r})(this,o,a).call(this,r).then((r=>{const i=r[e](t);i.onsuccess=async e=>{n(e)},i.onerror=t=>{var r;s(new Error(`Error in indexDB operation ${e}: ${null===(r=t.target)||void 0===r?void 0:r.error}`))}})).catch((e=>{s(e)}))}))}async read(e,t){var r;const n=null===(r=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.data;return await i(e,n,t),n}async write(e,t,r){await i(e,t,r),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[67,{"../../../../shared/constants/network":3991,"../../../../shared/constants/security-provider":3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPPOMMiddleware=function(e,t,r){return async(a,c,l)=>{try{var u;const n=null===(u=t.store.getState())||void 0===u?void 0:u.securityAlertsEnabled,{chainId:i}=r.state.providerConfig;n&&o.includes(a.method)&&i===s.CHAIN_IDS.MAINNET&&(a.securityAlertResponse=await e.usePPOM((async e=>e.validateJsonRpc(a))))}catch(e){null==i||i.captureException(e),console.error("Error validating JSON RPC using PPOM: ",e),a.securityAlertResponse={result_type:n.BlockaidResultType.Failed,reason:n.BlockaidReason.failed,description:"Validating the confirmation failed by throwing error."}}finally{l()}}};var n=e("../../../../shared/constants/security-provider"),s=e("../../../../shared/constants/network");const{sentry:i}=global,o=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign"])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[68,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PPOM=void 0,r.initSync=function(e){if(n!==undefined)return n;const t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const r=new WebAssembly.Instance(e,t);return E(r,e)},r.main=function(){n.main()};const s=new Array(128).fill(undefined);function i(e){return s[e]}s.push(undefined,null,!0,!1);let o=s.length;function a(e){const t=i(e);return function(e){e<132||(s[e]=o,o=e)}(e),t}let c=0,l=null;function u(){return null!==l&&0!==l.byteLength||(l=new Uint8Array(n.memory.buffer)),l}const d="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},h="function"==typeof d.encodeInto?function(e,t){return d.encodeInto(e,t)}:function(e,t){const r=d.encode(e);return t.set(r),{read:e.length,written:r.length}};function p(e,t,r){if(r===undefined){const r=d.encode(e),n=t(r.length,1)>>>0;return u().subarray(n,n+r.length).set(r),c=r.length,n}let n=e.length,s=t(n,1)>>>0;const i=u();let o=0;for(;o<n;o++){const t=e.charCodeAt(o);if(t>127)break;i[s+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),s=r(s,n,n=o+3*e.length,1)>>>0;const t=u().subarray(s+o,s+n);o+=h(e,t).written}return c=o,s}let f=null;function g(){return null!==f&&0!==f.byteLength||(f=new Int32Array(n.memory.buffer)),f}const m="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};function y(e,t){return e>>>=0,m.decode(u().subarray(e,e+t))}function b(e){o===s.length&&s.push(s.length+1);const t=o;return o=s[t],s[t]=e,t}function k(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=k(e[0]));for(let n=1;n<t;n++)r+=", "+k(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function w(e,t,r){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke(e,t,b(r))}function v(e,t){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}"undefined"!=typeof TextDecoder&&m.decode();let C=null;function _(e,t){const r=t(4*e.length,4)>>>0,s=(null!==C&&0!==C.byteLength||(C=new Uint32Array(n.memory.buffer)),C);for(let t=0;t<e.length;t++)s[r/4+t]=b(e[t]);return c=e.length,r}function S(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(b(e))}}class T{static __wrap(e){e>>>=0;const t=Object.create(T.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();n.__wbg_ppom_free(e)}static new(e,t){const r=_(t,n.__wbindgen_malloc),s=c;return a(n.ppom_new(b(e),r,s))}validateJsonRpc(e){return a(n.ppom_validateJsonRpc(this.__wbg_ptr,b(e)))}}function A(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return b(i(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return S((function(e,t,r){return b(i(e).call(i(t),i(r)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return S((function(e,t,r,n){return b(i(e).call(i(t),i(r),i(n)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return b(Array.from(i(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return b(i(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return i(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return i(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return i(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var r={a:e,b:t};const s=new Promise(((e,t)=>{const s=r.a;r.a=0;try{return function(e,t,r,s){n.wasm_bindgen__convert__closures__invoke2_mut(e,t,b(r),b(s))}(s,r.b,e,t)}finally{r.a=s}}));return b(s)}finally{r.a=r.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return b(new Uint8Array(i(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return S((function(e,t){return b(JSON.parse(y(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return b(T.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return b(Promise.resolve(i(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,r){i(e).set(i(t),r>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return S((function(e){return b(JSON.stringify(i(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,r){return b(i(e).then(i(t),i(r)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return b(i(e).then(i(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=a(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,r){const n=function(e,t,r,n){const s={a:e,b:t,cnt:1},i=(...e)=>{s.cnt++;const t=s.a;s.a=0;try{return n(t,s.b,...e)}finally{0==--s.cnt?r(t,s.b):s.a=t}};return i.original=s,i}(e,t,v,w);return b(n)},e.wbg.__wbindgen_debug_string=function(e,t){const r=p(k(i(t)),n.__wbindgen_malloc,n.__wbindgen_realloc),s=c;g()[e/4+1]=s,g()[e/4+0]=r},e.wbg.__wbindgen_error_new=function(e,t){return b(new Error(y(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return i(e)===undefined},e.wbg.__wbindgen_memory=function(){return b(n.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){a(e)},e.wbg.__wbindgen_string_get=function(e,t){const r=i(t),s="string"==typeof r?r:undefined;var o,a=(o=s)===undefined||null===o?0:p(s,n.__wbindgen_malloc,n.__wbindgen_realloc),l=c;g()[e/4+1]=l,g()[e/4+0]=a},e.wbg.__wbindgen_string_new=function(e,t){return b(y(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(y(e,t))},e}function E(e,t){return n=e.exports,M.__wbindgen_wasm_module=t,f=null,C=null,l=null,n.__wbindgen_start(),n}async function M(e){if(n!==undefined)return n;const t=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}(await e,t);return E(r,s)}r.PPOM=T;r.default=M}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[69,{"../../../../shared/constants/network":3991,"./handlers":73,"@metamask/permission-controller":1494,"@metamask/snaps-rpc-methods":1676,"eth-rpc-errors":2722,lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMethodMiddleware=function(e){const t=d.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,r,n,s){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return s(o.ethErrors.rpc.methodNotSupported());const a=u.get(t.method);if(a){const{implementation:o,hookNames:c}=a;try{return await o(t,r,n,s,(0,i.selectHooks)(e,c))}catch(e){return s(e)}}return n()}},r.createSnapMethodMiddleware=function(e,t){return async function(r,n,s,a){const c=h.get(r.method);if(c){if(/^snap_/iu.test(r.method)&&!e)return a(o.ethErrors.rpc.methodNotFound());const{implementation:l,hookNames:u}=c;try{return await l(r,n,s,a,(0,i.selectHooks)(t,u))}catch(e){return a(e)}}return s()}};var n,s=e("@metamask/permission-controller"),i=e("@metamask/snaps-rpc-methods"),o=e("eth-rpc-errors"),a=e("lodash"),c=e("../../../../shared/constants/network");const l=[...((n=e("./handlers"))&&n.__esModule?n:{default:n}).default,...s.permissionRpcMethods.handlers],u=l.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map),d=Array.from(new Set((0,a.flatten)(l.map((({hookNames:e})=>Object.keys(e))))).values());const h=i.permittedMethods.reduce(((e,t)=>{for(const r of t.methodNames)e.set(r,t);return e}),new Map)}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[7,{"@metamask/obs-store":1486,events:2819},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,s=(n=e("events"))&&n.__esModule?n:{default:n},i=e("@metamask/obs-store");function o(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}const l={currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0};var u=new WeakSet,d=new WeakSet;class h extends s.default{constructor({currentAppVersion:e="",currentMigrationVersion:t=0,state:r={}}){super(),o(this,d),o(this,u),a(this,"store",void 0),this.store=new i.ObservableStore({...l,...r}),c(this,u,p).call(this,e),c(this,d,f).call(this,t)}}function p(e){const t=this.store.getState().currentAppVersion;e!==t&&this.store.updateState({currentAppVersion:e,previousAppVersion:t})}function f(e){const t=this.store.getState().currentMigrationVersion;e!==t&&this.store.updateState({previousMigrationVersion:t,currentMigrationVersion:e})}r.default=h}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[70,{"../../../../../shared/constants/app":3981,"../../../../../shared/constants/metametrics":3990,"../../../../../shared/modules/network.utils":4023,"../../util":92,"@metamask/controller-utils":1066,"eth-rpc-errors":2722,lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/controller-utils"),s=e("eth-rpc-errors"),i=e("lodash"),o=e("../../../../../shared/constants/app"),a=e("../../../../../shared/constants/metametrics"),c=e("../../../../../shared/modules/network.utils"),l=e("../../util");const u={methodNames:[o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,r,u,{upsertNetworkConfiguration:d,getCurrentChainId:h,getCurrentRpcUrl:p,findNetworkConfigurationBy:f,setActiveNetwork:g,requestUserApproval:m,startApprovalFlow:y,endApprovalFlow:b,getProviderConfig:k}){var w;if(null===(w=e.params)||void 0===w||!w[0]||"object"!=typeof e.params[0])return u(s.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:v}=e,{chainId:C,chainName:_=null,blockExplorerUrls:S=null,nativeCurrency:T=null,rpcUrls:A}=e.params[0],E=Object.keys((0,i.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(E.length>0)return u(s.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${E}`}));function M(e){const t=(0,l.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)}const P=Array.isArray(A)?A.find((e=>M(e))):null,N=null!==S&&Array.isArray(S)?S.find((e=>M(e))):null;if(!P)return u(s.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${A}`}));if(null!==S&&!N)return u(s.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${S}`}));const x="string"==typeof C&&C.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(x))return u(s.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${C}`}));if(!(0,c.isSafeChainId)(parseInt(x,16)))return u(s.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${x}": numerical value greater than max safe value. Received:\n${C}`}));const R=f({chainId:x});if(R&&R.rpcUrl===P){t.result=null;const e=h(),r=p();if(e===x&&r===P)return u();try{await m({origin:v,type:n.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:R,fromNetworkConfiguration:k()}}),await g(R.id),t.result=null}catch(e){if(e.code!==s.errorCodes.provider.userRejectedRequest)return u(e)}return u()}if("string"!=typeof _||!_)return u(s.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${_}`}));const I=_.length>100?_.substring(0,100):_;if(null!==T){if("object"!=typeof T||Array.isArray(T))return u(s.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${T}`}));if(18!==T.decimals)return u(s.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${T.decimals}`}));if(!T.symbol||"string"!=typeof T.symbol)return u(s.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${T.symbol}`}))}const j=(null==T?void 0:T.symbol)||o.UNKNOWN_TICKER_SYMBOL;if(j!==o.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof j||j.length<2||j.length>6))return u(s.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${j}`}));if(R&&R.chainId===x&&R.ticker!==j)return u(s.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${j}`}));let O;const{id:L}=await y();try{await m({origin:v,type:n.ApprovalType.AddEthereumChain,requestData:{chainId:x,rpcPrefs:{blockExplorerUrl:N},chainName:I,rpcUrl:P,ticker:j}}),O=await d({chainId:x,rpcPrefs:{blockExplorerUrl:N},nickname:I,rpcUrl:P,ticker:j},{source:a.MetaMetricsNetworkEventSource.Dapp,referrer:v}),t.result=null}catch(e){return b({id:L}),u(e)}try{await m({origin:v,type:n.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:{rpcUrl:P,chainId:x,nickname:I,ticker:j,networkConfigurationId:O},fromNetworkConfiguration:k()}})}catch(e){return u(e.code===s.errorCodes.provider.userRejectedRequest?undefined:e)}finally{b({id:L})}try{await g(O)}catch(e){return u(e)}return u()},hookNames:{upsertNetworkConfiguration:!0,getCurrentChainId:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setActiveNetwork:!0,requestUserApproval:!0,startApprovalFlow:!0,endApprovalFlow:!0,getProviderConfig:!0}};r.default=u}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[71,{"../../../../../shared/constants/app":3981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,r,n,{getAccounts:s}){return t.result=await s(),n()},hookNames:{getAccounts:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[72,{"../../../../../shared/constants/app":3981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,r,n,{getProviderState:s}){return t.result={...await s(e.origin)},n()},hookNames:{getProviderState:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[73,{"./add-ethereum-chain":70,"./eth-accounts":71,"./get-provider-state":72,"./log-web3-shim-usage":74,"./request-accounts":75,"./send-metadata":76,"./switch-ethereum-chain":77,"./watch-asset":78},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=d(e("./add-ethereum-chain")),s=d(e("./eth-accounts")),i=d(e("./get-provider-state")),o=d(e("./log-web3-shim-usage")),a=d(e("./request-accounts")),c=d(e("./send-metadata")),l=d(e("./switch-ethereum-chain")),u=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}const h=[n.default,s.default,i.default,o.default,a.default,c.default,l.default,u.default];r.default=h}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[74,{"../../../../../shared/constants/app":3981},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const n={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,r,n,{getWeb3ShimUsageState:s,setWeb3ShimUsageRecorded:i}){const{origin:o}=e;s(o)===undefined&&i(o);return t.result=!0,n()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};r.default=n}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[75,{"../../../../../shared/constants/app":3981,"eth-rpc-errors":2722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");const i={methodNames:[s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,r,i,{origin:a,getAccounts:c,getUnlockPromise:l,hasPermission:u,requestAccountsPermission:d}){if(o.has(a))return t.error=n.ethErrors.rpc.resourceUnavailable(`Already processing ${s.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),i();if(u(s.MESSAGE_TYPE.ETH_ACCOUNTS)){try{o.add(a),await l(!0),t.result=await c(),i()}catch(e){i(e)}finally{o.delete(a)}return undefined}try{await d()}catch(e){return t.error=e,i()}const h=await c();h.length>0?t.result=h:t.error=n.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return i()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0}};r.default=i;const o=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[76,{"../../../../../shared/constants/app":3981,"eth-rpc-errors":2722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors");const s={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,r,s,{addSubjectMetadata:i,subjectType:o}){const{origin:a,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return s(n.ethErrors.rpc.invalidParams({data:c}));{const{icon:e=null,name:t=null,...r}=c;i({...r,iconUrl:e,name:t,subjectType:o,origin:a})}return t.result=!0,s()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};r.default=s}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[77,{"../../../../../shared/constants/app":3981,"../../../../../shared/constants/network":3991,"../../../../../shared/modules/network.utils":4023,"@metamask/controller-utils":1066,"eth-rpc-errors":2722,lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors"),s=e("lodash"),i=e("@metamask/controller-utils"),o=e("../../../../../shared/constants/app"),a=e("../../../../../shared/constants/network"),c=e("../../../../../shared/modules/network.utils");const l={methodNames:[o.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,r,l,{getCurrentChainId:d,findNetworkConfigurationBy:h,findNetworkClientIdByChainId:p,setNetworkClientIdForDomain:f,setProviderType:g,setActiveNetwork:m,requestUserApproval:y,getProviderConfig:b}){var k;if(null===(k=e.params)||void 0===k||!k[0]||"object"!=typeof e.params[0])return l(n.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:w}=e,{chainId:v}=e.params[0],C=Object.keys((0,s.omit)(e.params[0],["chainId"]));if(C.length>0)return l(n.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${C}`}));const _="string"==typeof v&&v.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(_))return l(n.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${v}`}));if(!(0,c.isSafeChainId)(parseInt(_,16)))return l(n.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${_}": numerical value greater than max safe value. Received:\n${v}`}));const S={toNetworkConfiguration:u(_,h)};if(S.fromNetworkConfiguration=b(),S.toNetworkConfiguration){const r=d(),n=p(_);if(r===_)return f(e.origin,n),t.result=null,l();try{const r=await y({origin:w,type:i.ApprovalType.SwitchEthereumChain,requestData:S});Object.values(a.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(_)?await g(r.type):await m(r.id),f(e.origin,n),t.result=null}catch(e){return l(e)}return l()}return l(n.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${v}". Try adding the chain using ${o.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findNetworkConfigurationBy:!0,findNetworkClientIdByChainId:!0,setNetworkClientIdForDomain:!0,setProviderType:!0,setActiveNetwork:!0,requestUserApproval:!0,getNetworkConfigurations:!0,getNetworkClientIdForDomain:!0,getProviderConfig:!0}};r.default=l;function u(e,t){return Object.values(a.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(e)?{chainId:e,ticker:a.CURRENCY_SYMBOLS.ETH,nickname:a.NETWORK_TO_NAME_MAP[e],rpcUrl:a.CHAIN_ID_TO_RPC_URL_MAP[e],type:a.CHAIN_ID_TO_TYPE_MAP[e]}:t({chainId:e})}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[78,{"../../../../../shared/constants/app":3981,"@metamask/controller-utils":1066,"eth-rpc-errors":2722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/controller-utils"),s=e("eth-rpc-errors"),i=e("../../../../../shared/constants/app");const o={methodNames:[i.MESSAGE_TYPE.WATCH_ASSET,i.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,r,i,{handleWatchAssetRequest:o}){try{const{params:{options:r,type:a},origin:c,networkClientId:l}=e,{tokenId:u}=r;return[n.ERC721,n.ERC1155].includes(a)&&u!==undefined&&"string"!=typeof u?i(s.ethErrors.rpc.invalidParams({message:`Expected parameter 'tokenId' to be type 'string'. Received type '${typeof u}'`})):(await o({asset:r,type:a,origin:c,networkClientId:l}),t.result=!0,i())}catch(e){return i(e)}},hookNames:{handleWatchAssetRequest:!0}};r.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[79,{"./createMethodMiddleware":69},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./createMethodMiddleware");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[8,{"../../../shared/constants/alarms":3979,"../../../shared/constants/app":3981,"../../../shared/constants/preferences":3993,"../../../shared/constants/time":4e3,"../../../shared/modules/mv3.utils":4022,"../../../ui/helpers/utils/build-types":4794,"../metamask-controller":93,"@metamask/controller-utils":1066,"@metamask/obs-store":1486,events:2819,loglevel:3356,uuid:3930},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=g(e("events")),s=e("@metamask/obs-store"),i=e("uuid"),o=g(e("loglevel")),a=e("@metamask/controller-utils"),c=e("../metamask-controller"),l=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),h=e("../../../ui/helpers/utils/build-types"),p=e("../../../shared/constants/app"),f=e("../../../shared/constants/preferences");function g(e){return e&&e.__esModule?e:{default:e}}class m extends n.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:r,initState:n,onInactiveTimeout:i,preferencesStore:o,messenger:a,extension:c}=e;super(),this.extension=c,this.onInactiveTimeout=i||(()=>undefined),this.store=new s.ObservableStore({timeoutMinutes:f.DEFAULT_AUTO_LOCK_TIME_LIMIT,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),outdatedBrowserWarningLastShown:(new Date).getTime(),nftsDetectionNoticeDismissed:!1,showTestnetMessageInDropdown:!0,showBetaHeader:(0,h.isBeta)(),showProductTour:!0,trezorModel:null,currentPopupId:undefined,hadAdvancedGasFeesSetPriorToMigration92_3:!1,...n,qrHardware:{},nftsDropdownState:{},usedNetworks:{"0x1":!0,"0x5":!0,"0x539":!0}}),this.timer=null,this.isUnlocked=r,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),o.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),a.subscribe("KeyringController:qrKeyringStateChange",(e=>this.store.updateState({qrHardware:e})));const{preferences:l}=o.getState();this._setInactiveTimeout(l.autoLockTimeLimit),this.messagingSystem=a,this._approvalRequestId=null}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._requestApproval()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}this._acceptApproval()}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setTermsOfUseLastAgreed(e){this.store.updateState({termsOfUseLastAgreed:e})}setSnapsInstallPrivacyWarningShownStatus(e){this.store.updateState({snapsInstallPrivacyWarningShown:e})}setOutdatedBrowserWarningLastShown(e){this.store.updateState({outdatedBrowserWarningLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer?clearTimeout(this.timer):d.isManifestV3&&this.extension.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),e&&(d.isManifestV3?(this.extension.alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:e,periodInMinutes:e}),this.extension.alarms.onAlarm.addListener((e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(this.onInactiveTimeout(),this.extension.alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))}))):this.timer=setTimeout((()=>this.onInactiveTimeout()),e*l.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:[...r,e]})}}removePollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const r=this.store.getState()[t];this.store.updateState({[t]:r.filter((t=>t!==e))})}}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setShowBetaHeader(e){this.store.updateState({showBetaHeader:e})}setShowProductTour(e){this.store.updateState({showProductTour:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}updateNftDropDownState(e){this.store.updateState({nftsDropdownState:e})}setFirstTimeUsedNetwork(e){const t=this.store.getState(),{usedNetworks:r}=t;r[e]=!0,this.store.updateState({usedNetworks:r})}setCurrentPopupId(e){this.store.updateState({currentPopupId:e})}getCurrentPopupId(){return this.store.getState().currentPopupId}_requestApproval(){this._approvalRequestId=(0,i.v4)(),this.messagingSystem.call("ApprovalController:addRequest",{id:this._approvalRequestId,origin:p.ORIGIN_METAMASK,type:a.ApprovalType.Unlock},!0).catch((()=>{}))}_acceptApproval(){if(this._approvalRequestId){try{this.messagingSystem.call("ApprovalController:acceptRequest",this._approvalRequestId)}catch(e){o.default.error("Failed to unlock approval request",e)}this._approvalRequestId=null}}}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/app-state.js"}],[80,{"../../../shared/constants/app":3981,"../../../shared/modules/fetch-with-timeout":4018},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.securityProviderCheck=async function(e,t,r,n){let s;const a=e.msgParams||e.messageParams;if(t===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:null==a?void 0:a.data,currentLocale:n};else if(t===i.MESSAGE_TYPE.ETH_SIGN||t===i.MESSAGE_TYPE.PERSONAL_SIGN)s={host_name:null==a?void 0:a.origin,rpc_method_name:t,chain_id:r,data:{signer_address:null==a?void 0:a.from,msg_to_sign:null==a?void 0:a.data},currentLocale:n};else{var c,l,u,d,h,p;s={host_name:e.origin,rpc_method_name:t,chain_id:r,data:{from_address:null===(c=e.txParams)||void 0===c?void 0:c.from,to_address:null===(l=e.txParams)||void 0===l?void 0:l.to,gas:null===(u=e.txParams)||void 0===u?void 0:u.gas,gasPrice:null===(d=e.txParams)||void 0===d?void 0:d.gasPrice,value:null===(h=e.txParams)||void 0===h?void 0:h.value,data:null===(p=e.txParams)||void 0===p?void 0:p.data},currentLocale:n}}const f=await o("https://proxy.metafi.codefi.network/opensea/security/v1/validate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return await f.json()};var n,s=(n=e("../../../shared/modules/fetch-with-timeout"))&&n.__esModule?n:{default:n},i=e("../../../shared/constants/app");const o=(0,s.default)()}}},{package:"$root$",file:"app/scripts/lib/security-provider-helpers.ts"}],[81,{"../util":92,"@segment/loosely-validate-event":1817,buffer:2466,"is-retry-allowed":3136,lodash:3346,"remove-trailing-slash":3754,timers:3880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=l(e("remove-trailing-slash")),i=l(e("@segment/loosely-validate-event")),o=e("lodash"),a=l(e("is-retry-allowed")),c=e("../util");function l(e){return e&&e.__esModule?e:{default:e}}const u=()=>({});r.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,s.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,i.default)(e,t)}_message(e,t,r){return this._validate(t,e),this.enqueue(e,t,r),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,r=u){if(!this.enable)return void n(r);const s={...t,type:e};if(s.context={...s.context,library:{name:"analytics-node"}},s.timestamp||(s.timestamp=new Date),s.messageId||(s.messageId=(0,c.generateRandomId)()),s.anonymousId&&!(0,o.isString)(s.anonymousId)&&(s.anonymousId=JSON.stringify(s.anonymousId)),s.userId&&!(0,o.isString)(s.userId)&&(s.userId=JSON.stringify(s.userId)),this.queue.push({message:s,callback:r}),!this.flushed)return this.flushed=!0,void this.flush();const i=this.queue.length>=this.flushAt,a=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(i||a)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=u){if(!this.enable)return n(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return n(e),Promise.resolve();const r=this.queue.splice(0,this.flushAt),s=r.map((e=>e.callback)),i={batch:r.map((e=>e.message)),timestamp:new Date,sentAt:new Date},o={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(i),headers:o},(t=>{n((()=>{s.forEach((e=>e(t,i))),e(t,i)}))}),0)}_retryRequest(e,t,r,n){const s=100*Math.pow(2,n);setTimeout((()=>{this._sendRequest(e,t,r,n+1)}),s)}async _sendRequest(e,t,r,n){return fetch(e,t).then((async s=>{if(s.ok)r();else if(this._isErrorRetryable({response:s})&&n<=this.retryCount)this._retryRequest(e,t,r,n);else{const e=new Error(s.statusText);r(e)}})).catch((s=>{this._isErrorRetryable(s)&&n<=this.retryCount?this._retryRequest(e,t,r,n):r(s)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,a.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[82,{"../../../../shared/constants/time":4e3,"./analytics":81},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.segment=r.createSegmentMock=void 0;var n,s=e("../../../../shared/constants/time"),i=(n=e("./analytics"))&&n.__esModule?n:{default:n};const o="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",a=undefined,c=5*s.SECOND,l=(e=a)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(r,n=(()=>undefined)){t.queue.push([r,n]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};r.createSegmentMock=l;r.segment=o?new i.default(o,{host:null,flushAt:a,flushInterval:c}):l(a)}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[86,{"./snap-keyring":88},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getAccountsBySnapId",{enumerable:!0,get:function(){return n.getAccountsBySnapId}}),Object.defineProperty(r,"snapKeyringBuilder",{enumerable:!0,get:function(){return n.snapKeyringBuilder}});var n=e("./snap-keyring")}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/index.ts"}],[87,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getSnapAndHardwareInfoForMetrics=async function(e,t,r,n){if(!n)return{};const s=e(),i=await async function(e){return await n.call("KeyringController:getKeyringForAccount",e)}(s),o=await async function(e){const t=e.toLowerCase();if(i.listAccounts){return(await i.listAccounts()).find((e=>e.address.toLowerCase()===t))}return undefined}(s),a=await n.call("SnapController:get",null==o?void 0:o.metadata.snap.id);return{account_type:await t(s),device_model:await r(s),account_hardware_type:await async function(){var e;return null!=i&&null!==(e=i.type)&&void 0!==e&&e.includes("Hardware")?i.type:undefined}(),account_snap_type:null==a?void 0:a.id,account_snap_version:null==a?void 0:a.version}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/metrics.ts"}],[88,{"../../../../shared/constants/app":3981,"../../translate":205,"./utils/isBlockedUrl":89,"@metamask/eth-snap-keyring":1219,"webextension-polyfill":3965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.snapKeyringBuilder=r.getAccountsBySnapId=void 0;var n,s=e("@metamask/eth-snap-keyring"),i=(n=e("webextension-polyfill"))&&n.__esModule?n:{default:n},o=e("../../../../shared/constants/app"),a=e("../../translate"),c=e("./utils/isBlockedUrl");r.getAccountsBySnapId=async(e,t)=>{const r=await e.getSnapKeyring();return await r.getAccountsBySnapId(t)};r.snapKeyringBuilder=(e,t,r,n,l)=>{const u=()=>new s.SnapKeyring(t(),{addressExists:async t=>(await e.call("KeyringController:getAccounts")).includes(t.toLowerCase()),redirectUser:async(t,r,n)=>{if(r.length>0||n.length>0){const s=await(0,c.isBlockedUrl)(r,(async()=>await e.call("PhishingController:maybeUpdateState")),(t=>e.call("PhishingController:testOrigin",t))),a=await e.call("ApprovalController:addRequest",{origin:t,requestData:{url:r,message:n,isBlockedUrl:s},type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect},!0);Boolean(a)&&r.length>0?i.default.tabs.create({url:r}):console.log("User refused snap account redirection to:",r)}else console.log("Error occurred when redirecting snap account. url or message must be defined")},saveState:async()=>{await r()},addAccount:async(t,s,i)=>{const{id:c}=e.call("ApprovalController:startFlow"),l={name:"SnapAuthorshipHeader",key:"snapHeader",properties:{snapId:s}};try{const c=Boolean(await e.call("ApprovalController:addRequest",{origin:s,type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation},!0));if(!c)throw await i(c),new Error("User denied account creation");try{await i(c),await r(),n(t),await e.call("ApprovalController:showSuccess",{message:(0,a.t)("snapAccountCreated"),header:[l]})}catch(t){throw await e.call("ApprovalController:showError",{error:t.message,header:[l]}),new Error(`Error occurred while creating snap account: ${t.message}`)}}finally{e.call("ApprovalController:endFlow",{id:c})}},removeAccount:async(t,n,s)=>{const{id:i}=e.call("ApprovalController:startFlow"),c={name:"SnapAuthorshipHeader",key:"snapHeader",properties:{snapId:n}};try{const i=Boolean(await e.call("ApprovalController:addRequest",{origin:n,type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval,requestData:{publicAddress:t}},!0));if(!i)throw await s(i),new Error("User denied account removal");try{await l(t),await s(i),await r(),await e.call("ApprovalController:showSuccess",{message:(0,a.t)("snapAccountRemoved")??"Account removed",header:[c]})}catch(t){throw await e.call("ApprovalController:showError",{error:t.message,header:[c]}),new Error(`Error occurred while removing snap account: ${t.message}`)}}finally{e.call("ApprovalController:endFlow",{id:i})}}});return u.type=s.SnapKeyring.type,u}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/snap-keyring.ts"}],[89,{"../../keyring-snaps-permissions":59},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBlockedUrl=void 0;var n=e("../../keyring-snaps-permissions");r.isBlockedUrl=async(e,t,r)=>{try{return!(0,n.isProtocolAllowed)(e)||(await t(),r(e).result)}catch(e){return console.error("Invalid URL passed into snap-keyring:",e),!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/isBlockedUrl.ts"}],[9,{"@metamask/obs-store":1486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store");r.default=class{constructor(e={}){const{accountTracker:t,getCurrentChainId:r}=e;this.accountTracker=t,this.getCurrentChainId=r;const s={cachedBalances:{},...e.initState};this.store=new n.ObservableStore(s),this._registerUpdates()}async updateCachedBalances({accounts:e}){const t=this.getCurrentChainId(),r=await this._generateBalancesToCache(e,t);this.store.updateState({cachedBalances:r})}_generateBalancesToCache(e,t){const{cachedBalances:r}=this.store.getState(),n={...r[t]};Object.keys(e).forEach((t=>{const r=e[t];r.balance&&(n[t]=r.balance)}));return{...r,[t]:n}}clearCachedBalances(){this.store.updateState({cachedBalances:{}})}_registerUpdates(){const e=this.updateCachedBalances.bind(this);this.accountTracker.store.subscribe(e)}}}}},{package:"$root$",file:"app/scripts/controllers/cached-balances.js"}],[91,{"../../../../shared/constants/app":3981,"../../../../shared/constants/gas":3985,"../../../../shared/constants/metametrics":3990,"../../../../shared/constants/security-provider":3994,"../../../../shared/constants/transaction":4002,"../../../../shared/lib/transactions-controller-utils":4010,"../../../../shared/modules/conversion.utils":4016,"../../../../shared/modules/transaction.utils":4031,"../../../../ui/helpers/utils/metrics":4804,"../snap-keyring/metrics":87,"@metamask/eth-query":1200,"bignumber.js":2357,"ethereumjs-util":2767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleTransactionSubmitted=r.handleTransactionRejected=r.handleTransactionFailed=r.handleTransactionDropped=r.handleTransactionConfirmed=r.handleTransactionApproved=r.handleTransactionAdded=r.handlePostTransactionBalanceUpdate=r.createTransactionEventFragmentWithTxId=r.METRICS_STATUS_FAILED=void 0;var n,s=e("ethereumjs-util"),i=(n=e("@metamask/eth-query"))&&n.__esModule?n:{default:n},o=e("bignumber.js"),a=e("../../../../shared/constants/app"),c=e("../../../../shared/modules/transaction.utils"),l=e("../../../../shared/modules/conversion.utils"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/constants/metametrics"),h=e("../../../../shared/constants/gas"),p=e("../../../../shared/lib/transactions-controller-utils"),f=e("../../../../shared/constants/security-provider"),g=e("../../../../ui/helpers/utils/metrics"),m=e("../snap-keyring/metrics");const y=r.METRICS_STATUS_FAILED="failed on-chain";r.handleTransactionAdded=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await v({transactionEventPayload:t,transactionMetricsRequest:e});b({eventName:u.TransactionMetaMetricsEvent.added,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.handleTransactionApproved=async(e,t)=>{t.transactionMeta&&await k({eventName:u.TransactionMetaMetricsEvent.approved,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionFailed=async(e,t)=>{if(!t.transactionMeta)return;const r={};t.error&&(r.error=t.error),await k({eventName:u.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionConfirmed=async(e,t)=>{if(!t.transactionMeta)return;const r={},{transactionMeta:n}=t,{txReceipt:s}=n;r.gas_used=s.gasUsed;const{submittedTime:i}=n;i&&(r.completion_time=function(e){return Math.round((Date.now()-e)/1e3).toString()}(i)),"0x0"===s.status&&(r.status=y),await k({eventName:u.TransactionMetaMetricsEvent.finalized,extraParams:r,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionDropped=async(e,t)=>{if(!t.transactionMeta)return;await k({eventName:u.TransactionMetaMetricsEvent.finalized,extraParams:{dropped:!0},transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionRejected=async(e,t)=>{t.transactionMeta&&await k({eventName:u.TransactionMetaMetricsEvent.rejected,transactionEventPayload:t,transactionMetricsRequest:e})};r.handleTransactionSubmitted=async(e,t)=>{if(!t.transactionMeta)return;const{properties:r,sensitiveProperties:n}=await v({transactionEventPayload:t,transactionMetricsRequest:e});b({eventName:u.TransactionMetaMetricsEvent.submitted,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:r,sensitiveProperties:n}})};r.createTransactionEventFragmentWithTxId=async(e,{transactionId:t,actionId:r})=>{const n=e.getTransaction(t);n.actionId=r;const{properties:s,sensitiveProperties:i}=await v({transactionEventPayload:{transactionMeta:n},transactionMetricsRequest:e});b({eventName:u.TransactionMetaMetricsEvent.approved,transactionEventPayload:{actionId:n.actionId,transactionMeta:n},transactionMetricsRequest:e,payload:{properties:s,sensitiveProperties:i}})};function b({eventName:e,transactionEventPayload:{transactionMeta:t,actionId:r},transactionMetricsRequest:n,payload:s}){if(function(e,t,r){const n=w(t,r.id);return void 0!==e(n)}(n.getEventFragmentById,e,t))return;const i=w(e,t.id);switch(e){case u.TransactionMetaMetricsEvent.added:n.createEventFragment({category:d.MetaMetricsEventCategory.Transactions,initialEvent:u.TransactionMetaMetricsEvent.added,successEvent:u.TransactionMetaMetricsEvent.approved,failureEvent:u.TransactionMetaMetricsEvent.rejected,properties:s.properties,sensitiveProperties:s.sensitiveProperties,actionId:r,uniqueIdentifier:i,persist:!0});break;case u.TransactionMetaMetricsEvent.approved:case u.TransactionMetaMetricsEvent.rejected:n.createEventFragment({category:d.MetaMetricsEventCategory.Transactions,successEvent:u.TransactionMetaMetricsEvent.approved,failureEvent:u.TransactionMetaMetricsEvent.rejected,properties:s.properties,sensitiveProperties:s.sensitiveProperties,actionId:r,uniqueIdentifier:i,persist:!0});break;case u.TransactionMetaMetricsEvent.submitted:n.createEventFragment({category:d.MetaMetricsEventCategory.Transactions,initialEvent:u.TransactionMetaMetricsEvent.submitted,successEvent:u.TransactionMetaMetricsEvent.finalized,properties:s.properties,sensitiveProperties:s.sensitiveProperties,actionId:r,uniqueIdentifier:i,persist:!0});break;case u.TransactionMetaMetricsEvent.finalized:n.createEventFragment({category:d.MetaMetricsEventCategory.Transactions,successEvent:u.TransactionMetaMetricsEvent.finalized,properties:s.properties,sensitiveProperties:s.sensitiveProperties,actionId:r,uniqueIdentifier:i,persist:!0})}}async function k({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n={}}){const{properties:s,sensitiveProperties:i}=await v({transactionEventPayload:t,transactionMetricsRequest:r,extraParams:n});b({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:s,sensitiveProperties:i}}),function({eventName:e,transactionEventPayload:{transactionMeta:t},transactionMetricsRequest:r,payload:n}){const s=w(e,t.id);switch(e){case u.TransactionMetaMetricsEvent.approved:case u.TransactionMetaMetricsEvent.rejected:case u.TransactionMetaMetricsEvent.finalized:r.updateEventFragment(s,{properties:n.properties,sensitiveProperties:n.sensitiveProperties})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r,payload:{properties:s,sensitiveProperties:i}}),function({eventName:e,transactionMetricsRequest:t,transactionEventPayload:{transactionMeta:r}}){const n=w(e,r.id);switch(e){case u.TransactionMetaMetricsEvent.approved:t.finalizeEventFragment(n);break;case u.TransactionMetaMetricsEvent.rejected:t.finalizeEventFragment(n,{abandoned:!0});break;case u.TransactionMetaMetricsEvent.finalized:t.finalizeEventFragment(n)}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:r})}function w(e,t){return`transaction-${[u.TransactionMetaMetricsEvent.finalized,u.TransactionMetaMetricsEvent.submitted].includes(e)?"submitted":"added"}-${t}`}async function v({transactionEventPayload:{transactionMeta:e},transactionMetricsRequest:t,extraParams:r={}}){var n;const{type:d,time:y,status:b,chainId:k,origin:w,txParams:{gasPrice:v,gas:C,maxFeePerGas:_,maxPriorityFeePerGas:S,estimateSuggested:T,estimateUsed:A},defaultGasEstimates:E,originalType:M,replacedById:P,metamaskNetworkId:N,customTokenAmount:x,dappProposedTokenAmount:R,currentTokenBalance:I,originalApprovalAmount:j,finalApprovalAmount:O,contractMethodName:L,securityProviderResponse:U,securityAlertResponse:D,simulationFails:B}=e,$=new i.default(t.provider),q=w===a.ORIGIN_METAMASK?"user":"dapp",{assetType:F,tokenStandard:K}=await(0,c.determineTransactionAssetType)(e,$,t.getTokenStandardAndDetails),z={};if((0,c.isEIP1559Transaction)(e)?(z.max_fee_per_gas=_,z.max_priority_fee_per_gas=S):z.gas_price=v,E){const{estimateType:r}=E;if(r){z.default_estimate=r;let n=e.defaultGasEstimates.maxFeePerGas,s=e.defaultGasEstimates.maxPriorityFeePerGas;if([h.GasRecommendations.low,h.GasRecommendations.medium,h.GasRecommendations.high].includes(r)){var G,H;const{gasFeeEstimates:e}=await t.getEIP1559GasFeeEstimates();var V,W;if(null!=e&&null!==(G=e[r])&&void 0!==G&&G.suggestedMaxFeePerGas)n=null===(V=e[r])||void 0===V?void 0:V.suggestedMaxFeePerGas,z.default_max_fee_per_gas=n;if(null!=e&&null!==(H=e[r])&&void 0!==H&&H.suggestedMaxPriorityFeePerGas)s=null===(W=e[r])||void 0===W?void 0:W.suggestedMaxPriorityFeePerGas,z.default_max_priority_fee_per_gas=s}}e.defaultGasEstimates.gas&&(z.default_gas=e.defaultGasEstimates.gas),e.defaultGasEstimates.gasPrice&&(z.default_gas_price=e.defaultGasEstimates.gasPrice)}T&&(z.estimate_suggested=T),A&&(z.estimate_used=A),null!=r&&r.gas_used&&(z.gas_used=r.gas_used);const Y=function(e){const t={};for(const r in e)(0,s.isHexString)(e[r])?t[r]=(0,l.hexWEIToDecGWEI)(e[r]):t[r]=e[r];return t}(z);let J="0";e.txParams.maxFeePerGas&&(J="2");const Q=[u.TransactionType.contractInteraction,u.TransactionType.tokenMethodApprove,u.TransactionType.tokenMethodSafeTransferFrom,u.TransactionType.tokenMethodSetApprovalForAll,u.TransactionType.tokenMethodTransfer,u.TransactionType.tokenMethodTransferFrom,u.TransactionType.smart,u.TransactionType.swap,u.TransactionType.swapApproval].includes(d),Z="Approve";let X,ee,te,re,ne=u.TransactionType.simpleSend;d===u.TransactionType.cancel?ne=u.TransactionType.cancel:d===u.TransactionType.retry?ne=M:d===u.TransactionType.deployContract?ne=u.TransactionType.deployContract:Q&&(ne=u.TransactionType.contractInteraction,ee=L,ee===Z&&K===u.TokenStandard.ERC20&&("0"===R||"0"===x?X=u.TransactionApprovalAmountType.revoke:x&&x!==R?X=u.TransactionApprovalAmountType.custom:R&&(X=u.TransactionApprovalAmountType.dappProposed),te=function(e,t,r){if(e===u.TransactionApprovalAmountType.custom&&t&&r)return`${new o.BigNumber(t,10).div(r,10).times(100).round(2)}`;return null}(X,j,O),re=function(e,t,r){if((e===u.TransactionApprovalAmountType.custom||e===u.TransactionApprovalAmountType.dappProposed)&&t&&r)return`${new o.BigNumber(t,16).div(r,10).times(100).round(2)}`;return null}(X,R,I)));const se=t.getTransaction(P),ie={RETRY:u.TransactionType.retry,CANCEL:u.TransactionType.cancel,SAME_NONCE:"other"};let oe,ae,ce;var le;(null!=r&&r.dropped&&(oe=ie.SAME_NONCE,(null==se?void 0:se.type)===u.TransactionType.cancel?oe=ie.CANCEL:(null==se?void 0:se.type)===u.TransactionType.retry&&(oe=ie.RETRY)),ae=1===(null==U?void 0:U.flagAsDangerous)?["flagged_as_malicious"]:2===(null==U?void 0:U.flagAsDangerous)?["flagged_as_safety_unknown"]:null,(null==D?void 0:D.result_type)===f.BlockaidResultType.Failed)?ae=["security_alert_failed"]:(ce=(0,g.getBlockaidMetricsParams)(D),ae=(null===(le=ce)||void 0===le?void 0:le.ui_customizations)??null);B&&(null===ae?ae=["gas_estimation_failed"]:ae.push("gas_estimation_failed"));let ue={chain_id:k,referrer:w,source:q,status:b,network:N,eip_1559_version:J,gas_edit_type:"none",gas_edit_attempted:"none",account_type:await t.getAccountType(t.getSelectedAddress()),device_model:await t.getDeviceModel(t.getSelectedAddress()),asset_type:F,token_standard:K,transaction_type:ne,transaction_speed_up:d===u.TransactionType.retry,...ce,ui_customizations:(null===(n=ae)||void 0===n?void 0:n.length)>0?ae:null,security_alert_response:(null==D?void 0:D.result_type)??f.BlockaidResultType.NotApplicable,security_alert_reason:(null==D?void 0:D.reason)??f.BlockaidReason.notApplicable,gas_estimation_failed:Boolean(B)};const de=await(0,m.getSnapAndHardwareInfoForMetrics)(t.getSelectedAddress,t.getAccountType,t.getDeviceModel,t.snapAndHardwareMessenger);Object.assign(ue,de),ee===Z&&(ue={...ue,transaction_approval_amount_type:X});let he={transaction_envelope_type:(0,c.isEIP1559Transaction)(e)?p.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:p.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:y,gas_limit:C,transaction_contract_method:ee,transaction_replaced:oe,...r,...Y};return ee===Z&&(he={...he,transaction_approval_amount_vs_balance_ratio:re,transaction_approval_amount_vs_proposed_ratio:te}),{properties:ue,sensitiveProperties:he}}r.handlePostTransactionBalanceUpdate=async({getParticipateInMetrics:e,trackEvent:t},{transactionMeta:r,approvalTransactionMeta:n})=>{if(e()&&r.swapMetaData)if("0x0"===r.txReceipt.status)t({event:"Swap Failed",sensitiveProperties:{...r.swapMetaData},category:d.MetaMetricsEventCategory.Swaps});else{const e=(0,p.getSwapsTokensReceivedFromTxMeta)(r.destinationTokenSymbol,r,r.destinationTokenAddress,r.txParams.from,r.destinationTokenDecimals,n,r.chainId),s=e?`${new o.BigNumber(e,10).div(r.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,i=r.txReceipt.gasUsed&&r.swapMetaData.estimated_gas?`${new o.BigNumber(r.txReceipt.gasUsed,16).div(r.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,a=function(e,t){let r="0x0";null!=t&&t.txReceipt&&(r=(0,p.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const n=(0,p.calcGasTotal)(e.txReceipt.gasUsed,e.txReceipt.effectiveGasPrice),s=new o.BigNumber(n,16).plus(r,16).toString(16);return{approvalGasCostInEth:Number((0,l.hexWEIToDecETH)(r)),tradeGasCostInEth:Number((0,l.hexWEIToDecETH)(n)),tradeAndApprovalGasCostInEth:Number((0,l.hexWEIToDecETH)(s))}}(r,n);t({event:d.MetaMetricsEventName.SwapCompleted,category:d.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...r.swapMetaData,token_to_amount_received:e,quote_vs_executionRatio:s,estimated_vs_used_gasRatio:i,approval_gas_cost_in_eth:a.approvalGasCostInEth,trade_gas_cost_in_eth:a.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:a.tradeAndApprovalGasCostInEth,token_to_amount:r.swapMetaData.token_to_amount.toString(10)}})}}}}},{package:"$root$",file:"app/scripts/lib/transaction/metrics.ts"}],[93,{"../../shared/constants/app":3981,"../../shared/constants/hardware-wallets":3986,"../../shared/constants/keyring":3987,"../../shared/constants/logs":3989,"../../shared/constants/metametrics":3990,"../../shared/constants/network":3991,"../../shared/constants/permissions":3992,"../../shared/constants/swaps":3998,"../../shared/constants/time":4e3,"../../shared/constants/tokens":4001,"../../shared/constants/transaction":4002,"../../shared/lib/metamask-controller-utils":4005,"../../shared/lib/token-util.ts":4009,"../../shared/modules/conversion.utils":4016,"../../shared/modules/mv3.utils":4022,"../../shared/modules/network.utils":4023,"../../shared/modules/string-utils":4029,"../../shared/modules/transaction.utils":4031,"../../shared/notifications":4033,"./controllers/alert":6,"./controllers/app-metadata":7,"./controllers/app-state":8,"./controllers/cached-balances":9,"./controllers/decrypt-message":10,"./controllers/detect-tokens":11,"./controllers/encryption-public-key":12,"./controllers/ens":14,"./controllers/metametrics":15,"./controllers/onboarding":16,"./controllers/permissions":20,"./controllers/preferences":25,"./controllers/swaps":26,"./controllers/transactions":30,"./detect-multiple-instances":36,"./lib/ComposableObservableStore":38,"./lib/account-tracker":39,"./lib/backup":40,"./lib/createDupeReqFilterMiddleware":42,"./lib/createLoggerMiddleware":43,"./lib/createMetaRPCHandler":44,"./lib/createMetamaskMiddleware":45,"./lib/createOnboardingMiddleware":46,"./lib/createOriginMiddleware":47,"./lib/createRPCMethodTrackingMiddleware":48,"./lib/createTabIdMiddleware":50,"./lib/hardware-keyring-builder-factory":58,"./lib/keyring-snaps-permissions":59,"./lib/ppom/indexed-db-backend":66,"./lib/ppom/ppom":68,"./lib/ppom/ppom-middleware":67,"./lib/rpc-method-middleware":79,"./lib/security-provider-helpers":80,"./lib/segment":82,"./lib/snap-keyring":86,"./lib/stream-utils":90,"./lib/transaction/metrics":91,"./lib/util":92,"./translate":205,"@keystonehq/metamask-airgapped-keyring":552,"@metamask/address-book-controller":1006,"@metamask/announcement-controller":1032,"@metamask/approval-controller":1035,"@metamask/assets-controllers":1054,"@metamask/base-controller":1061,"@metamask/browser-passworder":1062,"@metamask/controller-utils":1066,"@metamask/eth-json-rpc-middleware":1101,"@metamask/eth-keyring-controller":1122,"@metamask/eth-ledger-bridge-keyring":1182,"@metamask/eth-query":1200,"@metamask/eth-trezor-keyring":1260,"@metamask/gas-fee-controller":1287,"@metamask/keyring-controller":1390,"@metamask/logging-controller":1392,"@metamask/network-controller":1454,"@metamask/notification-controller":1458,"@metamask/obs-store":1486,"@metamask/obs-store/dist/asStream":1485,"@metamask/permission-controller":1494,"@metamask/phishing-controller":1503,"@metamask/ppom-validator":1547,"@metamask/queued-request-controller":1577,"@metamask/rate-limit-controller":1579,"@metamask/scure-bip39/dist/wordlists/english":1587,"@metamask/selected-network-controller":1599,"@metamask/signature-controller":1601,"@metamask/smart-transactions-controller":1605,"@metamask/snaps-controllers":1613,"@sentry/browser":1850,"await-semaphore":2339,buffer:2466,"eth-json-rpc-filters":2685,"eth-json-rpc-filters/subscriptionManager":2687,"eth-lattice-keyring":2689,"eth-rpc-errors":2722,events:2819,"json-rpc-engine":3152,"json-rpc-middleware-stream":3156,lodash:3346,loglevel:3356,nanoid:3422,pump:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.METAMASK_CONTROLLER_EVENTS=void 0;var n=Qe(e("events")),s=Qe(e("pump")),i=e("@metamask/obs-store"),o=e("@metamask/obs-store/dist/asStream"),a=e("json-rpc-engine"),c=e("json-rpc-middleware-stream"),l=e("@metamask/eth-json-rpc-middleware"),u=e("lodash"),d=e("@metamask/eth-keyring-controller"),h=e("@metamask/keyring-controller"),p=Qe(e("eth-json-rpc-filters")),f=Qe(e("eth-json-rpc-filters/subscriptionManager")),g=e("eth-rpc-errors"),m=e("await-semaphore"),y=Qe(e("loglevel")),b=e("@metamask/eth-trezor-keyring"),k=Qe(e("@metamask/eth-ledger-bridge-keyring")),w=Qe(e("eth-lattice-keyring")),v=e("@keystonehq/metamask-airgapped-keyring"),C=Qe(e("@metamask/eth-query")),_=Qe(e("nanoid")),S=e("@sentry/browser"),T=e("@metamask/address-book-controller"),A=e("@metamask/approval-controller"),E=e("@metamask/base-controller"),M=e("@metamask/assets-controllers"),P=e("@metamask/phishing-controller"),N=e("@metamask/announcement-controller"),x=e("@metamask/network-controller"),R=e("@metamask/gas-fee-controller"),I=e("@metamask/permission-controller"),j=Qe(e("@metamask/smart-transactions-controller")),O=e("@metamask/selected-network-controller"),L=e("@metamask/logging-controller"),U=e("@metamask/browser-passworder"),D=e("@metamask/rate-limit-controller"),B=e("@metamask/notification-controller"),$=e("@metamask/snaps-controllers"),q=e("@metamask/signature-controller"),F=e("@metamask/ppom-validator"),K=e("@metamask/controller-utils"),z=e("@metamask/scure-bip39/dist/wordlists/english"),G=e("@metamask/queued-request-controller"),H=e("../../shared/constants/transaction"),V=e("../../shared/constants/swaps"),W=e("../../shared/constants/network"),Y=e("../../shared/constants/hardware-wallets"),J=e("../../shared/constants/keyring"),Q=e("../../shared/constants/permissions"),Z=e("../../shared/notifications"),X=e("../../shared/constants/time"),ee=e("../../shared/constants/app"),te=e("../../shared/constants/metametrics"),re=e("../../shared/constants/logs"),ne=e("../../shared/lib/token-util.ts"),se=e("../../shared/modules/string-utils"),ie=e("../../shared/modules/transaction.utils"),oe=e("../../shared/constants/tokens"),ae=e("../../shared/lib/metamask-controller-utils"),ce=e("../../shared/modules/mv3.utils"),le=e("../../shared/modules/conversion.utils"),ue=e("../../shared/modules/network.utils"),de=e("./lib/transaction/metrics"),he=e("./lib/keyring-snaps-permissions"),pe=e("./lib/ppom/ppom-middleware"),fe=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=Je(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e("./lib/ppom/ppom")),ge=e("./detect-multiple-instances"),me=Qe(e("./lib/ComposableObservableStore")),ye=Qe(e("./lib/account-tracker")),be=Qe(e("./lib/createDupeReqFilterMiddleware")),ke=Qe(e("./lib/createLoggerMiddleware")),we=e("./lib/rpc-method-middleware"),ve=Qe(e("./lib/createOriginMiddleware")),Ce=Qe(e("./lib/createTabIdMiddleware")),_e=Qe(e("./lib/createOnboardingMiddleware")),Se=e("./lib/stream-utils"),Te=Qe(e("./controllers/ens")),Ae=Qe(e("./controllers/preferences")),Ee=Qe(e("./controllers/app-state")),Me=Qe(e("./controllers/cached-balances")),Pe=Qe(e("./controllers/alert")),Ne=Qe(e("./controllers/onboarding")),xe=Qe(e("./lib/backup")),Re=Qe(e("./controllers/decrypt-message")),Ie=Qe(e("./controllers/transactions")),je=Qe(e("./controllers/detect-tokens")),Oe=Qe(e("./controllers/swaps")),Le=Qe(e("./controllers/metametrics")),Ue=e("./lib/segment"),De=Qe(e("./lib/createMetaRPCHandler")),Be=e("./lib/util"),$e=Qe(e("./lib/createMetamaskMiddleware")),qe=e("./lib/hardware-keyring-builder-factory"),Fe=Qe(e("./controllers/encryption-public-key")),Ke=Qe(e("./controllers/app-metadata")),ze=e("./controllers/permissions"),Ge=Qe(e("./lib/createRPCMethodTrackingMiddleware")),He=e("./lib/security-provider-helpers"),Ve=e("./lib/ppom/indexed-db-backend"),We=e("./translate"),Ye=e("./lib/snap-keyring");function Je(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Je=function(e){return e?r:t})(e)}function Qe(e){return e&&e.__esModule?e:{default:e}}function Ze(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.METAMASK_CONTROLLER_EVENTS={UPDATE_BADGE:"updateBadge",APPROVAL_STATE_CHANGE:"ApprovalController:stateChange"};class Xe extends n.default{constructor(e){super(),Ze(this,"_trackSnapExportUsage",(0,u.wrap)((0,u.memoize)((()=>(0,u.throttle)(((e,t)=>this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.SnapExportUsed,category:te.MetaMetricsEventCategory.Snaps,properties:{snap_id:e,export:t}})),60*X.SECOND)),((e,t)=>`${e}${t}`)),((e,...t)=>e(...t)(...t)))),Ze(this,"handleWatchAssetRequest",(({asset:e,type:t,origin:r,networkClientId:n})=>{switch(t){case K.ERC20:return this.tokensController.watchAsset({asset:e,type:t,networkClientId:n});case K.ERC721:case K.ERC1155:return this.nftController.watchNft(e,t,r);default:throw new Error(`Asset type ${t} not supported`)}})),Ze(this,"removePermissionsFor",(e=>{try{this.permissionController.revokePermissions(e)}catch(e){if(!(e instanceof I.PermissionsRequestNotFoundError))throw e}})),Ze(this,"updateCaveat",((e,t,r,n)=>{try{this.controllerMessenger.call("PermissionController:updateCaveat",e,t,r,n)}catch(e){if(!(e instanceof I.PermissionsRequestNotFoundError))throw e}})),Ze(this,"rejectPermissionsRequest",(e=>{try{this.permissionController.rejectPermissionsRequest(e)}catch(e){if(!(e instanceof I.PermissionsRequestNotFoundError))throw e}})),Ze(this,"acceptPermissionsRequest",(e=>{try{this.permissionController.acceptPermissionsRequest(e)}catch(e){if(!(e instanceof I.PermissionsRequestNotFoundError))throw e}})),Ze(this,"resolvePendingApproval",(async(e,t,r)=>{try{await this.approvalController.accept(e,t,r)}catch(e){if(!(e instanceof A.ApprovalRequestNotFoundError))throw e}})),Ze(this,"rejectPendingApproval",((e,t)=>{try{this.approvalController.reject(e,new g.EthereumRpcError(t.code,t.message,t.data))}catch(e){if(!(e instanceof A.ApprovalRequestNotFoundError))throw e}}));const{isFirstMetaMaskControllerSetup:t}=e;this.defaultMaxListeners=20,this.sendUpdate=(0,u.debounce)(this.privateSendUpdate.bind(this),200*X.MILLISECOND),this.opts=e,this.extension=e.browser,this.platform=e.platform,this.notificationManager=e.notificationManager;const r=e.initState||{},n=this.platform.getVersion();this.recordFirstTimeInfo(r),this.featureFlags=e.featureFlags,this.activeControllerConnections=0,this.getRequestAccountTabIds=e.getRequestAccountTabIds,this.getOpenMetamaskTabsIds=e.getOpenMetamaskTabsIds,this.controllerMessenger=new E.ControllerMessenger,this.loggingController=new L.LoggingController({messenger:this.controllerMessenger.getRestricted({name:"LoggingController"}),state:r.LoggingController}),this.localStoreApiWrapper=e.localStore,this.currentMigrationVersion=e.currentMigrationVersion,this.store=new me.default({state:r,controllerMessenger:this.controllerMessenger,persist:!0}),this.connections={},this.createVaultMutex=new m.Mutex,this.extension.runtime.onInstalled.addListener((e=>{"update"===e.reason&&("8.1.0"===n&&this.platform.openExtensionInBrowser(),this.loggingController.add({type:L.LogType.GenericLog,data:{event:re.LOG_EVENT.VERSION_UPDATE,previousVersion:e.previousVersion,version:n}}))})),this.appMetadataController=new Ke.default({state:r.AppMetadataController,currentMigrationVersion:this.currentMigrationVersion,currentAppVersion:n}),this.queuedRequestController=new G.QueuedRequestController({messenger:this.controllerMessenger.getRestricted({name:"QueuedRequestController",allowedActions:[],allowedEvents:[G.QueuedRequestControllerEventTypes.countChanged]})}),this.approvalController=new A.ApprovalController({messenger:this.controllerMessenger.getRestricted({name:"ApprovalController"}),showApprovalRequest:e.showUserConfirmation,typesExcludedFromRateLimiting:[K.ApprovalType.EthSign,K.ApprovalType.PersonalSign,K.ApprovalType.EthSignTypedData,K.ApprovalType.Transaction,K.ApprovalType.WatchAsset,K.ApprovalType.EthGetEncryptionPublicKey,K.ApprovalType.EthDecrypt]});const s=this.controllerMessenger.getRestricted({name:"NetworkController",allowedEvents:["NetworkController:stateChange","NetworkController:networkWillChange","NetworkController:networkDidChange","NetworkController:infuraIsBlocked","NetworkController:infuraIsUnblocked"],allowedActions:["NetworkController:getNetworkClientById","NetworkController:getEthQuery","NetworkController:getProviderConfig","NetworkController:getEIP1559Compatibility","NetworkController:findNetworkClientIdByChainId","NetworkController:setProviderType","NetworkController:setActiveNetwork"]});let i={};r.NetworkController&&(i=r.NetworkController),this.networkController=new x.NetworkController({messenger:s,state:i,infuraProjectId:e.infuraProjectId,trackMetaMetricsEvent:(...e)=>this.metaMetricsController.trackEvent(...e)}),this.networkController.initializeProvider(),this.provider=this.networkController.getProviderAndBlockTracker().provider,this.blockTracker=this.networkController.getProviderAndBlockTracker().blockTracker,this.deprecatedNetworkId=null,this.updateDeprecatedNetworkId(),s.subscribe("NetworkController:networkDidChange",(()=>this.updateDeprecatedNetworkId()));const o=this.controllerMessenger.getRestricted({name:"TokenListController",allowedEvents:["TokenListController:stateChange","NetworkController:stateChange"]});this.selectedNetworkController=new O.SelectedNetworkController({messenger:this.controllerMessenger.getRestricted({name:"SelectedNetworkController",allowedActions:["SelectedNetworkController:getState","SelectedNetworkController:getNetworkClientIdForDomain","SelectedNetworkController:setNetworkClientIdForDomain","NetworkController:getNetworkClientById"],allowedEvents:["SelectedNetworkController:stateChange","NetworkController:stateChange"]})}),this.tokenListController=new M.TokenListController({chainId:this.networkController.state.providerConfig.chainId,preventPollingOnNetworkRestart:!r.TokenListController||r.TokenListController.preventPollingOnNetworkRestart,messenger:o,state:r.TokenListController}),this.preferencesController=new Ae.default({initState:r.PreferencesController,initLangCode:e.initLangCode,tokenListController:this.tokenListController,provider:this.provider,networkConfigurations:this.networkController.state.networkConfigurations}),this.assetsContractController=new M.AssetsContractController({chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:e=>this.preferencesController.store.subscribe(e),onNetworkStateChange:e=>s.subscribe("NetworkController:networkDidChange",(()=>{const t=this.networkController.state;return e(t)})),getNetworkClientById:this.networkController.getNetworkClientById.bind(this.networkController)},{provider:this.provider},r.AssetsContractController);const a=this.controllerMessenger.getRestricted({name:"TokensController",allowedActions:["ApprovalController:addRequest"],allowedEvents:["NetworkController:stateChange"]});this.tokensController=new M.TokensController({messenger:a,chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:s.subscribe.bind(s,"NetworkController:stateChange"),onTokenListStateChange:e=>this.controllerMessenger.subscribe(`${this.tokenListController.name}:stateChange`,e),getNetworkClientById:this.networkController.getNetworkClientById.bind(this.networkController),getERC20TokenName:this.assetsContractController.getERC20TokenName.bind(this.assetsContractController),config:{provider:this.provider},state:r.TokensController});const c=this.controllerMessenger.getRestricted({name:"NftController",allowedActions:[`${this.approvalController.name}:addRequest`]});this.nftController=new M.NftController({messenger:c,chainId:this.networkController.state.providerConfig.chainId,onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:s.subscribe.bind(s,"NetworkController:stateChange"),getERC721AssetName:this.assetsContractController.getERC721AssetName.bind(this.assetsContractController),getERC721AssetSymbol:this.assetsContractController.getERC721AssetSymbol.bind(this.assetsContractController),getERC721TokenURI:this.assetsContractController.getERC721TokenURI.bind(this.assetsContractController),getERC721OwnerOf:this.assetsContractController.getERC721OwnerOf.bind(this.assetsContractController),getERC1155BalanceOf:this.assetsContractController.getERC1155BalanceOf.bind(this.assetsContractController),getERC1155TokenURI:this.assetsContractController.getERC1155TokenURI.bind(this.assetsContractController),onNftAdded:({address:e,symbol:t,tokenId:r,standard:n,source:s})=>this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.NftAdded,category:te.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e,token_symbol:t,token_id:r,token_standard:n,asset_type:H.AssetType.NFT,source:s}}),getNetworkClientById:this.networkController.getNetworkClientById.bind(this.networkController)},{},r.NftController),this.nftController.setApiKey(null),this.nftDetectionController=new M.NftDetectionController({chainId:this.networkController.state.providerConfig.chainId,onNftsStateChange:e=>this.nftController.subscribe(e),onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),onNetworkStateChange:s.subscribe.bind(s,"NetworkController:stateChange"),getOpenSeaApiKey:()=>this.nftController.openSeaApiKey,getBalancesInSingleCall:this.assetsContractController.getBalancesInSingleCall.bind(this.assetsContractController),addNft:this.nftController.addNft.bind(this.nftController),getNftState:()=>this.nftController.state}),this.metaMetricsController=new Le.default({segment:Ue.segment,preferencesStore:this.preferencesController.store,onNetworkDidChange:s.subscribe.bind(s,"NetworkController:networkDidChange"),getNetworkIdentifier:()=>{const{type:e,rpcUrl:t}=this.networkController.state.providerConfig;return e===W.NETWORK_TYPES.RPC?t:e},getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,version:this.platform.getVersion(),environment:"production",extension:this.extension,initState:r.MetaMetricsController,captureException:S.captureException}),this.on("update",(e=>{this.metaMetricsController.handleMetaMaskStateUpdate(e)}));const l=this.controllerMessenger.getRestricted({name:"GasFeeController"}),p=V.GAS_API_BASE_URL;this.gasFeeController=new R.GasFeeController({state:r.GasFeeController,interval:1e4,messenger:l,clientId:V.SWAPS_CLIENT_ID,getProvider:()=>this.networkController.getProviderAndBlockTracker().provider,onNetworkStateChange:e=>{s.subscribe("NetworkController:networkDidChange",(()=>e(this.networkController.state)))},getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),legacyAPIEndpoint:`${p}/networks/<chain_id>/gasPrices`,EIP1559APIEndpoint:`${p}/networks/<chain_id>/suggestedGasFees`,getCurrentNetworkLegacyGasAPICompatibility:()=>{const{chainId:e}=this.networkController.state.providerConfig;return e===W.CHAIN_IDS.BSC},getChainId:()=>this.networkController.state.providerConfig.chainId}),this.appStateController=new Ee.default({addUnlockListener:this.on.bind(this,"unlock"),isUnlocked:this.isUnlocked.bind(this),initState:r.AppStateController,onInactiveTimeout:()=>this.setLocked(),preferencesStore:this.preferencesController.store,messenger:this.controllerMessenger.getRestricted({name:"AppStateController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`],allowedEvents:["KeyringController:qrKeyringStateChange"]}),extension:this.extension});const f=this.controllerMessenger.getRestricted({name:"CurrencyRateController"});this.currencyRateController=new M.CurrencyRateController({includeUsdRate:!0,messenger:f,state:{...r.CurrencyController,nativeCurrency:this.networkController.state.providerConfig.ticker}});const C=this.controllerMessenger.getRestricted({name:"PhishingController"});this.phishingController=new P.PhishingController({messenger:C,state:r.PhishingController,hotlistRefreshInterval:undefined,stalelistRefreshInterval:undefined}),this.phishingController.maybeUpdateState(),this.ppomController=new F.PPOMController({messenger:this.controllerMessenger.getRestricted({name:"PPOMController"}),storageBackend:new Ve.IndexedDBPPOMStorage("PPOMDB",1),provider:this.provider,ppomProvider:{PPOM:fe.PPOM,ppomInit:fe.default},state:r.PPOMController,chainId:this.networkController.state.providerConfig.chainId,onNetworkChange:s.subscribe.bind(s,"NetworkController:stateChange"),securityAlertsEnabled:this.preferencesController.store.getState().securityAlertsEnabled,onPreferencesChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store),cdnBaseUrl:"static.metafi.codefi.network/api/v1/confirmations/ppom",blockaidPublicKey:"066ad3e8af5583385e312c156d238055215d5f25247c1e91055afa756cb98a88"});const _=this.controllerMessenger.getRestricted({name:"AnnouncementController"});this.announcementController=new N.AnnouncementController({messenger:_,allAnnouncements:Z.UI_NOTIFICATIONS,state:r.AnnouncementController}),this.tokenRatesController=new M.TokenRatesController({chainId:this.networkController.state.providerConfig.chainId,ticker:this.networkController.state.providerConfig.ticker,selectedAddress:this.preferencesController.getSelectedAddress(),onTokensStateChange:e=>this.tokensController.subscribe(e),onNetworkStateChange:s.subscribe.bind(s,"NetworkController:stateChange"),onPreferencesStateChange:this.preferencesController.store.subscribe.bind(this.preferencesController.store)},{},r.TokenRatesController),this.preferencesController.store.getState().useCurrencyRateCheck&&this.tokenRatesController.start(),this.preferencesController.store.subscribe((0,Be.previousValueComparator)(((e,t)=>{const{useCurrencyRateCheck:r}=e,{useCurrencyRateCheck:n}=t;n&&!r?(this.currencyRateController.start(),this.tokenRatesController.start()):!n&&r&&(this.currencyRateController.stop(),this.tokenRatesController.stop())}),this.preferencesController.store.getState())),this.ensController=new Te.default({provider:this.provider,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,onNetworkDidChange:s.subscribe.bind(s,"NetworkController:networkDidChange")}),this.onboardingController=new Ne.default({initState:r.OnboardingController}),this.accountTracker=new ye.default({provider:this.provider,blockTracker:this.blockTracker,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getNetworkIdentifier:()=>{const{type:e,rpcUrl:t}=this.networkController.state.providerConfig;return e===W.NETWORK_TYPES.RPC?t:e},preferencesController:this.preferencesController,onboardingController:this.onboardingController,initState:{accounts:{}},onAccountRemoved:this.controllerMessenger.subscribe.bind(this.controllerMessenger,"KeyringController:accountRemoved")}),this.on("controllerConnectionChanged",(e=>{const{completedOnboarding:t}=this.onboardingController.store.getState();e>0&&t?this.triggerNetworkrequests():this.stopNetworkRequests()})),this.onboardingController.store.subscribe((0,Be.previousValueComparator)((async(e,t)=>{const{completedOnboarding:r}=e,{completedOnboarding:n}=t;!r&&n&&this.triggerNetworkrequests()}),this.onboardingController.store.getState())),this.cachedBalancesController=new Me.default({accountTracker:this.accountTracker,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,initState:r.CachedBalancesController});let U=[(0,d.keyringBuilderFactory)(v.MetaMaskKeyring)];if(this.canUseHardwareWallets()){var z;const e=null===(z=this.opts.overrides)||void 0===z?void 0:z.keyrings,t=[(null==e?void 0:e.ledger)||k.default,(null==e?void 0:e.lattice)||w.default,v.MetaMaskKeyring],r=[{keyring:(null==e?void 0:e.trezor)||b.TrezorKeyring,bridge:(null==e?void 0:e.trezorBridge)||b.TrezorConnectBridge}];U=t.map((e=>(0,d.keyringBuilderFactory)(e))),r.forEach((e=>U.push((0,qe.hardwareKeyringBuilderFactory)(e.keyring,e.bridge))))}const Y=this.controllerMessenger.getRestricted({name:"SnapKeyringBuilder",allowedActions:["ApprovalController:addRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","ApprovalController:startFlow","ApprovalController:endFlow","ApprovalController:showSuccess","ApprovalController:showError","PhishingController:test","PhishingController:maybeUpdateState","KeyringController:getAccounts"]});U.push((0,Ye.snapKeyringBuilder)(Y,(()=>this.snapController),(async()=>await this.keyringController.persistAllKeyrings()),(e=>this.preferencesController.setSelectedAddress(e)),(e=>this.removeAccount(e))));const J=this.controllerMessenger.getRestricted({name:"KeyringController",allowedActions:["KeyringController:getState","KeyringController:signMessage","KeyringController:signPersonalMessage","KeyringController:signTypedMessage","KeyringController:decryptMessage","KeyringController:getEncryptionPublicKey","KeyringController:getKeyringsByType","KeyringController:getKeyringForAccount","KeyringController:getAccounts"],allowedEvents:["KeyringController:stateChange","KeyringController:lock","KeyringController:unlock","KeyringController:accountRemoved","KeyringController:qrKeyringStateChange"]});this.keyringController=new h.KeyringController({keyringBuilders:U,state:r.KeyringController,encryptor:e.encryptor||undefined,messenger:J,removeIdentity:this.preferencesController.removeAddress.bind(this.preferencesController),setAccountLabel:this.preferencesController.setAccountLabel.bind(this.preferencesController),setSelectedAddress:this.preferencesController.setSelectedAddress.bind(this.preferencesController),syncIdentities:this.preferencesController.syncAddresses.bind(this.preferencesController),updateIdentities:this.preferencesController.setAddresses.bind(this.preferencesController)}),this.controllerMessenger.subscribe("KeyringController:unlock",(()=>this._onUnlock())),this.controllerMessenger.subscribe("KeyringController:lock",(()=>this._onLock())),this.controllerMessenger.subscribe("KeyringController:stateChange",(e=>{this._onKeyringControllerUpdate(e)}));const ne=()=>this.preferencesController.store.getState().identities;this.permissionController=new I.PermissionController({messenger:this.controllerMessenger.getRestricted({name:"PermissionController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:hasRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`,"SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),state:r.PermissionController,caveatSpecifications:(0,ze.getCaveatSpecifications)({getIdentities:ne}),permissionSpecifications:{...(0,ze.getPermissionSpecifications)({getIdentities:ne,getAllAccounts:this.keyringController.getAccounts.bind(this.keyringController),captureKeyringTypesWithMissingIdentities:(e={},t=[])=>{const r=t.filter((t=>!e[t])).map((e=>this.keyringController.getAccountKeyringType(e))),n=Object.keys(e||{}).length,s=Object.keys(this.accountTracker.store.getState().accounts||{}).length;(0,S.captureException)(new Error(`Attempt to get permission specifications failed because their were ${t.length} accounts, but ${n} identities, and the ${r} keyrings included accounts with missing identities. Meanwhile, there are ${s} accounts in the account tracker.`))}}),...this.getSnapPermissionSpecifications()},unrestrictedMethods:ze.unrestrictedMethods}),this.permissionLogController=new ze.PermissionLogController({restrictedMethods:new Set(Object.keys(Q.RestrictedMethods)),initState:r.PermissionLogController}),this.subjectMetadataController=new I.SubjectMetadataController({messenger:this.controllerMessenger.getRestricted({name:"SubjectMetadataController",allowedActions:[`${this.permissionController.name}:hasPermissions`]}),state:r.SubjectMetadataController,subjectCacheLimit:100});const se={iframeUrl:new URL("https://execution.consensys.io/3.2.0/index.html"),messenger:this.controllerMessenger.getRestricted({name:"ExecutionService"}),setupSnapProvider:this.setupSnapProvider.bind(this)};this.snapExecutionService=new $.IframeExecutionService(se);const ie=this.controllerMessenger.getRestricted({name:"SnapController",allowedEvents:["ExecutionService:unhandledError","ExecutionService:outboundRequest","ExecutionService:outboundResponse","SnapController:snapInstalled","SnapController:snapUpdated"],allowedActions:[`${this.permissionController.name}:getEndowments`,`${this.permissionController.name}:getPermissions`,`${this.permissionController.name}:hasPermission`,`${this.permissionController.name}:hasPermissions`,`${this.permissionController.name}:requestPermissions`,`${this.permissionController.name}:revokeAllPermissions`,`${this.permissionController.name}:revokePermissions`,`${this.permissionController.name}:revokePermissionForAllSubjects`,`${this.permissionController.name}:getSubjectNames`,`${this.permissionController.name}:updateCaveat`,`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:updateRequestState`,`${this.permissionController.name}:grantPermissions`,`${this.subjectMetadataController.name}:getSubjectMetadata`,`${this.phishingController.name}:maybeUpdateState`,`${this.phishingController.name}:testOrigin`,"ExecutionService:executeSnap","ExecutionService:getRpcRequestHandler","ExecutionService:terminateSnap","ExecutionService:terminateAllSnaps","ExecutionService:handleRpcRequest","SnapsRegistry:get","SnapsRegistry:getMetadata","SnapsRegistry:update","SnapsRegistry:resolveVersion"]}),oe=!0;this.snapController=new $.SnapController({environmentEndowmentPermissions:Object.values(Q.EndowmentPermissions),excludedPermissions:{...Q.ExcludedSnapPermissions,...Q.ExcludedSnapEndowments},closeAllConnections:this.removeAllConnections.bind(this),state:r.SnapController,messenger:ie,featureFlags:{dappsCanUpdateSnaps:!0,allowLocalSnaps:!1,requireAllowlist:oe}}),this.notificationController=new B.NotificationController({messenger:this.controllerMessenger.getRestricted({name:"NotificationController"}),state:r.NotificationController}),this.rateLimitController=new D.RateLimitController({state:r.RateLimitController,messenger:this.controllerMessenger.getRestricted({name:"RateLimitController"}),implementations:{showNativeNotification:{method:(e,t)=>{const r=this.controllerMessenger.call("SubjectMetadataController:getState").subjectMetadata[e];return this.platform._showNotification((null==r?void 0:r.name)??e,t).catch((e=>{y.default.error("Failed to create notification",e)})),null},rateLimitCount:2,rateLimitTimeout:3e5},showInAppNotification:{method:(e,t)=>(this.controllerMessenger.call("NotificationController:show",e,t),null),rateLimitCount:5,rateLimitTimeout:6e4}}});const ae=this.controllerMessenger.getRestricted({name:"CronjobController",allowedEvents:["SnapController:snapInstalled","SnapController:snapUpdated","SnapController:snapRemoved","SnapController:snapEnabled","SnapController:snapDisabled"],allowedActions:[`${this.permissionController.name}:getPermissions`,"SnapController:handleRequest","SnapController:getAll"]});this.cronjobController=new $.CronjobController({state:r.CronjobController,messenger:ae});const le=this.controllerMessenger.getRestricted({name:"SnapsRegistry",allowedEvents:[],allowedActions:[]});this.snapsRegistry=new $.JsonSnapsRegistry({state:r.SnapsRegistry,messenger:le,refetchOnAllowlistMiss:oe,failOnUnavailableRegistry:oe,url:{registry:"https://acl.execution.consensys.io/latest/registry.json",signature:"https://acl.execution.consensys.io/latest/signature.json"},publicKey:"0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6"});const ue=this.controllerMessenger.getRestricted({name:"DetectTokensController",allowedActions:["KeyringController:getState"],allowedEvents:["NetworkController:stateChange","KeyringController:lock","KeyringController:unlock"]});this.detectTokensController=new je.default({messenger:ue,preferences:this.preferencesController,tokensController:this.tokensController,assetsContractController:this.assetsContractController,network:this.networkController,tokenList:this.tokenListController,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getNetworkClientById:this.networkController.getNetworkClientById.bind(this.networkController)}),this.addressBookController=new T.AddressBookController(undefined,r.AddressBookController),this.alertController=new Pe.default({initState:r.AlertController,preferencesStore:this.preferencesController.store}),this.backup=new xe.default({preferencesController:this.preferencesController,addressBookController:this.addressBookController,networkController:this.networkController,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.txController=new Ie.default({initState:r.TransactionController||r.TransactionManager,getPermittedAccounts:this.getPermittedAccounts.bind(this),getProviderConfig:()=>this.networkController.state.providerConfig,getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),getCurrentAccountEIP1559Compatibility:this.getCurrentAccountEIP1559Compatibility.bind(this),getNetworkStatus:()=>{var e;return null===(e=this.networkController.state.networksMetadata)||void 0===e||null===(e=e[this.networkController.state.selectedNetworkClientId])||void 0===e?void 0:e.status},getNetworkState:()=>this.networkController.state,hasCompletedOnboarding:()=>this.onboardingController.store.getState().completedOnboarding,onNetworkStateChange:e=>{s.subscribe("NetworkController:stateChange",(()=>e()),(e=>e.providerConfig.chainId))},getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,preferencesStore:this.preferencesController.store,txHistoryLimit:60,signTransaction:this.keyringController.signTransaction.bind(this.keyringController),provider:this.provider,blockTracker:this.blockTracker,getParticipateInMetrics:()=>this.metaMetricsController.state.participateInMetaMetrics,getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController),getExternalPendingTransactions:this.getExternalPendingTransactions.bind(this),securityProviderRequest:this.securityProviderRequest.bind(this),hooks:{},messenger:this.controllerMessenger.getRestricted({name:"TransactionController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]})}),this._addTransactionControllerListeners(),s.subscribe("NetworkController:networkDidChange",(async()=>{const{ticker:e}=this.networkController.state.providerConfig;try{await this.currencyRateController.setNativeCurrency(e)}catch(e){console.error(e)}})),this.networkController.lookupNetwork(),this.decryptMessageController=new Re.default({getState:this.getState.bind(this),messenger:this.controllerMessenger.getRestricted({name:"DecryptMessageController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`,`${this.keyringController.name}:decryptMessage`]}),metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.encryptionPublicKeyController=new Fe.default({messenger:this.controllerMessenger.getRestricted({name:"EncryptionPublicKeyController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.approvalController.name}:acceptRequest`,`${this.approvalController.name}:rejectRequest`]}),getEncryptionPublicKey:this.keyringController.getEncryptionPublicKey.bind(this.keyringController),getAccountKeyringType:this.keyringController.getAccountKeyringType.bind(this.keyringController),getState:this.getState.bind(this),metricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)}),this.signatureController=new q.SignatureController({messenger:this.controllerMessenger.getRestricted({name:"SignatureController",allowedActions:[`${this.approvalController.name}:addRequest`,`${this.keyringController.name}:signMessage`,`${this.keyringController.name}:signPersonalMessage`,`${this.keyringController.name}:signTypedMessage`,`${this.loggingController.name}:add`]}),isEthSignEnabled:()=>{var e;return null===(e=this.preferencesController.store.getState())||void 0===e||null===(e=e.disabledRpcMethodPreferences)||void 0===e?void 0:e.eth_sign},getAllState:this.getState.bind(this),securityProviderRequest:this.securityProviderRequest.bind(this),getCurrentChainId:()=>this.networkController.state.providerConfig.chainId}),this.signatureController.hub.on("cancelWithReason",(({message:e,reason:t})=>{this.metaMetricsController.trackEvent({event:t,category:te.MetaMetricsEventCategory.Transactions,properties:{action:"Sign Request",type:e.type}})})),this.swapsController=new Oe.default({getBufferedGasLimit:this.txController.txGasUtil.getBufferedGasLimit.bind(this.txController.txGasUtil),provider:this.provider,getProviderConfig:()=>this.networkController.state.providerConfig,getTokenRatesState:()=>this.tokenRatesController.state,getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController),trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)},r.SwapsController),this.smartTransactionsController=new j.default({onNetworkStateChange:s.subscribe.bind(s,"NetworkController:stateChange"),getNetwork:()=>this.networkController.state.networkId??"loading",getNonceLock:this.txController.nonceTracker.getNonceLock.bind(this.txController.nonceTracker),confirmExternalTransaction:this.txController.confirmExternalTransaction.bind(this.txController),provider:this.provider,trackMetaMetricsEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController)},{supportedChainIds:[W.CHAIN_IDS.MAINNET,W.CHAIN_IDS.GOERLI]},r.SmartTransactionsController),s.subscribe("NetworkController:networkDidChange",(()=>{this.accountTracker._updateAccounts()})),s.subscribe("NetworkController:networkWillChange",(()=>{this.txController.txStateManager.clearUnapprovedTxs(),this.encryptionPublicKeyController.clearUnapproved(),this.decryptMessageController.clearUnapproved(),this.signatureController.clearUnapproved(),this.approvalController.clear(g.ethErrors.provider.userRejectedRequest())})),this.metamaskMiddleware=(0,$e.default)({static:{eth_syncing:!1,web3_clientVersion:`MetaMask/v${n}`},version:n,getAccounts:async({origin:e},{suppressUnauthorizedError:t=!0}={})=>{if(e===ee.ORIGIN_METAMASK){const e=this.preferencesController.getSelectedAddress();return e?[e]:[]}return this.isUnlocked()?await this.getPermittedAccounts(e,{suppressUnauthorizedError:t}):[]},processTransaction:this.newUnapprovedTransaction.bind(this),processEthSignMessage:this.signatureController.newUnsignedMessage.bind(this.signatureController),processTypedMessage:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processTypedMessageV3:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processTypedMessageV4:this.signatureController.newUnsignedTypedMessage.bind(this.signatureController),processPersonalMessage:this.signatureController.newUnsignedPersonalMessage.bind(this.signatureController),processEncryptionPublicKey:this.encryptionPublicKeyController.newRequestEncryptionPublicKey.bind(this.encryptionPublicKeyController),processDecryptMessage:this.decryptMessageController.newRequestDecryptMessage.bind(this.decryptMessageController),getPendingNonce:this.getPendingNonce.bind(this),getPendingTransactionByHash:e=>this.txController.getTransactions({searchCriteria:{hash:e,status:H.TransactionStatus.submitted}})[0]}),this.on("update",(e=>this._onStateUpdate(e)));const de={AccountTracker:this.accountTracker.store,TxController:this.txController.memStore,TokenRatesController:this.tokenRatesController,DecryptMessageController:this.decryptMessageController,EncryptionPublicKeyController:this.encryptionPublicKeyController,SignatureController:this.signatureController,SwapsController:this.swapsController.store,EnsController:this.ensController.store,ApprovalController:this.approvalController,PPOMController:this.ppomController};this.store.updateStructure({AppStateController:this.appStateController.store,AppMetadataController:this.appMetadataController.store,TransactionController:this.txController.store,KeyringController:this.keyringController,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,NetworkController:this.networkController,CachedBalancesController:this.cachedBalancesController.store,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,PhishingController:this.phishingController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,SnapController:this.snapController,CronjobController:this.cronjobController,SnapsRegistry:this.snapsRegistry,NotificationController:this.notificationController,PPOMController:this.ppomController,...de}),this.memStore=new me.default({config:{AppStateController:this.appStateController.store,AppMetadataController:this.appMetadataController.store,NetworkController:this.networkController,CachedBalancesController:this.cachedBalancesController.store,KeyringController:this.keyringController,PreferencesController:this.preferencesController.store,MetaMetricsController:this.metaMetricsController.store,AddressBookController:this.addressBookController,CurrencyController:this.currencyRateController,AlertController:this.alertController.store,OnboardingController:this.onboardingController.store,PermissionController:this.permissionController,PermissionLogController:this.permissionLogController.store,SubjectMetadataController:this.subjectMetadataController,AnnouncementController:this.announcementController,GasFeeController:this.gasFeeController,TokenListController:this.tokenListController,TokensController:this.tokensController,SmartTransactionsController:this.smartTransactionsController,NftController:this.nftController,SelectedNetworkController:this.selectedNetworkController,LoggingController:this.loggingController,SnapController:this.snapController,CronjobController:this.cronjobController,SnapsRegistry:this.snapsRegistry,NotificationController:this.notificationController,...de},controllerMessenger:this.controllerMessenger});const he=[this.accountTracker.resetState,this.txController.resetState,this.decryptMessageController.resetState.bind(this.decryptMessageController),this.encryptionPublicKeyController.resetState.bind(this.encryptionPublicKeyController),this.signatureController.resetState.bind(this.signatureController),this.swapsController.resetState,this.ensController.resetState,this.approvalController.clear.bind(this.approvalController)];ce.isManifestV3?!0===t&&(this.resetStates(he),this.extension.storage.session.set({isFirstMetaMaskControllerSetup:!1})):this.resetStates(he);!this.isUnlocked()&&this.onboardingController.store.getState().completedOnboarding,this._startUISync(),this.extension.runtime.getPlatformInfo().then((({os:e})=>{this.appStateController.setBrowserEnvironment(e,this.extension.runtime.getBrowserInfo===undefined?"chrome":"firefox")})),this.setupControllerEventSubscriptions(),this.publicConfigStore=this.createPublicConfigStore(),this.extension.runtime.onMessageExternal.addListener(ge.onMessageReceived),(0,ge.checkForMultipleVersionsRunning)()}triggerNetworkrequests(){this.accountTracker.start(),this.txController.startIncomingTransactionPolling(),this.preferencesController.store.getState().useCurrencyRateCheck&&this.currencyRateController.start(),this.preferencesController.store.getState().useTokenDetection&&this.tokenListController.start()}stopNetworkRequests(){this.accountTracker.stop(),this.txController.stopIncomingTransactionPolling(),this.preferencesController.store.getState().useCurrencyRateCheck&&this.currencyRateController.stop(),this.preferencesController.store.getState().useTokenDetection&&this.tokenListController.stop()}canUseHardwareWallets(){return!ce.isManifestV3||!1}resetStates(e){e.forEach((e=>{try{e()}catch(e){console.error(e)}}))}async getSnapKeyring(){let[e]=this.keyringController.getKeyringsByType(J.KeyringType.snap);return e||(e=await this.keyringController.addNewKeyring(J.KeyringType.snap)),e}handleSnapRequest(e){return this._trackSnapExportUsage(e.snapId,e.handler),this.controllerMessenger.call("SnapController:handleRequest",e)}getLocale(){const{currentLocale:e}=this.preferencesController.store.getState();return e}getSnapPermissionSpecifications(){return{...(0,ze.buildSnapEndowmentSpecifications)(),...(0,ze.buildSnapRestrictedMethodSpecifications)({encrypt:U.encrypt,decrypt:U.decrypt,getLocale:this.getLocale.bind(this),clearSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:clearSnapState"),getMnemonic:this.getPrimaryKeyringMnemonic.bind(this),getUnlockPromise:this.appStateController.getUnlockPromise.bind(this.appStateController),getSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:get"),handleSnapRpcRequest:this.handleSnapRequest.bind(this),getSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getSnapState"),showDialog:(e,t,r,n)=>this.approvalController.addAndShowApprovalRequest({origin:e,type:ee.SNAP_DIALOG_TYPES[t],requestData:{content:r,placeholder:n}}),showNativeNotification:(e,t)=>this.controllerMessenger.call("RateLimitController:call",e,"showNativeNotification",e,t.message),showInAppNotification:(e,t)=>this.controllerMessenger.call("RateLimitController:call",e,"showInAppNotification",e,t.message),updateSnapState:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:updateSnapState"),maybeUpdatePhishingList:this.controllerMessenger.call.bind(this.controllerMessenger,"PhishingController:maybeUpdateState"),isOnPhishingList:e=>this.controllerMessenger.call("PhishingController:testOrigin",e).result,getSnapKeyring:this.getSnapKeyring.bind(this)})}}dismissNotifications(e){this.notificationController.dismiss(e)}markNotificationsAsRead(e){this.notificationController.markRead(e)}setupControllerEventSubscriptions(){let e;this.preferencesController.store.subscribe((async t=>{var r;const{selectedAddress:n,currentLocale:s}=t,{chainId:i}=this.networkController.state.providerConfig;await(0,We.updateCurrentLocale)(s),null!==(r=t.incomingTransactionsPreferences)&&void 0!==r&&r[i]?this.txController.startIncomingTransactionPolling():this.txController.stopIncomingTransactionPolling(),n&&n!==e&&(e=n,await this._onAccountChange(n))})),this.controllerMessenger.subscribe(`${this.permissionController.name}:stateChange`,(async(e,t)=>{const r=(0,ze.getChangedAccounts)(e,t);for(const[e,t]of r.entries())this._notifyAccountsChange(e,t)}),ze.getPermittedAccountsByOrigin),this.controllerMessenger.subscribe("NetworkController:networkDidChange",(async()=>{await this.txController.updateIncomingTransactions()})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapAdded`,((e,t=null)=>{const{manifest:{proposedName:r},version:n}=e;this.subjectMetadataController.addSubjectMetadata({subjectType:I.SubjectType.Snap,name:r,origin:e.id,version:n,svgIcon:t})})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapInstalled`,((e,t)=>{this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.SnapInstalled,category:te.MetaMetricsEventCategory.Snaps,properties:{snap_id:e.id,version:e.version,origin:t}})})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUpdated`,((e,t,r)=>{this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.SnapUpdated,category:te.MetaMetricsEventCategory.Snaps,properties:{snap_id:e.id,old_version:t,new_version:e.version,origin:r}})})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapTerminated`,(e=>{const t=Object.values(this.approvalController.state.pendingApprovals).filter((t=>t.origin===e.id&&t.type.startsWith(Q.RestrictedMethods.snap_dialog)));for(const e of t)this.approvalController.reject(e.id,new Error("Snap was terminated."))})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapRemoved`,(e=>{const t=Object.values(this.notificationController.state.notifications).reduce(((t,r)=>(r.origin===e.id&&t.push(r.id),t)),[]);this.dismissNotifications(t)})),this.controllerMessenger.subscribe(`${this.snapController.name}:snapUninstalled`,(e=>{this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.SnapUninstalled,category:te.MetaMetricsEventCategory.Snaps,properties:{snap_id:e.id,version:e.version}})}))}createPublicConfigStore(){const e=new i.ObservableStore,t=(e,{isUnlocked:t})=>({isUnlocked:t,chainId:e,networkVersion:this.deprecatedNetworkId??"loading"}),r=r=>{var n;const s=null===(n=r.networksMetadata[r.selectedNetworkClientId])||void 0===n?void 0:n.status,{chainId:i}=this.networkController.state.providerConfig;s===W.NetworkStatus.Available&&e.putState(t(i,r))};return this.on("update",r),r(this.getState()),e}async getProviderState(e){return{isUnlocked:this.isUnlocked(),accounts:await this.getPermittedAccounts(e),...this.getProviderNetworkState(this.preferencesController.getUseRequestQueue()?e:undefined)}}getProviderNetworkState(e="metamask"){let t;if(this.preferencesController.getUseRequestQueue()){const r=this.controllerMessenger.call("SelectedNetworkController:getNetworkClientIdForDomain",e)||this.networkController.state.selectedNetworkClientId;t=this.controllerMessenger.call("NetworkController:getNetworkClientById",r).configuration.chainId}else t=this.networkController.state.providerConfig.chainId;return{chainId:t,networkVersion:this.deprecatedNetworkId??"loading"}}async updateDeprecatedNetworkId(){try{this.deprecatedNetworkId=await this.deprecatedGetNetworkId()}catch(e){console.error(e),this.deprecatedNetworkId=null}this._notifyChainChange()}async deprecatedGetNetworkId(){const e=this.controllerMessenger.call("NetworkController:getEthQuery");if(!e)throw new Error("Provider has not been initialized");return new Promise(((t,r)=>{e.sendAsync({method:"net_version"},((e,n)=>{e?r(e):t((0,ue.convertNetworkId)(n))}))}))}getState(){const{vault:e}=this.keyringController.state,t=Boolean(e),r=this.memStore.getFlatState();return delete r.vault,{isInitialized:t,...r,snapStates:{},unencryptedSnapStates:{},snaps:Object.values(r.snaps??{}).reduce(((e,t)=>{const{sourceCode:r,auxiliaryFiles:n,...s}=t;return e[t.id]=s,e}),{})}}getApi(){const{addressBookController:e,alertController:t,appStateController:r,keyringController:n,nftController:s,nftDetectionController:i,currencyRateController:o,detectTokensController:a,ensController:c,gasFeeController:l,metaMetricsController:u,networkController:d,announcementController:h,onboardingController:p,permissionController:f,preferencesController:g,swapsController:m,tokensController:y,smartTransactionsController:b,txController:k,assetsContractController:w,backup:v,approvalController:C,phishingController:_}=this;return{getState:this.getState.bind(this),setCurrentCurrency:o.setCurrentCurrency.bind(o),setUseBlockie:g.setUseBlockie.bind(g),setUseNonceField:g.setUseNonceField.bind(g),setUsePhishDetect:g.setUsePhishDetect.bind(g),setUseMultiAccountBalanceChecker:g.setUseMultiAccountBalanceChecker.bind(g),setUseSafeChainsListValidation:g.setUseSafeChainsListValidation.bind(g),setUseTokenDetection:g.setUseTokenDetection.bind(g),setUseNftDetection:g.setUseNftDetection.bind(g),setUse4ByteResolution:g.setUse4ByteResolution.bind(g),setUseCurrencyRateCheck:g.setUseCurrencyRateCheck.bind(g),setOpenSeaEnabled:g.setOpenSeaEnabled.bind(g),getUseRequestQueue:this.preferencesController.getUseRequestQueue.bind(this.preferencesController),getProviderConfig:()=>this.networkController.state.providerConfig,setSecurityAlertsEnabled:g.setSecurityAlertsEnabled.bind(g),setAddSnapAccountEnabled:g.setAddSnapAccountEnabled.bind(g),setUseRequestQueue:this.setUseRequestQueue.bind(this),setIpfsGateway:g.setIpfsGateway.bind(g),setUseAddressBarEnsResolution:g.setUseAddressBarEnsResolution.bind(g),setParticipateInMetaMetrics:u.setParticipateInMetaMetrics.bind(u),setCurrentLocale:g.setCurrentLocale.bind(g),setIncomingTransactionsPreferences:g.setIncomingTransactionsPreferences.bind(g),markPasswordForgotten:this.markPasswordForgotten.bind(this),unMarkPasswordForgotten:this.unMarkPasswordForgotten.bind(this),getRequestAccountTabIds:this.getRequestAccountTabIds,getOpenMetamaskTabsIds:this.getOpenMetamaskTabsIds,markNotificationPopupAsAutomaticallyClosed:()=>this.notificationManager.markAsAutomaticallyClosed(),requestUserApproval:C.addAndShowApprovalRequest.bind(C),addNewAccount:this.addNewAccount.bind(this),verifySeedPhrase:this.verifySeedPhrase.bind(this),resetAccount:this.resetAccount.bind(this),removeAccount:this.removeAccount.bind(this),importAccountWithStrategy:this.importAccountWithStrategy.bind(this),getAccountsBySnapId:e=>(0,Ye.getAccountsBySnapId)(this,e),connectHardware:this.connectHardware.bind(this),forgetDevice:this.forgetDevice.bind(this),checkHardwareStatus:this.checkHardwareStatus.bind(this),unlockHardwareWalletAccount:this.unlockHardwareWalletAccount.bind(this),setLedgerTransportPreference:this.setLedgerTransportPreference.bind(this),attemptLedgerTransportCreation:this.attemptLedgerTransportCreation.bind(this),establishLedgerTransportPreference:this.establishLedgerTransportPreference.bind(this),submitQRHardwareCryptoHDKey:n.submitQRCryptoHDKey.bind(n),submitQRHardwareCryptoAccount:n.submitQRCryptoAccount.bind(n),cancelSyncQRHardware:n.cancelQRSynchronization.bind(n),submitQRHardwareSignature:n.submitQRSignature.bind(n),cancelQRHardwareSignRequest:n.cancelQRSignRequest.bind(n),submitPassword:this.submitPassword.bind(this),verifyPassword:this.verifyPassword.bind(this),setProviderType:e=>(this.selectedNetworkController.setNetworkClientIdForMetamask(e),this.networkController.setProviderType(e)),setActiveNetwork:e=>(this.selectedNetworkController.setNetworkClientIdForMetamask(e),this.networkController.setActiveNetwork(e)),rollbackToPreviousProvider:d.rollbackToPreviousProvider.bind(d),removeNetworkConfiguration:d.removeNetworkConfiguration.bind(d),upsertNetworkConfiguration:this.networkController.upsertNetworkConfiguration.bind(this.networkController),getCurrentNetworkEIP1559Compatibility:this.networkController.getEIP1559Compatibility.bind(this.networkController),setSelectedAddress:g.setSelectedAddress.bind(g),addToken:y.addToken.bind(y),updateTokenType:y.updateTokenType.bind(y),setAccountLabel:g.setAccountLabel.bind(g),setFeatureFlag:g.setFeatureFlag.bind(g),setPreference:g.setPreference.bind(g),addKnownMethodData:g.addKnownMethodData.bind(g),setDismissSeedBackUpReminder:g.setDismissSeedBackUpReminder.bind(g),setDisabledRpcMethodPreference:g.setDisabledRpcMethodPreference.bind(g),getRpcMethodPreferences:g.getRpcMethodPreferences.bind(g),setAdvancedGasFee:g.setAdvancedGasFee.bind(g),setTheme:g.setTheme.bind(g),setTransactionSecurityCheckEnabled:g.setTransactionSecurityCheckEnabled.bind(g),setSnapsAddSnapAccountModalDismissed:g.setSnapsAddSnapAccountModalDismissed.bind(g),getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),addNft:s.addNft.bind(s),addNftVerifyOwnership:s.addNftVerifyOwnership.bind(s),removeAndIgnoreNft:s.removeAndIgnoreNft.bind(s),removeNft:s.removeNft.bind(s),checkAndUpdateAllNftsOwnershipStatus:s.checkAndUpdateAllNftsOwnershipStatus.bind(s),checkAndUpdateSingleNftOwnershipStatus:s.checkAndUpdateSingleNftOwnershipStatus.bind(s),isNftOwner:s.isNftOwner.bind(s),setAddressBook:e.set.bind(e),removeFromAddressBook:e.delete.bind(e),setLastActiveTime:r.setLastActiveTime.bind(r),setDefaultHomeActiveTabName:r.setDefaultHomeActiveTabName.bind(r),setConnectedStatusPopoverHasBeenShown:r.setConnectedStatusPopoverHasBeenShown.bind(r),setRecoveryPhraseReminderHasBeenShown:r.setRecoveryPhraseReminderHasBeenShown.bind(r),setRecoveryPhraseReminderLastShown:r.setRecoveryPhraseReminderLastShown.bind(r),setTermsOfUseLastAgreed:r.setTermsOfUseLastAgreed.bind(r),setSnapsInstallPrivacyWarningShownStatus:r.setSnapsInstallPrivacyWarningShownStatus.bind(r),setOutdatedBrowserWarningLastShown:r.setOutdatedBrowserWarningLastShown.bind(r),setShowTestnetMessageInDropdown:r.setShowTestnetMessageInDropdown.bind(r),setShowBetaHeader:r.setShowBetaHeader.bind(r),setShowProductTour:r.setShowProductTour.bind(r),updateNftDropDownState:r.updateNftDropDownState.bind(r),setFirstTimeUsedNetwork:r.setFirstTimeUsedNetwork.bind(r),tryReverseResolveAddress:c.reverseResolveAddress.bind(c),setLocked:this.setLocked.bind(this),createNewVaultAndKeychain:this.createNewVaultAndKeychain.bind(this),createNewVaultAndRestore:this.createNewVaultAndRestore.bind(this),exportAccount:this.exportAccount.bind(this),updateTransaction:k.updateTransaction.bind(k),approveTransactionsWithSameNonce:k.approveTransactionsWithSameNonce.bind(k),createCancelTransaction:this.createCancelTransaction.bind(this),createSpeedUpTransaction:this.createSpeedUpTransaction.bind(this),estimateGas:this.estimateGas.bind(this),getNextNonce:this.getNextNonce.bind(this),addTransaction:this.addTransaction.bind(this),addTransactionAndWaitForPublish:this.addTransactionAndWaitForPublish.bind(this),createTransactionEventFragment:de.createTransactionEventFragmentWithTxId.bind(null,this.getTransactionMetricsRequest()),getTransactions:k.getTransactions.bind(k),updateEditableParams:k.updateEditableParams.bind(k),updateTransactionGasFees:k.updateTransactionGasFees.bind(k),updateTransactionSendFlowHistory:k.updateTransactionSendFlowHistory.bind(k),updatePreviousGasParams:k.updatePreviousGasParams.bind(k),decryptMessage:this.decryptMessageController.decryptMessage.bind(this.decryptMessageController),decryptMessageInline:this.decryptMessageController.decryptMessageInline.bind(this.decryptMessageController),cancelDecryptMessage:this.decryptMessageController.cancelDecryptMessage.bind(this.decryptMessageController),encryptionPublicKey:this.encryptionPublicKeyController.encryptionPublicKey.bind(this.encryptionPublicKeyController),cancelEncryptionPublicKey:this.encryptionPublicKeyController.cancelEncryptionPublicKey.bind(this.encryptionPublicKeyController),setSeedPhraseBackedUp:p.setSeedPhraseBackedUp.bind(p),completeOnboarding:p.completeOnboarding.bind(p),setFirstTimeFlowType:p.setFirstTimeFlowType.bind(p),setAlertEnabledness:t.setAlertEnabledness.bind(t),setUnconnectedAccountAlertShown:t.setUnconnectedAccountAlertShown.bind(t),setWeb3ShimUsageAlertDismissed:t.setWeb3ShimUsageAlertDismissed.bind(t),removePermissionsFor:this.removePermissionsFor,approvePermissionsRequest:this.acceptPermissionsRequest,rejectPermissionsRequest:this.rejectPermissionsRequest,...(0,ze.getPermissionBackgroundApiMethods)(f),disableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:disable"),enableSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:enable"),removeSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:remove"),handleSnapRequest:this.handleSnapRequest.bind(this),revokeDynamicSnapPermissions:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:revokeDynamicPermissions"),dismissNotifications:this.dismissNotifications.bind(this),markNotificationsAsRead:this.markNotificationsAsRead.bind(this),updateCaveat:this.updateCaveat.bind(this),getPhishingResult:async e=>(await _.maybeUpdateState(),_.test(e)),updateSnapRegistry:this.preferencesController.updateSnapRegistry.bind(g),fetchAndSetQuotes:m.fetchAndSetQuotes.bind(m),setSelectedQuoteAggId:m.setSelectedQuoteAggId.bind(m),resetSwapsState:m.resetSwapsState.bind(m),setSwapsTokens:m.setSwapsTokens.bind(m),clearSwapsQuotes:m.clearSwapsQuotes.bind(m),setApproveTxId:m.setApproveTxId.bind(m),setTradeTxId:m.setTradeTxId.bind(m),setSwapsTxGasPrice:m.setSwapsTxGasPrice.bind(m),setSwapsTxGasLimit:m.setSwapsTxGasLimit.bind(m),setSwapsTxMaxFeePerGas:m.setSwapsTxMaxFeePerGas.bind(m),setSwapsTxMaxFeePriorityPerGas:m.setSwapsTxMaxFeePriorityPerGas.bind(m),safeRefetchQuotes:m.safeRefetchQuotes.bind(m),stopPollingForQuotes:m.stopPollingForQuotes.bind(m),setBackgroundSwapRouteState:m.setBackgroundSwapRouteState.bind(m),resetPostFetchState:m.resetPostFetchState.bind(m),setSwapsErrorKey:m.setSwapsErrorKey.bind(m),setInitialGasEstimate:m.setInitialGasEstimate.bind(m),setCustomApproveTxData:m.setCustomApproveTxData.bind(m),setSwapsLiveness:m.setSwapsLiveness.bind(m),setSwapsFeatureFlags:m.setSwapsFeatureFlags.bind(m),setSwapsUserFeeLevel:m.setSwapsUserFeeLevel.bind(m),setSwapsQuotesPollingLimitEnabled:m.setSwapsQuotesPollingLimitEnabled.bind(m),setSmartTransactionsOptInStatus:b.setOptInState.bind(b),fetchSmartTransactionFees:b.getFees.bind(b),clearSmartTransactionFees:b.clearFees.bind(b),submitSignedTransactions:b.submitSignedTransactions.bind(b),cancelSmartTransaction:b.cancelSmartTransaction.bind(b),fetchSmartTransactionsLiveness:b.fetchLiveness.bind(b),updateSmartTransaction:b.updateSmartTransaction.bind(b),setStatusRefreshInterval:b.setStatusRefreshInterval.bind(b),trackMetaMetricsEvent:u.trackEvent.bind(u),trackMetaMetricsPage:u.trackPage.bind(u),createEventFragment:u.createEventFragment.bind(u),updateEventFragment:u.updateEventFragment.bind(u),finalizeEventFragment:u.finalizeEventFragment.bind(u),resolvePendingApproval:this.resolvePendingApproval,rejectPendingApproval:this.rejectPendingApproval,updateViewedNotifications:h.updateViewed.bind(h),getGasFeeEstimatesAndStartPolling:l.getGasFeeEstimatesAndStartPolling.bind(l),disconnectGasFeeEstimatePoller:l.disconnectPoller.bind(l),getGasFeeTimeEstimate:l.getTimeEstimate.bind(l),addPollingTokenToAppState:r.addPollingToken.bind(r),removePollingTokenFromAppState:r.removePollingToken.bind(r),backupUserData:v.backupUserData.bind(v),restoreUserData:v.restoreUserData.bind(v),detectNewTokens:a.detectNewTokens.bind(a),detectNfts:i.detectNfts.bind(i),addDetectedTokens:y.addDetectedTokens.bind(y),addImportedTokens:y.addTokens.bind(y),ignoreTokens:y.ignoreTokens.bind(y),getBalancesInSingleCall:w.getBalancesInSingleCall.bind(w),throwTestError:this.throwTestError.bind(this)}}async exportAccount(e,t){return await this.verifyPassword(t),this.keyringController.exportAccount(t,e)}async getTokenStandardAndDetails(e,t,r){var n,s;const{tokenList:i}=this.tokenListController.state,{tokens:o}=this.tokensController.state,a={...oe.STATIC_MAINNET_TOKEN_LIST[e.toLowerCase()]||{},...i[e.toLowerCase()]||{},...o.find((({address:t})=>(0,se.isEqualCaseInsensitive)(t,e)))||{}},c=(0,se.isEqualCaseInsensitive)(a.standard,H.TokenStandard.ERC20)||!0===a.erc20,l=!(r||(0,se.isEqualCaseInsensitive)(a.standard,H.TokenStandard.ERC1155)||(0,se.isEqualCaseInsensitive)(a.standard,H.TokenStandard.ERC721)||a.erc721),u=a.decimals!==undefined&&a.symbol;let d;if(c||l&&u)try{const r=await(0,ne.fetchTokenBalance)(e,t,this.provider);d={address:e,balance:r,standard:H.TokenStandard.ERC20,decimals:a.decimals,symbol:a.symbol}}catch(e){y.default.warning(`Failed to get token balance. Error: ${e}`)}return d===undefined&&(d=await this.assetsContractController.getTokenStandardAndDetails(e,t,r)),{...d,decimals:null===(n=d)||void 0===n||null===(n=n.decimals)||void 0===n?void 0:n.toString(10),balance:null===(s=d)||void 0===s||null===(s=s.balance)||void 0===s?void 0:s.toString(10)}}async createNewVaultAndKeychain(e){const t=await this.createVaultMutex.acquire();try{const t=await this.keyringController.createNewVaultAndKeychain(e),r=await this.keyringController.getAccounts();return this.preferencesController.setAddresses(r),this.selectFirstIdentity(),t}finally{t()}}async createNewVaultAndRestore(e,r){const n=await this.createVaultMutex.acquire();try{let n,s;const i=t.from(r);this.preferencesController.setAddresses([]),this.permissionController.clearState(),this.snapController.clearState(),this.notificationController.clear(),this.accountTracker.clearAccounts(),this.cachedBalancesController.clearCachedBalances(),this.txController.txStateManager.clearUnapprovedTxs();const o=await this.keyringController.createNewVaultAndRestore(e,this._convertMnemonicToWordlistIndices(i)),a=new C.default(this.provider);for(n=await this.keyringController.getAccounts(),s=await this.getBalance(n[n.length-1],a);"0x0"!==s;){const{addedAccountAddress:e}=await this.keyringController.addNewAccount(n.length);n=await this.keyringController.getAccounts(),s=await this.getBalance(e,a)}n.length>1&&"0x0"===s&&(await this.removeAccount(n[n.length-1]),n=await this.keyringController.getAccounts());const c=this.preferencesController.getLedgerTransportPreference();return this.setLedgerTransportPreference(c),this.selectFirstIdentity(),o}finally{n()}}_convertMnemonicToWordlistIndices(e){const t=e.toString().split(" ").map((e=>z.wordlist.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)}_convertEnglishWordlistIndicesToCodepoints(e){return t.from(Array.from(new Uint16Array(e.buffer)).map((e=>z.wordlist[e])).join(" "))}getBalance(e,t){return new Promise(((r,n)=>{const s=this.accountTracker.store.getState().accounts[e];s&&s.balance?r(s.balance):t.getBalance(e,((e,t)=>{e?(n(e),y.default.error(e)):r(t||"0x0")}))}))}async submitPassword(e){await this.keyringController.submitPassword(e);try{await this.blockTracker.checkForLatestBlock()}catch(e){y.default.error("Error while unlocking extension.",e)}const t=this.preferencesController.getLedgerTransportPreference();this.setLedgerTransportPreference(t)}async _loginUser(e){try{await this.submitPassword(e),await this.accountTracker._updateAccounts()}finally{this._startUISync()}}_startUISync(){this.emit("startUISync"),this.startUISync=!0,this.memStore.subscribe(this.sendUpdate.bind(this))}async submitEncryptionKey(){try{const{loginToken:e,loginSalt:t}=await this.extension.storage.session.get(["loginToken","loginSalt"]);if(e&&t){const{vault:r}=this.keyringController.state;if(JSON.parse(r).salt!==t)return console.warn("submitEncryptionKey: Stored salt and vault salt do not match"),void await this.clearLoginArtifacts();await this.keyringController.submitEncryptionKey(e,t)}}catch(e){throw await this.clearLoginArtifacts(),e}}async clearLoginArtifacts(){await this.extension.storage.session.remove(["loginToken","loginSalt"])}async verifyPassword(e){await this.keyringController.verifyPassword(e)}selectFirstIdentity(){const{identities:e}=this.preferencesController.store.getState(),[t]=Object.keys(e);this.preferencesController.setSelectedAddress(t)}getPrimaryKeyringMnemonic(){const[e]=this.keyringController.getKeyringsByType(J.KeyringType.hdKeyTree);if(!e.mnemonic)throw new Error("Primary keyring mnemonic unavailable.");return e.mnemonic}async getKeyringForDevice(e,t=null){var r,n,s,i;const o=null===(r=this.opts.overrides)||void 0===r?void 0:r.keyrings;let a=null;if(e!==Y.HardwareDeviceNames.QR&&!this.canUseHardwareWallets())throw new Error("Hardware wallets are not supported on this version.");switch(e){case Y.HardwareDeviceNames.trezor:a=(null==o||null===(n=o.trezor)||void 0===n?void 0:n.type)||b.TrezorKeyring.type;break;case Y.HardwareDeviceNames.ledger:a=(null==o||null===(s=o.ledger)||void 0===s?void 0:s.type)||k.default.type;break;case Y.HardwareDeviceNames.qr:a=v.MetaMaskKeyring.type;break;case Y.HardwareDeviceNames.lattice:a=(null==o||null===(i=o.lattice)||void 0===i?void 0:i.type)||w.default.type;break;default:throw new Error("MetamaskController:getKeyringForDevice - Unknown device")}let[c]=await this.keyringController.getKeyringsByType(a);if(c||(c=await this.keyringController.addNewKeyring(a)),t&&c.setHdPath&&c.setHdPath(t),e===Y.HardwareDeviceNames.lattice&&(c.appName="MetaMask"),e===Y.HardwareDeviceNames.trezor){const e=c.getModel();this.appStateController.setTrezorModel(e)}return c.network=this.networkController.state.providerConfig.type,c}async attemptLedgerTransportCreation(){const e=await this.getKeyringForDevice(Y.HardwareDeviceNames.ledger);return await e.attemptMakeApp()}async establishLedgerTransportPreference(){const e=this.preferencesController.getLedgerTransportPreference();return await this.setLedgerTransportPreference(e)}async connectHardware(e,t,r){const n=await this.getKeyringForDevice(e,r);let s=[];switch(t){case-1:s=await n.getPreviousPage();break;case 1:s=await n.getNextPage();break;default:s=await n.getFirstPage()}const i=await this.keyringController.getAccounts(),o=[...new Set(i.concat(s.map((e=>e.address.toLowerCase()))))];return this.accountTracker.syncWithAddresses(o),s}async checkHardwareStatus(e,t){return(await this.getKeyringForDevice(e,t)).isUnlocked()}async forgetDevice(e){const t=await this.getKeyringForDevice(e);for(const e of t.accounts)await this.removeAccount(e);return t.forgetDevice(),!0}async getAccountType(e){switch(await this.keyringController.getAccountKeyringType(e)){case J.KeyringType.trezor:case J.KeyringType.lattice:case J.KeyringType.qr:case J.KeyringType.ledger:return"hardware";case J.KeyringType.imported:return"imported";case J.KeyringType.snap:return"snap";default:return"MetaMask"}}async getDeviceModel(e){const t=await this.keyringController.getKeyringForAccount(e);switch(t.type){case J.KeyringType.trezor:return t.getModel();case J.KeyringType.qr:return t.getName();case J.KeyringType.ledger:return Y.HardwareDeviceNames.ledger;case J.KeyringType.lattice:return Y.HardwareDeviceNames.lattice;default:return undefined}}getAccountLabel(e,t,r){return`${e[0].toUpperCase()}${e.slice(1)} ${parseInt(t,10)+1} ${r||""}`.trim()}async unlockHardwareWalletAccount(e,t,r,n){const s=await this.getKeyringForDevice(t,r);s.setAccountToUnlock(e);const i=await this.keyringController.getAccounts(),o=await this.keyringController.addNewAccountForKeyring(s),a=await this.keyringController.getAccounts();this.preferencesController.setAddresses(a),a.forEach((r=>{if(!i.includes(r)){const i=this.getAccountLabel(t===Y.HardwareDeviceNames.qr?s.getName():t,e,n);this.preferencesController.setAccountLabel(r,i),this.preferencesController.setSelectedAddress(r)}}));const{identities:c}=this.preferencesController.store.getState();return{...o,identities:c}}async addNewAccount(e){const t=await this.keyringController.getAccounts(),{addedAccountAddress:r}=await this.keyringController.addNewAccount(e);return t.includes(r)||this.preferencesController.setSelectedAddress(r),r}async verifySeedPhrase(){return this._convertEnglishWordlistIndicesToCodepoints(await this.keyringController.verifySeedPhrase())}async resetAccount(){const e=this.preferencesController.getSelectedAddress();return this.txController.wipeTransactions(e),this.networkController.resetConnection(),e}async getPermittedAccounts(e,{suppressUnauthorizedError:t=!0}={}){try{return await this.permissionController.executeRestrictedMethod(e,Q.RestrictedMethods.eth_accounts)}catch(e){if(t&&e.code===g.errorCodes.provider.unauthorized)return[];throw e}}removeAllAccountPermissions(e){this.permissionController.updatePermissionsByCaveat(Q.CaveatTypes.restrictReturnedAccounts,(t=>ze.CaveatMutatorFactories[Q.CaveatTypes.restrictReturnedAccounts].removeAccount(e,t)))}async removeAccount(e){this.removeAllAccountPermissions(e);const t=await this.keyringController.getKeyringForAccount(e);await this.keyringController.removeAccount(e);const r=t?await t.getAccounts():{};var n;0===(null==r?void 0:r.length)&&(null===(n=t.destroy)||void 0===n||n.call(t));return e}async importAccountWithStrategy(e,t){const{importedAccountAddress:r}=await this.keyringController.importAccountWithStrategy(e,t);this.preferencesController.setSelectedAddress(r)}async newUnapprovedTransaction(e,t){const{result:r}=await this.txController.addTransaction(e,{actionId:t.id,method:t.method,origin:t.origin,requireApproval:!0,securityAlertResponse:t.securityAlertResponse});return await r}async addTransactionAndWaitForPublish(e,t){const{transactionMeta:r,result:n}=await this.txController.addTransaction(e,t);return await n,r}async addTransaction(e,t){const{transactionMeta:r,result:n}=await this.txController.addTransaction(e,t);return n.catch((()=>{})),r}async getCurrentAccountEIP1559Compatibility(){return!0}async createCancelTransaction(e,t,r){await this.txController.createCancelTransaction(e,t,r);return this.getState()}async createSpeedUpTransaction(e,t,r){await this.txController.createSpeedUpTransaction(e,t,r);return this.getState()}estimateGas(e){return new Promise(((t,r)=>this.txController.txGasUtil.query.estimateGas(e,((e,n)=>e?r(e):t(n.toString(16))))))}markPasswordForgotten(){this.preferencesController.setPasswordForgotten(!0),this.sendUpdate()}unMarkPasswordForgotten(){this.preferencesController.setPasswordForgotten(!1),this.sendUpdate()}setUseRequestQueue(e){this.preferencesController.setUseRequestQueue(e),this.selectedNetworkController.update((t=>{t.perDomainNetwork=e}))}setupUntrustedCommunication({connectionStream:e,sender:t,subjectType:r}){const{usePhishDetect:n}=this.preferencesController.store.getState();let s;if(s=r||(t.id&&t.id!==this.extension.runtime.id?I.SubjectType.Extension:I.SubjectType.Website),t.url){const{hostname:r}=new URL(t.url);this.phishingController.maybeUpdateState();const s=this.phishingController.test(r);if(n&&null!=s&&s.result)return this.sendPhishingWarning(e,r),void this.metaMetricsController.trackEvent({event:te.MetaMetricsEventName.PhishingPageDisplayed,category:te.MetaMetricsEventCategory.Phishing,properties:{url:r}})}const i=(0,Se.setupMultiplex)(e);this.setupProviderConnection(i.createStream("metamask-provider"),t,s),t.url&&this.setupPublicConfig(i.createStream("publicConfig"))}setupTrustedCommunication(e,t){const r=(0,Se.setupMultiplex)(e);this.setupControllerConnection(r.createStream("controller")),this.setupProviderConnection(r.createStream("provider"),t,I.SubjectType.Internal)}setupPhishingCommunication({connectionStream:e}){const{usePhishDetect:t}=this.preferencesController.store.getState();if(!t)return;const r=(0,Se.setupMultiplex)(e).createStream("metamask-phishing-safelist");r.on("data",(0,De.default)({safelistPhishingDomain:this.safelistPhishingDomain.bind(this),backToSafetyPhishingWarning:this.backToSafetyPhishingWarning.bind(this)},r))}sendPhishingWarning(e,t){(0,Se.setupMultiplex)(e).createStream("phishing").write({hostname:t})}setupControllerConnection(e){const t=this.getApi();this.activeControllerConnections+=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),e.on("data",(0,De.default)(t,e,this.store,this.localStoreApiWrapper));const r=t=>{e._writableState.ended||e.write({jsonrpc:"2.0",method:"sendUpdate",params:[t]})};this.on("update",r);const n=()=>{e._writableState.ended||e.write({jsonrpc:"2.0",method:"startUISync"})};this.startUISync?n():this.once("startUISync",n),e.on("end",(()=>{this.activeControllerConnections-=1,this.emit("controllerConnectionChanged",this.activeControllerConnections),this.removeListener("update",r)}))}setupProviderConnection(e,t,r){let n,i;n=r===I.SubjectType.Internal?ee.ORIGIN_METAMASK:r===I.SubjectType.Snap?t.snapId:new URL(t.url).origin,t.id&&t.id!==this.extension.runtime.id&&this.subjectMetadataController.addSubjectMetadata({origin:n,extensionId:t.id,subjectType:I.SubjectType.Extension}),t.tab&&t.tab.id&&(i=t.tab.id);const o=this.setupProviderEngine({origin:n,sender:t,subjectType:r,tabId:i}),a=(0,c.createEngineStream)({engine:o}),l=this.addConnection(n,{engine:o});(0,s.default)(e,a,e,(e=>{o._middleware.forEach((e=>{e.destroy&&"function"==typeof e.destroy&&e.destroy()})),l&&this.removeConnection(n,l),e&&y.default.error(e)}))}setupSnapProvider(e,t){this.setupUntrustedCommunication({connectionStream:t,sender:{snapId:e},subjectType:I.SubjectType.Snap})}setupProviderEngine({origin:e,subjectType:t,sender:r,tabId:n}){const s=new a.JsonRpcEngine,{blockTracker:i,provider:o}=this;s.push((0,ve.default)({origin:e})),s.push((0,O.createSelectedNetworkMiddleware)(this.controllerMessenger));const{selectedNetworkClientId:c}=this.networkController.state;this.selectedNetworkController.getNetworkClientIdForDomain(e)===undefined&&this.selectedNetworkController.setNetworkClientIdForDomain(e,c);let u=o;this.preferencesController.getUseRequestQueue()&&(u=this.selectedNetworkController.getProviderAndBlockTracker(e).provider);const d=(0,G.createQueuedRequestMiddleware)({messenger:this.controllerMessenger,useRequestQueue:this.preferencesController.getUseRequestQueue.bind(this.preferencesController)});s.push(d);const h=(0,p.default)({provider:o,blockTracker:i}),g=(0,f.default)({provider:o,blockTracker:i});return g.events.on("notification",(e=>s.emit("notification",e))),ce.isManifestV3&&s.push((0,be.default)()),n&&s.push((0,Ce.default)({tabId:n})),s.push((0,ke.default)({origin:e})),s.push(this.permissionLogController.createMiddleware()),s.push((0,pe.createPPOMMiddleware)(this.ppomController,this.preferencesController,this.networkController)),s.push((0,Ge.default)({trackEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getMetricsState:this.metaMetricsController.store.getState.bind(this.metaMetricsController.store),securityProviderRequest:this.securityProviderRequest.bind(this),getSelectedAddress:this.preferencesController.getSelectedAddress.bind(this.preferencesController),getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),snapAndHardwareMessenger:this.controllerMessenger.getRestricted({name:"SnapAndHardwareMessenger",allowedActions:["KeyringController:getKeyringForAccount","SnapController:get"]})})),t===I.SubjectType.Website&&s.push((0,_e.default)({location:r.url,registerOnboarding:this.onboardingController.registerOnboarding})),s.push((0,we.createMethodMiddleware)({origin:e,subjectType:t,addSubjectMetadata:this.subjectMetadataController.addSubjectMetadata.bind(this.subjectMetadataController),getProviderState:this.getProviderState.bind(this),getUnlockPromise:this.appStateController.getUnlockPromise.bind(this.appStateController),handleWatchAssetRequest:this.handleWatchAssetRequest.bind(this),requestUserApproval:this.approvalController.addAndShowApprovalRequest.bind(this.approvalController),startApprovalFlow:this.approvalController.startFlow.bind(this.approvalController),endApprovalFlow:this.approvalController.endFlow.bind(this.approvalController),setApprovalFlowLoadingText:this.approvalController.setFlowLoadingText.bind(this.approvalController),showApprovalSuccess:this.approvalController.success.bind(this.approvalController),showApprovalError:this.approvalController.error.bind(this.approvalController),sendMetrics:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),getAccounts:this.getPermittedAccounts.bind(this,e),getPermissionsForOrigin:this.permissionController.getPermissions.bind(this.permissionController,e),hasPermission:this.permissionController.hasPermission.bind(this.permissionController,e),requestAccountsPermission:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e},{eth_accounts:{}}),requestPermissionsForOrigin:this.permissionController.requestPermissions.bind(this.permissionController,{origin:e}),getCurrentChainId:()=>this.networkController.state.providerConfig.chainId,getCurrentRpcUrl:()=>this.networkController.state.providerConfig.rpcUrl,getNetworkConfigurations:()=>this.networkController.state.networkConfigurations,upsertNetworkConfiguration:this.networkController.upsertNetworkConfiguration.bind(this.networkController),setActiveNetwork:e=>{this.selectedNetworkController.setNetworkClientIdForMetamask(e),this.networkController.setActiveNetwork(e)},findNetworkClientIdByChainId:this.networkController.findNetworkClientIdByChainId.bind(this.networkController),findNetworkConfigurationBy:this.findNetworkConfigurationBy.bind(this),getNetworkClientIdForDomain:this.selectedNetworkController.getNetworkClientIdForDomain.bind(this.selectedNetworkController),setNetworkClientIdForDomain:this.selectedNetworkController.setNetworkClientIdForDomain.bind(this.selectedNetworkController),getUseRequestQueue:this.preferencesController.getUseRequestQueue.bind(this.preferencesController),getProviderConfig:()=>this.networkController.state.providerConfig,setProviderType:e=>(this.selectedNetworkController.setNetworkClientIdForMetamask(e),this.networkController.setProviderType(e)),getWeb3ShimUsageState:this.alertController.getWeb3ShimUsageState.bind(this.alertController),setWeb3ShimUsageRecorded:this.alertController.setWeb3ShimUsageRecorded.bind(this.alertController)})),s.push((0,we.createSnapMethodMiddleware)(t===I.SubjectType.Snap,{getUnlockPromise:this.appStateController.getUnlockPromise.bind(this.appStateController),getSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getPermitted",e),requestPermissions:async t=>await this.permissionController.requestPermissions({origin:e},t),getPermissions:this.permissionController.getPermissions.bind(this.permissionController,e),getSnapFile:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:getFile",e),installSnaps:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:install",e),hasPermission:this.permissionController.hasPermission.bind(this.permissionController),getSnap:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:get"),handleSnapRpcRequest:this.controllerMessenger.call.bind(this.controllerMessenger,"SnapController:handleRequest"),getAllowedKeyringMethods:(0,he.keyringSnapPermissionsBuilder)(this.subjectMetadataController)})),s.push(h),s.push(g.middleware),t!==I.SubjectType.Internal&&s.push(this.permissionController.createPermissionMiddleware({origin:e})),s.push(this.metamaskMiddleware),s.push((0,l.providerAsMiddleware)(u)),s}setupPublicConfig(e){const t=(0,o.storeAsStream)(this.publicConfigStore);(0,s.default)(t,e,(e=>{t.destroy(),e&&y.default.error(e)}))}addConnection(e,{engine:t}){if(e===ee.ORIGIN_METAMASK)return null;this.connections[e]||(this.connections[e]={});const r=(0,_.default)();return this.connections[e][r]={engine:t},r}removeConnection(e,t){const r=this.connections[e];r&&(delete r[t],0===Object.keys(r).length&&delete this.connections[e])}removeAllConnections(e){const t=this.connections[e];t&&Object.keys(t).forEach((t=>{this.removeConnection(e,t)}))}notifyConnections(e,t){const r=this.connections[e];r&&Object.values(r).forEach((e=>{e.engine&&e.engine.emit("notification",t)}))}notifyAllConnections(e){const t="function"==typeof e?t=>e(t):()=>e;Object.keys(this.connections).forEach((e=>{Object.values(this.connections[e]).forEach((async r=>{r.engine&&r.engine.emit("notification",await t(e))}))}))}async _onKeyringControllerUpdate(e){const{keyrings:t}=e,r=t.reduce(((e,{accounts:t})=>e.concat(t)),[]);r.length&&(this.preferencesController.syncAddresses(r),this.accountTracker.syncWithAddresses(r))}_onUnlock(){this.notifyAllConnections((async e=>({method:ze.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!0,accounts:await this.getPermittedAccounts(e)}}))),this.unMarkPasswordForgotten(),this.emit("unlock")}_onLock(){this.notifyAllConnections({method:ze.NOTIFICATION_NAMES.unlockStateChanged,params:{isUnlocked:!1}}),this.emit("lock")}_onStateUpdate(e){this.isClientOpenAndUnlocked=e.isUnlocked&&this._isClientOpen,this._notifyChainChange()}privateSendUpdate(){this.emit("update",this.getState())}isUnlocked(){return this.keyringController.state.isUnlocked}getExternalPendingTransactions(e){return this.smartTransactionsController.getTransactions({addressFrom:e,status:"pending"})}async getPendingNonce(e){const{nonceDetails:t,releaseLock:r}=await this.txController.nonceTracker.getNonceLock(e),n=t.params.highestSuggested;return r(),n}async getNextNonce(e){const t=await this.txController.nonceTracker.getNonceLock(e);return t.releaseLock(),t.nextNonce}throwTestError(e){setTimeout((()=>{const t=new Error(e);throw t.name="TestError",t}))}_addTransactionControllerListeners(){const e=this.getTransactionMetricsRequest();this.txController.on(H.TransactionEvent.postTransactionBalanceUpdated,de.handlePostTransactionBalanceUpdate.bind(null,e)),this.txController.on(H.TransactionEvent.added,de.handleTransactionAdded.bind(null,e)),this.txController.on(H.TransactionEvent.approved,de.handleTransactionApproved.bind(null,e)),this.txController.on(H.TransactionEvent.dropped,de.handleTransactionDropped.bind(null,e)),this.txController.on(H.TransactionEvent.confirmed,de.handleTransactionConfirmed.bind(null,e)),this.txController.on(H.TransactionEvent.failed,de.handleTransactionFailed.bind(null,e)),this.txController.on(H.TransactionEvent.newSwap,(({transactionMeta:e})=>{this.swapsController.setTradeTxId(e.id)})),this.txController.on(H.TransactionEvent.newSwapApproval,(({transactionMeta:e})=>{this.swapsController.setApproveTxId(e.id)})),this.txController.on(H.TransactionEvent.rejected,de.handleTransactionRejected.bind(null,e)),this.txController.on(H.TransactionEvent.submitted,de.handleTransactionSubmitted.bind(null,e)),this.txController.on("tx:status-update",(async(e,t)=>{if(t===H.TransactionStatus.confirmed||t===H.TransactionStatus.failed){const t=this.txController.txStateManager.getTransaction(e);let s={};if(t.chainId){const{networkConfigurations:e}=this.networkController.state,r=Object.values(e).find((e=>e.chainId===t.chainId));s=(null==r?void 0:r.rpcPrefs)??{}}try{await this.platform.showTransactionNotification(t,s)}catch(e){y.default.error("Failed to create transaction notification",e)}const{txReceipt:i}=t;if(t.type===H.TransactionType.tokenMethodTransferFrom&&t.txParams!==undefined){var r;const{data:e,to:n,from:s}=t.txParams,{chainId:i}=t,o=(0,ie.parseStandardTokenTransactionData)(e),a=(0,ne.getTokenIdParam)(o)??(0,ae.getTokenValueParam)(o),{allNfts:c}=this.nftController.state,l=null==c||null===(r=c[s])||void 0===r||null===(r=r[i])||void 0===r?void 0:r.find((({address:e,tokenId:t})=>(0,se.isEqualCaseInsensitive)(e,n)&&t===a));l&&this.nftController.checkAndUpdateSingleNftOwnershipStatus(l,!1,{userAddress:s,chainId:i})}const o=this.getState();var n;if(i&&"0x0"===i.status)this.metaMetricsController.trackEvent({event:"Tx Status Update: On-Chain Failure",category:te.MetaMetricsEventCategory.Background,properties:{action:"Transactions",errorMessage:null===(n=t.simulationFails)||void 0===n?void 0:n.reason,numberOfTokens:o.tokens.length,numberOfAccounts:Object.keys(o.accounts).length}},{matomoEvent:!0})}}))}getTransactionMetricsRequest(){return{...{createEventFragment:this.metaMetricsController.createEventFragment.bind(this.metaMetricsController),finalizeEventFragment:this.metaMetricsController.finalizeEventFragment.bind(this.metaMetricsController),getEventFragmentById:this.metaMetricsController.getEventFragmentById.bind(this.metaMetricsController),getParticipateInMetrics:()=>this.metaMetricsController.state.participateInMetaMetrics,trackEvent:this.metaMetricsController.trackEvent.bind(this.metaMetricsController),updateEventFragment:this.metaMetricsController.updateEventFragment.bind(this.metaMetricsController),getAccountType:this.getAccountType.bind(this),getDeviceModel:this.getDeviceModel.bind(this),getEIP1559GasFeeEstimates:this.gasFeeController.fetchGasFeeEstimates.bind(this.gasFeeController),getSelectedAddress:()=>this.preferencesController.store.getState().selectedAddress,getTokenStandardAndDetails:this.getTokenStandardAndDetails.bind(this),getTransaction:this.txController.txStateManager.getTransaction.bind(this.txController)},snapAndHardwareMessenger:this.controllerMessenger.getRestricted({name:"SnapAndHardwareMessenger",allowedActions:["KeyringController:getKeyringForAccount","SnapController:get"]}),provider:this.provider}}findNetworkConfigurationBy(e){const{networkConfigurations:t}=this.networkController.state;return Object.values(t).find((t=>Object.keys(e).some((r=>t[r]===e[r]))))||null}async setLedgerTransportPreference(e){if(!this.canUseHardwareWallets())return undefined;const t=this.preferencesController.getLedgerTransportPreference(),r=this.preferencesController.setLedgerTransportPreference(e),n=await this.getKeyringForDevice(Y.HardwareDeviceNames.ledger);return null!=n&&n.updateTransportMethod?n.updateTransportMethod(r).catch((e=>{throw this.preferencesController.setLedgerTransportPreference(t),e})):undefined}recordFirstTimeInfo(e){if(!("firstTimeInfo"in e)){const t=this.platform.getVersion();e.firstTimeInfo={version:t,date:Date.now()}}}set isClientOpen(e){this._isClientOpen=e,this.detectTokensController.isOpen=e}onClientClosed(){try{this.gasFeeController.stopPolling(),this.appStateController.clearPollingTokens()}catch(e){console.error(e)}}onEnvironmentTypeClosed(e){const t=ee.POLLING_TOKEN_ENVIRONMENT_TYPES[e];this.appStateController.store.getState()[t].forEach((e=>{this.gasFeeController.disconnectPoller(e),this.appStateController.removePollingToken(e,t)}))}safelistPhishingDomain(e){return this.phishingController.bypass(e)}async backToSafetyPhishingWarning(){const e=this.platform.getExtensionURL();await this.platform.switchToAnotherURL(undefined,e)}setLocked(){return this.keyringController.setLocked()}async securityProviderRequest(e,t){const{currentLocale:r,transactionSecurityCheckEnabled:n}=this.preferencesController.store.getState();if(n){const n=Number((0,le.hexToDecimal)(this.networkController.state.providerConfig.chainId));try{return await(0,He.securityProviderCheck)(e,t,n,r)}catch(e){throw y.default.error(e.message),e}}return null}async _onAccountChange(e){const t=(0,ze.getPermittedAccountsByOrigin)(this.permissionController.state);for(const[r,n]of t.entries())n.includes(e)&&this._notifyAccountsChange(r,n);await this.txController.updateIncomingTransactions()}async _notifyAccountsChange(e,t){this.isUnlocked()&&this.notifyConnections(e,{method:ze.NOTIFICATION_NAMES.accountsChanged,params:t.length<2?t:await this.getPermittedAccounts(e)}),this.permissionLogController.updateAccountsHistory(e,t)}_notifyChainChange(){this.preferencesController.getUseRequestQueue()?this.notifyAllConnections((e=>({method:ze.NOTIFICATION_NAMES.chainChanged,params:this.getProviderNetworkState(e)}))):this.notifyAllConnections({method:ze.NOTIFICATION_NAMES.chainChanged,params:this.getProviderNetworkState()})}}r.default=Xe}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/metamask-controller.js"}],[94,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:2,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=2;try{"etherscan"===t.data.config.provider.type&&(t.data.config.provider.type="rpc",t.data.config.provider.rpcTarget="https://rpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/002.js"}],[95,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:3,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=3;try{"https://rawtestrpc.metamask.io/"===t.data.config.provider.rpcTarget&&(t.data.config.provider.rpcTarget="https://testrpc.metamask.io/")}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/003.js"}],[96,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:4,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=4;try{if("rpc"!==t.data.config.provider.type)return Promise.resolve(t);switch(t.data.config.provider.rpcTarget){case"https://testrpc.metamask.io/":t.data.config.provider={type:"testnet"};break;case"https://rpc.metamask.io/":t.data.config.provider={type:"mainnet"}}}catch(e){}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/004.js"}],[97,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:5,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=5;try{const e=function(e){const{config:t}=e,r={...e,KeyringController:{vault:e.vault,selectedAccount:t.selectedAccount,walletNicknames:e.walletNicknames}};return delete r.vault,delete r.walletNicknames,delete r.config.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #5${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/005.js"}],[98,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:6,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=6;try{const e=function(e){const t=e.KeyringController,r={...e,PreferencesController:{selectedAddress:t.selectedAccount}};return delete r.KeyringController.selectedAccount,r}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #6${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/006.js"}],[99,{lodash:3346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:7,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=7;try{const e=function(e){const t={...e,TransactionManager:{transactions:e.transactions||[],gasMultiplier:e.gasMultiplier||1}};return delete t.transactions,delete t.gasMultiplier,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #7${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/007.js"}]],[],{});