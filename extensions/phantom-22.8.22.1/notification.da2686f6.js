(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e){return e&&e.__esModule?e.default:e}function t(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}var r={},a={},o=e.parcelRequirea886;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in a){var n=a[e];delete a[e];var t={id:e,exports:{}};return r[e]=t,n.call(t.exports,t,t.exports),t.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){a[e]=n},e.parcelRequirea886=o),o.register("5GStK",(function(n,t){var r=o("cuInp"),a="__lodash_hash_undefined__",i=9007199254740991,c="[object Arguments]",u="[object Boolean]",l="[object Date]",s="[object Function]",d="[object GeneratorFunction]",f="[object Map]",p="[object Number]",g="[object Object]",v="[object Promise]",m="[object RegExp]",y="[object Set]",h="[object String]",b="[object Symbol]",E="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",R="[object Uint8Array]",_="[object Uint8ClampedArray]",P="[object Uint16Array]",I="[object Uint32Array]",O=/\w*$/,j=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,B={};B[c]=B["[object Array]"]=B[T]=B[A]=B[u]=B[l]=B[x]=B[w]=B[S]=B[k]=B[C]=B[f]=B[p]=B[g]=B[m]=B[y]=B[h]=B[b]=B[R]=B[_]=B[P]=B[I]=!0,B["[object Error]"]=B[s]=B[E]=!1;var L="object"==typeof e&&e&&e.Object===Object&&e,q="object"==typeof self&&self&&self.Object===Object&&self,N=L||q||Function("return this")(),W="object"==typeof t&&t&&!t.nodeType&&t,F=W&&n&&!n.nodeType&&n,D=F&&F.exports===W;function H(e,n){return e.set(n[0],n[1]),e}function z(e,n){return e.add(n),e}function U(e,n,t,r){var a=-1,o=e?e.length:0;for(r&&o&&(t=e[++a]);++a<o;)t=n(t,e[a],a,e);return t}function V(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}function K(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}function Z(e,n){return function(t){return e(n(t))}}function G(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var J,Q=Array.prototype,X=Function.prototype,$=Object.prototype,Y=N["__core-js_shared__"],ee=(J=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"",ne=X.toString,te=$.hasOwnProperty,re=$.toString,ae=RegExp("^"+ne.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=D?N.Buffer:void 0,ie=N.Symbol,ce=N.Uint8Array,ue=Z(Object.getPrototypeOf,Object),le=Object.create,se=$.propertyIsEnumerable,de=Q.splice,fe=Object.getOwnPropertySymbols,pe=oe?oe.isBuffer:void 0,ge=Z(Object.keys,Object),ve=Fe(N,"DataView"),me=Fe(N,"Map"),ye=Fe(N,"Promise"),he=Fe(N,"Set"),be=Fe(N,"WeakMap"),Ee=Fe(Object,"create"),Te=Ve(ve),Ae=Ve(me),xe=Ve(ye),we=Ve(he),Se=Ve(be),ke=ie?ie.prototype:void 0,Ce=ke?ke.valueOf:void 0;function Re(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function _e(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Pe(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ie(e){this.__data__=new _e(e)}function Oe(e,n){var t=Ze(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ge(e)}(e)&&te.call(e,"callee")&&(!se.call(e,"callee")||re.call(e)==c)}(e)?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],r=t.length,a=!!r;for(var o in e)!n&&!te.call(e,o)||a&&("length"==o||ze(o,r))||t.push(o);return t}function je(e,n,t){var r=e[n];te.call(e,n)&&Ke(r,t)&&(void 0!==t||n in e)||(e[n]=t)}function Me(e,n){for(var t=e.length;t--;)if(Ke(e[t][0],n))return t;return-1}function Be(e,n,t,r,a,o,i){var v;if(r&&(v=o?r(e,a,o,i):r(e)),void 0!==v)return v;if(!Xe(e))return e;var E=Ze(e);if(E){if(v=function(e){var n=e.length,t=e.constructor(n);n&&"string"==typeof e[0]&&te.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!n)return function(e,n){var t=-1,r=e.length;n||(n=Array(r));for(;++t<r;)n[t]=e[t];return n}(e,v)}else{var j=He(e),M=j==s||j==d;if(Je(e))return function(e,n){if(n)return e.slice();var t=new e.constructor(e.length);return e.copy(t),t}(e,n);if(j==g||j==c||M&&!o){if(V(e))return o?e:{};if(v=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:(n=ue(e),Xe(n)?le(n):{});var n}(M?{}:e),!n)return function(e,n){return Ne(e,De(e),n)}(e,function(e,n){return e&&Ne(n,$e(n),e)}(v,e))}else{if(!B[j])return o?e:{};v=function(e,n,t,r){var a=e.constructor;switch(n){case T:return qe(e);case u:case l:return new a(+e);case A:return function(e,n){var t=n?qe(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,r);case x:case w:case S:case k:case C:case R:case _:case P:case I:return function(e,n){var t=n?qe(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,r);case f:return function(e,n,t){return U(n?t(K(e),!0):K(e),H,new e.constructor)}(e,r,t);case p:case h:return new a(e);case m:return function(e){var n=new e.constructor(e.source,O.exec(e));return n.lastIndex=e.lastIndex,n}(e);case y:return function(e,n,t){return U(n?t(G(e),!0):G(e),z,new e.constructor)}(e,r,t);case b:return o=e,Ce?Object(Ce.call(o)):{}}var o}(e,j,Be,n)}}i||(i=new Ie);var L=i.get(e);if(L)return L;if(i.set(e,v),!E)var q=t?function(e){return function(e,n,t){var r=n(e);return Ze(e)?r:function(e,n){for(var t=-1,r=n.length,a=e.length;++t<r;)e[a+t]=n[t];return e}(r,t(e))}(e,$e,De)}(e):$e(e);return function(e,n){for(var t=-1,r=e?e.length:0;++t<r&&!1!==n(e[t],t,e););}(q||e,(function(a,o){q&&(a=e[o=a]),je(v,o,Be(a,n,t,r,o,e,i))})),v}function Le(e){return!(!Xe(e)||(n=e,ee&&ee in n))&&(Qe(e)||V(e)?ae:j).test(Ve(e));var n}function qe(e){var n=new e.constructor(e.byteLength);return new ce(n).set(new ce(e)),n}function Ne(e,n,t,r){t||(t={});for(var a=-1,o=n.length;++a<o;){var i=n[a],c=r?r(t[i],e[i],i,t,e):void 0;je(t,i,void 0===c?e[i]:c)}return t}function We(e,n){var t,a,o=e.__data__;return("string"==(a=void 0===(t=n)?"undefined":r.typeOf(t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function Fe(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return Le(t)?t:void 0}Re.prototype.clear=function(){this.__data__=Ee?Ee(null):{}},Re.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Re.prototype.get=function(e){var n=this.__data__;if(Ee){var t=n[e];return t===a?void 0:t}return te.call(n,e)?n[e]:void 0},Re.prototype.has=function(e){var n=this.__data__;return Ee?void 0!==n[e]:te.call(n,e)},Re.prototype.set=function(e,n){return this.__data__[e]=Ee&&void 0===n?a:n,this},_e.prototype.clear=function(){this.__data__=[]},_e.prototype.delete=function(e){var n=this.__data__,t=Me(n,e);return!(t<0)&&(t==n.length-1?n.pop():de.call(n,t,1),!0)},_e.prototype.get=function(e){var n=this.__data__,t=Me(n,e);return t<0?void 0:n[t][1]},_e.prototype.has=function(e){return Me(this.__data__,e)>-1},_e.prototype.set=function(e,n){var t=this.__data__,r=Me(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},Pe.prototype.clear=function(){this.__data__={hash:new Re,map:new(me||_e),string:new Re}},Pe.prototype.delete=function(e){return We(this,e).delete(e)},Pe.prototype.get=function(e){return We(this,e).get(e)},Pe.prototype.has=function(e){return We(this,e).has(e)},Pe.prototype.set=function(e,n){return We(this,e).set(e,n),this},Ie.prototype.clear=function(){this.__data__=new _e},Ie.prototype.delete=function(e){return this.__data__.delete(e)},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,n){var t=this.__data__;if(t instanceof _e){var r=t.__data__;if(!me||r.length<199)return r.push([e,n]),this;t=this.__data__=new Pe(r)}return t.set(e,n),this};var De=fe?Z(fe,Object):function(){return[]},He=function(e){return re.call(e)};function ze(e,n){return!!(n=null==n?i:n)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<n}function Ue(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||$)}function Ve(e){if(null!=e){try{return ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ke(e,n){return e===n||e!=e&&n!=n}(ve&&He(new ve(new ArrayBuffer(1)))!=A||me&&He(new me)!=f||ye&&He(ye.resolve())!=v||he&&He(new he)!=y||be&&He(new be)!=E)&&(He=function(e){var n=re.call(e),t=n==g?e.constructor:void 0,r=t?Ve(t):void 0;if(r)switch(r){case Te:return A;case Ae:return f;case xe:return v;case we:return y;case Se:return E}return n});var Ze=Array.isArray;function Ge(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!Qe(e)}var Je=pe||function(){return!1};function Qe(e){var n=Xe(e)?re.call(e):"";return n==s||n==d}function Xe(e){var n=void 0===e?"undefined":r.typeOf(e);return!!e&&("object"==n||"function"==n)}function $e(e){return Ge(e)?Oe(e):function(e){if(!Ue(e))return ge(e);var n=[];for(var t in Object(e))te.call(e,t)&&"constructor"!=t&&n.push(t);return n}(e)}n.exports=function(e){return Be(e,!0,!0)}}));var i=o("yrqZm"),c=o("jLXMA"),u=o("a9js8"),l=o("7gyel"),s=o("llWfe"),d=o("kp2lL"),f=o("lx1eT"),p=o("36vNa");o("jDHv3");var g={};t(g,"BackgroundConnectionProvider",(function(){return A}),(function(e){return A=e})),t(g,"useIncomingBackgroundRequest",(function(){return w}),(function(e){return w=e})),t(g,"usePostOutgoingBackgroundResponse",(function(){return S}),(function(e){return S=e}));var v=o("cuInp"),m=o("1vgyn"),y=(i=o("yrqZm"),o("4P3Ea")),h=o("hZbar"),b=(f=o("lx1eT"),function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))}),E={isConnected:!1,lastMessage:null,postMessage:h.NOOP},T=n(i).createContext(E),A=function(e){var t=e.children,r=v.slicedToArray(function(){var e=this,t=v.slicedToArray(i.useState(null),2),r=t[0],a=t[1],o=v.slicedToArray(i.useState(null),2),c=o[0],u=o[1];i.useEffect((function(){var t,r=e;return function(){return b(r,void 0,void 0,n(m).mark((function e(){var r,o;return n(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getCurrentWindowAsync();case 2:r=e.sent,o="notification/".concat(r.id),t=y.browser.runtime.connect({name:o}),a(t),t.onMessage.addListener((function(e){u(e)})),t.onDisconnect.addListener((function(){a(null)}));case 8:case"end":return e.stop()}}),e)})))}(),function(){null==t||t.disconnect()}}),[]);var l=i.useCallback((function(e){r&&r.postMessage(e)}),[r]);return[!!r,c,l]}(),3),a=r[0],o=r[1],c=r[2];return n(i).createElement(T.Provider,{value:{isConnected:a,lastMessage:o,postMessage:c}},t)};function x(){var e=i.useContext(T);if(!e)throw new Error("Missing background connection context");return e}function w(){var e=x().lastMessage;return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function S(){var e=w(),n=x().postMessage;return i.useCallback((function(t){if(!e)throw new Error("No request received from the background yet");if(e.req.id!==t.id)throw new Error("Request id: ".concat(e.req.id," does not match response id: ").concat(t.id));n(t)}),[e,n])}var k=o("cmZE1"),C=o("d90YX"),R=o("dbeqQ"),_=o("3ljdI"),P=o("bYUy0"),I=o("O5qCZ"),O=o("6BByg"),j=o("cAlJD"),M=o("icEzW"),B=(v=o("cuInp"),o("5GStK")),L=(i=o("yrqZm"),o("5BN27")),q=o("bMiEi"),N=o("226dB"),W=(u=o("a9js8"),C=o("d90YX"),v=o("cuInp"),i=o("yrqZm"),L=o("5BN27"),o("gVpKh")),F=o("jcs3P"),D=o("dfTp4"),H=o("gXPCw"),z=o("ivCTy"),U=o("lP5so"),V=o("1Jwz2"),K=o("kb4iW");function Z(){var e=v.taggedTemplateLiteral(["\n  border-top: 1px solid #333333;\n  border-bottom: 1px solid #333333;\n  width: 100%;\n  display: flex;\n  padding: 10px 5px;\n"]);return Z=function(){return e},e}function G(){var e=v.taggedTemplateLiteral(["\n  > * {\n    margin: 18px 0px;\n  }\n"]);return G=function(){return e},e}function J(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  > * {\n    margin: 0px ","px;\n    text-align: left;\n  }\n"]);return J=function(){return e},e}var Q=function(e){return e},X=L.default.div(hn||(hn=Q(Z()))),$=L.default.div(bn||(bn=Q(G()))),Y=L.default.div(cn||(cn=Q(J(),0)),(function(e){return e.spacing})),ee=function(e){var t=e.tabId,r=e.origin,a=e.confirmApproval,o=e.denyApproval,c=W.useTranslation().t;return n(i).createElement(H.Container,null,n(i).createElement(z.AccountHeader,{lastChild:n(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),n(i).createElement(H.Body,null,n(i).createElement(H.TopGroup,null,n(i).createElement(V.TabIconHeader,{tabId:t,secondaryText:F.removeWebPrefixes(r)})),n(i).createElement(X,null,n(i).createElement($,null,n(i).createElement(Y,{spacing:8},n(i).createElement(K.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},c("notificationApplicationApprovalPermissionsPrimary"))),n(i).createElement(Y,{spacing:8},n(i).createElement(D.CheckmarkIcon,{fill:"#21E56F"}),n(i).createElement(K.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsViewWalletActivity"))),n(i).createElement(Y,{spacing:8},n(i).createElement(D.CheckmarkIcon,{fill:"#21E56F"}),n(i).createElement(K.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsTransactionApproval"))))),n(i).createElement(H.BottomGroup,null,n(i).createElement(Y,{spacing:4},n(i).createElement(K.Text,{size:14,lineHeight:17,color:"#777"},c("notificationApplicationApprovalConnectDisclaimer"))))),n(i).createElement(H.Footer,{plain:!0},n(i).createElement(U.ButtonPair,{primaryText:c("notificationApplicationApprovalActionButtonConnect"),secondaryText:c("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:function(){return a(r)},onSecondaryClicked:function(){return o(r)}})))},ne=o("kAFed"),te=o("2uRZU"),re=o("kJkjp"),ae=o("k0p5K");function Z(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n"]);return Z=function(){return e},e}Q=function(e){return e};var oe=L.default.div(hn||(hn=Q(Z()))),ie=function(e){var t,r=e.tabId,a=e.origin,o=e.requestId,c=C.useSelectedSolanaAccount().accountClient.publicKey.toString(),l=g.usePostOutgoingBackgroundResponse(),s=v.slicedToArray(ne.useStorage(N.StorageKeys.TrustedApplicationsByOwnerBrowser,{}),3),d=s[0],f=s[1],p=s[2],m=null!==(t=d[c])&&void 0!==t?t:{},y=void 0!==m[a],h=v.slicedToArray(n(i).useState(!1),2),b=h[0],E=h[1],T=v.slicedToArray(n(i).useState(!1),2),A=T[0],x=T[1],w=function(e){var t=n(B)(m);t[e]=!0,q.analytics.capture("connectionConfirm",{data:{origin:e}}),p(Object.assign(Object.assign({},d),v.defineProperty({},c,t)))},S=function(){q.analytics.capture("connectionDeny",{data:{origin:a}});var e=u.createJsonRpcErrorResponse(o,u.RpcErrorCode.UserRejectedRequest);l(e)},k=i.useCallback((function(){var e={publicKey:c},n=u.createJsonRpcResponse(o,e);l(n)}),[c,l,o]);return i.useEffect((function(){y?k():re.detectPhishing(a).then((function(e){x(e.result),E(!0)})).catch((function(){E(!0)}))}),[k,a,y]),y?null:f||!b?n(i).createElement(oe,null,n(i).createElement(ae.Spinner,null)):A?n(i).createElement(te.BlocklistConnectRequest,{tabId:r,origin:a,confirmApproval:w,denyApproval:S}):n(i).createElement(ee,{tabId:r,origin:a,confirmApproval:w,denyApproval:S})},ce={};t(ce,"SignatureRequest",(function(){return On}),(function(e){return On=e}));v=o("cuInp"),m=o("1vgyn"),i=o("yrqZm"),W=o("gVpKh");var ue=o("9iuQf"),le=o("egP4A"),se=(q=o("bMiEi"),s=o("llWfe"),N=o("226dB"),u=o("a9js8"),l=o("7gyel"),o("67fgn")),de=(C=o("d90YX"),R=o("dbeqQ"),k=o("cmZE1"),{});t(de,"WarningSeverity",(function(){return fe}),(function(e){return fe=e})),t(de,"Sign",(function(){return ve}),(function(e){return ve=e})),t(de,"StateChangeKind",(function(){return me}),(function(e){return me=e})),t(de,"useFetchScannedTransaction",(function(){return Te}),(function(e){return Te=e}));m=o("1vgyn"),i=o("yrqZm");var fe,pe,ge,ve,me,ye=o("cLNsJ"),he=(W=o("gVpKh"),ue=o("9iuQf"),o("g7NFf")),be=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))};!function(e){e.Critical="CRITICAL",e.Warning="WARNING"}(fe||(fe={})),function(e){e.InsufficientFunds="INSUFFICIENT_FUNDS",e.ResultWithNegativeLamports="ACCOUNT_DOES_NOT_HAVE_ENOUGH_SOL_TO_PERFORM_THE_OPERATION",e.InvalidRentPayingAccount="TRANSACTION_LEAVES_AN_ACCOUNT_WITH_A_LOWER_BALANCE_THAN_RENT-EXEMPT_MINIMUM"}(pe||(pe={})),function(e){e.None="NONE",e.Warn="WARN",e.Block="BLOCK",e.HardBlock="HARD_BLOCK"}(ge||(ge={})),function(e){e.Plus="PLUS",e.Minus="MINUS"}(ve||(ve={})),function(e){e.SolTransfer="SOL_TRANSFER",e.SplTransfer="SPL_TRANSFER",e.SplApproval="SPL_APPROVAL"}(me||(me={}));var Ee,Te=function(e,t,r,a){var o,c=ue.getOrigin(t)||"",u=(o={queryKey:["evaluate-txs",{transactions:e,origin:c,userAccount:r}],queryFn:function(){return be(void 0,void 0,void 0,n(m).mark((function t(){var a,o,i,u,l,s,d,f,p,g,v;return n(m).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=new AbortController,o=a.signal,setTimeout((function(){a.abort()}),1e4),(i=new Headers).append("Content-Type","application/json"),u={transactions:e,userAccount:r,metadata:{origin:c}},l={method:"POST",headers:i,body:JSON.stringify(u)},s="".concat("https://api.phantom.app/solana","/transaction/scan/v1?language=").concat(W.i18next.language),d=new Request(s,l),n.next=12,fetch(d,{signal:o});case 12:if(!(f=n.sent).ok){n.next=24;break}return n.next=16,f.json();case 16:if(void 0!==(p=n.sent).warnings&&void 0!==p.action&&void 0!==p.simulationResults){n.next=19;break}return n.abrupt("return",{error:new Error("Ninja API response missing required fields")});case 19:return null!==(g=p.simulationResults.error)&&console.log("Simulation error: ",g.humanReadableError),n.abrupt("return",{evaluation:p});case 24:return n.next=26,f.json();case 26:return v=n.sent,n.abrupt("return",{error:new Error("Ninja API returned non-200 response: ".concat(f.status,": ").concat(JSON.stringify(v)))});case 28:n.next=37;break;case 30:if(n.prev=30,n.t0=n.catch(0),!n.t0.message.toLowerCase().includes("aborted")){n.next=36;break}return n.abrupt("return",{error:ye.ERR_REQUEST_TIMEOUT_REACHED});case 36:return n.abrupt("return",{error:n.t0});case 37:case"end":return n.stop()}}),t,null,[[0,30]])})))},enabled:!!e,refetchInterval:5e3},he.useQuery(o)),l=i.useMemo((function(){var e,n,t,r,a,o=null===(e=u.data)||void 0===e?void 0:e.evaluation;if(o){var i=null===(n=null==o?void 0:o.simulationResults)||void 0===n?void 0:n.error,c=null===(t=null==o?void 0:o.simulationResults)||void 0===t?void 0:t.isRecentBlockhashExpired,l=(null==o?void 0:o.action)===ge.Block||(null==o?void 0:o.action)===ge.HardBlock,s=(null==i?void 0:i.kind)===pe.InsufficientFunds;a={notEnoughSol:(null==i?void 0:i.kind)===pe.ResultWithNegativeLamports||(null==i?void 0:i.kind)===pe.InvalidRentPayingAccount,isBlockRecommended:l,insufficientSplTokens:s,isRecentBlockhashExpired:c}}return{isLoading:!u.isFetched,error:(null===(r=u.data)||void 0===r?void 0:r.error)||u.error,evaluation:o,computedEvaluation:a}}),[u]),s=l.error;return i.useEffect((function(){s&&a(s)}),[a,s]),l},Ae=o("6hDva");v=o("cuInp"),L=o("5BN27"),i=o("yrqZm"),W=o("gVpKh");!function(e){e.Green="GREEN",e.Red="RED",e.White="WHITE"}(Ee||(Ee={}));var xe=function(e){var n=e.rawInfo,t=n.kind,r=n.data;switch(t){case de.StateChangeKind.SolTransfer:return r.diff.sign===de.Sign.Plus?Ee.Green:Ee.Red;case de.StateChangeKind.SplTransfer:return r.diff.sign===de.Sign.Plus?Ee.Green:Ee.Red;case de.StateChangeKind.SplApproval:return r.diff.sign===de.Sign.Plus?Ee.Red:Ee.Green;default:return Ee.White}},we=(F=o("jcs3P"),l=o("7gyel"),o("jv0Mt")),Se=(H=o("gXPCw"),z=o("ivCTy"),U=o("lP5so"),V=o("1Jwz2"),o("4wfyg"));v=o("cuInp"),L=o("5BN27"),K=o("kb4iW");function Z(){var e=v.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return Z=function(){return e},e}function G(){var e=v.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return G=function(){return e},e}function J(){var e=v.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return J=function(){return e},e}function ke(){var e=v.taggedTemplateLiteral([""]);return ke=function(){return e},e}function Ce(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  > * {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ce=function(){return e},e}Q=function(e){return e};var Re=L.default.section(hn||(hn=Q(Z()))),_e=L.default.div(bn||(bn=Q(G()))),Pe=(L.default.div(cn||(cn=Q(J()))),L.default(K.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})(Be||(Be=Q(ke()))),L.default.div(Le||(Le=Q(Ce())))),Ie=(K=o("kb4iW"),{});t(Ie,"TransactionInstructionRows",(function(){return Fe}),(function(e){return Fe=e})),t(Ie,"SignMessageInstructionRow",(function(){return De}),(function(e){return De=e})),t(Ie,"RowCard",(function(){return Je}),(function(e){return Je=e}));v=o("cuInp"),m=o("1vgyn"),L=o("5BN27"),i=o("yrqZm"),q=o("bMiEi"),F=o("jcs3P"),C=o("d90YX"),v=o("cuInp"),i=o("yrqZm");Se=o("4wfyg"),K=o("kb4iW");var Oe=o("6zN1H"),je=o("blOe7"),Me=(se=o("67fgn"),Ae=o("6hDva"),o("7Khu8"));function Z(){var e=v.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return Z=function(){return e},e}function G(){var e=v.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return G=function(){return e},e}function J(){var e=v.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return J=function(){return e},e}function ke(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n"]);return ke=function(){return e},e}function Ce(){var e=v.taggedTemplateLiteral(["\n  text-decoration: none;\n  cursor: pointer;\n"]);return Ce=function(){return e},e}Q=function(e){return e};var Be,Le,qe=o("ehiNV").Buffer,Ne=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},We=[],Fe=function(e){var t=e.messages,r=C.useSelectedSolanaAccount().accountClient,a=i.useCallback((function(){return Ne(void 0,void 0,void 0,n(m).mark((function e(){var a,o;return n(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return r.decodeMessageAsync(e)})));case 2:return a=e.sent,(o=a.filter((function(e){return void 0!==e}))).flat().forEach((function(e){e&&q.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))}),[r,t]),o=v.slicedToArray(function(e,t){var r=v.slicedToArray(n(i).useState({value:t,error:null,isPending:!0}),2),a=r[0],o=r[1];return n(i).useEffect((function(){e().then((function(e){return o({value:e,error:null,isPending:!1})})).catch((function(e){return o({value:t,error:e.toString(),isPending:!1})}))}),[e,t]),[a.value,a.error,a.isPending]}(a,We),3),c=o[0],u=(o[1],o[2]),l=c.flat();return n(i).createElement(Se.LoadingContent,{isLoading:u},l.map((function(e,t){return n(i).createElement(Ge,{key:t,decodedMessage:e})})))},De=function(e){var t,r=e.message,a=e.display;if("hex"===(void 0===a?"utf8":a))t="0x".concat(qe.from(r).toString("hex"));else t=(new TextDecoder).decode(r);return n(i).createElement(He,null,n(i).createElement(ze,null,n(i).createElement(K.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),n(i).createElement(Oe.Info,{tooltipAlignment:"bottomRight",info:n(i).createElement(je.TooltipContent,{paddingLeft:10,paddingRight:10},n(i).createElement(je.TooltipText,null,"Make sure you understand what you are signing and trust the application that is requesting this."))})),n(i).createElement(Ue,null,n(i).createElement(Ve,null,n(i).createElement(K.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},t))))},He=L.default.section(hn||(hn=Q(Z()))),ze=L.default.div(bn||(bn=Q(G()))),Ue=L.default.div(cn||(cn=Q(J()))),Ve=L.default.div(Be||(Be=Q(ke()))),Ke=L.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})(Le||(Le=Q(Ce()))),Ze=function(e){var n=e.condition,t=e.wrapper,r=e.children;return n?t(r):r},Ge=function(e){var t,r=e.decodedMessage,a=null===(t=Ae.useFetchConnection())||void 0===t?void 0:t.data,o=null==a?void 0:a.cluster,c=Me.usePreferredExplorer().preferredExplorer,u=i.useMemo((function(){return Xe(r)}),[r]),l=i.useMemo((function(){return tn(r,c.type,o)}),[r,o,c]);return n(i).createElement(Je,{title:u,rowItems:l})},Je=function(e){var t=e.title,r=e.rowItems,a=e.emptyDescription,o=e.info;return n(i).createElement(He,null,n(i).createElement(ze,null,n(i).createElement(K.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),o&&n(i).createElement(Oe.Info,{info:o})),n(i).createElement(Ue,null,r.map((function(e){var t=e.keyText,r=e.valueText,a=e.valueColor,o=e.link;return n(i).createElement(Ve,{key:r||t},t&&n(i).createElement(K.Text,{size:14,lineHeight:17,color:"#777777"},t),n(i).createElement(Ze,{condition:o,wrapper:function(e){return n(i).createElement(Ke,{href:o},e)}},n(i).createElement(K.Text,{size:14,weight:500,lineHeight:20,color:a,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word",textAlign:"left"},r)))})),0===r.length&&n(i).createElement(Ve,null,n(i).createElement(K.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},a))))},Qe={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},Xe=function(e){var n,t=e.type;return null!==(n=Qe[t])&&void 0!==n?n:t},$e={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},Ye={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},en={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},nn=function(e,n){var t=e.market,r=e.marketInfo,a=e.data,o=[];r&&o.push({keyText:"Market",valueText:r.name});var i=a.side,c=a.limitPrice,u=a.maxQuantity,l=a.maxBaseQuantity,s=a.orderType,d=a.ownerPubkey;o.push({keyText:"Side",valueText:i.charAt(0).toUpperCase()+i.slice(1)}),o.push({keyText:"Price",valueText:(null==t?void 0:t.priceLotsToNumber(c))||""+c});var f=n?l:u;return o.push({keyText:"Quantity",valueText:(null==t?void 0:t.baseSizeLotsToNumber(f))||""+f}),o.push({keyText:"Type",valueText:s.charAt(0).toUpperCase()+s.slice(1)}),o.push({keyText:"Owner",valueText:an(d)}),o},tn=function(e,n,t){switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return function(e,n,t){var r=[];return e.marketInfo&&r.push({keyText:"Market",valueText:e.marketInfo.name}),rn(r,e.data,$e,n,t),r}(e,n,t);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return function(e,n,t){var r=[];return rn(r,e.data,Ye,n,t),r}(e,n,t);case"systemCreate":case"systemTransfer":return function(e,n,t){var r=[];return rn(r,e.data,en,n,t),r}(e,n,t);case"newOrder":return nn(e,!1);case"newOrderV3":return nn(e,!0);case"unknown":case"createAssociatedTokenAccount":return function(e,n,t){var r=e.rawData,a=r.length>20?F.formatHashMedium(r,10):r,o=e.data.programId,i=t?se.generateAddressExplorerUrl(o.toString(),t,n):void 0;return a?[{keyText:"Program Id",valueText:an(o),valueColor:"#8A81F8",link:i},{keyText:"Data",valueText:a}]:[{keyText:"Program Id",valueText:an(o),valueColor:"#8A81F8",link:i}]}(e,n,t);default:return[]}},rn=function(e,n,t,r,a){Object.entries(n).forEach((function(n){var o=v.slicedToArray(n,2),i=o[0],c=o[1],u=t[i];if(u){var l=u.label,s="",d=void 0,f=void 0;u.isAddress?(s=an(c),a&&(d=se.generateAddressExplorerUrl(c.toString(),a,r),f="#8A81F8")):"lamports"===i?s="".concat(F.formatTokenAmount(F.lamportsToSolana(Number(c)))," SOL"):"function"==typeof c.toString()?s=c.toString():"string"==typeof c&&(s=c),e.push({keyText:l,valueText:s,valueColor:f,link:d})}}))},an=function(e){var n=e.toString();return F.formatHashMedium(n)},on=(je=o("blOe7"),Oe=o("6zN1H"),o("18N0k"));function Z(){var e=v.taggedTemplateLiteral(["\n  height: 150px;\n"]);return Z=function(){return e},e}function G(){var e=v.taggedTemplateLiteral(["\n  color: ",";\n"]);return G=function(){return e},e}function J(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 12px 20px;\n  width: 100%;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return J=function(){return e},e}Q=function(e){return e};var cn,un,ln=L.default(Se.LoadingContent)(hn||(hn=Q(Z()))),sn=L.default(K.Text)(bn||(bn=Q(G(),0)),(function(e){return e.isCritical?pn:fn})),dn=L.default.div(cn||(cn=Q(J(),0)),(function(e){return e.isCritical?pn:fn})),fn="#FFDC62",pn="#EB3742",gn=(un={},v.defineProperty(un,Ee.Green,"#21E56F"),v.defineProperty(un,Ee.Red,pn),v.defineProperty(un,Ee.White,"white"),un),vn=function(e){var t=e.tabId,r=e.origin,a=e.messages,o=e.confirmApproval,c=e.denyApproval,u=e.transactionName,s=e.txnsScanResult,d=W.useTranslation().t,f=we.useGetNetworkFee()*l.getRequiredSignatures(a),p=v.slicedToArray(i.useState(!1),2),g=p[0],m=p[1],y=s.evaluation,h=(null==y?void 0:y.warnings)||[],b=n(i).createElement(je.TooltipContent,{paddingLeft:10,paddingRight:10},n(i).createElement(je.TooltipText,null,d("notificationTransactionApprovalEstimatesBasedOnSimulations"))),E=[];return s.error||(null==y?void 0:y.simulationResults.error)?E=[{valueText:d("notificationTransactionApprovalUnableToSimulate"),valueColor:fn,textAlign:"left"}]:y&&(E=y.simulationResults.expectedStateChanges.map((function(e){return{valueText:e.humanReadableDiff,valueColor:gn[xe(e)]}}))),n(i).createElement(H.Container,null,n(i).createElement(z.AccountHeader,{firstChild:n(i).createElement("div",null),lastChild:n(i).createElement("div",null)}),n(i).createElement(H.Body,null,n(i).createElement(H.Icon,null,n(i).createElement(V.TabIconHeader,{tabId:t,primaryText:u,secondaryText:F.removeWebPrefixes(r)})),n(i).createElement(ln,{isLoading:s.isLoading,showingDelayMs:0},h.slice(0,1).map((function(e){return n(i).createElement(dn,{isCritical:e.severity===de.WarningSeverity.Critical},n(i).createElement(sn,{size:14,weight:500,lineHeight:19.6,isCritical:e.severity===de.WarningSeverity.Critical},e.message))})),n(i).createElement(Ie.RowCard,{title:d("notificationTransactionApprovalEstimatedChanges"),rowItems:E,emptyDescription:d("notificationTransactionApprovalNoAssetOwnershipImpactingChanges"),info:b}),n(i).createElement(Re,null,n(i).createElement(_e,null,n(i).createElement(Pe,null,n(i).createElement(K.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},n(i).createElement(Oe.Info,{info:n(i).createElement(je.TooltipContent,{paddingLeft:10,paddingRight:10},n(i).createElement(je.TooltipText,null,d("notificationTransactionApprovalSolanaAmountRequired")))}),d("notificationTransactionApprovalNetworkFee")),n(i).createElement(K.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},n(i).createElement(on.SolBalance,null,f))))),n(i).createElement(K.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:function(){return m(!g)}},d(g?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),g&&n(i).createElement(Ie.TransactionInstructionRows,{messages:a}))),n(i).createElement(H.Footer,null,n(i).createElement(U.ButtonPair,{primaryText:d("notificationTransactionApprovalActionButtonApprove"),secondaryText:d("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:o,onSecondaryClicked:c,primaryDisabled:s.isLoading})))},mn=o("1pPit"),yn=(H=o("gXPCw"),v=o("cuInp"),i=o("yrqZm"),L=o("5BN27"),F=o("jcs3P"),z=o("ivCTy"),V=o("1Jwz2"),U=o("lP5so"),o("7QLhw"));K=o("kb4iW"),H=o("gXPCw");function Z(){var e=v.taggedTemplateLiteral(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 10px 10px;\n  margin-bottom: 10px;\n"]);return Z=function(){return e},e}function G(){var e=v.taggedTemplateLiteral(["\n  margin: auto;\n"]);return G=function(){return e},e}Q=function(e){return e};var hn,bn,En="#eb3742",Tn=L.default.div(hn||(hn=Q(Z(),0)),En),An=L.default(K.Text)(bn||(bn=Q(G()))),xn=n(i).memo((function(e){return n(i).createElement(H.Container,null,n(i).createElement(z.AccountHeader,{lastChild:n(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),n(i).createElement(H.Body,null,n(i).createElement(H.TopGroup,null,n(i).createElement(V.TabIconHeader,{tabId:e.tabId,secondaryText:F.removeWebPrefixes(e.origin),showWarning:!0})),n(i).createElement(yn.Column,{justify:"center"},n(i).createElement(Tn,null,n(i).createElement(K.Text,{size:14,color:En},e.message)),n(i).createElement(An,{size:14,color:"#777777",hoverColor:En,onClick:e.proceedToApproval},e.ignoreWarningText))),n(i).createElement(H.Footer,{plain:!0},n(i).createElement(U.Button,{onClick:e.denyApproval},e.buttonText)))})),wn=o("kdBkh"),Sn=(i=o("yrqZm"),W=o("gVpKh"),o("5k7fc")),kn=o("boS9l"),Cn=n(i).memo((function(e){var t=e.onCancelClick,r=e.title,a=e.description,o=W.useTranslation().t;return n(i).createElement(Sn.PopupAndNotificationFallbackContainer,null,n(i).createElement(kn.TransactionStatusDetail,{icon:"error",title:r,buttonText:o("signatureRequestErrorNoticeActionButtonCancel"),onClose:t},n(i).createElement(Sn.DefaultErrorMessage,{margin:"0 10px 5px 10px"},a)))})),Rn=o("865pP"),_n=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},Pn=function(e){var t,r,a,o=e.tabId,c=e.origin,d=e.requestId,f=e.requestMethod,p=e.unsignedTransactions,y=e.unsignedTransactionMessages,h=e.signAndSendSignatures,b=e.options,E=i.useMemo((function(){return{data:{origin:ue.getOrigin(c)}}}),[c]),T=v.slicedToArray(i.useState(!1),2),A=T[0],x=T[1],w=R.useTransactionsManager(),S=k.useDetailViews(),_=S.pushDetailView,P=S.popDetailView,I=v.slicedToArray(Rn.useFeatureFlags(["tx-submission-service"]),1)[0],O=g.usePostOutgoingBackgroundResponse(),j=C.useSelectedSolanaAccount(),M=j.accountClient,B=j.accountMeta,L=M.publicKey.toString(),F=B.type===N.AccountType.Ledger,D=Ae.useFetchConnection();if(D.error)throw new Error("Failed to fetch the connection");var z=D.data,U=null==z?void 0:z.connection,V=function(e,n,t,r){var a,o=de.useFetchScannedTransaction(e,n,t,s.captureException);return{txnsScanResult:o,isMaliciousTransaction:(null===(a=o.computedEvaluation)||void 0===a?void 0:a.isBlockRecommended)&&!r}}(p,c,L,A),K=V.txnsScanResult,Z=V.isMaliciousTransaction,G=null===(t=K.computedEvaluation)||void 0===t?void 0:t.isRecentBlockhashExpired,J=null===(r=K.computedEvaluation)||void 0===r?void 0:r.insufficientSplTokens,Q=null===(a=K.computedEvaluation)||void 0===a?void 0:a.notEnoughSol,X=W.useTranslation().t,$=X("notificationSignatureRequestApproveTransactionCapitalized"),Y=X("notEnoughSplTokensTitle"),ee=X("notEnoughSplTokensDescription"),ne=X("maliciousTransactionWarning"),te=X("maliciousTransactionWarningIgnoreWarning"),re=X("maliciousTransactionWarningButtonClose"),ae=X("transactionExpiredPrimaryText"),oe=X("transactionExpiredSecondaryText"),ie=i.useCallback((function(e){return _n(void 0,void 0,void 0,n(m).mark((function t(){var r,a,o,s,p,g,v,E,T,A,x;return n(m).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(U){t.next=2;break}return t.abrupt("return");case 2:if(a=F?new le.AccountClient(U,se.createSignerFromLedgerAccountMeta(B,e),I,w):M,t.prev=4,f!==u.ProviderToWalletRequestMethods.SignAndSendTransaction){t.next=14;break}return o=l.messageAndSignaturesToTransaction(y[0],h),t.next=9,a.signAndSendTransactionAsync(o,b);case 9:s=t.sent,q.analytics.capture("signAndSendTransaction",{data:{origin:c}}),r=u.createSignSuccessResponse(d,s,L),t.next=43;break;case 14:p=[],g=!0,v=!1,E=void 0,t.prev=16,T=y[Symbol.iterator]();case 18:if(g=(A=T.next()).done){t.next=28;break}return x=A.value,t.t0=p,t.next=23,a.signMessageAsync(x);case 23:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 25:g=!0,t.next=18;break;case 28:t.next=34;break;case 30:t.prev=30,t.t2=t.catch(16),v=!0,E=t.t2;case 34:t.prev=34,t.prev=35,g||null==T.return||T.return();case 37:if(t.prev=37,!v){t.next=40;break}throw E;case 40:return t.finish(37);case 41:return t.finish(34);case 42:f===u.ProviderToWalletRequestMethods.SignTransaction?(q.analytics.capture("signTransaction",{data:{origin:c}}),r=u.createSignSuccessResponse(d,p[0],L)):f===u.ProviderToWalletRequestMethods.SignAllTransactions&&(q.analytics.capture("signAllTransactions",{data:{origin:c}}),r=u.createSignAllTransactionsSuccessResponse(d,p,L));case 43:q.analytics.capture("transactionConfirm",{data:{origin:ue.getOrigin(c)}}),O(r),t.next=51;break;case 47:t.prev=47,t.t3=t.catch(4),console.error(t.t3),mn.isKnownLedgerActionError(t.t3)?_(n(i).createElement(H.LedgerWrapper,null,n(i).createElement(mn.LedgerActionError,{ledgerActionError:t.t3,onRetryClick:function(){P()},onCancelClick:function(){r=u.createJsonRpcErrorResponse(d,u.RpcErrorCode.UserRejectedRequest),O(r)}}))):F?(r=u.createJsonRpcErrorResponse(d,u.RpcErrorCode.UserRejectedRequest),O(r)):(r=u.createJsonRpcErrorResponse(d,u.RpcErrorCode.TransactionRejected,null===t.t3||void 0===t.t3?void 0:t.t3.message),O(r));case 51:case"end":return t.stop()}}),t,null,[[4,47],[16,30,34,42],[35,,37,41]])})))}),[U,F,B,I,w,M,f,c,O,y,h,b,d,L,_,P]),ce=i.useCallback((function(){var e=u.createJsonRpcErrorResponse(d,u.RpcErrorCode.UserRejectedRequest);q.analytics.capture("transactionDeny",E),O(e)}),[d,E,O]),fe=i.useCallback((function(){F?_(n(i).createElement(H.LedgerWrapper,null,n(i).createElement(mn.LedgerAction,{ledgerAction:ie,cancel:ce})),{shouldShowBackButton:!1}):ie()}),[F,_,ie,ce]),pe=i.useCallback((function(){q.analytics.capture("userIgnoredKnownMaliciousWarning",E),x(!0)}),[E,x]),ge=i.useMemo((function(){switch(!0){case Z:return n(i).createElement(xn,{tabId:o,origin:c,message:ne,ignoreWarningText:te,buttonText:re,proceedToApproval:pe,denyApproval:ce});case J:return n(i).createElement(Cn,{title:Y,description:ee,onCancelClick:ce});case G:return n(i).createElement(Cn,{title:ae,description:oe,onCancelClick:ce});case Q:return n(i).createElement(wn.NotEnoughSol,{onCancelClick:ce});default:return null}}),[o,c,pe,ce,Z,ne,te,re,J,Y,ee,G,ae,oe,Q]);return{data:{title:$,denyApproval:ce,confirmApproval:fe,txnsScanResult:K},loading:!D.isFetched||K.isLoading,SignatureRequestErrorComponent:ge}},In=n(i).memo((function(e){var t;return n(i).createElement(vn,{tabId:e.tabId,origin:e.origin,messages:null!==(t=e.unsignedTransactionMessages)&&void 0!==t?t:[],confirmApproval:e.confirmApproval,denyApproval:e.denyApproval,transactionName:e.title,txnsScanResult:e.txnsScanResult})})),On=n(i).memo((function(e){var t=Pn(e);return t.SignatureRequestErrorComponent?t.SignatureRequestErrorComponent:n(i).createElement(In,Object.assign({},e,t.data))})),jn={};t(jn,"SignMessageRequest",(function(){return Ln}),(function(e){return Ln=e}));m=o("1vgyn"),i=o("yrqZm"),q=o("bMiEi"),u=o("a9js8"),N=o("226dB"),F=o("jcs3P"),C=o("d90YX"),k=o("cmZE1"),mn=o("1pPit"),U=o("lP5so"),z=o("ivCTy"),H=o("gXPCw"),V=o("1Jwz2");var Mn=o("ehiNV").Buffer,Bn=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}u((r=r.apply(e,n||[])).next())}))},Ln=function(e){var t=e.origin,r=e.requestId,a=e.message,o=e.display,c=e.tabId,l=g.usePostOutgoingBackgroundResponse(),s=C.useSelectedSolanaAccount(),d=s.accountClient,f=s.accountMeta,p=k.useDetailViews().pushDetailView,v=i.useCallback((function(){var e=u.createJsonRpcErrorResponse(r,u.RpcErrorCode.UserRejectedRequest);q.analytics.capture("transactionDeny",{data:{origin:t}}),l(e)}),[r,t,l]),y=i.useCallback((function(){return Bn(void 0,void 0,void 0,n(m).mark((function e(){var o,i,c,s;return n(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d,e.prev=1,e.next=4,o.signUTF8(Mn.from(a).toString());case 4:i=e.sent,c=o.publicKey.toString(),s=u.createSignSuccessResponse(r,i,c),q.analytics.capture("signMessageConfirm",{data:{origin:t}}),l(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),v();case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))}),[d,a,r,t,l,v]),h=i.useCallback((function(){f.type===N.AccountType.Ledger?p(n(i).createElement(H.LedgerWrapper,null,n(i).createElement(mn.LedgerAction,{ledgerAction:y,cancel:v})),{shouldShowBackButton:!1}):y()}),[f.type,v,p,y]);return n(i).createElement(H.Container,null,n(i).createElement(z.AccountHeader,{firstChild:n(i).createElement("div",null),lastChild:n(i).createElement("div",null)}),n(i).createElement(H.Body,null,n(i).createElement(H.Icon,null,n(i).createElement(V.TabIconHeader,{tabId:c,primaryText:"Signature Request",secondaryText:F.removeWebPrefixes(t)})),n(i).createElement(Ie.SignMessageInstructionRow,{message:a,display:o})),n(i).createElement(H.Footer,null,n(i).createElement(U.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:h,onSecondaryClicked:v})))},qn=(Sn=o("5k7fc"),o("5j83m")),Nn=o("cwHVg");s.initSentry();var Wn=function(){var e=g.useIncomingBackgroundRequest();if(!e)return null;var t=e.origin,r=e.req,a=e.tabId,o=r.id,c=r.method,s=r.params,d=s.message,f=s.messages,p=s.transaction,v=s.transactions,m=s.display,y=s.options,h=p?l.transactionStringToMessageString(p):d,b=v?v.map((function(e){return l.transactionStringToMessageString(e)})):f,E=c===u.ProviderToWalletRequestMethods.Connect,T=c===u.ProviderToWalletRequestMethods.SignMessage,A=c===u.ProviderToWalletRequestMethods.SignTransaction,x=c===u.ProviderToWalletRequestMethods.SignAllTransactions,w=c===u.ProviderToWalletRequestMethods.SignAndSendTransaction,S=A||x,C=h instanceof Uint8Array?h:u.objectToUint8Array(null!=h?h:{}),R=A||w?[h]:x?b:void 0,_=A||w?[d?l.messageStringToTransactionString(d):p]:x?f?f.map((function(e){return l.messageStringToTransactionString(e)})):v:void 0,P=w&&p?l.transactionStringToTransaction(p,"bs58").signatures:void 0,I=E?"Connection Error":"Transaction Error",O="There was an error attempting to ".concat(E?"connect to the application":"sign the transaction",". Please try again.");return Nn.useRootGroupEffect(),Nn.useCaptureOpen("notificationOpen",{data:{method:c}}),n(i).createElement(Sn.PopupAndNotificationErrorBoundary,{title:I,message:O},E?n(i).createElement(ie,{tabId:a,origin:t,requestId:o}):T?n(i).createElement(k.DetailViewsProvider,null,n(i).createElement(jn.SignMessageRequest,{tabId:a,origin:t,requestId:o,message:C,display:m})):S?n(i).createElement(k.DetailViewsProvider,null,n(i).createElement(ce.SignatureRequest,{tabId:a,origin:t,requestId:o,requestMethod:c,unsignedTransactionMessages:R,unsignedTransactions:_})):w?n(i).createElement(k.DetailViewsProvider,null,n(i).createElement(ce.SignatureRequest,{tabId:a,origin:t,requestId:o,requestMethod:c,unsignedTransactionMessages:R,unsignedTransactions:_,signAndSendSignatures:P,options:y})):null)},Fn=function(){var e=i.useCallback((function(e){return n(i).createElement(I.ModalsProvider,null,n(i).createElement(P.WalletMenuProvider,null,n(i).createElement(M.Unlock,{onUnlock:e})))}),[]),t=i.useCallback((function(){f.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return n(i).createElement(n(i).Fragment,null,n(i).createElement(d.ThemedGlobalStyle,{backgroundColor:"#222222"}),n(i).createElement(Sn.PopupAndNotificationErrorBoundary,null,n(i).createElement(j.Main,null,n(i).createElement(O.QueryProvider,null,n(i).createElement(g.BackgroundConnectionProvider,null,n(i).createElement(qn.ExtensionLockWrapper,{renderLocked:e,openOnboarding:t},n(i).createElement(R.TransactionsProvider,null,n(i).createElement(_.HardwareWalletProvider,null,n(i).createElement(C.SolanaAccountsProvider,null,n(i).createElement(P.WalletMenuProvider,null,n(i).createElement(Wn,null)))))))),n(i).createElement("div",{id:p.MODAL_ID}))))};c.render(n(i).createElement(Fn,null),document.getElementById("root"))}();define=__define;})(window.define);