LavaPack.loadBundle([[4365,{"is-deflate":4739,"is-gzip":4742,"peek-stream":5416,pumpify:4381,through2:4382,zlib:4367},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("zlib"),i=e("peek-stream"),s=e("through2"),o=e("pumpify"),a=e("is-gzip"),c=e("is-deflate"),u=function(e){return e===undefined&&(e=3),i({newline:!1,maxBuffer:10},(function(t,r){if(e<0)return r(new Error("Maximum recursion reached"));switch(function(e){return a(e)?1:c(e)?2:0}(t)){case 1:r(null,o(n.createGunzip(),u(e-1)));break;case 2:r(null,o(n.createInflate(),u(e-1)));break;default:r(null,s())}}))};t.exports=u}}},{package:"@metamask/snap-controllers>gunzip-maybe"}],[4366,{_process:5430,buffer:2132,"pako/lib/zlib/constants":4371,"pako/lib/zlib/deflate.js":4373,"pako/lib/zlib/inflate.js":4375,"pako/lib/zlib/messages":4377,"pako/lib/zlib/zstream":4379},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){var i=e("pako/lib/zlib/messages"),s=e("pako/lib/zlib/zstream"),o=e("pako/lib/zlib/deflate.js"),a=e("pako/lib/zlib/inflate.js"),c=e("pako/lib/zlib/constants");for(var u in c)r[u]=c[u];function l(e){if(e<r.DEFLATE||e>r.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function f(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7,l.prototype.init=function(e,t,n,i,c){switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,this.mode!==r.GZIP&&this.mode!==r.GUNZIP||(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),this.mode!==r.DEFLATERAW&&this.mode!==r.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var u=o.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:u=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}u===r.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(u)},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===r.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},l.prototype.write=function(e,r,n,i,s,o,a){this._writeCheck(),this.write_in_progress=!0;var c=this;return t.nextTick((function(){c.write_in_progress=!1;var t=c._write(e,r,n,i,s,o,a);c.callback(t[0],t[1]),c.pending_close&&c.close()})),this},l.prototype.writeSync=function(e,t,r,n,i,s,o){return this._writeCheck(),this._write(e,t,r,n,i,s,o)},l.prototype._write=function(e,t,i,s,c,u,l){if(this.write_in_progress=!0,e!==r.Z_NO_FLUSH&&e!==r.Z_PARTIAL_FLUSH&&e!==r.Z_SYNC_FLUSH&&e!==r.Z_FULL_FLUSH&&e!==r.Z_FINISH&&e!==r.Z_BLOCK)throw new Error("Invalid flush value");null==t&&(t=new n(0),s=0,i=0),c._set?c.set=c._set:c.set=f;var h=this.strm;switch(h.avail_in=s,h.input=t,h.next_in=i,h.avail_out=l,h.output=c,h.next_out=u,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var d=o.deflate(h,e);break;case r.UNZIP:case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:d=a.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return d!==r.Z_STREAM_END&&d!==r.Z_OK&&this._error(d),this.write_in_progress=!1,[h.avail_in,h.avail_out]},l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?o.deflateEnd(this.strm):a.inflateEnd(this.strm),this.mode=r.NONE)},l.prototype.reset=function(){switch(this.mode){case r.DEFLATE:case r.DEFLATERAW:var e=o.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:e=a.inflateReset(this.strm)}e!==r.Z_OK&&this._error(e)},l.prototype._error=function(e){this.onerror(i[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},r.Zlib=l}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib"}],[4367,{"./binding":4366,_process:5430,_stream_transform:5711,assert:1805,buffer:2132,util:2138},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t,n){(function(){var i=e("_stream_transform"),s=e("./binding"),o=e("util"),a=e("assert").ok;function c(e,t,r){var i=[],s=0;function o(){for(var t;null!==(t=e.read());)i.push(t),s+=t.length;e.once("readable",o)}function a(){var t=n.concat(i,s);i=[],r(null,t),e.close()}e.on("error",(function(t){e.removeListener("end",a),e.removeListener("readable",o),r(t)})),e.on("end",a),e.end(t),o()}function u(e,t){if("string"==typeof t&&(t=new n(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=s.Z_FINISH;return e._processChunk(t,r)}function l(e){if(!(this instanceof l))return new l(e);m.call(this,e,s.DEFLATE)}function f(e){if(!(this instanceof f))return new f(e);m.call(this,e,s.INFLATE)}function h(e){if(!(this instanceof h))return new h(e);m.call(this,e,s.GZIP)}function d(e){if(!(this instanceof d))return new d(e);m.call(this,e,s.GUNZIP)}function p(e){if(!(this instanceof p))return new p(e);m.call(this,e,s.DEFLATERAW)}function g(e){if(!(this instanceof g))return new g(e);m.call(this,e,s.INFLATERAW)}function b(e){if(!(this instanceof b))return new b(e);m.call(this,e,s.UNZIP)}function m(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||r.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&e.flush!==s.Z_NO_FLUSH&&e.flush!==s.Z_PARTIAL_FLUSH&&e.flush!==s.Z_SYNC_FLUSH&&e.flush!==s.Z_FULL_FLUSH&&e.flush!==s.Z_FINISH&&e.flush!==s.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||s.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<r.Z_MIN_CHUNK||e.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<r.Z_MIN_WINDOWBITS||e.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<r.Z_MIN_LEVEL||e.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<r.Z_MIN_MEMLEVEL||e.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=r.Z_FILTERED&&e.strategy!=r.Z_HUFFMAN_ONLY&&e.strategy!=r.Z_RLE&&e.strategy!=r.Z_FIXED&&e.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new s.Zlib(t);var o=this;this._hadError=!1,this._binding.onerror=function(e,t){o._binding=null,o._hadError=!0;var n=new Error(e);n.errno=t,n.code=r.codes[t],o.emit("error",n)};var a=r.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(a=e.level);var c=r.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._binding.init(e.windowBits||r.Z_DEFAULT_WINDOWBITS,a,e.memLevel||r.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=new n(this._chunkSize),this._offset=0,this._closed=!1,this._level=a,this._strategy=c,this.once("end",this.close)}s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=Infinity,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION,Object.keys(s).forEach((function(e){e.match(/^Z/)&&(r[e]=s[e])})),r.codes={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},Object.keys(r.codes).forEach((function(e){r.codes[r.codes[e]]=e})),r.Deflate=l,r.Inflate=f,r.Gzip=h,r.Gunzip=d,r.DeflateRaw=p,r.InflateRaw=g,r.Unzip=b,r.createDeflate=function(e){return new l(e)},r.createInflate=function(e){return new f(e)},r.createDeflateRaw=function(e){return new p(e)},r.createInflateRaw=function(e){return new g(e)},r.createGzip=function(e){return new h(e)},r.createGunzip=function(e){return new d(e)},r.createUnzip=function(e){return new b(e)},r.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new l(t),e,r)},r.deflateSync=function(e,t){return u(new l(t),e)},r.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new h(t),e,r)},r.gzipSync=function(e,t){return u(new h(t),e)},r.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new p(t),e,r)},r.deflateRawSync=function(e,t){return u(new p(t),e)},r.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new b(t),e,r)},r.unzipSync=function(e,t){return u(new b(t),e)},r.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new f(t),e,r)},r.inflateSync=function(e,t){return u(new f(t),e)},r.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new d(t),e,r)},r.gunzipSync=function(e,t){return u(new d(t),e)},r.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),c(new g(t),e,r)},r.inflateRawSync=function(e,t){return u(new g(t),e)},o.inherits(m,i),m.prototype.params=function(e,n,i){if(e<r.Z_MIN_LEVEL||e>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(s.Z_SYNC_FLUSH,(function(){o._binding.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())}))}else t.nextTick(i)},m.prototype.reset=function(){return this._binding.reset()},m.prototype._flush=function(e){this._transform(new n(0),"",e)},m.prototype.flush=function(e,r){var i=this._writableState;if(("function"==typeof e||void 0===e&&!r)&&(r=e,e=s.Z_FULL_FLUSH),i.ended)r&&t.nextTick(r);else if(i.ending)r&&this.once("end",r);else if(i.needDrain){var o=this;this.once("drain",(function(){o.flush(r)}))}else this._flushFlag=e,this.write(new n(0),"",r)},m.prototype.close=function(e){if(e&&t.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var r=this;t.nextTick((function(){r.emit("close")}))}},m.prototype._transform=function(e,t,r){var i,o=this._writableState,a=(o.ending||o.ended)&&(!e||o.length===e.length);if(null===!e&&!n.isBuffer(e))return r(new Error("invalid input"));a?i=s.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH));this._processChunk(e,i,r)},m.prototype._processChunk=function(e,t,r){var i=e&&e.length,s=this._chunkSize-this._offset,o=0,c=this,u="function"==typeof r;if(!u){var l,f=[],h=0;this.on("error",(function(e){l=e}));do{var d=this._binding.writeSync(t,e,o,i,this._buffer,this._offset,s)}while(!this._hadError&&b(d[0],d[1]));if(this._hadError)throw l;var p=n.concat(f,h);return this.close(),p}var g=this._binding.write(t,e,o,i,this._buffer,this._offset,s);function b(l,d){if(!c._hadError){var p=s-d;if(a(p>=0,"have should not go down"),p>0){var g=c._buffer.slice(c._offset,c._offset+p);c._offset+=p,u?c.push(g):(f.push(g),h+=g.length)}if((0===d||c._offset>=c._chunkSize)&&(s=c._chunkSize,c._offset=0,c._buffer=new n(c._chunkSize)),0===d){if(o+=i-l,i=l,!u)return!0;var m=c._binding.write(t,e,o,i,c._buffer,c._offset,c._chunkSize);return m.callback=b,void(m.buffer=e)}if(!u)return!1;r()}}g.buffer=e,g.callback=b},o.inherits(l,m),o.inherits(f,m),o.inherits(h,m),o.inherits(d,m),o.inherits(p,m),o.inherits(g,m),o.inherits(b,m)}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib"}],[4368,{_process:5430,buffer:2132,"end-of-stream":2389,inherits:4453,"readable-stream":5710,"stream-shift":5914},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("readable-stream"),s=e("end-of-stream"),o=e("inherits"),a=e("stream-shift"),c=n.from&&n.from!==Uint8Array.from?n.from([0]):new n([0]),u=function(e,t){e._corked?e.once("uncork",t):t()},l=function(e,t){return function(r){r?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===r.message?null:r):t&&!e._ended&&e.end()}},f=function(e,t,r){if(!(this instanceof f))return new f(e,t,r);i.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};o(f,i.Duplex),f.obj=function(e,t,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new f(e,t,r)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,n=s(e,{writable:!0,readable:!1},l(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&r.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),n()},this.uncork()}else this.end()},f.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,r=this,n=s(e,{writable:!1,readable:!0},l(this)),o=function(){r._forward()},a=function(){r.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",o),this._readable2.on("end",a),this._unread=function(){r._readable2.removeListener("readable",o),r._readable2.removeListener("end",a),n()},this._forward()}},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=a(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},f.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;r.nextTick((function(){t._destroy(e)}))}},f.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(e,t,r){return this.destroyed?r():this._corked?u(this,this._write.bind(this,e,t,r)):e===c?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:r()):r()},f.prototype._finish=function(e){var t=this;this.emit("preend"),u(this,(function(){var r,n;r=t._forwardEnd&&t._writable,n=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),u(t,e)},r?r._writableState&&r._writableState.finished?n():r._writableState?r.end(n):(r.end(),n()):n()}))},f.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(c),i.Writable.prototype.end.call(this,r))},t.exports=f}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>gunzip-maybe>pumpify>duplexify"}],[4369,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4370,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{s=s+(i=i+t[n++]|0)|0}while(--o);i%=65521,s%=65521}return i|s<<16|0}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4371,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4372,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var s=n,o=i+r;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4373,{"../utils/common":4369,"./adler32":4370,"./crc32":4372,"./messages":4377,"./trees":4378},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),c=e("./messages"),u=-2,l=258,f=262,h=103,d=113,p=666;function g(e,t){return e.msg=c[t],t}function b(e){return(e<<1)-(e>4?9:0)}function m(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function _(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function v(e,t){var r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,u=e.window,h=e.w_mask,d=e.prev,p=e.strstart+l,g=u[s+o-1],b=u[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+o]===b&&u[r+o-1]===g&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<p);if(n=l-(p-s),s=p-l,n>o){if(e.match_start=t,o=n,n>=a)break;g=u[s+o-1],b=u[s+o]}}}while((t=d[t&h])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function E(e){var t,r,n,s,c,u,l,h,d,p,g=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-f)){i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=g?n-g:0}while(--r);t=r=g;do{n=e.prev[--t],e.prev[t]=n>=g?n-g:0}while(--r);s+=g}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,h=e.strstart+e.lookahead,d=s,p=void 0,(p=u.avail_in)>d&&(p=d),r=0===p?0:(u.avail_in-=p,i.arraySet(l,u.input,u.next_in,p,h),1===u.state.wrap?u.adler=o(u.adler,l,p,h):2===u.state.wrap&&(u.adler=a(u.adler,l,p,h)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function x(e,t){for(var r,n;;){if(e.lookahead<f){if(E(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-f&&(e.match_length=v(e,r)),e.match_length>=3)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function S(e,t){for(var r,n,i;;){if(e.lookahead<f){if(E(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-f&&(e.match_length=v(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function R(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):g(e,u)}function N(e){var t,r=I(e);return 0===r&&((t=e.state).window_size=2*t.w_size,m(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function O(e,t,r,n,s,o){if(!e)return u;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>9||8!==r||n<8||n>15||t<0||t>9||o<0||o>4)return g(e,u);8===n&&(n=9);var c=new A;return e.state=c,c.strm=e,c.wrap=a,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=r,N(e)}n=[new R(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(E(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,_(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(_(e,!1),e.strm.avail_out),1)})),new R(4,4,8,4,x),new R(4,5,16,8,x),new R(4,6,32,32,x),new R(4,4,16,16,S),new R(8,16,32,32,S),new R(8,16,128,128,S),new R(8,32,128,256,S),new R(32,128,258,1024,S),new R(32,258,258,4096,S)],r.deflateInit=function(e,t){return O(e,t,8,15,8,0)},r.deflateInit2=O,r.deflateReset=N,r.deflateResetKeep=I,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},r.deflate=function(e,t){var r,i,o,c;if(!e||!e.state||t>5||t<0)return e?g(e,u):u;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===p&&4!==t)return g(e,0===e.avail_out?-5:u);if(i.strm=e,r=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,w(i,31),w(i,139),w(i,8),i.gzhead?(w(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),w(i,255&i.gzhead.time),w(i,i.gzhead.time>>8&255),w(i,i.gzhead.time>>16&255),w(i,i.gzhead.time>>24&255),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(w(i,255&i.gzhead.extra.length),w(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(w(i,0),w(i,0),w(i,0),w(i,0),w(i,0),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,3),i.status=d);else{var f=8+(i.w_bits-8<<4)<<8;f|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=d,k(i,f),0!==i.strstart&&(k(i,e.adler>>>16),k(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending!==i.pending_buf_size));)w(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,w(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,w(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=h)}else i.status=h;if(i.status===h&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(e),i.pending+2<=i.pending_buf_size&&(w(i,255&e.adler),w(i,e.adler>>8&255),e.adler=0,i.status=d)):i.status=d),0!==i.pending){if(y(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&b(t)<=b(r)&&4!==t)return g(e,-5);if(i.status===p&&0!==e.avail_in)return g(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&i.status!==p){var v=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(E(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=l){if(E(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=e.strstart+l;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=l-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==v&&4!==v||(i.status=p),1===v||3===v)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(w(i,255&e.adler),w(i,e.adler>>8&255),w(i,e.adler>>16&255),w(i,e.adler>>24&255),w(i,255&e.total_in),w(i,e.total_in>>8&255),w(i,e.total_in>>16&255),w(i,e.total_in>>24&255)):(k(i,e.adler>>>16),k(i,65535&e.adler)),y(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==h&&t!==d&&t!==p?g(e,u):(e.state=null,t===d?g(e,-3):0):u},r.deflateSetDictionary=function(e,t){var r,n,s,a,c,l,f,h,d=t.length;if(!e||!e.state)return u;if(2===(a=(r=e.state).wrap)||1===a&&42!==r.status||r.lookahead)return u;for(1===a&&(e.adler=o(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,t,d-r.w_size,r.w_size,0),t=h,d=r.w_size),c=e.avail_in,l=e.next_in,f=e.input,e.avail_in=d,e.next_in=0,e.input=t,E(r);r.lookahead>=3;){n=r.strstart,s=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--s);r.strstart=n,r.lookahead=2,E(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=l,e.input=f,e.avail_in=c,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4374,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r,n,i,s,o,a,c,u,l,f,h,d,p,g,b,m,y,_,w,k,v,E,x,S,R;r=e.state,n=e.next_in,S=e.input,i=n+(e.avail_in-5),s=e.next_out,R=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,g=r.lencode,b=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),_=g[d&m];t:for(;;){if(d>>>=w=_>>>24,p-=w,0===(w=_>>>16&255))R[s++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=g[(65535&_)+(d&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}k=65535&_,(w&=15)&&(p<w&&(d+=S[n++]<<p,p+=8),k+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),_=b[d&y];r:for(;;){if(d>>>=w=_>>>24,p-=w,!(16&(w=_>>>16&255))){if(0==(64&w)){_=b[(65535&_)+(d&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(v=65535&_,p<(w&=15)&&(d+=S[n++]<<p,(p+=8)<w&&(d+=S[n++]<<p,p+=8)),(v+=d&(1<<w)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=w,p-=w,v>(w=s-o)){if((w=v-w)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=0,x=h,0===f){if(E+=u-w,w<k){k-=w;do{R[s++]=h[E++]}while(--w);E=s-v,x=R}}else if(f<w){if(E+=u+f-w,(w-=f)<k){k-=w;do{R[s++]=h[E++]}while(--w);if(E=0,f<k){k-=w=f;do{R[s++]=h[E++]}while(--w);E=s-v,x=R}}}else if(E+=f-w,w<k){k-=w;do{R[s++]=h[E++]}while(--w);E=s-v,x=R}for(;k>2;)R[s++]=x[E++],R[s++]=x[E++],R[s++]=x[E++],k-=3;k&&(R[s++]=x[E++],k>1&&(R[s++]=x[E++]))}else{E=s-v;do{R[s++]=R[E++],R[s++]=R[E++],R[s++]=R[E++],k-=3}while(k>2);k&&(R[s++]=R[E++],k>1&&(R[s++]=R[E++]))}break}}break}}while(n<i&&s<a);n-=k=p>>3,d&=(1<<(p-=k<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<a?a-s+257:257-(s-a),r.hold=d,r.bits=p}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4375,{"../utils/common":4369,"./adler32":4370,"./crc32":4372,"./inffast":4374,"./inftrees":4376},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),c=-2,u=12,l=30;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):c}function g(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,p(e))):c}function b(e,t){var r,n;return e?(n=new h,e.state=n,n.window=null,0!==(r=g(e,t))&&(e.state=null),r):c}var m,y,_=!0;function w(e){if(_){var t;for(m=new n.Buf32(512),y=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,y,0,e.work,{bits:5}),_=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function k(e,t,r,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>i&&(s=i),n.arraySet(o.window,t,r-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}r.inflateReset=p,r.inflateReset2=g,r.inflateResetKeep=d,r.inflateInit=function(e){return b(e,15)},r.inflateInit2=b,r.inflate=function(e,t){var r,h,d,p,g,b,m,y,_,v,E,x,S,R,A,I,N,O,D,T,L,P,B,C,j=0,M=new n.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(r=e.state).mode===u&&(r.mode=13),g=e.next_out,d=e.output,m=e.avail_out,p=e.next_in,h=e.input,b=e.avail_in,y=r.hold,_=r.bits,v=b,E=m,P=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;_<16;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(2&r.wrap&&35615===y){r.check=0,M[0]=255&y,M[1]=y>>>8&255,r.check=s(r.check,M,2,0),y=0,_=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",r.mode=l;break}if(8!=(15&y)){e.msg="unknown compression method",r.mode=l;break}if(_-=4,L=8+(15&(y>>>=4)),0===r.wbits)r.wbits=L;else if(L>r.wbits){e.msg="invalid window size",r.mode=l;break}r.dmax=1<<L,e.adler=r.check=1,r.mode=512&y?10:u,y=0,_=0;break;case 2:for(;_<16;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(r.flags=y,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=l;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=l;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(M[0]=255&y,M[1]=y>>>8&255,r.check=s(r.check,M,2,0)),y=0,_=0,r.mode=3;case 3:for(;_<32;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.head&&(r.head.time=y),512&r.flags&&(M[0]=255&y,M[1]=y>>>8&255,M[2]=y>>>16&255,M[3]=y>>>24&255,r.check=s(r.check,M,4,0)),y=0,_=0,r.mode=4;case 4:for(;_<16;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(M[0]=255&y,M[1]=y>>>8&255,r.check=s(r.check,M,2,0)),y=0,_=0,r.mode=5;case 5:if(1024&r.flags){for(;_<16;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(M[0]=255&y,M[1]=y>>>8&255,r.check=s(r.check,M,2,0)),y=0,_=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((x=r.length)>b&&(x=b),x&&(r.head&&(L=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,h,p,x,L)),512&r.flags&&(r.check=s(r.check,h,x,p)),b-=x,p+=x,r.length-=x),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===b)break e;x=0;do{L=h[p+x++],r.head&&L&&r.length<65536&&(r.head.name+=String.fromCharCode(L))}while(L&&x<b);if(512&r.flags&&(r.check=s(r.check,h,x,p)),b-=x,p+=x,L)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===b)break e;x=0;do{L=h[p+x++],r.head&&L&&r.length<65536&&(r.head.comment+=String.fromCharCode(L))}while(L&&x<b);if(512&r.flags&&(r.check=s(r.check,h,x,p)),b-=x,p+=x,L)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;_<16;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(y!==(65535&r.check)){e.msg="header crc mismatch",r.mode=l;break}y=0,_=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=u;break;case 10:for(;_<32;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}e.adler=r.check=f(y),y=0,_=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=g,e.avail_out=m,e.next_in=p,e.avail_in=b,r.hold=y,r.bits=_,2;e.adler=r.check=1,r.mode=u;case u:if(5===t||6===t)break e;case 13:if(r.last){y>>>=7&_,_-=7&_,r.mode=27;break}for(;_<3;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}switch(r.last=1&y,_-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6===t){y>>>=2,_-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=l}y>>>=2,_-=2;break;case 14:for(y>>>=7&_,_-=7&_;_<32;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",r.mode=l;break}if(r.length=65535&y,y=0,_=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(x=r.length){if(x>b&&(x=b),x>m&&(x=m),0===x)break e;n.arraySet(d,h,p,x,g),b-=x,p+=x,m-=x,g+=x,r.length-=x;break}r.mode=u;break;case 17:for(;_<14;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(r.nlen=257+(31&y),y>>>=5,_-=5,r.ndist=1+(31&y),y>>>=5,_-=5,r.ncode=4+(15&y),y>>>=4,_-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=l;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;_<3;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.lens[z[r.have++]]=7&y,y>>>=3,_-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,B={bits:r.lenbits},P=a(0,r.lens,0,19,r.lencode,0,r.work,B),r.lenbits=B.bits,P){e.msg="invalid code lengths set",r.mode=l;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(j=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,N=65535&j,!((A=j>>>24)<=_);){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(N<16)y>>>=A,_-=A,r.lens[r.have++]=N;else{if(16===N){for(C=A+2;_<C;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(y>>>=A,_-=A,0===r.have){e.msg="invalid bit length repeat",r.mode=l;break}L=r.lens[r.have-1],x=3+(3&y),y>>>=2,_-=2}else if(17===N){for(C=A+3;_<C;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}_-=A,L=0,x=3+(7&(y>>>=A)),y>>>=3,_-=3}else{for(C=A+7;_<C;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}_-=A,L=0,x=11+(127&(y>>>=A)),y>>>=7,_-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=l;break}for(;x--;)r.lens[r.have++]=L}}if(r.mode===l)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=l;break}if(r.lenbits=9,B={bits:r.lenbits},P=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,B),r.lenbits=B.bits,P){e.msg="invalid literal/lengths set",r.mode=l;break}if(r.distbits=6,r.distcode=r.distdyn,B={bits:r.distbits},P=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,B),r.distbits=B.bits,P){e.msg="invalid distances set",r.mode=l;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(b>=6&&m>=258){e.next_out=g,e.avail_out=m,e.next_in=p,e.avail_in=b,r.hold=y,r.bits=_,o(e,E),g=e.next_out,d=e.output,m=e.avail_out,p=e.next_in,h=e.input,b=e.avail_in,y=r.hold,_=r.bits,r.mode===u&&(r.back=-1);break}for(r.back=0;I=(j=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,N=65535&j,!((A=j>>>24)<=_);){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(I&&0==(240&I)){for(O=A,D=I,T=N;I=(j=r.lencode[T+((y&(1<<O+D)-1)>>O)])>>>16&255,N=65535&j,!(O+(A=j>>>24)<=_);){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}y>>>=O,_-=O,r.back+=O}if(y>>>=A,_-=A,r.back+=A,r.length=N,0===I){r.mode=26;break}if(32&I){r.back=-1,r.mode=u;break}if(64&I){e.msg="invalid literal/length code",r.mode=l;break}r.extra=15&I,r.mode=22;case 22:if(r.extra){for(C=r.extra;_<C;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,_-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(j=r.distcode[y&(1<<r.distbits)-1])>>>16&255,N=65535&j,!((A=j>>>24)<=_);){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(0==(240&I)){for(O=A,D=I,T=N;I=(j=r.distcode[T+((y&(1<<O+D)-1)>>O)])>>>16&255,N=65535&j,!(O+(A=j>>>24)<=_);){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}y>>>=O,_-=O,r.back+=O}if(y>>>=A,_-=A,r.back+=A,64&I){e.msg="invalid distance code",r.mode=l;break}r.offset=N,r.extra=15&I,r.mode=24;case 24:if(r.extra){for(C=r.extra;_<C;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,_-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=l;break}r.mode=25;case 25:if(0===m)break e;if(x=E-m,r.offset>x){if((x=r.offset-x)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=l;break}x>r.wnext?(x-=r.wnext,S=r.wsize-x):S=r.wnext-x,x>r.length&&(x=r.length),R=r.window}else R=d,S=g-r.offset,x=r.length;x>m&&(x=m),m-=x,r.length-=x;do{d[g++]=R[S++]}while(--x);0===r.length&&(r.mode=21);break;case 26:if(0===m)break e;d[g++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;_<32;){if(0===b)break e;b--,y|=h[p++]<<_,_+=8}if(E-=m,e.total_out+=E,r.total+=E,E&&(e.adler=r.check=r.flags?s(r.check,d,E,g-E):i(r.check,d,E,g-E)),E=m,(r.flags?y:f(y))!==r.check){e.msg="incorrect data check",r.mode=l;break}y=0,_=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;_<32;){if(0===b)break e;b--,y+=h[p++]<<_,_+=8}if(y!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=l;break}y=0,_=0}r.mode=29;case 29:P=1;break e;case l:P=-3;break e;case 31:return-4;default:return c}return e.next_out=g,e.avail_out=m,e.next_in=p,e.avail_in=b,r.hold=y,r.bits=_,(r.wsize||E!==e.avail_out&&r.mode<l&&(r.mode<27||4!==t))&&k(e,e.output,e.next_out,E-e.avail_out)?(r.mode=31,-4):(v-=e.avail_in,E-=e.avail_out,e.total_in+=v,e.total_out+=E,r.total+=E,r.wrap&&E&&(e.adler=r.check=r.flags?s(r.check,d,E,e.next_out-E):i(r.check,d,E,e.next_out-E)),e.data_type=r.bits+(r.last?64:0)+(r.mode===u?128:0)+(20===r.mode||15===r.mode?256:0),(0===v&&0===E||4===t)&&0===P&&(P=-5),P)},r.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?c:(r.head=t,t.done=!1,0):c},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&i(1,t,n,0)!==r.check?-3:k(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):c},r.inflateInfo="pako inflate (from Nodeca project)"}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4376,{"../utils/common":4369},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../utils/common"),i=15,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,l,f,h,d){var p,g,b,m,y,_,w,k,v,E=d.bits,x=0,S=0,R=0,A=0,I=0,N=0,O=0,D=0,T=0,L=0,P=null,B=0,C=new n.Buf16(16),j=new n.Buf16(16),M=null,z=0;for(x=0;x<=i;x++)C[x]=0;for(S=0;S<u;S++)C[t[r+S]]++;for(I=E,A=i;A>=1&&0===C[A];A--);if(I>A&&(I=A),0===A)return l[f++]=20971520,l[f++]=20971520,d.bits=1,0;for(R=1;R<A&&0===C[R];R++);for(I<R&&(I=R),D=1,x=1;x<=i;x++)if(D<<=1,(D-=C[x])<0)return-1;if(D>0&&(0===e||1!==A))return-1;for(j[1]=0,x=1;x<i;x++)j[x+1]=j[x]+C[x];for(S=0;S<u;S++)0!==t[r+S]&&(h[j[t[r+S]]++]=S);if(0===e?(P=M=h,_=19):1===e?(P=s,B-=257,M=o,z-=257,_=256):(P=a,M=c,_=-1),L=0,S=0,x=R,y=f,N=I,O=0,b=-1,m=(T=1<<I)-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){w=x-O,h[S]<_?(k=0,v=h[S]):h[S]>_?(k=M[z+h[S]],v=P[B+h[S]]):(k=96,v=0),p=1<<x-O,R=g=1<<N;do{l[y+(L>>O)+(g-=p)]=w<<24|k<<16|v|0}while(0!==g);for(p=1<<x-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,S++,0==--C[x]){if(x===A)break;x=t[r+h[S]]}if(x>I&&(L&m)!==b){for(0===O&&(O=I),y+=R,D=1<<(N=x-O);N+O<A&&!((D-=C[N+O])<=0);)N++,D<<=1;if(T+=1<<N,1===e&&T>852||2===e&&T>592)return 1;l[b=L&m]=I<<24|N<<16|y-f|0}}return 0!==L&&(l[y+L]=x-O<<24|64<<16|0),d.bits=I,0}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4377,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4378,{"../utils/common":4369},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../utils/common");function i(e){for(var t=e.length;--t>=0;)e[t]=0}var s=256,o=286,a=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var p=new Array(60);i(p);var g=new Array(512);i(g);var b=new Array(256);i(b);var m=new Array(29);i(m);var y,_,w,k=new Array(a);function v(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function E(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?g[e]:g[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function A(e,t,r){R(e,r[2*t],r[2*t+1])}function I(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function N(e,t,r){var n,i,s=new Array(16),o=0;for(n=1;n<=c;n++)s[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=I(s[a]++,a))}}function O(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){e.bi_valid>8?S(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function T(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function L(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&T(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!T(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function P(e,t,r){var n,i,o,a,c=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?A(e,i,t):(A(e,(o=b[i])+s+1,t),0!==(a=u[o])&&R(e,i-=m[o],a),A(e,o=x(--n),r),0!==(a=l[o])&&R(e,n-=k[o],a))}while(c<e.last_lit);A(e,256,t)}function B(e,t){var r,n,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==s[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;r>=1;r--)L(e,s,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,L(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,o,a,u=t.dyn_tree,l=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,b=0;for(s=0;s<=c;s++)e.bl_count[s]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(s=u[2*u[2*(n=e.heap[r])+1]+1]+1)>g&&(s=g,b++),u[2*n+1]=s,n>l||(e.bl_count[s]++,o=0,n>=p&&(o=d[n-p]),a=u[2*n],e.opt_len+=a*(s+o),h&&(e.static_len+=a*(f[2*n+1]+o)));if(0!==b){do{for(s=g-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[g]--,b-=2}while(b>0);for(s=g;0!==s;s--)for(n=e.bl_count[s];0!==n;)(i=e.heap[--r])>l||(u[2*i+1]!==s&&(e.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(e,t),N(s,l,e.bl_count)}function C(e,t,r){var n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))}function j(e,t,r){var n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)do{A(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(A(e,i,e.bl_tree),a--),A(e,16,e.bl_tree),R(e,a-3,2)):a<=10?(A(e,17,e.bl_tree),R(e,a-3,3)):(A(e,18,e.bl_tree),R(e,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}}i(k);var M=!1;function z(e,t,r,i){R(e,0+(i?1:0),3),function(e,t,r,i){D(e),i&&(S(e,r),S(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){M||(!function(){var e,t,r,n,i,s=new Array(16);for(r=0,n=0;n<28;n++)for(m[n]=r,e=0;e<1<<u[n];e++)b[r++]=n;for(b[r-1]=n,i=0,n=0;n<16;n++)for(k[n]=i,e=0;e<1<<l[n];e++)g[i++]=n;for(i>>=7;n<a;n++)for(k[n]=i<<7,e=0;e<1<<l[n]-7;e++)g[256+i++]=n;for(t=0;t<=c;t++)s[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,s[8]++;for(;e<=255;)d[2*e+1]=9,e++,s[9]++;for(;e<=279;)d[2*e+1]=7,e++,s[7]++;for(;e<=287;)d[2*e+1]=8,e++,s[8]++;for(N(d,287,s),e=0;e<a;e++)p[2*e+1]=5,p[2*e]=I(e,5);y=new v(d,u,257,o,c),_=new v(p,l,0,a,c),w=new v(new Array(0),f,0,19,7)}(),M=!0),e.l_desc=new E(e.dyn_ltree,y),e.d_desc=new E(e.dyn_dtree,_),e.bl_desc=new E(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,O(e)},r._tr_stored_block=z,r._tr_flush_block=function(e,t,r,n){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),B(e,e.l_desc),B(e,e.d_desc),a=function(e){var t;for(C(e,e.dyn_ltree,e.l_desc.max_code),C(e,e.dyn_dtree,e.d_desc.max_code),B(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?z(e,t,r,n):4===e.strategy||o===i?(R(e,2+(n?1:0),3),P(e,d,p)):(R(e,4+(n?1:0),3),function(e,t,r,n){var i;for(R(e,t-257,5),R(e,r-1,5),R(e,n-4,4),i=0;i<n;i++)R(e,e.bl_tree[2*h[i]+1],3);j(e,e.dyn_ltree,t-1),j(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),O(e),n&&D(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(b[r]+s+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){R(e,2,3),A(e,256,d),function(e){16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4379,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}}},{package:"@metamask/snap-controllers>gunzip-maybe>browserify-zlib>pako"}],[4380,{"end-of-stream":2389,fs:2131,once:5323},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("once"),i=e("end-of-stream"),s=e("fs"),o=function(){},a=function(e){return"function"==typeof e},c=function(e,t,r,c){c=n(c);var u=!1;e.on("close",(function(){u=!0})),i(e,{readable:t,writable:r},(function(e){if(e)return c(e);u=!0,c()}));var l=!1;return function(t){if(!u&&!l)return l=!0,function(e){return!!s&&(e instanceof(s.ReadStream||o)||e instanceof(s.WriteStream||o))&&a(e.close)}(e)?e.close(o):function(e){return e.setHeader&&a(e.abort)}(e)?e.abort():a(e.destroy)?e.destroy():void c(t||new Error("stream was destroyed"))}},u=function(e){e()},l=function(e,t){return e.pipe(t)};t.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=a(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,s){var o=s<t.length-1;return c(i,o,s>0,(function(t){e||(e=t),t&&n.forEach(u),o||(n.forEach(u),r(e))}))}));return t.reduce(l)}}}},{package:"@metamask/snap-controllers>gunzip-maybe>pumpify>pump"}],[4381,{duplexify:4368,inherits:4453,pump:4380},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("pump"),i=e("inherits"),s=e("duplexify"),o=function(e){return e.length?Array.isArray(e[0])?e[0]:Array.prototype.slice.call(e):[]},a=function(e){var t=function(){var r=o(arguments);if(!(this instanceof t))return new t(r);s.call(this,null,null,e),r.length&&this.setPipeline(r)};return i(t,s),t.prototype.setPipeline=function(){var e=o(arguments),t=this,r=!1,i=e[0],s=e[e.length-1];s=s.readable?s:null,i=i.writable?i:null;var a=function(){e[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",(function(){r||t.cork()})),n(e,(function(e){if(t.removeListener("close",a),e)return t.destroy(e);r=!0,t.uncork()})),this.destroyed)return a();this.setWritable(i),this.setReadable(s)},t};t.exports=a({destroy:!1}),t.exports.obj=a({destroy:!1,objectMode:!0,highWaterMark:16})}}},{package:"@metamask/snap-controllers>gunzip-maybe>pumpify"}],[4382,{_process:5430,"readable-stream":5710,util:2138,xtend:6173},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}i(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=s(e,t),o.call(this,this.options)}return i(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(s({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>gunzip-maybe>through2"}],[4383,{"./consumable-hash":4385,"sparse-array":5881},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("sparse-array"),i=e("./consumable-hash"),s={bits:8};class o{constructor(e,t,r){if(this._options=Object.assign({},s,e),this._popCount=0,this._parent=t,this._posAtParent=r,!this._options.hashFn)throw new Error("please define an options.hashFn");this._options.hash||(this._options.hash=i(this._options.hashFn)),this._children=new n}static isBucket(e){return e instanceof o}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof o?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)if(t instanceof o)for(const e of t.eachLeafSeries())yield e;else yield t}serialize(e,t){return t(this._children.reduce(((r,n,i)=>(n&&(n instanceof o?r.push(n.serialize(e,t)):r.push(e(n,i))),r)),[]))}async asyncTransform(e,t){return l(this,e,t)}toJSON(){return this.serialize(c,u)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key===e)return r}async _findPlace(e){const t=this._options.hash(e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof o?n._findPlace(t):{bucket:this,pos:r,hash:t}}async _findNewBucketAndPos(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(r&&r.key!==e){const e=new o(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(r.hash);return n.bucket._putAt(n,r.key,r.value),e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(a);if(!(e instanceof o)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function a(e){return Boolean(e)}function c(e,t){return e.key}function u(e){return e}async function l(e,t,r){const n=[];for(const i of e._children.compactArray()){if(i instanceof o)await l(i,t,r);else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}return r(n)}}t.exports=o}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding"}],[4384,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=[255,254,252,248,240,224,192,128],i=[1,3,7,15,31,63,127,255];function s(e,t,r){const s=function(e,t){return n[e]&i[Math.min(t+e-1,7)]}(t,r);return(e&s)>>>t}t.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;for(;t&&this._haveBits();){const e=this._value[this._currentBytePos],n=this._currentBitPos+1,i=Math.min(n,t);r=(r<<i)+s(e,n-i,i),t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding"}],[4385,{"../../is-buffer/index.js":4735,"./consumable-buffer":4384},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("./consumable-buffer");t.exports=function(e){return function(t){return t instanceof i?t:new i(t,e)}};class i{constructor(e,t){if("string"!=typeof e&&!r.isBuffer(e))throw new Error("can only hash strings or buffers");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let r=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t);r=(r<<n)+e.take(n),t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?this._value+this._depth:this._value,t=await this._hashFn(e),r=new n(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding"}],[4386,{"./bucket":4383},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./bucket");t.exports=function(e){return new n(e)},t.exports.isBucket=n.isBucket}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding"}],[4387,{buffer:2132,isarray:4388},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("isarray"),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(n(t)){for(var i=0,a=t.length;i<a;i++)if(e(t[i]))return!0;return!1}if("function"==typeof r&&r.isBuffer&&r.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||o&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io>has-binary2"}],[4388,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io>has-binary2>isarray"}],[4389,{},function(){with(this)return function(){"use strict";return function(e,t,r){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>engine.io-client>has-cors"}],[44,{"@babel/runtime/helpers/interopRequireDefault":202,loglevel:5198},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){n((n=>{r.error&&i.default.error("Error in RPC response:\n",r),t.isMetamaskInternal||(i.default.info(`RPC (${e.origin}):`,t,"->",r),n())}))}};var i=n(e("loglevel"))}}},{package:"$root$"}],[4421,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return r[e]!==undefined||n[e]!==undefined},remove:function(e){r[e]!==undefined&&(r[e]=undefined),n[e]!==undefined&&(n[e]=undefined)},get:function(e){var t=r[e];return t!==undefined?t:(t=n[e])!==undefined?(i(e,t),t):void 0},set:function(e,t){r[e]!==undefined?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}}}},{package:"3box>ipfs>libp2p-kad-dht>hashlru"}],[4427,{"./lib/heap":4428},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/heap")}}},{package:"3box>ipfs>libp2p-kad-dht>heap"}],[4428,{},function(){with(this)return function(){"use strict";return function(e,t,r){(function(){var e,n,i,s,o,a,c,u,l,f,h,d,p,g,b,m,y;i=Math.floor,f=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},l=function(e,t,r,s,o){var a;if(null==r&&(r=0),null==o&&(o=n),r<0)throw new Error("lo must be non-negative");for(null==s&&(s=e.length);r<s;)o(t,e[a=i((r+s)/2)])<0?s=a:r=a+1;return[].splice.apply(e,[r,r-r].concat(t)),t},a=function(e,t,r){return null==r&&(r=n),e.push(t),g(e,0,e.length-1,r)},o=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,b(e,0,t)):i=r,i},u=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,b(e,0,r),i},c=function(e,t,r){var i;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],b(e,0,r)),t},s=function(e,t){var r,s,o,a,c,u;for(null==t&&(t=n),a=function(){u=[];for(var t=0,r=i(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse(),c=[],s=0,o=a.length;s<o;s++)r=a[s],c.push(b(e,r,t));return c},p=function(e,t,r){var i;if(null==r&&(r=n),-1!==(i=e.indexOf(t)))return g(e,0,i,r),b(e,i,r)},h=function(e,t,r){var i,o,a,u,l;if(null==r&&(r=n),!(o=e.slice(0,t)).length)return o;for(s(o,r),a=0,u=(l=e.slice(t)).length;a<u;a++)i=l[a],c(o,i,r);return o.sort(r).reverse()},d=function(e,t,r){var i,a,c,u,h,d,p,g,b;if(null==r&&(r=n),10*t<=e.length){if(!(c=e.slice(0,t).sort(r)).length)return c;for(a=c[c.length-1],u=0,d=(p=e.slice(t)).length;u<d;u++)r(i=p[u],a)<0&&(l(c,i,0,null,r),c.pop(),a=c[c.length-1]);return c}for(s(e,r),b=[],h=0,g=f(t,e.length);0<=g?h<g:h>g;0<=g?++h:--h)b.push(o(e,r));return b},g=function(e,t,r,i){var s,o,a;for(null==i&&(i=n),s=e[r];r>t&&i(s,o=e[a=r-1>>1])<0;)e[r]=o,r=a;return e[r]=s},b=function(e,t,r){var i,s,o,a,c;for(null==r&&(r=n),s=e.length,c=t,o=e[t],i=2*t+1;i<s;)(a=i+1)<s&&!(r(e[i],e[a])<0)&&(i=a),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,g(e,c,t,r)},e=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=a,e.pop=o,e.replace=u,e.pushpop=c,e.heapify=s,e.updateItem=p,e.nlargest=h,e.nsmallest=d,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return c(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return s(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),m=this,y=function(){return e},"function"==typeof define&&define.amd?define([],y):"object"==typeof r?t.exports=y():m.Heap=y()}).call(this)}}},{package:"3box>ipfs>libp2p-kad-dht>heap"}],[4429,{_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){
/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
!function(){var r="object"==typeof window?window:{};!r.HI_BASE32_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node&&(r=global);var n=!r.HI_BASE32_NO_COMMON_JS&&"object"==typeof t&&t.exports,i="function"==typeof define&&define.amd,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),o={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},a=[0,0,0,0,0,0,0,0],c=function(e,t){t.length>10&&(t="..."+t.substr(-10));var r=new Error("Decoded data is not valid UTF-8."+" Maybe try base32.decode.asBytes()?"+" Partial data after reading "+e+" bytes: "+t+" <-");throw r.position=e,r},u=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var t,r,n,i,s,a,c,u,l=[],f=0,h=(e=e.replace(/=/g,"")).length,d=0,p=h>>3<<3;d<p;)t=o[e.charAt(d++)],r=o[e.charAt(d++)],n=o[e.charAt(d++)],i=o[e.charAt(d++)],s=o[e.charAt(d++)],a=o[e.charAt(d++)],c=o[e.charAt(d++)],u=o[e.charAt(d++)],l[f++]=255&(t<<3|r>>>2),l[f++]=255&(r<<6|n<<1|i>>>4),l[f++]=255&(i<<4|s>>>1),l[f++]=255&(s<<7|a<<2|c>>>3),l[f++]=255&(c<<5|u);var g=h-p;return 2===g?(t=o[e.charAt(d++)],r=o[e.charAt(d++)],l[f++]=255&(t<<3|r>>>2)):4===g?(t=o[e.charAt(d++)],r=o[e.charAt(d++)],n=o[e.charAt(d++)],i=o[e.charAt(d++)],l[f++]=255&(t<<3|r>>>2),l[f++]=255&(r<<6|n<<1|i>>>4)):5===g?(t=o[e.charAt(d++)],r=o[e.charAt(d++)],n=o[e.charAt(d++)],i=o[e.charAt(d++)],s=o[e.charAt(d++)],l[f++]=255&(t<<3|r>>>2),l[f++]=255&(r<<6|n<<1|i>>>4),l[f++]=255&(i<<4|s>>>1)):7===g&&(t=o[e.charAt(d++)],r=o[e.charAt(d++)],n=o[e.charAt(d++)],i=o[e.charAt(d++)],s=o[e.charAt(d++)],a=o[e.charAt(d++)],c=o[e.charAt(d++)],l[f++]=255&(t<<3|r>>>2),l[f++]=255&(r<<6|n<<1|i>>>4),l[f++]=255&(i<<4|s>>>1),l[f++]=255&(s<<7|a<<2|c>>>3)),l},l=function(e,t){if(!t)return function(e){for(var t,r,n="",i=e.length,s=0,o=0;s<i;)if((t=e[s++])<=127)n+=String.fromCharCode(t);else{t>191&&t<=223?(r=31&t,o=1):t<=239?(r=15&t,o=2):t<=247?(r=7&t,o=3):c(s,n);for(var a=0;a<o;++a)((t=e[s++])<128||t>191)&&c(s,n),r<<=6,r+=63&t;r>=55296&&r<=57343&&c(s,n),r>1114111&&c(s,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(u(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var r,n,i,s,a,l,f,h,d="",p=e.indexOf("=");-1===p&&(p=e.length);for(var g=0,b=p>>3<<3;g<b;)r=o[e.charAt(g++)],n=o[e.charAt(g++)],i=o[e.charAt(g++)],s=o[e.charAt(g++)],a=o[e.charAt(g++)],l=o[e.charAt(g++)],f=o[e.charAt(g++)],h=o[e.charAt(g++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|a>>>1))+String.fromCharCode(255&(a<<7|l<<2|f>>>3))+String.fromCharCode(255&(f<<5|h));var m=p-b;return 2===m?(r=o[e.charAt(g++)],n=o[e.charAt(g++)],d+=String.fromCharCode(255&(r<<3|n>>>2))):4===m?(r=o[e.charAt(g++)],n=o[e.charAt(g++)],i=o[e.charAt(g++)],s=o[e.charAt(g++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))):5===m?(r=o[e.charAt(g++)],n=o[e.charAt(g++)],i=o[e.charAt(g++)],s=o[e.charAt(g++)],a=o[e.charAt(g++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|a>>>1))):7===m&&(r=o[e.charAt(g++)],n=o[e.charAt(g++)],i=o[e.charAt(g++)],s=o[e.charAt(g++)],a=o[e.charAt(g++)],l=o[e.charAt(g++)],f=o[e.charAt(g++)],d+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|s>>>4))+String.fromCharCode(255&(s<<4|a>>>1))+String.fromCharCode(255&(a<<7|l<<2|f>>>3))),d},f={encode:function(e,t){var r="string"!=typeof e;return r&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),r?function(e){for(var t,r,n,i,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e[u++],r=e[u++],n=e[u++],i=e[u++],o=e[u++],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o];var f=c-l;return 1===f?(t=e[u],a+=s[t>>>3]+s[t<<2&31]+"======"):2===f?(t=e[u++],r=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===f?(t=e[u++],r=e[u++],n=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):4===f&&(t=e[u++],r=e[u++],n=e[u++],i=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"="),a}(e):t?function(e){for(var t,r,n,i,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),o=e.charCodeAt(u++),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o];var f=c-l;return 1===f?(t=e.charCodeAt(u),a+=s[t>>>3]+s[t<<2&31]+"======"):2===f?(t=e.charCodeAt(u++),r=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===f?(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):4===f&&(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"="),a}(e):function(e){var t,r,n,i,o,c,u,l=!1,f="",h=0,d=0,p=e.length;do{for(a[0]=a[5],a[1]=a[6],a[2]=a[7],u=d;h<p&&u<5;++h)(c=e.charCodeAt(h))<128?a[u++]=c:c<2048?(a[u++]=192|c>>6,a[u++]=128|63&c):c<55296||c>=57344?(a[u++]=224|c>>12,a[u++]=128|c>>6&63,a[u++]=128|63&c):(c=65536+((1023&c)<<10|1023&e.charCodeAt(++h)),a[u++]=240|c>>18,a[u++]=128|c>>12&63,a[u++]=128|c>>6&63,a[u++]=128|63&c);d=u-5,h===p&&++h,h>p&&u<6&&(l=!0),t=a[0],u>4?(r=a[1],n=a[2],i=a[3],o=a[4],f+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o]):1===u?f+=s[t>>>3]+s[t<<2&31]+"======":2===u?(r=a[1],f+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===u?(r=a[1],n=a[2],f+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):(r=a[1],n=a[2],i=a[3],f+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"=")}while(!l);return f}(e)},decode:l};l.asBytes=u,n?t.exports=f:(r.base32=f,i&&define((function(){return f})))}()}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>multiaddr>hi-base32"}],[4433,{"did-resolver":2325,xmlhttprequest:2131},function(){with(this)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("did-resolver");function o(t){return new Promise((function(r,n){var i=new("undefined"!=typeof window?window.XMLHttpRequest:e("xmlhttprequest").XMLHttpRequest);i.open("GET",t),i.onreadystatechange=function(){i&&4===i.readyState&&(200===i.status?r(i.responseText):n(new Error(("Invalid http response status "+i.status+" "+i.responseText).trim())))},i.setRequestHeader("accept","application/json"),i.send()}))}r.default=function(){s.registerMethod("https",(function(e,t){return n(this,void 0,void 0,(function(){var r,n,s,a;return i(this,(function(i){switch(i.label){case 0:r="https://"+t.id+"/.well-known/did.json",n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o(r)];case 2:return n=i.sent(),[3,4];case 3:throw s=i.sent(),new Error("DID must resolve to a valid https URL: "+s.message);case 4:a=null;try{a=JSON.parse(n)}catch(e){throw new Error("DID must resolve to a JSON document")}if(!("https://w3id.org/did/v1"===a["@context"]))throw new Error("DID document missing context");if(!(a.id===e))throw new Error("DID document id does not match requested did");if(!(Array.isArray(a.publicKey)&&a.publicKey.length>0))throw new Error("DID document has no public keys");return[2,a]}}))}))}))}}}},{package:"3box>https-did-resolver"}],[4435,{"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=/^((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))+$/,s=/((\d+(\.\d+)*)(ns|ms|us|µs|m|s|h))/g,o=/(ns|ms|us|µs|m|s|h)/g,a={ns:1e-6,us:.001,"µs":.001,ms:1,s:1e3,m:6e4,h:36e5};t.exports=n((function(e,t){return"string"!=typeof e?t(new Error("the first argument must be a string")):i.test(e)?void t(null,e.match(s).reduce(((e,t)=>e+function(e){let t=e.match(o)[0];return e=e.substring(0,e.length-t.length),parseFloat(e)*a[t]}(t)),0)):t(new Error("invalid time"))}))}}},{package:"3box>ipfs>human-to-milliseconds"}],[4437,{stream:2135,xtend:6173},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("stream"),i=e("xtend");t.exports=function(e,t,r){if("object"!=typeof e)throw new TypeError("db must be an object");if("string"!=typeof t)throw new TypeError("storeName must be a string");if(null==r&&(r={}),"object"!=typeof r)throw new TypeError("opts must be an object");var s=new n.Transform(i(r,{objectMode:!0,transform:function(e,t,r){r(null,e)}}));r=i({snapshot:!1},r);var o=null;return s._cursorsOpened=0,function n(){var i,a,c,u,l,f=r.direction||"next",h=r.range||{};i=h.lower,a=h.upper,c=!!h.lowerOpen,u=!!h.upperOpen,o&&("next"===f?(c=!0,i=o):(u=!0,a=o)),i&&a?l=IDBKeyRange.bound(i,a,c,u):i?l=IDBKeyRange.lowerBound(i,c):a&&(l=IDBKeyRange.upperBound(a,u));var d=e.transaction(t,"readonly"),p=d.objectStore(t);s._cursorsOpened++;var g=p.openCursor(l,r.direction);function b(e){try{e.continue()}catch(e){"TransactionInactiveError"!==e.name||r.snapshot?s.emit("error",e):n()}}g.onsuccess=function(){var e=g.result;if(e){o=e.key;var t=s.write({key:e.key,value:e.value});r.snapshot||t?b(e):s.once("drain",(function(){b(e)}))}else s.end()},d.onabort=function(){s.emit("error",d.error)},d.onerror=function(){s.emit("error",d.error)}}(),s}}}},{package:"3box>ipfs>ipfs-repo>datastore-level>level-js>idb-readable-stream"}],[4443,{"./messageChannel":4444,"./mutation.js":4445,"./nextTick":4446,"./stateChange":4447,"./timeout":4448},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,s,o=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],a=-1,c=[],u=!1;function l(){n&&i&&(n=!1,i.length?c=i.concat(c):a=-1,c.length&&f())}function f(){if(!n){u=!1,n=!0;for(var e=c.length,t=setTimeout(l);e;){for(i=c,c=[];i&&++a<e;)i[a].run();a=-1,e=c.length}i=null,a=-1,n=!1,clearTimeout(t)}}for(var h=-1,d=o.length;++h<d;)if(o[h]&&o[h].test&&o[h].test()){s=o[h].install(f);break}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),u||n||(u=!0,s())}}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4444,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},r.install=function(e){var t=new global.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4445,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=global.MutationObserver||global.WebKitMutationObserver;r.test=function(){return n},r.install=function(e){var t=0,r=new n(e),i=global.document.createTextNode("");return r.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4446,{_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){r.test=function(){return void 0!==e&&!e.browser},r.install=function(t){return function(){e.nextTick(t)}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4447,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},r.install=function(e){return function(){var t=global.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},global.document.documentElement.appendChild(t),e}}}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4448,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.test=function(){return!0},r.install=function(e){return function(){setTimeout(e,0)}}}}},{package:"3box>orbit-db>orbit-db-cache>level-js>immediate"}],[4452,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>indexof"}],[4454,{"pull-defer/duplex":5461},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-defer/duplex");t.exports=class{constructor(e,t){this.peerInfo=null,this.conn=n(),e?this.setInnerConn(e,t):t&&(this.info=t)}get source(){return this.conn.source}get sink(){return this.conn.sink}getPeerInfo(e){return this.info&&this.info.getPeerInfo?this.info.getPeerInfo(e):this.peerInfo?void e(null,this.peerInfo):e(new Error("Peer Info not set yet"))}setPeerInfo(e){if(this.info&&this.info.setPeerInfo)return this.info.setPeerInfo(e);this.peerInfo=e}getObservedAddrs(e){if(this.info&&this.info.getObservedAddrs)return this.info.getObservedAddrs(e);e(null,[])}setInnerConn(e,t){this.conn.resolve(e),this.info=t||e}}}}},{package:"3box>ipfs>pull-mplex>interface-connection"}],[4455,{"./connection":4454},function(){with(this)return function(){"use strict";return function(e,t,r){r.Connection=e("./connection")}}},{package:"3box>ipfs>pull-mplex>interface-connection"}],[4456,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}}}},{package:"3box>ipfs>interface-datastore>uuid"}],[4457,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var s=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}}}},{package:"3box>ipfs>interface-datastore>uuid"}],[4458,{"./lib/bytesToUuid":4456,"./lib/rng":4457},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,r){var s=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}}}},{package:"3box>ipfs>interface-datastore>uuid"}],[4459,{"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code");t.exports.dbOpenFailedError=e=>(e=e||new Error("Cannot open database"),n(e,"ERR_DB_OPEN_FAILED")),t.exports.dbDeleteFailedError=e=>(e=e||new Error("Delete failed"),n(e,"ERR_DB_DELETE_FAILED")),t.exports.dbWriteFailedError=e=>(e=e||new Error("Write failed"),n(e,"ERR_DB_WRITE_FAILED")),t.exports.notFoundError=e=>(e=e||new Error("Not Found"),n(e,"ERR_NOT_FOUND"))}}},{package:"3box>ipfs>interface-datastore"}],[4460,{"./errors":4459,"./key":4461,"./memory":4462,"./utils":4463},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./key"),i=e("./memory"),s=e("./utils"),o=e("./errors");r.Key=n,r.MemoryDatastore=i,r.utils=s,r.Errors=o}}},{package:"3box>ipfs>interface-datastore"}],[4461,{buffer:2132,"class-is":2171,"uuid/v4":4458},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("uuid/v4"),i=e("class-is"),s="/",o=r.from(s),a=o[0];class c{constructor(e,t){if("string"==typeof e?this._buf=r.from(e):r.isBuffer(e)&&(this._buf=e),null==t&&(t=!0),t&&this.clean(),0===this._buf.length||this._buf[0]!==a)throw new Error(`Invalid key: ${this.toString()}`)}toString(e){return this._buf.toString(e||"utf8")}toBuffer(){return this._buf}get[Symbol.toStringTag](){return`[Key ${this.toString()}]`}static withNamespaces(e){return new u(e.join(s))}static random(){return new u(n().replace(/-/g,""))}clean(){for(this._buf&&0!==this._buf.length||(this._buf=r.from(s)),this._buf[0]!==a&&(this._buf=r.concat([o,this._buf]));this._buf.length>1&&this._buf[this._buf.length-1]===a;)this._buf=this._buf.slice(0,-1)}less(e){const t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;const n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(s).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new u(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(s)||(e+=s),e+=this.type(),new u(e)}parent(){const e=this.list();return 1===e.length?new u(s):new u(e.slice(0,-1).join(s))}child(e){return this.toString()===s?e:e.toString()===s?this:new u(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}}const u=i(c,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});t.exports=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>interface-datastore"}],[4462,{"./errors":4459,"./key":4461,"./utils":4463,"async/setImmediate":1878,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("async/setImmediate"),s=e("./utils").asyncFilter,o=e("./utils").asyncSort,a=e("./key"),c=e("./errors");t.exports=class{constructor(){this.data={}}open(e){i(e)}put(e,t,r){this.data[e.toString()]=t,i(r)}get(e,t){this.has(e,((r,n)=>r?t(r):n?void t(null,this.data[e.toString()]):t(c.notFoundError())))}has(e,t){i((()=>{t(null,this.data[e.toString()]!==undefined)}))}delete(e,t){delete this.data[e.toString()],i((()=>{t()}))}batch(){let e=[],t=[];return{put(t,r){e.push([t,r])},delete(e){t.push(e)},commit:r=>{e.forEach((e=>{this.data[e[0].toString()]=e[1]})),e=[],t.forEach((e=>{delete this.data[e.toString()]})),t=[],i(r)}}}query(e){let t=[n.keys(this.data),n.map((e=>({key:new a(e),value:this.data[e]})))],r=[];if(null!=e.prefix){const t=e.prefix;r.push(((e,r)=>r(null,e.key.toString().startsWith(t))))}if(null!=e.filters&&(r=r.concat(e.filters)),t=t.concat(r.map((e=>s(e)))),null!=e.orders&&(t=t.concat(e.orders.map((e=>o(e))))),null!=e.offset){let r=0;t.push(n.filter((()=>r++>=e.offset)))}return null!=e.limit&&t.push(n.take(e.limit)),!0===e.keysOnly&&t.push(n.map((e=>({key:e.key})))),n.apply(null,t)}close(e){i(e)}}}}},{package:"3box>ipfs>interface-datastore"}],[4463,{os:5373,path:5406,"pull-defer/source":5464,"pull-stream":5487,"uuid/v4":4458},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-defer/source"),s=e("path"),o=e("os"),a=e("uuid/v4");r.asyncFilter=function(e){let t,r,n=!1;return function(i){return function s(o,a){if(r)return a(r);o?(r=o,i(o,n?()=>{n?t=a:a(o)}:a)):i(null,((i,o)=>{i?a(i):r?a(r):(n=!0,e(o,((e,i)=>{n=!1,r?(a(r),t(r)):e?s(e,a):i?a(null,o):s(null,a)})))}))}}},r.asyncSort=function(e){const t=i(),r=n.collect(((r,i)=>{if(r)return t.abort(r);e(i,((e,r)=>{if(e)return t.abort(e);t.resolve(n.values(i))}))}));return function(e){return r(e),t}},r.replaceStartWith=function(e,t){const r=new RegExp("^"+t);return e.replace(r,"")},r.tmpdir=()=>s.join(o.tmpdir(),a())}}},{package:"3box>ipfs>interface-datastore"}],[4465,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",i="[0-9a-fA-F]{1,4}",s=`\n(\n(?:${i}:){7}(?:${i}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(:${i}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(:${i}){0,1}:${n}|(:${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(:${i}){0,2}:${n}|(:${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(:${i}){0,3}:${n}|(:${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(:${i}){0,4}:${n}|(:${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${i}){0,5}:${n}|(?::${i}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=t.exports=e=>e&&e.exact?new RegExp(`(?:^${n}$)|(?:^${s}$)`):new RegExp(`(?:${n})|(?:${s})`,"g");o.v4=e=>e&&e.exact?new RegExp(`^${n}$`):new RegExp(n,"g"),o.v6=e=>e&&e.exact?new RegExp(`^${s}$`):new RegExp(s,"g")}}},{package:"chromedriver>tcp-port-used>is2>ip-regex"}],[4466,{buffer:2132,os:5373},function(){with(this)return function(){"use strict";return function(e,t,r){var n=r,i=e("buffer").Buffer,s=e("os");n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new i(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var s,o=e.split(":",8);for(s=0;s<o.length;s++){var a;this.isV4Format(o[s])&&(a=this.toBuffer(o[s]),o[s]=a.slice(0,2).toString("hex")),a&&++s<8&&o.splice(s,0,a.slice(2,4).toString("hex"))}if(""===o[0])for(;o.length<8;)o.unshift("0");else if(""===o[o.length-1])for(;o.length<8;)o.push("0");else if(o.length<8){for(s=0;s<o.length&&""!==o[s];s++);var c=[s,1];for(s=9-o.length;s>0;s--)c.push("0");o.splice.apply(o,c)}for(n=t||new i(r+16),s=0;s<o.length;s++){var u=parseInt(o[s],16);n[r++]=u>>8&255,n[r++]=255&u}}if(!n)throw Error("Invalid ip address: "+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var i=0;i<r;i++)n.push(e[t+i]);n=n.join(".")}else if(16===r){for(i=0;i<r;i+=2)n.push(e.readUInt16BE(t+i).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}n.isV4Format=function(e){return o.test(e)},n.isV6Format=function(e){return a.test(e)},n.fromPrefixLen=function(e,t){var r=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(r=16);for(var s=new i(r),o=0,a=s.length;o<a;++o){var u=8;e<8&&(u=e),e-=u,s[o]=255&~(255>>u)}return n.toString(s)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new i(Math.max(e.length,t.length)),s=0;if(e.length===t.length)for(s=0;s<e.length;s++)r[s]=e[s]&t[s];else if(4===t.length)for(s=0;s<t.length;s++)r[s]=e[e.length-4+s]&t[s];else{for(s=0;s<r.length-6;s++)r[s]=0;for(r[10]=255,r[11]=255,s=0;s<e.length;s++)r[s+12]=e[s]&t[s+12];s+=12}for(;s<r.length;s++)r[s]=0;return n.toString(r)},n.cidr=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,i)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),i=n.toBuffer(t),s=0,o=0;o<i.length;o++)if(255===i[o])s+=8;else for(var a=255&i[o];a;)a=a<<1&255,s++;var c=Math.pow(2,32-s);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:s,numHosts:c<=2?c:c-2,length:c,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var i=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,i)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var i=e,s=t;t.length>e.length&&(i=t,s=e);var o=i.length-s.length;for(r=o;r<i.length;++r)i[r]|=s[r-o];return n.toString(i)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var i=t;t=e,e=i}for(r=0;r<10;r++)if(0!==t[r])return!1;var s=t.readUInt16BE(10);if(0!==s&&65535!==s)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},n.address=function(e,t){var r,i=s.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var o=i[e].filter((function(e){return e.family.toLowerCase()===t}));return 0===o.length?undefined:o[0].address}return(r=Object.keys(i).map((function(r){var s=i[r].filter((function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||("public"===e?n.isPrivate(r.address):n.isPublic(r.address)))}));return s.length?s[0].address:undefined})).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},n.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}}}},{package:"react-devtools>ip"}],[4467,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=Math.ceil,o=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,f=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function b(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return g(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,v,E,x,S,R,A,I,N,O,D=V.prototype={constructor:V,toString:null,valueOf:null},T=new V(1),L=20,P=4,B=-7,C=21,j=-1e7,M=1e7,z=!1,F=1,U=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function V(e,t){var r,i,s,a,u,h,d,p,g=this;if(!(g instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>M?g.c=g.e=null:e.e<j?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);return void(a>M?g.c=g.e=null:(g.e=a,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return E(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(a=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(y(t,2,H.length,"Base"),10==t)return W(g=new V(e),L+g.e+1,P);if(p=String(e),h="number"==typeof e){if(0*e!=0)return E(g,p,h,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=H.slice(0,t),a=u=0,d=p.length;u<d;u++)if(r.indexOf(i=p.charAt(u))<0){if("."==i){if(u>a){a=d;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,u=-1,a=0;continue}return E(g,String(e),h,t)}h=!1,(a=(p=v(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(u,++d)){if(d-=u,h&&V.DEBUG&&d>15&&(e>f||e!==o(e)))throw Error(c+g.s*e);if((a=a-u-1)>M)g.c=g.e=null;else if(a<j)g.c=[g.e=0];else{if(g.e=a,g.c=[],u=(a+1)%l,a<0&&(u+=l),u<d){for(u&&g.c.push(+p.slice(0,u)),d-=l;u<d;)g.c.push(+p.slice(u,u+=l));u=l-(p=p.slice(u)).length}else u-=d;for(;u--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function q(e,t,r,n){var i,s,o,a,c;if(null==r?r=P:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=b(e.c),c=1==n||2==n&&(o<=B||o>=C)?w(c,o):k(c,o,"0");else if(s=(e=W(new V(e),t,r)).e,a=(c=b(e.c)).length,1==n||2==n&&(t<=s||s<=B)){for(;a<t;c+="0",a++);c=w(c,s)}else if(t-=o,c=k(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function G(e,t){for(var r,n=1,i=new V(e[0]);n<e.length;n++){if(!(r=new V(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*l-1)>M?e.c=e.e=null:r<j?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,n){var i,a,c,f,d,p,g,b=e.c,m=h;if(b){e:{for(i=1,f=b[0];f>=10;f/=10,i++);if((a=t-i)<0)a+=l,c=t,g=(d=b[p=0])/m[i-c-1]%10|0;else if((p=s((a+1)/l))>=b.length){if(!n)break e;for(;b.length<=p;b.push(0));d=g=0,i=1,c=(a%=l)-l+1}else{for(d=f=b[p],i=1;f>=10;f/=10,i++);g=(c=(a%=l)-l+i)<0?0:d/m[i-c-1]%10|0}if(n=n||t<0||null!=b[p+1]||(c<0?d:d%m[i-c-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?c>0?d/m[i-c]:0:b[p-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,n?(t-=e.e+1,b[0]=m[(l-t%l)%l],e.e=-t||0):b[0]=e.e=0,e;if(0==a?(b.length=p,f=1,p--):(b.length=p+1,f=m[l-a],b[p]=c>0?o(d/m[i-c]%m[c])*f:0),n)for(;;){if(0==p){for(a=1,c=b[0];c>=10;c/=10,a++);for(c=b[0]+=f,f=1;c>=10;c/=10,f++);a!=f&&(e.e++,b[0]==u&&(b[0]=1));break}if(b[p]+=f,b[p]!=u)break;b[p--]=0,f=1}for(a=b.length;0===b[--a];b.pop());}e.e>M?e.c=e.e=null:e.e<j&&(e.c=[e.e=0])}return e}function Z(e){var t,r=e.e;return null===r?e.toString():(t=b(e.c),t=r<=B||r>=C?w(t,r):k(t,r,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,p,t),L=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),P=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-p,0,t),y(r[1],0,p,t),B=r[0],C=r[1]):(y(r,-p,p,t),B=-(C=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-p,-1,t),y(r[1],1,p,t),j=r[0],M=r[1];else{if(y(r,-p,p,t),!r)throw Error(a+t+" cannot be zero: "+r);j=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw z=!r,Error(a+"crypto unavailable");z=r}else z=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,p,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);H=r}}return{DECIMAL_PLACES:L,ROUNDING_MODE:P,EXPONENTIAL_AT:[B,C],RANGE:[j,M],CRYPTO:z,MODULO_MODE:F,POW_PRECISION:U,FORMAT:$,ALPHABET:H}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return G(arguments,D.lt)},V.minimum=V.min=function(){return G(arguments,D.gt)},V.random=(x=9007199254740992,S=Math.random()*x&2097151?function(){return o(Math.random()*x)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,c,u=0,f=[],d=new V(T);if(null==e?e=L:y(e,0,p),i=s(e/l),z)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(f.push(c%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw z=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(f.push(c%1e14),u+=7);u=i/7}if(!z)for(;u<i;)(c=S())<9e15&&(f[u++]=c%1e14);for(i=f[--u],e%=l,i&&e&&(c=h[l-e],f[u]=o(i/c)*c);0===f[u];f.pop(),u--);if(u<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=l);for(u=1,c=f[0];c>=10;c/=10,u++);u<l&&(n-=l-u)}return d.e=n,d.c=f,d}),V.sum=function(){for(var e=1,t=arguments,r=new V(t[0]);e<t.length;)r=r.plus(t[e++]);return r},v=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,f,h,d,p,g,m=n.indexOf("."),y=L,_=P;for(m>=0&&(f=U,U=0,n=n.replace(".",""),d=(g=new V(i)).pow(n.length-m),U=f,g.c=t(k(b(d.c),d.e,"0"),10,s,e),g.e=g.c.length),l=f=(p=t(n,i,s,a?(c=H,e):(c=e,H))).length;0==p[--f];p.pop());if(!p[0])return c.charAt(0);if(m<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,g,y,_,s)).c,h=d.r,l=d.e),m=p[u=l+y+1],f=s/2,h=h||u<0||null!=p[u+1],h=_<4?(null!=m||h)&&(0==_||_==(d.s<0?3:2)):m>f||m==f&&(4==_||h||6==_&&1&p[u-1]||_==(d.s<0?8:7)),u<1||!p[0])n=h?k(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,h)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(m=0,n="";m<=f;n+=c.charAt(p[m++]));n=k(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%d,l=t/d|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%d)+(n=l*s+(o=e[c]/d|0)*u)%d*d+a)/r|0)+(n/d|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,c){var f,h,d,p,b,m,y,_,w,k,v,E,x,S,R,A,I,N=n.s==i.s?1:-1,O=n.c,D=i.c;if(!(O&&O[0]&&D&&D[0]))return new V(n.s&&i.s&&(O?!D||O[0]!=D[0]:D)?O&&0==O[0]||!D?0*N:N/0:NaN);for(w=(_=new V(N)).c=[],N=s+(h=n.e-i.e)+1,c||(c=u,h=g(n.e/l)-g(i.e/l),N=N/l|0),d=0;D[d]==(O[d]||0);d++);if(D[d]>(O[d]||0)&&h--,N<0)w.push(1),p=!0;else{for(S=O.length,A=D.length,d=0,N+=2,(b=o(c/(D[0]+1)))>1&&(D=e(D,b,c),O=e(O,b,c),A=D.length,S=O.length),x=A,v=(k=O.slice(0,A)).length;v<A;k[v++]=0);I=D.slice(),I=[0].concat(I),R=D[0],D[1]>=c/2&&R++;do{if(b=0,(f=t(D,k,A,v))<0){if(E=k[0],A!=v&&(E=E*c+(k[1]||0)),(b=o(E/R))>1)for(b>=c&&(b=c-1),y=(m=e(D,b,c)).length,v=k.length;1==t(m,k,y,v);)b--,r(m,A<y?I:D,y,c),y=m.length,f=1;else 0==b&&(f=b=1),y=(m=D.slice()).length;if(y<v&&(m=[0].concat(m)),r(k,m,v,c),v=k.length,-1==f)for(;t(D,k,A,v)<1;)b++,r(k,A<v?I:D,v,c),v=k.length}else 0===f&&(b++,k=[0]);w[d++]=b,k[0]?k[v++]=O[x]||0:(k=[O[x]],v=1)}while((x++<S||null!=k[0])&&N--);p=null!=k[0],w[0]||w.splice(0,1)}if(c==u){for(d=1,N=w[0];N>=10;N/=10,d++);W(_,s+(_.e=d+h*l-1)+1,a,p)}else _.e=h,_.r=+p;return _}}(),R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,I=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,n){var i,s=r?t:t.replace(O,"");if(N.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(R,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(A,"$1").replace(I,"0.$1")),t!=s))return new V(s,i);if(V.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},D.absoluteValue=D.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},D.comparedTo=function(e,t){return m(this,new V(e,t))},D.decimalPlaces=D.dp=function(e,t){var r,n,i,s=this;if(null!=e)return y(e,0,p),null==t?t=P:y(t,0,8),W(new V(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-g(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},D.dividedBy=D.div=function(e,t){return r(this,new V(e,t),L,P)},D.dividedToIntegerBy=D.idiv=function(e,t){return r(this,new V(e,t),0,1)},D.exponentiatedBy=D.pow=function(e,t){var r,n,i,c,u,f,h,d,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new V(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new V(Math.pow(+Z(p),u?2-_(e):+Z(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(n=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&_(e)?-0:0,p.e>-1&&(c=1/c),new V(f?1/c:c);U&&(c=s(U/l+2))}for(u?(r=new V(.5),f&&(e.s=1),h=_(e)):h=(i=Math.abs(+Z(e)))%2,d=new V(T);;){if(h){if(!(d=d.times(p)).c)break;c?d.c.length>c&&(d.c.length=c):n&&(d=d.mod(t))}if(i){if(0===(i=o(i/2)))break;h=i%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)h=_(e);else{if(0===(i=+Z(e)))break;h=i%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?d:(f&&(d=T.div(d)),t?d.mod(t):c?W(d,U,P,undefined):d)},D.integerValue=function(e){var t=new V(this);return null==e?e=P:y(e,0,8),W(t,t.e+1,e)},D.isEqualTo=D.eq=function(e,t){return 0===m(this,new V(e,t))},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(e,t){return m(this,new V(e,t))>0},D.isGreaterThanOrEqualTo=D.gte=function(e,t){return 1===(t=m(this,new V(e,t)))||0===t},D.isInteger=function(){return!!this.c&&g(this.e/l)>this.c.length-2},D.isLessThan=D.lt=function(e,t){return m(this,new V(e,t))<0},D.isLessThanOrEqualTo=D.lte=function(e,t){return-1===(t=m(this,new V(e,t)))||0===t},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&0==this.c[0]},D.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new V(e,t)).s,!a||!t)return new V(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/l,f=e.e/l,h=o.c,d=e.c;if(!c||!f){if(!h||!d)return h?(e.s=-t,e):new V(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new V(h[0]?o:3==P?-0:0)}if(c=g(c),f=g(f),h=h.slice(),a=c-f){for((s=a<0)?(a=-a,i=h):(f=c,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(h[t]!=d[t]){s=h[t]<d[t];break}if(s&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=u-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=u}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--f);return h[0]?K(e,h,f):(e.s=3==P?-1:1,e.c=[e.e=0],e)},D.modulo=D.mod=function(e,t){var n,i,s=this;return e=new V(e,t),!s.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||s.c&&!s.c[0]?new V(s):(9==F?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,F),(e=s.minus(n.times(e))).c[0]||1!=F||(e.s=s.s),e)},D.multipliedBy=D.times=function(e,t){var r,n,i,s,o,a,c,f,h,p,b,m,y,_,w,k=this,v=k.c,E=(e=new V(e,t)).c;if(!(v&&E&&v[0]&&E[0]))return!k.s||!e.s||v&&!v[0]&&!E||E&&!E[0]&&!v?e.c=e.e=e.s=null:(e.s*=k.s,v&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=g(k.e/l)+g(e.e/l),e.s*=k.s,(c=v.length)<(p=E.length)&&(y=v,v=E,E=y,i=c,c=p,p=i),i=c+p,y=[];i--;y.push(0));for(_=u,w=d,i=p;--i>=0;){for(r=0,b=E[i]%w,m=E[i]/w|0,s=i+(o=c);s>i;)r=((f=b*(f=v[--o]%w)+(a=m*f+(h=v[o]/w|0)*b)%w*w+y[s]+r)/_|0)+(a/w|0)+m*h,y[s--]=f%_;y[s]=r}return r?++n:y.splice(0,1),K(e,y,n)},D.negated=function(){var e=new V(this);return e.s=-e.s||null,e},D.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new V(e,t)).s,!i||!t)return new V(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/l,o=e.e/l,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new V(i/0);if(!a[0]||!c[0])return c[0]?e:new V(a[0]?n:0*i)}if(s=g(s),o=g(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++o),K(e,a,o)},D.precision=D.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return y(e,1,p),null==t?t=P:y(t,0,8),W(new V(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},D.shiftedBy=function(e){return y(e,-9007199254740991,f),this.times("1e"+e)},D.squareRoot=D.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=L+4,f=new V("0.5");if(1!==c||!a||!a[0])return new V(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+Z(o)))||c==1/0?(((t=b(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=g((u+1)/2)-(u<0||u%2),n=new V(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new V(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),b(s.c).slice(0,c)===(t=b(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+L+2,1),e=!n.times(n).eq(o));break}if(!i&&(W(s,s.e+L+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return W(n,n.e+L+1,P,e)},D.toExponential=function(e,t){return null!=e&&(y(e,0,p),e++),q(this,e,t,1)},D.toFixed=function(e,t){return null!=e&&(y(e,0,p),e=e+this.e+1),q(this,e,t)},D.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=o[0],h=o[1],d=i.s<0,p=d?f.slice(1):f,g=p.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,f=p.substr(0,s);s<g;s+=c)f+=l+p.substr(s,c);u>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},D.toFraction=function(e){var t,n,i,s,o,c,u,f,d,p,g,m,y=this,_=y.c;if(null!=e&&(!(u=new V(e)).isInteger()&&(u.c||1!==u.s)||u.lt(T)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Z(u));if(!_)return new V(y);for(t=new V(T),d=n=new V(T),i=f=new V(T),m=b(_),o=t.e=m.length-y.e-1,t.c[0]=h[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:d:u,c=M,M=1/0,u=new V(m),f.c[0]=0;p=r(u,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,d=f.plus(p.times(s=d)),f=s,t=u.minus(p.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),f=f.plus(s.times(d)),n=n.plus(s.times(i)),f.s=d.s=y.s,g=r(d,i,o*=2,P).minus(y).abs().comparedTo(r(f,n,o,P).minus(y).abs())<1?[d,i]:[f,n],M=c,g},D.toNumber=function(){return+Z(this)},D.toPrecision=function(e,t){return null!=e&&y(e,1,p),q(this,e,t,2)},D.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=B||i>=C?w(b(r.c),i):k(b(r.c),i,"0"):10===e?t=k(b((r=W(new V(r),L+i+1,P)).c),r.e,"0"):(y(e,2,H.length,"Base"),t=v(k(b(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},D.valueOf=D.toJSON=function(){return Z(this)},D._isBigNumber=!0,i&&(D[Symbol.toStringTag]="BigNumber",D[Symbol.for("nodejs.util.inspect.custom")]=D.valueOf),null!=t&&V.set(t),V}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"3box>ipfs>ipfs-bitswap>bignumber.js"}],[4468,{"./utils":4472,blakejs:2085,buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("blakejs"),i=e("./utils").toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,t)=>i((n=>{const i=t.init(e,null);return t.update(i,n),r.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-bitswap>multihashing-async"}],[4469,{buffer:2132,nodeify:5310},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const o=i.digest({name:e},t);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then((e=>r.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-bitswap>multihashing-async"}],[4470,{"./blake":4468,"./crypto-sha1-2":4469,"./utils":4472,buffer:2132,"js-sha3":4767,murmurhash3js:5270},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),o=e("./crypto-sha1-2"),a=s.toCallback,c=s.toBuf,u=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(l(u(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,n)=>{e&&t(e),o.sha2256(r.from(n),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-bitswap>multihashing-async"}],[4471,{"./crypto":4470,buffer:2132,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("multihashes"),i=e("./crypto");function s(e,t,r,i){if("function"==typeof r&&(i=r,r=undefined),!i)throw new Error("Missing callback");s.digest(e,t,r,((e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))}))}t.exports=s,s.Buffer=r,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=undefined),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-bitswap>multihashing-async"}],[4472,{_process:5430,buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){r.toCallback=t=>function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)},r.toBuf=(e,r)=>n=>{let i=e(n,r);return t.from(i,"hex")},r.fromString=(e,r)=>n=>{const i=t.isBuffer(n)?n.toString():n;return e(i,r)},r.fromNumberTo32BitBuf=(e,r)=>n=>{let i=e(n,r);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-bitswap>multihashing-async"}],[4473,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={maxProvidersPerRequest:3,providerRequestTimeout:1e4,hasBlockTimeout:15e3,provideTimeout:15e3,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:1e4,maxListeners:1e3}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4474,{"../types/message":4482,"../types/wantlist":4485,"../utils":4486,"./ledger":4475,"async/each":1838,"async/eachSeries":1843,"async/map":1869,"async/nextTick":1872,"async/waterfall":1884,"just-debounce-it":4799},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/each"),i=e("async/eachSeries"),s=e("async/waterfall"),o=e("async/nextTick"),a=e("async/map"),c=e("just-debounce-it"),u=e("../types/message"),l=e("../types/wantlist"),f=e("./ledger"),{logger:h,groupBy:d,pullAllWith:p,uniqWith:g}=e("../utils"),b=524288;t.exports=class{constructor(e,t,r,n){this._log=h(e,"engine"),this.blockstore=t,this.network=r,this._stats=n,this.ledgerMap=new Map,this._running=!1,this._tasks=[],this._outbox=c(this._processTasks.bind(this),100)}_sendBlocks(e,t,r){if(t.reduce(((e,t)=>e+t.data.byteLength),0)<b)return this._sendSafeBlocks(e,t,r);let n=0,s=[],a=t.length;i(t,((t,r)=>{if(a--,s.push(t),n+=t.data.byteLength,n>=b||0===a){n=0;const t=s.slice();s=[],this._sendSafeBlocks(e,t,(e=>{e&&this._log("sendblock error: %s",e.message),r()}))}else o(r)}),r)}_sendSafeBlocks(e,t,r){const n=new u(!1);t.forEach((e=>n.addBlock(e))),this.network.sendMessage(e,n,r)}_processTasks(){if(!this._running||!this._tasks.length)return;const e=this._tasks;this._tasks=[];const t=e.map((e=>e.entry)).map((e=>e.cid)),r=g(((e,t)=>e.equals(t)),t),i=d((e=>e.target.toB58String()),e);s([e=>a(r,((e,t)=>{this.blockstore.get(e,t)}),e),(e,r)=>n(Object.values(i),((r,n)=>{const i=r[0].target,s=t.map((t=>e.find((e=>e.cid.equals(t)))));this._sendBlocks(i,s,(e=>{e?this._log.error("should never happen: ",e):s.forEach((e=>this.messageSent(i,e))),n()}))}),r)],(e=>{this._tasks=[],e&&this._log.error(e)}))}wantlistForPeer(e){const t=e.toB58String();return this.ledgerMap.has(t)?this.ledgerMap.get(t).wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toB58String(),r=this.ledgerMap.get(t);return r?{peer:r.partner.toPrint(),value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){e.length&&(this.ledgerMap.forEach((t=>{e.map((e=>t.wantlistContains(e))).filter(Boolean).forEach((e=>{this._tasks.push({entry:e,target:t.partner})}))})),this._outbox())}messageReceived(e,t,r){const n=this._findOrCreate(e);if(t.empty)return o(r);if(t.full&&(n.wantlist=new l),this._processBlocks(t.blocks,n),0===t.wantlist.size)return o(r);let i=[],s=[];t.wantlist.forEach((e=>{e.cancel?(n.cancelWant(e.cid),i.push(e)):(n.wants(e.cid,e.priority),s.push(e))})),this._cancelWants(n,e,i),this._addWants(n,e,s,r)}_cancelWants(e,t,r){const n=t.toB58String();this._tasks=p(((e,t)=>{const r=e.target.toB58String()===n,i=e.entry.cid.equals(t.cid);return r&&i}),this._tasks,r)}_addWants(e,t,r,i){n(r,((e,r)=>{this.blockstore.has(e.cid,((n,i)=>{n?this._log.error("failed existence check"):i&&this._tasks.push({entry:e.entry,target:t}),r()}))}),(()=>{this._outbox(),i()}))}_processBlocks(e,t,r){const n=[];e.forEach(((e,r)=>{this._log("got block (%s bytes)",e.data.length),t.receivedBytes(e.data.length),n.push(e.cid)})),this.receivedBlocks(n)}messageSent(e,t){const r=this._findOrCreate(e);r.sentBytes(t?t.data.length:0),t&&t.cid&&r.wantlist.remove(t.cid)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){const t=e.toB58String();if(this.ledgerMap.has(t))return this.ledgerMap.get(t);const r=new f(e);return this.ledgerMap.set(t,r),this._stats&&this._stats.push(t,"peerCount",1),r}start(e){this._running=!0,o((()=>e()))}stop(e){this._running=!1,o((()=>e()))}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4475,{"../types/wantlist":4485},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../types/wantlist");t.exports=class{constructor(e){this.partner=e,this.wantlist=new n,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t){this.wantlist.add(e,t)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.contains(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4476,{"./decision-engine":4474,"./network":4477,"./notifications":4478,"./stats":4479,"./utils":4486,"./want-manager":4487,"async/each":1838,"async/map":1869,"async/nextTick":1872,"async/reject":1875,"async/series":1877,"async/waterfall":1884},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/waterfall"),i=e("async/reject"),s=e("async/each"),o=e("async/series"),a=e("async/map"),c=e("async/nextTick"),u=e("./want-manager"),l=e("./network"),f=e("./decision-engine"),h=e("./notifications"),d=e("./utils").logger,p=e("./stats"),g={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},b=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];t.exports=class{constructor(e,t,r){this._libp2p=e,this._log=d(this.peerInfo.id),this._options=Object.assign({},g,r),this._stats=new p(b,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new l(e,this,{},this._stats),this.blockstore=t,this.engine=new f(this.peerInfo.id,t,this.network,this._stats),this.wm=new u(this.peerInfo.id,this.network,this._stats),this.notifications=new h(this.peerInfo.id)}get peerInfo(){return this._libp2p.peerInfo}_receiveMessage(e,t,r){this.engine.messageReceived(e,t,(n=>{if(n&&this._log("failed to receive message",t),0===t.blocks.size)return r();const i=Array.from(t.blocks.values()),o=i.filter((e=>this.wm.wantlist.contains(e.cid))).map((e=>e.cid));this.wm.cancelWants(o),s(i,((t,r)=>{const n=o.includes(t.cid);this._handleReceivedBlock(e,t,n,r)}),r)}))}_handleReceivedBlock(e,t,r,i){this._log("received block"),n([e=>this.blockstore.has(t.cid,e),(n,i)=>{if(this._updateReceiveCounters(e.toB58String(),t,n),n||!r)return c(i);this._putBlock(t,i)}],i)}_updateReceiveCounters(e,t,r){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",t.data.length),r&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",t.data.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}_putBlock(e,t){this.blockstore.put(e,(r=>{if(r)return t(r);this.notifications.hasBlock(e),this.network.provide(e.cid,(e=>{e&&this._log.error("Failed to provide: %s",e.message)})),this.engine.receivedBlocks([e.cid]),t()}))}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}get(e,t){this.getMany([e],((e,r)=>{if(e)return t(e);r&&r.length>0?t(null,r[0]):t()}))}getMany(e,t){let r=e.length;const i=[];let s=!1;const o=(e,t)=>{i.push(e),this.notifications.wantBlock(e,(r=>{this.wm.cancelWants([e]),t(null,r)}),(()=>{this.wm.cancelWants([e]),t(null,undefined)})),r||this.wm.wantBlocks(i)};a(e,((t,a)=>{n([e=>this.blockstore.has(t,e),(n,a)=>{if(r--,n)return r||this.wm.wantBlocks(i),this.blockstore.get(t,a);s||(s=!0,this.network.findAndConnect(e[0],(e=>{e&&this._log.error(e)}))),o(t,a)}],a)}),t)}unwant(e){Array.isArray(e)||(e=[e]),this.wm.unwantBlocks(e),e.forEach((e=>this.notifications.unwantBlock(e)))}cancelWants(e){Array.isArray(e)||(e=[e]),this.wm.cancelWants(e)}put(e,t){this._log("putting block"),n([t=>this.blockstore.has(e.cid,t),(t,r)=>{if(t)return c(r);this._putBlock(e,r)}],t)}putMany(e,t){n([t=>i(e,((e,t)=>{this.blockstore.has(e.cid,t)}),t),(e,t)=>this.blockstore.putMany(e,(r=>{if(r)return t(r);e.forEach((e=>{this.notifications.hasBlock(e),this.engine.receivedBlocks([e.cid]),this.network.provide(e.cid,(e=>{e&&this._log.error("Failed to provide: %s",e.message)}))})),t()}))],t)}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(e){o([e=>this.wm.start(e),e=>this.network.start(e),e=>this.engine.start(e)],e)}stop(e){this._stats.stop(),o([e=>this.wm.stop(e),e=>this.network.stop(e),e=>this.engine.stop(e)],e)}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4477,{"./constants":4473,"./types/message":4482,"./utils":4486,"async/each":1838,"async/nextTick":1872,"async/waterfall":1884,"pull-length-prefixed":5469,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-length-prefixed"),i=e("pull-stream"),s=e("async/waterfall"),o=e("async/each"),a=e("async/nextTick"),c=e("./types/message"),u=e("./constants"),l=e("./utils").logger,f="/ipfs/bitswap/1.0.0",h="/ipfs/bitswap/1.1.0";t.exports=class{constructor(e,t,r,n){this._log=l(e.peerInfo.id,"network"),r=r||{},this.libp2p=e,this.bitswap=t,this.b100Only=r.b100Only||!1,this._stats=n,this._running=!1}start(e){this._running=!0,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this.libp2p.handle(f,this._onConnection),this.b100Only||this.libp2p.handle(h,this._onConnection),this.libp2p.on("peer:connect",this._onPeerConnect),this.libp2p.on("peer:disconnect",this._onPeerDisconnect),this.libp2p.peerBook.getAllArray().filter((e=>e.isConnected())).forEach((e=>this._onPeerConnect(e))),a((()=>e()))}stop(e){this._running=!1,this.libp2p.unhandle(f),this.b100Only||this.libp2p.unhandle(h),this.libp2p.removeListener("peer:connect",this._onPeerConnect),this.libp2p.removeListener("peer:disconnect",this._onPeerDisconnect),a((()=>e()))}_onConnection(e,t){this._running&&(this._log("incomming new bitswap connection: %s",e),i(t,n.decode(),i.asyncMap(((e,t)=>c.deserialize(e,t))),i.asyncMap(((e,r)=>{t.getPeerInfo(((t,n)=>{if(t)return r(t);this.bitswap._receiveMessage(n.id,e,r)}))})),i.onEnd((e=>{this._log("ending connection"),e&&this.bitswap._receiveError(e)}))))}_onPeerConnect(e){this._running&&this.bitswap._onPeerConnected(e.id)}_onPeerDisconnect(e){this._running&&this.bitswap._onPeerDisconnected(e.id)}findProviders(e,t,r){this.libp2p.contentRouting.findProviders(e,{maxTimeout:u.providerRequestTimeout,maxNumProviders:t},r)}findAndConnect(e,t){s([t=>this.findProviders(e,u.maxProvidersPerRequest,t),(e,t)=>{this._log("connecting to providers",e.map((e=>e.id.toB58String()))),o(e,((e,t)=>this.connectTo(e,t)))}],t)}provide(e,t){this.libp2p.contentRouting.provide(e,t)}sendMessage(e,t,r){if(!this._running)return r(new Error("network isn't running"));const s=e.toB58String()?e.toB58String():e.id.toB58String();this._log("sendMessage to %s",s,t),this._dialPeer(e,((s,o,a)=>{if(s)return r(s);let c;switch(a){case f:c=t.serializeToBitswap100();break;case h:c=t.serializeToBitswap110();break;default:return r(new Error("Unkown protocol: "+a))}!function(e,t,r){i(i.values([t]),n.encode(),e,i.onEnd(r))}(o,c,(e=>{e&&this._log.error(e)})),r(),this._updateSentStats(e,t.blocks)}))}connectTo(e,t){if(!this._running)return t(new Error("network isn't running"));this.libp2p.dial(e,t)}_dialPeer(e,t){this.libp2p.dialProtocol(e,h,((r,n)=>{r?this.libp2p.dialProtocol(e,f,((e,r)=>{if(e)return t(e);t(null,r,f)})):t(null,n,h)}))}_updateSentStats(e,t){const r=e.toB58String();this._stats&&(t.forEach((e=>this._stats.push(r,"dataSent",e.data.length))),this._stats.push(r,"blocksSent",t.size))}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4478,{"./constants":4473,"./utils":4486,events:2133},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events").EventEmitter,i=e("./constants"),s=e("./utils").logger,o=e=>`unwant:${e}`,a=e=>`block:${e}`;t.exports=class extends n{constructor(e){super(),this.setMaxListeners(i.maxListeners),this._log=s(e,"notif"),this._unwantListeners={},this._blockListeners={}}hasBlock(e){const t=`block:${e.cid.buffer.toString()}`;this._log(t),this.emit(t,e)}wantBlock(e,t,r){const n=e.buffer.toString();this._log(`wantBlock:${n}`),this._unwantListeners[n]=()=>{this._log(`manual unwant: ${n}`),this._cleanup(n),r()},this._blockListeners[n]=e=>{this._cleanup(n),t(e)},this.once(o(n),this._unwantListeners[n]),this.once(a(n),this._blockListeners[n])}unwantBlock(e){const t=`unwant:${e.buffer.toString()}`;this._log(t),this.emit(t)}_cleanup(e){this._unwantListeners[e]&&(this.removeListener(o(e),this._unwantListeners[e]),delete this._unwantListeners[e]),this._blockListeners[e]&&(this.removeListener(a(e),this._blockListeners[e]),delete this._blockListeners[e])}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4479,{"./stat":4480,events:2133},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events"),i=e("./stat"),s={movingAverageIntervals:[6e4,3e5,9e5]};t.exports=class extends n{constructor(e,t){super();const r=Object.assign({},s,t);if("number"!=typeof r.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof r.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=r,this._enabled=this._options.enabled,this._global=new i(e,r),this._global.on("update",(e=>this.emit("update",e))),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){return e.toB58String&&(e=e.toB58String()),this._peers.get(e)}push(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){let n=this._peers.get(e);n||(n=new i(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}disconnected(e){const t=e.toB58String(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4480,{"bignumber.js":4467,events:2133,"moving-average":5219},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events"),i=e("bignumber.js"),s=e("moving-average");t.exports=class extends n{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=i(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{(this._movingAverages[e][t]=s(t)).push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/t*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=o[e];t||(t=o[e]=s(e)),t.push(r,i)}))}_applyOp(e){const t=e[0],r=e[1];if("number"!=typeof r)throw new Error("invalid increment number:",r);let n;n=this._stats.hasOwnProperty(t)?this._stats[t]:this._stats[t]=i(0),this._stats[t]=n.plus(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4481,{"../wantlist":4485,assert:1805,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../wantlist").Entry,i=e("cids"),s=e("assert");t.exports=class{constructor(e,t,r){s(i.isCID(e),"needs valid cid"),this.entry=new n(e,t),this.cancel=Boolean(r)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toBaseEncodedString()} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.entry.equals(e.entry)}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4482,{"./entry":4481,"./message.proto":4483,assert:1805,"async/each":1838,"async/nextTick":1872,cids:2169,"ipfs-block":4490,"lodash.isequalwith":5014,"multicodec/src/name-table":5236,"multihashing-async":4471,protons:5450,"varint-decoder":6039},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("protons"),i=e("ipfs-block"),s=e("lodash.isequalwith"),o=e("assert"),a=e("async/each"),c=e("async/nextTick"),u=e("cids"),l=e("multicodec/src/name-table"),f=e("varint-decoder"),h=e("multihashing-async"),d=n(e("./message.proto")),p=e("./entry");class g{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map}get empty(){return 0===this.blocks.size&&0===this.wantlist.size}addEntry(e,t,r){o(e&&u.isCID(e),"must be a valid cid");const n=e.buffer.toString(),i=this.wantlist.get(n);i?(i.priority=t,i.cancel=Boolean(r)):this.wantlist.set(n,new p(e,t,r))}addBlock(e){o(i.isBlock(e),"must be a valid cid");const t=e.cid.buffer.toString();this.blocks.set(t,e)}cancel(e){o(u.isCID(e),"must be a valid cid");const t=e.buffer.toString();this.wantlist.delete(t),this.addEntry(e,0,!0)}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)})))},blocks:Array.from(this.blocks.values()).map((e=>e.data))};return this.full&&(e.wantlist.full=!0),d.Message.encode(e)}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)})))},payload:[]};return this.full&&(e.wantlist.full=!0),this.blocks.forEach((t=>{e.payload.push({prefix:t.cid.prefix,data:t.data})})),d.Message.encode(e)}equals(e){const t=(e,t)=>{if(e.equals&&"function"==typeof e.equals)return e.equals(t)};return!(this.full!==e.full||!s(this.wantlist,e.wantlist,t)||!s(this.blocks,e.blocks,t))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}g.deserialize=(e,t)=>{let r;try{r=d.Message.decode(e)}catch(e){return c((()=>t(e)))}const n=r.wantlist&&r.wantlist.full||!1,s=new g(n);return r.wantlist&&r.wantlist.entries.forEach((e=>{let r;try{r=new u(e.block)}catch(e){return t(e)}s.addEntry(r,e.priority,e.cancel)})),r.blocks.length>0?a(r.blocks,((e,r)=>{h(e,"sha2-256",((n,o)=>{if(n)return r(n);let a;try{a=new u(o)}catch(n){return t(n)}s.addBlock(new i(e,a)),r()}))}),(e=>{if(e)return t(e);t(null,s)})):r.payload.length>0?a(r.payload,((e,t)=>{if(!e.prefix||!e.data)return c(t);const r=f(e.prefix),n=r[0],o=r[1],a=r[2];h(e.data,a,((r,a)=>{if(r)return t(r);let c;try{c=new u(n,l[o.toString("16")],a)}catch(r){return t(r)}s.addBlock(new i(e.data,c)),t()}))}),(e=>{if(e)return t(e);t(null,s)})):void t(null,s)},g.Entry=p,t.exports=g}}},{package:"3box>ipfs>ipfs-bitswap"}],[4483,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="\n  message Message {\n    message Wantlist {\n      message Entry {\n        // changed from string to bytes, it makes a difference in JavaScript\n        optional bytes block = 1;      // the block cid (cidV0 in bitswap 1.0.0, cidV1 in bitswap 1.1.0)\n        optional int32 priority = 2;    // the priority (normalized). default to 1\n        optional bool cancel = 3;       // whether this revokes an entry\n      }\n\n      repeated Entry entries = 1;       // a list of wantlist entries\n      optional bool full = 2;           // whether this is the full wantlist. default to false\n    }\n\n    message Block {\n      optional bytes prefix = 1;        // CID prefix (cid version, multicodec and multihash prefix (type + length)\n      optional bytes data = 2;\n    }\n\n    optional Wantlist wantlist = 1;\n    repeated bytes blocks = 2;          // used to send Blocks in bitswap 1.0.0\n    repeated Block payload = 3;         // used to send Blocks in bitswap 1.1.0\n  }\n"}}},{package:"3box>ipfs>ipfs-bitswap"}],[4484,{assert:1805,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("assert"),i=e("cids");class s{constructor(e,t){n(i.isCID(e),"must be valid CID"),this._refCounter=1,this.cid=e,this.priority=t||1}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toBaseEncodedString()}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority}}t.exports=s}}},{package:"3box>ipfs>ipfs-bitswap"}],[4485,{"../../utils":4486,"./entry":4484},function(){with(this)return function(){"use strict";return function(e,t,r){const{sortBy:n}=e("../../utils"),i=e("./entry");class s{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,t){const r=e.buffer.toString(),n=this.set.get(r);n?(n.inc(),n.priority=t):(this.set.set(r,new i(e,t)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.buffer.toString(),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(n((e=>e[1].key),Array.from(this.set.entries())))}contains(e){const t=e.buffer.toString();return this.set.get(t)}}s.Entry=i,t.exports=s}}},{package:"3box>ipfs>ipfs-bitswap"}],[4486,{debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=(e,t,r)=>{let n=0;const i=r.length;for(;n<i;){if(e(t,r[n]))return!0;n+=1}return!1};t.exports={logger:(e,t)=>{const r=["bitswap"];t&&r.push(t),e&&r.push(`${e.toB58String().slice(0,8)}`);const i=n(r.join(":"));return i.error=n(r.concat(["error"]).join(":")),i},includesWith:i,uniqWith:(e,t)=>{let r=0;const n=t.length,s=[];let o;for(;r<n;)o=t[r],i(e,o,s)||(s[s.length]=o),r+=1;return s},groupBy:(e,t)=>t.reduce(((t,r)=>{const n=e(r);return t[n]?t[n].push(r):t[n]=[r],t}),{}),pullAllWith:(e,t,r)=>t.filter((t=>!i(e,t,r))),sortBy:(e,t)=>Array.prototype.slice.call(t,0).sort(((t,r)=>{const n=e(t),i=e(r);return n<i?-1:n>i?1:0}))}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4487,{"../constants":4473,"../types/message":4482,"../types/wantlist":4485,"../utils":4486,"./msg-queue":4488,"async/nextTick":1872},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/nextTick"),i=e("../types/message"),s=e("../types/wantlist"),o=e("../constants"),a=e("./msg-queue"),c=e("../utils").logger;t.exports=class{constructor(e,t,r){this.peers=new Map,this.wantlist=new s(r),this.network=t,this._stats=r,this._peerId=e,this._log=c(e,"want")}_addEntries(e,t,r){const n=e.map(((e,r)=>new i.Entry(e,o.kMaxPriority-r,t)));n.forEach((e=>{e.cancel?r?this.wantlist.removeForce(e.cid):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(let e of this.peers.values())e.addEntries(n)}_startPeerHandler(e){let t=this.peers.get(e.toB58String());if(t)return void t.refcnt++;t=new a(this._peerId,e,this.network);const r=new i(!0);for(let e of this.wantlist.entries())r.addEntry(e[1].cid,e[1].priority);return t.addMessage(r),this.peers.set(e.toB58String(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toB58String());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toB58String()))}wantBlocks(e){this._addEntries(e,!1)}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(e){this.timer=setInterval((()=>{this._log("resend full-wantlist");const e=new i(!0);this.wantlist.forEach((t=>{e.addEntry(t.cid,t.priority)})),this.peers.forEach((t=>t.addMessage(e)))}),6e4),n((()=>e()))}stop(e){this.peers.forEach((e=>this.disconnected(e.peerId))),clearInterval(this.timer),n((()=>e()))}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4488,{"../types/message":4482,"../utils":4486,"just-debounce-it":4799},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("just-debounce-it"),i=e("../types/message"),s=e("../utils").logger;t.exports=class{constructor(e,t,r){this.peerId=t,this.network=r,this.refcnt=1,this._entries=[],this._log=s(e,"msgqueue",t.toB58String().slice(0,8)),this.sendEntries=n(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new i(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}send(e){this.network.connectTo(this.peerId,(t=>{t?this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),t.message):(this._log("sending message"),this.network.sendMessage(this.peerId,e,(e=>{e&&this._log.error("send error: %s",e.message)})))}))}}}}},{package:"3box>ipfs>ipfs-bitswap"}],[4489,{"async/map":1869},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/map");t.exports=class{constructor(e){this._repo=e,this._bitswap=null}setExchange(e){this._bitswap=e}unsetExchange(){this._bitswap=null}hasExchange(){return null!=this._bitswap}put(e,t){this.hasExchange()?this._bitswap.put(e,t):this._repo.blocks.put(e,t)}putMany(e,t){this.hasExchange()?this._bitswap.putMany(e,t):this._repo.blocks.putMany(e,t)}get(e,t){this.hasExchange()?this._bitswap.get(e,t):this._repo.blocks.get(e,t)}getMany(e,t){Array.isArray(e)?this.hasExchange()?this._bitswap.getMany(e,t):n(e,((e,t)=>this._repo.blocks.get(e,t)),t):t(new Error("first arg must be an array of cids"))}delete(e,t){this._repo.blocks.delete(e,t)}}}}},{package:"3box>ipfs>ipfs-block-service"}],[4490,{"../../is-buffer/index.js":4735,cids:2169,"class-is":2171},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("cids"),i=e("class-is");t.exports=i(class{constructor(e,t){if(!e||!r.isBuffer(e))throw new Error("first argument  must be a buffer");if(!t||!n.isCID(t))throw new Error("second argument must be a CID");this._data=e,this._cid=t}get data(){return this._data}set data(e){throw new Error("Tried to change an immutable block")}get cid(){return this._cid}set cid(e){throw new Error("Tried to change an immutable block")}},{className:"Block",symbolName:"@ipfs/js-ipfs-block/block"})}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-block"}],[4491,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n="GENESIS";class i{constructor(e,t){this._ipfs=e,this._content={id:`did:${t}:GENESIS`}}get DID(){if(this._content.id.includes(n))throw new Error("DID is not available before commit");return this._content.id}static async load(e,t){const r=new i(e);return r._content=await i.cidToDocument(e,t),r._content.previousDocument={"/":t.toString()},r}addPublicKey(e,t,r,n,i){this._content.publicKey||(this._content.publicKey=[]);let s={id:`${this._content.id}#${e}`,type:t};s[r]=n,i&&(s.owner=i),this._content.publicKey.push(s)}removePublicKey(e){const t=this._content.publicKey.findIndex((t=>t.id.endsWith(e)));this._content.publicKey.splice(t,1),this._content.publicKey.length||delete this._content.publicKey}addAuthentication(e,t){this._content.authentication||(this._content.authentication=[]),this._content.authentication.push({type:e,publicKey:`${this._content.id}#${t}`})}removeAuthentication(e){const t=this._content.authentication.findIndex((t=>t.publicKey.endsWith(e)));this._content.authentication.splice(t,1),this._content.authentication.length||delete this._content.authentication}addService(e,t,r,n){this._content.service||(this._content.service=[]),this._content.service.push(Object.assign({id:`${this._content.id};${e}`,type:t,serviceEndpoint:r},n))}removeService(e){const t=this._content.service.findIndex((t=>t.id.endsWith(e)));this._content.service.splice(t,1),this._content.service.length||delete this._content.service}setRevocationMethod(e){this._content.revocationMethod=e}addCustomProperty(e,t){this._content[e]=t}removeCustomProperty(e){delete this._content[e]}async commit(e={}){this._content.created?e.noTimestamp||(this._content.updated=new Date(Date.now()).toISOString()):(this._content["@context"]="https://w3id.org/did/v1",e.noTimestamp||(this._content.created=new Date(Date.now()).toISOString()));const t=await this._ipfs.dag.put(this._content,{format:"dag-cbor",hashAlg:"sha2-256"});return this._content=await i.cidToDocument(this._ipfs,t),this._content.previousDocument={"/":t.toString()},t}static async cidToDocument(e,t){let r=(await e.dag.get(t)).value;if(r.id.includes(n)){const e=new RegExp(n,"gi");r.id=r.id.replace(e,t),r.publicKey&&(r.publicKey=JSON.parse(JSON.stringify(r.publicKey).replace(e,t))),r.authentication&&(r.authentication=JSON.parse(JSON.stringify(r.authentication).replace(e,t))),r.service&&(r.service=JSON.parse(JSON.stringify(r.service).replace(e,t)))}return r.previousDocument&&(r.previousDocument={"/":r.previousDocument.toString()}),r}}t.exports=i}}},{package:"3box>ipfs-did-document"}],[4492,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e,t,r)=>new Promise(((n,i)=>{if(r=Object.assign({concurrency:Infinity},r),"function"!=typeof t)throw new TypeError("Mapper function is required");const s=r.concurrency;if(!("number"==typeof s&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);const o=[],a=e[Symbol.iterator]();let c=!1,u=!1,l=0,f=0;const h=()=>{if(c)return;const e=a.next(),r=f;if(f++,e.done)return u=!0,void(0===l&&n(o));l++,Promise.resolve(e.value).then((e=>t(e,r))).then((e=>{o[r]=e,l--,h()}),(e=>{c=!0,i(e)}))};for(let e=0;e<s&&(h(),!u);e++);}))}}},{package:"3box>3box-orbitdb-plugins>ipfs-log>p-map"}],[4493,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{async canAppend(e,t){return!0}}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4494,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(e={}){this._cache=e}set(e,t){this._cache[e]=t}get(e){return this._cache[e]}delete(e){return delete this._cache[e]}add(e){this._cache=Object.assign(this._cache,e)}get length(){return Object.values(this._cache).length}}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4495,{"./entry":4496,"p-map":4492,"p-whilst":5382},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("p-whilst"),i=e("p-map"),s=e("./entry");class o{static async fetchParallel(e,t,{length:r=-1,exclude:n=[],concurrency:s=null,timeout:a,onProgressCallback:c}={}){const u=e=>e.hash,l=(e,t)=>{const r=e.map(u);return t.forEach((t=>{-1===r.indexOf(t.hash)&&e.push(t)})),e},f=Array.isArray(t)?t.slice():[t];s=Math.max(s||f.length,1);const h=await i(f,(t=>o.fetchAll(e,t,{length:r,exclude:n,timeout:a,onProgressCallback:c})),{concurrency:s});return h.reduce(l,[])}static async fetchAll(e,t,{length:r=-1,exclude:i=[],timeout:o=null,onProgressCallback:a}){let c=[],u={},l=Array.isArray(t)?t.slice():[t];const f=e=>l.push(e);(i=i&&Array.isArray(i)?i:[]).forEach((e=>{s.isEntry(e)&&(c.push(e),u[e.hash]=e)}));return await n((()=>l.length>0&&(c.length<r||r<0)),(()=>{const t=l.shift();return u[t]?Promise.resolve():new Promise((async(r,n)=>{const i=o?setTimeout((()=>{console.warn(`Warning: Couldn't fetch entry '${t}', request timed out (${o}ms)`),r()}),o):null;try{(e=>{s.isEntry(e)&&(e.next.forEach(f),c.push(e),u[t]=e,a&&a(t,e,c.length))})(await s.fromMultihash(e,t)),r()}catch(e){n(e)}finally{clearTimeout(i)}}))})),c}}t.exports=o}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4496,{"./lamport-clock":4498,"./utils":4505,buffer:2132,"json-stringify-deterministic":4781},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("./lamport-clock"),{isDefined:i,io:s}=e("./utils"),o=e("json-stringify-deterministic"),a=["next"],c=()=>new Error("Ipfs instance not defined"),u={0:"dag-pb",1:"dag-cbor"};class l{static async create(e,t,r,s,o=[],a){if(!i(e))throw c();if(!i(t))throw new Error("Identity is required, cannot create entry");if(!i(r))throw new Error("Entry requires an id");if(!i(s))throw new Error("Entry requires data");if(!i(o)||!Array.isArray(o))throw new Error("'next' argument is not an array");const u={hash:null,id:r,payload:s,next:o.filter(i).map((e=>e.hash?e.hash:e)),v:1,clock:a||new n(t.publicKey)},f=await t.provider.sign(t,l.toBuffer(u));return u.key=t.publicKey,u.identity=t.toJSON(),u.sig=f,u.hash=await l.toMultihash(e,u),u}static async verify(e,t){if(!e)throw new Error("Identity-provider is required, cannot verify entry");if(!l.isEntry(t))throw new Error("Invalid Log entry");if(!t.key)throw new Error("Entry doesn't have a key");if(!t.sig)throw new Error("Entry doesn't have a signature");const r={hash:null,id:t.id,payload:t.payload,next:t.next,v:t.v,clock:t.clock};return e.verify(t.sig,t.key,l.toBuffer(r),"v"+t.v)}static toBuffer(e){const t=0===e.v?JSON.stringify(e):o(e);return r.from(t)}static async toMultihash(e,t){if(!e)throw c();if(!l.isEntry(t))throw new Error("Invalid object format, cannot generate entry hash");const r={hash:null,id:t.id,payload:t.payload,next:t.next,v:t.v,clock:t.clock};return t.key&&Object.assign(r,{key:t.key}),t.identity&&Object.assign(r,{identity:t.identity}),t.sig&&Object.assign(r,{sig:t.sig}),s.write(e,u[r.v],r,{links:a})}static async fromMultihash(e,t){if(!e)throw c();if(!t)throw new Error(`Invalid hash: ${t}`);const r=await s.read(e,t,{links:a});let i={hash:t,id:r.id,payload:r.payload,next:r.next,v:r.v,clock:new n(r.clock.id,r.clock.time)};return r.key&&Object.assign(i,{key:r.key}),r.identity&&Object.assign(i,{identity:r.identity}),r.sig&&Object.assign(i,{sig:r.sig}),i}static isEntry(e){return e&&e.id!==undefined&&e.next!==undefined&&e.payload!==undefined&&e.v!==undefined&&e.hash!==undefined&&e.clock!==undefined}static compare(e,t){var r=n.compare(e.clock,t.clock);return 0===r?e.clock.id<t.clock.id?-1:1:r}static isEqual(e,t){return e.hash===t.hash}static isParent(e,t){return t.next.indexOf(e.hash)>-1}static findChildren(e,t){for(var r=[],n=t.find((t=>l.isParent(e,t))),i=e;n;)r.push(n),i=n,n=t.find((e=>l.isParent(i,e)));return r=r.sort(((e,t)=>e.clock.time>t.clock.time))}}t.exports=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4497,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(e){}append(e){}merge(e){}get(e){}has(e){}get values(){}get length(){}}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4498,{},function(){with(this)return function(){"use strict";return function(e,t,r){class n{constructor(e,t){this.id=e,this.time=t||0}tick(){return new n(this.id,++this.time)}merge(e){return this.time=Math.max(this.time,e.time),new n(this.id,this.time)}clone(){return new n(this.id,this.time)}static compare(e,t){var r=e.time-t.time;return 0===r&&e.id!==t.id?e.id<t.id?-1:1:r}}t.exports=n}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4499,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={IPFSNotDefinedError:()=>new Error("IPFS instance not defined"),LogNotDefinedError:()=>new Error("Log instance not defined"),NotALogError:()=>new Error("Given argument is not an instance of Log"),CannotJoinWithDifferentId:()=>new Error("Can't join logs with different IDs"),LtOrLteMustBeStringOrArray:()=>new Error("lt or lte must be a string or array of Entries")}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[45,{"eth-rpc-errors":2489},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("eth-rpc-errors");var i=(e,t)=>async r=>{if(t._writableState.ended)return;if(!e[r.method])return void t.write({jsonrpc:"2.0",error:n.ethErrors.rpc.methodNotFound({message:`${r.method} not found`}),id:r.id});let i,s;try{i=await e[r.method](...r.params)}catch(e){s=e}t._writableState.ended?s&&console.error(s):s?t.write({jsonrpc:"2.0",error:(0,n.serializeError)(s,{shouldIncludeStack:!0}),id:r.id}):t.write({jsonrpc:"2.0",result:i,id:r.id})};r.default=i}}},{package:"$root$"}],[4500,{"./entry":4496,"./entry-io":4495,"./lamport-clock":4498,"./log-errors":4499,"./utils":4505},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./entry"),i=e("./entry-io"),s=e("./lamport-clock"),o=e("./log-errors"),{isDefined:a,findUniques:c,difference:u,io:l}=e("./utils"),f=["heads"];t.exports=class{static async toMultihash(e,t,{format:r}={}){if(!a(e))throw o.IPFSNotDefinedError();if(!a(t))throw o.LogNotDefinedError();if(a(r)||(r="dag-cbor"),t.values.length<1)throw new Error("Can't serialize an empty log");return l.write(e,r,t.toJSON(),{links:f})}static async fromMultihash(e,t,{length:r=-1,exclude:c,onProgressCallback:u,timeout:h}={}){if(!a(e))throw o.IPFSNotDefinedError();if(!a(t))throw new Error(`Invalid hash: ${t}`);const d=await l.read(e,t,{links:f});if(!d.heads||!d.id)throw o.NotALogError();const p=await i.fetchAll(e,d.heads,{length:r,exclude:c,onProgressCallback:u,timeout:h}),g=p.reduce(((e,t)=>t.clock.time>e.time?new s(t.clock.id,t.clock.time):e),new s(d.id)),b=p.slice().sort(n.compare),m=b.filter((e=>d.heads.includes(e.hash)));return{id:d.id,values:b,heads:m,clock:g}}static async fromEntryHash(e,t,{length:r=-1,exclude:n,onProgressCallback:s,timeout:c}){if(!a(e))throw o.IpfsNotDefinedError();if(!a(t))throw new Error("'hash' must be defined");const u=Array.isArray(t)?t:[t];r=r>-1?Math.max(r,1):r;const l=await i.fetchParallel(e,u,{length:r,exclude:n,onProgressCallback:s,timeout:c});var f,h;return{values:r>-1?(h=r,(f=l).slice(f.length-h,f.length)):l}}static async fromJSON(e,t,{length:r=-1,timeout:s,onProgressCallback:c}){if(!a(e))throw o.IPFSNotDefinedError();const u=t.heads.map((e=>e.hash)),l=(await i.fetchParallel(e,u,{length:r,exclude:[],concurrency:16,timeout:s,onProgressCallback:c})).slice().sort(n.compare);return{id:t.id,values:l,heads:t.heads}}static async fromEntry(e,t,{length:r=-1,exclude:s,onProgressCallback:l,timeout:f}){if(!a(e))throw o.IPFSNotDefinedError();if(!a(t))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(t)&&!n.isEntry(t))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(t)||(t=[t]),r=r>-1?Math.max(r,t.length):r;const h=t.map((e=>e.hash)),d=await i.fetchParallel(e,h,{length:r,exclude:s,onProgressCallback:l,timeout:f}),p=t.concat(d),g=c(p,"hash").sort(n.compare),b=g.slice(r>-1?-r:-g.length),m=((e,t)=>{var r=e.slice(t.length,e.length);return t.concat(r)})(b,u(b,t,"hash"));return{id:m[m.length-1].id,values:m}}}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4501,{"./lamport-clock":4498},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./lamport-clock");function i(e,t,r){const i=n.compare(e.clock,t.clock);return 0===i?r(e,t):i}function s(e,t,r){return e.clock.id===t.clock.id?r(e,t):e.clock.id<t.clock.id?-1:1}r.SortByClocks=i,r.SortByClockId=s,r.LastWriteWins=function(e,t){const r=(e,t)=>e,n=(e,t)=>s(e,t,r);return((e,t)=>i(e,t,n))(e,t)},r.SortByEntryHash=function(e,t){const r=(e,t)=>e.hash<t.hash?-1:1,n=(e,t)=>s(e,t,r);return((e,t)=>i(e,t,n))(e,t)},r.NoZeroes=function(e){const t=`Your log's tiebreaker function, ${e.name}, has returned zero and therefore cannot be`;return(r,n)=>{const i=e(r,n);if(0===i)throw Error(t);return i}}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4502,{"./default-access-controller":4493,"./entry":4496,"./entry-index":4494,"./g-set":4497,"./lamport-clock":4498,"./log-errors":4499,"./log-io":4500,"./log-sorting":4501,"./utils":4505,buffer:2132,"p-each-series":5374},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("p-each-series"),i=e("./g-set"),s=e("./entry"),o=e("./log-io"),a=e("./log-errors"),c=e("./lamport-clock"),u=e("./log-sorting"),{LastWriteWins:l,NoZeroes:f}=u,h=e("./default-access-controller"),{isDefined:d,findUniques:p}=e("./utils"),g=e("./entry-index"),b=e=>e.hash,m=(e,t)=>e.concat(t),y=e=>e.next,_=(e,t)=>Math.max(e,t.clock.time),w=(e,t)=>(e[t.hash]=t,e);class k extends i{constructor(e,t,{logId:r,access:n,entries:i,heads:s,clock:o,sortFn:u}={}){if(!d(e))throw a.IPFSNotDefinedError();if(!d(t))throw new Error("Identity is required");if(d(n)||(n=new h),d(i)&&!Array.isArray(i))throw new Error("'entries' argument must be an array of Entry instances");if(d(s)&&!Array.isArray(s))throw new Error("'heads' argument must be an array");d(u)||(u=l),super(),this._sortFn=f(u),this._storage=e,this._id=r||(new Date).getTime().toString(),this._access=n,this._identity=t,i=i||[],this._entryIndex=new g(i.reduce(w,{})),s=s||k.findHeads(i),this._headsIndex=s.reduce(w,{}),this._nextsIndex={};i.forEach((e=>e.next.forEach((t=>this._nextsIndex[t]=e.hash)))),this._length=i.length;const p=Math.max(o?o.time:0,this.heads.reduce(_,0));this._clock=new c(this._identity.publicKey,p)}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return k.findTails(this.values)}get tailHashes(){return k.findTailHashes(this.values)}setIdentity(e){this._identity=e;const t=Math.max(this.clock.time,this.heads.reduce(_,0));this._clock=new c(this._identity.publicKey,t)}get(e){return this._entryIndex.get(e)}has(e){return this._entryIndex.get(e.hash||e)!==undefined}traverse(e,t=-1,r){var n=e.sort(this._sortFn).reverse();let i={},s={},o=0;const a=e=>this.get(e),c=e=>{e&&!i[e.hash]&&(n=[e,...n].sort(this._sortFn).reverse(),i[e.hash]=!0)};for(;n.length>0&&(-1===t||o<t);){const e=n.shift();if(o++,s[e.hash]=e,e.next.map(a).filter(d).forEach(c),e.hash===r)break}return s}async append(e,t=1){const r=Math.max(this.clock.time,this.heads.reduce(_,0))+1;this._clock=new c(this.clock.id,r);const n=this.traverse(this.heads,Math.max(t,this.heads.length)),i=this.heads.reverse().reduce(w,{}),o=Object.keys(Object.assign({},i,n)),a=await s.create(this._storage,this._identity,this.id,e,o,this.clock);if(!await this._access.canAppend(a,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(a.hash,a),o.forEach((e=>this._nextsIndex[e]=a.hash)),this._headsIndex={},this._headsIndex[a.hash]=a,this._length++,a}iterator({gt:e=undefined,gte:t=undefined,lt:r=undefined,lte:n=undefined,amount:i=-1}={}){if(0===i)return function*(){}();if("string"==typeof n&&(n=[this.get(n)]),"string"==typeof r&&(r=[this.get(this.get(r).next)]),n&&!Array.isArray(n))throw a.LtOrLteMustBeStringOrArray();if(r&&!Array.isArray(r))throw a.LtOrLteMustBeStringOrArray();let s=n||r||this.heads,o=t?this.get(t).hash:e?this.get(e).hash:null,c=o?-1:i||-1,u=this.traverse(s,c,o),l=Object.values(u);return e&&l.pop(),(e||t)&&i>-1&&(l=l.slice(l.length-i,l.length)),function*(){for(let e in l)yield l[e]}()}async join(e,t=-1){if(!d(e))throw a.LogNotDefinedError();if(!k.isLog(e))throw a.NotALogError();if(this.id!==e.id)return;const r=k.difference(e,this),i=this._identity.provider,o=async e=>{if(!await this._access.canAppend(e,i))throw new Error(`Could not append entry, key "${e.identity.id}" is not allowed to write to the log`)},u=Object.values(r);await n(u,(async e=>{await o(e),await(async e=>{const t=await s.verify(i,e),r=e.identity?e.identity.publicKey:e.key;if(!t)throw new Error(`Could not validate signature "${e.sig}" for entry "${e.hash}" and key "${r}"`)})(e)}));Object.values(r).forEach((e=>{this.get(e.hash)||this._length++,e.next.forEach((t=>this._nextsIndex[t]=e.hash))})),this._entryIndex.add(r);const l=Object.values(r).map(y).reduce(m,[]),f=k.findHeads(Object.values(Object.assign({},this._headsIndex,e._headsIndex))).filter((e=>!l.find((t=>t===e.hash)))).filter((e=>!this._nextsIndex[e.hash])).reduce(w,{});if(this._headsIndex=f,t>-1){let e=this.values;e=e.slice(-t),this._entryIndex=null,this._entryIndex=new g(e.reduce(w,{})),this._headsIndex=k.findHeads(e).reduce(w,{}),this._length=this._entryIndex.length}const h=Object.values(this._headsIndex).reduce(_,0);return this._clock=new c(this.clock.id,Math.max(this.clock.time,h)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(b)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return r.from(JSON.stringify(this.toJSON()))}toString(e){return this.values.slice().reverse().map(((t,r)=>{const n=s.findChildren(t,this.values).length;let i=new Array(Math.max(n-1,0));return i=n>1?i.fill("  "):i,i=n>0?i.concat(["└─"]):i,i.join("")+(e?e(t.payload):t.payload)})).join("\n")}static isLog(e){return e.id!==undefined&&e.heads!==undefined&&e._entryIndex!==undefined}toMultihash({format:e}={}){return o.toMultihash(this._storage,this,{format:e})}static async fromMultihash(e,t,r,{access:n,length:i=-1,exclude:s,onProgressCallback:a,sortFn:u,timeout:l,format:f}={}){const h=await o.fromMultihash(e,r,{length:i,exclude:s,onProgressCallback:a,timeout:l,format:f});return new k(e,t,{logId:h.id,access:n,entries:h.values,heads:h.heads,clock:new c(h.clock.id,h.clock.time),sortFn:u})}static async fromEntryHash(e,t,r,{logId:n,access:i,length:s=-1,exclude:a,onProgressCallback:c,sortFn:u,timeout:l}){const f=await o.fromEntryHash(e,r,{length:s,exclude:a,onProgressCallback:c,timeout:l});return new k(e,t,{logId:n,access:i,entries:f.values,sortFn:u})}static async fromJSON(e,t,r,{access:n,length:i=-1,timeout:s,onProgressCallback:a,sortFn:c}={}){const u=await o.fromJSON(e,r,{length:i,timeout:s,onProgressCallback:a});return new k(e,t,{logId:u.id,access:n,entries:u.values,sortFn:c})}static async fromEntry(e,t,r,{access:n,length:i=-1,exclude:s,onProgressCallback:a,timeout:c,sortFn:u}={}){const l=await o.fromEntry(e,r,{length:i,exclude:s,onProgressCallback:a,timeout:c});return new k(e,t,{logId:l.id,access:n,entries:l.values,sortFn:u})}static findHeads(e){var t=e.reduce(((e,t,r,n)=>(t.next.forEach((r=>e[r]=t.hash)),e)),{});return e.filter((e=>t[e.hash]===undefined)).sort(((e,t)=>e.clock.id>t.clock.id))}static findTails(e){var t={},r=[],n={},i=[];e.forEach((e=>{0===e.next.length&&r.push(e);e.next.forEach((r=>{t[r]||(t[r]=[]),t[r].push(e)})),i=i.concat(e.next),n[e.hash]=!0}));const o=i.filter((e=>n[e]===undefined)).map((e=>t[e])).reduce(((e,t,r,n)=>e.concat(p(t,"hash"))),[]).concat(r);return p(o,"hash").sort(s.compare)}static findTailHashes(e){var t={};return e.forEach((e=>t[e.hash]=!0)),e.reduce(((e,r,n,i)=>(r.next.reverse().forEach((r=>{t[r]===undefined&&e.splice(0,0,r)})),e)),[])}static difference(e,t){let r=Object.keys(e._headsIndex),n={},i={};const s=e=>{n[e]||t.get(e)||(r.push(e),n[e]=!0)};for(;r.length>0;){const o=r.shift(),a=e.get(o);a&&!t.get(o)&&a.id===t.id&&(i[a.hash]=a,n[a.hash]=!0,a.next.forEach(s))}return i}}t.exports=k,t.exports.Sorting=u,t.exports.AccessController=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4503,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n={},i={};return e.forEach((e=>i[r?e[r]:e]=!0)),t.reduce(((e,t)=>{var s=i[r?t[r]:t]!==undefined,o=n[r?t[r]:t]!==undefined;return s||o||(e.push(t),n[r?t[r]:t]=!0),e}),[])}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4504,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){let r={};return e.forEach((e=>r[t?e[t]:e]=e)),Object.keys(r).map((e=>r[e]))}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4505,{"./difference":4503,"./find-uniques":4504,"./is-defined":4506,"orbit-db-io":5352},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./difference"),i=e("./find-uniques"),s=e("./is-defined"),o=e("orbit-db-io");t.exports={difference:n,findUniques:i,isDefined:s,io:o}}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4506,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e=>e!==undefined&&null!==e}}},{package:"3box>3box-orbitdb-plugins>ipfs-log"}],[4507,{"./src/core":4510},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./src/core")}}},{package:"3box>ipfs>ipfs-mfs"}],[4508,{"./mkdir":4512,"./utils/add-link":4517,"./utils/apply-default-options":4518,"./utils/to-mfs-path":4525,"./utils/to-sources-and-destination":4527,"./utils/to-trail":4529,"./utils/update-mfs-root":4530,"./utils/update-tree":4531,debug:2304,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./mkdir"),i=e("debug")("ipfs:mfs:cp"),s=e("err-code"),o=e("./utils/update-tree"),a=e("./utils/update-mfs-root"),c=e("./utils/add-link"),u=e("./utils/apply-default-options"),l=e("./utils/to-mfs-path"),f=e("./utils/to-sources-and-destination"),h=e("./utils/to-trail"),d={parents:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};t.exports=e=>async function(...t){const r=u(t,d);let{sources:o,destination:a}=await f(e,t);if(!o.length)throw s(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");if(!a)throw s(new Error("Please supply a destination"),"ERR_INVALID_PARAMS");r.parents=r.p||r.parents;const c=o.find((e=>!e.exists));if(c)throw s(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");const m=p(a);if(a.exists){if(i("Destination exists"),1===o.length&&!m)throw s(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(i("Destination does not exist"),o.length>1){if(!r.parents)throw s(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await n(e)(a.path,r),a=await l(e,a.path)}const y=p(a)?a.mfsPath:a.mfsDirectory,_=await h(e,y,r);if(1===o.length){const t=o.pop(),n=m?t.name:a.name;return i(`Only one source, copying to destination ${m?"directory":"file"} ${n}`),g(e,t,n,_,r)}return i("Multiple sources, wrapping in a directory"),b(e,o,a,_,r)};const p=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),g=async(e,t,r,n,i)=>{let s=n.pop();s=await m(e,t,r,s,i),n.push(s);const c=await o(e,n,i);await a(e,c)},b=async(e,t,r,n,i)=>{for(let n=0;n<t.length;n++){const s=t[n];r=await m(e,s,s.name,r,i)}n[n.length-1]=r;const s=await o(e,n,i);await a(e,s)},m=async(e,t,r,n,i)=>{const s=await e.repo.blocks.get(t.cid),{node:o,cid:a}=await c(e,{parentCid:n.cid,size:s.data.length,cid:t.cid,name:r,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});return n.node=o,n.cid=a,n.size=o.size,n}}}},{package:"3box>ipfs>ipfs-mfs"}],[4509,{"./stat":4516,"./utils/apply-default-options":4518,"./utils/constants":4519},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./stat"),{FILE_SEPARATOR:s}=e("./utils/constants"),o={};t.exports=e=>async function(t=s,r=o){r=n(r,o),await i(e)(t,r)}}}},{package:"3box>ipfs>ipfs-mfs"}],[4510,{"./cp":4508,"./flush":4509,"./ls":4511,"./mkdir":4512,"./mv":4513,"./read":4514,"./rm":4515,"./stat":4516,"./utils/create-lock":4520,"./write":4533,assert:1805,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("assert"),i=e("promisify-es6"),s=e("./utils/create-lock"),o={stat:e("./stat")},a={cp:e("./cp"),flush:e("./flush"),mkdir:e("./mkdir"),mv:e("./mv"),rm:e("./rm")},c={write:e("./write"),read:e("./read"),ls:e("./ls")},u=({options:e,mfs:t,operations:r,lock:n})=>{Object.keys(r).forEach((i=>{t[i]=n(r[i](e))}))},l={repoOwner:!0,ipld:null,repo:null};t.exports=e=>{const{repoOwner:t}=Object.assign({},l||{},e);n(e.ipld,"MFS requires an IPLD instance"),n(e.blocks,"MFS requires an BlockStore instance"),n(e.datastore,"MFS requires a DataStore instance"),e.repo={blocks:{get:i(e.blocks.get,{context:e.blocks})},datastore:{open:i(e.datastore.open,{context:e.datastore}),get:i(e.datastore.get,{context:e.datastore}),put:i(e.datastore.put,{context:e.datastore})}};const r=s(t),f={};return u({options:e,mfs:f,operations:o,lock:e=>r.readLock(e)}),u({options:e,mfs:f,operations:a,lock:e=>r.writeLock(e)}),Object.keys(c).forEach((t=>{f[t]=c[t](e)})),f}}}},{package:"3box>ipfs>ipfs-mfs"}],[4511,{"./utils/apply-default-options":4518,"./utils/constants":4519,"./utils/to-mfs-path":4525,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("./utils/apply-default-options"),s=e("./utils/to-mfs-path"),{FILE_SEPARATOR:o,FILE_TYPES:a}=e("./utils/constants"),c={},u=e=>{let t=0,r=e.node.size||e.node.length;return e.unixfs&&(r=e.unixfs.fileSize(),t=a[e.unixfs.type]),{cid:e.cid,name:e.name,type:t,size:r}};t.exports=e=>async function*(t=o,r={}){"object"!=typeof t||t instanceof String||(r=t,t=o),r=i(r,c);const a=await s(e,t),l=await n(a.mfsPath,e.ipld);if(l.unixfs&&l.unixfs.type.includes("directory"))for await(const e of l.content(r))yield u(e);else yield u(l)}}}},{package:"3box>ipfs>ipfs-mfs"}],[4512,{"./utils/add-link":4517,"./utils/apply-default-options":4518,"./utils/constants":4519,"./utils/create-node":4521,"./utils/to-path-components":4526,"./utils/update-mfs-root":4530,"./utils/update-tree":4531,"./utils/with-mfs-root":4532,debug:2304,"err-code":2406,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("debug")("ipfs:mfs:mkdir"),s=e("ipfs-unixfs-exporter"),o=e("./utils/create-node"),a=e("./utils/to-path-components"),c=e("./utils/update-mfs-root"),u=e("./utils/update-tree"),l=e("./utils/add-link"),f=e("./utils/with-mfs-root"),h=e("./utils/apply-default-options"),{FILE_SEPARATOR:d}=e("./utils/constants"),p={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,format:"dag-pb",flush:!0};t.exports=e=>async function(t,r){if(r=h(r,p),!t)throw new Error("no path given to Mkdir");if((t=t.trim())===d){if(r.parents)return;throw n(new Error(`cannot create directory '${d}': Already exists`),"ERR_INVALID_PATH")}if(t.substring(0,1)!==d)throw n(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");i(`Creating ${t}`);const l=a(t);if("ipfs"===l[0])throw n(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let b,m=await f(e),y=[];const _=await o(e,"directory",r);for(let t=0;t<=l.length;t++){const o=l.slice(0,t),a=`/ipfs/${m}/${o.join("/")}`;try{if(b=await s(a,e.ipld),i(`${a} existed`),i(`${a} had children ${b.node.Links.map((e=>e.Name))}`),t===l.length){if(r.parents)return;throw n(new Error("file already exists"),"ERR_ALREADY_EXISTS")}y.push({name:b.name,cid:b.cid})}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i;if(t<l.length&&!r.parents)throw n(new Error(`Intermediate directory path ${a} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await g(e,o[o.length-1],_,y[y.length-1],y,r)}}const w=await u(e,y,r);await c(e,w)};const g=async(e,t,r,n,s,o)=>{i(`Adding empty dir called ${t} to ${n.cid}`);const a=await l(e,{parent:n.node,parentCid:n.cid,size:r.node.size,cid:r.cid,name:t,format:o.format,hashAlg:o.hashAlg,cidVersion:o.cidVersion});s[s.length-1].cid=a.cid,s.push({name:t,cid:r.cid})}}}},{package:"3box>ipfs>ipfs-mfs"}],[4513,{"./cp":4508,"./rm":4515,"./utils/apply-default-options":4518,"./utils/to-sources":4528},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./utils/to-sources"),s=e("./cp"),o=e("./rm"),a={parents:!1,recursive:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",shardSplitThreshold:1e3};t.exports=e=>async function(...t){Array.isArray(t[0])&&(t=t[0].concat(t.slice(1)));const{sources:r}=await i(e,t),c=n(t,a),u=r.map((e=>e.path)).concat(c),l=r.slice(0,-1).map((e=>e.path)).concat(Object.assign(c,{recursive:!0}));await s(e).apply(null,u),await o(e).apply(null,l)}}}},{package:"3box>ipfs>ipfs-mfs"}],[4514,{"./utils/apply-default-options":4518,"./utils/to-mfs-path":4525,"err-code":2406,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("./utils/apply-default-options"),s=e("./utils/to-mfs-path"),o=e("err-code"),a={offset:0,length:Infinity};t.exports=e=>function(t,r={}){return r=i(r,a),{[Symbol.asyncIterator]:async function*(){const i=await s(e,t),a=await n(i.mfsPath,e.ipld);if("file"!==a.unixfs.type)throw o(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!a.content)throw o(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of a.content({offset:r.offset,length:r.length}))yield e}}}}}},{package:"3box>ipfs>ipfs-mfs"}],[4515,{"./utils/apply-default-options":4518,"./utils/constants":4519,"./utils/remove-link":4523,"./utils/to-mfs-path":4525,"./utils/to-sources":4528,"./utils/to-trail":4529,"./utils/update-mfs-root":4530,"./utils/update-tree":4531,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("./utils/update-tree"),s=e("./utils/update-mfs-root"),o=e("./utils/to-sources"),a=e("./utils/remove-link"),c=e("./utils/to-mfs-path"),u=e("./utils/to-trail"),l=e("./utils/apply-default-options"),{FILE_SEPARATOR:f}=e("./utils/constants"),h={recursive:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",flush:!0};t.exports=e=>async function(){const t=Array.from(arguments),{sources:r}=await o(e,t,h),i=l(t,h);if(!r.length)throw n(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");r.forEach((e=>{if(e.path===f)throw n(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const t of r)await d(e,t.path,i)};const d=async(e,t,r)=>{const o=await c(e,t),l=await u(e,o.mfsPath,r),f=l.pop(),h=l[l.length-1];if(!h)throw n(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===f.type&&!r.recursive)throw n(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:d}=await a(e,{parentCid:h.cid,name:f.name,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush});h.cid=d;const p=await i(e,l,r);await s(e,p)}}}},{package:"3box>ipfs>ipfs-mfs"}],[4516,{"./utils/apply-default-options":4518,"./utils/to-mfs-path":4525,debug:2304,"err-code":2406,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./utils/apply-default-options"),i=e("./utils/to-mfs-path"),s=e("ipfs-unixfs-exporter"),o=e("debug")("ipfs:mfs:stat"),a=e("err-code"),c={withLocal:!1};t.exports=e=>async function(t,r){r=n(r,c),o(`Fetching stats for ${t}`);const{type:l,cid:f,mfsPath:h}=await i(e,t);let d,p="ipfs"===l&&f?f:h;try{d=await s(p,e.ipld)}catch(e){if("ERR_NOT_FOUND"===e.code)throw a(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!u[d.cid.codec])throw new Error(`Cannot stat codec ${d.cid.codec}`);return u[d.cid.codec](d,r)};const u={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:undefined,sizeLocal:undefined,withLocality:!1}),"dag-pb":e=>{let t=e.node.Links.length,r=e.node.size,n=e.node.size,i=null;return e.unixfs&&(r=e.unixfs.fileSize(),i=e.unixfs.type,i.includes("directory")&&(r=0,n=e.node.size),"file"===i&&(t=e.unixfs.blockSizes.length)),{cid:e.cid,size:r,cumulativeSize:n,blocks:t,type:i,local:undefined,sizeLocal:undefined,withLocality:!1}},"dag-cbor":e=>({cid:e.cid,local:undefined,sizeLocal:undefined,withLocality:!1})}}}},{package:"3box>ipfs>ipfs-mfs"}],[4517,{"./hamt-utils":4522,"async-iterator-last":1812,cids:2169,debug:2304,"err-code":2406,"ipfs-unixfs":4586,"ipfs-unixfs-importer/src/dir-sharded":4579,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGNode:n,DAGLink:i}=e("ipld-dag-pb"),s=e("cids"),o=e("debug")("ipfs:mfs:core:utils:add-link"),a=e("ipfs-unixfs"),c=e("ipfs-unixfs-importer/src/dir-sharded"),{updateHamtDirectory:u,recreateHamtLevel:l,createShard:f,toPrefix:h,addLinksToHamtBucket:d}=e("./hamt-utils"),p=e("err-code"),g=e("multicodec"),b=e("multihashes"),m=e("async-iterator-last"),y=async(e,t)=>{const r=await f(e,t.parent.Links.map((e=>({name:e.Name,size:e.Tsize,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return o(`Converted directory to sharded directory ${r.cid}`),r},_=async(e,t)=>{let r=await n.rmLink(t.parent,t.name);r=await n.addLink(r,new i(t.name,t.size,t.cid));const s=g[t.format.toUpperCase().replace(/-/g,"_")],o=b.names[t.hashAlg];return{node:r,cid:await e.ipld.put(r,s,{cidVersion:t.cidVersion,hashAlg:o,hashOnly:!t.flush})}},w=async(e,t)=>{const{shard:r,path:i}=await k(e,t),s=await m(r.flush("",e.ipld)),o=t.parent.Links.find((e=>e.Name.substring(0,2)===i[0].prefix)),a=s.node.Links.find((e=>e.Name.substring(0,2)===i[0].prefix));let c=t.parent;return o&&(c=await n.rmLink(t.parent,o.Name)),c=await n.addLink(c,a),u(e,c.Links,i[0].bucket,t)},k=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size},n=await l(t.parent.Links),i=new c({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},t);i._bucket=n;const s=await n._findNewBucketAndPos(r.name),a=v(s);a[0].node=t.parent;let u=0;for(;u<a.length;){let t=a[u];u++;let i=t.node.Links.find((e=>e.Name.substring(0,2)===t.prefix));if(!i){o(`Link ${t.prefix}${r.name} will be added`),u=a.length;break}if(i.Name===`${t.prefix}${r.name}`){o(`Link ${t.prefix}${r.name} will be replaced`),u=a.length;break}if(i.Name.length>2){o(`Link ${i.Name} will be replaced with a subshard`),u=a.length;break}o(`Found subshard ${t.prefix}`);const s=await e.ipld.get(i.Hash);if(!a[u]){o(`Loaded new subshard ${t.prefix}`),await l(s.Links,n,t.bucket,parseInt(t.prefix,16));const e=await n._findNewBucketAndPos(r.name);a.push({bucket:e.bucket,prefix:h(e.pos),node:s});break}const c=a[u];await d(s.Links,c.bucket,n),c.node=s}return await i._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:i,path:a}},v=e=>{let t=e.bucket,r=e.pos,n=[{bucket:t,prefix:h(r)}];for(t=e.bucket._parent,r=e.bucket._posAtParent;t;)n.push({bucket:t,prefix:h(r)}),r=t._posAtParent,t=t._parent;return n.reverse(),n};t.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw p(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(t.parentCid&&!s.isCID(t.parentCid))throw p(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(t.parent||(o(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.cid)throw p(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw p(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(s.isCID(t.cid)||(t.cid=new s(t.cid)),!t.size&&0!==t.size)throw p(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");return"hamt-sharded-directory"===a.unmarshal(t.parent.Data).type?(o("Adding link to sharded directory"),w(e,t)):t.parent.Links.length>=t.shardSplitThreshold?(o("Converting directory to sharded directory"),y(e,t)):(o(`Adding ${t.name} (${t.cid}) to regular directory`),_(e,t))}}}},{package:"3box>ipfs>ipfs-mfs"}],[4518,{"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code");t.exports=(e={},t)=>{Array.isArray(e)&&(e=e.filter((e=>"object"==typeof e)).pop()||{});const r={};for(let n in t)null!==e[n]&&e[n]!==undefined?r[n]=e[n]:r[n]=t[n];const i=r.format||r.codec;if(i&&isNaN(i)&&(r.format=i,delete r.codec),e.count!==undefined&&(r.length=e.count),e.p!==undefined&&(r.parents=e.p),e.l!==undefined&&(r.long=e.l),r.length||0===r.length||(r.length=Infinity),r.offset<0)throw n(new Error("cannot have negative write offset"),"ERR_INVALID_PARAMS");if(r.length<0)throw n(new Error("cannot have negative byte count"),"ERR_INVALID_PARAMS");return r}}}},{package:"3box>ipfs>ipfs-mfs"}],[4519,{"interface-datastore":4460},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("interface-datastore").Key;t.exports={FILE_SEPARATOR:"/",MFS_ROOT_KEY:new n("/local/filesroot"),MAX_CHUNK_SIZE:262144,MAX_LINKS:174,FILE_TYPES:{file:0,directory:1,"hamt-sharded-directory":1}}}}},{package:"3box>ipfs>ipfs-mfs"}],[4520,{mortice:5217},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("mortice");let i;t.exports=e=>{if(i)return i;const t=n({singleProcess:e});return i={readLock:e=>(...r)=>t.readLock((()=>e.apply(null,r))),writeLock:e=>(...r)=>t.writeLock((()=>e.apply(null,r)))},i}}}},{package:"3box>ipfs>ipfs-mfs"}],[4521,{"ipfs-unixfs":4586,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs"),{DAGNode:i}=e("ipld-dag-pb"),s=e("multicodec"),o=e("multihashes");t.exports=async(e,t,r)=>{const a=s[r.format.toUpperCase().replace(/-/g,"_")],c=o.names[r.hashAlg],u=i.create(new n(t).marshal());return{cid:await e.ipld.put(u,a,{cidVersion:r.cidVersion,hashAlg:c}),node:u}}}}},{package:"3box>ipfs>ipfs-mfs"}],[4522,{"async-iterator-last":1812,buffer:2132,debug:2304,"hamt-sharding/src/bucket":4383,"ipfs-unixfs":4586,"ipfs-unixfs-importer/src/dir-sharded":4579,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{DAGNode:n}=e("ipld-dag-pb"),i=e("hamt-sharding/src/bucket"),s=e("ipfs-unixfs-importer/src/dir-sharded"),o=e("debug")("ipfs:mfs:core:utils:hamt-utils"),a=e("ipfs-unixfs"),c=e("multicodec"),u=e("multihashes"),l=e("async-iterator-last"),f=async(e,t,r,n)=>{const o=new i({hashFn:s.hashFn,hash:r?r._options.hash:undefined},r,n);return r&&r._putObjectAt(n,o),await h(e,o,t),o},h=async(e,t,r)=>{await Promise.all(e.map((e=>{if(2===e.Name.length){const r=parseInt(e.Name,16);return t._putObjectAt(r,new i({hashFn:s.hashFn},t,r)),Promise.resolve()}return(r||t).put(e.Name.substring(2),{size:e.TSize,cid:e.Hash})})))},d=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2);t.exports={generatePath:async(e,t,r)=>{const n=await f(r.Links,null,null,null),i=await n._findNewBucketAndPos(t);let s=[{bucket:i.bucket,prefix:d(i.pos)}],a=i.bucket;for(;a!==n;)s.push({bucket:a,prefix:d(a._posAtParent)}),a=a._parent;s.reverse(),s[0].node=r;for(let r=0;r<s.length;r++){const i=s[r],a=i.node.Links.filter((e=>e.Name.substring(0,2)===i.prefix)).pop();if(!a){o(`Link ${i.prefix}${t} will be added`);continue}if(a.Name===`${i.prefix}${t}`){o(`Link ${i.prefix}${t} will be replaced`);continue}o(`Found subshard ${i.prefix}`);const c=await e.ipld.get(a.Hash);if(!s[r+1]){o(`Loaded new subshard ${i.prefix}`),await f(c.Links,n,i.bucket,parseInt(i.prefix,16));const e=await n._findNewBucketAndPos(t);s.push({bucket:e.bucket,prefix:d(e.pos),node:c});continue}const u=s[r+1];await h(c.Links,u.bucket,n),u.node=c}return await n.put(t,!0),s.reverse(),{rootBucket:n,path:s}},updateHamtDirectory:async(e,t,i,o)=>{const l=r.from(i._children.bitField().reverse()),f=new a("hamt-sharded-directory",l);f.fanout=i.tableSize(),f.hashType=s.hashFn.code;const h=c[o.format.toUpperCase().replace(/-/g,"_")],d=u.names[o.hashAlg],p=n.create(f.marshal(),t);return{node:p,cid:await e.ipld.put(p,h,{cidVersion:o.cidVersion,hashAlg:d,hashOnly:!o.flush})}},recreateHamtLevel:f,addLinksToHamtBucket:h,toPrefix:d,createShard:async(e,t,r)=>{const n=new s({root:!0,dir:!0,parent:null,parentKey:null,path:"",dirty:!0,flat:!1},r);for(let e=0;e<t.length;e++)await n._bucket.put(t[e].name,{size:t[e].size,cid:t[e].cid});return l(n.flush("",e.ipld,null))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-mfs"}],[4523,{"./hamt-utils":4522,cids:2169,debug:2304,"err-code":2406,"ipfs-unixfs":4586,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGNode:n,DAGLink:i}=e("ipld-dag-pb"),s=e("cids"),o=e("debug")("ipfs:mfs:core:utils:remove-link"),a=e("ipfs-unixfs"),{generatePath:c,updateHamtDirectory:u}=e("./hamt-utils"),l=e("err-code"),f=e("multicodec"),h=e("multihashes"),d=async(e,t)=>{const r=f[t.format.toUpperCase().replace(/-/g,"_")],i=h.names[t.hashAlg],s=await n.rmLink(t.parent,t.name),a=await e.ipld.put(s,r,{cidVersion:t.cidVersion,hashAlg:i});return o(`Updated regular directory ${a}`),{node:s,cid:a}},p=async(e,t)=>{const{rootBucket:r,path:n}=await c(e,t.name,t.parent);await r.del(t.name);const{node:i}=await g(e,n,{name:t.name,cid:t.cid,size:t.size,hashAlg:t.hashAlg,format:t.format,cidVersion:t.cidVersion,flush:t.flush},t);return u(e,i.Links,r,t)},g=async(e,t,r,i)=>{const{bucket:s,prefix:a,node:c}=t.pop(),f=c.Links.find((e=>e.Name.substring(0,2)===a));if(!f)throw l(new Error(`No link found with prefix ${a} for file ${r.name}`),"ERR_NOT_FOUND");if(f.Name===`${a}${r.name}`){o(`Removing existing link ${f.Name}`);const t=await n.rmLink(c,f.Name);return await s.del(r.name),u(e,t.Links,s,i)}o(`Descending into sub-shard ${f.Name} for ${a}${r.name}`);const h=await g(e,t,r,i);let d=a;1===h.node.Links.length&&(o(`Removing subshard for ${a}`),h.cid=h.node.Links[0].Hash,h.node=h.node.Links[0],d=`${a}${h.node.Name.substring(2)}`),o(`Updating shard ${a} with name ${d}`);const p=n.isDAGNode(h.node)?h.node.size:h.node.Tsize;return b(e,s,c,a,d,p,h.cid,i)},b=async(e,t,r,s,o,a,c,l)=>(r=await n.rmLink(r,s),r=await n.addLink(r,new i(o,a,c)),u(e,r.Links,t,l));t.exports=async(e,t)=>{if(!t.parentCid&&!t.parent)throw l(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(t.parentCid&&!s.isCID(t.parentCid))throw l(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");if(t.parent||(o(`Loading parent node ${t.parentCid}`),t.parent=await e.ipld.get(t.parentCid)),!t.name)throw l(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");return"hamt-sharded-directory"===a.unmarshal(t.parent.Data).type?(o(`Removing ${t.name} from sharded directory`),p(e,t)):(o(`Removing link ${t.name} regular directory`),d(e,t))}}}},{package:"3box>ipfs>ipfs-mfs"}],[4524,{"./constants":4519,buffer:2132,debug:2304,"err-code":2406,fs:2131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("err-code"),i=e("fs"),s=e("debug")("ipfs:mfs:utils:to-async-iterator"),{MAX_CHUNK_SIZE:o}=e("./constants");t.exports=async e=>{if(!e)throw n(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");if("string"==typeof e||e instanceof String)return s("Content was a path"),i.createReadStream(e);if(e.length)return s("Content was array-like"),{[Symbol.asyncIterator]:async function*(){yield e}};if(e[Symbol.asyncIterator])return s("Content was an async iterator"),e;if(e[Symbol.iterator])return s("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){s("Content was an HTML5 Blob");let t=0;const n={next:async()=>t>e.size?{done:!0}:new Promise(((n,i)=>{const s=e.slice(t,o);t+=o;const a=new global.FileReader,c=e=>{if(a.removeEventListener("loadend",c,!1),e.error)return i(e.error);n({done:!1,value:r.from(a.result)})};a.addEventListener("loadend",c),a.readAsArrayBuffer(s)}))};return{[Symbol.asyncIterator]:()=>n}}throw n(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-mfs"}],[4525,{"./constants":4519,"./to-path-components":4526,"./with-mfs-root":4532,"err-code":2406,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const{FILE_SEPARATOR:n}=e("./constants"),i=e("./with-mfs-root"),s=e("./to-path-components"),o=e("ipfs-unixfs-exporter"),a=e("err-code"),c="ipfs";t.exports=async(e,t)=>{let r=Array.isArray(t),u=Array.isArray(t)?t:[t];const l=await i(e);return u=u.map((e=>{if((e=(e=(e||"").trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&e.length>1&&(e=e.substring(0,e.length-1)),!e)throw a(new Error("paths must not be empty"),"ERR_NO_PATH");if(e.substring(0,1)!==n)throw a(new Error(`paths must start with a leading ${n}`),"ERR_INVALID_PATH");e.substring(e.length-n.length)===n&&(e=e.substring(0,e.length-n.length));const t=s(e);if(t[0]===c){let e;return e=2===t.length?`${n}${t.join(n)}`:`${n}${t.slice(0,t.length-1).join(n)}`,{type:"ipfs",depth:t.length-2,mfsPath:`${n}${t.join(n)}`,mfsDirectory:e,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}}const r=`/ipfs/${l}${t.length?"/"+t.join(n):""}`,i=`/ipfs/${l}/${t.slice(0,t.length-1).join(n)}`;return{type:"mfs",depth:t.length,mfsDirectory:i,mfsPath:r,parts:t,path:`${n}${t.join(n)}`,name:t[t.length-1]}})),await Promise.all(u.map((async t=>{const r="mfs"===t.type?t.mfsPath:t.path;try{const n=await o(r,e.ipld);t.cid=n.cid,t.mfsPath=`/ipfs/${n.path}`,t.unixfs=n.unixfs,t.content=n.content}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}t.exists=Boolean(t.cid)}))),r?u:u[0]}}}},{package:"3box>ipfs>ipfs-mfs"}],[4526,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}}},{package:"3box>ipfs>ipfs-mfs"}],[4527,{"./to-sources":4528},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./to-sources");t.exports=async function(e,t){const{sources:r,options:i}=await n(e,t);return{destination:r.pop(),sources:r,options:i}}}}},{package:"3box>ipfs>ipfs-mfs"}],[4528,{"./to-mfs-path":4525},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./to-mfs-path");t.exports=async function(e,t){Array.isArray(t[0])&&(t=t[0]);const r=t.filter((e=>"string"==typeof e)).map((e=>e.trim()));return{sources:await n(e,r)}}}}},{package:"3box>ipfs>ipfs-mfs"}],[4529,{debug:2304,"ipfs-unixfs-exporter":4557},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("debug")("ipfs:mfs:utils:to-trail");t.exports=async(e,t)=>{i(`Creating trail for path ${t}`);const r=[];for await(const i of n.path(t,e.ipld))r.push({name:i.name,cid:i.cid,size:i.node.size,type:i.unixfs?i.unixfs.type:undefined});return r}}}},{package:"3box>ipfs>ipfs-mfs"}],[4530,{"./constants":4519,debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug")("ipfs:mfs:utils:update-mfs-root"),{MFS_ROOT_KEY:i}=e("./constants");t.exports=async(e,t)=>(n(`New MFS root will be ${t}`),await e.repo.datastore.put(i,t.buffer),t)}}},{package:"3box>ipfs>ipfs-mfs"}],[4531,{"./add-link":4517,debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug")("ipfs:mfs:utils:update-tree"),i=e("./add-link"),s={shardSplitThreshold:1e3};t.exports=async(e,t,r)=>{r=Object.assign({},s,r),n("Trail",t),t=t.slice().reverse();let o,a=0;for await(const n of e.ipld.getMany(t.map((e=>e.cid)))){const s=t[a].cid,c=t[a].name;if(a++,!o){o={cid:s,name:c,size:n.size};continue}const u=await i(e,{parent:n,name:o.name,cid:o.cid,size:o.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,format:r.format,hashAlg:r.hashAlg,cidVersion:r.cidVersion});o={cid:u.cid,name:c,size:u.node.size}}return n(`Final CID ${o.cid}`),o.cid}}}},{package:"3box>ipfs>ipfs-mfs"}],[4532,{"./constants":4519,cids:2169,debug:2304,"ipfs-unixfs":4586,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),i=e("ipfs-unixfs"),{DAGNode:s}=e("ipld-dag-pb"),o=e("debug")("ipfs:mfs:utils:with-mfs-root"),a=e("multicodec"),c=e("multihashes"),{MFS_ROOT_KEY:u}=e("./constants");t.exports=async e=>{let t;await e.repo.datastore.open();try{const r=await e.repo.datastore.get(u);t=new n(r)}catch(r){if("ERR_NOT_FOUND"!==r.code)throw r;o("Creating new MFS root");const n=s.create(new i("directory").marshal());t=await e.ipld.put(n,a.DAG_PB,{cidVersion:0,hashAlg:c.names["sha2-256"]}),await e.repo.datastore.put(u,t.buffer)}return o(`Loaded MFS root /ipfs/${t}`),t}}}},{package:"3box>ipfs>ipfs-mfs"}],[4533,{"./mkdir":4512,"./stat":4516,"./utils/add-link":4517,"./utils/apply-default-options":4518,"./utils/constants":4519,"./utils/create-lock":4520,"./utils/to-async-iterator":4524,"./utils/to-mfs-path":4525,"./utils/to-path-components":4526,"./utils/to-trail":4529,"./utils/update-mfs-root":4530,"./utils/update-tree":4531,"async-iterator-last":1812,buffer:2132,debug:2304,"err-code":2406,"ipfs-unixfs-importer":4582},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("debug")("ipfs:mfs:write"),i=e("ipfs-unixfs-importer"),s=e("./stat"),o=e("./mkdir"),a=e("./utils/add-link"),c=e("./utils/apply-default-options"),u=e("./utils/create-lock"),l=e("./utils/to-async-iterator"),f=e("./utils/to-mfs-path"),h=e("./utils/to-path-components"),d=e("./utils/to-trail"),p=e("./utils/update-tree"),g=e("./utils/update-mfs-root"),b=e("err-code"),{MAX_CHUNK_SIZE:m}=e("./utils/constants"),y=e("async-iterator-last"),_={offset:0,length:undefined,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",parents:!1,progress:()=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};t.exports=e=>async function(t,r,i){let s,o,a;if(n("Hello world, writing",t,r,i),i=c(i,_),n("Reading source, destination and parent"),await u().readLock((async()=>{s=await l(r,i),o=await f(e,t),a=await f(e,o.mfsDirectory)}))(),n("Read source, destination and parent"),!i.parents&&!a.exists)throw b(new Error("directory does not exist"),"ERR_NO_EXIST");if(!i.create&&!o.exists)throw b(new Error("file does not exist"),"ERR_NO_EXIST");return w(e,t,s,o,i)};const w=async(e,t,r,n,i)=>{const c=await k(e,r,n,i);await u().writeLock((async()=>{const r=h(t),n=r.pop();let u=!1;try{await s(e)(`/${r.join("/")}`,i),u=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}u||await o(e)(`/${r.join("/")}`,i);const l=await f(e,t),m=await d(e,l.mfsDirectory,i),y=m[m.length-1];if(!y.type.includes("directory"))throw b(new Error(`cannot write to ${y.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const _=await e.ipld.get(y.cid),w=await a(e,{parent:_,name:n,cid:c.cid,size:c.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,format:i.format,hashAlg:i.hashAlg,cidVersion:i.cidVersion});y.cid=w.cid;const k=await p(e,m,i);await g(e,k)}))()},k=async(e,t,r,s)=>{r.exists?n(`Overwriting file ${r.cid} offset ${s.offset} length ${s.length}`):n(`Writing file offset ${s.offset} length ${s.length}`);const o=[];s.offset>0&&(r.unixfs&&r.unixfs.fileSize()>s.offset?(n(`Writing first ${s.offset} bytes of original file`),o.push((()=>r.content({offset:0,length:s.offset})))):(n(`Writing zeros for first ${s.offset} bytes`),o.push(E(s.offset)))),o.push(v(t,s.length));const a=S(x(o),(e=>{if(r.unixfs&&!s.truncate){const t=r.unixfs.fileSize();if(t>e)return n(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});n("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let c=await y(i([{content:a}],e.ipld,{progress:s.progress,hashAlg:s.hashAlg,cidVersion:s.cidVersion,strategy:s.strategy,rawLeaves:s.rawLeaves,reduceSingleLeafToSelf:s.reduceSingleLeafToSelf,leafType:s.leafType}));return n(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},v=(e,t)=>async function*(){let r=0;for await(const n of e){if(r+=n.length,r>t)return void(yield n.slice(0,t-r));yield n}},E=(e,t=m)=>{const n=r.alloc(t,0),i={[Symbol.asyncIterator]:async function*(){for(;;)yield n.slice()}};return v(i,e)},x=async function*(e){for(let t=0;t<e.length;t++)for await(const r of e[t]())yield r},S=async function*(e,t){let r=0;for await(const t of e)r+=t.length,yield t;for await(const e of t(r))r+=e.length,yield e}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-mfs"}],[4534,{"./lib/XMLHttpRequest":4535},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/XMLHttpRequest");function i(e){if(!(this instanceof i))throw new Error('[ipfs-mini] IPFS instance must be instantiated with "new" flag (e.g. var ipfs = new IPFS("http://localhost:8545");).');this.setProvider(e||{})}function s(){}function o(e){return new Promise(e)}function a(e){e(s,s)}t.exports=i,i.prototype.setProvider=function(e){if("object"!=typeof e)throw new Error(`[ifpsjs] provider must be type Object, got '${typeof e}'.`);var t=this.provider=Object.assign({host:"127.0.0.1",pinning:!0,port:"5001",protocol:"http",base:"/api/v0"},e||{});this.requestBase=String(`${t.protocol}://${t.host}:${t.port}${t.base}`)},i.prototype.sendAsync=function(e,t){var r=this,i=new n,c=e||{};return(t?a:o)((function(n,o){function a(e,r){return(t||s)(e,c.takeHash&&r?r.Hash:r),e?o(e):!e&&r?n(c.takeHash?r.Hash:r):void 0}i.onreadystatechange=function(){if(4===i.readyState&&1!==i.timeout)if(200!==i.status)a(new Error(`[ipfs-mini] status ${i.status}: ${i.responseText}`),null);else try{a(null,c.jsonParse?JSON.parse(i.responseText):i.responseText)}catch(e){a(new Error(`[ipfs-mini] while parsing data: '${String(i.responseText)}', error: ${String(e)} with provider: '${r.requestBase}'`,null))}};try{var u=r.provider.pinning&&"/add"===e.uri?"?pin=true":"";c.payload?i.open("POST",`${r.requestBase}${e.uri}${u}`):i.open("GET",`${r.requestBase}${e.uri}${u}`),c.accept&&i.setRequestHeader("accept",c.accept),c.payload&&c.boundary?(i.setRequestHeader("Content-Type",`multipart/form-data; boundary=${c.boundary}`),i.send(c.payload)):i.send()}catch(e){a(e,null)}}))},i.prototype.add=function(e,t){var r="object"==typeof e&&e.isBuffer?e.toString("binary"):e,n=function(e){for(;;){var t=`----IPFSMini${1e5*Math.random()}.${1e5*Math.random()}`;if(-1===e.indexOf(t))return t}}(r),i=`--${n}\r\nContent-Disposition: form-data; name="path"\r\nContent-Type: application/octet-stream\r\n\r\n${r}\r\n--${n}--`;return this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",takeHash:!0,payload:i,boundary:n},t)},i.prototype.addJSON=function(e,t){return this.add(JSON.stringify(e),t)},i.prototype.stat=function(e,t){return this.sendAsync({jsonParse:!0,uri:`/object/stat/${e}`},t)},i.prototype.cat=function(e,t){return this.sendAsync({uri:`/cat/${e}`},t)},i.prototype.catJSON=function(e,t){return this.sendAsync({uri:`/cat/${e}`,jsonParse:!0},t)}}}},{package:"3box>ipfs-mini"}],[4535,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=window.XMLHttpRequest;t.exports=n}}},{package:"3box>ipfs-mini"}],[4536,{buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("buffer"),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,r),r.Buffer=o),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return t!==undefined?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}}},{package:"3box>orbit-db>ipfs-pubsub-1on1>safe-buffer"}],[4537,{"./encoding":4538,"./get-peer-id":4539,"./protocol":4540,"./wait-for-peers":4541,events:2133,path:5406},function(){with(this)return function(){"use strict";return function(e,t,r){e("path");const n=e("events"),i=e("./protocol"),s=e("./encoding"),o=e("./wait-for-peers"),a=e("./get-peer-id");class c extends n{constructor(e,t){if(super(),this._ipfs=e,!e.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._receiverID=t,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await o(this._ipfs,[this._receiverID],this._id)}async send(e){let t=s(e);await this._ipfs.pubsub.publish(this._id,t)}close(){this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await a(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id="/"+i+"/"+this._peers.join("/"),this._messageHandler=e=>{e&&e.from===this._receiverID&&this.emit("message",e)}}async _openChannel(){await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(e,t){const r=new c(e,t);return await r._openChannel(),r}}t.exports=c}}},{package:"3box>orbit-db>ipfs-pubsub-1on1"}],[4538,{"safe-buffer":4536},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("safe-buffer").Buffer;t.exports=e=>{let t=e;return n.isBuffer(t)||(t=n.from(t)),t}}}},{package:"3box>orbit-db>ipfs-pubsub-1on1"}],[4539,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=async e=>(await e.id()).id}}},{package:"3box>orbit-db>ipfs-pubsub-1on1"}],[4540,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="ipfs-pubsub-direct-channel/v1"}}},{package:"3box>orbit-db>ipfs-pubsub-1on1"}],[4541,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=async(e,t,r)=>{const n=async()=>{const n=await e.pubsub.peers(r);return 0===t.map((e=>n.includes(e))).filter((e=>!1===e)).length};return await n()?Promise.resolve():new Promise((async(e,t)=>{const r=setInterval((async()=>{try{await n()&&(clearInterval(r),e())}catch(e){t(e)}}),100)}))}}}},{package:"3box>orbit-db>ipfs-pubsub-1on1"}],[4542,{"./utils":4543,events:2133},function(){with(this)return function(){"use strict";return function(e,t,r){const{difference:n}=e("./utils"),i=e("events"),s={start:!0,pollInterval:1e3};class o extends i{constructor(e,t,r){super(),this._pubsub=e,this._topic=t,this._options=Object.assign({},s,r),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return null!==this._interval}set started(e){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval)}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(e){return this._peers.includes(e)}async _pollPeers(){try{const e=await this._pubsub.peers(this._topic);o._emitJoinsAndLeaves(new Set(this._peers),new Set(e),this),this._peers=e}catch(e){clearInterval(this._interval),this.emit("error",e)}}static _emitJoinsAndLeaves(e,t,r){n(t,e).forEach((e=>r.emit("join",e))),n(e,t).forEach((e=>r.emit("leave",e)))}}t.exports=o}}},{package:"3box>orbit-db>orbit-db-pubsub>ipfs-pubsub-peer-monitor"}],[4543,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports.runWithDelay=async(e,t,r)=>{const n=await e(t);var i;return await(i=r,new Promise((e=>setTimeout(e,i)))),n},t.exports.difference=(e,t)=>new Set([...e].filter((e=>!t.has(e))))}}},{package:"3box>orbit-db>orbit-db-pubsub>ipfs-pubsub-peer-monitor"}],[4544,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=Math.ceil,o=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,f=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function b(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return g(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,v,E,x,S,R,A,I,N,O,D=V.prototype={constructor:V,toString:null,valueOf:null},T=new V(1),L=20,P=4,B=-7,C=21,j=-1e7,M=1e7,z=!1,F=1,U=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function V(e,t){var r,i,s,a,u,h,d,p,g=this;if(!(g instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>M?g.c=g.e=null:e.e<j?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);return void(a>M?g.c=g.e=null:(g.e=a,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return E(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(a=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(y(t,2,H.length,"Base"),10==t)return W(g=new V(e),L+g.e+1,P);if(p=String(e),h="number"==typeof e){if(0*e!=0)return E(g,p,h,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=H.slice(0,t),a=u=0,d=p.length;u<d;u++)if(r.indexOf(i=p.charAt(u))<0){if("."==i){if(u>a){a=d;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,u=-1,a=0;continue}return E(g,String(e),h,t)}h=!1,(a=(p=v(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(u,++d)){if(d-=u,h&&V.DEBUG&&d>15&&(e>f||e!==o(e)))throw Error(c+g.s*e);if((a=a-u-1)>M)g.c=g.e=null;else if(a<j)g.c=[g.e=0];else{if(g.e=a,g.c=[],u=(a+1)%l,a<0&&(u+=l),u<d){for(u&&g.c.push(+p.slice(0,u)),d-=l;u<d;)g.c.push(+p.slice(u,u+=l));u=l-(p=p.slice(u)).length}else u-=d;for(;u--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function q(e,t,r,n){var i,s,o,a,c;if(null==r?r=P:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=b(e.c),c=1==n||2==n&&(o<=B||o>=C)?w(c,o):k(c,o,"0");else if(s=(e=W(new V(e),t,r)).e,a=(c=b(e.c)).length,1==n||2==n&&(t<=s||s<=B)){for(;a<t;c+="0",a++);c=w(c,s)}else if(t-=o,c=k(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function G(e,t){for(var r,n=1,i=new V(e[0]);n<e.length;n++){if(!(r=new V(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*l-1)>M?e.c=e.e=null:r<j?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,n){var i,a,c,f,d,p,g,b=e.c,m=h;if(b){e:{for(i=1,f=b[0];f>=10;f/=10,i++);if((a=t-i)<0)a+=l,c=t,g=(d=b[p=0])/m[i-c-1]%10|0;else if((p=s((a+1)/l))>=b.length){if(!n)break e;for(;b.length<=p;b.push(0));d=g=0,i=1,c=(a%=l)-l+1}else{for(d=f=b[p],i=1;f>=10;f/=10,i++);g=(c=(a%=l)-l+i)<0?0:d/m[i-c-1]%10|0}if(n=n||t<0||null!=b[p+1]||(c<0?d:d%m[i-c-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?c>0?d/m[i-c]:0:b[p-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,n?(t-=e.e+1,b[0]=m[(l-t%l)%l],e.e=-t||0):b[0]=e.e=0,e;if(0==a?(b.length=p,f=1,p--):(b.length=p+1,f=m[l-a],b[p]=c>0?o(d/m[i-c]%m[c])*f:0),n)for(;;){if(0==p){for(a=1,c=b[0];c>=10;c/=10,a++);for(c=b[0]+=f,f=1;c>=10;c/=10,f++);a!=f&&(e.e++,b[0]==u&&(b[0]=1));break}if(b[p]+=f,b[p]!=u)break;b[p--]=0,f=1}for(a=b.length;0===b[--a];b.pop());}e.e>M?e.c=e.e=null:e.e<j&&(e.c=[e.e=0])}return e}function Z(e){var t,r=e.e;return null===r?e.toString():(t=b(e.c),t=r<=B||r>=C?w(t,r):k(t,r,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,p,t),L=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),P=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-p,0,t),y(r[1],0,p,t),B=r[0],C=r[1]):(y(r,-p,p,t),B=-(C=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-p,-1,t),y(r[1],1,p,t),j=r[0],M=r[1];else{if(y(r,-p,p,t),!r)throw Error(a+t+" cannot be zero: "+r);j=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw z=!r,Error(a+"crypto unavailable");z=r}else z=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,p,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);$=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);H=r}}return{DECIMAL_PLACES:L,ROUNDING_MODE:P,EXPONENTIAL_AT:[B,C],RANGE:[j,M],CRYPTO:z,MODULO_MODE:F,POW_PRECISION:U,FORMAT:$,ALPHABET:H}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return G(arguments,D.lt)},V.minimum=V.min=function(){return G(arguments,D.gt)},V.random=(x=9007199254740992,S=Math.random()*x&2097151?function(){return o(Math.random()*x)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,c,u=0,f=[],d=new V(T);if(null==e?e=L:y(e,0,p),i=s(e/l),z)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(f.push(c%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw z=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(f.push(c%1e14),u+=7);u=i/7}if(!z)for(;u<i;)(c=S())<9e15&&(f[u++]=c%1e14);for(i=f[--u],e%=l,i&&e&&(c=h[l-e],f[u]=o(i/c)*c);0===f[u];f.pop(),u--);if(u<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=l);for(u=1,c=f[0];c>=10;c/=10,u++);u<l&&(n-=l-u)}return d.e=n,d.c=f,d}),V.sum=function(){for(var e=1,t=arguments,r=new V(t[0]);e<t.length;)r=r.plus(t[e++]);return r},v=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,f,h,d,p,g,m=n.indexOf("."),y=L,_=P;for(m>=0&&(f=U,U=0,n=n.replace(".",""),d=(g=new V(i)).pow(n.length-m),U=f,g.c=t(k(b(d.c),d.e,"0"),10,s,e),g.e=g.c.length),l=f=(p=t(n,i,s,a?(c=H,e):(c=e,H))).length;0==p[--f];p.pop());if(!p[0])return c.charAt(0);if(m<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,g,y,_,s)).c,h=d.r,l=d.e),m=p[u=l+y+1],f=s/2,h=h||u<0||null!=p[u+1],h=_<4?(null!=m||h)&&(0==_||_==(d.s<0?3:2)):m>f||m==f&&(4==_||h||6==_&&1&p[u-1]||_==(d.s<0?8:7)),u<1||!p[0])n=h?k(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,h)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(m=0,n="";m<=f;n+=c.charAt(p[m++]));n=k(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%d,l=t/d|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%d)+(n=l*s+(o=e[c]/d|0)*u)%d*d+a)/r|0)+(n/d|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,c){var f,h,d,p,b,m,y,_,w,k,v,E,x,S,R,A,I,N=n.s==i.s?1:-1,O=n.c,D=i.c;if(!(O&&O[0]&&D&&D[0]))return new V(n.s&&i.s&&(O?!D||O[0]!=D[0]:D)?O&&0==O[0]||!D?0*N:N/0:NaN);for(w=(_=new V(N)).c=[],N=s+(h=n.e-i.e)+1,c||(c=u,h=g(n.e/l)-g(i.e/l),N=N/l|0),d=0;D[d]==(O[d]||0);d++);if(D[d]>(O[d]||0)&&h--,N<0)w.push(1),p=!0;else{for(S=O.length,A=D.length,d=0,N+=2,(b=o(c/(D[0]+1)))>1&&(D=e(D,b,c),O=e(O,b,c),A=D.length,S=O.length),x=A,v=(k=O.slice(0,A)).length;v<A;k[v++]=0);I=D.slice(),I=[0].concat(I),R=D[0],D[1]>=c/2&&R++;do{if(b=0,(f=t(D,k,A,v))<0){if(E=k[0],A!=v&&(E=E*c+(k[1]||0)),(b=o(E/R))>1)for(b>=c&&(b=c-1),y=(m=e(D,b,c)).length,v=k.length;1==t(m,k,y,v);)b--,r(m,A<y?I:D,y,c),y=m.length,f=1;else 0==b&&(f=b=1),y=(m=D.slice()).length;if(y<v&&(m=[0].concat(m)),r(k,m,v,c),v=k.length,-1==f)for(;t(D,k,A,v)<1;)b++,r(k,A<v?I:D,v,c),v=k.length}else 0===f&&(b++,k=[0]);w[d++]=b,k[0]?k[v++]=O[x]||0:(k=[O[x]],v=1)}while((x++<S||null!=k[0])&&N--);p=null!=k[0],w[0]||w.splice(0,1)}if(c==u){for(d=1,N=w[0];N>=10;N/=10,d++);W(_,s+(_.e=d+h*l-1)+1,a,p)}else _.e=h,_.r=+p;return _}}(),R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,I=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,n){var i,s=r?t:t.replace(O,"");if(N.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(R,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(A,"$1").replace(I,"0.$1")),t!=s))return new V(s,i);if(V.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},D.absoluteValue=D.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},D.comparedTo=function(e,t){return m(this,new V(e,t))},D.decimalPlaces=D.dp=function(e,t){var r,n,i,s=this;if(null!=e)return y(e,0,p),null==t?t=P:y(t,0,8),W(new V(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-g(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},D.dividedBy=D.div=function(e,t){return r(this,new V(e,t),L,P)},D.dividedToIntegerBy=D.idiv=function(e,t){return r(this,new V(e,t),0,1)},D.exponentiatedBy=D.pow=function(e,t){var r,n,i,c,u,f,h,d,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new V(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new V(Math.pow(+Z(p),u?2-_(e):+Z(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(n=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&_(e)?-0:0,p.e>-1&&(c=1/c),new V(f?1/c:c);U&&(c=s(U/l+2))}for(u?(r=new V(.5),f&&(e.s=1),h=_(e)):h=(i=Math.abs(+Z(e)))%2,d=new V(T);;){if(h){if(!(d=d.times(p)).c)break;c?d.c.length>c&&(d.c.length=c):n&&(d=d.mod(t))}if(i){if(0===(i=o(i/2)))break;h=i%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)h=_(e);else{if(0===(i=+Z(e)))break;h=i%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?d:(f&&(d=T.div(d)),t?d.mod(t):c?W(d,U,P,undefined):d)},D.integerValue=function(e){var t=new V(this);return null==e?e=P:y(e,0,8),W(t,t.e+1,e)},D.isEqualTo=D.eq=function(e,t){return 0===m(this,new V(e,t))},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(e,t){return m(this,new V(e,t))>0},D.isGreaterThanOrEqualTo=D.gte=function(e,t){return 1===(t=m(this,new V(e,t)))||0===t},D.isInteger=function(){return!!this.c&&g(this.e/l)>this.c.length-2},D.isLessThan=D.lt=function(e,t){return m(this,new V(e,t))<0},D.isLessThanOrEqualTo=D.lte=function(e,t){return-1===(t=m(this,new V(e,t)))||0===t},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&0==this.c[0]},D.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new V(e,t)).s,!a||!t)return new V(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/l,f=e.e/l,h=o.c,d=e.c;if(!c||!f){if(!h||!d)return h?(e.s=-t,e):new V(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new V(h[0]?o:3==P?-0:0)}if(c=g(c),f=g(f),h=h.slice(),a=c-f){for((s=a<0)?(a=-a,i=h):(f=c,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(h[t]!=d[t]){s=h[t]<d[t];break}if(s&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=u-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=u}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--f);return h[0]?K(e,h,f):(e.s=3==P?-1:1,e.c=[e.e=0],e)},D.modulo=D.mod=function(e,t){var n,i,s=this;return e=new V(e,t),!s.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||s.c&&!s.c[0]?new V(s):(9==F?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,F),(e=s.minus(n.times(e))).c[0]||1!=F||(e.s=s.s),e)},D.multipliedBy=D.times=function(e,t){var r,n,i,s,o,a,c,f,h,p,b,m,y,_,w,k=this,v=k.c,E=(e=new V(e,t)).c;if(!(v&&E&&v[0]&&E[0]))return!k.s||!e.s||v&&!v[0]&&!E||E&&!E[0]&&!v?e.c=e.e=e.s=null:(e.s*=k.s,v&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=g(k.e/l)+g(e.e/l),e.s*=k.s,(c=v.length)<(p=E.length)&&(y=v,v=E,E=y,i=c,c=p,p=i),i=c+p,y=[];i--;y.push(0));for(_=u,w=d,i=p;--i>=0;){for(r=0,b=E[i]%w,m=E[i]/w|0,s=i+(o=c);s>i;)r=((f=b*(f=v[--o]%w)+(a=m*f+(h=v[o]/w|0)*b)%w*w+y[s]+r)/_|0)+(a/w|0)+m*h,y[s--]=f%_;y[s]=r}return r?++n:y.splice(0,1),K(e,y,n)},D.negated=function(){var e=new V(this);return e.s=-e.s||null,e},D.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new V(e,t)).s,!i||!t)return new V(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/l,o=e.e/l,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new V(i/0);if(!a[0]||!c[0])return c[0]?e:new V(a[0]?n:0*i)}if(s=g(s),o=g(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++o),K(e,a,o)},D.precision=D.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return y(e,1,p),null==t?t=P:y(t,0,8),W(new V(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},D.shiftedBy=function(e){return y(e,-9007199254740991,f),this.times("1e"+e)},D.squareRoot=D.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=L+4,f=new V("0.5");if(1!==c||!a||!a[0])return new V(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+Z(o)))||c==1/0?(((t=b(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=g((u+1)/2)-(u<0||u%2),n=new V(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new V(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),b(s.c).slice(0,c)===(t=b(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+L+2,1),e=!n.times(n).eq(o));break}if(!i&&(W(s,s.e+L+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return W(n,n.e+L+1,P,e)},D.toExponential=function(e,t){return null!=e&&(y(e,0,p),e++),q(this,e,t,1)},D.toFixed=function(e,t){return null!=e&&(y(e,0,p),e=e+this.e+1),q(this,e,t)},D.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=$;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=o[0],h=o[1],d=i.s<0,p=d?f.slice(1):f,g=p.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,f=p.substr(0,s);s<g;s+=c)f+=l+p.substr(s,c);u>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},D.toFraction=function(e){var t,n,i,s,o,c,u,f,d,p,g,m,y=this,_=y.c;if(null!=e&&(!(u=new V(e)).isInteger()&&(u.c||1!==u.s)||u.lt(T)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Z(u));if(!_)return new V(y);for(t=new V(T),d=n=new V(T),i=f=new V(T),m=b(_),o=t.e=m.length-y.e-1,t.c[0]=h[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:d:u,c=M,M=1/0,u=new V(m),f.c[0]=0;p=r(u,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,d=f.plus(p.times(s=d)),f=s,t=u.minus(p.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),f=f.plus(s.times(d)),n=n.plus(s.times(i)),f.s=d.s=y.s,g=r(d,i,o*=2,P).minus(y).abs().comparedTo(r(f,n,o,P).minus(y).abs())<1?[d,i]:[f,n],M=c,g},D.toNumber=function(){return+Z(this)},D.toPrecision=function(e,t){return null!=e&&y(e,1,p),q(this,e,t,2)},D.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=B||i>=C?w(b(r.c),i):k(b(r.c),i,"0"):10===e?t=k(b((r=W(new V(r),L+i+1,P)).c),r.e,"0"):(y(e,2,H.length,"Base"),t=v(k(b(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},D.valueOf=D.toJSON=function(){return Z(this)},D._isBigNumber=!0,i&&(D[Symbol.toStringTag]="BigNumber",D[Symbol.for("nodejs.util.inspect.custom")]=D.valueOf),null!=t&&V.set(t),V}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"3box>ipfs>ipfs-repo>bignumber.js"}],[4545,{buffer:2132,"interface-datastore":4460},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=new(0,e("interface-datastore").Key)("api");t.exports=e=>({get(t){e.get(n,((e,r)=>t(e,r&&r.toString())))},set(t,i){e.put(n,r.from(t.toString()),i)},delete(t){e.delete(n,t)}})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-repo"}],[4546,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.create=function(e,t,r){return new(0,r.storageBackends[e])(t,Object.assign({},r.storageBackendOptions[e]||{}))}}}},{package:"3box>ipfs>ipfs-repo"}],[4547,{"async/reject":1875,"async/setImmediate":1878,"base32.js":2057,cids:2169,"datastore-core":2283,"interface-datastore":4460,"ipfs-block":4490,"pull-stream/pull":5488,"pull-stream/sinks/collect":5489},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("datastore-core"),i=n.ShardingDatastore,s=e("interface-datastore").Key,o=e("base32.js"),a=e("ipfs-block"),c=e("async/setImmediate"),u=e("async/reject"),l=e("cids"),f=e("pull-stream/pull"),h=e("pull-stream/sinks/collect"),d=e=>(e=>{const t=new o.Encoder;return new s("/"+t.write(e).finalize(),!1)})(e.buffer);function p(e){try{return 0===e.version?e.toV1():e.toV0()}catch(e){return null}}t.exports=(e,t,r)=>{!function(e,t,r){if(t.sharding){const t=new n.shard.NextToLast(2);i.createOrOpen(e,t,r)}else c((()=>r(null,e)))}(e,t,((e,t)=>{if(e)return r(e);r(null,function(e){return{query(t,r){f(e.query(t),h(r))},get(t,r){if(!l.isCID(t))return c((()=>{r(new Error("Not a valid cid"))}));const n=d(t);e.get(n,((i,s)=>{if(i){if("ERR_NOT_FOUND"===i.code){const s=p(t);if(!s)return r(i);const o=d(s);return e.get(o,((i,s)=>{if(i)return r(i);e.put(n,s,(e=>{if(e)return r(e);r(null,new a(s,t))}))}))}return r(i)}r(null,new a(s,t))}))},put(t,r){if(!a.isBlock(t))return c((()=>{r(new Error("invalid block"))}));const n=d(t.cid);e.has(n,((i,s)=>i?r(i):s?r():void e.put(n,t.data,r)))},putMany(t,r){const n=t.map((e=>({key:d(e.cid),block:e}))),i=e.batch();u(n,((t,r)=>e.has(t.key,r)),((e,t)=>{if(e)return r(e);t.forEach((e=>{i.put(e.key,e.block.data)})),i.commit(r)}))},has(t,r){if(!l.isCID(t))return c((()=>{r(new Error("Not a valid cid"))}));e.has(d(t),((n,i)=>{if(n)return r(n);if(i)return r(null,!0);const s=p(t);if(!s)return r(null,!1);e.has(d(s),r)}))},delete(t,r){if(!l.isCID(t))return c((()=>{r(new Error("Not a valid cid"))}));e.delete(d(t),r)},close(t){e.close(t)}}}(t))}))}}}},{package:"3box>ipfs>ipfs-repo"}],[4548,{"async/queue":1874,"async/waterfall":1884,buffer:2132,dlv:2335,"interface-datastore":4460,"just-safe-set":4801},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("interface-datastore").Key,i=e("async/queue"),s=e("async/waterfall"),o=e("dlv"),a=e("just-safe-set"),c=e("buffer").Buffer,u=new n("config");t.exports=e=>{const t=i((function(e,t){const i=e.key,o=e.value;i?s([e=>r.get(e),(e,t)=>{a(e,i,o),t(null,e)},n],t):n(o,t)}),1),r={get(t,r){"function"==typeof t&&(r=t,t=undefined),t||(t=undefined),e.get(u,((e,n)=>{if(e)return r(e);let i;try{i=JSON.parse(n.toString())}catch(e){return r(e)}if(void 0===t)return r(null,i);if("string"!=typeof t)return r(new Error("Key "+t+" must be a string."));const s=o(i,t,null);if(null===s)return r(new Error("Key "+t+" does not exist in config."));r(null,s)}))},set(e,r,n){if("function"==typeof r)n=r,r=e,e=undefined;else if(!e||"string"!=typeof e)return n(new Error("Invalid key type"));if(r===undefined||c.isBuffer(r))return n(new Error("Invalid value type"));t.push({key:e,value:r},n)},exists(t){e.has(u,t)}};return r;function n(t,r){const n=c.from(JSON.stringify(t,null,2));e.put(u,n,r)}}}}},{package:"3box>ipfs>ipfs-repo"}],[4549,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={repoVersion:7}}}},{package:"3box>ipfs>ipfs-repo"}],[4550,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}}}}},{package:"3box>ipfs>ipfs-repo"}],[4551,{"datastore-level":2298},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={lock:"memory",storageBackends:{root:e("datastore-level"),blocks:e("datastore-level"),keys:e("datastore-level"),datastore:e("datastore-level")},storageBackendOptions:{root:{extension:""},blocks:{sharding:!1},keys:{sharding:!1}}}}}},{package:"3box>ipfs>ipfs-repo"}],[4552,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED"}}},{package:"3box>ipfs>ipfs-repo"}],[4553,{"./api-addr":4545,"./backends":4546,"./blockstore":4547,"./config":4548,"./constants":4549,"./default-datastore":4550,"./default-options":4551,"./errors":4552,"./lock":4554,"./lock-memory":4554,"./spec":4555,"./version":4556,assert:1805,"async/each":1838,"async/parallel":1873,"async/series":1877,"async/waterfall":1884,"bignumber.js":4544,debug:2304,dlv:2335,path:5406,"pull-stream/pull":5488,"pull-stream/sinks/reduce":5496,timers:5947},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("async/waterfall"),i=e("async/series"),s=e("async/parallel"),o=e("async/each"),a=e("dlv"),c=e("assert"),u=e("path"),l=e("debug"),f=e("bignumber.js"),h=e("pull-stream/pull"),d=e("pull-stream/sinks/reduce"),p=e("./backends"),g=e("./version"),b=e("./config"),m=e("./spec"),y=e("./api-addr"),_=e("./blockstore"),w=e("./default-options"),k=e("./default-datastore"),v=e("./errors"),E=l("repo"),x=Number.MAX_SAFE_INTEGER,S={memory:e("./lock-memory"),fs:e("./lock")},R=e("./constants").repoVersion;function A(e,t){h(e.query({}),d(((e,t)=>e.plus(t.value.byteLength).plus(t.key._buf.byteLength)),new f(0),t))}function I(e,t){return r=>{t(r&&!e(r)?r:null)}}function N(e){return I((e=>"Already open"===e.message),e)}t.exports=class{constructor(e,t){c.strictEqual(typeof e,"string","missing repoPath"),this.options=function(e){const t=Object.assign({},w,e);return t.storageBackends=Object.assign({},w.storageBackends,t.storageBackends),t.storageBackendOptions=Object.assign({},w.storageBackendOptions,t.storageBackendOptions),t}(t),this.closed=!0,this.path=e,this._locker=this._getLocker(),this.root=p.create("root",this.path,this.options),this.version=g(this.root),this.config=b(this.root),this.spec=m(this.root),this.apiAddr=y(this.root)}init(e,t){E("initializing at: %s",this.path),i([e=>this.root.open(N(e)),t=>{return this.config.set(((r=e).datastore=Object.assign({},k,a(r,"datastore",{})),r),t);var r},t=>this.spec.set(function(e){const t=Object.assign({},k.Spec,a(e,"datastore.Spec",{}));return{type:t.type,mounts:t.mounts.map((e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc})))}}(e),t),e=>this.version.set(R,e)],t)}open(e){this.closed?(E("opening at: %s",this.path),n([e=>this.root.open(N(e)),e=>this._isInitialized(e),e=>this._openLock(this.path,e),(e,t)=>{E("aquired repo.lock"),this.lockfile=e,t()},e=>{E("creating datastore"),this.datastore=p.create("datastore",u.join(this.path,"datastore"),this.options),E("creating blocks");const t=p.create("blocks",u.join(this.path,"blocks"),this.options);_(t,this.options.storageBackendOptions.blocks,e)},(e,t)=>{this.blocks=e,t()},e=>{E("creating keystore"),this.keys=p.create("keys",u.join(this.path,"keys"),this.options),e()},e=>{this.closed=!1,E("all opened"),e()}],(t=>{t&&this.lockfile?this._closeLock((r=>{r?E("error removing lock",r):this.lockfile=null,e(t)})):e(t)}))):r((()=>e(new Error("repo is already open"))))}_getLocker(){return"string"==typeof this.options.lock?(c(S[this.options.lock],"Unknown lock type: "+this.options.lock),S[this.options.lock]):(c(this.options.lock,"No lock provided"),this.options.lock)}_openLock(e,t){this._locker.lock(e,((e,r)=>{if(e)return t(e,null);c.strictEqual(typeof r.close,"function","Locks must have a close method"),t(null,r)}))}_closeLock(e){if(this.lockfile)return this.lockfile.close(e);e()}_isInitialized(e){E("init check"),s({config:e=>this.config.exists(e),spec:e=>this.spec.exists(e),version:e=>this.version.check(R,e)},((t,r)=>{if(E("init",t,r),t&&!r.config)return e(Object.assign(new Error("repo is not initialized yet"),{code:v.ERR_REPO_NOT_INITIALIZED,path:this.path}));e(t)}))}close(e){if(this.closed)return e(new Error("repo is already closed"));E("closing at: %s",this.path),i([e=>this.apiAddr.delete(function(e){return I((e=>e&&(e.code===v.ERR_REPO_NOT_INITIALIZED||e.message.startsWith("ENOENT"))),e)}(e)),e=>{o([this.blocks,this.keys,this.datastore],((e,t)=>e.close(t)),e)},e=>{E("unlocking"),this.closed=!0,this._closeLock(e)},e=>{this.lockfile=null,e()}],(t=>e(t)))}exists(e){this.version.exists(e)}stat(e,t){"function"==typeof e&&(t=e,e={}),e=Object.assign({},{human:!1},e),s({storageMax:e=>this.config.get("Datastore.StorageMax",((t,r)=>{e(null,new f(t?x:r))})),version:e=>this.version.get(e),blocks:e=>this.blocks.query({},((t,r)=>{const n=new f((r=r||[]).length);let i=new f(0);r.forEach((e=>{i=i.plus(e.value.byteLength).plus(e.key._buf.byteLength)})),e(t,{count:n,size:i})})),datastore:e=>A(this.datastore,e),keys:e=>A(this.keys,e)},((r,n)=>{if(r)return t(r);let i=n.blocks.size.plus(n.datastore).plus(n.keys);e.human&&(i=i.div(1048576)),t(null,{repoPath:this.path,storageMax:n.storageMax,version:n.version,numObjects:n.blocks.count,repoSize:i})}))}},t.exports.repoVersion=R,t.exports.errors=v}).call(this)}).call(this,e("timers").setImmediate)}}},{package:"3box>ipfs>ipfs-repo"}],[4554,{"async/setImmediate":1878,debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("async/setImmediate"),s=n("repo:lock"),o="repo.lock",a={};r.lock=(e,t)=>{const r=e+"/"+o;s("locking %s",r),a[r]=!0;const n={close(e){a[r]&&delete a[r],i(e)}};i((()=>{t(null,n)}))},r.locked=(e,t)=>{const r=e+"/"+o;s("checking lock: %s");const n=a[r];i((()=>{t(null,n)}))}}}},{package:"3box>ipfs>ipfs-repo"}],[4555,{buffer:2132,"interface-datastore":4460,"sort-keys":5880},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("interface-datastore").Key,i=e("sort-keys"),s=new n("datastore_spec");t.exports=e=>({exists(t){e.has(s,t)},get(t){e.get(s,((e,r)=>{if(e)return t(e);t(null,JSON.parse(r.toString()))}))},set(t,n){e.put(s,r.from(JSON.stringify(i(t,{deep:!0}))),n)}})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-repo"}],[4556,{buffer:2132,debug:2304,"interface-datastore":4460},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("interface-datastore").Key,i=e("debug")("repo:version"),s=new n("version");t.exports=e=>({exists(t){e.has(s,t)},get(t){e.get(s,((e,r)=>{if(e)return t(e);t(null,parseInt(r.toString().trim(),10))}))},set(t,n){e.put(s,r.from(String(t)),n)},check(e,t){this.get(((r,n)=>{if(r)return t(r);i("comparing version: %s and %s",n,e);if(n!==e&&!(6===n&&7===e||6===e&&7===n))return t(new Error(`ipfs repo needs migration: expected version v${e}, found version v${n}`));t()}))}})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-repo"}],[4557,{"../../is-buffer/index.js":4735,"./resolvers":4559,"async-iterator-last":1812,cids:2169,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("err-code"),i=e("cids"),s=e("./resolvers"),o=e("async-iterator-last"),a=e=>{if(r.isBuffer(e))return{cid:new i(e),toResolve:[]};if(i.isCID(e))return{cid:e,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=((e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean))(e);return{cid:new i(t[0]),toResolve:t.slice(1)}}throw n(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")},c=async function*(e,t){let{cid:r,toResolve:i}=a(e),o=r.toBaseEncodedString(),c=o;const u=i.length;for(;;){const a=await s(r,o,c,i,u,t);if(!a.entry&&!a.next)throw n(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;i=a.next.toResolve,r=a.next.cid,o=a.next.name,c=a.next.path}},u=(e,t)=>o(c(e,t));t.exports=u,t.exports.path=c,t.exports.recursive=async function*(e,t){const r=await u(e,t);if(yield r,r.unixfs&&r.unixfs.type.includes("dir"))for await(const e of async function*e(t){for await(const r of t.content())if(yield r,r.unixfs.type.includes("dir"))for await(const t of e(r))yield t}(r))yield e}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4558,{cids:2169,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),i=e("err-code");t.exports=async(e,t,r,s,o,a,c)=>{let u=await c.get(e),l=u,f=r;for(;s.length;){const o=s[0];if(!(o in l))throw i(new Error(`No property named ${o} found in cbor node ${e.toBaseEncodedString()}`),"ERR_NO_PROP");if(s.shift(),f=`${f}/${o}`,n.isCID(l[o]))return{entry:{name:t,path:r,cid:e,node:u,depth:a},next:{cid:l[o],name:o,path:f,toResolve:s}};l=l[o]}return{entry:{name:t,path:r,cid:e,node:u,depth:a}}}}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4559,{"./dag-cbor":4558,"./raw":4560,"./unixfs-v1":4564,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i={"dag-pb":e("./unixfs-v1"),raw:e("./raw"),"dag-cbor":e("./dag-cbor")},s=(e,t,r,o,a,c)=>{const u=i[e.codec];if(!u)throw n(new Error(`No resolver for codec ${e.codec}`),"ERR_NO_RESOLVER");return u(e,t,r,o,s,a,c)};t.exports=s}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4560,{"../utils/extract-data-from-block":4565,"../utils/validate-offset-and-length":4567,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("../utils/extract-data-from-block"),s=e("../utils/validate-offset-and-length");t.exports=async(e,t,r,o,a,c,u)=>{if(o.length)throw n(new Error(`No link named ${r} found in raw node ${e.toBaseEncodedString()}`),"ERR_NOT_FOUND");const l=await u.get(e);return{entry:{name:t,path:r,cid:e,node:l,content:(f=l,function*(e={}){const{offset:t,length:r}=s(f.length,e.offset,e.length);yield i(f,0,t,t+r)}),depth:c}};var f}}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4561,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e,t,r,n,i,s,o)=>async function*(e={}){const r=e.offset||0,a=e.length||t.Links.length,c=t.Links.slice(r,a);for(const e of c){const t=await i(e.Hash,e.Name,`${n}/${e.Name}`,[],s+1,o);yield t.entry}}}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4562,{"../../../../../is-buffer/index.js":4735,"../../../utils/extract-data-from-block":4565,"../../../utils/validate-offset-and-length":4567,"err-code":2406,"ipfs-unixfs":4586},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("../../../utils/extract-data-from-block"),i=e("../../../utils/validate-offset-and-length"),s=e("ipfs-unixfs"),o=e("err-code");async function*a(e,t,i,c,u=0){if(r.isBuffer(t)){const e=n(t,u,i,c);return e.length&&(yield e),u+=e.length}let l;try{l=s.unmarshal(t.Data)}catch(e){throw o(e,"ERR_NOT_UNIXFS")}if(Boolean(l.data&&l.data.length)){const e=n(l.data,u,i,c);e.length&&(yield e),u+=l.data.length}let f=u;for(let r=0;r<t.Links.length;r++){const n=t.Links[r],s=u+l.blockSizes[r];if(i>=f&&i<s||c>f&&c<=s||i<f&&c>s){const t=await e.get(n.Hash);for await(const r of a(e,t,i,c,u))u+=r.length,yield r}u=s,f=s+1}}t.exports=(e,t,r,n,s,o,c)=>(e={})=>{const n=r.fileSize(),{offset:s,length:o}=i(n,e.offset,e.length);return a(c,t,s,s+o)}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4563,{},function(){with(this)return function(){"use strict";return function(e,t,r){async function*n(e,t,r,i,s,o){const a=e.Links;for(const c of a){const a=c.Name.substring(2);if(a){const e=await r(c.Hash,a,`${t}/${a}`,[],i+1,s);yield e.entry}else{e=await s.get(c.Hash);for await(const a of n(e,t,r,i,s,o))yield a}}}t.exports=(e,t,r,i,s,o,a)=>(e={})=>n(t,i,s,o,a,e)}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4564,{"../../utils/find-cid-in-shard":4566,"./content/directory":4561,"./content/file":4562,"./content/hamt-sharded-directory":4563,"err-code":2406,"ipfs-unixfs":4586},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("ipfs-unixfs"),s=e("../../utils/find-cid-in-shard"),o={raw:e("./content/file"),file:e("./content/file"),directory:e("./content/directory"),"hamt-sharded-directory":e("./content/hamt-sharded-directory"),metadata:(e,t,r,n,i,s,o)=>{},symlink:(e,t,r,n,i,s,o)=>{}};t.exports=async(e,t,r,a,c,u,l)=>{const f=await l.get(e);let h,d;t||(t=e.toBaseEncodedString());try{h=i.unmarshal(f.Data)}catch(e){throw n(e,"ERR_NOT_UNIXFS")}if(r||(r=t),a.length){let e;if(e=h&&"hamt-sharded-directory"===h.type?await s(f,a[0],l):((e,t)=>{const r=e.Links.find((e=>e.Name===t));return r&&r.Hash})(f,a[0]),!e)throw n(new Error("file does not exist"),"ERR_NOT_FOUND");const t=a.shift();d={cid:e,toResolve:a,name:t,path:`${r}/${t}`}}return{entry:{name:t,path:r,cid:e,node:f,content:o[h.type](e,f,h,r,c,u,l),unixfs:h,depth:u},next:d}}}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4565,{buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){t.exports=function(t,r,n,i){const s=r+t.length;return n>=s||i<r?e.alloc(0):(i>=r&&i<s&&(t=t.slice(0,i-r)),n>=r&&n<s&&(t=t.slice(n-r)),t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4566,{"hamt-sharding/src/bucket":4383,"ipfs-unixfs-importer/src/dir-sharded":4579},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("hamt-sharding/src/bucket"),i=e("ipfs-unixfs-importer/src/dir-sharded"),s=e=>e.toString("16").toUpperCase().padStart(2,"0").substring(0,2),o=async(e,t,r,a)=>{var c,u,l;a||((a={rootBucket:new n({hashFn:i.hashFn}),hamtDepth:1}).lastBucket=a.rootBucket),await(c=e.Links,u=a.lastBucket,l=a.rootBucket,Promise.all(c.map((e=>{if(2===e.Name.length){const t=parseInt(e.Name,16);return u._putObjectAt(t,new n({hashFn:i.hashFn},u,t))}return l.put(e.Name.substring(2),!0)}))));const f=await a.rootBucket._findNewBucketAndPos(t);let h=s(f.pos);const d=(e=>{let t=e.bucket;const r=[];for(;t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()})(f);d.length>a.hamtDepth&&(a.lastBucket=d[a.hamtDepth],h=s(a.lastBucket._posAtParent));const p=e.Links.find((e=>{const r=e.Name.substring(0,2),n=e.Name.substring(2);if(r===h&&(!n||n===t))return!0}));return p?p.Name.substring(2)===t?p.Hash:(a.hamtDepth++,e=await r.get(p.Hash),o(e,t,r,a)):null};t.exports=o}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4567,{"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code");t.exports=(e,t,r)=>{if(t||(t=0),t<0)throw n(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw n(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw n(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}}}}},{package:"3box>ipfs>ipfs-unixfs-exporter"}],[4568,{bl:2067},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("bl");t.exports=async function*(e,t){let r=new n,i=0,s=!1;const o=t.maxChunkSize;for await(const t of e)for(r.append(t),i+=t.length;i>=o;)if(yield r.slice(0,o),s=!0,o===r.length)r=new n,i=0;else{const e=new n;e.append(r.shallowSlice(o)),r=e,i-=o}s&&!i||(yield r.slice(0,i))}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4569,{"../chunker/fixed-size":4568,"../chunker/rabin":4570,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i={fixed:e("../chunker/fixed-size"),rabin:e("../chunker/rabin")};t.exports=(e,t,r)=>{const s=i[e];if(!s)throw n(new Error(`Unknkown chunker named ${e}`),"ERR_UNKNOWN_CHUNKER");return s(t,r)}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4570,{bl:2067,buffer:2132,"err-code":2406,"rabin-wasm":5562},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("bl"),{create:i}=e("rabin-wasm"),s=e("err-code");t.exports=async function*(e,t){const r=o();let n,i,a;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)a=t.avgChunkSize,n=t.minChunkSize,i=t.maxChunkSize;else{if(!t.avgChunkSize)throw s(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");a=t.avgChunkSize,n=a/3,i=a+a/2}if(n<16)throw s(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<n&&(i=n),a<n&&(a=n);const c=Math.floor(Math.log2(a));for await(const s of r(e,{min:n,max:i,bits:c,window:t.window,polynomial:t.polynomial}))yield s};const o=()=>async function*(e,t){const s=await i(t.bits,t.min,t.max,t.window),o=new n;let a=[];for await(const t of e){o.append(t),a.push(t);const e=s.fingerprint(r.concat(a));a=[];for(let t=0;t<e.length;t++){var c=e[t],u=o.slice(0,c);o.consume(c),yield u}}o.length&&(yield o.slice(0))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4571,{"../utils/persist":4584,"ipfs-unixfs":4586,"ipld-dag-pb":4723},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs"),i=e("../utils/persist"),{DAGNode:s}=e("ipld-dag-pb");t.exports=async(e,t,r)=>{const o=new n("directory"),a=s.create(o.marshal(),[]);return{cid:await i(a,t,r),path:e.path,unixfs:o,node:a}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4572,{"async-iterator-batch":1810},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async-iterator-batch");async function i(e,t,r){const s=[];for await(const i of n(e,r.maxChildrenPerNode))s.push(await t(i));return s.length>1?i(s,t,r):s[0]}t.exports=async function*(e,t,r){yield await i(e,t,r)}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4573,{"async-iterator-batch":1810},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async-iterator-batch");t.exports=async function*(e,t){const r=[];for await(const i of n(e,Infinity))r.push(await t(i));yield r[0]}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4574,{"../../utils/persist":4584,"./balanced":4572,"./flat":4573,"./trickle":4575,"async-iterator-all":1809,"err-code":2406,"ipfs-unixfs":4586,"ipld-dag-pb":4723},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("err-code"),i=e("ipfs-unixfs"),s=e("../../utils/persist"),{DAGNode:o,DAGLink:a}=e("ipld-dag-pb"),c=e("async-iterator-all"),u={flat:e("./flat"),balanced:e("./balanced"),trickle:e("./trickle")};t.exports=async(e,t,r,l)=>{const f=u[l.strategy];if(!f)throw n(new Error(`Unknown importer build strategy name: ${l.strategy}`),"ERR_BAD_STRATEGY");const h=await c(f(async function*(e,t,r){let n,a=-1;for await(const c of e){let e,u;a++,r.progress(c.length);let l={...r};r.rawLeaves?(e=c,l.codec="raw",l.cidVersion=1):(u=new i(r.leafType,c),e=o.create(u.marshal(),[]));const f={cid:await s(e,t,l),unixfs:u,node:e};0!==a?(1===a&&(yield n,n=null),yield f):n=f}n&&(n.single=!0,yield n)}(t,r,l),((e,t,r)=>async function(n){if(1===n.length&&n[0].single&&r.reduceSingleLeafToSelf){const t=n[0];return{cid:t.cid,path:e.path,name:(e.path||"").split("/").pop(),unixfs:t.unixfs,node:t.node}}const c=new i("file"),u=n.filter((e=>!("raw"!==e.cid.codec||!e.node.length)||!(e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs.data.length))).map((e=>"raw"===e.cid.codec?(c.addBlockSize(e.node.length),new a(e.name,e.node.length,e.cid)):(e.unixfs.data?c.addBlockSize(e.unixfs.data.length):c.addBlockSize(e.unixfs.fileSize()),new a(e.name,e.node.size,e.cid)))),l=o.create(c.marshal(),u);return{cid:await s(l,t,r),path:e.path,unixfs:c,node:l,size:l.size}})(e,r,l),l.builderOptions));if(h.length>1)throw n(new Error("expected a maximum of 1 roots and got "+h.length),"ETOOMANYROOTS");return h[0]}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4575,{"async-iterator-batch":1810},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async-iterator-batch");t.exports=function*(e,t,r){yield async function(e,t,r){let o,a=0,c=1,u=o=new s(r.layerRepeat);for await(const s of n(e,r.maxChildrenPerNode))u.isFull()&&(u!==o&&o.addChild(await u.reduce(t)),a&&a%r.layerRepeat==0&&c++,u=new i(c,r.layerRepeat,a),a++),u.append(s);u&&u!==o&&o.addChild(await u.reduce(t));return o.reduce(t)}(e,t,r)};class i{constructor(e,t,r){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))),t(e.data.concat(r))}_findParent(e,t){const r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}class s extends i{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e(this.root.data.concat(this.root.children))}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4576,{"../chunker":4569,"./dir":4571,"./file":4574,"./validate-chunks":4577},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./dir"),i=e("./file"),s=e("../chunker"),o=e("./validate-chunks");t.exports=async function*(e,t,r){for await(const a of e)if(a.path&&("./"===a.path.substring(0,2)&&(r.wrapWithDirectory=!0),a.path=a.path.split("/").filter((e=>e&&"."!==e)).join("/")),a.content){let e=a.content;(e[Symbol.asyncIterator]||e[Symbol.iterator])&&e.length===undefined||(e={[Symbol.iterator]:function*(){yield a.content}});const n=s(r.chunker,o(e),r.chunkerOptions);yield i(a,n,t,r)}else yield n(a,t,r)}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4577,{buffer:2132,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("err-code");t.exports=async function*(e){for await(const t of e){if(t.length===undefined)throw n(new Error("Content was invalid"),"ERR_INVALID_CONTENT");"string"==typeof t||t instanceof String?yield r.from(t,"utf8"):Array.isArray(t)?yield r.from(t):yield t}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4578,{"./dir":4580,"./utils/persist":4584,"ipfs-unixfs":4586,"ipld-dag-pb":4723},function(){with(this)return function(){"use strict";return function(e,t,r){const{DAGLink:n,DAGNode:i}=e("ipld-dag-pb"),s=e("ipfs-unixfs"),o=e("./dir"),a=e("./utils/persist");t.exports=class extends o{constructor(e,t){super(e,t),this._children={}}put(e,t){this.cid=undefined,this.size=undefined,this._children[e]=t}get(e){return this._children[e]}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e,t){const r=Object.keys(this._children),o=[];for(let e=0;e<r.length;e++){let i=this._children[r[e]];if("function"==typeof i.flush)for await(const e of i.flush(i.path,t))i=e,yield i;o.push(new n(r[e],i.node.length||i.node.size,i.cid))}const c=new s("directory");let u=i.create(c.marshal(),o);const l=await a(u,t,this.options);this.cid=l,this.size=u.size,yield{cid:l,unixfs:c,path:e,node:u}}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4579,{"./dir":4580,"./utils/persist":4584,buffer:2132,"deep-extend":2307,"hamt-sharding":4386,"ipfs-unixfs":4586,"ipld-dag-pb":4723,"multihashing-async":5253},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{DAGLink:n,DAGNode:i}=e("ipld-dag-pb"),s=e("ipfs-unixfs"),o=e("multihashing-async"),a=e("./dir"),c=e("./utils/persist"),u=e("hamt-sharding"),l=e("deep-extend"),f=async function(e){const t=(await o(r.from(e,"utf8"),"murmur3-128")).slice(2,10),n=t.length,i=r.alloc(n);for(let e=0;e<n;e++)i[n-e-1]=t[e];return i};f.code=34;const h={hashFn:f};async function*d(e,t,o,a){const l=t._children,f=[];for(let e=0;e<l.length;e++){const t=l.get(e);if(!t)continue;const r=e.toString(16).toUpperCase().padStart(2,"0");if(u.isBucket(t)){let e;for await(const r of await d("",t,o,a))e=r;f.push(await new n(r,e.node.size,e.cid))}else if("function"==typeof t.value.flush){const e=t.value;let i;for await(const t of e.flush(e.path,o))i=t,yield i;const s=r+t.key;f.push(new n(s,i.node.size,i.cid))}else{const e=t.value;if(!e.node){if(!e.cid)continue;e.node=await o.get(e.cid)}const i=r+t.key,s=e.node.length||e.node.size||e.node.Size;f.push(await new n(i,s,e.cid))}}const h=r.from(l.bitField().reverse()),p=new s("hamt-sharded-directory",h);p.fanout=t.tableSize(),p.hashType=a.hashFn.code;const g=i.create(p.marshal(),f),b=await c(g,o,a);yield{cid:b,node:g,unixfs:p,path:e}}t.exports=class extends a{constructor(e,t){super(e,t=l({},h,t)),this._bucket=u(t)}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e,t){for await(const r of d(e,this._bucket,t,this.options))yield r}},t.exports.hashFn=f}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4580,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(e,t){this.options=t||{},Object.assign(this,e)}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4581,{"./dir-sharded":4579},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./dir-sharded");t.exports=async function e(t,r,i,s){let o=r;r.flat&&r.directChildrenCount()>=i&&(o=await async function(e,t){const r=new n({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1},t);for await(const{key:t,child:n}of e.eachChildSeries())await r.put(t,n);return r}(r,s));const a=o.parent;return a&&(o!==r&&(t&&(t.parent=o),await a.put(o.parentKey,o)),a)?e(o,a,i,s):o}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4582,{"./dag-builder":4576,"./tree-builder":4583,multihashes:5250,superstruct:5918},function(){with(this)return function(){"use strict";return function(e,t,r){const{superstruct:n}=e("superstruct"),i=e("./dag-builder"),s=e("./tree-builder"),o=e("multihashes"),a=n({types:{codec:e=>["dag-pb","dag-cbor","raw"].includes(e),hashAlg:e=>Object.keys(o.names).includes(e),leafType:e=>["file","raw"].includes(e)}}),c=a({minChunkSize:"number?",maxChunkSize:"number?",avgChunkSize:"number?",window:"number?",polynomial:"number?"},{maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804}),u=a({maxChildrenPerNode:"number?",layerRepeat:"number?"},{maxChildrenPerNode:174,layerRepeat:4}),l=a({chunker:a.enum(["fixed","rabin"]),rawLeaves:"boolean?",hashOnly:"boolean?",strategy:a.enum(["balanced","flat","trickle"]),reduceSingleLeafToSelf:"boolean?",codec:"codec?",format:"codec?",hashAlg:"hashAlg?",leafType:"leafType?",cidVersion:"number?",progress:"function?",wrapWithDirectory:"boolean?",shardSplitThreshold:"number?",onlyHash:"boolean?",chunkerOptions:c,builderOptions:u,wrap:"boolean?",pin:"boolean?",recursive:"boolean?",ignore:"array?",hidden:"boolean?",preload:"boolean?"},{chunker:"fixed",strategy:"balanced",rawLeaves:!1,reduceSingleLeafToSelf:!0,codec:"dag-pb",hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3});t.exports=async function*(e,t,r={}){const n=l(r);r.cidVersion>0&&r.rawLeaves===undefined&&(n.rawLeaves=!0),r.hashAlg!==undefined&&r.rawLeaves===undefined&&(n.rawLeaves=!0),"trickle"===r.strategy&&(n.leafType="raw",n.reduceSingleLeafToSelf=!1),r.format&&(r.codec=r.format);for await(const r of s(i(e,t,n),t,n))yield{cid:r.cid,path:r.path,unixfs:r.unixfs,size:r.size}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4583,{"./dir":4580,"./dir-flat":4578,"./flat-to-shard":4581,"./utils/to-path-components":4585,"async-iterator-first":1811,"err-code":2406},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./dir-flat"),i=e("./flat-to-shard"),s=e("./dir"),o=e("./utils/to-path-components"),a=e("err-code"),c=e("async-iterator-first");async function u(e,t,r){const a=o(e.path||""),c=a.length-1;let u=t,l="";for(let o=0;o<a.length;o++){const f=a[o];l+=`${l?"/":""}${f}`;const h=o===c;if(u.dirty=!0,u.cid=null,u.size=null,h)await u.put(f,e),t=await i(null,u,r.shardSplitThreshold,r);else{let e=await u.get(f);e&&e instanceof s||(e=new n({dir:!0,parent:u,parentKey:f,path:l,dirty:!0,flat:!0},r)),await u.put(f,e),u=e}}return t}t.exports=async function*(e,t,r){let i=new n({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const t of e)i=await u(t,i,r),yield t;if(i){if(!r.wrapWithDirectory){if(i.childCount()>1)throw a(new Error("detected more than one root"),"ERR_MORE_THAN_ONE_ROOT");const e=await c(i.eachChildSeries());if(!e)return;i=e.child}if(!i.dir)return;for await(const e of i.flush(i.path,t))yield e}}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4584,{multicodec:5235,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multihashes"),i=e("multicodec");t.exports=(e,t,r)=>{!r.codec&&e.length&&(r.cidVersion=1,r.codec="raw"),isNaN(r.hashAlg)&&(r.hashAlg=n.names[r.hashAlg]),r.hashAlg!==n.names["sha2-256"]&&(r.cidVersion=1),r.format&&(r.codec=r.format);const s=i[r.codec.toUpperCase().replace(/-/g,"_")];return t.put(e,s,r)}}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4585,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}}},{package:"3box>ipfs>ipfs-unixfs-importer"}],[4586,{"./unixfs.proto":4587,protons:5450},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("protons")(e("./unixfs.proto")).Data,i=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],s=["directory","hamt-sharded-directory"];function o(e,t){if(!(this instanceof o))return new o(e,t);if(-1===i.indexOf(e))throw new Error("Type: "+e+" is not valid");this.type=e,this.data=t,this.blockSizes=[],this.addBlockSize=e=>{this.blockSizes.push(e)},this.removeBlockSize=e=>{this.blockSizes.splice(e,1)},this.fileSize=()=>{if(s.indexOf(this.type)>=0)return undefined;let e=0;return this.blockSizes.forEach((t=>{e+=t})),t&&(e+=t.length),e},this.marshal=()=>{let e;switch(this.type){case"raw":e=n.DataType.Raw;break;case"directory":e=n.DataType.Directory;break;case"file":e=n.DataType.File;break;case"metadata":e=n.DataType.Metadata;break;case"symlink":e=n.DataType.Symlink;break;case"hamt-sharded-directory":e=n.DataType.HAMTShard;break;default:throw new Error(`Unkown type: "${this.type}"`)}let t=this.fileSize(),r=this.data;this.data&&this.data.length||(r=undefined);let i=this.blockSizes;return this.blockSizes&&this.blockSizes.length||(i=undefined),n.encode({Type:e,Data:r,filesize:t,blocksizes:i,hashType:this.hashType,fanout:this.fanout})}}o.unmarshal=e=>{const t=n.decode(e);t.Data||(t.Data=undefined);const r=new o(i[t.Type],t.Data);return r.blockSizes=t.blocksizes,r},t.exports=o}}},{package:"3box>ipfs>ipfs-unixfs"}],[4587,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="message Data {\n  enum DataType {\n    Raw = 0;\n    Directory = 1;\n    File = 2;\n    Metadata = 3;\n    Symlink = 4;\n    HAMTShard = 5;\n  }\n\n  required DataType Type = 1;\n  optional bytes Data = 2;\n  optional uint64 filesize = 3;\n  repeated uint64 blocksizes = 4;\n\n  optional uint64 hashType = 5;\n  optional uint64 fanout = 6;\n}\n\nmessage Metadata {\n  optional string MimeType = 1;\n}"}}},{package:"3box>ipfs>ipfs-unixfs"}],[4588,{},function(){with(this)return function(){"use strict";return function(e,t,r){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}}}},{package:"3box>ipfs>ipfs-utils>is-buffer"}],[4589,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4590,{"./_stream_readable":4592,"./_stream_writable":4594,_process:5430,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4591,{"./_stream_transform":4593,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4592,{"../errors":4589,"./_stream_duplex":4590,"./internal/streams/async_iterator":4595,"./internal/streams/buffer_list":4596,"./internal/streams/destroy":4597,"./internal/streams/from":4599,"./internal/streams/state":4601,"./internal/streams/stream":4602,_process:5430,buffer:2132,events:2133,inherits:4453,"string_decoder/":5916,util:2131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=x,x.ReadableState=E;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,b=e("../errors").codes,m=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(x,s);var k=p.errorOrDestroy,v=["error","close","destroy","pause","resume"];function E(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function x(t){if(n=n||e("./_stream_duplex"),!(this instanceof x))return new x(t);var r=this instanceof n;this._readableState=new E(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function S(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)k(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?k(e,new w):R(e,u,t,!0);else if(u.ended)k(e,new y);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?R(e,u,t,!1):D(e,u)):R(e,u,t,!1)}else n||(u.reading=!1,D(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),D(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),S(this,e,t,!1,r)},x.prototype.unshift=function(e){return S(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function N(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,C(e)}function D(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){c("readable nexttick read 0"),e.read(0)}function B(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(z,t,e))}function z(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}x.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):N(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(r,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},x.prototype._read=function(e){k(this,new _("_read()"))},x.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:b;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",h),f=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,C(e))}}(n);e.on("drain",l);var f=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!f&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function d(t){c("onerror",t),b(),e.removeListener("error",d),0===i(e,"error")&&k(e,t)}function p(){e.removeListener("finish",g),b()}function g(){c("onfinish"),e.removeListener("close",p),b()}function b(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},x.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?N(this):i.reading||r.nextTick(P,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(L,this),n},x.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(L,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(B,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<v.length;s++)e.on(v[s],this.emit.bind(this,v[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=j,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(x,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4593,{"../errors":4589,"./_stream_duplex":4590,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4594,{"../errors":4589,"./_stream_duplex":4590,"./internal/streams/destroy":4597,"./internal/streams/state":4601,"./internal/streams/stream":4602,_process:5430,buffer:2132,inherits:4453,"util-deprecate":6019},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=x,x.WritableState=E;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,b=h.ERR_STREAM_CANNOT_PIPE,m=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function v(){}function E(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(O,e,t),e._writableState.errorEmitted=!0,k(e,i)):(s(i),e._writableState.errorEmitted=!0,k(e,i),O(e,t))}(e,n,i,t,s);else{var o=I(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(R,e,n,o,s):R(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function x(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(x,this))return new x(t);this._writableState=new E(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function S(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function R(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,S(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,f=r.callback;if(S(e,t,!1,t.objectMode?1:u.length,u,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(N,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(x,o),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===x&&(e&&e._writableState instanceof E)}})):u=function(e){return e instanceof this},x.prototype.pipe=function(){k(this,new b)},x.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=v),s.ending?function(e,t){var n=new _;k(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new y:"string"==typeof n||t.objectMode||(s=new d("chunk",["string","Buffer"],n)),!s||(k(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=l.destroy,x.prototype._undestroy=l.undestroy,x.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4595,{"./end-of-stream":4598,_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[o]=null,e[a]=null,t(d(r,!1)))}}function g(e){r.nextTick(p,e)}var b=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(d(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(d(undefined,!0)):t[f](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(d(s,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(undefined,!0))}))}))})),n),b);t.exports=function(e){var t,r=Object.create(m,(i(t={},h,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[o]=null,r[a]=null,e(d(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(d(undefined,!0))),r[u]=!0})),e.on("readable",g.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4596,{buffer:2132,util:2131},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,u;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),u&&s(t,u),e}()}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4597,{_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4598,{"../../../errors":4589},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,f=!0,a||s.call(t)},d=function(e){s.call(t,e)},p=function(){var e;return o&&!f?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4599,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[46,{"@babel/runtime/helpers/interopRequireDefault":202,loglevel:5198,"webextension-polyfill":6161},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({location:e,registerOnboarding:t}){return async function(r,n,o,a){try{if("wallet_registerOnboarding"!==r.method)return void o();r.tabId&&r.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,r.tabId):i.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),n.result=!0,a()}catch(e){a(e)}}};var i=n(e("loglevel")),s=n(e("webextension-polyfill"))}}},{package:"$root$"}],[4600,{"../../../errors":4589,"./end-of-stream":4598},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(u),s||(o.forEach(u),i(n))}))}));return t.reduce(l)}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4601,{"../../../errors":4589},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4602,{events:2133},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4603,{"./lib/_stream_duplex.js":4590,"./lib/_stream_passthrough.js":4591,"./lib/_stream_readable.js":4592,"./lib/_stream_transform.js":4593,"./lib/_stream_writable.js":4594,"./lib/internal/streams/end-of-stream.js":4598,"./lib/internal/streams/pipeline.js":4600},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"3box>ipfs>ipfs-utils>readable-stream"}],[4604,{"is-buffer":4588,"is-pull-stream":4751,"is-stream":4754,"kind-of":4803},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("kind-of"),i=e("is-stream"),{isSource:s}=e("is-pull-stream"),o=e("is-buffer");t.exports=e=>{const t=e=>o(e)||i.readable(e)||s(e)||"file"===n(e),r=e=>t(e)||(e=>"object"==typeof e&&(e.content?t(e.content):Boolean(e.path)&&"string"==typeof e.path))(e);if(r(e)||Array.isArray(e)&&e.every(r))return!0;throw new Error(`Input not supported. Expected Buffer|ReadableStream|PullStream|File|Array<Object> got ${n(e)}. Check the documentation for more info https://github.com/ipfs/interface-js-ipfs-core/blob/master/SPEC/FILES.md#add`)}}}},{package:"3box>ipfs>ipfs-utils"}],[4605,{"../supports":4606,"readable-stream":4603},function(){with(this)return function(){"use strict";return function(e,t,r){const{Readable:n}=e("readable-stream"),{supportsFileReader:i}=e("../supports");t.exports=(e,t)=>{if(!i)throw new Error("FileReader DOM API is not supported.");return new class extends n{constructor(e,t={}){super(t),this.file=e,this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576,this.fileReader=new self.FileReader(e),this.fileReader.onloadend=e=>{const t=e.target.result;0===t.byteLength&&this.push(null),this.push(new Uint8Array(t))},this.fileReader.onerror=e=>this.destroy(e)}_read(t){const r=this.offset+this.chunkSize,n=e.slice(this.offset,r);this.fileReader.readAsArrayBuffer(n),this.offset=r}}(e,t)}}}},{package:"3box>ipfs>ipfs-utils"}],[4606,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={supportsFileReader:"undefined"!=typeof self&&"FileReader"in self}}}},{package:"3box>ipfs>ipfs-utils"}],[4607,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=u-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function b(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function m(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function _(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,k,v,E,x,S,R,A,I,N,O=H.prototype={constructor:H,toString:null,valueOf:null},D=new H(1),T=20,L=4,P=-7,B=21,C=-1e7,j=1e7,M=!1,z=1,F=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz";function H(e,t){var r,i,o,c,f,h,d,p,g=this;if(!(g instanceof H))return new H(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>j?g.c=g.e=null:e.e<C?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,f=e;f>=10;f/=10,c++);return void(c>j?g.c=g.e=null:(g.e=c,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return v(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(f=p.search(/e/i))>0?(c<0&&(c=f),c+=+p.slice(f+1),p=p.substring(0,f)):c<0&&(c=p.length)}else{if(m(t,2,$.length,"Base"),10==t)return K(g=new H(e),T+g.e+1,L);if(p=String(e),h="number"==typeof e){if(0*e!=0)return v(g,p,h,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,H.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=$.slice(0,t),c=f=0,d=p.length;f<d;f++)if(r.indexOf(i=p.charAt(f))<0){if("."==i){if(f>c){c=d;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,f=-1,c=0;continue}return v(g,String(e),h,t)}h=!1,(c=(p=k(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(f=0;48===p.charCodeAt(f);f++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(f,++d)){if(d-=f,h&&H.DEBUG&&d>15&&(e>l||e!==s(e)))throw Error(a+g.s*e);if((c=c-f-1)>j)g.c=g.e=null;else if(c<C)g.c=[g.e=0];else{if(g.e=c,g.c=[],f=(c+1)%u,c<0&&(f+=u),f<d){for(f&&g.c.push(+p.slice(0,f)),d-=u;f<d;)g.c.push(+p.slice(f,f+=u));f=u-(p=p.slice(f)).length}else f-=d;for(;f--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function V(e,t,r,n){var i,s,o,a,c;if(null==r?r=L:m(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=g(e.c),c=1==n||2==n&&(o<=P||o>=B)?_(c,o):w(c,o,"0");else if(s=(e=K(new H(e),t,r)).e,a=(c=g(e.c)).length,1==n||2==n&&(t<=s||s<=P)){for(;a<t;c+="0",a++);c=_(c,s)}else if(t-=o,c=w(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=s-a)>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function q(e,t){for(var r,n=1,i=new H(e[0]);n<e.length;n++){if(!(r=new H(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function G(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*u-1)>j?e.c=e.e=null:r<C?e.c=[e.e=0]:(e.e=r,e.c=t),e}function K(e,t,r,n){var o,a,l,h,d,p,g,b=e.c,m=f;if(b){e:{for(o=1,h=b[0];h>=10;h/=10,o++);if((a=t-o)<0)a+=u,l=t,g=(d=b[p=0])/m[o-l-1]%10|0;else if((p=i((a+1)/u))>=b.length){if(!n)break e;for(;b.length<=p;b.push(0));d=g=0,o=1,l=(a%=u)-u+1}else{for(d=h=b[p],o=1;h>=10;h/=10,o++);g=(l=(a%=u)-u+o)<0?0:d/m[o-l-1]%10|0}if(n=n||t<0||null!=b[p+1]||(l<0?d:d%m[o-l-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?l>0?d/m[o-l]:0:b[p-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,n?(t-=e.e+1,b[0]=m[(u-t%u)%u],e.e=-t||0):b[0]=e.e=0,e;if(0==a?(b.length=p,h=1,p--):(b.length=p+1,h=m[u-a],b[p]=l>0?s(d/m[o-l]%m[l])*h:0),n)for(;;){if(0==p){for(a=1,l=b[0];l>=10;l/=10,a++);for(l=b[0]+=h,h=1;l>=10;l/=10,h++);a!=h&&(e.e++,b[0]==c&&(b[0]=1));break}if(b[p]+=h,b[p]!=c)break;b[p--]=0,h=1}for(a=b.length;0===b[--a];b.pop());}e.e>j?e.c=e.e=null:e.e<C&&(e.c=[e.e=0])}return e}function W(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=P||r>=B?_(t,r):w(t,r,"0"),e.s<0?"-"+t:t)}return H.clone=e,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(r=e[t],0,d,t),T=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(r=e[t],0,8,t),L=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(m(r[0],-d,0,t),m(r[1],0,d,t),P=r[0],B=r[1]):(m(r,-d,d,t),P=-(B=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)m(r[0],-d,-1,t),m(r[1],1,d,t),C=r[0],j=r[1];else{if(m(r,-d,d,t),!r)throw Error(o+t+" cannot be zero: "+r);C=-(j=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!r,Error(o+"crypto unavailable");M=r}else M=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(r=e[t],0,9,t),z=r),e.hasOwnProperty(t="POW_PRECISION")&&(m(r=e[t],0,d,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);U=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);$=r}}return{DECIMAL_PLACES:T,ROUNDING_MODE:L,EXPONENTIAL_AT:[P,B],RANGE:[C,j],CRYPTO:M,MODULO_MODE:z,POW_PRECISION:F,FORMAT:U,ALPHABET:$}},H.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!H.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-d&&i<=d&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%u)<1&&(t+=u),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},H.maximum=H.max=function(){return q(arguments,O.lt)},H.minimum=H.min=function(){return q(arguments,O.gt)},H.random=(E=9007199254740992,x=Math.random()*E&2097151?function(){return s(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,c,l=0,h=[],p=new H(D);if(null==e?e=T:m(e,0,d),a=i(e/u),M)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(h.push(c%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw M=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(h.push(c%1e14),l+=7);l=a/7}if(!M)for(;l<a;)(c=x())<9e15&&(h[l++]=c%1e14);for(a=h[--l],e%=u,a&&e&&(c=f[u-e],h[l]=s(a/c)*c);0===h[l];h.pop(),l--);if(l<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=u);for(l=1,c=h[0];c>=10;c/=10,l++);l<u&&(n-=u-l)}return p.e=n,p.c=h,p}),H.sum=function(){for(var e=1,t=arguments,r=new H(t[0]);e<t.length;)r=r.plus(t[e++]);return r},k=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,f,h,d,p,b,m=n.indexOf("."),y=T,_=L;for(m>=0&&(f=F,F=0,n=n.replace(".",""),d=(b=new H(i)).pow(n.length-m),F=f,b.c=t(w(g(d.c),d.e,"0"),10,s,e),b.e=b.c.length),l=f=(p=t(n,i,s,a?(c=$,e):(c=e,$))).length;0==p[--f];p.pop());if(!p[0])return c.charAt(0);if(m<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,b,y,_,s)).c,h=d.r,l=d.e),m=p[u=l+y+1],f=s/2,h=h||u<0||null!=p[u+1],h=_<4?(null!=m||h)&&(0==_||_==(d.s<0?3:2)):m>f||m==f&&(4==_||h||6==_&&1&p[u-1]||_==(d.s<0?8:7)),u<1||!p[0])n=h?w(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,h)for(--s;++p[--u]>s;)p[u]=0,u||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(m=0,n="";m<=f;n+=c.charAt(p[m++]));n=w(n,l,c.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%h,l=t/h|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%h)+(n=l*s+(o=e[c]/h|0)*u)%h*h+a)/r|0)+(n/h|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var f,h,d,g,b,m,y,_,w,k,v,E,x,S,R,A,I,N=n.s==i.s?1:-1,O=n.c,D=i.c;if(!(O&&O[0]&&D&&D[0]))return new H(n.s&&i.s&&(O?!D||O[0]!=D[0]:D)?O&&0==O[0]||!D?0*N:N/0:NaN);for(w=(_=new H(N)).c=[],N=o+(h=n.e-i.e)+1,l||(l=c,h=p(n.e/u)-p(i.e/u),N=N/u|0),d=0;D[d]==(O[d]||0);d++);if(D[d]>(O[d]||0)&&h--,N<0)w.push(1),g=!0;else{for(S=O.length,A=D.length,d=0,N+=2,(b=s(l/(D[0]+1)))>1&&(D=e(D,b,l),O=e(O,b,l),A=D.length,S=O.length),x=A,v=(k=O.slice(0,A)).length;v<A;k[v++]=0);I=D.slice(),I=[0].concat(I),R=D[0],D[1]>=l/2&&R++;do{if(b=0,(f=t(D,k,A,v))<0){if(E=k[0],A!=v&&(E=E*l+(k[1]||0)),(b=s(E/R))>1)for(b>=l&&(b=l-1),y=(m=e(D,b,l)).length,v=k.length;1==t(m,k,y,v);)b--,r(m,A<y?I:D,y,l),y=m.length,f=1;else 0==b&&(f=b=1),y=(m=D.slice()).length;if(y<v&&(m=[0].concat(m)),r(k,m,v,l),v=k.length,-1==f)for(;t(D,k,A,v)<1;)b++,r(k,A<v?I:D,v,l),v=k.length}else 0===f&&(b++,k=[0]);w[d++]=b,k[0]?k[v++]=O[x]||0:(k=[O[x]],v=1)}while((x++<S||null!=k[0])&&N--);g=null!=k[0],w[0]||w.splice(0,1)}if(l==c){for(d=1,N=w[0];N>=10;N/=10,d++);K(_,o+(_.e=d+h*u-1)+1,a,g)}else _.e=h,_.r=+g;return _}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,A=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,v=function(e,t,r,n){var i,s=r?t:t.replace(N,"");if(I.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(S,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(R,"$1").replace(A,"0.$1")),t!=s))return new H(s,i);if(H.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},O.absoluteValue=O.abs=function(){var e=new H(this);return e.s<0&&(e.s=1),e},O.comparedTo=function(e,t){return b(this,new H(e,t))},O.decimalPlaces=O.dp=function(e,t){var r,n,i,s=this;if(null!=e)return m(e,0,d),null==t?t=L:m(t,0,8),K(new H(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-p(this.e/u))*u,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},O.dividedBy=O.div=function(e,t){return r(this,new H(e,t),T,L)},O.dividedToIntegerBy=O.idiv=function(e,t){return r(this,new H(e,t),0,1)},O.exponentiatedBy=O.pow=function(e,t){var r,n,a,c,l,f,h,d,p=this;if((e=new H(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+W(e));if(null!=t&&(t=new H(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new H(Math.pow(+W(p),l?2-y(e):+W(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new H(NaN);(n=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&y(e)?-0:0,p.e>-1&&(c=1/c),new H(f?1/c:c);F&&(c=i(F/u+2))}for(l?(r=new H(.5),f&&(e.s=1),h=y(e)):h=(a=Math.abs(+W(e)))%2,d=new H(D);;){if(h){if(!(d=d.times(p)).c)break;c?d.c.length>c&&(d.c.length=c):n&&(d=d.mod(t))}if(a){if(0===(a=s(a/2)))break;h=a%2}else if(K(e=e.times(r),e.e+1,1),e.e>14)h=y(e);else{if(0===(a=+W(e)))break;h=a%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?d:(f&&(d=D.div(d)),t?d.mod(t):c?K(d,F,L,undefined):d)},O.integerValue=function(e){var t=new H(this);return null==e?e=L:m(e,0,8),K(t,t.e+1,e)},O.isEqualTo=O.eq=function(e,t){return 0===b(this,new H(e,t))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(e,t){return b(this,new H(e,t))>0},O.isGreaterThanOrEqualTo=O.gte=function(e,t){return 1===(t=b(this,new H(e,t)))||0===t},O.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},O.isLessThan=O.lt=function(e,t){return b(this,new H(e,t))<0},O.isLessThanOrEqualTo=O.lte=function(e,t){return-1===(t=b(this,new H(e,t)))||0===t},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new H(e,t)).s,!a||!t)return new H(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/u,f=e.e/u,h=o.c,d=e.c;if(!l||!f){if(!h||!d)return h?(e.s=-t,e):new H(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new H(h[0]?o:3==L?-0:0)}if(l=p(l),f=p(f),h=h.slice(),a=l-f){for((s=a<0)?(a=-a,i=h):(f=l,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=h.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(h[t]!=d[t]){s=h[t]<d[t];break}if(s&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=c-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=c}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--f);return h[0]?G(e,h,f):(e.s=3==L?-1:1,e.c=[e.e=0],e)},O.modulo=O.mod=function(e,t){var n,i,s=this;return e=new H(e,t),!s.c||!e.s||e.c&&!e.c[0]?new H(NaN):!e.c||s.c&&!s.c[0]?new H(s):(9==z?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,z),(e=s.minus(n.times(e))).c[0]||1!=z||(e.s=s.s),e)},O.multipliedBy=O.times=function(e,t){var r,n,i,s,o,a,l,f,d,g,b,m,y,_,w,k=this,v=k.c,E=(e=new H(e,t)).c;if(!(v&&E&&v[0]&&E[0]))return!k.s||!e.s||v&&!v[0]&&!E||E&&!E[0]&&!v?e.c=e.e=e.s=null:(e.s*=k.s,v&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(k.e/u)+p(e.e/u),e.s*=k.s,(l=v.length)<(g=E.length)&&(y=v,v=E,E=y,i=l,l=g,g=i),i=l+g,y=[];i--;y.push(0));for(_=c,w=h,i=g;--i>=0;){for(r=0,b=E[i]%w,m=E[i]/w|0,s=i+(o=l);s>i;)r=((f=b*(f=v[--o]%w)+(a=m*f+(d=v[o]/w|0)*b)%w*w+y[s]+r)/_|0)+(a/w|0)+m*d,y[s--]=f%_;y[s]=r}return r?++n:y.splice(0,1),G(e,y,n)},O.negated=function(){var e=new H(this);return e.s=-e.s||null,e},O.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new H(e,t)).s,!i||!t)return new H(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/u,o=e.e/u,a=n.c,l=e.c;if(!s||!o){if(!a||!l)return new H(i/0);if(!a[0]||!l[0])return l[0]?e:new H(a[0]?n:0*i)}if(s=p(s),o=p(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/c|0,a[t]=c===a[t]?0:a[t]%c;return i&&(a=[i].concat(a),++o),G(e,a,o)},O.precision=O.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return m(e,1,d),null==t?t=L:m(t,0,8),K(new H(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*u+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},O.shiftedBy=function(e){return m(e,-9007199254740991,l),this.times("1e"+e)},O.squareRoot=O.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=T+4,f=new H("0.5");if(1!==c||!a||!a[0])return new H(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(c=Math.sqrt(+W(o)))||c==1/0?(((t=g(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),n=new H(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new H(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),g(s.c).slice(0,c)===(t=g(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(K(n,n.e+T+2,1),e=!n.times(n).eq(o));break}if(!i&&(K(s,s.e+T+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return K(n,n.e+T+1,L,e)},O.toExponential=function(e,t){return null!=e&&(m(e,0,d),e++),V(this,e,t,1)},O.toFixed=function(e,t){return null!=e&&(m(e,0,d),e=e+this.e+1),V(this,e,t)},O.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=a[0],h=a[1],d=i.s<0,p=d?f.slice(1):f,g=p.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,f=p.substr(0,s);s<g;s+=c)f+=l+p.substr(s,c);u>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},O.toFraction=function(e){var t,n,i,s,a,c,l,h,d,p,b,m,y=this,_=y.c;if(null!=e&&(!(l=new H(e)).isInteger()&&(l.c||1!==l.s)||l.lt(D)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+W(l));if(!_)return new H(y);for(t=new H(D),d=n=new H(D),i=h=new H(D),m=g(_),a=t.e=m.length-y.e-1,t.c[0]=f[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?a>0?t:d:l,c=j,j=1/0,l=new H(m),h.c[0]=0;p=r(l,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,d=h.plus(p.times(s=d)),h=s,t=l.minus(p.times(s=t)),l=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(d)),n=n.plus(s.times(i)),h.s=d.s=y.s,b=r(d,i,a*=2,L).minus(y).abs().comparedTo(r(h,n,a,L).minus(y).abs())<1?[d,i]:[h,n],j=c,b},O.toNumber=function(){return+W(this)},O.toPrecision=function(e,t){return null!=e&&m(e,1,d),V(this,e,t,2)},O.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=P||i>=B?_(g(r.c),i):w(g(r.c),i,"0"):10===e?t=w(g((r=K(new H(r),T+i+1,L)).c),r.e,"0"):(m(e,2,$.length,"Base"),t=k(w(g(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},O.valueOf=O.toJSON=function(){return W(this)},O._isBigNumber=!0,null!=t&&H.set(t),H}(),r.default=r.BigNumber=r,"function"==typeof define&&define.amd?define((function(){return r})):void 0!==t&&t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(this)}}},{package:"3box>ipfs>bignumber.js"}],[4608,{"./utils":4612,blakejs:2085,buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("blakejs"),i=e("./utils").toCallback,s={init:n.blake2bInit,update:n.blake2bUpdate,digest:n.blake2bFinal},o={init:n.blake2sInit,update:n.blake2sUpdate,digest:n.blake2sFinal},a=(e,t)=>i((n=>{const i=t.init(e,null);return t.update(i,n),r.from(t.digest(i))}));t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,s);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>multihashing-async"}],[4609,{buffer:2132,nodeify:5310},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("nodeify"),i=function(){if(self.crypto)return self.crypto.subtle||self.crypto.webkitSubtle;if(self.msCrypto)return self.msCrypto.subtle}();function s(e){if(!i)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return(t,s)=>{const o=i.digest({name:e},t);if("function"!=typeof o.then)return o.onerror=()=>{s(new Error(`hashing data using ${e}`))},void(o.oncomplete=e=>{s(null,e.target.result)});n(o.then((e=>r.from(new Uint8Array(e)))),s)}}t.exports={sha1:function(e,t){s("SHA-1")(e,t)},sha2256:function(e,t){s("SHA-256")(e,t)},sha2512:function(e,t){s("SHA-512")(e,t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>multihashing-async"}],[4610,{"./blake":4608,"./crypto-sha1-2":4609,"./utils":4612,buffer:2132,"js-sha3":4767,murmurhash3js:5270},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("js-sha3"),i=e("murmurhash3js"),s=e("./utils"),o=e("./crypto-sha1-2"),a=s.toCallback,c=s.toBuf,u=s.fromString,l=s.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(n.sha3_512)),sha3384:a(c(n.sha3_384)),sha3256:a(c(n.sha3_256)),sha3224:a(c(n.sha3_224)),shake128:a(c(n.shake_128,128)),shake256:a(c(n.shake_256,256)),keccak224:a(c(n.keccak_224)),keccak256:a(c(n.keccak_256)),keccak384:a(c(n.keccak_384)),keccak512:a(c(n.keccak_512)),murmur3128:a(c(u(i.x64.hash128))),murmur332:a(l(u(i.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,n)=>{e&&t(e),o.sha2256(r.from(n),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>multihashing-async"}],[4611,{"./crypto":4610,buffer:2132,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("multihashes"),i=e("./crypto");function s(e,t,r,i){if("function"==typeof r&&(i=r,r=undefined),!i)throw new Error("Missing callback");s.digest(e,t,r,((e,s)=>{if(e)return i(e);i(null,n.encode(s,t,r))}))}t.exports=s,s.Buffer=r,s.multihash=n,s.digest=function(e,t,r,n){if("function"==typeof r&&(n=r,r=undefined),!n)throw new Error("Missing callback");let i,o=n;r&&(o=(e,t)=>{if(e)return n(e);n(null,t.slice(0,r))});try{i=s.createHash(t)}catch(e){return o(e)}i(e,o)},s.createHash=function(e){if(e=n.coerceCode(e),!s.functions[e])throw new Error("multihash function "+e+" not yet supported");return s.functions[e]},s.functions={17:i.sha1,18:i.sha2256,19:i.sha2512,20:i.sha3512,21:i.sha3384,22:i.sha3256,23:i.sha3224,24:i.shake128,25:i.shake256,26:i.keccak224,27:i.keccak256,28:i.keccak384,29:i.keccak512,34:i.murmur3128,35:i.murmur332,86:i.dblSha2256},i.addBlake(s.functions),s.validate=(e,t,i)=>{s(e,n.decode(t).name,((e,n)=>{if(e)return i(e);i(e,0===r.compare(t,n))}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>multihashing-async"}],[4612,{_process:5430,buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e,t){(function(){r.toCallback=t=>function(r,n){let i;try{i=t(r)}catch(t){return void e.nextTick(n,t)}e.nextTick(n,null,i)},r.toBuf=(e,r)=>n=>{let i=e(n,r);return t.from(i,"hex")},r.fromString=(e,r)=>n=>{const i=t.isBuffer(n)?n.toString():n;return e(i,r)},r.fromNumberTo32BitBuf=(e,r)=>n=>{let i=e(n,r);const s=new Array(4);for(let e=0;e<4;e++)s[e]=255&i,i>>=8;return t.from(s)}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"3box>ipfs>multihashing-async"}],[4613,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"3box>ipfs>readable-stream"}],[4614,{"./_stream_readable":4616,"./_stream_writable":4618,_process:5430,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>readable-stream"}],[4615,{"./_stream_transform":4617,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"3box>ipfs>readable-stream"}],[4616,{"../errors":4613,"./_stream_duplex":4614,"./internal/streams/async_iterator":4619,"./internal/streams/buffer_list":4620,"./internal/streams/destroy":4621,"./internal/streams/from":4623,"./internal/streams/state":4625,"./internal/streams/stream":4626,_process:5430,buffer:2132,events:2133,inherits:4453,"string_decoder/":5916,util:2131},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=x,x.ReadableState=E;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,b=e("../errors").codes,m=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(x,s);var k=p.errorOrDestroy,v=["error","close","destroy","pause","resume"];function E(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function x(t){if(n=n||e("./_stream_duplex"),!(this instanceof x))return new x(t);var r=this instanceof n;this._readableState=new E(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function S(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)k(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?k(e,new w):R(e,u,t,!0);else if(u.ended)k(e,new y);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?R(e,u,t,!1):D(e,u)):R(e,u,t,!1)}else n||(u.reading=!1,D(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),D(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),S(this,e,t,!1,r)},x.prototype.unshift=function(e){return S(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function N(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,C(e)}function D(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){c("readable nexttick read 0"),e.read(0)}function B(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(z,t,e))}function z(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}x.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):N(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(r,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},x.prototype._read=function(e){k(this,new _("_read()"))},x.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:b;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",h),f=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,C(e))}}(n);e.on("drain",l);var f=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!f&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function d(t){c("onerror",t),b(),e.removeListener("error",d),0===i(e,"error")&&k(e,t)}function p(){e.removeListener("finish",g),b()}function g(){c("onfinish"),e.removeListener("close",p),b()}function b(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},x.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?N(this):i.reading||r.nextTick(P,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(L,this),n},x.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(L,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(B,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<v.length;s++)e.on(v[s],this.emit.bind(this,v[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=j,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(x,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>readable-stream"}],[4617,{"../errors":4613,"./_stream_duplex":4614,inherits:4453},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"3box>ipfs>readable-stream"}],[4618,{"../errors":4613,"./_stream_duplex":4614,"./internal/streams/destroy":4621,"./internal/streams/state":4625,"./internal/streams/stream":4626,_process:5430,buffer:2132,inherits:4453,"util-deprecate":6019},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=x,x.WritableState=E;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,b=h.ERR_STREAM_CANNOT_PIPE,m=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function v(){}function E(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(O,e,t),e._writableState.errorEmitted=!0,k(e,i)):(s(i),e._writableState.errorEmitted=!0,k(e,i),O(e,t))}(e,n,i,t,s);else{var o=I(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(R,e,n,o,s):R(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function x(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(x,this))return new x(t);this._writableState=new E(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function S(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function R(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,S(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,f=r.callback;if(S(e,t,!1,t.objectMode?1:u.length,u,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(N,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(x,o),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===x&&(e&&e._writableState instanceof E)}})):u=function(e){return e instanceof this},x.prototype.pipe=function(){k(this,new b)},x.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=v),s.ending?function(e,t){var n=new _;k(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new y:"string"==typeof n||t.objectMode||(s=new d("chunk",["string","Buffer"],n)),!s||(k(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=l.destroy,x.prototype._undestroy=l.undestroy,x.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>readable-stream"}],[4619,{"./end-of-stream":4622,_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[o]=null,e[a]=null,t(d(r,!1)))}}function g(e){r.nextTick(p,e)}var b=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(d(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(d(undefined,!0)):t[f](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(d(s,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(undefined,!0))}))}))})),n),b);t.exports=function(e){var t,r=Object.create(m,(i(t={},h,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[o]=null,r[a]=null,e(d(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(d(undefined,!0))),r[u]=!0})),e.on("readable",g.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>readable-stream"}],[4620,{buffer:2132,util:2131},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,u;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),u&&s(t,u),e}()}}},{package:"3box>ipfs>readable-stream"}],[4621,{_process:5430},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>readable-stream"}],[4622,{"../../../errors":4613},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,f=!0,a||s.call(t)},d=function(e){s.call(t,e)},p=function(){var e;return o&&!f?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"3box>ipfs>readable-stream"}],[4623,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"3box>ipfs>readable-stream"}],[4624,{"../../../errors":4613,"./end-of-stream":4622},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(u),s||(o.forEach(u),i(n))}))}));return t.reduce(l)}}}},{package:"3box>ipfs>readable-stream"}],[4625,{"../../../errors":4613},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"3box>ipfs>readable-stream"}],[4626,{events:2133},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"3box>ipfs>readable-stream"}],[4627,{"./lib/_stream_duplex.js":4614,"./lib/_stream_passthrough.js":4615,"./lib/_stream_readable.js":4616,"./lib/_stream_transform.js":4617,"./lib/_stream_writable.js":4618,"./lib/internal/streams/end-of-stream.js":4622,"./lib/internal/streams/pipeline.js":4624},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"3box>ipfs>readable-stream"}],[4628,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={name:"ipfs",version:"0.36.4",description:"JavaScript implementation of the IPFS specification",keywords:["IPFS"],homepage:"https://js.ipfs.io",bugs:"https://github.com/ipfs/js-ipfs/issues",license:"MIT",leadMaintainer:"Alan Shaw <alan@tableflip.io>",files:["src","dist"],main:"src/core/index.js",browser:{"./src/core/components/init-assets.js":!1,"./src/core/runtime/add-from-fs-nodejs.js":"./src/core/runtime/add-from-fs-browser.js","./src/core/runtime/config-nodejs.js":"./src/core/runtime/config-browser.js","./src/core/runtime/dns-nodejs.js":"./src/core/runtime/dns-browser.js","./src/core/runtime/fetch-nodejs.js":"./src/core/runtime/fetch-browser.js","./src/core/runtime/libp2p-nodejs.js":"./src/core/runtime/libp2p-browser.js","./src/core/runtime/preload-nodejs.js":"./src/core/runtime/preload-browser.js","./src/core/runtime/repo-nodejs.js":"./src/core/runtime/repo-browser.js","./src/core/runtime/ipld-nodejs.js":"./src/core/runtime/ipld-browser.js","./test/utils/create-repo-nodejs.js":"./test/utils/create-repo-browser.js",stream:"readable-stream"},"browser-all-ipld-formats":{"./src/core/runtime/ipld-browser.js":"./src/core/runtime/ipld-browser-all.js"},bin:{jsipfs:"src/cli/bin.js"},repository:"github:ipfs/js-ipfs",scripts:{lint:"aegir lint",build:"aegir build",test:"aegir test","test:node":"aegir test -t node","test:browser":"aegir test -t browser","test:webworker":"aegir test -t webworker","test:node:core":"aegir test -t node -f test/core/**/*.js","test:node:http":"aegir test -t node -f test/http-api/index.js","test:node:gateway":"aegir test -t node -f test/gateway/index.js","test:node:cli":"aegir test -t node -f test/cli/index.js","test:node:interface":"aegir test -t node -f test/core/interface.spec.js","test:bootstrapers":"IPFS_TEST=bootstrapers aegir test -t browser -f test/bootstrapers.js",benchmark:'echo "Error: no benchmarks yet" && exit 1',"benchmark:node":'echo "Error: no benchmarks yet" && exit 1',"benchmark:node:core":'echo "Error: no benchmarks yet" && exit 1',"benchmark:node:http":'echo "Error: no benchmarks yet" && exit 1',"benchmark:browser":'echo "Error: no benchmarks yet" && exit 1',release:"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser"},dependencies:{"@hapi/ammo":"^3.1.0","@hapi/hapi":"^18.3.1","@hapi/joi":"^15.0.1",async:"^2.6.1","async-iterator-all":"^1.0.0","async-iterator-to-pull-stream":"^1.1.0","async-iterator-to-stream":"^1.1.0","base32.js":"~0.1.0","bignumber.js":"^9.0.0","binary-querystring":"~0.1.2",bl:"^3.0.0",boom:"^7.2.0",bs58:"^4.0.1","buffer-peek-stream":"^1.0.1",byteman:"^1.3.5",callbackify:"^1.1.0","cid-tool":"~0.3.0",cids:"~0.7.1","class-is":"^1.1.0","datastore-core":"~0.6.0","datastore-pubsub":"~0.1.1",debug:"^4.1.0",dlv:"^1.1.3","err-code":"^1.1.2","file-type":"^11.1.0",fnv1a:"^1.0.1","fsm-event":"^2.1.0","get-folder-size":"^2.0.0",glob:"^7.1.3","hapi-pino":"^6.0.0","human-to-milliseconds":"^1.0.0","interface-datastore":"~0.6.0","ipfs-bitswap":"~0.24.1","ipfs-block":"~0.8.1","ipfs-block-service":"~0.15.1","ipfs-http-client":"^32.0.0","ipfs-http-response":"~0.3.0","ipfs-mfs":"~0.11.4","ipfs-multipart":"~0.1.0","ipfs-repo":"~0.26.6","ipfs-unixfs":"~0.1.16","ipfs-unixfs-exporter":"~0.37.6","ipfs-unixfs-importer":"~0.39.9","ipfs-utils":"~0.0.3",ipld:"~0.24.1","ipld-bitcoin":"~0.3.0","ipld-dag-cbor":"~0.15.0","ipld-dag-pb":"~0.17.4","ipld-ethereum":"^4.0.0","ipld-git":"~0.5.0","ipld-raw":"^4.0.0","ipld-zcash":"~0.3.0",ipns:"~0.5.2","is-ipfs":"~0.6.1","is-pull-stream":"~0.0.0","is-stream":"^2.0.0","iso-url":"~0.4.6","just-flatten-it":"^2.1.0","just-safe-set":"^2.1.0","kind-of":"^6.0.2",libp2p:"~0.25.3","libp2p-bootstrap":"~0.9.3","libp2p-crypto":"~0.16.0","libp2p-kad-dht":"~0.15.1","libp2p-keychain":"~0.4.1","libp2p-mdns":"~0.12.0","libp2p-record":"~0.6.3","libp2p-secio":"~0.11.0","libp2p-tcp":"~0.13.0","libp2p-webrtc-star":"~0.16.0","libp2p-websocket-star-multi":"~0.4.3","libp2p-websockets":"~0.12.2",lodash:"^4.17.11",mafmt:"^6.0.2","merge-options":"^1.0.1","mime-types":"^2.1.21",mkdirp:"~0.5.1",multiaddr:"^6.0.5","multiaddr-to-uri":"^4.0.1",multibase:"~0.6.0",multicodec:"~0.5.1",multihashes:"~0.4.14","multihashing-async":"~0.6.0","node-fetch":"^2.3.0","peer-book":"~0.9.0","peer-id":"~0.12.0","peer-info":"~0.15.0",progress:"^2.0.1","promisify-es6":"^1.0.3",protons:"^1.0.1","pull-abortable":"^4.1.1","pull-cat":"^1.1.11","pull-defer":"~0.2.3","pull-file":"^1.1.0","pull-mplex":"~0.1.1","pull-ndjson":"~0.1.1","pull-pushable":"^2.2.0","pull-sort":"^1.0.1","pull-stream":"^3.6.9","pull-stream-to-async-iterator":"^1.0.1","pull-stream-to-stream":"^1.3.4","pull-traverse":"^1.0.3","readable-stream":"^3.4.0",receptacle:"^1.3.2",semver:"^6.1.1","stream-to-pull-stream":"^1.7.3",superstruct:"~0.6.0","tar-stream":"^2.0.0",temp:"~0.9.0","update-notifier":"^3.0.0","uri-to-multiaddr":"^3.0.1",varint:"^5.0.0",yargs:"^13.2.4","yargs-promise":"^1.1.0"},devDependencies:{aegir:"^19.0.3",base64url:"^3.0.1",chai:"^4.2.0",delay:"^4.1.0","detect-node":"^2.0.4","dir-compare":"^1.4.0","dirty-chai":"^2.0.1",execa:"^1.0.0","form-data":"^2.3.3",hat:"0.0.3","interface-ipfs-core":"~0.104.0","ipfsd-ctl":"~0.42.0","libp2p-websocket-star":"~0.10.2",ncp:"^2.0.0",qs:"^6.5.2",rimraf:"^2.6.2",sinon:"^7.3.1","stream-to-promise":"^2.2.0"},optionalDependencies:{"prom-client":"^11.1.3","prometheus-gc-stats":"~0.6.0"},engines:{node:">=10.0.0",npm:">=6.0.0"},contributors:["0xflotus <0xflotus@gmail.com>","A_A <21040751+Otto-AA@users.noreply.github.com>","Alan Shaw <alan.shaw@protocol.ai>","Alan Shaw <alan@tableflip.io>","Alex North <alex@alexnorth.me>","Alex Potsides <alex@achingbrain.net>","Andrew Nesbitt <andrewnez@gmail.com>","Andrew de Andrade <andrew@deandrade.com.br>","André Cruz <andremiguelcruz@msn.com>","Arkadiy Kukarkin <parkan@users.noreply.github.com>","Arpit Agarwal <93arpit@gmail.com>","Arpit Agarwal <atvanguard@users.noreply.github.com>","Bernard Mordan <bernard@tableflip.io>","Brian Vander Schaaf <bvs330@gmail.com>","Bruno Zell <bruno.zzell@gmail.com>","CHEVALAY JOSSELIN <josselin54.chevalay@gmail.com>","Caio Gondim <me@caiogondim.com>","Chance Hudson <jchancehud@gmail.com>","Chirag Shinde <chirag-shinde@users.noreply.github.com>","Christian Couder <chriscool@tuxfamily.org>","Dafeng <dfguo.joe@gmail.com>","Dan Ordille <dordille@gmail.com>","Daniel J. O'Quinn <danieljoquinn@gmail.com>","Daniela Borges Matos de Carvalho <alunassertiva@gmail.com>","David Dias <daviddias.p@gmail.com>","David Gilbertson <gilbertson.david@gmail.com>","David da Silva <dasilvacontin@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Dzmitry Das <dbachko@gmail.com>","Enrico Marino <enrico.marino@email.com>","Faheel Ahmad <faheel@live.in>","Felix Yan <felixonmars@archlinux.org>","Francisco Baio Dias <xicombd@gmail.com>","Francisco Baio Dias <francisco@typeform.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Gar <gar+gh@danger.computer>","Georgios Rassias <georassias@gmail.com>","Gorka Ludlow <gorka@aquigorka.com>","Grant Herman <grantlouisherman041@gmail.com>","Greenkeeper <support@greenkeeper.io>","Haad <haadcode@users.noreply.github.com>","Haoliang Yu <haoliangyu@users.noreply.github.com>","Harsh Vakharia <harshjv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Henry Rodrick <moshisushi@gmail.com>","Heo Sangmin <heo@mapiacompany.com>","Hugo Dias <mail@hugodias.me>","Hugo Dias <hugomrdias@gmail.com>","Irakli Gozalishvili <contact@gozala.io>","Jacob Heun <jacobheun@gmail.com>","Jacob Heun <jake@andyet.net>","Jade Meskill <jade.meskill@gmail.com>","Johannes Wikner <johannes.wikner@gmail.com>","Jon Schlinkert <dev@sellside.com>","Jonathan <jkrone@vt.edu>","Jonybang <Jonybange@gmail.com>","João Antunes <j.goncalo.antunes@gmail.com>","João Santos <joaosantos15@users.noreply.github.com>","Kevin Wang <kevin@fossa.io>","Lars Gierth <larsg@systemli.org>","Lukas Drgon <lukas.drgon@gmail.com>","Maciej Krüger <mkg20001@gmail.com>","Marcin Rataj <lidel@lidel.org>","Marius Darila <marius.darila@gmail.com>","Mat Kelly <machawk1@gmail.com>","Michelle Lee <michelle@protocol.ai>","Mikeal Rogers <mikeal.rogers@gmail.com>","Mithgol <getgit@mithgol.ru>","Molly <momack2@users.noreply.github.com>","Mounish Sai <pvsmounish@gmail.com>","My9Bot <34904312+My9Bot@users.noreply.github.com>","Nitin Patel <31539366+niinpatel@users.noreply.github.com>","Nuno Nogueira <nunofmn@gmail.com>","Oli Evans <oli@tableflip.io>","Oskar Nyberg <oskar@oskarnyberg.com>","Pascal Precht <pascal.precht@googlemail.com>","Pau Ramon Revilla <masylum@gmail.com>","Paulo Rodrigues <me@paulogr.com>","Pedro Teixeira <i@pgte.me>","Portia Burton <plburton@gmail.com>","Prabhakar Poudel <yuvrajzohan@gmail.com>","Raoul Millais <raoul@raoulmillais.com>","RasmusErik Voel Jensen <github@solsort.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Rob Brackett <rob@robbrackett.com>","Rod Keys <rod@zokos.com>","Sangwon Hong <qpakzk@gmail.com>","Sid Harder <sideharder@gmail.com>","SidHarder <softwarenavigator@gmail.com>","Stephen Whitmore <stephen.whitmore@gmail.com>","Stephen Whitmore <noffle@users.noreply.github.com>","Steven Allen <steven@stebalien.com>","Terence Pae <terencepae@gmail.com>","Uroš Jurglič <jurglic@gmail.com>","Vasco Santos <vasco.santos@moxy.studio>","Vasco Santos <vasco.santos@ua.pt>","Volker Mische <volker.mische@gmail.com>","Xiao Liang <yxliang01@users.noreply.github.com>","Yahya <ya7yaz@gmail.com>","Yole <yole@ultiledger.io>","bitspill <bitspill+github@bitspill.net>","datafatmunger <jbg@peerparty.org>","dirkmc <dirkmdev@gmail.com>","dirkmc <dirk@mccormick.cx>","greenkeeper[bot] <greenkeeper[bot]@users.noreply.github.com>","haad <haad@headbanggames.com>","jbenet <juan@benet.ai>","jonahweissman <19804455+jonahweissman@users.noreply.github.com>","kevingzhang <kevin.zhang.canada@gmail.com>","kumavis <kumavis@users.noreply.github.com>","nginnever <ginneversource@gmail.com>","npmcdn-to-unpkg-bot <npmcdn-to-unpkg-bot@users.noreply.github.com>","robbsolter <35879806+robbsolter@users.noreply.github.com>","seungwon-kang <ksw3894@gmail.com>","tcme <hi@this-connect.me>","victorbjelkholm <victorbjelkholm@gmail.com>","Łukasz Magiera <magik6k@users.noreply.github.com>","Максим Ильин <negamaxi@gmail.com>"]}}}},{package:"3box>ipfs"}],[4629,{"async/waterfall":1884,"ipfs-repo":4553},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/waterfall"),i=e("ipfs-repo").errors;t.exports=e=>{e.log("booting");const t=e._options,r=t.init,s=t.start;n([t=>{if(!e._repo.closed)return t(null,!0);e._repo.open(((e,r)=>function(e){if(!e)return!1;if(e.code===i.ERR_REPO_NOT_INITIALIZED)return!0;if(e.message.match(/not found/)||e.message.match(/ENOENT/)||e.message.match(/No value/))return!0;return!1}(e)?t(null,!1):e?t(e):void t(null,!0)))},(n,i)=>{if(n)return e.init({repo:e._repo},(e=>{if(e)return i(Object.assign(e,{emitted:!0}));i()}));if(r){const r=Object.assign({bits:2048,pass:e._options.pass},"object"==typeof t.init?t.init:{});return e.init(r,(e=>{if(e)return i(Object.assign(e,{emitted:!0}));i()}))}i()},t=>{if(!s)return t();e.start((e=>{if(e)return t(Object.assign(e,{emitted:!0}));t()}))}],(t=>{t?t.emitted||e.emit("error",t):(e.log("booted"),e.emit("ready"))}))}}}},{package:"3box>ipfs"}],[4630,{"../utils":4708,"async/setImmediate":1878,"bignumber.js":4607,cids:2169,"err-code":2406,"peer-id":5420,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../utils").OFFLINE_ERROR,i=e("promisify-es6"),s=e("async/setImmediate"),o=e("bignumber.js"),a=e("cids"),c=e("peer-id"),u=e("err-code");function l(e,t){return Array.from(e).map((e=>({"/":e[1].cid.toBaseEncodedString(t)})))}t.exports=function(e){return{wantlist:i(((t,r)=>{if("function"==typeof t&&(r=t,t=null),!e.isOnline())return s((()=>r(new Error(n))));let i;if(t){try{t=c.createFromB58String(t)}catch(e){t=null}if(!t)return s((()=>r(new Error("Invalid peerId"))));i=e._bitswap.wantlistForPeer(t)}else i=e._bitswap.getWantlist();s((()=>r(null,{Keys:l(i)})))})),stat:i((t=>{if(!e.isOnline())return s((()=>t(new Error(n))));const r=e._bitswap.stat().snapshot;s((()=>{t(null,{provideBufLen:parseInt(r.providesBufferLength.toString()),blocksReceived:new o(r.blocksReceived),wantlist:l(e._bitswap.getWantlist()),peers:e._bitswap.peers().map((e=>e.toB58String())),dupBlksReceived:new o(r.dupBlksReceived),dupDataReceived:new o(r.dupDataReceived),dataReceived:new o(r.dataReceived),blocksSent:new o(r.blocksSent),dataSent:new o(r.dataSent)})}))})),unwant:i(((t,r)=>{if(!e.isOnline())return s((()=>r(new Error(n))));Array.isArray(t)||(t=[t]);try{t=t.map((e=>a.isCID(e)?e:new a(e)))}catch(e){return s((()=>r(u(e,"ERR_INVALID_CID"))))}s((()=>r(null,e._bitswap.unwant(t))))}))}}}}},{package:"3box>ipfs"}],[4631,{"async/setImmediate":1878,"async/waterfall":1884,cids:2169,"err-code":2406,"ipfs-block":4490,"multihashing-async":4611,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-block"),i=e("multihashing-async"),s=e("cids"),o=e("async/waterfall"),a=e("async/setImmediate"),c=e("promisify-es6"),u=e("err-code");function l(e){return s.isCID(e)?e:new s(e)}t.exports=function(e){return{get:c(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{t=l(t)}catch(e){return a((()=>n(u(e,"ERR_INVALID_CID"))))}!1!==r.preload&&e._preload(t),e._blockService.get(t,n)})),put:c(((t,r,a)=>{if(a=a||function(){},"function"==typeof r&&(a=r,r={}),r=r||{},Array.isArray(t))return a(new Error("Array is not supported"));o([e=>{if(n.isBlock(t))return e(null,t);if(r.cid&&s.isCID(r.cid))return e(null,new n(t,r.cid));const o=r.mhtype||"sha2-256",a=r.format||"dag-pb";let c;c=null==r.version?"sha2-256"===o&&"dag-pb"===a?0:1:r.version,i(t,o,((r,i)=>{if(r)return e(r);let o;try{o=new s(c,a,i)}catch(r){return e(r)}e(null,new n(t,o))}))},(t,n)=>e._blockService.put(t,(i=>{if(i)return n(i);!1!==r.preload&&e._preload(t.cid),n(null,t)}))],a)})),rm:c(((t,r)=>{try{t=l(t)}catch(e){return a((()=>r(u(e,"ERR_INVALID_CID"))))}e._blockService.delete(t,r)})),stat:c(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{t=l(t)}catch(e){return a((()=>n(u(e,"ERR_INVALID_CID"))))}!1!==r.preload&&e._preload(t),e._blockService.get(t,((e,r)=>{if(e)return n(e);n(null,{key:t.toString(),size:r.data.length})}))}))}}}}},{package:"3box>ipfs"}],[4632,{"../runtime/config-nodejs.js":4700,mafmt:5206,"promisify-es6":5434,timers:5947},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("../runtime/config-nodejs.js"),i=e("mafmt").IPFS.matches,s=e("promisify-es6");function o(e){try{return i(e)}catch(e){return!1}}function a(e){return new Error(`${e} is not a valid Multiaddr`)}t.exports=function(e){return{list:s((t=>{e._repo.config.get(((e,r)=>{if(e)return t(e);t(null,{Peers:r.Bootstrap})}))})),add:s(((t,i,s)=>{if("function"==typeof i&&(s=i,i={default:!1}),t&&!o(t))return r((()=>s(a(t))));e._repo.config.get(((r,o)=>{if(r)return s(r);i.default?o.Bootstrap=n().Bootstrap:t&&-1===o.Bootstrap.indexOf(t)&&o.Bootstrap.push(t),e._repo.config.set(o,(e=>{if(e)return s(e);s(null,{Peers:i.default?n().Bootstrap:[t]})}))}))})),rm:s(((t,n,i)=>{if("function"==typeof n&&(i=n,n={all:!1}),t&&!o(t))return r((()=>i(a(t))));e._repo.config.get(((r,s)=>{if(r)return i(r);n.all?s.Bootstrap=[]:s.Bootstrap=s.Bootstrap.filter((e=>e!==t)),e._repo.config.set(s,(e=>{if(e)return i(e);const r=[];!n.all&&t&&r.push(t),i(null,{Peers:r})}))}))}))}}}).call(this)}).call(this,e("timers").setImmediate)}}},{package:"3box>ipfs"}],[4633,{"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6");t.exports=function(e){return{get:n(((t,r)=>("function"==typeof t&&(r=t,t=undefined),e._repo.config.get(t,r)))),set:n(((t,r,n)=>{e._repo.config.set(t,r,n)})),replace:n(((t,r)=>{e._repo.config.set(t,r)}))}}}}},{package:"3box>ipfs"}],[4634,{"../../../../is-buffer/index.js":4735,"async-iterator-to-pull-stream":1813,"async/map":1869,"async/setImmediate":1878,cids:2169,"err-code":2406,"just-flatten-it":4800,multicodec:5235,"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("promisify-es6"),i=e("cids"),s=e("pull-stream"),o=e("async-iterator-to-pull-stream"),a=e("async/map"),c=e("async/setImmediate"),u=e("just-flatten-it"),l=e("err-code"),f=e("multicodec");t.exports=function(e){return{put:n(((t,r,n)=>{if("function"==typeof r&&(n=r,r={}),(r=r||{}).cid&&(r.format||r.hashAlg))return n(new Error("Can't put dag node. Please provide either `cid` OR `format` and `hashAlg` options."));if(r.format&&!r.hashAlg||!r.format&&r.hashAlg)return n(new Error("Can't put dag node. Please provide `format` AND `hashAlg` options."));const i={format:f.DAG_CBOR,hashAlg:f.SHA2_256};if(r.format&&"string"==typeof r.format){const e=r.format.toUpperCase().replace(/-/g,"_");r.format=f[e]}if(r.hashAlg&&"string"==typeof r.hashAlg){const e=r.hashAlg.toUpperCase().replace(/-/g,"_");r.hashAlg=f[e]}(r=r.cid?r:Object.assign({},i,r)).version===undefined&&(r.format===f.DAG_PB&&r.hashAlg===f.SHA2_256?r.version=0:r.version=1),e._ipld.put(t,r.format,{hashAlg:r.hashAlg,cidVersion:r.version}).then((t=>(!1!==r.preload&&e._preload(t),n(null,t))),(e=>n(e)))})),get:n(((t,n,s,o)=>{if("function"==typeof n&&(o=n,n=undefined),"function"==typeof s&&(o=s,"string"!=typeof n?(s=n,n=undefined):s={}),s=s||{},"string"==typeof t){const e=t.split("/");try{t=new i(e[0])}catch(e){return c((()=>o(l(e,"ERR_INVALID_CID"))))}e.shift(),n=e.length>0?e.join("/"):"/"}else if(r.isBuffer(t))try{t=new i(t)}catch(e){return c((()=>o(l(e,"ERR_INVALID_CID"))))}if(!1!==s.preload&&e._preload(t),n===undefined||"/"===n)e._ipld.get(t).then((e=>{o(null,{value:e,remainderPath:""})}),(e=>o(e)));else{const r=e._ipld.resolve(t,n);(s.localResolve?r.first():r.last()).then((e=>o(null,e)),(e=>o(e)))}})),tree:n(((t,r,n,a)=>{if("object"==typeof r&&(a=n,n=r,r=undefined),"function"==typeof r&&(a=r,r=undefined),"function"==typeof n&&(a=n,n={}),n=n||{},"string"==typeof t){const e=t.split("/");try{t=new i(e[0])}catch(e){return c((()=>a(l(e,"ERR_INVALID_CID"))))}e.shift(),r=e.length>0?e.join("/"):undefined}!1!==n.preload&&e._preload(t),s(o(e._ipld.tree(t,r,n)),s.collect(a))})),_getRecursive:n(((t,r,n)=>{let s;"function"==typeof r&&(n=r,r={}),r=r||{};try{s=new i(t)}catch(e){return c((()=>n(l(e,"ERR_INVALID_CID"))))}e.dag.get(s,"",r,((t,i)=>{if(t)return n(t);a(i.value.Links,((t,n)=>{e.dag._getRecursive(t.Hash,r,n)}),((e,t)=>{if(e)return n(e);n(null,u([i.value,t]))}))}))}))}}}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"3box>ipfs"}],[4635,{"../../../../is-buffer/index.js":4735,"async/each":1838,"async/every":1844,"async/nextTick":1872,cids:2169,debug:2304,"err-code":2406,"peer-id":5420,"peer-info":5421,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("promisify-es6"),i=e("async/every"),s=e("peer-id"),o=e("peer-info"),a=e("cids"),c=e("async/each"),u=e("async/nextTick"),l=e("err-code"),f=e("debug"),h=f("ipfs:dht");h.error=f("ipfs:dht:error"),t.exports=e=>({get:n(((t,n,i)=>{if("function"==typeof n&&(i=n,n={}),n=n||{},!r.isBuffer(t))try{t=new a(t).buffer}catch(e){return h.error(e),u((()=>i(l(e,"ERR_INVALID_CID"))))}e.libp2p.dht.get(t,n,i)})),put:n(((t,n,i)=>{if(!r.isBuffer(t))try{t=new a(t).buffer}catch(e){return h.error(e),u((()=>i(l(e,"ERR_INVALID_CID"))))}e.libp2p.dht.put(t,n,i)})),findProvs:n(((t,r,n)=>{if("function"==typeof r&&(n=r,r={}),r=r||{},"string"==typeof t)try{t=new a(t)}catch(e){return h.error(e),u((()=>n(l(e,"ERR_INVALID_CID"))))}e.libp2p.contentRouting.findProviders(t,r,n)})),findPeer:n(((t,r)=>{"string"==typeof t&&(t=s.createFromB58String(t)),e.libp2p.peerRouting.findPeer(t,r)})),provide:n(((t,r,n)=>{Array.isArray(t)||(t=[t]),"function"==typeof r&&(n=r,r={}),r=r||{},i(t,((t,r)=>{e._repo.blocks.has(t,r)}),((i,s)=>{if(i)return n(i);if(!s){const e="block(s) not found locally, cannot provide";return h.error(e),n(l(e,"ERR_BLOCK_NOT_FOUND"))}if(r.recursive)return n(l("not implemented yet","ERR_NOT_IMPLEMENTED_YET"));c(t,((t,r)=>{e.libp2p.contentRouting.provide(t,r)}),n)}))})),query:n(((t,r)=>{if("string"==typeof t)try{t=s.createFromB58String(t)}catch(e){return h.error(e),r(e)}e.libp2p._dht.getClosestPeers(t.toBytes(),((e,t)=>{if(e)return h.error(e),r(e);r(null,t.map((e=>new o(e))))}))}))})}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"3box>ipfs"}],[4636,{"../runtime/dns-nodejs":4701,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../runtime/dns-nodejs"),i=e("promisify-es6");t.exports=()=>i(((e,t,r)=>{if("string"!=typeof e)return r(new Error("Invalid arguments, domain must be a string"));"function"==typeof t&&(r=t,t={}),n(e,t=t||{},r)}))}}},{package:"3box>ipfs"}],[4637,{"async-iterator-all":1809,"async-iterator-to-pull-stream":1813,"async-iterator-to-stream":1814,buffer:2132,callbackify:2150,"ipfs-mfs/core":4507,"is-pull-stream":4751,"pull-stream-to-async-iterator":5485,"pull-stream/pull":5488,"pull-stream/throughs/map":5510,stream:4627},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipfs-mfs/core"),i=e("is-pull-stream"),s=e("async-iterator-to-pull-stream"),o=e("async-iterator-to-stream"),a=e("pull-stream-to-async-iterator"),c=e("async-iterator-all"),u=e("callbackify"),l=e("stream").PassThrough,f=e("pull-stream/pull"),h=e("pull-stream/throughs/map"),d=(e={})=>{const t=e.long||e.l;return r=>({hash:t?r.cid.toBaseEncodedString(e.cidBase):"",name:r.name,type:t?r.type:0,size:t&&r.size||0})};t.exports=e=>{const t=n({ipld:e._ipld,blocks:e._blockService,datastore:e._repo.root,repoOwner:e._options.repoOwner});return{cp:u.variadic(t.cp),flush:u.variadic(t.flush),ls:u.variadic((async(e,r={})=>(await c(t.ls(e,r))).map(d(r)))),lsReadableStream:(e,r={})=>{const n=o.obj(t.ls(e,r)),i=new l({objectMode:!0});return n.on("data",(e=>{i.write(d(r)(e))})),n.on("error",(e=>{i.destroy(e)})),n.on("end",((e,t,n)=>{e&&(e=d(r)(e)),i.end(e,t,n)})),i},lsPullStream:(e,r={})=>f(s.source(t.ls(e,r)),h(d(r))),mkdir:u.variadic(t.mkdir),mv:u.variadic(t.mv),read:u((async(e,n={})=>r.concat(await c(t.read(e,n))))),readPullStream:(e,r={})=>s.source(t.read(e,r)),readReadableStream:(e,r={})=>o(t.read(e,r)),rm:u.variadic(t.rm),stat:u((async(e,r={})=>{const n=await t.stat(e,r);return n.hash=n.cid.toBaseEncodedString(r&&r.cidBase),delete n.cid,n})),write:u.variadic((async(e,r,n={})=>{i.isSource(r)&&(r=a(r)),await t.write(e,r,n)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4638,{"../../runtime/add-from-fs-nodejs":4699},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=t=>e("../../runtime/add-from-fs-nodejs")(t)}}},{package:"3box>ipfs"}],[4639,{"./add":4643},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=t=>e("./add")(t)}}},{package:"3box>ipfs"}],[4640,{"../../runtime/fetch-nodejs":4702,buffer:2132,"iso-url":4760},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{URL:n}=e("iso-url"),i=e("../../runtime/fetch-nodejs");t.exports=e=>async(t,s,o)=>{let a;"function"==typeof s&&(o=s,s={});try{const o=new n(t),c=await i(t);if(!c.ok)throw new Error("unexpected status code: "+c.status);const u=r.from(await c.arrayBuffer()),l=decodeURIComponent(o.pathname.split("/").pop());a=await e.add({content:u,path:l},s)}catch(e){if(o)return o(e);throw e}return o&&o(null,a),a}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4641,{"../../../../../is-buffer/index.js":4735,"./utils":4660,"async-iterator-to-pull-stream":1813,"async/waterfall":1884,"ipfs-unixfs-importer":4582,"ipfs-utils/src/streams/stream-from-filereader":4605,"ipfs-utils/src/supports":4606,"is-pull-stream":4751,"is-stream":4754,"kind-of":4803,"pull-stream-to-async-iterator":5485,"pull-stream/pull":5488,"pull-stream/sources/values":5504,"pull-stream/throughs/async-map":5505,"pull-stream/throughs/flatten":5508,"pull-stream/throughs/map":5510,"stream-to-pull-stream":5915},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipfs-unixfs-importer"),i=e("kind-of"),s=e("pull-stream-to-async-iterator"),o=e("async-iterator-to-pull-stream"),a=e("pull-stream/pull"),c=e("pull-stream/sources/values"),u=e("pull-stream/throughs/map"),l=e("pull-stream/throughs/async-map"),f=e("pull-stream/throughs/flatten"),h=e("stream-to-pull-stream"),d=e("async/waterfall"),p=e("is-stream"),{isSource:g}=e("is-pull-stream"),{parseChunkerString:b}=e("./utils"),m=e("ipfs-utils/src/streams/stream-from-filereader"),{supportsFileReader:y}=e("ipfs-utils/src/supports");function _(){}t.exports=function(e){return function(t){let w;t=t||{};try{w=b(t.chunker)}catch(e){return u((()=>{throw e}))}const k=Object.assign({},{shardSplitThreshold:e._options.EXPERIMENTAL.sharding?1e3:Infinity},t,{chunker:w.chunker,chunkerOptions:w.chunkerOptions});k.hashAlg&&1!==k.cidVersion&&(k.cidVersion=1);let v=0;const E=k.progress||_;return k.progress=e=>{v+=e,E(v)},a(u((e=>function(e,t){return Array.isArray(e)||(e=[e]),e.map((e=>{if(y&&"file"===i(e)&&(e={path:"",content:h.source(m(e))}),r.isBuffer(e)&&(e={path:"",content:c([e])}),p.readable(e)&&(e={path:"",content:h.source(e)}),g(e)&&(e={path:"",content:e}),e&&e.content&&"function"!=typeof e.content&&(y&&"file"===i(e.content)&&(e={path:e.path,content:h.source(m(e.content))}),r.isBuffer(e.content)&&(e={path:e.path,content:c([e.content])}),p.readable(e.content)&&(e={path:e.path,content:h.source(e.content)})),t.wrapWithDirectory&&!e.path)throw new Error("Must provide a path when wrapping with a directory");return e}))}(e,k))),f(),u((e=>({path:e.path?e.path:undefined,content:e.content?s(e.content):undefined}))),o.transform((t=>n(t,e._ipld,k))),l(((t,n)=>function(e,t,n,i){n=n||{};let s=e.cid;d([r=>n.onlyHash?r(null,e):t.object.get(e.cid,Object.assign({},n,{preload:!1}),r),(t,i)=>{1===n.cidVersion&&(s=s.toV1());const o=s.toBaseEncodedString();let a=t.size;r.isBuffer(t)&&(a=t.length),i(null,{path:e.path===undefined?o:e.path||"",hash:o,size:a})}],i)}(t,e,k,n))),u((t=>function(e,t,r){return(!e.path||r.wrapWithDirectory?""===e.path:!e.path.includes("/"))&&!r.onlyHash&&!1!==r.preload&&t._preload(e.hash),e}(t,e,k))),l(((t,r)=>function(e,t,r,n){const i=!("pin"in r)||r.pin,s=!e.path.includes("/");if(i&&s&&!r.onlyHash&&!r.hashAlg)return t.pin.add(e.hash,{preload:!1},(t=>n(t,e)));n(null,e)}(t,e,k,r))))}}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"3box>ipfs"}],[4642,{"pull-pushable":5481,"pull-stream":5487,"readable-stream":4627},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-pushable"),s=e("readable-stream").Duplex;class o extends s{constructor(e,t,r){super(Object.assign({objectMode:!0},r)),this._pullStream=e,this._pushable=t,this._waitingPullFlush=[]}_read(){this._pullStream(null,((e,t)=>{for(;this._waitingPullFlush.length;){this._waitingPullFlush.shift()()}e?e instanceof Error?this.emit("error",e):this.push(null):this.push(t)}))}_write(e,t,r){this._waitingPullFlush.push(r),this._pushable.push(e)}}t.exports=function(e){return t=>{t=t||{};const r=i(),s=n(r,e.addPullStream(t)),a=new o(s,r);return a.once("finish",(()=>r.end())),a}}}}},{package:"3box>ipfs"}],[4643,{"ipfs-utils/src/files/add-input-validation":4604,"is-pull-stream":4751,"promisify-es6":5434,"pull-sort":5484,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("pull-stream"),s=e("pull-sort"),o=e("is-pull-stream").isSource,a=e("ipfs-utils/src/files/add-input-validation");t.exports=function(e){const t=n(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{};try{a(t)}catch(e){return n(e)}i(i.values([t]),e.addPullStream(r),s(((e,t)=>e.path<t.path?1:e.path>t.path?-1:0)),i.collect(n))}));return function(){const e=Array.from(arguments);return 1===e.length&&o(e[0])&&e.push({}),t.apply(null,e)}}}}},{package:"3box>ipfs"}],[4644,{"./utils":4660,"async-iterator-to-pull-stream":1813,"ipfs-unixfs-exporter":4557,"pull-defer":5462},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("pull-defer"),s=e("async-iterator-to-pull-stream"),{normalizePath:o}=e("./utils");t.exports=function(e){return function(t,r){if("function"==typeof t)throw new Error("You must supply an ipfsPath");r=r||{};const a=(t=o(t)).split("/");!1!==r.preload&&e._preload(a[0]);const c=i.source();return n(t,e._ipld,r).then((e=>e.unixfs&&e.unixfs.type.includes("dir")?c.abort(new Error("this dag node is a directory")):e.content?void c.resolve(s.source(e.content(r))):c.abort(new Error("this dag node has no content"))),(e=>{c.abort(e)})),c}}}}},{package:"3box>ipfs"}],[4645,{"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>n.source(e.catPullStream(t,r))}}}},{package:"3box>ipfs"}],[4646,{buffer:2132,"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("promisify-es6"),i=e("pull-stream");t.exports=function(e){return n(((t,n,s)=>{"function"==typeof n&&(s=n,n={}),i(e.catPullStream(t,n),i.collect(((e,t)=>{if(e)return s(e);s(null,r.concat(t))})))}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4647,{"./utils":4660,"async-iterator-to-pull-stream":1813,"err-code":2406,"ipfs-unixfs-exporter":4557,"pull-stream/pull":5488,"pull-stream/throughs/map":5510},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("async-iterator-to-pull-stream"),s=e("err-code"),o=e("pull-stream/pull"),a=e("pull-stream/throughs/map"),{normalizePath:c,mapFile:u}=e("./utils");t.exports=function(e){return(t,r)=>{if(!1!==(r=r||{}).preload){let r;try{r=c(t).split("/")}catch(e){return o.error(s(e,"ERR_INVALID_PATH"))}e._preload(r[0])}return o(i.source(n.recursive(t,e._ipld,r)),a(u({...r,includeContent:!0})))}}}}},{package:"3box>ipfs"}],[4648,{"pull-stream":5487,"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>(r=r||{},i.source(n(e.getPullStream(t,r),n.map((e=>(e.content&&(e.content=i.source(e.content),e.content.pause()),e))))))}}}},{package:"3box>ipfs"}],[4649,{buffer:2132,"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("promisify-es6"),i=e("pull-stream");t.exports=function(e){return n(((t,n,s)=>{"function"==typeof n&&(s=n,n={}),n=n||{},i(e.getPullStream(t,n),i.asyncMap(((e,t)=>{e.content?i(e.content,i.collect(((n,i)=>{if(n)return t(n);e.content=r.concat(i),t(null,e)}))):t(null,e)})),i.collect(s))}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4650,{"./add":4643,"./add-from-fs":4638,"./add-from-stream":4639,"./add-from-url":4640,"./add-pull-stream":4641,"./add-readable-stream":4642,"./cat":4646,"./cat-pull-stream":4644,"./cat-readable-stream":4645,"./get":4649,"./get-pull-stream":4647,"./get-readable-stream":4648,"./ls":4653,"./ls-pull-stream":4651,"./ls-readable-stream":4652,"./refs":4659,"./refs-local":4656,"./refs-local-pull-stream":4654,"./refs-local-readable-stream":4655,"./refs-pull-stream":4657,"./refs-readable-stream":4658},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=t=>{const r={add:e("./add")(t),addFromFs:e("./add-from-fs")(t),addFromStream:e("./add-from-stream")(t),addFromURL:e("./add-from-url")(t),addPullStream:e("./add-pull-stream")(t),addReadableStream:e("./add-readable-stream")(t),cat:e("./cat")(t),catPullStream:e("./cat-pull-stream")(t),catReadableStream:e("./cat-readable-stream")(t),get:e("./get")(t),getPullStream:e("./get-pull-stream")(t),getReadableStream:e("./get-readable-stream")(t),ls:e("./ls")(t),lsPullStream:e("./ls-pull-stream")(t),lsReadableStream:e("./ls-readable-stream")(t),refs:e("./refs")(t),refsReadableStream:e("./refs-readable-stream")(t),refsPullStream:e("./refs-pull-stream")(t)};return r.refs.local=e("./refs-local")(t),r.refs.localReadableStream=e("./refs-local-readable-stream")(t),r.refs.localPullStream=e("./refs-local-pull-stream")(t),r}}}},{package:"3box>ipfs"}],[4651,{"./utils":4660,"async-iterator-to-pull-stream":1813,"err-code":2406,"ipfs-unixfs-exporter":4557,"pull-defer":5462,"pull-stream/pull":5488,"pull-stream/sources/once":5503,"pull-stream/throughs/filter":5507,"pull-stream/throughs/map":5510},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-unixfs-exporter"),i=e("pull-defer"),s=e("pull-stream/pull"),o=e("pull-stream/sources/once"),a=e("pull-stream/throughs/map"),c=e("pull-stream/throughs/filter"),u=e("err-code"),l=e("async-iterator-to-pull-stream"),{normalizePath:f,mapFile:h}=e("./utils");t.exports=function(e){return function(t,r){r=r||{};const d=f(t),p=r.recursive,g=d.split("/");!1!==r.preload&&e._preload(g[0]);const b=i.source();return n(t,e._ipld,r).then((t=>t.unixfs?"file"===t.unixfs.type?b.resolve(o(h(r)(t))):t.unixfs.type.includes("dir")?p?b.resolve(s(l.source(n.recursive(t.cid,e._ipld,r)),c((e=>t.cid.toBaseEncodedString()!==e.cid.toBaseEncodedString())),a(h(r)))):b.resolve(s(l.source(t.content()),a(h(r)),a((e=>(e.depth--,e))))):void b.abort(u(new Error(`Unknown UnixFS type ${t.unixfs.type}`),"EUNKNOWNUNIXFSTYPE")):b.abort(u(new Error("dag node was not a UnixFS node"),"ENOTUNIXFS"))),(e=>{b.abort(e)})),b}}}}},{package:"3box>ipfs"}],[4652,{"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>n.source(e.lsPullStream(t,r))}}}},{package:"3box>ipfs"}],[4653,{"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("pull-stream");t.exports=function(e){return n(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},i(e.lsPullStream(t,r),i.collect(((e,t)=>{if(e)return n(e);n(null,t)})))}))}}}},{package:"3box>ipfs"}],[4654,{"base32.js":2057,buffer:2132,cids:2169,"pull-defer":5462,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("cids"),i=e("base32.js"),s=e("pull-stream"),o=e("pull-defer");t.exports=function(e){return()=>{const t=o.source();return e._repo.blocks.query({keysOnly:!0},((e,o)=>{if(e)return t.resolve(s.error(e));const a=o.map((e=>function(e){try{const t=new i.Decoder,s=r.from(t.write(e.toString().slice(1)).finalize());return{ref:new n(s).toString()}}catch(t){return{err:`Could not convert block with key '${e}' to CID: ${t.message}`}}}(e.key)));t.resolve(s.values(a))})),t}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4655,{"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>n.source(e.refs.localPullStream())}}}},{package:"3box>ipfs"}],[4656,{"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("pull-stream");t.exports=function(e){return n((t=>{i(e.refs.localPullStream(),i.collect(((e,r)=>{if(e)return t(e);t(null,r)})))}))}}}},{package:"3box>ipfs"}],[4657,{"./refs":4659,"./utils":4660,cids:2169,"ipld-dag-pb":4723,"is-ipfs":4746,"pull-cat":5460,"pull-defer":5462,"pull-stream":5487,"pull-traverse":5519},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream"),i=e("pull-defer"),s=e("pull-traverse"),o=e("pull-cat"),a=e("is-ipfs"),c=e("cids"),{DAGNode:u}=e("ipld-dag-pb"),{normalizePath:l}=e("./utils"),{Format:f}=e("./refs");function h(e,t=""){let r=[];for(const[n,i]of Object.entries(e))c.isCID(i)?r.push({name:t+n,cid:i}):"object"==typeof i&&(r=r.concat(h(i,t+n+"/")));return r}t.exports=function(e){return function(t,r={}){if(0===r.maxDepth)return n.empty();if(r.edges&&r.format&&r.format!==f.default)return n.error(new Error("Cannot set edges to true and also specify format"));let d;r.format=r.edges?f.edges:r.format||f.default,"number"!=typeof r.maxDepth&&(r.maxDepth=r.recursive?Infinity:1);try{d=(Array.isArray(t)?t:[t]).map((t=>function(e,t,r){const n=l(t),i=n.split("/")[0];if(!a.cid(i))throw new Error(`Error resolving path '${n}': '${i}' is not a valid CID`);!1!==r.preload&&e._preload(i);return"/ipfs/"+n}(e,t,r)))}catch(e){return n.error(e)}return o(d.map((t=>function(e,t,r){const o=i.source();return e.resolve(t,((t,a)=>{if(t)return o.resolve(n.error(t));const l=a.split("/")[2];o.resolve(n(function(e,t,r,o){const a=new Set,l={node:{cid:t},depth:0},f=t=>{const{node:s,depth:l}=t,f=l+1;if(f>r)return n.empty();if(o){if(a.has(s.cid.toString()))return t.isDuplicate=!0,n.empty();a.add(s.cid.toString())}const d=i.source();return function(e,t,r){e._ipld.get(new c(t)).then((e=>{let t;t=u.isDAGNode(e)?e.Links.map((({Name:e,Hash:t})=>({name:e,cid:new c(t)}))):h(e),r(null,t)})).catch(r)}(e,s.cid,((e,t)=>{if(e)return"ERR_NOT_FOUND"===e.code&&(e.message=`Could not find object with CID: ${s.cid}`),d.resolve(n.error(e));const r=t.map((e=>({parent:s,node:e,depth:f})));d.resolve(n.values(r))})),d};return s.depthFirst(l,f)}(e,l,r.maxDepth,r.unique),n.filter((e=>Boolean(e.parent))),n.filter((e=>!e.isDuplicate)),n.map((e=>function(e,t,r,n){let i=n.replace(/<src>/g,e.toString());return i=i.replace(/<dst>/g,t.toString()),i=i.replace(/<linkname>/g,r),i}(e.parent.cid,e.node.cid,e.node.name,r.format))),n.map((e=>({ref:e})))))})),o}(e,t,r))))}}}}},{package:"3box>ipfs"}],[4658,{"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>n.source(e.refsPullStream(t,r))}}}},{package:"3box>ipfs"}],[4659,{"promisify-es6":5434,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("pull-stream");t.exports=function(e){return n(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),r=r||{},i(e.refsPullStream(t,r),i.collect(((e,t)=>{if(e)return n(e);n(null,t)})))}))},t.exports.Format={default:"<dst>",edges:"<src> -> <dst>"}}}},{package:"3box>ipfs"}],[4660,{"../../../utils/cid":4709,"async-iterator-to-pull-stream":1813,buffer:2132,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),{Buffer:i}=e("buffer"),{cidToString:s}=e("../../../utils/cid"),o=e("async-iterator-to-pull-stream"),a=e=>{const t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=c(r[1],"avg");break;case 4:t.minChunkSize=c(r[1],"min"),t.avgChunkSize=c(r[2],"avg"),t.maxChunkSize=c(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},c=(e,t)=>{let r=parseInt(e);if(isNaN(r))throw new Error(`Chunker parameter ${t} must be an integer`);return r};t.exports={normalizePath:e=>i.isBuffer(e)?new n(e).toString():n.isCID(e)?e.toString():(0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),parseChunkSize:c,parseRabinString:a,parseChunkerString:e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",chunkerOptions:{maxChunkSize:r}}}if(e.startsWith("rabin"))return{chunker:"rabin",chunkerOptions:a(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},mapFile:(e={})=>t=>{let r=0,n="dir";t.unixfs&&"file"===t.unixfs.type&&(r=t.unixfs.fileSize(),n="file");const i={hash:s(t.cid,{base:e.cidBase}),path:t.path,name:t.name,depth:t.path.split("/").length,size:r,type:n};return e.includeContent&&t.unixfs&&"file"===t.unixfs.type&&(i.content=o.source(t.content())),i}}}}},{package:"3box>ipfs"}],[4661,{"../../../package.json":4628,"async/setImmediate":1878,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("async/setImmediate"),s=e("../../../package.json").version;t.exports=function(e){return n(((t,r)=>{"function"==typeof t&&(r=t,t={}),i((()=>r(null,{id:e._peerInfo.id.toB58String(),publicKey:e._peerInfo.id.pubKey.bytes.toString("base64"),addresses:e._peerInfo.multiaddrs.toArray().map((e=>e.toString())).filter((e=>e.indexOf("ipfs")>=0)).sort(),agentVersion:`js-ipfs/${s}`,protocolVersion:"9000"})))}))}}}},{package:"3box>ipfs"}],[4662,{"./bitswap":4630,"./block":4631,"./bootstrap":4632,"./config":4633,"./dag":4634,"./dht":4635,"./dns":4636,"./files-mfs":4637,"./files-regular":4650,"./id":4661,"./init":4663,"./is-online":4664,"./key":4665,"./libp2p":4666,"./name":4668,"./object":4670,"./pin":4672,"./ping":4676,"./ping-pull-stream":4674,"./ping-readable-stream":4675,"./pre-start":4677,"./pubsub":4678,"./repo":4679,"./resolve":4680,"./start":4681,"./stats":4682,"./stop":4683,"./swarm":4684,"./version":4685},function(){with(this)return function(){"use strict";return function(e,t,r){r.preStart=e("./pre-start"),r.start=e("./start"),r.stop=e("./stop"),r.isOnline=e("./is-online"),r.version=e("./version"),r.id=e("./id"),r.repo=e("./repo"),r.init=e("./init"),r.bootstrap=e("./bootstrap"),r.config=e("./config"),r.block=e("./block"),r.object=e("./object"),r.dag=e("./dag"),r.libp2p=e("./libp2p"),r.swarm=e("./swarm"),r.ping=e("./ping"),r.pingPullStream=e("./ping-pull-stream"),r.pingReadableStream=e("./ping-readable-stream"),r.pin=e("./pin"),r.filesRegular=e("./files-regular"),r.filesMFS=e("./files-mfs"),r.bitswap=e("./bitswap"),r.pubsub=e("./pubsub"),r.dht=e("./dht"),r.dns=e("./dns"),r.key=e("./key"),r.stats=e("./stats"),r.resolve=e("./resolve"),r.name=e("./name")}}},{package:"3box>ipfs"}],[4663,{"../ipns":4688,"../ipns/routing/offline-datastore":4694,"../runtime/config-nodejs.js":4700,"./init-assets":2131,"async/parallel":1873,"async/waterfall":1884,buffer:2132,"ipfs-unixfs":4586,"ipld-dag-pb":4723,"libp2p-keychain":4921,"merge-options":5209,multicodec:5235,"peer-id":5420,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("peer-id"),i=e("merge-options"),s=e("async/waterfall"),o=e("async/parallel"),a=e("promisify-es6"),c=e("../runtime/config-nodejs.js"),u=e("libp2p-keychain"),{DAGNode:l}=e("ipld-dag-pb"),f=e("ipfs-unixfs"),h=e("multicodec"),d=e("../ipns"),p=e("../ipns/routing/offline-datastore"),g=e("./init-assets");t.exports=function(e){return a(((t,a)=>{"function"==typeof t&&(a=t,t={});const b=(t,r)=>{if(t)return e.emit("error",t),a(t);e.preStart((t=>{if(t)return e.emit("error",t),a(t);e.state.initialized(),e.emit("init"),a(null,r)}))};if("uninitialized"!==e.state.state())return b(new Error("Not able to init from state: "+e.state.state()));if(e.state.init(),e.log("init"),t.repo)return e._repo=t.repo,b(null,!0);t.emptyRepo=t.emptyRepo||!1,t.bits=Number(t.bits)||2048,t.log=t.log||function(){};const m=i(c(),e._options.config);let y;s([t=>e._repo.exists(t),(i,s)=>{if(e.log("repo exists?",i),!0===i)return s(new Error("repo already exists"));t.privateKey?(e.log("using user-supplied private-key"),"object"==typeof t.privateKey?s(null,t.privateKey):n.createFromPrivKey(r.from(t.privateKey,"base64"),s)):(t.log(`generating ${t.bits}-bit RSA keypair...`,!1),e.log("generating peer id: %s bits",t.bits),n.create({bits:t.bits},s))},(r,n)=>{e.log("identity generated"),m.Identity={PeerID:r.toB58String(),PrivKey:r.privKey.bytes.toString("base64")},y=r.privKey,t.pass&&(m.Keychain=u.generateOptions()),t.log("done"),t.log("peer identity: "+m.Identity.PeerID),e._repo.init(m,n)},(t,r)=>e._repo.open(r),r=>{if(e.log("repo opened"),t.pass){e.log("creating keychain");const n=Object.assign({passPhrase:t.pass},m.Keychain);e._keychain=new u(e._repo.keys,n),e._keychain.importPeer("self",{privKey:y},r)}else r(null,!0)},(t,r)=>{const n=new p(e._repo);e._ipns=new d(n,e._repo.datastore,e._peerInfo,e._keychain,e._options),r(null,!0)},(r,n)=>{if(t.emptyRepo)return n(null,!0);const i=[t=>{s([e=>{try{e(null,l.create(new f("directory").marshal()))}catch(t){e(t)}},(t,r)=>e.dag.put(t,{version:0,format:h.DAG_PB,hashAlg:h.SHA2_256}).then((e=>r(null,e)),(e=>r(e))),(t,r)=>e._ipns.initializeKeyspace(y,t.toBaseEncodedString(),r)],t)}];"function"==typeof g&&i.push((r=>g(e,t.log,r))),e.log("adding assets"),o(i,(e=>{e?n(e):n(null,!0)}))}],b)}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4664,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return()=>Boolean(e._bitswap&&e.libp2p&&e.libp2p.isStarted())}}}},{package:"3box>ipfs"}],[4665,{"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6");t.exports=function(e){return{gen:n(((t,r,n)=>{r=r||{},e._keychain.createKey(t,r.type,r.size,n)})),info:n(((t,r)=>{e._keychain.findKeyByName(t,r)})),list:n((t=>{e._keychain.listKeys(t)})),rm:n(((t,r)=>{e._keychain.removeKey(t,r)})),rename:n(((t,r,n)=>{e._keychain.renameKey(t,r,((e,r)=>{if(e)return n(e);const i={was:t,now:r.name,id:r.id,overwrite:!1};n(null,i)}))})),import:n(((t,r,n,i)=>{e._keychain.importKey(t,r,n,i)})),export:n(((t,r,n)=>{e._keychain.exportKey(t,r,n)}))}}}}},{package:"3box>ipfs"}],[4666,{"../ipns/routing/utils":4696,"../runtime/libp2p-nodejs":4704,dlv:2335,"merge-options":5209},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("dlv"),i=e("merge-options"),s=e("../ipns/routing/utils");function o({datastore:t,peerInfo:r,peerBook:o,options:a,config:c}){const u={datastore:t,peerInfo:r,peerBook:o,config:{peerDiscovery:{mdns:{enabled:n(a,"config.Discovery.MDNS.Enabled",n(c,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:n(a,"config.Discovery.webRTCStar.Enabled",n(c,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:n(a,"config.Bootstrap",n(c,"Bootstrap",[]))}},relay:{enabled:n(a,"relay.enabled",n(c,"relay.enabled",!0)),hop:{enabled:n(a,"relay.hop.enabled",n(c,"relay.hop.enabled",!1)),active:n(a,"relay.hop.active",n(c,"relay.hop.active",!1))}},dht:{kBucketSize:n(a,"dht.kBucketSize",20),enabled:!1,randomWalk:{enabled:!1},validators:{ipns:s.validator},selectors:{ipns:s.selector}},EXPERIMENTAL:{pubsub:n(a,"EXPERIMENTAL.pubsub",!1)}},connectionManager:n(a,"connectionManager",{maxPeers:n(c,"Swarm.ConnMgr.HighWater"),minPeers:n(c,"Swarm.ConnMgr.LowWater")})},l=i(u,n(a,"libp2p",{}));return new(e("../runtime/libp2p-nodejs"))(l)}t.exports=function(e,t){const r=e._options||{};t=t||{};const n="function"==typeof r.libp2p?r.libp2p:o,{datastore:i}=e._repo,s=e._peerInfo,a=e._peerInfoBook,c=n({options:r,config:t,datastore:i,peerInfo:s,peerBook:a});return c.on("stop",(()=>{s.multiaddrs.clear()})),c.on("start",(()=>{s.multiaddrs.forEach((t=>{e._print("Swarm listening on",t.toString())}))})),c.on("peer:connect",(e=>a.put(e))),c}}}},{package:"3box>ipfs"}],[4667,{"../ipns/routing/pubsub-datastore":4695,debug:2304,"err-code":2406,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("err-code"),s=e("promisify-es6"),o=e("../ipns/routing/pubsub-datastore");n("ipfs:name-pubsub").error=n("ipfs:name-pubsub:error");const a=e=>{try{return Boolean(c(e))}catch(e){return!1}},c=e=>{if(!e._ipns||!e._options.EXPERIMENTAL.ipnsPubsub){throw i("IPNS pubsub subsystem is not enabled","ERR_IPNS_PUBSUB_NOT_ENABLED")}if(o.isIpnsPubsubDatastore(e._ipns.routing))return e._ipns.routing;const t=(e._ipns.routing.stores||[]).find((e=>o.isIpnsPubsubDatastore(e)));if(!t){throw i("IPNS pubsub datastore not found","ERR_PUBSUB_DATASTORE_NOT_FOUND")}return t};t.exports=function(e){return{state:s((t=>{t(null,{enabled:a(e)})})),cancel:s(((t,r)=>{let n;try{n=c(e)}catch(e){return r(e)}n.cancel(t,r)})),subs:s((t=>{let r;try{r=c(e)}catch(e){return t(e)}r.getSubscriptions(t)}))}}}}},{package:"3box>ipfs"}],[4668,{"../ipns/path":4689,"../utils":4708,"./name-pubsub":4667,"async/parallel":1873,"async/waterfall":1884,debug:2304,"err-code":2406,"human-to-milliseconds":4435,"libp2p-crypto":4866,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("promisify-es6"),s=e("async/waterfall"),o=e("async/parallel"),a=e("human-to-milliseconds"),c=e("libp2p-crypto"),u=e("err-code"),l=n("ipfs:name");l.error=n("ipfs:name:error");const f=e("./name-pubsub"),h=e("../utils"),d=e("../ipns/path");t.exports=function(e){return{publish:i(((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=!(!1===(r=r||{}).resolve),f=r.lifetime||"24h",p=r.key||"self";if(!e.isOnline()){const e=h.OFFLINE_ERROR;return l.error(e),n(u(e,"OFFLINE_ERROR"))}try{t=h.normalizePath(t)}catch(e){return l.error(e),n(e)}o([e=>a(f,e),t=>((e,t,r)=>{if("self"===t)return r(null,e._peerInfo.id.privKey);const n=e._options.pass;s([r=>e._keychain.exportKey(t,n,r),(e,t)=>c.keys.__import__(e,n,t)],((e,t)=>e?(l.error(e),r(u(e,"ERR_CANNOT_GET_KEY"))):r(null,t)))})(e,p,t),r=>"true"===i.toString()?d.resolvePath(e,t,r):r()],((r,i)=>{if(r)return l.error(r),n(r);const s=i[0].toFixed(6),o=i[1];e._ipns.publish(o,t,s,n)}))})),resolve:i(((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=(r=r||{}).nocache&&"true"===r.nocache.toString(),s=r.recursive&&"true"===r.recursive.toString(),o=e._options.offline;if(!e.isOnline()&&!o){const e=h.OFFLINE_ERROR;return l.error(e),n(u(e,"OFFLINE_ERROR"))}if(o&&i){const e="cannot specify both offline and nocache";return l.error(e),n(u(new Error(e),"ERR_NOCACHE_AND_OFFLINE"))}t||(t=e._peerInfo.id.toB58String()),t.startsWith("/ipns/")||(t=`/ipns/${t}`);const a={nocache:i,recursive:s};e._ipns.resolve(t,a,n)})),pubsub:f(e)}}}}},{package:"3box>ipfs"}],[4669,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(){throw new Error("Key management requires '--pass ...' option")}t.exports=class{static get options(){n()}static generateOptions(){n()}createKey(){n()}listKeys(){n()}findKeyById(){n()}findKeyByName(){n()}renameKey(){n()}removeKey(){n()}exportKey(){n()}importKey(){n()}importPeer(){n()}get cms(){n()}}}}},{package:"3box>ipfs"}],[4670,{"async/parallel":1873,"async/setImmediate":1878,"async/waterfall":1884,buffer:2132,cids:2169,"err-code":2406,"ipfs-unixfs":4586,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("async/waterfall"),i=e("async/parallel"),s=e("async/setImmediate"),o=e("promisify-es6"),a=e("ipld-dag-pb"),c=a.DAGNode,u=a.DAGLink,l=e("cids"),f=e("multihashes"),h=e("multicodec"),d=e("ipfs-unixfs"),p=e("err-code");function g(e,t,n){switch(t){case"json":return function(e,t){let n,i;try{const t=JSON.parse(e.toString());i=(t.Links||[]).map((e=>new u(e.Name||e.name,e.Size||e.size,f.fromB58String(e.Hash||e.hash||e.multihash)))),n=r.from(t.Data)}catch(e){return t(new Error("failed to parse JSON: "+e))}try{t(null,c.create(n,i))}catch(e){t(e)}}(e,n);case"protobuf":return function(e,t){let r;try{r=a.util.deserialize(e)}catch(e){return t(e)}t(null,r)}(e,n);default:n(new Error(`unkown encoding: ${t}`))}}function b(e,t=[]){for(let r in e){const n=e[r];if("/"===r&&1===Object.keys(e).length)try{t.push(new u("",0,new l(n)));continue}catch(e){}l.isCID(n)?t.push(new u("",0,n)):(Array.isArray(n)&&b(n,t),"object"!=typeof n||n instanceof String||b(n,t))}return t}t.exports=function(e){function t(t){return(r,i,s)=>{"function"==typeof i&&(s=i,i={}),i=i||{},n([t=>{e.object.get(r,i,t)},(r,n)=>{t(r,((t,r)=>{if(t)return n(t);e._ipld.put(r,h.DAG_PB,{cidVersion:0,hashAlg:h.SHA2_256}).then((t=>{!1!==i.preload&&e._preload(t),n(null,t)}),(e=>n(e)))}))}],s)}}return{new:o(((t,n,i)=>{let o,a;if("function"==typeof t&&(i=t,t=undefined,n={}),"function"==typeof n&&(i=n,n={}),n=n||{},t){if("unixfs-dir"!==t)return s((()=>i(new Error("unknown template"))));o=new d("directory").marshal()}else o=r.alloc(0);try{a=c.create(o)}catch(e){return i(e)}e._ipld.put(a,h.DAG_PB,{cidVersion:0,hashAlg:h.SHA2_256}).then((t=>{!1!==n.preload&&e._preload(t),i(null,t)}),(e=>i(e)))})),put:o(((t,n,i)=>{"function"==typeof n&&(i=n,n={});const s=(n=n||{}).enc;let o;if(r.isBuffer(t))if(s)g(t,s,((e,t)=>{if(e)return i(e);o=t,a()}));else{try{o=c.create(t)}catch(e){return i(e)}a()}else if(c.isDAGNode(t))o=t,a();else{if("object"!=typeof t)return i(new Error("obj not recognized"));try{o=c.create(t.Data,t.Links)}catch(e){return i(e)}a()}function a(){e._ipld.put(o,h.DAG_PB,{cidVersion:0,hashAlg:h.SHA2_256}).then((t=>{!1!==n.preload&&e._preload(t),i(null,t)}),(e=>i(e)))}})),get:o(((t,n,i)=>{let o,a;"function"==typeof n&&(i=n,n={}),n=n||{};try{o=function(e,t){if("string"==typeof e)return"base58"!==t&&t?r.from(e,t):e;if(r.isBuffer(e))return e;if(l.isCID(e))return e.buffer;throw new Error("unsupported multihash")}(t,n.enc)}catch(e){return s((()=>i(p(e,"ERR_INVALID_MULTIHASH"))))}try{a=new l(o)}catch(e){return s((()=>i(p(e,"ERR_INVALID_CID"))))}1===n.cidVersion&&(a=a.toV1()),!1!==n.preload&&e._preload(a),e._ipld.get(a).then((e=>i(null,e)),(e=>i(e)))})),data:o(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),e.object.get(t,r,((e,t)=>{if(e)return n(e);n(null,t.Data)}))})),links:o(((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=new l(t);e.dag.get(i,r,((e,t)=>{if(e)return n(e);if("raw"===i.codec)return n(null,[]);if("dag-pb"===i.codec)return n(null,t.value.Links);if("dag-cbor"===i.codec){const e=b(t);return n(null,e)}n(new Error(`Cannot resolve links from codec ${i.codec}`))}))})),stat:o(((t,r,s)=>{"function"==typeof r&&(s=r,r={}),r=r||{},n([n=>e.object.get(t,r,n),(e,t)=>{t(null,{node:e,serialized:a.util.serialize(e)})},({node:e,serialized:t},r)=>{i({serialized:e=>e(null,t),cid:e=>a.util.cid(t,{cidVersion:0}).then((t=>e(null,t)),e),node:t=>t(null,e)},r)}],((e,t)=>{if(e)return s(e);const r=t.serialized.length,n=t.node.Links.reduce(((e,t)=>e+t.Tsize),0);s(null,{Hash:t.cid.toBaseEncodedString(),NumLinks:t.node.Links.length,BlockSize:r,LinksSize:r-t.node.Data.length,DataSize:t.node.Data.length,CumulativeSize:r+n})}))})),patch:o({addLink(e,r,n,i){t(((e,t)=>{c.addLink(e,r).then((e=>{t(null,e)}),t)}))(e,n,i)},rmLink(e,r,n,i){t(((e,t)=>{r=r.Name||r.name;try{e=c.rmLink(e,r)}catch(e){return t(e)}t(null,e)}))(e,n,i)},appendData(e,n,i,s){t(((e,t)=>{const i=r.concat([e.Data,n]);try{e=c.create(i,e.Links)}catch(e){return t(e)}t(null,e)}))(e,i,s)},setData(e,r,n,i){t(((e,t)=>{try{e=c.create(r,e.Links)}catch(e){return t(e)}t(null,e)}))(e,n,i)}})}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4671,{"./pin.proto":4673,"async/eachOfSeries":1842,"async/someSeries":1881,buffer:2132,cids:2169,fnv1a:4343,"ipld-dag-pb":4723,multicodec:5235,multihashes:5250,protons:5450,varint:6042},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("multihashes"),i=e("cids"),s=e("protons"),o=e("fnv1a"),a=e("varint"),{DAGNode:c,DAGLink:u}=e("ipld-dag-pb"),l=e("multicodec"),f=e("async/someSeries"),h=e("async/eachOfSeries"),d=e("./pin.proto"),p=n.fromB58String("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),g=s(d);function b(e){return new i(e).toBaseEncodedString()}t.exports=function(e){const t={hasDescendant:(t,n,s)=>{const o={};return(i.isCID(n)||r.isBuffer(n))&&(n=b(n)),function t(r,i){f(r.Links,((r,i)=>{const s=r.Hash,a=b(s);return a===n?i(null,!0):a in o?i(null,!1):(o[a]=!0,void e.get(s,"",{preload:!1},((e,r)=>{if(e)return i(e);t(r.value,i)})))}),i)}(t,s)},storeSet:(n,s)=>{const o=n.map((e=>(("string"==typeof e||r.isBuffer(e))&&(e=new i(e)),{key:e,data:null})));t.storeItems(o,((t,r)=>{if(t)return s(t);e.put(r,{version:0,format:l.DAG_PB,hashAlg:l.SHA2_256,preload:!1},((e,t)=>{if(e)return s(e,t);s(null,{node:r,cid:t})}))}))},storeItems:(t,n)=>function t(n,i,s){const f=g.Set.encode({version:1,fanout:256,seed:i}),d=r.concat([r.from(a.encode(f.length)),f]),m=[];for(let e=0;e<256;e++)m.push(new u("",1,p));if(n.length<=8192){const e=n.map((e=>({link:new u("",1,e.key),data:e.data||r.alloc(0)}))).sort(((e,t)=>r.compare(e.link.Hash.buffer,t.link.Hash.buffer))),t=m.concat(e.map((e=>e.link))),i=r.concat([d].concat(e.map((e=>e.data))));let o;try{o=c.create(i,t)}catch(e){return s(e)}return s(null,o)}{const a=n.reduce(((e,t)=>{const n=function(e,t){const n=r.alloc(4);n.writeUInt32LE(e,0);const i=r.concat([n,r.from(b(t))]);return o(i.toString("binary"))}(i,t.key)%256;return e[n]=n in e?e[n].concat([t]):[t],e}),{});h(a,((r,n,s)=>{t(r,i+1,((t,r)=>function(t,r,n,i){if(t)return i(t);const s={version:0,format:l.DAG_PB,hashAlg:l.SHA2_256,preload:!1};e.put(r,s,((e,t)=>{if(e)return i(e);m[n]=new u("",r.size,t),i(null)}))}(t,r,n,s)))}),(e=>{if(e)return s(e);let t;try{t=c.create(d,m)}catch(e){return s(e)}return s(null,t)}))}}(t,0,n),loadSet:(r,n,i)=>{const s=r.Links.find((e=>e.Name===n));if(!s)return i(new Error("No link found with name "+n));e.get(s.Hash,"",{preload:!1},((e,r)=>{if(e)return i(e);const n=[];t.walkItems(r.value,(e=>n.push(e.Hash.buffer)),(e=>e?i(e):i(null,n)))}))},walkItems:(r,n,i)=>{let s;try{s=function(e){const t=e.Data,r=a.decode(t),n=a.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");const i=t.slice(n,r+n),s=g.Set.decode(i);if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:t.slice(r+n)}}(r)}catch(e){return i(e)}h(r.Links,((r,i,o)=>{if(i<s.header.fanout){const i=r.Hash.buffer;if(!p.equals(i))return e.get(i,"",{preload:!1},((e,r)=>{if(e)return o(e);t.walkItems(r.value,n,o)}))}else n(r,i,s.data);o(null)}),i)}};return t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4672,{"../utils":4708,"./pin-set":4671,"async/detectLimit":1837,"async/eachLimit":1839,"async/map":1869,"async/mapSeries":1871,"async/parallel":1873,"async/series":1877,"async/setImmediate":1878,"async/waterfall":1884,buffer:2132,cids:2169,"err-code":2406,"interface-datastore":4460,"ipld-dag-pb":4723,multibase:5232,multicodec:5235,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("promisify-es6"),{DAGNode:i,DAGLink:s,util:o}=e("ipld-dag-pb"),a=e("cids"),c=e("async/map"),u=e("async/mapSeries"),l=e("async/series"),f=e("async/parallel"),h=e("async/eachLimit"),d=e("async/waterfall"),p=e("async/detectLimit"),g=e("async/setImmediate"),{Key:b}=e("interface-datastore"),m=e("err-code"),y=e("multibase"),_=e("multicodec"),w=e("./pin-set"),{resolvePath:k}=e("../utils"),v=new b("/local/pins");function E(e){return new a(e).toBaseEncodedString()}function x(e){return m(new Error(`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}t.exports=e=>{const t=e._repo,b=e.dag,S=w(b),R={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};let A=new Set,I=new Set;const N=()=>Array.from(I).map((e=>new a(e).buffer));function O(n){let o,c,u;l([e=>d([e=>S.storeSet(Array.from(A).map((e=>new a(e).buffer)),e),({node:e,cid:t},r)=>{try{r(null,new s(R.direct,e.size,t))}catch(e){r(e)}},(e,t)=>{o=e,t(null)}],e),e=>d([e=>S.storeSet(N(),e),({node:e,cid:t},r)=>{try{r(null,new s(R.recursive,e.size,t))}catch(e){r(e)}},(e,t)=>{c=e,t(null)}],e),e=>{let t;try{t=i.create(r.alloc(0))}catch(t){return e(t)}b.put(t,{version:0,format:_.DAG_PB,hashAlg:_.SHA2_256,preload:!1},e)},e=>{let t;try{t=i.create(r.alloc(0),[o,c])}catch(t){return e(t)}u=t,b.put(u,{version:0,format:_.DAG_PB,hashAlg:_.SHA2_256,preload:!1},((t,r)=>{t||(u.multihash=r.buffer),e(t)}))},e=>t.closed?t.open(e):e(null,null),e=>t.datastore.put(v,u.multihash,e)],((t,r)=>t?n(t):(e.log(`Flushed pins with root: ${u}`),n(null,u))))}const D={add:n(((t,r,n)=>{"function"==typeof r&&(n=r,r={});const i=null==(r=r||{}).recursive||r.recursive;k(e.object,t,((e,t)=>{if(e)return n(e);c(t,((e,t)=>{const n=E(e);if(i){if(I.has(n))return t(null,n);b._getRecursive(n,{preload:r.preload},(e=>e?t(e):t(null,n)))}else{if(I.has(n))return t(new Error(`${n} already pinned recursively`));if(A.has(n))return t(null,n);b.get(new a(e),{preload:r.preload},(e=>e?t(e):t(null,n)))}}),((e,t)=>{if(e)return n(e);const r=i?I:A;t.forEach((e=>r.add(e))),O(((e,r)=>{if(e)return n(e);n(null,t.map((e=>({hash:e}))))}))}))}))})),rm:n(((t,r,n)=>{"function"==typeof r&&(n=r);const i=null==(r=r||{}).recursive||r.recursive;if(r.cidBase&&!y.names.includes(r.cidBase))return g((()=>{n(m(new Error("invalid multibase"),"ERR_INVALID_MULTIBASE"))}));k(e.object,t,((t,r)=>{if(t)return n(t);c(r,((e,t)=>{D._isPinnedWithType(e,R.all,((r,n)=>{if(r)return t(r);const{pinned:s,reason:o}=n,a=E(e);if(!s)return t(new Error(`${a} is not pinned`));switch(o){case R.recursive:return i?t(null,a):t(new Error(`${a} is pinned recursively`));case R.direct:return t(null,a);default:return t(new Error(`${a} is pinned indirectly under ${o}`))}}))}),((t,r)=>{if(t)return n(t);r.forEach((e=>{i&&I.has(e)?I.delete(e):A.delete(e)})),O(((t,i)=>{if(t)return n(t);e.log(`Removed pins: ${r}`),n(null,r.map((e=>({hash:e}))))}))}))}))})),ls:n(((t,r,n)=>{let i=R.all;if("function"==typeof t&&(n=t,r={},t=null),"function"==typeof r&&(n=r),t&&t.type&&(r=t,t=null),(r=r||{}).type){if("string"!=typeof r.type)return g((()=>n(x(r.type))));i=r.type.toLowerCase()}if(!Object.keys(R).includes(i))return g((()=>n(x(i))));if(t)d([r=>k(e.object,t,r),(e,t)=>u(e,((e,t)=>D._isPinnedWithType(e,R.all,t)),t),(e,t)=>{if(!(e=e.filter((e=>e.pinned)).map((({key:e,reason:t})=>{switch(t){case R.direct:case R.recursive:return{hash:e,type:t};default:return{hash:e,type:`${R.indirect} through ${t}`}}}))).length)return t(new Error("Path is not pinned"));t(null,e)}],n);else{let e=[];i!==R.direct&&i!==R.all||(e=e.concat(Array.from(A).map((e=>({type:R.direct,hash:e}))))),i!==R.recursive&&i!==R.all||(e=e.concat(Array.from(I).map((e=>({type:R.recursive,hash:e}))))),i===R.indirect||i===R.all?function(e){const t=new Set;h(N(),300,((e,r)=>{b._getRecursive(e,((e,n)=>{if(e)return r(e);c(n,((e,t)=>o.cid(o.serialize(e),{cidVersion:0}).then((e=>t(null,e)),t)),((e,n)=>{if(e)return r(e);n.map((e=>e.toString())).filter((e=>!I.has(e))).forEach((e=>t.add(e))),r()}))}))}),(r=>{if(r)return e(r);e(null,Array.from(t))}))}(((t,r)=>t?n(t):(e=e.filter((({hash:e})=>!r.includes(e)||r.includes(e)&&!A.has(e))).concat(r.map((e=>({type:R.indirect,hash:e})))),n(null,e)))):n(null,e)}})),_isPinnedWithType:n(((e,t,r)=>{const n=E(e),{recursive:i,direct:s,all:o}=R;return t!==i&&t!==o||!I.has(n)?t===i?r(null,{key:n,pinned:!1}):t!==s&&t!==o||!A.has(n)?t===s?r(null,{key:n,pinned:!1}):void p(N().map((e=>new a(e))),300,((e,t)=>{d([t=>b.get(e,"",{preload:!1},t),(e,t)=>t(null,e.value),(e,t)=>S.hasDescendant(e,n,t)],t)}),((e,t)=>r(e,{key:n,pinned:Boolean(t),reason:t}))):r(null,{key:n,pinned:!0,reason:s}):r(null,{key:n,pinned:!0,reason:i})})),_load:n((r=>{d([e=>t.closed?t.datastore.open(e):e(null,null),(e,r)=>t.datastore.has(v,r),(e,t)=>e?t():t(new Error("No pins to load")),e=>t.datastore.get(v,e),(e,t)=>{b.get(new a(e),"",{preload:!1},t)}],((t,n)=>{if(t)return"No pins to load"===t.message?(e.log("No pins to load"),r()):r(t);f([e=>S.loadSet(n.value,R.recursive,e),e=>S.loadSet(n.value,R.direct,e)],((t,n)=>{if(t)return r(t);const[i,s]=n;return A=new Set(s.map(E)),I=new Set(i.map(E)),e.log("Loaded pins from the datastore"),r(null)}))}))}))};return D}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4673,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports='\n  syntax = "proto2";\n\n  package ipfs.pin;\n\n  option go_package = "pb";\n\n  message Set {\n    optional uint32 version = 1;\n    optional uint32 fanout = 2;\n    optional fixed32 seed = 3;\n  }\n'}}},{package:"3box>ipfs"}],[4674,{"../utils":4708,debug:2304,"peer-id":5420,"pull-pushable":5481,"pull-stream":5487},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("../utils").OFFLINE_ERROR,s=e("peer-id"),o=e("pull-stream"),a=e("pull-pushable"),c=n("ipfs:pingPullStream");function u(e){return Object.assign({success:!0,time:0,text:""},e)}c.error=n("ipfs:pingPullStream:error"),t.exports=function(e){return(t,r)=>{if(!e.isOnline())return o.error(new Error(i));r=Object.assign({count:10},r);const n=a();return function(e,t,r,n){let i,o;try{i=s.createFromB58String(r)}catch(e){return n(e)}try{o=e.peerBook.get(i)}catch(s){return c("Peer not found in peer book, trying peer routing"),t.push(u({text:`Looking up peer ${r}`})),e.peerRouting.findPeer(i,n)}n(null,o)}(e.libp2p,n,t,((t,i)=>{if(t)return c.error(t),void n.end(t);!function(e,t,r,n,i){e.ping(n,((e,s)=>{if(e)return i(e);let o=0,a=0;t.push(u({text:`PING ${n.id.toB58String()}`})),s.on("ping",(e=>{if(t.push(u({time:e})),a+=e,o++,o>=r){const e=a/r;s.stop(),t.push(u({text:`Average latency: ${e}ms`})),t.end()}})),s.on("error",(e=>{c.error(e),s.stop(),i(e)})),s.start()}))}(e.libp2p,n,r.count,i,(e=>{e&&(c.error(e),n.push(u({success:!1,text:e.toString()})),n.end())}))})),n}}}}},{package:"3box>ipfs"}],[4675,{"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream-to-stream");t.exports=function(e){return(t,r)=>n.source(e.pingPullStream(t,r))}}}},{package:"3box>ipfs"}],[4676,{"promisify-es6":5434,"pull-stream/pull":5488},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("pull-stream/pull");t.exports=function(e){return n(((t,r,n)=>{"function"==typeof r&&(n=r,r={}),i(e.pingPullStream(t,r),i.collect(n))}))}}}},{package:"3box>ipfs"}],[4677,{"./no-keychain":4669,"async/waterfall":1884,"libp2p-keychain":4921,"merge-options":5209,multiaddr:5224,"peer-id":5420,"peer-info":5421},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("peer-id"),i=e("peer-info"),s=e("multiaddr"),o=e("async/waterfall"),a=e("libp2p-keychain"),c=e("merge-options"),u=e("./no-keychain");t.exports=function(e){return t=>{e.log("pre-start");const r=e._options.pass;o([t=>e._repo.config.get(t),(t,r)=>{if(!e._options.config)return r(null,t);t=c(t,e._options.config),e.config.replace(t,(e=>{if(e)return r(e);r(null,t)}))},(t,r)=>{if(t.Keychain)return r(null,t);t.Keychain=a.generateOptions(),e.config.set("Keychain",t.Keychain,(n=>{e.log("using default keychain options"),r(n,t)}))},(t,n)=>{if(e._keychain);else if(r){const n=Object.assign({passPhrase:r},t.Keychain);e._keychain=new a(e._repo.keys,n),e.log("keychain constructed")}else e._keychain=new u,e.log("no keychain, use --pass");n(null,t)},(e,t)=>{const r=e.Identity.PrivKey;n.createFromPrivKey(r,((r,n)=>{t(r,e,n)}))},(t,n,i)=>{if(!r)return i(null,t,n);e._keychain.findKeyByName("self",(r=>{if(r)return e.log('Creating "self" key'),e._keychain.importPeer("self",n,(e=>i(e,t,n)));i(null,t,n)}))},(t,r,n)=>{e.log("peer created"),e._peerInfo=new i(r),t.Addresses&&t.Addresses.Swarm&&t.Addresses.Swarm.forEach((t=>{let r=s(t);r.getPeerId()&&(r=r.encapsulate("/ipfs/"+e._peerInfo.id.toB58String())),e._peerInfo.multiaddrs.add(r)})),n()},t=>e.pin._load(t)],t)}}}}},{package:"3box>ipfs"}],[4678,{"async/setImmediate":1878,"err-code":2406,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("async/setImmediate"),s=e("err-code"),o=()=>s(new Error("pubsub experiment is not enabled"),"ERR_PUBSUB_DISABLED");t.exports=function(e){return{subscribe:(t,r,n,s)=>("function"==typeof n&&(s=n,n={}),e._options.EXPERIMENTAL.pubsub?s?void e.libp2p.pubsub.subscribe(t,n,r,s):new Promise(((i,s)=>{e.libp2p.pubsub.subscribe(t,n,r,(e=>{if(e)return s(e);i()}))})):s?i((()=>s(o()))):Promise.reject(o())),unsubscribe:(t,r,n)=>e._options.EXPERIMENTAL.pubsub?(e.libp2p.pubsub.unsubscribe(t,r),n?void i((()=>n())):Promise.resolve()):n?i((()=>n(o()))):Promise.reject(o()),publish:n(((t,r,n)=>{if(!e._options.EXPERIMENTAL.pubsub)return i((()=>n(o())));e.libp2p.pubsub.publish(t,r,n)})),ls:n((t=>{if(!e._options.EXPERIMENTAL.pubsub)return i((()=>t(o())));e.libp2p.pubsub.ls(t)})),peers:n(((t,r)=>{if(!e._options.EXPERIMENTAL.pubsub)return i((()=>r(o())));e.libp2p.pubsub.peers(t,r)})),setMaxListeners(t){if(!e._options.EXPERIMENTAL.pubsub)throw o();e.libp2p.pubsub.setMaxListeners(t)}}}}}},{package:"3box>ipfs"}],[4679,{"ipfs-repo":4553,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("ipfs-repo").repoVersion;t.exports=function(e){return{init:(e,t,r)=>{},version:n((t=>{e._repo._isInitialized((r=>{if(r){return[/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((e=>e.test(r.message)))?t(null,i):t(r)}e._repo.version.get(t)}))})),gc:n(((e,t)=>{"function"==typeof e&&(t=e,e={}),t(new Error("Not implemented"))})),stat:n(((t,r)=>{"function"==typeof t&&(r=t,t={}),e._repo.stat(t,((e,t)=>{if(e)return r(e);r(null,{numObjects:t.numObjects,repoSize:t.repoSize,repoPath:t.repoPath,version:t.version.toString(),storageMax:t.storageMax})}))})),path:()=>e._repo.path}}}}},{package:"3box>ipfs"}],[4680,{"../../utils/cid":4709,"async/setImmediate":1878,cids:2169,"is-ipfs":4746,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("is-ipfs"),s=e("async/setImmediate"),o=e("cids"),{cidToString:a}=e("../../utils/cid");t.exports=e=>n((async(t,r,n)=>{if("function"==typeof r&&(n=r,r={}),r=r||{},!i.path(t))return s((()=>n(new Error("invalid argument "+t))));if(!i.ipfsPath(t))return s((()=>n(new Error("resolve non-IPFS names is not implemented"))));const c=t.split("/"),u=new o(c[2]);if(3===c.length)return s((()=>n(null,`/ipfs/${a(u,{base:r.cidBase})}`)));const l=c.slice(3).join("/"),f=e._ipld.resolve(u,l);let h=u,d=l;try{for await(const e of f){if(""===e.remainderPath){o.isCID(e.value)&&(h=e.value,d=""),e.value&&o.isCID(e.value.Hash)&&(h=e.value.Hash,d="");break}h=e.value,d=e.remainderPath}}catch(e){return n(e)}return n(null,`/ipfs/${a(h,{base:r.cidBase})}${d?"/"+d:""}`)}))}}},{package:"3box>ipfs"}],[4681,{"../ipns":4688,"../ipns/routing/config":4693,"./libp2p":4666,"async/series":1877,"async/setImmediate":1878,"ipfs-bitswap":4476,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/series"),i=e("ipfs-bitswap"),s=e("async/setImmediate"),o=e("promisify-es6"),a=e("../ipns"),c=e("../ipns/routing/config"),u=e("./libp2p");t.exports=e=>o((t=>{const r=r=>{if(r)return s((()=>e.emit("error",r))),t(r);e.state.started(),s((()=>e.emit("start"))),t()};if("stopped"!==e.state.state())return r(new Error(`Not able to start from state: ${e.state.state()}`));e.log("starting"),e.state.start(),n([t=>{e._repo.closed?e._repo.open(t):t()},t=>{e._repo.config.get(((r,n)=>{if(r)return t(r);const i=u(e,n);i.start((r=>{if(r)return t(r);e.libp2p=i,t()}))}))},t=>{const r=c(e);e._ipns=new a(r,e._repo.datastore,e._peerInfo,e._keychain,e._options),e._bitswap=new i(e.libp2p,e._repo.blocks,{statsEnabled:!0}),e._bitswap.start(),e._blockService.setExchange(e._bitswap),e._preload.start(),e._ipns.republisher.start(),e._mfsPreload.start(t)}],r)}))}}},{package:"3box>ipfs"}],[4682,{"./bitswap":4630,"./repo":4679,"bignumber.js":4607,"err-code":2406,"human-to-milliseconds":4435,"promisify-es6":5434,"pull-pushable":5481,"pull-stream-to-stream":5486},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("bignumber.js"),s=e("pull-pushable"),o=e("human-to-milliseconds"),a=e("pull-stream-to-stream"),c=e("err-code");function u(e,t){return new Promise(((r,n)=>{let s;s=t.peer?e.libp2p.stats.forPeer(t.peer):t.proto?e.libp2p.stats.forProtocol(t.proto):e.libp2p.stats.global,r(s?{totalIn:s.snapshot.dataReceived,totalOut:s.snapshot.dataSent,rateIn:new i(s.movingAverages.dataReceived[6e4].movingAverage()/60),rateOut:new i(s.movingAverages.dataSent[6e4].movingAverage()/60)}:{totalIn:new i(0),totalOut:new i(0),rateIn:new i(0),rateOut:new i(0)})}))}t.exports=function(t){const r=e=>{e=e||{};let r=null,n=s(!0,(()=>{r&&clearInterval(r)}));return e.poll?o(e.interval||"1s",((i,s)=>{if(i)return n.end(c(i,"ERR_INVALID_POLL_INTERVAL"));r=setInterval((()=>{u(t,e).then((e=>n.push(e))).catch((e=>n.end(e)))}),s)})):u(t,e).then((e=>{n.push(e),n.end()})).catch((e=>n.end(e))),n.source};return{bitswap:e("./bitswap")(t).stat,repo:e("./repo")(t).stat,bw:n(((e,r)=>{"function"==typeof e&&(r=e,e={}),u(t,e=e||{}).then((e=>r(null,e))).catch((e=>r(e)))})),bwReadableStream:e=>a.source(r(e)),bwPullStream:r}}}}},{package:"3box>ipfs"}],[4683,{"async/parallel":1873,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/parallel"),i=e("promisify-es6");t.exports=e=>i((t=>(t=t||function(){},e.log("stop"),"stopped"===e.state.state()?t(new Error("Already stopped")):"running"!==e.state.state()?t(new Error("Not able to stop from state: "+e.state.state())):(e.state.stop(),e._blockService.unsetExchange(),e._bitswap.stop(),e._preload.stop(),void n([t=>e._ipns.republisher.stop(t),t=>e._mfsPreload.stop(t),t=>{const r=e.libp2p;e.libp2p=null,r.stop(t)}],(r=>{e._repo.close((n=>{if(r||n)return e.emit("error",r||n),t(r||n);e.state.stopped(),e.emit("stop"),t()}))}))))))}}},{package:"3box>ipfs"}],[4684,{"../utils":4708,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("../utils").OFFLINE_ERROR;t.exports=function(e){return{peers:n(((t,r)=>{if("function"==typeof t&&(r=t,t={}),t=t||{},!e.isOnline())return r(new Error(i));const n=t.v||t.verbose,s=[];Object.values(e._peerInfoBook.getAll()).forEach((e=>{const t=e.isConnected();if(!t)return;const r={addr:t,peer:e.id};n&&(r.latency="unknown"),s.push(r)})),r(null,s)})),addrs:n((t=>{if(!e.isOnline())return t(new Error(i));t(null,Object.values(e._peerInfoBook.getAll()))})),localAddrs:n((t=>{if(!e.isOnline())return t(new Error(i));t(null,e.libp2p.peerInfo.multiaddrs.toArray())})),connect:n(((t,r)=>{if(!e.isOnline())return r(new Error(i));e.libp2p.dial(t,r)})),disconnect:n(((t,r)=>{if(!e.isOnline())return r(new Error(i));e.libp2p.hangUp(t,r)})),filters:n((e=>e(new Error("Not implemented"))))}}}}},{package:"3box>ipfs"}],[4685,{"../../../package.json":4628,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("../../../package.json"),i=e("promisify-es6");t.exports=function(e){return i(((t,r)=>{"function"==typeof t&&(r=t,t={}),e.repo.version(((e,t)=>{if(e)return r(e);r(null,{version:n.version,repo:t,commit:""})}))}))}}}},{package:"3box>ipfs"}],[4686,{mafmt:5206,multiaddr:5224,superstruct:5918},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multiaddr"),i=e("mafmt"),{struct:s,superstruct:o}=e("superstruct"),{optional:a,union:c}=s,u=o({types:{multiaddr:e=>{if(null===e)return`multiaddr invalid, value must be a string, Buffer, or another Multiaddr got ${e}`;try{n(e)}catch(e){return`multiaddr invalid, ${e.message}`}return!0},"multiaddr-ipfs":e=>!!i.IPFS.matches(e)||"multiaddr IPFS invalid"}}),l=u({repo:a(u("object|string")),repoOwner:"boolean?",preload:u({enabled:"boolean?",addresses:a(u(["multiaddr"])),interval:"number?"},{enabled:!0,interval:3e4}),init:a(c(["boolean",u({bits:"number?",emptyRepo:"boolean?",privateKey:a(u("object|string")),pass:"string?"})])),start:"boolean?",offline:"boolean?",pass:"string?",silent:"boolean?",relay:"object?",EXPERIMENTAL:a(u({pubsub:"boolean?",ipnsPubsub:"boolean?",sharding:"boolean?",dht:"boolean?"})),connectionManager:"object?",config:a(u({API:"object?",Addresses:a(u({Swarm:a(u(["multiaddr"])),API:"multiaddr?",Gateway:"multiaddr"})),Discovery:a(u({MDNS:a(u({Enabled:"boolean?",Interval:"number?"})),webRTCStar:a(u({Enabled:"boolean?"}))})),Bootstrap:a(u(["multiaddr-ipfs"]))})),ipld:"object?",libp2p:a(c(["function","object"]))},{repoOwner:!0});t.exports={validate:e=>{const[t,r]=l.validate(e);if(t)throw t;return r}}}}},{package:"3box>ipfs"}],[4687,{"./boot":4629,"./components":4662,"./config":4686,"./mfs-preload":4697,"./preload":4698,"./runtime/ipld-nodejs":4703,"./runtime/repo-nodejs":4706,"./state":4707,buffer:2132,cids:2169,debug:2304,events:2133,"ipfs-block-service":4489,ipld:4728,"is-ipfs":4746,"libp2p-crypto":4866,"merge-options":5209,multiaddr:5224,multibase:5232,multicodec:5235,multihashes:5250,"multihashing-async":4611,"peer-book":5419,"peer-id":5420,"peer-info":5421},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipfs-block-service"),i=e("ipld"),s=e("peer-id"),o=e("peer-info"),a=e("libp2p-crypto"),c=e("is-ipfs"),u=e("multiaddr"),l=e("multihashes"),f=e("peer-book"),h=e("multibase"),d=e("multicodec"),p=e("multihashing-async"),g=e("cids"),b=e("debug"),m=e("merge-options"),y=e("events"),_=e("./config"),w=e("./boot"),k=e("./components"),v=e("./runtime/repo-nodejs"),E=e("./preload"),x=e("./mfs-preload"),S=e("./runtime/ipld-nodejs");class R extends y{constructor(t){super();t=_.validate(t||{}),this._options=m({init:!0,start:!0,EXPERIMENTAL:{},preload:{enabled:!0,addresses:["/dnsaddr/node0.preload.ipfs.io/https","/dnsaddr/node1.preload.ipfs.io/https"]}},t),!1===t.init&&(this._options.init=!1),!1!==t.start&&(this._options.start=!0),"string"==typeof t.repo||t.repo===undefined?this._repo=v(t.repo):this._repo=t.repo,this.log=b("ipfs"),this.log.err=b("ipfs:err"),this._peerInfoBook=new f,this._peerInfo=undefined,this._bitswap=undefined,this._blockService=new n(this._repo),this._ipld=new i(S(this._blockService,this._options.ipld,this.log)),this._preload=E(this),this._mfsPreload=x(this),this._ipns=undefined,this._print=this._options.silent?this.log:console.log,this.init=k.init(this),this.preStart=k.preStart(this),this.start=k.start(this),this.stop=k.stop(this),this.shutdown=this.stop,this.isOnline=k.isOnline(this),Object.assign(this,k.filesRegular(this)),this.version=k.version(this),this.id=k.id(this),this.repo=k.repo(this),this.bootstrap=k.bootstrap(this),this.config=k.config(this),this.block=k.block(this),this.object=k.object(this),this.dag=k.dag(this),this.files=k.filesMFS(this),this.libp2p=null,this.swarm=k.swarm(this),this.name=k.name(this),this.bitswap=k.bitswap(this),this.pin=k.pin(this),this.ping=k.ping(this),this.pingPullStream=k.pingPullStream(this),this.pingReadableStream=k.pingReadableStream(this),this.pubsub=k.pubsub(this),this.dht=k.dht(this),this.dns=k.dns(this),this.key=k.key(this),this.stats=k.stats(this),this.resolve=k.resolve(this),this._options.EXPERIMENTAL.pubsub&&this.log("EXPERIMENTAL pubsub is enabled"),this._options.EXPERIMENTAL.ipnsPubsub&&(this._options.EXPERIMENTAL.pubsub||(this.log("EXPERIMENTAL pubsub is enabled to use IPNS pubsub"),this._options.EXPERIMENTAL.pubsub=!0),this.log("EXPERIMENTAL IPNS pubsub is enabled")),this._options.EXPERIMENTAL.sharding&&this.log("EXPERIMENTAL sharding is enabled"),this.state=e("./state")(this),w(this)}}t.exports=R;const A=r;Object.assign(t.exports,{crypto:a,isIPFS:c,Buffer:A,CID:g,multiaddr:u,multibase:h,multihash:l,multihashing:p,multicodec:d,PeerId:s,PeerInfo:o}),t.exports.createNode=e=>new R(e)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4688,{"./path":4689,"./publisher":4690,"./republisher":4691,"./resolver":4692,"async/series":1877,debug:2304,"err-code":2406,"peer-id":5420,receptacle:5729},function(){with(this)return function(){"use strict";return function(e,t,r){const{createFromPrivKey:n}=e("peer-id"),i=e("async/series"),s=e("receptacle"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns");c.error=a("ipfs:ipns:error");const u=e("./publisher"),l=e("./republisher"),f=e("./resolver"),h=e("./path");(t.exports=class{constructor(e,t,r,n,i){this.publisher=new u(e,t),this.republisher=new l(this.publisher,t,r,n,i),this.resolver=new f(e),this.cache=new s({max:1e3}),this.routing=e}publish(e,t,r,s){i([t=>n(e.bytes,t),n=>this.publisher.publishWithEOL(e,t,r,n)],((e,n)=>{if(e)return c.error(e),s(e);c(`IPNS value ${t} was published correctly`);const i=n[0].toB58String(),o=parseFloat(r),a=o<6e4?o:6e4;this.cache.set(i,t,{ttl:a}),c(`IPNS value ${t} was cached correctly`),s(null,{name:i,value:t})}))}resolve(e,t,r){if("string"!=typeof e){const e="name received is not valid";return c.error(e),r(o(new Error(e),"ERR_INVALID_NAME"))}if("function"==typeof t&&(r=t,t={}),!(t=t||{}).nocache&&!t.recursive){const t=e.split("/")[2],n=this.cache.get(t);if(n)return r(null,{path:n})}this.resolver.resolve(e,t,((t,n)=>{if(t)return c.error(t),r(t);c(`IPNS record from ${e} was resolved correctly`),r(null,{path:n})}))}initializeKeyspace(e,t,r){this.publisher.publish(e,t,r)}}).path=h}}},{package:"3box>ipfs"}],[4689,{debug:2304,"is-ipfs":4746},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("is-ipfs"),i=e("debug"),s=i("ipfs:ipns:path");s.error=i("ipfs:ipns:path:error");t.exports={resolvePath:(e,t,r)=>{if(n.ipnsPath(t))return s(`resolve ipns path ${t}`),e._ipns.resolve(t,r);e.dag.get(t.substring("/ipfs/".length),((e,t)=>e?r(e):r(null,t)))}}}}},{package:"3box>ipfs"}],[4690,{"async/series":1877,debug:2304,"err-code":2406,"interface-datastore":4460,ipns:4731,"peer-id":5420},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("peer-id"),{Key:i}=e("interface-datastore"),s=e("async/series"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns:publisher");c.error=a("ipfs:ipns:publisher:error");const u=e("ipns");t.exports=class{constructor(e,t){this._routing=e,this._datastore=t}publishWithEOL(e,t,r,i){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return c.error(e),i(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}n.createFromPrivKey(e.bytes,((n,s)=>{if(n)return i(n);this._updateOrCreateRecord(e,t,r,s,((e,t)=>{if(e)return i(e);this._putRecordToRouting(t,s,i)}))}))}publish(e,t,r){this.publishWithEOL(e,t,36e5,r)}_putRecordToRouting(e,t,r){if(!n.isPeerId(t)){const e="peerId received is not valid";return c.error(e),r(o(new Error(e),"ERR_INVALID_PEER_ID"))}const i=t._pubKey;u.embedPublicKey(i,e,((n,o)=>{if(n)return r(n);let a;try{a=u.getIdKeys(t.toBytes())}catch(n){return c.error(n),r(n)}s([r=>this._publishEntry(a.routingKey,o||e,t,r),e=>this._publishPublicKey(a.routingPubKey,i,t,e)],(t=>{if(t)return c.error(t),r(t);r(null,o||e)}))}))}_publishEntry(e,t,r,n){if(!i.isKey(e)){const e="datastore key does not have a valid format";return c.error(e),n(o(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}let s;try{s=u.marshal(t)}catch(e){return c.error(e),n(e)}this._routing.put(e.toBuffer(),s,((t,r)=>{if(t){const t=`ipns record for ${e.toString()} could not be stored in the routing`;return c.error(t),n(o(new Error(t),"ERR_PUTTING_TO_ROUTING"))}c(`ipns record for ${e.toString()} was stored in the routing`),n(null,r)}))}_publishPublicKey(e,t,r,n){if(!i.isKey(e)){const e="datastore key does not have a valid format";return c.error(e),n(o(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}if(!t||!t.bytes){const e="one or more of the provided parameters are not defined";return c.error(e),n(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}this._routing.put(e.toBuffer(),t.bytes,((t,r)=>{if(t){const t=`public key for ${e.toString()} could not be stored in the routing`;return c.error(t),n(o(new Error(t),"ERR_PUTTING_TO_ROUTING"))}c(`public key for ${e.toString()} was stored in the routing`),n(null,r)}))}_getPublished(e,t,r){if(!n.isPeerId(e)){const e="peerId received is not valid";return c.error(e),r(o(new Error(e),"ERR_INVALID_PEER_ID"))}const i=!1!==(t=t||{}).checkRouting;this._datastore.get(u.getLocalKey(e.id),((t,n)=>{if(t){if("ERR_NOT_FOUND"!==t.code){const t=`unexpected error getting the ipns record ${e.id} from datastore`;return c.error(t),r(o(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE"))}if(!i)return r(o(t));let n;try{n=u.getIdKeys(e.toBytes())}catch(t){return c.error(t),r(t)}this._routing.get(n.routingKey.toBuffer(),((e,t)=>{if(e)return r(e);this._unmarshalData(t,r)}))}else this._unmarshalData(n,r)}))}_unmarshalData(e,t){let r;try{r=u.unmarshal(e)}catch(e){return c.error(e),t(o(e,"ERR_INVALID_RECORD_DATA"))}t(null,r)}_updateOrCreateRecord(e,t,r,i,s){if(!n.isPeerId(i)){const e="peerId received is not valid";return c.error(e),s(o(new Error(e),"ERR_INVALID_PEER_ID"))}this._getPublished(i,{checkRouting:!0},((n,a)=>{if(n&&"ERR_NOT_FOUND"!==n.code){const e=`unexpected error when determining the last published IPNS record for ${i.id}`;return c.error(e),s(o(new Error(e),"ERR_DETERMINING_PUBLISHED_RECORD"))}let l=0;a&&a.sequence!==undefined&&(l=a.value.toString()!==t?a.sequence+1:a.sequence),u.create(e,t,l,r,((e,r)=>{if(e){const e=`ipns record for ${t} could not be created`;return c.error(e),s(o(new Error(e),"ERR_CREATING_IPNS_RECORD"))}const n=u.marshal(r);this._datastore.put(u.getLocalKey(i.id),n,((e,n)=>{if(e){const e=`ipns record for ${t} could not be stored in the datastore`;return c.error(e),s(o(new Error(e),"ERR_STORING_IN_DATASTORE"))}c(`ipns record for ${t} was stored in the datastore`),s(null,r)}))}))}))}}}}},{package:"3box>ipfs"}],[4691,{"../../../../is-buffer/index.js":4735,"async/each":1838,"async/waterfall":1884,debug:2304,"err-code":2406,ipns:4731,"libp2p-crypto":4866,"peer-id":5420},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipns"),i=e("libp2p-crypto"),s=e("peer-id"),o=e("err-code"),a=e("debug"),c=e("async/each"),u=e("async/waterfall"),l=a("ipfs:ipns:republisher");l.error=a("ipfs:ipns:republisher:error");t.exports=class{constructor(e,t,r,n,i){this._publisher=e,this._datastore=t,this._peerInfo=r,this._keychain=n,this._options=i,this._republishHandle=null}start(){if(this._republishHandle){const e="already running";throw l.error(e),o(new Error(e),"ERR_REPUBLISH_ALREADY_RUNNING")}const e={_onCancel:null,_timeoutId:null,runPeriodically:(t,r)=>{e._timeoutId=setTimeout((()=>{e._timeoutId=null,t((n=>{if(e._onCancel)return e._onCancel();e.runPeriodically(t,n||r)}))}),r)},cancel:t=>{if(e._timeoutId)return clearTimeout(e._timeoutId),t();e._onCancel=t}},{privKey:t}=this._peerInfo.id,{pass:r}=this._options;e.runPeriodically((e=>{this._republishEntries(t,r,(()=>e(144e5)))}),6e4),this._republishHandle=e}stop(e){const t=this._republishHandle;if(!t){const t="not running";return l.error(t),e(o(new Error(t),"ERR_REPUBLISH_NOT_RUNNING"))}this._republishHandle=null,t.cancel(e)}_republishEntries(e,t,r){this._republishEntry(e,(e=>{if(e){const e="cannot republish entry for the node's private key";l.error(e)}else t?this._keychain.listKeys(((e,n)=>{e?l.error(e):c(n,((e,r)=>{u([r=>this._keychain.exportKey(e.name,t,r),(e,r)=>i.keys.__import__(e,t,r)],((e,t)=>{e?l.error(e):this._republishEntry(t,r)}))}),(e=>{e&&l.error(e),r(null)}))})):r(null)}))}_republishEntry(e,t){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return l.error(e),t(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}u([t=>s.createFromPrivKey(e.bytes,t),(e,t)=>this._getPreviousValue(e,t)],((r,n)=>{if(r)return t("ERR_NO_ENTRY_FOUND"===r.code?null:r);this._publisher.publishWithEOL(e,n,864e5,t)}))}_getPreviousValue(e,t){if(!s.isPeerId(e)){const e="peerId received is not valid";return l.error(e),t(o(new Error(e),"ERR_INVALID_PEER_ID"))}this._datastore.get(n.getLocalKey(e.id),((i,s)=>{if(i&&i.notFound){const r=`no previous entry for record with id: ${e.id}`;return l.error(r),t(o(new Error(r),"ERR_NO_ENTRY_FOUND"))}if(i)return t(i);if(!r.isBuffer(s)){const e="found ipns record that we couldn't process";return l.error(e),t(o(new Error(e),"ERR_INVALID_IPNS_RECORD"))}let a;try{a=n.unmarshal(s)}catch(i){const e="found ipns record that we couldn't convert to a value";return l.error(e),t(o(new Error(e),"ERR_INVALID_IPNS_RECORD"))}t(null,a.value)}))}}}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"3box>ipfs"}],[4692,{debug:2304,"err-code":2406,ipns:4731,"libp2p-crypto":4866,"peer-id":5420},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipns"),i=e("libp2p-crypto"),s=e("peer-id"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns:resolver");c.error=a("ipfs:ipns:resolver:error");t.exports=class{constructor(e){this._routing=e}resolve(e,t,r){if("function"==typeof t&&(r=t,t={}),"string"!=typeof e){const e="one or more of the provided parameters are not valid";return c.error(e),r(o(new Error(e),"ERR_INVALID_PARAMETER"))}const n=(t=t||{}).recursive&&"true"===t.recursive.toString(),i=e.split("/");if(3!==i.length||""!==i[0]){const t=`invalid name syntax for ${e}`;return c.error(t),r(o(new Error(t),"ERR_INVALID_NAME_SYNTAX"))}const s=i[2];let a;n&&(a=32),this.resolver(s,a,((t,n)=>{if(t)return r(t);c(`${e} was locally resolved correctly`),r(null,n)}))}resolver(e,t,r){if(0===t){const e="could not resolve name (recursion limit of 32 exceeded)";return c.error(e),r(o(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT"))}this._resolveName(e,((e,n)=>{if(e)return r(e);const i=n.split("/");if("ipfs"===i[1]||!t)return r(null,n);this.resolver(i[2],t-1,r)}))}_resolveName(e,t){let r;try{r=s.createFromB58String(e)}catch(e){return t(e)}const{routingKey:a,routingPubKey:u}=n.getIdKeys(r.toBytes());this._routing.get(a.toBuffer(),((s,l)=>{if(s){if("ERR_NOT_FOUND"!==s.code){const e=`unexpected error getting the ipns record ${r.id}`;return c.error(e),t(o(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD"))}const n=`record requested was not found for ${e} (${a}) in the network`;return c.error(n),t(o(new Error(n),"ERR_NO_RECORD_FOUND"))}let f;try{f=n.unmarshal(l)}catch(s){const e="found ipns record that we couldn't convert to a value";return c.error(e),t(o(new Error(e),"ERR_INVALID_RECORD_RECEIVED"))}if(f.pubKey)return this._validateRecord(r,f,t);this._routing.get(a.toBuffer(),((n,s)=>{if(n){if("ERR_NOT_FOUND"!==n.code){const e=`unexpected error getting the public key for the ipns record ${r.id}`;return c.error(e),t(o(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY"))}const i=`public key requested was not found for ${e} (${u}) in the network`;return c.error(i),t(o(new Error(i),"ERR_NO_RECORD_FOUND"))}try{r.pubKey=i.keys.unmarshalPublicKey(s)}catch(n){const e="found public key record that we couldn't convert to a value";return c.error(e),t(o(new Error(e),"ERR_INVALID_PUB_KEY_RECEIVED"))}this._validateRecord(r,f,t)}))}))}_validateRecord(e,t,r){n.extractPublicKey(e,t,((e,i)=>{if(e)return r(e);n.validate(i,t,(e=>{if(e)return r(e);r(null,t.value.toString())}))}))}}}}},{package:"3box>ipfs"}],[4693,{"./offline-datastore":4694,"./pubsub-datastore":4695,"datastore-core":2283,dlv:2335},function(){with(this)return function(){"use strict";return function(e,t,r){const{TieredDatastore:n}=e("datastore-core"),i=e("dlv"),s=e("./pubsub-datastore"),o=e("./offline-datastore");t.exports=e=>{const t=[];let r;if(i(e._options,"EXPERIMENTAL.ipnsPubsub",!1)){const n=e.libp2p.pubsub,i=e._repo.datastore,o=e._peerInfo.id;r=new s(n,i,o),t.push(r)}if(i(e._options,"offline")||!i(e._options,"libp2p.dht.enabled",!1)){const r=new o(e._repo);t.push(r)}else t.push(e.libp2p.dht);return new n(t)}}}},{package:"3box>ipfs"}],[4694,{"../../../../../is-buffer/index.js":4735,"./utils":4696,debug:2304,"err-code":2406,"interface-datastore":4460,"libp2p-record":4941},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{Key:n}=e("interface-datastore"),{Record:i}=e("libp2p-record"),{encodeBase32:s}=e("./utils"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns:offline-datastore");c.error=a("ipfs:ipns:offline-datastore:error");t.exports=class{constructor(e){this._repo=e}put(e,t,n){if(!r.isBuffer(e)){const e="Offline datastore key must be a buffer";return c.error(e),n(o(new Error(e),"ERR_INVALID_KEY"))}if(!r.isBuffer(t)){const e="Offline datastore value must be a buffer";return c.error(e),n(o(new Error(e),"ERR_INVALID_VALUE"))}let s;try{s=this._routingKey(e)}catch(e){const t="Not possible to generate the routing key";return c.error(t),n(o(new Error(t),"ERR_GENERATING_ROUTING_KEY"))}const a=new i(e,t);this._repo.datastore.put(s,a.serialize(),n)}get(e,t){if(!r.isBuffer(e)){const e="Offline datastore key must be a buffer";return c.error(e),t(o(new Error(e),"ERR_INVALID_KEY"))}let n;try{n=this._routingKey(e)}catch(e){const r="Not possible to generate the routing key";return c.error(r),t(o(new Error(r),"ERR_GENERATING_ROUTING_KEY"))}this._repo.datastore.get(n,((e,r)=>{if(e)return t(e);let n;try{n=i.deserialize(r)}catch(e){return c.error(e),t(e)}t(null,n.value)}))}_routingKey(e){return new n("/"+s(e),!1)}}}).call(this)}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})}}},{package:"3box>ipfs"}],[4695,{buffer:2132,"class-is":2171,"datastore-pubsub":2299,debug:2304,"err-code":2406,ipns:4731,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipns"),{fromB58String:i,toB58String:s}=e("multihashes"),o=e("datastore-pubsub"),a=e("class-is"),c=e("err-code"),u=e("debug"),l=u("ipfs:ipns:pubsub");l.error=u("ipfs:ipns:pubsub:error");t.exports=a(class{constructor(e,t,r){this._pubsub=e,this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new o(e,t,r,n.validator,this._handleSubscriptionKey)}put(e,t,r){this._pubsubDs.put(e,t,r)}get(e,t){this._pubsubDs.get(e,((r,i)=>{if(e.slice(0,n.namespaceLength).toString()===n.namespace){const t=e.toString(),r=s(e.slice(n.namespaceLength));this._subscriptions[t]=r,l(`subscribed pubsub ${t}: ${r}`)}if(r)return t(r);t(null,i)}))}_handleSubscriptionKey(e,t){const r=this._subscriptions[e];if(!r){const r=`key ${e} does not correspond to a subscription`;return l.error(r),t(c(new Error(r),"ERR_INVALID_KEY"))}let s;try{s=n.getIdKeys(i(r))}catch(e){return l.error(e),t(e)}t(null,s.routingKey.toBuffer())}getSubscriptions(e){return e(null,Object.values(this._subscriptions).filter(Boolean).map((e=>`${n.namespace}${e}`)))}cancel(e,t){if("string"!=typeof e){const e="received subscription name is not valid";return l.error(e),t(c(new Error(e),"ERR_INVALID_SUBSCRIPTION_NAME"))}e.startsWith(n.namespace)&&(e=e.substring(n.namespaceLength));const i=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!i)return t(null,{canceled:!1});try{const e=r.from(i);this._pubsubDs.unsubscribe(e)}catch(e){return t(e)}this._subscriptions[i]=undefined,l(`unsubscribed pubsub ${i}: ${e}`),t(null,{canceled:!0})}},{className:"IpnsPubsubDatastore",symbolName:"@js-ipfs/ipns/IpnsPubsubDatastore"})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs"}],[4696,{ipns:4731,multibase:5232},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("multibase"),i=e("ipns");t.exports={encodeBase32:e=>n.encode("base32",e).slice(1).toString().toUpperCase(),validator:{func:(e,t,r)=>i.validator.validate(t,e,r)},selector:(e,t)=>i.validator.select(t[0],t[1])}}}},{package:"3box>ipfs"}],[4697,{"async/setImmediate":1878,debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=e("async/setImmediate"),s=n("ipfs:mfs-preload");s.error=n("ipfs:mfs-preload:error"),t.exports=e=>{const t=e._options.preload||{};if(t.interval=t.interval||3e4,!t.enabled)return s("MFS preload disabled"),{start:e=>i(e),stop:e=>i(e)};let r,n;const o=()=>{e.files.stat("/",((i,a)=>i?(n=setTimeout(o,t.interval),s.error("failed to stat MFS root for preload",i)):r!==a.hash?(s(`preloading updated MFS root ${r} -> ${a.hash}`),e._preload(a.hash,(e=>{if(n=setTimeout(o,t.interval),e)return s.error(`failed to preload MFS root ${a.hash}`,e);r=a.hash}))):void(n=setTimeout(o,t.interval))))};return{start(i){e.files.stat("/",((e,a)=>{if(e)return i(e);r=a.hash,s(`monitoring MFS root ${r}`),n=setTimeout(o,t.interval),i()}))},stop(e){clearTimeout(n),e()}}}}}},{package:"3box>ipfs"}],[4698,{"./runtime/preload-nodejs":4705,"async/retry":1876,"async/setImmediate":1878,cids:2169,debug:2304,"multiaddr-to-uri":5221},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("async/setImmediate"),i=e("async/retry"),s=e("multiaddr-to-uri"),o=e("debug"),a=e("cids"),c=e("./runtime/preload-nodejs"),u=o("ipfs:preload");u.error=o("ipfs:preload:error");const l=e=>{e&&u.error(e)};function f(e){return e.endsWith("http")||e.endsWith("https")||(e+="/http"),s(e)}t.exports=e=>{const t=e._options.preload||{};if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],!t.enabled||!t.addresses.length){u("preload disabled");const e=(e,t)=>{t&&n((()=>t()))};return e.start=()=>{},e.stop=()=>{},e}let r=!0,s=[];const o=t.addresses.map(f),h=(e,t)=>{if(t=t||l,"string"!=typeof e)try{e=new a(e).toBaseEncodedString()}catch(e){return n((()=>t(e)))}const f=Array.from(o);let h;const d=Date.now();i({times:f.length},(t=>{if(r)return t(new Error(`preload aborted for ${e}`));s=s.filter((e=>e!==h));const n=f.shift();h=c(`${n}/api/v0/refs?r=true&arg=${e}`,t),s=s.concat(h)}),(r=>{if(s=s.filter((e=>e!==h)),r)return t(r);u(`preloaded ${e} in ${Date.now()-d}ms`),t()}))};return h.start=()=>{r=!1},h.stop=()=>{r=!0,u(`canceling ${s.length} pending preload request(s)`),s.forEach((e=>e.cancel())),s=[]},h}}}},{package:"3box>ipfs"}],[4699,{"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6");t.exports=e=>n(((...e)=>{e.pop()(new Error("not available in the browser"))}))}}},{package:"3box>ipfs"}],[47,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(t,r,n){t.origin=e.origin,n()}}}}},{package:"$root$"}],[4700,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=()=>({Addresses:{Swarm:[],API:"",Gateway:""},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/dns4/sfo-3.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM","/dns4/sgp-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu","/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6"],Swarm:{ConnMgr:{LowWater:200,HighWater:500}}})}}},{package:"3box>ipfs"}],[4701,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t=t||{};let n=`https://ipfs.io/api/v0/dns?arg=${e=encodeURIComponent(e)}`;Object.keys(t).forEach((e=>{n+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`})),self.fetch(n,{mode:"cors"}).then((e=>e.json())).then((e=>e.Path?r(null,e.Path):r(new Error(e.Message)))).catch((e=>{r(e)}))}}}},{package:"3box>ipfs"}],[4702,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=fetch}}},{package:"3box>ipfs"}],[4703,{"ipld-dag-cbor":4710,"ipld-dag-pb":4723,"ipld-raw":4727,"merge-options":5209},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("merge-options"),i=e("ipld-dag-cbor"),s=e("ipld-dag-pb"),o=e("ipld-raw");t.exports=(e,t={})=>n.call({concatArrays:!0},{blockService:e,formats:[i,s,o]},t)}}},{package:"3box>ipfs"}],[4704,{libp2p:5004,"libp2p-bootstrap":4838,"libp2p-kad-dht":4894,"libp2p-secio":4963,"libp2p-webrtc-star":4990,"libp2p-websocket-star-multi":4992,"libp2p-websockets":4997,"merge-options":5209,multiaddr:5224,"pull-mplex":5476},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("libp2p-websockets"),i=e("libp2p-webrtc-star"),s=e("libp2p-websocket-star-multi"),o=e("pull-mplex"),a=e("libp2p-secio"),c=e("libp2p-bootstrap"),u=e("libp2p-kad-dht"),l=e("libp2p"),f=e("merge-options"),h=e("multiaddr");t.exports=class extends l{constructor(e){const t=new i({id:e.peerInfo.id}),r=e.peerInfo.multiaddrs.toArray().map(String).filter((e=>e.includes("p2p-websocket-star")));e.peerInfo.multiaddrs.replace(r.map(h),"/p2p-websocket-star");const l=new s({servers:r,id:e.peerInfo.id,ignore_no_online:!r.length||e.wsStarIgnoreErrors}),d={switch:{blacklistTTL:12e4,blackListAttempts:5,maxParallelDials:100,maxColdCalls:25,dialTimeout:2e4},modules:{transport:[n,t,l],streamMuxer:[o],connEncryption:[a],peerDiscovery:[t.discovery,l.discovery,c],dht:u},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0},websocketStar:{enabled:!0}},dht:{enabled:!1},EXPERIMENTAL:{pubsub:!1}}};super(f(d,e))}}}}},{package:"3box>ipfs"}],[4705,{debug:2304},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=n("ipfs:preload");i.error=n("ipfs:preload:error"),t.exports=function(e,t){i(e);const r=new AbortController,n=r.signal;return fetch(e,{signal:n}).then((t=>{if(!t.ok)throw i.error("failed to preload",e,t.status,t.statusText),new Error(`failed to preload ${e}`);return t.text()})).then((()=>t())).catch(t),{cancel:()=>r.abort()}}}}},{package:"3box>ipfs"}],[4706,{"ipfs-repo":4553},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ipfs-repo");t.exports=e=>new n(e||"ipfs")}}},{package:"3box>ipfs"}],[4707,{debug:2304,"fsm-event":4346},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("debug"),i=n("ipfs:state");i.error=n("ipfs:state:error");const s=e("fsm-event");t.exports=e=>{const t=s("uninitialized",{uninitialized:{init:"initializing",initialized:"stopped"},initializing:{initialized:"stopped"},stopped:{start:"starting"},starting:{started:"running"},running:{stop:"stopping"},stopping:{stopped:"stopped"}});return t.on("error",(e=>i.error(e))),t.on("done",(()=>i("-> "+t._state))),t.init=()=>{t("init")},t.initialized=()=>{t("initialized")},t.stop=()=>{t("stop")},t.stopped=()=>{t("stopped")},t.start=()=>{t("start")},t.started=()=>{t("started")},t.state=()=>t._state,t}}}},{package:"3box>ipfs"}],[4708,{"async/map":1869,cids:2169,"is-ipfs":4746,"promisify-es6":5434},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("promisify-es6"),i=e("async/map"),s=e("is-ipfs"),o=e("cids");r.OFFLINE_ERROR="This command must be run in online mode. Try running 'ipfs daemon' first.";const a=n((function(e,t,n){Array.isArray(t)||(t=[t]),i(t,((t,n)=>{if("string"!=typeof t){let e;try{e=new o(t)}catch(e){return n(e)}return n(null,e.buffer)}let i;try{i=r.parseIpfsPath(t)}catch(e){return n(e)}const s=new o(i.hash),a=i.links;if(!a.length)return n(null,s.buffer);e.get(s,function t(r,i,s,o){if(s)return n(s);if(!i.length)return n(null,r.buffer);const a=i[0],c=o.Links.find((e=>e.Name===a));if(!c)return n(new Error(`no link named "${a}" under ${r}`));e.get(c.Hash,t.bind(null,c.Hash,i.slice(1)))}.bind(null,s,a))}),n)}));r.normalizePath=e=>{if(s.cid(e))return`/ipfs/${e}`;if(s.path(e))return e;throw Object.assign(new Error(`invalid ${e} path`),{code:"ERR_BAD_PATH"})},r.parseIpfsPath=function(e){const t=new Error("invalid ipfs ref path"),r=(e=e.replace(/^\/ipfs\//,"")).match(/([^/]+(?:\/[^/]+)*)\/?$/);if(!r)throw t;const[n,...i]=r[1].split("/");if(s.cid(n))return{hash:n,links:i};throw t},r.resolvePath=a}}},{package:"3box>ipfs"}],[4709,{cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids");r.cidToString=(e,t)=>{if((t=t||{}).upgrade=!1!==t.upgrade,n.isCID(e)||(e=new n(e)),0===e.version&&t.base&&"base58btc"!==t.base){if(!t.upgrade)return e.toString();e=e.toV1()}return e.toBaseEncodedString(t.base)}}}},{package:"3box>ipfs"}],[4710,{"./resolver.js":4711,"./util.js":4712},function(){with(this)return function(){"use strict";return function(e,t,r){r.util=e("./util.js"),r.resolver=e("./resolver.js"),r.codec=r.util.codec,r.defaultHashAlg=r.util.defaultHashAlg}}},{package:"3box>ipfs>ipld-dag-cbor"}],[4711,{"../../is-buffer/index.js":4735,"./util":4712,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("cids"),i=e("./util");r.resolve=(e,t)=>{let r=i.deserialize(e);const s=t.split("/").filter(Boolean);for(;s.length;){const e=s.shift();if(r[e]===undefined)throw new Error(`Object has no property '${e}'`);if(r=r[e],n.isCID(r))return{value:r,remainderPath:s.join("/")}}return{value:r,remainderPath:""}};const s=function*(e,r){if(!t.isBuffer(e)&&!n.isCID(e)&&"string"!=typeof e&&null!==e)for(const t of Object.keys(e)){const n=r===undefined?t:r+"/"+t;yield n,yield*s(e[t],n)}};r.tree=function*(e){const t=i.deserialize(e);yield*s(t)}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipld-dag-cbor"}],[4712,{borc:2095,buffer:2132,cids:2169,"is-circular":4736,multicodec:5235,"multihashing-async":5253},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){const i=e("borc"),s=e("multicodec"),o=e("multihashing-async"),a=e("cids"),c=e("is-circular");function u(e){let t;try{t=c(e)}catch(e){t=!1}if(t)throw new Error("The object passed has circular references");return function e(t){if(!t||n.isBuffer(t)||"string"==typeof t)return t;if(Array.isArray(t))return t.map(e);if(a.isCID(t))return"string"==typeof(r=t)?r=new a(r).buffer:a.isCID(r)&&(r=r.buffer),new i.Tagged(42,n.concat([n.from("00","hex"),r]));var r;const s=Object.keys(t);if(s.length>0){const r={};return s.forEach((n=>{"object"==typeof t[n]?r[n]=e(t[n]):r[n]=t[n]})),r}return t}(e)}(r=t.exports).codec=s.DAG_CBOR,r.defaultHashAlg=s.SHA2_256;const l={42:e=>(e=e.slice(1),new a(e))};let f=65536;const h=67108864;let d=h,p=null;r.configureDecoder=e=>{let t=l;e?("number"==typeof e.size&&(f=e.size),"number"==typeof e.maxSize&&(d=e.maxSize),e.tags&&(t=Object.assign({},l,e&&e.tags))):(f=65536,d=h);let r={tags:t,size:f};p=new i.Decoder(r),f=r.size},r.configureDecoder(),r.serialize=e=>{const t=u(e);return i.encode(t)},r.deserialize=e=>{if(e.length>f&&e.length<=d&&r.configureDecoder({size:e.length}),e.length>f)throw new Error("Data is too large to deserialize with current decoder");return p.decodeFirst(e)},r.cid=async(e,t)=>{const n={cidVersion:1,hashAlg:r.defaultHashAlg},i=Object.assign(n,t),c=await o(e,i.hashAlg),u=s.print[r.codec];return new a(i.cidVersion,u,c)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-cbor"}],[4713,{"../visibility":4726,"./util":4714,assert:1805,buffer:2132,cids:2169,"class-is":2171},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("cids"),i=e("assert"),s=e("class-is"),o=e("../visibility");(t.exports=s(class{constructor(e,t,r){i(r,"A link requires a cid to point to"),this._name=e||"",this._nameBuf=null,this._size=t,this._cid=new n(r),o.hidePrivateFields(this),o.addEnumerableGetters(this,["Hash","Name","Tsize"])}toString(){return`DAGLink <${this._cid.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get Name(){return this._name}get nameAsBuffer(){return null!==this._nameBuf||(this._nameBuf=r.from(this._name)),this._nameBuf}set Name(e){throw new Error("Can't set property: 'name' is immutable")}get Tsize(){return this._size}set Tsize(e){throw new Error("Can't set property: 'size' is immutable")}get Hash(){return this._cid}set Hash(e){throw new Error("Can't set property: 'cid' is immutable")}},{className:"DAGLink",symbolName:"@ipld/js-ipld-dag-pb/daglink"})).util=e("./util")}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-pb"}],[4714,{"./index":4713},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./index");t.exports.createDagLinkFromB58EncodedHash=function(e){return new n(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}}}},{package:"3box>ipfs>ipld-dag-pb"}],[4715,{"../dag-link":4713,"./create":4718,"./index":4719,"./util":4721},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./util"),i=n.cloneLinks,s=n.cloneData,o=n.toDAGLink,a=e("../dag-link"),c=e("./index"),u=e("./create");t.exports=async(e,t)=>{const r=i(e),n=s(e),l=await(async e=>a.isDAGLink(e)?e:c.isDAGNode(e)?o(e,{}):new a(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid))(t);return r.push(l),u(n,r)}}}},{package:"3box>ipfs>ipld-dag-pb"}],[4716,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=(e,t,r)=>{["",...Object.keys(e)].includes(t)||Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>e._links[r].Hash})}}}},{package:"3box>ipfs>ipld-dag-pb"}],[4717,{"./create":4718,"./util":4721},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./util"),i=n.cloneLinks,s=n.cloneData,o=e("./create");t.exports=function(e){const t=s(e),r=i(e);return o(t,r)}}}},{package:"3box>ipfs>ipld-dag-pb"}],[4718,{"../dag-link":4713,"../util.js":4725,"./index.js":4719,"./util.js":4721,buffer:2132,stable:5882},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("stable"),{serialize:i}=e("../util.js"),s=e("./util.js").linkSort,o=e("./index.js"),a=e("../dag-link");t.exports=(e,t=[])=>{if("string"==typeof e&&(e=r.from(e)),!r.isBuffer(e))throw new Error("Passed 'data' is not a buffer or a string!");t=t.map((e=>a.isDAGLink(e)?e:a.util.createDagLinkFromB58EncodedHash(e))),t=n(t,s);const c=i({Data:e,Links:t});return new o(e,t,c.length)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-pb"}],[4719,{"../visibility":4726,"./addLink":4715,"./addNamedLink":4716,"./clone":4717,"./create":4718,"./rmLink":4720,assert:1805,buffer:2132,"class-is":2171},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){const i=e("assert"),s=e("class-is"),o=e("./addNamedLink"),a=e("../visibility");(r=t.exports=s(class{constructor(e,t,r){0!==r&&i(r,"A DAGNode requires it's serialized size"),this._data=e||n.alloc(0),this._links=t,this._serializedSize=r,a.hidePrivateFields(this),a.addEnumerableGetters(this,["Data","Links"]),t.forEach(((e,t)=>{o(this,e.Name,t)}))}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this._links.map((e=>e.toJSON())),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${this.Data.toString("base64")}", links: ${this.Links.length}, size: ${this.size}>`}get size(){return this._size===undefined&&(this._size=this._links.reduce(((e,t)=>e+t.Tsize),this._serializedSize)),this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}get Data(){return this._data}set Data(e){throw new Error("Can't set property: 'Data' is immutable")}get Links(){return this._links.map((e=>({Name:e.Name,Tsize:e.Tsize,Hash:e.Hash})))}set Links(e){throw new Error("Can't set property: 'Links' is immutable")}},{className:"DAGNode",symbolName:"@ipld/js-ipld-dag-pb/dagnode"})).create=e("./create"),r.clone=e("./clone"),r.addLink=e("./addLink"),r.rmLink=e("./rmLink")}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-pb"}],[4720,{"../../../is-buffer/index.js":4735,"./create":4718,"./util":4721,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("./util"),i=n.cloneLinks,s=n.cloneData,o=e("./create"),a=e("cids");t.exports=(e,t)=>{const n=s(e);let c=i(e);if("string"==typeof t)c=c.filter((e=>e.Name!==t));else{if(!r.isBuffer(t)&&!a.isCID(t))throw new Error("second arg needs to be a name or CID");c=c.filter((e=>!e.Hash.equals(t)))}return o(n,c)}}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipld-dag-pb"}],[4721,{"../util":4725,"./../dag-link":4713,buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){const i=e("./../dag-link"),{cid:s,serialize:o}=e("../util");(r=t.exports).cloneData=function(e){let t;return e.Data&&e.Data.length>0?(t=n.alloc(e.Data.length),e.Data.copy(t)):t=n.alloc(0),t},r.cloneLinks=function(e){return e.Links.slice()},r.linkSort=function(e,t){return n.compare(e.nameAsBuffer,t.nameAsBuffer)},r.toDAGLink=async(e,t={})=>{const r=o(e),n=await s(r);return new i(t.name||"",r.length,n)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-pb"}],[4722,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}"}}},{package:"3box>ipfs>ipld-dag-pb"}],[4723,{"./dag-link":4713,"./dag-node":4719,"./resolver":4724,"./util":4725},function(){with(this)return function(){"use strict";return function(e,t,r){r.DAGNode=e("./dag-node"),r.DAGLink=e("./dag-link"),r.resolver=e("./resolver"),r.util=e("./util"),r.codec=r.util.codec,r.defaultHashAlg=r.util.defaultHashAlg}}},{package:"3box>ipfs>ipld-dag-pb"}],[4724,{"../../is-buffer/index.js":4735,"./util":4725,cids:2169},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("cids"),i=e("./util");r.resolve=(e,t)=>{let r=i.deserialize(e);const s=t.split("/").filter(Boolean);for(;s.length;){const e=s.shift();if(r[e]===undefined)throw new Error(`Object has no property '${e}'`);if(r=r[e],n.isCID(r))return{value:r,remainderPath:s.join("/")}}return{value:r,remainderPath:""}};const s=function*(e,r){if(!t.isBuffer(e)&&!n.isCID(e)&&"string"!=typeof e&&null!==e)for(const t of Object.keys(e)){const n=r===undefined?t:r+"/"+t;yield n,yield*s(e[t],n)}};r.tree=function*(e){const t=i.deserialize(e);yield*s(t)}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipld-dag-pb"}],[4725,{"./dag-link":4713,"./dag-node":4719,"./dag.proto.js":4722,buffer:2132,cids:2169,multicodec:5235,"multihashing-async":5253,protons:5450},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){const i=e("cids"),s=e("protons")(e("./dag.proto.js")),o=e("./dag-link"),a=e("./dag-node"),c=e("multicodec"),u=e("multihashing-async");(r=t.exports).codec=c.DAG_PB,r.defaultHashAlg=c.SHA2_256;r.serialize=e=>{let t=e.Data,r=e.Links||[];!a.isDAGNode(e)&&r&&(r=r.map((e=>o.isDAGLink(e)?e:o.util.createDagLinkFromB58EncodedHash(e))));const n=s.PBNode.encode(function(e){const t={};e.Data&&e.Data.length>0?t.Data=e.Data:t.Data=null;e.Links&&e.Links.length>0?t.Links=e.Links.map((e=>({Hash:e.Hash.buffer,Name:e.Name,Tsize:e.Tsize}))):t.Links=null;return t}({Data:t,Links:r}));return n},r.deserialize=e=>{const t=s.PBNode.decode(e),r=t.Links.map((e=>new o(e.Name,e.Tsize,e.Hash))),i=null==t.Data?n.alloc(0):t.Data;return new a(i,r,e.length)},r.cid=async(e,t)=>{const n={cidVersion:1,hashAlg:r.defaultHashAlg},s=Object.assign(n,t),o=await u(e,s.hashAlg),a=c.print[r.codec];return new i(s.cidVersion,a,o)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipld-dag-pb"}],[4726,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={addEnumerableGetters:(e,t)=>{for(const r of t){let t,n=e;for(;t===undefined;){if(n=Object.getPrototypeOf(n),null===n)throw new Error(`no getter named '${r}' found`);t=Object.getOwnPropertyDescriptor(n,r)}if(t.get===undefined)throw new Error(`no getter named '${r}' found`);Object.defineProperty(e,r,{enumerable:!0,get:t.get})}},hidePrivateFields:e=>{for(const t in e)"_"===t[0]&&Object.defineProperty(e,t,{enumerable:!1})}}}}},{package:"3box>ipfs>ipld-dag-pb"}],[4727,{cids:2169,multicodec:5235,"multihashing-async":5253},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("cids"),i=e("multihashing-async"),s=e("multicodec");t.exports={codec:s.RAW,defaultHashAlg:s.SHA2_256,resolver:{resolve:(e,t)=>({value:e,remainderPath:""}),tree:e=>({done:!0})},util:{deserialize:e=>e,serialize:e=>e,cid:async(e,r)=>{const o={cidVersion:1,hashAlg:t.exports.defaultHashAlg},a=Object.assign(o,r),c=await i(e,a.hashAlg),u=s.print[t.exports.codec];return new n(a.cidVersion,u,c)}}}}}},{package:"3box>ipfs>ipld-raw"}],[4728,{"../../is-buffer/index.js":4735,"./util":4729,cids:2169,"ipfs-block":4490,"ipld-dag-cbor":4710,"ipld-dag-pb":4723,"ipld-raw":4727,"merge-options":5209,multicodec:5235,"promisify-es6":5434,typical:6006},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("ipfs-block"),i=e("cids"),s=e("merge-options"),o=e("ipld-dag-cbor"),a=e("ipld-dag-pb"),c=e("ipld-raw"),u=e("multicodec"),l=e("promisify-es6"),f=e("typical"),{extendIterator:h}=e("./util");class d{constructor(e){const t=s(d.defaultOptions,e);if(!t.blockService)throw new Error("Missing blockservice");this.bs=t.blockService,this.resolvers={},"function"!=typeof t.loadFormat?this.loadFormat=async e=>{const t=u.print[e];throw new Error(`No resolver found for codec "${t}"`)}:this.loadFormat=t.loadFormat;for(const e of t.formats)this.addFormat(e)}addFormat(e){const t=e.codec;if(this.resolvers[e.format]){const e=u.print[t];throw new Error(`Resolver already exists for codec "${e}"`)}return this.resolvers[t]=e,this}removeFormat(e){return this.resolvers[e]&&delete this.resolvers[e],this}resolve(e,t){if(!i.isCID(e))throw new Error("`cid` argument must be a CID");if("string"!=typeof t)throw new Error("`path` argument must be a string");const r=async function*(){for(;null!==e;){const r=await this._getFormat(e.codec),n=await l(this.bs.get.bind(this.bs))(e),s=r.resolver.resolve(n.data,t);t=s.remainderPath;let o=s.value;if(1===Object.keys(o).length&&"/"in o)try{o=new i(o["/"])}catch(e){o=null}e=i.isCID(o)?o:null,yield{remainderPath:t,value:o}}}.bind(this);return h(r())}async get(e){const t=await l(this.bs.get.bind(this.bs))(e);return(await this._getFormat(t.cid.codec)).util.deserialize(t.data)}getMany(e){if(!f.isIterable(e)||"string"==typeof e||r.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const t=async function*(){for await(const t of e)yield this.get(t)}.bind(this);return h(t())}async put(e,t,r){if(t===undefined)throw new Error("`put` requires a format");if("number"!=typeof t)throw new Error("`format` parameter must be number (multicodec)");const i=await this._getFormat(t),o={hashAlg:i.defaultHashAlg,cidVersion:1,onlyHash:!1},a=s(o,r),c={cidVersion:a.cidVersion,hashAlg:a.hashAlg,onlyHash:a.onlyHash},u=i.util.serialize(e),f=await i.util.cid(u,c);if(!a.onlyHash){const e=new n(u,f);await l(this.bs.put.bind(this.bs))(e)}return f}putMany(e,t,n){if(!f.isIterable(e)||"string"==typeof e||r.isBuffer(e))throw new Error("`nodes` must be an iterable");if(t===undefined)throw new Error("`put` requires a format");if("number"!=typeof t)throw new Error("`format` parameter must be number (multicodec)");let i,o;const a=async function*(){for await(const r of e){if(i===undefined){o=await this._getFormat(t);const e={hashAlg:o.defaultHashAlg,cidVersion:1,onlyHash:!1};i=s(e,n)}yield this.put(r,t,i)}}.bind(this);return h(a())}async remove(e){return l(this.bs.delete.bind(this.bs))(e)}removeMany(e){if(!f.isIterable(e)||"string"==typeof e||r.isBuffer(e))throw new Error("`cids` must be an iterable of CIDs");const t=async function*(){for await(const t of e)yield this.remove(t)}.bind(this);return h(t())}tree(e,t,r){"object"==typeof t&&(r=t,t=undefined),t=t||"";const n=s({recursive:!1},r),o=async(e,t)=>{const r=(await this._getFormat(e.cid.codec)).resolver.resolve(e.data,t);return i.isCID(r.value)?r.value:null},a=async function*(){const r=[];let i;const s=[{cid:e,basePath:""}];let a;for(;r.length>0||s.length>0;){if(0===r.length&&s.length>0){({cid:e,basePath:a}=s.shift());const t=await this._getFormat(e.codec);i=await l(this.bs.get.bind(this.bs))(e);const n=t.resolver.tree(i.data);r.push(...n)}const c=r.shift();let u=a+c;n.recursive&&null!==(e=await o(i,c))&&s.push({cid:e,basePath:u+"/"}),u.startsWith(t)&&u.length>t.length&&(t.length>0&&(u=u.slice(t.length+1)),yield u)}}.bind(this);return h(a())}async _getFormat(e){if("string"==typeof e){const t=e.toUpperCase().replace(/-/g,"_");e=u[t]}if(this.resolvers[e])return this.resolvers[e];const t=await this.loadFormat(e);return this.addFormat(t),t}}d.defaultOptions={formats:[o,a,c]},t.exports=d}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipld"}],[4729,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.first=async e=>{for await(const t of e)return t},r.last=async e=>{let t;for await(t of e);return t},r.all=async e=>{const t=[];for await(const r of e)t.push(r);return t},r.extendIterator=e=>(e.first=()=>r.first(e),e.last=()=>r.last(e),e.all=()=>r.all(e),e)}}},{package:"3box>ipfs>ipld"}],[4730,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",r.ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",r.ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",r.ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",r.ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",r.ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY",r.ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID",r.ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER"}}},{package:"3box>ipfs>ipns"}],[4731,{"./errors":4730,"./pb/ipns.proto":4732,"./utils":4733,"base32-encode":2056,buffer:2132,debug:2304,"interface-datastore":4460,"libp2p-crypto":4866,multihashes:5250,"peer-id":5420,"timestamp-nano":5948},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("base32-encode"),i=e("timestamp-nano"),{Key:s}=e("interface-datastore"),o=e("libp2p-crypto"),a=e("peer-id"),c=e("multihashes"),u=e("debug"),l=u("jsipns");l.error=u("jsipns:error");const f=e("./pb/ipns.proto"),{parseRFC3339:h}=e("./utils"),d=e("./errors"),p=c.names.id,g="/ipns/",b=(e,t,r,n,i,s)=>{w(e,t,i,n,((e,o)=>{if(e)return l.error("record signature creation failed"),s(Object.assign(new Error("record signature verification failed"),{code:d.ERR_SIGNATURE_CREATION}));const a={value:t,signature:o,validityType:i,validity:n,sequence:r};return l(`ipns entry for ${t} created`),s(null,a)}))},m=(e,t,r)=>{const{value:n,validityType:i,validity:s}=t,o=k(n,i,s);e.verify(o,t.signature,((e,t)=>{if(e||!t)return l.error("record signature verification failed"),r(Object.assign(new Error("record signature verification failed"),{code:d.ERR_SIGNATURE_VERIFICATION}));if(i===f.ValidityType.EOL){let e;try{e=h(s.toString())}catch(e){return l.error("unrecognized validity format (not an rfc3339 format)"),r(Object.assign(new Error("unrecognized validity format (not an rfc3339 format)"),{code:d.ERR_UNRECOGNIZED_FORMAT}))}if(e<Date.now())return l.error("record has expired"),r(Object.assign(new Error("record has expired"),{code:d.ERR_IPNS_EXPIRED_RECORD}))}else if(i)return l.error("unrecognized validity type"),r(Object.assign(new Error("unrecognized validity type"),{code:d.ERR_UNRECOGNIZED_VALIDITY}));return l(`ipns entry for ${n} is valid`),r(null,null)}))},y=(e,t,r)=>{if(!t||!e){const e="one or more of the provided parameters are not defined";return l.error(e),r(Object.assign(new Error(e),{code:d.ERR_UNDEFINED_PARAMETER}))}if(t.pubKey){let e;try{e=o.keys.unmarshalPublicKey(t.pubKey)}catch(e){return l.error(e),r(e)}return r(null,e)}e.pubKey?r(null,e.pubKey):r(Object.assign(new Error("no public key is available"),{code:d.ERR_UNDEFINED_PARAMETER}))},_=e=>n(e,"RFC4648",{padding:!1}),w=(e,t,r,n,i)=>{const s=k(t,r,n);e.sign(s,((e,t)=>e?i(e):i(null,t)))},k=(e,t,n)=>{const i=r.from(e),s=r.from((e=>{if("0"===e.toString())return"EOL";{const t=`unrecognized validity type ${e.toString()}`;throw l.error(t),Object.assign(new Error(t),{code:d.ERR_UNRECOGNIZED_VALIDITY})}})(t)),o=r.from(n);return r.concat([i,o,s])},v=e=>{const t=c.decode(e.id);return t.code!==p?null:o.keys.unmarshalPublicKey(t.digest)},E=f.encode,x=f.decode,S={validate:(e,t,r)=>{const n=x(e),i=t.slice("/ipns/".length);let s;try{s=a.createFromBytes(i)}catch(e){return r(e)}y(s,n,((e,t)=>{if(e)return r(e);m(t,n,(e=>{if(e)return r(e);r(null,!0)}))}))},select:(e,t,r)=>{const n=x(e),i=x(t),s=n.sequence>i.sequence?0:1;if("function"!=typeof r)return s;r(null,s)}};t.exports={create:(e,t,r,n,s)=>{const o=new i(Date.now()+Number(n)).toString(),a=f.ValidityType.EOL;b(e,t,r,o,a,s)},createWithExpiration:(e,t,r,n,i)=>{const s=f.ValidityType.EOL;b(e,t,r,n,s,i)},validate:m,embedPublicKey:(e,t,r)=>{if(!e||!e.bytes||!t){const e="one or more of the provided parameters are not defined";return l.error(e),r(Object.assign(new Error(e),{code:d.ERR_UNDEFINED_PARAMETER}))}a.createFromPubKey(e.bytes,((n,i)=>{if(n)return l.error(n),r(Object.assign(new Error(n),{code:d.ERR_PEER_ID_FROM_PUBLIC_KEY}));let s;try{s=v(i)}catch(n){return l.error(n),r(Object.assign(new Error(n),{code:d.ERR_PUBLIC_KEY_FROM_ID}))}if(s)return r(null,null);try{t.pubKey=o.keys.marshalPublicKey(e)}catch(n){return l.error(n),r(n)}r(null,t)}))},extractPublicKey:y,getLocalKey:e=>new s(`/ipns/${_(e)}`),getIdKeys:e=>{const t=r.from("/pk/"),n=r.from("/ipns/");return{routingPubKey:new s(r.concat([t,e])),pkKey:new s(_(r.concat([t,e]))),routingKey:new s(r.concat([n,e])),ipnsKey:new s(_(r.concat([n,e])))}},marshal:E,unmarshal:x,validator:S,namespace:g,namespaceLength:g.length}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>ipns"}],[4732,{protons:5450},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("protons");t.exports=n('\nmessage IpnsEntry {\n  enum ValidityType {\n\t\tEOL = 0; // setting an EOL says "this record is valid until..."\n\t}\n\n  required bytes value = 1;\n\trequired bytes signature = 2;\n\n\toptional ValidityType validityType = 3;\n\toptional bytes validity = 4;\n\n\toptional uint64 sequence = 5;\n\n\toptional uint64 ttl = 6;\n\n\t// in order for nodes to properly validate a record upon receipt, they need the public\n\t// key associated with it. For old RSA keys, its easiest if we just send this as part of\n\t// the record itself. For newer ed25519 keys, the public key can be embedded in the\n\t// peerID, making this field unnecessary.\n\toptional bytes pubKey = 7;\n}\n').IpnsEntry}}},{package:"3box>ipfs>ipns"}],[4733,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports.toRFC3339=e=>`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`,t.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T"+"(\\d{2}):(\\d{2}):(\\d{2})"+"\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}}}},{package:"3box>ipfs>ipns"}],[4736,{"./lib/node":4737},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/node");function i(e,t){for(var r in t=new n(e,t),e){var s=e[r];if(s instanceof Object&&(t.contains(s)||i(s,t)))return!0}return!1}t.exports=function(e){if(!(e instanceof Object))throw new TypeError('"obj" must be an object (or inherit from it)');return i(e)}}}},{package:"3box>ipfs>ipld-dag-cbor>is-circular"}],[4737,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){this.value=e,this.next=t}t.exports=n,n.prototype.contains=function(e){for(var t=this;t;){if(t.value===e)return!0;t=t.next}return!1}}}},{package:"3box>ipfs>ipld-dag-cbor>is-circular"}],[4739,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return!(!e||e.length<2)&&(120===e[0]&&(1===e[1]||156===e[1]||218===e[1]))}}}},{package:"@metamask/snap-controllers>gunzip-maybe>is-deflate"}],[4742,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return!(!e||e.length<3)&&(31===e[0]&&139===e[1]&&8===e[2])}}}},{package:"@metamask/snap-controllers>gunzip-maybe>is-gzip"}],[4745,{"ip-regex":4465},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("ip-regex"),i=t.exports=e=>n({exact:!0}).test(e);i.v4=e=>n.v4({exact:!0}).test(e),i.v6=e=>n.v6({exact:!0}).test(e)}}},{package:"3box>ipfs>multiaddr>is-ip"}],[4746,{bs58:2139,buffer:2132,cids:2169,mafmt:5206,multiaddr:5224,multibase:5232,multihashes:5250},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("bs58"),i=e("multihashes"),s=e("multibase"),o=e("multiaddr"),a=e("mafmt"),c=e("cids"),u=/^https?:\/\/[^/]+\/(ip(f|n)s)\/((\w+).*)/,l=/^\/(ip(f|n)s)\/((\w+).*)/,f=/^https?:\/\/([^/]+)\.(ip(?:f|n)s)\.[^/]+/;function h(e){try{return new c(e),!0}catch(e){return!1}}function d(e){if(!e)return!1;if(o.isMultiaddr(e))return!0;try{return new o(e),!0}catch(e){return!1}}function p(e,t,r=1,n=4){const i=m(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipfs"!==s[r])return!1;let o=s[n];return o&&t===f&&(o=o.toLowerCase()),h(o)}function g(e,t,r=1,n){const i=m(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipns"!==s[r])return!1;if(n&&t===f){let e=s[n];return e=e.toLowerCase(),h(e)}return!0}function b(e){return"string"==typeof e}function m(e){return r.isBuffer(e)?n.encode(e):!!b(e)&&e}const y=e=>p(e,f,2,1),_=e=>g(e,f,2,1);t.exports={multihash:function(e){const t=m(e);try{const e=r.from(n.decode(t));return i.decode(e),!0}catch(e){return!1}},multiaddr:d,peerMultiaddr:function(e){return d(e)&&a.IPFS.matches(e)},cid:h,base32cid:e=>"base32"===function(e){try{return s.isEncoded(e)}catch(e){return!1}}(e)&&h(e),ipfsSubdomain:y,ipnsSubdomain:_,subdomain:e=>y(e)||_(e),subdomainPattern:f,ipfsUrl:e=>p(e,u),ipnsUrl:e=>g(e,u),url:e=>p(e,u)||g(e,u),urlPattern:u,ipfsPath:e=>p(e,l),ipnsPath:e=>g(e,l),path:e=>p(e,l)||g(e,l),pathPattern:l,urlOrPath:e=>p(e,u)||g(e,u)||p(e,l)||g(e,l),cidPath:e=>b(e)&&!h(e)&&p(`/ipfs/${e}`,l)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>is-ipfs"}],[4749,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}}}},{package:"geckodriver>got>is-plain-obj"}],[4750,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e&&"function"==typeof e.then}}}},{package:"3box>ipfs>multihashing-async>nodeify>is-promise"}],[4751,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return"function"==typeof e}function i(e){return n(e)&&2===e.length}function s(e){return n(e)&&1===e.length}r.isDuplex=function(e){return"object"==typeof e&&i(e.source)&&s(e.sink)},r.isSource=i,r.isSink=s}}},{package:"3box>ipfs>is-pull-stream"}],[4753,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],i=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];t.exports=function(e){return!e||!e.code||(-1!==n.indexOf(e.code)||-1===i.indexOf(e.code))}}}},{package:"geckodriver>got>is-retry-allowed"}],[4754,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;n.writable=e=>n(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,n.readable=e=>n(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,n.duplex=e=>n.writable(e)&&n.readable(e),n.transform=e=>n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,t.exports=n}}},{package:"@metamask/providers>is-stream"}],[4755,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=s,s.strict=o,s.loose=a;var n=Object.prototype.toString,i={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function s(e){return o(e)||a(e)}function o(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function a(e){return i[n.call(e)]}}}},{package:"jsdom>request>is-typedarray"}],[4759,{buffer:2132},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){const r=global.crypto||global.msCrypto,n=65536;r&&r.getRandomValues?t.exports=function(t){const i=new Uint8Array(t);let s=0;if(t>0)if(t>n)for(;s<i;)s+n>i?r.getRandomValues(i.subarray(s,i-s)):(r.getRandomValues(i.subarray(s,s+n)),s+=n);else r.getRandomValues(i);return e.from(i)}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-crypto>iso-random-stream"}],[4760,{"./src/relative":4761,"./src/url":4762},function(){with(this)return function(){"use strict";return function(e,t,r){const{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:o}=e("./src/url"),a=e("./src/relative");t.exports={URL:n,URLSearchParams:s,format:i,relative:a,defaultBase:o}}}},{package:"3box>ipfs>iso-url"}],[4761,{"./url":4762},function(){with(this)return function(){"use strict";return function(e,t,r){const{URLWithLegacySupport:n,format:i}=e("./url");t.exports=(e,t={},r={},s)=>{let o,a=t.protocol?t.protocol.replace(":",""):"http";a=(r[a]||s||a)+":";try{o=new n(e)}catch(e){o={}}const c=Object.assign({},t,{protocol:a||o.protocol,host:t.host||o.host});return new n(e,i(c)).toString()}}}},{package:"3box>ipfs>iso-url"}],[4762,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=self.location?self.location.protocol+"//"+self.location.host:"",i=self.URL;t.exports={URLWithLegacySupport:class{constructor(e="",t=n){this.super=new i(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:n,format:function(e){if("string"==typeof e){return new i(e).toString()}if(!(e instanceof i)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",s=e.host||"",o=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"";return`${i}${t||r}${s||o+n}${e.path||u+a}${c}`}}}}}},{package:"3box>ipfs>iso-url"}],[4764,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){return t=t||"and",r=r||", ",e.length<2?e[0]||"":(t.slice(0,2)===r?2==e.length&&(t=t.slice(1)):t=" "+t,e.slice(0,-1).join(r)+t+" "+e[e.length-1])}}}},{package:"analytics-node>@segment/loosely-validate-event>join-component"}]],[],{});